{"files":[{"patch":"@@ -358,2 +358,1 @@\n-  assert(!Thread::current()->is_Worker_thread(), \"Should not be acquired by workers\");\n-  CodeCache_lock->lock_without_safepoint_check();\n+  MutexLocker locker(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n@@ -364,0 +363,1 @@\n+  MonitorLocker locker(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n@@ -366,1 +366,1 @@\n-  CodeCache_lock->unlock();\n+  locker.notify_all();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahCodeRoots.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -161,1 +161,1 @@\n-    CodeCache_lock->lock_without_safepoint_check();\n+    MutexLocker locker(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n@@ -170,0 +170,1 @@\n+    MonitorLocker locker(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n@@ -171,1 +172,1 @@\n-    CodeCache_lock->unlock();\n+    locker.notify_all();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahRootProcessor.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"}]}