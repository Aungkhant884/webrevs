{"files":[{"patch":"@@ -302,0 +302,27 @@\n+void cleanup_graphics_config_data(AwtGraphicsConfigDataPtr awt_data) {\n+    if (awt_data->awtImage != NULL) {\n+        free(awt_data->awtImage);\n+        awt_data->awtImage = NULL;\n+    }\n+\n+    if (awt_data->color_data != NULL) {\n+        if (awt_data->color_data->img_clr_tbl != NULL) {\n+            free(awt_data->color_data->img_clr_tbl);\n+        }\n+        if (awt_data->color_data->awt_icmLUT2Colors != NULL) {\n+            free(awt_data->color_data->awt_icmLUT2Colors);\n+        }\n+        if (awt_data->color_data->awt_icmLUT != NULL) {\n+            free(awt_data->color_data->awt_icmLUT);\n+        }\n+        if (awt_data->color_data->awt_Colors != NULL) {\n+            free(awt_data->color_data->awt_Colors);\n+        }\n+        if (awt_data->color_data->img_grays != NULL) {\n+            free(awt_data->color_data->img_grays);\n+        }\n+        free(awt_data->color_data);\n+        awt_data->color_data = NULL;\n+    }\n+}\n+\n@@ -323,0 +350,3 @@\n+    \/\/ Clean up awt_data for reuse, avoid memory leak\n+    cleanup_graphics_config_data(awt_data);\n+\n@@ -498,1 +528,1 @@\n-        free (awt_data->awtImage);\n+        cleanup_graphics_config_data(awt_data);\n@@ -513,1 +543,1 @@\n-        free(awt_data->awtImage);\n+        cleanup_graphics_config_data(awt_data);\n@@ -520,1 +550,1 @@\n-        free(awt_data->awtImage);\n+        cleanup_graphics_config_data(awt_data);\n@@ -541,2 +571,1 @@\n-        free(awt_data->awtImage);\n-        free(awt_data->color_data);\n+        cleanup_graphics_config_data(awt_data);\n@@ -619,2 +648,1 @@\n-            free(awt_data->awtImage);\n-            free(awt_data->color_data);\n+            cleanup_graphics_config_data(awt_data);\n@@ -767,2 +795,1 @@\n-        free(awt_data->awtImage);\n-        free(awt_data->color_data);\n+        cleanup_graphics_config_data(awt_data);\n@@ -771,0 +798,1 @@\n+\n@@ -820,2 +848,1 @@\n-        free(awt_data->awtImage);\n-        free(awt_data->color_data);\n+        cleanup_graphics_config_data(awt_data);\n","filename":"src\/java.desktop\/unix\/native\/common\/awt\/X11Color.c","additions":38,"deletions":11,"binary":false,"changes":49,"status":"modified"}]}