{"files":[{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2012, 2015, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -7,3 +7,1 @@\n-# published by the Free Software Foundation.  Oracle designates this\n-# particular file as subject to the \"Classpath\" exception as provided\n-# by Oracle in the LICENSE file that accompanied this code.\n+# published by the Free Software Foundation.\n@@ -26,4 +24,17 @@\n-###\n-### This file is just a very small wrapper needed to run the real make\/Init.gmk.\n-### It also performs some sanity checks on make.\n-###\n+#\n+#\n+# This makefile is used to update the time zone tests data: aliases.txt displaynames.txt\n+# and VERSION. After switching to new build system in JDK8 the following make\n+# command should be used for test data updates:\n+#     make JDK_HOME=<path to built JDK with latest tzdata>\n+#     make install\n+#\n+\n+TZDATA = ..\/..\/..\/..\/..\/..\/..\/make\/data\/tzdata\n+TZDATA_VER = `grep '^tzdata' $(TZDATA)\/VERSION`\n+TZNAME = africa antarctica asia australasia europe northamerica \\\n+\tsolar87 solar88 solar89 southamerica \\\n+\tbackward\n+TZFILES = $(addprefix $(TZDATA)\/, $(TZNAME))\n+ALIASLIST = aliases.txt\n+DISPLAYNAMES = displaynames.txt\n@@ -31,3 +42,1 @@\n-# The shell code below will be executed on \/usr\/bin\/make on Solaris, but not in GNU Make.\n-# \/usr\/bin\/make lacks basically every other flow control mechanism.\n-.TEST_FOR_NON_GNUMAKE:sh=echo You are not using GNU Make\/gmake, this is a requirement. Check your path. 1>&2 && exit 1\n+all:\t$(DISPLAYNAMES) VERSION $(ALIASLIST)\n@@ -35,6 +44,2 @@\n-# The .FEATURES variable is likely to be unique for GNU Make.\n-ifeq ($(.FEATURES), )\n-  $(info Error: '$(MAKE)' does not seem to be GNU Make, which is a requirement.)\n-  $(info Check your path, or upgrade to GNU Make 3.81 or newer.)\n-  $(error Cannot continue)\n-endif\n+$(DISPLAYNAMES): $(TZFILES) makeZoneData.pl\n+\t(cat $(TZFILES) | perl makeZoneData.pl -v -V \"$(TZDATA_VER)\") 2>errors\n@@ -42,6 +47,2 @@\n-# Assume we have GNU Make, but check version.\n-ifeq ($(strip $(foreach v, 3.81% 3.82% 4.%, $(filter $v, $(MAKE_VERSION)))), )\n-  $(info Error: This version of GNU Make is too low ($(MAKE_VERSION)).)\n-  $(info Check your path, or upgrade to GNU Make 3.81 or newer.)\n-  $(error Cannot continue)\n-endif\n+VERSION: $(TZDATA)\/VERSION\n+\techo \"$(TZDATA_VER)\" > VERSION\n@@ -49,5 +50,3 @@\n-# In Cygwin, the MAKE variable gets prepended with the current directory if the\n-# make executable is called using a Windows mixed path (c:\/cygwin\/bin\/make.exe).\n-ifneq ($(findstring :, $(MAKE)), )\n-  MAKE := $(patsubst $(CURDIR)%, %, $(patsubst $(CURDIR)\/%, %, $(MAKE)))\n-endif\n+$(ALIASLIST): $(TZFILES)\n+\trm -f $(ALIASLIST)\n+\tgrep -h \"^Link\" $(TZFILES) >> $(ALIASLIST)\n@@ -55,7 +54,2 @@\n-# Locate this Makefile\n-ifeq ($(filter \/%, $(lastword $(MAKEFILE_LIST))),)\n-  makefile_path := $(CURDIR)\/$(strip $(lastword $(MAKEFILE_LIST)))\n-else\n-  makefile_path := $(lastword $(MAKEFILE_LIST))\n-endif\n-topdir := $(strip $(patsubst %\/, %, $(dir $(makefile_path))))\n+clean:\n+\trm -f $(DISPLAYNAMES) errors year???? VERSION $(ALIASLIST)\n@@ -63,2 +57,2 @@\n-# ... and then we can include the real makefile\n-include $(topdir)\/make\/Init.gmk\n+install:\n+\tcp $(ALIASLIST) $(DISPLAYNAMES) VERSION ..\/..\/TimeZoneData\/\n","filename":"test\/jdk\/java\/util\/TimeZone\/tools\/share\/Makefile","additions":31,"deletions":37,"binary":false,"changes":68,"status":"modified"}]}