{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -1410,9 +1410,0 @@\n-    @SuppressWarnings(\"serial\")\n-    public static class OperationTimedOut extends RuntimeException {\n-        public OperationTimedOut(String msg) {\n-            super(msg);\n-        }\n-        public OperationTimedOut() {\n-        }\n-    }\n-\n@@ -1436,1 +1427,1 @@\n-    public void realSync() throws OperationTimedOut {\n+    public void realSync() {\n@@ -1485,1 +1476,1 @@\n-    public void realSync(final long timeout) throws OperationTimedOut {\n+    public void realSync(final long timeout) {\n@@ -1541,1 +1532,1 @@\n-    private long timeout(long end){\n+    protected long timeout(long end){\n@@ -1571,0 +1562,3 @@\n+        if (timeout(end) <= 0) {\n+            return false;\n+        }\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/SunToolkit.java","additions":7,"deletions":13,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -128,0 +128,1 @@\n+import java.util.concurrent.TimeUnit;\n@@ -2591,1 +2592,1 @@\n-    protected boolean syncNativeQueue(final long timeout) {\n+    protected boolean syncNativeQueue(long timeout) {\n@@ -2616,3 +2617,0 @@\n-            \/\/ Generate OOPS ConfigureNotify event\n-            XlibWrapper.XMoveWindow(getDisplay(), win.getWindow(),\n-                                    win.scaleUp(++oops_position), 0);\n@@ -2620,0 +2618,1 @@\n+            oops_position += 5;\n@@ -2623,0 +2622,3 @@\n+            \/\/ Generate OOPS ConfigureNotify event\n+            XlibWrapper.XMoveWindow(getDisplay(), win.getWindow(),\n+                                    oops_position, 0);\n@@ -2628,1 +2630,3 @@\n-            long start = System.currentTimeMillis();\n+            long end = TimeUnit.NANOSECONDS.toMillis(System.nanoTime()) + timeout;\n+            \/\/ This \"while\" is a protection from spurious wake-ups.\n+            \/\/ However, we shouldn't wait for too long.\n@@ -2630,0 +2634,4 @@\n+                timeout = timeout(end);\n+                if (timeout <= 0) {\n+                    break;\n+                }\n@@ -2636,5 +2644,0 @@\n-                \/\/ This \"while\" is a protection from spurious\n-                \/\/ wake-ups.  However, we shouldn't wait for too long\n-                if ((System.currentTimeMillis() - start > timeout) && timeout >= 0) {\n-                    throw new OperationTimedOut(Long.toString(System.currentTimeMillis() - start));\n-                }\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XToolkit.java","additions":13,"deletions":10,"binary":false,"changes":23,"status":"modified"}]}