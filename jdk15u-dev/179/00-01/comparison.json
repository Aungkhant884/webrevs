{"files":[{"patch":"@@ -33,0 +33,1 @@\n+import org.testng.Assert;\n@@ -34,1 +35,0 @@\n-import org.testng.annotations.Listeners;\n@@ -41,3 +41,2 @@\n- * @bug 6376058\n- * @library \/javax\/xml\/jaxp\/libs \/javax\/xml\/jaxp\/unittest\n- * @run testng\/othervm -DrunSecMngr=true xpath.XPathTest\n+ * @bug 6376058 8276141\n+ * @build xpath.XPathTest xpath.XPathFactoryDummyImpl\n@@ -47,1 +46,0 @@\n-@Listeners({jaxp.library.BasePolicy.class})\n@@ -49,0 +47,57 @@\n+    \/*\n+     * DataProvider for testXPathFactory\n+     *\/\n+    @DataProvider(name = \"xpath\")\n+    public Object[][] getXPathFactory() throws Exception {\n+        return new Object[][]{\n+            {null},\n+            {\"xpath.XPathFactoryDummyImpl\"},\n+        };\n+    }\n+\n+    \/*\n+     * @bug 8276141\n+     * Tests the setProperty\/getProperty method for the XPathFactory.\n+    *\/\n+    @Test(dataProvider = \"xpath\")\n+    public void testXPathFactory(String factoryName)\n+            throws Exception {\n+\n+        XPathFactory xpf;\n+        if (factoryName == null) {\n+            xpf = XPathFactory.newInstance();\n+        } else {\n+            xpf = XPathFactory.newInstance(\n+                XPathFactory.DEFAULT_OBJECT_MODEL_URI, factoryName, null);\n+        }\n+\n+        \/\/ NPE\n+        Assert.assertThrows(NullPointerException.class,\n+                () -> setProperty(xpf, null, \"value\"));\n+        Assert.assertThrows(NullPointerException.class,\n+                () -> getProperty(xpf, null));\n+\n+        if (factoryName == null) {\n+            \/\/ default factory impl\n+            Assert.assertThrows(IllegalArgumentException.class,\n+                    () -> setProperty(xpf, \"unknown\", \"value\"));\n+            Assert.assertThrows(IllegalArgumentException.class,\n+                    () -> getProperty(xpf, \"unknown\"));\n+        } else {\n+            \/\/ the DummyImpl does not implement the method\n+            Assert.assertThrows(UnsupportedOperationException.class,\n+                    () -> setProperty(xpf, \"unknown\", \"value\"));\n+            Assert.assertThrows(UnsupportedOperationException.class,\n+                    () -> getProperty(xpf, \"unknown\"));\n+        }\n+    }\n+\n+    private void setProperty(XPathFactory xpf, String name, String value)\n+            throws Exception {\n+        xpf.setProperty(name, value);\n+    }\n+\n+    private void getProperty(XPathFactory xpf, String name)\n+            throws Exception {\n+        xpf.getProperty(name);\n+    }\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/xpath\/XPathTest.java","additions":60,"deletions":5,"binary":false,"changes":65,"status":"modified"}]}