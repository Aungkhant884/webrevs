{"files":[{"patch":"@@ -492,1 +492,0 @@\n-           String str = null;\n@@ -494,1 +493,1 @@\n-                str = super.getAtIndex(part, index);\n+                return getEchoString(super.getAtIndex(part, index));\n@@ -498,3 +497,2 @@\n-                char[] password = getPassword();\n-                if (password == null ||\n-                    index < 0 || index >= password.length) {\n+                int length = getDocument().getLength();\n+                if (index < 0 || index >= length) {\n@@ -503,1 +501,3 @@\n-                str = new String(password);\n+                char[] password = new char[length];\n+                Arrays.fill(password, getEchoChar());\n+                return new String(password);\n@@ -505,1 +505,0 @@\n-            return getEchoString(str);\n@@ -526,2 +525,1 @@\n-                String str = super.getAfterIndex(part, index);\n-                return getEchoString(str);\n+                return getEchoString(super.getAfterIndex(part, index));\n@@ -553,2 +551,1 @@\n-                String str = super.getBeforeIndex(part, index);\n-                return getEchoString(str);\n+                return getEchoString(super.getBeforeIndex(part, index));\n@@ -609,3 +606,2 @@\n-                char[] password = getPassword();\n-                if (password == null ||\n-                    index < 0 || index >= password.length) {\n+                int length = getDocument().getLength();\n+                if (index < 0 || index >= length) {\n@@ -614,0 +610,2 @@\n+                char[] password = new char[length];\n+                Arrays.fill(password, getEchoChar());\n@@ -615,2 +613,1 @@\n-                return new AccessibleTextSequence(0, password.length - 1,\n-                                                  getEchoString(text));\n+                return new AccessibleTextSequence(0, password.length - 1, text);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/JPasswordField.java","additions":13,"deletions":16,"binary":false,"changes":29,"status":"modified"}]}