{"files":[{"patch":"@@ -1789,7 +1789,13 @@\n-        while (!conContext.isInboundClosed()) {\n-            try {\n-                Plaintext plainText = decode(null);\n-                \/\/ discard and continue\n-                if (SSLLogger.isOn && SSLLogger.isOn(\"ssl\")) {\n-                    SSLLogger.finest(\n-                        \"discard plaintext while waiting for close\", plainText);\n+        appInput.readLock.lock();\n+        try {\n+            while (!conContext.isInboundClosed()) {\n+                try {\n+                    Plaintext plainText = decode(null);\n+                    \/\/ discard and continue\n+                    if (SSLLogger.isOn && SSLLogger.isOn(\"ssl\")) {\n+                        SSLLogger.finest(\n+                                \"discard plaintext while waiting for close\",\n+                                plainText);\n+                    }\n+                } catch (Exception e) {   \/\/ including RuntimeException\n+                    handleException(e);\n@@ -1797,2 +1803,0 @@\n-            } catch (Exception e) {   \/\/ including RuntimeException\n-                handleException(e);\n@@ -1800,0 +1804,2 @@\n+        } finally {\n+            appInput.readLock.unlock();\n","filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/SSLSocketImpl.java","additions":15,"deletions":9,"binary":false,"changes":24,"status":"modified"}]}