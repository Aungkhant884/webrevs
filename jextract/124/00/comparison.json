{"files":[{"patch":"@@ -74,2 +74,2 @@\n-            MemorySegment src = arena.allocateString(file);\n-            MemorySegment cargs = args.length == 0 ? null : arena.allocateArray(C_POINTER, args.length);\n+            MemorySegment src = arena.allocateFrom(file);\n+            MemorySegment cargs = args.length == 0 ? null : arena.allocate(C_POINTER, args.length);\n@@ -77,1 +77,1 @@\n-                cargs.set(C_POINTER, i * C_POINTER.byteSize(), arena.allocateString(args[i]));\n+                cargs.set(C_POINTER, i * C_POINTER.byteSize(), arena.allocateFrom(args[i]));\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/clang\/Index.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -50,1 +50,1 @@\n-            IMPLICIT_ALLOCATOR.allocateString(\"LIBCLANG_DISABLE_CRASH_RECOVERY=\" + CRASH_RECOVERY);\n+            IMPLICIT_ALLOCATOR.allocateFrom(\"LIBCLANG_DISABLE_CRASH_RECOVERY=\" + CRASH_RECOVERY);\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/clang\/LibClang.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -60,1 +60,1 @@\n-            MemorySegment pathStr = arena.allocateString(path.toAbsolutePath().toString());\n+            MemorySegment pathStr = arena.allocateFrom(path.toAbsolutePath().toString());\n@@ -85,1 +85,1 @@\n-                    arena.allocateArray(CXUnsavedFile.$LAYOUT(), inMemoryFiles.length);\n+                    arena.allocate(CXUnsavedFile.$LAYOUT(), inMemoryFiles.length);\n@@ -88,2 +88,2 @@\n-                start.set(C_POINTER, FILENAME_OFFSET, arena.allocateString(inMemoryFiles[i].file));\n-                start.set(C_POINTER, CONTENTS_OFFSET, arena.allocateString(inMemoryFiles[i].contents));\n+                start.set(C_POINTER, FILENAME_OFFSET, arena.allocateFrom(inMemoryFiles[i].file));\n+                start.set(C_POINTER, CONTENTS_OFFSET, arena.allocateFrom(inMemoryFiles[i].contents));\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/clang\/TranslationUnit.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -109,1 +109,1 @@\n-            MemorySegment cfname = arena.allocateString(fieldName);\n+            MemorySegment cfname = arena.allocateFrom(fieldName);\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/clang\/Type.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -64,1 +64,1 @@\n-        return (java.lang.foreign.MemorySegment)CXString.data$VH.get(seg);\n+        return (java.lang.foreign.MemorySegment)CXString.data$VH.get(seg, 0L);\n@@ -73,1 +73,1 @@\n-        CXString.data$VH.set(seg, x);\n+        CXString.data$VH.set(seg, 0L, x);\n@@ -92,1 +92,1 @@\n-        return (int)CXString.private_flags$VH.get(seg);\n+        return (int)CXString.private_flags$VH.get(seg, 0L);\n@@ -101,1 +101,1 @@\n-        CXString.private_flags$VH.set(seg, x);\n+        CXString.private_flags$VH.set(seg, 0L, x);\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/clang\/libclang\/CXString.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -66,1 +66,1 @@\n-        return (java.lang.foreign.MemorySegment)CXToken.ptr_data$VH.get(seg);\n+        return (java.lang.foreign.MemorySegment)CXToken.ptr_data$VH.get(seg, 0L);\n@@ -75,1 +75,1 @@\n-        CXToken.ptr_data$VH.set(seg, x);\n+        CXToken.ptr_data$VH.set(seg, 0L, x);\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/clang\/libclang\/CXToken.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -64,1 +64,1 @@\n-        return (int)CXType.kind$VH.get(seg);\n+        return (int)CXType.kind$VH.get(seg, 0L);\n@@ -73,1 +73,1 @@\n-        CXType.kind$VH.set(seg, x);\n+        CXType.kind$VH.set(seg, 0L, x);\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/clang\/libclang\/CXType.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -65,1 +65,1 @@\n-        return (java.lang.foreign.MemorySegment)CXUnsavedFile.Filename$VH.get(seg);\n+        return (java.lang.foreign.MemorySegment)CXUnsavedFile.Filename$VH.get(seg, 0L);\n@@ -74,1 +74,1 @@\n-        CXUnsavedFile.Filename$VH.set(seg, x);\n+        CXUnsavedFile.Filename$VH.set(seg, 0L, x);\n@@ -93,1 +93,1 @@\n-        return (java.lang.foreign.MemorySegment)CXUnsavedFile.Contents$VH.get(seg);\n+        return (java.lang.foreign.MemorySegment)CXUnsavedFile.Contents$VH.get(seg, 0L);\n@@ -102,1 +102,1 @@\n-        CXUnsavedFile.Contents$VH.set(seg, x);\n+        CXUnsavedFile.Contents$VH.set(seg, 0L, x);\n@@ -121,1 +121,1 @@\n-        return (long)CXUnsavedFile.Length$VH.get(seg);\n+        return (long)CXUnsavedFile.Length$VH.get(seg, 0L);\n@@ -130,1 +130,1 @@\n-        CXUnsavedFile.Length$VH.set(seg, x);\n+        CXUnsavedFile.Length$VH.set(seg, 0L, x);\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/clang\/libclang\/CXUnsavedFile.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -430,1 +430,1 @@\n-            append(\" = RuntimeHelper.CONSTANT_ALLOCATOR.allocateString(\\\"\");\n+            append(\" = RuntimeHelper.CONSTANT_ALLOCATOR.allocateFrom(\\\"\");\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/impl\/Constants.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -266,1 +266,1 @@\n-        append(\"\\\"));\\n\");\n+        append(\"\\\"), 0L);\\n\");\n@@ -284,1 +284,1 @@\n-        append(\"\\\"), x);\\n\");\n+        append(\"\\\"), 0L, x);\\n\");\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/impl\/HeaderFileBuilder.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -198,1 +198,1 @@\n-                + vhConstant.accessExpression() + \".get(\" + seg + \");\\n\");\n+                + vhConstant.accessExpression() + \".get(\" + seg + \", 0L);\\n\");\n@@ -214,1 +214,1 @@\n-        append(vhConstant.accessExpression() + \".set(\" + seg + \", \" + x + \");\\n\");\n+        append(vhConstant.accessExpression() + \".set(\" + seg + \", 0L, \" + x + \");\\n\");\n@@ -300,4 +300,2 @@\n-        append(seg);\n-        append(\".asSlice(\");\n-        append(index);\n-        append(\"*sizeof()));\\n\");\n+        append(seg + \", \");\n+        append(index + \" * sizeof());\");\n@@ -323,4 +321,2 @@\n-        append(seg);\n-        append(\".asSlice(\");\n-        append(index);\n-        append(\"*sizeof()), \");\n+        append(seg + \", \");\n+        append(index + \" * sizeof(), \");\n","filename":"src\/main\/java\/org\/openjdk\/jextract\/impl\/StructBuilder.java","additions":6,"deletions":10,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -55,1 +55,1 @@\n-            var addr = arena.allocate(mysize_t, 0L);\n+            var addr = arena.allocateFrom(mysize_t, 0L);\n","filename":"test\/jtreg\/generator\/test8244412\/LibTest8244412Test.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -55,1 +55,1 @@\n-                    arena.allocateString(\"%hhd %c %.2f %.2f %lld %lld %d %hd %d %d %lld %c\"), 12,\n+                    arena.allocateFrom(\"%hhd %c %.2f %.2f %lld %lld %d %hd %d %d %lld %c\"), 12,\n","filename":"test\/jtreg\/generator\/test8244959\/Test8244959.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -55,1 +55,1 @@\n-            MemorySegment seg = arena.allocateArray(C_INT, array);\n+            MemorySegment seg = arena.allocateFrom(C_INT, array);\n","filename":"test\/jtreg\/generator\/test8252121\/Test8252121.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -47,1 +47,1 @@\n-    private static final VarHandle VH_bytes = C_CHAR.arrayElementVarHandle();\n+    private static final VarHandle VH_bytes = C_CHAR.varHandle();\n@@ -174,1 +174,1 @@\n-        assertEquals(vh.get(segment), expectedValue);\n+        assertEquals(vh.get(segment, 0L), expectedValue);\n","filename":"test\/testng\/org\/openjdk\/jextract\/test\/toolprovider\/TestClassGeneration.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}