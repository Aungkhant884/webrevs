{"files":[{"patch":"@@ -30,3 +30,0 @@\n-def quote_jlink_opts = Os.isFamily(Os.FAMILY_WINDOWS)?\n-        \"\\\\\\\"--enable-native-access=org.openjdk.jextract\\\\\\\"\" :\n-        '\"--enable-native-access=org.openjdk.jextract\"';\n@@ -43,1 +40,1 @@\n-    options.compilerArgs.addAll(['--release', '18'])\n+    options.release = 18\n@@ -58,1 +55,11 @@\n-    onlyIf { !new File(\"${jextract_app_dir}\").exists() }\n+    \/\/ if these inputs or outputs change, gradle will rerun the task\n+    inputs.file(jar.archiveFile.get())\n+    outputs.dir(jextract_app_dir)\n+\n+    def quote_jlink_opts = Os.isFamily(Os.FAMILY_WINDOWS)?\n+        '\\\\\"--enable-native-access=org.openjdk.jextract\\\\\"' :\n+        '\"--enable-native-access=org.openjdk.jextract\"'\n+\n+    doFirst {\n+        delete(jextract_app_dir)\n+    }\n@@ -93,0 +100,3 @@\n+\/\/ build the jextract image when the build or assemble task is run\n+assemble.dependsOn(jextractapp)\n+\n@@ -105,1 +115,10 @@\n-    onlyIf { !new File(\"$buildDir\/jextract-jdk-test-image\").exists() }\n+    def out_dir = \"$buildDir\/jextract-jdk-test-image\"\n+\n+    \/\/ if these inputs or outputs change, gradle will rerun the task\n+    inputs.file(jar.archiveFile.get())\n+    outputs.dir(out_dir)\n+\n+    doFirst {\n+        delete(out_dir)\n+    }\n+\n@@ -110,1 +129,1 @@\n-         \"--output=$buildDir\/jextract-jdk-test-image\",\n+         \"--output=$out_dir\",\n@@ -153,1 +172,1 @@\n-\/\/ run jtreg tests. Note: needs jtreg_cmd variable set to point to the jtreg\n+\/\/ run jtreg tests. Note: needs jtreg_home variable set to point to the jtreg\n","filename":"build.gradle","additions":27,"deletions":8,"binary":false,"changes":35,"status":"modified"}]}