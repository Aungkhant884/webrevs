{"files":[{"patch":"@@ -27,1 +27,1 @@\n-def jextract_jmod_file = \"$jmods_dir\/jextract.jmod\"\n+def jextract_jmod_file = \"$jmods_dir\/org.openjdk.jextract.jmod\"\n","filename":"build.gradle","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -25,1 +25,1 @@\n-BUILD_MODULES_DIR := $(BUILD_DIR)\/modules\n+BUILD_MODULES_DIR := $(BUILD_DIR)\/jmods\n@@ -27,0 +27,2 @@\n+JEXTRACT_JMOD_LIBS_DIR := $(BUILD_DIR)\/jextract_jmod_libs\n+JEXTRACT_JMOD_CONF_DIR := $(BUILD_DIR)\/jextract_jmod_conf\n@@ -60,4 +62,17 @@\n-\t$(MKDIR) -p $(BUILD_MODULES_DIR)\/org.openjdk.jextract\n-\n-        # Copy org.openjdk.jextract classes to the right place\n-\t$(CP) -r $(BUILD_CLASSES_DIR)\/* $(BUILD_MODULES_DIR)\/org.openjdk.jextract\n+\t$(MKDIR) -p $(BUILD_MODULES_DIR)\n+\t$(MKDIR) -p $(JEXTRACT_JMOD_LIBS_DIR)\n+\t$(MKDIR) -p $(JEXTRACT_JMOD_CONF_DIR)\n+\n+\t# Copy libclang library and header files\n+\t$(CP) \"$(LIBCLANG_LIB_DIR)\/\"*clang.* \"$(JEXTRACT_JMOD_LIBS_DIR)\"\n+\t$(MKDIR) -p \"$(JEXTRACT_JMOD_CONF_DIR)\/jextract\"\n+\t$(CP) \"$(LIBCLANG_INCLUDE_DIR)\/\"*.h \"$(JEXTRACT_JMOD_CONF_DIR)\/jextract\/\"\n+\n+\t# create jextract jmod file\n+\t$(FIXPATH) $(PANAMA_JAVA_HOME)\/bin\/jmod \\\n+\t    create \\\n+\t    --module-version=18 \\\n+\t    --class-path=$(BUILD_CLASSES_DIR) \\\n+\t    --libs=$(JEXTRACT_JMOD_LIBS_DIR) \\\n+\t    --conf=$(JEXTRACT_JMOD_CONF_DIR) \\\n+\t    $(BUILD_MODULES_DIR)\/org.openjdk.jextract.jmod\n@@ -75,5 +90,0 @@\n-        # Copy libclang library and header files into the jlink'ed image\n-\t$(CP) \"$(LIBCLANG_LIB_DIR)\/\"*clang.* \"$(JEXTRACT_IMAGE_DIR)\/$(OS_LIB_DIR)\"\n-\t$(MKDIR) -p $(JEXTRACT_IMAGE_DIR)\/conf\/jextract\n-\t$(CP) \"$(LIBCLANG_INCLUDE_DIR)\/\"*.h \"$(JEXTRACT_IMAGE_DIR)\/conf\/jextract\/\"\n-\n@@ -88,5 +98,0 @@\n-        # Copy libclang library and header files into the jlink'ed test image\n-\t$(CP) $(LIBCLANG_LIB_DIR)\/*clang.* $(JEXTRACT_IMAGE_TEST_JDK_DIR)\/$(OS_LIB_DIR)\n-\t$(MKDIR) -p $(JEXTRACT_IMAGE_TEST_JDK_DIR)\/conf\/jextract\n-\t$(CP) $(LIBCLANG_INCLUDE_DIR)\/*.h $(JEXTRACT_IMAGE_TEST_JDK_DIR)\/conf\/jextract\/\n-\n","filename":"make\/Build.gmk","additions":20,"deletions":15,"binary":false,"changes":35,"status":"modified"}]}