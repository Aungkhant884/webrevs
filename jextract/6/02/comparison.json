{"files":[{"patch":"@@ -0,0 +1,64 @@\n+name: Build and test Jextract\n+\n+on:\n+  push:\n+    branches:\n+      - master\n+  pull_request:\n+    branches:\n+      - '*'\n+\n+jobs:\n+\n+  linux-x64:\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+    - name: 'Check out repository'\n+      uses: actions\/checkout@v2\n+      with:\n+        fetch-depth: 1\n+\n+    - name: 'Setup JDK 18'\n+      uses: oracle-actions\/setup-java@v1\n+      with:\n+        release: 18\n+\n+    - name: 'Check Java version'\n+      shell: sh\n+      run: |\n+        java --version\n+        echo JAVA_HOME=$JAVA_HOME\n+\n+    - name: 'Setup LLVM'\n+      shell: sh\n+      run: |\n+        mkdir deps\n+        wget -O deps\/LLVM.tar.xz https:\/\/github.com\/llvm\/llvm-project\/releases\/download\/llvmorg-13.0.0\/clang+llvm-13.0.0-x86_64-linux-gnu-ubuntu-20.04.tar.xz\n+        tar -xvf deps\/LLVM.tar.xz -C deps\n+        ls .\/deps\/clang+llvm-13.0.0-x86_64-linux-gnu-ubuntu-20.04\n+\n+    - name: 'Build Jextract'\n+      shell: sh\n+      run: |\n+        sh .\/gradlew -Pjdk18_home=$JAVA_HOME -Plibclang_home=.\/deps\/clang+llvm-13.0.0-x86_64-linux-gnu-ubuntu-20.04 clean verify        \n+\n+    - name: 'Check out JTReg'\n+      uses: actions\/checkout@v2\n+      with:\n+        repository: 'openjdk\/jtreg'\n+        ref: 'jtreg-6.2+1'\n+        fetch-depth: 1\n+        path: deps\/jtreg\n+\n+    - name: 'Build JTReg'\n+      shell: bash\n+      working-directory: .\/deps\/jtreg\n+      run: |\n+        bash .\/make\/build.sh --jdk ${JAVA_HOME_11_X64}\n+        ls build\/images\/jtreg\n+\n+    - name: 'Run tests'\n+      shell: sh\n+      run: |\n+        sh .\/gradlew -Pjdk18_home=$JAVA_HOME -Plibclang_home=.\/deps\/clang+llvm-13.0.0-x86_64-linux-gnu-ubuntu-20.04 -Pjtreg_home=.\/deps\/jtreg\/build\/images\/jtreg jtreg\n","filename":".github\/workflows\/test.yml","additions":64,"deletions":0,"binary":false,"changes":64,"status":"added"}]}