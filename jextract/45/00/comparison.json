{"files":[{"patch":"@@ -10,0 +10,4 @@\n+env:\n+  CLANG_LLVM_BASE_URL: \"https:\/\/github.com\/llvm\/llvm-project\/releases\/download\/llvmorg-13.0.0\/clang+llvm-13.0.0-x86_64\"\n+  ARCHIVE_EXT: \"tar.xz\"\n+\n@@ -12,2 +16,12 @@\n-  linux-x64:\n-    runs-on: \"ubuntu-20.04\"\n+  build-and-test:\n+    runs-on: ${{ matrix.os }}\n+    strategy:\n+      matrix:\n+        os: [macos-latest, ubuntu-20.04]\n+        include:\n+          - os: ubuntu-20.04\n+            TARGET: linux-gnu-ubuntu-20.04\n+            JAVA19_HOME: \/tmp\/deps\/jdk-19\n+          - os: macos-latest\n+            TARGET: apple-darwin\n+            JAVA19_HOME: \/tmp\/deps\/jdk-19\/jdk-19.jdk\/Contents\/Home\n@@ -24,1 +38,2 @@\n-        mkdir deps\n+        mkdir -p deps\/jtreg\n+        mkdir -p \/tmp\/deps\n@@ -37,3 +52,9 @@\n-        tar -xvf ${{ steps.download_jdk_19.outputs.archive }} -C deps\n-        ls .\/deps\/jdk-19\n-        \n+        mkdir -p \/tmp\/deps\/jdk-19\n+        tar --strip-components=1 -xvf ${{ steps.download_jdk_19.outputs.archive }} -C \/tmp\/deps\/jdk-19\n+        ls -lah \/tmp\/deps\/jdk-19\n+\n+    - name: 'Check Java 19 version'\n+      shell: sh\n+      run: |\n+        ${{ matrix.JAVA19_HOME }}\/bin\/java --version\n+\n@@ -45,1 +66,1 @@\n-    - name: 'Check Java version'\n+    - name: 'Check default Java version'\n@@ -54,3 +75,4 @@\n-        wget -O deps\/LLVM.tar.gz https:\/\/github.com\/llvm\/llvm-project\/releases\/download\/llvmorg-13.0.0\/clang+llvm-13.0.0-x86_64-linux-gnu-ubuntu-20.04.tar.xz\n-        tar -xvf deps\/LLVM.tar.gz -C deps\n-        ls .\/deps\/clang+llvm-13.0.0-x86_64-linux-gnu-ubuntu-20.04\n+        mkdir -p \/tmp\/deps\/clang_llvm\n+        wget -O \/tmp\/deps\/LLVM.tar.gz ${{ env.CLANG_LLVM_BASE_URL }}-${{ matrix.TARGET }}.${{ env.ARCHIVE_EXT }}\n+        tar --strip-components=1 -xvf \/tmp\/deps\/LLVM.tar.gz -C \/tmp\/deps\/clang_llvm\n+        ls -lah \/tmp\/deps\/clang_llvm\n@@ -61,1 +83,1 @@\n-        sh .\/gradlew -Pjdk19_home=$(realpath .\/deps\/jdk-19) -Pllvm_home=.\/deps\/clang+llvm-13.0.0-x86_64-linux-gnu-ubuntu-20.04 clean verify        \n+        sh .\/gradlew -Pjdk19_home=${{ matrix.JAVA19_HOME }} -Pllvm_home=\/tmp\/deps\/clang_llvm clean verify        \n@@ -81,1 +103,1 @@\n-        sh .\/gradlew -Pjdk19_home=$(realpath .\/deps\/jdk-19) -Pllvm_home=.\/deps\/clang+llvm-13.0.0-x86_64-linux-gnu-ubuntu-20.04 -Pjtreg_home=.\/deps\/jtreg\/build\/images\/jtreg jtreg\n+        sh .\/gradlew -Pjdk19_home=${{ matrix.JAVA19_HOME }} -Pllvm_home=\/tmp\/deps\/clang_llvm -Pjtreg_home=.\/deps\/jtreg\/build\/images\/jtreg jtreg\n","filename":".github\/workflows\/test.yml","additions":34,"deletions":12,"binary":false,"changes":46,"status":"modified"}]}