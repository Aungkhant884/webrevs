{"files":[{"patch":"@@ -230,4 +230,8 @@\n-        if (state.head.content[state.index] === null || state.base.content[state.index] === null) {\n-            const content = fetchFileContent(state);\n-            state.head.content[state.index] = content.head;\n-            state.base.content[state.index] = content.base;\n+        if (!state.comparison.files[state.index].binary) {\n+            if (state.head.content[state.index] === null || state.base.content[state.index] === null) {\n+                const content = fetchFileContent(state);\n+                if (content != null) {\n+                    state.head.content[state.index] = content.head;\n+                    state.base.content[state.index] = content.base;\n+                }\n+            }\n@@ -405,34 +409,44 @@\n-            const cdiff = create(\"a\");\n-            cdiff.href = \"#cdiff-\" + i + \"-\" + filename;\n-            cdiff.innerHTML = \"Cdiffs\";\n-            code.append(cdiff, \" \");\n-\n-            const udiff = create(\"a\");\n-            udiff.href = \"#udiff-\" + i + \"-\" + filename;\n-            udiff.innerHTML = \"Udiffs\";\n-            code.append(udiff, \" \");\n-\n-            const sdiff = create(\"a\");\n-            sdiff.href = \"#sdiff-\" + i + \"-\" + filename;\n-            sdiff.innerHTML = \"Sdiffs\";\n-            code.append(sdiff, \" \");\n-\n-            const frames = create(\"a\");\n-            frames.href = \"#frames-\" + i + \"-\" + filename;\n-            frames.innerHTML = \"Frames\";\n-            code.append(frames, \" \");\n-\n-            const oldFile = create(\"a\");\n-            oldFile.href = \"#old-\" + i + \"-\" + filename;\n-            oldFile.innerHTML = \"Old\";\n-            code.append(oldFile, \" \");\n-\n-            const newFile = create(\"a\");\n-            newFile.href = \"#new-\" + i + \"-\" + filename;\n-            newFile.innerHTML = \"New\";\n-            code.append(newFile, \" \");\n-\n-            const patchFile = create(\"a\");\n-            patchFile.href = \"#patch-\" + i + \"-\" + filename;\n-            patchFile.innerHTML = \"Patch\";\n-            code.append(patchFile, \" \");\n+            if (file.binary) {\n+                code.append(\"------ \");\n+                code.append(\"------ \");\n+                code.append(\"------ \");\n+                code.append(\"------ \");\n+                code.append(\"--- \");\n+                code.append(\"--- \");\n+                code.append(\"----- \");\n+            } else {\n+                const cdiff = create(\"a\");\n+                cdiff.href = \"#cdiff-\" + i + \"-\" + filename;\n+                cdiff.innerHTML = \"Cdiffs\";\n+                code.append(cdiff, \" \");\n+\n+                const udiff = create(\"a\");\n+                udiff.href = \"#udiff-\" + i + \"-\" + filename;\n+                udiff.innerHTML = \"Udiffs\";\n+                code.append(udiff, \" \");\n+\n+                const sdiff = create(\"a\");\n+                sdiff.href = \"#sdiff-\" + i + \"-\" + filename;\n+                sdiff.innerHTML = \"Sdiffs\";\n+                code.append(sdiff, \" \");\n+\n+                const frames = create(\"a\");\n+                frames.href = \"#frames-\" + i + \"-\" + filename;\n+                frames.innerHTML = \"Frames\";\n+                code.append(frames, \" \");\n+\n+                const oldFile = create(\"a\");\n+                oldFile.href = \"#old-\" + i + \"-\" + filename;\n+                oldFile.innerHTML = \"Old\";\n+                code.append(oldFile, \" \");\n+\n+                const newFile = create(\"a\");\n+                newFile.href = \"#new-\" + i + \"-\" + filename;\n+                newFile.innerHTML = \"New\";\n+                code.append(newFile, \" \");\n+\n+                const patchFile = create(\"a\");\n+                patchFile.href = \"#patch-\" + i + \"-\" + filename;\n+                patchFile.innerHTML = \"Patch\";\n+                code.append(patchFile, \" \");\n+            }\n@@ -464,9 +478,14 @@\n-            const newFile = create(\"a\");\n-            newFile.href = \"#new-\" + i + \"-\" + filename;\n-            newFile.innerHTML = \"New\";\n-            code.append(newFile, \" \");\n-\n-            const patchFile = create(\"a\");\n-            patchFile.href = \"#patch-\" + i + \"-\" + filename;\n-            patchFile.innerHTML = \"Patch\";\n-            code.append(patchFile, \" \");\n+            if (file.binary) {\n+                code.append(\"--- \");\n+                code.append(\"----- \");\n+            } else {\n+                const newFile = create(\"a\");\n+                newFile.href = \"#new-\" + i + \"-\" + filename;\n+                newFile.innerHTML = \"New\";\n+                code.append(newFile, \" \");\n+\n+                const patchFile = create(\"a\");\n+                patchFile.href = \"#patch-\" + i + \"-\" + filename;\n+                patchFile.innerHTML = \"Patch\";\n+                code.append(patchFile, \" \");\n+            }\n@@ -492,13 +511,20 @@\n-            const oldFile = create(\"a\");\n-            oldFile.href = \"#old-\" + i + \"-\" + filename;\n-            oldFile.innerHTML = \"Old\";\n-            code.append(oldFile, \" \");\n-\n-            code.append(\"--- \");\n-\n-            const patchFile = create(\"a\");\n-            patchFile.href = \"#patch-\" + i + \"-\" + filename;\n-            patchFile.innerHTML = \"Patch\";\n-            code.append(patchFile, \" \");\n-\n-            code.append(\"--- \");\n+            if (file.binary) {\n+                code.append(\"--- \");\n+                code.append(\"--- \");\n+                code.append(\"----- \");\n+                code.append(\"--- \");\n+            } else {\n+                const oldFile = create(\"a\");\n+                oldFile.href = \"#old-\" + i + \"-\" + filename;\n+                oldFile.innerHTML = \"Old\";\n+                code.append(oldFile, \" \");\n+\n+                code.append(\"--- \");\n+\n+                const patchFile = create(\"a\");\n+                patchFile.href = \"#patch-\" + i + \"-\" + filename;\n+                patchFile.innerHTML = \"Patch\";\n+                code.append(patchFile, \" \");\n+\n+                code.append(\"--- \");\n+            }\n@@ -1480,0 +1506,4 @@\n+    if (patch === null) {\n+        return hunks\n+    }\n+\n@@ -1680,4 +1710,8 @@\n-        state.index = i;\n-        const content = fetchFileContent(state);\n-        state.head.content[i] = content.head;\n-        state.base.content[i] = content.base;\n+        if (!state.comparison.files[i].binary) {\n+            state.index = i;\n+            const content = fetchFileContent(state);\n+            if (content != null) {\n+                state.head.content[i] = content.head;\n+                state.base.content[i] = content.base;\n+            }\n+        }\n","filename":"index.html","additions":98,"deletions":64,"binary":false,"changes":162,"status":"modified"}]}