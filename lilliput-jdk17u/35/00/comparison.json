{"files":[{"patch":"@@ -46,0 +46,7 @@\n+  if (UseCompactObjectHeaders) {\n+    \/\/ Leak profiler is broken with Lilliput, forcefully disable it.\n+    \/\/ See JDK-8275415 for more details.\n+    log_warning(jfr)(\"Leak profiler does not work with compact object headers, disabling.\");\n+    return false;\n+  }\n+\n","filename":"src\/hotspot\/share\/jfr\/leakprofiler\/leakProfiler.cpp","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -111,0 +111,1 @@\n+  assert(!UseCompactObjectHeaders, \"should not be here: broken with compact object headers\");\n","filename":"src\/hotspot\/share\/jfr\/leakprofiler\/sampling\/objectSampler.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1414,0 +1414,1 @@\n+  assert(!UseCompactObjectHeaders, \"should not be here: broken with compact object headers\");\n@@ -2961,0 +2962,6 @@\n+  if (UseCompactObjectHeaders) {\n+    \/\/ Cannot perform a heap walk safely. See JDK-8283710 and related issues.\n+    log_warning(jvmti)(\"Requested a JVMTI heap walk with compact object headers enabled. This is not supported yet.\");\n+    return;\n+  }\n+\n","filename":"src\/hotspot\/share\/prims\/jvmtiTagMap.cpp","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+\n@@ -31,1 +32,1 @@\n-# Lilliput forces specific UseCompressedClassPointers mode\n+# Tests require specific UseCompressedClassPointers mode\n@@ -35,0 +36,43 @@\n+\n+#\n+# Tests require specific UseBiasedLocking mode\n+#\n+runtime\/logging\/BiasedLockingTest.java                                              8256425 generic-all\n+compiler\/rtm\/cli\/TestUseRTMLockingOptionWithBiasedLocking.java                      8256425 generic-x64,generic-i586\n+jdk\/jfr\/event\/runtime\/TestBiasedLockRevocationEvents.java                           8256425 generic-all\n+\n+\n+#\n+# JFR heap iteration is unsafe, disabled and prints warnings\n+#\n+jdk\/jfr\/event\/oldobject\/TestAllocationTime.java                                     8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestArrayInformation.java                                   8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestCircularReference.java                                  8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestClassLoaderLeak.java                                    8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestFieldInformation.java                                   8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestG1.java                                                 8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestObjectDescription.java                                  8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestHeapDeep.java                                           8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestHeapShallow.java                                        8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestLastKnownHeapUsage.java                                 8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestListenerLeak.java                                       8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestLargeRootSet.java                                       8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestMetadataRetention.java                                  8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestParallel.java                                           8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestReferenceChainLimit.java                                8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestSanityDefault.java                                      8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestSerial.java                                             8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestShenandoah.java                                         8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestThreadLocalLeak.java                                    8275415 generic-all\n+jdk\/jfr\/event\/oldobject\/TestZ.java                                                  8275415 generic-all\n+jdk\/jfr\/event\/gc\/objectcount\/TestObjectCountAfterGCEventWithG1ConcurrentMark.java   8275415 generic-all\n+jdk\/jfr\/event\/gc\/objectcount\/TestObjectCountAfterGCEventWithG1FullCollection.java   8275415 generic-all\n+jdk\/jfr\/event\/gc\/objectcount\/TestObjectCountAfterGCEventWithSerial.java             8275415 generic-all\n+jdk\/jfr\/event\/gc\/objectcount\/TestObjectCountEvent.java                              8275415 generic-all\n+jdk\/jfr\/event\/gc\/objectcount\/TestObjectCountAfterGCEventWithParallelOld.java        8275415 generic-all\n+jdk\/jfr\/jcmd\/TestJcmdDump.java                                                      8275415 generic-all\n+jdk\/jfr\/jcmd\/TestJcmdDumpPathToGCRoots.java                                         8275415 generic-all\n+jdk\/jfr\/startupargs\/TestOldObjectQueueSize.java                                     8275415 generic-all\n+jdk\/jfr\/startupargs\/TestStartupMessage.java                                         8275415 generic-all\n+\n+\n@@ -36,1 +80,1 @@\n-# Lilliput forces specific UseBiasedLocking mode\n+# JVMTI heap iteration is unsafe, disabled and prints warnings\n@@ -38,2 +82,23 @@\n-runtime\/logging\/BiasedLockingTest.java                          1234567 generic-all\n-compiler\/rtm\/cli\/TestUseRTMLockingOptionWithBiasedLocking.java  1234567 generic-x64,generic-i586\n+serviceability\/jvmti\/Heap\/IterateHeapWithEscapeAnalysisEnabled.java                                 8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/IterateOverObjectsReachableFromObject\/iterobjreachobj001\/TestDescription.java  8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/IterateOverObjectsReachableFromObject\/iterobjreachobj002\/TestDescription.java  8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/IterateOverObjectsReachableFromObject\/iterobjreachobj003\/TestDescription.java  8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/IterateOverObjectsReachableFromObject\/iterobjreachobj004\/TestDescription.java  8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/IterateOverObjectsReachableFromObject\/iterobjreachobj005\/TestDescription.java  8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/IterateOverReachableObjects\/iterreachobj001\/TestDescription.java               8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/IterateOverReachableObjects\/iterreachobj002\/TestDescription.java               8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/IterateOverReachableObjects\/iterreachobj003\/TestDescription.java               8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/IterateOverReachableObjects\/iterreachobj004\/TestDescription.java               8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/IterateOverReachableObjects\/iterreachobj005\/TestDescription.java               8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/scenarios\/allocation\/AP01\/ap01t001\/TestDescription.java                        8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/scenarios\/allocation\/AP02\/ap02t001\/TestDescription.java                        8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/scenarios\/allocation\/AP03\/ap03t001\/TestDescription.java                        8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/scenarios\/allocation\/AP04\/ap04t003\/TestDescription.java                        8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/scenarios\/allocation\/AP05\/ap05t001\/TestDescription.java                        8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/scenarios\/allocation\/AP05\/ap05t002\/TestDescription.java                        8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/scenarios\/allocation\/AP06\/ap06t001\/TestDescription.java                        8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/scenarios\/allocation\/AP09\/ap09t001\/TestDescription.java                        8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/unit\/FollowReferences\/followref001\/TestDescription.java                        8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/unit\/FollowReferences\/followref002\/TestDescription.java                        8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/unit\/FollowReferences\/followref003\/TestDescription.java                        8283710 generic-all\n+vmTestbase\/nsk\/jvmti\/unit\/heap\/HeapWalkTests\/TestDescription.java                                   8283710 generic-all\n","filename":"test\/hotspot\/jtreg\/ProblemList-lilliput.txt","additions":69,"deletions":4,"binary":false,"changes":73,"status":"modified"}]}