{"files":[{"patch":"@@ -244,9 +244,7 @@\n-        try {\n-            Console console = System.console();\n-            if (console != null) {\n-                {\n-                    Method m = Console.class.getDeclaredMethod(\"charset\");\n-                    Object res = m.invoke(console);\n-                    if (res instanceof Charset) {\n-                        return (Charset) res;\n-                    }\n+        Console console = System.console();\n+        if (console != null) {\n+            try {\n+                Method m = Console.class.getDeclaredMethod(\"charset\");\n+                Object res = m.invoke(console);\n+                if (res instanceof Charset) {\n+                    return (Charset) res;\n@@ -254,7 +252,9 @@\n-                {\n-                    Field f = Console.class.getDeclaredField(\"cs\");\n-                    setAccessible(console, f);\n-                    Object res = f.get(console);\n-                    if (res instanceof Charset) {\n-                        return (Charset) res;\n-                    }\n+            } catch (Exception e) {\n+                \/\/ fall-through\n+            }\n+            try {\n+                Field f = Console.class.getDeclaredField(\"cs\");\n+                setAccessible(console, f);\n+                Object res = f.get(console);\n+                if (res instanceof Charset) {\n+                    return (Charset) res;\n@@ -262,7 +262,9 @@\n-                {\n-                    Method m = Console.class.getDeclaredMethod(\"encoding\");\n-                    setAccessible(console, m);\n-                    Object res = m.invoke(null);\n-                    if (res instanceof String) {\n-                        return Charset.forName((String) res);\n-                    }\n+            } catch (Exception e) {\n+                \/\/ fall-through\n+            }\n+            try {\n+                Method m = Console.class.getDeclaredMethod(\"encoding\");\n+                setAccessible(console, m);\n+                Object res = m.invoke(null);\n+                if (res instanceof String) {\n+                    return Charset.forName((String) res);\n@@ -270,0 +272,2 @@\n+            } catch (Exception e) {\n+                \/\/ fall-through\n@@ -271,2 +275,0 @@\n-        } catch (Exception e) {\n-            \/\/ fall-through\n","filename":"jmh-core\/src\/main\/java\/org\/openjdk\/jmh\/util\/Utils.java","additions":27,"deletions":25,"binary":false,"changes":52,"status":"modified"}]}