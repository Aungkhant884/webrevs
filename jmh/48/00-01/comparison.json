{"files":[{"patch":"@@ -49,1 +49,2 @@\n-    static final String BLACKHOLE_PROP_NAME = \"jmh.blackhole.mode\";\n+    static final String BLACKHOLE_MODE_PROP_NAME = \"jmh.blackhole.mode\";\n+    static final String BLACKHOLE_MODE_AUTODETECT_NAME = \"jmh.blackhole.autoDetect\";\n@@ -248,2 +249,2 @@\n-        String prop = System.getProperty(BLACKHOLE_PROP_NAME);\n-        if (prop != null) {\n+        String propMode = System.getProperty(BLACKHOLE_MODE_PROP_NAME);\n+        if (propMode != null) {\n@@ -251,1 +252,1 @@\n-                blackholeMode = BlackholeMode.valueOf(prop);\n+                blackholeMode = BlackholeMode.valueOf(propMode);\n@@ -253,0 +254,1 @@\n+                return blackholeMode;\n@@ -254,1 +256,1 @@\n-                throw new IllegalStateException(\"Unknown Blackhole mode: \" + prop);\n+                throw new IllegalStateException(\"Unknown Blackhole mode: \" + propMode);\n@@ -256,6 +258,0 @@\n-        } else if (compilerBlackholesAvailable()) {\n-            blackholeMode = BlackholeMode.COMPILER;\n-            blackholeDetectMode = BlackholeDetectMode.AUTO;\n-        } else {\n-            blackholeMode = BlackholeMode.FULL_DONTINLINE;\n-            blackholeDetectMode = BlackholeDetectMode.FALLBACK;\n@@ -264,0 +260,11 @@\n+        boolean propAutoMode = Boolean.getBoolean(BLACKHOLE_MODE_AUTODETECT_NAME);\n+        if (propAutoMode) {\n+            if (compilerBlackholesAvailable()) {\n+                blackholeMode = BlackholeMode.COMPILER;\n+                blackholeDetectMode = BlackholeDetectMode.AUTO;\n+                return blackholeMode;\n+            }\n+        }\n+\n+        blackholeMode = BlackholeMode.FULL_DONTINLINE;\n+        blackholeDetectMode = BlackholeDetectMode.FALLBACK;\n@@ -306,2 +313,2 @@\n-        FALLBACK(\"fallback\"),\n-        AUTO(\"auto-detected, use -D\" + BLACKHOLE_PROP_NAME + \" to override\"),\n+        FALLBACK(\"fallback, use -D\" + BLACKHOLE_MODE_PROP_NAME + \" to force another mode\"),\n+        AUTO(\"auto-detected, use -D\" + BLACKHOLE_MODE_AUTODETECT_NAME + \"=false to disable\"),\n","filename":"jmh-core\/src\/main\/java\/org\/openjdk\/jmh\/runner\/CompilerHints.java","additions":20,"deletions":13,"binary":false,"changes":33,"status":"modified"}]}