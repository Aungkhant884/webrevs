{"files":[{"patch":"@@ -54,0 +54,5 @@\n+        Collection<String> passMsg = Utils.tryWith(PerfSupport.PERF_EXEC, \"stat\", \"--event\", Utils.join(requestedEventNames, \",\"), \"--log-fd\", \"2\", \"echo\", \"1\");\n+        if (PerfSupport.containsUnsupported(passMsg, \"\")) {\n+            throw new ProfilerException(\"Unsupported events: \" + passMsg);\n+        }\n+\n","filename":"jmh-core\/src\/main\/java\/org\/openjdk\/jmh\/profile\/LinuxPerfAsmProfiler.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -136,1 +136,4 @@\n-                supportedEvents.add(ev);\n+                Collection<String> out = Utils.runWith(PerfSupport.PERF_EXEC, \"stat\", \"--log-fd\", \"2\", \"--field-separator\", \",\", \"--event\", ev, \"echo\", \"1\");\n+                if (!PerfSupport.containsUnsupported(out, ev)) {\n+                    supportedEvents.add(ev);\n+                }\n","filename":"jmh-core\/src\/main\/java\/org\/openjdk\/jmh\/profile\/LinuxPerfNormProfiler.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -27,0 +27,2 @@\n+import java.util.Collection;\n+\n@@ -36,0 +38,9 @@\n+    public static boolean containsUnsupported(Collection<String> msgs, String event) {\n+        for (String m : msgs) {\n+            if (m.contains(event) && m.contains(\"<not supported>\")) {\n+                return true;\n+            }\n+        }\n+        return false;\n+    }\n+\n","filename":"jmh-core\/src\/main\/java\/org\/openjdk\/jmh\/profile\/PerfSupport.java","additions":11,"deletions":0,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -531,0 +531,4 @@\n+    public static Collection<String> runWith(String... cmds) {\n+        return runWith(Arrays.asList(cmds));\n+    }\n+\n","filename":"jmh-core\/src\/main\/java\/org\/openjdk\/jmh\/util\/Utils.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"}]}