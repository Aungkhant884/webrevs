{"files":[{"patch":"@@ -28,0 +28,1 @@\n+import org.openjdk.jmh.util.JDKVersion;\n@@ -54,0 +55,15 @@\n+    public static boolean checkDisassembly(String out) {\n+        if (JDKVersion.parseMajor(System.getProperty(\"java.version\")) >= 17) {\n+            \/\/ Should always print, since abstract assembler is available\n+            return out.contains(\"StubRoutines::\");\n+        } else {\n+            if (out.contains(\"StubRoutines::\")) {\n+                \/\/ hsdis is enabled, good\n+                return true;\n+            } else {\n+                \/\/ hsdis is not enabled, okay\n+                return out.contains(\"<no assembly is recorded, native region>\");\n+            }\n+        }\n+    }\n+\n","filename":"jmh-core-it\/src\/test\/java\/org\/openjdk\/jmh\/it\/profilers\/AbstractAsmProfilerTest.java","additions":16,"deletions":0,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -60,1 +60,1 @@\n-        if (!out.contains(\"StubRoutines::\")) {\n+        if (!checkDisassembly(out)) {\n","filename":"jmh-core-it\/src\/test\/java\/org\/openjdk\/jmh\/it\/profilers\/DTraceAsmProfilerTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -60,1 +60,1 @@\n-        if (!out.contains(\"StubRoutines::\")) {\n+        if (!checkDisassembly(out)) {\n","filename":"jmh-core-it\/src\/test\/java\/org\/openjdk\/jmh\/it\/profilers\/LinuxPerfAsmProfilerTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -67,1 +67,1 @@\n-        String out = ProfilerTestUtils.checkedGet(sr, \"·out\").extendedInfo();\n+        String out = ProfilerTestUtils.checkedGet(sr, \"·stack\").extendedInfo();\n","filename":"jmh-core-it\/src\/test\/java\/org\/openjdk\/jmh\/it\/profilers\/StackProfilerTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -60,1 +60,1 @@\n-        if (!out.contains(\"StubRoutines::\")) {\n+        if (!checkDisassembly(out)) {\n","filename":"jmh-core-it\/src\/test\/java\/org\/openjdk\/jmh\/it\/profilers\/WinPerfAsmProfilerTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}