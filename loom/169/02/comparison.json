{"files":[{"patch":"@@ -36,1 +36,0 @@\n-    final AtomicBoolean isJNITestingCompleted = new AtomicBoolean(false);\n@@ -40,0 +39,1 @@\n+    volatile private boolean target_is_ready = false;\n@@ -44,8 +44,7 @@\n-            do {\n-                try {\n-                    lock.wait(1);\n-                } catch (InterruptedException ie) {\n-                    System.err.println(\"Virtual thread was interrupted as expected\");\n-                    iterrupted = true;\n-                }\n-            } while (!isJNITestingCompleted.get());\n+            try {\n+                target_is_ready = true;\n+                lock.wait();\n+            } catch (InterruptedException ie) {\n+                 System.err.println(\"Virtual thread was interrupted as expected\");\n+                 iterrupted = true;\n+            }\n@@ -57,0 +56,7 @@\n+\n+        \/\/ wait for target virtual thread to reach the expected waiting state\n+        while (!target_is_ready) {\n+           synchronized (lock) {\n+              lock.wait(1);\n+            }\n+        }\n@@ -58,1 +64,0 @@\n-        isJNITestingCompleted.set(true);\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/vthread\/InterruptThreadTest\/InterruptThreadTest.java","additions":15,"deletions":10,"binary":false,"changes":25,"status":"modified"}]}