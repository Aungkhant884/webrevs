{"files":[{"patch":"@@ -7870,9 +7870,0 @@\n-static Register get_thread() {\n-#ifdef _LP64\n-  return r15_thread;\n-#else\n-  get_thread(rdi);\n-  return rdi;\n-#endif \/\/ LP64\n-}\n-\n@@ -7910,3 +7901,1 @@\n-      Register thread = get_thread();\n-      NOT_LP64(__ push(thread));\n-      LP64_ONLY(__ movptr(c_rarg0, thread));\n+      __ movptr(c_rarg0, r15_thread);\n@@ -7918,1 +7907,0 @@\n-      NOT_LP64(__ pop(rdi));\n@@ -8080,2 +8068,2 @@\n-      static const Register _locals_register = LP64_ONLY(r14) NOT_LP64(rdi);\n-      static const Register _bcp_register    = LP64_ONLY(r13) NOT_LP64(rsi);\n+      static const Register _locals_register = r14;\n+      static const Register _bcp_register    = r13;\n@@ -8096,1 +8084,1 @@\n-  static void jfr_set_last_java_frame(MacroAssembler* _masm, Register thread) {\n+  static void jfr_set_last_java_frame(MacroAssembler* _masm) {\n@@ -8102,1 +8090,1 @@\n-    Address anchor_java_pc(thread, JavaThread::frame_anchor_offset() + JavaFrameAnchor::last_Java_pc_offset());\n+    Address anchor_java_pc(r15_thread, JavaThread::frame_anchor_offset() + JavaFrameAnchor::last_Java_pc_offset());\n@@ -8104,1 +8092,1 @@\n-    __ movptr(Address(thread, JavaThread::last_Java_sp_offset()), last_java_sp);\n+    __ movptr(Address(r15_thread, JavaThread::last_Java_sp_offset()), last_java_sp);\n@@ -8107,4 +8095,3 @@\n-  static void jfr_prologue(MacroAssembler* _masm, Register thread) {\n-    jfr_set_last_java_frame(_masm, thread);\n-    NOT_LP64(__ push(thread));\n-    LP64_ONLY(__ movptr(c_rarg0, thread));\n+  static void jfr_prologue(MacroAssembler* _masm) {\n+    jfr_set_last_java_frame(_masm);\n+    __ movptr(c_rarg0, r15_thread);\n@@ -8114,2 +8101,1 @@\n-  static void jfr_epilogue(MacroAssembler* _masm, Register thread) {\n-    NOT_LP64(__ pop(rdi));\n+  static void jfr_epilogue(MacroAssembler* _masm) {\n@@ -8122,1 +8108,1 @@\n-    bs->load_at(_masm, decorators, T_OBJECT, rax, Address(rax, 0), c_rarg1, thread);\n+    bs->load_at(_masm, decorators, T_OBJECT, rax, Address(rax, 0), c_rarg1, r15_thread);\n@@ -8133,2 +8119,1 @@\n-    Register thread = get_thread();\n-    jfr_prologue(_masm, thread);\n+    jfr_prologue(_masm);\n@@ -8136,1 +8121,1 @@\n-    jfr_epilogue(_masm, thread);\n+    jfr_epilogue(_masm);\n@@ -8147,3 +8132,2 @@\n-    \n-    Register thread = get_thread();\n-    jfr_prologue(_masm, thread);\n+\n+    jfr_prologue(_masm);\n@@ -8151,1 +8135,1 @@\n-    jfr_epilogue(_masm, thread);\n+    jfr_epilogue(_masm);\n","filename":"src\/hotspot\/cpu\/x86\/stubGenerator_x86_64.cpp","additions":16,"deletions":32,"binary":false,"changes":48,"status":"modified"}]}