{"files":[{"patch":"@@ -419,0 +419,14 @@\n+   \/**\n+     * Adjust RC of ForkJoinPool.\n+     *\n+     * @param add determine increase or decrease of RC of ForkJoinPool\n+     *\/\n+    private void updateRC(boolean add) {\n+        ForkJoinPool p;\n+        Thread carrier = Thread.currentCarrierThread();\n+        if (carrier instanceof ForkJoinWorkerThread &&\n+            (p = ((ForkJoinWorkerThread)carrier).getPool()) != null) {\n+            p.updateRC(add);\n+         }\n+    }\n+\n@@ -433,1 +447,1 @@\n-        ForkJoinPool.updateRC(false, Thread.currentCarrierThread());\n+        updateRC(false);\n@@ -443,1 +457,1 @@\n-            ForkJoinPool.updateRC(true, Thread.currentCarrierThread());\n+            updateRC(true);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/VirtualThread.java","additions":16,"deletions":2,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -1806,1 +1806,0 @@\n-     * @param carrier current carrier thread\n@@ -1808,7 +1807,2 @@\n-    public static void updateRC(boolean add, Thread carrier) {\n-        ForkJoinPool p;\n-        if (Thread.currentThread().isVirtual() &&\n-            carrier instanceof ForkJoinWorkerThread &&\n-            (p = ((ForkJoinWorkerThread)carrier).pool) != null) {\n-            p.getAndAddCtl(add ? RC_UNIT : -RC_UNIT);\n-        }\n+    public void updateRC(boolean add) {\n+        getAndAddCtl(add ? RC_UNIT : -RC_UNIT);\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/ForkJoinPool.java","additions":2,"deletions":8,"binary":false,"changes":10,"status":"modified"}]}