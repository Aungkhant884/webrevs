{"files":[{"patch":"@@ -85,2 +85,0 @@\n-enum class copy_alignment { WORD_ALIGNED, DWORD_ALIGNED };\n-\n@@ -177,4 +175,2 @@\n-NOINLINE static bool verify_continuation(oop continuation) { return Continuation::debug_verify_continuation(continuation); }\n-#define VERIFY_CONTINUATION(cont) verify_continuation((cont))\n-NOINLINE static bool verify_stack_chunk(oop chunk) { return InstanceStackChunkKlass::verify(chunk); }\n-#define VERIFY_STACK_CHUNK(chunk) verify_stack_chunk((chunk))\n+static void verify_continuation(oop continuation) { Continuation::debug_verify_continuation(continuation); }\n+static void verify_stack_chunk(oop chunk) { InstanceStackChunkKlass::verify(chunk); }\n@@ -185,0 +181,3 @@\n+#else\n+static void verify_continuation(oop continuation) { }\n+static void verify_stack_chunk(oop chunk) { }\n@@ -973,2 +972,2 @@\n-NOINLINE bool Continuation::debug_verify_continuation(oop contOop) {\n-  DEBUG_ONLY(if (!VerifyContinuations) return true;)\n+void Continuation::debug_verify_continuation(oop contOop) {\n+  DEBUG_ONLY(if (!VerifyContinuations) return;)\n@@ -1001,2 +1000,0 @@\n-\n-  return true;\n@@ -1005,2 +1002,1 @@\n-void Continuation::debug_print_continuation(oop contOop, outputStream* st) {\n-  if (st == nullptr) st = tty;\n+void Continuation::print(oop continuation) { print_on(tty, continuation); }\n@@ -1008,1 +1004,2 @@\n-  ContinuationWrapper cont(contOop);\n+void Continuation::print_on(outputStream* st, oop continuation) {\n+  ContinuationWrapper cont(continuation);\n@@ -1011,1 +1008,1 @@\n-    contOop->identity_hash(), jdk_internal_vm_Continuation::done(contOop));\n+    continuation->identity_hash(), jdk_internal_vm_Continuation::done(continuation));\n@@ -1047,1 +1044,0 @@\n-  template <copy_alignment aligned = copy_alignment::DWORD_ALIGNED>\n@@ -1136,1 +1132,0 @@\n-template <copy_alignment aligned>\n@@ -1343,1 +1338,1 @@\n-  assert(VERIFY_STACK_CHUNK(chunk), \"\");\n+  verify_stack_chunk(chunk);\n@@ -1713,3 +1708,3 @@\n-  copy_to_chunk<copy_alignment::WORD_ALIGNED>(Interpreted::frame_bottom(f) - locals,\n-                                            Interpreted::frame_bottom(hf) - locals, locals); \/\/ copy locals\n-  copy_to_chunk<copy_alignment::WORD_ALIGNED>(vsp, hsp, fsize - locals); \/\/ copy rest\n+  copy_to_chunk(Interpreted::frame_bottom(f) - locals,\n+                Interpreted::frame_bottom(hf) - locals, locals); \/\/ copy locals\n+  copy_to_chunk(vsp, hsp, fsize - locals); \/\/ copy rest\n@@ -1755,1 +1750,1 @@\n-  copy_to_chunk<copy_alignment::WORD_ALIGNED>(vsp, hsp, fsize);\n+  copy_to_chunk(vsp, hsp, fsize);\n@@ -1806,1 +1801,1 @@\n-  copy_to_chunk<copy_alignment::WORD_ALIGNED>(vsp, hsp, fsize);\n+  copy_to_chunk(vsp, hsp, fsize);\n@@ -2012,1 +2007,1 @@\n-  assert(VERIFY_CONTINUATION(cont.continuation()), \"\");\n+  verify_continuation(cont.continuation());\n@@ -2023,1 +2018,1 @@\n-    assert(VERIFY_CONTINUATION(cont.continuation()), \"\");\n+    verify_continuation(cont.continuation());\n@@ -2058,1 +2053,1 @@\n-  assert(VERIFY_CONTINUATION(oopCont), \"\");\n+  verify_continuation(oopCont);\n@@ -2066,1 +2061,1 @@\n-    assert(VERIFY_CONTINUATION(cont.continuation()), \"\");\n+    verify_continuation(cont.continuation());\n@@ -2246,1 +2241,1 @@\n-  assert(VERIFY_CONTINUATION(continuation), \"\");\n+  verify_continuation(continuation);\n@@ -2256,1 +2251,1 @@\n-  assert(VERIFY_STACK_CHUNK(chunk), \"\");\n+  verify_stack_chunk(chunk);\n@@ -2304,1 +2299,0 @@\n-  template <copy_alignment aligned = copy_alignment::DWORD_ALIGNED>\n@@ -2363,1 +2357,1 @@\n-  assert(VERIFY_CONTINUATION(_cont.continuation()), \"\");\n+  verify_continuation(_cont.continuation());\n@@ -2502,1 +2496,0 @@\n-template <copy_alignment aligned>\n@@ -2731,3 +2724,3 @@\n-  copy_from_chunk<copy_alignment::WORD_ALIGNED>(Interpreted::frame_bottom(hf) - locals,\n-                                        Interpreted::frame_bottom(f) - locals, locals); \/\/ copy locals\n-  copy_from_chunk<copy_alignment::WORD_ALIGNED>(hsp, vsp, fsize - locals); \/\/ copy rest\n+  copy_from_chunk(Interpreted::frame_bottom(hf) - locals,\n+                  Interpreted::frame_bottom(f) - locals, locals); \/\/ copy locals\n+  copy_from_chunk(hsp, vsp, fsize - locals); \/\/ copy rest\n@@ -2961,1 +2954,1 @@\n-  assert(VERIFY_CONTINUATION(oopCont), \"\");\n+  verify_continuation(oopCont);\n@@ -2981,1 +2974,1 @@\n-  assert(VERIFY_CONTINUATION(cont.continuation()), \"\");\n+  verify_continuation(cont.continuation());\n@@ -3007,1 +3000,1 @@\n-  assert(VERIFY_CONTINUATION(cont.continuation()), \"\");\n+  verify_continuation(cont.continuation());\n","filename":"src\/hotspot\/share\/runtime\/continuation.cpp","additions":30,"deletions":37,"binary":false,"changes":67,"status":"modified"},{"patch":"@@ -114,2 +114,3 @@\n-  static bool debug_verify_continuation(oop continuation);\n-  static void debug_print_continuation(oop continuation, outputStream* st = NULL);\n+  static void debug_verify_continuation(oop continuation);\n+  static void print(oop continuation);\n+  static void print_on(outputStream* st, oop continuation);\n","filename":"src\/hotspot\/share\/runtime\/continuation.hpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"}]}