{"files":[{"patch":"@@ -3891,0 +3891,1 @@\n+#if INCLUDE_JVMTI\n@@ -3892,0 +3893,3 @@\n+#else\n+  fatal(\"Should only be called with JVMTI enabled\");\n+#endif\n@@ -3895,0 +3899,1 @@\n+#if INCLUDE_JVMTI\n@@ -3916,0 +3921,3 @@\n+#else\n+  fatal(\"Should only be called with JVMTI enabled\");\n+#endif\n@@ -3919,0 +3927,1 @@\n+#if INCLUDE_JVMTI\n@@ -3941,0 +3950,3 @@\n+#else\n+  fatal(\"Should only be called with JVMTI enabled\");\n+#endif\n@@ -3944,0 +3956,1 @@\n+#if INCLUDE_JVMTI\n@@ -3946,0 +3959,3 @@\n+#else\n+  fatal(\"Should only be called with JVMTI enabled\");\n+#endif\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":16,"deletions":0,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -85,0 +85,1 @@\n+#if INCLUDE_JVMTI\n@@ -87,0 +88,1 @@\n+#endif\n@@ -789,0 +791,9 @@\n+\n+int JvmtiVTMTDisabler::VTMT_disable_count() {\n+  return _VTMT_disable_count;\n+}\n+\n+int JvmtiVTMTDisabler::VTMT_count() {\n+  return _VTMT_count;\n+}\n+\n","filename":"src\/hotspot\/share\/prims\/jvmtiThreadState.cpp","additions":11,"deletions":0,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -98,2 +98,2 @@\n-  static int  VTMT_disable_count() { return _VTMT_disable_count; };\n-  static int  VTMT_count() { return _VTMT_count; }\n+  static int  VTMT_disable_count();\n+  static int  VTMT_count();\n","filename":"src\/hotspot\/share\/prims\/jvmtiThreadState.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,1 +27,0 @@\n-#include \"gc\/g1\/g1CollectedHeap.hpp\"\n@@ -78,2 +77,0 @@\n-#include \"gc\/g1\/g1CollectedHeap.inline.hpp\"\n-\n","filename":"src\/hotspot\/share\/runtime\/continuation.cpp","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -453,3 +453,10 @@\n-  void oops_do(OopClosure* f, CodeBlobClosure* cf, const RegisterMap* map) { oops_do_internal(f, cf, NULL, DerivedPointerTable::is_active() ?\n-                                                                                                           DerivedPointerIterationMode::_with_table :\n-                                                                                                           DerivedPointerIterationMode::_ignore, map, true); }\n+  void oops_do(OopClosure* f, CodeBlobClosure* cf, const RegisterMap* map) {\n+#if COMPILER2_OR_JVMCI\n+    DerivedPointerIterationMode dpim = DerivedPointerTable::is_active() ?\n+                                       DerivedPointerIterationMode::_with_table :\n+                                       DerivedPointerIterationMode::_ignore;\n+#else\n+    DerivedPointerIterationMode dpim = DerivedPointerIterationMode::_ignore;;\n+#endif\n+    oops_do_internal(f, cf, NULL, dpim, map, true);\n+  }\n","filename":"src\/hotspot\/share\/runtime\/frame.hpp","additions":10,"deletions":3,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -622,1 +622,1 @@\n-    assert(!_handshakee->is_in_VTMT(), \"no suspend allowed in VTMT transition\");\n+    JVMTI_ONLY(assert(!_handshakee->is_in_VTMT(), \"no suspend allowed in VTMT transition\");)\n@@ -709,1 +709,1 @@\n-  assert(!_handshakee->is_in_VTMT(), \"no suspend allowed in VTMT transition\");\n+  JVMTI_ONLY(assert(!_handshakee->is_in_VTMT(), \"no suspend allowed in VTMT transition\");)\n","filename":"src\/hotspot\/share\/runtime\/handshake.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1025,0 +1025,1 @@\n+#if INCLUDE_JVMTI\n@@ -1027,0 +1028,1 @@\n+#endif\n@@ -1778,0 +1780,1 @@\n+#if INCLUDE_JVMTI\n@@ -1782,0 +1785,3 @@\n+#else\n+  fatal(\"Should only be called with JVMTI enabled\");\n+#endif\n@@ -1785,0 +1791,1 @@\n+#if INCLUDE_JVMTI\n@@ -1787,0 +1794,3 @@\n+#else\n+  fatal(\"Should only be called with JVMTI enabled\");\n+#endif\n@@ -1789,0 +1799,1 @@\n+\n@@ -2364,0 +2375,1 @@\n+#if INCLUDE_JVMTI\n@@ -2376,0 +2388,1 @@\n+#endif\n","filename":"src\/hotspot\/share\/runtime\/thread.cpp","additions":13,"deletions":0,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -929,0 +929,1 @@\n+#if INCLUDE_JVMTI\n@@ -931,0 +932,1 @@\n+#endif\n@@ -1250,2 +1252,17 @@\n-  bool is_VTMT_disabler() const                  { return _is_VTMT_disabler; }\n-  bool is_in_VTMT() const                        { return _is_in_VTMT; }\n+  bool is_VTMT_disabler() const {\n+#if INCLUDE_JVMTI\n+    return _is_VTMT_disabler;\n+#else\n+    fatal(\"Should only be called with JVMTI enabled\");\n+    return false;\n+#endif\n+  }\n+\n+  bool is_in_VTMT() const {\n+#if INCLUDE_JVMTI\n+    return _is_in_VTMT;\n+#else\n+    fatal(\"Should only be called with JVMTI enabled\");\n+    return false;\n+#endif\n+  }\n@@ -1593,0 +1610,1 @@\n+#if INCLUDE_JVMTI\n@@ -1595,0 +1613,1 @@\n+#endif\n","filename":"src\/hotspot\/share\/runtime\/thread.hpp","additions":21,"deletions":2,"binary":false,"changes":23,"status":"modified"}]}