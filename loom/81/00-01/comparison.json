{"files":[{"patch":"@@ -70,1 +70,0 @@\n-    _has_been_deoptimized(false),\n@@ -125,0 +124,1 @@\n+  assert(_mark_for_deoptimization_status != deoptimize_done, \"can't go backwards\");\n","filename":"src\/hotspot\/share\/code\/compiledMethod.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -150,1 +150,2 @@\n-    deoptimize_noupdate\n+    deoptimize_noupdate,\n+    deoptimize_done\n@@ -154,1 +155,0 @@\n-  unsigned int _has_been_deoptimized:1;\n@@ -248,2 +248,2 @@\n-  bool  has_been_deoptimized() const { assert(is_marked_for_deoptimization(), \"sanity\"); return _has_been_deoptimized; }\n-  void  mark_deoptimized() { _has_been_deoptimized = true; \/* done *\/ }\n+  bool  has_been_deoptimized() const { return _mark_for_deoptimization_status == deoptimize_done; }\n+  void  mark_deoptimized() { _mark_for_deoptimization_status = deoptimize_done; }\n@@ -257,1 +257,2 @@\n-    return _mark_for_deoptimization_status != deoptimize_noupdate;\n+    return _mark_for_deoptimization_status != deoptimize_noupdate &&\n+           _mark_for_deoptimization_status != deoptimize_done;\n","filename":"src\/hotspot\/share\/code\/compiledMethod.hpp","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"}]}