{"files":[{"patch":"@@ -47,0 +47,10 @@\n+        private static final VarHandle COUNTER;\n+        static {\n+            try {\n+                MethodHandles.Lookup l = MethodHandles.lookup();\n+                COUNTER = l.findVarHandle(BaseThreadBuilder.class, \"counter\", long.class);\n+            } catch (Exception e) {\n+                throw new InternalError(e);\n+            }\n+        }\n+\n@@ -48,1 +58,1 @@\n-        private long counter;\n+        private volatile long counter;\n@@ -70,1 +80,1 @@\n-                return name + (counter++);\n+                return name + (long) COUNTER.getAndAdd(this, 1);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/ThreadBuilders.java","additions":12,"deletions":2,"binary":false,"changes":14,"status":"modified"}]}