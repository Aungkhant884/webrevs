{"files":[{"patch":"@@ -1499,2 +1499,5 @@\n-            int dummy = (int) FORK_COUNT.getAndAdd(this, 1);\n-            return super.fork(task);\n+            Subtask<U> subtask = super.fork(task);\n+            if (ensureOpen() == OPEN) {\n+                int dummy = (int) FORK_COUNT.getAndAdd(this, 1);\n+            }\n+            return subtask;\n@@ -1532,0 +1535,2 @@\n+         * <p> This method {@link #shutdown()} all unfinished threads.\n+         *\n@@ -1562,0 +1567,2 @@\n+         * <p> This method {@link #shutdown()} all unfinished threads.\n+         *\n@@ -1590,4 +1597,1 @@\n-            int open = ensureOpen();  \/\/ throws ISE if closed\n-            if (open == SHUTDOWN) {\n-                throw new IllegalStateException();\n-            }\n+            ensureOpen();  \/\/ throws ISE if closed\n@@ -1602,0 +1606,1 @@\n+            forkCount = 0;\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/StructuredTaskScope.java","additions":11,"deletions":6,"binary":false,"changes":17,"status":"modified"}]}