{"files":[{"patch":"@@ -36,0 +36,1 @@\n+#include \"oops\/stackChunkOop.inline.hpp\"\n@@ -247,1 +248,1 @@\n-  return (stackChunkOop)ref->obj_field(_tail_offset);\n+  return stackChunkOopDesc::cast(ref->obj_field(_tail_offset));\n","filename":"src\/hotspot\/share\/classfile\/javaClasses.inline.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -38,1 +38,1 @@\n-  stackChunkOop chunk = (stackChunkOop)obj;\n+  stackChunkOop chunk = stackChunkOopDesc::cast(obj);\n@@ -46,1 +46,1 @@\n-  stackChunkOop chunk = (stackChunkOop)obj;\n+  stackChunkOop chunk = stackChunkOopDesc::cast(obj);\n","filename":"src\/hotspot\/share\/gc\/shared\/continuationGCSupport.inline.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -96,1 +96,1 @@\n-  stackChunkOop to_chunk = (stackChunkOop) cast_to_oop(to_addr);\n+  stackChunkOop to_chunk = stackChunkOopDesc::cast(cast_to_oop(to_addr));\n@@ -116,1 +116,1 @@\n-  print_chunk((stackChunkOop)obj, false, st);\n+  print_chunk(stackChunkOopDesc::cast(obj), false, st);\n@@ -297,2 +297,0 @@\n-  assert(chunk->is_stackChunk(), \"\");\n-\n@@ -693,1 +691,0 @@\n-  assert(obj->is_stackChunk(), \"\");\n@@ -695,1 +692,1 @@\n-  stackChunkOop chunk = (stackChunkOop)obj;\n+  stackChunkOop chunk = stackChunkOopDesc::cast(obj);\n@@ -697,1 +694,0 @@\n-  assert(chunk->is_stackChunk(), \"\");\n@@ -867,2 +863,0 @@\n-  assert(c->is_stackChunk(), \"\");\n-\n","filename":"src\/hotspot\/share\/oops\/instanceStackChunkKlass.cpp","additions":3,"deletions":9,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -89,2 +89,1 @@\n-  assert (obj->is_stackChunk(), \"\");\n-  stackChunkOop chunk = (stackChunkOop)obj;\n+  stackChunkOop chunk = stackChunkOopDesc::cast(obj);\n@@ -100,1 +99,0 @@\n-  assert (obj->is_stackChunk(), \"\");\n@@ -102,1 +100,1 @@\n-  stackChunkOop chunk = (stackChunkOop)obj;\n+  stackChunkOop chunk = stackChunkOopDesc::cast(obj);\n@@ -109,2 +107,1 @@\n-  assert (obj->is_stackChunk(), \"\");\n-  stackChunkOop chunk = (stackChunkOop)obj;\n+  stackChunkOop chunk = stackChunkOopDesc::cast(obj);\n","filename":"src\/hotspot\/share\/oops\/instanceStackChunkKlass.inline.hpp","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -53,2 +53,4 @@\n-  inline stackChunkOopDesc* parent() const;\n-  inline void set_parent(stackChunkOopDesc* value);\n+  static inline stackChunkOop cast(oop obj);\n+\n+  inline stackChunkOop parent() const;\n+  inline void set_parent(stackChunkOop value);\n","filename":"src\/hotspot\/share\/oops\/stackChunkOop.hpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+#include \"gc\/shared\/collectedHeap.hpp\"\n@@ -31,0 +32,1 @@\n+#include \"memory\/universe.hpp\"\n@@ -40,1 +42,6 @@\n-inline stackChunkOopDesc* stackChunkOopDesc::parent() const         { return (stackChunkOopDesc*)(oopDesc*)jdk_internal_vm_StackChunk::parent(as_oop()); }\n+inline stackChunkOop stackChunkOopDesc::cast(oop obj) {\n+  assert(obj->is_stackChunk(), \"Wrong type\");\n+  return stackChunkOop(obj);\n+}\n+\n+inline stackChunkOop stackChunkOopDesc::parent() const         { return stackChunkOopDesc::cast(jdk_internal_vm_StackChunk::parent(as_oop())); }\n@@ -42,2 +49,2 @@\n-inline bool stackChunkOopDesc::is_parent_null() const               { return jdk_internal_vm_StackChunk::is_parent_null<P>(as_oop()); }\n-inline void stackChunkOopDesc::set_parent(stackChunkOopDesc* value) { jdk_internal_vm_StackChunk::set_parent(this, (oop)value); }\n+inline bool stackChunkOopDesc::is_parent_null() const          { return jdk_internal_vm_StackChunk::is_parent_null<P>(as_oop()); }\n+inline void stackChunkOopDesc::set_parent(stackChunkOop value) { jdk_internal_vm_StackChunk::set_parent(this, value); }\n@@ -45,1 +52,1 @@\n-inline void stackChunkOopDesc::set_parent_raw(oop value)            { jdk_internal_vm_StackChunk::set_parent_raw<P>(this, value); }\n+inline void stackChunkOopDesc::set_parent_raw(oop value)       { jdk_internal_vm_StackChunk::set_parent_raw<P>(this, value); }\n@@ -99,1 +106,0 @@\n-  assert(is_stackChunk(), \"\");\n@@ -104,1 +110,0 @@\n-  assert(is_stackChunk(), \"\");\n@@ -111,1 +116,0 @@\n-  assert(is_stackChunk(), \"\");\n","filename":"src\/hotspot\/share\/oops\/stackChunkOop.inline.hpp","additions":11,"deletions":7,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -446,1 +446,1 @@\n-  _tail  = (stackChunkOop)jdk_internal_vm_Continuation::tail(_cont);\n+  _tail = jdk_internal_vm_Continuation::tail(_cont);\n@@ -456,1 +456,1 @@\n-    _tail = (stackChunkOop)jdk_internal_vm_Continuation::tail(_cont);\n+    _tail = jdk_internal_vm_Continuation::tail(_cont);\n@@ -508,1 +508,1 @@\n-  assert(_tail->is_stackChunk(), \"\");\n+\n@@ -1288,1 +1288,0 @@\n-  assert(chunk->is_stackChunk(), \"\");\n@@ -1887,1 +1886,1 @@\n-    chunk = (stackChunkOop)allocator.initialize(start);\n+      chunk = stackChunkOopDesc::cast(allocator.initialize(start));\n@@ -1891,1 +1890,1 @@\n-    chunk = (stackChunkOop)allocator.allocate(); \/\/ can safepoint\n+      chunk = stackChunkOopDesc::cast(allocator.allocate()); \/\/ can safepoint\n@@ -2534,1 +2533,1 @@\n-    ls.print_cr(\"thaw slow return_barrier: %d \" INTPTR_FORMAT, return_barrier, p2i((stackChunkOopDesc*)chunk));\n+    ls.print_cr(\"thaw slow return_barrier: %d \" INTPTR_FORMAT, return_barrier, p2i(chunk));\n","filename":"src\/hotspot\/share\/runtime\/continuation.cpp","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -139,1 +139,0 @@\n-  assert(chunk == NULL || chunk->is_stackChunk(), \"\");\n@@ -1614,2 +1613,0 @@\n-  assert(chunk->is_stackChunk(), \"\");\n-\n","filename":"src\/hotspot\/share\/runtime\/frame.cpp","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"}]}