{"files":[{"patch":"@@ -880,16 +880,0 @@\n-  Thread* current = Thread::current();\n-  methodHandle m(current, interpreter_frame_method());\n-  jint bci = interpreter_frame_bci();\n-\n-  ResourceMark rm;\n-  InterpreterOopMap mask;\n-  if (query_oop_map_cache) {\n-    m->mask_for(bci, &mask);\n-  } else {\n-    OopMapCache::compute_one_oop_map(m, bci, &mask);\n-  }\n-\n-  oops_interpreted_do0(f, map, m, bci, mask);\n-}\n-\n-void frame::oops_interpreted_do0(OopClosure* f, const RegisterMap* map, methodHandle m, jint bci, const InterpreterOopMap& mask) const {\n@@ -897,0 +881,4 @@\n+  Thread *thread = Thread::current();\n+  methodHandle m (thread, interpreter_frame_method());\n+  jint      bci = interpreter_frame_bci();\n+\n@@ -937,1 +925,1 @@\n-    if (call.is_valid()) {\n+    if (map != nullptr && call.is_valid()) {\n@@ -940,1 +928,1 @@\n-      if (map != NULL && map->include_argument_oops() &&\n+      if (map->include_argument_oops() &&\n@@ -942,1 +930,1 @@\n-        \/\/ ResourceMark rm(thread);  \/\/ is this right ???\n+        ResourceMark rm(thread);  \/\/ is this right ???\n@@ -961,1 +949,6 @@\n-  \/\/ mask.print();\n+  InterpreterOopMap mask;\n+  if (query_oop_map_cache) {\n+    m->mask_for(bci, &mask);\n+  } else {\n+    OopMapCache::compute_one_oop_map(m, bci, &mask);\n+  }\n@@ -1149,2 +1142,1 @@\n-    !map->in_cont() ? oops_interpreted_do(f, map, use_interpreter_oop_map_cache)\n-                    : oops_interpreted_do(f, map, use_interpreter_oop_map_cache);\n+    oops_interpreted_do(f, map, use_interpreter_oop_map_cache);\n","filename":"src\/hotspot\/share\/runtime\/frame.cpp","additions":14,"deletions":22,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -454,1 +454,0 @@\n-  void oops_interpreted_do0(OopClosure* f, const RegisterMap* map, methodHandle m, jint bci, const InterpreterOopMap& mask) const;\n","filename":"src\/hotspot\/share\/runtime\/frame.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}