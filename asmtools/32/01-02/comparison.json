{"files":[{"patch":"@@ -8,0 +8,2 @@\n+import java.io.File;\n+import java.io.FileInputStream;\n@@ -9,0 +11,1 @@\n+import java.io.InputStream;\n@@ -17,1 +20,0 @@\n-        \/\/for 0 file args, there is hardcoded System.exit\n@@ -38,0 +40,21 @@\n+        Assertions.assertTrue(outs.getToolBos().contains(\"0xCAFEBABE;\"));\n+    }\n+\n+    @Test\n+    public void main3StreamsStdinCorrectStream() throws IOException {\n+        ThreeStringWriters outs = new ThreeStringWriters();\n+        File in =  new File(\".\/target\/classes\/org\/openjdk\/asmtools\/jdec\/Main.class\");\n+        InputStream is = System.in;\n+        try {\n+            System.setIn(new FileInputStream(in));\n+            Main decoder = new Main(outs.getToolOutput(), outs.getErrorOutput(), outs.getLoggerOutput());\n+            int i = decoder.decode();\n+            outs.flush();\n+            Assertions.assertEquals(0, i);\n+            Assertions.assertFalse(outs.getToolBos().isEmpty());\n+            Assertions.assertTrue(outs.getErrorBos().isEmpty());\n+            Assertions.assertTrue(outs.getLoggerBos().isEmpty());\n+            Assertions.assertTrue(outs.getToolBos().contains(\"0xCAFEBABE\"));\n+        }finally {\n+            System.setIn(is);\n+        }\n","filename":"test\/org\/openjdk\/asmtools\/jdec\/MainTest.java","additions":24,"deletions":1,"binary":false,"changes":25,"status":"modified"}]}