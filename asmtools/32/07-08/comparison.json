{"files":[{"patch":"@@ -14,0 +14,1 @@\n+import java.nio.charset.StandardCharsets;\n@@ -74,1 +75,1 @@\n-    public static class StdinInput implements  ToolInput {\n+    public static class ByteInput implements  ToolInput {\n@@ -79,12 +80,6 @@\n-        public StdinInput() {\n-            try {\n-                byte[] buffer = new byte[32 * 1024];\n-                ByteArrayOutputStream baos = new ByteArrayOutputStream();\n-                int bytesRead;\n-                while ((bytesRead = System.in.read(buffer)) > 0) {\n-                    baos.write(buffer, 0, bytesRead);\n-                }\n-                bytes = baos.toByteArray();\n-            }catch (Exception ex){\n-                throw new RuntimeException(ex);\n-            }\n+        public ByteInput(final byte[] bytes) {\n+            this.bytes = bytes;\n+        }\n+\n+        public ByteInput(final String bytes) {\n+            this.bytes = bytes.getBytes(StandardCharsets.UTF_8);\n@@ -96,1 +91,1 @@\n-            return \"stdin\/in\";\n+            return \"bytes\/bytes\";\n@@ -124,0 +119,27 @@\n+\n+    public static class StdinInput extends   ByteInput {\n+\n+        public StdinInput() {\n+            super(drainStdIn());\n+        }\n+\n+        private static byte[] drainStdIn() {\n+            try {\n+                byte[] buffer = new byte[32 * 1024];\n+                ByteArrayOutputStream baos = new ByteArrayOutputStream();\n+                int bytesRead;\n+                while ((bytesRead = System.in.read(buffer)) > 0) {\n+                    baos.write(buffer, 0, bytesRead);\n+                }\n+                return baos.toByteArray();\n+            } catch (Exception ex) {\n+                throw new RuntimeException(ex);\n+            }\n+        }\n+\n+        @Override\n+        public String getFileName() {\n+            \/\/get parent is used\n+            return \"stdin\/in\";\n+        }\n+    }\n","filename":"src\/org\/openjdk\/asmtools\/common\/ToolInput.java","additions":36,"deletions":14,"binary":false,"changes":50,"status":"modified"}]}