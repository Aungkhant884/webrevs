{"files":[{"patch":"@@ -18,0 +18,1 @@\n+\/maven\/.idea\/\n@@ -21,0 +22,3 @@\n+maven\/target\n+maven\/src\n+maven\/pom.xml\n","filename":".gitignore","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,69 @@\n+#!\/bin\/bash\n+\n+#####################################################################################################\n+# Symlinks are forbidden in openjdk project, thus we generate them on the fly togehter with pom.xml #\n+#####################################################################################################\n+\n+set -eo pipefail\n+\n+## resolve folder of this script, following all symlinks,\n+## http:\/\/stackoverflow.com\/questions\/59895\/can-a-bash-script-tell-what-directory-its-stored-in\n+SCRIPT_SOURCE=\"${BASH_SOURCE[0]}\"\n+while [ -h \"$SCRIPT_SOURCE\" ]; do # resolve $SOURCE until the file is no longer a symlink\n+  SCRIPT_DIR=\"$( cd -P \"$( dirname \"$SCRIPT_SOURCE\" )\" && pwd )\"\n+  SCRIPT_SOURCE=\"$(readlink \"$SCRIPT_SOURCE\")\"\n+  # if $SOURCE was a relative symlink, we need to resolve it relative to the path where the symlink file was located\n+  [[ $SCRIPT_SOURCE != \/* ]] && SCRIPT_SOURCE=\"$SCRIPT_DIR\/$SCRIPT_SOURCE\"\n+done\n+readonly SCRIPT_DIR=\"$( cd -P \"$( dirname \"$SCRIPT_SOURCE\" )\" && pwd )\"\n+readonly PROJECT_DIR=\"$( readlink -f \"$SCRIPT_DIR\/..\" )\"\n+\n+PRODUCT_INFO=\"$PROJECT_DIR\/build\/productinfo.properties\"\n+\n+function readProperty() {\n+  cat \"$PRODUCT_INFO\" | grep \"$1\\s\\+=\" | sed \"s\/.*=\\s\\+\/\/\"\n+}\n+\n+PRODUCT_NAME=$(readProperty \"PRODUCT_NAME\")\n+PRODUCT_VERSION=$(readProperty \"PRODUCT_VERSION\")\n+PRODUCT_MILESTONE=$(readProperty \"PRODUCT_MILESTONE\")\n+PRODUCT_BUILDNUMBER=$(readProperty \"PRODUCT_BUILDNUMBER\")\n+PRODUCT_NAME_LONG=$(readProperty \"PRODUCT_NAME_LONG\")\n+\n+echo \"Generating $SCRIPT_DIR\/pom.xml for $PRODUCT_NAME $PRODUCT_VERSION $PRODUCT_MILESTONE $PRODUCT_BUILDNUMBER ($PRODUCT_NAME_LONG)\"\n+cat \"$SCRIPT_DIR\/pom.xml.in\" | \\\n+sed \"s\/\\[PRODUCT_NAME\\]\/$PRODUCT_NAME\/g\" | \\\n+sed \"s\/\\[PRODUCT_VERSION\\]\/$PRODUCT_VERSION\/g\" | \\\n+sed \"s\/\\[PRODUCT_MILESTONE\\]\/$PRODUCT_MILESTONE\/g\" | \\\n+sed \"s\/\\[PRODUCT_BUILDNUMBER\\]\/$PRODUCT_BUILDNUMBER\/g\" | \\\n+sed \"s\/\\[PRODUCT_NAME_LONG\\]\/$PRODUCT_NAME_LONG\/g\" > \"$SCRIPT_DIR\/pom.xml\"\n+echo \"Done\"\n+\n+echo \"Creating symlinks to symulate maven structure\"\n+FILES_LINKS=\"src\/main\/java\/org=..\/..\/..\/..\/src\/org\/\n+src\/main\/resources\/org\/openjdk\/asmtools\/i18n.properties=..\/..\/..\/..\/..\/..\/..\/src\/org\/openjdk\/asmtools\/i18n.properties\n+src\/main\/resources\/org\/openjdk\/asmtools\/jasm\/i18n.properties=..\/..\/..\/..\/..\/..\/..\/..\/src\/org\/openjdk\/asmtools\/jasm\/i18n.properties\n+src\/main\/resources\/org\/openjdk\/asmtools\/jcdec\/i18n.properties=..\/..\/..\/..\/..\/..\/..\/..\/src\/org\/openjdk\/asmtools\/jcdec\/i18n.properties\n+src\/main\/resources\/org\/openjdk\/asmtools\/jcoder\/i18n.properties=..\/..\/..\/..\/..\/..\/..\/..\/src\/org\/openjdk\/asmtools\/jcoder\/i18n.properties\n+src\/main\/resources\/org\/openjdk\/asmtools\/jdec\/i18n.properties=..\/..\/..\/..\/..\/..\/..\/..\/src\/org\/openjdk\/asmtools\/jdec\/i18n.properties\n+src\/main\/resources\/org\/openjdk\/asmtools\/jdis\/i18n.properties=..\/..\/..\/..\/..\/..\/..\/..\/src\/org\/openjdk\/asmtools\/jdis\/i18n.properties\n+src\/main\/resources\/org\/openjdk\/asmtools\/util\/productinfo.properties=..\/..\/..\/..\/..\/..\/..\/..\/build\/productinfo.properties\"\n+\n+pushd $SCRIPT_DIR > \/dev\/null\n+  for FILE_LINK in $FILES_LINKS ; do\n+    FILE=$(echo \"$FILE_LINK\" | sed \"s\/=.*\/\/\")\n+    LINK=$(echo \"$FILE_LINK\" | sed \"s\/.*=\/\/\")\n+    DIR=$(dirname \"$FILE\")\n+    NAME=$(basename \"$FILE\")\n+    if [ ! -e \"$SCRIPT_DIR\/$FILE\" ] ; then\n+      mkdir -vp \"$SCRIPT_DIR\/$DIR\"\n+      pushd \"$SCRIPT_DIR\/$DIR\" > \/dev\/null\n+        echo \"$SCRIPT_DIR\/$DIR\"\n+        ln -sv \"$LINK\" \"$NAME\"\n+      popd > \/dev\/null\n+    fi\n+  done\n+popd > \/dev\/null\n+echo \"Done\"\n+\n+\n","filename":"maven\/mvngen.sh","additions":69,"deletions":0,"binary":false,"changes":69,"status":"added"},{"patch":"@@ -0,0 +1,55 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http:\/\/maven.apache.org\/POM\/4.0.0\"\n+         xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http:\/\/maven.apache.org\/POM\/4.0.0 http:\/\/maven.apache.org\/xsd\/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0<\/modelVersion>\n+\n+    <groupId>org.openjdk<\/groupId>\n+<!-- substituted from build\/productinfo.properties -->\n+    <artifactId>[PRODUCT_NAME]<\/artifactId>\n+    <version>[PRODUCT_VERSION].b[PRODUCT_BUILDNUMBER]-[PRODUCT_MILESTONE]<\/version>\n+<!--eg:      7.0.b10-ea-->\n+    <packaging>jar<\/packaging>\n+\n+    <name>[PRODUCT_NAME]<\/name>\n+    <description>Maven wrapper around [PRODUCT_NAME] - [PRODUCT_NAME_LONG] project<\/description>\n+\n+    <scm>\n+        <url>https:\/\/github.com\/openjdk\/asmtools<\/url>\n+        <connection>scm:git:https:\/\/git@github.com\/openjdk\/asmtools.git<\/connection>\n+        <developerConnection>scm:git:https:\/\/git@github.com\/openjdk\/asmtools.git<\/developerConnection>\n+        <tag>HEAD<\/tag>\n+    <\/scm>\n+  <properties>\n+        <project.build.sourceEncoding>UTF-8<\/project.build.sourceEncoding>\n+  <\/properties>\n+\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins<\/groupId>\n+                <artifactId>maven-compiler-plugin<\/artifactId>\n+                <version>3.8.1<\/version>\n+                <configuration>\n+                    <source>8<\/source>\n+                    <target>8<\/target>\n+                <\/configuration>\n+            <\/plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins<\/groupId>\n+                <artifactId>maven-jar-plugin<\/artifactId>\n+                <version>3.0.2<\/version>\n+                <configuration>\n+                    <archive>\n+                        <manifest>\n+                            <addClasspath>true<\/addClasspath>\n+                            <mainClass>org.openjdk.asmtools.Main<\/mainClass>\n+                        <\/manifest>\n+                    <\/archive>\n+                <\/configuration>\n+            <\/plugin>\n+        <\/plugins>\n+    <\/build>\n+\n+<\/project>\n","filename":"maven\/pom.xml.in","additions":55,"deletions":0,"binary":false,"changes":55,"status":"added"}]}