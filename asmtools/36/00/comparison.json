{"files":[{"patch":"@@ -25,0 +25,1 @@\n+import org.openjdk.asmtools.common.Environment;\n@@ -35,0 +36,1 @@\n+    public static final String VERSION_SWITCH=\"-version\";\n@@ -47,2 +49,2 @@\n-            usage(null, 0);\n-        } else if (cmd.equals(\"-version\")) {\n+            usage(null, Environment.OK);\n+        } else if (cmd.equals(VERSION_SWITCH)) {\n@@ -50,0 +52,1 @@\n+            System.exit(Environment.OK);\n","filename":"src\/org\/openjdk\/asmtools\/Main.java","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -79,1 +79,1 @@\n-        private final byte[] bytes;\n+        protected byte[] bytes;\n@@ -85,0 +85,4 @@\n+        protected ByteInput() {\n+\n+        }\n+\n@@ -100,0 +104,4 @@\n+        protected void init() {\n+\n+        }\n+\n@@ -102,0 +110,1 @@\n+            init();\n@@ -107,0 +116,1 @@\n+            init();\n@@ -123,0 +133,2 @@\n+        private final InputStream originalStream;\n+\n@@ -124,1 +136,8 @@\n-            super(drainIs(is));\n+            originalStream = is;\n+        }\n+\n+        @Override\n+        protected void init() {\n+            if (bytes == null){\n+                bytes=drainIs(originalStream);\n+            }\n","filename":"src\/org\/openjdk\/asmtools\/common\/ToolInput.java","additions":21,"deletions":2,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -148,1 +148,4 @@\n-                    case \"-version\" -> environment.println(FULL_VERSION);\n+                    case org.openjdk.asmtools.Main.VERSION_SWITCH -> {\n+                        environment.println(FULL_VERSION);\n+                        System.exit(OK);\n+                    }\n","filename":"src\/org\/openjdk\/asmtools\/jasm\/Main.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+import static org.openjdk.asmtools.common.Environment.OK;\n@@ -877,1 +878,1 @@\n-            } else if (arg.equals(\"-version\")) {\n+            } else if (arg.equals(org.openjdk.asmtools.Main.VERSION_SWITCH)) {\n@@ -879,0 +880,1 @@\n+                System.exit(OK);\n","filename":"src\/org\/openjdk\/asmtools\/jcdec\/Main.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -143,1 +143,4 @@\n-                    case \"-version\" -> environment.println(FULL_VERSION);\n+                    case org.openjdk.asmtools.Main.VERSION_SWITCH -> {\n+                        environment.println(FULL_VERSION);\n+                        System.exit(OK);\n+                    }\n","filename":"src\/org\/openjdk\/asmtools\/jcoder\/Main.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -109,1 +109,1 @@\n-                case \"-version\":\n+                case org.openjdk.asmtools.Main.VERSION_SWITCH:\n@@ -111,1 +111,1 @@\n-                    break;\n+                    System.exit(OK);\n","filename":"src\/org\/openjdk\/asmtools\/jdec\/Main.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -147,1 +147,1 @@\n-                case \"-version\":\n+                case org.openjdk.asmtools.Main.VERSION_SWITCH:\n","filename":"src\/org\/openjdk\/asmtools\/jdis\/Main.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}