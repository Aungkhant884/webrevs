{"files":[{"patch":"@@ -28,1 +28,0 @@\n-import java.io.PrintWriter;\n","filename":"src\/org\/openjdk\/asmtools\/common\/CompilerLogger.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -25,2 +25,0 @@\n-import java.io.PrintWriter;\n-\n","filename":"src\/org\/openjdk\/asmtools\/common\/DecompilerLogger.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,1 +27,0 @@\n-import java.io.PrintWriter;\n","filename":"src\/org\/openjdk\/asmtools\/common\/Tool.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -40,0 +40,1 @@\n+    private static I18NResourceBundle sharedI18n = I18NResourceBundle.getBundleForClass(org.openjdk.asmtools.Main.class);\n@@ -45,0 +46,3 @@\n+    static {\n+        sharedI18n.setWarn(false);\n+    }\n@@ -54,4 +58,0 @@\n-    public static I18NResourceBundle getI18n() {\n-        return i18n;\n-    }\n-\n@@ -63,1 +63,15 @@\n-        return i18n.getString(id, args);\n+        String r = null;\n+        i18n.setWarn(false);\n+        try {\n+            r = i18n.getString(id, args);\n+        } finally {\n+            i18n.setWarn(true);\n+        }\n+        if (r == null || r.equals(id)) {\n+            r = sharedI18n.getString(id, args);\n+        }\n+        if (r == null || r.equals(id)) {\n+            \/\/to get proper error message\n+            r = i18n.getString(id, args);\n+        }\n+        return r;\n@@ -75,1 +89,1 @@\n-            if (ToolLogger.i18n.containsKey(prefix + id)) {\n+            if (ToolLogger.i18n.containsKey(prefix + id) || ToolLogger.sharedI18n.containsKey(prefix + id)) {\n","filename":"src\/org\/openjdk\/asmtools\/common\/ToolLogger.java","additions":20,"deletions":6,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -33,1 +33,13 @@\n-main.error.unknown_tool=Tool name ''{0}'' unrecognized.  See usage above for possible tool choices.\n\\ No newline at end of file\n+main.error.unknown_tool=Tool name ''{0}'' unrecognized.  See usage above for possible tool choices.\n+\n+# shared strings\n+err.does_not_exist=The output directory {0} does not exist\n+err.d_requires_argument=-d requires argument <directory>\n+info.opt.d=\\\n+\\     -d <directory>  Specify where to place generated class files\n+info.opt.v=\\\n+\\     -v       Print additional information\n+info.opt.t=\\\n+\\     -t       Print debug, trace information\n+info.opt.version=\\\n+\\     -version Print the program version\n\\ No newline at end of file\n","filename":"src\/org\/openjdk\/asmtools\/i18n.properties","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -121,1 +121,1 @@\n-        environment.info(\"info.opt.g\");\n+        environment.info(\"info.opt.t\");\n","filename":"src\/org\/openjdk\/asmtools\/jasm\/Main.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -25,8 +25,1 @@\n-info.opt.d=\\\n-\\     -d <directory>        Specify where to place generated class files\n-info.opt.v=\\\n-\\     -v                    Print additional information\n-info.opt.g=\\\n-\\     -t                    Print debug, trace information\n-info.opt.version=\\\n-\\     -version              Print the program version\n+# see also shared section in asmtools\/i18\n@@ -44,2 +37,0 @@\n-err.d_requires_argument=-d requires argument <directory>\n-err.does_not_exist=The output directory {0} does not exist\n","filename":"src\/org\/openjdk\/asmtools\/jasm\/i18n.properties","additions":1,"deletions":10,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-\n+# jcdec currently do not support shared resources\n","filename":"src\/org\/openjdk\/asmtools\/jcdec\/i18n.properties","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -78,1 +78,1 @@\n-        environment.info(\"info.opt.g\");\n+        environment.info(\"info.opt.t\");\n","filename":"src\/org\/openjdk\/asmtools\/jcoder\/Main.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+# see also shared section in asmtools\/i18\n@@ -29,8 +30,0 @@\n-info.opt.d=\\\n-\\     -d <directory>  Specify where to place generated class files\n-info.opt.v=\\\n-\\     -v              Print additional information\n-info.opt.g=\\\n-\\     -t              Print debug, trace information\n-info.opt.version=\\\n-\\     -version        Print the program version\n@@ -39,2 +32,0 @@\n-err.d_requires_argument=-d requires argument <directory>\n-err.does_not_exist=The output directory {0} does not exist\n","filename":"src\/org\/openjdk\/asmtools\/jcoder\/i18n.properties","additions":1,"deletions":10,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+# see also shared section in asmtools\/i18\n@@ -27,6 +28,0 @@\n-info.opt.t=\\\n-\\     -t       Print debug, trace information\n-info.opt.v=\\\n-\\     -v       Print additional information\n-info.opt.version=\\\n-\\     -version Print the program version\n","filename":"src\/org\/openjdk\/asmtools\/jdec\/i18n.properties","additions":1,"deletions":6,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n-\n+# see also shared section in asmtools\/i18\n@@ -35,4 +35,0 @@\n-info.opt.v=\\\n-\\     -v       Print additional information\n-info.opt.t=\\\n-\\     -t       Print debug, trace information\n@@ -41,2 +37,0 @@\n-info.opt.version=\\\n-\\     -version Print the program version\n","filename":"src\/org\/openjdk\/asmtools\/jdis\/i18n.properties","additions":1,"deletions":7,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -37,0 +37,2 @@\n+    private boolean warn = true;\n+\n@@ -118,0 +120,4 @@\n+    public void setWarn(boolean warn) {\n+        this.warn = warn;\n+    }\n+\n@@ -131,1 +137,3 @@\n-            System.err.println(\"WARNING: missing resource: \\\"\" + key + \" for \\\"\" + name);\n+            if (warn) {\n+                System.err.println(\"WARNING: missing resource: \\\"\" + key + \" for \\\"\" + name);\n+            }\n","filename":"src\/org\/openjdk\/asmtools\/util\/I18NResourceBundle.java","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"}]}