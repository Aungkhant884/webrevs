{"files":[{"patch":"@@ -11123,1 +11123,1 @@\n-instruct FloatClassCheck_reg_reg(rRegI dst, regF src, rRegI tmp, kReg ktmp, rFlagsReg cr)\n+instruct FloatClassCheck_reg_reg_vfpclass(rRegI dst, regF src, kReg ktmp, rFlagsReg cr)\n@@ -11125,0 +11125,1 @@\n+  predicate(VM_Version::supports_avx512dq());\n@@ -11128,1 +11129,1 @@\n-  effect(TEMP tmp, TEMP ktmp, KILL cr);\n+  effect(TEMP ktmp, KILL cr);\n@@ -11132,6 +11133,16 @@\n-    if (VM_Version::supports_avx512dq()) {\n-      __ float_class_check_vfp(opcode, $dst$$Register, $src$$XMMRegister, $ktmp$$KRegister);\n-    }\n-    else {\n-      __ float_class_check(opcode, $dst$$Register, $src$$XMMRegister, $tmp$$Register);\n-    }\n+    __ float_class_check_vfp(opcode, $dst$$Register, $src$$XMMRegister, $ktmp$$KRegister);\n+  %}\n+  ins_pipe(pipe_slow);\n+%}\n+\n+instruct FloatClassCheck_reg_reg(rRegI dst, regF src, rRegI tmp, rFlagsReg cr)\n+%{\n+  predicate(!VM_Version::supports_avx512dq());\n+  match(Set dst (IsInfiniteF src));\n+  match(Set dst (IsNaNF src));\n+  match(Set dst (IsFiniteF src));\n+  effect(TEMP tmp, KILL cr);\n+  format %{ \"float_class_check $dst, $src\" %}\n+  ins_encode %{\n+    int opcode = this->ideal_Opcode();\n+    __ float_class_check(opcode, $dst$$Register, $src$$XMMRegister, $tmp$$Register);\n@@ -11142,1 +11153,1 @@\n-instruct DoubleClassCheck_reg_reg(rRegI dst, regD src, rRegL tmp, rRegL tmp1, rRegL tmp2, kReg ktmp, rFlagsReg cr)\n+instruct DoubleClassCheck_reg_reg_vfpclass(rRegI dst, regD src, kReg ktmp, rFlagsReg cr)\n@@ -11144,0 +11155,1 @@\n+  predicate(VM_Version::supports_avx512dq());\n@@ -11147,1 +11159,1 @@\n-  effect(TEMP tmp, TEMP tmp1, TEMP tmp2, TEMP ktmp, KILL cr);\n+  effect(TEMP ktmp, KILL cr);\n@@ -11151,1 +11163,0 @@\n-    if (VM_Version::supports_avx512dq()) {\n@@ -11153,3 +11164,15 @@\n-    }\n-    else {\n-      __ double_class_check(opcode, $src$$XMMRegister, $dst$$Register, $tmp$$Register,\n+  %}\n+  ins_pipe(pipe_slow);\n+%}\n+\n+instruct DoubleClassCheck_reg_reg(rRegI dst, regD src, rRegL tmp, rRegL tmp1, rRegL tmp2, rFlagsReg cr)\n+%{\n+  predicate(!VM_Version::supports_avx512dq());\n+  match(Set dst (IsInfiniteD src));\n+  match(Set dst (IsNaND src));\n+  match(Set dst (IsFiniteD src));\n+  effect(TEMP tmp, TEMP tmp1, TEMP tmp2, KILL cr);\n+  format %{ \"double_class_check $dst, $src\" %}\n+  ins_encode %{\n+    int opcode = this->ideal_Opcode();\n+    __ double_class_check(opcode, $src$$XMMRegister, $dst$$Register, $tmp$$Register,\n@@ -11157,1 +11180,0 @@\n-    }\n","filename":"src\/hotspot\/cpu\/x86\/x86_64.ad","additions":37,"deletions":15,"binary":false,"changes":52,"status":"modified"}]}