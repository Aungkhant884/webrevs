{"files":[{"patch":"@@ -1324,1 +1324,7 @@\n-                set.addAll(legacyMap.values());\n+                legacyMap.entrySet().forEach(entry -> {\n+                    if (!entry.getValue().isValid()) {\n+                        legacyMap.remove(entry.getKey(), entry.getValue());\n+                    } else {\n+                        set.add(entry.getValue());\n+                    }\n+                });\n","filename":"src\/java.base\/share\/classes\/java\/security\/Provider.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 5097015 8130181 8279222\n+ * @bug 5097015 8130181 8279222 8292739\n@@ -45,0 +45,3 @@\n+        \/\/ invalid entry since it misses the corresponding impl class info\n+        \/\/ e.g. put(\"MessageDigest.Invalid\", \"implClass\");\n+        put(\"MessageDigest.Invalid xYz\", \"aBc\");\n@@ -49,1 +52,3 @@\n-        System.out.println(p.getServices());\n+\n+        System.out.println(\"Services: \" + p.getServices());\n+\n@@ -54,0 +59,3 @@\n+        if (p.getService(\"MessageDigest\", \"Invalid\") != null) {\n+            throw new Exception(\"Invalid service returned\");\n+        }\n@@ -73,1 +81,2 @@\n-    private static Service testService(Provider p, String type, String alg) throws Exception {\n+    private static Service testService(Provider p, String type, String alg)\n+            throws Exception {\n","filename":"test\/jdk\/java\/security\/Provider\/CaseSensitiveServices.java","additions":12,"deletions":3,"binary":false,"changes":15,"status":"modified"}]}