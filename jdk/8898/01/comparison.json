{"files":[{"patch":"@@ -377,4 +377,8 @@\n-                    Iterator<SelectionKey> iter = selected.iterator();\n-                    while (iter.hasNext()) {\n-                        SelectionKey key = iter.next();\n-                        iter.remove ();\n+                    \/\/ create a copy of the selected keys so that we can iterate over it\n+                    \/\/ and at the same time not worry about the underlying Set being\n+                    \/\/ modified (leading to ConcurrentModificationException) due to\n+                    \/\/ any subsequent select operations that we invoke on the\n+                    \/\/ selector (in this same thread).\n+                    for (final SelectionKey key : selected.toArray(SelectionKey[]::new)) {\n+                        \/\/ remove the key from the original selected keys (live) Set\n+                        selected.remove(key);\n","filename":"src\/jdk.httpserver\/share\/classes\/sun\/net\/httpserver\/ServerImpl.java","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"}]}