{"files":[{"patch":"@@ -909,0 +909,8 @@\n+#ifdef ASSERT\n+void G1RemSet::assert_scan_top_is_null(uint hrm_index) {\n+  assert(_scan_state->scan_top(hrm_index) == NULL,\n+         \"scan_top of region %u is unexpectedly \" PTR_FORMAT,\n+         hrm_index, p2i(_scan_state->scan_top(hrm_index)));\n+}\n+#endif\n+\n@@ -914,1 +922,3 @@\n-  if (!r->in_collection_set() && r->is_old_or_humongous_or_archive()) {\n+  if (r->in_collection_set()) {\n+    assert_scan_top_is_null(hrm_index);\n+  } else if (r->is_old_or_humongous_or_archive()) {\n@@ -917,6 +927,3 @@\n-    assert(r->in_collection_set() || r->is_free(),\n-           \"Region %u should be free or in the collection set but is %s\",\n-           hrm_index, r->get_type_str());\n-    assert(_scan_state->scan_top(hrm_index) == NULL,\n-           \"scan_top of region %u is unexpectedly \" PTR_FORMAT,\n-           hrm_index, p2i(_scan_state->scan_top(hrm_index)));\n+    assert_scan_top_is_null(hrm_index);\n+    assert(r->is_free(),\n+           \"Region %u should be free region but is %s\", hrm_index, r->get_type_str());\n","filename":"src\/hotspot\/share\/gc\/g1\/g1RemSet.cpp","additions":14,"deletions":7,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -70,0 +70,2 @@\n+\n+  void assert_scan_top_is_null(uint hrm_index) PRODUCT_RETURN;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1RemSet.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"}]}