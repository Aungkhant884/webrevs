{"files":[{"patch":"@@ -255,0 +255,3 @@\n+  assert(SafepointSynchronize::is_at_safepoint(), \"Must be at a safepoint\");\n+  assert(!ZResurrection::is_blocked(), \"Invalid phase\");\n+\n@@ -268,6 +271,0 @@\n-  ZVerifyRootClosure cl(true \/* verify_fixed *\/);\n-  ZWeakRootsIterator iter;\n-  iter.apply(&cl);\n-}\n-\n-void ZVerify::roots(bool verify_strong, bool verify_weaks) {\n@@ -277,6 +274,3 @@\n-  if (ZVerifyRoots) {\n-    roots_strong(verify_strong);\n-    if (verify_weaks) {\n-      roots_weak();\n-    }\n-  }\n+  ZVerifyRootClosure cl(true \/* verify_fixed *\/);\n+  ZWeakRootsIterator iter;\n+  iter.apply(&cl);\n@@ -290,10 +284,3 @@\n-  if (ZVerifyObjects) {\n-    ZVerifyOopClosure cl(verify_weaks);\n-    ObjectToOopClosure object_cl(&cl);\n-    ZHeap::heap()->object_iterate(&object_cl, verify_weaks);\n-  }\n-}\n-\n-void ZVerify::roots_and_objects(bool verify_strong, bool verify_weaks) {\n-  roots(verify_strong, verify_weaks);\n-  objects(verify_weaks);\n+  ZVerifyOopClosure cl(verify_weaks);\n+  ObjectToOopClosure object_cl(&cl);\n+  ZHeap::heap()->object_iterate(&object_cl, verify_weaks);\n@@ -305,1 +292,3 @@\n-  roots(false \/* verify_strong *\/, false \/* verify_weaks *\/);\n+  if (ZVerifyRoots) {\n+    roots_strong(false \/* verify_fixed *\/);\n+  }\n@@ -311,1 +300,6 @@\n-  roots_and_objects(true \/* verify_strong *\/, false \/* verify_weaks *\/);\n+  if (ZVerifyRoots) {\n+    roots_strong(true \/* verify_fixed *\/);\n+  }\n+  if (ZVerifyObjects) {\n+    objects(false \/* verify_weaks *\/);\n+  }\n@@ -317,1 +311,7 @@\n-  roots_and_objects(true \/* verify_strong *\/, true \/* verify_weaks *\/);\n+  if (ZVerifyRoots) {\n+    roots_strong(true \/* verify_fixed *\/);\n+    roots_weak();\n+  }\n+  if (ZVerifyObjects) {\n+    objects(true \/* verify_weaks *\/);\n+  }\n@@ -382,4 +382,4 @@\n-    _rnhm(),\n-    _hm(thread),\n-    _pem(thread),\n-    _rm(thread) { }\n+      _rnhm(),\n+      _hm(thread),\n+      _pem(thread),\n+      _rm(thread) {}\n","filename":"src\/hotspot\/share\/gc\/z\/zVerify.cpp","additions":29,"deletions":29,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -37,1 +37,0 @@\n-  static void roots(bool verify_strong, bool verify_weaks);\n@@ -39,1 +38,0 @@\n-  static void roots_and_objects(bool verify_strong, bool verify_weaks);\n","filename":"src\/hotspot\/share\/gc\/z\/zVerify.hpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"}]}