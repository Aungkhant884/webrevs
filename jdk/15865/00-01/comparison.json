{"files":[{"patch":"@@ -232,1 +232,2 @@\n-        for (i = 0; i < s.length(); i++) {\n+        int len = s.length();\n+        for (i = 0; i < len; i++) {\n@@ -238,1 +239,1 @@\n-        if (i == s.length()) {\n+        if (i == len) {\n@@ -242,4 +243,1 @@\n-        StringBuilder out = new StringBuilder(s.length() << 1);\n-        CharsetEncoder ce = charset.newEncoder();\n-        CharBuffer cb = CharBuffer.allocate(ENCODING_CHUNK_SIZE);\n-        ByteBuffer bb = ByteBuffer.allocate((int)(ENCODING_CHUNK_SIZE * (double)ce.maxBytesPerChar()));\n+        StringBuilder out = new StringBuilder(len << 1);\n@@ -250,1 +248,5 @@\n-        while (i < s.length()) {\n+        CharsetEncoder ce = charset.newEncoder();\n+        CharBuffer cb = CharBuffer.allocate(ENCODING_CHUNK_SIZE);\n+        ByteBuffer bb = ByteBuffer.allocate((int)(ENCODING_CHUNK_SIZE * ce.maxBytesPerChar()));\n+\n+        while (i < len) {\n@@ -271,1 +273,1 @@\n-                        if ((i + 1) < s.length()) {\n+                        if ((i + 1) < len) {\n@@ -283,1 +285,1 @@\n-                } while (i < s.length() && !DONT_NEED_ENCODING.test((c = s.charAt(i))));\n+                } while (i < len && !DONT_NEED_ENCODING.test((c = s.charAt(i))));\n","filename":"src\/java.base\/share\/classes\/java\/net\/URLEncoder.java","additions":11,"deletions":9,"binary":false,"changes":20,"status":"modified"}]}