{"files":[{"patch":"@@ -92,0 +92,2 @@\n+    static final HtmlId NAVBAR_SUB_LIST = HtmlId.of(\"navbar-sub-list\");\n+    static final HtmlId NAVBAR_TOGGLE_BUTTON = HtmlId.of(\"navbar-toggle-button\");\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlIds.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -353,0 +353,1 @@\n+     * @param nested whether to create a flat or nested list\n@@ -354,1 +355,1 @@\n-    private void addSummaryLinks(Content tree) {\n+    private void addSummaryLinks(Content tree, boolean nested) {\n@@ -360,1 +361,1 @@\n-                    tree.add(HtmlTree.LI(switch (documentedPage) {\n+                Content label = switch (documentedPage) {\n@@ -366,2 +367,8 @@\n-                    }).add(Entity.NO_BREAK_SPACE));\n-                    addListToNav(listContents, tree);\n+                    };\n+                    if (nested) {\n+                        tree.add(HtmlTree.LI(HtmlTree.P(label))\n+                                .add(new HtmlTree(TagName.UL).add(listContents)));\n+                    } else {\n+                        tree.add(HtmlTree.LI(label).add(Entity.NO_BREAK_SPACE));\n+                        addListToNav(listContents, tree);\n+                    }\n@@ -377,0 +384,1 @@\n+     * @param nested whether to create a flat or nested list\n@@ -378,1 +386,1 @@\n-    private void addDetailLinks(Content tree) {\n+    private void addDetailLinks(Content tree, boolean nested) {\n@@ -397,4 +405,10 @@\n-                Content li = HtmlTree.LI(contents.detailLabel);\n-                li.add(Entity.NO_BREAK_SPACE);\n-                tree.add(li);\n-                addListToNav(listContents, tree);\n+                if (nested) {\n+                    Content li = HtmlTree.LI(HtmlTree.P(contents.detailLabel));\n+                    li.add(new HtmlTree(TagName.UL).add(listContents));\n+                    tree.add(li);\n+                } else {\n+                    Content li = HtmlTree.LI(contents.detailLabel);\n+                    li.add(Entity.NO_BREAK_SPACE);\n+                    tree.add(li);\n+                    addListToNav(listContents, tree);\n+                }\n@@ -608,0 +622,1 @@\n+        String toggleNavLinks = configuration.getDocResources().getText(\"doclet.Toggle_navigation_links\");\n@@ -611,0 +626,7 @@\n+                .add(new HtmlTree(TagName.BUTTON).setId(HtmlIds.NAVBAR_TOGGLE_BUTTON)\n+                        .put(HtmlAttr.ARIA_CONTROLS, HtmlIds.NAVBAR_TOP.name())\n+                        .put(HtmlAttr.ARIA_EXPANDED, String.valueOf(false))\n+                        .put(HtmlAttr.ARIA_LABEL, toggleNavLinks)\n+                        .add(HtmlTree.SPAN(HtmlStyle.navBarToggleIcon, HtmlTree.EMPTY))\n+                        .add(HtmlTree.SPAN(HtmlStyle.navBarToggleIcon, HtmlTree.EMPTY))\n+                        .add(HtmlTree.SPAN(HtmlStyle.navBarToggleIcon, HtmlTree.EMPTY)))\n@@ -625,0 +647,4 @@\n+        HtmlTree ulNavSummaryRight = new HtmlTree(TagName.UL).setStyle(HtmlStyle.subNavListSmall);\n+        addSummaryLinks(ulNavSummaryRight, true);\n+        addDetailLinks(ulNavSummaryRight, true);\n+        navDiv.add(ulNavSummaryRight);\n@@ -629,1 +655,1 @@\n-        HtmlTree div = new HtmlTree(TagName.DIV);\n+        HtmlTree div = new HtmlTree(TagName.DIV).setId(HtmlIds.NAVBAR_SUB_LIST);\n@@ -632,1 +658,1 @@\n-        addSummaryLinks(ulNavSummary);\n+        addSummaryLinks(ulNavSummary, false);\n@@ -636,1 +662,1 @@\n-        addDetailLinks(ulNavDetail);\n+        addDetailLinks(ulNavDetail, false);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/Navigation.java","additions":38,"deletions":12,"binary":false,"changes":50,"status":"modified"},{"patch":"@@ -41,0 +41,2 @@\n+    ARIA_EXPANDED(\"aria-expanded\"),\n+    ARIA_LABEL(\"aria-label\"),\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/HtmlAttr.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -101,0 +101,5 @@\n+    \/**\n+     * The class for the navigation bar toggle button for smaller displays.\n+     *\/\n+    navBarToggleIcon,\n+\n@@ -128,0 +133,5 @@\n+    \/**\n+     * The class for the list of subsidiary navigation links for smaller displays.\n+     *\/\n+    subNavListSmall,\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/HtmlStyle.java","additions":10,"deletions":0,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -294,0 +294,29 @@\n+    var expanded = false;\n+    var windowWidth;\n+    function collapse() {\n+        if (expanded) {\n+            $(\"div#navbar-top\").removeAttr(\"style\");\n+            $(\"button#navbar-toggle-button\")\n+                .removeClass(\"expanded\")\n+                .attr(\"aria-expanded\", \"false\");\n+            expanded = false;\n+        }\n+    }\n+    $(\"button#navbar-toggle-button\").click(function (e) {\n+        if (expanded) {\n+            collapse();\n+        } else {\n+            $(\"div#navbar-top\").height($(\"#navbar-top\").prop(\"scrollHeight\"));\n+            $(\"button#navbar-toggle-button\")\n+                .addClass(\"expanded\")\n+                .attr(\"aria-expanded\", \"true\");\n+            expanded = true;\n+            windowWidth = window.innerWidth;\n+        }\n+    });\n+    $(\"ul.sub-nav-list-small li a\").click(collapse);\n+    $(\"input#search-input\").focus(collapse);\n+    $(\"main\").click(collapse);\n+    $(window).on(\"orientationchange\", collapse).on(\"resize\", function(e) {\n+        if (expanded && windowWidth !== window.innerWidth) collapse();\n+    });\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/search.js.template","additions":29,"deletions":0,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -81,0 +81,1 @@\n+doclet.Toggle_navigation_links=Toggle navigation links\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/standard.properties","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -131,1 +131,1 @@\n-    .flex-box {\n+    div.flex-box {\n@@ -138,1 +138,1 @@\n-    .flex-header {\n+    header.flex-header {\n@@ -141,1 +141,1 @@\n-    .flex-content {\n+    div.flex-content {\n@@ -158,0 +158,6 @@\n+button#navbar-toggle-button {\n+    display:none;\n+}\n+ul.sub-nav-list-small {\n+    display: none;\n+}\n@@ -168,1 +174,1 @@\n-    padding:0 0 5px 6px;\n+    padding:6px;\n@@ -171,2 +177,2 @@\n-.sub-nav .nav-list {\n-    padding-top:5px;\n+.sub-nav .sub-nav-list {\n+    padding-top:4px;\n@@ -192,2 +198,2 @@\n-    margin:0 0 0 0;\n-    padding:5px 6px;\n+    margin:0;\n+    padding:6px;\n@@ -195,2 +201,1 @@\n-}\n-.nav-list-search label {\n+    text-align:right;\n@@ -198,1 +203,0 @@\n-    right:-16px;\n@@ -203,1 +207,0 @@\n-    padding-top:10px;\n@@ -206,1 +209,1 @@\n-    color:#FFFFFF;\n+    color:#ffffff;\n@@ -211,1 +214,0 @@\n-    text-decoration:none;\n@@ -213,1 +215,0 @@\n-    text-transform:uppercase;\n@@ -629,3 +630,2 @@\n-    position:relative;\n-    right:-18px;\n-    width:400px;\n+    width: 250px;\n+    margin: 0;\n@@ -634,1 +634,1 @@\n-    background-color: rgb(255,255,255);\n+    background-color: transparent;\n@@ -636,1 +636,0 @@\n-    background-position:center;\n@@ -638,8 +637,9 @@\n-    background-size:12px;\n-    border:0 none;\n-    width:16px;\n-    height:16px;\n-    position:relative;\n-    left:-4px;\n-    top:-4px;\n-    font-size:0px;\n+    background-size:contain;\n+    border:0;\n+    border-radius:0;\n+    width:12px;\n+    height:12px;\n+    position:absolute;\n+    right:12px;\n+    top:10px;\n+    font-size:0;\n@@ -810,1 +810,1 @@\n- * Tweak font sizes and paddings for small screens.\n+ * Tweak style for small screens.\n@@ -812,3 +812,4 @@\n-@media screen and (max-width: 1050px) {\n-    #search-input {\n-        width: 300px;\n+@media screen and (max-width: 920px) {\n+    header.flex-header {\n+        max-height: 100vh;\n+        overflow-y: auto;\n@@ -816,4 +817,31 @@\n-}\n-@media screen and (max-width: 800px) {\n-    #search-input {\n-        width: 200px;\n+    div#navbar-top {\n+        height: 2.8em;\n+        transition: height 0.35s ease;\n+    }\n+    ul.nav-list {\n+        display: block;\n+        width: 40%;\n+        float:left;\n+        clear: left;\n+        margin: 10px 0 0 0;\n+        padding: 0;\n+    }\n+    ul.nav-list li {\n+        float: none;\n+        padding: 6px;\n+        margin-left: 10px;\n+        margin-top: 2px;\n+    }\n+    ul.sub-nav-list-small {\n+        display:block;\n+        height: 100%;\n+        width: 50%;\n+        float: right;\n+        clear: right;\n+        background-color: #dee3e9;\n+        color: #353833;\n+        margin: 6px 0 0 0;\n+        padding: 0;\n+    }\n+    ul.sub-nav-list-small ul {\n+        padding-left: 20px;\n@@ -821,4 +849,2 @@\n-    .top-nav,\n-    .bottom-nav {\n-        font-size: 11px;\n-        padding-top: 6px;\n+    ul.sub-nav-list-small a:link, ul.sub-nav-list-small a:visited {\n+        color:#4A6782;\n@@ -826,2 +852,2 @@\n-    .sub-nav {\n-        font-size: 11px;\n+    ul.sub-nav-list-small a:hover {\n+        color:#bb7a2a;\n@@ -829,0 +855,54 @@\n+    ul.sub-nav-list-small li {\n+        list-style:none;\n+        float:none;\n+        padding: 6px;\n+        margin-top: 1px;\n+        text-transform:uppercase;\n+    }\n+    ul.sub-nav-list-small > li {\n+        margin-left: 10px;\n+    }\n+    ul.sub-nav-list-small li p {\n+        margin: 5px 0;\n+    }\n+    div#navbar-sub-list {\n+        display: none;\n+    }\n+    .top-nav a:link, .top-nav a:active, .top-nav a:visited {\n+        display: block;\n+    }\n+    button#navbar-toggle-button {\n+        width: 3.4em;\n+        height: 2.8em;\n+        background-color: transparent;\n+        display: block;\n+        float: left;\n+        border: 0;\n+        margin: 0 10px;\n+        cursor: pointer;\n+        font-size: 10px;\n+    }\n+    button#navbar-toggle-button .nav-bar-toggle-icon {\n+        display: block;\n+        width: 24px;\n+        height: 3px;\n+        margin: 1px 0 4px 0;\n+        border-radius: 2px;\n+        transition: all 0.1s;\n+        background-color: #ffffff;\n+    }\n+    button#navbar-toggle-button.expanded span.nav-bar-toggle-icon:nth-child(1) {\n+        transform: rotate(45deg);\n+        transform-origin: 10% 10%;\n+        width: 26px;\n+    }\n+    button#navbar-toggle-button.expanded span.nav-bar-toggle-icon:nth-child(2) {\n+        opacity: 0;\n+    }\n+    button#navbar-toggle-button.expanded span.nav-bar-toggle-icon:nth-child(3) {\n+        transform: rotate(-45deg);\n+        transform-origin: 10% 90%;\n+        width: 26px;\n+    }\n+}\n+@media screen and (max-width: 800px) {\n@@ -832,3 +912,2 @@\n-    ul.nav-list li,\n-    .sub-nav .nav-list-search {\n-        padding: 6px;\n+    ul.nav-list li {\n+        margin-left: 5px;\n@@ -836,2 +915,2 @@\n-    ul.sub-nav-list li {\n-        padding-top: 5px;\n+    ul.sub-nav-list-small > li {\n+        margin-left: 5px;\n@@ -850,1 +929,10 @@\n-@media screen and (max-width: 500px) {\n+@media screen and (max-width: 400px) {\n+    .about-language {\n+        font-size: 10px;\n+        padding-right: 12px;\n+    }\n+}\n+@media screen and (max-width: 400px) {\n+    .nav-list-search {\n+        width: 94%;\n+    }\n@@ -852,1 +940,1 @@\n-        width: 150px;\n+        width: 70%;\n@@ -854,3 +942,4 @@\n-    .top-nav,\n-    .bottom-nav {\n-        font-size: 10px;\n+}\n+@media screen and (max-width: 320px) {\n+    .nav-list-search > label {\n+        display: none;\n@@ -858,2 +947,2 @@\n-    .sub-nav {\n-        font-size: 10px;\n+    .nav-list-search {\n+        width: 90%;\n@@ -861,3 +950,2 @@\n-    .about-language {\n-        font-size: 10px;\n-        padding-right: 12px;\n+    #search-input {\n+        width: 80%;\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/stylesheet.css","additions":145,"deletions":57,"binary":false,"changes":202,"status":"modified"},{"patch":"@@ -151,1 +151,1 @@\n-                \"bottom-nav\", \"clear\", \"constant-values-container\", \"deprecated-content\",\n+                \"clear\", \"constant-values-container\", \"deprecated-content\", \"expanded\",\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/checkStylesheetClasses\/CheckStylesheetClasses.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -55,1 +55,1 @@\n-                    <div>\n+                    <div id=\"navbar-sub-list\">\n@@ -66,1 +66,1 @@\n-                    <div>\n+                    <div id=\"navbar-sub-list\">\n@@ -77,1 +77,1 @@\n-                    <div>\n+                    <div id=\"navbar-sub-list\">\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPackageSummary\/TestPackageSummary.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -183,1 +183,1 @@\n-                        background-color: rgb(255,255,255);\n+                        background-color: transparent;\n@@ -185,1 +185,0 @@\n-                        background-position:center;\n@@ -187,8 +186,9 @@\n-                        background-size:12px;\n-                        border:0 none;\n-                        width:16px;\n-                        height:16px;\n-                        position:relative;\n-                        left:-4px;\n-                        top:-4px;\n-                        font-size:0px;\n+                        background-size:contain;\n+                        border:0;\n+                        border-radius:0;\n+                        width:12px;\n+                        height:12px;\n+                        position:absolute;\n+                        right:12px;\n+                        top:10px;\n+                        font-size:0;\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testStylesheet\/TestStylesheet.java","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"}]}