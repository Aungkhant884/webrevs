{"files":[{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2021, JetBrains s.r.o.. All rights reserved.\n+ * Copyright (c) 2021, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2022, JetBrains s.r.o.. All rights reserved.\n@@ -32,0 +32,1 @@\n+    BOOL cacheValid;\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/a11y\/TableAccessibility.h","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2021, JetBrains s.r.o.. All rights reserved.\n+ * Copyright (c) 2021, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2022, JetBrains s.r.o.. All rights reserved.\n@@ -133,0 +133,9 @@\n+        cacheValid = YES;\n+    }\n+\n+    if (!cacheValid) {\n+        for (NSNumber *key in [rowCache allKeys]) {\n+            [[rowCache objectForKey:key] release];\n+            [rowCache removeObjectForKey:key];\n+        }\n+        cacheValid = YES;\n@@ -226,5 +235,1 @@\n-    for (NSNumber *key in [rowCache allKeys]) {\n-        [[rowCache objectForKey:key] release];\n-    }\n-    [rowCache release];\n-    rowCache = nil;\n+    cacheValid = NO;\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/a11y\/TableAccessibility.m","additions":12,"deletions":7,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -79,0 +79,21 @@\n+    public void  createUIDraggable() {\n+        INSTRUCTIONS = \"INSTRUCTIONS:\\n\"\n+                + \"Check that table is properly updated when culumn order is changed.\\n\\n\"\n+                + \"Turn screen reader on, and Tab to the table.\\n\"\n+                + \"Using arrow keys navigate to the last cell in the first row in the table.\"\n+                + \"Screen reader should announce it as \\\"Column 3 row 1\\\"\\n\\n\"\n+                + \"Using mouse drag the header of the last culumn so the last column becomes the first one.\"\n+                + \"Wait for the screen reader to finish announcing new position in table.\\n\\n\"\n+                + \"If new position in table corresponds to the new table layout ctrl+tab further \"\n+                + \"and press PASS, otherwise press FAIL.\\n\";\n+\n+        JTable table = new JTable(data, columnNames);\n+        JPanel panel = new JPanel();\n+        panel.setLayout(new FlowLayout());\n+        JScrollPane scrollPane = new JScrollPane(table);\n+        panel.add(scrollPane);\n+        panel.setFocusable(false);\n+        exceptionString = \"AccessibleJTable test failed!\";\n+        super.createUI(panel, \"AccessibleJTableTest\");\n+    }\n+\n@@ -169,0 +190,7 @@\n+        countDownLatch = test.createCountDownLatch();\n+        SwingUtilities.invokeAndWait(test::createUIDraggable);\n+        countDownLatch.await(15, TimeUnit.MINUTES);\n+        if (!testResult) {\n+            throw new RuntimeException(exceptionString);\n+        }\n+\n","filename":"test\/jdk\/java\/awt\/a11y\/AccessibleJTableTest.java","additions":28,"deletions":0,"binary":false,"changes":28,"status":"modified"}]}