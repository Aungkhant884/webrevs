{"files":[{"patch":"@@ -80,3 +80,3 @@\n-    IF_GIVEN: [\n-      if test \"x$USERNAME\" = x; then\n-        AC_MSG_ERROR([--with-build-user cannot be empty])\n+    CHECK_VALUE: [\n+      if test \"x$RESULT\" = x; then\n+        FAILURE=\"--with-build-user cannot be empty\"\n@@ -94,5 +94,5 @@\n-    IF_GIVEN: [\n-      if test \"x$JDK_RC_NAME\" = x; then\n-        AC_MSG_ERROR([--with-jdk-rc-name cannot be empty])\n-      elif [ ! [[ $JDK_RC_NAME =~ ^[[:print:]]*$ ]] ]; then\n-        AC_MSG_ERROR([--with-jdk-rc-name contains non-printing characters: $JDK_RC_NAME])\n+    CHECK_VALUE: [\n+      if test \"x$RESULT\" = x; then\n+        FAILURE=\"--with-jdk-rc-name cannot be empty\"\n+      elif [ ! [[ $RESULT =~ ^[[:print:]]*$ ]] ]; then\n+        FAILURE=\"--with-jdk-rc-name contains non-printing characters: $RESULT\"\n@@ -108,1 +108,1 @@\n-    DEFAULT: $DEFAULT_COMPANY_NAME,\n+    DEFAULT: $COMPANY_NAME,\n@@ -112,5 +112,5 @@\n-    IF_GIVEN: [\n-      if test \"x$COMPANY_NAME\" = x; then\n-        AC_MSG_ERROR([--with-vendor-name must have a value])\n-      elif [ ! [[ $COMPANY_NAME =~ ^[[:print:]]*$ ]] ]; then\n-        AC_MSG_ERROR([--with-vendor-name contains non-printing characters: $COMPANY_NAME])\n+    CHECK_VALUE: [\n+      if test \"x$RESULT\" = x; then\n+        FAILURE=\"--with-vendor-name must have a value\"\n+      elif [ ! [[ $RESULT =~ ^[[:print:]]*$ ]] ]; then\n+        FAILURE=\"--with-vendor-name contains non-printing characters: $RESULT\"\n@@ -125,1 +125,1 @@\n-    DEFAULT: $DEFAULT_VENDOR_URL,\n+    DEFAULT: $VENDOR_URL,\n@@ -128,5 +128,5 @@\n-    IF_GIVEN: [\n-      if test \"x$VENDOR_URL\" = x; then\n-        AC_MSG_ERROR([--with-vendor-url must have a value])\n-      elif [ ! [[ $VENDOR_URL =~ ^[[:print:]]*$ ]] ]; then\n-        AC_MSG_ERROR([--with-vendor-url contains non-printing characters: $VENDOR_URL])\n+    CHECK_VALUE: [\n+      if test \"x$RESULT\" = x; then\n+        FAILURE=\"--with-vendor-url must have a value\"\n+      elif [ ! [[ $RESULT =~ ^[[:print:]]*$ ]] ]; then\n+        FAILURE=\"--with-vendor-url contains non-printing characters: $RESULT\"\n@@ -142,1 +142,1 @@\n-    DEFAULT: $DEFAULT_VENDOR_URL_BUG,\n+    DEFAULT: $VENDOR_URL_BUG,\n@@ -145,5 +145,5 @@\n-    IF_GIVEN: [\n-      if test \"x$VENDOR_URL_BUG\" = x; then\n-        AC_MSG_ERROR([--with-vendor-bug-url must have a value])\n-      elif [ ! [[ $VENDOR_URL_BUG =~ ^[[:print:]]*$ ]] ]; then\n-        AC_MSG_ERROR([--with-vendor-bug-url contains non-printing characters: $VENDOR_URL_BUG])\n+    CHECK_VALUE: [\n+      if test \"x$RESULT\" = x; then\n+        FAILURE=\"--with-vendor-bug-url must have a value\"\n+      elif [ ! [[ $RESULT =~ ^[[:print:]]*$ ]] ]; then\n+        FAILURE=\"--with-vendor-bug-url contains non-printing characters: $RESULT\"\n@@ -159,1 +159,1 @@\n-    DEFAULT: $DEFAULT_VENDOR_URL_VM_BUG,\n+    DEFAULT: $VENDOR_URL_VM_BUG,\n@@ -162,5 +162,5 @@\n-    IF_GIVEN: [\n-      if test \"x$VENDOR_URL_VM_BUG\" = x; then\n-        AC_MSG_ERROR([--with-vendor-vm-bug-url must have a value])\n-      elif [ ! [[ $VENDOR_URL_VM_BUG =~ ^[[:print:]]*$ ]] ]; then\n-        AC_MSG_ERROR([--with-vendor-vm-bug-url contains non-printing characters: $VENDOR_URL_VM_BUG])\n+    CHECK_VALUE: [\n+      if test \"x$RESULT\" = x; then\n+        FAILURE=\"--with-vendor-vm-bug-url must have a value\"\n+      elif [ ! [[ $RESULT =~ ^[[:print:]]*$ ]] ]; then\n+        FAILURE=\"--with-vendor-vm-bug-url contains non-printing characters: $RESULT\"\n@@ -178,19 +178,49 @@\n-    DEFAULT_DESC: [calculated])\n-\n-  if test \"x$VERSION_STRING\" != x; then\n-    # Additional [] needed to keep m4 from mangling shell constructs.\n-    if [ [[ $VERSION_STRING =~ ^([0-9]+)(\\.([0-9]+))?(\\.([0-9]+))?(\\.([0-9]+))?(\\.([0-9]+))?(\\.([0-9]+))?(\\.([0-9]+))?(-([a-zA-Z0-9]+))?(((\\+)([0-9]*))?(-([-a-zA-Z0-9.]+))?)?$ ]] ]; then\n-      VERSION_FEATURE=${BASH_REMATCH[[1]]}\n-      VERSION_INTERIM=${BASH_REMATCH[[3]]}\n-      VERSION_UPDATE=${BASH_REMATCH[[5]]}\n-      VERSION_PATCH=${BASH_REMATCH[[7]]}\n-      VERSION_EXTRA1=${BASH_REMATCH[[9]]}\n-      VERSION_EXTRA2=${BASH_REMATCH[[11]]}\n-      VERSION_EXTRA3=${BASH_REMATCH[[13]]}\n-      VERSION_PRE=${BASH_REMATCH[[15]]}\n-      version_plus_separator=${BASH_REMATCH[[18]]}\n-      VERSION_BUILD=${BASH_REMATCH[[19]]}\n-      VERSION_OPT=${BASH_REMATCH[[21]]}\n-      # Unspecified numerical fields are interpreted as 0.\n-      if test \"x$VERSION_INTERIM\" = x; then\n-        VERSION_INTERIM=0\n+    DEFAULT_DESC: [calculated],\n+    CHECK_VALUE: [\n+      if test \"x$RESULT\" != x; then\n+        # Additional [] needed to keep m4 from mangling shell constructs.\n+        if [ [[ $RESULT =~ ^([0-9]+)(\\.([0-9]+))?(\\.([0-9]+))?(\\.([0-9]+))?(\\.([0-9]+))?(\\.([0-9]+))?(\\.([0-9]+))?(-([a-zA-Z0-9]+))?(((\\+)([0-9]*))?(-([-a-zA-Z0-9.]+))?)?$ ]] ]; then\n+          VERSION_FEATURE=${BASH_REMATCH[[1]]}\n+          VERSION_INTERIM=${BASH_REMATCH[[3]]}\n+          VERSION_UPDATE=${BASH_REMATCH[[5]]}\n+          VERSION_PATCH=${BASH_REMATCH[[7]]}\n+          VERSION_EXTRA1=${BASH_REMATCH[[9]]}\n+          VERSION_EXTRA2=${BASH_REMATCH[[11]]}\n+          VERSION_EXTRA3=${BASH_REMATCH[[13]]}\n+          VERSION_PRE=${BASH_REMATCH[[15]]}\n+          version_plus_separator=${BASH_REMATCH[[18]]}\n+          VERSION_BUILD=${BASH_REMATCH[[19]]}\n+          VERSION_OPT=${BASH_REMATCH[[21]]}\n+          # Unspecified numerical fields are interpreted as 0.\n+          if test \"x$VERSION_INTERIM\" = x; then\n+            VERSION_INTERIM=0\n+          fi\n+          if test \"x$VERSION_UPDATE\" = x; then\n+            VERSION_UPDATE=0\n+          fi\n+          if test \"x$VERSION_PATCH\" = x; then\n+            VERSION_PATCH=0\n+          fi\n+          if test \"x$VERSION_EXTRA1\" = x; then\n+            VERSION_EXTRA1=0\n+          fi\n+          if test \"x$VERSION_EXTRA2\" = x; then\n+            VERSION_EXTRA2=0\n+          fi\n+          if test \"x$VERSION_EXTRA3\" = x; then\n+            VERSION_EXTRA3=0\n+          fi\n+          if test \"x$version_plus_separator\" != x \\\n+              && test \"x$VERSION_BUILD$VERSION_OPT\" = x; then\n+            AC_MSG_ERROR([Version string contains + but both 'BUILD' and 'OPT' are missing])\n+          fi\n+          if test \"x$VERSION_BUILD\" = x0; then\n+            AC_MSG_WARN([Version build 0 is interpreted as no build number])\n+            VERSION_BUILD=\n+          fi\n+          # Stop the version part process from setting default values.\n+          # We still allow them to explicitly override though.\n+          NO_DEFAULT_VERSION_PARTS=true\n+        else\n+          FAILURE=\"--with-version-string fails to parse as a valid version string: $RESULT\"\n+        fi\n@@ -198,30 +228,1 @@\n-      if test \"x$VERSION_UPDATE\" = x; then\n-        VERSION_UPDATE=0\n-      fi\n-      if test \"x$VERSION_PATCH\" = x; then\n-        VERSION_PATCH=0\n-      fi\n-      if test \"x$VERSION_EXTRA1\" = x; then\n-        VERSION_EXTRA1=0\n-      fi\n-      if test \"x$VERSION_EXTRA2\" = x; then\n-        VERSION_EXTRA2=0\n-      fi\n-      if test \"x$VERSION_EXTRA3\" = x; then\n-        VERSION_EXTRA3=0\n-      fi\n-      if test \"x$version_plus_separator\" != x \\\n-          && test \"x$VERSION_BUILD$VERSION_OPT\" = x; then\n-        AC_MSG_ERROR([Version string contains + but both 'BUILD' and 'OPT' are missing])\n-      fi\n-      if test \"x$VERSION_BUILD\" = x0; then\n-        AC_MSG_WARN([Version build 0 is interpreted as no build number])\n-        VERSION_BUILD=\n-      fi\n-      # Stop the version part process from setting default values.\n-      # We still allow them to explicitly override though.\n-      NO_DEFAULT_VERSION_PARTS=true\n-    else\n-      AC_MSG_ERROR([--with-version-string fails to parse as a valid version string: $VERSION_STRING])\n-    fi\n-  fi\n+    ])\n@@ -306,2 +307,1 @@\n-  # If NO_DEFAULT_VERSION_PARTS is true, VERSION_FEATURE already has a value we want, so\n-  # set DEFAULT_VERSION_FEATURE to that instead\n+  # Default is to get value from version-numbers.conf\n@@ -312,1 +312,0 @@\n-  # Default is to get value from version-numbers.conf\n@@ -316,2 +315,4 @@\n-    DEFAULT_DESC: [current source value])\n-  JDKVER_CHECK_AND_SET_NUMBER(VERSION_FEATURE, $VERSION_FEATURE)\n+    DEFAULT_DESC: [current source value],\n+    CHECK_VALUE: [\n+      JDKVER_CHECK_AND_SET_NUMBER(VERSION_FEATURE, $RESULT)\n+    ])\n@@ -496,5 +497,5 @@\n-    IF_GIVEN: [\n-      if test \"x$VERSION_DATE\" = x; then\n-        AC_MSG_ERROR([--with-version-date cannot be empty])\n-      elif [ ! [[ $VERSION_DATE =~ ^[0-9]{4}-[0-9]{2}-[0-9]{2}$ ]] ]; then\n-        AC_MSG_ERROR([\"$VERSION_DATE\" is not a valid version date])\n+    CHECK_VALUE: [\n+      if test \"x$RESULT\" = x; then\n+        FAILURE=\"--with-version-date cannot be empty\"\n+      elif [ ! [[ $RESULT =~ ^[0-9]{4}-[0-9]{2}-[0-9]{2}$ ]] ]; then\n+        FAILURE=\"\\\"$RESULT\\\" is not a valid version date\"\n@@ -522,1 +523,1 @@\n-    DEFAULT: $DEFAULT_MACOSX_BUNDLE_NAME_BASE,\n+    DEFAULT: $MACOSX_BUNDLE_NAME_BASE,\n@@ -525,5 +526,5 @@\n-    IF_GIVEN: [\n-      if test \"x$MACOSX_BUNDLE_NAME_BASE\" = x; then\n-        AC_MSG_ERROR([--with-macosx-bundle-name-base must have a value])\n-      elif [ ! [[ $MACOSX_BUNDLE_NAME_BASE =~ ^[[:print:]]*$ ]] ]; then\n-        AC_MSG_ERROR([--with-macosx-bundle-name-base contains non-printing characters: $MACOSX_BUNDLE_NAME_BASE])\n+    CHECK_VALUE: [\n+      if test \"x$RESULT\" = x; then\n+        FAILURE=\"--with-macosx-bundle-name-base must have a value\"\n+      elif [ ! [[ $RESULT =~ ^[[:print:]]*$ ]] ]; then\n+        FAILURE=\"--with-macosx-bundle-name-base contains non-printing characters: $RESULT\"\n@@ -537,1 +538,1 @@\n-    DEFAULT_MACOSX_BUNDLE_ID_BASE=\"$DEFAULT_MACOSX_BUNDLE_ID_BASE-$VERSION_PRE\"\n+    MACOSX_BUNDLE_ID_BASE=\"$MACOSX_BUNDLE_ID_BASE-$VERSION_PRE\"\n@@ -542,1 +543,1 @@\n-    DEFAULT: $DEFAULT_MACOSX_BUNDLE_ID_BASE,\n+    DEFAULT: $MACOSX_BUNDLE_ID_BASE,\n@@ -545,5 +546,5 @@\n-    IF_GIVEN: [\n-      if test \"x$MACOSX_BUNDLE_ID_BASE\" = x; then\n-        AC_MSG_ERROR([--with-macosx-bundle-id-base must have a value])\n-      elif [ ! [[ $MACOSX_BUNDLE_ID_BASE =~ ^[[:print:]]*$ ]] ]; then\n-        AC_MSG_ERROR([--with-macosx-bundle-id-base contains non-printing characters: $MACOSX_BUNDLE_ID_BASE])\n+    CHECK_VALUE: [\n+      if test \"x$RESULT\" = x; then\n+        FAILURE=\"--with-macosx-bundle-id-base must have a value\"\n+      elif [ ! [[ $RESULT =~ ^[[:print:]]*$ ]] ]; then\n+        FAILURE=\"--with-macosx-bundle-id-base contains non-printing characters: $RESULT\"\n@@ -555,1 +556,1 @@\n-    DEFAULT_MACOSX_BUNDLE_BUILD_VERSION=\"$VERSION_BUILD\"\n+    MACOSX_BUNDLE_BUILD_VERSION=\"$VERSION_BUILD\"\n@@ -557,1 +558,1 @@\n-    DEFAULT_MACOSX_BUNDLE_BUILD_VERSION=0\n+    MACOSX_BUNDLE_BUILD_VERSION=0\n@@ -562,1 +563,1 @@\n-    DEFAULT_MACOSX_BUNDLE_BUILD_VERSION=\"$DEFAULT_MACOSX_BUNDLE_BUILD_VERSION.$VERSION_OPT\"\n+    MACOSX_BUNDLE_BUILD_VERSION=\"$MACOSX_BUNDLE_BUILD_VERSION.$VERSION_OPT\"\n@@ -567,1 +568,1 @@\n-    DEFAULT: $DEFAULT_MACOSX_BUNDLE_BUILD_VERSION,\n+    DEFAULT: $MACOSX_BUNDLE_BUILD_VERSION,\n@@ -571,5 +572,5 @@\n-    IF_GIVEN: [\n-      if test \"x$MACOSX_BUNDLE_BUILD_VERSION\" = x; then\n-        AC_MSG_ERROR([--with-macosx-bundle-build-version must have a value])\n-      elif [ ! [[ $MACOSX_BUNDLE_BUILD_VERSION =~ ^[0-9\\.]*$ ]] ]; then\n-        AC_MSG_ERROR([--with-macosx-bundle-build-version contains non numbers and periods: $MACOSX_BUNDLE_BUILD_VERSION])\n+    CHECK_VALUE: [\n+      if test \"x$RESULT\" = x; then\n+        FAILURE=\"--with-macosx-bundle-build-version must have a value\"\n+      elif [ ! [[ $RESULT =~ ^[0-9\\.]*$ ]] ]; then\n+        FAILURE=\"--with-macosx-bundle-build-version contains non numbers and periods: $RESULT\"\n","filename":"make\/autoconf\/jdk-version.m4","additions":114,"deletions":113,"binary":false,"changes":227,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-DEFAULT_COMPANY_NAME=N\/A\n+COMPANY_NAME=N\/A\n@@ -32,3 +32,3 @@\n-DEFAULT_VENDOR_URL=https:\/\/openjdk.org\/\n-DEFAULT_VENDOR_URL_BUG=https:\/\/bugreport.java.com\/bugreport\/\n-DEFAULT_VENDOR_URL_VM_BUG=https:\/\/bugreport.java.com\/bugreport\/crash.jsp\n+VENDOR_URL=https:\/\/openjdk.org\/\n+VENDOR_URL_BUG=https:\/\/bugreport.java.com\/bugreport\/\n+VENDOR_URL_VM_BUG=https:\/\/bugreport.java.com\/bugreport\/crash.jsp\n@@ -37,2 +37,2 @@\n-DEFAULT_MACOSX_BUNDLE_NAME_BASE=\"OpenJDK\"\n-DEFAULT_MACOSX_BUNDLE_ID_BASE=\"net.java.openjdk\"\n+MACOSX_BUNDLE_NAME_BASE=\"OpenJDK\"\n+MACOSX_BUNDLE_ID_BASE=\"net.java.openjdk\"\n","filename":"make\/conf\/branding.conf","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"}]}