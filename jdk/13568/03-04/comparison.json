{"files":[{"patch":"@@ -120,3 +120,2 @@\n-     * Max size of additional buffer,\n-     *      limited by max_heap \/ 16 or 2 GB max,\n-     *      divide by 8 as (size * 8) bytes for long\/double type.\n+     * Max size of additional buffer in bytes,\n+     *      limited by max_heap \/ 16 or 2 GB max.\n@@ -125,1 +124,1 @@\n-            ( (int) Math.min(Runtime.getRuntime().maxMemory() >>> 4L, Integer.MAX_VALUE) ) >> 3;\n+            (int) Math.min(Runtime.getRuntime().maxMemory() >>> 4L, Integer.MAX_VALUE);\n@@ -4566,1 +4565,1 @@\n-    private static <T> T tryAllocate(Class<T> clazz, int size) {\n+    private static <T> T tryAllocate(final Class<T> clazz, final int size) {\n@@ -4568,1 +4567,3 @@\n-            return (size > MAX_BUFFER_SIZE) ? null :\n+\t\t\tfinal int maxSize = MAX_BUFFER_SIZE >> (\n+\t\t\t\t((clazz == int[].class) || (clazz == float[].class)) ? 2 : 3);\n+            return (size > maxSize) ? null :\n","filename":"src\/java.base\/share\/classes\/java\/util\/DualPivotQuicksort.java","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"}]}