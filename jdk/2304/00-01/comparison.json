{"files":[{"patch":"@@ -261,0 +261,18 @@\n+\/* Create a pool and initiate a try block to catch any exception *\/\n+#define JNI_COCOA_ENTER(env) \\\n+ NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init]; \\\n+ @try {\n+\n+\/* Don't allow NSExceptions to escape to Java.\n+ * If there is a Java exception that has been thrown that should escape.\n+ * And ensure we drain the auto-release pool.\n+ *\/\n+#define JNI_COCOA_EXIT(env) \\\n+ } \\\n+ @catch (NSException *e) { \\\n+     NSLog(@\"%@\", [e callStackSymbols]); \\\n+ } \\\n+ @finally { \\\n+    [pool drain]; \\\n+ };\n+\n@@ -293,2 +311,1 @@\n-  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];\n-  @try {\n+  JNI_COCOA_ENTER(env);\n@@ -307,5 +324,1 @@\n-  } @catch (NSException *e) {\n-    NSLog(@\"%@\", [e callStackSymbols]);\n-  } @finally {\n-     [pool drain];\n-  }\n+  JNI_COCOA_EXIT(env);\n@@ -834,2 +847,1 @@\n-  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];\n-  @try {\n+  JNI_COCOA_ENTER(env);\n@@ -949,5 +961,1 @@\n-  } @catch (NSException *e) {\n-    NSLog(@\"%@\", [e callStackSymbols]);\n-  } @finally {\n-     [pool drain];\n-  }\n+  JNI_COCOA_EXIT(env);\n@@ -1048,2 +1056,1 @@\n-  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];\n-  @try {\n+  JNI_COCOA_ENTER(env);\n@@ -1100,5 +1107,1 @@\n-  } @catch (NSException *e) {\n-    NSLog(@\"%@\", [e callStackSymbols]);\n-  } @finally {\n-     [pool drain];\n-  }\n+  JNI_COCOA_EXIT(env);\n","filename":"src\/jdk.hotspot.agent\/macosx\/native\/libsaproc\/MacosxDebuggerLocal.m","additions":24,"deletions":21,"binary":false,"changes":45,"status":"modified"}]}