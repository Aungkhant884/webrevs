{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,2 +32,8 @@\n-import java.awt.*;\n-import java.awt.event.*;\n+import java.awt.Choice;\n+import java.awt.Frame;\n+import java.awt.Panel;\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.event.InputEvent;\n+import java.awt.event.MouseAdapter;\n+import java.awt.event.MouseEvent;\n@@ -43,2 +49,1 @@\n-    static boolean passed = false;\n-    static Robot robot = null;\n+    static volatile boolean passed = false;\n@@ -46,2 +51,2 @@\n-    public static void main(String args[])\n-    {\n+    public static void main(String args[]) throws Exception {\n+        Frame f = null;\n@@ -49,2 +54,2 @@\n-            robot = new Robot();\n-            robot.setAutoDelay(50);\n+            Robot robot = new Robot();\n+            robot.setAutoDelay(150);\n@@ -52,1 +57,1 @@\n-            Frame f = new Frame(\"choice test\");\n+            f = new Frame(\"choice test\");\n@@ -73,8 +78,1 @@\n-\n-            f.addWindowListener(new WindowAdapter() {\n-                public void windowClosing(WindowEvent we) {\n-                    System.err.println(\"Test passed\");\n-                    passed = true;\n-                }\n-            });\n-\n+            f.setLocationRelativeTo(null);\n@@ -91,2 +89,2 @@\n-            robot.mousePress(InputEvent.BUTTON2_MASK);\n-            robot.mouseRelease(InputEvent.BUTTON2_MASK);\n+            robot.mousePress(InputEvent.BUTTON2_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON2_DOWN_MASK);\n@@ -94,3 +92,3 @@\n-        } catch (Throwable e) {\n-            if (robot == null){\n-                throw new RuntimeException( \"Test failed.Unable to initialize Robot \"+e);\n+        } finally {\n+            if (f != null) {\n+                f.dispose();\n@@ -98,1 +96,0 @@\n-            throw new RuntimeException( \"Test failed due to thrown exception \"+e);\n","filename":"test\/jdk\/java\/awt\/Choice\/GetSizeTest\/GetSizeTest.java","additions":21,"deletions":24,"binary":false,"changes":45,"status":"modified"}]}