{"files":[{"patch":"@@ -5993,0 +5993,26 @@\n+\/\/ Helper for print_one_mapping: print n words, both as hex and ascii.\n+\/\/ Use Safefetch for all values.\n+static void print_snippet(const void* p, outputStream* st) {\n+  static const int num_words = LP64_ONLY(3) NOT_LP64(6);\n+  static const int num_bytes = num_words * sizeof(int);\n+  intptr_t v[num_words];\n+  const int errval = 0xDE210244;\n+  for (int i = 0; i < num_words; i++) {\n+    v[i] = SafeFetch32((int*)p + i, errval);\n+    if (v[i] == errval) {\n+      return;\n+    }\n+  }\n+  st->put('[');\n+  for (int i = 0; i < num_words; i++) {\n+    st->print(INTPTR_FORMAT \" \", v[i]);\n+  }\n+  const char* b = (char*)v;\n+  st->put('\\\"');\n+  for (int i = 0; i < num_bytes; i++) {\n+    st->put(::isgraph(b[i]) ? b[i] : '.');\n+  }\n+  st->put('\\\"');\n+  st->put(']');\n+}\n+\n@@ -6007,0 +6033,1 @@\n+  bool is_dll = false;\n@@ -6026,3 +6053,3 @@\n-      case MEM_COMMIT: st->print(\"MEM_COMMIT\"); break;\n-      case MEM_FREE: st->print(\"MEM_FREE\"); break;\n-      case MEM_RESERVE: st->print(\"MEM_RESERVE\"); break;\n+      case MEM_COMMIT:  st->print_raw(\"MEM_COMMIT \"); break;\n+      case MEM_FREE:    st->print_raw(\"MEM_FREE   \"); break;\n+      case MEM_RESERVE: st->print_raw(\"MEM_RESERVE\"); break;\n@@ -6031,1 +6058,1 @@\n-    st->print(\", prot=%x, type=\", (unsigned)minfo->Protect);\n+    st->print(\", prot=%3x, type=\", (unsigned)minfo->Protect);\n@@ -6033,3 +6060,3 @@\n-      case MEM_IMAGE: st->print(\"MEM_IMAGE\"); break;\n-      case MEM_MAPPED: st->print(\"MEM_MAPPED\"); break;\n-      case MEM_PRIVATE: st->print(\"MEM_PRIVATE\"); break;\n+      case MEM_IMAGE:   st->print_raw(\"MEM_IMAGE  \"); break;\n+      case MEM_MAPPED:  st->print_raw(\"MEM_MAPPED \"); break;\n+      case MEM_PRIVATE: st->print_raw(\"MEM_PRIVATE\"); break;\n@@ -6047,1 +6074,2 @@\n-        st->print(\" %s\", buf);\n+        st->print(\", %s\", buf);\n+        is_dll = true;\n@@ -6050,0 +6078,7 @@\n+    \/\/ If memory is accessible, and we do not know anything else about it, print a snippet\n+    if (!is_dll &&\n+        minfo->State == MEM_COMMIT &&\n+        !(minfo->Protect & PAGE_NOACCESS || minfo->Protect & PAGE_GUARD)) {\n+      st->print_raw(\", \");\n+      print_snippet(region_start, st);\n+    }\n@@ -6113,1 +6148,0 @@\n-        \/\/ Advance probe pointer.\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":43,"deletions":9,"binary":false,"changes":52,"status":"modified"}]}