{"files":[{"patch":"@@ -55,8 +55,8 @@\n-    public static JFrame mainFrame = new JFrame(\"Bug4634626\");\n-    public JPanel contentPane = new JPanel();\n-    public JButton nopButton = new JButton(\"No popup button\");\n-    public JTextArea someText = new JTextArea(\"Some text here\", 20, 10);\n-    public JButton popButton = new JButton(\"Button with the popup\");\n-\n-    public JPopupMenu btnPopup = new JPopupMenu();\n-    public JPopupMenu commonPopup = new JPopupMenu();\n+    public static JFrame mainFrame;\n+    public JPanel contentPane;\n+    public JButton nopButton;\n+    public JTextArea someText;\n+    public JButton popButton;\n+\n+    public JPopupMenu btnPopup;\n+    public JPopupMenu commonPopup;\n@@ -109,3 +109,22 @@\n-        try {\n-            popButton.setComponentPopupMenu(null);\n-            popButton.setComponentPopupMenu(null);\n+        SwingUtilities.invokeLater(() -> {\n+            mainFrame = new JFrame(\"Bug4634626\");\n+            contentPane = new JPanel();\n+            nopButton = new JButton(\"No popup button\");\n+            someText = new JTextArea(\"Some text here\", 20, 10);\n+            popButton = new JButton(\"Button with the popup\");\n+\n+            btnPopup = new JPopupMenu();\n+            commonPopup = new JPopupMenu();\n+\n+            try {\n+                popButton.setComponentPopupMenu(null);\n+                popButton.setComponentPopupMenu(null);\n+                popButton.setComponentPopupMenu(btnPopup);\n+                popButton.setComponentPopupMenu(null);\n+            } catch (Exception ex) {\n+                System.err.println(\"Unexpected exception was thrown by \" +\n+                        \"setComponentPopupMenu() method: \" + ex);\n+            }\n+            btnPopup.add(\"Button 1\");\n+            btnPopup.add(\"Button 2\");\n+            btnPopup.add(\"Button 3\");\n@@ -113,25 +132,15 @@\n-            popButton.setComponentPopupMenu(null);\n-        } catch(Exception ex) {\n-            System.err.println(\"Unexpected exception was thrown by \" +\n-                               \"setComponentPopupMenu() method: \" + ex);\n-        }\n-        btnPopup.add(\"Button 1\");\n-        btnPopup.add(\"Button 2\");\n-        btnPopup.add(\"Button 3\");\n-        popButton.setComponentPopupMenu(btnPopup);\n-        popButton.addMouseListener(mouser);\n-        commonPopup.add(\"One\");\n-        commonPopup.add(\"Two\");\n-        commonPopup.add(\"Three\");\n-\n-        contentPane.setLayout(new BorderLayout());\n-        contentPane.setComponentPopupMenu(commonPopup);\n-        contentPane.addMouseListener(mouser);\n-        contentPane.add(nopButton, BorderLayout.NORTH);\n-        nopButton.addMouseListener(mouser);\n-        contentPane.add(popButton, BorderLayout.SOUTH);\n-        someText.addMouseListener(mouser);\n-        contentPane.add(someText, BorderLayout.CENTER);\n-        mainFrame.setContentPane(contentPane);\n-\n-        SwingUtilities.invokeAndWait(() -> {\n+            popButton.addMouseListener(mouser);\n+            commonPopup.add(\"One\");\n+            commonPopup.add(\"Two\");\n+            commonPopup.add(\"Three\");\n+\n+            contentPane.setLayout(new BorderLayout());\n+            contentPane.setComponentPopupMenu(commonPopup);\n+            contentPane.addMouseListener(mouser);\n+            contentPane.add(nopButton, BorderLayout.NORTH);\n+            nopButton.addMouseListener(mouser);\n+            contentPane.add(popButton, BorderLayout.SOUTH);\n+            someText.addMouseListener(mouser);\n+            contentPane.add(someText, BorderLayout.CENTER);\n+            mainFrame.setContentPane(contentPane);\n+\n","filename":"test\/jdk\/javax\/swing\/JPopupMenu\/4634626\/bug4634626.java","additions":45,"deletions":36,"binary":false,"changes":81,"status":"modified"}]}