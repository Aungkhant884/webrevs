{"files":[{"patch":"@@ -32,0 +32,1 @@\n+import java.time.InstantSource;\n@@ -67,1 +68,1 @@\n-    private final TimeSource timeSource;\n+    private final InstantSource timeSource;\n@@ -132,1 +133,1 @@\n-    ConnectionPool(long clientId, TimeSource timeSource) {\n+    ConnectionPool(long clientId, InstantSource timeSource) {\n@@ -139,1 +140,1 @@\n-    private ConnectionPool(String tag, TimeSource timeSource) {\n+    private ConnectionPool(String tag, InstantSource timeSource) {\n@@ -381,1 +382,1 @@\n-        private final TimeSource timeSource;\n+        private final InstantSource timeSource;\n@@ -384,1 +385,1 @@\n-        ExpiryList(TimeSource timeSource) {\n+        ExpiryList(InstantSource timeSource) {\n","filename":"src\/java.net.http\/share\/classes\/jdk\/internal\/net\/http\/ConnectionPool.java","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -42,0 +42,1 @@\n+\n@@ -43,1 +44,0 @@\n-    private NanoSource localSource = nanoSource;\n@@ -46,1 +46,9 @@\n-    private static final class NanoSource implements InstantSource {\n+    private NanoSource localSource = nanoSource;\n+    private TimeSource() {}\n+\n+    private static final class NanoSource {\n+        \/\/ Duration (in nanoseconds) for which the static nanoSource\n+        \/\/ instance is considered valid.\n+        \/\/ The use of Integer.MAX_VALUE is arbitrary.\n+        \/\/ Any value not too close to Long.MAX_VALUE\n+        \/\/ would do.\n@@ -48,0 +56,1 @@\n+\n@@ -57,6 +66,1 @@\n-\n-        @Override\n-        public Instant instant() {\n-            return instant(System.nanoTime());\n-        }\n-\n+        \n@@ -74,3 +78,0 @@\n-                \/\/ The use of Integer.MAX_VALUE is arbitrary.\n-                \/\/ Any value not too close to Long.MAX_VALUE\n-                \/\/ would do.\n@@ -82,1 +83,0 @@\n-        \/\/ @ForceInline\n@@ -87,1 +87,0 @@\n-        \/\/ @ForceInline\n","filename":"src\/java.net.http\/share\/classes\/jdk\/internal\/net\/http\/common\/TimeSource.java","additions":12,"deletions":13,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -98,1 +98,1 @@\n-        ConnectionPool pool = new ConnectionPool(666);\n+        ConnectionPool pool = new ConnectionPool(666, TimeSource.source());\n","filename":"test\/jdk\/java\/net\/httpclient\/whitebox\/java.net.http\/jdk\/internal\/net\/http\/ConnectionPoolTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}