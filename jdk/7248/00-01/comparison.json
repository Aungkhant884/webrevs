{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -2499,1 +2499,1 @@\n-  dir = os::opendir(path);\n+  dir = opendir(path);\n@@ -2504,1 +2504,1 @@\n-  while (result && (ptr = os::readdir(dir)) != NULL) {\n+  while (result && (ptr = readdir(dir)) != NULL) {\n@@ -2509,1 +2509,1 @@\n-  os::closedir(dir);\n+  closedir(dir);\n@@ -2848,1 +2848,1 @@\n-    while (os::stat(filename, &buf) == 0) {\n+    while (::stat(filename, &buf) == 0) {\n","filename":"src\/hotspot\/os\/aix\/os_aix.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2215,1 +2215,1 @@\n-  dir = os::opendir(path);\n+  dir = opendir(path);\n@@ -2220,1 +2220,1 @@\n-  while (result && (ptr = os::readdir(dir)) != NULL) {\n+  while (result && (ptr = readdir(dir)) != NULL) {\n@@ -2225,1 +2225,1 @@\n-  os::closedir(dir);\n+  closedir(dir);\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -3623,1 +3623,1 @@\n-  DIR *dir = os::opendir(sys_hugepages);\n+  DIR *dir = opendir(sys_hugepages);\n@@ -3627,1 +3627,1 @@\n-  while ((entry = os::readdir(dir)) != NULL) {\n+  while ((entry = readdir(dir)) != NULL) {\n@@ -3635,1 +3635,1 @@\n-  os::closedir(dir);\n+  closedir(dir);\n@@ -4824,1 +4824,1 @@\n-  dir = os::opendir(path);\n+  dir = opendir(path);\n@@ -4829,1 +4829,1 @@\n-  while (result && (ptr = os::readdir(dir)) != NULL) {\n+  while (result && (ptr = readdir(dir)) != NULL) {\n@@ -4834,1 +4834,1 @@\n-  os::closedir(dir);\n+  closedir(dir);\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -629,1 +629,1 @@\n-  os::abort(true); \/\/ Dump core and abort\n+  os::abort(); \/\/ Dump core and abort\n","filename":"src\/hotspot\/share\/prims\/jni.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -530,2 +530,2 @@\n-  \/\/ Terminate with an error.  If dump_core is true generate a core file on\n-  \/\/ platforms that support such things.  This calls shutdown() and then aborts.\n+  \/\/ Terminate with an error.  Default is to generate a core file on platforms\n+  \/\/ that support such things.  This calls shutdown() and then aborts.\n@@ -533,1 +533,1 @@\n-  static void abort(bool dump_core);\n+  static void abort(bool dump_core = true);\n","filename":"src\/hotspot\/share\/runtime\/os.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -68,14 +68,0 @@\n-\/\/ AIX also needs a 64 bit NULL to work as a null address pointer.\n-\/\/ Most system includes on AIX would define it as an int 0 if not already defined with one\n-\/\/ exception: \/usr\/include\/dirent.h will unconditionally redefine NULL to int 0 again.\n-\/\/ In this case you need to copy the following defines to a position after #include <dirent.h>\n-#include <dirent.h>\n-#ifdef _LP64\n-  #undef NULL\n-  #define NULL 0L\n-#else\n-  #ifndef NULL\n-    #define NULL 0\n-  #endif\n-#endif\n-\n@@ -91,1 +77,0 @@\n-FORBID_C_FUNCTION(int      closedir(DIR*),                            \"use os::closedir\");\n@@ -100,1 +85,0 @@\n-FORBID_C_FUNCTION(DIR*     opendir(const char *),                     \"use os::opendir\");\n@@ -102,1 +86,0 @@\n-FORBID_C_FUNCTION(struct dirent* readdir(DIR*),                       \"use os::readdir\");\n@@ -111,5 +94,0 @@\n-#else\n-\n-#define FORBID_C_FUNCTION(signature, alternative)\n-#define PRAGMA_PERMIT_FORBIDDEN_C_FUNCTION(name)\n-\n","filename":"src\/hotspot\/share\/utilities\/compilerWarnings_gcc.hpp","additions":0,"deletions":22,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -614,2 +614,0 @@\n-PRAGMA_DIAG_PUSH\n-PRAGMA_PERMIT_FORBIDDEN_C_FUNCTION(write);\n@@ -619,1 +617,1 @@\n-    ssize_t count = ::write(_fd, s, (int)len);\n+    ssize_t count = os::write(_fd, s, (int)len);\n@@ -623,1 +621,0 @@\n-PRAGMA_DIAG_POP\n","filename":"src\/hotspot\/share\/utilities\/ostream.cpp","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -281,1 +281,4 @@\n-      abort();\n+PRAGMA_DIAG_PUSH\n+PRAGMA_PERMIT_FORBIDDEN_C_FUNCTION(abort);\n+      ::abort();\n+PRAGMA_DIAG_POP\n","filename":"test\/hotspot\/gtest\/gtestMain.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"}]}