{"files":[{"patch":"@@ -742,1 +742,4 @@\n-    ::new (reg_map) RegisterMap((JavaThread*)thread, false);\n+    ::new (reg_map) RegisterMap((JavaThread*)thread,\n+                                RegisterMap::UpdateMap::skip,\n+                                RegisterMap::ProcessFrames::include,\n+                                RegisterMap::WalkContinuation::skip);\n@@ -744,1 +747,4 @@\n-    *reg_map = RegisterMap((JavaThread*)thread, false);\n+    *reg_map = RegisterMap((JavaThread*)thread,\n+                           RegisterMap::UpdateMap::skip,\n+                           RegisterMap::ProcessFrames::include,\n+                           RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/cpu\/aarch64\/frame_aarch64.cpp","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -101,1 +101,4 @@\n-  RegisterMap reg_map(thread, false);\n+  RegisterMap reg_map(thread,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/cpu\/aarch64\/gc\/shared\/barrierSetNMethod_aarch64.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -114,1 +114,4 @@\n-  RegisterMap reg_map(thread, false);\n+  RegisterMap reg_map(thread,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/cpu\/riscv\/gc\/shared\/barrierSetNMethod_riscv.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -169,1 +169,4 @@\n-  RegisterMap reg_map(current, false);\n+  RegisterMap reg_map(current,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -179,1 +182,4 @@\n-    RegisterMap reg_map(current, false);\n+    RegisterMap reg_map(current,\n+                        RegisterMap::UpdateMap::skip,\n+                        RegisterMap::ProcessFrames::include,\n+                        RegisterMap::WalkContinuation::skip);\n@@ -443,1 +449,4 @@\n-  RegisterMap map(current, false);\n+  RegisterMap map(current,\n+                  RegisterMap::UpdateMap::skip,\n+                  RegisterMap::ProcessFrames::include,\n+                  RegisterMap::WalkContinuation::skip);\n@@ -482,1 +491,4 @@\n-      RegisterMap map(current, false);\n+      RegisterMap map(current,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -528,1 +540,4 @@\n-    RegisterMap map(current, false);\n+    RegisterMap map(current,\n+                    RegisterMap::UpdateMap::skip,\n+                    RegisterMap::ProcessFrames::include,\n+                    RegisterMap::WalkContinuation::skip);\n@@ -567,1 +582,4 @@\n-    RegisterMap reg_map(current);\n+    RegisterMap reg_map(current,\n+                        RegisterMap::UpdateMap::include,\n+                        RegisterMap::ProcessFrames::include,\n+                        RegisterMap::WalkContinuation::skip);\n@@ -763,1 +781,4 @@\n-  RegisterMap reg_map(current, false);\n+  RegisterMap reg_map(current,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -912,1 +933,4 @@\n-  RegisterMap reg_map(current, false);\n+  RegisterMap reg_map(current,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -1277,1 +1301,4 @@\n-  RegisterMap reg_map(current, false);\n+  RegisterMap reg_map(current,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -1404,1 +1431,4 @@\n-  RegisterMap reg_map(current, false);\n+  RegisterMap reg_map(current,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/c1\/c1_Runtime1.cpp","additions":40,"deletions":10,"binary":false,"changes":50,"status":"modified"},{"patch":"@@ -2749,1 +2749,4 @@\n-  RegisterMap map(thread, false \/* update *\/, false \/* process_frames *\/, true \/* walk_cont *\/);\n+  RegisterMap map(thread,\n+                  RegisterMap::UpdateMap::skip,\n+                  RegisterMap::ProcessFrames::skip,\n+                  RegisterMap::WalkContinuation::include);\n","filename":"src\/hotspot\/share\/classfile\/javaClasses.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -761,1 +761,4 @@\n-      RegisterMap map(jt, false);\n+      RegisterMap map(jt,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/compiler\/compilationPolicy.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -39,1 +39,4 @@\n-  RegisterMap map(_thread, false, false);\n+  RegisterMap map(_thread,\n+                  RegisterMap::UpdateMap::skip,\n+                  RegisterMap::ProcessFrames::skip,\n+                  RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/jfr\/periodic\/sampling\/jfrCallTrace.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -152,1 +152,5 @@\n-  vframeStreamCommon(RegisterMap(jt, false, false, true)), _cont_entry(JfrThreadLocal::is_vthread(jt) ? jt->last_continuation() : nullptr),\n+  vframeStreamCommon(RegisterMap(jt,\n+                                 RegisterMap::UpdateMap::skip,\n+                                 RegisterMap::ProcessFrames::skip,\n+                                 RegisterMap::WalkContinuation::include)),\n+    _cont_entry(JfrThreadLocal::is_vthread(jt) ? jt->last_continuation() : nullptr),\n","filename":"src\/hotspot\/share\/jfr\/recorder\/stacktrace\/jfrStackTrace.cpp","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -66,1 +66,4 @@\n-  RegisterMap reg_map(thread, false);\n+  RegisterMap reg_map(thread,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -77,1 +80,4 @@\n-    RegisterMap reg_map(thread, false);\n+    RegisterMap reg_map(thread,\n+                        RegisterMap::UpdateMap::skip,\n+                        RegisterMap::ProcessFrames::include,\n+                        RegisterMap::WalkContinuation::skip);\n@@ -258,1 +264,4 @@\n-    RegisterMap map(current, false);\n+    RegisterMap map(current,\n+                    RegisterMap::UpdateMap::skip,\n+                    RegisterMap::ProcessFrames::include,\n+                    RegisterMap::WalkContinuation::skip);\n@@ -298,1 +307,4 @@\n-    RegisterMap reg_map(current);\n+    RegisterMap reg_map(current,\n+                        RegisterMap::UpdateMap::include,\n+                        RegisterMap::ProcessFrames::include,\n+                        RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/jvmci\/jvmciRuntime.cpp","additions":16,"deletions":4,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -170,1 +170,6 @@\n-    : _chunk(chunk), _map((JavaThread*)nullptr, true, false, true), _frame_no(0) {\n+    : _chunk(chunk),\n+      _map((JavaThread*)nullptr,\n+           RegisterMap::UpdateMap::include,\n+           RegisterMap::ProcessFrames::skip,\n+           RegisterMap::WalkContinuation::include),\n+      _frame_no(0) {\n","filename":"src\/hotspot\/share\/oops\/instanceStackChunkKlass.cpp","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -201,1 +201,4 @@\n-    RegisterMap full_map((JavaThread*)nullptr, true, false, true);\n+    RegisterMap full_map((JavaThread*)nullptr,\n+                         RegisterMap::UpdateMap::include,\n+                         RegisterMap::ProcessFrames::skip,\n+                         RegisterMap::WalkContinuation::include);\n","filename":"src\/hotspot\/share\/oops\/stackChunkOop.inline.hpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -119,1 +119,4 @@\n-  RegisterMap map(thread, false);\n+  RegisterMap map(thread,\n+                  RegisterMap::UpdateMap::skip,\n+                  RegisterMap::ProcessFrames::include,\n+                  RegisterMap::WalkContinuation::skip);\n@@ -1402,1 +1405,4 @@\n-      RegisterMap map(current, false);\n+      RegisterMap map(current,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -1483,1 +1489,4 @@\n-    RegisterMap map(current, false \/* update_map *\/, false \/* process_frames *\/);\n+    RegisterMap map(current,\n+                    RegisterMap::UpdateMap::skip,\n+                    RegisterMap::ProcessFrames::skip,\n+                    RegisterMap::WalkContinuation::skip);\n@@ -1570,1 +1579,4 @@\n-  RegisterMap reg_map(thread);\n+  RegisterMap reg_map(thread,\n+                      RegisterMap::UpdateMap::include,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -1582,1 +1594,4 @@\n-  RegisterMap reg_map(thread);\n+  RegisterMap reg_map(thread,\n+                      RegisterMap::UpdateMap::include,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/opto\/runtime.cpp","additions":20,"deletions":5,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -94,1 +94,4 @@\n-    : vframeStreamCommon(RegisterMap(jt, false, false, false)) {\n+    : vframeStreamCommon(RegisterMap(jt,\n+                                     RegisterMap::UpdateMap::skip,\n+                                     RegisterMap::ProcessFrames::skip,\n+                                     RegisterMap::WalkContinuation::skip)) {\n@@ -321,1 +324,4 @@\n-    RegisterMap map(thread, false, false);\n+    RegisterMap map(thread,\n+                    RegisterMap::UpdateMap::skip,\n+                    RegisterMap::ProcessFrames::skip,\n+                    RegisterMap::WalkContinuation::skip);\n@@ -365,1 +371,4 @@\n-    RegisterMap map(thread, false, false);\n+    RegisterMap map(thread,\n+                    RegisterMap::UpdateMap::skip,\n+                    RegisterMap::ProcessFrames::skip,\n+                    RegisterMap::WalkContinuation::skip);\n@@ -379,1 +388,4 @@\n-  RegisterMap map(thread, false, false);\n+  RegisterMap map(thread,\n+                  RegisterMap::UpdateMap::skip,\n+                  RegisterMap::ProcessFrames::skip,\n+                  RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/prims\/forte.cpp","additions":16,"deletions":4,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -569,1 +569,4 @@\n-  RegisterMap reg_map(java_thread, true \/* update_map *\/, false \/* process_frames *\/, true \/* walk_cont *\/);\n+  RegisterMap reg_map(java_thread,\n+                      RegisterMap::UpdateMap::include,\n+                      RegisterMap::ProcessFrames::skip,\n+                      RegisterMap::WalkContinuation::include);\n@@ -848,1 +851,4 @@\n-  RegisterMap  reg_map(java_thread, \/* update_map *\/ true, \/* process_frames *\/ true);\n+  RegisterMap  reg_map(java_thread,\n+                       RegisterMap::UpdateMap::include,\n+                       RegisterMap::ProcessFrames::include,\n+                       RegisterMap::WalkContinuation::skip);\n@@ -931,1 +937,4 @@\n-    RegisterMap  reg_map(java_thread);\n+    RegisterMap  reg_map(java_thread,\n+                         RegisterMap::UpdateMap::include,\n+                         RegisterMap::ProcessFrames::include,\n+                         RegisterMap::WalkContinuation::skip);\n@@ -1147,1 +1156,4 @@\n-    RegisterMap reg_map(java_thread, \/* update_map *\/ true, \/* process_frames *\/ false);\n+    RegisterMap reg_map(java_thread,\n+                        RegisterMap::UpdateMap::include,\n+                        RegisterMap::ProcessFrames::skip,\n+                        RegisterMap::WalkContinuation::skip);\n@@ -1185,1 +1197,4 @@\n-    RegisterMap reg_map(jt, true, true);\n+    RegisterMap reg_map(jt,\n+                        RegisterMap::UpdateMap::include,\n+                        RegisterMap::ProcessFrames::include,\n+                        RegisterMap::WalkContinuation::skip);\n@@ -1240,1 +1255,4 @@\n-  RegisterMap reg_map(java_thread, true \/* update_map *\/, false \/* process_frames *\/, true \/* walk_cont *\/);\n+  RegisterMap reg_map(java_thread,\n+                      RegisterMap::UpdateMap::include,\n+                      RegisterMap::ProcessFrames::skip,\n+                      RegisterMap::WalkContinuation::include);\n@@ -2188,1 +2206,4 @@\n-  RegisterMap reg_map(java_thread, true \/* update_map *\/, false \/* process_frames *\/, true \/* walk_cont *\/);\n+  RegisterMap reg_map(java_thread,\n+                      RegisterMap::UpdateMap::include,\n+                      RegisterMap::ProcessFrames::skip,\n+                      RegisterMap::WalkContinuation::include);\n@@ -2257,1 +2278,4 @@\n-    RegisterMap reg_map(java_thread, \/* update_map *\/ true, \/* process_frames *\/ true);\n+    RegisterMap reg_map(java_thread,\n+                        RegisterMap::UpdateMap::include,\n+                        RegisterMap::ProcessFrames::include,\n+                        RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvBase.cpp","additions":32,"deletions":8,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -321,1 +321,4 @@\n-    RegisterMap rm(jt, false);\n+    RegisterMap rm(jt,\n+                   RegisterMap::UpdateMap::skip,\n+                   RegisterMap::ProcessFrames::include,\n+                   RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvThreadState.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -773,1 +773,4 @@\n-  RegisterMap reg_map(_thread, true, true, true);\n+  RegisterMap reg_map(_thread,\n+                      RegisterMap::UpdateMap::include,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::include);\n","filename":"src\/hotspot\/share\/prims\/jvmtiImpl.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2652,1 +2652,4 @@\n-    RegisterMap reg_map(java_thread);\n+    RegisterMap reg_map(java_thread,\n+                        RegisterMap::UpdateMap::include,\n+                        RegisterMap::ProcessFrames::include,\n+                        RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/prims\/jvmtiTagMap.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -578,1 +578,4 @@\n-    RegisterMap reg_map(thread, \/* update_map *\/ false, \/* process_frames *\/ false, \/* walk_cont *\/ true);\n+    RegisterMap reg_map(thread,\n+                        RegisterMap::UpdateMap::skip,\n+                        RegisterMap::ProcessFrames::skip,\n+                        RegisterMap::WalkContinuation::include);\n","filename":"src\/hotspot\/share\/prims\/jvmtiThreadState.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -91,1 +91,4 @@\n-    RegisterMap register_map(jt, true);\n+    RegisterMap register_map(jt,\n+                             RegisterMap::UpdateMap::include,\n+                             RegisterMap::ProcessFrames::include,\n+                             RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/prims\/scopedMemoryAccess.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -432,2 +432,5 @@\n-    RegisterMap regMap = cont.is_null() ? RegisterMap(jt, true, true, true)\n-                                        : RegisterMap(cont(), true);\n+    RegisterMap regMap = cont.is_null() ? RegisterMap(jt,\n+                                                      RegisterMap::UpdateMap::include,\n+                                                      RegisterMap::ProcessFrames::include,\n+                                                      RegisterMap::WalkContinuation::include)\n+                                        : RegisterMap(cont(), RegisterMap::UpdateMap::include);\n","filename":"src\/hotspot\/share\/prims\/stackwalk.cpp","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -770,1 +770,4 @@\n-    RegisterMap reg_map(thread);\n+    RegisterMap reg_map(thread,\n+                        RegisterMap::UpdateMap::include,\n+                        RegisterMap::ProcessFrames::include,\n+                        RegisterMap::WalkContinuation::skip);\n@@ -2106,1 +2109,4 @@\n-      RegisterMap rmap(jt);\n+      RegisterMap rmap(jt,\n+                       RegisterMap::UpdateMap::include,\n+                       RegisterMap::ProcessFrames::include,\n+                       RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/prims\/whitebox.cpp","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -125,1 +125,4 @@\n-    RegisterMap map(thread, false, false, false);\n+    RegisterMap map(thread,\n+                    RegisterMap::UpdateMap::skip,\n+                    RegisterMap::ProcessFrames::skip,\n+                    RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/runtime\/continuationEntry.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -1147,1 +1147,4 @@\n-  RegisterMap map(_cont.thread(), true, false, false);\n+  RegisterMap map(_cont.thread(),\n+                  RegisterMap::UpdateMap::include,\n+                  RegisterMap::ProcessFrames::skip,\n+                  RegisterMap::WalkContinuation::skip);\n@@ -1341,1 +1344,4 @@\n-  RegisterMap map(thread, true, false, false);\n+  RegisterMap map(thread,\n+                  RegisterMap::UpdateMap::include,\n+                  RegisterMap::ProcessFrames::skip,\n+                  RegisterMap::WalkContinuation::skip);\n@@ -1354,1 +1360,4 @@\n-  RegisterMap map(thread, false, false, false);\n+  RegisterMap map(thread,\n+                  RegisterMap::UpdateMap::skip,\n+                  RegisterMap::ProcessFrames::skip,\n+                  RegisterMap::WalkContinuation::skip);\n@@ -1463,1 +1472,4 @@\n-  RegisterMap map(thread, true, false, false);\n+  RegisterMap map(thread,\n+                  RegisterMap::UpdateMap::include,\n+                  RegisterMap::ProcessFrames::skip,\n+                  RegisterMap::WalkContinuation::skip);\n@@ -2129,1 +2141,4 @@\n-    RegisterMap map(nullptr, true, false, false);\n+    RegisterMap map(nullptr,\n+                    RegisterMap::UpdateMap::include,\n+                    RegisterMap::ProcessFrames::skip,\n+                    RegisterMap::WalkContinuation::skip);\n@@ -2157,1 +2172,4 @@\n-    RegisterMap map(nullptr, true, false, false); \/\/ map.clear();\n+    RegisterMap map(nullptr,\n+                    RegisterMap::UpdateMap::include,\n+                    RegisterMap::ProcessFrames::skip,\n+                    RegisterMap::WalkContinuation::skip); \/\/ map.clear();\n@@ -2386,1 +2404,4 @@\n-  RegisterMap map(thread, true, true, false);\n+  RegisterMap map(thread,\n+                  RegisterMap::UpdateMap::include,\n+                  RegisterMap::ProcessFrames::include,\n+                  RegisterMap::WalkContinuation::skip);\n@@ -2424,2 +2445,5 @@\n-                  (JavaThread*)nullptr :\n-                  JavaThread::current(), true, false, false);\n+                    (JavaThread*)nullptr :\n+                    JavaThread::current(),\n+                  RegisterMap::UpdateMap::include,\n+                  RegisterMap::ProcessFrames::skip,\n+                  RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/runtime\/continuationFreezeThaw.cpp","additions":33,"deletions":9,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -377,2 +377,8 @@\n-  RegisterMap map(current, true);\n-  RegisterMap dummy_map(current, false);\n+  RegisterMap map(current,\n+                  RegisterMap::UpdateMap::include,\n+                  RegisterMap::ProcessFrames::include,\n+                  RegisterMap::WalkContinuation::skip);\n+  RegisterMap dummy_map(current,\n+                        RegisterMap::UpdateMap::skip,\n+                        RegisterMap::ProcessFrames::include,\n+                        RegisterMap::WalkContinuation::skip);\n@@ -795,1 +801,4 @@\n-    RegisterMap rm(thread, false);\n+    RegisterMap rm(thread,\n+                   RegisterMap::UpdateMap::skip,\n+                   RegisterMap::ProcessFrames::include,\n+                   RegisterMap::WalkContinuation::skip);\n@@ -1661,1 +1670,4 @@\n-  RegisterMap reg_map(thread, false);\n+  RegisterMap reg_map(thread,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -1694,1 +1706,4 @@\n-  RegisterMap reg_map(thread, false);\n+  RegisterMap reg_map(thread,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -1871,1 +1886,4 @@\n-  RegisterMap reg_map(current, true);\n+  RegisterMap reg_map(current,\n+                      RegisterMap::UpdateMap::include,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -1873,1 +1891,4 @@\n-  RegisterMap reg_map(current, false);\n+  RegisterMap reg_map(current,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/runtime\/deoptimization.cpp","additions":28,"deletions":7,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -83,1 +83,4 @@\n-    RegisterMap  reg_map(deoptee_thread(), false \/* update_map *\/, false \/* process_frames *\/);\n+    RegisterMap  reg_map(deoptee_thread(),\n+                         RegisterMap::UpdateMap::skip,\n+                         RegisterMap::ProcessFrames::skip,\n+                         RegisterMap::WalkContinuation::skip);\n@@ -135,1 +138,4 @@\n-      RegisterMap reg_map(jt, false \/* update_map *\/, false \/* process_frames *\/);\n+      RegisterMap reg_map(jt,\n+                          RegisterMap::UpdateMap::skip,\n+                          RegisterMap::ProcessFrames::skip,\n+                          RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/runtime\/escapeBarrier.cpp","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -63,1 +63,1 @@\n-RegisterMap::RegisterMap(JavaThread *thread, bool update_map, bool process_frames, bool walk_cont) {\n+RegisterMap::RegisterMap(JavaThread *thread, UpdateMap update_map, ProcessFrames process_frames, WalkContinuation walk_cont) {\n@@ -65,3 +65,3 @@\n-  _update_map     = update_map;\n-  _process_frames = process_frames;\n-  _walk_cont      = walk_cont;\n+  _update_map     = update_map == UpdateMap::include;\n+  _process_frames = process_frames == ProcessFrames::include;\n+  _walk_cont      = walk_cont == WalkContinuation::include;\n@@ -73,1 +73,1 @@\n-  if (walk_cont && thread != NULL && thread->last_continuation() != NULL) {\n+  if (walk_cont == WalkContinuation::include && thread != NULL && thread->last_continuation() != NULL) {\n@@ -83,1 +83,1 @@\n-RegisterMap::RegisterMap(oop continuation, bool update_map) {\n+RegisterMap::RegisterMap(oop continuation, UpdateMap update_map) {\n@@ -85,1 +85,1 @@\n-  _update_map     = update_map;\n+  _update_map     = update_map == UpdateMap::include;\n@@ -277,1 +277,4 @@\n-  RegisterMap map(JavaThread::current(), false); \/\/ No update\n+  RegisterMap map(JavaThread::current(),\n+                  RegisterMap::UpdateMap::skip,\n+                  RegisterMap::ProcessFrames::include,\n+                  RegisterMap::WalkContinuation::skip); \/\/ No update\n@@ -369,1 +372,4 @@\n-      RegisterMap map(thread, false);\n+      RegisterMap map(thread,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -380,1 +386,4 @@\n-  RegisterMap map(JavaThread::current(), false);\n+  RegisterMap map(JavaThread::current(),\n+                  RegisterMap::UpdateMap::skip,\n+                  RegisterMap::ProcessFrames::include,\n+                  RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/runtime\/frame.cpp","additions":19,"deletions":10,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -165,1 +165,4 @@\n-  RegisterMap reg_map(thread);\n+  RegisterMap reg_map(thread,\n+                      RegisterMap::UpdateMap::include,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -232,1 +235,4 @@\n-  RegisterMap reg_map(thread);\n+  RegisterMap reg_map(thread,\n+                      RegisterMap::UpdateMap::include,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/runtime\/interfaceSupport.cpp","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -1057,1 +1057,4 @@\n-      RegisterMap reg_map(this, false);\n+      RegisterMap reg_map(this,\n+                          RegisterMap::UpdateMap::skip,\n+                          RegisterMap::ProcessFrames::include,\n+                          RegisterMap::WalkContinuation::skip);\n@@ -1559,1 +1562,1 @@\n-  for (StackFrameStream fst(this, true \/* update *\/, true \/* process_frames *\/); !fst.is_done(); fst.next()) {\n+  for (StackFrameStream fst(this, true \/* update_map *\/, true \/* process_frames *\/, false \/* walk_cont *\/); !fst.is_done(); fst.next()) {\n@@ -1707,1 +1710,4 @@\n-  RegisterMap reg_map(this, true, true);\n+  RegisterMap reg_map(this,\n+                      RegisterMap::UpdateMap::include,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -1852,1 +1858,4 @@\n-  RegisterMap reg_map(this, true, true);\n+  RegisterMap reg_map(this,\n+                      RegisterMap::UpdateMap::include,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/runtime\/javaThread.cpp","additions":13,"deletions":4,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -63,1 +63,1 @@\n-\/\/      register map as: RegisterMap map(thread, false);\n+\/\/      register map with RegisterMap::UpdateMap::skip\n@@ -73,0 +73,3 @@\n+  enum class UpdateMap { skip, include };\n+  enum class ProcessFrames { skip, include };\n+  enum class WalkContinuation { skip, include };\n@@ -97,2 +100,2 @@\n-  RegisterMap(JavaThread *thread, bool update_map = true, bool process_frames = true, bool walk_cont = false);\n-  RegisterMap(oop continuation, bool update_map = true);\n+  RegisterMap(JavaThread *thread, UpdateMap update_map, ProcessFrames process_frames, WalkContinuation walk_cont);\n+  RegisterMap(oop continuation, UpdateMap update_map);\n","filename":"src\/hotspot\/share\/runtime\/registerMap.hpp","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -918,1 +918,4 @@\n-  RegisterMap map(self, true, false);\n+  RegisterMap map(self,\n+                  RegisterMap::UpdateMap::include,\n+                  RegisterMap::ProcessFrames::skip,\n+                  RegisterMap::WalkContinuation::skip);\n@@ -983,1 +986,4 @@\n-      RegisterMap map(self, true, false);\n+      RegisterMap map(self,\n+                      RegisterMap::UpdateMap::include,\n+                      RegisterMap::ProcessFrames::skip,\n+                      RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/runtime\/safepoint.cpp","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -1154,1 +1154,4 @@\n-    RegisterMap reg_map2(current);\n+    RegisterMap reg_map2(current,\n+                         RegisterMap::UpdateMap::include,\n+                         RegisterMap::ProcessFrames::include,\n+                         RegisterMap::WalkContinuation::skip);\n@@ -1227,1 +1230,4 @@\n-    RegisterMap reg_map(current, false);\n+    RegisterMap reg_map(current,\n+                        RegisterMap::UpdateMap::skip,\n+                        RegisterMap::ProcessFrames::include,\n+                        RegisterMap::WalkContinuation::skip);\n@@ -1361,1 +1367,4 @@\n-  RegisterMap cbl_map(current, false);\n+  RegisterMap cbl_map(current,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -1459,1 +1468,4 @@\n-  RegisterMap reg_map(current, false);\n+  RegisterMap reg_map(current,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -1489,1 +1501,4 @@\n-  RegisterMap reg_map(current, false);\n+  RegisterMap reg_map(current,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -1539,1 +1554,4 @@\n-  RegisterMap reg_map(current);\n+  RegisterMap reg_map(current,\n+                      RegisterMap::UpdateMap::include,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -1569,1 +1587,4 @@\n-      RegisterMap reg_map(current, false);\n+      RegisterMap reg_map(current,\n+                          RegisterMap::UpdateMap::skip,\n+                          RegisterMap::ProcessFrames::include,\n+                          RegisterMap::WalkContinuation::skip);\n@@ -1723,1 +1744,4 @@\n-      RegisterMap reg_map(current, false);\n+      RegisterMap reg_map(current,\n+                          RegisterMap::UpdateMap::skip,\n+                          RegisterMap::ProcessFrames::include,\n+                          RegisterMap::WalkContinuation::skip);\n@@ -1749,1 +1773,4 @@\n-    RegisterMap reg_map(current, false);\n+    RegisterMap reg_map(current,\n+                        RegisterMap::UpdateMap::skip,\n+                        RegisterMap::ProcessFrames::include,\n+                        RegisterMap::WalkContinuation::skip);\n@@ -1767,1 +1794,4 @@\n-  RegisterMap reg_map(current, false);\n+  RegisterMap reg_map(current,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -1811,1 +1841,4 @@\n-  RegisterMap reg_map(current, false);\n+  RegisterMap reg_map(current,\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip);\n@@ -3304,1 +3337,4 @@\n-  RegisterMap map(current, false);\n+  RegisterMap map(current,\n+                  RegisterMap::UpdateMap::skip,\n+                  RegisterMap::ProcessFrames::include,\n+                  RegisterMap::WalkContinuation::skip);\n@@ -3378,1 +3414,4 @@\n-  RegisterMap map(JavaThread::current(), false, false); \/\/ don't walk continuations\n+  RegisterMap map(JavaThread::current(),\n+                  RegisterMap::UpdateMap::skip,\n+                  RegisterMap::ProcessFrames::skip,\n+                  RegisterMap::WalkContinuation::skip); \/\/ don't walk continuations\n","filename":"src\/hotspot\/share\/runtime\/sharedRuntime.cpp","additions":52,"deletions":13,"binary":false,"changes":65,"status":"modified"},{"patch":"@@ -29,1 +29,5 @@\n-StackFrameStream::StackFrameStream(JavaThread *thread, bool update, bool process_frames, bool allow_missing_reg) : _reg_map(thread, update, process_frames) {\n+StackFrameStream::StackFrameStream(JavaThread *thread, bool update, bool process_frames, bool allow_missing_reg)\n+  : _reg_map(thread,\n+             update ? RegisterMap::UpdateMap::include : RegisterMap::UpdateMap::skip,\n+             process_frames ? RegisterMap::ProcessFrames::include : RegisterMap::ProcessFrames::skip,\n+             RegisterMap::WalkContinuation::skip) {\n","filename":"src\/hotspot\/share\/runtime\/stackFrameStream.cpp","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -90,1 +90,4 @@\n-  RegisterMap map(_jt, false \/* update_map *\/, false \/* process_frames *\/);\n+  RegisterMap map(_jt,\n+                  RegisterMap::UpdateMap::skip,\n+                  RegisterMap::ProcessFrames::skip,\n+                  RegisterMap::WalkContinuation::skip);\n@@ -111,1 +114,4 @@\n-    RegisterMap map(_jt, false \/* update_map *\/, false \/* process_frames *\/);\n+    RegisterMap map(_jt,\n+                    RegisterMap::UpdateMap::skip,\n+                    RegisterMap::ProcessFrames::skip,\n+                    RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/runtime\/stackWatermark.inline.hpp","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -65,1 +65,5 @@\n-: _reg_map(thread), _thread(thread), _chunk() {\n+: _reg_map(thread,\n+           RegisterMap::UpdateMap::include,\n+           RegisterMap::ProcessFrames::include,\n+           RegisterMap::WalkContinuation::skip),\n+  _thread(thread), _chunk() {\n@@ -532,1 +536,4 @@\n-    vframeStreamCommon(RegisterMap(thread, true, true, true)) {\n+    vframeStreamCommon(RegisterMap(thread,\n+                                   RegisterMap::UpdateMap::include,\n+                                   RegisterMap::ProcessFrames::include,\n+                                   RegisterMap::WalkContinuation::include)) {\n@@ -543,1 +550,4 @@\n- : vframeStreamCommon(RegisterMap(thread, true, true, true)) {\n+ : vframeStreamCommon(RegisterMap(thread,\n+                                  RegisterMap::UpdateMap::include,\n+                                  RegisterMap::ProcessFrames::include,\n+                                  RegisterMap::WalkContinuation::include)) {\n@@ -561,1 +571,1 @@\n- : vframeStreamCommon(RegisterMap(continuation, true)) {\n+ : vframeStreamCommon(RegisterMap(continuation, RegisterMap::UpdateMap::include)) {\n","filename":"src\/hotspot\/share\/runtime\/vframe.cpp","additions":14,"deletions":4,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -113,1 +113,4 @@\n-  : vframeStreamCommon(RegisterMap(thread, true, process_frame, true)) {\n+  : vframeStreamCommon(RegisterMap(thread,\n+                                   RegisterMap::UpdateMap::include,\n+                                   process_frame ? RegisterMap::ProcessFrames::include : RegisterMap::ProcessFrames::skip ,\n+                                   RegisterMap::WalkContinuation::include)) {\n","filename":"src\/hotspot\/share\/runtime\/vframe.inline.hpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -455,1 +455,4 @@\n-    RegisterMap map(thread);\n+    RegisterMap map(thread,\n+                    RegisterMap::UpdateMap::include,\n+                    RegisterMap::ProcessFrames::include,\n+                    RegisterMap::WalkContinuation::skip);\n@@ -570,1 +573,4 @@\n-  RegisterMap map(current, false);\n+  RegisterMap map(current,\n+                  RegisterMap::UpdateMap::skip,\n+                  RegisterMap::ProcessFrames::include,\n+                  RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/runtime\/vframeArray.cpp","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2028,1 +2028,4 @@\n-    RegisterMap reg_map(java_thread);\n+    RegisterMap reg_map(java_thread,\n+                        RegisterMap::UpdateMap::include,\n+                        RegisterMap::ProcessFrames::include,\n+                        RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/services\/heapDumper.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -690,1 +690,4 @@\n-    RegisterMap reg_map(_thread);\n+    RegisterMap reg_map(_thread,\n+                        RegisterMap::UpdateMap::include,\n+                        RegisterMap::ProcessFrames::include,\n+                        RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/services\/threadService.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -532,1 +532,4 @@\n-    RegisterMap reg_map(p);\n+    RegisterMap reg_map(p,\n+                        RegisterMap::UpdateMap::include,\n+                        RegisterMap::ProcessFrames::include,\n+                        RegisterMap::WalkContinuation::skip);\n","filename":"src\/hotspot\/share\/utilities\/debug.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -335,1 +335,4 @@\n-      RegisterMap map(JavaThread::cast(t), false); \/\/ No update\n+      RegisterMap map(JavaThread::cast(t),\n+                      RegisterMap::UpdateMap::skip,\n+                      RegisterMap::ProcessFrames::include,\n+                      RegisterMap::WalkContinuation::skip); \/\/ No update\n","filename":"src\/hotspot\/share\/utilities\/vmError.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"}]}