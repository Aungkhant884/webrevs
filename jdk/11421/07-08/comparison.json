{"files":[{"patch":"@@ -51,1 +51,1 @@\n- * example by a background job scheduler, then it will typically not\n+ * example by a background job scheduler, then it may not\n","filename":"src\/java.base\/share\/classes\/java\/io\/Console.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -37,0 +37,2 @@\n+    private final Object readLock;\n+    private final Object writeLock;\n@@ -40,0 +42,2 @@\n+        readLock = new Object();\n+        writeLock = new Object();\n@@ -63,1 +67,3 @@\n-        delegate.format(fmt, args);\n+        synchronized (writeLock) {\n+            delegate.format(fmt, args);\n+        }\n@@ -72,1 +78,3 @@\n-        delegate.printf(format, args);\n+        synchronized (writeLock) {\n+            delegate.printf(format, args);\n+        }\n@@ -81,1 +89,5 @@\n-        return delegate.readLine(fmt, args);\n+        synchronized (writeLock) {\n+            synchronized (readLock) {\n+                return delegate.readLine(fmt, args);\n+            }\n+        }\n@@ -89,1 +101,3 @@\n-        return delegate.readLine();\n+        synchronized (readLock) {\n+            return delegate.readLine();\n+        }\n@@ -97,1 +111,5 @@\n-        return delegate.readPassword(fmt, args);\n+        synchronized (writeLock) {\n+            synchronized (readLock) {\n+                return delegate.readPassword(fmt, args);\n+            }\n+        }\n@@ -105,1 +123,3 @@\n-        return delegate.readPassword();\n+        synchronized (readLock) {\n+            return delegate.readPassword();\n+        }\n","filename":"src\/java.base\/share\/classes\/java\/io\/ProxyingConsole.java","additions":26,"deletions":6,"binary":false,"changes":32,"status":"modified"}]}