{"files":[{"patch":"@@ -615,1 +615,1 @@\n-                return ServiceLoader.load(JdkConsoleProvider.class).stream()\n+                return ServiceLoader.load(ModuleLayer.boot(), JdkConsoleProvider.class).stream()\n@@ -618,1 +618,1 @@\n-                        .map(jcp -> jcp.console(istty))\n+                        .map(jcp -> jcp.console(istty, CHARSET))\n@@ -625,1 +625,1 @@\n-        } catch (ServiceConfigurationError ignore) {\n+        } catch (Throwable ignore) {\n","filename":"src\/java.base\/share\/classes\/java\/io\/Console.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -27,0 +27,2 @@\n+import java.nio.charset.Charset;\n+\n@@ -45,0 +47,1 @@\n+     * @param charset charset of the platform console\n@@ -46,1 +49,1 @@\n-    JdkConsole console(boolean isTTY);\n+    JdkConsole console(boolean isTTY, Charset charset);\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/io\/JdkConsoleProvider.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -50,2 +50,3 @@\n-    public JdkConsole console(boolean isTTY) {\n-        return new JdkConsoleImpl();\n+    @Override\n+    public JdkConsole console(boolean isTTY, Charset charset) {\n+        return new JdkConsoleImpl(charset);\n@@ -58,1 +59,2 @@\n-    public static class JdkConsoleImpl implements JdkConsole {\n+    private static class JdkConsoleImpl implements JdkConsole {\n+        @Override\n@@ -63,0 +65,1 @@\n+        @Override\n@@ -67,0 +70,1 @@\n+        @Override\n@@ -72,0 +76,1 @@\n+        @Override\n@@ -76,0 +81,1 @@\n+        @Override\n@@ -84,0 +90,1 @@\n+        @Override\n@@ -88,0 +95,1 @@\n+        @Override\n@@ -96,0 +104,1 @@\n+        @Override\n@@ -100,0 +109,1 @@\n+        @Override\n@@ -104,0 +114,1 @@\n+        @Override\n@@ -111,1 +122,1 @@\n-        public JdkConsoleImpl() {\n+        public JdkConsoleImpl(Charset charset) {\n@@ -113,1 +124,1 @@\n-                terminal = TerminalBuilder.builder().build();\n+                terminal = TerminalBuilder.builder().encoding(charset).build();\n","filename":"src\/jdk.internal.le\/share\/classes\/jdk\/internal\/org\/jline\/JdkConsoleProviderImpl.java","additions":16,"deletions":5,"binary":false,"changes":21,"status":"modified"}]}