{"files":[{"patch":"@@ -817,0 +817,1 @@\n+  ResourceMark rm;\n@@ -818,0 +819,1 @@\n+\n@@ -819,1 +821,4 @@\n-    ret = pthread_create(&tid, &attr, (void* (*)(void*)) thread_native_entry, thread);\n+    int limit = 3;\n+    do {\n+      ret = pthread_create(&tid, &attr, (void* (*)(void*)) thread_native_entry, thread);\n+    } while (ret == EAGAIN && limit-- > 0);\n@@ -824,2 +829,2 @@\n-    log_info(os, thread)(\"Thread started (pthread id: \" UINTX_FORMAT \", attributes: %s). \",\n-      (uintx) tid, os::Posix::describe_pthread_attr(buf, sizeof(buf), &attr));\n+    log_info(os, thread)(\"Thread \\\"%s\\\" started (pthread id: \" UINTX_FORMAT \", attributes: %s). \",\n+                         thread->name(), (uintx) tid, os::Posix::describe_pthread_attr(buf, sizeof(buf), &attr));\n@@ -828,2 +833,2 @@\n-    log_warning(os, thread)(\"Failed to start thread - pthread_create failed (%d=%s) for attributes: %s.\",\n-      ret, os::errno_name(ret), os::Posix::describe_pthread_attr(buf, sizeof(buf), &attr));\n+    log_warning(os, thread)(\"Failed to start thread \\\"%s\\\" - pthread_create failed (%d=%s) for attributes: %s.\",\n+                            thread->name(), ret, os::errno_name(ret), os::Posix::describe_pthread_attr(buf, sizeof(buf), &attr));\n","filename":"src\/hotspot\/os\/aix\/os_aix.cpp","additions":10,"deletions":5,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -634,0 +634,2 @@\n+\n+    ResourceMark rm;\n@@ -635,1 +637,5 @@\n-    int ret = pthread_create(&tid, &attr, (void* (*)(void*)) thread_native_entry, thread);\n+    int ret = 0;\n+    int limit = 3;\n+    do {\n+      ret = pthread_create(&tid, &attr, (void* (*)(void*)) thread_native_entry, thread);\n+    } while (ret == EAGAIN && limit-- > 0);\n@@ -639,2 +645,2 @@\n-      log_info(os, thread)(\"Thread started (pthread id: \" UINTX_FORMAT \", attributes: %s). \",\n-        (uintx) tid, os::Posix::describe_pthread_attr(buf, sizeof(buf), &attr));\n+      log_info(os, thread)(\"Thread \\\"%s\\\" started (pthread id: \" UINTX_FORMAT \", attributes: %s). \",\n+                           thread->name(), (uintx) tid, os::Posix::describe_pthread_attr(buf, sizeof(buf), &attr));\n@@ -642,2 +648,2 @@\n-      log_warning(os, thread)(\"Failed to start thread - pthread_create failed (%s) for attributes: %s.\",\n-        os::errno_name(ret), os::Posix::describe_pthread_attr(buf, sizeof(buf), &attr));\n+      log_warning(os, thread)(\"Failed to start thread \\\"%s\\\" - pthread_create failed (%s) for attributes: %s.\",\n+                              thread->name(), os::errno_name(ret), os::Posix::describe_pthread_attr(buf, sizeof(buf), &attr));\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":11,"deletions":5,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -866,0 +866,1 @@\n+    ResourceMark rm;\n@@ -867,1 +868,5 @@\n-    int ret = pthread_create(&tid, &attr, (void* (*)(void*)) thread_native_entry, thread);\n+    int ret = 0;\n+    int limit = 3;\n+    do {\n+      ret = pthread_create(&tid, &attr, (void* (*)(void*)) thread_native_entry, thread);\n+    } while (ret == EAGAIN && limit-- > 0);\n@@ -871,2 +876,2 @@\n-      log_info(os, thread)(\"Thread started (pthread id: \" UINTX_FORMAT \", attributes: %s). \",\n-        (uintx) tid, os::Posix::describe_pthread_attr(buf, sizeof(buf), &attr));\n+      log_info(os, thread)(\"Thread \\\"%s\\\" started (pthread id: \" UINTX_FORMAT \", attributes: %s). \",\n+                           thread->name(), (uintx) tid, os::Posix::describe_pthread_attr(buf, sizeof(buf), &attr));\n@@ -874,2 +879,2 @@\n-      log_warning(os, thread)(\"Failed to start thread - pthread_create failed (%s) for attributes: %s.\",\n-        os::errno_name(ret), os::Posix::describe_pthread_attr(buf, sizeof(buf), &attr));\n+      log_warning(os, thread)(\"Failed to start thread \\\"%s\\\" - pthread_create failed (%s) for attributes: %s.\",\n+                              thread->name(), os::errno_name(ret), os::Posix::describe_pthread_attr(buf, sizeof(buf), &attr));\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":10,"deletions":5,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -746,8 +746,13 @@\n-  HANDLE thread_handle =\n-    (HANDLE)_beginthreadex(NULL,\n-                           (unsigned)stack_size,\n-                           (unsigned (__stdcall *)(void*)) thread_native_entry,\n-                           thread,\n-                           initflag,\n-                           &thread_id);\n-\n+  HANDLE thread_handle;\n+  int limit = 3;\n+  do {\n+    thread_handle =\n+      (HANDLE)_beginthreadex(NULL,\n+                             (unsigned)stack_size,\n+                             (unsigned (__stdcall *)(void*)) thread_native_entry,\n+                             thread,\n+                             initflag,\n+                             &thread_id);\n+  } while (thread_handle == NULL && errno == EAGAIN && limit-- > 0);\n+\n+  ResourceMark rm;\n@@ -756,2 +761,3 @@\n-    log_info(os, thread)(\"Thread started (tid: %u, attributes: %s)\",\n-      thread_id, describe_beginthreadex_attributes(buf, sizeof(buf), stack_size, initflag));\n+    log_info(os, thread)(\"Thread \\\"%s\\\" started (tid: %u, attributes: %s)\",\n+                         thread->name(), thread_id,\n+                         describe_beginthreadex_attributes(buf, sizeof(buf), stack_size, initflag));\n@@ -759,2 +765,2 @@\n-    log_warning(os, thread)(\"Failed to start thread - _beginthreadex failed (%s) for attributes: %s.\",\n-      os::errno_name(errno), describe_beginthreadex_attributes(buf, sizeof(buf), stack_size, initflag));\n+    log_warning(os, thread)(\"Failed to start thread \\\"%s\\\" - _beginthreadex failed (%s) for attributes: %s.\",\n+                            thread->name(), os::errno_name(errno), describe_beginthreadex_attributes(buf, sizeof(buf), stack_size, initflag));\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":18,"deletions":12,"binary":false,"changes":30,"status":"modified"}]}