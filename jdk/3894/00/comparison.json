{"files":[{"patch":"@@ -49,1 +49,0 @@\n-import static jdk.jpackage.internal.StandardBundlerParam.APP_NAME;\n@@ -415,1 +414,4 @@\n-        if (!StandardBundlerParam.isRuntimeInstaller(params)) {\n+        final String installDir = LINUX_INSTALL_DIR.fetchFrom(params);\n+\n+        if (!StandardBundlerParam.isRuntimeInstaller(params)\n+                || (isInstallDirInUsrTree(installDir) || installDir.startsWith(\"\/usr\/\"))) {\n","filename":"src\/jdk.jpackage\/linux\/classes\/jdk\/jpackage\/internal\/LinuxDebBundler.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,0 +30,1 @@\n+import java.util.function.Predicate;\n@@ -36,0 +37,3 @@\n+import jdk.jpackage.test.LinuxHelper;\n+import static jdk.jpackage.test.TKit.assertTrue;\n+import static jdk.jpackage.test.TKit.assertFalse;\n@@ -124,0 +128,17 @@\n+        })\n+        .forTypes(PackageType.LINUX_DEB)\n+        .addInstallVerifier(cmd -> {\n+            String installDir = cmd.getArgumentValue(\"--install-dir\", () -> \"\/opt\");\n+            Path copyright = Path.of(\"\/usr\/share\/doc\",\n+                    LinuxHelper.getPackageName(cmd), \"copyright\");\n+            boolean withCopyright = LinuxHelper.getPackageFiles(cmd).anyMatch(\n+                    Predicate.isEqual(copyright));\n+            if (installDir.startsWith(\"\/usr\/\") || installDir.equals(\"\/usr\")) {\n+                assertTrue(withCopyright, String.format(\n+                        \"Check the package delivers [%s] copyright file\",\n+                        copyright));\n+            } else {\n+                assertFalse(withCopyright, String.format(\n+                        \"Check the package doesn't deliver [%s] copyright file\",\n+                        copyright));\n+            }\n","filename":"test\/jdk\/tools\/jpackage\/share\/RuntimePackageTest.java","additions":22,"deletions":1,"binary":false,"changes":23,"status":"modified"}]}