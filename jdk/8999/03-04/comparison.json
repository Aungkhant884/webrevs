{"files":[{"patch":"@@ -140,1 +140,1 @@\n-            boolean check = hasAllRequiredCPUFeature(irAnno.applyIfCPUFeature(), \"applyIfCPUFeature\");\n+            boolean check = hasAllRequiredCPUFeature(irAnno.applyIfCPUFeature());\n@@ -172,1 +172,2 @@\n-        int applyRules = 0;\n+        int flagConstraints = 0;\n+        int cpuFeatureConstraints = 0;\n@@ -174,1 +175,1 @@\n-            applyRules++;\n+            flagConstraints++;\n@@ -179,1 +180,1 @@\n-            applyRules++;\n+            flagConstraints++;\n@@ -184,1 +185,1 @@\n-            applyRules++;\n+            flagConstraints++;\n@@ -189,3 +190,3 @@\n-            applyRules++;\n-            TestFormat.checkNoThrow((irAnno.applyIfCPUFeature().length % 2) == 0,\n-                                    \"Argument count for applyIfCPUFeature should be multiple of two\" + failAt());\n+            cpuFeatureConstraints++;\n+            TestFormat.checkNoThrow(irAnno.applyIfCPUFeature().length == 2,\n+                                    \"applyIfCPUFeature expects single CPU feature pair\" + failAt());\n@@ -194,3 +195,3 @@\n-            applyRules++;\n-            TestFormat.checkNoThrow((irAnno.applyIfCPUFeatureAnd().length % 2) == 0,\n-                                    \"Argument count for applyIfCPUFeatureAnd should be multiple of two\" + failAt());\n+            cpuFeatureConstraints++;\n+            TestFormat.checkNoThrow((irAnno.applyIfCPUFeatureAnd().length % 2) == 0 && irAnno.applyIfCPUFeatureAnd().length >= 2,\n+                                    \"applyIfCPUFeatureAnd expects more than one CPU feature pair\" + failAt());\n@@ -199,3 +200,3 @@\n-            applyRules++;\n-            TestFormat.checkNoThrow((irAnno.applyIfCPUFeatureOr().length % 2) == 0,\n-                                    \"Argument count for applyIfCPUFeatureOr should be multiple of two\" + failAt());\n+            cpuFeatureConstraints++;\n+            TestFormat.checkNoThrow((irAnno.applyIfCPUFeatureOr().length % 2) == 0 && irAnno.applyIfCPUFeatureOr().length >= 2,\n+                                    \"applyIfCPUFeatureOr expects more than one CPU feature pair\" + failAt());\n@@ -204,1 +205,1 @@\n-            applyRules++;\n+            flagConstraints++;\n@@ -208,2 +209,2 @@\n-        TestFormat.checkNoThrow(applyRules <= 1,\n-                                \"Can only specify one apply constraint \" + failAt());\n+        TestFormat.checkNoThrow(flagConstraints <= 1, \"Can only specify one flag constraint\" + failAt());\n+        TestFormat.checkNoThrow(cpuFeatureConstraints <= 1, \"Can only specify one CPU feature constraint\" + failAt());\n","filename":"test\/hotspot\/jtreg\/compiler\/lib\/ir_framework\/test\/IREncodingPrinter.java","additions":18,"deletions":17,"binary":false,"changes":35,"status":"modified"}]}