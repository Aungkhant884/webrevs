{"files":[{"patch":"@@ -361,0 +361,1 @@\n+        long transferred = 0L;\n@@ -362,3 +363,3 @@\n-            FileChannel fci = getChannel();\n-            long pos = fci.position();\n-            long count = fci.size() - pos;\n+            FileChannel fc = getChannel();\n+            long pos = fc.position();\n+            long count = fc.size() - pos;\n@@ -366,8 +367,5 @@\n-                FileChannel fco = fos.getChannel();\n-\n-                \/\/ Return if transferTo() copies enough bytes, but if it does\n-                \/\/ not, then use the superclass method to copy those remaining\n-                long transferred = fci.transferTo(pos, count, fco);\n-                fci.position(pos + transferred);\n-                if (transferred == count) {\n-                    return count;\n+                transferred = fc.transferTo(pos, Long.MAX_VALUE, fos.getChannel());\n+                long newPos = pos + transferred;\n+                fc.position(newPos);\n+                if (newPos >= fc.size()) {\n+                    return transferred;\n@@ -377,1 +375,1 @@\n-        return super.transferTo(out);\n+        return transferred + super.transferTo(out);\n","filename":"src\/java.base\/share\/classes\/java\/io\/FileInputStream.java","additions":10,"deletions":12,"binary":false,"changes":22,"status":"modified"}]}