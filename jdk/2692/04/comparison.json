{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -363,2 +363,0 @@\n-    FILE *fptr;\n-    struct stat st;\n@@ -366,0 +364,2 @@\n+    struct stat st;\n+    FILE *fptr = fopen(arg, \"r\");\n@@ -367,12 +367,0 @@\n-    \/* failed to access the file *\/\n-    if (stat(arg, &st) != 0) {\n-        JLI_ReportMessage(CFG_ERROR6, arg);\n-        exit(1);\n-    }\n-\n-    if (st.st_size > MAX_ARGF_SIZE) {\n-        JLI_ReportMessage(CFG_ERROR10, MAX_ARGF_SIZE);\n-        exit(1);\n-    }\n-\n-    fptr = fopen(arg, \"r\");\n@@ -380,1 +368,1 @@\n-    if (fptr == NULL) {\n+    if (fptr == NULL || fstat(fileno(fptr), &st) != 0) {\n@@ -383,0 +371,5 @@\n+    } else {\n+        if (st.st_size > MAX_ARGF_SIZE) {\n+            JLI_ReportMessage(CFG_ERROR10, MAX_ARGF_SIZE);\n+            exit(1);\n+        }\n@@ -386,1 +379,0 @@\n-    fclose(fptr);\n@@ -393,0 +385,1 @@\n+    fclose(fptr);\n","filename":"src\/java.base\/share\/native\/libjli\/args.c","additions":10,"deletions":17,"binary":false,"changes":27,"status":"modified"}]}