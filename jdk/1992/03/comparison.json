{"files":[{"patch":"@@ -720,1 +720,1 @@\n-  product(intx, AvgMonitorsPerThreadEstimate, 1024, DIAGNOSTIC,             \\\n+  product(int, AvgMonitorsPerThreadEstimate, 1024, DIAGNOSTIC,              \\\n","filename":"src\/hotspot\/share\/runtime\/globals.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -238,0 +238,2 @@\n+  \/\/ Start the ceiling with the estimate for one thread.\n+  set_in_use_list_ceiling(AvgMonitorsPerThreadEstimate);\n@@ -252,1 +254,2 @@\n-\/\/ Start the ceiling with the estimate for one thread.\n+\/\/ Start the ceiling with the estimate for one thread in initialize()\n+\/\/ which is called after cmd line options are processed.\n@@ -255,1 +258,1 @@\n-static jint _in_use_list_ceiling = AvgMonitorsPerThreadEstimate;\n+static jint _in_use_list_ceiling = 0;\n@@ -1169,5 +1172,0 @@\n-#ifdef ASSERT\n-  size_t l_in_use_list_ceiling = in_use_list_ceiling();\n-#endif\n-  assert(l_in_use_list_ceiling > 0, \"in_use_list_ceiling=\" SIZE_FORMAT\n-         \": must be > 0\", l_in_use_list_ceiling);\n@@ -1180,0 +1178,6 @@\n+void ObjectSynchronizer::set_in_use_list_ceiling(size_t new_value) {\n+  \/\/ _in_use_list_ceiling is a jint so this cast could lose precision,\n+  \/\/ but in reality the ceiling should never get that high.\n+  _in_use_list_ceiling = (jint)new_value;\n+}\n+\n","filename":"src\/hotspot\/share\/runtime\/synchronizer.cpp","additions":12,"deletions":8,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -134,0 +134,1 @@\n+  static void set_in_use_list_ceiling(size_t new_value);\n","filename":"src\/hotspot\/share\/runtime\/synchronizer.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}