{"files":[{"patch":"@@ -1673,1 +1673,1 @@\n-\/\/ Currently only support Zba and Zbb bitmanip extensions.\n+\/\/ Currently only support Zba, Zbb and Zbs bitmanip extensions.\n@@ -1748,0 +1748,1 @@\n+  INSN(bexti,   0b0010011, 0b101, 0b010010);\n","filename":"src\/hotspot\/cpu\/riscv\/assembler_riscv.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -105,0 +105,1 @@\n+  product(bool, UseZbs, false, EXPERIMENTAL, \"Use Zbs instructions\")             \\\n","filename":"src\/hotspot\/cpu\/riscv\/globals_riscv.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2985,0 +2985,8 @@\n+operand immIpowerOf2() %{\n+  predicate(is_power_of_2((juint)(n->get_int())));\n+  match(ConI);\n+  op_cost(0);\n+  format %{ %}\n+  interface(CONST_INTER);\n+%}\n+\n","filename":"src\/hotspot\/cpu\/riscv\/riscv.ad","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -527,1 +527,15 @@\n-%}\n\\ No newline at end of file\n+%}\n+\n+\/\/ AndI 0b0..010..0 + ConvI2B\n+instruct convI2Bool_andI_reg_immIpowerOf2(iRegINoSp dst, iRegIorL2I src, immIpowerOf2 mask) %{\n+  predicate(UseZbs);\n+  match(Set dst (Conv2B (AndI src mask)));\n+  ins_cost(ALU_COST);\n+\n+  format %{ \"bexti  $dst, $src, $mask\\t#@convI2Bool_andI_reg_immIpowerOf2\" %}\n+  ins_encode %{\n+    __ bexti($dst$$Register, $src$$Register, exact_log2((juint)($mask$$constant)));\n+  %}\n+\n+  ins_pipe(ialu_reg_reg);\n+%}\n","filename":"src\/hotspot\/cpu\/riscv\/riscv_b.ad","additions":15,"deletions":1,"binary":false,"changes":16,"status":"modified"}]}