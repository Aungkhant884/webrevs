{"files":[{"patch":"@@ -38,1 +38,1 @@\n-    enum THPMode {always, never, madvise}\n+    enum THPMode {always, never, madvise, unknown}\n@@ -90,11 +90,8 @@\n-        Scanner scanner;\n-        try {\n-            scanner = new Scanner(new File(\"\/proc\/meminfo\"));\n-        } catch (FileNotFoundException e) {\n-            return 0;\n-        }\n-        while (scanner.hasNextLine()) {\n-            Matcher mat = pat.matcher(scanner.nextLine());\n-            if (mat.matches()) {\n-                scanner.close();\n-                return Long.parseLong(mat.group(1)) * 1024;\n+        long result = 0;\n+        try (Scanner scanner = new Scanner(new File(\"\/proc\/meminfo\"))) {\n+            while (scanner.hasNextLine()) {\n+                Matcher mat = pat.matcher(scanner.nextLine());\n+                if (mat.matches()) {\n+                    scanner.close();\n+                    return Long.parseLong(mat.group(1)) * 1024;\n+                }\n@@ -102,0 +99,2 @@\n+        } catch (FileNotFoundException e) {\n+            System.out.println(\"Could not open \/proc\/meminfo\");\n@@ -103,1 +102,0 @@\n-        scanner.close();\n@@ -125,4 +123,4 @@\n-        THPMode mode;\n-        try {\n-            String file = \"\/sys\/kernel\/mm\/transparent_hugepage\/enabled\";\n-            BufferedReader reader = new BufferedReader(new FileReader(file));\n+        THPMode mode = THPMode.unknown;\n+        String file = \"\/sys\/kernel\/mm\/transparent_hugepage\/enabled\";\n+        try (FileReader fr = new FileReader(file);\n+             BufferedReader reader = new BufferedReader(fr)) {\n@@ -140,1 +138,2 @@\n-            mode = THPMode.never;\n+            System.out.println(\"Failed to read \" + file);\n+            mode = THPMode.unknown;\n@@ -147,3 +146,3 @@\n-        try {\n-            String file = \"\/sys\/kernel\/mm\/transparent_hugepage\/hpage_pmd_size\";\n-            BufferedReader reader = new BufferedReader(new FileReader(file));\n+        String file = \"\/sys\/kernel\/mm\/transparent_hugepage\/hpage_pmd_size\";\n+        try (FileReader fr = new FileReader(file);\n+             BufferedReader reader = new BufferedReader(fr)) {\n","filename":"test\/hotspot\/jtreg\/runtime\/os\/HugePageConfiguration.java","additions":20,"deletions":21,"binary":false,"changes":41,"status":"modified"}]}