{"files":[{"patch":"@@ -903,0 +903,3 @@\n+                        if (keepAliveConnections < 0) {\n+                            keepAliveConnections = usingProxy?50:5;\n+                        }\n","filename":"src\/java.base\/share\/classes\/sun\/net\/www\/http\/HttpClient.java","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -27,1 +27,2 @@\n- * @run main\/othervm -Dhttp.keepAlive.time.server=20 -esa -ea B8291637\n+ * @run main\/othervm -Dhttp.keepAlive.time.server=20 -esa -ea B8291637 timeout\n+ * @run main\/othervm -Dhttp.keepAlive.time.server=20 -esa -ea B8291637 max\n@@ -43,0 +44,1 @@\n+        final String param; \/\/ the parameter to test \"max\" or \"timeout\"\n@@ -45,1 +47,1 @@\n-        public Server() throws IOException {\n+        public Server(String param) throws IOException {\n@@ -49,0 +51,1 @@\n+            this.param = param;\n@@ -79,1 +82,1 @@\n-                            \"Keep-Alive: timeout=-10\\r\\n\" + \/\/ invalid negative value\n+                            \"Keep-Alive: \" + param + \"=-10\\r\\n\" + \/\/ invalid negative value\n@@ -94,0 +97,2 @@\n+                     *\n+                     * Same behavior should occur in case of max=-1 with the bug\n@@ -102,2 +107,3 @@\n-            } catch (IOException e) {\n-                System.err.println(\"Server exception terminating\");\n+            } catch (Throwable t) {\n+                System.err.println(\"Server exception terminating: \" + t);\n+                passed.completeExceptionally(t);\n@@ -109,1 +115,1 @@\n-        Server server = new Server();\n+        Server server = new Server(args[0]);\n@@ -122,4 +128,7 @@\n-        if (!passed.get()) {\n-            server.close();\n-            throw new RuntimeException(\"Test failed\");\n-        } else {\n+        try {\n+            if (!passed.get()) {\n+                throw new RuntimeException(\"Test failed\");\n+            } else {\n+                System.out.println(\"Test passed\");\n+            }\n+        } finally {\n@@ -127,1 +136,0 @@\n-            System.out.println(\"Test passed\");\n","filename":"test\/jdk\/sun\/net\/www\/http\/KeepAliveCache\/B8291637.java","additions":19,"deletions":11,"binary":false,"changes":30,"status":"modified"}]}