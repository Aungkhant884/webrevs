{"files":[{"patch":"@@ -357,0 +357,6 @@\n+# The test selector starting with a hash (#testid) will be stripped by all\n+# evals in ParseJtregTestSelectionInner and will be reinserted by calling\n+# TestID (if it is present).\n+ParseJtregTestSelection = \\\n+    $(call IfAppend, $(call ParseJtregTestSelectionInner, $1), $(call TestID, $1))\n+\n@@ -363,5 +369,14 @@\n-define ParseJtregTestSelection\n-  $(call IfAppend, \\\n-    $(eval TEST_NAME := $(strip $(patsubst jtreg:%, %, $1))) \\\n-    $(if $(or $(findstring :, $(TEST_NAME)), $(findstring \/, $(TEST_NAME))), , \\\n-      $(eval TEST_NAME := :$(TEST_NAME)) \\\n+define ParseJtregTestSelectionInner\n+  $(eval TEST_NAME := $(strip $(patsubst jtreg:%, %, $1))) \\\n+  $(if $(or $(findstring :, $(TEST_NAME)), $(findstring \/, $(TEST_NAME))), , \\\n+    $(eval TEST_NAME := :$(TEST_NAME)) \\\n+  ) \\\n+  $(if $(findstring :, $(TEST_NAME)), \\\n+    $(if $(filter :%, $(TEST_NAME)), \\\n+      $(eval TEST_GROUP := $(patsubst :%, %, $(TEST_NAME))) \\\n+      $(eval TEST_ROOTS := $(foreach test_root, $(JTREG_TESTROOTS), \\\n+          $(call CleanupJtregPath, $(test_root)))) \\\n+    , \\\n+      $(eval TEST_PATH := $(word 1, $(subst :, $(SPACE), $(TEST_NAME)))) \\\n+      $(eval TEST_GROUP := $(word 2, $(subst :, $(SPACE), $(TEST_NAME)))) \\\n+      $(eval TEST_ROOTS := $(call ExpandJtregRoot, $(TEST_PATH))) \\\n@@ -369,5 +384,3 @@\n-    $(if $(findstring :, $(TEST_NAME)), \\\n-      $(if $(filter :%, $(TEST_NAME)), \\\n-        $(eval TEST_GROUP := $(patsubst :%, %, $(TEST_NAME))) \\\n-        $(eval TEST_ROOTS := $(foreach test_root, $(JTREG_TESTROOTS), \\\n-            $(call CleanupJtregPath, $(test_root)))) \\\n+    $(foreach test_root, $(TEST_ROOTS), \\\n+      $(if $(filter \/%, $(test_root)), \\\n+        jtreg:$(test_root):$(TEST_GROUP) \\\n@@ -375,6 +388,1 @@\n-        $(eval TEST_PATH := $(word 1, $(subst :, $(SPACE), $(TEST_NAME)))) \\\n-        $(eval TEST_GROUP := $(word 2, $(subst :, $(SPACE), $(TEST_NAME)))) \\\n-        $(eval TEST_ROOTS := $(call ExpandJtregRoot, $(TEST_PATH))) \\\n-      ) \\\n-      $(foreach test_root, $(TEST_ROOTS), \\\n-        $(if $(filter \/%, $(test_root)), \\\n+        $(if $(filter $(TEST_GROUP), $($(JTREG_TOPDIR)\/$(test_root)_JTREG_TEST_GROUPS)), \\\n@@ -382,4 +390,0 @@\n-        , \\\n-          $(if $(filter $(TEST_GROUP), $($(JTREG_TOPDIR)\/$(test_root)_JTREG_TEST_GROUPS)), \\\n-            jtreg:$(test_root):$(TEST_GROUP) \\\n-          ) \\\n@@ -388,5 +392,0 @@\n-    , \\\n-      $(eval TEST_PATHS := $(call ExpandJtregPath, $(TEST_NAME))) \\\n-      $(foreach test_path, $(TEST_PATHS), \\\n-        jtreg:$(test_path) \\\n-      ) \\\n@@ -395,1 +394,4 @@\n-    $(call TestID, $1) \\\n+    $(eval TEST_PATHS := $(call ExpandJtregPath, $(TEST_NAME))) \\\n+    $(foreach test_path, $(TEST_PATHS), \\\n+      jtreg:$(test_path) \\\n+    ) \\\n","filename":"make\/RunTests.gmk","additions":28,"deletions":26,"binary":false,"changes":54,"status":"modified"}]}