{"files":[{"patch":"@@ -232,2 +232,1 @@\n-        if (x <= 0 || y <= 0)\n-            throw new IllegalArgumentException(\"Non-positive parameter\");\n+        assert x > 0 && y > 0 : \"Non-positive parameter\";\n@@ -261,1 +260,1 @@\n-        } catch (IllegalArgumentException | UnixException ignored) {\n+        } catch (UnixException ignored) {\n@@ -322,1 +321,0 @@\n-                    long comp = Blocker.begin();\n@@ -324,4 +322,9 @@\n-                        bufferCopy0(fo, fi, ((DirectBuffer)buf).address(),\n-                                    bufferSize, addressToPollForCancel);\n-                    } catch (UnixException x) {\n-                        x.rethrowAsIOException(source, target);\n+                        long comp = Blocker.begin();\n+                        try {\n+                            bufferedCopy0(fo, fi, ((DirectBuffer)buf).address(),\n+                                          bufferSize, addressToPollForCancel);\n+                        } catch (UnixException x) {\n+                            x.rethrowAsIOException(source, target);\n+                        } finally {\n+                            Blocker.end(comp);\n+                        }\n@@ -330,1 +333,0 @@\n-                        Blocker.end(comp);\n@@ -733,2 +735,2 @@\n-    private static native void bufferCopy0(int dst, int src, long address,\n-                                           int size, long addressToPollForCancel)\n+    private static native void bufferedCopy0(int dst, int src, long address,\n+                                             int size, long addressToPollForCancel)\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixCopyFile.java","additions":13,"deletions":11,"binary":false,"changes":24,"status":"modified"}]}