{"files":[{"patch":"@@ -81,0 +81,1 @@\n+    requires jdk.zipfs;\n","filename":"src\/jdk.compiler\/share\/classes\/module-info.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8192920 8204588 8210275\n+ * @bug 8192920 8204588 8210275 8286571\n@@ -35,0 +35,1 @@\n+import java.io.PrintWriter;\n@@ -109,0 +110,27 @@\n+    \/\/ java --source N --enable-preview Simple.java hello\n+    \/\/ on minimal jdk image containing jdk.compiler\n+    @Test\n+    void test8286571() throws IOException {\n+        starting(\"test8286571\");\n+        var pw = new PrintWriter(System.out);\n+        int rc = ToolProvider.findFirst(\"jlink\").orElseThrow().run(\n+                pw, pw,\n+                \"--add-modules\",\n+                \"jdk.compiler\",\n+                \"--output\",\n+                \"comp_only\");\n+        if (rc != 0)\n+            throw new AssertionError(\"Jlink failed: rc = \" + rc);\n+        Path file = getSimpleFile(\"Simple.java\", false);\n+        TestResult tr = doExec(\n+                Path.of(\"comp_only\", \"bin\", isWindows ? \"java.exe\" : \"java\").toString(),\n+                \"--source\", thisVersion,\n+                \"--enable-preview\",\n+                file.toString(), \"hello\");\n+        if (!tr.isOK())\n+            error(tr, \"Bad exit code: \" + tr.exitValue);\n+        if (!tr.contains(\"[hello]\"))\n+            error(tr, \"Expected output not found\");\n+        show(tr);\n+    }\n+\n","filename":"test\/jdk\/tools\/launcher\/SourceMode.java","additions":29,"deletions":1,"binary":false,"changes":30,"status":"modified"}]}