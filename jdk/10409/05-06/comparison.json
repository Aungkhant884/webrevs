{"files":[{"patch":"@@ -337,1 +337,1 @@\n-        if (r == minIndex) {\n+        if (r == minIndex && minIndex < Integer.MAX_VALUE) {\n@@ -632,0 +632,1 @@\n+\/\/        System.out.println(\"index \" + index + \" state \" + state);\n@@ -650,0 +651,6 @@\n+        if (length < 0 || index < 0) {\n+            return;\n+        }\n+        if (index + length < 0) {\n+            return;\n+        }\n@@ -660,0 +667,3 @@\n+        if (length + maxIndex < 0) {\n+            maxIndex = Integer.MAX_VALUE - length;\n+        }\n@@ -661,5 +671,2 @@\n-            if ((i + length) >= length) {\n-                setState(i + length, value.get(i));\n-            } else {\n-                setState(i, value.get(i));\n-            }\n+            \/\/System.out.println(\"insertIndex \" + i + \" length \" + length);\n+            setState(i + length, value.get(i));\n@@ -672,1 +679,2 @@\n-        for(int i = insMinIndex; i <= insMaxIndex; i++) {\n+\n+        for(int i = insMinIndex; i >=0 && i <= insMaxIndex; i++) {\n@@ -708,3 +716,12 @@\n-        int gapLength =(rmMaxIndex - rmMinIndex) == Integer.MAX_VALUE\n-                ? Integer.MAX_VALUE\n-                : (rmMaxIndex - rmMinIndex) + 1;\n+\n+\n+        if (rmMinIndex == 0 && rmMaxIndex == Integer.MAX_VALUE) {\n+            for (int i = Integer.MAX_VALUE; i >= 0; i--) {\n+                setState(i, false);\n+            }\n+\n+            \/\/ TODO Update anchor and lead - min and max should be updated automatically\n+            return;\n+        }\n+\n+        int gapLength = (rmMaxIndex - rmMinIndex) + 1;\n@@ -715,7 +732,5 @@\n-        for(int i = rmMinIndex; i <= maxIndex; i++) {\n-            if ((i + gapLength) >= gapLength) {\n-                setState(i, value.get(i + gapLength));\n-            } else {\n-                setState(i, value.get(gapLength));\n-                break;\n-            }\n+        for (int i = rmMinIndex; i >= 0 && i <= maxIndex; i++) {\n+            setState(i, (i <= Integer.MAX_VALUE - gapLength)\n+                    && (i + gapLength >= minIndex)\n+                    && value.get(i + gapLength));\n+\n@@ -748,0 +763,1 @@\n+\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/DefaultListSelectionModel.java","additions":33,"deletions":17,"binary":false,"changes":50,"status":"modified"}]}