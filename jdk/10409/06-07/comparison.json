{"files":[{"patch":"@@ -632,1 +632,0 @@\n-\/\/        System.out.println(\"index \" + index + \" state \" + state);\n@@ -652,1 +651,1 @@\n-            return;\n+            throw new IndexOutOfBoundsException(\"index or length is negative\");\n@@ -655,1 +654,1 @@\n-            return;\n+            length = Integer.MAX_VALUE - index;\n@@ -667,5 +666,1 @@\n-        if (length + maxIndex < 0) {\n-            maxIndex = Integer.MAX_VALUE - length;\n-        }\n-        for(int i = maxIndex; i >= insMinIndex; i--) {\n-            \/\/System.out.println(\"insertIndex \" + i + \" length \" + length);\n+        for(int i = maxIndex; (i+length) >= 0 && i >= insMinIndex; i--) {\n@@ -679,1 +674,0 @@\n-\n@@ -723,1 +717,3 @@\n-            \/\/ TODO Update anchor and lead - min and max should be updated automatically\n+            if (this.anchorIndex != -1 || this.leadIndex != -1) {\n+                updateLeadAnchorIndices(-1, -1);\n+            }\n@@ -734,3 +730,2 @@\n-                    && (i + gapLength >= minIndex)\n-                    && value.get(i + gapLength));\n-\n+                        && (i + gapLength >= minIndex)\n+                        && value.get(i + gapLength));\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/DefaultListSelectionModel.java","additions":8,"deletions":13,"binary":false,"changes":21,"status":"modified"}]}