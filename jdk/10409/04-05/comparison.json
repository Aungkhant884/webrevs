{"files":[{"patch":"@@ -452,0 +452,4 @@\n+            \/\/ Integer overlfow\n+            if (i + 1 < i) {\n+                break;\n+            }\n@@ -489,2 +493,1 @@\n-     *         (and neither index is {@code -1}) or\n-     *         either index is equal to Integer.MAX_VALUE\n+     *         (and neither index is {@code -1})\n@@ -498,3 +501,0 @@\n-        if (index0 == Integer.MAX_VALUE || index1 == Integer.MAX_VALUE) {\n-            throw new IndexOutOfBoundsException(\"index == Integer.MAX_VALUE\");\n-        }\n@@ -661,1 +661,5 @@\n-            setState(i + length, value.get(i));\n+            if ((i + length) >= length) {\n+                setState(i + length, value.get(i));\n+            } else {\n+                setState(i, value.get(i));\n+            }\n@@ -695,1 +699,0 @@\n-     *         or equal to Integer.MAX_VALUE\n@@ -702,3 +705,1 @@\n-        if (index0 == Integer.MAX_VALUE || index1 == Integer.MAX_VALUE) {\n-            throw new IndexOutOfBoundsException(\"index is equal to MAX_VALUE\");\n-        }\n+\n@@ -707,1 +708,3 @@\n-        int gapLength = (rmMaxIndex - rmMinIndex) + 1;\n+        int gapLength =(rmMaxIndex - rmMinIndex) == Integer.MAX_VALUE\n+                ? Integer.MAX_VALUE\n+                : (rmMaxIndex - rmMinIndex) + 1;\n@@ -713,1 +716,6 @@\n-            setState(i, value.get(i + gapLength));\n+            if ((i + gapLength) >= gapLength) {\n+                setState(i, value.get(i + gapLength));\n+            } else {\n+                setState(i, value.get(gapLength));\n+                break;\n+            }\n@@ -716,0 +724,1 @@\n+\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/DefaultListSelectionModel.java","additions":21,"deletions":12,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -33,0 +33,1 @@\n+\n@@ -36,0 +37,2 @@\n+        test3();\n+        test4();\n@@ -39,1 +42,0 @@\n-        boolean passed = false;\n@@ -42,8 +44,1 @@\n-        try {\n-            selectionModel.removeIndexInterval(0, Integer.MAX_VALUE);\n-        } catch (IndexOutOfBoundsException e) {\n-            passed = true;\n-        }\n-        if (!passed) {\n-            throw new RuntimeException(\"IOOBE not thrown\");\n-        }\n+        selectionModel.removeIndexInterval(0, Integer.MAX_VALUE);\n@@ -53,1 +48,0 @@\n-        boolean passed = false;\n@@ -55,8 +49,1 @@\n-        try {\n-            selectionModel.setSelectionInterval(Integer.MAX_VALUE - 1, Integer.MAX_VALUE);\n-        } catch (IndexOutOfBoundsException e) {\n-            passed = true;\n-        }\n-        if (!passed) {\n-            throw new RuntimeException(\"IOOBE not thrown\");\n-        }\n+        selectionModel.setSelectionInterval(Integer.MAX_VALUE - 1, Integer.MAX_VALUE);\n@@ -65,1 +52,0 @@\n-}\n@@ -67,0 +53,12 @@\n+    private static void test3() {\n+        DefaultListSelectionModel selectionModel = new DefaultListSelectionModel();\n+        selectionModel.setSelectionInterval(Integer.MAX_VALUE - 2, Integer.MAX_VALUE - 1);\n+        selectionModel.removeIndexInterval(0, Integer.MAX_VALUE - 1);\n+    }\n+\n+    private static void test4() {\n+        DefaultListSelectionModel selectionModel = new DefaultListSelectionModel();\n+        selectionModel.setSelectionInterval(Integer.MAX_VALUE - 1, Integer.MAX_VALUE);\n+        selectionModel.insertIndexInterval(Integer.MAX_VALUE - 1, Integer.MAX_VALUE, true);\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/TestDefListModelException.java","additions":17,"deletions":19,"binary":false,"changes":36,"status":"modified"}]}