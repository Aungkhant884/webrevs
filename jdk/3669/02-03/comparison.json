{"files":[{"patch":"@@ -96,2 +96,0 @@\n-        String rmiObjectName = matcher.group(\"servername\") == null ? DEFAULT_RMI_OBJECT_NAME\n-                                                                   : matcher.group(\"servername\");\n@@ -99,0 +97,1 @@\n+        String rmiObjectName = matcher.group(\"servername\");\n@@ -100,2 +99,9 @@\n-            System.err.println(\"WARNING: sun.jvm.hotspot.rmi.serverNamePrefix is deprecated. Please specify it in --connect.\");\n-            rmiObjectName = serverNamePrefix;\n+            if (rmiObjectName == null) {\n+                System.err.println(\"WARNING: sun.jvm.hotspot.rmi.serverNamePrefix is deprecated. Please specify it in --connect.\");\n+                rmiObjectName = serverNamePrefix;\n+            } else {\n+                throw new DebuggerException(\"Cannot set both sun.jvm.hotspot.rmi.serverNamePrefix and servername in --connect together\");\n+            }\n+        }\n+        if (rmiObjectName == null) {\n+            rmiObjectName = DEFAULT_RMI_OBJECT_NAME;\n@@ -103,1 +109,0 @@\n-\n@@ -121,1 +126,1 @@\n-        String name = serverName == null ? DEFAULT_RMI_OBJECT_NAME : serverName;\n+        String name = serverName;\n@@ -124,2 +129,9 @@\n-            System.err.println(\"WARNING: sun.jvm.hotspot.rmi.serverNamePrefix is deprecated. Please specify it in --servername.\");\n-            name = serverNamePrefix;\n+            if (serverName == null) {\n+                System.err.println(\"WARNING: sun.jvm.hotspot.rmi.serverNamePrefix is deprecated. Please specify it with --servername.\");\n+                name = serverNamePrefix;\n+            } else {\n+                throw new DebuggerException(\"Cannot set both sun.jvm.hotspot.rmi.serverNamePrefix and in --servername together\");\n+            }\n+        }\n+        if (name == null) {\n+            name = DEFAULT_RMI_OBJECT_NAME;\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/RMIHelper.java","additions":20,"deletions":8,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -94,1 +94,2 @@\n-        System.out.println(\"    --serverid <id>         A unique identifier for this debug server.\");\n+        System.out.println(\"    --serverid <id>         A unique identifier for this debugd server.\");\n+        System.out.println(\"    --servername <name>     Instance name of debugd server.\");\n@@ -105,1 +106,0 @@\n-        System.out.println(\"    --servername <name>     Instance name of debugd server.\");\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/SALauncher.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -206,1 +206,1 @@\n-If not specified, \"SARemoteDebugger\" will be set.\n+If not specified, \"SARemoteDebugger\" will be used.\n","filename":"src\/jdk.hotspot.agent\/share\/man\/jhsdb.1","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}