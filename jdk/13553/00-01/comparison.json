{"files":[{"patch":"@@ -31,1 +31,0 @@\n-import java.nio.charset.CoderResult;\n@@ -33,0 +32,1 @@\n+import java.nio.charset.CoderResult;\n@@ -76,0 +76,1 @@\n+    \/\/ For fcharset control word\n@@ -111,0 +112,3 @@\n+    \/\/ Defined for replacement character\n+    static final char REPLACEMENT_CHAR = '\\uFFFD';\n+\n@@ -120,0 +124,2 @@\n+    \/\/ Initialize byte buffer for CharsetDecoder\n+    decoderBB.clear();\n@@ -194,0 +200,2 @@\n+          \/\/ SBCS: ASCII character\n+          \/\/ DBCS: Non lead byte\n@@ -314,0 +322,1 @@\n+          \/\/ Use translationTable if decoder is not defined\n@@ -374,0 +383,1 @@\n+    \/\/ For fcharset control word\n@@ -385,1 +395,1 @@\n-                char c = decoderCB.get(0);\n+                \/\/ Converted to Unicode (including replacement character)\n@@ -389,1 +399,1 @@\n-                return c;\n+                return ca[0];\n@@ -391,0 +401,1 @@\n+                \/\/ Detectied lead byte\n@@ -394,1 +405,1 @@\n-                return 0;\n+                return 0; \/\/ Skip write operation if return value is 0\n@@ -397,0 +408,1 @@\n+            \/\/ Fallback, should not be called \n@@ -400,1 +412,1 @@\n-            return '\\uFFFD';\n+            return REPLACEMENT_CHAR;\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/text\/rtf\/RTFParser.java","additions":17,"deletions":5,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -172,2 +172,0 @@\n-\/* TODO: per-font font encodings ( \\fcharset control word ) ? *\/\n-\n@@ -216,0 +214,3 @@\n+    \/\/ Defined for replacement character\n+    private static final String REPLACEMENT_CHAR = \"\\uFFFD\";\n+\n@@ -818,0 +819,1 @@\n+        \/\/ For fcharset control word\n@@ -826,0 +828,1 @@\n+                    \/\/ Fallback, should not be called\n@@ -829,0 +832,1 @@\n+                \/\/ Fallback, fcharset control word number is not defined\n@@ -1289,0 +1293,1 @@\n+            \/\/ Check lead byte is stored or not\n@@ -1290,1 +1295,1 @@\n-                handleText(\"\\uFFFD\");\n+                handleText(REPLACEMENT_CHAR);\n@@ -1292,0 +1297,4 @@\n+            \/\/ Reset decoder byte buffer\n+            decoderBB.clear();\n+            decoderBB.limit(1);\n+            \/\/ Check fcharset is used or not \n@@ -1297,2 +1306,0 @@\n-                decoderBB.clear();\n-                decoderBB.limit(1);\n@@ -1300,0 +1307,1 @@\n+                \/\/ fcharset is not used, use translationTable\n@@ -1697,0 +1705,1 @@\n+            \/\/ Check lead byte is stored or not\n@@ -1698,1 +1707,1 @@\n-                handleText(\"\\uFFFD\");\n+                handleText(REPLACEMENT_CHAR);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/text\/rtf\/RTFReader.java","additions":15,"deletions":6,"binary":false,"changes":21,"status":"modified"}]}