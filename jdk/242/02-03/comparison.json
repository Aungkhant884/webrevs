{"files":[{"patch":"@@ -4460,8 +4460,0 @@\n-void Compile::shuffle(Unique_Node_List* l) {\n-  if (l->size() < 2) return;\n-  for (uint i = l->size() - 1; i >= 1; i--) {\n-    uint j = random() % (i + 1);\n-    l->swap(i, j);\n-  }\n-}\n-\n","filename":"src\/hotspot\/share\/opto\/compile.cpp","additions":0,"deletions":8,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -1143,1 +1143,0 @@\n-  void shuffle(Unique_Node_List* l);\n","filename":"src\/hotspot\/share\/opto\/compile.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1001,0 +1001,8 @@\n+void PhaseIterGVN::shuffle_worklist() {\n+  if (_worklist.size() < 2) return;\n+  for (uint i = _worklist.size() - 1; i >= 1; i--) {\n+    uint j = C->random() % (i + 1);\n+    _worklist.swap(i, j);\n+  }\n+}\n+\n@@ -1153,1 +1161,3 @@\n-  if (StressIGVN) C->shuffle(&_worklist);\n+  if (StressIGVN) {\n+    shuffle_worklist();\n+  }\n","filename":"src\/hotspot\/share\/opto\/phaseX.cpp","additions":11,"deletions":1,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -464,0 +464,3 @@\n+  \/\/ Shuffle worklist, for stress testing\n+  void shuffle_worklist();\n+\n","filename":"src\/hotspot\/share\/opto\/phaseX.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -0,0 +1,45 @@\n+\/*\n+ * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8252219\n+ * @summary Tests that different combinations of the options -XX:+StressIGVN,\n+ *          -XX:StressSeed=N, and -XX:+GenerateStressSeed are accepted.\n+ * @run main\/othervm -XX:+StressIGVN\n+ *      compiler.arguments.TestStressIGVNOptions\n+ * @run main\/othervm -XX:+StressIGVN -XX:StressSeed=42\n+ *      compiler.arguments.TestStressIGVNOptions\n+ * @run main\/othervm -XX:+StressIGVN -XX:+GenerateStressSeed\n+ *      compiler.arguments.TestStressIGVNOptions\n+ *\/\n+\n+package compiler.arguments;\n+\n+public class TestStressIGVNOptions {\n+\n+    static public void main(String[] args) {\n+        System.out.println(\"Passed\");\n+    }\n+}\n+\n","filename":"test\/hotspot\/jtreg\/compiler\/arguments\/TestStressIGVNOptions.java","additions":45,"deletions":0,"binary":false,"changes":45,"status":"added"},{"patch":"@@ -35,2 +35,2 @@\n- * @summary Tests that -XX:+GenerateStressSeed is accepted, and that, in\n- *          combination with -XX:+StressIGVN, C2 generates and logs a seed.\n+ * @summary Tests that -XX:+GenerateStressSeed, in combination with\n+ *          -XX:+StressIGVN, generates and logs a seed.\n","filename":"test\/hotspot\/jtreg\/compiler\/debug\/TestGenerateStressSeed.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -34,4 +34,3 @@\n- * @summary Tests that:\n- *          1) the options -XX:+StressIGVN and -XX:+StressSeed=N are accepted,\n- *          2) compilations with the same seed yield the same IGVN trace, and\n- *          3) compilations with different seeds yield different IGVN traces.\n+ * @summary Tests that compilations with the same seed yield the same IGVN\n+ *          trace, and compilations with different seeds yield different IGVN\n+ *          traces.\n","filename":"test\/hotspot\/jtreg\/compiler\/debug\/TestStressIGVN.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"}]}