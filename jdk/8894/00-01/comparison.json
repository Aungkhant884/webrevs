{"files":[{"patch":"@@ -1021,3 +1021,3 @@\n-        ciObject* recv_obj = receiver->bottom_type()->is_oopptr()->const_oop();\n-        if (recv_obj->is_method_handle()) {\n-          ciMethod *target = recv_obj->as_method_handle()->get_vmtarget();\n+        const TypeOopPtr* recv_toop = receiver->bottom_type()->isa_oopptr();\n+        if (recv_toop != NULL) {\n+          ciMethod* target = recv_toop->const_oop()->as_method_handle()->get_vmtarget();\n@@ -1039,1 +1039,2 @@\n-          assert(recv_obj->is_null_object(), \"not a null\");\n+          assert(receiver->bottom_type() == TypePtr::NULL_PTR, \"not a null: %s\",\n+                 Type::str(receiver->bottom_type()));\n","filename":"src\/hotspot\/share\/opto\/callGenerator.cpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @library \/test\/lib \/ patches\n@@ -28,2 +29,3 @@\n- * @run main\/othervm -Xbatch -XX:CompileCommand=compileonly,*::test -XX:-TieredCompilation                         compiler.jsr292.NullConstantMHReceiver\n- * @run main\/othervm -Xbatch -XX:CompileCommand=compileonly,*::test -XX:+TieredCompilation -XX:TieredStopAtLevel=1 compiler.jsr292.NullConstantMHReceiver\n+ * @build java.base\/java.lang.invoke.MethodHandleHelper\n+ * @run main\/bootclasspath\/othervm -Xbatch -XX:CompileCommand=compileonly,*::test -XX:-TieredCompilation                         compiler.jsr292.NullConstantMHReceiver\n+ * @run main\/bootclasspath\/othervm -Xbatch -XX:CompileCommand=compileonly,*::test -XX:+TieredCompilation -XX:TieredStopAtLevel=1 compiler.jsr292.NullConstantMHReceiver\n@@ -35,2 +37,1 @@\n-import java.lang.invoke.MethodHandles;\n-import java.lang.invoke.MethodType;\n+import java.lang.invoke.MethodHandleHelper;\n@@ -40,1 +41,1 @@\n-        ((MethodHandle)null).invokeExact();\n+        MethodHandleHelper.invokeBasicL(null);\n","filename":"test\/hotspot\/jtreg\/compiler\/jsr292\/NullConstantMHReceiver.java","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"}]}