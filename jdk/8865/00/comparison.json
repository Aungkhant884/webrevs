{"files":[{"patch":"@@ -130,1 +130,1 @@\n- *     if said session is confined. Otherwise, the invocation throws {@link IllegalStateException}; and<\/li>\n+ *     if said session is confined. Otherwise, the invocation throws {@link WrongThreadException}; and<\/li>\n@@ -265,2 +265,3 @@\n-     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}, or if access occurs from\n-     * a thread other than the thread {@linkplain MemorySession#ownerThread() owning} {@code session}.\n+     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread\n+     * {@linkplain MemorySession#ownerThread() owning} {@code session}.\n","filename":"src\/java.base\/share\/classes\/java\/lang\/foreign\/Linker.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -248,1 +248,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -423,1 +425,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -440,1 +444,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -442,1 +448,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with {@code src}.\n@@ -470,1 +478,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -472,1 +482,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with {@code other}.\n@@ -495,1 +507,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -510,1 +524,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -525,1 +541,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -552,1 +570,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -572,1 +592,4 @@\n-     * after the memory session associated with this segment has been closed (see {@link MemorySession#close()}), will throw an {@link IllegalStateException}.\n+     * after the memory session associated with this segment has been closed (see {@link MemorySession#close()}), will\n+     * throw an {@link IllegalStateException}. Similarly, accessing the returned buffer from a thread other than\n+     * the thread {@linkplain MemorySession#ownerThread() owning} this segment's memory session will throw\n+     * a {@link WrongThreadException}.\n@@ -595,1 +618,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -607,1 +632,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -619,1 +646,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -631,1 +660,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -643,1 +674,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -655,1 +688,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -667,1 +702,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -688,1 +725,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -706,1 +745,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -833,2 +874,3 @@\n-     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}, or if access occurs from\n-     * a thread other than the thread {@linkplain MemorySession#ownerThread() owning} {@code session}.\n+     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread\n+     * {@linkplain MemorySession#ownerThread() owning} {@code session}.\n@@ -865,2 +907,3 @@\n-     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}, or if access occurs from\n-     * a thread other than the thread {@linkplain MemorySession#ownerThread() owning} {@code session}.\n+     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread\n+     * {@linkplain MemorySession#ownerThread() owning} {@code session}.\n@@ -890,2 +933,3 @@\n-     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}, or if access occurs from\n-     * a thread other than the thread {@linkplain MemorySession#ownerThread() owning} {@code session}.\n+     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread\n+     * {@linkplain MemorySession#ownerThread() owning} {@code session}.\n@@ -910,2 +954,3 @@\n-     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}, or if access occurs from\n-     * a thread other than the thread {@linkplain MemorySession#ownerThread() owning} {@code session}.\n+     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread\n+     * {@linkplain MemorySession#ownerThread() owning} {@code session}.\n@@ -951,1 +996,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with {@code srcSegment}.\n@@ -953,1 +1000,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with {@code dstSegment}.\n@@ -994,1 +1043,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this {@code srcSegment}.\n@@ -996,1 +1047,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with {@code dstSegment}.\n@@ -1044,1 +1097,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1063,1 +1118,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1083,1 +1140,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1102,1 +1161,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1122,1 +1183,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1141,1 +1204,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1161,1 +1226,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1180,1 +1247,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1200,1 +1269,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1219,1 +1290,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1239,1 +1312,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1258,1 +1333,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1278,1 +1355,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1297,1 +1376,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1317,1 +1398,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1336,1 +1419,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1356,1 +1441,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1375,1 +1462,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1395,1 +1484,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1417,1 +1508,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1440,1 +1533,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1462,1 +1557,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1485,1 +1582,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1507,1 +1606,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1530,1 +1631,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1552,1 +1655,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1575,1 +1680,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1597,1 +1704,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1620,1 +1729,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1642,1 +1753,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1665,1 +1778,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1687,1 +1802,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this segment.\n@@ -1746,1 +1863,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with {@code srcSegment}.\n@@ -1796,1 +1915,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with {@code dstSegment}.\n","filename":"src\/java.base\/share\/classes\/java\/lang\/foreign\/MemorySegment.java","additions":187,"deletions":66,"binary":false,"changes":253,"status":"modified"},{"patch":"@@ -63,1 +63,1 @@\n- * owner thread will fail with {@link IllegalStateException}.\n+ * owner thread will fail with {@link WrongThreadException}.\n@@ -160,2 +160,3 @@\n-     * @throws IllegalStateException if this memory session is not {@linkplain #isAlive() alive}, or if access occurs from\n-     * a thread other than the thread {@linkplain #ownerThread() owning} this memory session.\n+     * @throws IllegalStateException if this memory session is not {@linkplain #isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread\n+     * {@linkplain #ownerThread() owning} this memory session.\n@@ -177,2 +178,1 @@\n-     * @throws IllegalStateException if this memory session is not {@linkplain #isAlive() alive}, or if access occurs from\n-     * a thread other than the thread {@linkplain #ownerThread() owning} this memory session.\n+     * @throws IllegalStateException if this memory session is not {@linkplain #isAlive() alive}.\n@@ -180,0 +180,2 @@\n+     * @throws WrongThreadException if this method is called from a thread other than the thread\n+     * {@linkplain #ownerThread() owning} this memory session.\n@@ -218,2 +220,3 @@\n-     * @throws IllegalStateException if this memory session is not {@linkplain #isAlive() alive}, or if access occurs from\n-     * a thread other than the thread {@linkplain #ownerThread() owning} this memory session.\n+     * @throws IllegalStateException if this memory session is not {@linkplain #isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread\n+     * {@linkplain #ownerThread() owning} this memory session.\n","filename":"src\/java.base\/share\/classes\/java\/lang\/foreign\/MemorySession.java","additions":10,"deletions":7,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -349,2 +349,3 @@\n-     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}, or if access occurs from\n-     * a thread other than the thread {@linkplain MemorySession#ownerThread() owning} {@code session}.\n+     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread\n+     * {@linkplain MemorySession#ownerThread() owning} {@code session}.\n@@ -368,2 +369,3 @@\n-     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}, or if access occurs from\n-     * a thread other than the thread {@linkplain MemorySession#ownerThread() owning} {@code session}.\n+     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread\n+     * {@linkplain MemorySession#ownerThread() owning} {@code session}.\n@@ -404,2 +406,3 @@\n-     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}, or if access occurs from\n-     * a thread other than the thread {@linkplain MemorySession#ownerThread() owning} {@code session}.\n+     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread\n+     * {@linkplain MemorySession#ownerThread() owning} {@code session}.\n","filename":"src\/java.base\/share\/classes\/java\/lang\/foreign\/SegmentAllocator.java","additions":9,"deletions":6,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -74,1 +74,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this variable argument list.\n@@ -85,1 +87,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this variable argument list.\n@@ -96,1 +100,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this variable argument list.\n@@ -107,1 +113,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this variable argument list.\n@@ -127,1 +135,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this variable argument list.\n@@ -136,1 +146,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this variable argument list.\n@@ -151,1 +163,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this variable argument list.\n@@ -158,1 +172,3 @@\n-     * {@linkplain MemorySession#isAlive() alive}, or if access occurs from a thread other than the thread owning that session.\n+     * {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread owning\n+     * the {@linkplain #session() session} associated with this variable argument list.\n@@ -175,2 +191,3 @@\n-     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}, or if access occurs from\n-     * a thread other than the thread {@linkplain MemorySession#ownerThread() owning} {@code session}.\n+     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread\n+     * {@linkplain MemorySession#ownerThread() owning} {@code session}.\n@@ -205,2 +222,3 @@\n-     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}, or if access occurs from\n-     * a thread other than the thread {@linkplain MemorySession#ownerThread() owning} {@code session}.\n+     * @throws IllegalStateException if {@code session} is not {@linkplain MemorySession#isAlive() alive}.\n+     * @throws WrongThreadException if this method is called from a thread other than the thread\n+     * {@linkplain MemorySession#ownerThread() owning} {@code session}.\n","filename":"src\/java.base\/share\/classes\/java\/lang\/foreign\/VaList.java","additions":30,"deletions":12,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -1025,2 +1025,4 @@\n-     *         {@linkplain MemorySession#isAlive() alive}, or if access occurs\n-     *         from a thread other than the thread\n+     *         {@linkplain MemorySession#isAlive() alive}.\n+     *\n+     * @throws WrongThreadException\n+     *         If this method is called from a thread other than the thread\n","filename":"src\/java.base\/share\/classes\/java\/nio\/channels\/FileChannel.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -202,1 +202,1 @@\n-            throw new IllegalStateException(\"Attempted access outside owning thread\");\n+            throw new WrongThreadException(\"Attempted access outside owning thread\");\n@@ -216,1 +216,1 @@\n-            throw new IllegalStateException(\"Attempted access outside owning thread\");\n+            throw new WrongThreadException(\"Attempted access outside owning thread\");\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/MemorySessionImpl.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -246,1 +246,1 @@\n-            assertEquals(failure.get().getClass(), IllegalStateException.class);\n+            assertEquals(failure.get().getClass(), WrongThreadException.class);\n","filename":"test\/jdk\/java\/foreign\/TestMemorySession.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -184,1 +184,1 @@\n-                if (!(e instanceof IllegalStateException)) {\n+                if (!(e instanceof WrongThreadException)) {\n@@ -202,1 +202,1 @@\n-                if (!(e instanceof IllegalStateException)) {\n+                if (!(e instanceof WrongThreadException)) {\n","filename":"test\/jdk\/java\/foreign\/TestMismatch.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -102,1 +102,1 @@\n-            assertEquals(failed.get().getClass(), IllegalStateException.class);\n+            assertEquals(failed.get().getClass(), WrongThreadException.class);\n","filename":"test\/jdk\/java\/foreign\/TestScopedOperations.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -139,1 +139,1 @@\n-                } catch (IllegalStateException ex) {\n+                } catch (WrongThreadException ex) {\n","filename":"test\/jdk\/java\/foreign\/TestSharedAccess.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -57,0 +57,1 @@\n+    static final Class<WrongThreadException> WTE = WrongThreadException.class;\n@@ -154,1 +155,1 @@\n-                Runnable task = () -> exception.set(expectThrows(ISE, ioOp));\n+                Runnable task = () -> exception.set(expectThrows(WTE, ioOp));\n","filename":"test\/jdk\/java\/foreign\/channels\/TestSocketChannels.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}