{"files":[{"patch":"@@ -2804,5 +2804,0 @@\n-\/\/ Define MADV_HUGEPAGE here so we can build HotSpot on old systems.\n-#ifndef MADV_HUGEPAGE\n-  #define MADV_HUGEPAGE 14\n-#endif\n-\n@@ -3537,21 +3532,0 @@\n-bool os::Linux::transparent_huge_pages_sanity_check(bool warn,\n-                                                    size_t page_size) {\n-  bool result = false;\n-  void *p = mmap(nullptr, page_size * 2, PROT_READ|PROT_WRITE,\n-                 MAP_ANONYMOUS|MAP_PRIVATE,\n-                 -1, 0);\n-  if (p != MAP_FAILED) {\n-    void *aligned_p = align_up(p, page_size);\n-\n-    result = madvise(aligned_p, page_size, MADV_HUGEPAGE) == 0;\n-\n-    munmap(p, page_size * 2);\n-  }\n-\n-  if (warn && !result) {\n-    warning(\"TransparentHugePages is not supported by the operating system.\");\n-  }\n-\n-  return result;\n-}\n-\n@@ -3688,10 +3662,0 @@\n-  if (UseTransparentHugePages) {\n-    bool warn_on_failure = !FLAG_IS_DEFAULT(UseTransparentHugePages);\n-    if (transparent_huge_pages_sanity_check(warn_on_failure, page_size)) {\n-      UseHugeTLBFS = false;\n-      UseSHM = false;\n-      return true;\n-    }\n-    UseTransparentHugePages = false;\n-  }\n-\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":0,"deletions":36,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -79,1 +79,0 @@\n-  static bool transparent_huge_pages_sanity_check(bool warn, size_t pages_size);\n","filename":"src\/hotspot\/os\/linux\/os_linux.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}