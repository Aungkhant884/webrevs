{"files":[{"patch":"@@ -23,6 +23,0 @@\n-\/*\n- * @test\n- * @bug 8236987\n- * @summary  Verifies if Print Function is removed and LoadStatus is changed to ABORTED when interrupted\/ still LOADING.\n- * @run main LoadInterruptTest\n- *\/\n@@ -37,0 +31,8 @@\n+import java.nio.charset.StandardCharsets;\n+\n+\/*\n+ * @test\n+ * @bug 8236987\n+ * @summary  Verifies if Print Function is removed and LoadStatus is changed to ABORTED when interrupted\/ still LOADING.\n+ * @run main LoadInterruptTest\n+ *\/\n@@ -40,1 +42,1 @@\n-    private static PrintStream prevStatus;\n+    private static PrintStream prevSysOut;\n@@ -46,1 +48,1 @@\n-                    LoadAndSimulate();\n+                    loadImageIcon();\n@@ -55,1 +57,1 @@\n-        prevStatus = System.out;\n+        prevSysOut = System.out;\n@@ -57,1 +59,1 @@\n-        System.setOut(new PrintStream(testOut));\n+        System.setOut(new PrintStream(testOut, true, StandardCharsets.UTF_8));\n@@ -60,2 +62,1 @@\n-    public static void unsetOutput()\n-    {\n+    public static void unsetOutput() {\n@@ -63,3 +64,2 @@\n-        if(prevStatus != null)\n-        {\n-            System.setOut(prevStatus);\n+        if(prevSysOut != null) {\n+            System.setOut(prevSysOut);\n@@ -70,2 +70,1 @@\n-    private static void LoadAndSimulate()\n-    {\n+    private static void loadImageIcon() {\n@@ -74,0 +73,1 @@\n+\n@@ -77,1 +77,1 @@\n-        String outString = testOut.toString();\n+        String outString = testOut.toString(StandardCharsets.UTF_8);\n@@ -79,0 +79,3 @@\n+        if ( !outString.isEmpty()) {\n+            throw new RuntimeException(\"Test Case Failed!!! System.out is not empty : \"+outString );\n+        }\n@@ -80,2 +83,2 @@\n-        if (((status & MediaTracker.ABORTED) == 0 ) || (!outString.isEmpty())) {\n-            throw new RuntimeException(\"Test Case Failed!!\"+\", Status : \"+status+\", Stream-Out :\"+outString );\n+        if ( ( status != MediaTracker.ABORTED ) && ( status != MediaTracker.COMPLETE) ){\n+            throw new RuntimeException(\"Test Case Failed!!! Unexpected status : \"+status );\n","filename":"test\/jdk\/javax\/swing\/ImageIcon\/LoadInterruptTest.java","additions":23,"deletions":20,"binary":false,"changes":43,"status":"modified"}]}