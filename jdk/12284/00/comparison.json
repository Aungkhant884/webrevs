{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -70,8 +70,4 @@\n-    static void consume_all_memory() {\n-        int size = 128 * 1024 * 1024;\n-        while(size > 0) {\n-            try {\n-                while(true) {\n-                    ll = new LinkedList(ll, size);\n-                }\n-            } catch(OutOfMemoryError oom) {\n+    static void alloc_in_chunks(int size) {\n+        try {\n+            while(true) {\n+                ll = new LinkedList(ll, size);\n@@ -79,1 +75,1 @@\n-            size = size \/ 2;\n+        } catch(OutOfMemoryError oom) {\n@@ -83,0 +79,9 @@\n+    static void consume_all_memory() {\n+        \/\/ O(MiB) allocations\n+        alloc_in_chunks(1024*1024);\n+        \/\/ O(KiB) allocations\n+        alloc_in_chunks(1024);\n+        \/\/ O(B) allocations\n+        alloc_in_chunks(1);\n+    }\n+\n","filename":"test\/hotspot\/jtreg\/compiler\/uncommontrap\/TestDeoptOOM.java","additions":15,"deletions":10,"binary":false,"changes":25,"status":"modified"}]}