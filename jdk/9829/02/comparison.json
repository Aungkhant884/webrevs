{"files":[{"patch":"@@ -370,0 +370,3 @@\n+isCompiler = \\\n+  $(strip $(if $(filter $(TOOLCHAIN_TYPE), $1), true, false))\n+\n","filename":"make\/common\/Utils.gmk","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -172,6 +172,12 @@\n-  # NOTE: Disable automatic opimization level and let the explicit cflag control\n-  # optimization level instead. This activates O3 on slowdebug builds, just\n-  # like the old build, but it's probably not right.\n-  JVM_OPTIMIZATION :=\n-  JVM_CFLAGS_FEATURES += -O3 -flto\n-  JVM_LDFLAGS_FEATURES += -O3 -flto -fuse-linker-plugin -fno-strict-aliasing\n+  ifeq ($(call isCompiler, gcc), true)\n+    ifneq ($(call check-jvm-feature, opt-size), true)\n+      # NOTE: Disable automatic optimization level and let the explicit cflag control\n+      # optimization level instead. This activates O3 on slowdebug builds, just\n+      # like the old build, but it's probably not right.\n+      JVM_OPTIMIZATION :=\n+      JVM_CFLAGS_FEATURES += -O3\n+      JVM_LDFLAGS_FEATURES += -O3\n+    endif\n+    JVM_CFLAGS_FEATURES += -flto -fuse-linker-plugin\n+    JVM_LDFLAGS_FEATURES += -flto -fuse-linker-plugin -fno-strict-aliasing\n+  endif\n","filename":"make\/hotspot\/lib\/JvmFeatures.gmk","additions":12,"deletions":6,"binary":false,"changes":18,"status":"modified"}]}