{"files":[{"patch":"@@ -2427,6 +2427,0 @@\n-  \/***************************************************\/                   \\\n-  \/* DEFAULT_CACHE_LINE_SIZE (globalDefinitions.hpp) *\/                   \\\n-  \/***************************************************\/                   \\\n-                                                                          \\\n-  declare_preprocessor_constant(\"DEFAULT_CACHE_LINE_SIZE\", DEFAULT_CACHE_LINE_SIZE) \\\n-                                                                          \\\n","filename":"src\/hotspot\/share\/runtime\/vmStructs.cpp","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -46,15 +46,2 @@\n-    Type type;\n-    try {\n-      type = db.lookupType(\"ObjectSynchronizer\");\n-      inUseList = type.getAddressField(\"_in_use_list\").getValue();\n-      defaultCacheLineSize = db.lookupIntConstant(\"DEFAULT_CACHE_LINE_SIZE\").intValue();\n-    } catch (RuntimeException e) { }\n-    type = db.lookupType(\"ObjectMonitor\");\n-    objectMonitorTypeSize = type.getSize();\n-    if ((objectMonitorTypeSize % defaultCacheLineSize) != 0) {\n-      \/\/ sizeof(ObjectMonitor) is not already a multiple of a cache line.\n-      \/\/ The ObjectMonitor allocation code in ObjectSynchronizer pads each\n-      \/\/ ObjectMonitor in a list to the next cache line boundary.\n-      int needLines = ((int)objectMonitorTypeSize \/ defaultCacheLineSize) + 1;\n-      objectMonitorTypeSize = needLines * defaultCacheLineSize;\n-    }\n+    Type type = db.lookupType(\"ObjectSynchronizer\");\n+    inUseList = type.getAddressField(\"_in_use_list\").getValue();\n@@ -96,2 +83,1 @@\n-      headAddr = inUseList;\n-      mon = new ObjectMonitor(headAddr);\n+      mon = new ObjectMonitor(inUseList);\n@@ -119,1 +105,0 @@\n-    private Address headAddr;\n@@ -123,2 +108,0 @@\n-  private static int defaultCacheLineSize;\n-  private static long objectMonitorTypeSize;\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/runtime\/ObjectSynchronizer.java","additions":4,"deletions":21,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -2,2 +2,2 @@\n- * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n- * Copyright (c) 2020, NTT DATA.\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, NTT DATA.\n","filename":"test\/hotspot\/jtreg\/serviceability\/sa\/TestObjectMonitorIterate.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}