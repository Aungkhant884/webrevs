{"files":[{"patch":"@@ -1901,0 +1901,2 @@\n+  int MaxMhz = -1, CurrentMhz = -1, MhzLimit = -1;\n+  bool same_vals_for_all_cpus = true;\n@@ -1904,0 +1906,24 @@\n+    for (int i = 0; i < proc_count; i++) {\n+      if (i == 0) {\n+        MaxMhz = (int) pppi->MaxMhz;\n+        CurrentMhz = (int) pppi->CurrentMhz;\n+        MhzLimit = (int) pppi->MhzLimit;\n+      } else {\n+        if (MaxMhz != (int) pppi->MaxMhz ||\n+            CurrentMhz != (int) pppi->CurrentMhz ||\n+            MhzLimit != (int) pppi->MhzLimit) {\n+          same_vals_for_all_cpus = false;\n+        }\n+      }\n+      \/\/ avoid iteration in case buf is too small to hold all proc infos\n+      if (sz_check > buflen) break;\n+      pppi++;\n+    }\n+\n+    if (same_vals_for_all_cpus && MaxMhz != -1) {\n+      st->print_cr(\"ProcessorInformation for all %d processors :\", proc_count);\n+      st->print_cr(\"  Max Mhz: %d, Current Mhz: %d, Mhz Limit: %d\", MaxMhz, CurrentMhz, MhzLimit);\n+      return;\n+    }\n+    \/\/ differing values, iterate again\n+    pppi = (PROCESSOR_POWER_INFORMATION*) buf;\n@@ -1907,3 +1933,1 @@\n-                   (int) pppi->MaxMhz, (int) pppi->CurrentMhz, (int) pppi->MhzLimit);\n-      st->print_cr(\"  MaxIdleState: %d, CurrentIdleState: %d\",\n-                   (int) pppi->MaxIdleState, (int) pppi->CurrentIdleState);\n+                     (int) pppi->MaxMhz, (int) pppi->CurrentMhz, (int) pppi->MhzLimit);\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":27,"deletions":3,"binary":false,"changes":30,"status":"modified"}]}