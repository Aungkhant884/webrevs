{"files":[{"patch":"@@ -148,1 +148,1 @@\n-    method_data()->release_C_heap_structures();\n+    method_data()->~MethodData();\n@@ -602,1 +602,1 @@\n-    method_data->release_C_heap_structures();\n+    method_data->~MethodData();\n","filename":"src\/hotspot\/share\/oops\/method.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1214,1 +1214,1 @@\n-    _extra_data_lock(new Mutex(Mutex::safepoint-2, \"MDOExtraData_lock\")),\n+    _extra_data_lock(Mutex::safepoint-2, \"MDOExtraData_lock\"),\n@@ -1456,1 +1456,1 @@\n-    MutexLocker ml(_extra_data_lock);\n+    MutexLocker ml(&_extra_data_lock);\n@@ -1824,9 +1824,0 @@\n-\n-void MethodData::deallocate_contents(ClassLoaderData* loader_data) {\n-  assert(_extra_data_lock == NULL, \"memory leak\");\n-}\n-\n-void MethodData::release_C_heap_structures() {\n-  delete _extra_data_lock;\n-  _extra_data_lock = NULL;\n-}\n","filename":"src\/hotspot\/share\/oops\/methodData.cpp","additions":2,"deletions":11,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -1960,1 +1960,1 @@\n-  Mutex* _extra_data_lock;\n+  Mutex _extra_data_lock;\n@@ -2453,2 +2453,1 @@\n-  void deallocate_contents(ClassLoaderData* loader_data);\n-  void release_C_heap_structures();\n+  void deallocate_contents(ClassLoaderData* loader_data) {}\n@@ -2481,1 +2480,1 @@\n-  Mutex* extra_data_lock() { return _extra_data_lock; }\n+  Mutex* extra_data_lock() { return &_extra_data_lock; }\n","filename":"src\/hotspot\/share\/oops\/methodData.hpp","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"}]}