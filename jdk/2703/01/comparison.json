{"files":[{"patch":"@@ -1,1 +0,0 @@\n-\n","filename":"test\/jdk\/java\/net\/Inet4Address\/TestToNumericFormatHosts","additions":0,"deletions":1,"binary":false,"changes":1,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,1 @@\n- * @run main\/othervm  textToNumericFormat\n+ * @run main\/othervm -Djdk.net.hosts.file=HostFileDoesNotExist textToNumericFormat\n@@ -69,2 +69,0 @@\n-        String hostsFileName = System.getProperty(\"test.src\", \".\") + \"\/TestToNumericFormatHosts\";\n-        System.setProperty(\"jdk.net.hosts.file\", hostsFileName);\n@@ -74,0 +72,1 @@\n+                \/\/ Value is an IP Address literal, Name Service will not be called\n@@ -84,0 +83,1 @@\n+                \/\/ Value is not an IP Address literal, Name Service will be called\n","filename":"test\/jdk\/java\/net\/Inet4Address\/textToNumericFormat.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,1 +30,2 @@\n- * @run main\/othervm  InternalNameServiceTest\n+ * @run main\/othervm -Djdk.net.hosts.file=TestHosts -Dsun.net.inetaddr.ttl=0\n+ *      InternalNameServiceTest\n@@ -42,5 +43,1 @@\n-    public static void main(String args[]) throws Exception {\n-\n-        String hostsFileName = System.getProperty(\"test.src\", \".\") + \"\/TestHosts\";\n-        System.setProperty(\"jdk.net.hosts.file\", hostsFileName);\n-        System.setProperty(\"sun.net.inetaddr.ttl\", \"0\");\n+    static final String HOSTS_FILE_NAME = System.getProperty(\"jdk.net.hosts.file\");\n@@ -48,2 +45,3 @@\n-        testHostToIPAddressMappings(hostsFileName);\n-        testIpAddressToHostNameMappings(hostsFileName);\n+    public static void main(String args[]) throws Exception {\n+        testHostToIPAddressMappings(HOSTS_FILE_NAME);\n+        testIpAddressToHostNameMappings(HOSTS_FILE_NAME);\n","filename":"test\/jdk\/java\/net\/InetAddress\/InternalNameServiceTest.java","additions":7,"deletions":9,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,2 @@\n- * @run main\/othervm -Dsun.net.inetaddr.ttl=0  InternalNameServiceWithHostsFileTest\n+ * @run main\/othervm -Djdk.net.hosts.file=${test.src}\/TestHosts-III -Dsun.net.inetaddr.ttl=0\n+ *      InternalNameServiceWithHostsFileTest\n@@ -40,7 +41,0 @@\n-\n-        \/\/ System.getProperty(\"test.src\", \".\");\n-        String hostsFileName = System.getProperty(\"test.src\", \".\")\n-                + \"\/TestHosts-III\";\n-        System.setProperty(\"jdk.net.hosts.file\", hostsFileName);\n-        System.setProperty(\"sun.net.inetaddr.ttl\", \"0\");\n-\n","filename":"test\/jdk\/java\/net\/InetAddress\/InternalNameServiceWithHostsFileTest.java","additions":3,"deletions":9,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,2 @@\n- * @run main\/othervm -Dsun.net.inetaddr.ttl=0  InternalNameServiceWithNoHostsFileTest\n+ * @run main\/othervm -Djdk.net.hosts.file=TestHosts-II -Dsun.net.inetaddr.ttl=0\n+ *          InternalNameServiceWithNoHostsFileTest\n@@ -42,4 +43,0 @@\n-\n-        String hostsFileName = System.getProperty(\"test.src\", \".\") + \"\/TestHosts-II\";\n-        System.setProperty(\"jdk.net.hosts.file\", hostsFileName);\n-        System.setProperty(\"sun.net.inetaddr.ttl\", \"0\");\n","filename":"test\/jdk\/java\/net\/InetAddress\/InternalNameServiceWithNoHostsFileTest.java","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -1,4 +0,0 @@\n-# test hosts file for internal NameService \n-10.2.3.4 testHost.testDomain\n-10.5.6.7 testHost.testDomain\n-10.8.9.10 \n","filename":"test\/jdk\/java\/net\/InetAddress\/TestHosts","additions":0,"deletions":4,"binary":false,"changes":4,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,1 @@\n- * @run main\/othervm LookupTest\n+ * @run main\/othervm -Djdk.net.hosts.file=LookupTestHosts LookupTest\n@@ -103,1 +103,1 @@\n-    static final String CWD = System.getProperty(\"user.dir\", \".\");\n+    static final String HOSTS_FILE_NAME = System.getProperty(\"jdk.net.hosts.file\");\n@@ -106,2 +106,0 @@\n-        String hostsFileName = CWD + \"\/LookupTestHosts\";\n-        System.setProperty(\"jdk.net.hosts.file\", hostsFileName);\n@@ -110,1 +108,1 @@\n-                              hostsFileName,\n+                              HOSTS_FILE_NAME,\n@@ -114,1 +112,1 @@\n-                              hostsFileName,\n+                              HOSTS_FILE_NAME,\n","filename":"test\/jdk\/java\/net\/URLPermission\/nstest\/LookupTest.java","additions":5,"deletions":7,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,2 @@\n- * @run main\/othervm\/timeout=200 CacheTest\n+ * @run main\/othervm\/timeout=200 -Djdk.net.hosts.file=CacheTestHosts\n+ *      CacheTest\n@@ -62,2 +63,1 @@\n-        String hostsFileName = System.getProperty(\"test.src\", \".\") + \"\/CacheTestHosts\";\n-        System.setProperty(\"jdk.net.hosts.file\", hostsFileName);\n+        String hostsFileName = System.getProperty(\"jdk.net.hosts.file\");\n","filename":"test\/jdk\/sun\/net\/InetAddress\/nameservice\/simple\/CacheTest.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -1,2 +0,0 @@\n-129.156.220.219 theclub\n-10.5.18.21 luster\n","filename":"test\/jdk\/sun\/net\/InetAddress\/nameservice\/simple\/CacheTestHosts","additions":0,"deletions":2,"binary":false,"changes":2,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2006, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2006, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,2 @@\n- * @run main\/othervm\/timeout=200 -Dsun.net.inetaddr.ttl=20  DefaultCaching\n+ * @run main\/othervm\/timeout=200 -Djdk.net.hosts.file=DefaultCachingHosts\n+ *      -Dsun.net.inetaddr.ttl=20  DefaultCaching\n@@ -32,1 +33,0 @@\n-import java.security.Security;\n@@ -36,3 +36,0 @@\n-import java.nio.file.Files;\n-import java.nio.file.Path;\n-import static java.nio.file.StandardCopyOption.REPLACE_EXISTING;\n@@ -44,9 +41,1 @@\n-        String hostsFileNameSrc = System.getProperty(\"test.src\", \".\") + \"\/DefaultCachingHosts\";\n-        String hostsFileName = System.getProperty(\"user.dir\", \".\") + \"\/DefaultCachingHosts\";\n-        if (!hostsFileNameSrc.equals(hostsFileName)) {\n-            Files.copy(Path.of(hostsFileNameSrc), Path.of(hostsFileName), REPLACE_EXISTING);\n-            System.out.println(\"Host file created: \" + hostsFileName);\n-        }\n-        System.setProperty(\"jdk.net.hosts.file\", hostsFileName);\n-        \/\/ initial mapping\n-        \/\/ name service needs to resolve this.\n+        String hostsFileName = System.getProperty(\"jdk.net.hosts.file\");\n","filename":"test\/jdk\/sun\/net\/InetAddress\/nameservice\/simple\/DefaultCaching.java","additions":4,"deletions":15,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -1,3 +0,0 @@\n-129.156.220.1 theclub\n-10.5.18.22 foo\n-10.5.18.21 luster\n","filename":"test\/jdk\/sun\/net\/InetAddress\/nameservice\/simple\/DefaultCachingHosts","additions":0,"deletions":3,"binary":false,"changes":3,"status":"deleted"}]}