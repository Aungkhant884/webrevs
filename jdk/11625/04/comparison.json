{"files":[{"patch":"@@ -176,0 +176,12 @@\n+        } else if (duration != null && path == null) {\n+            try {\n+                if (dumpOnExit == null) {\n+                    \/\/Generate a filename and set default to dumponexit=true\n+                    dumpOnExit = Boolean.TRUE;\n+                }\n+                safePath = resolvePath(recording, null);\n+                recording.setDestination(safePath.toPath());\n+            } catch (IOException e) {\n+                recording.close();\n+                throw new DCmdException(\"Could not start recording, not able to write to file %s. %s \", safePath, e.getMessage());\n+            }\n","filename":"src\/jdk.jfr\/share\/classes\/jdk\/jfr\/internal\/dcmd\/DCmdStart.java","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+import jdk.jfr.RecordingState;\n@@ -62,1 +63,3 @@\n-            recording.stop();\n+            if (recording.getState() != RecordingState.STOPPED) {\n+                recording.stop();\n+            }\n","filename":"src\/jdk.jfr\/share\/classes\/jdk\/jfr\/internal\/dcmd\/DCmdStop.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"}]}