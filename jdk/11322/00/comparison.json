{"files":[{"patch":"@@ -192,3 +192,3 @@\n-void FilteringDCTOC::walk_mem_region(MemRegion mr,\n-                                     HeapWord* bottom,\n-                                     HeapWord* top) {\n+void ContiguousSpaceDCTOC::walk_mem_region(MemRegion mr,\n+                                           HeapWord* bottom,\n+                                           HeapWord* top) {\n","filename":"src\/hotspot\/share\/gc\/shared\/space.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -544,4 +544,10 @@\n-\n-\/\/ A dirty card to oop closure that does filtering.\n-\/\/ It knows how to filter out objects that are outside of the _boundary.\n-class FilteringDCTOC : public DirtyCardToOopClosure {\n+\/\/ A dirty card to oop closure for contiguous spaces (ContiguousSpace and\n+\/\/ sub-classes). It knows how to filter out objects that are outside of the\n+\/\/ _boundary.\n+\/\/\n+\/\/ 1. That the actual top of any area in a memory region\n+\/\/    contained by the space is bounded by the end of the contiguous\n+\/\/    region of the space.\n+\/\/ 2. That the space is really made up of objects and not just\n+\/\/    blocks.\n+class ContiguousSpaceDCTOC : public DirtyCardToOopClosure {\n@@ -549,1 +555,1 @@\n-  \/\/ Override.\n+  \/\/ Overrides.\n@@ -553,0 +559,2 @@\n+  HeapWord* get_actual_top(HeapWord* top, HeapWord* top_obj);\n+\n@@ -560,35 +568,6 @@\n-  virtual void walk_mem_region_with_cl(MemRegion mr,\n-                                       HeapWord* bottom, HeapWord* top,\n-                                       OopIterateClosure* cl) = 0;\n-  virtual void walk_mem_region_with_cl(MemRegion mr,\n-                                       HeapWord* bottom, HeapWord* top,\n-                                       FilteringClosure* cl) = 0;\n-\n-public:\n-  FilteringDCTOC(Space* sp, OopIterateClosure* cl,\n-                  CardTable::PrecisionStyle precision,\n-                  HeapWord* boundary) :\n-    DirtyCardToOopClosure(sp, cl, precision, boundary) {}\n-};\n-\n-\/\/ A dirty card to oop closure for contiguous spaces\n-\/\/ (ContiguousSpace and sub-classes).\n-\/\/ It is a FilteringClosure, as defined above, and it knows:\n-\/\/\n-\/\/ 1. That the actual top of any area in a memory region\n-\/\/    contained by the space is bounded by the end of the contiguous\n-\/\/    region of the space.\n-\/\/ 2. That the space is really made up of objects and not just\n-\/\/    blocks.\n-\n-class ContiguousSpaceDCTOC : public FilteringDCTOC {\n-protected:\n-  \/\/ Overrides.\n-  HeapWord* get_actual_top(HeapWord* top, HeapWord* top_obj);\n-\n-  virtual void walk_mem_region_with_cl(MemRegion mr,\n-                                       HeapWord* bottom, HeapWord* top,\n-                                       OopIterateClosure* cl);\n-  virtual void walk_mem_region_with_cl(MemRegion mr,\n-                                       HeapWord* bottom, HeapWord* top,\n-                                       FilteringClosure* cl);\n+  void walk_mem_region_with_cl(MemRegion mr,\n+                               HeapWord* bottom, HeapWord* top,\n+                               OopIterateClosure* cl);\n+  void walk_mem_region_with_cl(MemRegion mr,\n+                               HeapWord* bottom, HeapWord* top,\n+                               FilteringClosure* cl);\n@@ -600,1 +579,1 @@\n-    FilteringDCTOC(sp, cl, precision, boundary)\n+    DirtyCardToOopClosure(sp, cl, precision, boundary)\n","filename":"src\/hotspot\/share\/gc\/shared\/space.hpp","additions":20,"deletions":41,"binary":false,"changes":61,"status":"modified"}]}