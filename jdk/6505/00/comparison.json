{"files":[{"patch":"@@ -13,0 +13,1 @@\n+import java.io.OutputStreamWriter;\n@@ -58,1 +59,2 @@\n-        this.encoding = encoding != null ? encoding : Charset.defaultCharset();\n+        this.encoding = encoding != null ? encoding :\n+            Charset.forName(new OutputStreamWriter(System.out).getEncoding(), Charset.defaultCharset());\n","filename":"src\/jdk.internal.le\/share\/classes\/jdk\/internal\/org\/jline\/terminal\/impl\/AbstractTerminal.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+import java.io.OutputStreamWriter;\n@@ -32,0 +33,1 @@\n+import java.nio.charset.Charset;\n@@ -66,2 +68,2 @@\n-        outputs.put(\"out\", st -> System.setOut(new PrintStream(st, true)));\n-        outputs.put(\"err\", st -> System.setErr(new PrintStream(st, true)));\n+        outputs.put(\"out\", st -> System.setOut(new PrintStream(st, true, getPrintStreamCharset(System.out))));\n+        outputs.put(\"err\", st -> System.setErr(new PrintStream(st, true, getPrintStreamCharset(System.err))));\n@@ -73,0 +75,6 @@\n+    \/\/ Get PrintStream charset\n+    private static Charset getPrintStreamCharset(PrintStream ps) {\n+        return Charset.forName(new OutputStreamWriter(ps).getEncoding(),\n+            Charset.defaultCharset());\n+    }\n+\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/jshell\/execution\/RemoteExecutionControl.java","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"}]}