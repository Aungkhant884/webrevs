{"files":[{"patch":"@@ -1034,1 +1034,1 @@\n-      if (strncmp(name, \"_notify_allocation\", 18) == 0) { \/\/ Object escapes to JVMTI\n+      if (strncmp(name, \"_notify_jvmti_object_alloc\", 26) == 0) { \/\/ Object escapes to JVMTI\n","filename":"src\/hotspot\/share\/opto\/escape.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2834,1 +2834,1 @@\n-  \/\/ Check if JvmtiExport::_should_post_allocation_notifications is enabled and post notifications\n+  \/\/ Check if JvmtiExport::_should_notify_object_alloc is enabled and post notifications\n@@ -2838,1 +2838,1 @@\n-  Node* addr = makecon(TypeRawPtr::make((address) &JvmtiExport::_should_post_allocation_notifications));\n+  Node* addr = makecon(TypeRawPtr::make((address) &JvmtiExport::_should_notify_object_alloc));\n@@ -2843,2 +2843,2 @@\n-    const TypeFunc *tf = OptoRuntime::notify_allocation_Type();\n-    address funcAddr = OptoRuntime::notify_allocation();\n+    const TypeFunc *tf = OptoRuntime::notify_jvmti_object_alloc_Type();\n+    address funcAddr = OptoRuntime::notify_jvmti_object_alloc();\n@@ -2846,1 +2846,1 @@\n-    Node* call = make_runtime_call(RC_NO_LEAF, tf, funcAddr, \"_notify_allocation\", TypePtr::BOTTOM, obj);\n+    Node* call = make_runtime_call(RC_NO_LEAF, tf, funcAddr, \"_notify_jvmti_object_alloc\", TypePtr::BOTTOM, obj);\n@@ -2853,4 +2853,2 @@\n-\n-  set_result(ideal.value(result));\n-  return true;\n-#else\n+  obj = ideal.value(result);\n+#endif \/\/INCLUDE_JVMTI\n@@ -2859,2 +2857,0 @@\n-#endif \/\/INCLUDE_JVMTI\n-\n","filename":"src\/hotspot\/share\/opto\/library_call.cpp","additions":7,"deletions":11,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -113,1 +113,1 @@\n-address OptoRuntime::_notify_allocation                           = nullptr;\n+address OptoRuntime::_notify_jvmti_object_alloc                   = nullptr;\n@@ -157,1 +157,1 @@\n-  gen(env, _notify_allocation              , notify_allocation_Type       , SharedRuntime::notify_allocation,    0 , true, false);\n+  gen(env, _notify_jvmti_object_alloc      , notify_jvmti_object_alloc_Type, SharedRuntime::notify_jvmti_object_alloc, 0, true, false);\n@@ -480,1 +480,1 @@\n-const TypeFunc *OptoRuntime::notify_allocation_Type() {\n+const TypeFunc *OptoRuntime::notify_jvmti_object_alloc_Type() {\n","filename":"src\/hotspot\/share\/opto\/runtime.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -139,1 +139,1 @@\n-  static address _notify_allocation;\n+  static address _notify_jvmti_object_alloc;\n@@ -217,1 +217,1 @@\n-  static address notify_allocation()                     { return _notify_allocation; }\n+  static address notify_jvmti_object_alloc()             { return _notify_jvmti_object_alloc; }\n@@ -308,1 +308,1 @@\n-  static const TypeFunc* notify_allocation_Type();\n+  static const TypeFunc* notify_jvmti_object_alloc_Type();\n","filename":"src\/hotspot\/share\/opto\/runtime.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -727,1 +727,1 @@\n-    JvmtiExport::_should_post_allocation_notifications = JvmtiExport::should_post_vm_object_alloc();\n+    JvmtiExport::_should_notify_object_alloc = JvmtiExport::should_post_vm_object_alloc();\n","filename":"src\/hotspot\/share\/prims\/jvmtiEventController.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1050,1 +1050,1 @@\n-bool JvmtiExport::_should_post_allocation_notifications = true;\n+bool JvmtiExport::_should_notify_object_alloc = false;\n","filename":"src\/hotspot\/share\/prims\/jvmtiExport.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -400,1 +400,1 @@\n-  static bool _should_post_allocation_notifications;\n+  static bool _should_notify_object_alloc;\n","filename":"src\/hotspot\/share\/prims\/jvmtiExport.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -631,1 +631,1 @@\n-JRT_ENTRY(void, SharedRuntime::notify_allocation(oopDesc* o, JavaThread* current))\n+JRT_ENTRY(void, SharedRuntime::notify_jvmti_object_alloc(oopDesc* o, JavaThread* current))\n","filename":"src\/hotspot\/share\/runtime\/sharedRuntime.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -268,1 +268,1 @@\n-  static void notify_allocation(oopDesc* o, JavaThread* current);\n+  static void notify_jvmti_object_alloc(oopDesc* o, JavaThread* current);\n","filename":"src\/hotspot\/share\/runtime\/sharedRuntime.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}