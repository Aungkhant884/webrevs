{"files":[{"patch":"@@ -92,0 +92,1 @@\n+    private static int recursionCount;\n@@ -458,12 +459,9 @@\n-                try {\n-                    \/\/ break up newlines\n-                    if (nl == 0) {\n-                        @SuppressWarnings(\"serial\") \/\/ anonymous class\n-                                JPanel breakPanel = new JPanel() {\n-                            public Dimension getPreferredSize() {\n-                                Font f = getFont();\n-\n-                                if (f != null) {\n-                                    return new Dimension(1, f.getSize() + 2);\n-                                }\n-                                return new Dimension(0, 0);\n+                \/\/ break up newlines\n+                if (nl == 0) {\n+                    @SuppressWarnings(\"serial\") \/\/ anonymous class\n+                            JPanel breakPanel = new JPanel() {\n+                        public Dimension getPreferredSize() {\n+                            Font f = getFont();\n+\n+                            if (f != null) {\n+                                return new Dimension(1, f.getSize() + 2);\n@@ -471,11 +469,14 @@\n-                        };\n-                        breakPanel.setName(\"OptionPane.break\");\n-                        addMessageComponents(container, cons, breakPanel, maxll,\n-                                true);\n-                    } else {\n-                        addMessageComponents(container, cons, s.substring(0, nl),\n-                                maxll, false);\n-                    }\n-                    addMessageComponents(container, cons, s.substring(nl + nll), maxll,\n-                            false);\n-                } catch (StackOverflowError e) {\n+                            return new Dimension(0, 0);\n+                        }\n+                    };\n+                    breakPanel.setName(\"OptionPane.break\");\n+                    addMessageComponents(container, cons, breakPanel, maxll,\n+                            true);\n+                } else {\n+                    addMessageComponents(container, cons, s.substring(0, nl),\n+                            maxll, false);\n+                }\n+                \/\/ Prevent recursion of more than\n+                \/\/ 200 successive newlines in a message\n+                if (recursionCount++ > 200) {\n+                    recursionCount = 0;\n@@ -484,0 +485,3 @@\n+                addMessageComponents(container, cons, s.substring(nl + nll), maxll,\n+                        false);\n+\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicOptionPaneUI.java","additions":27,"deletions":23,"binary":false,"changes":50,"status":"modified"}]}