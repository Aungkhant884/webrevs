{"files":[{"patch":"@@ -53,1 +53,15 @@\n-      _flags(flags), _st(st), _num(0), _last_printed_methods(false) {}\n+      _flags(flags), _st(st), _num(0), _last_printed_methods(false)\n+  {\n+    if (has_mode(_flags, PRINT_METHOD_HANDLE)) {\n+      _flags |= (PRINT_METHOD_NAME | PRINT_BYTECODE);\n+    }\n+    if (has_mode(_flags, PRINT_DYNAMIC)) {\n+      _flags |= (PRINT_METHOD_NAME | PRINT_BYTECODE);\n+    }\n+    if (has_mode(_flags, PRINT_BYTECODE_ADDR)) {\n+      _flags |= (PRINT_METHOD_NAME | PRINT_BYTECODE);\n+    }\n+    if (has_mode(_flags, PRINT_BYTECODE)) {\n+      _flags |= (PRINT_METHOD_NAME);\n+    }\n+  }\n@@ -127,0 +141,10 @@\n+void ClassPrinter::print_help() {\n+  tty->print_cr(\"flags (bitmask):\");\n+  tty->print_cr(\"   0x%02x  - print names of methods\", PRINT_METHOD_NAME);\n+  tty->print_cr(\"   0x%02x  - print bytecodes\", PRINT_BYTECODE);\n+  tty->print_cr(\"   0x%02x  - print the address of bytecodes\", PRINT_BYTECODE_ADDR);\n+  tty->print_cr(\"   0x%02x  - print info for invokedynamic\", PRINT_DYNAMIC);\n+  tty->print_cr(\"   0x%02x  - print info for invokehandle\",  PRINT_METHOD_HANDLE);\n+  tty->cr();\n+}\n+\n@@ -128,0 +152,1 @@\n+  print_help();\n@@ -134,0 +159,1 @@\n+  print_help();\n@@ -143,0 +169,1 @@\n+  print_help();\n","filename":"src\/hotspot\/share\/classfile\/classPrinter.cpp","additions":28,"deletions":1,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -48,0 +48,1 @@\n+  static void print_help();\n","filename":"src\/hotspot\/share\/classfile\/classPrinter.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -398,1 +398,1 @@\n-void BytecodePrinter::print_dynamic(int orig_i, int i, constantTag tag, outputStream* st) {\n+void BytecodePrinter::print_dynamic(int orig_i, int bsm_cpindex, constantTag tag, outputStream* st) {\n@@ -400,1 +400,1 @@\n-  int bsm = constants->bootstrap_method_ref_index_at(i);\n+  int bsm = constants->bootstrap_method_ref_index_at(bsm_cpindex);\n@@ -415,2 +415,2 @@\n-  print_field_or_method(-i, constants->method_handle_index_at(bsm), st);\n-  int argc = constants->bootstrap_argument_count_at(i);\n+  print_field_or_method(-1, constants->method_handle_index_at(bsm), st);\n+  int argc = constants->bootstrap_argument_count_at(bsm_cpindex);\n@@ -421,1 +421,1 @@\n-      int arg = constants->bootstrap_argument_index_at(i, arg_i);\n+      int arg = constants->bootstrap_argument_index_at(bsm_cpindex, arg_i);\n","filename":"src\/hotspot\/share\/interpreter\/bytecodeTracer.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"}]}