{"files":[{"patch":"@@ -444,18 +444,1 @@\n-  cpce->print(st, cpc_index);\n-  if (cpce->bytecode_1() == Bytecodes::_invokehandle ||\n-      cpce->bytecode_1() == Bytecodes::_invokedynamic) {\n-    constantPoolHandle cph(Thread::current(), constants);\n-    Method* m = cpce->method_if_resolved(cph);\n-    oop appendix = cpce->appendix_if_resolved(cph);\n-    if (m != NULL) {\n-      st->print_cr(\"  Method%s: \" INTPTR_FORMAT \" %s.%s%s\",\n-                   m->is_native() ? \" (native)\" : \"\",\n-                   p2i(m),\n-                   m->method_holder()->name()->as_C_string(),\n-                   m->name()->as_C_string(), m->signature()->as_C_string());\n-    }\n-    if (appendix != NULL) {\n-      st->print(\"  appendix: \");\n-      appendix->print_on(st);\n-    }\n-  }\n+  cpce->print(st, cpc_index, constants->cache());\n","filename":"src\/hotspot\/share\/interpreter\/bytecodeTracer.cpp","additions":1,"deletions":18,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -448,1 +448,1 @@\n-    this->print(log_stream, 0);\n+    this->print(log_stream, 0, cpool->cache());\n@@ -482,1 +482,1 @@\n-Method* ConstantPoolCacheEntry::method_if_resolved(const constantPoolHandle& cpool) {\n+Method* ConstantPoolCacheEntry::method_if_resolved(const constantPoolHandle& cpool) const {\n@@ -529,1 +529,1 @@\n-oop ConstantPoolCacheEntry::appendix_if_resolved(const constantPoolHandle& cpool) {\n+oop ConstantPoolCacheEntry::appendix_if_resolved(const constantPoolHandle& cpool) const {\n@@ -622,1 +622,1 @@\n-void ConstantPoolCacheEntry::print(outputStream* st, int index) const {\n+void ConstantPoolCacheEntry::print(outputStream* st, int index, const ConstantPoolCache* cache) const {\n@@ -632,0 +632,18 @@\n+\n+  if ((bytecode_1() == Bytecodes::_invokehandle ||\n+       bytecode_1() == Bytecodes::_invokedynamic)) {\n+    constantPoolHandle cph(Thread::current(), cache->constant_pool());\n+    Method* m = method_if_resolved(cph);\n+    oop appendix = appendix_if_resolved(cph);\n+    if (m != NULL) {\n+      st->print_cr(\"  Method%s: \" INTPTR_FORMAT \" %s.%s%s\",\n+                   m->is_native() ? \" (native)\" : \"\",\n+                   p2i(m),\n+                   m->method_holder()->name()->as_C_string(),\n+                   m->name()->as_C_string(), m->signature()->as_C_string());\n+    }\n+    if (appendix != NULL) {\n+      st->print(\"  appendix: \");\n+      appendix->print_on(st);\n+    }\n+  }\n@@ -787,1 +805,1 @@\n-      entry_at(i)->print(tty, i);\n+      entry_at(i)->print(tty, i, this);\n@@ -804,1 +822,1 @@\n-  for (int i = 0; i < length(); i++) entry_at(i)->print(st, i);\n+  for (int i = 0; i < length(); i++) entry_at(i)->print(st, i, this);\n","filename":"src\/hotspot\/share\/oops\/cpCache.cpp","additions":24,"deletions":6,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -295,2 +295,2 @@\n-  Method*      method_if_resolved(const constantPoolHandle& cpool);\n-  oop        appendix_if_resolved(const constantPoolHandle& cpool);\n+  Method*      method_if_resolved(const constantPoolHandle& cpool) const;\n+  oop        appendix_if_resolved(const constantPoolHandle& cpool) const;\n@@ -382,1 +382,1 @@\n-  void print (outputStream* st, int index) const;\n+  void print (outputStream* st, int index, const ConstantPoolCache* cache) const;\n","filename":"src\/hotspot\/share\/oops\/cpCache.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}