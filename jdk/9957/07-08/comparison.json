{"files":[{"patch":"@@ -73,0 +73,2 @@\n+    print_instance_klass(InstanceKlass::cast(k));\n+  }\n@@ -74,1 +76,1 @@\n-    InstanceKlass* ik = InstanceKlass::cast(k);\n+  void print_instance_klass(InstanceKlass* ik) {\n@@ -81,1 +83,1 @@\n-      _st->print(\"[%3d] \" INTPTR_FORMAT \" %s \", _num++, p2i(k), ik->name()->as_C_string());\n+      _st->print(\"[%3d] \" INTPTR_FORMAT \" class %s \", _num++, p2i(ik), ik->name()->as_C_string());\n@@ -103,5 +105,1 @@\n-          _st->print_cr(INTPTR_FORMAT \" %s : %s\", p2i(m),\n-                        m->name()->as_C_string(), m->signature()->as_C_string());\n-          if (print_codes) {\n-            m->print_codes_on(_st, _flags);\n-          }\n+          print_method(m);\n@@ -113,0 +111,10 @@\n+\n+  void print_method(Method* m) {\n+    bool print_codes = has_mode(_flags, ClassPrinter::PRINT_BYTECODE);\n+    _st->print_cr(INTPTR_FORMAT \" %smethod %s : %s\", p2i(m),\n+                  m->is_static() ? \"static \" : \"\",\n+                  m->name()->as_C_string(), m->signature()->as_C_string());\n+    if (print_codes) {\n+      m->print_codes_on(_st, _flags);\n+    }\n+  }\n@@ -132,0 +140,3 @@\n+  if (pattern == NULL) {\n+    return true;\n+  }\n@@ -174,0 +185,13 @@\n+\n+void ClassPrinter::print_class(InstanceKlass* k, int flags) {\n+  print_help();\n+  KlassPrintClosure closure(NULL, NULL, NULL, flags, tty);\n+  closure.print_instance_klass(k);\n+}\n+\n+void ClassPrinter::print_method(Method* m, int flags) {\n+  print_help();\n+  KlassPrintClosure closure(NULL, \"\", \"\", flags | PRINT_METHOD_NAME | PRINT_BYTECODE, tty);\n+  closure.print_instance_klass(m->method_holder());\n+  closure.print_method(m);\n+}\n","filename":"src\/hotspot\/share\/classfile\/classPrinter.cpp","additions":31,"deletions":7,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+class Method;\n@@ -60,1 +61,1 @@\n-  \/\/ flags must be OR'ed from ClassPrinter::Mode for the next 3 functions\n+  \/\/ flags must be OR'ed from ClassPrinter::Mode for the next 5 functions\n@@ -68,0 +69,4 @@\n+  static void print_class(InstanceKlass* k, int flags);\n+  static void print_method(Method* k, int flags);\n+\n+\n","filename":"src\/hotspot\/share\/classfile\/classPrinter.hpp","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -640,1 +640,1 @@\n-\/\/ flags must be OR'ed from ClassPrinter::Mode for the next 3 functions.\n+\/\/ flags must be OR'ed from ClassPrinter::Mode for the next 5 functions.\n@@ -664,0 +664,10 @@\n+extern \"C\" JNIEXPORT void printclass(intptr_t k, int flags) {\n+  Command c(\"printclass\");\n+  ClassPrinter::print_class((InstanceKlass*)k, flags);\n+}\n+\n+extern \"C\" JNIEXPORT void printmethod(intptr_t m, int flags) {\n+  Command c(\"printmethod\");\n+  ClassPrinter::print_method((Method*)m, flags);\n+}\n+\n@@ -701,0 +711,2 @@\n+  tty->print_cr(\"  printclass(klass, flags)\");\n+  tty->print_cr(\"  printmethod(method, flags)\");\n","filename":"src\/hotspot\/share\/utilities\/debug.cpp","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"}]}