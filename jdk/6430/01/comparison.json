{"files":[{"patch":"@@ -234,1 +234,1 @@\n-    G1CardSet::G1CardSetPtrIterator* _scan_f;\n+    G1CardSet::CardSetPtrClosure* _scan_f;\n@@ -236,1 +236,1 @@\n-    explicit G1CardSetHashTableScan(G1CardSet::G1CardSetPtrIterator* f) : _scan_f(f) { }\n+    explicit G1CardSetHashTableScan(G1CardSet::CardSetPtrClosure* f) : _scan_f(f) { }\n@@ -287,1 +287,1 @@\n-  void iterate_safepoint(G1CardSet::G1CardSetPtrIterator* cl2) {\n+  void iterate_safepoint(G1CardSet::CardSetPtrClosure* cl2) {\n@@ -292,1 +292,1 @@\n-  void iterate(G1CardSet::G1CardSetPtrIterator* cl2) {\n+  void iterate(G1CardSet::CardSetPtrClosure* cl2) {\n@@ -803,1 +803,1 @@\n-void G1CardSet::iterate_cards_during_transfer(CardSetPtr const card_set, CardVisitor& found) {\n+void G1CardSet::iterate_cards_during_transfer(CardSetPtr const card_set, CardVisitor& cl) {\n@@ -812,1 +812,1 @@\n-      ptr.iterate(found, _config->inline_ptr_bits_per_card());\n+      ptr.iterate(cl, _config->inline_ptr_bits_per_card());\n@@ -816,1 +816,1 @@\n-      card_set_ptr<G1CardSetArray>(card_set)->iterate(found);\n+      card_set_ptr<G1CardSetArray>(card_set)->iterate(cl);\n@@ -824,1 +824,1 @@\n-void G1CardSet::iterate_containers(G1CardSetPtrIterator* found, bool at_safepoint) {\n+void G1CardSet::iterate_containers(CardSetPtrClosure* cl, bool at_safepoint) {\n@@ -826,1 +826,1 @@\n-    _table->iterate_safepoint(found);\n+    _table->iterate_safepoint(cl);\n@@ -828,1 +828,1 @@\n-    _table->iterate(found);\n+    _table->iterate(cl);\n@@ -832,0 +832,1 @@\n+\/\/ Applied to all card (ranges) of the containers.\n@@ -833,2 +834,2 @@\n-class G1ContainerCards {\n-  Closure& _iter;\n+class G1ContainerCardsClosure {\n+  Closure& _cl;\n@@ -838,1 +839,1 @@\n-  G1ContainerCards(Closure& iter, uint region_idx) : _iter(iter), _region_idx(region_idx) { }\n+  G1ContainerCardsClosure(Closure& cl, uint region_idx) : _cl(cl), _region_idx(region_idx) { }\n@@ -843,1 +844,1 @@\n-    _iter.do_card(_region_idx, card_idx);\n+    _cl.do_card(_region_idx, card_idx);\n@@ -848,1 +849,1 @@\n-      _iter.do_card(_region_idx, card_idx);\n+      _cl.do_card(_region_idx, card_idx);\n@@ -854,1 +855,1 @@\n-class G1CardSetIterateCardsIterator : public G1CardSet::G1CardSetPtrIterator {\n+class G1CardSetContainersClosure : public G1CardSet::CardSetPtrClosure {\n@@ -856,1 +857,1 @@\n-  Closure& _iter;\n+  Closure& _cl;\n@@ -860,2 +861,2 @@\n-  G1CardSetIterateCardsIterator(G1CardSet* card_set,\n-                                Closure& iter) :\n+  G1CardSetContainersClosure(G1CardSet* card_set,\n+                             Closure& cl) :\n@@ -863,1 +864,1 @@\n-    _iter(iter) { }\n+    _cl(cl) { }\n@@ -866,1 +867,1 @@\n-    CardOrRanges<Closure> cl(_iter, region_idx);\n+    CardOrRanges<Closure> cl(_cl, region_idx);\n@@ -871,3 +872,3 @@\n-void G1CardSet::iterate_cards(G1CardSetCardIterator& iter) {\n-  G1CardSetIterateCardsIterator<G1CardSetCardIterator, G1ContainerCards> cl(this, iter);\n-  iterate_containers(&cl);\n+void G1CardSet::iterate_cards(CardClosure& cl) {\n+  G1CardSetContainersClosure<CardClosure, G1ContainerCardsClosure> cl2(this, cl);\n+  iterate_containers(&cl2);\n@@ -889,1 +890,1 @@\n-  class GetNumberOfContainers : public G1CardSetPtrIterator {\n+  class GetNumberOfContainers : public CardSetPtrClosure {\n@@ -893,1 +894,1 @@\n-    GetNumberOfContainers() : G1CardSetPtrIterator(), _count(0) { }\n+    GetNumberOfContainers() : CardSetPtrClosure(), _count(0) { }\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CardSet.cpp","additions":27,"deletions":26,"binary":false,"changes":53,"status":"modified"},{"patch":"@@ -294,1 +294,1 @@\n-  void iterate_cards_during_transfer(CardSetPtr const card_set, CardVisitor& found);\n+  void iterate_cards_during_transfer(CardSetPtr const card_set, CardVisitor& vl);\n@@ -356,1 +356,1 @@\n-  void iterate_cards_or_ranges_in_container(CardSetPtr const card_set, CardOrRangeVisitor& found);\n+  void iterate_cards_or_ranges_in_container(CardSetPtr const card_set, CardOrRangeVisitor& cl);\n@@ -358,1 +358,1 @@\n-  class G1CardSetPtrIterator {\n+  class CardSetPtrClosure {\n@@ -363,1 +363,1 @@\n-  void iterate_containers(G1CardSetPtrIterator* iter, bool safepoint = false);\n+  void iterate_containers(CardSetPtrClosure* cl, bool safepoint = false);\n@@ -365,1 +365,1 @@\n-  class G1CardSetCardIterator {\n+  class CardClosure {\n@@ -370,1 +370,1 @@\n-  void iterate_cards(G1CardSetCardIterator& iter);\n+  void iterate_cards(CardClosure& cl);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CardSet.hpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -45,1 +45,1 @@\n-inline void G1CardSet::iterate_cards_or_ranges_in_container(CardSetPtr const card_set, CardOrRangeVisitor& found) {\n+inline void G1CardSet::iterate_cards_or_ranges_in_container(CardSetPtr const card_set, CardOrRangeVisitor& cl) {\n@@ -48,1 +48,1 @@\n-      if (found.start_iterate(G1GCPhaseTimes::MergeRSMergedInline)) {\n+      if (cl.start_iterate(G1GCPhaseTimes::MergeRSMergedInline)) {\n@@ -50,1 +50,1 @@\n-        ptr.iterate(found, _config->inline_ptr_bits_per_card());\n+        ptr.iterate(cl, _config->inline_ptr_bits_per_card());\n@@ -55,2 +55,2 @@\n-      if (found.start_iterate(G1GCPhaseTimes::MergeRSMergedArrayOfCards)) {\n-        card_set_ptr<G1CardSetArray>(card_set)->iterate(found);\n+      if (cl.start_iterate(G1GCPhaseTimes::MergeRSMergedArrayOfCards)) {\n+        card_set_ptr<G1CardSetArray>(card_set)->iterate(cl);\n@@ -68,2 +68,2 @@\n-        if (found.start_iterate(G1GCPhaseTimes::MergeRSMergedFull)) {\n-          found(0, _config->max_cards_in_region());\n+        if (cl.start_iterate(G1GCPhaseTimes::MergeRSMergedFull)) {\n+          cl(0, _config->max_cards_in_region());\n@@ -73,2 +73,2 @@\n-      if (found.start_iterate(G1GCPhaseTimes::MergeRSMergedHowl)) {\n-        card_set_ptr<G1CardSetHowl>(card_set)->iterate(found, _config);\n+      if (cl.start_iterate(G1GCPhaseTimes::MergeRSMergedHowl)) {\n+        card_set_ptr<G1CardSetHowl>(card_set)->iterate(cl, _config);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CardSet.inline.hpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -60,1 +60,1 @@\n-  Closure& _iter;\n+  Closure& _cl;\n@@ -65,1 +65,1 @@\n-  G1ContainerCardsOrRanges(Closure& iter, uint region_idx, uint offset) : _iter(iter), _region_idx(region_idx), _offset(offset) { }\n+  G1ContainerCardsOrRanges(Closure& cl, uint region_idx, uint offset) : _cl(cl), _region_idx(region_idx), _offset(offset) { }\n@@ -68,1 +68,1 @@\n-    return _iter.start_iterate(tag, _region_idx);\n+    return _cl.start_iterate(tag, _region_idx);\n@@ -72,1 +72,1 @@\n-    _iter.do_card(card_idx + _offset);\n+    _cl.do_card(card_idx + _offset);\n@@ -76,1 +76,1 @@\n-    _iter.do_card_range(card_idx + _offset, length);\n+    _cl.do_card_range(card_idx + _offset, length);\n@@ -81,1 +81,1 @@\n-class G1HeapRegionRemSetMergeCardIterator : public G1CardSet::G1CardSetPtrIterator {\n+class G1HeapRegionRemSetMergeCardClosure : public G1CardSet::CardSetPtrClosure {\n@@ -83,1 +83,1 @@\n-  Closure& _iter;\n+  Closure& _cl;\n@@ -90,2 +90,2 @@\n-  G1HeapRegionRemSetMergeCardIterator(G1CardSet* card_set,\n-                                      Closure& iter,\n+  G1HeapRegionRemSetMergeCardClosure(G1CardSet* card_set,\n+                                      Closure& cl,\n@@ -95,1 +95,1 @@\n-    _iter(iter),\n+    _cl(cl),\n@@ -102,1 +102,1 @@\n-    CardOrRanges<Closure> cl(_iter,\n+    CardOrRanges<Closure> cl(_cl,\n@@ -111,4 +111,4 @@\n-  G1HeapRegionRemSetMergeCardIterator<CardOrRangeVisitor, G1ContainerCardsOrRanges> cl2(&_card_set,\n-                                                                                        cl,\n-                                                                                        _card_set.config()->log2_card_region_per_heap_region(),\n-                                                                                        _card_set.config()->log2_cards_per_card_region());\n+  G1HeapRegionRemSetMergeCardClosure<CardOrRangeVisitor, G1ContainerCardsOrRanges> cl2(&_card_set,\n+                                                                                       cl,\n+                                                                                       _card_set.config()->log2_card_region_per_heap_region(),\n+                                                                                       _card_set.config()->log2_cards_per_card_region());\n","filename":"src\/hotspot\/share\/gc\/g1\/heapRegionRemSet.inline.hpp","additions":15,"deletions":15,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -37,1 +37,1 @@\n-  class G1CountCardsClosure : public G1CardSet::G1CardSetCardIterator {\n+  class G1CountCardsClosure : public G1CardSet::CardClosure {\n@@ -85,1 +85,1 @@\n-  static void iterate_cards(G1CardSet* card_set, G1CardSet::G1CardSetCardIterator* cl);\n+  static void iterate_cards(G1CardSet* card_set, G1CardSet::CardClosure* cl);\n@@ -104,1 +104,1 @@\n-class G1CheckCardClosure : public G1CardSet::G1CardSetCardIterator {\n+class G1CheckCardClosure : public G1CardSet::CardClosure {\n@@ -166,1 +166,1 @@\n-class G1CountCardsOccupied : public G1CardSet::G1CardSetPtrIterator {\n+class G1CountCardsOccupied : public G1CardSet::CardSetPtrClosure {\n@@ -181,1 +181,1 @@\n-  class CheckIterator : public G1CardSet::G1CardSetCardIterator {\n+  class CheckIterator : public G1CardSet::CardClosure {\n","filename":"test\/hotspot\/gtest\/gc\/g1\/test_g1CardSet.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"}]}