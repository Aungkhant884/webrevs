{"files":[{"patch":"@@ -34,2 +34,0 @@\n-static HANDLE hStdOut = INVALID_HANDLE_VALUE;\n-HANDLE java_io_Console_hStdIn = INVALID_HANDLE_VALUE;\n@@ -39,2 +37,5 @@\n-    if (java_io_Console_hStdIn == INVALID_HANDLE_VALUE &&\n-        (java_io_Console_hStdIn = GetStdHandle(STD_INPUT_HANDLE)) == INVALID_HANDLE_VALUE) {\n+    HANDLE hStdOut = GetStdHandle(STD_OUTPUT_HANDLE);\n+    HANDLE hStdIn = GetStdHandle(STD_INPUT_HANDLE);\n+\n+    if (hStdIn == INVALID_HANDLE_VALUE ||\n+        hStdOut == INVALID_HANDLE_VALUE) {\n@@ -43,2 +44,3 @@\n-    if (hStdOut == INVALID_HANDLE_VALUE &&\n-        (hStdOut = GetStdHandle(STD_OUTPUT_HANDLE)) == INVALID_HANDLE_VALUE) {\n+\n+    if (GetFileType(hStdIn) != FILE_TYPE_CHAR ||\n+        GetFileType(hStdOut) != FILE_TYPE_CHAR) {\n@@ -47,3 +49,1 @@\n-    if (GetFileType(java_io_Console_hStdIn) != FILE_TYPE_CHAR ||\n-        GetFileType(hStdOut) != FILE_TYPE_CHAR)\n-        return JNI_FALSE;\n+\n","filename":"src\/java.base\/windows\/native\/libjava\/Console_md.c","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -34,2 +34,0 @@\n-extern HANDLE java_io_Console_hStdIn;\n-\n@@ -41,1 +39,3 @@\n-    if (! GetConsoleMode(java_io_Console_hStdIn, &fdwMode)) {\n+    HANDLE hStdIn = GetStdHandle(STD_INPUT_HANDLE);\n+\n+    if (! GetConsoleMode(hStdIn, &fdwMode)) {\n@@ -51,1 +51,1 @@\n-    if (! SetConsoleMode(java_io_Console_hStdIn, fdwMode)) {\n+    if (! SetConsoleMode(hStdIn, fdwMode)) {\n","filename":"src\/java.base\/windows\/native\/libjava\/JdkConsoleImpl_md.c","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}