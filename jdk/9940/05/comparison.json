{"files":[{"patch":"@@ -36,0 +36,1 @@\n+import java.awt.Dimension;\n@@ -40,1 +41,2 @@\n-import javax.swing.*;\n+import javax.swing.SwingUtilities;\n+import javax.swing.UIManager;\n@@ -49,6 +51,1 @@\n-import org.openide.util.Exceptions;\n-import org.openide.util.Lookup;\n-import org.openide.util.LookupEvent;\n-import org.openide.util.LookupListener;\n-import org.openide.util.NbBundle;\n-import org.openide.util.Utilities;\n+import org.openide.util.*;\n@@ -100,2 +97,3 @@\n-        Border b = (Border) UIManager.get(\"Nb.Editor.Toolbar.border\"); \/\/NOI18N\n-        toolbar.setBorder(b);\n+        toolbar.setBorder((Border) UIManager.get(\"Nb.Editor.Toolbar.border\")); \/\/NOI18N\n+        toolbar.setMinimumSize(new Dimension(0,0)); \/\/ MacOS BUG with ToolbarWithOverflow\n+\n","filename":"src\/utils\/IdealGraphVisualizer\/Coordinator\/src\/main\/java\/com\/sun\/hotspot\/igv\/coordinator\/OutlineTopComponent.java","additions":7,"deletions":9,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+import java.awt.Dimension;\n@@ -40,1 +41,4 @@\n-import javax.script.*;\n+import javax.script.ScriptContext;\n+import javax.script.ScriptEngine;\n+import javax.script.ScriptEngineManager;\n+import javax.script.ScriptException;\n@@ -363,2 +367,3 @@\n-        Border b = (Border) UIManager.get(\"Nb.Editor.Toolbar.border\"); \/\/NOI18N\n-        toolBar.setBorder(b);\n+        toolBar.setBorder((Border) UIManager.get(\"Nb.Editor.Toolbar.border\")); \/\/NOI18N\n+        toolBar.setMinimumSize(new Dimension(0,0)); \/\/ MacOS BUG with ToolbarWithOverflow\n+\n","filename":"src\/utils\/IdealGraphVisualizer\/FilterWindow\/src\/main\/java\/com\/sun\/hotspot\/igv\/filterwindow\/FilterTopComponent.java","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -26,6 +26,6 @@\n-import com.sun.hotspot.igv.data.ChangedEvent;\n-import com.sun.hotspot.igv.data.ChangedListener;\n-import com.sun.hotspot.igv.data.GraphDocument;\n-import com.sun.hotspot.igv.data.Group;\n-import com.sun.hotspot.igv.data.InputNode;\n-import com.sun.hotspot.igv.data.InputBlock;\n+import com.lowagie.text.Document;\n+import com.lowagie.text.Rectangle;\n+import com.lowagie.text.pdf.PdfContentByte;\n+import com.lowagie.text.pdf.PdfGraphics2D;\n+import com.lowagie.text.pdf.PdfTemplate;\n+import com.lowagie.text.pdf.PdfWriter;\n@@ -33,0 +33,1 @@\n+import com.sun.hotspot.igv.data.*;\n@@ -40,0 +41,1 @@\n+import com.sun.hotspot.igv.settings.Settings;\n@@ -42,1 +44,0 @@\n-import com.sun.hotspot.igv.settings.Settings;\n@@ -49,1 +50,0 @@\n-import java.awt.event.KeyListener;\n@@ -61,7 +61,0 @@\n-import com.lowagie.text.Document;\n-import com.lowagie.text.Rectangle;\n-import com.lowagie.text.pdf.PdfWriter;\n-import com.lowagie.text.pdf.PdfContentByte;\n-import com.lowagie.text.pdf.PdfTemplate;\n-import com.lowagie.text.pdf.PdfGraphics2D;\n-import org.w3c.dom.DOMImplementation;\n@@ -82,1 +75,0 @@\n-import org.openide.windows.Mode;\n@@ -84,1 +76,1 @@\n-import org.openide.windows.WindowManager;\n+import org.w3c.dom.DOMImplementation;\n@@ -86,1 +78,0 @@\n-import static java.nio.charset.StandardCharsets.UTF_8;\n@@ -95,1 +86,0 @@\n-    private Toolbar toolBar;\n@@ -113,10 +103,3 @@\n-\n-    private static final Component quicksearch;\n-    static {\n-        Action searchAction = Utilities.actionsForPath(\"Actions\/Search\").get(0);\n-        quicksearch = ((Presenter.Toolbar) searchAction).getToolbarPresenter();\n-        Dimension preferredSize = quicksearch.getPreferredSize();\n-        preferredSize = new Dimension((int) preferredSize.getWidth() * 2, (int) preferredSize.getHeight());\n-        quicksearch.setMinimumSize(preferredSize); \/\/ necessary for GTK LAF\n-        quicksearch.setPreferredSize(preferredSize);\n-    }\n+    private JPanel topPanel;\n+    private Toolbar quickSearchToolbar;\n+    private static final JPanel quickSearchPresenter = (JPanel) ((Presenter.Toolbar) Utilities.actionsForPath(\"Actions\/Search\").get(0)).getToolbarPresenter();\n@@ -211,3 +194,4 @@\n-        toolBar = new Toolbar();\n-        Border b = (Border) UIManager.get(\"Nb.Editor.Toolbar.border\"); \/\/NOI18N\n-        toolBar.setBorder(b);\n+        Toolbar toolBar = new Toolbar();\n+        toolBar.setBorder((Border) UIManager.get(\"Nb.Editor.Toolbar.border\")); \/\/NOI18N\n+        toolBar.setMinimumSize(new Dimension(0,0)); \/\/ MacOS BUG with ToolbarWithOverflow\n+\n@@ -327,1 +311,0 @@\n-\n@@ -329,1 +312,17 @@\n-        toolBar.add(quicksearch);\n+\n+        quickSearchToolbar = new Toolbar();\n+        quickSearchToolbar.setLayout(new BoxLayout(quickSearchToolbar, BoxLayout.LINE_AXIS));\n+        quickSearchToolbar.setBorder((Border) UIManager.get(\"Nb.Editor.Toolbar.border\")); \/\/NOI18N\n+        quickSearchPresenter.setMinimumSize(quickSearchPresenter.getPreferredSize());\n+        quickSearchPresenter.setAlignmentX(Component.RIGHT_ALIGNMENT);\n+        quickSearchToolbar.add(quickSearchPresenter);\n+\n+        \/\/ Needed for toolBar to use maximal available width\n+        JPanel toolbarPanel = new JPanel(new GridLayout(1, 0));\n+        toolbarPanel.add(toolBar);\n+\n+        topPanel = new JPanel();\n+        topPanel.setLayout(new BoxLayout(topPanel, BoxLayout.LINE_AXIS));\n+        topPanel.add(toolbarPanel);\n+        topPanel.add(quickSearchToolbar);\n+        container.add(BorderLayout.NORTH, topPanel);\n@@ -460,4 +459,0 @@\n-    @Override\n-    public void componentOpened() {\n-    }\n-\n@@ -466,0 +461,1 @@\n+        super.componentClosed();\n@@ -661,1 +657,0 @@\n-        toolBar.add(quicksearch);\n@@ -670,0 +665,7 @@\n+    }\n+\n+    @Override\n+    protected void componentActivated() {\n+        super.componentActivated();\n+        quickSearchToolbar.add(quickSearchPresenter);\n+        quickSearchPresenter.revalidate();\n","filename":"src\/utils\/IdealGraphVisualizer\/View\/src\/main\/java\/com\/sun\/hotspot\/igv\/view\/EditorTopComponent.java","additions":41,"deletions":39,"binary":false,"changes":80,"status":"modified"}]}