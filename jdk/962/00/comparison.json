{"files":[{"patch":"@@ -325,0 +325,2 @@\n+  static int component_mirror_offset() { return _component_mirror_offset; }\n+\n","filename":"src\/hotspot\/share\/classfile\/javaClasses.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1998,0 +1998,8 @@\n+\n+  if (displacement == java_lang_Class::component_mirror_offset() && java_lang_Class::is_instance(obj()) &&\n+      !java_lang_Class::as_Klass(obj())->is_array_klass()) {\n+    \/\/ Class.componentType for non-array classes can transiently contain an int[] that's\n+    \/\/ used for locking so always return null to mimic Class.getComponentType()\n+    return JVMCIENV->get_jobject(JVMCIENV->get_JavaConstant_NULL_POINTER());\n+  }\n+\n@@ -2223,0 +2231,7 @@\n+  if (displacement == java_lang_Class::component_mirror_offset() && java_lang_Class::is_instance(xobj()) &&\n+      !java_lang_Class::as_Klass(xobj())->is_array_klass()) {\n+    \/\/ Class.componentType for non-array classes can transiently contain an int[] that's\n+    \/\/ used for locking so always return null to mimic Class.getComponentType()\n+    return JVMCIENV->get_jobject(JVMCIENV->get_JavaConstant_NULL_POINTER());\n+  }\n+\n","filename":"src\/hotspot\/share\/jvmci\/jvmciCompilerToVM.cpp","additions":15,"deletions":0,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -407,0 +407,8 @@\n+        if (obj instanceof Class && field.getName().equals(\"componentType\")) {\n+            Class<?> clazz = (Class<?>) obj;\n+            if (!clazz.isArray()) {\n+                \/\/ Class.componentType for non-array classes can transiently contain an int[] that's\n+                \/\/ used for locking so always return null to mimic Class.getComponentType()\n+                return JavaConstant.NULL_POINTER;\n+            }\n+        }\n","filename":"src\/jdk.internal.vm.ci\/share\/classes\/jdk.vm.ci.hotspot\/src\/jdk\/vm\/ci\/hotspot\/HotSpotJDKReflection.java","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"}]}