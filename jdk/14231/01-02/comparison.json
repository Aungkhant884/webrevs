{"files":[{"patch":"@@ -548,1 +548,1 @@\n-    if (EnableJVMCI) {\n+    if (EnableJVMCI || UseJVMCICompiler) {\n","filename":"src\/hotspot\/share\/compiler\/compilerDefinitions.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -168,1 +168,1 @@\n-bool JVMCIGlobals::enable_jvmci_product_mode(JVMFlagOrigin origin) {\n+bool JVMCIGlobals::enable_jvmci_product_mode(JVMFlagOrigin origin, bool use_graal_jit) {\n@@ -205,0 +205,6 @@\n+  if (use_graal_jit) {\n+    JVMFlag *useGraalJITFlag = JVMFlag::find_flag(\"UseGraalJIT\");\n+    if (JVMFlagAccess::set_bool(useGraalJITFlag, &value, origin) != JVMFlag::SUCCESS) {\n+      return false;\n+    }\n+  }\n","filename":"src\/hotspot\/share\/jvmci\/jvmci_globals.cpp","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -193,1 +193,1 @@\n-  static bool enable_jvmci_product_mode(JVMFlagOrigin);\n+  static bool enable_jvmci_product_mode(JVMFlagOrigin origin, bool use_graal_jit);\n","filename":"src\/hotspot\/share\/jvmci\/jvmci_globals.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2837,1 +2837,2 @@\n-      if (match_option(option, \"-XX:+UseGraalJIT\")) {\n+      bool use_graal_jit = match_option(option, \"-XX:+UseGraalJIT\");\n+      if (use_graal_jit) {\n@@ -2840,1 +2841,1 @@\n-          if (strcmp(jvmci_compiler, \"graal\") != 0) {\n+          if (strncmp(jvmci_compiler, \"graal\", strlen(\"graal\")) != 0) {\n@@ -2857,1 +2858,1 @@\n-        if (!JVMCIGlobals::enable_jvmci_product_mode(origin)) {\n+        if (!JVMCIGlobals::enable_jvmci_product_mode(origin, use_graal_jit)) {\n@@ -2864,1 +2865,1 @@\n-      else if (!process_argument(\"EnableJVMCIProduct\", args->ignoreUnrecognized, origin)) {\n+      else if (!process_argument(use_graal_jit ? \"UseGraalJIT\" : \"EnableJVMCIProduct\", args->ignoreUnrecognized, origin)) {\n","filename":"src\/hotspot\/share\/runtime\/arguments.cpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n","filename":"test\/hotspot\/jtreg\/compiler\/jvmci\/TestEnableJVMCIProduct.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}