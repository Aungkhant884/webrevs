{"files":[{"patch":"@@ -98,0 +98,44 @@\n+static bool is_hidden_class_pattern(const char * start) {\n+  int index = 0;\n+  char c = *start;\n+\n+  while (c != '\\0' && c != '*' && c != ':') {\n+    if (index == 0) {\n+      \/\/ The first non-'*' char after '\/' should be '0'\n+      if (c != '0') {\n+        return false;\n+      }\n+    } else if (index == 1) {\n+      \/\/ The second non-'*' char after '\/' should be 'x'\n+      if (c != 'x') {\n+        return false;\n+      }\n+    } else {\n+      \/\/ The remaining non-'*' chars should be xdigits\n+      if (!isxdigit(c)) {\n+        return false;\n+      }\n+    }\n+    index++;\n+    c = *(++start);\n+  }\n+\n+  if (c == '*' || c == ':') {\n+    char next = *(++start);\n+    if (next == ':') {\n+      if (c == ':') {\n+        \/\/ full hidden class name without '*'\n+        return true;\n+      } else {\n+        char next_next = *(++start);\n+        if (next_next == ':') {\n+          \/\/ partial hidden class name with suffix '*'\n+          return true;\n+        }\n+      }\n+    }\n+  }\n+\n+  return false;\n+}\n+\n@@ -118,2 +162,12 @@\n-          error_msg = \"Method pattern uses '\/' together with '::'\";\n-          return false;\n+          \/\/ Check whether it's a hidden class method.\n+          if (is_hidden_class_pattern(lp + 1)) {\n+            \/\/ According to ClassFileParser::mangle_hidden_class_name, the pattern of\n+            \/\/ hidden class name in the VM should be: _class_name, \"+\", and &ik\n+            \/\/ But \"+\" will be replaced with \"\/\" when it is printed by PrintCompilation.\n+            \/\/ So replace '\/' with '+'\n+            *lp = '+';\n+          } else {\n+            \/\/ Not a hidden class method\n+            error_msg = \"Method pattern uses '\/' together with '::'\";\n+            return false;\n+          }\n","filename":"src\/hotspot\/share\/compiler\/methodMatcher.cpp","additions":56,"deletions":2,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -159,0 +159,6 @@\n+        testCases.add(toString, \"java.util.ResourceBundle$$Lambda$1\/0x00000008010413c8::run\", NO_MATCH);\n+        testCases.add(toString, \"java.util.ResourceBundle$$Lambda$1\/*::run\", NO_MATCH);\n+        testCases.add(toString, \"java.util.ResourceBundle$$Lambda$1\/01234::run\", PARSING_FAILURE);\n+        testCases.add(toString, \"java.util.ResourceBundle$$Lambda$1\/0x1234u::run\", PARSING_FAILURE);\n+        testCases.add(toString, \"java.util\/*.ResourceBundle$$Lambda$1\/0x00000008010413c8::run\", PARSING_FAILURE);\n+\n","filename":"test\/hotspot\/jtreg\/compiler\/oracle\/MethodMatcherTest.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"}]}