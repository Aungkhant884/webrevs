{"files":[{"patch":"@@ -47,2 +47,0 @@\n-import java.util.Properties;\n-\n@@ -61,6 +59,2 @@\n-        Properties prop = System.getProperties();\n-        String os = prop.getProperty(\"os.name\", \"\").toUpperCase();\n-        System.out.println(\"OS= \" + os);\n-        if (!os.equals(\"WINDOWS 2000\") && !os.equals(\"WINDOWS 2003\") &&\n-                !os.equals(\"WINDOWS XP\")) {\n-            System.out.println(\"This test is for Windows 2000\/2003\/XP only.\");\n+        if (Double.valueOf(System.getProperty(\"os.version\")) < 5.0) {\n+            System.out.println(\"This test is for Windows 2000 and above.\");\n@@ -70,1 +64,0 @@\n-\n@@ -89,1 +82,0 @@\n-\n@@ -93,3 +85,4 @@\n-        EventQueue.invokeAndWait(() -> {\n-            sp.add(p);\n-            frame.add(sp);\n+        try {\n+            EventQueue.invokeAndWait(() -> {\n+                sp.add(p);\n+                frame.add(sp);\n@@ -97,3 +90,4 @@\n-            frame.pack();\n-            frame.setLocationRelativeTo(null);\n-            frame.setVisible(true);\n+                frame.pack();\n+                frame.setSize(400, 400);\n+                frame.setLocationRelativeTo(null);\n+                frame.setVisible(true);\n@@ -101,5 +95,6 @@\n-            paneInsets = sp.getInsets();\n-            System.out.println(\"Insets: right = \" + paneInsets.right + \" bottom =  \" + paneInsets.bottom);\n-        });\n-        robot.wait(100);\n-        robot.waitForIdle();\n+                paneInsets = sp.getInsets();\n+                System.out.println(\"Insets: right = \" + paneInsets.right + \" bottom =  \" + paneInsets.bottom);\n+            });\n+\n+            robot.delay(100);\n+            robot.waitForIdle();\n@@ -107,6 +102,3 @@\n-        robot.mouseMove(sp.getLocationOnScreen().x + sp.getWidth() - paneInsets.right \/ 2,\n-                sp.getLocationOnScreen().y + sp.getHeight() \/ 2);\n-        testOneScrollbar(vScroll);\n-        robot.mouseMove(sp.getLocationOnScreen().x + sp.getWidth() \/ 2,\n-                sp.getLocationOnScreen().y + sp.getHeight() - paneInsets.bottom \/ 2);\n-        testOneScrollbar(hScroll);\n+            robot.mouseMove(sp.getLocationOnScreen().x + sp.getWidth() - paneInsets.right \/ 2,\n+                    sp.getLocationOnScreen().y + sp.getHeight() \/ 2);\n+            testOneScrollbar(vScroll);\n@@ -114,0 +106,13 @@\n+            robot.delay(100);\n+            robot.waitForIdle();\n+\n+            robot.mouseMove(sp.getLocationOnScreen().x + sp.getWidth() \/ 2,\n+                    sp.getLocationOnScreen().y + sp.getHeight() - paneInsets.bottom \/ 2);\n+            testOneScrollbar(hScroll);\n+        } finally{\n+            EventQueue.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+        }\n@@ -117,1 +122,1 @@\n-    public void testOneScrollbar(ScrollPaneAdjustable scroll) throws Exception{\n+    public void testOneScrollbar(ScrollPaneAdjustable scroll) throws Exception {\n@@ -123,0 +128,1 @@\n+            robot.waitForIdle();\n@@ -137,3 +143,3 @@\n-                    System.out.println(\" scroll.getValue() = \" + scroll.getValue());\n-                    System.out.println(\" scroll.getVisibleAmount() =  \" + scroll.getVisibleAmount());\n-                    System.out.println(\" scroll.getMaximum() = \" + scroll.getMaximum());\n+                    System.out.println(\"scroll.getValue() = \" + scroll.getValue());\n+                    System.out.println(\"scroll.getVisibleAmount() = \" + scroll.getVisibleAmount());\n+                    System.out.println(\"scroll.getMaximum() = \" + scroll.getMaximum());\n@@ -146,1 +152,1 @@\n-            \/\/top-left\n+            \/\/to top-left\n@@ -151,0 +157,1 @@\n+            robot.waitForIdle();\n@@ -172,6 +179,0 @@\n-        } finally {\n-            EventQueue.invokeAndWait(() -> {\n-                if (frame != null) {\n-                    frame.dispose();\n-                }\n-            });\n","filename":"test\/jdk\/java\/awt\/ScrollPane\/ScrollPaneWindowsTest.java","additions":39,"deletions":38,"binary":false,"changes":77,"status":"modified"}]}