{"files":[{"patch":"@@ -34,0 +34,1 @@\n+#include \"os_linux.hpp\"\n@@ -94,1 +95,1 @@\n-  if (memlimit >= _unlimited_memory) {\n+  if (memlimit >= os::Linux::physical_memory()) {\n@@ -102,1 +103,1 @@\n-      if (hier_memlimit >= _unlimited_memory) {\n+      if (hier_memlimit >= os::Linux::physical_memory()) {\n@@ -116,0 +117,1 @@\n+  julong host_total_memsw;\n@@ -118,1 +120,2 @@\n-  if (memswlimit >= _unlimited_memory) {\n+  host_total_memsw = os::Linux::host_swap() + os::Linux::physical_memory();\n+  if (memswlimit >= host_total_memsw) {\n@@ -126,1 +129,1 @@\n-      if (hier_memswlimit >= _unlimited_memory) {\n+      if (hier_memswlimit >= host_total_memsw) {\n@@ -161,1 +164,1 @@\n-  if (memsoftlimit >= _unlimited_memory) {\n+  if (memsoftlimit >= os::Linux::physical_memory()) {\n@@ -208,1 +211,1 @@\n-  if (kmem_limit >= _unlimited_memory) {\n+  if (kmem_limit >= os::Linux::physical_memory()) {\n","filename":"src\/hotspot\/os\/linux\/cgroupV1Subsystem_linux.cpp","additions":9,"deletions":6,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -107,2 +107,0 @@\n-    julong _unlimited_memory;\n-\n@@ -131,1 +129,0 @@\n-      _unlimited_memory = (LONG_MAX \/ os::vm_page_size()) * os::vm_page_size();\n","filename":"src\/hotspot\/os\/linux\/cgroupV1Subsystem_linux.hpp","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -158,0 +158,1 @@\n+julong os::Linux::_host_swap = 0;\n@@ -358,0 +359,1 @@\n+  struct sysinfo si;\n@@ -371,0 +373,3 @@\n+  sysinfo(&si);\n+  _host_swap= (julong)si.totalswap;\n+\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -57,0 +57,1 @@\n+  static julong _host_swap;\n@@ -61,1 +62,0 @@\n-  static julong physical_memory() { return _physical_memory; }\n@@ -137,0 +137,3 @@\n+  static julong physical_memory() { return _physical_memory; }\n+  static julong host_swap() { return _host_swap; }\n+\n","filename":"src\/hotspot\/os\/linux\/os_linux.hpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"}]}