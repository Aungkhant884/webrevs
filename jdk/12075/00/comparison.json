{"files":[{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2011, 2022, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2011, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -92,0 +92,27 @@\n+################################################################################\n+# Setup BASIC_JVM_LIBS that can be different depending on build\/target platform\n+################################################################################\n+AC_DEFUN([LIB_SETUP_JVM_LIBS],\n+[\n+  # Atomic library\n+  # 32-bit platforms needs fallback library for 8-byte atomic ops on Zero\n+  if HOTSPOT_CHECK_JVM_VARIANT(zero); then\n+    if test \"x$OPENJDK_$1_OS\" = xlinux &&\n+        (test \"x$OPENJDK_$1_CPU\" = xarm ||\n+         test \"x$OPENJDK_$1_CPU\" = xm68k ||\n+         test \"x$OPENJDK_$1_CPU\" = xmips ||\n+         test \"x$OPENJDK_$1_CPU\" = xmipsel ||\n+         test \"x$OPENJDK_$1_CPU\" = xppc ||\n+         test \"x$OPENJDK_$1_CPU\" = xsh ||\n+         test \"x$OPENJDK_$1_CPU\" = xriscv32); then\n+      BASIC_JVM_LIBS_$1=\"$BASIC_JVM_LIBS_$1 -latomic\"\n+    fi\n+  fi\n+\n+  # Because RISC-V only has word-sized atomics, it requires libatomic where\n+  # other common architectures do not, so link libatomic by default.\n+  if test \"x$OPENJDK_$1_OS\" = xlinux && test \"x$OPENJDK_$1_CPU\" = xriscv64; then\n+    BASIC_JVM_LIBS_$1=\"$BASIC_JVM_LIBS_$1 -latomic\"\n+  fi\n+])\n+\n@@ -112,0 +139,1 @@\n+  BASIC_JDKLIB_LIBS_TARGET=\"\"\n@@ -138,21 +166,0 @@\n-  # Atomic library\n-  # 32-bit platforms needs fallback library for 8-byte atomic ops on Zero\n-  if HOTSPOT_CHECK_JVM_VARIANT(zero); then\n-    if test \"x$OPENJDK_TARGET_OS\" = xlinux &&\n-        (test \"x$OPENJDK_TARGET_CPU\" = xarm ||\n-         test \"x$OPENJDK_TARGET_CPU\" = xm68k ||\n-         test \"x$OPENJDK_TARGET_CPU\" = xmips ||\n-         test \"x$OPENJDK_TARGET_CPU\" = xmipsel ||\n-         test \"x$OPENJDK_TARGET_CPU\" = xppc ||\n-         test \"x$OPENJDK_TARGET_CPU\" = xsh ||\n-         test \"x$OPENJDK_TARGET_CPU\" = xriscv32); then\n-      BASIC_JVM_LIBS=\"$BASIC_JVM_LIBS -latomic\"\n-    fi\n-  fi\n-\n-  # Because RISC-V only has word-sized atomics, it requires libatomic where\n-  # other common architectures do not.  So link libatomic by default.\n-  if test \"x$OPENJDK_TARGET_OS\" = xlinux && test \"x$OPENJDK_TARGET_CPU\" = xriscv64; then\n-    BASIC_JVM_LIBS=\"$BASIC_JVM_LIBS -latomic\"\n-  fi\n-\n@@ -169,0 +176,2 @@\n+  LIB_SETUP_JVM_LIBS(BUILD)\n+  LIB_SETUP_JVM_LIBS(TARGET)\n@@ -172,1 +181,1 @@\n-  JVM_LIBS=\"$BASIC_JVM_LIBS\"\n+  JVM_LIBS=\"$BASIC_JVM_LIBS $BASIC_JVM_LIBS_TARGET\"\n@@ -174,1 +183,1 @@\n-  OPENJDK_BUILD_JVM_LIBS=\"$BASIC_JVM_LIBS\"\n+  OPENJDK_BUILD_JVM_LIBS=\"$BASIC_JVM_LIBS $BASIC_JVM_LIBS_BUILD\"\n","filename":"make\/autoconf\/libraries.m4","additions":33,"deletions":24,"binary":false,"changes":57,"status":"modified"}]}