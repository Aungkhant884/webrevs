{"files":[{"patch":"@@ -891,1 +891,1 @@\n-    \/\/ Collect non-null JNI handles into an array for\n+    \/\/ Squash non-null JNI handles to front of _oop_handles for\n@@ -893,2 +893,0 @@\n-    ResourceMark rm;\n-    oop** ptrs = NEW_RESOURCE_ARRAY(oop*, _oop_handles.length());\n@@ -898,2 +896,5 @@\n-        ptrs[released++] = oop_ptr;\n-        NativeAccess<>::oop_store(oop_ptr, (oop) nullptr);\n+        \/\/ Satisfy OopHandles::release precondition that all\n+        \/\/ handles being released are null.\n+        NativeAccess<>::oop_store(oop_ptr, (oop) NULL);\n+\n+        _oop_handles.at_put(released++, oop_ptr);\n@@ -903,1 +904,1 @@\n-    object_handles()->release(ptrs, released);\n+    object_handles()->release(_oop_handles.adr_at(0), released);\n","filename":"src\/hotspot\/share\/jvmci\/jvmciRuntime.cpp","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"}]}