{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,8 @@\n-\/**\n+import java.awt.print.PrinterJob;\n+import java.lang.reflect.InvocationTargetException;\n+import javax.print.attribute.HashPrintRequestAttributeSet;\n+import javax.print.attribute.PrintRequestAttributeSet;\n+import javax.print.attribute.standard.DialogTypeSelection;\n+import jtreg.SkippedException;\n+\n+\/*\n@@ -27,0 +34,5 @@\n+ * @key printer\n+ * @library \/java\/awt\/regtesthelpers\n+ * @library \/test\/lib\n+ * @build PassFailJFrame\n+ * @build jtreg.SkippedException\n@@ -28,1 +40,1 @@\n- * @run main\/manual=yesno DialogType\n+ * @run main\/manual DialogType\n@@ -31,4 +43,0 @@\n-import java.awt.print.*;\n-import javax.print.attribute.*;\n-import javax.print.attribute.standard.*;\n-\n@@ -37,10 +45,11 @@\n-  static String[] instructions = {\n-     \"This test assumes and requires that you have a printer installed\",\n-     \"It verifies that the dialogs behave properly when using new API\",\n-     \"to optionally select a native dialog where one is present.\",\n-     \"Two dialogs are shown in succession.\",\n-     \"The test passes as long as no exceptions are thrown, *AND*\",\n-     \"if running on Windows only, the first dialog is a native windows\",\n-     \"control which differs in appearance from the second dialog\",\n-     \"\"\n-  };\n+    static String instruction = \"\"\"\n+            This test assumes and requires that you have a printer installed.\n+            It verifies that the dialogs behave properly when using new API\n+            to optionally select a native dialog where one is present.\n+            Two dialogs are shown in succession.\n+            The test passes as long as no exceptions are thrown, *AND*,\n+            if running on Windows only, the first dialog is a native windows\n+            control which differs in appearance from the second dialog.\n+            Note: You can either press 'ESCAPE' button or click on the 'Cancel'\n+            to close print dialog.\n+            \"\"\";\n@@ -48,1 +57,2 @@\n-  public static void main(String[] args) {\n+    public static void main(String[] args) throws InterruptedException,\n+            InvocationTargetException {\n@@ -50,3 +60,4 @@\n-      for (int i=0;i<instructions.length;i++) {\n-         System.out.println(instructions[i]);\n-      }\n+        if (PrinterJob.lookupPrintServices().length == 0) {\n+            throw new SkippedException(\"Printer not configured or available.\"\n+                    + \" Test cannot continue.\");\n+        }\n@@ -54,4 +65,9 @@\n-      PrinterJob job = PrinterJob.getPrinterJob();\n-      if (job.getPrintService() == null) {\n-         return;\n-      }\n+        PassFailJFrame passFailJFrame = new PassFailJFrame.Builder()\n+                .title(\"Test Instructions Frame\")\n+                .instructions(instruction)\n+                .testTimeOut(10)\n+                .rows(8)\n+                .columns(45)\n+                .build();\n+        PassFailJFrame.positionTestWindow(null,\n+                PassFailJFrame.Position.HORIZONTAL);\n@@ -59,14 +75,10 @@\n-      PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();\n-      aset.add(DialogTypeSelection.NATIVE);\n-      job.printDialog(aset);\n-      Attribute[] attrs = aset.toArray();\n-      for (int i=0;i<attrs.length;i++) {\n-          System.out.println(attrs[i]);\n-      }\n-      aset.add(DialogTypeSelection.COMMON);\n-      job.printDialog(aset);\n-      attrs = aset.toArray();\n-      for (int i=0;i<attrs.length;i++) {\n-          System.out.println(attrs[i]);\n-      }\n-   }\n+        PrinterJob job = PrinterJob.getPrinterJob();\n+        PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();\n+        aset.add(DialogTypeSelection.NATIVE);\n+        job.printDialog(aset);\n+\n+        aset.add(DialogTypeSelection.COMMON);\n+        job.printDialog(aset);\n+\n+        passFailJFrame.awaitAndCheck();\n+    }\n@@ -74,0 +86,1 @@\n+\n","filename":"test\/jdk\/java\/awt\/print\/Dialog\/DialogType.java","additions":52,"deletions":39,"binary":false,"changes":91,"status":"modified"}]}