{"files":[{"patch":"@@ -4,1 +4,1 @@\n- * Copyright (c) 1997, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -50,1 +50,0 @@\n-import java.awt.Cursor;\n@@ -84,0 +83,8 @@\n+    private void lock() {\n+        scrollPane = findScrollPane(scene.getView());\n+    }\n+\n+    private void unlock() {\n+        scrollPane = null;\n+    }\n+\n@@ -86,1 +93,1 @@\n-            if (isLocked())\n+            if (this.isLocked()) {\n@@ -88,1 +95,1 @@\n-\n+            }\n@@ -93,1 +100,2 @@\n-    public State mouseEntered(Widget widget, WidgetAction.WidgetMouseEvent event) {\n+    @Override\n+    public State mouseEntered(Widget widget, WidgetMouseEvent event) {\n@@ -95,1 +103,1 @@\n-        return State.REJECTED;\n+        return super.mouseEntered(widget, event);\n@@ -98,1 +106,2 @@\n-    public State mouseExited(Widget widget, WidgetAction.WidgetMouseEvent event) {\n+    @Override\n+    public State mouseExited(Widget widget, WidgetMouseEvent event) {\n@@ -100,1 +109,1 @@\n-        return State.REJECTED;\n+        return super.mouseExited(widget, event);\n@@ -109,4 +118,1 @@\n-        if (isLocked()) {\n-            return State.createLocked(widget, this);\n-        }\n-        if (enabled && (event.getModifiersEx() == modifiersEx)) {\n+        if (!this.isLocked() && active && enabled && (event.getModifiersEx() == modifiersEx)) {\n@@ -114,4 +120,3 @@\n-            scrollPane = findScrollPane(scene.getView());\n-            if (scrollPane != null) {\n-                rectangle = scene.getView().getVisibleRect();\n-                lastLocation = scene.convertSceneToView(event.getPoint());\n+            this.lock();\n+            if (this.isLocked()) {\n+                lastLocation = scene.convertSceneToView(widget.convertLocalToScene(event.getPoint()));\n@@ -119,2 +124,1 @@\n-                scene.getView().setCursor(Cursor.getPredefinedCursor(Cursor.MOVE_CURSOR));\n-                return State.createLocked(widget, this);\n+                rectangle = scene.getView().getVisibleRect();\n@@ -123,1 +127,1 @@\n-        return State.REJECTED;\n+        return super.mousePressed(widget, event);\n@@ -144,4 +148,2 @@\n-        scene.getView().setCursor(Cursor.getDefaultCursor());\n-        boolean state = pan(widget, event.getPoint());\n-        if (state) {\n-            scrollPane = null;\n+        if (this.isLocked() && scene == widget.getScene()) {\n+            this.unlock();\n@@ -149,1 +151,1 @@\n-        return state ? State.REJECTED : State.REJECTED;\n+        return super.mouseReleased(widget, event);\n@@ -154,6 +156,9 @@\n-        return pan(widget, event.getPoint()) ? State.createLocked(widget, this) : State.REJECTED;\n-    }\n-\n-    private boolean pan(Widget widget, Point newLocation) {\n-        if (!active || scrollPane == null || scene != widget.getScene()) {\n-            return false;\n+        if (active && this.isLocked() && scene == widget.getScene()) {\n+            Point newLocation = event.getPoint();\n+            newLocation = scene.convertSceneToView(widget.convertLocalToScene(newLocation));\n+            SwingUtilities.convertPointToScreen(newLocation, scene.getView());\n+            rectangle.x += lastLocation.x - newLocation.x;\n+            rectangle.y += lastLocation.y - newLocation.y;\n+            scene.getView().scrollRectToVisible(rectangle);\n+            lastLocation = newLocation;\n+            return State.createLocked(widget, this);\n@@ -161,10 +166,1 @@\n-        newLocation = scene.convertSceneToView(newLocation);\n-        SwingUtilities.convertPointToScreen(newLocation, scene.getView());\n-        JComponent view = scene.getView();\n-        int dx = lastLocation.x - newLocation.x;\n-        int dy = lastLocation.y - newLocation.y;\n-        rectangle.x += dx;\n-        rectangle.y += dy;\n-        view.scrollRectToVisible(rectangle);\n-        lastLocation = newLocation;\n-        return true;\n+        return State.REJECTED;\n","filename":"src\/utils\/IdealGraphVisualizer\/View\/src\/main\/java\/com\/sun\/hotspot\/igv\/view\/actions\/CustomizablePanAction.java","additions":36,"deletions":40,"binary":false,"changes":76,"status":"modified"}]}