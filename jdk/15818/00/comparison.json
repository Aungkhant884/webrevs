{"files":[{"patch":"@@ -161,0 +161,4 @@\n+     * <p>\n+     * If the left half of the image contains only pixels of the background\n+     * color, the glyph isn't rendered at all, such a font is ignored as if\n+     * it were a success.\n@@ -163,2 +167,3 @@\n-     * @return {@code true} if the hieroglyph is stretched correctly; or\n-     *         {@code false} if right half of the image contains only\n+     * @return {@code true} if the hieroglyph is stretched correctly, or\n+     *                      if there's no glyph in the image; or<br>\n+     *         {@code false} if the right half of the image contains only\n@@ -170,0 +175,27 @@\n+\n+        \/\/ Some fonts map the character to zero-width glyph.\n+        \/\/ Verify the glyph is rendered on the left side of the image.\n+        if (!verifyImage(image, 0, width \/ 2)) {\n+            \/\/ Ignore the broken font\n+            return true;\n+        }\n+\n+        \/\/ There's a glyph on the left side of the image,\n+        \/\/ Verify it is stretched, i.e. it is present on the right side\n+        return verifyImage(image, width \/ 2, width);\n+    }\n+\n+    \/**\n+     * Verifies a portion of the rendered image of the hieroglyph.\n+     * It returns {@code true} if it finds pixels of a different color\n+     * from the background.\n+     *\n+     * @param image the image to verify\n+     * @param startX the starting <i>x<\/i> coordinate\n+     * @param endX the limit for the <i>x<\/i> coordinate\n+     * @return {@code true} if there are non-background color pixels, and\n+     *         {@code false} otherwise\n+     *\/\n+    private static boolean verifyImage(final BufferedImage image,\n+                                       final int startX,\n+                                       final int endX) {\n@@ -171,1 +203,1 @@\n-        for (int x = width \/ 2; x < width; x++) {\n+        for (int x = startX; x < endX; x++) {\n@@ -174,1 +206,1 @@\n-                    \/\/ Any other color but background means the glyph is stretched\n+                    \/\/ Any other color but background means there's a glyph\n@@ -180,2 +212,1 @@\n-        \/\/ The right side of the image is filled with the background color only,\n-        \/\/ the glyph isn't stretched.\n+        \/\/ There's no glyph in the tested part of the image\n","filename":"test\/jdk\/java\/awt\/font\/FontScaling\/StretchedFontTest.java","additions":37,"deletions":6,"binary":false,"changes":43,"status":"modified"}]}