{"files":[{"patch":"@@ -29,1 +29,0 @@\n-import java.awt.BasicStroke;\n@@ -42,1 +41,0 @@\n-import javax.swing.JInternalFrame;\n@@ -152,1 +150,1 @@\n-                                 int w, int h, double scaleFactor, int strokeWidth);\n+                                 int w, int h, double scaleFactor);\n@@ -162,1 +160,0 @@\n-        int strokeWidth = 1;\n@@ -187,4 +184,0 @@\n-                strokeWidth = (c instanceof JInternalFrame) ?\n-                        clipRound(scaleFactor) : (int) Math.floor(scaleFactor);\n-                g2d.setStroke(new BasicStroke((float) strokeWidth));\n-\n@@ -203,1 +196,1 @@\n-        painter.paintUnscaledBorder(c, g, x, y, width, height, scaleFactor, strokeWidth);\n+        painter.paintUnscaledBorder(c, g, x, y, width, height, scaleFactor);\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/java\/swing\/SwingUtilities3.java","additions":2,"deletions":9,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -27,2 +27,1 @@\n-import com.sun.java.swing.SwingUtilities3;\n-\n+import java.awt.BasicStroke;\n@@ -30,0 +29,1 @@\n+import java.awt.Graphics2D;\n@@ -34,0 +34,1 @@\n+import com.sun.java.swing.SwingUtilities3;\n@@ -155,1 +156,6 @@\n-                                    int width, int height, double scaleFactor, int stkWidth) {\n+                                    int w, int h, double scaleFactor) {\n+        int stkWidth = (int) Math.floor(scaleFactor);\n+        if (g instanceof Graphics2D) {\n+            Graphics2D g2d = (Graphics2D) g;\n+            g2d.setStroke(new BasicStroke((float) stkWidth));\n+        }\n@@ -159,1 +165,1 @@\n-                          width, height, stkWidth);\n+                          w, h, stkWidth);\n@@ -162,1 +168,1 @@\n-                             width, height, stkWidth);\n+                             w, h, stkWidth);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/border\/EtchedBorder.java","additions":11,"deletions":5,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -150,1 +150,1 @@\n-                                     int width, int height, double scaleFactor, int strokeWidth) {\n+                                     int w, int h, double scaleFactor) {\n@@ -162,2 +162,2 @@\n-                outer = new RoundRectangle2D.Float(0, 0, width, height, offs, offs);\n-                inner = new RoundRectangle2D.Float(offs, offs, width - size, height - size, arc, arc);\n+                outer = new RoundRectangle2D.Float(0, 0, w, h, offs, offs);\n+                inner = new RoundRectangle2D.Float(offs, offs, w - size, h - size, arc, arc);\n@@ -166,2 +166,2 @@\n-                outer = new Rectangle2D.Float(0, 0, width, height);\n-                inner = new Rectangle2D.Float(offs, offs, width - size, height - size);\n+                outer = new Rectangle2D.Float(0, 0, w, h);\n+                inner = new Rectangle2D.Float(offs, offs, w - size, h - size);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/border\/LineBorder.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+import java.awt.BasicStroke;\n@@ -33,0 +34,1 @@\n+import java.awt.Graphics2D;\n@@ -65,0 +67,2 @@\n+import static sun.java2d.pipe.Region.clipRound;\n+\n@@ -253,1 +257,1 @@\n-                                         int width, int height, double scaleFactor, int strokeWidth) {\n+                                         int width, int height, double scaleFactor) {\n@@ -281,3 +285,4 @@\n-                int offset = (((scaleFactor - strokeWidth) >= 0) && ((strokeWidth % 2) != 0)) ? 1 : 0;\n-                int loc1 = thickness % 2 == 0 ? midPoint + strokeWidth \/ 2 - strokeWidth : midPoint;\n-                int loc2 = thickness % 2 == 0 ? midPoint + strokeWidth \/ 2 : midPoint + strokeWidth;\n+                int stkWidth = clipRound(scaleFactor);\n+                int offset = (((scaleFactor - stkWidth) >= 0) && ((stkWidth % 2) != 0)) ? 1 : 0;\n+                int loc1 = thickness % 2 == 0 ? midPoint + stkWidth \/ 2 - stkWidth : midPoint;\n+                int loc2 = thickness % 2 == 0 ? midPoint + stkWidth \/ 2 : midPoint + stkWidth;\n@@ -287,0 +292,5 @@\n+                if (g instanceof Graphics2D) {\n+                    Graphics2D g2d = (Graphics2D) g;\n+                    g2d.setStroke(new BasicStroke((float) stkWidth));\n+                }\n+\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/metal\/MetalBorders.java","additions":14,"deletions":4,"binary":false,"changes":18,"status":"modified"}]}