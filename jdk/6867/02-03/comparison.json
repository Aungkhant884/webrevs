{"files":[{"patch":"@@ -2960,1 +2960,1 @@\n-void G1CollectedHeap::clear_region_bitmap(HeapRegion* hr) {\n+void G1CollectedHeap::clear_region_in_prev_bitmap(HeapRegion* hr) {\n@@ -2971,1 +2971,1 @@\n-    clear_region_bitmap(hr);\n+    clear_region_in_prev_bitmap(hr);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -625,1 +625,1 @@\n-  void clear_region_bitmap(HeapRegion* hr);\n+  void clear_region_in_prev_bitmap(HeapRegion* hr);\n@@ -1257,1 +1257,1 @@\n-  \/\/ Mark the live object that failed evacuation in the correct bitmap(s).\n+  \/\/ Mark the live object that failed evacuation in the prev bitmap.\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -79,1 +79,1 @@\n-    \/\/ Zapping clears the bitmap, make sure it didn't clear to much.\n+    \/\/ Zapping clears the bitmap, make sure it didn't clear too much.\n","filename":"src\/hotspot\/share\/gc\/g1\/g1EvacFailure.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -69,1 +69,1 @@\n-    \/\/ Object not moving\n+    \/\/ Object not moving, but clear the mark to allow reuse of the bitmap.\n@@ -83,0 +83,2 @@\n+  \/\/ Clear the mark for the compacted object to allow reuse of the\n+  \/\/ bitmap without an additional clearing step.\n@@ -95,1 +97,4 @@\n-    \/\/ prev_bitmap for evacuation failures.\n+    \/\/ prev_bitmap for evacuation failures. Testing showed that it\n+    \/\/ was better overall to clear bit by bit, compared to clearing\n+    \/\/ the whole region at the end. This difference was clearly seen\n+    \/\/ for regions with few marks.\n","filename":"src\/hotspot\/share\/gc\/g1\/g1FullGCCompactTask.cpp","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -1277,1 +1277,1 @@\n-        _g1h->clear_region_bitmap(hr);\n+        _g1h->clear_region_in_prev_bitmap(hr);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1RemSet.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}