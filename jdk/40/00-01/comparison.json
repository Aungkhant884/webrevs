{"files":[{"patch":"@@ -142,1 +142,1 @@\n-#define DEFAULT_MAX_ADDRESS_BIT 47\n+static const size_t DEFAULT_MAX_ADDRESS_BIT = 47;\n@@ -144,1 +144,1 @@\n-#define MINIMUM_MAX_ADDRESS_BIT 36\n+static const size_t MINIMUM_MAX_ADDRESS_BIT = 36;\n@@ -150,1 +150,1 @@\n-  for (int i = DEFAULT_MAX_ADDRESS_BIT; i > MINIMUM_MAX_ADDRESS_BIT && max_address_bit == 0; --i) {\n+  for (size_t i = DEFAULT_MAX_ADDRESS_BIT; i > MINIMUM_MAX_ADDRESS_BIT; --i) {\n@@ -163,1 +163,1 @@\n-      log_warning(gc)(\"Received %s while probing the address space for the highest valid bit\", os::errno_name(errno));\n+      log_warning_p(gc)(\"Received %s while probing the address space for the highest valid bit\", os::errno_name(errno));\n@@ -170,0 +170,3 @@\n+    if (result_addr != MAP_FAILED) {\n+      munmap(result_addr, page_size);\n+    }\n@@ -173,3 +176,1 @@\n-    }\n-    if (result_addr != MAP_FAILED) {\n-      munmap(result_addr, page_size);\n+      break;\n@@ -198,2 +199,2 @@\n-  const static size_t valid_max_address_bit = probe_valid_max_address_bit();\n-  const size_t max_address_offset_bits = valid_max_address_bit - 3;\n+  const static size_t valid_max_address_offset_bits = probe_valid_max_address_bit() + 1;\n+  const size_t max_address_offset_bits = valid_max_address_offset_bits - 3;\n","filename":"src\/hotspot\/cpu\/aarch64\/gc\/z\/zGlobals_aarch64.cpp","additions":10,"deletions":9,"binary":false,"changes":19,"status":"modified"}]}