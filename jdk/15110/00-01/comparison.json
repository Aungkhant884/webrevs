{"files":[{"patch":"@@ -2814,7 +2814,0 @@\n-\n-#if INCLUDE_JVMTI\n-  if (too_many_traps(Deoptimization::Reason_intrinsic)) {\n-    return false;\n-  }\n-#endif \/\/INCLUDE_JVMTI\n-\n@@ -2831,14 +2824,0 @@\n-  Node* test = nullptr;\n-  if (LibraryCallKit::klass_needs_init_guard(kls)) {\n-    \/\/ Note:  The argument might still be an illegal value like\n-    \/\/ Serializable.class or Object[].class.   The runtime will handle it.\n-    \/\/ But we must make an explicit check for initialization.\n-    Node* insp = basic_plus_adr(kls, in_bytes(InstanceKlass::init_state_offset()));\n-    \/\/ Use T_BOOLEAN for InstanceKlass::_init_state so the compiler\n-    \/\/ can generate code to load it as unsigned byte.\n-    Node* inst = make_load(nullptr, insp, TypeInt::UBYTE, T_BOOLEAN, MemNode::unordered);\n-    Node* bits = intcon(InstanceKlass::fully_initialized);\n-    test = _gvn.transform(new SubINode(inst, bits));\n-    \/\/ The 'test' is non-zero if we need to take a slow path.\n-  }\n-\n@@ -2847,0 +2826,3 @@\n+    if (too_many_traps(Deoptimization::Reason_intrinsic)) {\n+      return false;\n+    }\n@@ -2865,0 +2847,14 @@\n+  Node* test = nullptr;\n+  if (LibraryCallKit::klass_needs_init_guard(kls)) {\n+    \/\/ Note:  The argument might still be an illegal value like\n+    \/\/ Serializable.class or Object[].class.   The runtime will handle it.\n+    \/\/ But we must make an explicit check for initialization.\n+    Node* insp = basic_plus_adr(kls, in_bytes(InstanceKlass::init_state_offset()));\n+    \/\/ Use T_BOOLEAN for InstanceKlass::_init_state so the compiler\n+    \/\/ can generate code to load it as unsigned byte.\n+    Node* inst = make_load(nullptr, insp, TypeInt::UBYTE, T_BOOLEAN, MemNode::unordered);\n+    Node* bits = intcon(InstanceKlass::fully_initialized);\n+    test = _gvn.transform(new SubINode(inst, bits));\n+    \/\/ The 'test' is non-zero if we need to take a slow path.\n+  }\n+\n","filename":"src\/hotspot\/share\/opto\/library_call.cpp","additions":17,"deletions":21,"binary":false,"changes":38,"status":"modified"}]}