{"files":[{"patch":"@@ -1263,1 +1263,1 @@\n-        if (coder == UTF16)\n+        if (coder == UTF16) {\n@@ -1265,5 +1265,0 @@\n-\n-        int len = val.length;\n-        int dp = StringCoding.countPositives(val, 0, len);\n-        if (dp == len) {\n-            return Arrays.copyOf(val, len);\n@@ -1271,4 +1266,8 @@\n-\n-        int i = dp;\n-        byte[] dst = new byte[dp + ((len - dp) << 1)];\n-        if (dp > 0)\n+        final int len = val.length;\n+        int dp = StringCoding.countPositives(val, 0, len);\n+        byte[] dst;\n+        if (dp > 0) {\n+            if (dp == len) {\n+                return Arrays.copyOf(val, len);\n+            }\n+            dst = new byte[dp + ((len - dp) << 1)];\n@@ -1276,2 +1275,5 @@\n-        while (i < len) {\n-            byte c = val[i++];\n+        } else {\n+            dst = new byte[len << 1];\n+        }\n+        for (int i = dp; i < len; i++) {\n+            byte c = val[i];\n@@ -1285,1 +1287,1 @@\n-        if (dp == dst.length)\n+        if (dp == dst.length) {\n@@ -1287,0 +1289,1 @@\n+        }\n","filename":"src\/java.base\/share\/classes\/java\/lang\/String.java","additions":16,"deletions":13,"binary":false,"changes":29,"status":"modified"}]}