{"files":[{"patch":"@@ -1263,1 +1263,1 @@\n-        if (coder == UTF16) {\n+        if (coder == UTF16)\n@@ -1265,15 +1265,7 @@\n-        }\n-        final int len = val.length;\n-        int dp = StringCoding.countPositives(val, 0, len);\n-        byte[] dst;\n-        if (dp > 0) {\n-            if (dp == len) {\n-                return Arrays.copyOf(val, len);\n-            }\n-            dst = new byte[dp + ((len - dp) << 1)];\n-            System.arraycopy(val, 0, dst, 0, dp);\n-        } else {\n-            dst = new byte[len << 1];\n-        }\n-        for (int i = dp; i < len; i++) {\n-            byte c = val[i];\n+\n+        if (!StringCoding.hasNegatives(val, 0, val.length))\n+            return Arrays.copyOf(val, val.length);\n+\n+        int dp = 0;\n+        byte[] dst = new byte[val.length << 1];\n+        for (byte c : val) {\n@@ -1287,1 +1279,1 @@\n-        if (dp == dst.length) {\n+        if (dp == dst.length)\n@@ -1289,1 +1281,0 @@\n-        }\n","filename":"src\/java.base\/share\/classes\/java\/lang\/String.java","additions":9,"deletions":18,"binary":false,"changes":27,"status":"modified"}]}