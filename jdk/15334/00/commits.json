[{"commit":{"message":"gitattributes: make diffs easier to read\n\nGit supports special hunk headers for several languages in diff output,\nwhich make it easier to read diffs of files in that language, generated\nby Git (git-diff, git-show, `git log -p`, etc).  For details, see\n`git help gitattributes` or the online documentation.[1]\n\nAdd entries to the root .gitattributes file to support showing the hunk\nheaders for Java, C, C++, Markdown, Shell script, HTML, and CSS.  This\nmakes it easier to read diffs generated by Git.\n\nAs an example, for j.l.Integer, before, the hunk header just shows the\nclass name, found using the generic hunk header regex:\n\n    $ git show --format='' 71ca85f5a6741a2db55a529192564f94b269fbd9 -- src\/java.base\/share\/classes\/java\/lang\/Integer.java\n    diff --git a\/src\/java.base\/share\/classes\/java\/lang\/Integer.java b\/src\/java.base\/share\/classes\/java\/lang\/Integer.java\n    index 7d200e7edf5..9ec9d3941f8 100644\n    --- a\/src\/java.base\/share\/classes\/java\/lang\/Integer.java\n    +++ b\/src\/java.base\/share\/classes\/java\/lang\/Integer.java\n    @@ -517,13 +517,9 @@ public final class Integer extends Number\n             }\n\n             \/\/ We know there are at most two digits left at this point.\n    -        q = i \/ 10;\n    -        r = (q * 10) - i;\n    -        buf[--charPos] = (byte)('0' + r);\n    -\n    -        \/\/ Whatever left is the remaining digit.\n    -        if (q < 0) {\n    -            buf[--charPos] = (byte)('0' - q);\n    +        buf[--charPos] = DigitOnes[-i];\n    +        if (i < -9) {\n    +            buf[--charPos] = DigitTens[-i];\n             }\n\n             if (negative) {\n\nAfter, the hunk shows the method edited by the commit, derived using the\nregex specific to Java:\n\n    $ git show --format='' 71ca85f5a6741a2db55a529192564f94b269fbd9 -- src\/java.base\/share\/classes\/java\/lang\/Integer.java\n    diff --git a\/src\/java.base\/share\/classes\/java\/lang\/Integer.java b\/src\/java.base\/share\/classes\/java\/lang\/Integer.java\n    index 7d200e7edf5..9ec9d3941f8 100644\n    --- a\/src\/java.base\/share\/classes\/java\/lang\/Integer.java\n    +++ b\/src\/java.base\/share\/classes\/java\/lang\/Integer.java\n    @@ -517,13 +517,9 @@ static int getChars(int i, int index, byte[] buf) {\n             }\n\n             \/\/ We know there are at most two digits left at this point.\n    -        q = i \/ 10;\n    -        r = (q * 10) - i;\n    -        buf[--charPos] = (byte)('0' + r);\n    -\n    -        \/\/ Whatever left is the remaining digit.\n    -        if (q < 0) {\n    -            buf[--charPos] = (byte)('0' - q);\n    +        buf[--charPos] = DigitOnes[-i];\n    +        if (i < -9) {\n    +            buf[--charPos] = DigitTens[-i];\n             }\n\n             if (negative) {\n\n[1] https:\/\/git-scm.com\/docs\/gitattributes"},"files":[{"filename":".gitattributes"}],"sha":"94e370fe0e8c30909635b7cb3a9abcbdc2aab4d8"}]