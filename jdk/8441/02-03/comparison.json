{"files":[{"patch":"@@ -290,1 +290,1 @@\n-    \/\/ when WM_POSCHANGING msg received\n+    \/\/ when WM_WINDOWPOSCHANGING msg received\n@@ -294,4 +294,0 @@\n-            if (trayIconList == null || trayIconList.length == 0) {\n-                \/\/ no tray icons present so do nothing\n-                return;\n-            }\n@@ -304,1 +300,0 @@\n-\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/SystemTray.java","additions":1,"deletions":6,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -35,0 +35,9 @@\n+\n+import java.awt.AWTException;\n+import java.awt.Color;\n+import java.awt.Font;\n+import java.awt.Graphics2D;\n+import java.awt.Image;\n+import java.awt.RenderingHints;\n+import java.awt.SystemTray;\n+import java.awt.TrayIcon;\n@@ -38,2 +47,0 @@\n-import java.awt.*;\n-import java.awt.image.MultiResolutionImage;\n@@ -45,0 +52,3 @@\n+    private static SystemTray tray;\n+    private static TrayIcon icon;\n+\n@@ -58,0 +68,2 @@\n+    private static Font font = new Font(\"Dialog\", Font.BOLD, 12);\n+\n@@ -60,8 +72,0 @@\n-        PassFailJFrame passFailJFrame = new PassFailJFrame(\"TrayIcon \" +\n-                \"Test Instructions\", INSTRUCTIONS, 8, 18, 85);\n-        createAndShowGUI();\n-        passFailJFrame.awaitAndCheck();\n-\n-    }\n-\n-    private static void createAndShowGUI() {\n@@ -74,0 +78,9 @@\n+        PassFailJFrame passFailJFrame = new PassFailJFrame(\"TrayIcon \" +\n+                \"Test Instructions\", INSTRUCTIONS, 8, 18, 85);\n+        createAndShowGUI();\n+        try {\n+            passFailJFrame.awaitAndCheck();\n+        } finally {\n+            tray.remove(icon);\n+        }\n+    }\n@@ -75,0 +88,1 @@\n+    private static void createAndShowGUI() {\n@@ -77,1 +91,1 @@\n-        for (int size = 16; size <= 34; size++) {\n+        for (int size = 16; size <= 48; size += 4) {\n@@ -80,1 +94,1 @@\n-        MultiResolutionImage multiResolutionImage =\n+        Image mRImage =\n@@ -83,7 +97,2 @@\n-        SystemTray tray = SystemTray.getSystemTray();\n-        TrayIcon icon = new TrayIcon((Image) multiResolutionImage);\n-\n-        PopupMenu popup = new PopupMenu();\n-        MenuItem exitItem = new MenuItem(\"Exit\");\n-        popup.add(exitItem);\n-        icon.setPopupMenu(popup);\n+        tray = SystemTray.getSystemTray();\n+        icon = new TrayIcon(mRImage);\n@@ -96,6 +105,0 @@\n-\n-        exitItem.addActionListener(e -> {\n-            tray.remove(icon);\n-            System.exit(0);\n-        });\n-\n@@ -104,1 +107,1 @@\n-    \/\/ to create different size icon for MRI\n+    \/\/ to create different size icons for MRI\n@@ -109,1 +112,0 @@\n-\n@@ -111,1 +113,1 @@\n-        g.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,\n+        ((Graphics2D) g).setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,\n@@ -115,1 +117,1 @@\n-        g.setFont(new Font(\"Dialog\", Font.BOLD, 12));\n+        g.setFont(font);\n@@ -126,1 +128,2 @@\n-}\n\\ No newline at end of file\n+}\n+\n","filename":"test\/jdk\/java\/awt\/TrayIcon\/TrayIconScalingTest.java","additions":33,"deletions":30,"binary":false,"changes":63,"status":"modified"}]}