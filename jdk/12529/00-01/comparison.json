{"files":[{"patch":"@@ -392,0 +392,1 @@\n+  HeapWord* dense_prefix_top = nullptr;\n@@ -398,0 +399,1 @@\n+      dense_prefix_top = compaction_top(current);\n@@ -400,1 +402,1 @@\n-      G1SerialRePrepareClosure re_prepare(cp, current);\n+      G1SerialRePrepareClosure re_prepare(cp, current, dense_prefix_top);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1FullCollector.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -123,0 +123,1 @@\n+  HeapWord* _dense_prefix_top;\n@@ -126,1 +127,1 @@\n-  G1SerialRePrepareClosure(G1FullGCCompactionPoint* hrcp, HeapRegion* hr) :\n+  G1SerialRePrepareClosure(G1FullGCCompactionPoint* hrcp, HeapRegion* hr, HeapWord* dense_prefix_top) :\n@@ -129,1 +130,1 @@\n-    _bottom_index(hrcp->regions()->first()->hrm_index()) { }\n+    _dense_prefix_top(dense_prefix_top) { }\n","filename":"src\/hotspot\/share\/gc\/g1\/g1FullGCPrepareTask.hpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -114,2 +114,0 @@\n-    G1CollectedHeap* g1h = G1CollectedHeap::heap();\n-    HeapRegion* target_hr = g1h->heap_region_containing(obj->forwardee());\n@@ -118,1 +116,1 @@\n-    if (target_hr->hrm_index() <= _bottom_index) {\n+    if (cast_from_oop<HeapWord*>(obj->forwardee()) < _dense_prefix_top) {\n","filename":"src\/hotspot\/share\/gc\/g1\/g1FullGCPrepareTask.inline.hpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"}]}