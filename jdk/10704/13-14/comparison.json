{"files":[{"patch":"@@ -702,1 +702,1 @@\n-            \/\/ The method is \"manually split\" based on the heuristics that 70 ModuleDescriptors are smaller than 64kb\n+            \/\/ The method is \"manually split\" based on the heuristics that 90 ModuleDescriptors are smaller than 64kb\n@@ -708,0 +708,9 @@\n+                    if (helperMethodCount > 1) {\n+                        \/\/ call previous helper method (if it exists)\n+                        mv.visitVarInsn(ALOAD, 0);\n+                        mv.visitVarInsn(ALOAD, MD_VAR);\n+                        mv.visitMethodInsn(INVOKEVIRTUAL, this.className,\n+                                helperMethodNamePrefix + (helperMethodCount-2),\n+                                \"(\" + MODULE_DESCRIPTOR_ARRAY_SIGNATURE + \")V\",\n+                                false);\n+                    }\n@@ -731,1 +740,0 @@\n-\n@@ -734,0 +742,9 @@\n+            if (helperMethodCount > 1) {\n+                \/\/ call previous helper method\n+                mv.visitVarInsn(ALOAD, 0);\n+                mv.visitVarInsn(ALOAD, MD_VAR);\n+                mv.visitMethodInsn(INVOKEVIRTUAL, this.className,\n+                        helperMethodNamePrefix + (helperMethodCount-2),\n+                        \"(\" + MODULE_DESCRIPTOR_ARRAY_SIGNATURE + \")V\",\n+                        false);\n+            }\n@@ -749,9 +766,7 @@\n-            for (int index = 0; index < helperMethodCount; index++) {\n-                \/\/ create call to helperMethod{i}\n-                mv.visitVarInsn(ALOAD, 0);\n-                mv.visitVarInsn(ALOAD, MD_VAR);\n-                mv.visitMethodInsn(INVOKEVIRTUAL, this.className,\n-                        helperMethodNamePrefix + index,\n-                        \"(\" + MODULE_DESCRIPTOR_ARRAY_SIGNATURE + \")V\",\n-                        false);\n-            }\n+            \/\/ create call to helperMethod{i}\n+            mv.visitVarInsn(ALOAD, 0);\n+            mv.visitVarInsn(ALOAD, MD_VAR);\n+            mv.visitMethodInsn(INVOKEVIRTUAL, this.className,\n+                    helperMethodNamePrefix + (helperMethodCount-1),\n+                    \"(\" + MODULE_DESCRIPTOR_ARRAY_SIGNATURE + \")V\",\n+                    false);\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jlink\/internal\/plugins\/SystemModulesPlugin.java","additions":26,"deletions":11,"binary":false,"changes":37,"status":"modified"}]}