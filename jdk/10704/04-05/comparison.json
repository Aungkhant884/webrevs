{"files":[{"patch":"@@ -27,0 +27,1 @@\n+import java.util.Arrays;\n@@ -28,0 +29,1 @@\n+import java.util.spi.ToolProvider;\n@@ -45,0 +47,18 @@\n+    private static final ToolProvider JAVAC_TOOL = ToolProvider.findFirst(\"javac\")\n+                                                               .orElseThrow(() -> new RuntimeException(\"javac tool not found\"));\n+    private static final ToolProvider JLINK_TOOL = ToolProvider.findFirst(\"jlink\")\n+                                                               .orElseThrow(() -> new RuntimeException(\"jlink tool not found\"));\n+\n+    static void report(String command, String[] args) {\n+        System.out.println(command + \" \" + String.join(\" \", Arrays.asList(args)));\n+    }\n+\n+    static void javac(String[] args) {\n+        report(\"javac\", args);\n+        JAVAC_TOOL.run(System.out, System.err, args);\n+    }\n+\n+    static void jlink(String[] args) {\n+        report(\"jlink\", args);\n+        JLINK_TOOL.run(System.out, System.err, args);\n+    }\n@@ -49,1 +69,1 @@\n-        StringJoiner mainModuleInfoContent = new StringJoiner(\"; requires \", \"module mainModules { requires \", \"}\");\n+        StringJoiner mainModuleInfoContent = new StringJoiner(\";\\n  requires \", \"module bug8240567x {\\n  requires \", \"\\n;}\");\n@@ -52,2 +72,2 @@\n-        for (int i = 0; i<100; i++) {\n-            String name = \"module\" + i;\n+        for (int i = 0; i<200; i++) {\n+            String name = \"module\" + i + \"x\";\n@@ -61,1 +81,1 @@\n-        Path mainModulePath = src.resolve(\"bug8240567\");\n+        Path mainModulePath = src.resolve(\"bug8240567x\");\n@@ -65,0 +85,15 @@\n+\n+        String out = src.resolve(\"out\").toString();\n+\n+        javac(new String[] {\n+                \"-d\", out,\n+                \"--module-source-path\", src.toString(),\n+                \"--module\", \"bug8240567x\"\n+        });\n+\n+        jlink(new String[] {\n+                \"--output\",  src.resolve(\"out-jlink\").toString(),\n+                \"--module-path\",  out,\n+                \"--add-modules\", \"bug8240567x\"\n+        });\n+\n","filename":"test\/jdk\/tools\/jlink\/JLink100Modules.java","additions":39,"deletions":4,"binary":false,"changes":43,"status":"modified"}]}