{"files":[{"patch":"@@ -417,3 +417,2 @@\n-      ttyLocker ttyl;\n-      tty->print_cr(\"Warning: blackhole compile command only works for methods with void type: %s\",\n-                    method->name_and_sig_as_C_string());\n+      warning(\"blackhole compile command only works for methods with void type: %s\",\n+              method->name_and_sig_as_C_string());\n","filename":"src\/hotspot\/share\/compiler\/compilerOracle.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -51,10 +51,28 @@\n-        ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(\n-            \"-Xmx128m\",\n-            \"-XX:CompileCommand=quiet\",\n-            \"-XX:CompileCommand=blackhole,compiler\/blackhole\/BlackholeTarget.bh_*\",\n-            \"compiler.blackhole.BlackholeNonVoidWarning\",\n-            \"run\"\n-        );\n-        OutputAnalyzer output = new OutputAnalyzer(pb.start());\n-        output.shouldHaveExitValue(0);\n-        output.shouldContain(\"blackhole compile command only works for methods with void type: compiler.blackhole.BlackholeTarget.bh_sr_int(I)I\");\n+       final String msg = \"blackhole compile command only works for methods with void type: compiler.blackhole.BlackholeTarget.bh_sr_int(I)I\";\n+\n+       {\n+           ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(\n+               \"-Xmx128m\",\n+               \"-XX:CompileCommand=quiet\",\n+               \"-XX:CompileCommand=blackhole,compiler\/blackhole\/BlackholeTarget.bh_*\",\n+               \"compiler.blackhole.BlackholeNonVoidWarning\",\n+               \"run\"\n+           );\n+           OutputAnalyzer output = new OutputAnalyzer(pb.start());\n+           output.shouldHaveExitValue(0);\n+           output.shouldContain(msg);\n+       }\n+\n+       {\n+           ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(\n+               \"-Xmx128m\",\n+               \"-XX:-PrintWarnings\",\n+               \"-XX:CompileCommand=quiet\",\n+               \"-XX:CompileCommand=blackhole,compiler\/blackhole\/BlackholeTarget.bh_*\",\n+               \"compiler.blackhole.BlackholeNonVoidWarning\",\n+               \"run\"\n+           );\n+           OutputAnalyzer output = new OutputAnalyzer(pb.start());\n+           output.shouldHaveExitValue(0);\n+           output.shouldNotContain(msg);\n+       }\n","filename":"test\/hotspot\/jtreg\/compiler\/blackhole\/BlackholeNonVoidWarning.java","additions":28,"deletions":10,"binary":false,"changes":38,"status":"modified"}]}