{"files":[{"patch":"@@ -118,3 +118,2 @@\n-  \/\/ We must make sure that the offset table entry we use is valid.  If\n-  \/\/ \"addr\" is past the end, start at the last valid index.\n-  index = MIN2(index, _next_offset_index - 1);\n+  \/\/ We must make sure that the offset table entry we use is valid.\n+  assert(index < _next_offset_index, \"Precondition\");\n","filename":"src\/hotspot\/share\/gc\/g1\/g1BlockOffsetTable.inline.hpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -737,55 +737,0 @@\n-  HeapWord* the_end = end();\n-  \/\/ Do some extra BOT consistency checking for addresses in the\n-  \/\/ range [top, end). BOT look-ups in this range should yield\n-  \/\/ top. No point in doing that if top == end (there's nothing there).\n-  if (p < the_end) {\n-    \/\/ Look up top\n-    HeapWord* addr_1 = p;\n-    HeapWord* b_start_1 = block_start_const(addr_1);\n-    if (b_start_1 != p) {\n-      log_error(gc, verify)(\"BOT look up for top: \" PTR_FORMAT \" \"\n-                            \" yielded \" PTR_FORMAT \", expecting \" PTR_FORMAT,\n-                            p2i(addr_1), p2i(b_start_1), p2i(p));\n-      *failures = true;\n-      return;\n-    }\n-\n-    \/\/ Look up top + 1\n-    HeapWord* addr_2 = p + 1;\n-    if (addr_2 < the_end) {\n-      HeapWord* b_start_2 = block_start_const(addr_2);\n-      if (b_start_2 != p) {\n-        log_error(gc, verify)(\"BOT look up for top + 1: \" PTR_FORMAT \" \"\n-                              \" yielded \" PTR_FORMAT \", expecting \" PTR_FORMAT,\n-                              p2i(addr_2), p2i(b_start_2), p2i(p));\n-        *failures = true;\n-        return;\n-      }\n-    }\n-\n-    \/\/ Look up an address between top and end\n-    size_t diff = pointer_delta(the_end, p) \/ 2;\n-    HeapWord* addr_3 = p + diff;\n-    if (addr_3 < the_end) {\n-      HeapWord* b_start_3 = block_start_const(addr_3);\n-      if (b_start_3 != p) {\n-        log_error(gc, verify)(\"BOT look up for top + diff: \" PTR_FORMAT \" \"\n-                              \" yielded \" PTR_FORMAT \", expecting \" PTR_FORMAT,\n-                              p2i(addr_3), p2i(b_start_3), p2i(p));\n-        *failures = true;\n-        return;\n-      }\n-    }\n-\n-    \/\/ Look up end - 1\n-    HeapWord* addr_4 = the_end - 1;\n-    HeapWord* b_start_4 = block_start_const(addr_4);\n-    if (b_start_4 != p) {\n-      log_error(gc, verify)(\"BOT look up for end - 1: \" PTR_FORMAT \" \"\n-                            \" yielded \" PTR_FORMAT \", expecting \" PTR_FORMAT,\n-                            p2i(addr_4), p2i(b_start_4), p2i(p));\n-      *failures = true;\n-      return;\n-    }\n-  }\n-\n","filename":"src\/hotspot\/share\/gc\/g1\/heapRegion.cpp","additions":0,"deletions":55,"binary":false,"changes":55,"status":"modified"}]}