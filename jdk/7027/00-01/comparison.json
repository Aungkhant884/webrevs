{"files":[{"patch":"@@ -42,0 +42,4 @@\n+# Get an absolute path to this script, since that determines the top-level directory.\n+this_script_dir=`dirname $0`\n+this_script_dir=`cd $this_script_dir > \/dev\/null && pwd`\n+\n@@ -61,1 +65,20 @@\n-case \"$1\" in\n+vcs=\"$1\"\n+\n+if [ -z \"$vcs\" ] ; then\n+  git_found=false\n+  hg_found=false\n+\n+  [ -d \"${this_script_dir}\/..\/..\/.git\" ] && git_found=true\n+  [ -d \"${this_script_dir}\/..\/..\/.hg\" ] && hg_found=true\n+\n+  if [ \"$git_found\" == \"true\" ] && [ \"$hg_found\" == \"false\" ] ; then\n+    vcs=\"git\"\n+  elif [ \"$hg_found\" == \"true\" ] && [ \"$git_found\" == \"false\" ] ; then\n+    vcs=\"hg\"\n+  else\n+    echo \"Error: could not auto-detect version control system\"\n+    vcs=\"\"\n+  fi\n+fi\n+\n+case \"$vcs\" in\n","filename":"make\/scripts\/update_copyright_year.sh","additions":24,"deletions":1,"binary":false,"changes":25,"status":"modified"}]}