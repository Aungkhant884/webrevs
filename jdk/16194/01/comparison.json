{"files":[{"patch":"@@ -109,1 +109,1 @@\n-\n+     *\n@@ -231,3 +231,0 @@\n-        \/\/ notify JVMTI before mount\n-        notifyJvmtiMount(\/*hide*\/true);\n-\n@@ -306,1 +303,0 @@\n-    @ChangesCurrentThread\n@@ -351,0 +347,3 @@\n+        \/\/ notify JVMTI before mount\n+        notifyJvmtiMount(\/*hide*\/true);\n+\n@@ -387,0 +386,3 @@\n+\n+        \/\/ notify JVMTI after unmount\n+        notifyJvmtiUnmount(\/*hide*\/false);\n@@ -451,0 +453,2 @@\n+\n+        \/\/ LockSupport.park\/parkNanos\n@@ -455,3 +459,0 @@\n-            \/\/ notify JVMTI that unmount has completed, thread is parked\n-            notifyJvmtiUnmount(\/*hide*\/false);\n-\n@@ -468,2 +469,2 @@\n-        } else if (s == YIELDING) {   \/\/ Thread.yield\n-            setState(RUNNABLE);\n+            return;\n+        }\n@@ -471,2 +472,3 @@\n-            \/\/ notify JVMTI that unmount has completed, thread is runnable\n-            notifyJvmtiUnmount(\/*hide*\/false);\n+        \/\/ Thread.yield\n+        if (s == YIELDING) {\n+            setState(RUNNABLE);\n@@ -480,2 +482,1 @@\n-        } else {\n-            assert false;\n+            return;\n@@ -483,0 +484,2 @@\n+\n+        assert false;\n@@ -489,1 +492,1 @@\n-        afterDone(true, true);\n+        afterDone(true);\n@@ -497,1 +500,0 @@\n-     * @param executed true if the thread executed, false if it failed to start\n@@ -499,1 +501,1 @@\n-    private void afterDone(boolean notifyContainer, boolean executed) {\n+    private void afterDone(boolean notifyContainer) {\n@@ -503,4 +505,0 @@\n-        if (executed) {\n-            notifyJvmtiUnmount(\/*hide*\/false);\n-        }\n-\n@@ -555,1 +553,1 @@\n-                afterDone(addedToContainer, \/*executed*\/false);\n+                afterDone(addedToContainer);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/VirtualThread.java","additions":20,"deletions":22,"binary":false,"changes":42,"status":"modified"}]}