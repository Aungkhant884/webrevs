{"files":[{"patch":"@@ -52,0 +52,1 @@\n+    ClassFile cf;\n@@ -78,1 +79,1 @@\n-        ClassFile cf = ClassFile.read(curPath.resolve(\"IntersectionTypeTest.class\"));\n+        cf = ClassFile.read(curPath.resolve(\"IntersectionTypeTest.class\"));\n@@ -94,2 +95,6 @@\n-        \/\/ first checkcast\n-        int classIndex = checkCastList.get(0).getUnsignedShort(1);\n+        checkClassName(checkCastList.get(0), \"IntersectionTypeTest$I1\");\n+        checkClassName(checkCastList.get(1), \"IntersectionTypeTest$C1\");\n+    }\n+\n+    public void checkClassName(Instruction ins, String expected) throws Exception {\n+        int classIndex = ins.getUnsignedShort(1);\n@@ -98,11 +103,3 @@\n-        if (!\"IntersectionTypeTest$I1\".equals(className)) {\n-            throw new AssertionError(\"The type of the first 'checkcast' is not right. \" +\n-                    \"Expected: IntersectionTypeTest$I1, actual: \" + className);\n-        }\n-        \/\/ second checkcast\n-        classIndex = checkCastList.get(1).getUnsignedShort(1);\n-        classInfo = cf.constant_pool.getClassInfo(classIndex);\n-        className = classInfo.getName();\n-        if (!\"IntersectionTypeTest$C1\".equals(className)) {\n-            throw new AssertionError(\"The type of the second 'checkcast' is not right. \" +\n-                    \"Expected: IntersectionTypeTest$C1, actual: \" + className);\n+        if (!expected.equals(className)) {\n+            throw new AssertionError(\"The type of the 'checkcast' is not right. Expected: \" +\n+                    expected + \", actual: \" + className);\n","filename":"test\/langtools\/tools\/javac\/cast\/intersection\/DuplicatedCheckcastTest.java","additions":11,"deletions":14,"binary":false,"changes":25,"status":"modified"}]}