{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2005, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,0 +31,2 @@\n+import java.io.FileNotFoundException;\n+import java.io.FileOutputStream;\n@@ -33,1 +35,0 @@\n-import java.net.MalformedURLException;\n@@ -98,4 +99,6 @@\n-        \/\/convert file to appropriate URI, f.toURI().toASCIIString()\n-        \/\/converts the URI to string as per rule specified in\n-        \/\/RFC 2396,\n-        setSystemId(f.toURI().toASCIIString());\n+        try {\n+            outputStream = new FileOutputStream(f);\n+        } catch (FileNotFoundException ex) {\n+            \/\/ fall back to the original implementation for compatibility\n+            setSystemId(f.toURI().toASCIIString());\n+        }\n","filename":"src\/java.xml\/share\/classes\/javax\/xml\/transform\/stream\/StreamResult.java","additions":9,"deletions":6,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,1 @@\n+import java.io.File;\n@@ -30,0 +31,1 @@\n+import javax.xml.parsers.DocumentBuilderFactory;\n@@ -35,0 +37,1 @@\n+import javax.xml.transform.OutputKeys;\n@@ -37,0 +40,1 @@\n+import javax.xml.transform.dom.DOMSource;\n@@ -38,0 +42,1 @@\n+import javax.xml.transform.stream.StreamResult;\n@@ -41,0 +46,1 @@\n+import org.w3c.dom.Document;\n@@ -46,1 +52,1 @@\n- * @bug 8238183\n+ * @bug 8238183 8266019\n@@ -53,0 +59,2 @@\n+    public static final String TEST_DIR = System.getProperty(\"test.classes\", \".\");\n+\n@@ -69,0 +77,19 @@\n+    \/**\n+     * @bug 8266019\n+     * Verifies that a StreamResult created with a File is processed correctly.\n+     *\n+     * @throws Exception if test fails\n+     *\/\n+    @Test\n+    public void testStreamResult() throws Exception {\n+        File f = new File(TEST_DIR + \"\/output\/#\/dom.xml\");\n+        f.getParentFile().mkdirs();\n+\n+        Document dom = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();\n+        dom.appendChild(dom.createElement(\"root\"));\n+\n+        Transformer tr = TransformerFactory.newInstance().newTransformer();\n+        tr.setOutputProperty(OutputKeys.INDENT, \"yes\");\n+        tr.transform(new DOMSource(dom), new StreamResult(f));\n+    }\n+\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/transform\/ResultTest.java","additions":29,"deletions":2,"binary":false,"changes":31,"status":"modified"}]}