{"files":[{"patch":"@@ -30,1 +30,0 @@\n-import javax.lang.model.element.AnnotationMirror;\n@@ -155,1 +154,3 @@\n-     * Add the receiver annotations information.\n+     * Add the receiver information.\n+     *\n+     * <p>Note: receivers can only have type-use annotations.<\/p>\n@@ -159,1 +160,0 @@\n-     * @param annotationMirrors list of annotation descriptions.\n@@ -162,7 +162,2 @@\n-    protected void addReceiverAnnotations(ExecutableElement member, TypeMirror rcvrType,\n-            List<? extends AnnotationMirror> annotationMirrors, Content tree) {\n-        tree.add(writer.getAnnotationInfo(member.getReceiverType().getAnnotationMirrors(), false));\n-        tree.add(Entity.NO_BREAK_SPACE);\n-        tree.add(utils.getTypeName(rcvrType, false));\n-        LinkInfoImpl linkInfo = new LinkInfoImpl(configuration, RECEIVER_TYPE, rcvrType);\n-        tree.add(writer.getTypeParameterLinks(linkInfo));\n+    protected void addReceiver(ExecutableElement member, TypeMirror rcvrType, Content tree) {\n+        tree.add(writer.getLink(new LinkInfoImpl(configuration, RECEIVER_TYPE, rcvrType)));\n@@ -170,0 +165,4 @@\n+        if (member.getKind() == ElementKind.CONSTRUCTOR) {\n+            tree.add(utils.getTypeName(rcvrType, false));\n+            tree.add(\".\");\n+        }\n@@ -202,3 +201,2 @@\n-        if (includeAnnotations && rcvrType != null && utils.isAnnotated(rcvrType)) {\n-            List<? extends AnnotationMirror> annotationMirrors = rcvrType.getAnnotationMirrors();\n-            addReceiverAnnotations(member, rcvrType, annotationMirrors, paramTree);\n+        if (includeAnnotations && rcvrType != null && utils.isRecursivelyAnnotated(rcvrType)) {\n+            addReceiver(member, rcvrType, paramTree);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/AbstractExecutableMemberWriter.java","additions":11,"deletions":13,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -88,1 +88,1 @@\n-import javax.lang.model.util.SimpleTypeVisitor9;\n+import javax.lang.model.util.SimpleTypeVisitor14;\n@@ -331,0 +331,47 @@\n+    public boolean isRecursivelyAnnotated(TypeMirror e) {\n+        return new SimpleTypeVisitor14<Boolean, Void>() {\n+            @Override\n+            protected Boolean defaultAction(TypeMirror e, Void unused) {\n+                return isAnnotated(e);\n+            }\n+\n+            @Override\n+            public Boolean visitArray(ArrayType t, Void unused) {\n+                \/\/ kind 0\n+                return super.visitArray(t, unused) || visit(t.getComponentType());\n+            }\n+\n+            @Override\n+            public Boolean visitDeclared(DeclaredType t, Void unused) {\n+                \/\/ kind 1\n+                if (super.visitDeclared(t, unused) || visit(t.getEnclosingType()))\n+                    return true;\n+\n+                \/\/ kind 3\n+                for (var e : t.getTypeArguments()) {\n+                    if (visit(e))\n+                        return true;\n+                }\n+\n+                return false;\n+            }\n+\n+            @Override\n+            public Boolean visitWildcard(WildcardType t, Void unused) {\n+                if (super.visitWildcard(t, unused))\n+                    return true;\n+\n+                \/\/ kind 2\n+                var superBound = t.getSuperBound();\n+                if (superBound != null && visit(superBound))\n+                    return true;\n+\n+                var extendsBound = t.getExtendsBound();\n+                if (extendsBound != null && visit(extendsBound))\n+                    return true;\n+\n+                return false;\n+            }\n+        }.visit(e);\n+    }\n+\n@@ -631,1 +678,1 @@\n-        return new SimpleTypeVisitor9<Boolean, Void>() {\n+        return new SimpleTypeVisitor14<Boolean, Void>() {\n@@ -736,1 +783,1 @@\n-        return new SimpleTypeVisitor9<StringBuilder, Void>() {\n+        return new SimpleTypeVisitor14<StringBuilder, Void>() {\n@@ -1214,1 +1261,1 @@\n-        return new SimpleTypeVisitor9<TypeElement, Void>() {\n+        return new SimpleTypeVisitor14<TypeElement, Void>() {\n@@ -1270,1 +1317,1 @@\n-        return new SimpleTypeVisitor9<String, Void>() {\n+        return new SimpleTypeVisitor14<String, Void>() {\n@@ -1382,1 +1429,1 @@\n-        return new SimpleTypeVisitor9<String, Void>() {\n+        return new SimpleTypeVisitor14<String, Void>() {\n@@ -1767,1 +1814,1 @@\n-        return new SimpleTypeVisitor9<String, Void>() {\n+        return new SimpleTypeVisitor14<String, Void>() {\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/Utils.java","additions":54,"deletions":7,"binary":false,"changes":61,"status":"modified"}]}