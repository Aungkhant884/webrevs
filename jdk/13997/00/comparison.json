{"files":[{"patch":"@@ -31,0 +31,2 @@\n+#define NOREG_ENCODING -1\n+\n@@ -86,1 +88,1 @@\n-  constexpr Register(int encoding = -1) : _encoding(encoding) {}\n+  constexpr Register(int encoding = NOREG_ENCODING) : _encoding(encoding) {}\n@@ -97,1 +99,1 @@\n-  Register successor() const { return Register(encoding() + 1); }\n+  Register successor() const { return Register(encoding() + 1) & (number_of_registers - 1); }\n@@ -108,1 +110,2 @@\n-  assert(encoding >= -1 && encoding < 32, \"bad register encoding\");\n+  assert(encoding == NOREG_ENCODING ||\n+        (0 <= encoding && encoding < Register::number_of_registers), \"bad register encoding\");\n@@ -113,1 +116,1 @@\n-constexpr Register noreg = as_Register(-1);\n+constexpr Register noreg = as_Register(NOREG_ENCODING);\n@@ -157,1 +160,1 @@\n-  constexpr ConditionRegister(int encoding = -1) : _encoding(encoding) {}\n+  constexpr ConditionRegister(int encoding = NOREG_ENCODING) : _encoding(encoding) {}\n@@ -201,1 +204,1 @@\n-  constexpr FloatRegister(int encoding = -1) : _encoding(encoding) {}\n+  constexpr FloatRegister(int encoding = NOREG_ENCODING) : _encoding(encoding) {}\n@@ -212,1 +215,1 @@\n-  FloatRegister successor() const { return FloatRegister(encoding() + 1); }\n+  FloatRegister successor() const { return FloatRegister(encoding() + 1) & (number_of_registers - 1); }\n@@ -224,1 +227,2 @@\n-  assert(encoding >= -1 && encoding < 32, \"bad float register encoding\");\n+  assert(encoding == NOREG_ENCODING ||\n+        (0 <= encoding && encoding < FloatRegister::number_of_registers), \"bad float register encoding\");\n@@ -229,1 +233,1 @@\n-constexpr FloatRegister fnoreg = as_FloatRegister(-1);\n+constexpr FloatRegister fnoreg = as_FloatRegister(NOREG_ENCODING);\n@@ -273,1 +277,1 @@\n-  constexpr SpecialRegister(int encoding = -1) : _encoding(encoding) {}\n+  constexpr SpecialRegister(int encoding = NOREG_ENCODING) : _encoding(encoding) {}\n@@ -312,1 +316,1 @@\n-  constexpr VectorRegister(int encoding = -1) : _encoding(encoding) {}\n+  constexpr VectorRegister(int encoding = NOREG_ENCODING) : _encoding(encoding) {}\n@@ -337,1 +341,1 @@\n-constexpr VectorRegister vnoreg = as_VectorRegister(-1);\n+constexpr VectorRegister vnoreg = as_VectorRegister(NOREG_ENCODING);\n@@ -381,1 +385,1 @@\n-  constexpr VectorSRegister(int encoding = -1) : _encoding(encoding) {}\n+  constexpr VectorSRegister(int encoding = NOREG_ENCODING) : _encoding(encoding) {}\n@@ -407,1 +411,1 @@\n-constexpr VectorSRegister vsnoreg = as_VectorSRegister(-1);\n+constexpr VectorSRegister vsnoreg = as_VectorSRegister(NOREG_ENCODING);\n","filename":"src\/hotspot\/cpu\/ppc\/register_ppc.hpp","additions":18,"deletions":14,"binary":false,"changes":32,"status":"modified"}]}