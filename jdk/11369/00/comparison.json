{"files":[{"patch":"@@ -28,0 +28,1 @@\n+import java.lang.reflect.Field;\n@@ -1110,1 +1111,2 @@\n-        private static final long NEXT;\n+        private static final Object NEXT_BASE;\n+        private static final long NEXT_OFFSET;\n@@ -1113,1 +1115,7 @@\n-            NEXT = U.objectFieldOffset(ThreadNumbering.class, \"next\");\n+            try {\n+                Field nextField = ThreadNumbering.class.getDeclaredField(\"next\");\n+                NEXT_BASE = U.staticFieldBase(nextField);\n+                NEXT_OFFSET = U.staticFieldOffset(nextField);\n+            } catch (NoSuchFieldException e) {\n+                throw new ExceptionInInitializerError(e);\n+            }\n@@ -1117,1 +1125,1 @@\n-            return U.getAndAddInt(ThreadNumbering.class, NEXT, 1);\n+            return U.getAndAddInt(NEXT_BASE, NEXT_OFFSET, 1);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/Thread.java","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -39,0 +39,1 @@\n+import java.lang.reflect.Field;\n@@ -1530,0 +1531,1 @@\n+    private static final Object POOLIDS_BASE;\n@@ -1548,1 +1550,1 @@\n-        return U.getAndAddInt(ForkJoinPool.class, POOLIDS, x);\n+        return U.getAndAddInt(POOLIDS_BASE, POOLIDS, x);\n@@ -3766,1 +3768,3 @@\n-            POOLIDS = U.staticFieldOffset(klass.getDeclaredField(\"poolIds\"));\n+            Field poolIdsField = klass.getDeclaredField(\"poolIds\");\n+            POOLIDS_BASE = U.staticFieldBase(poolIdsField);\n+            POOLIDS = U.staticFieldOffset(poolIdsField);\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/ForkJoinPool.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"}]}