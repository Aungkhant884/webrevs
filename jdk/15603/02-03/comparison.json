{"files":[{"patch":"@@ -321,0 +321,19 @@\n+    \/\/ Strip a long path or UNC prefix and return the result.\n+    \/\/ If there is no such prefix, return the parameter passed in.\n+    private static String stripLongOrUNCPrefix(String path) {\n+        \/\/ if a prefix is present, remove it\n+        if (path.startsWith(\"\\\\\\\\?\\\\\")) {\n+            if (path.startsWith(\"UNC\\\\\", 4)) {\n+                path = \"\\\\\\\\\" + path.substring(8);\n+            } else {\n+                path = path.substring(4);\n+                \/\/ if only \"UNC\" remains, a trailing \"\\\\\" was likely removed\n+                if (path.equals(\"UNC\")) {\n+                    path = \"\\\\\\\\\";\n+                }\n+            }\n+        }\n+\n+        return path;\n+    }\n+\n@@ -323,0 +342,9 @@\n+        String path = f.getPath();\n+\n+        \/\/ if a prefix is present, remove it\n+        String stripped = stripLongOrUNCPrefix(path);\n+        if (stripped != path) {\n+            path = stripped;\n+            f = new File(stripped);\n+        }\n+\n@@ -363,11 +391,4 @@\n-        if (path.startsWith(\"\\\\\\\\?\\\\\")) {\n-            if (path.startsWith(\"UNC\\\\\", 4)) {\n-                path = \"\\\\\\\\\" + path.substring(8);\n-            } else {\n-                path = path.substring(4);\n-                \/\/ if only \"UNC\" remains, a trailing \"\\\\\" was likely removed\n-                if (path.equals(\"UNC\")) {\n-                    path = \"\\\\\\\\\";\n-                }\n-            }\n-            f = new File(path);\n+        String stripped = stripLongOrUNCPrefix(path);\n+        if (stripped != path) {\n+            path = stripped;\n+            f = new File(stripped);\n@@ -458,0 +479,3 @@\n+        \/\/ if a prefix is present, remove it\n+        path = stripLongOrUNCPrefix(path);\n+\n","filename":"src\/java.base\/windows\/classes\/java\/io\/WinNTFileSystem.java","additions":35,"deletions":11,"binary":false,"changes":46,"status":"modified"}]}