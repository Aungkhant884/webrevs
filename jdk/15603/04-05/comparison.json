{"files":[{"patch":"@@ -44,0 +44,2 @@\n+    private static final String LONG_PATH_PREFIX = \"\\\\\\\\?\\\\\";\n+\n@@ -63,0 +65,19 @@\n+    \/\/ Strip a long path or UNC prefix and return the result.\n+    \/\/ If there is no such prefix, return the parameter passed in.\n+    private static String stripLongOrUNCPrefix(String path) {\n+        \/\/ if a prefix is present, remove it\n+        if (path.startsWith(LONG_PATH_PREFIX)) {\n+            if (path.startsWith(\"UNC\\\\\", 4)) {\n+                path = \"\\\\\\\\\" + path.substring(8);\n+            } else {\n+                path = path.substring(4);\n+                \/\/ if only \"UNC\" remains, a trailing \"\\\\\" was likely removed\n+                if (path.equals(\"UNC\")) {\n+                    path = \"\\\\\\\\\";\n+                }\n+            }\n+        }\n+\n+        return path;\n+    }\n+\n@@ -227,1 +248,2 @@\n-        path = stripLongOrUNCPrefix(path);\n+        assert !path.startsWith(LONG_PATH_PREFIX);\n+\n@@ -247,1 +269,2 @@\n-        parent = stripLongOrUNCPrefix(parent);\n+        assert !child.startsWith(LONG_PATH_PREFIX);\n+\n@@ -324,19 +347,0 @@\n-    \/\/ Strip a long path or UNC prefix and return the result.\n-    \/\/ If there is no such prefix, return the parameter passed in.\n-    private static String stripLongOrUNCPrefix(String path) {\n-        \/\/ if a prefix is present, remove it\n-        if (path.startsWith(\"\\\\\\\\?\\\\\")) {\n-            if (path.startsWith(\"UNC\\\\\", 4)) {\n-                path = \"\\\\\\\\\" + path.substring(8);\n-            } else {\n-                path = path.substring(4);\n-                \/\/ if only \"UNC\" remains, a trailing \"\\\\\" was likely removed\n-                if (path.equals(\"UNC\")) {\n-                    path = \"\\\\\\\\\";\n-                }\n-            }\n-        }\n-\n-        return path;\n-    }\n-\n@@ -346,7 +350,1 @@\n-\n-        \/\/ if a prefix is present, remove it\n-        String stripped = stripLongOrUNCPrefix(path);\n-        if (stripped != path) {\n-            path = stripped;\n-            f = new File(stripped);\n-        }\n+        assert !path.startsWith(LONG_PATH_PREFIX);\n@@ -392,7 +390,1 @@\n-\n-        \/\/ if a prefix is present, remove it\n-        String stripped = stripLongOrUNCPrefix(path);\n-        if (stripped != path) {\n-            path = stripped;\n-            f = new File(stripped);\n-        }\n+        assert !path.startsWith(LONG_PATH_PREFIX);\n@@ -482,2 +474,1 @@\n-        \/\/ if a prefix is present, remove it\n-        path = stripLongOrUNCPrefix(path);\n+        assert !path.startsWith(LONG_PATH_PREFIX);\n","filename":"src\/java.base\/windows\/classes\/java\/io\/WinNTFileSystem.java","additions":28,"deletions":37,"binary":false,"changes":65,"status":"modified"}]}