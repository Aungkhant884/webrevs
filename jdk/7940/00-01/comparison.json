{"files":[{"patch":"@@ -24,1 +24,1 @@\n- \/*\n+\/*\n@@ -26,1 +26,1 @@\n- * @bug 8039951 8281717\n+ * @bug 8039951\n@@ -34,0 +34,1 @@\n+import javax.security.auth.login.LoginException;\n@@ -37,1 +38,0 @@\n-    private static final String OS = System.getProperty(\"os.name\").toLowerCase();\n@@ -45,1 +45,2 @@\n-        login(OS.replaceAll(\"[^a-zA-Z0-9]\", \"\"), getPlatformLoginModule(), \"required\");\n+        login(\"windows\", NT_MODULE, \"required\");\n+        login(\"unix\", UNIX_MODULE, \"required\");\n@@ -65,13 +66,9 @@\n-        LoginContext lc = new LoginContext(\"hello\");\n-        lc.login();\n-        System.out.println(lc.getSubject());\n-        lc.logout();\n-    }\n-\n-    private static String getPlatformLoginModule() {\n-        if (isWindows()) {\n-            return NT_MODULE;\n-        } else if (isUnix()) {\n-            return UNIX_MODULE;\n-        } else {\n-            throw new RuntimeException(\"Unsupported Platform: \" + OS);\n+        try {\n+            LoginContext lc = new LoginContext(\"hello\");\n+            lc.login();\n+            System.out.println(lc.getSubject());\n+            lc.logout();\n+        } catch (LoginException e) {\n+            \/\/ This exception can occur in other platform module than the running one.\n+            System.out.println(\"Expected Exception found.\");\n+            e.printStackTrace(System.out);\n@@ -80,12 +77,0 @@\n-\n-    private static boolean isWindows() {\n-        return OS.contains(\"win\");\n-    }\n-\n-    private static boolean isUnix() {\n-        return (OS.contains(\"mac\")\n-                || OS.contains(\"sunos\")\n-                || OS.contains(\"nix\")\n-                || OS.contains(\"nux\")\n-                || OS.contains(\"aix\"));\n-    }\n","filename":"test\/jdk\/com\/sun\/security\/auth\/module\/AllPlatforms.java","additions":14,"deletions":29,"binary":false,"changes":43,"status":"modified"}]}