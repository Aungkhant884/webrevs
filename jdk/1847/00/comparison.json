{"files":[{"patch":"@@ -2724,7 +2724,0 @@\n-#if INCLUDE_JVMCI\n-  \/\/ In hosted mode, print the JVMCI compiler specific counters manually.\n-  if (EnableJVMCI && !UseJVMCICompiler) {\n-    JVMCICompiler::print_compilation_timers();\n-  }\n-#endif\n-\n@@ -2780,0 +2773,7 @@\n+#if INCLUDE_JVMCI\n+  if (EnableJVMCI) {\n+    tty->cr();\n+    JVMCICompiler::print_hosted_timers();\n+  }\n+#endif\n+\n","filename":"src\/hotspot\/share\/compiler\/compileBroker.cpp","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+elapsedTimer JVMCICompiler::_hostedCodeInstallTimer;\n@@ -155,1 +156,1 @@\n-\/\/ Print compilation timers and statistics\n+\/\/ Print CompileBroker compilation timers\n@@ -157,2 +158,4 @@\n-  tty->print_cr(\"    JVMCI Compile Time:      %7.3f s\", stats()->total_time());\n-  print_compilation_timers();\n+  double code_install_time = _codeInstallTimer.seconds();\n+  tty->print_cr(\"    JVMCI CompileBroker Time:\");\n+  tty->print_cr(\"       Compile:        %7.3f s\", stats()->total_time());\n+  tty->print_cr(\"       Install Code:   %7.3f s\", code_install_time);\n@@ -161,7 +164,5 @@\n-\/\/ Print compilation timers and statistics\n-void JVMCICompiler::print_compilation_timers() {\n-  double code_install_time = _codeInstallTimer.seconds();\n-  if (code_install_time != 0.0) {\n-    tty->cr();\n-    tty->print_cr(\"    JVMCI code install time:        %6.3f s\", code_install_time);\n-  }\n+\/\/ Print non-CompileBroker compilation timers\n+void JVMCICompiler::print_hosted_timers() {\n+  double code_install_time = _hostedCodeInstallTimer.seconds();\n+  tty->print_cr(\"    JVMCI Hosted Time:\");\n+  tty->print_cr(\"       Install Code:   %7.3f s\", code_install_time);\n@@ -177,1 +178,1 @@\n-}\n\\ No newline at end of file\n+}\n","filename":"src\/hotspot\/share\/jvmci\/jvmciCompiler.cpp","additions":12,"deletions":11,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -52,0 +52,1 @@\n+  \/\/ Code installation timer for CompileBroker compilations\n@@ -54,0 +55,3 @@\n+  \/\/ Code installation timer for non-CompileBroker compilations\n+  static elapsedTimer _hostedCodeInstallTimer;\n+\n@@ -110,2 +114,2 @@\n-  \/\/ Print compilation timers and statistics\n-  static void print_compilation_timers();\n+  \/\/ Print timers related to non-CompileBroker compilations\n+  static void print_hosted_timers();\n@@ -113,1 +117,7 @@\n-  static elapsedTimer* codeInstallTimer() { return &_codeInstallTimer; }\n+  static elapsedTimer* codeInstallTimer(bool hosted) {\n+    if (!hosted) {\n+      return &_codeInstallTimer;\n+    } else {\n+      return &_hostedCodeInstallTimer;\n+    }\n+  }\n","filename":"src\/hotspot\/share\/jvmci\/jvmciCompiler.hpp","additions":13,"deletions":3,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -841,1 +841,1 @@\n-  TraceTime install_time(\"installCode\", JVMCICompiler::codeInstallTimer());\n+  TraceTime install_time(\"installCode\", JVMCICompiler::codeInstallTimer(!thread->is_Compiler_thread()));\n","filename":"src\/hotspot\/share\/jvmci\/jvmciCompilerToVM.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}