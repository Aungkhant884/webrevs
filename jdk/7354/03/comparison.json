{"files":[{"patch":"@@ -2177,1 +2177,5 @@\n-    st->print_cr(\"%d\", i);\n+    if (ActiveProcessorCount > 0) {\n+      st->print_cr(\"%d, but overridden by -XX:ActiveProcessorCount %d\", i, ActiveProcessorCount);\n+    } else {\n+      st->print_cr(\"%d\", i);\n+    }\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -59,0 +59,1 @@\n+            testPrintContainerInfoActiveProcessorCount();\n@@ -92,1 +93,10 @@\n-        checkContainerInfo(Common.run(opts));\n+        checkContainerInfo(Common.run(opts), null);\n+    }\n+\n+    private static void testPrintContainerInfoActiveProcessorCount() throws Exception {\n+        Common.logNewTestCase(\"Test print_container_info()\");\n+\n+        DockerRunOptions opts = Common.newOpts(imageName, \"PrintContainerInfo\", \"-XX:ActiveProcessorCount=2\");\n+        Common.addWhiteBoxOpts(opts);\n+\n+        checkContainerInfo(Common.run(opts), \"but overridden by -XX:ActiveProcessorCount 2\");\n@@ -96,1 +106,1 @@\n-    private static void checkContainerInfo(OutputAnalyzer out) throws Exception {\n+    private static void checkContainerInfo(OutputAnalyzer out, String additionallyExpected) throws Exception {\n@@ -116,0 +126,1 @@\n+        if (additionallyExpected != null) out.shouldContain(additionallyExpected);\n","filename":"test\/hotspot\/jtreg\/containers\/docker\/TestMisc.java","additions":14,"deletions":3,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -67,0 +67,4 @@\n+        return newOpts(imageNameAndTag, testClass, null);\n+    }\n+\n+    public static DockerRunOptions newOpts(String imageNameAndTag, String testClass, String addJavaOpts) {\n@@ -71,0 +75,1 @@\n+        if (addJavaOpts != null) opts.addJavaOpts(addJavaOpts);\n@@ -74,1 +79,0 @@\n-\n","filename":"test\/lib\/jdk\/test\/lib\/containers\/docker\/Common.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"}]}