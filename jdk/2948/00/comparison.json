{"files":[{"patch":"@@ -52,1 +52,1 @@\n-    Line2D lineToShape;\n+    volatile Line2D lineToShape;\n@@ -59,1 +59,2 @@\n-            if (lineToShape == null) {\n+            Line2D lts = lineToShape;\n+            if (lts == null) {\n@@ -61,2 +62,4 @@\n-                    if (lineToShape == null) {\n-                        lineToShape = new Line2D.Float();\n+                    lts = lineToShape;\n+                    if (lts == null) {\n+                        lts = new Line2D.Float();\n+                        lineToShape = lts;\n@@ -66,3 +69,3 @@\n-            synchronized (lineToShape) {\n-                lineToShape.setLine(x1, y1, x2, y2);\n-                drawfillShape(sg2d, sg2d.stroke.createStrokedShape(lineToShape), true, true);\n+            synchronized (lts) {\n+                lts.setLine(x1, y1, x2, y2);\n+                drawfillShape(sg2d, sg2d.stroke.createStrokedShape(lts), true, true);\n@@ -79,1 +82,1 @@\n-    Rectangle2D rectToShape;\n+    volatile Rectangle2D rectToShape;\n@@ -88,1 +91,2 @@\n-            if (rectToShape == null) {\n+            Rectangle2D rts = rectToShape;\n+            if (rts == null) {\n@@ -90,2 +94,4 @@\n-                    if (rectToShape == null) {\n-                        rectToShape = new Rectangle2D.Float();\n+                    rts = rectToShape;\n+                    if (rts == null) {\n+                        rts = new Rectangle2D.Float();\n+                        rectToShape = rts;\n@@ -95,3 +101,3 @@\n-            synchronized (rectToShape) {\n-                rectToShape.setRect(x, y, width, height);\n-                drawfillShape(sg2d, sg2d.stroke.createStrokedShape(rectToShape), true, true);\n+            synchronized (rts) {\n+                rts.setRect(x, y, width, height);\n+                drawfillShape(sg2d, sg2d.stroke.createStrokedShape(rts), true, true);\n@@ -119,1 +125,1 @@\n-    RoundRectangle2D roundrectToShape;\n+    volatile RoundRectangle2D roundrectToShape;\n@@ -128,1 +134,2 @@\n-            if (roundrectToShape == null) {\n+            RoundRectangle2D rts = roundrectToShape;\n+            if (rts == null) {\n@@ -130,2 +137,4 @@\n-                    if (roundrectToShape == null) {\n-                        roundrectToShape = new RoundRectangle2D.Float();\n+                    rts = roundrectToShape;\n+                    if (rts == null) {\n+                        rts = new RoundRectangle2D.Float();\n+                        roundrectToShape = rts;\n@@ -135,3 +144,3 @@\n-            synchronized (roundrectToShape) {\n-                roundrectToShape.setRoundRect(x, y, width, height, arcWidth, arcHeight);\n-                drawfillShape(sg2d, sg2d.stroke.createStrokedShape(roundrectToShape), true, true);\n+            synchronized (rts) {\n+                rts.setRoundRect(x, y, width, height, arcWidth, arcHeight);\n+                drawfillShape(sg2d, sg2d.stroke.createStrokedShape(rts), true, true);\n@@ -158,1 +167,1 @@\n-    Ellipse2D ovalToShape;\n+    volatile Ellipse2D ovalToShape;\n@@ -167,1 +176,2 @@\n-            if (ovalToShape == null) {\n+            Ellipse2D ots = ovalToShape;\n+            if (ots == null) {\n@@ -169,2 +179,4 @@\n-                    if (ovalToShape == null) {\n-                        ovalToShape = new Ellipse2D.Float();\n+                    ots = ovalToShape;\n+                    if (ots == null) {\n+                        ots = new Ellipse2D.Float();\n+                        ovalToShape = ots;\n@@ -174,3 +186,3 @@\n-            synchronized (ovalToShape) {\n-                ovalToShape.setFrame(x, y, width, height);\n-                drawfillShape(sg2d, sg2d.stroke.createStrokedShape(ovalToShape), true, true);\n+            synchronized (ots) {\n+                ots.setFrame(x, y, width, height);\n+                drawfillShape(sg2d, sg2d.stroke.createStrokedShape(ots), true, true);\n@@ -197,1 +209,1 @@\n-    Arc2D arcToShape;\n+    volatile Arc2D arcToShape;\n@@ -206,1 +218,2 @@\n-            if (arcToShape == null) {\n+            Arc2D ats = arcToShape;\n+            if (ats == null) {\n@@ -208,2 +221,4 @@\n-                    if (arcToShape == null) {\n-                        arcToShape = new Arc2D.Float();\n+                    ats = arcToShape;\n+                    if (ats == null) {\n+                        ats = new Arc2D.Float();\n+                        arcToShape = ats;\n@@ -213,3 +228,3 @@\n-            synchronized (arcToShape) {\n-                arcToShape.setArc(x, y, width, height, startAngle, arcAngle, type);\n-                drawfillShape(sg2d, sg2d.stroke.createStrokedShape(arcToShape), true, true);\n+            synchronized (ats) {\n+                ats.setArc(x, y, width, height, startAngle, arcAngle, type);\n+                drawfillShape(sg2d, sg2d.stroke.createStrokedShape(ats), true, true);\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/java2d\/CRenderer.java","additions":50,"deletions":35,"binary":false,"changes":85,"status":"modified"}]}