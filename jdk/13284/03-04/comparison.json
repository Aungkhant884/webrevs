{"files":[{"patch":"@@ -54,1 +54,1 @@\n-size_t ArchiveHeapWriter::_heap_roots_bottom;\n+size_t ArchiveHeapWriter::_heap_roots_bottom_offset;\n@@ -156,1 +156,1 @@\n-  return cast_to_oop(_requested_bottom + _heap_roots_bottom);\n+  return cast_to_oop(_requested_bottom + _heap_roots_bottom_offset);\n@@ -179,1 +179,1 @@\n-  int length = roots != nullptr ? roots->length() : 0;\n+  int length = roots->length();\n@@ -214,1 +214,1 @@\n-  log_info(cds)(\"archived obj roots[%d] = \" SIZE_FORMAT \" bytes, klass = %p, obj = %p\", length, byte_size, k, mem);\n+  log_info(cds, heap)(\"archived obj roots[%d] = \" SIZE_FORMAT \" bytes, klass = %p, obj = %p\", length, byte_size, k, mem);\n@@ -216,1 +216,1 @@\n-  _heap_roots_bottom = _buffer_used;\n+  _heap_roots_bottom_offset = _buffer_used;\n@@ -233,1 +233,2 @@\n-  log_info(cds, heap)(\"Size of heap region = \" SIZE_FORMAT \" bytes\", _buffer_used);\n+  log_info(cds)(\"Size of heap region = \" SIZE_FORMAT \" bytes, %d objects, %d roots\",\n+                _buffer_used, _source_objs->length() + 1, roots->length());\n@@ -483,1 +484,1 @@\n-  oop requested_roots = requested_obj_from_buffer_offset(_heap_roots_bottom);\n+  oop requested_roots = requested_obj_from_buffer_offset(_heap_roots_bottom_offset);\n","filename":"src\/hotspot\/share\/cds\/archiveHeapWriter.cpp","additions":8,"deletions":7,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -96,1 +96,1 @@\n-  static size_t _heap_roots_bottom;\n+  static size_t _heap_roots_bottom_offset;\n@@ -185,1 +185,1 @@\n-    return offset_to_buffered_address<address>(_heap_roots_bottom);\n+    return offset_to_buffered_address<address>(_heap_roots_bottom_offset);\n","filename":"src\/hotspot\/share\/cds\/archiveHeapWriter.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -63,1 +63,1 @@\n-    hp = 3,  \/\/ relocation bitmaps (freed after file mapping is finished)\n+    hp = 3,  \/\/ heap region\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}