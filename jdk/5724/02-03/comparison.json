{"files":[{"patch":"@@ -0,0 +1,68 @@\n+\/*\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/**\n+ * @test\n+ * @bug 8274397\n+ * @summary Ensure the app name system property is set on macOS\n+ * @requires os.family == \"mac\"\n+ * @compile MacOSAppNamePropertyTest.java SystemPropertyTest.java\n+ * @run main MacOSAppNamePropertyTest\n+ *\/\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\/*\n+ * If the system property apple.awt.application.name is unset, it should default\n+ * to the name of this test class.\n+ * If it is set, then it should be used instead of the class.\n+ * The arg. to the test indicates the *expected* name.\n+ * The test will fail if the property is not set or does not match\n+ *\/\n+public class MacOSAppNamePropertyTest extends TestHelper {\n+\n+    static final String APPNAME = \"SystemPropertyTest\";\n+\n+    public static void main(String[]args) {\n+        if (!isMacOSX) {\n+            return;\n+        }\n+        execTest(null, APPNAME);\n+        execTest(\"-Dapple.awt.application.name=Foo\", \"Foo\");\n+    }\n+\n+    static void execTest(String propSetting, String expect) {\n+        List<String> cmdList = new ArrayList<>();\n+        cmdList.add(javaCmd);\n+        if (propSetting != null) {\n+            cmdList.add(propSetting);\n+        }\n+        cmdList.add(APPNAME);\n+        cmdList.add(expect);\n+        TestResult tr = doExec(cmdList.toArray(new String[cmdList.size()]));\n+        if (!tr.isOK()) {\n+            System.err.println(tr.toString());\n+            throw new RuntimeException(\"Test Fails\");\n+        }\n+    }\n+}\n","filename":"test\/jdk\/tools\/launcher\/MacOSAppNamePropertyTest.java","additions":68,"deletions":0,"binary":false,"changes":68,"status":"added"},{"patch":"@@ -0,0 +1,44 @@\n+\/*\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\n+\/*\n+ * Child launched by MacOSAppNamePropertyTest.java\n+ * If the system property apple.awt.application.name is unset, it should default\n+ * to the name of this main program class, less any package name.\n+ * If it is set, then it should be used instead of the class name.\n+ * The arg. to the test indicates the *expected* name.\n+ * The test will fail if the property is not set or does not match\n+ *\/\n+public class SystemPropertyTest {\n+\n+    public static void main(String[]args) {\n+        String prop = System.getProperty(\"apple.awt.application.name\");\n+        if (prop == null) {\n+            throw new RuntimeException(\"Property not set\");\n+        }\n+        if (!prop.equals(args[0])) {\n+            throw new RuntimeException(\"Got \" + prop + \" expected \" + args[0]);\n+        }\n+    }\n+}\n","filename":"test\/jdk\/tools\/launcher\/SystemPropertyTest.java","additions":44,"deletions":0,"binary":false,"changes":44,"status":"added"}]}