{"files":[{"patch":"@@ -4466,0 +4466,51 @@\n+\n+void C2_MacroAssembler::compare_signed_int(Register dst, Register op1, Register op2, Register tmp) {\n+  Label done;\n+  movl(tmp, -1);\n+  cmpl(op1, op2);\n+  jccb(Assembler::less, done);\n+  movl(tmp, 1);\n+  jccb(Assembler::greater, done);\n+  movl(tmp, 0);\n+  bind(done);\n+  movl(dst, tmp);\n+}\n+\n+void C2_MacroAssembler::compare_unsigned_int(Register dst, Register op1, Register op2, Register tmp) {\n+  Label done;\n+  movl(tmp, -1);\n+  cmpl(op1, op2);\n+  jccb(Assembler::below, done);\n+  movl(tmp, 1);\n+  jccb(Assembler::above, done);\n+  movl(tmp, 0);\n+  bind(done);\n+  movl(dst, tmp);\n+}\n+\n+#ifdef _LP64\n+void C2_MacroAssembler::compare_signed_long(Register dst, Register op1, Register op2, Register tmp) {\n+  Label done;\n+  movq(tmp, -1);\n+  cmpq(op1, op2);\n+  jccb(Assembler::less, done);\n+  movq(tmp, 1);\n+  jccb(Assembler::greater, done);\n+  movq(tmp, 0);\n+  bind(done);\n+  movq(dst, tmp);\n+}\n+\n+void C2_MacroAssembler::compare_unsigned_long(Register dst, Register op1, Register op2, Register tmp) {\n+  Label done;\n+  movq(tmp, -1);\n+  cmpq(op1, op2);\n+  jccb(Assembler::below, done);\n+  movq(tmp, 1);\n+  jccb(Assembler::above, done);\n+  movq(tmp, 0);\n+  bind(done);\n+  movq(dst, tmp);\n+}\n+#endif\n+\n","filename":"src\/hotspot\/cpu\/x86\/c2_MacroAssembler_x86.cpp","additions":51,"deletions":0,"binary":false,"changes":51,"status":"modified"},{"patch":"@@ -327,1 +327,9 @@\n-#endif \/\/ CPU_X86_C2_MACROASSEMBLER_X86_HPP\n+  void compare_signed_int(Register dst, Register op1, Register op2, Register tmp);\n+  void compare_unsigned_int(Register dst, Register op1, Register op2, Register tmp);\n+  #ifdef _LP64\n+  void compare_signed_long(Register dst, Register op1, Register op2, Register tmp);\n+  void compare_unsigned_long(Register dst, Register op1, Register op2, Register tmp);\n+  #endif\n+\n+\n+#endif \/\/ CPU_X86_C2_MACROASSEMBLER_X86_HPP\n\\ No newline at end of file\n","filename":"src\/hotspot\/cpu\/x86\/c2_MacroAssembler_x86.hpp","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -12112,15 +12112,1 @@\n-    Register op1 = $op1$$Register;\n-    Register op2 = $op2$$Register;\n-    Register dest = $dst$$Register;\n-    Register tmp = $tmp$$Register;\n-\n-    Label done;\n-    __ movl(tmp, -1);\n-    __ cmpl(op1, op2);\n-    __ jccb(Assembler::less, done);\n-\t  __ movl(tmp, 1);\n-    __ jccb(Assembler::greater, done);\n-\t  __ movl(tmp, 0);\n-    __ bind(done);\n-    __ movl(dest, tmp);\n-\n+    __ compare_signed_int($dst$$Register, $op1$$Register, $op2$$Register, $tmp$$Register);\n@@ -12138,15 +12124,1 @@\n-    Register op1 = $op1$$Register;\n-    Register op2 = $op2$$Register;\n-    Register dest = $dst$$Register;\n-    Register tmp = $tmp$$Register;\n-\n-    Label done;\n-    __ movl(tmp, -1);\n-    __ cmpq(op1, op2);\n-    __ jccb(Assembler::less, done);\n-\t  __ movl(tmp, 1);\n-    __ jccb(Assembler::greater, done);\n-\t  __ movl(tmp, 0);\n-    __ bind(done);\n-    __ movl(dest, tmp);\n-\n+    __ compare_signed_long($dst$$Register, $op1$$Register, $op2$$Register, $tmp$$Register);\n@@ -12165,15 +12137,1 @@\n-    Register op1 = $op1$$Register;\n-    Register op2 = $op2$$Register;\n-    Register dest = $dst$$Register;\n-    Register tmp = $tmp$$Register;\n-\n-    Label done;\n-    __ movl(tmp, -1);\n-    __ cmpl(op1, op2);\n-    __ jccb(Assembler::below, done);\n-\t  __ movl(tmp, 1);\n-    __ jccb(Assembler::above, done);\n-\t  __ movl(tmp, 0);\n-    __ bind(done);\n-    __ movl(dest, tmp);\n-\n+    __ compare_unsigned_int($dst$$Register, $op1$$Register, $op2$$Register, $tmp$$Register);\n@@ -12191,15 +12149,1 @@\n-    Register op1 = $op1$$Register;\n-    Register op2 = $op2$$Register;\n-    Register dest = $dst$$Register;\n-    Register tmp = $tmp$$Register;\n-\n-    Label done;\n-    __ movl(tmp, -1);\n-    __ cmpq(op1, op2);\n-    __ jccb(Assembler::below, done);\n-\t  __ movl(tmp, 1);\n-    __ jccb(Assembler::above, done);\n-\t  __ movl(tmp, 0);\n-    __ bind(done);\n-    __ movl(dest, tmp);\n-\n+    __ compare_unsigned_long($dst$$Register, $op1$$Register, $op2$$Register, $tmp$$Register);\n","filename":"src\/hotspot\/cpu\/x86\/x86_64.ad","additions":4,"deletions":60,"binary":false,"changes":64,"status":"modified"}]}