{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -72,0 +72,1 @@\n+#include \"utilities\/formatBuffer.hpp\"\n@@ -2898,2 +2899,3 @@\n-#define G1PPRL_DOUBLE_FORMAT          \"  %14.1f\"\n-#define G1PPRL_DOUBLE_H_FORMAT        \"  %14s\"\n+#define G1PPRL_DOUBLE_FORMAT          \"%14.1f\"\n+#define G1PPRL_GCEFF_FORMAT           \"  %14s\"\n+#define G1PPRL_GCEFF_H_FORMAT         \"  %14s\"\n@@ -2934,1 +2936,1 @@\n-                          G1PPRL_DOUBLE_H_FORMAT\n+                          G1PPRL_GCEFF_H_FORMAT\n@@ -2947,1 +2949,1 @@\n-                          G1PPRL_DOUBLE_H_FORMAT\n+                          G1PPRL_GCEFF_H_FORMAT\n@@ -2972,0 +2974,1 @@\n+  FormatBuffer<16> gc_efficiency(\"\");\n@@ -2980,0 +2983,6 @@\n+  if(gc_eff < 0) {\n+    gc_efficiency.append(\"-\");\n+  } else {\n+    gc_efficiency.append(G1PPRL_DOUBLE_FORMAT, gc_eff);\n+  }\n+\n@@ -2982,12 +2991,12 @@\n-                          G1PPRL_TYPE_FORMAT\n-                          G1PPRL_ADDR_BASE_FORMAT\n-                          G1PPRL_BYTE_FORMAT\n-                          G1PPRL_BYTE_FORMAT\n-                          G1PPRL_BYTE_FORMAT\n-                          G1PPRL_DOUBLE_FORMAT\n-                          G1PPRL_BYTE_FORMAT\n-                          G1PPRL_STATE_FORMAT\n-                          G1PPRL_BYTE_FORMAT,\n-                          type, p2i(bottom), p2i(end),\n-                          used_bytes, prev_live_bytes, next_live_bytes, gc_eff,\n-                          remset_bytes, remset_type, strong_code_roots_bytes);\n+                        G1PPRL_TYPE_FORMAT\n+                        G1PPRL_ADDR_BASE_FORMAT\n+                        G1PPRL_BYTE_FORMAT\n+                        G1PPRL_BYTE_FORMAT\n+                        G1PPRL_BYTE_FORMAT\n+                        G1PPRL_GCEFF_FORMAT\n+                        G1PPRL_BYTE_FORMAT\n+                        G1PPRL_STATE_FORMAT\n+                        G1PPRL_BYTE_FORMAT,\n+                        type, p2i(bottom), p2i(end),\n+                        used_bytes, prev_live_bytes, next_live_bytes, gc_efficiency.buffer(),\n+                        remset_bytes, remset_type, strong_code_roots_bytes);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMark.cpp","additions":26,"deletions":17,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -142,1 +142,1 @@\n-  _gc_efficiency = 0.0;\n+  _gc_efficiency = -1.0;\n@@ -258,1 +258,1 @@\n-  _surv_rate_group(NULL), _age_index(G1SurvRateGroup::InvalidAgeIndex), _gc_efficiency(0.0),\n+  _surv_rate_group(NULL), _age_index(G1SurvRateGroup::InvalidAgeIndex), _gc_efficiency(-1.0),\n","filename":"src\/hotspot\/share\/gc\/g1\/heapRegion.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -271,0 +271,1 @@\n+  _gc_efficiency = -1.0;\n","filename":"src\/hotspot\/share\/gc\/g1\/heapRegion.inline.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}