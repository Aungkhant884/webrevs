{"files":[{"patch":"@@ -55,0 +55,1 @@\n+import javax.lang.model.type.ArrayType;\n@@ -93,0 +94,1 @@\n+import jdk.javadoc.internal.doclets.formats.html.markup.TextBuilder;\n@@ -1871,1 +1873,1 @@\n-            public Content visitType(TypeMirror t, Void p) {\n+            public Content visitType(TypeMirror type, Void p) {\n@@ -1877,4 +1879,0 @@\n-                        String name = utils.isIncluded(t.asElement())\n-                                ? t.asElement().getSimpleName().toString()\n-                                : utils.getFullyQualifiedName(t.asElement());\n-                        linkInfo.label(name + utils.getDimension(t) + \".class\");\n@@ -1884,2 +1882,3 @@\n-                    protected Content defaultAction(TypeMirror e, Void p) {\n-                        return Text.of(t + utils.getDimension(t) + \".class\");\n+                    public Content visitArray(ArrayType t, Void p) {\n+                        \/\/ render declared base component type as link\n+                        return visit(t.getComponentType()).add(\"[]\");\n@@ -1887,1 +1886,5 @@\n-                }.visit(t);\n+                    @Override\n+                    protected Content defaultAction(TypeMirror t, Void p) {\n+                        return new TextBuilder(t.toString());\n+                    }\n+                }.visit(type).add(\".class\");\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlDocletWriter.java","additions":11,"deletions":8,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n- *           8175200 8186332 8182765 8196202 8187288 8173730 8215307\n+ *           8175200 8186332 8182765 8196202 8187288 8173730 8215307 8312445\n@@ -678,1 +678,1 @@\n-                    <a href=\"A.html#c()\">c<\/a>=<a href=\"..\/pkg2\/Foo.html\" title=\"class in pkg2\">Foo.class<\/a>,\"\"\",\n+                    <a href=\"A.html#c()\">c<\/a>=<a href=\"..\/pkg2\/Foo.html\" title=\"class in pkg2\">Foo<\/a>.class,\"\"\",\n@@ -682,1 +682,1 @@\n-                    ass in pkg\">TypeParameterSubClass.class<\/a>,\"\"\",\n+                    ass in pkg\">TypeParameterSubClass<\/a>.class,\"\"\",\n@@ -697,1 +697,10 @@\n-                    <a href=\"A.html#primitiveClassTest()\">primitiveClassTest<\/a>=boolean.class,\"\"\");\n+                    <a href=\"A.html#primitiveClassTest()\">primitiveClassTest<\/a>=boolean.class,\"\"\",\n+                \/\/ Arrays\n+                \"\"\"\n+                    <a href=\"A.html#arrayClassTest()\">arrayClassTest<\/a>=java.lang.String[][].class,\"\"\",\n+                \"\"\"\n+                    <a href=\"A.html#arrayPrimitiveTest()\">arrayPrimitiveTest<\/a>=boolean[].class,\"\"\",\n+                \"\"\"\n+                    <a href=\"A.html#classArrayTest()\">classArrayTest<\/a>={<a href=\"..\/pkg\/TypeParame\\\n+                    terSubClass.html\" title=\"class in pkg\">TypeParameterSubClass<\/a>[].class,java.la\\\n+                    ng.String.class,long[][][].class})\"\"\");\n@@ -699,2 +708,0 @@\n-        \/\/ XXX:  Add array test case after this if fixed:\n-        \/\/5020899: Incorrect internal representation of class-valued annotation elements\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testNewLanguageFeatures\/TestNewLanguageFeatures.java","additions":13,"deletions":6,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,1 +35,1 @@\n-    Class c();\n+    Class<?> c();\n@@ -40,3 +40,4 @@\n-    Class primitiveClassTest();\n-    Class arrayClassTest();\n-    Class arrayPrimitiveTest();\n+    Class<?> primitiveClassTest();\n+    Class<?> arrayClassTest();\n+    Class<?> arrayPrimitiveTest();\n+    Class<?>[] classArrayTest();\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testNewLanguageFeatures\/pkg1\/A.java","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -39,2 +39,3 @@\n-   arrayClassTest = String[].class,\n-   arrayPrimitiveTest = boolean[].class)\n+   arrayClassTest = String[][].class,\n+   arrayPrimitiveTest = boolean[].class,\n+   classArrayTest = {TypeParameterSubClass[].class, String.class, long[][][].class})\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testNewLanguageFeatures\/pkg1\/B.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"}]}