{"files":[{"patch":"@@ -29,2 +29,1 @@\n-#define SCREEN_MEMORY_SIZE_4K (4096*2160*4) \/\/~33,7 mb\n-#define MAX_POOL_MEMORY SCREEN_MEMORY_SIZE_4K\/2\n+#define SCREEN_MEMORY_SIZE_5K (5120*4096*4) \/\/~84 mb\n@@ -308,0 +307,1 @@\n+    uint64_t _maxPoolMemory;\n@@ -323,0 +323,10 @@\n+\n+    \/\/ recommendedMaxWorkingSetSize typically greatly exceeds SCREEN_MEMORY_SIZE_5K constant.\n+    \/\/ It usually corresponds to the VRAM available to the graphics card\n+    _maxPoolMemory = self.device.recommendedMaxWorkingSetSize\/2;\n+\n+    \/\/ Set maximum to handle at least 5K screen size\n+    if (_maxPoolMemory < SCREEN_MEMORY_SIZE_5K) {\n+        _maxPoolMemory = SCREEN_MEMORY_SIZE_5K;\n+    }\n+\n@@ -348,1 +358,1 @@\n-        if (_memoryTotalAllocated + requestedBytes > MAX_POOL_MEMORY) {\n+        if (_memoryTotalAllocated + requestedBytes > _maxPoolMemory) {\n@@ -350,1 +360,1 @@\n-        } else if (_memoryTotalAllocated + requestedBytes > MAX_POOL_MEMORY\/2) {\n+        } else if (_memoryTotalAllocated + requestedBytes > _maxPoolMemory\/2) {\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLTexurePool.m","additions":14,"deletions":4,"binary":false,"changes":18,"status":"modified"}]}