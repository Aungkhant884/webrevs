{"files":[{"patch":"@@ -2214,3 +2214,4 @@\n-                \/\/ Running the grandchild for 60s should be more than enough.\n-                final String[] cmd = { \"\/bin\/bash\", \"-c\", \"(\/bin\/sleep 60)\" };\n-                final String[] cmdkill = { \"\/bin\/bash\", \"-c\", \"(\/usr\/bin\/pkill -f \\\"sleep 60\\\")\" };\n+                \/\/ Running the grandchild for 59s should be more than enough.\n+                \/\/ A unique (59s) time is needed to avoid killing other sleep processes.\n+                final String[] cmd = { \"\/bin\/bash\", \"-c\", \"(\/bin\/sleep 59)\" };\n+                final String[] cmdkill = { \"\/bin\/bash\", \"-c\", \"(\/usr\/bin\/pkill -f \\\"sleep 59\\\")\" };\n@@ -2455,0 +2456,4 @@\n+            } else {\n+                long end = System.nanoTime();\n+                if ((end - start) < TimeUnit.MILLISECONDS.toNanos(10))\n+                    fail(\"Test failed: waitFor didn't take long enough (\" + (end - start) + \"ns)\");\n@@ -2456,5 +2461,0 @@\n-\n-            long end = System.nanoTime();\n-            if ((end - start) < TimeUnit.MILLISECONDS.toNanos(10))\n-                fail(\"Test failed: waitFor didn't take long enough (\" + (end - start) + \"ns)\");\n-\n@@ -2617,5 +2617,7 @@\n-                \/\/ Unexpected early exit\n-                long early = System.nanoTime();\n-                System.out.println(\"Process exited too soon (\" + (early - start) + \"ns)\" +\n-                        \", exitValue: \" + p.exitValue());\n-                fail(\"Process exited too soon, exitValue: \" + p.exitValue());\n+                var msg = \"External sleep process terminated early: exitValue: %02x, (%dns)\"\n+                        .formatted(p.exitValue(), (System.nanoTime() - start));\n+                fail(msg);\n+            } else {\n+                long end = System.nanoTime();\n+                if ((end - start) < 500000000)\n+                    fail(\"Test failed: waitFor didn't take long enough (\" + (end - start) + \"ns)\");\n@@ -2623,5 +2625,0 @@\n-\n-            long end = System.nanoTime();\n-            if ((end - start) < 500000000)\n-                fail(\"Test failed: waitFor didn't take long enough (\" + (end - start) + \"ns)\");\n-\n","filename":"test\/jdk\/java\/lang\/ProcessBuilder\/Basic.java","additions":15,"deletions":18,"binary":false,"changes":33,"status":"modified"}]}