{"files":[{"patch":"@@ -2451,1 +2451,3 @@\n-            p.waitFor(10, TimeUnit.MILLISECONDS);\n+            if (p.waitFor(10, TimeUnit.MILLISECONDS)) {\n+                System.out.println(\"WaitFor didn't wait long enough: \" + (System.nanoTime() - start));\n+            };\n@@ -2612,1 +2614,7 @@\n-            p.waitFor(1000, TimeUnit.MILLISECONDS);\n+            if (p.waitFor(1000, TimeUnit.MILLISECONDS)) {\n+                \/\/ Unexpected early exit\n+                long early = System.nanoTime();\n+                System.out.println(\"Process exited too soon (\" + (early - start) + \"ns)\" +\n+                        \", exitValue: \" + p.exitValue());\n+                fail(\"Process exited too soon, exitValue: \" + p.exitValue());\n+            }\n@@ -2638,1 +2646,1 @@\n-            if (exePath.toFile().canExecute()) {\n+            if (Files.isExecutable(exePath)) {\n@@ -2643,3 +2651,6 @@\n-        Path exePath = Path.of(\"\/bin\").resolve(\"sleep\");\n-        if (exePath.toFile().canExecute()) {\n-            return exePath;\n+        List<String> binPaths = List.of(\"\/bin\", \"\/usr\/bin\");\n+        for (String dir : binPaths) {\n+            Path exePath = Path.of(dir).resolve(\"sleep\");\n+            if (Files.isExecutable(exePath)) {\n+                return exePath;\n+            }\n@@ -2660,1 +2671,1 @@\n-            \/\/ Fallback to the JavaChild sleep does a sleep for 10 minutes.\n+            \/\/ Fallback to the JavaChild ; its 'sleep' command is for 10 minutes.\n@@ -2663,3 +2674,0 @@\n-\n-            Path exePath = Path.of(TEST_NATIVEPATH).resolve(\"BasicSleep.exe\");\n-            System.out.println(\"exePath: \" + exePath + \", canExec: \" + exePath.toFile().canExecute());\n@@ -2668,1 +2676,1 @@\n-            System.out.println(\"Using fallback to JavaChild: \" + childArgs);\n+            System.out.println(\"Sleep not found, fallback to JavaChild: \" + childArgs);\n","filename":"test\/jdk\/java\/lang\/ProcessBuilder\/Basic.java","additions":19,"deletions":11,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -37,1 +37,1 @@\n- * Note: the file name prefix \"exe\" identifies the source should be built into SleepMillis(.exe).\n+ * Note: the file name prefix \"exe\" identifies the source should be built into BasicSleep(.exe).\n","filename":"test\/jdk\/java\/lang\/ProcessBuilder\/exeBasicSleep.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}