{"files":[{"patch":"@@ -43,0 +43,1 @@\n+import jdk.internal.vm.annotation.DontInline;\n@@ -2031,0 +2032,13 @@\n+    @ForceInline\n+    final void checkExactAccessMode(VarHandle.AccessDescriptor ad) {\n+        if (exact && accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n+            throwWrongMethodTypeException(ad);\n+        }\n+    }\n+\n+    @DontInline\n+    private final void throwWrongMethodTypeException(VarHandle.AccessDescriptor ad) {\n+        throw new WrongMethodTypeException(\"expected \" + accessModeType(ad.type) + \" but found \"\n+                + ad.symbolicMethodTypeExact);\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/VarHandle.java","additions":14,"deletions":0,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -37,4 +37,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -54,4 +51,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -72,4 +66,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -88,4 +79,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -105,4 +93,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -122,4 +107,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -138,4 +120,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -156,4 +135,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -172,4 +148,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -188,4 +161,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -204,4 +174,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -220,4 +187,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -238,4 +202,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -254,4 +215,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -270,4 +228,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -286,4 +241,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -302,4 +254,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -320,4 +269,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -336,4 +282,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -352,4 +295,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -368,4 +308,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -384,4 +321,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -402,4 +336,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -418,4 +349,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -434,4 +362,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -450,4 +375,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -467,4 +389,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -485,4 +404,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -501,4 +417,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -517,4 +430,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -535,4 +445,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -551,4 +458,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -567,4 +471,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -583,4 +484,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -599,4 +497,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -617,4 +512,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -633,4 +525,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -649,4 +538,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -665,4 +551,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -681,4 +564,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -699,4 +579,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -715,4 +592,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -731,4 +605,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -747,4 +618,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -763,4 +631,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -781,4 +646,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -797,4 +659,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -813,4 +672,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -829,4 +685,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -846,4 +699,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -864,4 +714,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -880,4 +727,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -897,4 +741,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -914,4 +755,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -932,4 +770,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -948,4 +783,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -964,4 +796,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -980,4 +809,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -998,4 +824,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1014,4 +837,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1030,4 +850,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1046,4 +863,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1062,4 +876,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1080,4 +891,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1096,4 +904,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1112,4 +917,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1128,4 +930,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1144,4 +943,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1162,4 +958,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1178,4 +971,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1194,4 +984,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1210,4 +997,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1226,4 +1010,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1244,4 +1025,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1260,4 +1038,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1276,4 +1051,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1292,4 +1064,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1310,4 +1079,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n@@ -1326,4 +1092,1 @@\n-        if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-            throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-                    + ad.symbolicMethodTypeExact);\n-        }\n+        handle.checkExactAccessMode(ad);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/VarHandleGuards.java","additions":79,"deletions":316,"binary":false,"changes":395,"status":"modified"},{"patch":"@@ -689,4 +689,1 @@\n-\/\/                    if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-\/\/                        throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-\/\/                                + ad.symbolicMethodTypeExact);\n-\/\/                    }\n+\/\/                    handle.checkExactAccessMode(ad);\n@@ -707,4 +704,1 @@\n-\/\/                    if (handle.hasInvokeExactBehavior() && handle.accessModeType(ad.type) != ad.symbolicMethodTypeExact) {\n-\/\/                        throw new WrongMethodTypeException(\"expected \" + handle.accessModeType(ad.type) + \" but found \"\n-\/\/                                + ad.symbolicMethodTypeExact);\n-\/\/                    }\n+\/\/                    handle.checkExactAccessMode(ad);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/VarHandles.java","additions":2,"deletions":8,"binary":false,"changes":10,"status":"modified"}]}