[{"commit":{"message":"8290943: Fix several IR test issues on SVE after JDK-8289801\n\nThis patch was motivated by the test failure of\nTestPopCountVectorLong.java on SVE with UseSVE=0 after JDK-8289801.\n\nBoth CPU feature CPU_SVE and VM option UseSVE should be checked to\ndetermine whether the SVE codegen part is available.\n\nHence, 1) if one test case is designed to test multiple backends, we\nshould specify this full check in the \"requires\" annotation, e.g.,\nTestPopCoundVectorLong.java. 2) if one test case is designed to test\nonly SVE backend, we may also specify UseSVE option to \"runWithFlags()\"\nin \"main\" function and only check CPU feature in \"requires\" annotation\npart, e.g., VectorMaskedNotTest.java[1].\n\nThis test failure can be easily resolved via adding the full check in\nthe \"requires\" annotation.\n\nWe further revisited all the SVE-oriented JTREG test cases and found two\npotential issues.\n\n1) AllBitsSetVectorMatchRuleTest.java\nIt's designed to test both NEON and SVE codegen. Since 1) ASIMD is the\nmandatory feature on SVE platforms and 2) SVE codegen would be selected\nby default on SVE platforms, it's no need to require SVE feature.\n\n2) TestPopulateIndex.java\nSimilar to TestPopCountVectorLong.java, this case is expected to fail as\nwell on SVE with UseSVE=0. However, it didn't fail. The root cause is\nthat it's not correct to simply check the \"PopulateIndex\" string because\nthe test name i.e. TestPopulateIndex.java contains this string as well.\nInstead, we turn to check IRNode name.\n\nTesting:\nWe ran the following vector test cases on 1) NEON-only platform, 2) SVE\nplatform with UseSVE=0 specified, 3) SVE platform with UseSVE not\nspecified(default on), 4) x64 platform. All the test cases passed.\n\n```\n  hotspot:compiler\/vectorapi\n  jdk:jdk\/incubator\/vector\n  hotspot:compiler\/vectorization\n```\n\n[1] https:\/\/github.com\/openjdk\/jdk\/blob\/master\/test\/hotspot\/jtreg\/compiler\/vectorapi\/VectorMaskedNotTest.java#L116"},"files":[{"filename":"test\/hotspot\/jtreg\/compiler\/lib\/ir_framework\/IRNode.java"},{"filename":"test\/hotspot\/jtreg\/compiler\/vectorapi\/AllBitsSetVectorMatchRuleTest.java"},{"filename":"test\/hotspot\/jtreg\/compiler\/vectorization\/TestPopCountVectorLong.java"},{"filename":"test\/hotspot\/jtreg\/compiler\/vectorization\/TestPopulateIndex.java"}],"sha":"11c17520c14b571214faaa08fcd492744e4e281c"}]