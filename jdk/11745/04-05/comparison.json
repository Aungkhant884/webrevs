{"files":[{"patch":"@@ -298,8 +298,10 @@\n-  for (SignatureStream ss(this, false); !ss.is_done(); ss.next()) {\n-    if (ss.is_array()) {\n-      print_array(os, ss);\n-    } else if (ss.is_reference()) {\n-      print_class(os, ss);\n-    } else {\n-      os->print(\"%s\", type2name(ss.type()));\n-    }\n+  SignatureStream ss(this, false);\n+  assert(!ss.is_done(), \"must have at least one element in field ref\");\n+  assert(!ss.at_return_type(), \"field ref cannot be a return type\");\n+\n+  if (ss.is_array()) {\n+    print_array(os, ss);\n+  } else if (ss.is_reference()) {\n+    print_class(os, ss);\n+  } else {\n+    os->print(\"%s\", type2name(ss.type()));\n@@ -307,0 +309,4 @@\n+#ifdef ASSERT\n+  ss.next();\n+  assert(ss.is_done(), \"must have at most one element in field ref\");\n+#endif\n","filename":"src\/hotspot\/share\/oops\/symbol.cpp","additions":14,"deletions":8,"binary":false,"changes":22,"status":"modified"}]}