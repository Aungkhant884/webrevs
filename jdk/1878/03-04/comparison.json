{"files":[{"patch":"@@ -66,1 +66,2 @@\n-        SwingUtilities.invokeAndWait(() -> createTestGUI());\n+        try {\n+            SwingUtilities.invokeAndWait(() -> createTestGUI());\n@@ -68,6 +69,12 @@\n-        if (!latch.await(5, TimeUnit.MINUTES)) {\n-            frame.dispose();\n-            throw new RuntimeException(\"Test has timed out!\");\n-        }\n-        if (!passed) {\n-            throw new RuntimeException(\"Test failed!\");\n+            if (!latch.await(5, TimeUnit.MINUTES)) {\n+                throw new RuntimeException(\"Test has timed out!\");\n+            }\n+            if (!passed) {\n+                throw new RuntimeException(\"Test failed!\");\n+            }\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n@@ -98,1 +105,0 @@\n-            frame.dispose();\n@@ -104,1 +110,0 @@\n-            frame.dispose();\n@@ -117,1 +122,0 @@\n-                frame.dispose();\n@@ -121,1 +125,2 @@\n-        frame.setLocation(0, 250);\n+        frame.pack();\n+        frame.setLocationRelativeTo(null);\n","filename":"test\/jdk\/javax\/swing\/JMenuItem\/8031573\/bug8031573.java","additions":16,"deletions":11,"binary":false,"changes":27,"status":"modified"}]}