{"files":[{"patch":"@@ -647,1 +647,1 @@\n-                    flushCloseOutputStream();\n+                    flushAndCloseOutputStream();\n@@ -649,1 +649,1 @@\n-                    closeConnectionSocket();\n+                    closeOpenedSocket();\n@@ -686,1 +686,1 @@\n-    private void flushCloseOutputStream() {\n+    private void flushAndCloseOutputStream() {\n@@ -702,1 +702,1 @@\n-    private void closeConnectionSocket() {\n+    private void closeOpenedSocket() {\n","filename":"src\/java.naming\/share\/classes\/com\/sun\/jndi\/ldap\/Connection.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -46,0 +46,1 @@\n+ * @run main\/othervm SocketCloseTest\n@@ -57,0 +58,5 @@\n+        SocketCloseTest scTest = new SocketCloseTest();\n+        scTest.runCloseSocketScenario();\n+    }\n+\n+    public void runCloseSocketScenario() throws Exception {\n@@ -69,0 +75,1 @@\n+                throw e;\n@@ -71,5 +78,0 @@\n-\n-        OutputAnalyzer outputAnalyzer = ProcessTools.executeTestJvm(\"SocketCloseTest\");\n-        outputAnalyzer.stdoutShouldContain(SOCKET_CLOSED_MSG);\n-        outputAnalyzer.stdoutShouldNotContain(SOCKET_NOT_CLOSED_MSG);\n-        outputAnalyzer.stdoutShouldContain(BAD_FLUSH);\n","filename":"test\/jdk\/com\/sun\/jndi\/ldap\/SocketCloseTest.java","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"}]}