{"files":[{"patch":"@@ -761,1 +761,1 @@\n-  jint state = get_thread_state_base(thread_oop, jt);\n+  jint state = 0;\n@@ -764,0 +764,8 @@\n+    state = (jint)java_lang_Thread::get_thread_status(thread_oop);\n+\n+    \/\/ This is for extra safety. Other bits are not expected nor needed.\n+    state &= (JVMTI_THREAD_STATE_ALIVE | JVMTI_THREAD_STATE_INTERRUPTED);\n+\n+    if (jt->is_carrier_thread_suspended()) {\n+      state |= JVMTI_THREAD_STATE_SUSPENDED;\n+    }\n@@ -767,2 +775,1 @@\n-    \/\/ It is why the RUNNABLE bit is cleared and the WAITING bits are added.\n-    state &= ~JVMTI_THREAD_STATE_RUNNABLE;\n+    \/\/ It is why the RUNNABLE bit is not needed and the WAITING bits are added.\n@@ -770,0 +777,2 @@\n+  } else {\n+    state = get_thread_state_base(thread_oop, jt);\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvBase.cpp","additions":12,"deletions":3,"binary":false,"changes":15,"status":"modified"}]}