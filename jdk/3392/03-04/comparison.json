{"files":[{"patch":"@@ -29,1 +29,0 @@\n- * @library \/test\/lib\n@@ -33,1 +32,1 @@\n- * @run main\/othervm TestNestHostErrorWithMultiThread\n+ * @run main TestNestHostErrorWithMultiThread\n@@ -41,2 +40,2 @@\n-    CountDownLatch latch1 = new CountDownLatch(1);\n-    CountDownLatch latch2 = new CountDownLatch(2);\n+    CountDownLatch runLatch = new CountDownLatch(1);\n+    CountDownLatch startLatch = new CountDownLatch(2);\n@@ -44,2 +43,4 @@\n-    new Thread(new Test(latch1, latch2)).start();\n-    new Thread(new Test(latch1, latch2)).start();\n+    Runnable test = new Test(runLatch, startLatch);\n+\n+    new Thread(test).start();\n+    new Thread(test).start();\n@@ -49,3 +50,5 @@\n-      latch2.await();\n-      latch1.countDown();\n-    } catch (InterruptedException e) {}\n+      startLatch.await();\n+      runLatch.countDown();\n+    } catch (InterruptedException e) {\n+      throw new Error(\"Unexpected interrupt\");\n+    }\n@@ -55,2 +58,2 @@\n-    private CountDownLatch latch1;\n-    private CountDownLatch latch2;\n+    private CountDownLatch runLatch;\n+    private CountDownLatch startLatch;\n@@ -58,3 +61,3 @@\n-    Test(CountDownLatch latch1, CountDownLatch latch2) {\n-      this.latch1 = latch1;\n-      this.latch2 = latch2;\n+    Test(CountDownLatch runLatch, CountDownLatch startLatch) {\n+      this.runLatch = runLatch;\n+      this.startLatch = startLatch;\n@@ -66,1 +69,1 @@\n-        latch2.countDown();\n+        startLatch.countDown();\n@@ -68,1 +71,1 @@\n-        latch1.await();\n+        runLatch.await();\n@@ -71,0 +74,1 @@\n+        throw new Error(\"IllegalAccessError was not thrown as expected\");\n@@ -79,1 +83,3 @@\n-      } catch (InterruptedException e) {}\n+      } catch (InterruptedException e) {\n+        throw new Error(\"Unexpected interrupt\");\n+      }\n","filename":"test\/hotspot\/jtreg\/runtime\/Nestmates\/membership\/TestNestHostErrorWithMultiThread.java","additions":23,"deletions":17,"binary":false,"changes":40,"status":"modified"}]}