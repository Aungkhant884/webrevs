{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -78,1 +78,1 @@\n-  ThreadWXEnable wx(WXExec, thread);\n+  ThreadWXEnable wx(WXExec);\n","filename":"src\/hotspot\/cpu\/aarch64\/jniFastGetField_aarch64.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -208,1 +208,1 @@\n-  ThreadWXEnable wx(WXWrite, thread);\n+  ThreadWXEnable wx(WXWrite);\n@@ -537,0 +537,2 @@\n+#ifdef __APPLE__\n+static THREAD_LOCAL WXMode _wx_state = WXUnknown;\n@@ -542,2 +544,12 @@\n-void os::current_thread_enable_wx(WXMode mode) {\n-  pthread_jit_write_protect_np(mode == WXExec);\n+WXMode os::current_thread_change_wx(WXMode new_state) {\n+  if (_wx_state == WXUnknown) {\n+    _wx_state = WXWrite; \/\/ No way to know but we assume the original state is \"writable, not executable\"\n+  }\n+  WXMode old = _wx_state;\n+  _wx_state = new_state;\n+  pthread_jit_write_protect_np(_wx_state == WXExec);\n+  return old;\n+}\n+\n+void os::current_thread_init_wx() {\n+  current_thread_change_wx(WXWrite);\n@@ -546,0 +558,5 @@\n+void os::current_thread_assert_wx_state(WXMode expected) {\n+  assert(_wx_state == expected, \"wrong state\");\n+}\n+#endif\n+\n","filename":"src\/hotspot\/os_cpu\/bsd_aarch64\/os_bsd_aarch64.cpp","additions":21,"deletions":4,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -1270,1 +1270,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite, current));\n+  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite));\n","filename":"src\/hotspot\/share\/c1\/c1_Runtime1.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -2884,1 +2884,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite, Thread::current());)\n+  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite);)\n","filename":"src\/hotspot\/share\/code\/nmethod.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -55,1 +55,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite, Thread::current()));\n+  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite));\n","filename":"src\/hotspot\/share\/gc\/shared\/barrierSetNMethod.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2021, Red Hat, Inc. All rights reserved.\n+ * Copyright (c) 2019, 2022, Red Hat, Inc. All rights reserved.\n@@ -49,1 +49,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite, Thread::current());)\n+  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite);)\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahBarrierSetNMethod.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -44,1 +44,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite, Thread::current()));\n+  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite));\n","filename":"src\/hotspot\/share\/gc\/z\/zBarrierSetNMethod.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -986,1 +986,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite, current));\n+  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite));\n","filename":"src\/hotspot\/share\/interpreter\/interpreterRuntime.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -111,1 +111,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, thread));       \\\n+  MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite));               \\\n","filename":"src\/hotspot\/share\/jvmci\/jvmciCompilerToVM.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1466,1 +1466,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite, thread));\n+  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite));\n","filename":"src\/hotspot\/share\/opto\/runtime.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -3659,1 +3659,1 @@\n-    MACOS_AARCH64_ONLY(thread->enable_wx(WXExec));\n+    MACOS_AARCH64_ONLY(os::current_thread_change_wx(WXExec));\n@@ -3752,1 +3752,1 @@\n-  MACOS_AARCH64_ONLY(WXMode oldmode = thread->enable_wx(WXWrite));\n+  MACOS_AARCH64_ONLY(WXMode oldmode = os::current_thread_change_wx(WXWrite));\n@@ -3809,1 +3809,1 @@\n-  MACOS_AARCH64_ONLY(thread->init_wx());\n+  MACOS_AARCH64_ONLY(os::current_thread_init_wx());\n@@ -3880,1 +3880,1 @@\n-  MACOS_AARCH64_ONLY(thread->enable_wx(WXExec));\n+  MACOS_AARCH64_ONLY(os::current_thread_change_wx(WXExec));\n@@ -3933,1 +3933,1 @@\n-  MACOS_AARCH64_ONLY(thread->enable_wx(WXWrite));\n+  MACOS_AARCH64_ONLY(os::current_thread_change_wx(WXWrite));\n@@ -3952,2 +3952,1 @@\n-  \/\/ Use os interface as the thread is not a JavaThread anymore.\n-  MACOS_AARCH64_ONLY(os::current_thread_enable_wx(WXExec));\n+  MACOS_AARCH64_ONLY(os::current_thread_change_wx(WXExec));\n","filename":"src\/hotspot\/share\/prims\/jni.cpp","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -107,1 +107,1 @@\n-    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, thr));         \\\n+    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite));                    \\\n","filename":"src\/hotspot\/share\/prims\/jniCheck.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- Copyright (c) 2002, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ Copyright (c) 2002, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -438,1 +438,1 @@\n-    <xsl:text>MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, current_thread));<\/xsl:text>\n+    <xsl:text>MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite));<\/xsl:text>\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnter.xsl","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -179,1 +179,1 @@\n-    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, current_thread));\n+    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite));\n@@ -3140,1 +3140,1 @@\n-    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, thread));\n+    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite));\n@@ -3174,1 +3174,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, thread));\n+  MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite));\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnv.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,1 +38,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXExec, thread));\n+  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXExec));\n","filename":"src\/hotspot\/share\/prims\/universalNativeInvoker.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -106,1 +106,1 @@\n-  MACOS_AARCH64_ONLY(thread->enable_wx(WXExec));\n+  MACOS_AARCH64_ONLY(os::current_thread_change_wx(WXExec));\n@@ -116,1 +116,1 @@\n-  MACOS_AARCH64_ONLY(thread->enable_wx(WXWrite));\n+  MACOS_AARCH64_ONLY(os::current_thread_change_wx(WXWrite));\n@@ -146,1 +146,1 @@\n-    MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite, thread));\n+    MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite));\n","filename":"src\/hotspot\/share\/prims\/universalUpcallHandler.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -385,1 +385,1 @@\n-      MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXExec, thread));\n+      MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXExec));\n@@ -437,1 +437,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXExec, Thread::current()));\n+  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXExec));\n@@ -444,1 +444,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXExec, Thread::current()));\n+  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXExec));\n","filename":"src\/hotspot\/share\/prims\/unsafe.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,1 +36,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable _wx(WXWrite, thread));\n+  MACOS_AARCH64_ONLY(ThreadWXEnable _wx(WXWrite));\n","filename":"src\/hotspot\/share\/prims\/whitebox.inline.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -2371,1 +2371,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite, current));\n+  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite));\n","filename":"src\/hotspot\/share\/runtime\/deoptimization.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -258,2 +258,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite,                    \\\n-                                         JavaThread::current()));    \\\n+  MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite));                  \\\n@@ -283,1 +282,1 @@\n-    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, current));       \\\n+    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite));                \\\n@@ -311,1 +310,1 @@\n-    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, current));       \\\n+    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite));                \\\n@@ -321,1 +320,1 @@\n-    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, current));       \\\n+    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite));                \\\n@@ -358,1 +357,1 @@\n-    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, thread));        \\\n+    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite));                \\\n@@ -383,1 +382,1 @@\n-    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, thread));        \\\n+    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite));                \\\n@@ -393,1 +392,1 @@\n-    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite, thread));        \\\n+    MACOS_AARCH64_ONLY(ThreadWXEnable __wx(WXWrite));                \\\n","filename":"src\/hotspot\/share\/runtime\/interfaceSupport.inline.hpp","additions":7,"deletions":8,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -99,1 +99,1 @@\n-  MACOS_AARCH64_ONLY(_thread->enable_wx(WXExec));\n+  MACOS_AARCH64_ONLY(os::current_thread_change_wx(WXExec));\n@@ -106,1 +106,1 @@\n-  MACOS_AARCH64_ONLY(_thread->enable_wx(WXWrite));\n+  MACOS_AARCH64_ONLY(os::current_thread_change_wx(WXWrite));\n","filename":"src\/hotspot\/share\/runtime\/javaCalls.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -81,0 +81,1 @@\n+  WXUnknown,\n@@ -937,0 +938,1 @@\n+\n@@ -938,1 +940,8 @@\n-  static void current_thread_enable_wx(WXMode mode);\n+  \/\/ returns the previous state\n+  static WXMode current_thread_change_wx(WXMode new_state);\n+\n+  \/\/ initializes the WXMode to WXWrite, as writeable pages are the default here\n+  static void current_thread_init_wx();\n+\n+  static void current_thread_assert_wx_state(WXMode expected);\n+\n","filename":"src\/hotspot\/share\/runtime\/os.hpp","additions":10,"deletions":1,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,5 +37,1 @@\n-#if defined(__APPLE__) && defined(AARCH64)\n-  Thread* thread = Thread::current_or_null_safe();\n-  assert(thread != NULL, \"required for W^X management\");\n-  ThreadWXEnable wx(WXExec, thread);\n-#endif \/\/ __APPLE__ && AARCH64\n+  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXExec);)\n@@ -47,5 +43,1 @@\n-#if defined(__APPLE__) && defined(AARCH64)\n-  Thread* thread = Thread::current_or_null_safe();\n-  assert(thread != NULL, \"required for W^X management\");\n-  ThreadWXEnable wx(WXExec, thread);\n-#endif \/\/ __APPLE__ && AARCH64\n+  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXExec);)\n","filename":"src\/hotspot\/share\/runtime\/safefetch.inline.hpp","additions":3,"deletions":11,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -760,1 +760,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite, thread));\n+  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite));\n","filename":"src\/hotspot\/share\/runtime\/safepoint.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -285,1 +285,1 @@\n-  MACOS_AARCH64_ONLY(os::current_thread_enable_wx(WXExec));\n+  MACOS_AARCH64_ONLY(os::current_thread_change_wx(WXExec));\n@@ -360,1 +360,1 @@\n-  MACOS_AARCH64_ONLY(os::current_thread_enable_wx(WXWrite));\n+  MACOS_AARCH64_ONLY(os::current_thread_change_wx(WXWrite));\n","filename":"src\/hotspot\/share\/runtime\/stubRoutines.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -279,1 +279,1 @@\n-  MACOS_AARCH64_ONLY(DEBUG_ONLY(_wx_init = false));\n+  MACOS_AARCH64_ONLY(DEBUG_ONLY(os::current_thread_init_wx();))\n@@ -341,1 +341,1 @@\n-  MACOS_AARCH64_ONLY(this->init_wx());\n+  MACOS_AARCH64_ONLY(os::current_thread_init_wx());\n@@ -968,1 +968,1 @@\n-    assert_wx_state(WXWrite);\n+    os::current_thread_assert_wx_state(WXWrite);\n@@ -1815,1 +1815,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite, thread));\n+  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite));\n@@ -2682,1 +2682,1 @@\n-  MACOS_AARCH64_ONLY(os::current_thread_enable_wx(WXWrite));\n+  MACOS_AARCH64_ONLY(os::current_thread_change_wx(WXWrite));\n@@ -2790,1 +2790,1 @@\n-  MACOS_AARCH64_ONLY(main_thread->init_wx());\n+  MACOS_AARCH64_ONLY(os::current_thread_init_wx());\n","filename":"src\/hotspot\/share\/runtime\/thread.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -631,12 +631,0 @@\n-#if defined(__APPLE__) && defined(AARCH64)\n- private:\n-  DEBUG_ONLY(bool _wx_init);\n-  WXMode _wx_state;\n- public:\n-  void init_wx();\n-  WXMode enable_wx(WXMode new_state);\n-\n-  void assert_wx_state(WXMode expected) {\n-    assert(_wx_state == expected, \"wrong state\");\n-  }\n-#endif \/\/ __APPLE__ && AARCH64\n","filename":"src\/hotspot\/share\/runtime\/thread.hpp","additions":0,"deletions":12,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -76,21 +76,0 @@\n-#if defined(__APPLE__) && defined(AARCH64)\n-inline void Thread::init_wx() {\n-  assert(this == Thread::current(), \"should only be called for current thread\");\n-  assert(!_wx_init, \"second init\");\n-  _wx_state = WXWrite;\n-  os::current_thread_enable_wx(_wx_state);\n-  DEBUG_ONLY(_wx_init = true);\n-}\n-\n-inline WXMode Thread::enable_wx(WXMode new_state) {\n-  assert(this == Thread::current(), \"should only be called for current thread\");\n-  assert(_wx_init, \"should be inited\");\n-  WXMode old = _wx_state;\n-  if (_wx_state != new_state) {\n-    _wx_state = new_state;\n-    os::current_thread_enable_wx(new_state);\n-  }\n-  return old;\n-}\n-#endif \/\/ __APPLE__ && AARCH64\n-\n","filename":"src\/hotspot\/share\/runtime\/thread.inline.hpp","additions":0,"deletions":21,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,1 @@\n-#include \"runtime\/thread.inline.hpp\"\n+#include \"runtime\/thread.inline.hpp\" \/\/ dependencies require this include\n@@ -36,1 +36,0 @@\n-  Thread* _thread;\n@@ -39,3 +38,2 @@\n-  ThreadWXEnable(WXMode new_mode, Thread* thread) :\n-    _thread(thread),\n-    _old_mode(_thread ? _thread->enable_wx(new_mode) : WXWrite)\n+  ThreadWXEnable(WXMode new_mode) :\n+    _old_mode(os::current_thread_change_wx(new_mode))\n@@ -44,3 +42,1 @@\n-    if (_thread) {\n-      _thread->enable_wx(_old_mode);\n-    }\n+    os::current_thread_change_wx(_old_mode);\n","filename":"src\/hotspot\/share\/runtime\/threadWXSetters.inline.hpp","additions":5,"deletions":9,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -99,1 +99,1 @@\n-    MACOS_AARCH64_ONLY(Thread::current()->enable_wx(WXWrite));\n+    MACOS_AARCH64_ONLY(os::current_thread_change_wx(WXWrite));\n","filename":"test\/hotspot\/gtest\/gtestMain.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -183,1 +183,1 @@\n-  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite, current));\n+  MACOS_AARCH64_ONLY(ThreadWXEnable wx(WXWrite));\n","filename":"test\/hotspot\/gtest\/runtime\/test_threads.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}