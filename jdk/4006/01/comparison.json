{"files":[{"patch":"@@ -291,2 +291,8 @@\n-void report_fatal(const char* file, int line, const char* detail_fmt, ...)\n-{\n+\/\/ Declaration for ATTRIBUTE_PRINTF application.\n+static void report_fatal_impl(VMErrorType error_type, const char* file, int line,\n+                       const char* detail_fmt, va_list detail_args)\n+  ATTRIBUTE_PRINTF(4,0);\n+\n+\/\/ Definition\n+static void report_fatal_impl(VMErrorType error_type, const char* file, int line,\n+                              const char* detail_fmt, va_list detail_args) {\n@@ -294,2 +300,0 @@\n-  va_list detail_args;\n-  va_start(detail_args, detail_fmt);\n@@ -305,1 +309,16 @@\n-  VMError::report_and_die(Thread::current_or_null(), context, file, line, \"fatal error\", detail_fmt, detail_args);\n+  VMError::report_and_die(error_type, \"fatal error\", detail_fmt, detail_args,\n+                          Thread::current_or_null(), NULL, NULL, context,\n+                          file, line, 0);\n+}\n+\n+void report_fatal(const char* file, int line, const char* detail_fmt, ...) {\n+  va_list detail_args;\n+  va_start(detail_args, detail_fmt);\n+  report_fatal_impl(INTERNAL_ERROR, file, line, detail_fmt, detail_args);\n+  va_end(detail_args);\n+}\n+\n+void report_fatal(VMErrorType error_type, const char* file, int line, const char* detail_fmt, ...) {\n+  va_list detail_args;\n+  va_start(detail_args, detail_fmt);\n+  report_fatal_impl(error_type, file, line, detail_fmt, detail_args);\n@@ -363,1 +382,1 @@\n-      fatal(\"OutOfMemory encountered: %s\", message);\n+      report_fatal(OOM_JAVA_HEAP_FATAL, __FILE__, __LINE__, \"OutOfMemory encountered: %s\", message);\n","filename":"src\/hotspot\/share\/utilities\/debug.cpp","additions":25,"deletions":6,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -153,1 +153,2 @@\n-  OOM_MPROTECT_ERROR = 0xe0000003\n+  OOM_MPROTECT_ERROR = 0xe0000003,\n+  OOM_JAVA_HEAP_FATAL = 0xe0000004\n@@ -167,0 +168,1 @@\n+void report_fatal(VMErrorType error_type, const char* file, int line, const char* detail_fmt, ...) ATTRIBUTE_PRINTF(4, 5);\n","filename":"src\/hotspot\/share\/utilities\/debug.hpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -639,1 +639,1 @@\n-     if (should_report_bug(_id) && _verbose) {\n+     if (should_submit_bug_report(_id) && _verbose) {\n@@ -1587,1 +1587,1 @@\n-  static bool skip_bug_url = !should_report_bug(_id);\n+  static bool skip_bug_url = !should_submit_bug_report(_id);\n","filename":"src\/hotspot\/share\/utilities\/vmError.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -112,0 +112,4 @@\n+  static bool should_submit_bug_report(unsigned int id) {\n+    return should_report_bug(id) && (id != OOM_JAVA_HEAP_FATAL);\n+  }\n+\n","filename":"src\/hotspot\/share\/utilities\/vmError.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"}]}