{"files":[{"patch":"@@ -1992,0 +1992,2 @@\n+      \/\/ On macOS >= 10.6 if we define _DARWIN_UNLIMITED_STREAMS or _DARWIN_C_SOURCE\n+      \/\/ (we define _DARWIN_C_SOURCE) we can ask for RLIM_INFINITY\n@@ -1993,8 +1995,0 @@\n-\n-#ifdef __APPLE__\n-      \/\/ Darwin returns RLIM_INFINITY for rlim_max, but fails with EINVAL if\n-      \/\/ you attempt to use RLIM_INFINITY. As per setrlimit(2), OPEN_MAX must\n-      \/\/ be used instead\n-      nbr_files.rlim_cur = MIN(OPEN_MAX, nbr_files.rlim_cur);\n-#endif\n-\n@@ -2002,0 +1996,9 @@\n+#ifdef __APPLE__\n+      if (status != 0) {\n+        \/\/ On macOS < 10.6 Darwin returns RLIM_INFINITY for rlim_max,\n+        \/\/ but fails with EINVAL if you attempt to use RLIM_INFINITY.\n+        \/\/ As per setrlimit(2), OPEN_MAX must be used instead.\n+        nbr_files.rlim_cur = MIN(OPEN_MAX, nbr_files.rlim_cur);\n+        status = setrlimit(RLIMIT_NOFILE, &nbr_files);\n+      }\n+#endif \/\/ #ifdef __APPLE__\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":11,"deletions":8,"binary":false,"changes":19,"status":"modified"}]}