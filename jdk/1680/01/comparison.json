{"files":[{"patch":"@@ -741,0 +741,11 @@\n+\/\/ Implementation may use the same storage for both the sa_sigaction field and the sa_handler field,\n+\/\/ so check for \"sigAct.sa_flags == SA_SIGINFO\"\n+static address get_signal_handler(const struct sigaction* action) {\n+  bool siginfo_flag_set = (action->sa_flags & SA_SIGINFO) != 0;\n+  if (siginfo_flag_set) {\n+    return CAST_FROM_FN_PTR(address, action->sa_sigaction);\n+  } else {\n+    return CAST_FROM_FN_PTR(address, action->sa_handler);\n+  }\n+}\n+\n@@ -762,4 +773,1 @@\n-  address thisHandler = (act.sa_flags & SA_SIGINFO)\n-    ? CAST_FROM_FN_PTR(address, act.sa_sigaction)\n-    : CAST_FROM_FN_PTR(address, act.sa_handler);\n-\n+  address thisHandler = get_signal_handler(&act);\n@@ -1186,3 +1194,1 @@\n-  void* oldhand = oldAct.sa_sigaction\n-                ? CAST_FROM_FN_PTR(void*,  oldAct.sa_sigaction)\n-                : CAST_FROM_FN_PTR(void*,  oldAct.sa_handler);\n+  void* oldhand = get_signal_handler(&oldAct);\n@@ -1231,3 +1237,1 @@\n-  void* oldhand2  = oldAct.sa_sigaction\n-                  ? CAST_FROM_FN_PTR(void*, oldAct.sa_sigaction)\n-                  : CAST_FROM_FN_PTR(void*, oldAct.sa_handler);\n+  void* oldhand2  = get_signal_handler(&oldAct);\n@@ -1343,3 +1347,1 @@\n-  address handler = (sa.sa_flags & SA_SIGINFO)\n-    ? CAST_FROM_FN_PTR(address, sa.sa_sigaction)\n-    : CAST_FROM_FN_PTR(address, sa.sa_handler);\n+  address handler = get_signal_handler(&sa);\n@@ -1410,2 +1412,1 @@\n-  void* ohlr = oact.sa_sigaction ? CAST_FROM_FN_PTR(void*,  oact.sa_sigaction)\n-                                 : CAST_FROM_FN_PTR(void*,  oact.sa_handler);\n+  void* ohlr = get_signal_handler(&oact);\n","filename":"src\/hotspot\/os\/posix\/signals_posix.cpp","additions":16,"deletions":15,"binary":false,"changes":31,"status":"modified"}]}