{"files":[{"patch":"@@ -181,0 +181,1 @@\n+#ifdef _LP64\n@@ -185,0 +186,3 @@\n+#else\n+    assert(is_aligned(arrayOopDesc::header_size_in_bytes(), BytesPerInt), \"must be 4-byte aligned\");\n+#endif\n@@ -200,3 +204,0 @@\n-  \/\/ We align the hdr_size_in_bytes up to 8 bytes here because we clear the\n-  \/\/ possible alignment gap in initialize_header().\n-  hdr_size_in_bytes = align_up(hdr_size_in_bytes, BytesPerLong);\n@@ -223,1 +224,1 @@\n-  const int hdr_size_in_bytes = instanceOopDesc::base_offset_in_bytes();\n+  const int hdr_size_in_bytes = instanceOopDesc::header_size() * HeapWordSize;\n@@ -294,1 +295,4 @@\n-  initialize_body(obj, arr_size, base_offset_in_bytes, len_zero);\n+  \/\/ We align-up the header size to word-size, because we clear the\n+  \/\/ possible alignment gap in initialize_header().\n+  int hdr_size = align_up(base_offset_in_bytes, BytesPerWord);\n+  initialize_body(obj, arr_size, hdr_size, len_zero);\n","filename":"src\/hotspot\/cpu\/x86\/c1_MacroAssembler_x86.cpp","additions":9,"deletions":5,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -654,2 +654,1 @@\n-                       oopDesc::header_size(),\n-                       instance_size, klass_reg, !klass->is_initialized(), slow_path);\n+                       oopDesc::header_size(), instance_size, klass_reg, !klass->is_initialized(), slow_path);\n","filename":"src\/hotspot\/share\/c1\/c1_LIRGenerator.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1,26 +0,0 @@\n-\/*\n- * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\n- *\/\n-\n-#include \"precompiled.hpp\"\n-#include \"oops\/arrayOop.hpp\"\n","filename":"src\/hotspot\/share\/oops\/arrayOop.cpp","additions":0,"deletions":26,"binary":false,"changes":26,"status":"deleted"}]}