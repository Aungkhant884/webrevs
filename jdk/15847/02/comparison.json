{"files":[{"patch":"@@ -31,3 +31,0 @@\n-import java.awt.Dimension;\n-import java.awt.Robot;\n-\n@@ -37,1 +34,0 @@\n-import javax.swing.SwingUtilities;\n@@ -44,9 +40,6 @@\n-    public static void main(String[] args) throws Exception {\n-        SwingUtilities.invokeAndWait(() -> {\n-            JPanel panel = new JPanel();\n-            panel.setPreferredSize(new Dimension(500, 500));\n-            scrollpane = new JScrollPane(panel,\n-                    JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,\n-                    JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);\n-            sbar = scrollpane.getVerticalScrollBar();\n-        });\n+    public static void main(String[] args) {\n+        JPanel panel = new JPanel();\n+        scrollpane = new JScrollPane(panel,\n+                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,\n+                JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);\n+        sbar = scrollpane.getVerticalScrollBar();\n@@ -54,7 +47,2 @@\n-        Robot robot = new Robot();\n-        robot.delay(500);\n-        SwingUtilities.invokeAndWait(() -> {\n-            sbar.addAdjustmentListener(e -> viewChanged = true);\n-            scrollpane.setViewportView(null);\n-        });\n-        robot.delay(500);\n+        sbar.addAdjustmentListener(e -> viewChanged = true);\n+        scrollpane.setViewportView(null);\n@@ -64,1 +52,0 @@\n-        robot.delay(500);\n@@ -66,6 +53,4 @@\n-        SwingUtilities.invokeAndWait(() -> {\n-            if (sbar.getVisibleAmount() > 0) {\n-                throw new RuntimeException(\"Vertical scrollbar is not \" +\n-                        \"updated when viewport is replaced\");\n-            }\n-        });\n+        if (sbar.getVisibleAmount() > 0) {\n+            throw new RuntimeException(\"Vertical scrollbar is not \" +\n+                    \"updated when viewport is replaced\");\n+        }\n","filename":"test\/jdk\/javax\/swing\/JViewport\/bug4546474.java","additions":12,"deletions":27,"binary":false,"changes":39,"status":"modified"}]}