{"files":[{"patch":"@@ -31,3 +31,0 @@\n-import java.awt.Dimension;\n-import java.awt.Robot;\n-\n@@ -37,1 +34,0 @@\n-import javax.swing.SwingUtilities;\n@@ -42,1 +38,0 @@\n-    static volatile boolean viewChanged;\n@@ -44,9 +39,6 @@\n-    public static void main(String[] args) throws Exception {\n-        SwingUtilities.invokeAndWait(() -> {\n-            JPanel panel = new JPanel();\n-            panel.setPreferredSize(new Dimension(500, 500));\n-            scrollpane = new JScrollPane(panel,\n-                    JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,\n-                    JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);\n-            sbar = scrollpane.getVerticalScrollBar();\n-        });\n+    public static void main(String[] args) {\n+        JPanel panel = new JPanel();\n+        scrollpane = new JScrollPane(panel,\n+                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,\n+                JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);\n+        sbar = scrollpane.getVerticalScrollBar();\n@@ -54,11 +46,1 @@\n-        Robot robot = new Robot();\n-        robot.delay(500);\n-        SwingUtilities.invokeAndWait(() -> {\n-            sbar.addAdjustmentListener(e -> viewChanged = true);\n-            scrollpane.setViewportView(null);\n-        });\n-        robot.delay(500);\n-        if (!viewChanged) {\n-            viewChanged = true;\n-        }\n-        robot.delay(500);\n+        scrollpane.setViewportView(null);\n@@ -66,6 +48,4 @@\n-        SwingUtilities.invokeAndWait(() -> {\n-            if (sbar.getVisibleAmount() > 0) {\n-                throw new RuntimeException(\"Vertical scrollbar is not \" +\n-                        \"updated when viewport is replaced\");\n-            }\n-        });\n+        if (sbar.getVisibleAmount() > 0) {\n+            throw new RuntimeException(\"Vertical scrollbar is not \" +\n+                    \"updated when viewport is replaced\");\n+        }\n","filename":"test\/jdk\/javax\/swing\/JViewport\/bug4546474.java","additions":11,"deletions":31,"binary":false,"changes":42,"status":"modified"}]}