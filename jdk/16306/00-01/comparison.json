{"files":[{"patch":"@@ -33,1 +33,1 @@\n- * @run main\/othervm -Xcomp -XX:CompileOnly=compiler.regalloc.TestNodeRegArrayOverflow::test\n+ * @run main\/othervm -Xcomp -XX:CompileOnly=compiler.regalloc.TestNodeRegArrayOverflow::testWithCompilerUnrolling\n@@ -35,1 +35,4 @@\n-                     compiler.regalloc.TestNodeRegArrayOverflow\n+                     compiler.regalloc.TestNodeRegArrayOverflow compiler\n+ * @run main\/othervm -Xcomp -XX:CompileOnly=compiler.regalloc.TestNodeRegArrayOverflow::testWithManualUnrolling\n+                     -XX:CompileCommand=dontinline,compiler.regalloc.TestNodeRegArrayOverflow::dontInline\n+                     compiler.regalloc.TestNodeRegArrayOverflow manual\n@@ -44,1 +47,1 @@\n-    static float test(float inc) {\n+    static float testWithCompilerUnrolling(float inc) {\n@@ -64,0 +67,520 @@\n+    \/\/ This test reproduces the same failure as 'testWithCompilerUnrolling'\n+    \/\/ without relying on loop transformations.\n+    static float testWithManualUnrolling(float inc) {\n+        int i = 0, j = 0;\n+        float f = dontInline();\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        f += inc;\n+        return f;\n+    }\n+\n@@ -65,1 +588,10 @@\n-        test(0);\n+        switch (args[0]) {\n+        case \"compiler\":\n+            testWithCompilerUnrolling(0);\n+            break;\n+        case \"manual\":\n+            testWithManualUnrolling(0);\n+            break;\n+        default:\n+            System.out.println(\"invalid mode\");\n+        }\n","filename":"test\/hotspot\/jtreg\/compiler\/regalloc\/TestNodeRegArrayOverflow.java","additions":536,"deletions":4,"binary":false,"changes":540,"status":"modified"}]}