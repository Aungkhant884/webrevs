{"files":[{"patch":"@@ -239,1 +239,9 @@\n-            runTest(withCore, cmds, expStrMap);\n+            String findpcOutput = runTest(withCore, cmds, expStrMap);\n+\n+            \/\/ Determine if we have symbol support. Currently we assume yes except on windows.\n+            boolean hasSymbols = true;\n+            if (Platform.isWindows()) {\n+                if (findpcOutput.indexOf(\"jvm!JavaThread::`vftable'\") == -1) {\n+                    hasSymbols = false;\n+                }\n+            }\n@@ -245,1 +253,5 @@\n-            String findsymOutput = runTest(withCore, cmds, null);\n+            expStrMap = new HashMap<>();\n+            if (!hasSymbols) {\n+                expStrMap.put(cmdStr, List.of(\"Symbol not found\"));\n+            }\n+            String findsymOutput = runTest(withCore, cmds, expStrMap);\n@@ -249,11 +261,14 @@\n-            parts = findsymOutput.split(\"findsym \" + symbol + linesep);\n-            parts = parts[1].split(\":\");\n-            String findsymAddress = parts[0].split(linesep)[0];\n-            cmdStr = \"findpc \" + findsymAddress;\n-            cmds = List.of(cmdStr);\n-            expStrMap = new HashMap<>();\n-            if (Platform.isOSX() && !withCore) {\n-                \/\/ address -> symbol lookups not supported with OSX live process\n-                expStrMap.put(cmdStr, List.of(\"Address \" + findsymAddress + \": In unknown location\"));\n-            } else {\n-                expStrMap.put(cmdStr, List.of(\"Address \" + findsymAddress + \": .*\" + symbol));\n+            if (hasSymbols) {\n+                parts = findsymOutput.split(\"findsym \" + symbol + linesep);\n+                parts = parts[1].split(\":\");\n+                String findsymAddress = parts[0].split(linesep)[0];\n+                cmdStr = \"findpc \" + findsymAddress;\n+                cmds = List.of(cmdStr);\n+                expStrMap = new HashMap<>();\n+                if (Platform.isOSX() && !withCore) {\n+                    \/\/ address -> symbol lookups not supported with OSX live process\n+                    expStrMap.put(cmdStr, List.of(\"Address \" + findsymAddress + \": In unknown location\"));\n+                } else {\n+                    expStrMap.put(cmdStr, List.of(\"Address \" + findsymAddress + \": .*\" + symbol));\n+                }\n+                runTest(withCore, cmds, expStrMap);\n@@ -261,1 +276,0 @@\n-            runTest(withCore, cmds, expStrMap);\n","filename":"test\/hotspot\/jtreg\/serviceability\/sa\/ClhsdbFindPC.java","additions":28,"deletions":14,"binary":false,"changes":42,"status":"modified"}]}