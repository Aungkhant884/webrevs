{"files":[{"patch":"@@ -141,1 +141,1 @@\n-  static const uintptr_t hash_mask_in_place_compact = hash_mask_compact << hash_shift_compact;\n+  static const uintptr_t hash_mask_compact_in_place = hash_mask_compact << hash_shift_compact;\n@@ -236,1 +236,1 @@\n-      uintptr_t tmp = value() & (~hash_mask_in_place_compact);\n+      uintptr_t tmp = value() & (~hash_mask_compact_in_place);\n","filename":"src\/hotspot\/share\/oops\/markWord.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2588,0 +2588,1 @@\n+  declare_constant(markWord::hash_bits_compact)                           \\\n@@ -2592,0 +2593,1 @@\n+  declare_constant(markWord::hash_shift_compact)                          \\\n@@ -2600,0 +2602,2 @@\n+  declare_constant(markWord::hash_mask_compact)                           \\\n+  declare_constant(markWord::hash_mask_compact_in_place)                  \\\n","filename":"src\/hotspot\/share\/runtime\/vmStructs.cpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -54,0 +54,1 @@\n+    hashBitsCompact     = db.lookupLongConstant(\"markWord::hash_bits_compact\").longValue();\n@@ -57,0 +58,1 @@\n+    hashShiftCompact    = db.lookupLongConstant(\"markWord::hash_shift_compact\").longValue();\n@@ -66,0 +68,2 @@\n+    hashMaskCompact     = db.lookupLongConstant(\"markWord::hash_mask_compact\").longValue();\n+    hashMaskCompactInPlace = db.lookupLongConstant(\"markWord::hash_mask_compact_in_place\").longValue();\n@@ -84,0 +88,1 @@\n+  private static long hashBitsCompact;\n@@ -88,0 +93,1 @@\n+  private static long hashShiftCompact;\n@@ -96,0 +102,2 @@\n+  private static long hashMaskCompact;\n+  private static long hashMaskCompactInPlace;\n@@ -185,1 +193,5 @@\n-    return Bits.maskBitsLong(value() >> hashShift, hashMask);\n+    if (VM.getVM().isCompactObjectHeadersEnabled()) {\n+      return Bits.maskBitsLong(value() >> hashShiftCompact, hashMaskCompact);\n+    } else {\n+      return Bits.maskBitsLong(value() >> hashShift, hashMask);\n+    }\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/oops\/Mark.java","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"}]}