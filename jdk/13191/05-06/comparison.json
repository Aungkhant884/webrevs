{"files":[{"patch":"@@ -2107,1 +2107,1 @@\n-    if (op.gc_succeeded() || cause == GCCause::_g1_periodic_collection) {\n+    if (!GCCause::is_explicit_gc(cause) || op.gc_succeeded()) {\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -556,1 +556,1 @@\n-    if (!VM_ParallelGCSystemGC::is_cause_full(cause) || op.full_gc_succeeded()) {\n+    if (!GCCause::is_explicit_gc(cause) || op.full_gc_succeeded()) {\n","filename":"src\/hotspot\/share\/gc\/parallel\/parallelScavengeHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -98,0 +98,6 @@\n+  inline static bool is_explicit_gc(GCCause::Cause cause) {\n+    return (cause == GCCause::_java_lang_system_gc ||\n+            cause == GCCause::_dcmd_gc_run ||\n+            cause == GCCause::_wb_full_gc);\n+  }\n+\n","filename":"src\/hotspot\/share\/gc\/shared\/gcCause.hpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -804,1 +804,1 @@\n-    if (should_run_young_gc) {\n+    if (!GCCause::is_explicit_gc(cause)) {\n","filename":"src\/hotspot\/share\/gc\/shared\/genCollectedHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n- * @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xms3g -Xmx3g -Xmn2g -Xlog:gc TestJNICriticalStressTest 30 4 1 G1\n+ * @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Xms3g -Xmx3g -Xmn2g -Xlog:gc TestJNICriticalStressTest 30 4 4 G1\n@@ -44,1 +44,1 @@\n- * @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -XX:+UseParallelGC -Xms3g -Xmx3g -Xmn2g -Xlog:gc TestJNICriticalStressTest 30 4 1 Parallel\n+ * @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -XX:+UseParallelGC -Xms3g -Xmx3g -Xmn2g -Xlog:gc TestJNICriticalStressTest 30 4 4 Parallel\n@@ -55,1 +55,1 @@\n- * @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -XX:+UseSerialGC -Xms3g -Xmx3g -Xmn2g -Xlog:gc TestJNICriticalStressTest 30 4 1 Serial\n+ * @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -XX:+UseSerialGC -Xms3g -Xmx3g -Xmn2g -Xlog:gc TestJNICriticalStressTest 30 4 4 Serial\n","filename":"test\/hotspot\/jtreg\/gc\/TestJNICriticalStressTest.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}