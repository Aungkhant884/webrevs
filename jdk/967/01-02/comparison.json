{"files":[{"patch":"@@ -1759,1 +1759,1 @@\n-      JvmtiTagMap::set_needs_processing();\n+      JvmtiTagMap::set_needs_rehashing();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -420,1 +420,1 @@\n-  JvmtiTagMap::set_needs_processing();\n+  JvmtiTagMap::set_needs_rehashing();\n","filename":"src\/hotspot\/share\/gc\/z\/zHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -346,1 +346,1 @@\n-  check_hashmap(false);\n+  check_hashmap(\/*post_events*\/ false);\n@@ -381,1 +381,1 @@\n-  check_hashmap(false);\n+  check_hashmap(\/*post_events*\/ false);\n@@ -1039,1 +1039,1 @@\n-  if (obj != NULL && obj->klass()->java_mirror() == NULL) {\n+  if (obj != NULL &&   obj->klass()->java_mirror() == NULL) {\n@@ -1155,1 +1155,0 @@\n-  log_info(jvmti, table)(\"TagMap table needs posting before GetObjectsWithTags\");\n@@ -1165,0 +1164,1 @@\n+    log_info(jvmti, table)(\"TagMap table needs posting before GetObjectsWithTags\");\n@@ -2980,1 +2980,1 @@\n-void JvmtiTagMap::set_needs_processing() {\n+void JvmtiTagMap::set_needs_rehashing() {\n@@ -3003,2 +3003,1 @@\n-          MutexLocker ml(tag_map->lock(), Mutex::_no_safepoint_check_flag);\n-          tag_map->hashmap()->unlink_and_post(tag_map->env());\n+          tag_map->unlink_and_post_locked();\n","filename":"src\/hotspot\/share\/prims\/jvmtiTagMap.cpp","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -113,1 +113,1 @@\n-  static void set_needs_processing() NOT_JVMTI_RETURN;\n+  static void set_needs_rehashing() NOT_JVMTI_RETURN;\n","filename":"src\/hotspot\/share\/prims\/jvmtiTagMap.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -52,1 +52,0 @@\n-\n@@ -165,0 +164,1 @@\n+\n@@ -224,1 +224,0 @@\n-\n@@ -258,1 +257,1 @@\n-  for (int i = 0; i < moved_entries.length(); i++) {\n+  for (int i = 0; i < rehash_len; i++) {\n","filename":"src\/hotspot\/share\/prims\/jvmtiTagMapTable.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -75,0 +75,1 @@\n+\n@@ -100,1 +101,0 @@\n-\n","filename":"src\/hotspot\/share\/prims\/jvmtiTagMapTable.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -656,1 +656,0 @@\n-    printf(\"Object free events %d\\n\", ObjectFreeEventsCount);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/capability\/CM02\/cm02t001\/cm02t001.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}