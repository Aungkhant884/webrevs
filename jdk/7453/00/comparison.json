{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -387,4 +387,9 @@\n-  }\n-  if (block != NULL) {\n-    Atomic::dec(&_blocks_allocated);\n-    delete block;\n+  } else {\n+    DEBUG_ONLY(block->set_pop_frame_link(NULL));\n+    while (block != NULL) {\n+      JNIHandleBlock* next = block->_next;\n+      Atomic::dec(&_blocks_allocated);\n+      assert(block->pop_frame_link() == NULL, \"pop_frame_link should be NULL\");\n+      delete block;\n+      block = next;\n+    }\n","filename":"src\/hotspot\/share\/runtime\/jniHandles.cpp","additions":10,"deletions":5,"binary":false,"changes":15,"status":"modified"}]}