{"files":[{"patch":"@@ -41,0 +41,1 @@\n+#include \"runtime\/keepStackGCProcessed.hpp\"\n@@ -409,0 +410,1 @@\n+    KeepStackGCProcessedMark keep_stack(THREAD->as_Java_thread());\n@@ -491,1 +493,1 @@\n-    StackWatermarkSet::finish_processing(jt, NULL \/* context *\/, StackWatermarkKind::gc);\n+    KeepStackGCProcessedMark keep_stack(jt);\n","filename":"src\/hotspot\/share\/prims\/stackwalk.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -55,1 +55,1 @@\n-  our_watermark->link_watermark(NULL);\n+  our_watermark->unlink_watermark();\n","filename":"src\/hotspot\/share\/runtime\/keepStackGCProcessed.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -253,1 +253,3 @@\n-  assert(watermark == NULL || _linked_watermark == NULL, \"nesting not supported\");\n+  if (watermark != NULL) {\n+    watermark->_linked_watermark = _linked_watermark;\n+  }\n@@ -257,0 +259,6 @@\n+void StackWatermark::unlink_watermark() {\n+  if (_linked_watermark != NULL) {\n+    _linked_watermark = _linked_watermark->_linked_watermark;\n+  }\n+}\n+\n","filename":"src\/hotspot\/share\/runtime\/stackWatermark.cpp","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -133,0 +133,1 @@\n+  void unlink_watermark();\n","filename":"src\/hotspot\/share\/runtime\/stackWatermark.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}