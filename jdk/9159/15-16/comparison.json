{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2022, Red Hat, Inc.\n@@ -27,2 +27,2 @@\n- * @summary This Sample application attempts to authenticate a user\n- * and reports whether or not the authentication was successful.\n+ * @summary This test case attempts to verify whether call stack trace is\n+ * printed when JAAS optional login fails when debug is true.\n@@ -45,7 +45,1 @@\n-        login(\"cross-platform\",\n-                UNIX_MODULE, \"optional\", \"debug=true\",\n-                NT_MODULE, \"optional\", \"debug=true\");\n-    }\n-\n-    static void login(String test, String... conf) throws Exception {\n-        System.out.println(\"Testing \" + test + \"...\");\n+\tSystem.out.println(\"Testing cross-platform\");\n@@ -61,1 +55,1 @@\n-        Files.write(java.nio.file.Path.of(test), config.toString().getBytes());\n+        Files.writeString(java.nio.file.Path.of(\"cross-platform\"), config.toString());\n@@ -63,3 +57,1 @@\n-        \/\/ Must be called. Configuration has an internal static field.\n-        Configuration.setConfiguration(null);\n-        System.setProperty(\"java.security.auth.login.config\", test);\n+        System.setProperty(\"java.security.auth.login.config\", \"cross-platform\");\n@@ -68,2 +60,2 @@\n-        PrintStream ps = new PrintStream(stream);\n-        System.setErr(ps);\n+        PrintStream ps = System.err;\n+        System.setErr(new PrintStream(new PrintStream(stream)));\n@@ -78,0 +70,2 @@\n+        } finally {\n+            System.setErr(ps);\n","filename":"test\/jdk\/javax\/security\/auth\/login\/LoginContext\/OptionalJaas\/UnixNTPlatform.java","additions":10,"deletions":16,"binary":false,"changes":26,"status":"modified"}]}