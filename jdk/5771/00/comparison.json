{"files":[{"patch":"@@ -56,0 +56,1 @@\n+#include <string.h>\n@@ -1431,0 +1432,30 @@\n+#define FILE_ENCODING \"-Dfile.encoding=\"\n+static char* prgnames[] = {\n+    \"java\",\n+    \"javaw\",\n+    NULL\n+};\n+static void\n+AddFileEncoding()\n+{\n+    size_t felen = strlen(FILE_ENCODING);\n+    int i = 0;\n+    int flg = 0;\n+    for (i = 0; prgnames[i] != NULL; i++) {\n+        if (strcmp(_program_name, prgnames[i]) == 0) {\n+            flg = 1;\n+            break;\n+        }\n+    }\n+    if (flg == 0) {\n+        for (i = 0; i < numOptions; i++) {\n+            if (strncmp(options[i].optionString, FILE_ENCODING, felen) == 0) {\n+                break;\n+            }\n+        }\n+        if (i == numOptions) {\n+            AddOption(FILE_ENCODING \"COMPAT\", NULL);\n+        }\n+    }\n+}\n+\n@@ -1441,0 +1472,1 @@\n+    AddFileEncoding();\n","filename":"src\/java.base\/share\/native\/libjli\/java.c","additions":32,"deletions":0,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -89,0 +89,2 @@\n+        remoteVMOptions.add(\"-Dfile.encoding=\"\n+            +System.getProperty(\"file.encoding\"));\n","filename":"src\/jdk.jshell\/share\/classes\/jdk\/jshell\/execution\/JdiInitiator.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"}]}