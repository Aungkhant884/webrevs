{"files":[{"patch":"@@ -499,5 +499,1 @@\n-        BOOL result = item->m_trayIcon->SendTrayMessage(NIM_ADD);\n-        \/\/ 6270114: Instructs the taskbar to behave according to the Shell version 5.0\n-        if (result) {\n-            item->m_trayIcon->SendTrayMessage(NIM_SETVERSION);\n-        }\n+        item->m_trayIcon->AddTrayIcon();\n@@ -751,1 +747,1 @@\n-    SendTrayMessage(NIM_MODIFY);\n+    ModifyTrayIcon();\n@@ -819,4 +815,4 @@\n-    BOOL result = trayIcon->SendTrayMessage(jupdate == JNI_TRUE ? NIM_MODIFY : NIM_ADD);\n-    \/\/ 6270114: Instructs the taskbar to behave according to the Shell version 5.0\n-    if (result && jupdate == JNI_FALSE) {\n-        trayIcon->SendTrayMessage(NIM_SETVERSION);\n+    if (jupdate == JNI_TRUE) {\n+        trayIcon->ModifyTrayIcon();\n+    } else {\n+        trayIcon->AddTrayIcon();\n@@ -871,1 +867,1 @@\n-    SendTrayMessage(NIM_MODIFY);\n+    ModifyTrayIcon();\n@@ -918,0 +914,14 @@\n+void AwtTrayIcon::AddTrayIcon()\n+{\n+    BOOL result = SendTrayMessage(NIM_ADD);\n+    \/\/ 6270114: Instructs the taskbar to behave according to the Shell version 5.0\n+    if (result) {\n+        SendTrayMessage(NIM_SETVERSION);\n+    }\n+}\n+\n+void AwtTrayIcon::ModifyTrayIcon()\n+{\n+    SendTrayMessage(NIM_MODIFY);\n+}\n+\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/awt_TrayIcon.cpp","additions":21,"deletions":11,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -157,0 +157,3 @@\n+    void AddTrayIcon();\n+    void ModifyTrayIcon();\n+\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/awt_TrayIcon.h","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}