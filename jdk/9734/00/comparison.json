{"files":[{"patch":"@@ -252,0 +252,2 @@\n+  OopHandle class_loader_handle() const { return _class_loader; }\n+\n","filename":"src\/hotspot\/share\/classfile\/classLoaderData.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -502,0 +502,1 @@\n+  SystemDictionary::set_platform_loader(platform_loader_data);\n@@ -505,0 +506,1 @@\n+  SystemDictionary::set_system_loader(system_loader_data);\n","filename":"src\/hotspot\/share\/classfile\/modules.cpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -125,5 +125,0 @@\n-  JavaCalls::call_static(&result,\n-                         class_loader_klass,\n-                         vmSymbols::getSystemClassLoader_name(),\n-                         vmSymbols::void_classloader_signature(),\n-                         CHECK);\n@@ -131,1 +126,6 @@\n-  _java_system_loader = OopHandle(Universe::vm_global(), result.get_oop());\n+  if (_java_system_loader.is_empty()) {\n+    JavaCalls::call_static(&result,\n+                           class_loader_klass,\n+                           vmSymbols::getSystemClassLoader_name(),\n+                           vmSymbols::void_classloader_signature(),\n+                           CHECK);\n@@ -133,5 +133,9 @@\n-  JavaCalls::call_static(&result,\n-                         class_loader_klass,\n-                         vmSymbols::getPlatformClassLoader_name(),\n-                         vmSymbols::void_classloader_signature(),\n-                         CHECK);\n+    _java_system_loader = OopHandle(Universe::vm_global(), result.get_oop());\n+  }\n+\n+  if (_java_platform_loader.is_empty()) {\n+    JavaCalls::call_static(&result,\n+                           class_loader_klass,\n+                           vmSymbols::getPlatformClassLoader_name(),\n+                           vmSymbols::void_classloader_signature(),\n+                           CHECK);\n@@ -139,1 +143,2 @@\n-  _java_platform_loader = OopHandle(Universe::vm_global(), result.get_oop());\n+    _java_platform_loader = OopHandle(Universe::vm_global(), result.get_oop());\n+  }\n@@ -152,0 +157,12 @@\n+void SystemDictionary::set_system_loader(ClassLoaderData *cld) {\n+  if (_java_system_loader.is_empty()) {\n+    _java_system_loader = cld->class_loader_handle();\n+  }\n+}\n+\n+void SystemDictionary::set_platform_loader(ClassLoaderData *cld) {\n+  if (_java_platform_loader.is_empty()) {\n+    _java_platform_loader = cld->class_loader_handle();\n+  }\n+}\n+\n","filename":"src\/hotspot\/share\/classfile\/systemDictionary.cpp","additions":29,"deletions":12,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -221,0 +221,3 @@\n+  static void set_system_loader(ClassLoaderData *cld);\n+  static void set_platform_loader(ClassLoaderData *cld);\n+\n","filename":"src\/hotspot\/share\/classfile\/systemDictionary.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}