{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -88,5 +88,8 @@\n-    public synchronized void error(String msg, Exception ex, int code) {\n-        if (reported) {\n-            \/\/ We only report the first error, to avoid clogging\n-            \/\/ the screen.\n-            return;\n+    public void error(String msg, Exception ex, int code) {\n+        synchronized (this) {\n+            if (reported) {\n+                \/\/ We only report the first error, to avoid clogging\n+                \/\/ the screen.\n+                return;\n+            }\n+            reported = true;\n@@ -94,1 +97,0 @@\n-        reported = true;\n","filename":"src\/java.logging\/share\/classes\/java\/util\/logging\/ErrorManager.java","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -192,1 +192,15 @@\n-    public synchronized void setFormatter(Formatter newFormatter) throws SecurityException {\n+    public void setFormatter(Formatter newFormatter) throws SecurityException {\n+        if (tryUseLock()) {\n+            try {\n+                setFormatter0(newFormatter);\n+            } finally {\n+                unlock();\n+            }\n+        } else {\n+            synchronized (this) {\n+                setFormatter0(newFormatter);\n+            }\n+        }\n+    }\n+\n+    private void setFormatter0(Formatter newFormatter) throws SecurityException {\n@@ -218,1 +232,16 @@\n-    public synchronized void setEncoding(String encoding)\n+    public void setEncoding(String encoding)\n+            throws SecurityException, java.io.UnsupportedEncodingException {\n+        if (tryUseLock()) {\n+            try {\n+                setEncoding0(encoding);\n+            } finally {\n+                unlock();\n+            }\n+        } else {\n+            synchronized (this) {\n+                setEncoding0(encoding);\n+            }\n+        }\n+    }\n+\n+    private void setEncoding0(String encoding)\n@@ -254,1 +283,15 @@\n-    public synchronized void setFilter(Filter newFilter) throws SecurityException {\n+    public void setFilter(Filter newFilter) throws SecurityException {\n+        if (tryUseLock()) {\n+            try {\n+                setFilter0(newFilter);\n+            } finally {\n+                unlock();\n+            }\n+        } else {\n+            synchronized (this) {\n+                setFilter0(newFilter);\n+            }\n+        }\n+    }\n+\n+    private void setFilter0(Filter newFilter) throws SecurityException {\n@@ -278,1 +321,15 @@\n-    public synchronized void setErrorManager(ErrorManager em) {\n+    public void setErrorManager(ErrorManager em) {\n+        if (tryUseLock()) {\n+            try {\n+                setErrorManager0(em);\n+            } finally {\n+                unlock();\n+            }\n+        } else {\n+            synchronized (this) {\n+                setErrorManager0(em);\n+            }\n+        }\n+    }\n+\n+    private void setErrorManager0(ErrorManager em) {\n@@ -330,1 +387,15 @@\n-    public synchronized void setLevel(Level newLevel) throws SecurityException {\n+    public void setLevel(Level newLevel) throws SecurityException {\n+        if (tryUseLock()) {\n+            try {\n+                setLevel0(newLevel);\n+            } finally {\n+                unlock();\n+            }\n+        } else {\n+            synchronized (this) {\n+                setLevel0(newLevel);\n+            }\n+        }\n+    }\n+\n+    private void setLevel0(Level newLevel) throws SecurityException {\n@@ -338,0 +409,2 @@\n+\n+\n","filename":"src\/java.logging\/share\/classes\/java\/util\/logging\/Handler.java","additions":78,"deletions":5,"binary":false,"changes":83,"status":"modified"},{"patch":"@@ -229,1 +229,0 @@\n-\n@@ -276,1 +275,15 @@\n-    public synchronized void setPushLevel(Level newLevel) throws SecurityException {\n+    public void setPushLevel(Level newLevel) throws SecurityException {\n+        if (tryUseLock()) {\n+            try {\n+                setPushLevel0(newLevel);\n+            } finally {\n+                unlock();\n+            }\n+        } else {\n+            synchronized (this) {\n+                setPushLevel0(newLevel);\n+            }\n+        }\n+    }\n+\n+    private void setPushLevel0(Level newLevel) throws SecurityException {\n","filename":"src\/java.logging\/share\/classes\/java\/util\/logging\/MemoryHandler.java","additions":15,"deletions":2,"binary":false,"changes":17,"status":"modified"}]}