{"files":[{"patch":"@@ -65,0 +65,2 @@\n+\n+import jdk.internal.net.http.common.OperationTrackers.Tracker;\n@@ -95,0 +97,2 @@\n+    static final ReferenceTracker TRACKER = ReferenceTracker.INSTANCE;\n+\n@@ -133,1 +137,1 @@\n-                                         .build();\n+                    .build();\n@@ -138,0 +142,19 @@\n+\n+            \/\/ if sameClient we will reuse the client for the next\n+            \/\/ operation, so there's nothing more to do.\n+            if (sameClient) continue;\n+\n+            \/\/ if no error and not same client then wait for the\n+            \/\/ client to be GC'ed before performing the nex operation\n+            Tracker tracker = TRACKER.getTracker(client);\n+            client = null;\n+            System.gc();\n+            AssertionError error = TRACKER.check(tracker, 1500);\n+            if (error != null) throw error; \/\/ the client didn't shut down properly\n+        }\n+        if (sameClient) {\n+            Tracker tracker = TRACKER.getTracker(client);\n+            client = null;\n+            System.gc();\n+            AssertionError error = TRACKER.check(tracker,1500);\n+            if (error != null) throw error; \/\/ the client didn't shut down properly\n","filename":"test\/jdk\/java\/net\/httpclient\/MappingResponseSubscriber.java","additions":24,"deletions":1,"binary":false,"changes":25,"status":"modified"}]}