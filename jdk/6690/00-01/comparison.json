{"files":[{"patch":"@@ -69,0 +69,5 @@\n+ * @run testng\/othervm\/java.security.policy=httpclient-localaddr-security.policy\n+ *      -Djdk.httpclient.HttpClient.log=frames,ssl,requests,responses,errors\n+ *      -Djdk.internal.httpclient.debug=true\n+ *      HttpClientLocalAddrTest\n+ *\n","filename":"test\/jdk\/java\/net\/httpclient\/HttpClientLocalAddrTest.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -0,0 +1,64 @@\n+\/\/\n+\/\/ Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+\/\/ DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+\/\/\n+\/\/ This code is free software; you can redistribute it and\/or modify it\n+\/\/ under the terms of the GNU General Public License version 2 only, as\n+\/\/ published by the Free Software Foundation.\n+\/\/\n+\/\/ This code is distributed in the hope that it will be useful, but WITHOUT\n+\/\/ ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+\/\/ FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+\/\/ version 2 for more details (a copy is included in the LICENSE file that\n+\/\/ accompanied this code).\n+\/\/\n+\/\/ You should have received a copy of the GNU General Public License version\n+\/\/ 2 along with this work; if not, write to the Free Software Foundation,\n+\/\/ Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+\/\/\n+\/\/ Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+\/\/ or visit www.oracle.com if you need additional information or have any\n+\/\/ questions.\n+\/\/\n+\n+\/\/ for JTwork\/classes\/0\/test\/lib\/jdk\/test\/lib\/net\/SimpleSSLContext.class\n+grant codeBase \"file:${test.classes}\/..\/..\/..\/..\/test\/lib\/-\" {\n+    permission java.util.PropertyPermission \"test.src.path\", \"read\";\n+    permission java.io.FilePermission \"${test.src}\/..\/..\/..\/..\/lib\/jdk\/test\/lib\/net\/testkeys\", \"read\";\n+};\n+\n+\/\/ for JTwork\/\/classes\/0\/java\/net\/httpclient\/http2\/server\/*\n+grant codeBase \"file:${test.classes}\/..\/..\/..\/..\/java\/net\/httpclient\/http2\/server\/*\" {\n+    permission java.lang.RuntimePermission \"accessClassInPackage.jdk.internal.net.http.common\";\n+    permission java.lang.RuntimePermission \"accessClassInPackage.jdk.internal.net.http.frame\";\n+    permission java.lang.RuntimePermission \"accessClassInPackage.jdk.internal.net.http.hpack\";\n+    permission java.lang.RuntimePermission \"accessClassInPackage.sun.net.www.http\";\n+\n+    permission java.net.SocketPermission \"localhost:*\", \"listen,accept,resolve\";\n+    permission java.lang.RuntimePermission \"modifyThread\";\n+};\n+\n+grant codeBase \"file:${test.classes}\/-\" {\n+\n+    \/\/ test issues HTTP GET requests\n+    permission java.net.URLPermission \"http:\/\/localhost:*\/-\",   \"GET\";\n+    permission java.net.URLPermission \"https:\/\/localhost:*\/-\", \"GET\";\n+    permission java.net.URLPermission \"http:\/\/localhost:*\/-\",   \"GET\";\n+    permission java.net.URLPermission \"https:\/\/localhost:*\/-\", \"GET\";\n+\n+    \/\/ needed to grant permission to the HTTP\/2 server\n+    permission java.lang.RuntimePermission \"accessClassInPackage.jdk.internal.net.http.common\";\n+    permission java.lang.RuntimePermission \"accessClassInPackage.jdk.internal.net.http.frame\";\n+    permission java.lang.RuntimePermission \"accessClassInPackage.jdk.internal.net.http.hpack\";\n+    permission java.lang.RuntimePermission \"accessClassInPackage.sun.net.www.http\";\n+\n+    \/\/ for HTTP\/1.1 server logging\n+    permission java.util.logging.LoggingPermission \"control\";\n+\n+    \/\/ needed to grant the HTTP servers\n+    permission java.net.SocketPermission \"localhost:*\", \"accept,resolve\";\n+\n+    permission java.util.PropertyPermission \"*\", \"read\";\n+    permission java.lang.RuntimePermission \"modifyThread\";\n+\n+};\n","filename":"test\/jdk\/java\/net\/httpclient\/httpclient-localaddr-security.policy","additions":64,"deletions":0,"binary":false,"changes":64,"status":"added"}]}