{"files":[{"patch":"@@ -136,1 +136,1 @@\n-  _modified_oops(true), _accumulated_modified_oops(false),\n+  _modified_oops(true),\n","filename":"src\/hotspot\/share\/classfile\/classLoaderData.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -126,2 +126,1 @@\n-  bool _modified_oops;             \/\/ Card Table Equivalent (YC\/CMS support)\n-  bool _accumulated_modified_oops; \/\/ Mod Union Equivalent (CMS support)\n+  bool _modified_oops;     \/\/ Card Table Equivalent\n@@ -179,3 +178,0 @@\n-  void accumulate_modified_oops()        { if (has_modified_oops()) _accumulated_modified_oops = true; }\n-  void clear_accumulated_modified_oops() { _accumulated_modified_oops = false; }\n-  bool has_accumulated_modified_oops()   { return _accumulated_modified_oops; }\n","filename":"src\/hotspot\/share\/classfile\/classLoaderData.hpp","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -118,3 +118,0 @@\n-    if (_accumulate_modified_oops) {\n-      cld->accumulate_modified_oops();\n-    }\n@@ -570,2 +567,1 @@\n-  CLDScanClosure cld_scan_closure(&scan_closure,\n-                                  heap->rem_set()->cld_rem_set()->accumulate_modified_oops());\n+  CLDScanClosure cld_scan_closure(&scan_closure);\n","filename":"src\/hotspot\/share\/gc\/serial\/defNewGeneration.cpp","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,40 +41,0 @@\n-class HasAccumulatedModifiedOopsClosure : public CLDClosure {\n-  bool _found;\n- public:\n-  HasAccumulatedModifiedOopsClosure() : _found(false) {}\n-  void do_cld(ClassLoaderData* cld) {\n-    if (_found) {\n-      return;\n-    }\n-\n-    if (cld->has_accumulated_modified_oops()) {\n-      _found = true;\n-    }\n-  }\n-  bool found() {\n-    return _found;\n-  }\n-};\n-\n-bool CLDRemSet::mod_union_is_clear() {\n-  HasAccumulatedModifiedOopsClosure closure;\n-  ClassLoaderDataGraph::cld_do(&closure);\n-\n-  return !closure.found();\n-}\n-\n-\n-class ClearCLDModUnionClosure : public CLDClosure {\n- public:\n-  void do_cld(ClassLoaderData* cld) {\n-    if (cld->has_accumulated_modified_oops()) {\n-      cld->clear_accumulated_modified_oops();\n-    }\n-  }\n-};\n-\n-void CLDRemSet::clear_mod_union() {\n-  ClearCLDModUnionClosure closure;\n-  ClassLoaderDataGraph::cld_do(&closure);\n-}\n-\n","filename":"src\/hotspot\/share\/gc\/shared\/cardTableRS.cpp","additions":1,"deletions":41,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -36,11 +36,0 @@\n-\/\/ Helper to remember modified oops in all clds.\n-class CLDRemSet {\n-  bool _accumulate_modified_oops;\n- public:\n-  CLDRemSet() : _accumulate_modified_oops(false) {}\n-  void set_accumulate_modified_oops(bool value) { _accumulate_modified_oops = value; }\n-  bool accumulate_modified_oops() { return _accumulate_modified_oops; }\n-  bool mod_union_is_clear();\n-  void clear_mod_union();\n-};\n-\n@@ -56,2 +45,0 @@\n-  CLDRemSet _cld_rem_set;\n-\n@@ -104,2 +91,0 @@\n-  CLDRemSet* cld_rem_set() { return &_cld_rem_set; }\n-\n","filename":"src\/hotspot\/share\/gc\/shared\/cardTableRS.hpp","additions":0,"deletions":15,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -96,2 +96,0 @@\n-  \/\/ true if the the modified oops state should be saved.\n-  bool               _accumulate_modified_oops;\n@@ -99,3 +97,2 @@\n-  CLDScanClosure(DefNewScanClosure* scavenge_closure,\n-                 bool accumulate_modified_oops) :\n-       _scavenge_closure(scavenge_closure), _accumulate_modified_oops(accumulate_modified_oops) {}\n+  CLDScanClosure(DefNewScanClosure* scavenge_closure) :\n+       _scavenge_closure(scavenge_closure) {}\n","filename":"src\/hotspot\/share\/gc\/shared\/genOopClosures.hpp","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"}]}