{"files":[{"patch":"@@ -217,1 +217,2 @@\n-            \/\/ Force garbage collection to trigger unloading of class loader and native library\n+            \/\/ Force garbage collection to trigger unloading of class loader\n+            \/\/ and native library.\n@@ -224,1 +225,1 @@\n-            return ForceGC.wait(() -> weakRef.get() == null, 1000L);\n+            return ForceGC.wait(() -> weakRef.get() == null);\n","filename":"test\/jdk\/java\/lang\/invoke\/defineHiddenClass\/UnloadingTest.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -35,11 +35,3 @@\n-    \/**\n-     * Causes the current thread to wait until the {@code booleanSupplier}\n-     * returns true, or a predefined waiting time (10 seconds) elapses.\n-     *\n-     * @param booleanSupplier boolean supplier\n-     * @return true if the {@code booleanSupplier} returns true, or false\n-     *     if did not complete after 10 Seconds\n-     *\/\n-    public static boolean wait(BooleanSupplier booleanSupplier) {\n-        return wait(booleanSupplier, 10000L);\n-    }\n+    \/\/ The jtreg testing timeout factor.\n+    private static final double TIMEOUT_FACTOR = Double.valueOf(\n+            System.getProperty(\"test.timeout.factor\", \"1.0\"));\n@@ -49,1 +41,2 @@\n-     * returns true, or the specified waiting time {@code timeout} elapses.\n+     * returns true, or a specific waiting time elapses.  The waiting time\n+     * is 1 second scalled with the jtreg testing timeout factor.\n@@ -52,2 +45,0 @@\n-     * @param timeout the timeout milliseconds while waiting for the boolean\n-     *        supplier to be true.\n@@ -55,1 +46,1 @@\n-     *     if did not complete after {@code timeout} milliseconds.\n+     *     if did not complete after the specific waiting time.\n@@ -57,2 +48,3 @@\n-    public static boolean wait(BooleanSupplier booleanSupplier,\n-            long timeout) {\n+    public static boolean wait(BooleanSupplier booleanSupplier) {\n+        long timeout = Math.round(1000L * TIMEOUT_FACTOR);\n+         \n@@ -66,1 +58,1 @@\n-        for (int retries = (int)(timeout \/ 100); retries > 0; retries--) {\n+        for (int retries = (int)(timeout \/ 200); retries >= 0; retries--) {\n@@ -78,1 +70,1 @@\n-                queue.remove(100L);\n+                queue.remove(200L);\n","filename":"test\/lib\/jdk\/test\/lib\/util\/ForceGC.java","additions":11,"deletions":19,"binary":false,"changes":30,"status":"modified"}]}