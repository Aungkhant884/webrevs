{"files":[{"patch":"@@ -41,0 +41,2 @@\n+    private static boolean isMacos;\n+\n@@ -42,0 +44,1 @@\n+        isMacos = System.getProperty(\"os.name\").equals(\"Mac OS X\");\n@@ -58,0 +61,22 @@\n+    \/**\n+     * Returns true if the option is supported, false if not supported.\n+     * Throws exception if it is not supported, but should be\n+     *\/\n+    static boolean checkSupported(DatagramChannel c1) throws IOException {\n+        boolean supported = c1.supportedOptions().contains(IP_DONTFRAGMENT);\n+\n+        if (!isMacos && !supported) {\n+            throw new RuntimeException(\"IP_DONTFRAGMENT should be supported\");\n+        }\n+        return supported;\n+    }\n+\n+    static boolean checkSupported(DatagramSocket c1) throws IOException {\n+        boolean supported = c1.supportedOptions().contains(IP_DONTFRAGMENT);\n+\n+        if (!isMacos && !supported) {\n+            throw new RuntimeException(\"IP_DONTFRAGMENT should be supported\");\n+        }\n+        return supported;\n+    }\n+\n@@ -61,1 +86,1 @@\n-            if (!c1.supportedOptions().contains(IP_DONTFRAGMENT)) {\n+            if (!checkSupported(c1)) {\n@@ -81,1 +106,1 @@\n-            if (!c1.supportedOptions().contains(IP_DONTFRAGMENT)) {\n+            if (!checkSupported(c1)) {\n@@ -99,1 +124,1 @@\n-        if (!c1.supportedOptions().contains(IP_DONTFRAGMENT)) {\n+        if (!checkSupported(c1)) {\n","filename":"test\/jdk\/jdk\/net\/ExtendedSocketOption\/DontFragmentTest.java","additions":28,"deletions":3,"binary":false,"changes":31,"status":"modified"}]}