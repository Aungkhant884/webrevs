{"files":[{"patch":"@@ -972,1 +972,1 @@\n-  unchecked_nonstatic_field(Array<Array<u1>*>,         _data,                                 sizeof(Array<u1>*))                    \\\n+  unchecked_nonstatic_field(Array<Array<u1>*>,        _data,                                  sizeof(Array<u1>*))                    \\\n","filename":"src\/hotspot\/share\/runtime\/vmStructs.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -432,0 +432,32 @@\n+  \/\/ Pointers to annotations are stored towards the end of the ConstMethod in following format:\n+  \/\/\n+  \/\/   start of ConstMethod                          end of ConstMethod\n+  \/\/            |                                           |\n+  \/\/            V                                           V\n+  \/\/            | ... | default | type | parameter | method |\n+  \/\/\n+  private int getMethodAnnotationsOffset() {\n+    return 1;\n+  }\n+  private int getParameterAnnotationsOffset() {\n+    int offset = 1;\n+    if (hasMethodAnnotations()) {\n+      offset += getMethodAnnotationsOffset();\n+    }\n+    return offset;\n+  }\n+  private int getTypeAnnotationsOffset() {\n+    int offset = 1;\n+    if (hasParameterAnnotations()) {\n+      offset += getParameterAnnotationsOffset();\n+    }\n+    return offset;\n+  }\n+  private int getDefaultAnnotationsOffset() {\n+    int offset = 1;\n+    if (hasTypeAnnotations()) {\n+      offset += getTypeAnnotationsOffset();\n+    }\n+    return offset;\n+  }\n+\n@@ -434,1 +466,1 @@\n-      Address addr = getAddress().getAddressAt((getSize() - 1) * VM.getVM().getAddressSize());\n+      Address addr = getAddress().getAddressAt((getSize() - getMethodAnnotationsOffset()) * VM.getVM().getAddressSize());\n@@ -447,5 +479,1 @@\n-      int offset = 1;\n-      if (hasMethodAnnotations()) {\n-        offset += 1;\n-      }\n-      Address addr = getAddress().getAddressAt((getSize() - offset) * VM.getVM().getAddressSize());\n+      Address addr = getAddress().getAddressAt((getSize() - getParameterAnnotationsOffset()) * VM.getVM().getAddressSize());\n@@ -464,8 +492,1 @@\n-      int offset = 1;\n-      if (hasMethodAnnotations()) {\n-        offset += 1;\n-      }\n-      if (hasParameterAnnotations()) {\n-        offset += 1;\n-      }\n-      Address addr = getAddress().getAddressAt((getSize() - offset) * VM.getVM().getAddressSize());\n+      Address addr = getAddress().getAddressAt((getSize() - getTypeAnnotationsOffset()) * VM.getVM().getAddressSize());\n@@ -484,11 +505,1 @@\n-      int offset = 1;\n-      if (hasMethodAnnotations()) {\n-        offset += 1;\n-      }\n-      if (hasParameterAnnotations()) {\n-        offset += 1;\n-      }\n-      if (hasTypeAnnotations()) {\n-        offset += 1;\n-      }\n-      Address addr = getAddress().getAddressAt((getSize() - offset) * VM.getVM().getAddressSize());\n+      Address addr = getAddress().getAddressAt((getSize() - getDefaultAnnotationsOffset()) * VM.getVM().getAddressSize());\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/oops\/ConstMethod.java","additions":36,"deletions":25,"binary":false,"changes":61,"status":"modified"}]}