{"files":[{"patch":"@@ -48,0 +48,3 @@\n+  private ArrayOfU1Array fieldAnnotationsArray;\n+  private ArrayOfU1Array fieldTypeAnnotationsArray;\n+\n@@ -73,4 +76,6 @@\n-    Address addr = fieldsAnnotations.getValue(getAddress());\n-    ArrayOfU1Array annotationsArray = VMObjectFactory.newObject(ArrayOfU1Array.class, addr);\n-    if (annotationsArray != null) {\n-      addr = annotationsArray.at(fieldIndex);\n+    if (fieldAnnotationsArray == null) {\n+      Address addr = fieldsAnnotations.getValue(getAddress());\n+      fieldAnnotationsArray = VMObjectFactory.newObject(ArrayOfU1Array.class, addr);\n+    }\n+    if (fieldAnnotationsArray != null) {\n+      Address addr = fieldAnnotationsArray.at(fieldIndex);\n@@ -89,4 +94,6 @@\n-    Address addr = fieldsTypeAnnotations.getValue(getAddress());\n-    ArrayOfU1Array annotationsArray = VMObjectFactory.newObject(ArrayOfU1Array.class, addr);\n-    if (annotationsArray != null) {\n-      addr = annotationsArray.at(fieldIndex);\n+    if (fieldTypeAnnotationsArray == null) {\n+      Address addr = fieldsTypeAnnotations.getValue(getAddress());\n+      fieldTypeAnnotationsArray = VMObjectFactory.newObject(ArrayOfU1Array.class, addr);\n+    }\n+    if (fieldTypeAnnotationsArray != null) {\n+      Address addr = fieldTypeAnnotationsArray.at(fieldIndex);\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/oops\/Annotations.java","additions":15,"deletions":8,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -632,1 +632,1 @@\n-  private Address getAddressAtOffset(int offsetInWords) {\n+  private Address getAddressAtOffset(long offsetInWords) {\n@@ -636,1 +636,2 @@\n-  \/\/ Pointers to annotations are stored towards the end of the ConstMethod in following format:\n+  \/\/ Pointers to annotations are stored towards the end of the ConstMethod in following format.\n+  \/\/ Each of the pointer may or may not be present.\n@@ -638,0 +639,1 @@\n+  \/\/            |<-------------- getSize() -----------------|\n@@ -643,0 +645,1 @@\n+  \/\/ These methods return the offset of the pointer to the requested annotation from the end of ConstMethod.\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/oops\/ConstMethod.java","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"}]}