{"files":[{"patch":"@@ -420,44 +420,0 @@\n-  private boolean hasMethodParameters() {\n-    return (getFlags() & HAS_METHOD_PARAMETERS) != 0;\n-  }\n-\n-  private boolean hasGenericSignature() {\n-    return (getFlags() & HAS_GENERIC_SIGNATURE) != 0;\n-  }\n-\n-  private boolean hasMethodAnnotations() {\n-    return (getFlags() & HAS_METHOD_ANNOTATIONS) != 0;\n-  }\n-\n-  \/\/ Pointers to annotations are stored towards the end of the ConstMethod in following format:\n-  \/\/\n-  \/\/   start of ConstMethod                          end of ConstMethod\n-  \/\/            |                                           |\n-  \/\/            V                                           V\n-  \/\/            | ... | default | type | parameter | method |\n-  \/\/\n-  private int getMethodAnnotationsOffset() {\n-    return 1;\n-  }\n-  private int getParameterAnnotationsOffset() {\n-    int offset = 1;\n-    if (hasMethodAnnotations()) {\n-      offset += getMethodAnnotationsOffset();\n-    }\n-    return offset;\n-  }\n-  private int getTypeAnnotationsOffset() {\n-    int offset = 1;\n-    if (hasParameterAnnotations()) {\n-      offset += getParameterAnnotationsOffset();\n-    }\n-    return offset;\n-  }\n-  private int getDefaultAnnotationsOffset() {\n-    int offset = 1;\n-    if (hasTypeAnnotations()) {\n-      offset += getTypeAnnotationsOffset();\n-    }\n-    return offset;\n-  }\n-\n@@ -466,1 +422,1 @@\n-      Address addr = getAddress().getAddressAt((getSize() - getMethodAnnotationsOffset()) * VM.getVM().getAddressSize());\n+      Address addr = getAddressAtOffset(getSize() - getMethodAnnotationsOffset());\n@@ -473,4 +429,0 @@\n-  private boolean hasParameterAnnotations() {\n-    return (getFlags() & HAS_PARAMETER_ANNOTATIONS) != 0;\n-  }\n-\n@@ -479,1 +431,1 @@\n-      Address addr = getAddress().getAddressAt((getSize() - getParameterAnnotationsOffset()) * VM.getVM().getAddressSize());\n+      Address addr = getAddressAtOffset(getSize() - getParameterAnnotationsOffset());\n@@ -486,4 +438,0 @@\n-  private boolean hasTypeAnnotations() {\n-    return (getFlags() & HAS_TYPE_ANNOTATIONS) != 0;\n-  }\n-\n@@ -492,1 +440,1 @@\n-      Address addr = getAddress().getAddressAt((getSize() - getTypeAnnotationsOffset()) * VM.getVM().getAddressSize());\n+      Address addr = getAddressAtOffset(getSize() - getTypeAnnotationsOffset());\n@@ -499,4 +447,0 @@\n-  private boolean hasDefaultAnnotations() {\n-    return (getFlags() & HAS_DEFAULT_ANNOTATIONS) != 0;\n-  }\n-\n@@ -505,1 +449,1 @@\n-      Address addr = getAddress().getAddressAt((getSize() - getDefaultAnnotationsOffset()) * VM.getVM().getAddressSize());\n+      Address addr = getAddressAtOffset(getSize() - getDefaultAnnotationsOffset());\n@@ -680,0 +624,63 @@\n+  private boolean hasMethodParameters() {\n+    return (getFlags() & HAS_METHOD_PARAMETERS) != 0;\n+  }\n+\n+  private boolean hasGenericSignature() {\n+    return (getFlags() & HAS_GENERIC_SIGNATURE) != 0;\n+  }\n+\n+  private Address getAddressAtOffset(int offsetInWords) {\n+    return getAddress().getAddressAt(offsetInWords * VM.getVM().getAddressSize());\n+  }\n+\n+  \/\/ Pointers to annotations are stored towards the end of the ConstMethod in following format:\n+  \/\/\n+  \/\/   start of ConstMethod                          end of ConstMethod\n+  \/\/            |                                           |\n+  \/\/            V                                           V\n+  \/\/            | ... | default | type | parameter | method |\n+  \/\/\n+  private int getMethodAnnotationsOffset() {\n+    return 1;\n+  }\n+\n+  private int getParameterAnnotationsOffset() {\n+    int offset = 1;\n+    if (hasMethodAnnotations()) {\n+      offset += getMethodAnnotationsOffset();\n+    }\n+    return offset;\n+  }\n+\n+  private int getTypeAnnotationsOffset() {\n+    int offset = 1;\n+    if (hasParameterAnnotations()) {\n+      offset += getParameterAnnotationsOffset();\n+    }\n+    return offset;\n+  }\n+\n+  private int getDefaultAnnotationsOffset() {\n+    int offset = 1;\n+    if (hasTypeAnnotations()) {\n+      offset += getTypeAnnotationsOffset();\n+    }\n+    return offset;\n+  }\n+\n+  private boolean hasMethodAnnotations() {\n+    return (getFlags() & HAS_METHOD_ANNOTATIONS) != 0;\n+  }\n+\n+  private boolean hasParameterAnnotations() {\n+    return (getFlags() & HAS_PARAMETER_ANNOTATIONS) != 0;\n+  }\n+\n+  private boolean hasTypeAnnotations() {\n+    return (getFlags() & HAS_TYPE_ANNOTATIONS) != 0;\n+  }\n+\n+  private boolean hasDefaultAnnotations() {\n+    return (getFlags() & HAS_DEFAULT_ANNOTATIONS) != 0;\n+  }\n+\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/oops\/ConstMethod.java","additions":67,"deletions":60,"binary":false,"changes":127,"status":"modified"}]}