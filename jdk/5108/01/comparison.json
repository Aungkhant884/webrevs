{"files":[{"patch":"@@ -48,1 +48,1 @@\n-  _inline_ptr_bits_per_card(HeapRegion::LogOfHRGrainBytes - CardTable::card_shift) {\n+  _inline_ptr_bits_per_card(HeapRegion::LogCardsPerRegion) {\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CardSet.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -50,0 +50,2 @@\n+  \/\/ Holds the number of bits required to cover the maximum card index for the\n+  \/\/ regions covered by this card set.\n@@ -51,0 +53,1 @@\n+\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CardSet.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -39,0 +39,31 @@\n+\/\/ A helper class to encode a few card indexes within a CardSetPtr.\n+\/\/\n+\/\/ The pointer value (either 32 or 64 bits) is split into two areas:\n+\/\/\n+\/\/ - Header containing identifying tag and number of encoded cards.\n+\/\/ - Data area containing the card indexes themselves\n+\/\/\n+\/\/ The header starts (from LSB) with the identifying tag (two bits,\n+\/\/ always 00), and three bits size. The size stores the number of\n+\/\/ valid card indexes after the header.\n+\/\/\n+\/\/ The data area makes up the remainder of the word, with card indexes\n+\/\/ put one after another at increasing bit positions. The separate\n+\/\/ card indexes use just enough space (bits) to represent the whole\n+\/\/ range of cards needed for covering the whole range of values\n+\/\/ (typically in a region). There may be unused space at the top of\n+\/\/ the word.\n+\/\/\n+\/\/ Example:\n+\/\/\n+\/\/   64 bit pointer size, with 8M-size regions (8M == 2^23)\n+\/\/ -> 2^14 (2^23 \/ 2^9) cards; each card represents 512 bytes in a region\n+\/\/ -> 14 bits per card; must have enough bits to hold the max card index\n+\/\/ -> may encode up to 4 cards into it, using 61 bits (5 bits header + 4 * 14)\n+\/\/\n+\/\/ M                                                     L\n+\/\/ S                                                     S\n+\/\/ B                                                     B\n+\/\/ +------+         +---------------+--------------+-----+\n+\/\/ |unused|   ...   |  card_index1  | card_index0  |SSS00|\n+\/\/ +------+         +---------------+--------------+-----+\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CardSetContainers.hpp","additions":31,"deletions":0,"binary":false,"changes":31,"status":"modified"}]}