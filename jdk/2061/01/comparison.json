{"files":[{"patch":"@@ -3,1 +3,1 @@\n-# Copyright (c) 2009, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2009, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -757,1 +757,0 @@\n-javax\/swing\/JPopupMenu\/8075063\/ContextMenuScrollTest.java 202880 linux-all\n","filename":"test\/jdk\/ProblemList.txt","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,13 +49,9 @@\n-    private JMenuItem undo;\n-    private JMenuItem redo;\n-    private JMenuItem cut;\n-    private JMenuItem copy;\n-    private JMenuItem paste;\n-    private JMenuItem delete;\n-    private JMenuItem selectAll;\n-    private final Robot robot;\n-    private JFrame frame;\n-    private JMenuBar menuBar;\n-    private JMenu menu;\n-    private volatile Point p = null;\n-    private volatile Dimension d = null;\n+    private static JMenuItem undo;\n+    private static JMenuItem redo;\n+    private static JMenuItem cut;\n+    private static JMenuItem copy;\n+    private static Robot robot;\n+    private static JFrame frame;\n+    private static JMenu menu;\n+    private static volatile Point p = null;\n+    private static volatile Dimension d = null;\n@@ -64,20 +60,0 @@\n-        new ContextMenuScrollTest();\n-    }\n-    void blockTillDisplayed(JComponent comp) throws Exception {\n-        while (p == null) {\n-            try {\n-                SwingUtilities.invokeAndWait(() -> {\n-                    p = comp.getLocationOnScreen();\n-                    d = menu.getSize();\n-                });\n-            } catch (IllegalStateException e) {\n-                try {\n-                    Thread.sleep(1000);\n-                } catch (InterruptedException ie) {\n-                }\n-            }\n-        }\n-    }\n-\n-    public ContextMenuScrollTest() throws Exception\n-    {\n@@ -85,1 +61,1 @@\n-        robot.setAutoDelay(200);\n+        robot.setAutoDelay(100);\n@@ -88,1 +64,0 @@\n-            blockTillDisplayed(menu);\n@@ -90,0 +65,1 @@\n+            robot.delay(1000);\n@@ -91,0 +67,5 @@\n+            SwingUtilities.invokeAndWait(() -> {\n+                p = menu.getLocationOnScreen();\n+                d = menu.getSize();\n+            });\n+            System.out.println(\"p \" + p + \" d \" + d);\n@@ -92,2 +73,2 @@\n-            robot.mousePress(InputEvent.BUTTON1_MASK);\n-            robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -95,0 +76,1 @@\n+            robot.delay(1000);\n@@ -96,1 +78,0 @@\n-            System.out.println(\"popmenu visible \" + menu.isPopupMenuVisible());\n@@ -99,1 +80,0 @@\n-            System.out.println(\"popmenu visible \" + menu.isPopupMenuVisible());\n@@ -108,1 +88,7 @@\n-    public void createGUI() {\n+\n+    public static void createGUI() {\n+        JMenuItem paste;\n+        JMenuItem delete;\n+        JMenuItem selectAll;\n+        JMenuBar menuBar;\n+\n@@ -195,0 +181,1 @@\n+        frame.setLocationRelativeTo(null);\n","filename":"test\/jdk\/javax\/swing\/JPopupMenu\/8075063\/ContextMenuScrollTest.java","additions":28,"deletions":41,"binary":false,"changes":69,"status":"modified"}]}