{"files":[{"patch":"@@ -39,0 +39,2 @@\n+import java.nio.ByteBuffer;\n+import java.nio.ByteOrder;\n@@ -102,0 +104,1 @@\n+        \/\/ Skip the signature\n@@ -104,1 +107,20 @@\n-        return sigLess.toByteArray();\n+        byte[] siglessZip = sigLess.toByteArray();\n+\n+        \/\/ Adjust the CEN offset in the END header\n+        ByteBuffer buffer = ByteBuffer.wrap(siglessZip).order(ByteOrder.LITTLE_ENDIAN);\n+        \/\/ Reduce cenOffset by 4 bytes\n+        int cenOff = siglessZip.length - ZipFile.ENDHDR + ZipFile.ENDOFF;\n+        int realCenOff = buffer.getInt(cenOff) - Integer.BYTES;\n+        buffer.putInt(cenOff, realCenOff);\n+\n+        \/\/ Adjust the LOC offset in the second CEN header\n+        int cen = realCenOff;\n+        \/\/ Skip past the first CEN header\n+        int nlen = buffer.getShort(cen + ZipFile.CENNAM);\n+        cen += ZipFile.CENHDR + nlen;\n+\n+        \/\/ Reduce LOC offset by 4 bytes\n+        int locOff = cen + ZipFile.CENOFF;\n+        buffer.putInt(locOff, buffer.getInt(locOff) - Integer.BYTES);\n+\n+        return siglessZip;\n","filename":"test\/jdk\/java\/util\/zip\/DataDescriptorSignatureMissing.java","additions":23,"deletions":1,"binary":false,"changes":24,"status":"modified"}]}