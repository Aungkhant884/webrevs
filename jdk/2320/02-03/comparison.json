{"files":[{"patch":"@@ -31,6 +31,0 @@\n-JPACKAGE_APPLAUNCHERLIB_SRC := \\\n-    $(call FindSrcDirsForComponent, jdk.jpackage, applauncherlib) \\\n-    $(call FindSrcDirsForComponent, jdk.jpackage, applauncherlibcommon) \\\n-    $(call FindSrcDirsForComponent, jdk.jpackage, common)\n-\n-\n@@ -39,2 +33,1 @@\n-      $(call FindSrcDirsForComponent, jdk.jpackage, applauncher) \\\n-      $(call FindSrcDirsForComponent, jdk.jpackage, applauncherlibcommon)\n+      $(call FindSrcDirsForComponent, jdk.jpackage, applauncher)\n@@ -42,0 +35,1 @@\n+  JPACKAGE_APPLAUNCHER_INCLUDE_FILES := %.c\n@@ -45,1 +39,1 @@\n-      $(JPACKAGE_APPLAUNCHERLIB_SRC)\n+      $(call FindSrcDirsForComponent, jdk.jpackage, common)\n@@ -62,3 +56,1 @@\n-JPACKAGE_APPLAUNCHER_INCLUDES := $(addprefix -I, \\\n-    $(sort $(JPACKAGE_APPLAUNCHER_SRC) $(JPACKAGE_APPLAUNCHERLIB_SRC)) \\\n-)\n+JPACKAGE_APPLAUNCHER_INCLUDES := $(addprefix -I, $(JPACKAGE_APPLAUNCHER_SRC))\n@@ -72,0 +64,1 @@\n+    INCLUDE_FILES := $(JPACKAGE_APPLAUNCHER_INCLUDE_FILES), \\\n@@ -95,2 +88,9 @@\n-  $(eval $(call SetupJdkLibrary, BUILD_JPACKAGE_APPLAUNCHERLIB, \\\n-      NAME := jpackageapplauncherlib, \\\n+  JPACKAGE_LIBAPPLAUNCHER_SRC := \\\n+      $(call FindSrcDirsForComponent, jdk.jpackage, applauncher) \\\n+      $(call FindSrcDirsForComponent, jdk.jpackage, libapplauncher) \\\n+      $(call FindSrcDirsForComponent, jdk.jpackage, common)\n+\n+  JPACKAGE_LIBAPPLAUNCHER_INCLUDES := $(addprefix -I, $(JPACKAGE_LIBAPPLAUNCHER_SRC))\n+\n+  $(eval $(call SetupJdkLibrary, BUILD_JPACKAGE_LIBAPPLAUNCHER, \\\n+      NAME := jpackageapplauncher, \\\n@@ -98,2 +98,3 @@\n-      SYMBOLS_DIR := $(SUPPORT_OUTPUTDIR)\/native\/$(MODULE)\/jpackageapplauncherlib, \\\n-      SRC := $(JPACKAGE_APPLAUNCHERLIB_SRC), \\\n+      SYMBOLS_DIR := $(SUPPORT_OUTPUTDIR)\/native\/$(MODULE)\/libjpackageapplauncher, \\\n+      SRC := $(JPACKAGE_LIBAPPLAUNCHER_SRC), \\\n+      EXCLUDE_FILES := LinuxLauncher.c LinuxPackage.c, \\\n@@ -102,5 +103,3 @@\n-      CXXFLAGS := $(CXXFLAGS_JDKLIB) $(JPACKAGE_APPLAUNCHER_INCLUDES), \\\n-      CFLAGS := $(CFLAGS_JDKLIB) $(JPACKAGE_APPLAUNCHER_INCLUDES), \\\n-      CFLAGS_linux := -Wno-format-nonliteral, \\\n-      LDFLAGS := $(LDFLAGS_JDKLIB) \\\n-          -Wl$(COMMA)--version-script=$(TOPDIR)\/make\/modules\/$(MODULE)\/applauncherlib.ld-version-script, \\\n+      CXXFLAGS := $(CXXFLAGS_JDKLIB) $(JPACKAGE_LIBAPPLAUNCHER_INCLUDES), \\\n+      CFLAGS := $(CFLAGS_JDKLIB) $(JPACKAGE_LIBAPPLAUNCHER_INCLUDES), \\\n+      LDFLAGS := $(LDFLAGS_JDKLIB), \\\n@@ -110,1 +109,1 @@\n-  JPACKAGE_TARGETS += $(BUILD_JPACKAGE_APPLAUNCHERLIB)\n+  JPACKAGE_TARGETS += $(BUILD_JPACKAGE_LIBAPPLAUNCHER)\n","filename":"make\/modules\/jdk.jpackage\/Lib.gmk","additions":21,"deletions":22,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -104,1 +104,1 @@\n-        try (InputStream resource = getResourceAsStream(\"libjpackageapplauncherlib.so\")) {\n+        try (InputStream resource = getResourceAsStream(\"libjpackageapplauncher.so\")) {\n","filename":"src\/jdk.jpackage\/linux\/classes\/jdk\/jpackage\/internal\/LinuxAppImageBuilder.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -133,0 +133,4 @@\n+#if defined(__GNUC__) && __GNUC__ >= 5\n+#pragma GCC diagnostic push\n+#pragma GCC diagnostic ignored \"-Wformat-nonliteral\"\n+#endif\n@@ -137,0 +141,3 @@\n+#if defined(__GNUC__) && __GNUC__ >= 5\n+#pragma GCC diagnostic pop\n+#endif\n","filename":"src\/jdk.jpackage\/linux\/native\/applauncher\/LinuxPackage.c","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"","filename":"src\/jdk.jpackage\/share\/native\/applauncher\/AppLauncher.cpp","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.jpackage\/share\/native\/libapplauncher\/AppLauncher.cpp","status":"renamed"},{"patch":"","filename":"src\/jdk.jpackage\/share\/native\/applauncher\/AppLauncher.h","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.jpackage\/share\/native\/libapplauncher\/AppLauncher.h","status":"renamed"},{"patch":"","filename":"src\/jdk.jpackage\/share\/native\/applauncher\/CfgFile.cpp","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.jpackage\/share\/native\/libapplauncher\/CfgFile.cpp","status":"renamed"},{"patch":"","filename":"src\/jdk.jpackage\/share\/native\/applauncher\/CfgFile.h","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.jpackage\/share\/native\/libapplauncher\/CfgFile.h","status":"renamed"},{"patch":"","filename":"src\/jdk.jpackage\/share\/native\/applauncher\/JvmLauncher.cpp","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.jpackage\/share\/native\/libapplauncher\/JvmLauncher.cpp","status":"renamed"},{"patch":"","filename":"src\/jdk.jpackage\/share\/native\/applauncher\/JvmLauncher.h","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.jpackage\/share\/native\/libapplauncher\/JvmLauncher.h","status":"renamed"},{"patch":"@@ -120,0 +120,5 @@\n+\n+#if defined(__GNUC__) && __GNUC__ >= 5\n+#pragma GCC diagnostic push\n+#pragma GCC diagnostic ignored \"-Wformat-nonliteral\"\n+#endif\n@@ -122,0 +127,4 @@\n+#if defined(__GNUC__) && __GNUC__ >= 5\n+#pragma GCC diagnostic pop\n+#endif\n+\n","filename":"src\/jdk.jpackage\/share\/native\/applauncher\/JvmLauncherLib.c","additions":9,"deletions":0,"binary":false,"changes":9,"previous_filename":"src\/jdk.jpackage\/share\/native\/libapplaunchercommon\/JvmLauncherLib.c","status":"renamed"}]}