{"files":[{"patch":"@@ -24,7 +24,1 @@\n-\/*\n- * @test\n- * @bug 8132995\n- * @summary Tests to excercise the optimization described in the bug report.\n- * @run junit ImmutableMatchResultTest\n- *\/\n-\n+import jdk.test.lib.RandomFactory;\n@@ -34,0 +28,1 @@\n+import java.util.Random;\n@@ -40,0 +35,10 @@\n+\/*\n+ * @test\n+ * @bug 8132995\n+ * @key randomness\n+ *\n+ * @summary Tests to excercise the optimization described in the bug report.\n+ * @library \/test\/lib\n+ * @run junit ImmutableMatchResultTest\n+ *\/\n+\n@@ -42,3 +47,7 @@\n-    private static final int prefixLen = 3;\n-    private static final int infixLen = 5;\n-    private static final int suffixLen = 4;\n+    private static final int prefixLen;\n+    private static final int infixLen;\n+    private static final int suffixLen;\n+\n+    private static final String group1;\n+    private static final String group2;\n+    private static final String group0;\n@@ -46,3 +55,1 @@\n-    private static final String group1 = \"abc\";\n-    private static final String group2 = \"wxyz\";\n-    private static final String group0 = group1 + \"-\".repeat(infixLen) + group2;\n+    private static final String in;\n@@ -50,1 +57,10 @@\n-    private static final String in = \"-\".repeat(prefixLen) + group0 + \"-\".repeat(suffixLen);\n+    static {\n+        Random rnd = RandomFactory.getRandom();\n+        prefixLen = rnd.nextInt(10);\n+        infixLen = rnd.nextInt(10);\n+        suffixLen = rnd.nextInt(10);\n+        group1 = \"abc\";\n+        group2 = \"wxyz\";\n+        group0 = group1 + \"-\".repeat(infixLen) + group2;\n+        in = \"-\".repeat(prefixLen) + group0 + \"-\".repeat(suffixLen);\n+    }\n","filename":"test\/jdk\/java\/util\/regex\/ImmutableMatchResultTest.java","additions":30,"deletions":14,"binary":false,"changes":44,"status":"modified"}]}