{"files":[{"patch":"@@ -125,0 +125,1 @@\n+  friend class ShenandoahSafepoint;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -150,0 +150,6 @@\n+    Thread* const thr = Thread::current();\n+    \/\/ Shenandoah GC specific safepoints are scheduled by control thread.\n+    \/\/ So if we are enter here from control thread, then we are definitely not\n+    \/\/ at Shenandoah safepoint, but at something else.\n+    if (thr == ShenandoahHeap::heap()->control_thread()) return false;\n+\n@@ -152,1 +158,1 @@\n-    if (!Thread::current()->is_VM_thread()) return true;\n+    if (!thr->is_VM_thread()) return true;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahUtils.hpp","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"}]}