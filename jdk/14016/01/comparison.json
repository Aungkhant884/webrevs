{"files":[{"patch":"@@ -370,1 +370,1 @@\n-        if (item.category === \"searchTags\" && idx.h) {\n+        if (item.category === \"searchTags\" && idx && idx.h) {\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/search.js.template","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -272,0 +272,3 @@\n+        if (label.contains(\"\\n\") || label.contains(\"\\r\")) {\n+            throw new IllegalArgumentException();\n+        }\n@@ -581,1 +584,1 @@\n-        return s.replace(\"\\\"\", \"\\\\\\\"\");\n+        return s.replace(\"\\\\\", \"\\\\\\\\\").replace(\"\\\"\", \"\\\\\\\"\");\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/IndexItem.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,1 @@\n- *      8266808 8248863\n+ *      8266808 8248863 8305710\n@@ -59,1 +59,1 @@\n-        checkSearchOutput(\"UnnamedPkgClass.html\", true, true);\n+        checkSearchOutput(\"UnnamedPkgClass.html\", true);\n@@ -81,1 +81,1 @@\n-        checkSingleIndex(true, true);\n+        checkSingleIndex();\n@@ -83,0 +83,1 @@\n+        checkSearchTagIndex();\n@@ -105,1 +106,1 @@\n-        checkSingleIndex(true, true);\n+        checkSingleIndex();\n@@ -107,0 +108,1 @@\n+        checkSearchTagIndex();\n@@ -150,1 +152,1 @@\n-        checkSingleIndex(true, true);\n+        checkSingleIndex();\n@@ -282,1 +284,1 @@\n-        checkSearchIndex(true);\n+        checkSearchIndex();\n@@ -302,1 +304,1 @@\n-            checkSearchIndex(true);\n+            checkSearchIndex();\n@@ -327,1 +329,1 @@\n-        checkSearchIndex(true);\n+        checkSearchIndex();\n@@ -347,1 +349,1 @@\n-            checkSearchIndex(true);\n+            checkSearchIndex();\n@@ -378,1 +380,1 @@\n-        checkSearchIndex(true);\n+        checkSearchIndex();\n@@ -390,6 +392,2 @@\n-    void checkSearchOutput(boolean expectedOutput) {\n-        checkSearchOutput(\"index.html\", expectedOutput, true);\n-    }\n-\n-    void checkSearchIndex(boolean expectedOutput) {\n-        checkOutput(\"member-search-index.js\", expectedOutput,\n+    void checkSearchIndex() {\n+        checkOutput(\"member-search-index.js\", true,\n@@ -404,1 +402,1 @@\n-        checkOutput(\"member-search-index.js\", !expectedOutput,\n+        checkOutput(\"member-search-index.js\", false,\n@@ -415,2 +413,2 @@\n-    void checkSearchOutput(boolean expectedOutput, boolean moduleDirectoriesVar) {\n-        checkSearchOutput(\"index.html\", expectedOutput, moduleDirectoriesVar);\n+    void checkSearchOutput(boolean expectedOutput) {\n+        checkSearchOutput(\"index.html\", expectedOutput);\n@@ -419,1 +417,1 @@\n-    void checkSearchOutput(String fileName, boolean expectedOutput, boolean moduleDirectoriesVar) {\n+    void checkSearchOutput(String fileName, boolean expectedOutput) {\n@@ -443,3 +441,1 @@\n-    void checkSingleIndex(boolean expectedOutput, boolean html5) {\n-        String html_span_see_span = html5 ? \"html%3Cspan%3Esee%3C\/span%3E\" : \"html-span-see-\/span-\";\n-\n+    void checkSingleIndex() {\n@@ -447,1 +443,1 @@\n-        checkOutput(\"index-all.html\", expectedOutput,\n+        checkOutput(\"index-all.html\", true,\n@@ -494,1 +490,1 @@\n-                    <dt><a href=\"pkg\/AnotherClass.ModalExclusionType.html#\"\"\" + html_span_see_span + \"\"\"\n+                    <dt><a href=\"pkg\/AnotherClass.ModalExclusionType.html#html%3Cspan%3Esee%3C\/span%3E\\\n@@ -833,0 +829,40 @@\n+\n+    void checkSearchTagIndex() {\n+        checkOutput(\"tag-search-index.js\", true,\n+                \"\"\"\n+                    {\"l\":\"html <span> see <\/span>\",\"h\":\"pkg.AnotherClass.ModalExclusionType.APPLICATION_EXCLUDE\",\"u\":\"pkg\/AnotherClass.ModalExclusionType.html#html<span>see<\/span>\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"nested {@index nested_tag_test}\",\"h\":\"pkg.AnotherClass.ModalExclusionType.NO_EXCLUDE\",\"u\":\"pkg\/AnotherClass.ModalExclusionType.html#nested{@indexnested_tag_test}\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"phrase with spaces\",\"h\":\"package pkg\",\"u\":\"pkg\/package-summary.html#phrasewithspaces\"},{\"l\":\"pkg\",\"h\":\"package pkg\",\"u\":\"pkg\/package-summary.html#pkg\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"quoted\",\"h\":\"pkg.AnotherClass.CONSTANT1\",\"d\":\"no-space\",\"u\":\"pkg\/AnotherClass.html#quoted\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"r\",\"h\":\"package pkg\",\"u\":\"pkg\/package-summary.html#r\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"search phrase\",\"h\":\"class pkg1.RegClass\",\"d\":\"with description\",\"u\":\"pkg1\/RegClass.html#searchphrase\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"search phrase deprecated\",\"h\":\"pkg2.TestEnum.ONE\",\"u\":\"deprecated-list.html#searchphrasedeprecated\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"search phrase deprecated\",\"h\":\"pkg2.TestEnum.ONE\",\"u\":\"pkg2\/TestEnum.html#searchphrasedeprecated\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"search phrase with desc deprecated\",\"h\":\"annotation interface pkg2.TestAnnotationType\",\"d\":\"description for phrase deprecated\",\"u\":\"deprecated-list.html#searchphrasewithdescdeprecated\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"search phrase with desc deprecated\",\"h\":\"annotation interface pkg2.TestAnnotationType\",\"d\":\"description for phrase deprecated\",\"u\":\"pkg2\/TestAnnotationType.html#searchphrasewithdescdeprecated\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"SearchTagDeprecatedClass\",\"h\":\"class pkg2.TestClass\",\"u\":\"deprecated-list.html#SearchTagDeprecatedClass\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"SearchTagDeprecatedClass\",\"h\":\"class pkg2.TestClass\",\"u\":\"pkg2\/TestClass.html#SearchTagDeprecatedClass\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"SearchTagDeprecatedMethod\",\"h\":\"pkg2.TestError.TestError()\",\"d\":\"with description\",\"u\":\"deprecated-list.html#SearchTagDeprecatedMethod\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"SearchTagDeprecatedMethod\",\"h\":\"pkg2.TestError.TestError()\",\"d\":\"with description\",\"u\":\"pkg2\/TestError.html#SearchTagDeprecatedMethod\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"search term with spaces\",\"h\":\"interface pkg.TestInterface\",\"d\":\"description \",\"u\":\"pkg\/TestInterface.html#searchtermwithspaces\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"SearchWordWithDescription\",\"h\":\"pkg1.RegClass.CONSTANT_FIELD_1\",\"d\":\"search word with desc\",\"u\":\"pkg1\/RegClass.html#SearchWordWithDescription\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"Serialized Form\",\"h\":\"\",\"u\":\"serialized-form.html\"},{\"l\":\"SingleWord\",\"h\":\"package pkg\",\"u\":\"pkg\/package-summary.html#SingleWord\"}\"\"\",\n+                \"\"\"\n+                    {\"l\":\"trailing\",\"h\":\"pkg.AnotherClass.method(byte[], int, String)\",\"d\":\"backslash\\\\\\\\\",\"u\":\"pkg\/AnotherClass.html#trailing\"}]\"\"\");\n+    }\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSearch\/TestSearch.java","additions":62,"deletions":26,"binary":false,"changes":88,"status":"modified"},{"patch":"@@ -78,1 +78,1 @@\n-     * Method to test member search index URL.\n+     * Method to test member search index URL. Testing search tag for {@index trailing backslash\\}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSearch\/pkg\/AnotherClass.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}