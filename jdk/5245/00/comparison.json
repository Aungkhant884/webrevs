{"files":[{"patch":"@@ -118,1 +118,0 @@\n-    uintx FLAG_MASK = 0x03; \/\/ See comments around MetaspaceClosure::FLAG_MASK\n@@ -122,3 +121,1 @@\n-    uintx old_p_and_bits = (uintx)(*ptr_loc);\n-    uintx flag_bits = (old_p_and_bits & FLAG_MASK);\n-    address old_p = (address)(old_p_and_bits & (~FLAG_MASK));\n+    address old_p = *ptr_loc;\n@@ -126,1 +123,0 @@\n-    uintx new_p_and_bits = ((uintx)new_p) | flag_bits;\n@@ -131,1 +127,1 @@\n-    ArchivePtrMarker::set_and_mark_pointer(ptr_loc, (address)(new_p_and_bits));\n+    ArchivePtrMarker::set_and_mark_pointer(ptr_loc, new_p);\n","filename":"src\/hotspot\/share\/cds\/archiveBuilder.cpp","additions":2,"deletions":6,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -32,3 +32,1 @@\n-  uintx p = (uintx)new_loc;\n-  p |= flag_bits(); \/\/ Make sure the flag bits are copied to the new pointer.\n-  *(address*)mpp() = (address)p;\n+  *addr() = new_loc;\n","filename":"src\/hotspot\/share\/memory\/metaspaceClosure.cpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -131,4 +131,1 @@\n-      \/\/ In some rare cases we store some flags in the lowest 2 bits of a\n-      \/\/ MetaspaceObj pointer. Unmask these when manipulating the pointer.\n-      uintx p = (uintx)*mpp();\n-      return (address)(p & (~FLAG_MASK));\n+      return *addr();\n@@ -150,8 +147,0 @@\n-\n-  private:\n-    static const uintx FLAG_MASK = 0x03;\n-\n-    int flag_bits() const {\n-      uintx p = (uintx)*mpp();\n-      return (int)(p & FLAG_MASK);\n-    }\n","filename":"src\/hotspot\/share\/memory\/metaspaceClosure.hpp","additions":1,"deletions":12,"binary":false,"changes":13,"status":"modified"}]}