{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,2 @@\n+ * @library ..\/..\/regtesthelpers\n+ * @build PassFailJFrame\n@@ -28,1 +30,1 @@\n- * @run main\/manual=yesno PrintGlyphVectorTest\n+ * @run main\/manual PrintGlyphVectorTest\n@@ -31,6 +33,17 @@\n-import java.io.*;\n-import java.awt.*;\n-import java.awt.event.*;\n-import java.awt.font.*;\n-import java.awt.geom.*;\n-import java.awt.print.*;\n+import java.awt.BorderLayout;\n+import java.awt.Button;\n+import java.awt.Color;\n+import java.awt.Component;\n+import java.awt.Dimension;\n+import java.awt.Font;\n+import java.awt.Frame;\n+import java.awt.Graphics;\n+import java.awt.Graphics2D;\n+import java.awt.font.FontRenderContext;\n+import java.awt.font.GlyphVector;\n+import java.awt.geom.Point2D;\n+import java.awt.geom.Rectangle2D;\n+import java.awt.print.PageFormat;\n+import java.awt.print.Printable;\n+import java.awt.print.PrinterException;\n+import java.awt.print.PrinterJob;\n@@ -40,0 +53,10 @@\n+    private static final String INSTRUCTIONS = \"\"\"\n+            Note: You must have a printer installed for this test.\n+            Press the PRINT button on the 'Test PrintGlyphVector' frame\n+            and press OK\/print button on the print dialog.\n+\n+            Retrieve the output and compare the printed and on-screen\n+            text to confirm that in both cases the text is aligned and\n+            the boxes are around the text, not offset from the text.\n+            \"\"\";\n+\n@@ -49,3 +72,1 @@\n-\n-        float x = 50f,\n-              y = 50f;\n+        float x = 50f, y = 50f;\n@@ -72,3 +93,0 @@\n-\n-\n-\n@@ -77,5 +95,5 @@\n-     public void paint(Graphics g) {\n-       g.setColor(Color.white);\n-       g.fillRect(0,0,getSize().width, getSize().height);\n-       drawGVs(g);\n-     }\n+    public void paint(Graphics g) {\n+        g.setColor(Color.white);\n+        g.fillRect(0,0,getSize().width, getSize().height);\n+        drawGVs(g);\n+    }\n@@ -100,0 +118,30 @@\n+    private static void createTestUI() {\n+        Frame f = new Frame(\"Test PrintGlyphVector\");\n+        PrintGlyphVectorTest pvt = new PrintGlyphVectorTest();\n+        f.add(pvt, BorderLayout.CENTER);\n+\n+        Button printButton = new Button(\"PRINT\");\n+        printButton.addActionListener((e) -> {\n+            PrinterJob pj = PrinterJob.getPrinterJob();\n+            if (pj == null || pj.getPrintService() == null ||\n+                    !pj.printDialog()) {\n+                return;\n+            }\n+            pj.setPrintable(new PrintGlyphVectorTest());\n+            try {\n+                pj.print();\n+            } catch (PrinterException ex) {\n+                System.err.println(ex);\n+            }\n+        });\n+\n+        f.add(printButton, BorderLayout.SOUTH);\n+        f.pack();\n+        f.setVisible(true);\n+\n+        \/\/ add the test frame to dispose\n+        PassFailJFrame.addTestFrame(f);\n+\n+        \/\/ Arrange the test instruction frame and test frame side by side\n+        PassFailJFrame.positionTestFrame(f, PassFailJFrame.Position.HORIZONTAL);\n+    }\n@@ -102,9 +150,4 @@\n-\n-       Frame f = new Frame();\n-       PrintGlyphVectorTest pvt = new PrintGlyphVectorTest();\n-       f.add(\"Center\", pvt);\n-       f.add(\"South\", new PrintInstructions());\n-       f.pack();\n-       f.show();\n-\n-\n+        PassFailJFrame passFailJFrame = new PassFailJFrame(\"Test Instruction\" +\n+                \"Frame\", INSTRUCTIONS, 10, 40, 5);\n+        createTestUI();\n+        passFailJFrame.awaitAndCheck();\n@@ -114,37 +157,0 @@\n-class PrintInstructions extends Panel implements ActionListener {\n-\n-   static final String INSTRUCTIONS =\n-       \"You must have a printer installed for this test.\\n\" +\n-       \"Press the PRINT button below and OK the print dialog\\n\" +\n-       \"Retrieve the output and compare the printed and on-screen text\\n\" +\n-       \" to confirm that in both cases the text is aligned and the boxes\\n\" +\n-       \"are around the text, not offset from the text.\";\n-\n-  PrintInstructions() {\n-\n-     setLayout(new GridLayout(2,1));\n-     TextArea t = new TextArea(INSTRUCTIONS, 8, 80);\n-     add(t);\n-     Button b = new Button(\"PRINT\");\n-     b.setFont(new Font(\"Dialog\", Font.BOLD, 30));\n-     b.addActionListener(this);\n-     add(b);\n-  }\n-\n-  public void actionPerformed(ActionEvent e) {\n-       PrinterJob pj = PrinterJob.getPrinterJob();\n-       if (pj == null ||\n-           pj.getPrintService() == null ||\n-           !pj.printDialog()) {\n-           return;\n-       }\n-\n-       pj.setPrintable(new PrintGlyphVectorTest());\n-       try {\n-           pj.print();\n-       } catch (PrinterException ex) {\n-           System.err.println(ex);\n-       }\n-  }\n-\n-}\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintGlyphVectorTest.java","additions":71,"deletions":65,"binary":false,"changes":136,"status":"modified"}]}