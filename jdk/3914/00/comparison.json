{"files":[{"patch":"@@ -35,0 +35,2 @@\n+#include <linux\/fs.h>\n+#include <sys\/stat.h>\n@@ -248,3 +250,1 @@\n-    if (result == 0) {\n-        return sb.st_size;\n-    } else {\n+    if (result < 0) {\n@@ -253,0 +253,8 @@\n+    #ifdef BLKGETSIZE64\n+    if (S_ISBLK(sb.st_mode)) {\n+        uint64_t size = -1;\n+        ioctl(fd, BLKGETSIZE64, &size);\n+        return (jlong)size;\n+    }\n+    #endif\n+    return sb.st_size;\n","filename":"src\/java.base\/unix\/native\/libjava\/io_util_md.c","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"}]}