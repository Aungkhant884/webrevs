{"files":[{"patch":"@@ -68,0 +68,3 @@\n+\/\/Next define should exactly match to the amount of MTLVC_ADD_VERTEX in MTLVC_ADD_TRIANGLES\n+#define MTL_TRIS_IN_VERTEX 6\n+\n@@ -222,1 +225,3 @@\n-    if (maskCacheIndex >= MTLVC_MASK_CACHE_MAX_INDEX)\n+    \/\/ MTLVC_ADD_TRIANGLES at the end of this function will place MTL_TRIS_IN_VERTEX vertexes to the vertex cache\n+    \/\/ check free space and flush if needed.\n+    if ((maskCacheIndex >= MTLVC_MASK_CACHE_MAX_INDEX) || ((vertexCacheIndex + MTL_TRIS_IN_VERTEX) >= MTLVC_MAX_INDEX))\n@@ -308,1 +313,2 @@\n-    if (vertexCacheIndex >= MTLVC_MAX_INDEX)\n+    \/\/ MTLVC_ADD_TRIANGLES adds MTL_TRIS_IN_VERTEX vertexes into Cache, so need to check space for MTL_TRIS_IN_VERTEX elements\n+    if ((vertexCacheIndex + MTL_TRIS_IN_VERTEX) >= MTLVC_MAX_INDEX)\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLVertexCache.m","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"}]}