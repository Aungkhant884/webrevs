{"files":[{"patch":"@@ -45,0 +45,1 @@\n+import java.awt.event.WindowStateListener;\n@@ -968,0 +969,28 @@\n+    private void waitForWindowState(int state) {\n+        if(peer.getState() == state) {\n+            return;\n+        }\n+\n+        Object lock = new Object();\n+        WindowStateListener wsl = new WindowStateListener() {\n+            public void windowStateChanged(WindowEvent e) {\n+                synchronized (lock) {\n+                    if (e.getNewState() == state) {\n+                        lock.notifyAll();\n+                    }\n+                }\n+            }\n+        };\n+\n+        target.addWindowStateListener(wsl);\n+        if (peer.getState() != state) {\n+            synchronized (lock) {\n+                try {\n+                    lock.wait();\n+                } catch (InterruptedException ie) {}\n+            }\n+        }\n+\n+        target.removeWindowStateListener(wsl);\n+    }\n+\n@@ -989,0 +1018,1 @@\n+                    waitForWindowState(Frame.NORMAL);\n@@ -996,0 +1026,2 @@\n+                    waitForWindowState(Frame.NORMAL);\n+\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CPlatformWindow.java","additions":32,"deletions":0,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -122,1 +122,0 @@\n-java\/awt\/Frame\/MaximizedToIconified\/MaximizedToIconified.java 8296972 macosx-all\n","filename":"test\/jdk\/ProblemList.txt","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -48,1 +48,1 @@\n-    static volatile int lastFrameState = Frame.NORMAL;\n+    static volatile int lastFrameState;\n@@ -80,0 +80,2 @@\n+        lastFrameState = Frame.NORMAL;\n+\n@@ -117,0 +119,1 @@\n+        System.out.println(\"------\");\n","filename":"test\/jdk\/java\/awt\/Frame\/MaximizedToIconified\/MaximizedToIconified.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"}]}