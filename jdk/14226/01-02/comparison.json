{"files":[{"patch":"@@ -45,0 +45,1 @@\n+import java.awt.event.WindowStateListener;\n@@ -968,0 +969,20 @@\n+    private void waitForWindowState(int state) {\n+        Object lock = new Object();\n+        target.addWindowStateListener(new WindowStateListener() {\n+            public void windowStateChanged(WindowEvent e) {\n+                synchronized (lock) {\n+                    if (e.getNewState() == state) {\n+                        lock.notifyAll();\n+                    }\n+                }\n+            }\n+        });\n+        if (peer.getState() != state) {\n+            synchronized (lock) {\n+                try {\n+                    lock.wait();\n+                } catch (InterruptedException ie) {}\n+            }\n+        }\n+    }\n+\n@@ -989,1 +1010,1 @@\n-                    peer.getLWToolkit().realSync();\n+                    waitForWindowState(Frame.NORMAL);\n@@ -997,1 +1018,1 @@\n-                    peer.getLWToolkit().realSync();\n+                    waitForWindowState(Frame.NORMAL);\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CPlatformWindow.java","additions":23,"deletions":2,"binary":false,"changes":25,"status":"modified"}]}