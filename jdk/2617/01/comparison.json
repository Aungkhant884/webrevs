{"files":[{"patch":"@@ -824,2 +824,0 @@\n-jdk\/dynalink\/TypeConverterFactoryMemoryLeakTest.java            8261483 generic-all\n-\n","filename":"test\/jdk\/ProblemList.txt","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ * @run main\/othervm -Xmx4M TypeConverterFactoryMemoryLeakTest\n@@ -37,1 +38,0 @@\n-import java.time.Duration;\n@@ -55,2 +55,4 @@\n-    \/\/ Usually succeeds in less than a second, but give it time\n-    private static final Duration MAX_DURATION = Duration.ofSeconds(15);\n+    \/\/ With -Xmx4M it succeeds in 30 iterations; with 40M it needs\n+    \/\/ 926 iterations, so 5000 should be safe. If this ever fails\n+    \/\/ in future, you can just increase the number of iterations.\n+    private static final int MAX_ITERATIONS = 5000;\n@@ -77,3 +79,1 @@\n-        long start = System.nanoTime();\n-        long deadline = start + MAX_DURATION.toNanos();\n-        while (System.nanoTime() < deadline) {\n+        for (int count = 0; count < MAX_ITERATIONS; ++count) {\n","filename":"test\/jdk\/jdk\/dynalink\/TypeConverterFactoryMemoryLeakTest.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ * @run main\/othervm -Xmx4M TypeConverterFactoryRetentionTests\n@@ -36,1 +37,0 @@\n-import java.time.Duration;\n@@ -53,2 +53,5 @@\n-    \/\/ Usually succeeds in less than a second, but give it time\n-    private static final Duration MAX_DURATION = Duration.ofSeconds(15);\n+    \/\/ With -Xmx4M the three tests succeeds in 219, 145, and 130\n+    \/\/ iteration, respectively, so 5000 should be safe; that works up to\n+    \/\/ -Xmx38M. If this ever fails in future, you can just increase the\n+    \/\/ number of iterations.\n+    private static final int MAX_ITERATIONS = 5000;\n@@ -137,3 +140,1 @@\n-        long start = System.nanoTime();\n-        long deadline = start + MAX_DURATION.toNanos();\n-        while (System.nanoTime() < deadline) {\n+        for (int count = 0; count < MAX_ITERATIONS; ++count) {\n@@ -168,3 +169,1 @@\n-        long start = System.nanoTime();\n-        long deadline = start + MAX_DURATION.toNanos();\n-        while (System.nanoTime() < deadline) {\n+        for (int count = 0; count < MAX_ITERATIONS; ++count) {\n","filename":"test\/jdk\/jdk\/dynalink\/TypeConverterFactoryRetentionTests.java","additions":8,"deletions":9,"binary":false,"changes":17,"status":"modified"}]}