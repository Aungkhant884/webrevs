{"files":[{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2014, 2022, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,1 @@\n+include Utils.gmk\n@@ -42,1 +43,1 @@\n-ALL_MODULES := $(call FindAllModules)\n+ALL_MODULES := $(call FindAllModules) $(EXTRA_MODULES)\n@@ -57,1 +58,4 @@\n-JMODS := $(wildcard $(IMAGES_OUTPUTDIR)\/jmods\/*.jmod)\n+JMODS_DIRS := $(EXTRA_JMODS_DIR) $(IMAGES_OUTPUTDIR)\/jmods\n+\n+JDK_JMODS := $(foreach m, $(JDK_MODULES), $(firstword $(wildcard $(addsuffix \/$m.jmod, $(JMODS_DIRS)))))\n+JRE_JMODS := $(foreach m, $(JRE_MODULES), $(firstword $(wildcard $(addsuffix \/$m.jmod, $(JMODS_DIRS)))))\n@@ -74,1 +78,1 @@\n-    --module-path $(IMAGES_OUTPUTDIR)\/jmods \\\n+    --module-path $(call PathList, $(JMODS_DIRS)) \\\n@@ -90,0 +94,2 @@\n+JDK_IMAGE_SUPPORT_DIR := $(SUPPORT_OUTPUTDIR)\/images\/jdk\n+\n@@ -92,2 +98,2 @@\n-    DEPS := $(JMODS) $(BASE_RELEASE_FILE) \\\n-        $(call DependOnVariable, JDK_MODULES_LIST), \\\n+    DEPS := $(JDK_JMODS) $(BASE_RELEASE_FILE) \\\n+        $(call DependOnVariable, JDK_MODULES_LIST, $(JDK_IMAGE_SUPPORT_DIR)\/_jlink_jdk.vardeps), \\\n@@ -95,1 +101,1 @@\n-    SUPPORT_DIR := $(SUPPORT_OUTPUTDIR)\/images\/jdk, \\\n+    SUPPORT_DIR := $(JDK_IMAGE_SUPPORT_DIR), \\\n@@ -106,2 +112,2 @@\n-    DEPS := $(JMODS) $(BASE_RELEASE_FILE) \\\n-        $(call DependOnVariable, JDK_MODULES_LIST), \\\n+    DEPS := $(JRE_JMODS) $(BASE_RELEASE_FILE) \\\n+        $(call DependOnVariable, JRE_MODULES_LIST), \\\n@@ -145,1 +151,1 @@\n-      SUPPORT_DIR := $$(SUPPORT_OUTPUTDIR)\/images\/jdk, \\\n+      SUPPORT_DIR := $$(JDK_IMAGE_SUPPORT_DIR), \\\n","filename":"make\/Images.gmk","additions":16,"deletions":10,"binary":false,"changes":26,"status":"modified"}]}