{"files":[{"patch":"@@ -137,0 +137,2 @@\n+  BINUTILS_DIR=\"${OUTPUTDIR}\/binutils\"\n+\n@@ -144,4 +146,8 @@\n-  if test -e $BINUTILS_SRC\/bfd\/libbfd.a && \\\n-      test -e $BINUTILS_SRC\/opcodes\/libopcodes.a && \\\n-      test -e $BINUTILS_SRC\/libiberty\/libiberty.a && \\\n-      test -e $BINUTILS_SRC\/zlib\/libz.a; then\n+  if ! test -d $BINUTILS_DIR; then\n+    $MKDIR -p $BINUTILS_DIR\n+  fi\n+\n+  if test -e $BINUTILS_DIR\/bfd\/libbfd.a && \\\n+      test -e $BINUTILS_DIR\/opcodes\/libopcodes.a && \\\n+      test -e $BINUTILS_DIR\/libiberty\/libiberty.a && \\\n+      test -e $BINUTILS_DIR\/zlib\/libz.a; then\n@@ -178,1 +184,5 @@\n-      binutils_target=\"\"\n+      if test \"x$COMPILE_TYPE\" = xcross; then\n+        binutils_target=\"--host=$OPENJDK_TARGET_AUTOCONF_NAME\"\n+      else\n+        binutils_target=\"\"\n+      fi\n@@ -183,1 +193,1 @@\n-    AC_MSG_NOTICE([configure command line: .\/configure --disable-nls CFLAGS=\"$binutils_cflags\" CC=\"$binutils_cc\" $binutils_target])\n+    AC_MSG_NOTICE([configure command line: cd $BINUTILS_DIR && $BINUTILS_SRC\/configure --disable-nls CFLAGS=\"$binutils_cflags\" CC=\"$binutils_cc\" $binutils_target])\n@@ -185,3 +195,3 @@\n-    cd \"$BINUTILS_SRC\"\n-    .\/configure --disable-nls CFLAGS=\"$binutils_cflags\" CC=\"$binutils_cc\" $binutils_target\n-    if test $? -ne 0 || ! test -e $BINUTILS_SRC\/Makefile; then\n+    cd \"$BINUTILS_DIR\"\n+    $BINUTILS_SRC\/configure --disable-nls CFLAGS=\"$binutils_cflags\" CC=\"$binutils_cc\" $binutils_target\n+    if test $? -ne 0 || ! test -e $BINUTILS_DIR\/Makefile; then\n@@ -200,2 +210,0 @@\n-\n-  BINUTILS_DIR=\"$BINUTILS_SRC\"\n@@ -237,2 +245,8 @@\n-        test -e $BINUTILS_DIR\/libiberty\/libiberty.a; then\n-      HSDIS_CFLAGS=\"-I$BINUTILS_DIR\/include -I$BINUTILS_DIR\/bfd -DLIBARCH_$OPENJDK_TARGET_CPU_LEGACY_LIB\"\n+        test -e $BINUTILS_DIR\/libiberty\/libiberty.a && \\\n+        test -e $BINUTILS_DIR\/zlib\/libz.a; then\n+      HSDIS_CFLAGS=\"-DLIBARCH_$OPENJDK_TARGET_CPU_LEGACY_LIB\"\n+      if test -n \"$BINUTILS_SRC\"; then\n+        HSDIS_CFLAGS=\"$HSDIS_CFLAGS -I$BINUTILS_SRC\/include -I$BINUTILS_DIR\/bfd\"\n+      else\n+        HSDIS_CFLAGS=\"$HSDIS_CFLAGS -I$BINUTILS_DIR\/include -I$BINUTILS_DIR\/bfd\"\n+      fi\n","filename":"make\/autoconf\/lib-hsdis.m4","additions":27,"deletions":13,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -569,1 +569,3 @@\n-  dinfo->disassembler_options = disassembler_options;\n+  dinfo->disassembler_options =\n+    disassembler_options != NULL && disassembler_options[0] != '\\0' ?\n+      disassembler_options : NULL;\n","filename":"src\/utils\/hsdis\/binutils\/hsdis-binutils.c","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"}]}