{"files":[{"patch":"@@ -206,2 +206,3 @@\n-  int get_int_table( int index ) const {\n-    return Bytes::get_Java_u4((address)&_table_base[index]); }\n+  jint get_int_table( int index ) const {\n+    return (jint)Bytes::get_Java_u4((address)&_table_base[index]);\n+  }\n@@ -210,1 +211,2 @@\n-    return cur_bci() + get_int_table(index); }\n+    return cur_bci() + get_int_table(index);\n+  }\n","filename":"src\/hotspot\/share\/ci\/ciStreams.hpp","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -413,2 +413,2 @@\n-  int lo_index     = iter().get_int_table(1);\n-  int hi_index     = iter().get_int_table(2);\n+  jint lo_index    = iter().get_int_table(1);\n+  jint hi_index    = iter().get_int_table(2);\n@@ -441,1 +441,1 @@\n-    uint cnt = 1;\n+    float cnt = 1.0F;\n@@ -443,1 +443,1 @@\n-      cnt = profile->default_count() \/ (hi_index != max_jint ? 2 : 1);\n+      cnt = (float)profile->default_count() \/ (hi_index != max_jint ? 2.0F : 1.0F);\n@@ -451,1 +451,1 @@\n-    uint cnt = 1;\n+    float cnt = 1.0F;\n@@ -453,1 +453,1 @@\n-      cnt = profile->count_at(j);\n+      cnt = (float)profile->count_at(j);\n@@ -462,1 +462,1 @@\n-    uint cnt = 1;\n+    float cnt = 1.0F;\n@@ -464,1 +464,1 @@\n-      cnt = profile->default_count() \/ (lo_index != min_jint ? 2 : 1);\n+      cnt = (float)profile->default_count() \/ (lo_index != min_jint ? 2.0F : 1.0F);\n@@ -490,1 +490,1 @@\n-  int len          = iter().get_int_table(1);\n+  jint len          = iter().get_int_table(1);\n@@ -516,1 +516,1 @@\n-      table[3*j+2] = (profile == NULL) ? 1 : MIN2<uint>(max_jint, profile->count_at(j));\n+      table[3*j+2] = (profile == NULL) ? 1 : (jint)MIN2<uint>((uint)max_jint, profile->count_at(j));\n@@ -521,13 +521,1 @@\n-  float defaults = 0;\n-  jint prev = min_jint;\n-  for (int j = 0; j < len; j++) {\n-    jint match_int = table[3*j+0];\n-    if (match_int != prev) {\n-      defaults += (float)match_int - prev;\n-    }\n-    prev = match_int+1;\n-  }\n-  if (prev != min_jint) {\n-    defaults += (float)max_jint - prev + 1;\n-  }\n-  float default_cnt = 1;\n+  float default_cnt = 1.0F;\n@@ -535,1 +523,2 @@\n-    default_cnt = profile->default_count()\/defaults;\n+    juint defaults = max_juint - len;\n+    default_cnt = (float)profile->default_count()\/(float)defaults;\n@@ -544,3 +533,3 @@\n-    int  dest        = table[3*j+1];\n-    int  cnt         = table[3*j+2];\n-    int  next_lo     = rp < 0 ? min_jint : ranges[rp].hi()+1;\n+    jint  dest        = table[3*j+1];\n+    jint  cnt         = table[3*j+2];\n+    jint  next_lo     = rp < 0 ? min_jint : ranges[rp].hi()+1;\n@@ -548,1 +537,1 @@\n-    float c = default_cnt * ((float)match_int - next_lo);\n+    float c = default_cnt * ((float)match_int - (float)next_lo);\n@@ -553,1 +542,1 @@\n-    if (rp < 0 || !ranges[rp].adjoin(match_int, dest, cnt, trim_ranges)) {\n+    if (rp < 0 || !ranges[rp].adjoin(match_int, dest, (float)cnt, trim_ranges)) {\n@@ -555,1 +544,1 @@\n-      ranges[++rp].set(match_int, dest, cnt);\n+      ranges[++rp].set(match_int, dest,  (float)cnt);\n@@ -561,2 +550,2 @@\n-      !ranges[rp].adjoinRange(highest+1, max_jint, default_dest, default_cnt * ((float)max_jint - highest), trim_ranges)) {\n-    ranges[++rp].setRange(highest+1, max_jint, default_dest, default_cnt * ((float)max_jint - highest));\n+      !ranges[rp].adjoinRange(highest+1, max_jint, default_dest, default_cnt * ((float)max_jint - (float)highest), trim_ranges)) {\n+    ranges[++rp].setRange(highest+1, max_jint, default_dest, default_cnt * ((float)max_jint - (float)highest));\n","filename":"src\/hotspot\/share\/opto\/parse2.cpp","additions":21,"deletions":32,"binary":false,"changes":53,"status":"modified"}]}