{"files":[{"patch":"@@ -3607,1 +3607,1 @@\n-          return default_large_page_size;\n+          break;\n@@ -3627,1 +3627,1 @@\n-  static os::PageSizes page_sizes;\n+  os::PageSizes page_sizes;\n@@ -3739,1 +3739,8 @@\n-  if (!FLAG_IS_DEFAULT(LargePageSizeInBytes) && LargePageSizeInBytes != default_large_page_size) {\n+ if (FLAG_IS_DEFAULT(LargePageSizeInBytes) ||\n+      LargePageSizeInBytes == 0 ||\n+      LargePageSizeInBytes == default_large_page_size) {\n+    _large_page_size = default_large_page_size;\n+    log_info(pagesize)(\"Using the default large page size: \" SIZE_FORMAT \"%s\",\n+                       byte_size_in_exact_unit(_large_page_size),\n+                       exact_unit_for_byte_size(_large_page_size));\n+  } else {\n@@ -3742,5 +3749,6 @@\n-      log_info(pagesize)(\"Overriding default large page size ( \"\n-                         SIZE_FORMAT \" ) using LargePageSizeInBytes: \"\n-                         SIZE_FORMAT,\n-                         default_large_page_size,\n-                         LargePageSizeInBytes);\n+      log_info(pagesize)(\"Overriding default large page size (\" SIZE_FORMAT \"%s) \"\n+                         \"using LargePageSizeInBytes: \" SIZE_FORMAT \"%s\",\n+                         byte_size_in_exact_unit(default_large_page_size),\n+                         exact_unit_for_byte_size(default_large_page_size),\n+                         byte_size_in_exact_unit(_large_page_size),\n+                         exact_unit_for_byte_size(_large_page_size));\n@@ -3749,0 +3757,6 @@\n+      log_info(pagesize)(\"LargePageSizeInBytes is not a valid large page size (\" SIZE_FORMAT \"%s) \"\n+                         \"using the default large page size: \" SIZE_FORMAT \"%s\",\n+                         byte_size_in_exact_unit(LargePageSizeInBytes),\n+                         exact_unit_for_byte_size(LargePageSizeInBytes),\n+                         byte_size_in_exact_unit(_large_page_size),\n+                         exact_unit_for_byte_size(_large_page_size));\n@@ -3750,2 +3764,0 @@\n-  } else {\n-    _large_page_size = default_large_page_size;\n@@ -3764,1 +3776,1 @@\n-    ls.print(\"Available page sizes: \");\n+    ls.print(\"Usable page sizes: \");\n@@ -3766,0 +3778,2 @@\n+    ls.print(\"All large Page sizes: \");\n+    all_large_pages.print_on(&ls);\n@@ -3975,5 +3989,0 @@\n-  assert(page_size > (size_t)os::vm_page_size(), \"large page size: \"\n-                                                        SIZE_FORMAT \" not larger than small page size: \"\n-                                                        SIZE_FORMAT,\n-                                                        page_size,\n-                                                        (size_t)os::vm_page_size());\n@@ -3985,0 +3994,1 @@\n+  assert(page_size > (size_t)os::vm_page_size(), \"Must be a large page size\");\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":26,"deletions":16,"binary":false,"changes":42,"status":"modified"}]}