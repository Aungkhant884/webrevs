{"files":[{"patch":"@@ -288,18 +288,0 @@\n-    private Object classDataValues() {\n-        final List<ClassData> cd = classData;\n-        return switch(cd.size()) {\n-            case 0 -> null;\n-            case 1 -> cd.get(0).value;\n-            case 2 -> List.of(cd.get(0).value, cd.get(1).value);\n-            case 3 -> List.of(cd.get(0).value, cd.get(1).value, cd.get(2).value);\n-            case 4 -> List.of(cd.get(0).value, cd.get(1).value, cd.get(2).value, cd.get(3).value);\n-            default -> {\n-                Object[] data = new Object[classData.size()];\n-                for (int i = 0; i < classData.size(); i++) {\n-                    data[i] = classData.get(i).value;\n-                }\n-                yield List.of(data);\n-            }\n-        };\n-    }\n-\n@@ -363,0 +345,23 @@\n+    \/**\n+     * Returns an object to pass this.classData to the <clinit> method of the\n+     * generated class. It's usually a copy of the list, but in special cases\n+     * where the list's size is 0 or 1, we avoid making the copy.\n+     *\/\n+    private Object classDataValues() {\n+        final List<ClassData> cd = classData;\n+        return switch(cd.size()) {\n+            case 0 -> null;             \/\/ special case (classData is not used by <clinit>)\n+            case 1 -> cd.get(0).value;  \/\/ special case (single object)\n+            case 2 -> List.of(cd.get(0).value, cd.get(1).value);\n+            case 3 -> List.of(cd.get(0).value, cd.get(1).value, cd.get(2).value);\n+            case 4 -> List.of(cd.get(0).value, cd.get(1).value, cd.get(2).value, cd.get(3).value);\n+            default -> {\n+                Object[] data = new Object[classData.size()];\n+                for (int i = 0; i < classData.size(); i++) {\n+                    data[i] = classData.get(i).value;\n+                }\n+                yield List.of(data);\n+            }\n+        };\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/InvokerBytecodeGenerator.java","additions":23,"deletions":18,"binary":false,"changes":41,"status":"modified"}]}