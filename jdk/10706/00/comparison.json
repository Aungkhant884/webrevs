{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -320,0 +320,7 @@\n+        Object cd;\n+        if (classData.size() == 1) {\n+            cd = classData.get(0).value;\n+        } else {\n+            cd = classDataValues();\n+        }\n+\n@@ -321,1 +328,1 @@\n-                                      .defineClass(true, classDataValues());\n+                                      .defineClass(true, cd);\n@@ -382,10 +389,2 @@\n-        \/\/ we should optimize one single element case that does not need to create a List\n-        mv.visitTypeInsn(Opcodes.CHECKCAST, \"java\/util\/List\");\n-        mv.visitVarInsn(Opcodes.ASTORE, 0);\n-        int index = 0;\n-        for (ClassData p : classData) {\n-            \/\/ initialize the static field\n-            mv.visitVarInsn(Opcodes.ALOAD, 0);\n-            emitIconstInsn(mv, index++);\n-            mv.visitMethodInsn(Opcodes.INVOKEINTERFACE, \"java\/util\/List\",\n-                               \"get\", \"(I)Ljava\/lang\/Object;\", true);\n+        if (classData.size() == 1) {\n+            ClassData p = classData.get(0);\n@@ -394,0 +393,13 @@\n+        } else {\n+            mv.visitTypeInsn(Opcodes.CHECKCAST, \"java\/util\/List\");\n+            mv.visitVarInsn(Opcodes.ASTORE, 0);\n+            int index = 0;\n+            for (ClassData p : classData) {\n+                \/\/ initialize the static field\n+                mv.visitVarInsn(Opcodes.ALOAD, 0);\n+                emitIconstInsn(mv, index++);\n+                mv.visitMethodInsn(Opcodes.INVOKEINTERFACE, \"java\/util\/List\",\n+                                   \"get\", \"(I)Ljava\/lang\/Object;\", true);\n+                mv.visitTypeInsn(Opcodes.CHECKCAST, p.desc.substring(1, p.desc.length()-1));\n+                mv.visitFieldInsn(Opcodes.PUTSTATIC, className, p.name, p.desc);\n+            }\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/InvokerBytecodeGenerator.java","additions":24,"deletions":12,"binary":false,"changes":36,"status":"modified"}]}