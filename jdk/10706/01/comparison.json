{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -288,1 +288,1 @@\n-    List<Object> classDataValues() {\n+    private Object classDataValues() {\n@@ -291,2 +291,2 @@\n-            case 0 -> List.of();\n-            case 1 -> List.of(cd.get(0).value);\n+            case 0 -> null;\n+            case 1 -> cd.get(0).value;\n@@ -382,10 +382,2 @@\n-        \/\/ we should optimize one single element case that does not need to create a List\n-        mv.visitTypeInsn(Opcodes.CHECKCAST, \"java\/util\/List\");\n-        mv.visitVarInsn(Opcodes.ASTORE, 0);\n-        int index = 0;\n-        for (ClassData p : classData) {\n-            \/\/ initialize the static field\n-            mv.visitVarInsn(Opcodes.ALOAD, 0);\n-            emitIconstInsn(mv, index++);\n-            mv.visitMethodInsn(Opcodes.INVOKEINTERFACE, \"java\/util\/List\",\n-                               \"get\", \"(I)Ljava\/lang\/Object;\", true);\n+        if (classData.size() == 1) {\n+            ClassData p = classData.get(0);\n@@ -394,0 +386,13 @@\n+        } else {\n+            mv.visitTypeInsn(Opcodes.CHECKCAST, \"java\/util\/List\");\n+            mv.visitVarInsn(Opcodes.ASTORE, 0);\n+            int index = 0;\n+            for (ClassData p : classData) {\n+                \/\/ initialize the static field\n+                mv.visitVarInsn(Opcodes.ALOAD, 0);\n+                emitIconstInsn(mv, index++);\n+                mv.visitMethodInsn(Opcodes.INVOKEINTERFACE, \"java\/util\/List\",\n+                                   \"get\", \"(I)Ljava\/lang\/Object;\", true);\n+                mv.visitTypeInsn(Opcodes.CHECKCAST, p.desc.substring(1, p.desc.length()-1));\n+                mv.visitFieldInsn(Opcodes.PUTSTATIC, className, p.name, p.desc);\n+            }\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/InvokerBytecodeGenerator.java","additions":19,"deletions":14,"binary":false,"changes":33,"status":"modified"}]}