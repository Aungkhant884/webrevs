{"files":[{"patch":"@@ -191,1 +191,1 @@\n-                        Thread.sleep(100);\n+                        Thread.sleep(checks * 100);\n@@ -209,1 +209,1 @@\n-                    polled = queue.remove(100);\n+                    polled = queue.remove(checks * 100);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/gctests\/PhantomReference\/phantom001\/phantom001.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -95,3 +95,0 @@\n-            \/\/ Pre-allocated OOME message to avoid OOME when logging it\n-            String oomMsg = \"Ignored OOME in run()\";\n-\n@@ -151,5 +148,0 @@\n-            WhiteBox.getWhiteBox().fullGC();\n-            if (!getExecutionController().continueExecution()) {\n-                \/\/ we were interrrupted by stresser. just exit...\n-                return;\n-            }\n@@ -157,4 +149,16 @@\n-            try {\n-                polledReference = queue.remove();\n-            } catch (InterruptedException e) {\n-                log.error(\"Unexpected InterruptedException during queue.remove().\");\n+            for (int i = 0; i < 10 && polledReference == null; i++) {\n+                WhiteBox.getWhiteBox().fullGC();\n+                if (!getExecutionController().continueExecution()) {\n+                    \/\/ we were interrrupted by stresser. just exit...\n+                    return;\n+                }\n+                try {\n+                    polledReference = queue.remove(i * 100);\n+                } catch (InterruptedException e) {\n+                    log.error(\"Unexpected InterruptedException during queue.remove().\");\n+                    setFailed(true);\n+                }\n+            }\n+\n+            if (polledReference == null) {\n+                log.error(\"Haven't polled reference after 10 GC.\");\n@@ -163,0 +167,1 @@\n+\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/gctests\/SoftReference\/soft001\/soft001.java","additions":17,"deletions":12,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -148,1 +148,0 @@\n-            WhiteBox.getWhiteBox().fullGC();\n@@ -150,4 +149,16 @@\n-            try {\n-                polledReference = queue.remove();\n-            } catch (InterruptedException e) {\n-                log.error(\"Unexpected InterruptedException during queue.remove().\");\n+            for (int i = 0; i < 10 && polledReference == null; i++) {\n+                WhiteBox.getWhiteBox().fullGC();\n+                if (!getExecutionController().continueExecution()) {\n+                    \/\/ we were interrrupted by stresser. just exit...\n+                    return;\n+                }\n+                try {\n+                    polledReference = queue.remove(i * 100);\n+                } catch (InterruptedException e) {\n+                    log.error(\"Unexpected InterruptedException during queue.remove().\");\n+                    setFailed(true);\n+                }\n+            }\n+\n+            if (polledReference == null) {\n+                log.error(\"Haven't polled reference after 10 GC.\");\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/gctests\/WeakReference\/weak001\/weak001.java","additions":16,"deletions":5,"binary":false,"changes":21,"status":"modified"}]}