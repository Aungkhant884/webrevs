{"files":[{"patch":"@@ -136,0 +136,4 @@\n+  private:\n+    template <typename T>\n+    static void oop_store_common(T* addr, oop value);\n+\n@@ -177,1 +181,0 @@\n-\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahBarrierSet.hpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -244,1 +244,1 @@\n-inline void ShenandoahBarrierSet::AccessBarrier<decorators, BarrierSetT>::oop_store_not_in_heap(T* addr, oop value) {\n+inline void ShenandoahBarrierSet::AccessBarrier<decorators, BarrierSetT>::oop_store_common(T* addr, oop value) {\n@@ -253,0 +253,6 @@\n+template <DecoratorSet decorators, typename BarrierSetT>\n+template <typename T>\n+inline void ShenandoahBarrierSet::AccessBarrier<decorators, BarrierSetT>::oop_store_not_in_heap(T* addr, oop value) {\n+  oop_store_common(addr, value);\n+}\n+\n@@ -258,1 +264,0 @@\n-  shenandoah_assert_not_in_cset_except    (addr, value, value == NULL || ShenandoahHeap::heap()->cancelled_gc() || !ShenandoahHeap::heap()->is_concurrent_mark_in_progress());\n@@ -260,1 +265,1 @@\n-  oop_store_not_in_heap(addr, value);\n+  oop_store_common(addr, value);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahBarrierSet.inline.hpp","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -1233,3 +1233,2 @@\n-    T o = RawAccess<>::oop_load(p);\n-    if (!CompressedOops::is_null(o)) {\n-      oop obj = CompressedOops::decode_not_null(o);\n+    oop obj = HeapAccess<AS_NO_KEEPALIVE>::oop_load(p);\n+    if (!CompressedOops::is_null(obj)) {\n@@ -1240,2 +1239,0 @@\n-      obj = ShenandoahBarrierSet::resolve_forwarded_not_null(obj);\n-\n@@ -1343,3 +1340,2 @@\n-    T o = RawAccess<>::oop_load(p);\n-    if (!CompressedOops::is_null(o)) {\n-      oop obj = CompressedOops::decode_not_null(o);\n+    oop obj = HeapAccess<AS_NO_KEEPALIVE>::oop_load(p);\n+    if (!CompressedOops::is_null(obj)) {\n@@ -1350,2 +1346,0 @@\n-      obj = ShenandoahBarrierSet::resolve_forwarded_not_null(obj);\n-\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.cpp","additions":4,"deletions":10,"binary":false,"changes":14,"status":"modified"}]}