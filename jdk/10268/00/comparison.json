{"files":[{"patch":"@@ -178,0 +178,2 @@\n+    template <typename T>\n+    static void oop_store_common(T* addr, oop value);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahBarrierSet.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -244,1 +244,1 @@\n-inline void ShenandoahBarrierSet::AccessBarrier<decorators, BarrierSetT>::oop_store_not_in_heap(T* addr, oop value) {\n+inline void ShenandoahBarrierSet::AccessBarrier<decorators, BarrierSetT>::oop_store_common(T* addr, oop value) {\n@@ -246,1 +246,1 @@\n-  shenandoah_assert_not_in_cset_if(addr, value, value != NULL && !ShenandoahHeap::heap()->cancelled_gc());\n+  shenandoah_assert_not_in_cset_if(addr, value, value != NULL && !ShenandoahHeap::heap()->cancelled_gc() && ShenandoahHeap::heap()->is_concurrent_mark_in_progress());\n@@ -253,0 +253,6 @@\n+template <DecoratorSet decorators, typename BarrierSetT>\n+template <typename T>\n+inline void ShenandoahBarrierSet::AccessBarrier<decorators, BarrierSetT>::oop_store_not_in_heap(T* addr, oop value) {\n+  oop_store_common(addr, value);\n+}\n+\n@@ -258,1 +264,0 @@\n-  shenandoah_assert_not_in_cset_except    (addr, value, value == NULL || ShenandoahHeap::heap()->cancelled_gc() || !ShenandoahHeap::heap()->is_concurrent_mark_in_progress());\n@@ -260,1 +265,1 @@\n-  oop_store_not_in_heap(addr, value);\n+  oop_store_common(addr, value);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahBarrierSet.inline.hpp","additions":9,"deletions":4,"binary":false,"changes":13,"status":"modified"}]}