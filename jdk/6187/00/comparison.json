{"files":[{"patch":"@@ -36,1 +36,1 @@\n-  const int neg = JVM_ACC_STATIC | JVM_ACC_SYNCHRONIZED;\n+  const int neg = JVM_ACC_STATIC | JVM_ACC_SYNCHRONIZED | JVM_ACC_NATIVE;\n@@ -42,1 +42,1 @@\n-  const int neg = JVM_ACC_STATIC;\n+  const int neg = JVM_ACC_STATIC | JVM_ACC_NATIVE;\n@@ -54,1 +54,1 @@\n-  const int neg = JVM_ACC_SYNCHRONIZED;\n+  const int neg = JVM_ACC_SYNCHRONIZED | JVM_ACC_NATIVE;\n","filename":"src\/hotspot\/share\/classfile\/vmIntrinsics.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -110,1 +110,1 @@\n-  do_intrinsic(_hashCode,                 java_lang_Object,       hashCode_name, void_int_signature,             F_R)   \\\n+  do_intrinsic(_hashCode,                 java_lang_Object,       hashCode_name, void_int_signature,             F_RN)  \\\n@@ -112,1 +112,1 @@\n-  do_intrinsic(_getClass,                 java_lang_Object,       getClass_name, void_class_signature,           F_R)   \\\n+  do_intrinsic(_getClass,                 java_lang_Object,       getClass_name, void_class_signature,           F_RN)  \\\n@@ -114,1 +114,1 @@\n-  do_intrinsic(_clone,                    java_lang_Object,       clone_name, void_object_signature,             F_R)   \\\n+  do_intrinsic(_clone,                    java_lang_Object,       clone_name, void_object_signature,             F_RN)  \\\n@@ -116,1 +116,1 @@\n-  do_intrinsic(_notify,                   java_lang_Object,       notify_name, void_method_signature,            F_R)   \\\n+  do_intrinsic(_notify,                   java_lang_Object,       notify_name, void_method_signature,            F_RN)  \\\n@@ -118,1 +118,1 @@\n-  do_intrinsic(_notifyAll,                java_lang_Object,       notifyAll_name, void_method_signature,         F_R)   \\\n+  do_intrinsic(_notifyAll,                java_lang_Object,       notifyAll_name, void_method_signature,         F_RN)  \\\n@@ -203,1 +203,1 @@\n-  do_intrinsic(_floatToRawIntBits,        java_lang_Float,        floatToRawIntBits_name,   float_int_signature, F_S)   \\\n+  do_intrinsic(_floatToRawIntBits,        java_lang_Float,        floatToRawIntBits_name,   float_int_signature, F_SN)  \\\n@@ -207,1 +207,1 @@\n-  do_intrinsic(_intBitsToFloat,           java_lang_Float,        intBitsToFloat_name,      int_float_signature, F_S)   \\\n+  do_intrinsic(_intBitsToFloat,           java_lang_Float,        intBitsToFloat_name,      int_float_signature, F_SN)  \\\n@@ -209,1 +209,1 @@\n-  do_intrinsic(_doubleToRawLongBits,      java_lang_Double,       doubleToRawLongBits_name, double_long_signature, F_S) \\\n+  do_intrinsic(_doubleToRawLongBits,      java_lang_Double,       doubleToRawLongBits_name, double_long_signature, F_SN)\\\n@@ -213,1 +213,1 @@\n-  do_intrinsic(_longBitsToDouble,         java_lang_Double,       longBitsToDouble_name,    long_double_signature, F_S) \\\n+  do_intrinsic(_longBitsToDouble,         java_lang_Double,       longBitsToDouble_name,    long_double_signature, F_SN)\\\n@@ -234,1 +234,1 @@\n-  do_intrinsic(_identityHashCode,         java_lang_System,       identityHashCode_name, object_int_signature,   F_S)   \\\n+  do_intrinsic(_identityHashCode,         java_lang_System,       identityHashCode_name, object_int_signature,   F_SN)  \\\n@@ -236,1 +236,1 @@\n-  do_intrinsic(_currentTimeMillis,        java_lang_System,       currentTimeMillis_name, void_long_signature,   F_S)   \\\n+  do_intrinsic(_currentTimeMillis,        java_lang_System,       currentTimeMillis_name, void_long_signature,   F_SN)  \\\n@@ -239,1 +239,1 @@\n-  do_intrinsic(_nanoTime,                 java_lang_System,       nanoTime_name,          void_long_signature,   F_S)   \\\n+  do_intrinsic(_nanoTime,                 java_lang_System,       nanoTime_name,          void_long_signature,   F_SN)  \\\n@@ -244,1 +244,1 @@\n-  do_intrinsic(_arraycopy,                java_lang_System,       arraycopy_name, arraycopy_signature,           F_S)   \\\n+  do_intrinsic(_arraycopy,                java_lang_System,       arraycopy_name, arraycopy_signature,           F_SN)  \\\n@@ -247,1 +247,1 @@\n-  do_intrinsic(_currentThread,            java_lang_Thread,       currentThread_name, currentThread_signature,   F_S)   \\\n+  do_intrinsic(_currentThread,            java_lang_Thread,       currentThread_name, currentThread_signature,   F_SN)  \\\n@@ -404,3 +404,3 @@\n-  do_intrinsic(_Reference_get,            java_lang_ref_Reference, get_name,    void_object_signature, F_R)             \\\n-  do_intrinsic(_Reference_refersTo0,     java_lang_ref_Reference, refersTo0_name, object_boolean_signature, F_R)        \\\n-  do_intrinsic(_PhantomReference_refersTo0, java_lang_ref_PhantomReference, refersTo0_name, object_boolean_signature, F_R) \\\n+  do_intrinsic(_Reference_get,              java_lang_ref_Reference, get_name,       void_object_signature,    F_R)     \\\n+  do_intrinsic(_Reference_refersTo0,        java_lang_ref_Reference, refersTo0_name, object_boolean_signature, F_RN)    \\\n+  do_intrinsic(_PhantomReference_refersTo0, java_lang_ref_PhantomReference, refersTo0_name, object_boolean_signature, F_RN) \\\n@@ -954,1 +954,1 @@\n-  do_intrinsic(_park,                     jdk_internal_misc_Unsafe,     park_name, park_signature,                     F_R)    \\\n+  do_intrinsic(_park,                     jdk_internal_misc_Unsafe,     park_name, park_signature,                     F_RN)   \\\n@@ -957,1 +957,1 @@\n-  do_intrinsic(_unpark,                   jdk_internal_misc_Unsafe,     unpark_name, unpark_signature,                 F_R)    \\\n+  do_intrinsic(_unpark,                   jdk_internal_misc_Unsafe,     unpark_name, unpark_signature,                 F_RN)   \\\n@@ -1093,3 +1093,3 @@\n-    F_R,                        \/\/ !static ?native !synchronized (R=\"regular\")\n-    F_S,                        \/\/  static ?native !synchronized\n-    F_Y,                        \/\/ !static ?native  synchronized\n+    F_R,                        \/\/ !static !native !synchronized (R=\"regular\")\n+    F_S,                        \/\/  static !native !synchronized\n+    F_Y,                        \/\/ !static !native  synchronized\n@@ -1105,0 +1105,44 @@\n+  static constexpr bool is_flag_static(Flags flags) {\n+    switch (flags) {\n+      case F_S:\n+      case F_SN:\n+        return true;\n+      case F_R:\n+      case F_Y:\n+      case F_RN:\n+        return false;\n+      default:\n+        ShouldNotReachHere();\n+        return false;\n+    }\n+  }\n+\n+  static constexpr bool is_flag_synchronized(Flags flags) {\n+    switch (flags) {\n+      case F_Y:\n+        return true;\n+      case F_RN:\n+      case F_SN:\n+      case F_S:\n+      case F_R:\n+        return false;\n+      default:\n+        ShouldNotReachHere();\n+        return false;\n+    }\n+  }\n+\n+  static constexpr bool is_flag_native(Flags flags) {\n+    switch (flags) {\n+      case F_RN:\n+      case F_SN:\n+        return true;\n+      case F_S:\n+      case F_R:\n+      case F_Y:\n+        return false;\n+      default:\n+        ShouldNotReachHere();\n+        return false;\n+    }\n+  }\n@@ -1156,3 +1200,9 @@\n-    assert(    class_for(id) == holder, \"correct id\");\n-    assert(     name_for(id) == name,   \"correct id\");\n-    assert(signature_for(id) == sig,    \"correct id\");\n+    assert(    class_for(id) == holder, \"correct class: %s\",     name_at(id));\n+    assert(     name_for(id) == name,   \"correct name: %s\",      name_at(id));\n+    assert(signature_for(id) == sig,    \"correct signature: %s\", name_at(id));\n+    assert(      is_flag_static(flags_for(id)) == ((flags & JVM_ACC_STATIC)       != 0),\n+                 \"correct static flag: %s\", name_at(id));\n+    assert(is_flag_synchronized(flags_for(id)) == ((flags & JVM_ACC_SYNCHRONIZED) != 0),\n+           \"correct synchronized flag: %s\", name_at(id));\n+    assert(      is_flag_native(flags_for(id)) == ((flags & JVM_ACC_NATIVE)       != 0),\n+                 \"correct native flag: %s\", name_at(id));\n@@ -1167,1 +1217,1 @@\n-  static Flags              flags_for(ID id);\n+  static Flags          flags_for(ID id);\n","filename":"src\/hotspot\/share\/classfile\/vmIntrinsics.hpp","additions":76,"deletions":26,"binary":false,"changes":102,"status":"modified"}]}