{"files":[{"patch":"@@ -37,6 +37,0 @@\n-struct G1CodeRootSetHashTableValue {\n-  nmethod* _nmethod;\n-\n-  G1CodeRootSetHashTableValue(nmethod* nmethod) : _nmethod(nmethod) { }\n-};\n-\n@@ -45,1 +39,1 @@\n-  using Value = G1CodeRootSetHashTableValue;\n+  using Value = nmethod*;\n@@ -81,2 +75,2 @@\n-    bool equals(G1CodeRootSetHashTableValue* value);\n-    bool is_dead(G1CodeRootSetHashTableValue* value) const { return false; }\n+    bool equals(nmethod** value);\n+    bool is_dead(nmethod** value) const { return false; }\n@@ -88,1 +82,1 @@\n-    void operator()(G1CodeRootSetHashTableValue* value) { \/* do nothing *\/ }\n+    void operator()(nmethod** value) { \/* do nothing *\/ }\n@@ -126,1 +120,0 @@\n-    G1CodeRootSetHashTableValue value(method);\n@@ -128,1 +121,1 @@\n-    bool inserted = _table.insert(Thread::current(), lookup, value, &grow_hint);\n+    bool inserted = _table.insert(Thread::current(), lookup, method, &grow_hint);\n@@ -165,2 +158,2 @@\n-      [&] (G1CodeRootSetHashTableValue* value) {\n-        blk->do_code_blob(value->_nmethod);\n+      [&] (nmethod** value) {\n+        blk->do_code_blob(*value);\n@@ -182,1 +175,1 @@\n-      [&] (G1CodeRootSetHashTableValue* value) {\n+      [&] (nmethod** value) {\n@@ -231,2 +224,2 @@\n-bool G1CodeRootSetHashTable::HashTableLookUp::equals(G1CodeRootSetHashTableValue* value) {\n-  return value->_nmethod == _nmethod;\n+bool G1CodeRootSetHashTable::HashTableLookUp::equals(nmethod** value) {\n+  return *value == _nmethod;\n@@ -237,1 +230,1 @@\n-  return G1CodeRootSetHashTable::get_hash(value._nmethod);\n+  return G1CodeRootSetHashTable::get_hash(value);\n@@ -313,1 +306,1 @@\n-  bool operator()(G1CodeRootSetHashTableValue* value) {\n+  bool operator()(nmethod** value) {\n@@ -315,1 +308,1 @@\n-    _blobs.do_code_blob(value->_nmethod);\n+    _blobs.do_code_blob(*value);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CodeRootSet.cpp","additions":13,"deletions":20,"binary":false,"changes":33,"status":"modified"}]}