{"files":[{"patch":"@@ -280,1 +280,0 @@\n-            saveGlobalRef(env, localAgentProperties, &(gdata->agent_properties));\n@@ -286,0 +285,1 @@\n+            saveGlobalRef(env, localAgentProperties, &(gdata->agent_properties));\n","filename":"src\/jdk.jdwp.agent\/share\/native\/libjdwp\/util.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,2 @@\n- * @test\n+ *\n+ * @test id=noagent\n@@ -30,1 +31,1 @@\n- * @summary Launching app shouldn't produce any jni warnings.\n+ * @summary Launching app with or without jdwp agent shouldn't produce any jni warnings.\n@@ -35,0 +36,8 @@\n+ *\n+ * @test id=jdwp-agent\n+ * @bug 8187442\n+ * @summary Launching app with or without jdwp agent shouldn't produce any jni warnings.\n+ * @modules jdk.compiler\n+ *          jdk.zipfs\n+ * @compile TestXcheckJNIWarnings.java\n+ * @run main TestXcheckJNIWarnings -agentlib:jdwp=transport=dt_socket,server=y,suspend=n\n@@ -49,2 +58,8 @@\n-        TestResult tr = doExec(javaCmd, \"-jar\", \"-Xcheck:jni\",\n-                               testJarFile.getName());\n+\n+        TestResult tr;\n+        if (args.length > 0) {\n+            tr = doExec(javaCmd, \"-jar\", \"-Xcheck:jni\", args[0], testJarFile.getName());\n+        } else {\n+            tr = doExec(javaCmd, \"-jar\", \"-Xcheck:jni\", testJarFile.getName());\n+        }\n+\n","filename":"test\/jdk\/tools\/launcher\/TestXcheckJNIWarnings.java","additions":19,"deletions":4,"binary":false,"changes":23,"status":"modified"}]}