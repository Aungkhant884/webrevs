{"files":[{"patch":"@@ -2411,1 +2411,6 @@\n-    remw(result, rs1, rs2); \/\/ result = rs1 % rs2;\n+    \/\/ result = rs1 % rs2;\n+    if (is_signed) {\n+      remw(result, rs1, rs2);\n+    } else {\n+      remuw(result, rs1, rs2);\n+    }\n@@ -2438,1 +2443,6 @@\n-    rem(result, rs1, rs2); \/\/ result = rs1 % rs2;\n+    \/\/ result = rs1 % rs2;\n+    if (is_signed) {\n+      rem(result, rs1, rs2);\n+    } else {\n+      remu(result, rs1, rs2);\n+    }\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.cpp","additions":12,"deletions":2,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2481,0 +2481,8 @@\n+  enc_class riscv_enc_moduw(iRegI dst, iRegI src1, iRegI src2) %{\n+    C2_MacroAssembler _masm(&cbuf);\n+    Register dst_reg = as_Register($dst$$reg);\n+    Register src1_reg = as_Register($src1$$reg);\n+    Register src2_reg = as_Register($src2$$reg);\n+    __ corrected_idivl(dst_reg, src1_reg, src2_reg, \/* want_remainder *\/ true, \/* is_signed *\/ false);\n+  %}\n+\n@@ -2489,0 +2497,8 @@\n+  enc_class riscv_enc_modu(iRegI dst, iRegI src1, iRegI src2) %{\n+    C2_MacroAssembler _masm(&cbuf);\n+    Register dst_reg = as_Register($dst$$reg);\n+    Register src1_reg = as_Register($src1$$reg);\n+    Register src2_reg = as_Register($src2$$reg);\n+    __ corrected_idivq(dst_reg, src1_reg, src2_reg, \/* want_remainder *\/ true, \/* is_signed *\/ false);\n+  %}\n+\n@@ -6755,0 +6771,9 @@\n+instruct UmodI(iRegINoSp dst, iRegIorL2I src1, iRegIorL2I src2) %{\n+  match(Set dst (UModI src1 src2));\n+  ins_cost(IDIVSI_COST);\n+  format %{ \"remuw  $dst, $src1, $src2\\t#@UmodI\" %}\n+\n+  ins_encode(riscv_enc_moduw(dst, src1, src2));\n+  ins_pipe(ialu_reg_reg);\n+%}\n+\n@@ -6766,0 +6791,9 @@\n+instruct UmodL(iRegLNoSp dst, iRegL src1, iRegL src2) %{\n+  match(Set dst (UModL src1 src2));\n+  ins_cost(IDIVDI_COST);\n+  format %{ \"remu  $dst, $src1, $src2\\t#@UmodL\" %}\n+\n+  ins_encode(riscv_enc_modu(dst, src1, src2));\n+  ins_pipe(ialu_reg_reg);\n+%}\n+\n","filename":"src\/hotspot\/cpu\/riscv\/riscv.ad","additions":34,"deletions":0,"binary":false,"changes":34,"status":"modified"}]}