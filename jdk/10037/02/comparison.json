{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1995, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1995, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,4 @@\n+import java.util.Objects;\n+\n+import jdk.internal.util.Preconditions;\n+\n@@ -288,6 +292,3 @@\n-        \/* this will check to see if buf is null *\/\n-        if (length < 0 || offset < 0 ||\n-            (length + offset) < 0 ||\n-            ((length + offset) > buf.length)) {\n-            throw new IllegalArgumentException(\"illegal length or offset\");\n-        }\n+        Objects.requireNonNull(buf);\n+        Preconditions.checkFromIndexSize(offset, length, buf.length,\n+                Preconditions.outOfBoundsExceptionFormatter(IllegalArgumentException::new));\n@@ -397,2 +398,3 @@\n-     * will be used for receiving data. The length must be lesser or\n-     * equal to the offset plus the length of the packet's buffer.\n+     * will be used for receiving data. The {@code length} plus the\n+     * {@link #getOffset() offset} must be lesser or equal to the\n+     * length of the packet's data buffer.\n@@ -412,4 +414,2 @@\n-        if ((length + offset) > buf.length || length < 0 ||\n-            (length + offset) < 0) {\n-            throw new IllegalArgumentException(\"illegal length\");\n-        }\n+        Preconditions.checkFromIndexSize(offset, length, buf.length,\n+                Preconditions.outOfBoundsExceptionFormatter(IllegalArgumentException::new));\n","filename":"src\/java.base\/share\/classes\/java\/net\/DatagramPacket.java","additions":13,"deletions":13,"binary":false,"changes":26,"status":"modified"}]}