{"files":[{"patch":"@@ -378,8 +378,8 @@\n-    if (ZHeap::heap()->is_old(to_zaddress(obj))) {\n-      if (finalizable) {\n-        ZMarkBarrierFollowOopClosure<true \/* finalizable *\/, ZGenerationIdOptional::old> cl;\n-        ZIterator::oop_iterate(obj, &cl);\n-      } else {\n-        ZMarkBarrierFollowOopClosure<false \/* finalizable *\/, ZGenerationIdOptional::old> cl;\n-        ZIterator::oop_iterate(obj, &cl);\n-      }\n+    assert(ZHeap::heap()->is_old(to_zaddress(obj)), \"Should only follow objects from old gen\");\n+    if (obj->is_stackChunk()) {\n+      \/\/ No support for tracing through stack chunks as finalizably reachable\n+      ZMarkBarrierFollowOopClosure<false \/* finalizable *\/, ZGenerationIdOptional::old> cl;\n+      ZIterator::oop_iterate(obj, &cl);\n+    } else if (finalizable) {\n+      ZMarkBarrierFollowOopClosure<true \/* finalizable *\/, ZGenerationIdOptional::old> cl;\n+      ZIterator::oop_iterate(obj, &cl);\n@@ -387,1 +387,2 @@\n-      fatal(\"Catch me!\");\n+      ZMarkBarrierFollowOopClosure<false \/* finalizable *\/, ZGenerationIdOptional::old> cl;\n+      ZIterator::oop_iterate(obj, &cl);\n","filename":"src\/hotspot\/share\/gc\/z\/zMark.cpp","additions":10,"deletions":9,"binary":false,"changes":19,"status":"modified"}]}