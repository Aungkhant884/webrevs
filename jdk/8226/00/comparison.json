{"files":[{"patch":"@@ -187,1 +187,1 @@\n-            section = newHelpSection(getContent(\"doclet.help.search.head\"), subTOC, HtmlIds.HELP_SEARCH);\n+            section = newHelpSection(getContent(\"doclet.help.search.head\"), PageMode.SEARCH, subTOC);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HelpWriter.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -269,0 +269,1 @@\n+            SearchWriter.generate(configuration);\n@@ -295,0 +296,3 @@\n+            f = DocFile.createFileForOutput(configuration, DocPaths.SEARCH_PAGE_JS);\n+            f.copyResource(DOCLET_RESOURCES.resolve(DocPaths.SEARCH_PAGE_JS), configuration.docResources);\n+\n@@ -311,3 +315,3 @@\n-                \"jquery-3.6.0.min.js\",\n-                \"jquery-ui.min.js\",\n-                \"jquery-ui.min.css\",\n+                DocPaths.JQUERY_JS.getPath(),\n+                DocPaths.JQUERY_UI_JS.getPath(),\n+                DocPaths.JQUERY_UI_CSS.getPath(),\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlDoclet.java","additions":7,"deletions":3,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -86,1 +86,0 @@\n-    static final HtmlId HELP_SEARCH = HtmlId.of(\"help-search\");\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlIds.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -96,0 +96,1 @@\n+        SEARCH,\n@@ -319,0 +320,1 @@\n+            case SEARCH:\n@@ -593,1 +595,2 @@\n-                HtmlTree.LABEL(HtmlIds.SEARCH_INPUT.name(), searchLabel));\n+                links.createLink(pathToRoot.resolve(DocPaths.SEARCH_PAGE),\n+                        searchLabel, \"\"));\n@@ -627,1 +630,1 @@\n-        boolean addSearch = options.createIndex();\n+        boolean addSearch = options.createIndex() && documentedPage != PageMode.SEARCH;\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/Navigation.java","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -0,0 +1,144 @@\n+\/*\n+ * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package jdk.javadoc.internal.doclets.formats.html;\n+\n+import jdk.javadoc.internal.doclets.formats.html.markup.BodyContents;\n+import jdk.javadoc.internal.doclets.formats.html.markup.ContentBuilder;\n+import jdk.javadoc.internal.doclets.formats.html.markup.HtmlAttr;\n+import jdk.javadoc.internal.doclets.formats.html.markup.HtmlId;\n+import jdk.javadoc.internal.doclets.formats.html.markup.HtmlStyle;\n+import jdk.javadoc.internal.doclets.formats.html.markup.TagName;\n+import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTree;\n+import jdk.javadoc.internal.doclets.formats.html.Navigation.PageMode;\n+import jdk.javadoc.internal.doclets.formats.html.markup.Text;\n+import jdk.javadoc.internal.doclets.toolkit.Content;\n+import jdk.javadoc.internal.doclets.toolkit.util.DocFileIOException;\n+import jdk.javadoc.internal.doclets.toolkit.util.DocPath;\n+import jdk.javadoc.internal.doclets.toolkit.util.DocPaths;\n+\n+\/**\n+ *  Generate the search landing page for the generated API documentation.\n+ *\n+ *  <p><b>This is NOT part of any supported API.\n+ *  If you write code that depends on this, you do so at your own risk.\n+ *  This code and its internal interfaces are subject to change or\n+ *  deletion without notice.<\/b>\n+ *\/\n+public class SearchWriter extends HtmlDocletWriter {\n+\n+    \/**\n+     * Constructor to construct SearchWriter object.\n+     * @param configuration the configuration\n+     * @param filename File to be generated.\n+     *\/\n+    public SearchWriter(HtmlConfiguration configuration,\n+                        DocPath filename) {\n+        super(configuration, filename);\n+    }\n+\n+    \/**\n+     * Construct the SearchWriter object and then use it to generate the search\n+     * file. The name of the generated file is \"search.html\". The search file\n+     * will get generated if and only if \"-noindex\" is not used on the command line.\n+     *\n+     * @param configuration the configuration\n+     * @throws DocFileIOException if there is a problem while generating the documentation\n+     *\/\n+    public static void generate(HtmlConfiguration configuration) throws DocFileIOException {\n+        DocPath filename = DocPaths.SEARCH_PAGE;\n+        SearchWriter searchWriter = new SearchWriter(configuration, filename);\n+        searchWriter.generateSearchFile();\n+    }\n+\n+    \/**\n+     * Generate the search file contents.\n+     *\n+     * @throws DocFileIOException if there is a problem while generating the documentation\n+     *\/\n+    protected void generateSearchFile() throws DocFileIOException {\n+        String title = resources.getText(\"doclet.Window_Search_title\");\n+        HtmlTree body = getBody(getWindowTitle(title));\n+        ContentBuilder searchFileContent = new ContentBuilder();\n+        addSearchFileContents(searchFileContent);\n+        body.add(new BodyContents()\n+                .setHeader(getHeader(PageMode.SEARCH))\n+                .addMainContent(searchFileContent)\n+                .setFooter(getFooter()));\n+        printHtmlDocument(null, \"search\", body);\n+    }\n+\n+    \/**\n+     * Adds the search file contents to the content tree.\n+     *\/\n+    protected void addSearchFileContents(Content contentTree) {\n+\n+        String copyText = resources.getText(\"doclet.Copy_url_to_clipboard\");\n+        String copiedText = resources.getText(\"doclet.Copied_url_to_clipboard\");\n+        Content helpSection = Text.EMPTY;\n+        \/\/ Suppress link to help page if no help page is generated or a custom help page is used.\n+        HtmlOptions options = configuration.getOptions();\n+        if (!options.noHelp() && options.helpFile().isEmpty()) {\n+            Content helpLink = HtmlTree.A(\"help-doc.html#search\", contents.getContent(\"doclet.search.help_page_link\"));\n+            helpSection = HtmlTree.P(contents.getContent(\"doclet.search.help_page_info\", helpLink));\n+        }\n+\n+        contentTree.add(HtmlTree.HEADING(Headings.PAGE_TITLE_HEADING, HtmlStyle.title,\n+                        contents.getContent(\"doclet.search.main_heading\")))\n+                .add(HtmlTree.DIV(HtmlTree.INPUT(\"text\", HtmlId.of(\"page-search-input\"))\n+                                .put(HtmlAttr.PLACEHOLDER, resources.getText(\"doclet.search_placeholder\")))\n+                        .add(HtmlTree.INPUT(\"reset\", HtmlId.of(\"page-search-reset\"))\n+                                .put(HtmlAttr.VALUE, resources.getText(\"doclet.search_reset\"))\n+                                .put(HtmlAttr.STYLE, \"margin: 6px;\"))\n+                        .add(HtmlTree.DETAILS(HtmlStyle.pageSearchDetails)\n+                                .add(HtmlTree.SUMMARY(contents.getContent(\"doclet.search.show_more\"))\n+                                        .setId(HtmlId.of(\"page-search-expand\")))))\n+                .add(HtmlTree.DIV(HtmlStyle.pageSearchInfo, helpSection)\n+                        .add(HtmlTree.P(contents.getContent(\"doclet.search.keyboard_info\")))\n+                        .add(HtmlTree.P(contents.getContent(\"doclet.search.browser_info\")))\n+                        .add(HtmlTree.SPAN(Text.of(\"link\"))\n+                                .setId(HtmlId.of(\"page-search-link\")))\n+                        .add(new HtmlTree(TagName.BUTTON)\n+                                .add(new HtmlTree(TagName.IMG)\n+                                        .put(HtmlAttr.SRC, pathToRoot.resolve(DocPaths.CLIPBOARD_SVG).getPath())\n+                                        .put(HtmlAttr.ALT, copyText))\n+                                .add(HtmlTree.SPAN(Text.of(copyText))\n+                                        .put(HtmlAttr.DATA_COPIED, copiedText))\n+                                .addStyle(HtmlStyle.copyUrl)\n+                                .setId(HtmlId.of(\"page-search-copy\")))\n+                        .add(HtmlTree.P(HtmlTree.INPUT(\"checkbox\", HtmlId.of(\"search-redirect\")))\n+                                .add(HtmlTree.LABEL(\"search-redirect\",\n+                                        contents.getContent(\"doclet.search.redirect\")))))\n+                .add(new HtmlTree(TagName.P)\n+                        .setId(HtmlId.of(\"page-search-notify\"))\n+                        .add(contents.getContent(\"doclet.search.loading\")))\n+                .add(HtmlTree.DIV(new HtmlTree(TagName.DIV)\n+                                .setId(HtmlId.of(\"result-container\"))\n+                                .add(HtmlTree.EMPTY))\n+                        .setId(HtmlId.of(\"result-section\"))\n+                        .put(HtmlAttr.STYLE, \"display: none;\")\n+                        .add(HtmlTree.SCRIPT(pathToRoot.resolve(DocPaths.SEARCH_PAGE_JS).getPath())));\n+    }\n+}\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/SearchWriter.java","additions":144,"deletions":0,"binary":false,"changes":144,"status":"added"},{"patch":"@@ -63,0 +63,1 @@\n+    STYLE,\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/HtmlAttr.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -658,0 +658,15 @@\n+    \/**\n+     * The class for a {@code button} in the search page to copy the search URL to the clipboard.\n+     *\/\n+    copyUrl,\n+\n+    \/**\n+     * The class for a {@code details} element in the search page to show additional information.\n+     *\/\n+    pageSearchDetails,\n+\n+    \/**\n+     * The class for a {@code div} element in the search page which contains additional information.\n+     *\/\n+    pageSearchInfo,\n+\n@@ -778,0 +793,5 @@\n+    \/**\n+     * The class of the {@code body} element for the search page.\n+     *\/\n+    searchPage,\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/HtmlStyle.java","additions":20,"deletions":0,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -51,0 +51,1 @@\n+    FORM,\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/TagName.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -0,0 +1,299 @@\n+\/*\n+ * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.  Oracle designates this\n+ * particular file as subject to the \"Classpath\" exception as provided\n+ * by Oracle in the LICENSE file that accompanied this code.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\"use strict\";\n+$(function() {\n+    var copy = $(\"#page-search-copy\");\n+    var expand = $(\"#page-search-expand\");\n+    var searchLink = $(\"span#page-search-link\");\n+    var redirect = $(\"input#search-redirect\");\n+    function setSearchUrlTemplate() {\n+        var href = document.location.href.split(\/[#?]\/)[0];\n+        href += \"?q=\" + \"%s\";\n+        if (redirect.is(\":checked\")) {\n+            href += \"&r=1\";\n+        }\n+        searchLink.html(href);\n+        copy[0].onmouseenter();\n+    }\n+    function copyLink(e) {\n+        var textarea = document.createElement(\"textarea\");\n+        textarea.style.height = 0;\n+        document.body.appendChild(textarea);\n+        textarea.value = this.previousSibling.innerText;\n+        textarea.select();\n+        document.execCommand(\"copy\");\n+        document.body.removeChild(textarea);\n+        var span = this.lastElementChild;\n+        var copied = span.getAttribute(\"data-copied\");\n+        if (span.innerHTML !== copied) {\n+            var initialLabel = span.innerHTML;\n+            span.innerHTML = copied;\n+            var parent = this.parentElement.parentElement;\n+            parent.onmouseleave = parent.ontouchend = copy[0].onmouseenter = function() {\n+                span.innerHTML = initialLabel;\n+            };\n+        }\n+    }\n+    copy.click(copyLink);\n+    copy[0].onmouseenter = function() {};\n+    redirect.click(setSearchUrlTemplate);\n+    setSearchUrlTemplate();\n+    copy.prop(\"disabled\", false);\n+    redirect.prop(\"disabled\", false);\n+    expand.click(function (e) {\n+        var searchInfo = $(\"div.page-search-info\");\n+        if(this.parentElement.hasAttribute(\"open\")) {\n+            searchInfo.attr(\"style\", \"border-width: 0;\");\n+        } else {\n+            searchInfo.attr(\"style\", \"border-width: 1px;\").height(searchInfo.prop(\"scrollHeight\"));\n+        }\n+    });\n+});\n+$(window).on(\"load\", function() {\n+    var input = $(\"#page-search-input\");\n+    var reset = $(\"#page-search-reset\");\n+    var notify = $(\"#page-search-notify\");\n+    var resultSection = $(\"div#result-section\");\n+    var resultContainer = $(\"div#result-container\");\n+    var searchTerm = \"\";\n+    var activeTab = \"\";\n+    var fixedTab = false;\n+    var visibleTabs = [];\n+    var feelingLucky = false;\n+    function renderResults(result) {\n+        if (!result.length) {\n+            notify.html(messages.noResult);\n+        } else if (result.length === 1) {\n+            notify.html(messages.oneResult);\n+        } else {\n+            notify.html(messages.manyResults.replace(\"{0}\", result.length));\n+        }\n+        resultContainer.empty();\n+        var r = {\n+            \"types\": [],\n+            \"members\": [],\n+            \"packages\": [],\n+            \"modules\": [],\n+            \"searchTags\": []\n+        };\n+        for (var i in result) {\n+            var item = result[i];\n+            var arr = r[item.category];\n+            arr.push(item);\n+        }\n+        if (!activeTab || r[activeTab].length === 0 || !fixedTab) {\n+            Object.keys(r).reduce(function(prev, curr) {\n+                if (r[curr].length > 0 && r[curr][0].score > prev) {\n+                    activeTab = curr;\n+                    return r[curr][0].score;\n+                }\n+                return prev;\n+            }, 0);\n+        }\n+        if (feelingLucky && activeTab) {\n+            notify.html(messages.redirecting)\n+            var firstItem = r[activeTab][0];\n+            window.location = getURL(firstItem.indexItem, firstItem.category);\n+            return;\n+        }\n+        if (result.length > 20) {\n+            if (searchTerm[searchTerm.length - 1] === \".\") {\n+                if (activeTab === \"types\" && r[\"members\"].length > r[\"types\"].length) {\n+                    activeTab = \"members\";\n+                } else if (activeTab === \"packages\" && r[\"types\"].length > r[\"packages\"].length) {\n+                    activeTab = \"types\";\n+                }\n+            }\n+        }\n+        var categoryCount = Object.keys(r).reduce(function(prev, curr) {\n+            return prev + (r[curr].length > 0 ? 1 : 0);\n+        }, 0);\n+        visibleTabs = [];\n+        var tabContainer = $(\"<div class='table-tabs'><\/div>\").appendTo(resultContainer);\n+        for (var key in r) {\n+            var id = \"#result-tab-\" + key.replace(\"searchTags\", \"search_tags\");\n+            if (r[key].length) {\n+                var count = r[key].length >= 1000 ? \"999+\" : r[key].length;\n+                if (result.length > 20 && categoryCount > 1) {\n+                    var button = $(\"<button id='result-tab-\" + key\n+                        + \"' class='page-search-header'><span>\" + categories[key] + \"<\/span>\"\n+                        + \"<span style='font-weight: normal'> (\" + count + \")<\/span><\/button>\").appendTo(tabContainer);\n+                    button.click(key, function(e) {\n+                        fixedTab = true;\n+                        renderResult(e.data, $(this));\n+                    });\n+                    visibleTabs.push(key);\n+                } else {\n+                    $(\"<span class='page-search-header active-table-tab'>\" + categories[key]\n+                        + \"<span style='font-weight: normal'> (\" + count + \")<\/span><\/span>\").appendTo(tabContainer);\n+                    renderTable(key, r[key]).appendTo(resultContainer);\n+                    tabContainer = $(\"<div class='table-tabs'><\/div>\").appendTo(resultContainer);\n+\n+                }\n+            }\n+        }\n+        if (activeTab && result.length > 20 && categoryCount > 1) {\n+            $(\"button#result-tab-\" + activeTab).addClass(\"active-table-tab\");\n+            renderTable(activeTab, r[activeTab]).appendTo(resultContainer);\n+        }\n+        resultSection.show();\n+        function renderResult(category, button) {\n+            activeTab = category;\n+            setSearchUrl();\n+            resultContainer.find(\"div.summary-table\").remove();\n+            renderTable(activeTab, r[activeTab]).appendTo(resultContainer);\n+            button.siblings().removeClass(\"active-table-tab\");\n+            button.addClass(\"active-table-tab\");\n+        }\n+    }\n+    function selectTab(category) {\n+        $(\"button#result-tab-\" + category).click();\n+    }\n+    function renderTable(category, items) {\n+        var table = $(\"<div class='summary-table'>\")\n+            .addClass(category === \"modules\"\n+                ? \"one-column-search-results\"\n+                : \"two-column-search-results\");\n+        var col1, col2;\n+        if (category === \"modules\") {\n+            col1 = \"Module\";\n+        } else if (category === \"packages\") {\n+            col1 = \"Module\";\n+            col2 = \"Package\";\n+        } else if (category === \"types\") {\n+            col1 = \"Package\";\n+            col2 = \"Class\"\n+        } else if (category === \"members\") {\n+            col1 = \"Class\";\n+            col2 = \"Member\";\n+        } else if (category === \"searchTags\") {\n+            col1 = \"Location\";\n+            col2 = \"Name\";\n+        }\n+        $(\"<div class='table-header col-plain'>\" + col1 + \"<\/div>\").appendTo(table);\n+        if (category !== \"modules\") {\n+            $(\"<div class='table-header col-plain'>\" + col2 + \"<\/div>\").appendTo(table);\n+        }\n+        $.each(items, function(index, item) {\n+            var rowColor = index % 2 ? \"odd-row-color\" : \"even-row-color\";\n+            renderItem(item, table, rowColor);\n+        });\n+        return table;\n+    }\n+    function renderItem(item, table, rowColor) {\n+        var label = getHighlightedText(item.input, item.boundaries, item.prefix.length, item.input.length);\n+        var link = $(\"<a\/>\")\n+            .attr(\"href\",  getURL(item.indexItem, item.category))\n+            .attr(\"tabindex\", \"0\")\n+            .addClass(\"search-result-link\")\n+            .html(label);\n+        var container = getHighlightedText(item.input, item.boundaries, 0, item.prefix.length - 1);\n+        if (item.category === \"searchTags\") {\n+            container = item.indexItem.h || \"\";\n+        }\n+        if (item.category !== \"modules\") {\n+            $(\"<div\/>\").html(container).addClass(\"col-plain\").addClass(rowColor).appendTo(table);\n+        }\n+        $(\"<div\/>\").html(link).addClass(\"col-last\").addClass(rowColor).appendTo(table);\n+    }\n+    var timeout;\n+    function schedulePageSearch() {\n+        if (timeout) {\n+            clearTimeout(timeout);\n+        }\n+        timeout = setTimeout(function () {\n+            doPageSearch()\n+        }, 100);\n+    }\n+    function doPageSearch() {\n+        setSearchUrl();\n+        var term = searchTerm = input.val().trim();\n+        if (term === \"\") {\n+            notify.html(messages.enterTerm);\n+            activeTab = \"\";\n+            fixedTab = false;\n+            resultContainer.empty();\n+            resultSection.hide();\n+        } else {\n+            notify.html(\"Searching...\");\n+            doSearch({ term: term }, renderResults);\n+        }\n+    }\n+    function setSearchUrl() {\n+        var query = input.val().trim();\n+        var url = document.location.pathname;\n+        if (query) {\n+            url += \"?q=\" + encodeURI(query);\n+            if (activeTab && fixedTab) {\n+                url += \"&c=\" + activeTab;\n+            }\n+        }\n+        history.replaceState({query: query}, \"\", url);\n+    }\n+    input.on(\"input\", function(e) {\n+        feelingLucky = false;\n+        schedulePageSearch();\n+    });\n+    $(document).keydown(function(e) {\n+        if ((e.ctrlKey || e.metaKey) && (e.key === \"ArrowLeft\" || e.key === \"ArrowRight\")) {\n+            if (activeTab && visibleTabs.length > 1) {\n+                var idx = visibleTabs.indexOf(activeTab);\n+                idx += e.key === \"ArrowLeft\" ? visibleTabs.length - 1 : 1;\n+                selectTab(visibleTabs[idx % visibleTabs.length]);\n+                return false;\n+            }\n+        }\n+    });\n+    reset.click(function() {\n+        notify.html(messages.enterTerm);\n+        resultSection.hide();\n+        activeTab = \"\";\n+        fixedTab = false;\n+        resultContainer.empty();\n+        input.val('').focus();\n+        setSearchUrl();\n+    });\n+    input.prop(\"disabled\", false);\n+    reset.prop(\"disabled\", false);\n+\n+    var urlParams = new URLSearchParams(window.location.search);\n+    if (urlParams.has(\"q\")) {\n+        input.val(urlParams.get(\"q\"))\n+    }\n+    if (urlParams.has(\"c\")) {\n+        activeTab = urlParams.get(\"c\");\n+        fixedTab = true;\n+    }\n+    if (urlParams.get(\"r\")) {\n+        feelingLucky = true;\n+    }\n+    if (input.val()) {\n+        doPageSearch();\n+    } else {\n+        notify.html(messages.enterTerm);\n+    }\n+    input.select().focus();\n+});\n\\ No newline at end of file\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/search-page.js","additions":299,"deletions":0,"binary":false,"changes":299,"status":"added"},{"patch":"@@ -27,0 +27,1 @@\n+    enterTerm: \"##REPLACE:doclet.search.enter_search_term##\",\n@@ -28,1 +29,4 @@\n-    loading: \"##REPLACE:doclet.search.loading##\"\n+    oneResult: \"##REPLACE:doclet.search.one_result##\",\n+    manyResults: \"##REPLACE:doclet.search.many_results##\",\n+    loading: \"##REPLACE:doclet.search.loading##\",\n+    redirecting: \"##REPLACE:doclet.search.redirecting##\",\n@@ -322,0 +326,19 @@\n+        \/\/ workaround for search result scrolling\n+        this.menu._scrollIntoView = function _scrollIntoView( item ) {\n+            var borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;\n+            if ( this._hasScroll() ) {\n+                borderTop = parseFloat( $.css( this.activeMenu[ 0 ], \"borderTopWidth\" ) ) || 0;\n+                paddingTop = parseFloat( $.css( this.activeMenu[ 0 ], \"paddingTop\" ) ) || 0;\n+                offset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop;\n+                scroll = this.activeMenu.scrollTop();\n+                elementHeight = this.activeMenu.height() - 40;\n+                console.log(item)\n+                itemHeight = item.outerHeight();\n+\n+                if ( offset < 0 ) {\n+                    this.activeMenu.scrollTop( scroll + offset );\n+                } else if ( offset + itemHeight > elementHeight ) {\n+                    this.activeMenu.scrollTop( scroll + offset - elementHeight + itemHeight );\n+                }\n+            }\n+        };\n@@ -340,0 +363,2 @@\n+        ul.append(\"<li class='ui-static-link'><a href='\" + pathtoroot + \"search.html?q=\"\n+            + encodeURI(widget.term) + \"'>Go to search page<\/a><\/li>\");\n@@ -377,1 +402,2 @@\n-            $(\"div#navbar-top\").height($(\"#navbar-top\").prop(\"scrollHeight\"));\n+            var navbar = $(\"div#navbar-top\");\n+            navbar.height(navbar.prop(\"scrollHeight\"));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/search.js.template","additions":28,"deletions":2,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -171,0 +171,18 @@\n+doclet.Window_Search_title=Search\n+doclet.search.main_heading=Search\n+\n+# label for link\/button element to show the information below\n+doclet.search.show_more=Additional resources\n+doclet.search.help_page_link=help page\n+# 0: a link to the help page with text above\n+doclet.search.help_page_info= \\\n+    The {0} provides an introduction to the scope and syntax of JavaDoc search.\n+doclet.search.keyboard_info= \\\n+    You can use the <ctrl> or <cmd> keys in combination with the left and right arrow \\\n+    keys to switch between result tabs in this page.\n+doclet.search.browser_info= \\\n+    The URL template below may be used to configure this page as a search engine \\\n+    in browsers that support this feature. It has been tested to work in Google \\\n+    Chrome and Mozilla Firefox. Note that other browsers may not support this \\\n+    feature or require a different URL format.\n+doclet.search.redirect=Redirect to first result\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/standard.properties","additions":18,"deletions":0,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -58,0 +58,2 @@\n+doclet.Copy_url_to_clipboard=Copy URL\n+doclet.Copied_url_to_clipboard=Copied!\n@@ -226,1 +228,1 @@\n-doclet.search=SEARCH:\n+doclet.search=SEARCH\n@@ -228,0 +230,1 @@\n+doclet.search_reset=Reset\n@@ -345,0 +348,1 @@\n+doclet.search.enter_search_term=Enter a search term\n@@ -346,0 +350,2 @@\n+doclet.search.one_result=Found one result\n+doclet.search.many_results=Found {0} results\n@@ -347,0 +353,1 @@\n+doclet.search.redirecting=Redirecting to first result...\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/doclets.properties","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -373,4 +373,1 @@\n-    padding-top:5px;\n-    padding-left:12px;\n-    padding-right:12px;\n-    padding-bottom:7px;\n+    padding:5px 12px 7px 12px;\n@@ -385,1 +382,1 @@\n-    margin:0;\n+    margin:10px 0 0 0;\n@@ -402,0 +399,4 @@\n+.two-column-search-results {\n+    display: grid;\n+    grid-template-columns: minmax(400px, max-content) minmax(400px, auto);\n+}\n@@ -404,1 +405,1 @@\n-    grid-template-columns: minmax(15%, max-content) minmax(15%, auto);\n+    grid-template-columns: minmax(25%, max-content) minmax(25%, auto);\n@@ -408,1 +409,1 @@\n-    grid-template-columns: minmax(10%, max-content) minmax(15%, max-content) minmax(15%, auto);\n+    grid-template-columns: minmax(15%, max-content) minmax(20%, max-content) minmax(20%, auto);\n@@ -412,1 +413,1 @@\n-    grid-template-columns: minmax(10%, max-content) minmax(10%, max-content) minmax(10%, max-content) minmax(10%, auto);\n+    grid-template-columns: minmax(10%, max-content) minmax(15%, max-content) minmax(15%, max-content) minmax(15%, auto);\n@@ -414,2 +415,2 @@\n-@media screen and (max-width: 600px) {\n-    .two-column-summary {\n+@media screen and (max-width: 1000px) {\n+    .four-column-summary {\n@@ -417,1 +418,1 @@\n-        grid-template-columns: 1fr;\n+        grid-template-columns: minmax(15%, max-content) minmax(15%, auto);\n@@ -421,0 +422,4 @@\n+    .two-column-search-results {\n+        display: grid;\n+        grid-template-columns: minmax(40%, max-content) minmax(40%, auto);\n+    }\n@@ -429,2 +434,2 @@\n-@media screen and (max-width: 1000px) {\n-    .four-column-summary {\n+@media screen and (max-width: 600px) {\n+    .two-column-summary {\n@@ -432,1 +437,1 @@\n-        grid-template-columns: minmax(15%, max-content) minmax(15%, auto);\n+        grid-template-columns: 1fr;\n@@ -567,1 +572,1 @@\n-details.invalid-tag summary {\n+details summary {\n@@ -586,1 +591,1 @@\n-.result-item {\n+li.result-item {\n@@ -592,2 +597,3 @@\n-    overflow-y:scroll;\n-    overflow-x:scroll;\n+    overflow-y:auto;\n+    overflow-x:auto;\n+    scrollbar-width: thin;\n@@ -599,1 +605,1 @@\n-    z-index:999999;\n+    z-index:1;\n@@ -606,1 +612,18 @@\n-.result-highlight {\n+ul.ui-autocomplete li.ui-static-link {\n+    position:sticky;\n+    bottom:0;\n+    left:0;\n+    background: #dee3e9;\n+    padding: 5px 0;\n+    font-family: 'DejaVu Sans', Arial, Helvetica, sans-serif;\n+    font-size: 13px;\n+    font-weight: bolder;\n+    z-index: 2;\n+}\n+li.ui-static-link a, li.ui-static-link a:visited {\n+    text-decoration:none;\n+    color:#4A6782;\n+    float:right;\n+    margin-right:20px;\n+}\n+.ui-autocomplete .result-highlight {\n@@ -609,1 +632,1 @@\n-#search-input {\n+#search-input, #page-search-input {\n@@ -618,0 +641,3 @@\n+#search-input {\n+    margin-left: 4px;\n+}\n@@ -647,0 +673,92 @@\n+details.page-search-details {\n+    display: inline-block;\n+}\n+div#result-container {\n+    font-size: 14px;\n+}\n+div#result-container a.search-result-link {\n+    padding: 0;\n+    margin: 4px 0;\n+    width: 100%;\n+}\n+#result-container .result-highlight {\n+    font-weight:bolder;\n+}\n+.page-search-info {\n+    background-color: #f5f8ff;\n+    border-radius: 3px;\n+    border: 0 solid #b9c8d3;\n+    padding: 0 8px;\n+    overflow: hidden;\n+    height: 0;\n+    transition: all 0.2s ease;\n+}\n+div.table-tabs > button.table-tab {\n+    background: #4D7A97;\n+    color: #FFFFFF;\n+}\n+.page-search-header {\n+    padding: 5px 12px 7px 12px;\n+    font-weight: bold;\n+    margin-right: 3px;\n+    background-color:#4D7A97;\n+    color:#ffffff;\n+    display: inline-block;\n+}\n+button.page-search-header {\n+    border: none;\n+    cursor: pointer;\n+}\n+span#page-search-link {\n+    text-decoration: underline;\n+}\n+.active-table-tab {\n+    background: #F8981D;\n+    color: #253441;\n+}\n+button.copy-url {\n+    opacity: 80%;\n+    transition: opacity 0.2s;\n+    margin-left: 0.4em;\n+    border: none;\n+    border-radius: 3px;\n+    cursor: pointer;\n+    background: none;\n+    padding:0.3em;\n+    position: relative;\n+    top:0.13em\n+}\n+button.copy-url img {\n+    width: 1.2em;\n+    height: 1.2em;\n+    padding: 0.01em 0;\n+    background: none;\n+    position:relative;\n+    top: 0.15em;\n+}\n+div.page-search-info:hover button.copy-url {\n+    opacity: 90%;\n+}\n+div.page-search-info button.copy-url:hover {\n+    background-color: #dfe6f1;\n+    opacity: 100%;\n+}\n+button.copy-url span {\n+    color: #000000;\n+    content: attr(aria-label);\n+    font-family:'DejaVu Sans', Arial, Helvetica, sans-serif;\n+    font-size: 85%;\n+    line-height: 1.2em;\n+    padding: 0.2em;\n+    position: relative;\n+    top: -0.18em;\n+    transition: opacity 0.1s;\n+    opacity: 0;\n+}\n+div.page-search-info:hover button.copy-url span {\n+    opacity: 90%;\n+}\n+div.page-search-info button.copy-url:active {\n+    background-color: #cfdbee;\n+    opacity: 100%;\n+}\n@@ -688,1 +806,1 @@\n-span.help-note {\n+.help-note {\n@@ -925,1 +1043,1 @@\n-    #search-input {\n+    #search-input, #page-search-input {\n@@ -936,1 +1054,1 @@\n-    #search-input {\n+    #search-input, #page-search-input {\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/stylesheet.css","additions":142,"deletions":24,"binary":false,"changes":166,"status":"modified"},{"patch":"@@ -148,0 +148,3 @@\n+    \/** The name of the file for search page. *\/\n+    public static final DocPath SEARCH_PAGE = DocPath.create(\"search.html\");\n+\n@@ -287,0 +290,3 @@\n+    \/** The name of the search javascript file. *\/\n+    public static final DocPath SEARCH_PAGE_JS = DocPath.create(\"search-page.js\");\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/DocPaths.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -137,1 +137,1 @@\n-        \/\/ used in search.js; may be worth documenting in HtmlStyle\n+        \/\/ used in search.js and search-page.js; may be worth documenting in HtmlStyle\n@@ -139,2 +139,3 @@\n-                \"search-tag-desc-result\", \"search-tag-holder-result\",\n-                \"ui-autocomplete\", \"ui-autocomplete-category\", \"expanded\");\n+                \"search-tag-desc-result\", \"search-tag-holder-result\", \"page-search-header\",\n+                \"ui-autocomplete\", \"ui-autocomplete-category\", \"expanded\",\n+                \"search-result-link\", \"two-column-search-results\", \"ui-static-link\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/checkStylesheetClasses\/CheckStylesheetClasses.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -14,0 +14,1 @@\n+<p id=\"search\">Search<\/p>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testHelpOption\/test-help.html","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -161,0 +161,1 @@\n+        \"search-page\",\n@@ -226,0 +227,1 @@\n+            \"SearchWriter\",\n@@ -361,0 +363,4 @@\n+            case \"SearchWriter\":\n+                check(generator, content, content.contains(\"search\"));\n+                break;\n+\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testMetadata\/TestMetadata.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n- *      8266808\n+ *      8266808 8248863\n@@ -67,1 +67,2 @@\n-                \"type-search-index.js\");\n+                \"type-search-index.js\",\n+                \"search.html\");\n@@ -90,1 +91,2 @@\n-                \"type-search-index.js\");\n+                \"type-search-index.js\",\n+                \"search.html\");\n@@ -111,1 +113,2 @@\n-                \"type-search-index.js\");\n+                \"type-search-index.js\",\n+                \"search.html\");\n@@ -132,1 +135,3 @@\n-                \"allclasses-index.html\");\n+                \"allclasses-index.html\",\n+                \"search-page.js\",\n+                \"search.html\");\n@@ -153,1 +158,2 @@\n-                \"type-search-index.js\");\n+                \"type-search-index.js\",\n+                \"search.html\");\n@@ -173,1 +179,3 @@\n-                \"index-all.html\");\n+                \"index-all.html\",\n+                \"search-page.js\",\n+                \"search.html\");\n@@ -193,1 +201,2 @@\n-                \"type-search-index.js\");\n+                \"type-search-index.js\",\n+                \"search.html\");\n@@ -214,1 +223,2 @@\n-                \"type-search-index.js\");\n+                \"type-search-index.js\",\n+                \"search.html\");\n@@ -236,1 +246,2 @@\n-                \"type-search-index.js\");\n+                \"type-search-index.js\",\n+                \"search.html\");\n@@ -258,1 +269,2 @@\n-                \"type-search-index.js\");\n+                \"type-search-index.js\",\n+                \"search.html\");\n@@ -423,1 +435,1 @@\n-                    <label for=\"search-input\">SEARCH:<\/label>\n+                    <div class=\"nav-list-search\"><a href=\"search.html\">SEARCH<\/a>\n@@ -716,0 +728,4 @@\n+        checkOutput(\"search-page.js\", true,\n+                \"function renderResults(result) {\",\n+                \"function selectTab(category) {\");\n+\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSearch\/TestSearch.java","additions":28,"deletions":12,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -108,12 +108,9 @@\n-                    .caption span {\n-                        white-space:nowrap;\n-                        padding-top:5px;\n-                        padding-left:12px;\n-                        padding-right:12px;\n-                        padding-bottom:7px;\n-                        display:inline-block;\n-                        float:left;\n-                        background-color:#F8981D;\n-                        border: none;\n-                        height:16px;\n-                    }\"\"\",\n+                .caption span {\n+                    white-space:nowrap;\n+                    padding:5px 12px 7px 12px;\n+                    display:inline-block;\n+                    float:left;\n+                    background-color:#F8981D;\n+                    border: none;\n+                    height:16px;\n+                }\"\"\",\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testStylesheet\/TestStylesheet.java","additions":9,"deletions":12,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -219,0 +219,2 @@\n+            \"search.html\",\n+            \"search-page.js\",\n@@ -243,0 +245,2 @@\n+                         && !s.equals(\"search.html\")\n+                         && !s.equals(\"search-page.js\")\n","filename":"test\/langtools\/jdk\/javadoc\/tool\/api\/basic\/APITest.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"}]}