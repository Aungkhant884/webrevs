{"files":[{"patch":"@@ -1434,9 +1434,0 @@\n-                if (toolBar.getOrientation() == JToolBar.HORIZONTAL) {\n-                    if (constraint == \"West\" || constraint == \"East\") {\n-                        constraint = \"North\";\n-                    }\n-                } else {\n-                    if (constraint == \"North\" || constraint == \"South\") {\n-                        constraint = \"West\";\n-                    }\n-                }\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicToolBarUI.java","additions":0,"deletions":9,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -0,0 +1,100 @@\n+\/*\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/* @test\n+ * @bug 6664309\n+ * @key headful\n+ * @library \/java\/awt\/regtesthelpers\n+ * @build PassFailJFrame\n+ * @summary Verifies docking point of a floating toolbar changes after closing\n+ * @run main\/manual TestToolBarConstraint\n+*\/\n+\n+import java.awt.BorderLayout;\n+import javax.swing.JButton;\n+import javax.swing.JFrame;\n+import javax.swing.JPanel;\n+import javax.swing.JToolBar;\n+import javax.swing.GroupLayout;\n+import javax.swing.SwingUtilities;\n+import javax.swing.SwingConstants;\n+\n+public class TestToolBarConstraint {\n+    static String instructions = \"INSTRUCTIONS: \\n\" +\n+                \"\\tA toolbar is docked at EAST side.\\n\" +\n+                \" \\tPlease drag the toolbar in any direction\\n\" +\n+                \" \\tthen release the mouse to make it floating \\n\" +\n+                \" \\tand close the floating toolbar.\\n\" +\n+                \" \\tIf it retains the docking position at EAST, press Pass\\n\" +\n+                \" \\telse if it gets docked at NORTH press Fail.\";\n+\n+    static PassFailJFrame passFailJFrame;\n+    static JFrame frame;\n+\n+    public static void main(String[] args) throws Exception {\n+        SwingUtilities.invokeAndWait(() -> {\n+            try {\n+                createUI();\n+                passFailJFrame = new PassFailJFrame(instructions);\n+                PassFailJFrame.addTestWindow(frame);\n+                PassFailJFrame.positionTestWindow(frame, PassFailJFrame.Position.HORIZONTAL);\n+            } catch (Exception e) {\n+                e.printStackTrace();\n+            }\n+        });\n+        passFailJFrame.awaitAndCheck();\n+    }\n+\n+    private static void createUI() {\n+        frame = new JFrame();\n+        JToolBar jToolBar1 = new JToolBar();\n+        JButton jButton1 = new JButton();\n+        JPanel jPanel1 = new JPanel();\n+\n+        jToolBar1.setRollover(true);\n+\n+        jButton1.setText(\"jButton1\");\n+        jButton1.setFocusable(false);\n+\n+        jButton1.setHorizontalTextPosition(SwingConstants.CENTER);\n+        jButton1.setVerticalTextPosition(SwingConstants.BOTTOM);\n+        jToolBar1.add(jButton1);\n+\n+        frame.getContentPane().add(jToolBar1, BorderLayout.EAST);\n+\n+        GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);\n+        jPanel1.setLayout(jPanel1Layout);\n+        jPanel1Layout.setHorizontalGroup(\n+               jPanel1Layout.createParallelGroup(GroupLayout.Alignment.LEADING)\n+                            .addGap(0, 340, Short.MAX_VALUE));\n+        jPanel1Layout.setVerticalGroup(\n+               jPanel1Layout.createParallelGroup(GroupLayout.Alignment.LEADING)\n+                            .addGap(0, 300, Short.MAX_VALUE));\n+\n+        frame.getContentPane().add(jPanel1, BorderLayout.CENTER);\n+\n+        frame.pack();\n+        frame.setVisible(true);\n+    }\n+}\n+\n","filename":"test\/jdk\/javax\/swing\/JToolBar\/TestToolBarConstraint.java","additions":100,"deletions":0,"binary":false,"changes":100,"status":"added"}]}