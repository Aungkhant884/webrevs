{"files":[{"patch":"@@ -217,1 +217,1 @@\n-  Klass* k = obj->klass();\n+  Klass* k = obj->klass_raw();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.inline.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -515,1 +515,1 @@\n-      oop obj = CompressedOops::decode_not_null(heap_oop);\n+      oop obj = CompressedOops::decode_raw_not_null(heap_oop);\n@@ -525,0 +525,7 @@\n+\n+        HeapRegion* from = _g1h->heap_region_containing(p);\n+        log.error(\"Field \" PTR_FORMAT \" of live obj \" PTR_FORMAT \" in region \" HR_FORMAT,\n+                  p2i(p), p2i(_containing_obj), HR_FORMAT_PARAMS(from));\n+        LogStream ls(log.error());\n+        print_object(&ls, _containing_obj);\n+\n@@ -526,8 +533,1 @@\n-          HeapRegion* from = _g1h->heap_region_containing(p);\n-          log.error(\"Field \" PTR_FORMAT \" of live obj \" PTR_FORMAT \" in region \" HR_FORMAT,\n-                    p2i(p), p2i(_containing_obj), HR_FORMAT_PARAMS(from));\n-          LogStream ls(log.error());\n-          print_object(&ls, _containing_obj);\n-          HeapRegion* const to = _g1h->heap_region_containing(obj);\n-          log.error(\"points to obj \" PTR_FORMAT \" in region \" HR_FORMAT \" remset %s\",\n-                    p2i(obj), HR_FORMAT_PARAMS(to), to->rem_set()->get_state_str());\n+          log.error(\"points to address \" PTR_FORMAT \" outside of heap\", p2i(obj));\n@@ -535,1 +535,0 @@\n-          HeapRegion* from = _g1h->heap_region_containing(p);\n@@ -537,6 +536,2 @@\n-          log.error(\"Field \" PTR_FORMAT \" of live obj \" PTR_FORMAT \" in region \" HR_FORMAT,\n-                    p2i(p), p2i(_containing_obj), HR_FORMAT_PARAMS(from));\n-          LogStream ls(log.error());\n-          print_object(&ls, _containing_obj);\n-          log.error(\"points to dead obj \" PTR_FORMAT \" in region \" HR_FORMAT,\n-                    p2i(obj), HR_FORMAT_PARAMS(to));\n+          log.error(\"points to dead obj \" PTR_FORMAT \" in region \" HR_FORMAT \" remset %s\",\n+                    p2i(obj), HR_FORMAT_PARAMS(to), to->rem_set()->get_state_str());\n","filename":"src\/hotspot\/share\/gc\/g1\/heapRegion.cpp","additions":11,"deletions":16,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -130,0 +130,1 @@\n+  static inline oop decode_raw_not_null(oop v);\n","filename":"src\/hotspot\/share\/oops\/compressedOops.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -81,0 +81,5 @@\n+inline oop CompressedOops::decode_raw_not_null(oop v) {\n+  assert(v != nullptr, \"object is null\");\n+  return v;\n+}\n+\n","filename":"src\/hotspot\/share\/oops\/compressedOops.inline.hpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -88,0 +88,2 @@\n+  \/\/ Get the raw value without any checks.\n+  inline Klass* klass_raw() const;\n","filename":"src\/hotspot\/share\/oops\/oop.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -110,0 +110,8 @@\n+Klass* oopDesc::klass_raw() const {\n+  if (UseCompressedClassPointers) {\n+    return CompressedKlassPointers::decode_raw(_metadata._compressed_klass);\n+  } else {\n+    return _metadata._klass;\n+  }\n+}\n+\n","filename":"src\/hotspot\/share\/oops\/oop.inline.hpp","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"}]}