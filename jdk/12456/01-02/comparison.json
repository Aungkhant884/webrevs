{"files":[{"patch":"@@ -513,27 +513,12 @@\n-    Log(gc, verify) log;\n-    if (!CompressedOops::is_null(heap_oop)) {\n-      oop obj = CompressedOops::decode_raw_not_null(heap_oop);\n-      bool failed = false;\n-      bool is_in_heap = _g1h->is_in(obj);\n-      if (!is_in_heap || _g1h->is_obj_dead_cond(obj, _vo)) {\n-        MutexLocker x(ParGCRareEvent_lock, Mutex::_no_safepoint_check_flag);\n-\n-        if (!_failures) {\n-          log.error(\"----------\");\n-        }\n-        ResourceMark rm;\n-\n-        HeapRegion* from = _g1h->heap_region_containing(p);\n-        log.error(\"Field \" PTR_FORMAT \" of live obj \" PTR_FORMAT \" in region \" HR_FORMAT,\n-                  p2i(p), p2i(_containing_obj), HR_FORMAT_PARAMS(from));\n-        LogStream ls(log.error());\n-        print_object(&ls, _containing_obj);\n-\n-        if (!is_in_heap) {\n-          log.error(\"points to address \" PTR_FORMAT \" outside of heap\", p2i(obj));\n-        } else {\n-          HeapRegion* to = _g1h->heap_region_containing(obj);\n-          log.error(\"points to dead obj \" PTR_FORMAT \" in region \" HR_FORMAT \" remset %s\",\n-                    p2i(obj), HR_FORMAT_PARAMS(to), to->rem_set()->get_state_str());\n-          print_object(&ls, obj);\n-        }\n+    if (CompressedOops::is_null(heap_oop)) {\n+      return;\n+    }\n+\n+    oop obj = CompressedOops::decode_raw_not_null(heap_oop);\n+    bool failed = false;\n+    bool is_in_heap = _g1h->is_in(obj);\n+    if (!is_in_heap || _g1h->is_obj_dead_cond(obj, _vo)) {\n+      MutexLocker x(ParGCRareEvent_lock, Mutex::_no_safepoint_check_flag);\n+\n+      Log(gc, verify) log;\n+      if (!_failures) {\n@@ -541,3 +526,0 @@\n-        _failures = true;\n-        failed = true;\n-        _n_failures++;\n@@ -545,0 +527,20 @@\n+      ResourceMark rm;\n+\n+      HeapRegion* from = _g1h->heap_region_containing(p);\n+      log.error(\"Field \" PTR_FORMAT \" of live obj \" PTR_FORMAT \" in region \" HR_FORMAT,\n+                p2i(p), p2i(_containing_obj), HR_FORMAT_PARAMS(from));\n+      LogStream ls(log.error());\n+      print_object(&ls, _containing_obj);\n+\n+      if (!is_in_heap) {\n+        log.error(\"points to address \" PTR_FORMAT \" outside of heap\", p2i(obj));\n+      } else {\n+        HeapRegion* to = _g1h->heap_region_containing(obj);\n+        log.error(\"points to dead obj \" PTR_FORMAT \" in region \" HR_FORMAT \" remset %s\",\n+                  p2i(obj), HR_FORMAT_PARAMS(to), to->rem_set()->get_state_str());\n+        print_object(&ls, obj);\n+      }\n+      log.error(\"----------\");\n+      _failures = true;\n+      failed = true;\n+      _n_failures++;\n","filename":"src\/hotspot\/share\/gc\/g1\/heapRegion.cpp","additions":32,"deletions":30,"binary":false,"changes":62,"status":"modified"}]}