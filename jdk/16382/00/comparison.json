{"files":[{"patch":"@@ -4225,1 +4225,2 @@\n-void MacroAssembler::FLOATCVT##_safe(Register dst, FloatRegister src, Register tmp) {     \\\n+void MacroAssembler::FLOATCVT##_safe(Register dst, FloatRegister src,                     \\\n+                                     RoundingMode rm, Register tmp) {                     \\\n@@ -4233,1 +4234,1 @@\n-  FLOATCVT(dst, src);                                                                     \\\n+  FLOATCVT(dst, src, rm);                                                                 \\\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -1249,4 +1249,4 @@\n-  void fcvt_w_s_safe(Register dst, FloatRegister src, Register tmp = t0);\n-  void fcvt_l_s_safe(Register dst, FloatRegister src, Register tmp = t0);\n-  void fcvt_w_d_safe(Register dst, FloatRegister src, Register tmp = t0);\n-  void fcvt_l_d_safe(Register dst, FloatRegister src, Register tmp = t0);\n+  void fcvt_w_s_safe(Register dst, FloatRegister src, RoundingMode rm = RoundingMode::rtz, Register tmp = t0);\n+  void fcvt_l_s_safe(Register dst, FloatRegister src, RoundingMode rm = RoundingMode::rtz, Register tmp = t0);\n+  void fcvt_w_d_safe(Register dst, FloatRegister src, RoundingMode rm = RoundingMode::rtz, Register tmp = t0);\n+  void fcvt_l_d_safe(Register dst, FloatRegister src, RoundingMode rm = RoundingMode::rtz, Register tmp = t0);\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -8243,0 +8243,24 @@\n+instruct round_double_reg(iRegLNoSp dst, fRegD src) %{\n+  match(Set dst (RoundD src));\n+\n+  format %{ \"fcvt.l.d $dst, $src\\t#@round_double_reg\" %}\n+\n+  ins_encode %{\n+    __ fcvt_l_d_safe(as_Register($dst$$reg), as_FloatRegister($src$$reg), Assembler::RoundingMode::rne);\n+  %}\n+\n+  ins_pipe(pipe_class_default);\n+%}\n+\n+instruct round_float_reg(iRegINoSp dst, fRegF src) %{\n+  match(Set dst (RoundF src));\n+\n+  format %{ \"fcvt.w.s  $dst, $src\\t#@round_float_reg\" %}\n+\n+  ins_encode %{\n+    __ fcvt_w_s_safe(as_Register($dst$$reg), as_FloatRegister($src$$reg), Assembler::RoundingMode::rne);\n+  %}\n+\n+  ins_pipe(pipe_class_default);\n+%}\n+\n","filename":"src\/hotspot\/cpu\/riscv\/riscv.ad","additions":24,"deletions":0,"binary":false,"changes":24,"status":"modified"}]}