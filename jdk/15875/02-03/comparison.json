{"files":[{"patch":"@@ -40,3 +40,0 @@\n-    static PrintStream oldOut;\n-    static PrintStream oldErr;\n-\n@@ -55,0 +52,2 @@\n+        final PrintStream oldOut = System.out;\n+        final PrintStream oldErr = System.err;\n@@ -59,6 +58,0 @@\n-\n-            oldOut = System.out;\n-            oldErr = System.err;\n-            System.setOut(out);\n-            System.setErr(err);\n-\n","filename":"test\/jdk\/javax\/swing\/BasicMenuUI\/bug4244616.java","additions":2,"deletions":9,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @library ..\/regtesthelpers\n+ * @library ..\/regtesthelpers \/test\/lib\n@@ -30,0 +30,1 @@\n+ * @build jtreg.SkippedException\n@@ -49,0 +50,2 @@\n+import jtreg.SkippedException;\n+\n@@ -51,3 +54,0 @@\n-    static GraphicsEnvironment ge;\n-    static GraphicsDevice[] gs;\n-    static GraphicsConfiguration testGraphicsConfig;\n@@ -58,1 +58,1 @@\n-    static volatile JRobot r;\n+    static JRobot robot;\n@@ -62,1 +62,5 @@\n-            graphicsConfigHelper();\n+            bounds = getGraphicsConfig().getBounds();\n+            if (bounds == null) {\n+                throw new SkippedException(\"We need at least one screen \" +\n+                        \"with the taskbar at the bottom position.\");\n+            }\n@@ -65,7 +69,0 @@\n-                if (testGraphicsConfig == null) {\n-                    System.out.print(\"We need at least one screen with \");\n-                    System.out.println(\"the taskbar at the bottom position.\");\n-                    System.out.println(\"Testing skipped.\");\n-                    return;\n-                }\n-\n@@ -85,1 +82,0 @@\n-                bounds = testGraphicsConfig.getBounds();\n@@ -92,1 +88,1 @@\n-            r = new JRobot(true);\n+            robot = new JRobot(true);\n@@ -94,2 +90,2 @@\n-            r.waitForIdle();\n-            r.delay(1000);\n+            robot.waitForIdle();\n+            robot.delay(1000);\n@@ -116,2 +112,3 @@\n-        r.mouseMove(b.x + 300, b.y + b.height - i.bottom - 10);\n-        r.delay(500);\n+\n+        robot.mouseMove(b.x + 300, b.y + b.height - i.bottom - 10);\n+        robot.delay(500);\n@@ -125,1 +122,1 @@\n-        passed = wy < (b.y + b.height - i.bottom));\n+        passed = wy < (b.y + b.height - i.bottom);\n@@ -128,15 +125,9 @@\n-    public static void graphicsConfigHelper() throws Exception {\n-        SwingUtilities.invokeAndWait(() -> {\n-            ge = GraphicsEnvironment.getLocalGraphicsEnvironment();\n-            gs = ge.getScreenDevices();\n-            testGraphicsConfig = null;\n-\n-            for (int j = 0; j < gs.length; j++) {\n-                GraphicsDevice gd = gs[j];\n-                GraphicsConfiguration[] gc = gd.getConfigurations();\n-                for (int i = 0; i < gc.length; i++) {\n-                    insets = Toolkit.getDefaultToolkit().getScreenInsets(gc[i]);\n-                    if (insets.bottom != 0) {\n-                        testGraphicsConfig = gc[i];\n-                        break;\n-                    }\n+    public static GraphicsConfiguration getGraphicsConfig() {\n+        GraphicsDevice[] devices = GraphicsEnvironment.getLocalGraphicsEnvironment()\n+                                                      .getScreenDevices();\n+        for (GraphicsDevice device : devices) {\n+            GraphicsConfiguration[] gc = device.getConfigurations();\n+            for (int i = 0; i < gc.length; i++) {\n+                insets = Toolkit.getDefaultToolkit().getScreenInsets(gc[i]);\n+                if (insets.bottom != 0) {\n+                    return gc[i];\n@@ -145,2 +136,2 @@\n-        });\n-\n+        }\n+        return null;\n","filename":"test\/jdk\/javax\/swing\/ToolTipManager\/bug5078214.java","additions":28,"deletions":37,"binary":false,"changes":65,"status":"modified"}]}