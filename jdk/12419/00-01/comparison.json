{"files":[{"patch":"@@ -423,1 +423,1 @@\n-    FileMapInfo::fail_continue(\"Dynamic archive cannot be used: static archive header checksum verification failed.\");\n+    log_warning(cds)(\"Dynamic archive cannot be used: static archive header checksum verification failed.\");\n@@ -430,1 +430,1 @@\n-      FileMapInfo::fail_continue(\"Dynamic archive cannot be used: static archive region #%d checksum verification failed.\", i);\n+      log_warning(cds)(\"Dynamic archive cannot be used: static archive region #%d checksum verification failed.\", i);\n","filename":"src\/hotspot\/share\/cds\/dynamicArchive.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -105,38 +105,0 @@\n-\n-\/\/ Complain and continue.  Recoverable errors during the reading of the\n-\/\/ archive file may continue (with sharing disabled).\n-\/\/\n-\/\/ If we continue, then disable shared spaces and close the file.\n-\n-void FileMapInfo::fail_continue(const char *msg, ...) {\n-  va_list ap;\n-  va_start(ap, msg);\n-  fail_continue_impl(LogLevel::Warning, msg, ap);\n-  va_end(ap);\n-}\n-\n-void FileMapInfo::fail_continue_nowarn(const char *msg, ...) {\n-  va_list ap;\n-  va_start(ap, msg);\n-  fail_continue_impl(LogLevel::Info, msg, ap);\n-  va_end(ap);\n-}\n-\n-void FileMapInfo::fail_continue_impl(LogLevelType level, const char *msg, va_list ap) {\n-  if (PrintSharedArchiveAndExit && _validating_shared_path_table) {\n-    \/\/ If we are doing PrintSharedArchiveAndExit and some of the classpath entries\n-    \/\/ do not validate, we can still continue \"limping\" to validate the remaining\n-    \/\/ entries. No need to quit.\n-    tty->print(\"[\");\n-    tty->vprint(msg, ap);\n-    tty->print_cr(\"]\");\n-  } else {\n-    if (RequireSharedSpaces) {\n-      fail_exit(msg, ap);\n-    } else {\n-      LogMessage(cds) lm;\n-      lm.vwrite(level, msg, ap);\n-    }\n-  }\n-}\n-\n@@ -466,1 +428,1 @@\n-    FileMapInfo::fail_continue(\"Required classpath entry does not exist: %s\", name);\n+    log_warning(cds)(\"Required classpath entry does not exist: %s\", name);\n@@ -470,1 +432,1 @@\n-      FileMapInfo::fail_continue(\"directory is not empty: %s\", name);\n+      log_warning(cds)(\"directory is not empty: %s\", name);\n@@ -477,1 +439,1 @@\n-      FileMapInfo::fail_continue(_timestamp != st.st_mtime ?\n+      log_warning(cds)(_timestamp != st.st_mtime ?\n@@ -482,1 +444,1 @@\n-      FileMapInfo::fail_continue(\"%s %s\", bad_jar_msg, name);\n+      log_warning(cds)(\"%s %s\", bad_jar_msg, name);\n@@ -1137,1 +1099,1 @@\n-      fail_continue(\"%s%s\", mismatch_msg, hint_msg);\n+      log_warning(cds)(\"%s%s\", mismatch_msg, hint_msg);\n@@ -1215,1 +1177,1 @@\n-      FileMapInfo::fail_continue_nowarn(\"Specified shared archive not found (%s)\", _archive_name);\n+      log_info(cds)(\"Specified shared archive not found (%s)\", _archive_name);\n@@ -1231,1 +1193,1 @@\n-      FileMapInfo::fail_continue(\"Unable to read generic CDS file map header from shared archive\");\n+      log_warning(cds)(\"Unable to read generic CDS file map header from shared archive\");\n@@ -1237,1 +1199,1 @@\n-      FileMapInfo::fail_continue(\"The shared archive file has a bad magic number: %#x\", gen_header._magic);\n+      log_warning(cds)(\"The shared archive file has a bad magic number: %#x\", gen_header._magic);\n@@ -1242,1 +1204,1 @@\n-      FileMapInfo::fail_continue(\"Cannot handle shared archive file version 0x%x. Must be at least 0x%x.\",\n+      log_warning(cds)(\"Cannot handle shared archive file version 0x%x. Must be at least 0x%x.\",\n@@ -1248,1 +1210,1 @@\n-      FileMapInfo::fail_continue(\"The shared archive file version 0x%x does not match the required version 0x%x.\",\n+      log_warning(cds)(\"The shared archive file version 0x%x does not match the required version 0x%x.\",\n@@ -1254,1 +1216,1 @@\n-      FileMapInfo::fail_continue(\"Archive file header larger than archive file\");\n+      log_warning(cds)(\"Archive file header larger than archive file\");\n@@ -1264,1 +1226,1 @@\n-      FileMapInfo::fail_continue(\"Unable to read actual CDS file map header from shared archive\");\n+      log_warning(cds)(\"Unable to read actual CDS file map header from shared archive\");\n@@ -1299,1 +1261,1 @@\n-        FileMapInfo::fail_continue(\"Header checksum verification failed.\");\n+        log_warning(cds)(\"Header checksum verification failed.\");\n@@ -1312,1 +1274,1 @@\n-      FileMapInfo::fail_continue(\"base_archive_name offset\/size overflow: \" UINT32_FORMAT \"\/\" UINT32_FORMAT,\n+      log_warning(cds)(\"base_archive_name offset\/size overflow: \" UINT32_FORMAT \"\/\" UINT32_FORMAT,\n@@ -1318,1 +1280,1 @@\n-        FileMapInfo::fail_continue(\"static shared archive must have zero _base_archive_name_offset\");\n+        log_warning(cds)(\"static shared archive must have zero _base_archive_name_offset\");\n@@ -1322,1 +1284,1 @@\n-        FileMapInfo::fail_continue(\"static shared archive must have zero _base_archive_name_size\");\n+        log_warning(cds)(\"static shared archive must have zero _base_archive_name_size\");\n@@ -1330,1 +1292,1 @@\n-        FileMapInfo::fail_continue(\"Invalid base_archive_name offset\/size: \" UINT32_FORMAT \"\/\" UINT32_FORMAT,\n+        log_warning(cds)(\"Invalid base_archive_name offset\/size: \" UINT32_FORMAT \"\/\" UINT32_FORMAT,\n@@ -1336,1 +1298,1 @@\n-          FileMapInfo::fail_continue(\"Invalid base_archive_name offset\/size (out of range): \"\n+          log_warning(cds)(\"Invalid base_archive_name offset\/size (out of range): \"\n@@ -1343,1 +1305,1 @@\n-          FileMapInfo::fail_continue(\"Base archive name is damaged\");\n+          log_warning(cds)(\"Base archive name is damaged\");\n@@ -1347,1 +1309,1 @@\n-          FileMapInfo::fail_continue(\"Base archive %s does not exist\", name);\n+          log_warning(cds)(\"Base archive %s does not exist\", name);\n@@ -1397,1 +1359,1 @@\n-    fail_continue(\"Unable to read the file header.\");\n+    log_warning(cds)(\"Unable to read the file header.\");\n@@ -1404,1 +1366,1 @@\n-      FileMapInfo::fail_continue(\"Not a base shared archive: %s\", _full_path);\n+      log_warning(cds)(\"Not a base shared archive: %s\", _full_path);\n@@ -1409,1 +1371,1 @@\n-      FileMapInfo::fail_continue(\"Not a top shared archive: %s\", _full_path);\n+      log_warning(cds)(\"Not a top shared archive: %s\", _full_path);\n@@ -1419,1 +1381,1 @@\n-    fail_continue(\"Failed to read file header from the top archive file\\n\");\n+    log_warning(cds)(\"Failed to read file header from the top archive file\\n\");\n@@ -1426,1 +1388,1 @@\n-    fail_continue(\"The shared archive file has the wrong version.\");\n+    log_warning(cds)(\"The shared archive file has the wrong version.\");\n@@ -1432,1 +1394,1 @@\n-      FileMapInfo::fail_continue(\"common app classpath prefix len < 0\");\n+      log_warning(cds)(\"common app classpath prefix len < 0\");\n@@ -1445,1 +1407,1 @@\n-      FileMapInfo::fail_continue(\"The shared archive file has an incorrect header size.\");\n+      log_warning(cds)(\"The shared archive file has an incorrect header size.\");\n@@ -1453,1 +1415,1 @@\n-    FileMapInfo::fail_continue(\"JVM version identifier is corrupted.\");\n+    log_warning(cds)(\"JVM version identifier is corrupted.\");\n@@ -1462,1 +1424,1 @@\n-    FileMapInfo::fail_continue(\"The shared archive file was created by a different\"\n+    log_warning(cds)(\"The shared archive file was created by a different\"\n@@ -1474,1 +1436,1 @@\n-      fail_continue(\"The shared archive file has been truncated.\");\n+      log_warning(cds)(\"The shared archive file has been truncated.\");\n@@ -1497,1 +1459,1 @@\n-      fail_continue_nowarn(\"Specified shared archive not found (%s)\", _full_path);\n+      log_info(cds)(\"Specified shared archive not found (%s)\", _full_path);\n@@ -1499,1 +1461,1 @@\n-      fail_continue(\"Failed to open shared archive file (%s)\",\n+      log_warning(cds)(\"Failed to open shared archive file (%s)\",\n@@ -2523,1 +2485,1 @@\n-    fail_continue(\"Checksum verification failed.\");\n+    log_warning(cds)(\"Checksum verification failed.\");\n@@ -2594,1 +2556,1 @@\n-\/\/ fail_continue.]\n+\/\/ log_warning(cds).]\n@@ -2609,1 +2571,1 @@\n-    FileMapInfo::fail_continue_nowarn(\"CDS is disabled because early JVMTI ClassFileLoadHook is in use.\");\n+    log_info(cds)(\"CDS is disabled because early JVMTI ClassFileLoadHook is in use.\");\n@@ -2614,1 +2576,1 @@\n-    FileMapInfo::fail_continue_nowarn(\"The shared archive file cannot be used with an exploded module build.\");\n+    log_info(cds)(\"The shared archive file cannot be used with an exploded module build.\");\n@@ -2620,1 +2582,1 @@\n-      FileMapInfo::fail_continue_nowarn(\"Initialize static archive failed.\");\n+      log_info(cds)(\"Initialize static archive failed.\");\n@@ -2623,1 +2585,1 @@\n-      FileMapInfo::fail_continue_nowarn(\"Initialize dynamic archive failed.\");\n+      log_info(cds)(\"Initialize dynamic archive failed.\");\n@@ -2666,1 +2628,1 @@\n-    FileMapInfo::fail_continue_nowarn(\"The shared archive file's ObjectAlignmentInBytes of %d\"\n+    log_info(cds)(\"The shared archive file's ObjectAlignmentInBytes of %d\"\n@@ -2672,1 +2634,1 @@\n-    FileMapInfo::fail_continue_nowarn(\"The shared archive file's CompactStrings setting (%s)\"\n+    log_info(cds)(\"The shared archive file's CompactStrings setting (%s)\"\n@@ -2692,1 +2654,1 @@\n-    FileMapInfo::fail_continue_nowarn(\"The shared archive file's BytecodeVerificationLocal setting (%s)\"\n+    log_info(cds)(\"The shared archive file's BytecodeVerificationLocal setting (%s)\"\n@@ -2704,1 +2666,1 @@\n-    FileMapInfo::fail_continue_nowarn(\"The shared archive file was created with less restrictive \"\n+    log_info(cds)(\"The shared archive file was created with less restrictive \"\n@@ -2716,1 +2678,1 @@\n-    FileMapInfo::fail_continue(\"The setting of the AllowArchivingWithJavaAgent is different \"\n+    log_warning(cds)(\"The setting of the AllowArchivingWithJavaAgent is different \"\n@@ -2729,1 +2691,1 @@\n-    FileMapInfo::fail_continue_nowarn(\"Unable to use shared archive.\\nThe saved state of UseCompressedOops and UseCompressedClassPointers is \"\n+    log_info(cds)(\"Unable to use shared archive.\\nThe saved state of UseCompressedOops and UseCompressedClassPointers is \"\n","filename":"src\/hotspot\/share\/cds\/filemap.cpp","additions":44,"deletions":82,"binary":false,"changes":126,"status":"modified"},{"patch":"@@ -487,3 +487,0 @@\n-  static void fail_continue(const char *msg, ...) ATTRIBUTE_PRINTF(1, 2);\n-  static void fail_continue_nowarn(const char *msg, ...) ATTRIBUTE_PRINTF(1, 2);\n-  static void fail_continue_impl(LogLevelType level, const char *msg, va_list ap) ATTRIBUTE_PRINTF(2, 0);\n","filename":"src\/hotspot\/share\/cds\/filemap.hpp","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1012,1 +1012,1 @@\n-    FileMapInfo::fail_continue_nowarn(\"Unable to map shared spaces\");\n+    log_info(cds)(\"Unable to map shared spaces\");\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}