{"files":[{"patch":"@@ -973,7 +973,2 @@\n-            if (userOnly) {\n-                Files.setPosixFilePermissions(file,\n-                        PosixFilePermissions.fromString(\"rwx------\"));\n-            } else { \/* Allow access to everyone *\/\n-                Files.setPosixFilePermissions(file,\n-                        PosixFilePermissions.fromString(\"rwxrwxrwx\"));\n-            }\n+            String perms = userOnly ? \"rwx------\" : \"rwxrwxrwx\";\n+            Files.setPosixFilePermissions(file, PosixFilePermissions.fromString(perms));\n@@ -988,3 +983,1 @@\n-                        acl.add(AclEntry.newBuilder(thisEntry)\n-                                .setType(AclEntryType.ALLOW)\n-                                .build());\n+                        acl.add(allowAccess(thisEntry));\n@@ -992,3 +985,1 @@\n-                        acl.add(AclEntry.newBuilder(thisEntry)\n-                                .setType(AclEntryType.DENY)\n-                                .build());\n+                        acl.add(revokeAccess(thisEntry));\n@@ -1000,3 +991,1 @@\n-                        acl.add(AclEntry.newBuilder(thisEntry)\n-                                .setType(AclEntryType.ALLOW)\n-                                .build());\n+                        acl.add(allowAccess(thisEntry));\n@@ -1014,0 +1003,31 @@\n+    \/**\n+     * Return an ACL entry that revokes owner access.\n+     *\n+     * @param acl   original ACL entry to build from\n+     * @return      an ACL entry that revokes all access\n+     *\/\n+    public static AclEntry revokeAccess(AclEntry acl) {\n+        return buildAclEntry(acl, AclEntryType.DENY);\n+    }\n+\n+    \/**\n+     * Return an ACL entry that allow owner access.\n+     * @param acl   original ACL entry to build from\n+     * @return      an ACL entry that allows all access\n+     *\/\n+    public static AclEntry allowAccess(AclEntry acl) {\n+        return buildAclEntry(acl, AclEntryType.ALLOW);\n+    }\n+\n+    \/**\n+     * Build an ACL entry with a given ACL entry type.\n+     *\n+     * @param acl   original ACL entry to build from\n+     * @return      an ACL entry with a given ACL entry type\n+     *\/\n+    public static AclEntry buildAclEntry(AclEntry acl, AclEntryType type) {\n+        return AclEntry.newBuilder(acl)\n+                .setType(type)\n+                .build();\n+    }\n+\n","filename":"test\/lib\/jdk\/test\/lib\/Utils.java","additions":36,"deletions":16,"binary":false,"changes":52,"status":"modified"}]}