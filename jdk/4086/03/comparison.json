{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,1 +34,1 @@\n- * @run main\/othervm gc.gctests.StringInternGC.StringInternGC\n+ * @run main\/othervm -XX:+ExplicitGCInvokesConcurrent gc.gctests.StringInternGC.StringInternGC\n@@ -49,1 +49,3 @@\n-        private int maxLength = 1000;\n+        private int maxLength = 1000; \/\/ Maximum number of characters to add per operation.\n+        private int maxTotalLength = 128 * 1024; \/\/ Total maximum length of the string until a new StringBuffer will be allocated.\n+        private long lastTime = System.currentTimeMillis();\n@@ -56,0 +58,10 @@\n+                        if (sb.length() > maxTotalLength) {\n+                                sb = new StringBuffer();\n+                        }\n+\n+                        long currentTime = System.currentTimeMillis();\n+                        if (currentTime - lastTime > 5000) { \/\/ Cause a full gc every 5s.\n+                                lastTime = currentTime;\n+                                System.gc();\n+                        }\n+\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/gctests\/StringInternGC\/StringInternGC.java","additions":15,"deletions":3,"binary":false,"changes":18,"status":"modified"}]}