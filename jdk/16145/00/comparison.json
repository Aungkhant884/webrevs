{"files":[{"patch":"@@ -105,1 +105,1 @@\n-static void initialize(JNIEnv *env, jthread thread, EventIndex triggering_ei);\n+static void initialize(JNIEnv *env, jthread thread, EventIndex triggering_ei, EventInfo *opt_info);\n@@ -394,1 +394,1 @@\n-        initialize(env, thread, EI_VM_INIT);\n+        initialize(env, thread, EI_VM_INIT, NULL);\n@@ -447,0 +447,13 @@\n+    EventInfo info;\n+    info.ei = EI_EXCEPTION;\n+    info.thread = thread;\n+    info.clazz = JNI_FUNC_PTR(env,GetObjectClass)(env, exception);\n+    info.method = method;\n+    info.location = location;\n+    info.object = exception;\n+    if (gdata->vthreadsSupported) {\n+        info.is_vthread = isVThread(thread);\n+    }\n+    info.u.exception.catch_clazz = getMethodClass(jvmti_env, catch_method);\n+    info.u.exception.catch_method = catch_method;\n+    info.u.exception.catch_location = catch_location;\n@@ -461,1 +474,1 @@\n-        initialize(env, thread, EI_EXCEPTION);\n+        initialize(env, thread, EI_EXCEPTION, &info);\n@@ -465,2 +478,0 @@\n-        jclass clazz;\n-\n@@ -468,2 +479,1 @@\n-        clazz = JNI_FUNC_PTR(env,GetObjectClass)(env, exception);\n-        if ( clazz != NULL ) {\n+        if ( info.clazz != NULL ) {\n@@ -472,1 +482,1 @@\n-            error = classSignature(clazz, &signature, NULL);\n+            error = classSignature(info.clazz, &signature, NULL);\n@@ -478,1 +488,1 @@\n-                initialize(env, thread, EI_EXCEPTION);\n+                initialize(env, thread, EI_EXCEPTION, &info);\n@@ -619,0 +629,2 @@\n+ *\n+ * @param opt_info optional event info to use, might be null\n@@ -621,1 +633,1 @@\n-initialize(JNIEnv *env, jthread thread, EventIndex triggering_ei)\n+initialize(JNIEnv *env, jthread thread, EventIndex triggering_ei, EventInfo *opt_info)\n@@ -715,0 +727,3 @@\n+        if (opt_info != NULL) {\n+            info = *opt_info;\n+        }\n@@ -1371,1 +1386,1 @@\n-        initialize(env, thread, EI_VM_INIT);\n+        initialize(env, thread, EI_VM_INIT, NULL);\n","filename":"src\/jdk.jdwp.agent\/share\/native\/libjdwp\/debugInit.c","additions":26,"deletions":11,"binary":false,"changes":37,"status":"modified"}]}