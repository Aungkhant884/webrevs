{"files":[{"patch":"@@ -450,1 +450,1 @@\n-    info.clazz = JNI_FUNC_PTR(env,GetObjectClass)(env, exception);\n+    info.clazz = getMethodClass(jvmti_env, method);\n@@ -478,2 +478,3 @@\n-        \/* Get class of exception thrown *\/\n-        if ( info.clazz != NULL ) {\n+        jclass exception_clazz = JNI_FUNC_PTR(env, GetObjectClass)(env, exception);\n+        \/* check class of exception thrown *\/\n+        if ( exception_clazz != NULL ) {\n@@ -482,1 +483,1 @@\n-            error = classSignature(info.clazz, &signature, NULL);\n+            error = classSignature(exception_clazz, &signature, NULL);\n","filename":"src\/jdk.jdwp.agent\/share\/native\/libjdwp\/debugInit.c","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -89,0 +89,5 @@\n+                            if (!ex.location().equals(ex.thread().frame(0).location())) {\n+                                throw new RuntimeException(\n+                                    String.format(\"Throw location %s and location if first frame %s are not equal\",\n+                                                  ex.location(), ex.thread().frame(0).location()));\n+                            }\n@@ -92,0 +97,1 @@\n+                            log(\"Received exception event: \" + event);\n","filename":"test\/jdk\/com\/sun\/jdi\/JdwpOnThrowTest.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"}]}