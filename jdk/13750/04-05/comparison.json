{"files":[{"patch":"@@ -77,4 +77,10 @@\n-  const unsigned int nBytes = len > INT_MAX ? INT_MAX : (unsigned int)len;\n-  const bool successful_write = os::write(_fd, buf, nBytes);\n-  if (!successful_write && errno == ENOSPC) {\n-    JfrJavaSupport::abort(\"Failed to write to jfr stream because no space left on device\", false);\n+  while (len > 0) {\n+    const unsigned int nBytes = len > INT_MAX ? INT_MAX : (unsigned int)len;\n+    const bool successful_write = os::write(_fd, buf, nBytes);\n+    if (!successful_write && errno == ENOSPC) {\n+      JfrJavaSupport::abort(\"Failed to write to jfr stream because no space left on device\", false);\n+    }\n+    guarantee(successful_write, \"Not all the bytes got written, or os::write() failed\");\n+    _stream_pos += nBytes;\n+    len -= nBytes;\n+    buf += nBytes;\n@@ -82,2 +88,0 @@\n-  guarantee(successful_write, \"Not all the bytes got written, or os::write() failed\");\n-  _stream_pos += nBytes;\n","filename":"src\/hotspot\/share\/jfr\/writers\/jfrStreamWriterHost.inline.hpp","additions":10,"deletions":6,"binary":false,"changes":16,"status":"modified"}]}