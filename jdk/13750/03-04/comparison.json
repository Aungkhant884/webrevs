{"files":[{"patch":"@@ -105,2 +105,2 @@\n-    result = os::write(fd, addr, size);\n-    if (result < 0) {\n+    bool successful_write = os::write(fd, addr, size);\n+    if (!successful_write) {\n@@ -952,2 +952,2 @@\n-    result = os::write(fd, &zero_int, 1);\n-    if (result != 0) {\n+    bool successful_write = os::write(fd, &zero_int, 1);\n+    if (!successful_write) {\n@@ -957,0 +957,1 @@\n+      result = OS_ERR;\n","filename":"src\/hotspot\/os\/posix\/perfMemory_posix.cpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -1688,2 +1688,2 @@\n-  ssize_t n = os::write(_fd, buffer, nbytes);\n-  if (n < 0) {\n+  bool successful_write = os::write(_fd, buffer, nbytes);\n+  if (!successful_write) {\n","filename":"src\/hotspot\/share\/cds\/filemap.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -377,2 +377,2 @@\n-      unsigned int bytes_read = 0;\n-      unsigned int bytes_written = 0;\n+      int64_t bytes_read = 0;\n+      int64_t bytes_written = 0;\n@@ -386,4 +386,4 @@\n-        bytes_read += (unsigned int)read_result;\n-        assert(bytes_read - bytes_written <= block_size, \"invariant\");\n-        const ssize_t write_result = os::write(emergency_fd, copy_block, bytes_read - bytes_written);\n-        if (-1 == write_result) {\n+        bytes_read += (int64_t)read_result;\n+        assert(bytes_read - bytes_written <= (int64_t)block_size, \"invariant\");\n+        const bool successful_write = os::write(emergency_fd, copy_block, bytes_read - bytes_written);\n+        if (!successful_write) {\n","filename":"src\/hotspot\/share\/jfr\/recorder\/repository\/jfrEmergencyDump.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -78,2 +78,2 @@\n-  const ssize_t num_written = os::write(_fd, buf, nBytes);\n-  if (num_written < 0 && errno == ENOSPC) {\n+  const bool successful_write = os::write(_fd, buf, nBytes);\n+  if (!successful_write && errno == ENOSPC) {\n@@ -82,1 +82,1 @@\n-  guarantee(num_written == 0, \"Not all the bytes got written, or os::write() failed\");\n+  guarantee(successful_write, \"Not all the bytes got written, or os::write() failed\");\n","filename":"src\/hotspot\/share\/jfr\/writers\/jfrStreamWriterHost.inline.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2900,1 +2900,1 @@\n-    ssize_t count = os::write(defaultStream::output_fd(), s, len);\n+    bool dummy = os::write(defaultStream::output_fd(), s, len);\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1381,1 +1381,1 @@\n-ssize_t os::write(int fd, const void *buf, size_t nBytes) {\n+bool os::write(int fd, const void *buf, size_t nBytes) {\n@@ -1386,2 +1386,2 @@\n-    if (res < 0) {\n-      return -1;\n+    if (res == OS_ERR) {\n+      return false;\n@@ -1393,1 +1393,1 @@\n-  return 0;\n+  return true;\n","filename":"src\/hotspot\/share\/runtime\/os.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -232,0 +232,1 @@\n+  \/\/ Returns number of bytes written on success, OS_ERR on failure.\n@@ -648,2 +649,2 @@\n-  \/\/ Writes the bytes completely. Returns 0 on success, -1 otherwise.\n-  static ssize_t write(int fd, const void *buf, size_t nBytes);\n+  \/\/ Writes the bytes completely. Returns true on success, false otherwise.\n+  static bool write(int fd, const void *buf, size_t nBytes);\n","filename":"src\/hotspot\/share\/runtime\/os.hpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -58,2 +58,2 @@\n-  ssize_t n = os::write(_fd, buf, (size_t)size);\n-  if (n < 0) {\n+  bool successful_write = os::write(_fd, buf, (size_t)size);\n+  if (!successful_write) {\n","filename":"src\/hotspot\/share\/services\/heapDumperCompression.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}