{"files":[{"patch":"@@ -4414,2 +4414,1 @@\n-\/\/ This field means that a security manager can be installed so we still have to\n-\/\/ populate the ProtectionDomainCacheTable.\n+\/\/ This field tells us that a security manager is installed.\n","filename":"src\/hotspot\/share\/classfile\/javaClasses.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -466,15 +466,0 @@\n-  JavaValue result(T_VOID);\n-  LogTarget(Debug, protectiondomain) lt;\n-  if (lt.is_enabled()) {\n-    ResourceMark rm(THREAD);\n-    \/\/ Print out trace information\n-    LogStream ls(lt);\n-    ls.print_cr(\"Checking package access\");\n-    ls.print(\"class loader: \");\n-    class_loader()->print_value_on(&ls);\n-    ls.print(\" protection domain: \");\n-    protection_domain()->print_value_on(&ls);\n-    ls.print(\" loading: \"); klass->print_value_on(&ls);\n-    ls.cr();\n-  }\n-\n@@ -490,0 +475,1 @@\n+    JavaValue result(T_VOID);\n@@ -499,4 +485,16 @@\n-    if (HAS_PENDING_EXCEPTION) {\n-      log_debug(protectiondomain)(\"DENIED !!!!!!!!!!!!!!!!!!!!!\");\n-    } else {\n-     log_debug(protectiondomain)(\"granted\");\n+    LogTarget(Debug, protectiondomain) lt;\n+    if (lt.is_enabled()) {\n+      ResourceMark rm(THREAD);\n+      \/\/ Print out trace information\n+      LogStream ls(lt);\n+      ls.print_cr(\"Checking package access\");\n+      ls.print(\"class loader: \");\n+      class_loader()->print_value_on(&ls);\n+      ls.print(\" protection domain: \");\n+      protection_domain()->print_value_on(&ls);\n+      ls.print(\" loading: \"); klass->print_value_on(&ls);\n+      if (HAS_PENDING_EXCEPTION) {\n+        ls.print_cr(\" DENIED !!!!!!!!!!!!!!!!!!!!!\");\n+      } else {\n+        ls.print_cr(\" granted\");\n+      }\n","filename":"src\/hotspot\/share\/classfile\/systemDictionary.cpp","additions":17,"deletions":19,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -163,1 +163,0 @@\n-    \/\/ @implNote The HotSpot JVM hardcodes the value of NEVER.\n","filename":"src\/java.base\/share\/classes\/java\/lang\/System.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -43,1 +43,1 @@\n-                                                                  Hello.class.getName());\n+                                                                  Hello.class.getName(), \"security_manager\");\n@@ -52,1 +52,1 @@\n-                                                                  Hello.class.getName());\n+                                                                  Hello.class.getName(), \"security_manager\");\n@@ -71,0 +71,4 @@\n+            if (args.length == 1) {\n+              \/\/ Need a security manager to trigger logging.\n+              System.setSecurityManager(new SecurityManager());\n+            }\n","filename":"test\/hotspot\/jtreg\/runtime\/logging\/ProtectionDomainVerificationTest.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"}]}