{"files":[{"patch":"@@ -4386,0 +4386,1 @@\n+int java_lang_System::_static_never_offset;\n@@ -4392,1 +4393,2 @@\n-  macro(_static_allow_security_offset, k, \"allowSecurityManager\", int_signature, true)\n+  macro(_static_allow_security_offset, k, \"allowSecurityManager\", int_signature, true); \\\n+  macro(_static_never_offset, k, \"NEVER\", int_signature, true)\n@@ -4399,0 +4401,13 @@\n+\/\/ This field means that a security manager is never installed so we can completely\n+\/\/ skip populating the ProtectionDomainCacheTable\n+bool java_lang_System::allow_security_manager() {\n+  static int initialized = false;\n+  static bool allowed = true; \/\/ default\n+  if (!initialized) {\n+    oop base = vmClasses::System_klass()->static_field_base_raw();\n+    int never = base->int_field(_static_never_offset);\n+    allowed = (base->int_field(_static_allow_security_offset) != never);\n+  }\n+  return allowed;\n+}\n+\n@@ -4406,7 +4421,0 @@\n-\/\/ This field means that a security manager is never installed so we can completely\n-\/\/ skip populating the ProtectionDomainCacheTable\n-bool java_lang_System::allow_security_manager() {\n-  oop base = vmClasses::System_klass()->static_field_base_raw();\n-  return base->int_field(_static_allow_security_offset) != 1; \/\/ NEVER\n-}\n-\n","filename":"src\/hotspot\/share\/classfile\/javaClasses.cpp","additions":16,"deletions":8,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -1376,0 +1376,1 @@\n+  static int _static_never_offset;\n","filename":"src\/hotspot\/share\/classfile\/javaClasses.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -163,0 +163,1 @@\n+    \/\/ @implNote The HotSpot JVM hardcodes the value of NEVER.\n","filename":"src\/java.base\/share\/classes\/java\/lang\/System.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}