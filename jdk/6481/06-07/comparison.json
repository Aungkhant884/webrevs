{"files":[{"patch":"@@ -431,0 +431,5 @@\n+     * @param  time\n+     *         The last modification time of the entry\n+     * @param  zoneId \n+     *         The time-zone for conmversion to the MS-DOS local date-time\n+     *\n@@ -459,1 +464,1 @@\n-     *         The time-zone used to convert the UTC time to\n+     *         The time-zone used to convert the MS-DOS time to\n","filename":"src\/java.base\/share\/classes\/java\/util\/zip\/ZipEntry.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -63,0 +63,1 @@\n+import java.util.concurrent.TimeUnit;\n@@ -1064,1 +1065,1 @@\n-                setLastModifiedTime(e, lastModified.to(TimeUnit.MILLISECONDS));\n+                setTimeLastModified(e, lastModified);\n@@ -1066,1 +1067,1 @@\n-                setLastModifiedTime(e);\n+                setTimeLastModified(e);\n","filename":"src\/jdk.jartool\/share\/classes\/sun\/tools\/jar\/Main.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+import java.nio.file.attribute.FileTime;\n@@ -38,0 +39,2 @@\n+    private static TimeZone tzAsia = TimeZone.getTimeZone(\"Asia\/Shanghai\"); \n+    private static boolean testLastModified;\n@@ -43,0 +46,2 @@\n+            \/\/ Test set\/getTimeZoned()\n+            testLastModified = false;\n@@ -51,1 +56,0 @@\n-            TimeZone tz = TimeZone.getTimeZone(\"Asia\/Shanghai\");\n@@ -54,4 +58,23 @@\n-            testWithTZ(tz, zdt.withYear(1982));\n-            testWithTZ(tz, zdt.withYear(2037));\n-            testWithTZ(tz, zdt.withYear(2100));\n-            testWithTZ(tz, zdt.withYear(2106));\n+            testWithTZ(tzAsia, zdt.withYear(1982));\n+            testWithTZ(tzAsia, zdt.withYear(2037));\n+            testWithTZ(tzAsia, zdt.withYear(2100));\n+            testWithTZ(tzAsia, zdt.withYear(2106));\n+\n+            test(ZonedDateTime.of(2200, 04, 26, 2, 31, 52, 973, ZoneId.of(\"-05:00\")));\n+\n+            \/\/ Test set\/getTimeZoned()\n+            testLastModified = true;\n+            test(zdt);    \/\/ now\n+            test(zdt.withYear(1968));\n+            test(zdt.withYear(1970));\n+            test(zdt.withYear(1982));\n+            test(zdt.withYear(2037));\n+            test(zdt.withYear(2100));\n+            test(zdt.withYear(2106));\n+\n+            \/\/ dos time does not support < 1980, have to use\n+            \/\/ utc in mtime.\n+            testWithTZ(tzAsia, zdt.withYear(1982));\n+            testWithTZ(tzAsia, zdt.withYear(2037));\n+            testWithTZ(tzAsia, zdt.withYear(2100));\n+            testWithTZ(tzAsia, zdt.withYear(2106));\n@@ -69,1 +92,6 @@\n-        ze.setTimeZoned(mtime);\n+        if (testLastModified) {\n+            FileTime lastModified = FileTime.from(mtime.toInstant());\n+            ze.setLastModifiedTimeZoned(lastModified, mtime.getZone());\n+        } else {\n+            ze.setTimeZoned(mtime);\n+        }\n@@ -111,1 +139,6 @@\n-        long timeSeconds = ze.getTimeZoned(expected.getZone()).toEpochSecond();\n+        long timeSeconds;\n+        if (testLastModified) {\n+            timeSeconds = ze.getLastModifiedTimeZoned(expected.getZone()).toInstant().getEpochSecond(); \n+        } else {\n+            timeSeconds = ze.getTimeZoned(expected.getZone()).toEpochSecond();\n+        }\n","filename":"test\/jdk\/java\/util\/zip\/TestZonedTime.java","additions":40,"deletions":7,"binary":false,"changes":47,"status":"modified"}]}