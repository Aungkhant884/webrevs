{"files":[{"patch":"@@ -2256,0 +2256,2 @@\n+  \/\/ sets the thread and reports the reference to it with the specified kind.\n+  bool set_thread(jvmtiHeapReferenceKind kind, oop o);\n@@ -2269,1 +2271,6 @@\n-  return CallbackInvoker::report_simple_root(JVMTI_HEAP_REFERENCE_THREAD, threadObj);\n+  return true;\n+}\n+\n+bool StackRootCollector::set_thread(jvmtiHeapReferenceKind kind, oop o) {\n+  return set_thread(o)\n+         && CallbackInvoker::report_simple_root(kind, threadObj);\n@@ -2791,1 +2798,1 @@\n-    if (!stack_collector.set_thread(threadObj)) {\n+    if (!stack_collector.set_thread(JVMTI_HEAP_REFERENCE_THREAD, threadObj)) {\n@@ -2814,1 +2821,2 @@\n-      if (!stack_collector.set_thread(mounted_vt)) {\n+      \/\/ report virtual thread as JVMTI_HEAP_REFERENCE_OTHER.\n+      if (!stack_collector.set_thread(JVMTI_HEAP_REFERENCE_OTHER, mounted_vt)) {\n@@ -2837,1 +2845,1 @@\n-    if (!stack_collector.set_thread(threadObj)) {\n+    if (!stack_collector.set_thread(JVMTI_HEAP_REFERENCE_THREAD, threadObj)) {\n@@ -2901,0 +2909,1 @@\n+  \/\/ reference to the vthread is already reported.\n","filename":"src\/hotspot\/share\/prims\/jvmtiTagMap.cpp","additions":13,"deletions":4,"binary":false,"changes":17,"status":"modified"}]}