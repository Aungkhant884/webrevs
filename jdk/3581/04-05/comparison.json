{"files":[{"patch":"@@ -1703,1 +1703,1 @@\n-  if (FLAG_IS_DEFAULT(UseSignumIntrinsic) && (UseSSE >= 2)) {\n+  if (FLAG_IS_DEFAULT(UseSignumIntrinsic)) {\n","filename":"src\/hotspot\/cpu\/x86\/vm_version_x86.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1602,0 +1602,10 @@\n+    case Op_SignumF:\n+      if (UseSSE < 1) {\n+        return false;\n+      }\n+      break;\n+    case Op_SignumD:\n+      if (UseSSE < 2) {\n+        return false;\n+      }\n+      break;\n@@ -5780,1 +5790,1 @@\n-instruct signumF_reg(regF dst, regF zero, regF one, rFlagsReg cr) %{\n+instruct signumF_reg(regF dst, regF zero, regF one, rRegP scratch, rFlagsReg cr) %{\n@@ -5783,2 +5793,2 @@\n-  effect(KILL cr);\n-  format %{ \"signumF $dst, $dst\" %}\n+  effect(TEMP scratch, KILL cr);\n+  format %{ \"signumF $dst, $dst\\t! using $scratch as TEMP\" %}\n@@ -5793,1 +5803,1 @@\n-    __ xorps($dst$$XMMRegister, ExternalAddress(float_signflip()));\n+    __ xorps($dst$$XMMRegister, ExternalAddress(float_signflip()), $scratch$$Register);\n@@ -5799,1 +5809,1 @@\n-instruct signumD_reg(regD dst, regD zero, regD one, rFlagsReg cr) %{\n+instruct signumD_reg(regD dst, regD zero, regD one, rRegP scratch, rFlagsReg cr) %{\n@@ -5802,2 +5812,2 @@\n-  effect(KILL cr);\n-  format %{ \"signumD $dst, $dst\" %}\n+  effect(TEMP scratch, KILL cr);\n+  format %{ \"signumD $dst, $dst\\t! using $scratch as TEMP\" %}\n@@ -5812,1 +5822,1 @@\n-    __ xorpd($dst$$XMMRegister, ExternalAddress(double_signflip()));\n+    __ xorpd($dst$$XMMRegister, ExternalAddress(double_signflip()), $scratch$$Register);\n","filename":"src\/hotspot\/cpu\/x86\/x86.ad","additions":18,"deletions":8,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -1693,2 +1693,2 @@\n-  case vmIntrinsics::_dsignum: return inline_double_math(id);\n-  case vmIntrinsics::_fsignum: return inline_math(id);\n+  case vmIntrinsics::_dsignum: return Matcher::match_rule_supported(Op_SignumD) ? inline_double_math(id) : false;\n+  case vmIntrinsics::_fsignum: return Matcher::match_rule_supported(Op_SignumF) ? inline_math(id) : false;\n","filename":"src\/hotspot\/share\/opto\/library_call.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}