{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2006, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2006, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,2 +28,16 @@\n-import java.awt.*;\n-import java.awt.event.*;\n+import java.awt.BasicStroke;\n+import java.awt.BorderLayout;\n+import java.awt.Color;\n+import java.awt.Desktop;\n+import java.awt.FlowLayout;\n+import java.awt.Graphics2D;\n+import java.awt.Graphics;\n+import java.awt.Rectangle;\n+import java.awt.Shape;\n+import java.awt.Stroke;\n+import java.awt.event.ActionEvent;\n+import java.awt.event.FocusEvent;\n+import java.awt.event.FocusListener;\n+import java.awt.event.KeyAdapter;\n+import java.awt.event.KeyEvent;\n+import java.awt.geom.Rectangle2D;\n@@ -32,7 +46,26 @@\n-\n-import javax.swing.*;\n-import javax.swing.border.*;\n-import javax.swing.event.*;\n-\n-import static java.awt.BorderLayout.*;\n-import static sun.tools.jconsole.Utilities.*;\n+import javax.swing.AbstractAction;\n+import javax.swing.Action;\n+import javax.swing.BorderFactory;\n+import javax.swing.Icon;\n+import javax.swing.ImageIcon;\n+import javax.swing.JButton;\n+import javax.swing.JComponent;\n+import javax.swing.JEditorPane;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.border.EmptyBorder;\n+import javax.swing.event.HyperlinkEvent;\n+import javax.swing.event.HyperlinkListener;\n+import javax.swing.text.BadLocationException;\n+import javax.swing.text.DefaultHighlighter;\n+import javax.swing.text.Document;\n+import javax.swing.text.Highlighter;\n+import javax.swing.text.JTextComponent;\n+import javax.swing.text.View;\n+\n+import static java.awt.BorderLayout.CENTER;\n+import static java.awt.BorderLayout.NORTH;\n+import static java.awt.BorderLayout.SOUTH;\n+\n+import static sun.tools.jconsole.Utilities.setAccessibleDescription;\n+import static sun.tools.jconsole.Utilities.setAccessibleName;\n@@ -54,0 +87,2 @@\n+    private JEditorPane helpLink;\n+    private final String urlStr = getOnlineDocUrl();\n@@ -75,1 +110,1 @@\n-        String urlStr = getOnlineDocUrl();\n+        String locUrlStr = urlStr;\n@@ -77,1 +112,1 @@\n-            urlStr = \"<a style='color:#35556b' href=\\\"\" + urlStr + \"\\\">\" + urlStr + \"<\/a>\";\n+            locUrlStr = \"<a style='color:#35556b' href=\\\"\" + locUrlStr + \"\\\">\" + locUrlStr + \"<\/a>\";\n@@ -84,1 +119,1 @@\n-        JEditorPane helpLink = new JEditorPane(\"text\/html\",\n+        helpLink = new JEditorPane(\"text\/html\",\n@@ -88,1 +123,2 @@\n-                \"<p>\" + urlStr + \"<\/html>\");\n+                \"<p>\" + locUrlStr + \"<\/html>\");\n+\n@@ -92,0 +128,1 @@\n+\n@@ -94,0 +131,22 @@\n+\n+        helpLink.addKeyListener(new KeyAdapter() {\n+            @Override\n+            public void keyPressed(KeyEvent e) {\n+                if ((e.getKeyCode() == KeyEvent.VK_ENTER) || (e.getKeyCode() == KeyEvent.VK_SPACE)) {\n+                    browse(urlStr);\n+                    e.consume();\n+                }\n+            }\n+        });\n+\n+        helpLink.addFocusListener(new FocusListener() {\n+            @Override\n+            public void focusGained(FocusEvent e) {\n+                highlight();\n+            }\n+            @Override\n+            public void focusLost(FocusEvent e) {\n+                removeHighlights();\n+            }\n+        });\n+\n@@ -131,0 +190,19 @@\n+    public void highlight() {\n+        try {\n+            removeHighlights();\n+\n+            Highlighter hilite = helpLink.getHighlighter();\n+            Document doc = helpLink.getDocument();\n+            String text = doc.getText(0, doc.getLength());\n+            int pos = text.indexOf(urlStr, 0);\n+            hilite.addHighlight(pos, pos + urlStr.length(), new HighlightPainter());\n+        } catch (BadLocationException e) {\n+            \/\/ ignore\n+        }\n+    }\n+\n+    public void removeHighlights() {\n+        Highlighter hilite = helpLink.getHighlighter();\n+        hilite.removeAllHighlights();\n+    }\n+\n@@ -195,0 +273,30 @@\n+\n+    private static class HighlightPainter\n+            extends DefaultHighlighter.DefaultHighlightPainter {\n+\n+        public HighlightPainter() {\n+            super(null);\n+        }\n+        @Override\n+        public Shape paintLayer(Graphics g, int offs0, int offs1, Shape bounds,\n+                                JTextComponent c, View view) {\n+            g.setColor(c.getSelectionColor());\n+            Rectangle alloc;\n+\n+            if (bounds instanceof Rectangle) {\n+                alloc = (Rectangle)bounds;\n+            } else {\n+                alloc = bounds.getBounds();\n+            }\n+\n+            Graphics2D g2d = (Graphics2D)g;\n+\n+            float[] dash = { 2F, 2F };\n+            Stroke dashedStroke = new BasicStroke(1F, BasicStroke.CAP_SQUARE,\n+            BasicStroke.JOIN_MITER, 3F, dash, 0F);\n+            g2d.fill(dashedStroke.createStrokedShape(\n+                     new Rectangle2D.Float(alloc.x, alloc.y,\n+                                           alloc.width - 1, alloc.height - 1)));\n+            return alloc;\n+        }\n+    }\n","filename":"src\/jdk.jconsole\/share\/classes\/sun\/tools\/jconsole\/AboutDialog.java","additions":122,"deletions":14,"binary":false,"changes":136,"status":"modified"}]}