{"files":[{"patch":"@@ -230,1 +230,0 @@\n-conf_explicit_platform=\n@@ -238,3 +237,0 @@\n-    --current-platform=*)\n-      conf_explicit_platform=`expr \"X$conf_option\" : '[^=]*=\\(.*\\)'`\n-      ;;\n@@ -280,2 +276,0 @@\n-    -build | --build | --buil | --bui | --bu |-build=* | --build=* | --buil=* | --bui=* | --bu=*)\n-      conf_legacy_crosscompile=\"$conf_legacy_crosscompile $conf_option\" ;;\n@@ -283,1 +277,1 @@\n-      conf_legacy_crosscompile=\"$conf_legacy_crosscompile $conf_option\" ;;\n+      conf_unsafe_crosscompile=\"$conf_unsafe_crosscompile $conf_option\" ;;\n@@ -285,1 +279,1 @@\n-      conf_legacy_crosscompile=\"$conf_legacy_crosscompile $conf_option\" ;;\n+      conf_unsafe_crosscompile=\"$conf_unsafe_crosscompile $conf_option\" ;;\n@@ -294,11 +288,7 @@\n-if test \"x$conf_legacy_crosscompile\" != \"x\"; then\n-  echo \"Error: Legacy autoconf cross-compilation flags are not supported.\"\n-  echo \"You specified: $conf_legacy_crosscompile.\"\n-  echo \"It is recommend you use --current-platform and --openjdk-target\"\n-  echo \"for cross compiling Java.\"\n-  exit 1\n-fi\n-\n-if test \"x$conf_openjdk_target\" != \"x\"; then\n-  if test \"x$conf_explicit_platform\" != \"x\"; then\n-    conf_processed_arguments=(\"--host=$conf_openjdk_target\" \"--target=$conf_openjdk_target\" \"${conf_processed_arguments[@]}\")\n+if test \"x$conf_unsafe_crosscompile\" != \"x\"; then\n+  if test \"x$conf_openjdk_target\" != \"x\"; then\n+    echo \"Error: --openjdk-target was specified together with\"\n+    echo \"incompatible autoconf cross-compilation flags.\"\n+    echo \"You specified: --openjdk-target=$conf_openjdk_target and $conf_unsafe_crosscompile.\"\n+    echo \"The recommended use is just --openjdk-target.\"\n+    exit 1\n@@ -306,2 +296,3 @@\n-    conf_build_platform=`sh $conf_script_dir\/build-aux\/config.guess`\n-    conf_processed_arguments=(\"--build=$conf_build_platform\" \"--host=$conf_openjdk_target\" \"--target=$conf_openjdk_target\" \"${conf_processed_arguments[@]}\")\n+    echo \"Warning: You are using unsafe autoconf cross-compilation flags.\"\n+    echo \"It is recommended that you use --openjdk-target instead.\"\n+    echo \"\"\n@@ -311,2 +302,3 @@\n-if test \"x$conf_explicit_platform\" != \"x\"; then\n-  conf_processed_arguments=(\"--build=$conf_explicit_platform\" \"${conf_processed_arguments[@]}\")\n+if test \"x$conf_openjdk_target\" != \"x\"; then\n+  conf_build_platform=`sh $conf_script_dir\/build-aux\/config.guess`\n+  conf_processed_arguments=(\"--build=$conf_build_platform\" \"--host=$conf_openjdk_target\" \"--target=$conf_openjdk_target\" \"${conf_processed_arguments[@]}\")\n@@ -347,5 +339,0 @@\n-  --current-platform      Explicitly set the current platform the JDK is being\n-                          compiled on. This fully overrides automatic platform\n-                          detection and it is recommended you don't set this\n-                          unless you have a good reason to and know what you\n-                          are doing.\n@@ -355,2 +342,3 @@\n-                          --build=<current platform>, or --current-platform if\n-                          you have explicitly set it.\n+                          --build=<current platform>, or the platform you\n+                          have provided if you have explicitly passed\n+                          --build to configure\n","filename":"make\/autoconf\/configure","additions":18,"deletions":30,"binary":false,"changes":48,"status":"modified"}]}