{"files":[{"patch":"@@ -99,1 +99,2 @@\n-    static String getInstallDir(\n+     \/\/ Returns full path to installation directory\n+     static String getInstallDir(\n@@ -116,0 +117,21 @@\n+    \/\/ Returns display name of installation directory. Display name is used to\n+    \/\/ show user installation location and for well known (default only) we will\n+    \/\/ use \"Applications\" or \"JavaVirtualMachines\". For user provided installation\n+    \/\/ directory we will use full path as display name.\n+    static String getInstallDirDisplayName(\n+            Map<String, ? super Object>  params, boolean defaultOnly) {\n+        String returnValue = INSTALL_DIR.fetchFrom(params);\n+        if (defaultOnly && returnValue != null) {\n+            Log.info(I18N.getString(\"message.install-dir-ignored\"));\n+            returnValue = null;\n+        }\n+        if (returnValue == null) {\n+            if (StandardBundlerParam.isRuntimeInstaller(params)) {\n+                returnValue = \"JavaVirtualMachines\";\n+            } else {\n+               returnValue = \"Applications\";\n+            }\n+        }\n+        return returnValue;\n+    }\n+\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/MacBaseInstallerBundler.java","additions":23,"deletions":1,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -124,1 +124,1 @@\n-        \/\/prepare config for exe\n+        \/\/ Prepare DMG setup script\n@@ -134,0 +134,2 @@\n+        data.put(\"DEPLOY_INSTALL_LOCATION_DISPLAY_NAME\",\n+                getInstallDirDisplayName(params, true));\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/MacDmgBundler.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -20,1 +20,1 @@\n-  make new alias file at POSIX file \"DEPLOY_VOLUME_PATH\" to POSIX file \"DEPLOY_INSTALL_LOCATION\" with properties {name:\"DEPLOY_INSTALL_LOCATION\"}\n+  make new alias file at POSIX file \"DEPLOY_VOLUME_PATH\" to POSIX file \"DEPLOY_INSTALL_LOCATION\" with properties {name:\"DEPLOY_INSTALL_LOCATION_DISPLAY_NAME\"}\n@@ -27,1 +27,1 @@\n-    if theFilePath is \"DEPLOY_INSTALL_LOCATION\" then\n+    if theFilePath ends with \"DEPLOY_INSTALL_LOCATION_DISPLAY_NAME\" then\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/resources\/DMGsetup.scpt","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}