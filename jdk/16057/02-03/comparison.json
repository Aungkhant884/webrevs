{"files":[{"patch":"@@ -92,1 +92,1 @@\n-        handleSocketError(env, WSAGetLastError());\n+        NET_ThrowNew(env, WSAGetLastError(), \"connect\");\n@@ -139,1 +139,4 @@\n-            } else return handleSocketError(env, theErr);\n+            } else {\n+                NET_ThrowNew(env, theErr, \"recvfrom\");\n+                return IOS_THROWN;\n+            }\n@@ -163,1 +166,2 @@\n-        return handleSocketError(env, (jint)WSAGetLastError());\n+        NET_ThrowNew(env, (jint)WSAGetLastError(), \"sendto\");\n+        return IOS_THROWN;\n","filename":"src\/java.base\/windows\/native\/libnio\/ch\/DatagramChannelImpl.c","additions":7,"deletions":3,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -152,2 +152,1 @@\n-        int error = WSAGetLastError();\n-        handleSocketError(env, (jint)error);\n+        NET_ThrowNew(env, WSAGetLastError(), \"ioctlsocket\");\n","filename":"src\/java.base\/windows\/native\/libnio\/ch\/IOUtil.c","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -80,6 +80,0 @@\n-jint handleSocketError(JNIEnv *env, int errorValue)\n-{\n-    NET_ThrowNew(env, errorValue, NULL);\n-    return IOS_THROWN;\n-}\n-\n@@ -559,1 +553,5 @@\n-        NET_ThrowNew(env, WSAGetLastError(), \"setsockopt with group source request\");\n+        if (block) {\n+            NET_ThrowNew(env, WSAGetLastError(), \"setsocketopt to block source\");\n+        } else {\n+            NET_ThrowNew(env, WSAGetLastError(), \"setsocketopt to unblock source\");\n+        }\n@@ -636,3 +634,3 @@\n-    int count = 0;\n-    if (NET_SocketAvailable(fdval(env, fdo), &count) != 0) {\n-        NET_ThrowNew(env, WSAGetLastError(), \"socket availability check\");\n+    u_long arg;\n+    if (ioctlsocket((SOCKET) fdval(env, fdo), FIONREAD, &arg) == SOCKET_ERROR) {\n+        NET_ThrowNew(env, WSAGetLastError(), \"ioctlsocket);\n@@ -641,1 +639,1 @@\n-    return (jint) count;\n+    return (jint) arg;\n","filename":"src\/java.base\/windows\/native\/libnio\/ch\/Net.c","additions":9,"deletions":11,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -161,1 +161,2 @@\n-        return handleSocketError(env, WSAGetLastError());\n+        NET_ThrowNew(env, WSAGetLastError(), \"WSASocketW\");\n+        return IOS_THROWN;\n","filename":"src\/java.base\/windows\/native\/libnio\/ch\/UnixDomainSockets.c","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -49,1 +49,0 @@\n-jint handleSocketError(JNIEnv *env, int errorValue);\n","filename":"src\/java.base\/windows\/native\/libnio\/ch\/nio_util.h","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}