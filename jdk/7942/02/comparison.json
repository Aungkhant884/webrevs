{"files":[{"patch":"@@ -0,0 +1,77 @@\n+\/*\n+ * Copyright (c) 2004, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.io.File;\n+import java.util.concurrent.atomic.AtomicReference;\n+import javax.swing.JFileChooser;\n+import javax.swing.SwingUtilities;\n+\n+\/*\n+ * @test\n+ * @bug 4400728\n+ * @summary This testcase tests CCC4400728 request, checks whether JFileChooser\n+ *          constructor set correct default directory or not, it is typically\n+ *          the \"My Documents\" folder on Windows, and the user's home directory\n+ *          on Unix.\n+ * @run main JFileChooserDefaultDirectoryTest\n+ *\/\n+public class JFileChooserDefaultDirectoryTest {\n+\n+    public static void main(String[] args) throws Exception {\n+        final AtomicReference<String> actual = new AtomicReference<>(\"\");\n+        SwingUtilities.invokeAndWait(() -> {\n+            JFileChooser jFileChooser = new JFileChooser();\n+            actual.set(jFileChooser.getFileSystemView()\n+                                   .getDefaultDirectory()\n+                                   .getName());\n+        });\n+        String actualDefaultDirectory = actual.get();\n+        final boolean isWindows = System.getProperty(\"os.name\")\n+                                        .startsWith(\"Windows\");\n+        if (isWindows) {\n+            if (actualDefaultDirectory.equals(\"Documents\")) {\n+                System.out.println(\"Test Passed\");\n+            } else {\n+                throw new RuntimeException(\n+                        \"Test Failed, JFileChooser constructor sets incorrect\" +\n+                        \" default directory, actual = \" +\n+                        actualDefaultDirectory +\n+                        \" expected should be 'Documents'\");\n+            }\n+        } else {\n+            final String userHome = System.getProperty(\"user.home\");\n+            System.out.println(\"UserHome dir = \" + userHome);\n+            String expectedDefaultDirectory = new File(userHome).getName();\n+            if (expectedDefaultDirectory.equals(actualDefaultDirectory)) {\n+                System.out.println(\"Test Passed\");\n+            } else {\n+                throw new RuntimeException(\n+                        \"Test Failed, JFileChooser constructor sets incorrect\" +\n+                        \" default directory, actual = \" +\n+                        actualDefaultDirectory + \" expected = \" +\n+                        expectedDefaultDirectory);\n+            }\n+        }\n+    }\n+\n+}\n","filename":"test\/jdk\/javax\/swing\/JFileChooser\/4400728\/JFileChooserDefaultDirectoryTest.java","additions":77,"deletions":0,"binary":false,"changes":77,"status":"added"}]}