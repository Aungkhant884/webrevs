{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -119,0 +119,1 @@\n+import java.util.Hashtable;\n@@ -358,0 +359,1 @@\n+                            resetScreenInsetsCache();\n@@ -361,0 +363,5 @@\n+                    } else {\n+                        final XAtom XA_NET_WORKAREA = XAtom.get(\"_NET_WORKAREA\");\n+                        final boolean rootWindowWorkareaResized = (ev.get_type() == XConstants.PropertyNotify\n+                                && ev.get_xproperty().get_atom() == XA_NET_WORKAREA.getAtom());\n+                        if (rootWindowWorkareaResized) resetScreenInsetsCache();\n@@ -846,2 +853,1 @@\n-    @Override\n-    public Insets getScreenInsets(final GraphicsConfiguration gc) {\n+    private Insets getScreenInsetsImpl(final GraphicsConfiguration gc) {\n@@ -875,0 +881,10 @@\n+    private final Hashtable<GraphicsConfiguration, Insets> cachedInsets = new Hashtable<>();\n+    private void resetScreenInsetsCache() {\n+        cachedInsets.clear();\n+    }\n+\n+    @Override\n+    public Insets getScreenInsets(final GraphicsConfiguration gc) {\n+        return (Insets)cachedInsets.computeIfAbsent(gc, this::getScreenInsetsImpl).clone();\n+    }\n+\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XToolkit.java","additions":19,"deletions":3,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -69,0 +69,1 @@\n+    private Rectangle bounds;\n@@ -121,1 +122,1 @@\n-    public Rectangle getBounds() {\n+    private Rectangle getBoundsImpl() {\n@@ -132,0 +133,6 @@\n+    public Rectangle getBounds() {\n+        synchronized (this) {\n+            return bounds.getBounds();\n+        }\n+    }\n+\n@@ -519,0 +526,1 @@\n+        bounds = getBoundsImpl();\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11GraphicsDevice.java","additions":10,"deletions":2,"binary":false,"changes":12,"status":"modified"}]}