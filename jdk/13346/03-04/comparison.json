{"files":[{"patch":"@@ -359,1 +359,0 @@\n-                            resetScreenInsetsCache();\n@@ -881,1 +880,0 @@\n-    private final Hashtable<GraphicsConfiguration, Insets> cachedInsets = new Hashtable<>();\n@@ -883,1 +881,5 @@\n-        cachedInsets.clear();\n+        final GraphicsDevice[] devices = ((X11GraphicsEnvironment)GraphicsEnvironment.\n+                getLocalGraphicsEnvironment()).getScreenDevices();\n+        for (var gd : devices) {\n+            ((X11GraphicsDevice)gd).resetInsets();\n+        }\n@@ -888,1 +890,10 @@\n-        return (Insets)cachedInsets.computeIfAbsent(gc, this::getScreenInsetsImpl).clone();\n+        final X11GraphicsDevice device = (X11GraphicsDevice) gc.getDevice();\n+        synchronized (device) {\n+            Insets insets = device.getInsets();\n+            if (insets == null) {\n+                insets = getScreenInsetsImpl(gc);\n+                device.setInsets(insets);\n+            }\n+\n+            return (Insets)insets.clone();\n+        }\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XToolkit.java","additions":15,"deletions":4,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -33,0 +33,1 @@\n+import java.awt.Insets;\n@@ -40,0 +41,1 @@\n+import java.util.Objects;\n@@ -70,0 +72,1 @@\n+    private Insets    insets;\n@@ -140,0 +143,19 @@\n+    public Insets getInsets() {\n+        synchronized (this) {\n+            return insets;\n+        }\n+    }\n+\n+    public void setInsets(Insets newInsets) {\n+        Objects.requireNonNull(newInsets);\n+        synchronized (this) {\n+            insets = newInsets;\n+        }\n+    }\n+\n+    public void resetInsets() {\n+        synchronized (this) {\n+            insets = null;\n+        }\n+    }\n+\n@@ -528,0 +550,1 @@\n+        insets = null;\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11GraphicsDevice.java","additions":23,"deletions":0,"binary":false,"changes":23,"status":"modified"}]}