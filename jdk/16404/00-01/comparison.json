{"files":[{"patch":"@@ -86,2 +86,1 @@\n-  Atomic::release_store_fence(&_barrier_tag, barrier_tag);\n-\n+  \/\/ Make sure accesses to barrier tag are fully ordered.\n@@ -90,0 +89,2 @@\n+  Atomic::release_store(&_barrier_tag, barrier_tag);\n+  OrderAccess::fence();\n@@ -127,1 +128,4 @@\n-  Atomic::release_store_fence(&_barrier_tag, 0);\n+  \/\/ Make sure accesses to barrier tag are fully ordered.\n+  OrderAccess::fence();\n+  Atomic::release_store(&_barrier_tag, 0);\n+  OrderAccess::fence();\n@@ -137,2 +141,0 @@\n-  assert(Atomic::load(&cell._unsignaled_waits) == 0, \"Post-condition: no unsignaled waits\");\n-\n@@ -141,0 +143,2 @@\n+\n+  assert(Atomic::load(&cell._unsignaled_waits) == 0, \"Post-condition: no unsignaled waits\");\n@@ -146,1 +150,1 @@\n-  if (Atomic::load(&_barrier_tag) != barrier_tag) {\n+  if (Atomic::load_acquire(&_barrier_tag) != barrier_tag) {\n@@ -169,1 +173,4 @@\n-  if (Atomic::load(&_barrier_tag) == barrier_tag) {\n+  \/\/ Make sure accesses to barrier tag are fully ordered.\n+  OrderAccess::fence();\n+\n+  if (Atomic::load_acquire(&_barrier_tag) == barrier_tag) {\n","filename":"src\/hotspot\/share\/utilities\/waitBarrier_generic.cpp","additions":14,"deletions":7,"binary":false,"changes":21,"status":"modified"}]}