{"files":[{"patch":"@@ -24,0 +24,3 @@\n+import java.awt.Robot;\n+import java.awt.event.KeyAdapter;\n+import java.awt.event.KeyEvent;\n@@ -31,5 +34,0 @@\n-import java.awt.Point;\n-import java.awt.Robot;\n-import java.awt.event.InputEvent;\n-import java.awt.event.KeyAdapter;\n-import java.awt.event.KeyEvent;\n@@ -49,2 +47,1 @@\n-    private static volatile Point p;\n-    private static volatile boolean passed = true;\n+    private static volatile boolean passed = false;\n@@ -57,1 +54,0 @@\n-            robot.delay(50);\n@@ -63,6 +59,0 @@\n-            SwingUtilities.invokeAndWait(() -> p = jf.getLocationOnScreen());\n-            robot.delay(200);\n-\n-            robot.mouseMove(p.x, p.y);\n-            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n-            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -91,0 +81,4 @@\n+\n+        MutableAttributeSet attrs = sek.getInputAttributes();\n+        StyleConstants.setFontSize(attrs, FONT_SIZE);\n+\n@@ -98,3 +92,0 @@\n-        MutableAttributeSet attrs = sek.getInputAttributes();\n-        StyleConstants.setFontSize(attrs, FONT_SIZE);\n-\n","filename":"test\/jdk\/javax\/swing\/text\/StyledEditorKit\/bug4329418.java","additions":8,"deletions":17,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+import javax.swing.SwingUtilities;\n@@ -26,0 +27,1 @@\n+import java.text.ParseException;\n@@ -36,7 +38,14 @@\n-        MaskFormatter formatter = new MaskFormatter(\"(###) ###-####\");\n-        formatter.setPlaceholderCharacter('#');\n-        JFormattedTextField textField = new JFormattedTextField(formatter);\n-        textField.replaceSelection(\"12345\");\n-        if (!textField.getText().equals(\"(123) 45#-####\")) {\n-            throw new RuntimeException(\"Test Failed! replaceSelection() didn't replace text properly\");\n-        }\n+        SwingUtilities.invokeAndWait(() -> {\n+            MaskFormatter formatter;\n+            try {\n+                formatter = new MaskFormatter(\"(###) ###-####\");\n+            } catch (ParseException e) {\n+                throw new RuntimeException(e);\n+            }\n+            formatter.setPlaceholderCharacter('#');\n+            JFormattedTextField textField = new JFormattedTextField(formatter);\n+            textField.replaceSelection(\"12345\");\n+            if (!textField.getText().equals(\"(123) 45#-####\")) {\n+                throw new RuntimeException(\"Test Failed! replaceSelection() didn't replace text properly\");\n+            }\n+        });\n","filename":"test\/jdk\/javax\/swing\/text\/bug4739057.java","additions":16,"deletions":7,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+import javax.swing.SwingUtilities;\n@@ -30,1 +31,0 @@\n-import java.awt.Robot;\n@@ -35,1 +35,0 @@\n- * @key headful\n@@ -40,1 +39,0 @@\n-    private static Robot robot;\n@@ -45,4 +43,5 @@\n-        Object oldReset = UIManager.put(\"FormView.resetButtonText\",\n-                RESET_PROPERTY);\n-        Object oldSubmit = UIManager.put(\"FormView.submitButtonText\",\n-                SUBMIT_PROPERTY);\n+        SwingUtilities.invokeAndWait(() -> {\n+            Object oldReset = UIManager.put(\"FormView.resetButtonText\",\n+                    RESET_PROPERTY);\n+            Object oldSubmit = UIManager.put(\"FormView.submitButtonText\",\n+                    SUBMIT_PROPERTY);\n@@ -50,10 +49,7 @@\n-        try {\n-            robot = new Robot();\n-            JEditorPane ep = new JEditorPane(\"text\/html\",\n-                    \"<html><input type=\\\"submit\\\"><\/html>\");\n-            Document doc = ep.getDocument();\n-            robot.delay(100);\n-            Element elem = findInputElement(doc.getDefaultRootElement());\n-            TestView view = new TestView(elem);\n-            robot.delay(100);\n-            view.test(SUBMIT_PROPERTY);\n+            try {\n+                JEditorPane ep = new JEditorPane(\"text\/html\",\n+                        \"<html><input type=\\\"submit\\\"><\/html>\");\n+                Document doc = ep.getDocument();\n+                Element elem = findInputElement(doc.getDefaultRootElement());\n+                TestView view = new TestView(elem);\n+                view.test(SUBMIT_PROPERTY);\n@@ -61,12 +57,11 @@\n-            ep = new JEditorPane(\"text\/html\",\n-                    \"<html><input type=\\\"reset\\\"><\/html>\");\n-            doc = ep.getDocument();\n-            robot.delay(100);\n-            elem = findInputElement(doc.getDefaultRootElement());\n-            view = new TestView(elem);\n-            robot.delay(100);\n-            view.test(RESET_PROPERTY);\n-        } finally {\n-            UIManager.put(\"FormView.resetButtonText\", oldReset);\n-            UIManager.put(\"FormView.submitButtonText\", oldSubmit);\n-        }\n+                ep = new JEditorPane(\"text\/html\",\n+                        \"<html><input type=\\\"reset\\\"><\/html>\");\n+                doc = ep.getDocument();\n+                elem = findInputElement(doc.getDefaultRootElement());\n+                view = new TestView(elem);\n+                view.test(RESET_PROPERTY);\n+            } finally {\n+                UIManager.put(\"FormView.resetButtonText\", oldReset);\n+                UIManager.put(\"FormView.submitButtonText\", oldSubmit);\n+            }\n+        });\n@@ -94,1 +89,1 @@\n-            JButton comp = (JButton)createComponent();\n+            JButton comp = (JButton) createComponent();\n","filename":"test\/jdk\/javax\/swing\/text\/html\/bug4210307.java","additions":25,"deletions":30,"binary":false,"changes":55,"status":"modified"}]}