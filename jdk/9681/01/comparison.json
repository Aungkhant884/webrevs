{"files":[{"patch":"@@ -1601,0 +1601,5 @@\n+                if (this.visComp != null && this.visComp.isVisible()\n+                        && !this.visComp.equals(component)) {\n+                    \/\/ previous component visibility is set to false\n+                    this.visComp.setVisible(false);\n+                }\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/JTabbedPane.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -0,0 +1,107 @@\n+\/*\n+ * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.AWTException;\n+import java.awt.Color;\n+import java.awt.Robot;\n+import java.lang.reflect.InvocationTargetException;\n+import javax.swing.JFrame;\n+import javax.swing.JPanel;\n+import javax.swing.JTabbedPane;\n+import javax.swing.SwingUtilities;\n+\n+\/*\n+ * @test\n+ * @bug 8259687\n+ * @key headful\n+ * @summary Tests whether the selected tab's component is on the top and visible.\n+ * @run main TabbedPaneBug\n+ *\/\n+public class TabbedPaneBug {\n+\n+    private static final int FIRST = 0;\n+    private static final int SECOND = 1;\n+    private static JFrame window;\n+    private static JTabbedPane tabs;\n+    private static final JPanel firstTab = new JPanel();\n+    private static final JPanel secondTab = new JPanel();\n+\n+    public static void main(String[] args) throws AWTException,\n+            InterruptedException, InvocationTargetException {\n+        try {\n+            Robot robot = new Robot();\n+            robot.setAutoDelay(200);\n+            SwingUtilities.invokeAndWait(() -> createAndShowGUI());\n+\n+            robot.waitForIdle();\n+            robot.mouseMove(window.getWidth()\/2, window.getHeight()\/2);\n+            robot.delay(500);\n+            Color actualColor = robot.getPixelColor(window.getWidth()\/2,\n+                    window.getHeight()\/2);\n+            robot.delay(200);\n+\n+            if (actualColor.equals(Color.RED)) {\n+                throw new RuntimeException(\"The second (selected) component\" +\n+                        \" is not on the top!!\");\n+            }\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (window != null) {\n+                    window.dispose();\n+                }\n+            });\n+        }\n+\n+    }\n+\n+    private static void createAndShowGUI() {\n+        window = new JFrame(\"Tabbed Pane Bug\");\n+        tabs = new JTabbedPane();\n+\n+        firstTab.setBackground(Color.RED);\n+        secondTab.setBackground(Color.GREEN);\n+\n+        tabs.addChangeListener((e) -> {\n+            if (tabs.getSelectedComponent() == null) {\n+                switch (tabs.getSelectedIndex()) {\n+                    case FIRST:\n+                        tabs.setComponentAt(tabs.getSelectedIndex(), firstTab);\n+                        break;\n+                    case SECOND:\n+                        tabs.setComponentAt(tabs.getSelectedIndex(), secondTab);\n+                        break;\n+                    default:\n+                }\n+            }\n+        });\n+\n+        tabs.addTab(\"First\", null);\n+        tabs.addTab(\"Second\", null);\n+\n+        tabs.setSelectedIndex(SECOND);\n+        window.add(tabs);\n+        window.setSize(200, 200);\n+        window.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n+        window.setVisible(true);\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/JTabbedPane\/TabbedPaneBug.java","additions":107,"deletions":0,"binary":false,"changes":107,"status":"added"}]}