{"files":[{"patch":"@@ -330,5 +330,8 @@\n-       \/\/ Start searching here for a local load\n-       \/\/ mach use (faulting) trying to hoist\n-       \/\/ n might be blocker to hoisting\n-       \/\/ This assert ensures that the following code should be run\n-       assert(mb != block, \"mb should be distinct from block\");\n+       \/\/ Make sure control does not do a merge (would have to check allpaths)\n+       if (mb->num_preds() != 2) {\n+         continue;\n+       } \n+       \/\/mach is a store, hence block is the immediate dominator of mb. \n+       \/\/Due to the null-check shape of block (where its successors cannot re-join), \n+       \/\/block must be the direct predecessor of mb.       \n+       assert(get_block_for_node(mb->pred(1)) == block, \"Unexpected predecessor block\");\n@@ -347,6 +350,0 @@\n-\n-       \/\/ Make sure control does not do a merge (would have to check allpaths)\n-       if (mb->num_preds() != 2) continue;\n-\n-       \/\/ This assert ensures that the above code should only be run once\n-       assert(get_block_for_node(mb->pred(1)) == block, \"Unexpected predecessor block\");\n","filename":"src\/hotspot\/share\/opto\/lcm.cpp","additions":8,"deletions":11,"binary":false,"changes":19,"status":"modified"}]}