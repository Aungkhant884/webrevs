{"files":[{"patch":"@@ -49,2 +49,0 @@\n-  # FIXME: should this really be per platform, or should it be per toolchain type?\n-  # strip is not provided by clang; so guessing platform makes most sense.\n@@ -52,6 +50,24 @@\n-  if test \"x$OPENJDK_TARGET_OS\" = xlinux; then\n-    STRIPFLAGS=\"-g\"\n-  elif test \"x$OPENJDK_TARGET_OS\" = xmacosx; then\n-    STRIPFLAGS=\"-S\"\n-  elif test \"x$OPENJDK_TARGET_OS\" = xaix; then\n-    STRIPFLAGS=\"-X32_64\"\n+  if test \"x$STRIP\" != x; then\n+    AC_MSG_CHECKING([how to run strip])\n+\n+    # Easy cheat: Check strip variant by passing --version as an argument.\n+    # Different types of strip have varying command line syntaxes for querying their\n+    # version string, and all noisily fail if the provided version option is not\n+    # recognised.\n+    #\n+    # The actual version string or failure to execute strip are hidden by redirection\n+    # to config.log with 2>&AS_MESSAGE_LOG_FD >&AS_MESSAGE_LOG_FD\n+\n+    if $STRIP \"--version\" 2>&AS_MESSAGE_LOG_FD >&AS_MESSAGE_LOG_FD; then\n+      # strip accompanying gcc and clang use --version\n+      STRIPFLAGS=\"--strip-debug\"\n+    elif $STRIP \"-V\" 2>&AS_MESSAGE_LOG_FD >&AS_MESSAGE_LOG_FD; then\n+      # IBM strip that AIX uses only supports -V\n+      STRIPFLAGS=\"-X32_64\"\n+    else\n+      # The only strip variant left is MacOS\/Xcode strip, which does not have any\n+      # way whatsoever to be identified (lacking even basic help or version options),\n+      # so we leave it as the last fallback when all other tests have failed.\n+      STRIPFLAGS=\"-S\"\n+    fi\n+    AC_MSG_RESULT($STRIPFLAGS)\n","filename":"make\/autoconf\/flags-other.m4","additions":24,"deletions":8,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -345,0 +345,1 @@\n+      # Redirect stderr and stdout to config.log (AS_MESSAGE_LOG_FD) via merge\n","filename":"make\/autoconf\/flags.m4","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}