{"files":[{"patch":"@@ -12,1 +12,1 @@\n-keys=intermittent randomness\n+keys=intermittent randomness needs-src needs-src-jdk_javadoc\n","filename":"test\/langtools\/TEST.ROOT","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ * @key needs-src needs-src-jdk_javadoc\n@@ -56,1 +57,1 @@\n-    SnippetUtils snippets = new SnippetUtils(\"jdk.javadoc\");\n+    SnippetUtils snippets;\n@@ -59,1 +60,1 @@\n-    TestDocletExample() {\n+    TestDocletExample() throws SnippetUtils.ConfigurationException {\n@@ -61,0 +62,1 @@\n+        snippets = new SnippetUtils(\"jdk.javadoc\");\n@@ -68,0 +70,3 @@\n+        if (entryPointSnippet == null) {\n+            throw new Error(\"Cannot find snippet \\\"entry-point\\\"\");\n+        }\n@@ -92,0 +97,3 @@\n+        if (exampleSnippet == null) {\n+            throw new Error(\"Cannot find snippet \\\"Example.java\\\"\");\n+        }\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testDocletExample\/TestDocletExample.java","additions":10,"deletions":2,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+import java.io.FileNotFoundException;\n@@ -89,0 +90,10 @@\n+    \/**\n+     * Exception used to report a configuration issue that prevents\n+     * the test from executing as expected.\n+     *\/\n+    public static class ConfigurationException extends Exception {\n+        public ConfigurationException(String message) {\n+            super(message);\n+        }\n+    }\n+\n@@ -108,0 +119,2 @@\n+     * @throws ConfigurationException if the main source directory cannot be found\n+     *                                or if a module's source directory cannot be found\n@@ -109,1 +122,1 @@\n-    public SnippetUtils(String... modules) {\n+    public SnippetUtils(String... modules) throws ConfigurationException {\n@@ -129,0 +142,2 @@\n+     * @throws ConfigurationException if {@code srcDir} does not exist\n+     *                                or if a module's source directory cannot be found\n@@ -130,1 +145,2 @@\n-    public SnippetUtils(Path srcDir, PrintWriter pw, DiagnosticListener<JavaFileObject> dl, Set<String> modules) {\n+    public SnippetUtils(Path srcDir, PrintWriter pw, DiagnosticListener<JavaFileObject> dl, Set<String> modules)\n+            throws ConfigurationException {\n@@ -135,0 +151,4 @@\n+        if (!Files.exists(srcDir)) {\n+            throw new ConfigurationException(\"directory not found: \" + srcDir);\n+        }\n+\n@@ -136,0 +156,9 @@\n+\n+        for (var m : modules) {\n+            var moduleSourceDir = getModuleSourceDir(m);\n+            if (!Files.exists(moduleSourceDir)) {\n+                throw new ConfigurationException((\"cannot find source directory for \" + m\n+                        + \": \" + moduleSourceDir));\n+            }\n+        }\n+\n@@ -531,1 +560,1 @@\n-    private static Path findSourceDir() {\n+    private static Path findSourceDir() throws ConfigurationException {\n@@ -541,1 +570,1 @@\n-        throw new IllegalArgumentException(\"Cannot find src\/ from \" + testSrc);\n+        throw new ConfigurationException(\"Cannot find src\/ from \" + testSrc);\n","filename":"test\/langtools\/tools\/lib\/snippets\/SnippetUtils.java","additions":33,"deletions":4,"binary":false,"changes":37,"status":"modified"}]}