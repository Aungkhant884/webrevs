{"files":[{"patch":"@@ -180,3 +180,9 @@\n-            if (fstatfs(fd, &fbuf) == 0 && (fbuf.f_flags & MNT_LOCAL) == 0) {\n-                \/* Try fsync() in case file is not local. *\/\n-                result = fsync(fd);\n+            int errno_fcntl = errno;\n+            if (fstatfs(fd, &fbuf) == 0) {\n+                if ((fbuf.f_flags & MNT_LOCAL) == 0) {\n+                    \/* Try fsync() in case file is not local. *\/\n+                    result = fsync(fd);\n+                }\n+            } else {\n+                \/* fstatfs() failed so reinstate errno from fcntl(). *\/\n+                errno = errno_fcntl;\n","filename":"src\/java.base\/unix\/native\/libnio\/ch\/FileDispatcherImpl.c","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"}]}