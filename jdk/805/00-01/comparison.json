{"files":[{"patch":"@@ -35,18 +35,3 @@\n-  char* old_top = Atomic::load(&_top);\n-\n-  for (;;) {\n-    char* const new_top = old_top + size;\n-    if (new_top > _end) {\n-      \/\/ Not enough space left\n-      return 0;\n-    }\n-\n-    char* const prev_top = Atomic::cmpxchg(&_top, old_top, new_top);\n-    if (prev_top == old_top) {\n-      \/\/ Success\n-      return old_top;\n-    }\n-\n-    \/\/ Retry\n-    old_top = prev_top;\n-  }\n+  char* const addr = Atomic::fetch_and_add(&_top, size);\n+  assert(addr + size <= _end, \"Allocation should never fail\");\n+  return addr;\n","filename":"src\/hotspot\/share\/gc\/z\/zForwardingAllocator.inline.hpp","additions":3,"deletions":18,"binary":false,"changes":21,"status":"modified"}]}