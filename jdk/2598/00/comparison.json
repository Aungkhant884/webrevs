{"files":[{"patch":"@@ -275,2 +275,0 @@\n-java\/awt\/print\/PrinterJob\/Margins.java 8196301 windows-all,macosx-all\n-java\/awt\/PrintJob\/PrinterException.java 8196301 windows-all,macosx-all\n","filename":"test\/jdk\/ProblemList.txt","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -42,1 +42,0 @@\n-            robot.waitForIdle();\n@@ -46,1 +45,2 @@\n-           });\n+            robot.waitForIdle();\n+        });\n","filename":"test\/jdk\/java\/awt\/PrintJob\/PrinterException.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -40,0 +40,2 @@\n+import javax.print.PrintService;\n+import javax.print.PrintServiceLookup;\n@@ -50,15 +52,0 @@\n-        Thread t = new Thread (() -> {\n-            robot.waitForIdle();\n-            robot.delay(5000);\n-            robot.keyPress(KeyEvent.VK_ENTER);\n-            robot.keyRelease(KeyEvent.VK_ENTER);\n-            robot.waitForIdle();\n-            robot.delay(5000);\n-            robot.keyPress(KeyEvent.VK_ENTER);\n-            robot.keyRelease(KeyEvent.VK_ENTER);\n-            robot.waitForIdle();\n-            robot.delay(5000);\n-            robot.keyPress(KeyEvent.VK_ENTER);\n-            robot.keyRelease(KeyEvent.VK_ENTER);\n-        });\n-\n@@ -66,0 +53,14 @@\n+        if (job.getPrintService() == null) {\n+            System.out.println(\"No printers. Test cannot continue\");\n+            return;\n+        }\n+        PrintService psrv = PrintServiceLookup.lookupDefaultPrintService();\n+        System.out.println(\"PrintService \" + psrv.getName());\n+        if (psrv.getName().contains(\"Print to PDF\") ||\n+            psrv.getName().contains(\"OneNote\") ||\n+            psrv.getName().contains(\"XPS Document Writer\")) {\n+            System.out.println(\"Please use real printer.\");\n+            System.out.println(\"Please avoid Microsoft Print to PDF or OneNote printer or XPS Writer\");\n+            return;\n+        }\n+\n@@ -71,1 +72,7 @@\n-        t.start();\n+\n+        Thread t1 = new Thread(() -> {\n+            robot.delay(2000);\n+            robot.keyPress(KeyEvent.VK_ENTER);\n+            robot.keyRelease(KeyEvent.VK_ENTER);\n+        });\n+        t1.start();\n@@ -82,0 +89,8 @@\n+\n+        Thread t2 = new Thread(() -> {\n+            robot.delay(2000);\n+            robot.keyPress(KeyEvent.VK_ENTER);\n+            robot.keyRelease(KeyEvent.VK_ENTER);\n+        });\n+        t2.start();\n+\n@@ -97,0 +112,8 @@\n+\n+        Thread t3 = new Thread(() -> {\n+            robot.delay(2000);\n+            robot.keyPress(KeyEvent.VK_ENTER);\n+            robot.keyRelease(KeyEvent.VK_ENTER);\n+        });\n+        t3.start();\n+\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/Margins.java","additions":39,"deletions":16,"binary":false,"changes":55,"status":"modified"}]}