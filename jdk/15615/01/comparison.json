{"files":[{"patch":"@@ -353,1 +353,1 @@\n-            ks = new AbstractSet<K>() {\n+            ks = new AbstractSet<>() {\n@@ -355,15 +355,1 @@\n-                    return new Iterator<K>() {\n-                        private Iterator<Entry<K,V>> i = entrySet().iterator();\n-\n-                        public boolean hasNext() {\n-                            return i.hasNext();\n-                        }\n-\n-                        public K next() {\n-                            return i.next().getKey();\n-                        }\n-\n-                        public void remove() {\n-                            i.remove();\n-                        }\n-                    };\n+                    return new KeyIterator();\n@@ -412,1 +398,1 @@\n-            vals = new AbstractCollection<V>() {\n+            vals = new AbstractCollection<>() {\n@@ -414,15 +400,1 @@\n-                    return new Iterator<V>() {\n-                        private Iterator<Entry<K,V>> i = entrySet().iterator();\n-\n-                        public boolean hasNext() {\n-                            return i.hasNext();\n-                        }\n-\n-                        public V next() {\n-                            return i.next().getValue();\n-                        }\n-\n-                        public void remove() {\n-                            i.remove();\n-                        }\n-                    };\n+                    return new ValueIterator();\n@@ -927,0 +899,34 @@\n+\n+    abstract sealed class AbstractIterator<T> implements Iterator<T> {\n+\n+        protected final Iterator<Entry<K,V>> i = entrySet().iterator();\n+\n+        @Override\n+        public boolean hasNext() {\n+            return i.hasNext();\n+        }\n+\n+        @Override\n+        public void remove() {\n+            i.remove();\n+        }\n+\n+    }\n+\n+    final class KeyIterator extends AbstractIterator<K> {\n+\n+        @Override\n+        public K next() {\n+            return i.next().getKey();\n+        }\n+\n+    }\n+\n+    final class ValueIterator extends AbstractIterator<V> {\n+\n+        @Override\n+        public V next() {\n+            return i.next().getValue();\n+        }\n+\n+    }\n","filename":"src\/java.base\/share\/classes\/java\/util\/AbstractMap.java","additions":38,"deletions":32,"binary":false,"changes":70,"status":"modified"}]}