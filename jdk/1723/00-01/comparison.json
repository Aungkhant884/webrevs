{"files":[{"patch":"@@ -3808,1 +3808,3 @@\n-    VMError::test_error_handler();\n+    if (ErrorHandlerTest != 0) {\n+      VMError::controlled_crash(ErrorHandlerTest);\n+    }\n","filename":"src\/hotspot\/share\/prims\/jni.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -501,1 +501,1 @@\n-          \"determines which error to provoke. See test_error_handler() \"    \\\n+          \"determines which error to provoke. See controlled_crash() \"      \\\n@@ -507,1 +507,1 @@\n-          \"crash). see test_error_handler() in vmError.cpp\")                \\\n+          \"crash). see controlled_crash() in vmError.cpp\")                  \\\n","filename":"src\/hotspot\/share\/runtime\/globals.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -241,1 +241,0 @@\n-static char _detail_msg[1024];\n@@ -246,0 +245,1 @@\n+    static char _detail_msg[1024];\n@@ -250,1 +250,3 @@\n-      jio_vsnprintf(_detail_msg, sizeof(_detail_msg), detail_fmt, detail_args);\n+      va_list detail_args_copy;\n+      va_copy(detail_args_copy, detail_args);\n+      jio_vsnprintf(_detail_msg, sizeof(_detail_msg), detail_fmt, detail_args_copy);\n","filename":"src\/hotspot\/share\/utilities\/debug.cpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -396,2 +396,0 @@\n-DEBUG_ONLY(static void controlled_crash(int how));\n-\n@@ -1770,4 +1768,0 @@\n-void VMError::test_error_handler() {\n-  controlled_crash(ErrorHandlerTest);\n-}\n-\n@@ -1779,2 +1773,1 @@\n-void controlled_crash(int how) {\n-  if (how == 0) return;\n+void VMError::controlled_crash(int how) {\n@@ -1818,1 +1811,1 @@\n-  tty->print_cr(\"VMError::controlled_crash: survived intentional crash. Did you suppress the assert?\");\n+  tty->print_cr(\"controlled_crash: survived intentional crash. Did you suppress the assert?\");\n","filename":"src\/hotspot\/share\/utilities\/vmError.cpp","additions":2,"deletions":9,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -186,2 +186,1 @@\n-  \/\/ Test vmassert(), fatal(), guarantee(), etc.\n-  DEBUG_ONLY(static void test_error_handler();)\n+  DEBUG_ONLY(static void controlled_crash(int how);)\n","filename":"src\/hotspot\/share\/utilities\/vmError.hpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"}]}