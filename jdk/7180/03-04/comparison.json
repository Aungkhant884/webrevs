{"files":[{"patch":"@@ -100,2 +100,1 @@\n-    \/\/ Prints and verifies MethodParameters attribute using reflection.\n-    private void verifyMethodParams(boolean expectedPresent, String... expectedNames) throws Throwable {\n+    private Parameter[] getTargetClassParameters() throws ClassNotFoundException {\n@@ -107,2 +106,3 @@\n-        if (expectedPresent) {\n-            assertEquals(expectedNames.length, params.length);\n+        for (int i = 0; i < params.length; i++) {\n+            log(\"  \" + i + \": \" + params[i].getName()\n+                    + \" (\" + (params[i].isNamePresent() ? \"present\" : \"absent\") + \")\");\n@@ -110,0 +110,7 @@\n+        return params;\n+    }\n+\n+    \/\/ Verifies MethodParameters attribute is present and contains the expected values.\n+    private void verifyPresentMethodParams(String... expectedNames) throws Throwable {\n+        Parameter[] params = getTargetClassParameters();\n+        assertEquals(expectedNames.length, params.length);\n@@ -111,5 +118,10 @@\n-            log(\"  \" + i + \": \" + params[i].getName());\n-            assertEquals(expectedPresent, params[i].isNamePresent());\n-            if (expectedPresent) {\n-                assertEquals(expectedNames[i], params[i].getName());\n-            }\n+            assertTrue(params[i].isNamePresent());\n+            assertEquals(expectedNames[i], params[i].getName());\n+        }\n+    }\n+\n+    \/\/ Verifies MethodParameters attribute is absent.\n+    private void verifyAbsentMethodParams() throws Throwable {\n+        Parameter[] params = getTargetClassParameters();\n+        for (int i = 0; i < params.length; i++) {\n+            assertTrue(!params[i].isNamePresent());\n@@ -177,1 +189,1 @@\n-        verifyMethodParams(true, \"intParam1\", \"stringParam1\");\n+        verifyPresentMethodParams(\"intParam1\", \"stringParam1\");\n@@ -198,1 +210,1 @@\n-            verifyMethodParams(true, \"intParam2\", \"stringParam2\");\n+            verifyPresentMethodParams(\"intParam2\", \"stringParam2\");\n@@ -211,1 +223,1 @@\n-            verifyMethodParams(false);\n+            verifyAbsentMethodParams();\n","filename":"test\/jdk\/java\/lang\/instrument\/RetransformWithMethodParametersTest.java","additions":24,"deletions":12,"binary":false,"changes":36,"status":"modified"}]}