{"files":[{"patch":"@@ -1323,0 +1323,7 @@\n+#if INCLUDE_JVMCI\n+  if (comp->is_jvmci() && !JVMCI::can_initialize_JVMCI()) {\n+    \/\/ JVMCI compilation is not yet initializable.\n+    return nullptr;\n+  }\n+#endif\n+\n@@ -1351,6 +1358,0 @@\n-#if INCLUDE_JVMCI\n-  if (comp->is_jvmci() && !JVMCI::can_initialize_JVMCI()) {\n-    return nullptr;\n-  }\n-#endif\n-\n","filename":"src\/hotspot\/share\/compiler\/compileBroker.cpp","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -304,1 +304,1 @@\n-\n+private:\n@@ -314,0 +314,1 @@\n+public:\n","filename":"src\/hotspot\/share\/compiler\/compileBroker.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -59,0 +59,5 @@\n+  if (UseJVMCINativeLibrary) {\n+    \/\/ Initializing libjvmci does not execute Java code so\n+    \/\/ can be done any time.\n+    return true;\n+  }\n","filename":"src\/hotspot\/share\/jvmci\/jvmci.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -696,1 +696,1 @@\n-  bool force_JVMCI_intialization = false;\n+  bool force_JVMCI_initialization = false;\n@@ -700,7 +700,1 @@\n-    force_JVMCI_intialization = EagerJVMCI || JVMCIPrintProperties || JVMCILibDumpJNIConfig;\n-\n-    if (!force_JVMCI_intialization) {\n-      \/\/ 8145270: Force initialization of JVMCI runtime otherwise requests for blocking\n-      \/\/ compilations via JVMCI will not actually block until JVMCI is initialized.\n-      force_JVMCI_intialization = UseJVMCICompiler && (!UseInterpreter || !BackgroundCompilation);\n-    }\n+    force_JVMCI_initialization = EagerJVMCI || JVMCIPrintProperties || JVMCILibDumpJNIConfig;\n@@ -710,5 +704,1 @@\n-  \/\/ Postpone completion of compiler initialization to after JVMCI\n-  \/\/ is initialized to avoid timeouts of blocking compilations.\n-  if (JVMCI_ONLY(!force_JVMCI_intialization) NOT_JVMCI(true)) {\n-    CompileBroker::compilation_init_phase2();\n-  }\n+  CompileBroker::compilation_init_phase2();\n@@ -757,1 +747,1 @@\n-  if (force_JVMCI_intialization) {\n+  if (force_JVMCI_initialization) {\n@@ -759,1 +749,0 @@\n-    CompileBroker::compilation_init_phase2();\n","filename":"src\/hotspot\/share\/runtime\/threads.cpp","additions":4,"deletions":15,"binary":false,"changes":19,"status":"modified"}]}