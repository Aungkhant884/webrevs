{"files":[{"patch":"@@ -186,1 +186,1 @@\n-  MergeMemNode* mem = MergeMemNode::make(in_mem);\n+  MergeMemNode* mem = phase->transform(MergeMemNode::make(in_mem))->as_MergeMem();\n@@ -370,1 +370,1 @@\n-                                        MergeMemNode* mm,\n+                                        Node* mem,\n@@ -382,1 +382,1 @@\n-    mm = mm->clone()->as_MergeMem();\n+    MergeMemNode* mm = MergeMemNode::make(mem);\n@@ -395,1 +395,1 @@\n-    } else if(can_reshape) {\n+    } else if (can_reshape) {\n@@ -408,1 +408,1 @@\n-                                         MergeMemNode* mm,\n+                                         Node* mem,\n@@ -420,1 +420,1 @@\n-    mm = mm->clone()->as_MergeMem();\n+    MergeMemNode* mm = MergeMemNode::make(mem);\n@@ -435,1 +435,1 @@\n-    } else if(can_reshape) {\n+    } else if (can_reshape) {\n@@ -567,5 +567,1 @@\n-\n-  Node *in_mem = in(TypeFunc::Memory);\n-  if (!in_mem->is_MergeMem()) {\n-    in_mem = MergeMemNode::make(in_mem);\n-  }\n+  Node* in_mem = in(TypeFunc::Memory);\n@@ -583,1 +579,1 @@\n-                                         in_mem->as_MergeMem(),\n+                                         in_mem,\n@@ -589,1 +585,1 @@\n-                                           in_mem->as_MergeMem(),\n+                                           in_mem,\n","filename":"src\/hotspot\/share\/opto\/arraycopynode.cpp","additions":10,"deletions":14,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -103,1 +103,1 @@\n-                           MergeMemNode* mm,\n+                           Node* mem,\n@@ -108,1 +108,1 @@\n-                            MergeMemNode* mm,\n+                            Node* mem,\n","filename":"src\/hotspot\/share\/opto\/arraycopynode.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2306,4 +2306,1 @@\n-          igvn->hash_delete(hook);\n-          for (uint i = 1; i < hook->req(); i++) {\n-            hook->set_req(i, NULL);\n-          }\n+          igvn->_worklist.remove(hook);\n@@ -2311,0 +2308,1 @@\n+        hook->destruct();\n","filename":"src\/hotspot\/share\/opto\/cfgnode.cpp","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1131,2 +1131,1 @@\n-  if (_modified_nodes != NULL && !_inlining_incrementally &&\n-      n->outcnt() != 0 && !n->is_Con()) {\n+  if (_modified_nodes != NULL && !_inlining_incrementally && !n->is_Con()) {\n","filename":"src\/hotspot\/share\/opto\/compile.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -406,1 +406,0 @@\n-    hook->del_req(0);  \/\/ Just yank bogus edge\n","filename":"src\/hotspot\/share\/opto\/convertnode.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -331,5 +331,1 @@\n-    igvn->remove_dead_node(hook);\n-  } else {\n-    for (int i = 0; i < 4; i++) {\n-      hook->set_req(i, NULL);\n-    }\n+    igvn->_worklist.remove(hook);\n@@ -337,0 +333,1 @@\n+  hook->destruct();\n@@ -916,3 +913,1 @@\n-        phase->is_IterGVN()->remove_dead_node(hook);\n-      } else {\n-        hook->set_req(0, NULL);   \/\/ Just yank bogus edge during Parse phase\n+        phase->is_IterGVN()->_worklist.remove(hook);\n@@ -920,0 +915,1 @@\n+      hook->destruct();\n@@ -972,3 +968,1 @@\n-    phase->is_IterGVN()->remove_dead_node(hook);\n-  } else {\n-    hook->set_req(0, NULL);       \/\/ Just yank bogus edge during Parse phase\n+    phase->is_IterGVN()->_worklist.remove(hook);\n@@ -976,0 +970,1 @@\n+  hook->destruct();\n@@ -1089,3 +1084,1 @@\n-        phase->is_IterGVN()->remove_dead_node(hook);\n-      } else {\n-        hook->set_req(0, NULL);   \/\/ Just yank bogus edge during Parse phase\n+        phase->is_IterGVN()->_worklist.remove(hook);\n@@ -1093,0 +1086,1 @@\n+      hook->destruct();\n@@ -1145,3 +1139,1 @@\n-    phase->is_IterGVN()->remove_dead_node(hook);\n-  } else {\n-    hook->set_req(0, NULL);       \/\/ Just yank bogus edge during Parse phase\n+    phase->is_IterGVN()->_worklist.remove(hook);\n@@ -1149,0 +1141,1 @@\n+  hook->destruct();\n","filename":"src\/hotspot\/share\/opto\/divnode.cpp","additions":10,"deletions":17,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -1002,1 +1002,0 @@\n-    hook->del_req(0); \/\/ Just yank bogus edge\n","filename":"src\/hotspot\/share\/opto\/ifnode.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1403,2 +1403,0 @@\n-  Node *hook = new Node(6);\n-\n@@ -1694,3 +1692,0 @@\n-  \/\/ Free up intermediate goo\n-  _igvn.remove_dead_node(hook);\n-\n","filename":"src\/hotspot\/share\/opto\/loopnode.cpp","additions":0,"deletions":5,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -332,1 +332,1 @@\n-    MergeMemNode* mergemen = MergeMemNode::make(mem);\n+    MergeMemNode* mergemen = _igvn.transform(MergeMemNode::make(mem))->as_MergeMem();\n@@ -372,1 +372,1 @@\n-      MergeMemNode* mergemen = MergeMemNode::make(mem);\n+      MergeMemNode* mergemen = _igvn.transform(MergeMemNode::make(mem))->as_MergeMem();\n","filename":"src\/hotspot\/share\/opto\/macro.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1402,1 +1402,0 @@\n-      igvn->C->remove_modified_node(dead);\n@@ -1438,0 +1437,1 @@\n+      igvn->C->remove_modified_node(dead);\n","filename":"src\/hotspot\/share\/opto\/node.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1072,1 +1072,1 @@\n-    if (n->outcnt() != 0 && !n->is_Con() && !_worklist.member(n)) {\n+    if (!n->is_Con() && !_worklist.member(n)) {\n@@ -1074,1 +1074,1 @@\n-      assert(false, \"modified node is not on IGVN._worklist\");\n+      fatal(\"modified node is not on IGVN._worklist\");\n@@ -1086,1 +1086,1 @@\n-    if (n->outcnt() != 0 && !n->is_Con()) { \/\/ skip dead and Con nodes\n+    if (!n->is_Con()) { \/\/ skip Con nodes\n@@ -1088,1 +1088,1 @@\n-      assert(false, \"modified node was not processed by IGVN.transform_old()\");\n+      fatal(\"modified node was not processed by IGVN.transform_old()\");\n","filename":"src\/hotspot\/share\/opto\/phaseX.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}