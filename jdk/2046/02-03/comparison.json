{"files":[{"patch":"@@ -109,1 +109,2 @@\n-      G1RP_PS_CodeCache_oops_do, G1RP_PS_refProcessor_oops_do);\n+                                            G1RP_PS_CodeCache_oops_do,\n+                                            G1RP_PS_refProcessor_oops_do);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1RootProcessor.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -372,1 +372,2 @@\n-      uint skipped[], size_t skipped_size) {\n+                                            uint skipped[],\n+                                            size_t skipped_size) {\n@@ -374,0 +375,1 @@\n+  \/\/ all non-skipped tasks are claimed\n@@ -386,0 +388,6 @@\n+  \/\/ all skipped tasks are *not* claimed\n+  for (size_t i = 0; i < skipped_size; ++i) {\n+    auto task_index = skipped[i];\n+    assert(task_index < _n_tasks, \"Array in range.\");\n+    assert(_tasks[task_index] == 0, \"%d is both claimed and skipped.\", task_index);\n+  }\n","filename":"src\/hotspot\/share\/gc\/shared\/workgroup.cpp","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+#include \"metaprogramming\/enableIf.hpp\"\n@@ -311,2 +312,1 @@\n-  void all_tasks_completed_impl(uint n_threads,\n-        uint skipped[], size_t skipped_size);\n+  void all_tasks_completed_impl(uint n_threads, uint skipped[], size_t skipped_size);\n@@ -330,4 +330,5 @@\n-  \/\/ The calling thread asserts that it has attempted to claim all the\n-  \/\/ tasks that it will try to claim.  Every thread in the parallel task\n-  \/\/ must execute this.  (When the last thread does so, the task array is\n-  \/\/ cleared.)\n+  \/\/ The calling thread asserts that it has attempted to claim all the tasks\n+  \/\/ that it will try to claim.  Tasks that is meant to be skipped must be\n+  \/\/ explicitly passed as extra arguments using the variadic version below.\n+  \/\/ Every thread in the parallel task must execute this.  (When the last\n+  \/\/ thread does so, the task array is cleared.)\n@@ -336,1 +337,0 @@\n-  \/\/ followed by vararg skipped tasks\n@@ -341,0 +341,1 @@\n+  \/\/ Augmented by variadic args, each for a skipped task.\n","filename":"src\/hotspot\/share\/gc\/shared\/workgroup.hpp","additions":8,"deletions":7,"binary":false,"changes":15,"status":"modified"}]}