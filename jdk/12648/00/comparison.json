{"files":[{"patch":"@@ -8932,20 +8932,0 @@\n-instruct cmpU_loop(cmpOpU cmp, iRegI op1, iRegI op2, label lbl)\n-%{\n-  \/\/ Same match rule as `far_cmpU_loop'.\n-  match(CountedLoopEnd cmp (CmpU op1 op2));\n-\n-  effect(USE lbl);\n-\n-  ins_cost(BRANCH_COST);\n-\n-  format %{ \"b$cmp  $op1, $op2, $lbl\\t#@cmpU_loop\" %}\n-\n-  ins_encode %{\n-    __ cmp_branch($cmp$$cmpcode | C2_MacroAssembler::unsigned_branch_mask, as_Register($op1$$reg),\n-                  as_Register($op2$$reg), *($lbl$$label));\n-  %}\n-\n-  ins_pipe(pipe_cmp_branch);\n-  ins_short_branch(1);\n-%}\n-\n@@ -8972,19 +8952,0 @@\n-instruct cmpL_loop(cmpOp cmp, iRegL op1, iRegL op2, label lbl)\n-%{\n-  \/\/ Same match rule as `far_cmpL_loop'.\n-  match(CountedLoopEnd cmp (CmpL op1 op2));\n-\n-  effect(USE lbl);\n-\n-  ins_cost(BRANCH_COST);\n-\n-  format %{ \"b$cmp  $op1, $op2, $lbl\\t#@cmpL_loop\" %}\n-\n-  ins_encode %{\n-    __ cmp_branch($cmp$$cmpcode, as_Register($op1$$reg), as_Register($op2$$reg), *($lbl$$label));\n-  %}\n-\n-  ins_pipe(pipe_cmp_branch);\n-  ins_short_branch(1);\n-%}\n-\n@@ -9011,19 +8972,0 @@\n-instruct cmpUL_loop(cmpOpU cmp, iRegL op1, iRegL op2, label lbl)\n-%{\n-  \/\/ Same match rule as `far_cmpUL_loop'.\n-  match(CountedLoopEnd cmp (CmpUL op1 op2));\n-\n-  effect(USE lbl);\n-\n-  ins_cost(BRANCH_COST);\n-  format %{ \"b$cmp  $op1, $op2, $lbl\\t#@cmpUL_loop\" %}\n-\n-  ins_encode %{\n-    __ cmp_branch($cmp$$cmpcode | C2_MacroAssembler::unsigned_branch_mask, as_Register($op1$$reg),\n-                  as_Register($op2$$reg), *($lbl$$label));\n-  %}\n-\n-  ins_pipe(pipe_cmp_branch);\n-  ins_short_branch(1);\n-%}\n-\n@@ -9051,20 +8993,0 @@\n-instruct cmpP_loop(cmpOpU cmp, iRegP op1, iRegP op2, label lbl)\n-%{\n-  \/\/ Same match rule as `far_cmpP_loop'.\n-  match(CountedLoopEnd cmp (CmpP op1 op2));\n-\n-  effect(USE lbl);\n-\n-  ins_cost(BRANCH_COST);\n-\n-  format %{ \"b$cmp  $op1, $op2, $lbl\\t#@cmpP_loop\" %}\n-\n-  ins_encode %{\n-    __ cmp_branch($cmp$$cmpcode | C2_MacroAssembler::unsigned_branch_mask, as_Register($op1$$reg),\n-                  as_Register($op2$$reg), *($lbl$$label));\n-  %}\n-\n-  ins_pipe(pipe_cmp_branch);\n-  ins_short_branch(1);\n-%}\n-\n@@ -9092,20 +9014,0 @@\n-instruct cmpN_loop(cmpOpU cmp, iRegN op1, iRegN op2, label lbl)\n-%{\n-  \/\/ Same match rule as `far_cmpN_loop'.\n-  match(CountedLoopEnd cmp (CmpN op1 op2));\n-\n-  effect(USE lbl);\n-\n-  ins_cost(BRANCH_COST);\n-\n-  format %{ \"b$cmp  $op1, $op2, $lbl\\t#@cmpN_loop\" %}\n-\n-  ins_encode %{\n-    __ cmp_branch($cmp$$cmpcode | C2_MacroAssembler::unsigned_branch_mask, as_Register($op1$$reg),\n-                  as_Register($op2$$reg), *($lbl$$label));\n-  %}\n-\n-  ins_pipe(pipe_cmp_branch);\n-  ins_short_branch(1);\n-%}\n-\n@@ -9131,17 +9033,0 @@\n-instruct cmpF_loop(cmpOp cmp, fRegF op1, fRegF op2, label lbl)\n-%{\n-  \/\/ Same match rule as `far_cmpF_loop'.\n-  match(CountedLoopEnd cmp (CmpF op1 op2));\n-  effect(USE lbl);\n-\n-  ins_cost(XFER_COST + BRANCH_COST);\n-  format %{ \"float_b$cmp $op1, $op2, $lbl\\t#@cmpF_loop\"%}\n-\n-  ins_encode %{\n-    __ float_cmp_branch($cmp$$cmpcode, as_FloatRegister($op1$$reg), as_FloatRegister($op2$$reg), *($lbl$$label));\n-  %}\n-\n-  ins_pipe(pipe_class_compare);\n-  ins_short_branch(1);\n-%}\n-\n@@ -9167,18 +9052,0 @@\n-instruct cmpD_loop(cmpOp cmp, fRegD op1, fRegD op2, label lbl)\n-%{\n-  \/\/ Same match rule as `far_cmpD_loop'.\n-  match(CountedLoopEnd cmp (CmpD op1 op2));\n-  effect(USE lbl);\n-\n-  ins_cost(XFER_COST + BRANCH_COST);\n-  format %{ \"double_b$cmp $op1, $op2, $lbl\\t#@cmpD_loop\"%}\n-\n-  ins_encode %{\n-    __ float_cmp_branch($cmp$$cmpcode | C2_MacroAssembler::double_branch_mask, as_FloatRegister($op1$$reg),\n-                        as_FloatRegister($op2$$reg), *($lbl$$label));\n-  %}\n-\n-  ins_pipe(pipe_class_compare);\n-  ins_short_branch(1);\n-%}\n-\n@@ -9243,20 +9110,0 @@\n-instruct cmpUEqNeLeGt_reg_imm0_loop(cmpOpUEqNeLeGt cmp, iRegI op1, immI0 zero, label lbl)\n-%{\n-  \/\/ Same match rule as `far_cmpUEqNeLeGt_reg_imm0_loop'.\n-  match(CountedLoopEnd cmp (CmpU op1 zero));\n-\n-  effect(USE op1, USE lbl);\n-\n-  ins_cost(BRANCH_COST);\n-\n-  format %{ \"b$cmp  $op1, zr, $lbl\\t#@cmpUEqNeLeGt_reg_imm0_loop\" %}\n-\n-\n-  ins_encode %{\n-    __ enc_cmpUEqNeLeGt_imm0_branch($cmp$$cmpcode, as_Register($op1$$reg), *($lbl$$label));\n-  %}\n-\n-  ins_pipe(pipe_cmpz_branch);\n-  ins_short_branch(1);\n-%}\n-\n@@ -9283,19 +9130,0 @@\n-instruct cmpL_reg_imm0_loop(cmpOp cmp, iRegL op1, immL0 zero, label lbl)\n-%{\n-  \/\/ Same match rule as `far_cmpL_reg_imm0_loop'.\n-  match(CountedLoopEnd cmp (CmpL op1 zero));\n-\n-  effect(USE op1, USE lbl);\n-\n-  ins_cost(BRANCH_COST);\n-\n-  format %{ \"b$cmp  $op1, zr, $lbl\\t#@cmpL_reg_imm0_loop\" %}\n-\n-  ins_encode %{\n-    __ cmp_branch($cmp$$cmpcode, as_Register($op1$$reg), zr, *($lbl$$label));\n-  %}\n-\n-  ins_pipe(pipe_cmpz_branch);\n-  ins_short_branch(1);\n-%}\n-\n@@ -9322,19 +9150,0 @@\n-instruct cmpULEqNeLeGt_reg_imm0_loop(cmpOpUEqNeLeGt cmp, iRegL op1, immL0 zero, label lbl)\n-%{\n-  \/\/ Same match rule as `far_cmpULEqNeLeGt_reg_imm0_loop'.\n-  match(CountedLoopEnd cmp (CmpUL op1 zero));\n-\n-  effect(USE op1, USE lbl);\n-\n-  ins_cost(BRANCH_COST);\n-\n-  format %{ \"b$cmp  $op1, zr, $lbl\\t#@cmpULEqNeLeGt_reg_imm0_loop\" %}\n-\n-  ins_encode %{\n-    __ enc_cmpUEqNeLeGt_imm0_branch($cmp$$cmpcode, as_Register($op1$$reg), *($lbl$$label));\n-  %}\n-\n-  ins_pipe(pipe_cmpz_branch);\n-  ins_short_branch(1);\n-%}\n-\n@@ -9358,16 +9167,0 @@\n-instruct cmpP_imm0_loop(cmpOpEqNe cmp, iRegP op1, immP0 zero, label lbl) %{\n-  \/\/ Same match rule as `far_cmpP_reg_imm0_loop'.\n-  match(CountedLoopEnd cmp (CmpP op1 zero));\n-  effect(USE lbl);\n-\n-  ins_cost(BRANCH_COST);\n-  format %{ \"b$cmp   $op1, zr, $lbl\\t#@cmpP_imm0_loop\" %}\n-\n-  ins_encode %{\n-    __ enc_cmpEqNe_imm0_branch($cmp$$cmpcode, as_Register($op1$$reg), *($lbl$$label));\n-  %}\n-\n-  ins_pipe(pipe_cmpz_branch);\n-  ins_short_branch(1);\n-%}\n-\n@@ -9392,17 +9185,0 @@\n-instruct cmpN_imm0_loop(cmpOpEqNe cmp, iRegN op1, immN0 zero, label lbl) %{\n-  \/\/ Same match rule as `far_cmpN_reg_imm0_loop'.\n-  match(CountedLoopEnd cmp (CmpN op1 zero));\n-  effect(USE lbl);\n-\n-  ins_cost(BRANCH_COST);\n-\n-  format %{ \"b$cmp  $op1, zr, $lbl\\t#@cmpN_imm0_loop\" %}\n-\n-  ins_encode %{\n-    __ enc_cmpEqNe_imm0_branch($cmp$$cmpcode, as_Register($op1$$reg), *($lbl$$label));\n-  %}\n-\n-  ins_pipe(pipe_cmpz_branch);\n-  ins_short_branch(1);\n-%}\n-\n@@ -9426,16 +9202,0 @@\n-instruct cmpP_narrowOop_imm0_loop(cmpOpEqNe cmp, iRegN op1, immP0 zero, label lbl) %{\n-  \/\/ Same match rule as `far_cmpP_narrowOop_imm0_loop'.\n-  match(CountedLoopEnd cmp (CmpP (DecodeN op1) zero));\n-  effect(USE lbl);\n-\n-  ins_cost(BRANCH_COST);\n-  format %{ \"b$cmp   $op1, zr, $lbl\\t#@cmpP_narrowOop_imm0_loop\" %}\n-\n-  ins_encode %{\n-    __ enc_cmpEqNe_imm0_branch($cmp$$cmpcode, as_Register($op1$$reg), *($lbl$$label));\n-  %}\n-\n-  ins_pipe(pipe_cmpz_branch);\n-  ins_short_branch(1);\n-%}\n-\n@@ -9505,15 +9265,0 @@\n-instruct far_cmpU_loop(cmpOpU cmp, iRegI op1, iRegI op2, label lbl) %{\n-  match(CountedLoopEnd cmp (CmpU op1 op2));\n-  effect(USE lbl);\n-\n-  ins_cost(BRANCH_COST * 2);\n-  format %{ \"far_b$cmp $op1, $op2, $lbl\\t#@far_cmpU_loop\" %}\n-\n-  ins_encode %{\n-    __ cmp_branch($cmp$$cmpcode | C2_MacroAssembler::unsigned_branch_mask, as_Register($op1$$reg),\n-                       as_Register($op2$$reg), *($lbl$$label), \/* is_far *\/ true);\n-  %}\n-\n-  ins_pipe(pipe_cmp_branch);\n-%}\n-\n@@ -9534,14 +9279,0 @@\n-instruct far_cmpLloop(cmpOp cmp, iRegL op1, iRegL op2, label lbl) %{\n-  match(CountedLoopEnd cmp (CmpL op1 op2));\n-  effect(USE lbl);\n-\n-  ins_cost(BRANCH_COST * 2);\n-  format %{ \"far_b$cmp  $op1, $op2, $lbl\\t#@far_cmpL_loop\" %}\n-\n-  ins_encode %{\n-    __ cmp_branch($cmp$$cmpcode, as_Register($op1$$reg), as_Register($op2$$reg), *($lbl$$label), \/* is_far *\/ true);\n-  %}\n-\n-  ins_pipe(pipe_cmp_branch);\n-%}\n-\n@@ -9563,15 +9294,0 @@\n-instruct far_cmpUL_loop(cmpOpU cmp, iRegL op1, iRegL op2, label lbl) %{\n-  match(CountedLoopEnd cmp (CmpUL op1 op2));\n-  effect(USE lbl);\n-\n-  ins_cost(BRANCH_COST * 2);\n-  format %{ \"far_b$cmp  $op1, $op2, $lbl\\t#@far_cmpUL_loop\" %}\n-\n-  ins_encode %{\n-    __ cmp_branch($cmp$$cmpcode | C2_MacroAssembler::unsigned_branch_mask, as_Register($op1$$reg),\n-                       as_Register($op2$$reg), *($lbl$$label), \/* is_far *\/ true);\n-  %}\n-\n-  ins_pipe(pipe_cmp_branch);\n-%}\n-\n@@ -9596,18 +9312,0 @@\n-instruct far_cmpP_loop(cmpOpU cmp, iRegP op1, iRegP op2, label lbl)\n-%{\n-  match(CountedLoopEnd cmp (CmpP op1 op2));\n-\n-  effect(USE lbl);\n-\n-  ins_cost(BRANCH_COST * 2);\n-\n-  format %{ \"far_b$cmp  $op1, $op2, $lbl\\t#@far_cmpP_loop\" %}\n-\n-  ins_encode %{\n-    __ cmp_branch($cmp$$cmpcode | C2_MacroAssembler::unsigned_branch_mask, as_Register($op1$$reg),\n-                       as_Register($op2$$reg), *($lbl$$label), \/* is_far *\/ true);\n-  %}\n-\n-  ins_pipe(pipe_cmp_branch);\n-%}\n-\n@@ -9632,18 +9330,0 @@\n-instruct far_cmpN_loop(cmpOpU cmp, iRegN op1, iRegN op2, label lbl)\n-%{\n-  match(CountedLoopEnd cmp (CmpN op1 op2));\n-\n-  effect(USE lbl);\n-\n-  ins_cost(BRANCH_COST * 2);\n-\n-  format %{ \"far_b$cmp  $op1, $op2, $lbl\\t#@far_cmpN_loop\" %}\n-\n-  ins_encode %{\n-    __ cmp_branch($cmp$$cmpcode | C2_MacroAssembler::unsigned_branch_mask, as_Register($op1$$reg),\n-                  as_Register($op2$$reg), *($lbl$$label), \/* is_far *\/ true);\n-  %}\n-\n-  ins_pipe(pipe_cmp_branch);\n-%}\n-\n@@ -9668,16 +9348,0 @@\n-instruct far_cmpF_loop(cmpOp cmp, fRegF op1, fRegF op2, label lbl)\n-%{\n-  match(CountedLoopEnd cmp (CmpF op1 op2));\n-  effect(USE lbl);\n-\n-  ins_cost(XFER_COST + BRANCH_COST * 2);\n-  format %{ \"far_float_b$cmp $op1, $op2, $lbl\\t#@far_cmpF_loop\"%}\n-\n-  ins_encode %{\n-    __ float_cmp_branch($cmp$$cmpcode, as_FloatRegister($op1$$reg), as_FloatRegister($op2$$reg),\n-                        *($lbl$$label), \/* is_far *\/ true);\n-  %}\n-\n-  ins_pipe(pipe_class_compare);\n-%}\n-\n@@ -9701,16 +9365,0 @@\n-instruct far_cmpD_loop(cmpOp cmp, fRegD op1, fRegD op2, label lbl)\n-%{\n-  match(CountedLoopEnd cmp (CmpD op1 op2));\n-  effect(USE lbl);\n-\n-  ins_cost(XFER_COST + BRANCH_COST * 2);\n-  format %{ \"far_double_b$cmp $op1, $op2, $lbl\\t#@far_cmpD_loop\"%}\n-\n-  ins_encode %{\n-    __ float_cmp_branch($cmp$$cmpcode | C2_MacroAssembler::double_branch_mask, as_FloatRegister($op1$$reg),\n-                        as_FloatRegister($op2$$reg), *($lbl$$label), \/* is_far *\/ true);\n-  %}\n-\n-  ins_pipe(pipe_class_compare);\n-%}\n-\n@@ -9768,18 +9416,0 @@\n-instruct far_cmpUEqNeLeGt_reg_imm0_loop(cmpOpUEqNeLeGt cmp, iRegI op1, immI0 zero, label lbl)\n-%{\n-  match(CountedLoopEnd cmp (CmpU op1 zero));\n-\n-  effect(USE op1, USE lbl);\n-\n-  ins_cost(BRANCH_COST * 2);\n-\n-  format %{ \"far_b$cmp  $op1, zr, $lbl\\t#@far_cmpUEqNeLeGt_reg_imm0_loop\" %}\n-\n-\n-  ins_encode %{\n-    __ enc_cmpUEqNeLeGt_imm0_branch($cmp$$cmpcode, as_Register($op1$$reg), *($lbl$$label), \/* is_far *\/ true);\n-  %}\n-\n-  ins_pipe(pipe_cmpz_branch);\n-%}\n-\n@@ -9802,15 +9432,0 @@\n-instruct far_cmpULtGe_reg_imm0_loop(cmpOpULtGe cmp, iRegI op1, immI0 zero, label lbl)\n-%{\n-  match(CountedLoopEnd cmp (CmpU op1 zero));\n-\n-  effect(USE op1, USE lbl);\n-\n-  ins_cost(BRANCH_COST);\n-\n-  format %{ \"j  $lbl if $cmp == ge\\t#@far_cmpULtGe_reg_imm0_loop\" %}\n-\n-  ins_encode(riscv_enc_far_cmpULtGe_imm0_branch(cmp, op1, lbl));\n-\n-  ins_pipe(pipe_cmpz_branch);\n-%}\n-\n@@ -9834,17 +9449,0 @@\n-instruct far_cmpL_reg_imm0_loop(cmpOp cmp, iRegL op1, immL0 zero, label lbl)\n-%{\n-  match(CountedLoopEnd cmp (CmpL op1 zero));\n-\n-  effect(USE op1, USE lbl);\n-\n-  ins_cost(BRANCH_COST * 2);\n-\n-  format %{ \"far_b$cmp  $op1, zr, $lbl\\t#@far_cmpL_reg_imm0_loop\" %}\n-\n-  ins_encode %{\n-    __ cmp_branch($cmp$$cmpcode, as_Register($op1$$reg), zr, *($lbl$$label), \/* is_far *\/ true);\n-  %}\n-\n-  ins_pipe(pipe_cmpz_branch);\n-%}\n-\n@@ -9868,17 +9466,0 @@\n-instruct far_cmpULEqNeLeGt_reg_imm0_loop(cmpOpUEqNeLeGt cmp, iRegL op1, immL0 zero, label lbl)\n-%{\n-  match(CountedLoopEnd cmp (CmpUL op1 zero));\n-\n-  effect(USE op1, USE lbl);\n-\n-  ins_cost(BRANCH_COST * 2);\n-\n-  format %{ \"far_b$cmp  $op1, zr, $lbl\\t#@far_cmpULEqNeLeGt_reg_imm0_loop\" %}\n-\n-  ins_encode %{\n-    __ enc_cmpUEqNeLeGt_imm0_branch($cmp$$cmpcode, as_Register($op1$$reg), *($lbl$$label), \/* is_far *\/ true);\n-  %}\n-\n-  ins_pipe(pipe_cmpz_branch);\n-%}\n-\n@@ -9901,15 +9482,0 @@\n-instruct far_cmpULLtGe_reg_imm0_loop(cmpOpULtGe cmp, iRegL op1, immL0 zero, label lbl)\n-%{\n-  match(CountedLoopEnd cmp (CmpUL op1 zero));\n-\n-  effect(USE op1, USE lbl);\n-\n-  ins_cost(BRANCH_COST);\n-\n-  format %{ \"j  $lbl if $cmp == ge\\t#@far_cmpULLtGe_reg_imm0_loop\" %}\n-\n-  ins_encode(riscv_enc_far_cmpULtGe_imm0_branch(cmp, op1, lbl));\n-\n-  ins_pipe(pipe_cmpz_branch);\n-%}\n-\n@@ -9930,14 +9496,0 @@\n-instruct far_cmpP_imm0_loop(cmpOpEqNe cmp, iRegP op1, immP0 zero, label lbl) %{\n-  match(CountedLoopEnd cmp (CmpP op1 zero));\n-  effect(USE lbl);\n-\n-  ins_cost(BRANCH_COST * 2);\n-  format %{ \"far_b$cmp   $op1, zr, $lbl\\t#@far_cmpP_imm0_loop\" %}\n-\n-  ins_encode %{\n-    __ enc_cmpEqNe_imm0_branch($cmp$$cmpcode, as_Register($op1$$reg), *($lbl$$label), \/* is_far *\/ true);\n-  %}\n-\n-  ins_pipe(pipe_cmpz_branch);\n-%}\n-\n@@ -9959,15 +9511,0 @@\n-instruct far_cmpN_imm0_loop(cmpOpEqNe cmp, iRegN op1, immN0 zero, label lbl) %{\n-  match(CountedLoopEnd cmp (CmpN op1 zero));\n-  effect(USE lbl);\n-\n-  ins_cost(BRANCH_COST * 2);\n-\n-  format %{ \"far_b$cmp  $op1, zr, $lbl\\t#@far_cmpN_imm0_loop\" %}\n-\n-  ins_encode %{\n-    __ enc_cmpEqNe_imm0_branch($cmp$$cmpcode, as_Register($op1$$reg), *($lbl$$label), \/* is_far *\/ true);\n-  %}\n-\n-  ins_pipe(pipe_cmpz_branch);\n-%}\n-\n@@ -9988,14 +9525,0 @@\n-instruct far_cmpP_narrowOop_imm0_loop(cmpOpEqNe cmp, iRegN op1, immP0 zero, label lbl) %{\n-  match(CountedLoopEnd cmp (CmpP (DecodeN op1) zero));\n-  effect(USE lbl);\n-\n-  ins_cost(BRANCH_COST * 2);\n-  format %{ \"far_b$cmp   $op1, zr, $lbl\\t#@far_cmpP_narrowOop_imm0_loop\" %}\n-\n-  ins_encode %{\n-    __ enc_cmpEqNe_imm0_branch($cmp$$cmpcode, as_Register($op1$$reg), *($lbl$$label), \/* is_far *\/ true);\n-  %}\n-\n-  ins_pipe(pipe_cmpz_branch);\n-%}\n-\n","filename":"src\/hotspot\/cpu\/riscv\/riscv.ad","additions":0,"deletions":477,"binary":false,"changes":477,"status":"modified"}]}