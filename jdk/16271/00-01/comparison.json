{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -116,0 +116,5 @@\n+    @Override\n+    public boolean isIndexable() {\n+        return true;\n+    }\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/AbstractOverviewIndexWriter.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -772,0 +772,5 @@\n+\n+    @Override\n+    public boolean isIndexable() {\n+        return true;\n+    }\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/ClassWriter.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -304,0 +304,5 @@\n+\n+        @Override\n+        public boolean isIndexable() {\n+            return true;\n+        }\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/DocFilesHandler.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -414,0 +414,14 @@\n+    \/**\n+     * {@return true if the page written by this writer should be indexed,\n+     * false otherwise}\n+     *\n+     * Some pages merely aggregate filtered information available on other pages\n+     * and, thus, have no indexing value. In fact, if indexed, they would\n+     * clutter the index and mislead the reader.\n+     *\n+     * @implSpec The default implementation returns {@code false}.\n+     *\/\n+    public boolean isIndexable() {\n+        return false;\n+    }\n+\n@@ -1373,2 +1387,1 @@\n-                            && !(HtmlDocletWriter.this instanceof IndexWriter)\n-                            && !(HtmlDocletWriter.this instanceof SummaryListWriter<?>)) {\n+                            && isIndexable()) {\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlDocletWriter.java","additions":15,"deletions":2,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -926,0 +926,5 @@\n+\n+    @Override\n+    public boolean isIndexable() {\n+        return true;\n+    }\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/ModuleWriter.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -458,0 +458,5 @@\n+\n+    @Override\n+    public boolean isIndexable() {\n+        return true;\n+    }\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/PackageWriter.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -375,4 +375,2 @@\n-        if (context.isFirstSentence && context.inSummary\n-                || context.inTags.contains(DocTree.Kind.INDEX)\n-                || htmlWriter instanceof IndexWriter\n-                || htmlWriter instanceof SummaryListWriter<?>) {\n+        if (context.isFirstSentence && context.inSummary || context.inTags.contains(DocTree.Kind.INDEX)\n+                || !htmlWriter.isIndexable()) {\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/taglets\/TagletWriter.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -149,6 +149,7 @@\n-                    switch (f) {\n-                        case \"index-all.html\", \"deprecated-list.html\", \"overview-tree.html\",\n-                                \"package-use.html\", \"package-tree.html\", \"preview-list.html\",\n-                                \"new-list.html\", \"allclasses-index.html\", \"allpackages-index.html\",\n-                                \"constant-values.html\", \"system-properties.html\", \"serialized-form.html\"\n-                                -> { \/* nothing to do *\/}\n+                    if (!f.contains(\"-\"))\n+                        return false;\n+                    return switch (f) {\n+                        case \"package-summary.html\",\n+                                \"module-summary.html\",\n+                                \"overview-summary.html\",\n+                                \"help-doc.html\" -> false;\n@@ -156,2 +157,2 @@\n-                            if (!f.matches(\"index-\\\\d+.html\"))\n-                                return false;\n+                            String p = r.group(\"path\");\n+                            yield !p.contains(\"\/doc-files\/\") && !p.startsWith(\"doc-files\/\");\n@@ -159,3 +160,1 @@\n-                    }\n-                    String p = r.group(\"path\");\n-                    return !p.contains(\"\/doc-files\/\") && !p.startsWith(\"doc-files\/\");\n+                    };\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testIndex\/TestSelfIndexing.java","additions":10,"deletions":11,"binary":false,"changes":21,"status":"modified"}]}