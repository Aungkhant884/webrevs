{"files":[{"patch":"@@ -841,0 +841,11 @@\n+static int local_dladdr(const void* addr, Dl_info* info) {\n+#ifdef __APPLE__\n+  if (addr == (void*)-1) {\n+    \/\/ dladdr() in macOS12\/Monterey returns success for -1, but that addr\n+    \/\/ value should not be allowed to work to avoid confusion.\n+    return 0;\n+  }\n+#endif\n+  return dladdr(addr, info);\n+}\n+\n@@ -880,5 +891,0 @@\n-\n-#if defined(__APPLE__)\n-#define MACH_MAXSYMLEN 256\n-#endif\n-\n@@ -893,11 +899,1 @@\n-  if (dladdr((void*)addr, &dlinfo) != 0) {\n-#if defined(__APPLE__)\n-    if (addr == (address)(intptr_t)-1) {\n-      \/\/ dladdr() in macOS12\/Monterey returns success for -1, but that addr\n-      \/\/ value should not be allowed to work to avoid confusion.\n-      buf[0] = '\\0';\n-      if (offset) *offset = -1;\n-      return false;\n-    }\n-#endif\n-\n+  if (local_dladdr((void*)addr, &dlinfo) != 0) {\n@@ -913,1 +909,1 @@\n-#if !defined(__APPLE__)\n+#ifndef __APPLE__\n@@ -927,1 +923,0 @@\n-#endif\n@@ -929,1 +924,3 @@\n-#if defined(__APPLE__)\n+#else  \/\/ __APPLE__\n+    #define MACH_MAXSYMLEN 256\n+\n@@ -940,2 +937,0 @@\n-  }\n-#endif\n@@ -943,0 +938,3 @@\n+    #undef MACH_MAXSYMLEN\n+#endif  \/\/ __APPLE__\n+  }\n@@ -956,11 +954,1 @@\n-  if (dladdr((void*)addr, &dlinfo) != 0) {\n-#if defined(__APPLE__)\n-    if (addr == (address)(intptr_t)-1) {\n-      \/\/ dladdr() in macOS12\/Monterey returns success for -1, but that addr\n-      \/\/ value should not be allowed to work to avoid confusion.\n-      buf[0] = '\\0';\n-      if (offset) *offset = -1;\n-      return false;\n-    }\n-#endif\n-\n+  if (local_dladdr((void*)addr, &dlinfo) != 0) {\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":20,"deletions":32,"binary":false,"changes":52,"status":"modified"}]}