{"files":[{"patch":"@@ -72,0 +72,1 @@\n+#include \"runtime\/atomic.hpp\"\n@@ -1129,2 +1130,1 @@\n-  DEBUG_ONLY( ik->_shared_class_load_count += 1; )\n-  assert(ik->_shared_class_load_count == 1, \"shared class loaded more than once\");\n+  assert(Atomic::add(&ik->_shared_class_load_count, 1) == 1, \"shared class loaded more than once\");\n","filename":"src\/hotspot\/share\/classfile\/systemDictionary.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -256,1 +256,1 @@\n-  NOT_PRODUCT(int _shared_class_load_count;) \/\/ ensure a shared class is loaded only once\n+  NOT_PRODUCT(volatile int _shared_class_load_count;) \/\/ ensure a shared class is loaded only once\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}