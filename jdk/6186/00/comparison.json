{"files":[{"patch":"@@ -500,1 +500,0 @@\n-java\/awt\/FullScreen\/NoResizeEventOnDMChangeTest\/NoResizeEventOnDMChangeTest.java 8169468 macosx-all\n","filename":"test\/jdk\/ProblemList.txt","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,0 @@\n- * @author Dmitri.Trembovetski@sun.com: area=Graphics\n@@ -43,0 +42,2 @@\n+import java.awt.Point;\n+import java.awt.Rectangle;\n@@ -48,0 +49,1 @@\n+import java.util.concurrent.atomic.AtomicBoolean;\n@@ -105,0 +107,1 @@\n+        final AtomicBoolean skipTest = new AtomicBoolean(false);\n@@ -155,0 +158,7 @@\n+                                \/\/ Check if window is placed on this gd\n+                                Rectangle screenBounds = gd.getDefaultConfiguration().getBounds();\n+                                Rectangle windowBounds = fsWin.getBounds();\n+                                if (!screenBounds.contains(new Point(windowBounds.x, windowBounds.y))) {\n+                                    System.out.println(\"Window got moved to another screen, test not valid\");\n+                                    skipTest.set(true);\n+                                }\n@@ -169,0 +179,1 @@\n+\n@@ -181,0 +192,4 @@\n+        if (skipTest.get()) {\n+            \/\/ Skipping test because graphics driver switched window to another screen\n+            return;\n+        }\n@@ -194,3 +209,6 @@\n-        try {\n-            Thread.sleep(ms);\n-        } catch (InterruptedException ex) {}\n+        long targetTime = System.currentTimeMillis() + ms;\n+        do {\n+            try {\n+                Thread.sleep(targetTime - System.currentTimeMillis());\n+            } catch (InterruptedException ex) {}\n+        } while (System.currentTimeMillis() < targetTime);\n@@ -198,0 +216,1 @@\n+\n","filename":"test\/jdk\/java\/awt\/FullScreen\/NoResizeEventOnDMChangeTest\/NoResizeEventOnDMChangeTest.java","additions":24,"deletions":5,"binary":false,"changes":29,"status":"modified"}]}