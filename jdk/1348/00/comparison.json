{"files":[{"patch":"@@ -212,3 +212,11 @@\n-                        ArrayType blArray =\n-                            (ArrayType) execClass.getValue(fsbl).type();\n-                        ArrayReference newBlArray = blArray.newInstance(arraylength);\n+                        ArrayType blArray = (ArrayType) execClass.getValue(fsbl).type();\n+                        ArrayReference newBlArray = null;\n+\n+                        while (newBlArray == null) {\n+                            newBlArray = blArray.newInstance(arraylength);\n+                            try {\n+                                newBlArray.disableCollection();\n+                            } catch (ObjectCollectedException e) {\n+                                newBlArray = null;\n+                            }\n+                        }\n@@ -228,0 +236,1 @@\n+                        newBlArray.enableCollection();\n@@ -231,3 +240,11 @@\n-                        ArrayType btArray =\n-                            (ArrayType) execClass.getValue(fsbt).type();\n-                        ArrayReference newBtArray = btArray.newInstance(arraylength);\n+                        ArrayType btArray = (ArrayType) execClass.getValue(fsbt).type();\n+                        ArrayReference newBtArray = null;\n+\n+                        while (newBtArray == null) {\n+                            newBtArray = btArray.newInstance(arraylength);\n+                            try {\n+                                newBtArray.disableCollection();\n+                            } catch (ObjectCollectedException e) {\n+                                newBtArray = null;\n+                            }\n+                        }\n@@ -246,0 +263,2 @@\n+\n+                        newBtArray.enableCollection();\n@@ -249,3 +268,11 @@\n-                        ArrayType chArray =\n-                            (ArrayType) execClass.getValue(fsch).type();\n-                        ArrayReference newChArray = chArray.newInstance(arraylength);\n+                        ArrayType chArray = (ArrayType) execClass.getValue(fsch).type();\n+                        ArrayReference newChArray = null;\n+\n+                        while (newChArray == null) {\n+                            newChArray = chArray.newInstance(arraylength);\n+                            try {\n+                                newChArray.disableCollection();\n+                            } catch (ObjectCollectedException e) {\n+                                newChArray = null;\n+                            }\n+                        }\n@@ -264,0 +291,2 @@\n+\n+                        newChArray.enableCollection();\n@@ -267,3 +296,11 @@\n-                        ArrayType dbArray =\n-                            (ArrayType) execClass.getValue(fsdb).type();\n-                        ArrayReference newDbArray = dbArray.newInstance(arraylength);\n+                        ArrayType dbArray = (ArrayType) execClass.getValue(fsdb).type();\n+                        ArrayReference newDbArray = null;\n+\n+                        while (newDbArray == null) {\n+                            newDbArray = dbArray.newInstance(arraylength);\n+                            try {\n+                                newDbArray.disableCollection();\n+                            } catch (ObjectCollectedException e) {\n+                                newDbArray = null;\n+                            }\n+                        }\n@@ -282,0 +319,2 @@\n+\n+                        newDbArray.enableCollection();\n@@ -285,3 +324,11 @@\n-                        ArrayType flArray =\n-                            (ArrayType) execClass.getValue(fsfl).type();\n-                        ArrayReference newFlArray = flArray.newInstance(arraylength);\n+                        ArrayType flArray = (ArrayType) execClass.getValue(fsfl).type();\n+                        ArrayReference newFlArray = null;\n+\n+                        while (newFlArray == null) {\n+                            newFlArray = flArray.newInstance(arraylength);\n+                            try {\n+                                newFlArray.disableCollection();\n+                            } catch (ObjectCollectedException e) {\n+                                newFlArray = null;\n+                            }\n+                        }\n@@ -300,0 +347,2 @@\n+\n+                        newFlArray.enableCollection();\n@@ -303,3 +352,11 @@\n-                        ArrayType inArray =\n-                            (ArrayType) execClass.getValue(fsin).type();\n-                        ArrayReference newInArray = inArray.newInstance(arraylength);\n+                        ArrayType inArray = (ArrayType) execClass.getValue(fsin).type();\n+                        ArrayReference newInArray = null;\n+\n+                        while (newInArray == null) {\n+                            newInArray = inArray.newInstance(arraylength);\n+                            try {\n+                                newInArray.disableCollection();\n+                            } catch (ObjectCollectedException e) {\n+                                newInArray = null;\n+                            }\n+                        }\n@@ -318,0 +375,2 @@\n+\n+                        newInArray.enableCollection();\n@@ -321,3 +380,11 @@\n-                        ArrayType lnArray =\n-                            (ArrayType) execClass.getValue(fsln).type();\n-                        ArrayReference newLnArray = lnArray.newInstance(arraylength);\n+                        ArrayType lnArray = (ArrayType) execClass.getValue(fsln).type();\n+                        ArrayReference newLnArray = null;\n+\n+                        while (newLnArray == null) {\n+                            newLnArray = lnArray.newInstance(arraylength);\n+                            try {\n+                                newLnArray.disableCollection();\n+                            } catch (ObjectCollectedException e) {\n+                                newLnArray = null;\n+                            }\n+                        }\n@@ -336,0 +403,2 @@\n+\n+                        newLnArray.enableCollection();\n@@ -339,3 +408,11 @@\n-                        ArrayType shArray =\n-                            (ArrayType) execClass.getValue(fssh).type();\n-                        ArrayReference newShArray = shArray.newInstance(arraylength);\n+                        ArrayType shArray = (ArrayType) execClass.getValue(fssh).type();\n+                        ArrayReference newShArray = null;\n+\n+                        while (newShArray == null) {\n+                            newShArray = shArray.newInstance(arraylength);\n+                            try {\n+                                newShArray.disableCollection();\n+                            } catch (ObjectCollectedException e) {\n+                                newShArray = null;\n+                            }\n+                        }\n@@ -354,0 +431,2 @@\n+\n+                        newShArray.enableCollection();\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdi\/ArrayType\/newInstance\/newinstance001.java","additions":103,"deletions":24,"binary":false,"changes":127,"status":"modified"},{"patch":"@@ -203,1 +203,11 @@\n-            ArrayReference newarrayArray = arrayArray.newInstance(arraylength);\n+            ArrayReference newarrayArray = null;\n+\n+            while (newarrayArray == null) {\n+                newarrayArray = arrayArray.newInstance(arraylength);\n+                try {\n+                    newarrayArray.disableCollection();\n+                } catch (ObjectCollectedException e) {\n+                    newarrayArray = null;\n+                }\n+            }\n+\n@@ -242,0 +252,2 @@\n+            newarrayArray.enableCollection();\n+\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdi\/ArrayType\/newInstance\/newinstance002.java","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -200,1 +200,8 @@\n-                newifaceArray = ifaceArray.newInstance(arraylength);\n+                while (newifaceArray == null) {\n+                    newifaceArray = ifaceArray.newInstance(arraylength);\n+                    try {\n+                        newifaceArray.disableCollection();\n+                    } catch (ObjectCollectedException e) {\n+                        newifaceArray = null;\n+                   }\n+                }\n@@ -239,0 +246,2 @@\n+            newifaceArray.enableCollection();\n+\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdi\/ArrayType\/newInstance\/newinstance003.java","additions":10,"deletions":1,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -187,1 +187,8 @@\n-                newclassArray = classArray.newInstance(arraylength);\n+                while (newclassArray == null) {\n+                    newclassArray = classArray.newInstance(arraylength);\n+                    try {\n+                        newclassArray.disableCollection();\n+                    } catch (ObjectCollectedException e) {\n+                        newclassArray = null;\n+                   }\n+                }\n@@ -226,0 +233,2 @@\n+            newclassArray.enableCollection();\n+\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdi\/ArrayType\/newInstance\/newinstance004.java","additions":10,"deletions":1,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -137,2 +137,9 @@\n-            ArrayReference arrayReference = arrayType.newInstance(arraySize);\n-            arrayReference.disableCollection();\n+            ArrayReference arrayReference = null;\n+            while (arrayReference == null) {\n+                arrayReference = arrayType.newInstance(arraySize);\n+                try {\n+                    arrayReference.disableCollection();\n+                } catch (ObjectCollectedException e) {\n+                    arrayReference = null;\n+                }\n+            }\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdi\/ReferenceType\/instances\/instances002\/instances002.java","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -82,1 +82,5 @@\n-                array.disableCollection();\n+                try {\n+                    array.disableCollection();\n+                } catch (ObjectCollectedException e) {\n+                    continue;\n+                }\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdi\/VMOutOfMemoryException\/VMOutOfMemoryException001\/VMOutOfMemoryException001.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -139,1 +139,8 @@\n-            testedObject = testedClass.newInstance(thread, ctor, params, 0);\n+            while (testedObject == null) {\n+               testedObject = testedClass.newInstance(thread, ctor, params, 0);\n+               try {\n+                    testedObject.disableCollection();\n+                } catch (ObjectCollectedException e) {\n+                    testedObject = null;\n+               }\n+            }\n@@ -177,0 +184,2 @@\n+        testedObject.enableCollection();\n+\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdi\/VoidValue\/toString\/tostring001.java","additions":10,"deletions":1,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+import java.util.ArrayList;\n@@ -70,0 +71,2 @@\n+    private static ArrayList<Object> keepAlive = new ArrayList<>();\n+\n@@ -76,0 +79,5 @@\n+        \/\/ Keep class loader alive to avoid ObjectCollectedException\n+        \/\/ on the debugger side, in case the GC unloads the class and\n+        \/\/ invalidates code locations.\n+        keepAlive.add(classLoader);\n+\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/jdi\/sde\/SDEDebuggee.java","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"}]}