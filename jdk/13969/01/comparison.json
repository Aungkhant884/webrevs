{"files":[{"patch":"@@ -107,1 +107,1 @@\n-            testTask.ensureStarted();\n+            testTask.ensureAtPointA();\n@@ -171,2 +171,2 @@\n-        private volatile boolean started = false;\n-        private volatile boolean finished = false;\n+        static volatile boolean atPointA = false;\n+        static volatile boolean finished = false;\n@@ -174,1 +174,1 @@\n-        static public void sleep(long millis) {\n+        static void sleep(long millis) {\n@@ -182,3 +182,2 @@\n-        \/\/ Ensure thread is ready.\n-        public void ensureStarted() {\n-            while (!started) {\n+        static void ensureAtPointA() {\n+            while (!atPointA) {\n@@ -190,1 +189,1 @@\n-        public void ensureFinished() {\n+        static void ensureFinished() {\n@@ -198,1 +197,0 @@\n-            started = true;\n@@ -206,4 +204,0 @@\n-                if (!Thread.currentThread().isVirtual()) { \/\/ platform thread\n-                    \/\/ clear the interrupt status\n-                    Thread.interrupted();\n-                }\n@@ -211,0 +205,1 @@\n+            Thread.interrupted();\n@@ -222,4 +217,0 @@\n-                if (!Thread.currentThread().isVirtual()) { \/\/ platform thread\n-                    \/\/ clear the interrupt status\n-                    Thread.interrupted();\n-                }\n@@ -227,0 +218,1 @@\n+            Thread.interrupted();\n@@ -239,0 +231,1 @@\n+            Thread.interrupted();\n@@ -251,0 +244,1 @@\n+            atPointA = true;\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/vthread\/StopThreadTest\/StopThreadTest.java","additions":11,"deletions":17,"binary":false,"changes":28,"status":"modified"}]}