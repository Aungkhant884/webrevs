{"files":[{"patch":"@@ -2033,3 +2033,1 @@\n-  if (!PatchALot && Inline && target->is_loaded() &&\n-      (klass->is_initialized() || (klass->is_interface() && target->holder()->is_initialized()))\n-      && !patch_for_appendix) {\n+  if (!PatchALot && Inline && target->is_loaded() && callee_holder->is_linked() && !patch_for_appendix) {\n@@ -2037,1 +2035,1 @@\n-    if (code == Bytecodes::_invokestatic  ||\n+    if ((code == Bytecodes::_invokestatic && callee_holder->is_initialized()) || \/\/ invokestatic involves an initialization barrier on resolved klass\n@@ -2041,1 +2039,0 @@\n-      ciMethod* inline_target = (cha_monomorphic_target != NULL) ? cha_monomorphic_target : target;\n@@ -2043,1 +2040,3 @@\n-      bool success = try_inline(inline_target, (cha_monomorphic_target != NULL) || (exact_target != NULL), false, code, better_receiver);\n+      ciMethod* inline_target = (cha_monomorphic_target != NULL) ? cha_monomorphic_target : target;\n+      bool holder_known = (cha_monomorphic_target != NULL) || (exact_target != NULL);\n+      bool success = try_inline(inline_target, holder_known, false \/* ignore_return *\/, code, better_receiver);\n@@ -3761,1 +3760,3 @@\n-  if (!callee->holder()->is_initialized()) INLINE_BAILOUT(\"callee's klass not initialized yet\");\n+  if (!callee->holder()->is_linked())      INLINE_BAILOUT(\"callee's klass not linked yet\");\n+  if (bc == Bytecodes::_invokestatic &&\n+      !callee->holder()->is_initialized()) INLINE_BAILOUT(\"callee's klass not initialized yet\");\n@@ -3843,0 +3844,2 @@\n+  assert(bc != Bytecodes::_invokestatic || callee->holder()->is_initialized(), \"required\");\n+\n","filename":"src\/hotspot\/share\/c1\/c1_GraphBuilder.cpp","additions":10,"deletions":7,"binary":false,"changes":17,"status":"modified"}]}