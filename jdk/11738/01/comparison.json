{"files":[{"patch":"@@ -1465,1 +1465,1 @@\n-  return NativeAccess<AS_NO_KEEPALIVE>::oop_load(oop_addr_at(index));\n+  return NMethodAccess<AS_NO_KEEPALIVE>::oop_load(oop_addr_at(index));\n@@ -1472,1 +1472,1 @@\n-  return NativeAccess<ON_PHANTOM_OOP_REF>::oop_load(oop_addr_at(index));\n+  return NMethodAccess<ON_PHANTOM_OOP_REF>::oop_load(oop_addr_at(index));\n","filename":"src\/hotspot\/share\/code\/nmethod.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -274,1 +274,1 @@\n-\/\/ atomicity decorators as well as compressed oops)\n+\/\/ atomicity decorators as well as compressed oops).\n@@ -279,1 +279,1 @@\n-\/\/ may resolve an accessor on a GC barrier set\n+\/\/ may resolve an accessor on a GC barrier set.\n@@ -284,1 +284,1 @@\n-\/\/ may resolve an accessor on a GC barrier set\n+\/\/ may resolve an accessor on a GC barrier set.\n@@ -288,0 +288,5 @@\n+\/\/ Helper for performing accesses in nmethods. These accesses\n+\/\/ may resolve an accessor on a GC barrier set.\n+template <DecoratorSet decorators = DECORATORS_NONE>\n+class NMethodAccess: public Access<IN_NMETHOD | decorators> {};\n+\n@@ -365,0 +370,1 @@\n+    (location_decorators ^ IN_NMETHOD) == 0 ||\n","filename":"src\/hotspot\/share\/oops\/access.hpp","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -175,0 +175,1 @@\n+\/\/ * IN_NMETHOD: The access is performed inside of an nmethod.\n@@ -177,1 +178,2 @@\n-const DecoratorSet IN_DECORATOR_MASK  = IN_HEAP | IN_NATIVE;\n+const DecoratorSet IN_NMETHOD         = UCONST64(1) << 20;\n+const DecoratorSet IN_DECORATOR_MASK  = IN_HEAP | IN_NATIVE | IN_NMETHOD;\n@@ -185,3 +187,3 @@\n-const DecoratorSet IS_ARRAY              = UCONST64(1) << 20;\n-const DecoratorSet IS_DEST_UNINITIALIZED = UCONST64(1) << 21;\n-const DecoratorSet IS_NOT_NULL           = UCONST64(1) << 22;\n+const DecoratorSet IS_ARRAY              = UCONST64(1) << 21;\n+const DecoratorSet IS_DEST_UNINITIALIZED = UCONST64(1) << 22;\n+const DecoratorSet IS_NOT_NULL           = UCONST64(1) << 23;\n@@ -199,5 +201,5 @@\n-const DecoratorSet ARRAYCOPY_CHECKCAST            = UCONST64(1) << 23;\n-const DecoratorSet ARRAYCOPY_DISJOINT             = UCONST64(1) << 24;\n-const DecoratorSet ARRAYCOPY_ARRAYOF              = UCONST64(1) << 25;\n-const DecoratorSet ARRAYCOPY_ATOMIC               = UCONST64(1) << 26;\n-const DecoratorSet ARRAYCOPY_ALIGNED              = UCONST64(1) << 27;\n+const DecoratorSet ARRAYCOPY_CHECKCAST            = UCONST64(1) << 24;\n+const DecoratorSet ARRAYCOPY_DISJOINT             = UCONST64(1) << 25;\n+const DecoratorSet ARRAYCOPY_ARRAYOF              = UCONST64(1) << 26;\n+const DecoratorSet ARRAYCOPY_ATOMIC               = UCONST64(1) << 27;\n+const DecoratorSet ARRAYCOPY_ALIGNED              = UCONST64(1) << 28;\n@@ -212,2 +214,2 @@\n-const DecoratorSet ACCESS_READ                    = UCONST64(1) << 28;\n-const DecoratorSet ACCESS_WRITE                   = UCONST64(1) << 29;\n+const DecoratorSet ACCESS_READ                    = UCONST64(1) << 29;\n+const DecoratorSet ACCESS_WRITE                   = UCONST64(1) << 30;\n@@ -216,1 +218,1 @@\n-const DecoratorSet DECORATOR_LAST = UCONST64(1) << 29;\n+const DecoratorSet DECORATOR_LAST = UCONST64(1) << 30;\n","filename":"src\/hotspot\/share\/oops\/accessDecorators.hpp","additions":14,"deletions":12,"binary":false,"changes":26,"status":"modified"}]}