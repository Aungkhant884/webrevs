{"files":[{"patch":"@@ -273,1 +273,1 @@\n-  void replace_java_mirror_handle(OopHandle mirror) { _java_mirror.assign_handle(mirror); }\n+  void swap_java_mirror_handle(OopHandle& mirror) { _java_mirror.swap(mirror); }\n","filename":"src\/hotspot\/share\/oops\/klass.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -58,5 +58,2 @@\n-  OopHandle& assign_handle(const OopHandle& copy) {\n-    \/\/ Assignment is used by RedefineClasses for java_mirror to temporarily\n-    \/\/ replace the mirror in the scratch class.\n-    _obj = copy._obj;\n-    return *this;\n+  void swap(OopHandle& copy) {\n+    ::swap(_obj, copy._obj);\n","filename":"src\/hotspot\/share\/oops\/oopHandle.hpp","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -1335,2 +1335,2 @@\n-    _scratch_mirror = _scratch_class->java_mirror_handle();\n-    _scratch_class->replace_java_mirror_handle(the_class->java_mirror_handle());\n+    _scratch_mirror = the_class->java_mirror_handle();  \/\/ this is a copy that is swapped\n+    _scratch_class->swap_java_mirror_handle(_scratch_mirror);\n@@ -1342,1 +1342,1 @@\n-    _scratch_class->replace_java_mirror_handle(_scratch_mirror);\n+    _scratch_class->swap_java_mirror_handle(_scratch_mirror);\n","filename":"src\/hotspot\/share\/prims\/jvmtiRedefineClasses.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}