{"files":[{"patch":"@@ -141,1 +141,0 @@\n-\n@@ -201,1 +200,1 @@\n-        if (prefix != null) indexCoder = prepend(indexCoder, buf, prefix);\n+        indexCoder = prepend(indexCoder, buf, prefix);\n@@ -237,1 +236,1 @@\n-        if (prefix != null) indexCoder = prepend(indexCoder, buf, prefix);\n+        indexCoder = prepend(indexCoder, buf, prefix);\n@@ -272,1 +271,1 @@\n-        if (prefix != null) indexCoder = prepend(indexCoder, buf, prefix);\n+        indexCoder = prepend(indexCoder, buf, prefix);\n@@ -307,1 +306,1 @@\n-        if (prefix != null) indexCoder = prepend(indexCoder, buf, prefix);\n+        indexCoder = prepend(indexCoder, buf, prefix);\n@@ -344,1 +343,1 @@\n-        if (prefix != null) indexCoder = prepend(indexCoder, buf, prefix);\n+        indexCoder = prepend(indexCoder, buf, prefix);\n@@ -387,1 +386,1 @@\n-        if (prefix != null) indexCoder = prepend(indexCoder, buf, prefix);\n+        indexCoder = prepend(indexCoder, buf, prefix);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/StringConcatHelper.java","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -703,8 +703,2 @@\n-        MethodHandle prepend;\n-        int idx = classIndex(cl);\n-        if (prefix == null) {\n-            prepend = NULL_PREPENDERS[idx];\n-            if (prepend == null) {\n-                NULL_PREPENDERS[idx] = prepend = MethodHandles.insertArguments(\n-                                prepender(cl), 3, (String)null);\n-            }\n+        if (prefix == null || prefix.isEmpty()) {\n+            return noPrefixPrepender(cl);\n@@ -712,1 +706,1 @@\n-            prepend = MethodHandles.insertArguments(\n+            return MethodHandles.insertArguments(\n@@ -715,1 +709,0 @@\n-        return prepend;\n@@ -732,0 +725,14 @@\n+    private static MethodHandle noPrefixPrepender(Class<?> cl) {\n+        int idx = classIndex(cl);\n+        MethodHandle prepend = NO_PREFIX_PREPENDERS[idx];\n+        if (prepend == null) {\n+            if (idx == STRING_CONCAT_ITEM) {\n+                cl = FormatConcatItem.class;\n+            }\n+            NO_PREFIX_PREPENDERS[idx] = prepend = JLA.stringConcatHelper(\"prepend\",\n+                    methodType(long.class, long.class, byte[].class,\n+                            Wrapper.asPrimitiveType(cl))).rebind();\n+        }\n+        return prepend;\n+    }\n+\n@@ -998,1 +1005,1 @@\n-    private static final @Stable MethodHandle[] NULL_PREPENDERS = new MethodHandle[TYPE_COUNT];\n+    private static final @Stable MethodHandle[] NO_PREFIX_PREPENDERS = new MethodHandle[TYPE_COUNT];\n@@ -1120,1 +1127,1 @@\n-            MethodHandle prepender = prepender(fragment.isEmpty() ? null : fragment, ttype);\n+            MethodHandle prepender = prepender(fragment, ttype);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/StringConcatFactory.java","additions":19,"deletions":12,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -64,1 +64,1 @@\n-                            String.class, String.class));\n+                            String.class));\n@@ -90,2 +90,1 @@\n-        return (long)STRING_PREPEND.invokeExact(lengthCoder, buffer, value,\n-                (String)null);\n+        return (long)STRING_PREPEND.invokeExact(lengthCoder, buffer, value);\n","filename":"src\/java.base\/share\/classes\/java\/util\/FormatItem.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"}]}