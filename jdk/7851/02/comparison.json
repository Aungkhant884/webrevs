{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -50,1 +50,5 @@\n-  _code = new StubQueue(new InterpreterCodeletInterface, code_size, NULL,\n+  \/\/ 270+ interpreter codelets are generated and each of them is required to be aligned to\n+  \/\/ CodeEntryAlignment twice. So we need additional size due to alignment.\n+  int max_aligned_codelets = 280;\n+  int max_aligned_bytes = max_aligned_codelets * CodeEntryAlignment * 2;\n+  _code = new StubQueue(new InterpreterCodeletInterface, code_size + max_aligned_bytes, NULL,\n","filename":"src\/hotspot\/share\/interpreter\/templateInterpreter.cpp","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -92,1 +92,5 @@\n-  _adapter_code = MethodHandlesAdapterBlob::create(adapter_code_size);\n+  \/\/ The adapter entry is required to be aligned to CodeEntryAlignment.\n+  \/\/ So we need additional bytes due to alignment.\n+  int adapter_num = (int)Interpreter::method_handle_invoke_LAST - (int)Interpreter::method_handle_invoke_FIRST + 1;\n+  int max_aligned_bytes = adapter_num * CodeEntryAlignment;\n+  _adapter_code = MethodHandlesAdapterBlob::create(adapter_code_size + max_aligned_bytes);\n","filename":"src\/hotspot\/share\/prims\/methodHandles.cpp","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -1525,1 +1525,1 @@\n-  develop_pd(uintx, CodeCacheSegmentSize,                                   \\\n+  product_pd(uintx, CodeCacheSegmentSize, EXPERIMENTAL,                     \\\n","filename":"src\/hotspot\/share\/runtime\/globals.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,1 +30,0 @@\n- * @requires vm.debug\n","filename":"test\/hotspot\/jtreg\/compiler\/arguments\/TestCodeEntryAlignment.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}