{"files":[{"patch":"@@ -693,1 +693,2 @@\n-PhaseValues::PhaseValues( Arena *arena, uint est_max_size ) : PhaseTransform(arena, GVN), _table(arena, est_max_size) {\n+PhaseValues::PhaseValues( Arena *arena, uint est_max_size )\n+  : PhaseTransform(arena, GVN), _table(arena, est_max_size) {\n@@ -699,2 +700,2 @@\n-PhaseValues::PhaseValues( PhaseValues *ptv ) : PhaseTransform( ptv, GVN ),\n-  _table(&ptv->_table) {\n+PhaseValues::PhaseValues(PhaseValues* ptv)\n+  : PhaseTransform(ptv, GVN), _table(&ptv->_table) {\n@@ -722,0 +723,6 @@\n+void PhaseValues::igvn_rehash_node_delayed(Node* node) {\n+  if (_iterGVN) {\n+    ((PhaseIterGVN*)this)->igvn_rehash_node_delayed(node);\n+  }\n+}\n+\n@@ -935,4 +942,4 @@\n-PhaseIterGVN::PhaseIterGVN( PhaseIterGVN *igvn ) : PhaseGVN(igvn),\n-                                                   _delay_transform(igvn->_delay_transform),\n-                                                   _stack( igvn->_stack ),\n-                                                   _worklist( igvn->_worklist )\n+PhaseIterGVN::PhaseIterGVN(PhaseIterGVN* igvn) : PhaseGVN(igvn),\n+                                                 _delay_transform(igvn->_delay_transform),\n+                                                 _stack(igvn->_stack ),\n+                                                 _worklist(igvn->_worklist)\n@@ -940,0 +947,1 @@\n+  _iterGVN = true;\n@@ -944,2 +952,2 @@\n-PhaseIterGVN::PhaseIterGVN( PhaseGVN *gvn ) : PhaseGVN(gvn),\n-                                              _delay_transform(false),\n+PhaseIterGVN::PhaseIterGVN(PhaseGVN* gvn) : PhaseGVN(gvn),\n+                                            _delay_transform(false),\n@@ -950,2 +958,2 @@\n-                                              _stack(C->comp_arena(), 32),\n-                                              _worklist(*C->for_igvn())\n+                                            _stack(C->comp_arena(), 32),\n+                                            _worklist(*C->for_igvn())\n@@ -953,0 +961,1 @@\n+  _iterGVN = true;\n","filename":"src\/hotspot\/share\/opto\/phaseX.cpp","additions":20,"deletions":11,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -338,3 +338,0 @@\n-  \/\/ Delayed node rehash if this is an IGVN phase\n-  virtual void igvn_rehash_node_delayed(Node* n) {}\n-\n@@ -372,1 +369,1 @@\n-\n+  bool      _iterGVN = false;\n@@ -374,4 +371,5 @@\n-  PhaseValues( Arena *arena, uint est_max_size );\n-  PhaseValues( PhaseValues *pt );\n-  NOT_PRODUCT( ~PhaseValues(); )\n-  virtual PhaseIterGVN *is_IterGVN() { return 0; }\n+  PhaseValues(Arena* arena, uint est_max_size);\n+  PhaseValues(PhaseValues* pt);\n+  NOT_PRODUCT(~PhaseValues();)\n+  PhaseIterGVN* is_IterGVN() { return (_iterGVN) ? (PhaseIterGVN*)this : NULL; }\n+  void igvn_rehash_node_delayed(Node* node);\n@@ -380,4 +378,4 @@\n-  bool   hash_delete(Node *n)     { return _table.hash_delete(n); }\n-  void   hash_insert(Node *n)     { _table.hash_insert(n); }\n-  Node  *hash_find_insert(Node *n){ return _table.hash_find_insert(n); }\n-  Node  *hash_find(const Node *n) { return _table.hash_find(n); }\n+  bool   hash_delete(Node* n)     { return _table.hash_delete(n); }\n+  void   hash_insert(Node* n)     { _table.hash_insert(n); }\n+  Node*  hash_find_insert(Node* n){ return _table.hash_find_insert(n); }\n+  Node*  hash_find(const Node* n) { return _table.hash_find(n); }\n@@ -394,2 +392,2 @@\n-  virtual const Type* saturate(const Type* new_type, const Type* old_type,\n-                               const Type* limit_type) const\n+  const Type* saturate(const Type* new_type, const Type* old_type,\n+                       const Type* limit_type) const\n@@ -466,2 +464,2 @@\n-  PhaseIterGVN( PhaseIterGVN *igvn ); \/\/ Used by CCP constructor\n-  PhaseIterGVN( PhaseGVN *gvn ); \/\/ Used after Parser\n+  PhaseIterGVN(PhaseIterGVN* igvn); \/\/ Used by CCP constructor\n+  PhaseIterGVN(PhaseGVN* gvn); \/\/ Used after Parser\n@@ -473,2 +471,0 @@\n-  virtual PhaseIterGVN *is_IterGVN() { return this; }\n-\n@@ -530,4 +526,0 @@\n-  void igvn_rehash_node_delayed(Node* n) {\n-    rehash_node_delayed(n);\n-  }\n-\n","filename":"src\/hotspot\/share\/opto\/phaseX.hpp","additions":14,"deletions":22,"binary":false,"changes":36,"status":"modified"}]}