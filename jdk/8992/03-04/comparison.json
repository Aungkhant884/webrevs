{"files":[{"patch":"@@ -399,1 +399,0 @@\n-      Thread *current = Thread::current();\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvThreadState.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -354,2 +354,4 @@\n-  JavaThread* self = JavaThread::current();\n-  if (target->is_handshake_safe_for(self)) {\n+  guarantee(target != nullptr, \"must be\");\n+\n+  JavaThread* current = JavaThread::current();\n+  if (target->is_handshake_safe_for(current)) {\n@@ -360,1 +362,1 @@\n-  HandshakeOperation op(hs_cl, target, Thread::current());\n+  HandshakeOperation op(hs_cl, target, current);\n@@ -363,2 +365,0 @@\n-\n-  guarantee(target != nullptr, \"must be\");\n@@ -397,1 +397,1 @@\n-    if (SafepointMechanism::should_process(self)) {\n+    if (SafepointMechanism::should_process(current)) {\n@@ -399,1 +399,1 @@\n-      ThreadBlockInVM tbivm(self);\n+      ThreadBlockInVM tbivm(current);\n","filename":"src\/hotspot\/share\/runtime\/handshake.cpp","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"}]}