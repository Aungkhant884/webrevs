{"files":[{"patch":"@@ -14,5 +14,0 @@\n-env:\n-  BOOT_JDK_VERSION: \"14.0.2\"\n-  JTREG_VERSION: \"jtreg5.1-b01\"\n-  GTEST_VERSION: \"release-1.8.1\"\n-\n@@ -28,0 +23,1 @@\n+      dependencies: ${{ steps.check_deps.outputs.dependencies }}\n@@ -46,0 +42,16 @@\n+      - name: Checkout the source\n+        uses: actions\/checkout@v2\n+        with:\n+          path: jdk\n+\n+      - name: Determine versions and locations to be used for dependencies\n+        id: check_deps\n+        run: \"echo ::set-output name=dependencies::`cat make\/autoconf\/version-numbers make\/conf\/test-dependencies | sed -e '1i {' -e 's\/#.*\/\/g' -e 's\/\\\"\/\/g' -e 's\/\\\\(.*\\\\)=\\\\(.*\\\\)\/\\\"\\\\1\\\": \\\"\\\\2\\\",\/g' -e '$s\/,\\\\s\\\\{0,\\\\}$\/\\\\}\/'`\"\n+        working-directory: jdk\n+\n+      - name: Print extracted dependencies to the log\n+        run: \"echo '${{ steps.check_deps.outputs.dependencies }}'\"\n+\n+      - name: Determine the jtreg ref to checkout\n+        run: \"echo ::set-env name=JTREG_REF::jtreg${{ fromJson(steps.check_deps.outputs.dependencies).JTREG_VERSION }}-${{ fromJson(steps.check_deps.outputs.dependencies).JTREG_BUILD }}\"\n+\n@@ -51,1 +63,1 @@\n-          key: jtreg-${{ env.JTREG_VERSION }}-v1\n+          key: jtreg-${{ env.JTREG_REF }}-v1\n@@ -58,1 +70,2 @@\n-          ref: ${{ env.JTREG_VERSION }}\n+          ref: ${{ env.JTREG_REF }}\n+          path: jtreg\n@@ -63,0 +76,1 @@\n+        working-directory: jtreg\n@@ -67,0 +81,1 @@\n+        working-directory: jtreg\n@@ -72,1 +87,1 @@\n-          name: jtreg_${{ env.JTREG_VERSION }}_${{ env.bundleid }}\n+          name: jtreg_${{ env.bundleid }}\n@@ -98,3 +113,5 @@\n-      BOOT_JDK_FILENAME: \"openjdk-14.0.2_linux-x64_bin.tar.gz\"\n-      BOOT_JDK_URL: \"https:\/\/download.java.net\/java\/GA\/jdk14.0.2\/205943a0976c4ed48cb16f1043c5c647\/12\/GPL\/openjdk-14.0.2_linux-x64_bin.tar.gz\"\n-      BOOT_JDK_SHA256: \"91310200f072045dc6cef2c8c23e7e6387b37c46e9de49623ce0fa461a24623d\"\n+      JDK_VERSION: \"${{ fromJson(needs.prerequisites.outputs.dependencies).DEFAULT_VERSION_FEATURE }}\"\n+      BOOT_JDK_VERSION: \"${{ fromJson(needs.prerequisites.outputs.dependencies).BOOT_JDK_VERSION }}\"\n+      BOOT_JDK_FILENAME: \"${{ fromJson(needs.prerequisites.outputs.dependencies).LINUX_X64_BOOT_JDK_FILENAME }}\"\n+      BOOT_JDK_URL: \"${{ fromJson(needs.prerequisites.outputs.dependencies).LINUX_X64_BOOT_JDK_URL }}\"\n+      BOOT_JDK_SHA256: \"${{ fromJson(needs.prerequisites.outputs.dependencies).LINUX_X64_BOOT_JDK_SHA256 }}\"\n@@ -116,1 +133,1 @@\n-          key: bootjdk-${{ runner.os }}-${{ env.BOOT_JDK_VERSION }}-v1\n+          key: bootjdk-${{ runner.os }}-${{ env.BOOT_JDK_VERSION }}-${{ env.BOOT_JDK_SHA256 }}-v1\n@@ -124,0 +141,1 @@\n+          mv \"${HOME}\/bootjdk\/${BOOT_JDK_VERSION}\/\"*\/* \"${HOME}\/bootjdk\/${BOOT_JDK_VERSION}\/\"\n@@ -129,1 +147,1 @@\n-          name: jtreg_${{ env.JTREG_VERSION }}_${{ env.bundleid }}\n+          name: jtreg_${{ env.bundleid }}\n@@ -136,1 +154,1 @@\n-          ref: ${{ env.GTEST_VERSION }}\n+          ref: \"release-${{ fromJson(needs.prerequisites.outputs.dependencies).GTEST_VERSION }}\"\n@@ -149,1 +167,1 @@\n-          --with-boot-jdk=${HOME}\/bootjdk\/${BOOT_JDK_VERSION}\/jdk-${BOOT_JDK_VERSION}\n+          --with-boot-jdk=${HOME}\/bootjdk\/${BOOT_JDK_VERSION}\n@@ -166,2 +184,2 @@\n-            jdk\/build\/linux-x64\/bundles\/jdk-16-internal+0_linux-x64_bin${{ matrix.artifact }}.tar.gz\n-            jdk\/build\/linux-x64\/bundles\/jdk-16-internal+0_linux-x64_bin-tests${{ matrix.artifact }}.tar.gz\n+            jdk\/build\/linux-x64\/bundles\/jdk-${{ env.JDK_VERSION }}-internal+0_linux-x64_bin${{ matrix.artifact }}.tar.gz\n+            jdk\/build\/linux-x64\/bundles\/jdk-${{ env.JDK_VERSION }}-internal+0_linux-x64_bin-tests${{ matrix.artifact }}.tar.gz\n@@ -173,1 +191,3 @@\n-    needs: linux_x64_build\n+    needs:\n+      - prerequisites\n+      - linux_x64_build\n@@ -213,0 +233,7 @@\n+    env:\n+      JDK_VERSION: \"${{ fromJson(needs.prerequisites.outputs.dependencies).DEFAULT_VERSION_FEATURE }}\"\n+      BOOT_JDK_VERSION: \"${{ fromJson(needs.prerequisites.outputs.dependencies).BOOT_JDK_VERSION }}\"\n+      BOOT_JDK_FILENAME: \"${{ fromJson(needs.prerequisites.outputs.dependencies).LINUX_X64_BOOT_JDK_FILENAME }}\"\n+      BOOT_JDK_URL: \"${{ fromJson(needs.prerequisites.outputs.dependencies).LINUX_X64_BOOT_JDK_URL }}\"\n+      BOOT_JDK_SHA256: \"${{ fromJson(needs.prerequisites.outputs.dependencies).LINUX_X64_BOOT_JDK_SHA256 }}\"\n+\n@@ -225,1 +252,1 @@\n-          key: bootjdk-${{ runner.os }}-${{ env.BOOT_JDK_VERSION }}-v1\n+          key: bootjdk-${{ runner.os }}-${{ env.BOOT_JDK_VERSION }}-${{ env.BOOT_JDK_SHA256 }}-v1\n@@ -233,0 +260,1 @@\n+          mv \"${HOME}\/bootjdk\/${BOOT_JDK_VERSION}\/\"*\/* \"${HOME}\/bootjdk\/${BOOT_JDK_VERSION}\/\"\n@@ -238,1 +266,1 @@\n-          name: jtreg_${{ env.JTREG_VERSION }}_${{ env.bundleid }}\n+          name: jtreg_${{ env.bundleid }}\n@@ -249,2 +277,2 @@\n-          mkdir -p \"${HOME}\/jdk-linux-x64${{ matrix.artifact }}\/jdk-16-internal+0_linux-x64_bin${{ matrix.artifact }}\"\n-          tar -xf \"${HOME}\/jdk-linux-x64${{ matrix.artifact }}\/jdk-16-internal+0_linux-x64_bin${{ matrix.artifact }}.tar.gz\" -C \"${HOME}\/jdk-linux-x64${{ matrix.artifact }}\/jdk-16-internal+0_linux-x64_bin${{ matrix.artifact }}\"\n+          mkdir -p \"${HOME}\/jdk-linux-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_linux-x64_bin${{ matrix.artifact }}\"\n+          tar -xf \"${HOME}\/jdk-linux-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_linux-x64_bin${{ matrix.artifact }}.tar.gz\" -C \"${HOME}\/jdk-linux-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_linux-x64_bin${{ matrix.artifact }}\"\n@@ -254,2 +282,2 @@\n-          mkdir -p \"${HOME}\/jdk-linux-x64${{ matrix.artifact }}\/jdk-16-internal+0_linux-x64_bin-tests${{ matrix.artifact }}\"\n-          tar -xf \"${HOME}\/jdk-linux-x64${{ matrix.artifact }}\/jdk-16-internal+0_linux-x64_bin-tests${{ matrix.artifact }}.tar.gz\" -C \"${HOME}\/jdk-linux-x64${{ matrix.artifact }}\/jdk-16-internal+0_linux-x64_bin-tests${{ matrix.artifact }}\"\n+          mkdir -p \"${HOME}\/jdk-linux-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_linux-x64_bin-tests${{ matrix.artifact }}\"\n+          tar -xf \"${HOME}\/jdk-linux-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_linux-x64_bin-tests${{ matrix.artifact }}.tar.gz\" -C \"${HOME}\/jdk-linux-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_linux-x64_bin-tests${{ matrix.artifact }}\"\n@@ -259,1 +287,1 @@\n-          imageroot=`find ${HOME}\/jdk-linux-x64${{ matrix.artifact }}\/jdk-16-internal+0_linux-x64_bin${{ matrix.artifact }} -name release -type f`\n+          imageroot=`find ${HOME}\/jdk-linux-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_linux-x64_bin${{ matrix.artifact }} -name release -type f`\n@@ -265,2 +293,2 @@\n-          TEST_IMAGE_DIR=${HOME}\/jdk-linux-x64${{ matrix.artifact }}\/jdk-16-internal+0_linux-x64_bin-tests${{ matrix.artifact }}\n-          BOOT_JDK=${HOME}\/bootjdk\/${BOOT_JDK_VERSION}\/jdk-${BOOT_JDK_VERSION}\n+          TEST_IMAGE_DIR=${HOME}\/jdk-linux-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_linux-x64_bin-tests${{ matrix.artifact }}\n+          BOOT_JDK=${HOME}\/bootjdk\/${BOOT_JDK_VERSION}\n@@ -305,3 +333,5 @@\n-      BOOT_JDK_FILENAME: \"openjdk-14.0.2_windows-x64_bin.zip\"\n-      BOOT_JDK_URL: \"https:\/\/download.java.net\/java\/GA\/jdk14.0.2\/205943a0976c4ed48cb16f1043c5c647\/12\/GPL\/openjdk-14.0.2_windows-x64_bin.zip\"\n-      BOOT_JDK_SHA256: \"20600c0bda9d1db9d20dbe1ab656a5f9175ffb990ef3df6af5d994673e4d8ff9\"\n+      JDK_VERSION: \"${{ fromJson(needs.prerequisites.outputs.dependencies).DEFAULT_VERSION_FEATURE }}\"\n+      BOOT_JDK_VERSION: \"${{ fromJson(needs.prerequisites.outputs.dependencies).BOOT_JDK_VERSION }}\"\n+      BOOT_JDK_FILENAME: \"${{ fromJson(needs.prerequisites.outputs.dependencies).WINDOWS_X64_BOOT_JDK_FILENAME }}\"\n+      BOOT_JDK_URL: \"${{ fromJson(needs.prerequisites.outputs.dependencies).WINDOWS_X64_BOOT_JDK_URL }}\"\n+      BOOT_JDK_SHA256: \"${{ fromJson(needs.prerequisites.outputs.dependencies).WINDOWS_X64_BOOT_JDK_SHA256 }}\"\n@@ -336,1 +366,1 @@\n-          key: bootjdk-${{ runner.os }}-${{ env.BOOT_JDK_VERSION }}-v1\n+          key: bootjdk-${{ runner.os }}-${{ env.BOOT_JDK_VERSION }}-${{ env.BOOT_JDK_SHA256 }}-v1\n@@ -345,0 +375,1 @@\n+          Get-ChildItem \"$HOME\\bootjdk\\$env:BOOT_JDK_VERSION\\*\\*\" | Move-Item -Destination \"$HOME\\bootjdk\\$env:BOOT_JDK_VERSION\"\n@@ -351,1 +382,1 @@\n-          ref: ${{ env.GTEST_VERSION }}\n+          ref: \"release-${{ fromJson(needs.prerequisites.outputs.dependencies).GTEST_VERSION }}\"\n@@ -357,1 +388,1 @@\n-          name: jtreg_${{ env.JTREG_VERSION }}_${{ env.bundleid }}\n+          name: jtreg_${{ env.bundleid }}\n@@ -369,1 +400,1 @@\n-          --with-boot-jdk=\"$HOME\/bootjdk\/$env:BOOT_JDK_VERSION\/jdk-$env:BOOT_JDK_VERSION\" \n+          --with-boot-jdk=\"$HOME\/bootjdk\/$env:BOOT_JDK_VERSION\" \n@@ -388,3 +419,3 @@\n-            jdk\/build\/windows-x64\/bundles\/jdk-16-internal+0_windows-x64_bin${{ matrix.artifact }}.zip\n-            jdk\/build\/windows-x64\/bundles\/jdk-16-internal+0_windows-x64_bin-tests${{ matrix.artifact }}.tar.gz\n-            jdk\/build\/windows-x64\/bundles\/jdk-16-internal+0_windows-x64_bin${{ matrix.artifact }}-symbols.tar.gz\n+            jdk\/build\/windows-x64\/bundles\/jdk-${{ env.JDK_VERSION }}-internal+0_windows-x64_bin${{ matrix.artifact }}.zip\n+            jdk\/build\/windows-x64\/bundles\/jdk-${{ env.JDK_VERSION }}-internal+0_windows-x64_bin-tests${{ matrix.artifact }}.tar.gz\n+            jdk\/build\/windows-x64\/bundles\/jdk-${{ env.JDK_VERSION }}-internal+0_windows-x64_bin${{ matrix.artifact }}-symbols.tar.gz\n@@ -396,1 +427,3 @@\n-    needs: windows_x64_build\n+    needs:\n+      - prerequisites\n+      - windows_x64_build\n@@ -436,0 +469,7 @@\n+    env:\n+      JDK_VERSION: \"${{ fromJson(needs.prerequisites.outputs.dependencies).DEFAULT_VERSION_FEATURE }}\"\n+      BOOT_JDK_VERSION: \"${{ fromJson(needs.prerequisites.outputs.dependencies).BOOT_JDK_VERSION }}\"\n+      BOOT_JDK_FILENAME: \"${{ fromJson(needs.prerequisites.outputs.dependencies).WINDOWS_X64_BOOT_JDK_FILENAME }}\"\n+      BOOT_JDK_URL: \"${{ fromJson(needs.prerequisites.outputs.dependencies).WINDOWS_X64_BOOT_JDK_URL }}\"\n+      BOOT_JDK_SHA256: \"${{ fromJson(needs.prerequisites.outputs.dependencies).WINDOWS_X64_BOOT_JDK_SHA256 }}\"\n+\n@@ -448,1 +488,1 @@\n-          key: bootjdk-${{ runner.os }}-${{ env.BOOT_JDK_VERSION }}-v1\n+          key: bootjdk-${{ runner.os }}-${{ env.BOOT_JDK_VERSION }}-${{ env.BOOT_JDK_SHA256 }}-v1\n@@ -457,0 +497,1 @@\n+          Get-ChildItem \"$HOME\\bootjdk\\$env:BOOT_JDK_VERSION\\*\\*\" | Move-Item -Destination \"$HOME\\bootjdk\\$env:BOOT_JDK_VERSION\"\n@@ -475,1 +516,1 @@\n-          name: jtreg_${{ env.JTREG_VERSION }}_${{ env.bundleid }}\n+          name: jtreg_${{ env.bundleid }}\n@@ -486,2 +527,2 @@\n-          mkdir -p \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-16-internal+0_windows-x64_bin${{ matrix.artifact }}\"\n-          tar -xf \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-16-internal+0_windows-x64_bin${{ matrix.artifact }}.zip\" -C \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-16-internal+0_windows-x64_bin${{ matrix.artifact }}\"\n+          mkdir -p \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_windows-x64_bin${{ matrix.artifact }}\"\n+          tar -xf \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_windows-x64_bin${{ matrix.artifact }}.zip\" -C \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_windows-x64_bin${{ matrix.artifact }}\"\n@@ -491,2 +532,2 @@\n-          mkdir -p \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-16-internal+0_windows-x64_bin${{ matrix.artifact }}-symbols\"\n-          tar -xf \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-16-internal+0_windows-x64_bin${{ matrix.artifact }}-symbols.tar.gz\" -C \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-16-internal+0_windows-x64_bin${{ matrix.artifact }}-symbols\"\n+          mkdir -p \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_windows-x64_bin${{ matrix.artifact }}-symbols\"\n+          tar -xf \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_windows-x64_bin${{ matrix.artifact }}-symbols.tar.gz\" -C \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_windows-x64_bin${{ matrix.artifact }}-symbols\"\n@@ -496,2 +537,2 @@\n-          mkdir -p \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-16-internal+0_windows-x64_bin-tests${{ matrix.artifact }}\"\n-          tar -xf \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-16-internal+0_windows-x64_bin-tests${{ matrix.artifact }}.tar.gz\" -C \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-16-internal+0_windows-x64_bin-tests${{ matrix.artifact }}\"\n+          mkdir -p \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_windows-x64_bin-tests${{ matrix.artifact }}\"\n+          tar -xf \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_windows-x64_bin-tests${{ matrix.artifact }}.tar.gz\" -C \"${HOME}\/jdk-windows-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_windows-x64_bin-tests${{ matrix.artifact }}\"\n@@ -500,1 +541,1 @@\n-        run: echo (\"::set-env name=imageroot::\" + (Get-ChildItem -Path $HOME\/jdk-windows-x64${{ matrix.artifact }}\/jdk-16-internal+0_windows-x64_bin${{ matrix.artifact }} -Filter release -Recurse -ErrorAction SilentlyContinue -Force).DirectoryName)\n+        run: echo (\"::set-env name=imageroot::\" + (Get-ChildItem -Path $HOME\/jdk-windows-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_windows-x64_bin${{ matrix.artifact }} -Filter release -Recurse -ErrorAction SilentlyContinue -Force).DirectoryName)\n@@ -508,2 +549,2 @@\n-          $env:TEST_IMAGE_DIR = cygpath \"$HOME\/jdk-windows-x64${{ matrix.artifact }}\/jdk-16-internal+0_windows-x64_bin-tests${{ matrix.artifact }}\" ;\n-          $env:BOOT_JDK = cygpath \"$HOME\/bootjdk\/$env:BOOT_JDK_VERSION\/jdk-$env:BOOT_JDK_VERSION\" ;\n+          $env:TEST_IMAGE_DIR = cygpath \"$HOME\/jdk-windows-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_windows-x64_bin-tests${{ matrix.artifact }}\" ;\n+          $env:BOOT_JDK = cygpath \"$HOME\/bootjdk\/$env:BOOT_JDK_VERSION\" ;\n@@ -549,3 +590,5 @@\n-      BOOT_JDK_FILENAME: \"openjdk-14.0.2_osx-x64_bin.tar.gz\"\n-      BOOT_JDK_URL: \"https:\/\/download.java.net\/java\/GA\/jdk14.0.2\/205943a0976c4ed48cb16f1043c5c647\/12\/GPL\/openjdk-14.0.2_osx-x64_bin.tar.gz\"\n-      BOOT_JDK_SHA256: \"386a96eeef63bf94b450809d69ceaa1c9e32a97230e0a120c1b41786b743ae84\"\n+      JDK_VERSION: \"${{ fromJson(needs.prerequisites.outputs.dependencies).DEFAULT_VERSION_FEATURE }}\"\n+      BOOT_JDK_VERSION: \"${{ fromJson(needs.prerequisites.outputs.dependencies).BOOT_JDK_VERSION }}\"\n+      BOOT_JDK_FILENAME: \"${{ fromJson(needs.prerequisites.outputs.dependencies).MACOS_X64_BOOT_JDK_FILENAME }}\"\n+      BOOT_JDK_URL: \"${{ fromJson(needs.prerequisites.outputs.dependencies).MACOS_X64_BOOT_JDK_URL }}\"\n+      BOOT_JDK_SHA256: \"${{ fromJson(needs.prerequisites.outputs.dependencies).MACOS_X64_BOOT_JDK_SHA256 }}\"\n@@ -567,1 +610,1 @@\n-          key: bootjdk-${{ runner.os }}-${{ env.BOOT_JDK_VERSION }}-v2\n+          key: bootjdk-${{ runner.os }}-${{ env.BOOT_JDK_VERSION }}-${{ env.BOOT_JDK_SHA256 }}-v1\n@@ -575,0 +618,1 @@\n+          mv \"${HOME}\/bootjdk\/${BOOT_JDK_VERSION}\/\"*\/* \"${HOME}\/bootjdk\/${BOOT_JDK_VERSION}\/\"\n@@ -580,1 +624,1 @@\n-          name: jtreg_${{ env.JTREG_VERSION }}_${{ env.bundleid }}\n+          name: jtreg_${{ env.bundleid }}\n@@ -587,1 +631,1 @@\n-          ref: ${{ env.GTEST_VERSION }}\n+          ref: \"release-${{ fromJson(needs.prerequisites.outputs.dependencies).GTEST_VERSION }}\"\n@@ -600,1 +644,1 @@\n-          --with-boot-jdk=${HOME}\/bootjdk\/${BOOT_JDK_VERSION}\/jdk-${BOOT_JDK_VERSION}.jdk\/Contents\/Home\n+          --with-boot-jdk=${HOME}\/bootjdk\/${BOOT_JDK_VERSION}\/Contents\/Home\n@@ -617,2 +661,2 @@\n-            jdk\/build\/macos-x64\/bundles\/jdk-16-internal+0_osx-x64_bin${{ matrix.artifact }}.tar.gz\n-            jdk\/build\/macos-x64\/bundles\/jdk-16-internal+0_osx-x64_bin-tests${{ matrix.artifact }}.tar.gz\n+            jdk\/build\/macos-x64\/bundles\/jdk-${{ env.JDK_VERSION }}-internal+0_osx-x64_bin${{ matrix.artifact }}.tar.gz\n+            jdk\/build\/macos-x64\/bundles\/jdk-${{ env.JDK_VERSION }}-internal+0_osx-x64_bin-tests${{ matrix.artifact }}.tar.gz\n@@ -624,1 +668,3 @@\n-    needs: macos_x64_build\n+    needs:\n+      - prerequisites\n+      - macos_x64_build\n@@ -664,0 +710,7 @@\n+    env:\n+      JDK_VERSION: \"${{ fromJson(needs.prerequisites.outputs.dependencies).DEFAULT_VERSION_FEATURE }}\"\n+      BOOT_JDK_VERSION: \"${{ fromJson(needs.prerequisites.outputs.dependencies).BOOT_JDK_VERSION }}\"\n+      BOOT_JDK_FILENAME: \"${{ fromJson(needs.prerequisites.outputs.dependencies).MACOS_X64_BOOT_JDK_FILENAME }}\"\n+      BOOT_JDK_URL: \"${{ fromJson(needs.prerequisites.outputs.dependencies).MACOS_X64_BOOT_JDK_URL }}\"\n+      BOOT_JDK_SHA256: \"${{ fromJson(needs.prerequisites.outputs.dependencies).MACOS_X64_BOOT_JDK_SHA256 }}\"\n+\n@@ -676,1 +729,1 @@\n-          key: bootjdk-${{ runner.os }}-${{ env.BOOT_JDK_VERSION }}-v1\n+          key: bootjdk-${{ runner.os }}-${{ env.BOOT_JDK_VERSION }}-${{ env.BOOT_JDK_SHA256 }}-v1\n@@ -684,0 +737,1 @@\n+          mv \"${HOME}\/bootjdk\/${BOOT_JDK_VERSION}\/\"*\/* \"${HOME}\/bootjdk\/${BOOT_JDK_VERSION}\/\"\n@@ -689,1 +743,1 @@\n-          name: jtreg_${{ env.JTREG_VERSION }}_${{ env.bundleid }}\n+          name: jtreg_${{ env.bundleid }}\n@@ -700,2 +754,2 @@\n-          mkdir -p \"${HOME}\/jdk-macos-x64${{ matrix.artifact }}\/jdk-16-internal+0_osx-x64_bin${{ matrix.artifact }}\"\n-          tar -xf \"${HOME}\/jdk-macos-x64${{ matrix.artifact }}\/jdk-16-internal+0_osx-x64_bin${{ matrix.artifact }}.tar.gz\" -C \"${HOME}\/jdk-macos-x64${{ matrix.artifact }}\/jdk-16-internal+0_osx-x64_bin${{ matrix.artifact }}\"\n+          mkdir -p \"${HOME}\/jdk-macos-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_osx-x64_bin${{ matrix.artifact }}\"\n+          tar -xf \"${HOME}\/jdk-macos-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_osx-x64_bin${{ matrix.artifact }}.tar.gz\" -C \"${HOME}\/jdk-macos-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_osx-x64_bin${{ matrix.artifact }}\"\n@@ -705,2 +759,2 @@\n-          mkdir -p \"${HOME}\/jdk-macos-x64${{ matrix.artifact }}\/jdk-16-internal+0_osx-x64_bin-tests${{ matrix.artifact }}\"\n-          tar -xf \"${HOME}\/jdk-macos-x64${{ matrix.artifact }}\/jdk-16-internal+0_osx-x64_bin-tests${{ matrix.artifact }}.tar.gz\" -C \"${HOME}\/jdk-macos-x64${{ matrix.artifact }}\/jdk-16-internal+0_osx-x64_bin-tests${{ matrix.artifact }}\"\n+          mkdir -p \"${HOME}\/jdk-macos-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_osx-x64_bin-tests${{ matrix.artifact }}\"\n+          tar -xf \"${HOME}\/jdk-macos-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_osx-x64_bin-tests${{ matrix.artifact }}.tar.gz\" -C \"${HOME}\/jdk-macos-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_osx-x64_bin-tests${{ matrix.artifact }}\"\n@@ -713,1 +767,1 @@\n-          imageroot=`find ${HOME}\/jdk-macos-x64${{ matrix.artifact }}\/jdk-16-internal+0_osx-x64_bin${{ matrix.artifact }} -name release -type f`\n+          imageroot=`find ${HOME}\/jdk-macos-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_osx-x64_bin${{ matrix.artifact }} -name release -type f`\n@@ -719,2 +773,2 @@\n-          TEST_IMAGE_DIR=${HOME}\/jdk-macos-x64${{ matrix.artifact }}\/jdk-16-internal+0_osx-x64_bin-tests${{ matrix.artifact }}\n-          BOOT_JDK=${HOME}\/bootjdk\/${BOOT_JDK_VERSION}\/jdk-${BOOT_JDK_VERSION}.jdk\/Contents\/Home\n+          TEST_IMAGE_DIR=${HOME}\/jdk-macos-x64${{ matrix.artifact }}\/jdk-${{ env.JDK_VERSION }}-internal+0_osx-x64_bin-tests${{ matrix.artifact }}\n+          BOOT_JDK=${HOME}\/bootjdk\/${BOOT_JDK_VERSION}\/Contents\/Home\n","filename":".github\/workflows\/submit.yml","additions":122,"deletions":68,"binary":false,"changes":190,"status":"modified"},{"patch":"@@ -0,0 +1,43 @@\n+#\n+# Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.  Oracle designates this\n+# particular file as subject to the \"Classpath\" exception as provided\n+# by Oracle in the LICENSE file that accompanied this code.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+# Versions and download locations for dependencies used by pre-submit testing.\n+\n+BOOT_JDK_VERSION=\"14\"\n+JTREG_VERSION=\"5.1\"\n+JTREG_BUILD=\"b01\"\n+GTEST_VERSION=\"1.8.1\"\n+\n+LINUX_X64_BOOT_JDK_FILENAME=\"openjdk-14.0.2_linux-x64_bin.tar.gz\"\n+LINUX_X64_BOOT_JDK_URL=\"https:\/\/download.java.net\/java\/GA\/jdk14.0.2\/205943a0976c4ed48cb16f1043c5c647\/12\/GPL\/openjdk-14.0.2_linux-x64_bin.tar.gz\"\n+LINUX_X64_BOOT_JDK_SHA256=\"91310200f072045dc6cef2c8c23e7e6387b37c46e9de49623ce0fa461a24623d\"\n+\n+WINDOWS_X64_BOOT_JDK_FILENAME=\"openjdk-14.0.2_windows-x64_bin.zip\"\n+WINDOWS_X64_BOOT_JDK_URL=\"https:\/\/download.java.net\/java\/GA\/jdk14.0.2\/205943a0976c4ed48cb16f1043c5c647\/12\/GPL\/openjdk-14.0.2_windows-x64_bin.zip\"\n+WINDOWS_X64_BOOT_JDK_SHA256=\"20600c0bda9d1db9d20dbe1ab656a5f9175ffb990ef3df6af5d994673e4d8ff9\"\n+\n+MACOS_X64_BOOT_JDK_FILENAME=\"openjdk-14.0.2_osx-x64_bin.tar.gz\"\n+MACOS_X64_BOOT_JDK_URL=\"https:\/\/download.java.net\/java\/GA\/jdk14.0.2\/205943a0976c4ed48cb16f1043c5c647\/12\/GPL\/openjdk-14.0.2_osx-x64_bin.tar.gz\"\n+MACOS_X64_BOOT_JDK_SHA256=\"386a96eeef63bf94b450809d69ceaa1c9e32a97230e0a120c1b41786b743ae84\"\n","filename":"make\/conf\/test-dependencies","additions":43,"deletions":0,"binary":false,"changes":43,"status":"added"}]}