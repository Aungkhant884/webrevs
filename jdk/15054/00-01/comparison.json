{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,0 @@\n-import javax.swing.*;\n@@ -34,0 +33,3 @@\n+import javax.swing.JComponent;\n+import javax.swing.JSeparator;\n+import javax.swing.LookAndFeel;\n@@ -155,0 +157,1 @@\n+\n@@ -158,4 +161,3 @@\n-            return new Dimension(d.width, Integer.MAX_VALUE);\n-        }\n-        else {\n-            return new Dimension(Integer.MAX_VALUE, d.height);\n+            return new Dimension(d.width, Short.MAX_VALUE);\n+        } else {\n+            return new Dimension(Short.MAX_VALUE, d.height);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicSeparatorUI.java","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -54,0 +54,1 @@\n+    private static JSeparator separator;\n@@ -58,1 +59,2 @@\n-    private static volatile int btnWidth;\n+    private static volatile int sepWidth;\n+    private static volatile int sepPrefWidth;\n@@ -71,1 +73,2 @@\n-                toolBar.add(new JSeparator(SwingConstants.VERTICAL));\n+                separator = new JSeparator(SwingConstants.VERTICAL);\n+                toolBar.add(separator);\n@@ -86,1 +89,2 @@\n-                btnWidth = btn.getWidth();\n+                sepWidth = separator.getSize().width;\n+                sepPrefWidth = separator.getPreferredSize().width;\n@@ -88,19 +92,5 @@\n-            boolean passed = true;\n-            System.out.println(\"point \" + pt + \" size \" + size +\n-                                \" btn width \" + btn.getWidth());\n-\n-            \/\/ Capture button width area after 2 buttons which shouldn't be red\n-            BufferedImage img = robot.createScreenCapture(\n-                new Rectangle(pt.x + btnWidth*2 + 20, pt.y, btnWidth, size.height));\n-\n-            int y = img.getHeight() \/ 2;\n-            for (int x = 10; x < img.getWidth(); x += 10) {\n-                System.out.println(\"x \" + x + \" y \" + y +\n-                                   \" color: \" + new Color(img.getRGB(x, y)));\n-                Color c = new Color(img.getRGB(x, y));\n-                if (c.equals(Color.RED)) {\n-                    passed = false;\n-                    break;\n-                }\n-            }\n-            if (!passed) {\n+            if (separator.getSize().width != separator.getPreferredSize().width) {\n+                System.out.println(\"size \" + sepWidth);\n+                System.out.println(\"preferredsize \" + sepPrefWidth);\n+                BufferedImage img = robot.createScreenCapture(\n+                    new Rectangle(pt.x, pt.y, size.width, size.height));\n@@ -108,1 +98,1 @@\n-                throw new RuntimeException(\"Separator takes more space\");\n+                throw new RuntimeException(\"separator size is too wide\");\n","filename":"test\/jdk\/javax\/swing\/JToolBar\/ToolBarSeparatorTest.java","additions":13,"deletions":23,"binary":false,"changes":36,"status":"modified"}]}