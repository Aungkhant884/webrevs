{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,0 +25,1 @@\n+\n@@ -27,5 +28,13 @@\n-import java.awt.*;\n-import javax.swing.*;\n-import javax.swing.plaf.*;\n-import javax.swing.border.*;\n-import javax.swing.plaf.basic.*;\n+import java.awt.Color;\n+import java.awt.Component;\n+import java.awt.Container;\n+import java.awt.Dimension;\n+import java.awt.Graphics;\n+import java.awt.Insets;\n+import java.awt.LayoutManager;\n+import java.awt.Rectangle;\n+import java.awt.event.KeyListener;\n+import java.awt.event.MouseMotionAdapter;\n+import java.awt.event.MouseMotionListener;\n+import java.beans.PropertyChangeEvent;\n+import java.beans.PropertyChangeListener;\n@@ -33,2 +42,11 @@\n-import java.awt.event.*;\n-import java.beans.*;\n+\n+import javax.swing.Icon;\n+import javax.swing.JComboBox;\n+import javax.swing.JComponent;\n+import javax.swing.ListCellRenderer;\n+import javax.swing.UIManager;\n+import javax.swing.border.Border;\n+import javax.swing.plaf.ComponentUI;\n+import javax.swing.plaf.basic.BasicComboBoxUI;\n+import javax.swing.plaf.basic.BasicComboPopup;\n+import javax.swing.plaf.basic.ComboPopup;\n@@ -62,10 +80,0 @@\n-\n-        Runnable initCode = new Runnable() {\n-            public void run(){\n-                if ( motifGetEditor() != null ) {\n-                    motifGetEditor().setBackground( UIManager.getColor( \"text\" ) );\n-                }\n-            }\n-        };\n-\n-        SwingUtilities.invokeLater( initCode );\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/java\/swing\/plaf\/motif\/MotifComboBoxUI.java","additions":26,"deletions":18,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,7 +28,9 @@\n-import java.awt.*;\n-import java.awt.event.*;\n-import javax.swing.*;\n-import javax.swing.plaf.*;\n-import javax.swing.event.*;\n-import javax.swing.plaf.basic.*;\n-import java.beans.PropertyChangeListener;\n+import java.awt.Component;\n+import java.awt.Dimension;\n+import java.awt.Graphics;\n+import java.awt.Insets;\n+import java.awt.Rectangle;\n+import java.awt.event.FocusEvent;\n+import java.awt.event.FocusListener;\n+import java.awt.event.MouseEvent;\n+import java.awt.event.MouseListener;\n@@ -36,0 +38,21 @@\n+import java.beans.PropertyChangeListener;\n+\n+import javax.swing.ComboBoxEditor;\n+import javax.swing.DefaultButtonModel;\n+import javax.swing.Icon;\n+import javax.swing.JButton;\n+import javax.swing.JComboBox;\n+import javax.swing.JComponent;\n+import javax.swing.JLabel;\n+import javax.swing.JList;\n+import javax.swing.JPanel;\n+import javax.swing.JTextField;\n+import javax.swing.ListCellRenderer;\n+import javax.swing.SwingConstants;\n+import javax.swing.event.PopupMenuEvent;\n+import javax.swing.event.PopupMenuListener;\n+import javax.swing.plaf.ComponentUI;\n+import javax.swing.plaf.UIResource;\n+import javax.swing.plaf.basic.BasicComboBoxEditor;\n+import javax.swing.plaf.basic.BasicComboBoxUI;\n+import javax.swing.plaf.basic.ComboPopup;\n@@ -733,3 +756,3 @@\n-        public void unregister(){\n-            comboBox.removePropertyChangeListener(this);\n-            if (editorComponent!=null){\n+        public void unregister() {\n+            comboBox.removePropertyChangeListener(\"editor\", this);\n+            if (editorComponent != null) {\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/synth\/SynthComboBoxUI.java","additions":34,"deletions":11,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,4 +28,16 @@\n-import java.awt.*;\n-import java.awt.event.*;\n-import javax.swing.*;\n-import javax.swing.plaf.*;\n+import java.awt.BorderLayout;\n+import java.awt.Graphics;\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+import java.beans.PropertyChangeEvent;\n+import java.beans.PropertyChangeListener;\n+import java.beans.PropertyVetoException;\n+\n+import javax.swing.Icon;\n+import javax.swing.JComponent;\n+import javax.swing.JInternalFrame;\n+import javax.swing.JPopupMenu;\n+import javax.swing.JToggleButton;\n+import javax.swing.ToolTipManager;\n+import javax.swing.UIManager;\n+import javax.swing.plaf.ComponentUI;\n@@ -33,2 +45,0 @@\n-import java.beans.*;\n-\n@@ -92,0 +102,14 @@\n+    @Override\n+    protected void uninstallComponents() {\n+        \/\/ Uninstall the listeners here because the iconPane will be set to null\n+        \/\/ in the super.uninstallComponents()\n+        if (iconPane instanceof JToggleButton) {\n+            ((JToggleButton) iconPane).removeActionListener(handler);\n+            frame.removePropertyChangeListener(this);\n+        } else if (iconPane instanceof SynthInternalFrameTitlePane) {\n+            \/\/ Uninstall the listeners added by the  SynthInternalFrameTitlePane\n+            ((SynthInternalFrameTitlePane) iconPane).uninstallListeners();\n+        }\n+        super.uninstallComponents();\n+    }\n+\n@@ -111,4 +135,0 @@\n-        if (iconPane instanceof JToggleButton) {\n-            ((JToggleButton)iconPane).removeActionListener(handler);\n-            frame.removePropertyChangeListener(this);\n-        }\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/synth\/SynthDesktopIconUI.java","additions":31,"deletions":11,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -79,1 +79,1 @@\n- * @bug 8134947 8253977\n+ * @bug 8134947 8253977 8240709\n@@ -94,3 +94,1 @@\n-                if (name.contains(\"OS X\") || name.contains(\"Metal\")) {\n-                    tasks.add(runProcess(laf));\n-                }\n+                tasks.add(runProcess(laf));\n","filename":"test\/jdk\/javax\/swing\/UI\/UnninstallUIMemoryLeaks\/UnninstallUIMemoryLeaks.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"}]}