{"files":[{"patch":"@@ -2897,1 +2897,1 @@\n-            if (c == '.' && off + 1 < max) {\n+            if (c == '.') {\n@@ -2933,13 +2933,7 @@\n-            for (int size = 0; off < max; c = next(++off), size++) {\n-                if (!isDigit(c)) {\n-                    if (size > 0) {\n-                        if (c == '$') {\n-                            ++off;\n-                            argSize = size + 1;\n-                            if (off < max) {\n-                                c = s.charAt(off);\n-                            }\n-                        } else {\n-                            off = start;\n-                            c = first;\n-                        }\n+            int i = off;\n+            for (; i < max && isDigit(c); c = next(++i));  \/\/ empty body\n+            if (i > off) {\n+                if (c == '$') {\n+                    ++i;\n+                    if (i < max) {\n+                        c = s.charAt(i);\n@@ -2947,1 +2941,5 @@\n-                    break;\n+\n+                    argSize = i - off;\n+                    off = i;\n+                } else {\n+                    c = first;\n@@ -2954,6 +2952,4 @@\n-            for (int size = 0; off < max; c = next(++off), size++) {\n-                if (!Flags.isFlag(c)) {\n-                    flagSize = size;\n-                    break;\n-                }\n-            }\n+            int i = off;\n+            for (; i < max && Flags.isFlag(c); c = next(++i));  \/\/ empty body\n+            flagSize = i - off;\n+            off = i;\n@@ -2964,6 +2960,4 @@\n-            for (int size = 0; off < max; c = next(++off), size++) {\n-                if (!isDigit(c)) {\n-                    widthSize = size;\n-                    break;\n-                }\n-            }\n+            int i = off;\n+            for (; i < max && isDigit(c); c = next(++i));  \/\/ empty body\n+            widthSize = i - off;\n+            off = i;\n@@ -2974,9 +2968,6 @@\n-            c = s.charAt(++off);\n-            for (int size = 0; off < max; c = next(++off), size++) {\n-                if (!isDigit(c)) {\n-                    if (size > 0) {\n-                        return size + 1;\n-                    } else {\n-                        break;\n-                    }\n-                }\n+            int i = ++off;\n+            for (; i < max && isDigit(c = s.charAt(i)); ++i);  \/\/ empty body\n+            if (i != off) {\n+                int size = i - off + 1;\n+                off = i;\n+                return size;\n@@ -2984,1 +2975,0 @@\n-\n","filename":"src\/java.base\/share\/classes\/java\/util\/Formatter.java","additions":27,"deletions":37,"binary":false,"changes":64,"status":"modified"},{"patch":"@@ -402,0 +402,6 @@\n+\n+        \/\/ non-conversion\n+        tryCatch(\"%12\", UnknownFormatConversionException.class);\n+        tryCatch(\"% \", UnknownFormatConversionException.class);\n+        tryCatch(\"%,\", UnknownFormatConversionException.class);\n+        tryCatch(\"%03.2\", UnknownFormatConversionException.class);\n","filename":"test\/jdk\/java\/util\/Formatter\/BasicInt.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"}]}