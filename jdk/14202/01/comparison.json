{"files":[{"patch":"@@ -241,1 +241,16 @@\n-        ifneq ($$(words $$(all_spec_files)), 1)\n+        GIT := $$(shell command -v git 2>\/dev\/null)\n+        ifneq ($$(GIT),)\n+          GIT_IS_INSIDE_WORK_TREE := $$(shell $$(GIT) rev-parse --is-inside-work-tree 2>\/dev\/null)\n+          ifeq ($$(GIT_IS_INSIDE_WORK_TREE), true)\n+            GIT_CURRENT_BRANCH := $$(shell $$(GIT) rev-parse --abbrev-ref HEAD)\n+            GIT_BRANCH_CONFS := $$(strip $$(foreach var, $$(all_confs), \\\n+                $$(if $$(findstring $$(GIT_CURRENT_BRANCH), $$(var)), $$(var))))\n+          endif\n+        endif\n+        ifeq ($$(words $$(all_spec_files)), 1)\n+          # We found exactly one configuration, use it\n+          SPECS := $$(strip $$(all_spec_files))\n+        else ifeq ($$(words $$(GIT_BRANCH_CONFS)), 1)\n+          # We found exactly one configuration containing the name of the checked out Git branch, use it\n+          SPECS := $$(build_dir)\/$$(GIT_BRANCH_CONFS)\/spec.gmk\n+        else\n@@ -249,3 +264,0 @@\n-\n-        # We found exactly one configuration, use it\n-        SPECS := $$(strip $$(all_spec_files))\n","filename":"make\/InitSupport.gmk","additions":16,"deletions":4,"binary":false,"changes":20,"status":"modified"}]}