{"files":[{"patch":"@@ -241,1 +241,15 @@\n-        ifneq ($$(words $$(all_spec_files)), 1)\n+        GIT := $$(shell command -v git 2>\/dev\/null)\n+        ifneq ($$(GIT),)\n+          GIT_IS_INSIDE_WORK_TREE := $$(shell $$(GIT) rev-parse --is-inside-work-tree 2>\/dev\/null)\n+          ifeq ($$(GIT_IS_INSIDE_WORK_TREE), true)\n+            GIT_CURRENT_BRANCH := $$(shell $$(GIT) rev-parse --abbrev-ref HEAD)\n+            GIT_BRANCH_CONF := $$(strip $$(filter $$(GIT_CURRENT_BRANCH), $$(all_confs)))\n+          endif\n+        endif\n+        ifeq ($$(words $$(all_spec_files)), 1)\n+          # We found exactly one configuration, use it\n+          SPECS := $$(strip $$(all_spec_files))\n+        else ifeq ($$(words $$(GIT_BRANCH_CONF)), 1)\n+          # We found exactly one configuration with the name of the checked out Git branch, use it\n+          SPECS := $$(build_dir)\/$$(GIT_BRANCH_CONF)\/spec.gmk\n+        else\n@@ -249,3 +263,0 @@\n-\n-        # We found exactly one configuration, use it\n-        SPECS := $$(strip $$(all_spec_files))\n","filename":"make\/InitSupport.gmk","additions":15,"deletions":4,"binary":false,"changes":19,"status":"modified"}]}