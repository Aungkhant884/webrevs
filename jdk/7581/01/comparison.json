{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,1 +30,1 @@\n- *      8067796 8224905 8263729 8265173 8272600 8231297\n+ *      8067796 8224905 8263729 8265173 8272600 8231297 8282239\n@@ -1868,8 +1868,6 @@\n-            String[] envp;\n-            String[] envpWin = {\"=C:=\\\\\", \"=ExitValue=3\", \"SystemRoot=\"+systemRoot};\n-            String[] envpOth = {\"=ExitValue=3\", \"=C:=\\\\\"};\n-            if (Windows.is()) {\n-                envp = envpWin;\n-            } else {\n-                envp = envpOth;\n-            }\n+            String[] envp = {\n+                \"=ExitValue=3\",\n+                \"=C:=\\\\\",\n+                (AIX.is() ? \"LIBPATH=\"+libpath : \"\"),\n+                (Windows.is() ? \"SystemRoot=\"+systemRoot : \"\")\n+            };\n@@ -1877,2 +1875,3 @@\n-            String expected = Windows.is() ? \"=C:=\\\\,=ExitValue=3,SystemRoot=\"+systemRoot+\",\" : \"=C:=\\\\,\";\n-            expected = AIX.is() ? expected + \"LIBPATH=\"+libpath+\",\": expected;\n+            String expected = \"=C:=\\\\,\" +\n+                (AIX.is() ? \"LIBPATH=\"+libpath+\",\" : \"\") +\n+                (Windows.is() ? \"=ExitValue=3,SystemRoot=\"+systemRoot+\",\" : \"\");\n@@ -1914,10 +1913,6 @@\n-            String[] envpWin = {\"SystemRoot=\"+systemRoot, \"LC_ALL=C\\u0000\\u0000\", \/\/ Yuck!\n-                             \"FO\\u0000=B\\u0000R\"};\n-            String[] envpOth = {\"LC_ALL=C\\u0000\\u0000\", \/\/ Yuck!\n-                             \"FO\\u0000=B\\u0000R\"};\n-            String[] envp;\n-            if (Windows.is()) {\n-                envp = envpWin;\n-            } else {\n-                envp = envpOth;\n-            }\n+            String[] envp = {\n+                \"LC_ALL=C\\u0000\\u0000\", \/\/ Yuck!\n+                \"FO\\u0000=B\\u0000R\",\n+                (AIX.is() ? \"LIBPATH=\"+libpath : \"\"),\n+                (Windows.is() ? \"SystemRoot=\"+systemRoot : \"\")\n+            };\n@@ -1940,6 +1935,4 @@\n-            check(commandOutput.equals(Windows.is()\n-                    ? \"LC_ALL=C,SystemRoot=\"+systemRoot+\",\"\n-                    : AIX.is()\n-                            ? \"LC_ALL=C,LIBPATH=\"+libpath+\",\"\n-                            : \"LC_ALL=C,\"),\n-                  \"Incorrect handling of envstrings containing NULs\");\n+            String expected = \"LC_ALL=C,\" +\n+                (AIX.is() ? \"LIBPATH=\"+libpath+\",\" : \"\") +\n+                (Windows.is() ? \"SystemRoot=\"+systemRoot+\",\" : \"\");\n+            check(commandOutput.equals(expected), \"Incorrect handling of envstrings containing NULs\");\n","filename":"test\/jdk\/java\/lang\/ProcessBuilder\/Basic.java","additions":21,"deletions":28,"binary":false,"changes":49,"status":"modified"}]}