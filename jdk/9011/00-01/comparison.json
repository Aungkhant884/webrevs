{"files":[{"patch":"@@ -39,0 +39,1 @@\n+import java.awt.image.MultiResolutionImage;\n@@ -130,1 +131,1 @@\n-        if (!compareBufferedImages(bufferedImage, pnBottomImage)) {\n+        if (!Util.compareBufferedImages(bufferedImage, pnBottomImage)) {\n@@ -139,36 +140,0 @@\n-    public static boolean compareBufferedImages(BufferedImage bufferedImage0, BufferedImage bufferedImage1) {\n-        int width = bufferedImage0.getWidth();\n-        int height = bufferedImage0.getHeight();\n-        int colorTolerance = 5;\n-\n-        if (width != bufferedImage1.getWidth() || height != bufferedImage1.getHeight()) {\n-            return false;\n-        }\n-\n-        for (int y = 0; y < height; y++) {\n-            for (int x = 0; x < width; x++) {\n-                Color bufCol0 = new Color(bufferedImage0.getRGB(x, y));\n-                Color bufCol1 = new Color(bufferedImage1.getRGB(x, y));\n-\n-                int red1 = bufCol0.getRed();\n-                int blue1 = bufCol0.getBlue();\n-                int green1 = bufCol0.getGreen();\n-\n-                int red2 = bufCol1.getRed();\n-                int blue2 = bufCol1.getBlue();\n-                int green2 = bufCol1.getGreen();\n-\n-                if ((Math.abs(red1 - red2) > colorTolerance) ||\n-                    (Math.abs(green1 - green2) > colorTolerance) ||\n-                    (Math.abs(blue1 - blue2) > colorTolerance)) {\n-                        System.out.println(\"x \"+ x + \" y \" + y +\n-                            \" rgb1: \" + Integer.toHexString(bufferedImage0.getRGB(x, y)) +\n-                            \" rgb2: \" + Integer.toHexString(bufferedImage1.getRGB(x, y)));\n-                    return false;\n-                }\n-            }\n-        }\n-\n-        return true;\n-    }\n-\n@@ -180,1 +145,3 @@\n-        return robot.createScreenCapture(rect);\n+        MultiResolutionImage img = robot.createMultiResolutionScreenCapture(rect);\n+        return (BufferedImage)img.getResolutionVariant(rect.width, rect.height);\n+        \/\/return robot.createScreenCapture(rect);\n","filename":"test\/jdk\/javax\/swing\/text\/CSSBorder\/6796710\/bug6796710.java","additions":5,"deletions":38,"binary":false,"changes":43,"status":"modified"}]}