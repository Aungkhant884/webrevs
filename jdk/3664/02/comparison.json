{"files":[{"patch":"@@ -377,1 +377,1 @@\n-                        s = sessionCache.get(requestedId.identity);\n+                        s = sessionCache.pull(requestedId.identity);\n","filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/PreSharedKeyExtension.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -178,0 +178,8 @@\n+    \/\/ package-private method, find and remove session from cache\n+    \/\/ return found session\n+    SSLSessionImpl pull(byte[] id) {\n+        if (id != null)\n+            return sessionCache.pull(new SessionId(id));\n+        return null;\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/SSLSessionContextImpl.java","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -563,3 +563,0 @@\n-\n-                \/\/ The session can't be resumed again---remove it from cache\n-                sessionCache.remove(shc.resumingSession.getSessionId());\n","filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/ServerHello.java","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -103,0 +103,5 @@\n+    \/**\n+     * Pull an entry from the cache.\n+     *\/\n+    public abstract V pull(Object key);\n+\n@@ -227,0 +232,4 @@\n+    public V pull(Object key) {\n+        return null;\n+    }\n+\n@@ -415,0 +424,20 @@\n+    public synchronized V pull(Object key) {\n+        emptyQueue();\n+        CacheEntry<K,V> entry = cacheMap.remove(key);\n+        if (entry == null) {\n+            return null;\n+        }\n+        V value;\n+        long time = (lifetime == 0) ? 0 : System.currentTimeMillis();\n+        if (entry.isValid(time)) {\n+            value = entry.getValue();\n+        } else {\n+            if (DEBUG) {\n+                System.out.println(\"Ignoring expired entry\");\n+            }\n+            value = null;\n+        }\n+        entry.invalidate();\n+        return value;\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/sun\/security\/util\/Cache.java","additions":29,"deletions":0,"binary":false,"changes":29,"status":"modified"}]}