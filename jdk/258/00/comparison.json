{"files":[{"patch":"@@ -37,1 +37,0 @@\n-import java.nio.MappedByteBuffer;\n@@ -101,1 +100,1 @@\n-    WeakReference<Object> bufferRef = new WeakReference<>(null);\n+    WeakReference<ByteBuffer> bufferRef = new WeakReference<>(null);\n@@ -188,2 +187,2 @@\n-        MappedByteBuffer mapBuf = (MappedByteBuffer)bufferRef.get();\n-        if (mapBuf == null) {\n+        ByteBuffer bbuf = bufferRef.get();\n+        if (bbuf == null) {\n@@ -205,3 +204,4 @@\n-                mapBuf = fc.map(FileChannel.MapMode.READ_ONLY, 0, fileSize);\n-                mapBuf.position(0);\n-                bufferRef = new WeakReference<>(mapBuf);\n+                bbuf = ByteBuffer.allocate(fileSize);\n+                fc.read(bbuf);\n+                bbuf.position(0);\n+                bufferRef = new WeakReference<>(bbuf);\n@@ -221,1 +221,1 @@\n-        return mapBuf;\n+        return bbuf;\n@@ -271,1 +271,1 @@\n-        ByteBuffer mappedBuf = null;\n+        ByteBuffer bbuf = null;\n@@ -273,1 +273,1 @@\n-            mappedBuf = getBuffer();\n+            bbuf = getBuffer();\n@@ -277,2 +277,2 @@\n-            mappedBuf.position(offset);\n-            return mappedBuf.slice();\n+            bbuf.position(offset);\n+            return bbuf.slice();\n","filename":"src\/java.desktop\/share\/classes\/sun\/font\/Type1Font.java","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"}]}