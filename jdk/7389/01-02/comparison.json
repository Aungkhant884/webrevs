{"files":[{"patch":"@@ -112,1 +112,1 @@\n-                    (int)(total()               \/ K));\n+                    total()                 \/ (int)K);\n@@ -114,1 +114,1 @@\n-      tty->print_cr(\" #%d %s = %dK (hdr %dK, loc %dK, code %dK, stub %dK, [oops %dK, metadata %dK, data %dK, pcs %dK])\",\n+      tty->print_cr(\" #%d %s = %dK (hdr %dK %d%%, loc %dK %d%%, code %dK %d%%, stub %dK %d%%, [oops %dK %d%%, metadata %dK %d%%, data %dK %d%%, pcs %dK %d%%])\",\n@@ -117,9 +117,17 @@\n-                    (int)(total()               \/ K),\n-                    (int)(header_size           \/ K),\n-                    (int)(relocation_size       \/ K),\n-                    (int)(code_size             \/ K),\n-                    (int)(stub_size             \/ K),\n-                    (int)(scopes_oop_size       \/ K),\n-                    (int)(scopes_metadata_size  \/ K),\n-                    (int)(scopes_data_size      \/ K),\n-                    (int)(scopes_pcs_size       \/ K));\n+                    total()                 \/ (int)K,\n+                    header_size             \/ (int)K,\n+                    header_size             * 100 \/ total_size,\n+                    relocation_size         \/ (int)K,\n+                    relocation_size         * 100 \/ total_size,\n+                    code_size               \/ (int)K,\n+                    code_size               * 100 \/ total_size,\n+                    stub_size               \/ (int)K,\n+                    stub_size               * 100 \/ total_size,\n+                    scopes_oop_size         \/ (int)K,\n+                    scopes_oop_size         * 100 \/ total_size,\n+                    scopes_metadata_size    \/ (int)K,\n+                    scopes_metadata_size    * 100 \/ total_size,\n+                    scopes_data_size        \/ (int)K,\n+                    scopes_data_size        * 100 \/ total_size,\n+                    scopes_pcs_size         \/ (int)K,\n+                    scopes_pcs_size         * 100 \/ total_size);\n@@ -1477,1 +1485,10 @@\n-    tty->print_cr(\"Tier %d:\", i);\n+    const char *level_name;\n+    switch (i) {\n+    case CompLevel_none: level_name = \"CompLevel_none\"; break;\n+    case CompLevel_simple: level_name = \"CompLevel_simple\"; break;\n+    case CompLevel_limited_profile: level_name = \"CompLevel_limited_profile\"; break;\n+    case CompLevel_full_profile: level_name = \"CompLevel_full_profile\"; break;\n+    case CompLevel_full_optimization: level_name = \"CompLevel_full_optimization\"; break;\n+    default: assert(false, \"invalid compLevel\");\n+    }\n+    tty->print_cr(\"%s:\", level_name);\n@@ -1485,1 +1502,1 @@\n-  } stubs[] = {\n+  } non_nmethod_blobs[] = {\n@@ -1493,3 +1510,3 @@\n-  tty->print_cr(\"Stubs:\");\n-  for (auto& stub: stubs) {\n-    stub.sizes->print(stub.name);\n+  tty->print_cr(\"Non-nmethod blobs:\");\n+  for (auto& blob: non_nmethod_blobs) {\n+    blob.sizes->print(blob.name);\n","filename":"src\/hotspot\/share\/code\/codeCache.cpp","additions":33,"deletions":16,"binary":false,"changes":49,"status":"modified"}]}