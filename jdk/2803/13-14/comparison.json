{"files":[{"patch":"@@ -613,1 +613,1 @@\n-        \/\/ Enable unbuffered mode to avoid memory consumption and internal buffer copies.\n+        \/\/ Disable buffer mode to avoid memory consumption and internal buffer copies.\n@@ -616,1 +616,1 @@\n-            hprofBufferedOut.fillSegmentSizeAndEnableUnbufferedMode(size);\n+            hprofBufferedOut.fillSegmentSizeAndDisableBufferMode(size);\n@@ -1344,1 +1344,1 @@\n-            unbufferedMode = false;\n+            bufferMode = true;\n@@ -1367,1 +1367,1 @@\n-           if (segmentMode && !unbufferedMode) {\n+           if (segmentMode && bufferMode) {\n@@ -1395,1 +1395,1 @@\n-            if (segmentMode && !unbufferedMode) {\n+            if (segmentMode && bufferMode) {\n@@ -1422,1 +1422,1 @@\n-            if (segmentMode && !unbufferedMode) {\n+            if (segmentMode && bufferMode) {\n@@ -1463,1 +1463,1 @@\n-                unbufferedMode = false;\n+                bufferMode = true;\n@@ -1472,1 +1472,1 @@\n-            if (unbufferedMode) {\n+            if (!bufferMode) {\n@@ -1475,1 +1475,1 @@\n-                unbufferedMode = false;\n+                bufferMode = true;\n@@ -1485,1 +1485,1 @@\n-         * Fill segment size and enable unbuffered mode\n+         * Fill segment size and disable bufferMode\n@@ -1488,1 +1488,1 @@\n-        public void fillSegmentSizeAndEnableUnbufferedMode(int size) throws IOException {\n+        public void fillSegmentSizeAndDisableBufferMode(int size) throws IOException {\n@@ -1490,1 +1490,1 @@\n-            assert unbufferedMode == false;\n+            assert bufferMode == true;\n@@ -1495,4 +1495,2 @@\n-            \/\/ buffer must be empty now.\n-            assert (segmentMode && (segmentWritten == 0) && (unbufferedMode == false)) : \"Wrong Status\";\n-            \/\/ enable unbuffered mode.\n-            unbufferedMode = true;\n+            \/\/ disable buffer mode to write data through to underlying file.\n+            bufferMode = false;\n@@ -1510,2 +1508,2 @@\n-            \/\/ unbuffered mode always flushes data.\n-            if (unbufferedMode) return true;\n+            \/\/ flushes data if not in bufferMode.\n+            if (!bufferMode) return true;\n@@ -1522,1 +1520,1 @@\n-            if (unbufferedMode) {\n+            if (!bufferMode) {\n@@ -1544,2 +1542,1 @@\n-            \/\/ unbuffered mode has assumption that data size is already filled in header.\n-            assert !unbufferedMode;\n+            assert bufferMode == true;\n@@ -1556,1 +1553,1 @@\n-            if (!unbufferedMode) {\n+            if (bufferMode) {\n@@ -1580,1 +1577,1 @@\n-        private boolean unbufferedMode;\n+        private boolean bufferMode;\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/utilities\/HeapHprofBinWriter.java","additions":20,"deletions":23,"binary":false,"changes":43,"status":"modified"}]}