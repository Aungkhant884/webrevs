{"files":[{"patch":"@@ -56,1 +56,0 @@\n-import java.util.HashSet;\n@@ -60,1 +59,0 @@\n-import java.util.Set;\n@@ -76,1 +74,0 @@\n-import sun.net.www.protocol.jar.Handler;\n@@ -213,4 +210,3 @@\n-        \/\/ this URLClassPath constructor is solely for the app classloader, for which we use\n-        \/\/ the system provided jar protocol handler implementation for loading jars\n-        \/\/ in the classpath\n-        this.jarHandler = new Handler();\n+        \/\/ the application class loader uses the built-in protocol handler to avoid protocol\n+        \/\/ handler lookup when opening JAR files on the class path.\n+        this.jarHandler = new sun.net.www.protocol.jar.Handler();\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/loader\/URLClassPath.java","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+import jdk.test.lib.compiler.CompilerUtils;\n@@ -39,1 +40,2 @@\n- * @build jdk.test.lib.util.JarBuilder\n+ * @build jdk.test.lib.util.JarBuilder jdk.test.lib.compiler.CompilerUtils\n+ *        jdk.test.lib.process.ProcessTools\n@@ -113,1 +115,1 @@\n-    \/\/ javac -d <destDir> <javaFile>\n+    \/\/ compile <javaFile> to <destDir>\n@@ -115,7 +117,5 @@\n-        String javacPath = JDKToolFinder.getJDKTool(\"javac\");\n-        ProcessBuilder pb = new ProcessBuilder(javacPath, javaFile.toString(),\n-                \"-d\", destDir.toString());\n-        pb.directory(CWD.toFile());\n-        System.out.println(\"Compiling: \" + pb.command());\n-        OutputAnalyzer analyzer = ProcessTools.executeProcess(pb);\n-        analyzer.shouldHaveExitValue(0);\n+        boolean compiled = CompilerUtils.compile(javaFile, destDir);\n+        if (!compiled) {\n+            \/\/ compilation failure log\/reason would already be available on System.out\/err\n+            throw new AssertionError(\"Compilation failed for \" + javaFile);\n+        }\n","filename":"test\/jdk\/java\/net\/URL\/HandlersPkgPrefix\/LargeClasspathWithPkgPrefix.java","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"}]}