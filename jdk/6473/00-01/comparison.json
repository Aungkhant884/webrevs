{"files":[{"patch":"@@ -1059,2 +1059,4 @@\n-            long * colorBits;\n-            colorBits = (long*)safe_Malloc(MAX_ICON_SIZE * MAX_ICON_SIZE * sizeof(long));\n+\n+            TRY;\n+\n+            long *colorBits = (long*)safe_Malloc(MAX_ICON_SIZE * MAX_ICON_SIZE * sizeof(long));\n@@ -1075,2 +1077,1 @@\n-                long * maskBits;\n-                maskBits = (long*)safe_Malloc(MAX_ICON_SIZE * MAX_ICON_SIZE * sizeof(long));\n+                long *maskBits = (long*)safe_Malloc(MAX_ICON_SIZE * MAX_ICON_SIZE * sizeof(long));\n@@ -1091,2 +1092,3 @@\n-            \/\/ Copy values to java array\n-            env->SetIntArrayRegion(iconBits, 0, nBits, colorBits);\n+                \/\/ Copy values to java array\n+                env->SetIntArrayRegion(iconBits, 0, nBits, colorBits);\n+            }\n@@ -1094,1 +1096,2 @@\n-        }\n+\n+            CATCH_BAD_ALLOC_RET(NULL);\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/ShellFolder2.cpp","additions":10,"deletions":7,"binary":false,"changes":17,"status":"modified"}]}