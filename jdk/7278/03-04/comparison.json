{"files":[{"patch":"@@ -24,1 +24,0 @@\n-import java.awt.FlowLayout;\n@@ -30,0 +29,1 @@\n+import javax.swing.JTextField;\n@@ -38,2 +38,1 @@\n- * @summary Check whether the default button is honored when <Enter> key is\n- * pressed while the focus is on the frame.\n+ * @summary Check whether the default button is honored when <Enter> key is typed.\n@@ -43,2 +42,2 @@\n-    volatile boolean buttonPressed = false;\n-    JFrame frame;\n+    private volatile boolean buttonPressed;\n+    private JFrame frame;\n@@ -48,6 +47,1 @@\n-        try {\n-            test.runTest();\n-        } finally {\n-            test.disposeFrame();\n-        }\n-\n+        test.runTest();\n@@ -75,1 +69,1 @@\n-        frame = new JFrame();\n+        frame = new JFrame(\"Default Button Test\");\n@@ -77,2 +71,2 @@\n-        panel.setLayout(new FlowLayout());\n-        JButton button1 = new JButton(\"button1\");\n+        panel.add(new JTextField(\"Text field\"));\n+        JButton button1 = new JButton(\"Default\");\n@@ -81,3 +75,1 @@\n-\n-        JButton button2 = new JButton(\"button2\");\n-        panel.add(button2);\n+        panel.add(new JButton(\"Button2\"));\n@@ -85,2 +77,0 @@\n-        frame.setLayout(new FlowLayout());\n-\n@@ -88,2 +78,1 @@\n-\n-        frame.setSize(200, 200);\n+        frame.pack();\n@@ -97,0 +86,1 @@\n+        robot.setAutoDelay(100);\n@@ -98,13 +88,12 @@\n-            buttonPressed = false;\n-            String lafName = laf.getClassName();\n-            System.out.println(\"Testing L&F: \" + lafName);\n-            SwingUtilities.invokeAndWait(() -> {\n-                setLookAndFeel(lafName);\n-                createUI();\n-                frame.getRootPane().requestFocus();\n-            });\n-            robot.waitForIdle();\n-            robot.keyPress(KeyEvent.VK_ENTER);\n-            robot.delay(100);\n-            robot.keyRelease(KeyEvent.VK_ENTER);\n-            robot.waitForIdle();\n+            try {\n+                buttonPressed = false;\n+                String lafName = laf.getClassName();\n+                System.out.println(\"Testing L&F: \" + lafName);\n+                SwingUtilities.invokeAndWait(() -> {\n+                    setLookAndFeel(lafName);\n+                    createUI();\n+                });\n+                robot.waitForIdle();\n+                robot.keyPress(KeyEvent.VK_ENTER);\n+                robot.keyRelease(KeyEvent.VK_ENTER);\n+                robot.waitForIdle();\n@@ -112,4 +101,7 @@\n-            if (buttonPressed) {\n-                System.out.println(\"Test Passed for L&F: \" + lafName);\n-            } else {\n-                throw new RuntimeException(\"Test Failed, button not pressed for L&F: \" + lafName);\n+                if (buttonPressed) {\n+                    System.out.println(\"Test Passed for L&F: \" + lafName);\n+                } else {\n+                    throw new RuntimeException(\"Test Failed, Default Button not pressed for L&F: \" + lafName);\n+                }\n+            } finally {\n+                SwingUtilities.invokeAndWait(this::disposeFrame);\n@@ -117,1 +109,0 @@\n-            disposeFrame();\n@@ -120,2 +111,1 @@\n-\n-}\n\\ No newline at end of file\n+}\n","filename":"test\/jdk\/javax\/swing\/JRootPane\/DefaultButtonTest.java","additions":31,"deletions":41,"binary":false,"changes":72,"status":"modified"}]}