{"files":[{"patch":"@@ -24,4 +24,2 @@\n-import javax.swing.*;\n-import java.awt.*;\n-import java.awt.event.ActionEvent;\n-import java.awt.event.ActionListener;\n+import java.awt.FlowLayout;\n+import java.awt.Robot;\n@@ -29,1 +27,6 @@\n-import java.lang.reflect.InvocationTargetException;\n+import javax.swing.JButton;\n+import javax.swing.JFrame;\n+import javax.swing.JPanel;\n+import javax.swing.SwingUtilities;\n+import javax.swing.UIManager;\n+import javax.swing.UnsupportedLookAndFeelException;\n@@ -35,2 +38,2 @@\n- * @summary Check whether the default button is honoured when <Enter> key is\n- * pressed when the focus is on the frame.\n+ * @summary Check whether the default button is honored when <Enter> key is\n+ * pressed while the focus is on the frame.\n@@ -40,7 +43,2 @@\n-    static JFrame frame = new JFrame();\n-    static volatile boolean buttonPressed = false;\n-    boolean testFailed = false;\n-    JButton button1;\n-    Robot robot;\n-    private JPanel panel;\n-    private JButton button2;\n+    volatile boolean buttonPressed = false;\n+    JFrame frame;\n@@ -53,4 +51,1 @@\n-            if (frame != null) {\n-                frame.dispose();\n-                frame = null;\n-            }\n+            test.disposeFrame();\n@@ -61,1 +56,1 @@\n-    private static void setLookAndFeel(UIManager.LookAndFeelInfo laf) {\n+    private static void setLookAndFeel(String lafName) {\n@@ -63,1 +58,1 @@\n-            UIManager.setLookAndFeel(laf.getClassName());\n+            UIManager.setLookAndFeel(lafName);\n@@ -65,1 +60,1 @@\n-            System.out.println(\"Unsupported L&F: \" + laf.getClassName());\n+            System.out.println(\"Ignoring Unsupported L&F: \" + lafName);\n@@ -72,0 +67,7 @@\n+    private void disposeFrame() {\n+        if (frame != null) {\n+            frame.dispose();\n+            frame = null;\n+        }\n+    }\n+\n@@ -73,1 +75,2 @@\n-        panel = new JPanel();\n+        frame = new JFrame();\n+        JPanel panel = new JPanel();\n@@ -75,9 +78,2 @@\n-        button1 = new JButton(\"butt1\");\n-        button1.addActionListener(new ActionListener() {\n-            public void actionPerformed(ActionEvent e) {\n-                synchronized (this) {\n-                    buttonPressed = true;\n-                    notifyAll();\n-                }\n-            }\n-        });\n+        JButton button1 = new JButton(\"button1\");\n+        button1.addActionListener(e -> buttonPressed = true);\n@@ -86,1 +82,1 @@\n-        button2 = new JButton(\"butt2\");\n+        JButton button2 = new JButton(\"button2\");\n@@ -93,1 +89,1 @@\n-        frame.setSize(200, 300);\n+        frame.setSize(200, 200);\n@@ -99,8 +95,2 @@\n-    public void runTest() throws InvocationTargetException, InterruptedException {\n-        try {\n-            robot = new Robot();\n-        } catch (Exception e) {\n-            System.err.print(\"Error creating robot\");\n-            e.printStackTrace();\n-            System.exit(1);\n-        }\n+    public void runTest() throws Exception {\n+        Robot robot = new Robot();\n@@ -109,12 +99,7 @@\n-            System.out.println(\"Testing L&F: \" + laf);\n-            try {\n-                SwingUtilities.invokeAndWait(new Runnable() {\n-                    public void run() {\n-                        setLookAndFeel(laf);\n-                        createUI();\n-                        frame.getRootPane().requestFocus();\n-                    }\n-                });\n-            } catch (Exception e) {\n-                e.printStackTrace();\n-            }\n+            String lafName = laf.getClassName();\n+            System.out.println(\"Testing L&F: \" + lafName);\n+            SwingUtilities.invokeAndWait(() -> {\n+                setLookAndFeel(lafName);\n+                createUI();\n+                frame.getRootPane().requestFocus();\n+            });\n@@ -128,1 +113,1 @@\n-                System.out.println(\"Test Passed for laf \" + laf);\n+                System.out.println(\"Test Passed for L&F: \" + lafName);\n@@ -130,2 +115,1 @@\n-                testFailed = true;\n-                System.out.println(\"Test Failed, button not pressed for laf \" + laf);\n+                throw new RuntimeException(\"Test Failed, button not pressed for L&F: \" + lafName);\n@@ -133,5 +117,1 @@\n-        }\n-        if (testFailed) {\n-            throw new RuntimeException(\"Test Failed, button not pressed in one or more LAFs\");\n-        } else {\n-            System.out.println(\"Test Passed for all supported LAFs \");\n+            disposeFrame();\n@@ -141,2 +121,1 @@\n-}\n-\n+}\n\\ No newline at end of file\n","filename":"test\/jdk\/javax\/swing\/JRootPane\/DefaultButtonTest.java","additions":42,"deletions":63,"binary":false,"changes":105,"status":"modified"}]}