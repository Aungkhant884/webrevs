{"files":[{"patch":"@@ -27,0 +27,1 @@\n+import java.io.BufferedOutputStream;\n@@ -113,1 +114,2 @@\n-             PrintStream ps = new PrintStream(out, true, StandardCharsets.UTF_8)) {\n+             BufferedOutputStream bos = new BufferedOutputStream(out);\n+             PrintStream ps = new PrintStream(bos, false, StandardCharsets.UTF_8)) {\n@@ -135,1 +137,2 @@\n-        PrintStream ps = new PrintStream(out, true, StandardCharsets.UTF_8);\n+        BufferedOutputStream bos = new BufferedOutputStream(out);\n+        PrintStream ps = new PrintStream(bos, false, StandardCharsets.UTF_8);\n@@ -139,1 +142,1 @@\n-            ps.flush();\n+            ps.flush();  \/\/ flushes underlying stream\n@@ -161,1 +164,1 @@\n-        ps.format(\"#%d \\\"%s\\\"%s%n\", thread.threadId(), thread.getName(), suffix);\n+        ps.println(\"#\" + thread.threadId() + \" \\\"\" + thread.getName() + \"\\\"\" + suffix);\n@@ -163,1 +166,2 @@\n-            ps.format(\"      %s%n\", ste);\n+            ps.print(\"      \");\n+            ps.println(ste);\n@@ -174,1 +178,2 @@\n-        PrintStream ps = new PrintStream(out, true, StandardCharsets.UTF_8);\n+        BufferedOutputStream bos = new BufferedOutputStream(out);\n+        PrintStream ps = new PrintStream(bos, false, StandardCharsets.UTF_8);\n@@ -178,1 +183,1 @@\n-            ps.flush();\n+            ps.flush();  \/\/ flushes underlying stream\n@@ -260,3 +265,4 @@\n-        out.format(\"           \\\"tid\\\": \\\"%d\\\",%n\", thread.threadId());\n-        out.format(\"           \\\"name\\\": \\\"%s\\\",%n\", escape(thread.getName()));\n-        out.format(\"           \\\"stack\\\": [%n\");\n+        out.println(\"           \\\"tid\\\": \\\"\" + thread.threadId() + \"\\\",\");\n+        out.println(\"           \\\"name\\\": \\\"\" + escape(thread.getName()) + \"\\\",\");\n+        out.println(\"           \\\"stack\\\": [\");\n+\n@@ -266,1 +272,3 @@\n-            out.format(\"              \\\"%s\\\"\", escape(stackTrace[i].toString()));\n+            out.print(\"              \\\"\");\n+            out.print(escape(stackTrace[i].toString()));\n+            out.print(\"\\\"\");\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/vm\/ThreadDumper.java","additions":19,"deletions":11,"binary":false,"changes":30,"status":"modified"}]}