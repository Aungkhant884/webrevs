{"files":[{"patch":"@@ -4063,1 +4063,1 @@\n-                if (location.kind == PCK && !site.tsym.exists()) {\n+                if (location.kind == PCK && !site.tsym.exists() && location.name != names.java) {\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Resolve.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -120,0 +120,1 @@\n+    public final Name java;\n@@ -294,0 +295,1 @@\n+        java = fromString(\"java\");\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/util\/Names.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -0,0 +1,27 @@\n+\/*\n+ * @test \/nodynamiccopyright\/\n+ * @bug 8264258\n+ * @summary Unknown lookups in the java package give misleading compilation errors\n+ * @compile\/fail\/ref=MisleadingNonExistentPathError.out -XDrawDiagnostics MisleadingNonExistentPathError.java\n+ *\/\n+package knownpkg;\n+\n+public class MisleadingNonExistentPathError {\n+\n+    void classNotFound() {\n+        \/\/ Not found, but in an existing package\n+        Class<?> c1 = knownpkg.NotFound.class;\n+\n+        \/\/ Not found, but in a (system) package which exists and is in scope\n+        Class<?> c2 = java.lang.NotFound.class;\n+\n+        \/\/ Not found, on a genuinely unknown package\n+        Class<?> c3 = unknownpkg.NotFound.class;\n+\n+        \/\/ Not found, but in the 'java' package which is in scope as per JLS 6.3 and observable as per JLS 7.4.3\n+        Class<?> c4 = java.NotFound.class;\n+        \n+        \/\/ Not found, but in a (system) package which exists and is in scope\n+        Object c5 = new java.lang();\n+    }\n+}\n","filename":"test\/langtools\/tools\/javac\/8264258\/MisleadingNonExistentPathError.java","additions":27,"deletions":0,"binary":false,"changes":27,"status":"added"},{"patch":"@@ -0,0 +1,6 @@\n+MisleadingNonExistentPathError.java:13:31: compiler.err.cant.resolve.location: kindname.class, NotFound, , , (compiler.misc.location: kindname.package, knownpkg, null)\n+MisleadingNonExistentPathError.java:16:32: compiler.err.cant.resolve.location: kindname.class, NotFound, , , (compiler.misc.location: kindname.package, java.lang, null)\n+MisleadingNonExistentPathError.java:19:33: compiler.err.doesnt.exist: unknownpkg\n+MisleadingNonExistentPathError.java:22:27: compiler.err.cant.resolve.location: kindname.class, NotFound, , , (compiler.misc.location: kindname.package, java, null)\n+MisleadingNonExistentPathError.java:25:29: compiler.err.cant.resolve.location: kindname.class, lang, , , (compiler.misc.location: kindname.package, java, null)\n+5 errors\n","filename":"test\/langtools\/tools\/javac\/8264258\/MisleadingNonExistentPathError.out","additions":6,"deletions":0,"binary":false,"changes":6,"status":"added"},{"patch":"@@ -3,1 +3,1 @@\n-TwrForVariable3.java:21:18: compiler.err.doesnt.exist: java\n+TwrForVariable3.java:21:18: compiler.err.cant.resolve.location: kindname.class, lang, , , (compiler.misc.location: kindname.package, java, null)\n","filename":"test\/langtools\/tools\/javac\/TryWithResources\/TwrForVariable3.out","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}