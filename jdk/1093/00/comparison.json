{"files":[{"patch":"@@ -179,0 +179,2 @@\n+    _remset_task(new G1RemSetSamplingTask(\"Remembered Set Sampling Task\")),\n+    _periodic_gc_task(new G1PeriodicGCTask(\"Periodic GC Task\")),\n@@ -184,0 +186,5 @@\n+G1ServiceThread::~G1ServiceThread() {\n+  delete _remset_task;\n+  delete _periodic_gc_task;\n+}\n+\n@@ -188,0 +195,8 @@\n+  \/\/ Make sure the service thread is still up and running, there is a race\n+  \/\/ during shutdown where the service thread has been stopped, but other\n+  \/\/ GC threads might still be running and trying to add tasks.\n+  if (has_terminated()) {\n+    log_debug(gc, task)(\"G1 Service Thread (%s) (terminated)\", task->name());\n+    return;\n+  }\n+\n@@ -275,7 +290,3 @@\n-  \/\/ Setup the tasks handeled by the service thread and\n-  \/\/ add them to the task list.\n-  G1PeriodicGCTask gc_task(\"Periodic GC Task\");\n-  register_task(&gc_task);\n-\n-  G1RemSetSamplingTask remset_task(\"Remembered Set Sampling Task\");\n-  register_task(&remset_task);\n+  \/\/ Register the tasks handled by the service thread.\n+  register_task(_periodic_gc_task);\n+  register_task(_remset_task);\n@@ -296,0 +307,2 @@\n+\n+  log_debug(gc, task)(\"G1 Service Thread (stopping)\");\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ServiceThread.cpp","additions":20,"deletions":7,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -31,0 +31,2 @@\n+class G1PeriodicGCTask;\n+class G1RemSetSamplingTask;\n@@ -106,0 +108,3 @@\n+  G1RemSetSamplingTask* _remset_task;\n+  G1PeriodicGCTask* _periodic_gc_task;\n+\n@@ -125,0 +130,2 @@\n+  ~G1ServiceThread();\n+\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ServiceThread.hpp","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"}]}