{"files":[{"patch":"@@ -31,0 +31,1 @@\n+import java.awt.IllegalComponentStateException;\n@@ -472,1 +473,5 @@\n-                final Point p = parent.getLocationOnScreen();\n+                try {\n+                    if (parent == null) {\n+                        return null;\n+                    }\n+                    final Point p = parent.getLocationOnScreen();\n@@ -474,2 +479,2 @@\n-                \/\/ Make it into local coords\n-                final Point localPoint = new Point((int)(hitPointX - p.getX()), (int)(hitPointY - p.getY()));\n+                    \/\/ Make it into local coords\n+                    final Point localPoint = new Point((int) (hitPointX - p.getX()), (int) (hitPointY - p.getY()));\n@@ -477,2 +482,2 @@\n-                final Component component = parent.findComponentAt(localPoint);\n-                if (component == null) return null;\n+                    final Component component = parent.findComponentAt(localPoint);\n+                    if (component == null) return null;\n@@ -480,2 +485,2 @@\n-                final AccessibleContext axContext = component.getAccessibleContext();\n-                if (axContext == null) return null;\n+                    final AccessibleContext axContext = component.getAccessibleContext();\n+                    if (axContext == null) return null;\n@@ -483,2 +488,2 @@\n-                final AccessibleComponent axComponent = axContext.getAccessibleComponent();\n-                if (axComponent == null) return null;\n+                    final AccessibleComponent axComponent = axContext.getAccessibleComponent();\n+                    if (axComponent == null) return null;\n@@ -486,7 +491,7 @@\n-                final int numChildren = axContext.getAccessibleChildrenCount();\n-                if (numChildren > 0) {\n-                    \/\/ It has children, check to see which one is hit.\n-                    final Point p2 = axComponent.getLocationOnScreen();\n-                    final Point localP2 = new Point((int)(hitPointX - p2.getX()), (int)(hitPointY - p2.getY()));\n-                    return CAccessible.getCAccessible(axComponent.getAccessibleAt(localP2));\n-                }\n+                    final int numChildren = axContext.getAccessibleChildrenCount();\n+                    if (numChildren > 0) {\n+                        \/\/ It has children, check to see which one is hit.\n+                        final Point p2 = axComponent.getLocationOnScreen();\n+                        final Point localP2 = new Point((int) (hitPointX - p2.getX()), (int) (hitPointY - p2.getY()));\n+                        return CAccessible.getCAccessible(axComponent.getAccessibleAt(localP2));\n+                    }\n@@ -494,2 +499,5 @@\n-                if (!(component instanceof Accessible)) return null;\n-                return CAccessible.getCAccessible((Accessible)component);\n+                    if (!(component instanceof Accessible)) return null;\n+                    return CAccessible.getCAccessible((Accessible) component);\n+                } catch (IllegalComponentStateException ice) {\n+                    return null;\n+                }\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CAccessibility.java","additions":26,"deletions":18,"binary":false,"changes":44,"status":"modified"}]}