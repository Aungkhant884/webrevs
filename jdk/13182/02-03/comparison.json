{"files":[{"patch":"@@ -30,1 +30,0 @@\n-import sun.util.logging.PlatformLogger;\n@@ -36,1 +35,0 @@\n-import java.nio.file.InvalidPathException;\n@@ -40,0 +38,1 @@\n+import java.util.HexFormat;\n@@ -42,0 +41,1 @@\n+import java.util.Set;\n@@ -54,11 +54,0 @@\n-    private static final char[] HEX = {\n-        '0', '1', '2', '3', '4', '5', '6', '7',\n-        '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'\n-    };\n-    private static final char[] BAD_CHARS = {\n-        '\\\\', ':', '*', '?', '\"', '<', '>', '|'\n-    };\n-    private static final String[] REPLACEMENT = {\n-        \"%5C\", \"%3A\", \"%2A\", \"%3F\", \"%22\", \"%3C\", \"%3E\", \"%7C\"\n-    };\n-\n@@ -205,0 +194,2 @@\n+    private static HexFormat HEX = HexFormat.of().withUpperCase();\n+    private static final Set<Character> BAD_CHARS = Set.of('\\\\', ':', '*', '?', '\"', '<', '>', '|');\n@@ -207,1 +198,1 @@\n-        final int len = className.length();\n+        int len = className.length();\n@@ -209,1 +200,0 @@\n-\n@@ -213,4 +203,3 @@\n-            if (c <= 31) {\n-                sb.append('%');\n-                sb.append(HEX[c >> 4 & 0x0F]);\n-                sb.append(HEX[c & 0x0F]);\n+            if (c <= 31 || BAD_CHARS.contains(c)) {\n+                sb.append(\"%\");\n+                HEX.toHexDigits(sb, (byte)c);\n@@ -218,10 +207,1 @@\n-                int j = 0;\n-                for (; j < BAD_CHARS.length; j++) {\n-                    if (c == BAD_CHARS[j]) {\n-                        sb.append(REPLACEMENT[j]);\n-                        break;\n-                    }\n-                }\n-                if (j >= BAD_CHARS.length) {\n-                    sb.append(c);\n-                }\n+                sb.append(c);\n@@ -230,1 +210,0 @@\n-\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/util\/ClassFileDumper.java","additions":9,"deletions":30,"binary":false,"changes":39,"status":"modified"}]}