{"files":[{"patch":"@@ -3610,1 +3610,7 @@\n-      java_lang_invoke_MemberName::clazz(obj)->print_value_on(st);\n+      oop clazz = java_lang_invoke_MemberName::clazz(obj);\n+      oop name  = java_lang_invoke_MemberName::name(obj);\n+      if (clazz != NULL) {\n+        clazz->print_value_on(st);\n+      } else {\n+        st->print(\"NULL\");\n+      }\n@@ -3612,1 +3618,5 @@\n-      java_lang_invoke_MemberName::name(obj)->print_value_on(st);\n+      if (name != NULL) {\n+        name->print_value_on(st);\n+      } else {\n+        st->print(\"NULL\");\n+      }\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":12,"deletions":2,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -31,1 +31,1 @@\n-void markWord::print_on(outputStream* st) const {\n+void markWord::print_on(outputStream* st, bool print_monitor_info) const {\n@@ -37,5 +37,7 @@\n-    ObjectMonitor* mon = monitor();\n-    if (mon == NULL) {\n-      st->print(\"NULL (this should never be seen!)\");\n-    } else {\n-      mon->print_on(st);\n+    if (print_monitor_info) {\n+      ObjectMonitor* mon = monitor();\n+      if (mon == NULL) {\n+        st->print(\"NULL (this should never be seen!)\");\n+      } else {\n+        mon->print_on(st);\n+      }\n","filename":"src\/hotspot\/share\/oops\/markWord.cpp","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -358,1 +358,1 @@\n-  void print_on(outputStream* st) const;\n+  void print_on(outputStream* st, bool print_monitor_info = true) const;\n","filename":"src\/hotspot\/share\/oops\/markWord.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+#include \"oops\/oop.inline.hpp\"\n@@ -29,1 +30,1 @@\n-void BasicLock::print_on(outputStream* st) const {\n+void BasicLock::print_on(outputStream* st, oop owner) const {\n@@ -32,2 +33,4 @@\n-  if (mark_word.value() != 0)\n-    mark_word.print_on(st);\n+  if (mark_word.value() != 0) {\n+    bool print_monitor_info = (owner != NULL) && (owner->mark() == markWord::from_pointer((void*)this));\n+    mark_word.print_on(st, print_monitor_info);\n+  }\n","filename":"src\/hotspot\/share\/runtime\/basicLock.cpp","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -46,1 +46,1 @@\n-  void print_on(outputStream* st) const;\n+  void print_on(outputStream* st, oop owner) const;\n","filename":"src\/hotspot\/share\/runtime\/basicLock.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -512,1 +512,1 @@\n-    current->lock()->print_on(st);\n+    current->lock()->print_on(st, current->obj());\n","filename":"src\/hotspot\/share\/runtime\/frame.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -672,1 +672,1 @@\n-    monitor->lock()->print_on(tty);\n+    monitor->lock()->print_on(tty, monitor->owner());\n","filename":"src\/hotspot\/share\/runtime\/vframe.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}