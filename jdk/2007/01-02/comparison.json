{"files":[{"patch":"@@ -2555,1 +2555,2 @@\n-  PreserveExceptionMark pm(Thread::current()); \/\/ not necessarily JavaThread::active().\n+  JavaThread* THREAD = JavaThread::current();\n+  PreserveExceptionMark pm(THREAD);\n@@ -2557,5 +2558,4 @@\n-  JavaThread* thread = JavaThread::active();\n-\n-  fill_in_stack_trace(throwable, method, thread);\n-  \/\/ ignore exceptions thrown during stack trace filling\n-  thread->clear_pending_exception();\n+  fill_in_stack_trace(throwable, method, THREAD);\n+  \/\/ Ignore exceptions thrown during stack trace filling (OOM) and reinstall the\n+  \/\/ original exception via the PreserveExceptionMark destructor.\n+  CLEAR_PENDING_EXCEPTION;\n","filename":"src\/hotspot\/share\/classfile\/javaClasses.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"}]}