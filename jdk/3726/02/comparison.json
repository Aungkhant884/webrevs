{"files":[{"patch":"@@ -3,0 +3,1 @@\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,3 +32,3 @@\n- * @library \/compiler\/patches \/test\/lib\n- * @run main\/othervm compiler.arguments.TestPrintOptoAssemblyLineNumbers\n-*\/\n+ * @library \/test\/lib\n+ * @run driver compiler.arguments.TestPrintOptoAssemblyLineNumbers\n+ *\/\n@@ -37,1 +38,0 @@\n-import jdk.test.lib.Asserts;\n@@ -41,0 +41,2 @@\n+\/\/    THIS TEST IS LINE NUMBER SENSITIVE\n+\n@@ -44,1 +46,1 @@\n-        String[] procArgs = new String[]{\n+        String[] procArgs = new String[] {\n@@ -48,2 +50,2 @@\n-            \"compiler.arguments.TestPrintOptoAssemblyLineNumbers$CheckC2OptoAssembly\"\n-            };\n+            CheckC2OptoAssembly.class.getName()\n+        };\n@@ -52,1 +54,2 @@\n-        String output = new OutputAnalyzer(pb.start()).getOutput();\n+        OutputAnalyzer oa = new OutputAnalyzer(pb.start());\n+        oa.shouldHaveExitValue(0);\n@@ -54,1 +57,1 @@\n-        if(output.contains(\"TestPrintOptoAssemblyLineNumbers$CheckC2OptoAssembly::main @ bci:11\")){\n+        if (oa.getOutput().contains(\"TestPrintOptoAssemblyLineNumbers$CheckC2OptoAssembly::main @ bci:11\")) {\n@@ -56,1 +59,1 @@\n-            Asserts.assertTrue(output.contains(\"TestPrintOptoAssemblyLineNumbers$CheckC2OptoAssembly::main @ bci:11 (line 68)\"));\n+            oa.stdoutShouldContain(\"TestPrintOptoAssemblyLineNumbers$CheckC2OptoAssembly::main @ bci:11 (line 71)\");\n@@ -60,2 +63,2 @@\n-    public static class CheckC2OptoAssembly{ \/\/ contents of this class serves to just invoke C2\n-        public static boolean foo(String arg){\n+    public static class CheckC2OptoAssembly { \/\/ contents of this class serves to just invoke C2\n+        public static boolean foo(String arg) {\n@@ -65,1 +68,1 @@\n-        public static void main(String[] args){\n+        public static void main(String[] args) {\n@@ -67,2 +70,2 @@\n-            for(int x = 0; x < 200_000; x++){\n-                if(foo(\"something\" + x)){ \/\/ <- test expects this line of code to be on line 68\n+            for (int x = 0; x < 200_000; x++) {\n+                if (foo(\"something\" + x)) { \/\/ <- test expects this line of code to be on line 71\n","filename":"test\/hotspot\/jtreg\/compiler\/arguments\/TestPrintOptoAssemblyLineNumbers.java","additions":18,"deletions":15,"binary":false,"changes":33,"status":"modified"}]}