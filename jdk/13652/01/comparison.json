{"files":[{"patch":"@@ -2595,0 +2595,10 @@\n+\n+  remove_unshareable_flags();\n+}\n+\n+void InstanceKlass::remove_unshareable_flags() {\n+  \/\/ clear all the flags\/stats that shouldn't be in the archived version\n+#if INCLUDE_JVMTI\n+  set_is_being_redefined(false);\n+#endif\n+  set_has_resolved_methods(false);\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":10,"deletions":0,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -709,0 +709,1 @@\n+  void set_has_resolved_methods(bool value)   { _misc_flags.set_has_resolved_methods(value); }\n@@ -1129,0 +1130,1 @@\n+  void remove_unshareable_flags();\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -411,0 +411,1 @@\n+  assert(!queued_for_compilation(), \"method's queued_for_compilation flag should not be set\");\n@@ -1196,0 +1197,15 @@\n+  remove_unshareable_flags();\n+}\n+\n+void Method::remove_unshareable_flags() {\n+  \/\/ clear all the flags that shouldn't be in the archived version\n+  assert(!is_old(), \"must be\");\n+  assert(!is_obsolete(), \"must be\");\n+  assert(!is_deleted(), \"must be\");\n+\n+  set_is_prefixed_native(false);\n+  set_queued_for_compilation(false);\n+  set_is_not_c2_compilable(false);\n+  set_is_not_c1_compilable(false);\n+  set_is_not_c2_osr_compilable(false);\n+  set_on_stack_flag(false);\n","filename":"src\/hotspot\/share\/oops\/method.cpp","additions":16,"deletions":0,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -450,0 +450,1 @@\n+  void remove_unshareable_flags() NOT_CDS_RETURN;\n","filename":"src\/hotspot\/share\/oops\/method.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}