{"files":[{"patch":"@@ -28,3 +28,0 @@\n-import sun.swing.SwingUtilities2;\n-\n-import java.awt.Component;\n@@ -32,0 +29,1 @@\n+import java.awt.Component;\n@@ -36,0 +34,1 @@\n+import java.awt.GradientPaint;\n@@ -38,1 +37,0 @@\n-import java.awt.GradientPaint;\n@@ -41,2 +39,0 @@\n-import java.awt.event.MouseAdapter;\n-import java.awt.event.MouseEvent;\n@@ -46,2 +42,6 @@\n-import javax.swing.JComponent;\n-import javax.swing.border.Border;\n+import java.awt.event.MouseAdapter;\n+import java.awt.event.MouseEvent;\n+import java.beans.PropertyChangeEvent;\n+import java.beans.PropertyChangeListener;\n+import java.beans.PropertyVetoException;\n+\n@@ -50,0 +50,1 @@\n+import javax.swing.JComponent;\n@@ -58,1 +59,1 @@\n-import javax.swing.plaf.basic.BasicInternalFrameTitlePane;\n+import javax.swing.border.Border;\n@@ -60,3 +61,3 @@\n-import java.beans.PropertyChangeEvent;\n-import java.beans.PropertyChangeListener;\n-import java.beans.PropertyVetoException;\n+import javax.swing.plaf.basic.BasicInternalFrameTitlePane;\n+\n+import sun.swing.SwingUtilities2;\n@@ -64,1 +65,3 @@\n-import static com.sun.java.swing.plaf.windows.TMSchema.*;\n+import static com.sun.java.swing.plaf.windows.TMSchema.Part;\n+import static com.sun.java.swing.plaf.windows.TMSchema.Prop;\n+import static com.sun.java.swing.plaf.windows.TMSchema.State;\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsInternalFrameTitlePane.java","additions":16,"deletions":13,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -34,1 +34,0 @@\n-import java.awt.Insets;\n@@ -36,0 +35,1 @@\n+\n@@ -38,0 +38,1 @@\n+import javax.swing.JComponent;\n@@ -39,1 +40,0 @@\n-import javax.swing.JInternalFrame;\n@@ -41,2 +41,1 @@\n-import javax.swing.plaf.basic.BasicInternalFrameTitlePane;\n-import javax.swing.plaf.basic.BasicInternalFrameUI;\n+import javax.swing.JInternalFrame;\n@@ -45,0 +44,1 @@\n+import javax.swing.plaf.basic.BasicInternalFrameUI;\n@@ -57,0 +57,1 @@\n+\n@@ -60,1 +61,1 @@\n-            test();\n+            test(2);\n@@ -68,0 +69,1 @@\n+\n@@ -71,1 +73,1 @@\n-            test();\n+            test(14);\n@@ -78,1 +80,2 @@\n-\t}\n+        }\n+\n@@ -82,1 +85,1 @@\n-    private static void test() throws Exception {\n+    private static void test(final int widthAdd) throws Exception {\n@@ -103,6 +106,1 @@\n-            BasicInternalFrameTitlePane title =\n-                    ((BasicInternalFrameTitlePane)((BasicInternalFrameUI)\n-                            iframe.getUI()).getNorthPane());\n-            int height = title.getHeight();\n-            Insets insets = title.getInsets();\n-            height = height - insets.top - insets.bottom;\n+            JComponent title = ((BasicInternalFrameUI) iframe.getUI()).getNorthPane();\n@@ -111,16 +109,3 @@\n-                if (c instanceof JButton) {\n-                    Icon icon = ((JButton) c).getIcon();\n-                    if (UIManager.getLookAndFeel().toString().\n-                            contains(\"WindowsClassicLookAndFeel\")) {\n-                        if ((icon.getIconWidth() > height - 2) &&\n-\t\t\t    height != UIManager.getInt(\n-\t\t\t\t    \"InternalFrame.titleButtonHeight\") - 4) {\n-                            throw new RuntimeException(\"Wrong title icon size\");\n-                        }\n-                    } else if (UIManager.getLookAndFeel().\n-                               toString().contains(\"WindowsLookAndFeel\")) {\n-                        if (icon.getIconWidth() > UIManager.getInt(\n-                                \"InternalFrame.titleButtonHeight\") + 10) {\n-                            throw new RuntimeException(\"Wrong title icon size\");\n-                        }\n-\t\t    }\n+                if (c instanceof JButton button\n+                    && !testButtonSize(button, widthAdd)) {\n+                    throw new RuntimeException(\"Wrong title icon size\");\n@@ -131,0 +116,10 @@\n+\n+    private static boolean testButtonSize(final JButton button,\n+                                          final int widthAdd) {\n+        int height = UIManager.getInt(\"InternalFrame.titleButtonHeight\") - 4;\n+        Icon icon = button.getIcon();\n+        return height == button.getHeight()\n+               && (height + widthAdd) == button.getWidth()\n+               && height == icon.getIconHeight()\n+               && (height + widthAdd) == icon.getIconWidth();\n+    }\n","filename":"test\/jdk\/javax\/swing\/JInternalFrame\/InternalFrameTitleButtonTest.java","additions":25,"deletions":30,"binary":false,"changes":55,"status":"modified"}]}