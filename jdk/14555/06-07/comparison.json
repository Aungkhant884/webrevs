{"files":[{"patch":"@@ -31,1 +31,0 @@\n-import java.awt.Dimension;\n@@ -178,1 +177,1 @@\n-        private Part part;\n+        private final Part part;\n@@ -294,1 +293,0 @@\n-            UIManager.put(\"InternalFrame.titleButtonWidth\", width);\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsIconFactory.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -30,2 +30,27 @@\n-import javax.swing.*;\n-import javax.swing.border.*;\n+import java.awt.Component;\n+import java.awt.Color;\n+import java.awt.Container;\n+import java.awt.Dimension;\n+import java.awt.Font;\n+import java.awt.FontMetrics;\n+import java.awt.Graphics;\n+import java.awt.Graphics2D;\n+import java.awt.GradientPaint;\n+import java.awt.Insets;\n+import java.awt.LayoutManager;\n+import java.awt.event.MouseAdapter;\n+import java.awt.event.MouseEvent;\n+import java.awt.Paint;\n+import java.awt.Point;\n+import java.awt.Rectangle;\n+import javax.swing.JComponent;\n+import javax.swing.border.Border;\n+import javax.swing.BorderFactory;\n+import javax.swing.Icon;\n+import javax.swing.JInternalFrame;\n+import javax.swing.JLabel;\n+import javax.swing.JMenuItem;\n+import javax.swing.JPopupMenu;\n+import javax.swing.JSeparator;\n+import javax.swing.LookAndFeel;\n+import javax.swing.UIDefaults;\n@@ -33,1 +58,0 @@\n-import javax.swing.plaf.*;\n@@ -35,2 +59,1 @@\n-import java.awt.*;\n-import java.awt.event.*;\n+import javax.swing.plaf.UIResource;\n@@ -82,2 +105,1 @@\n-            buttonWidth = buttonHeight;\n-            buttonWidth += 2;\n+            buttonWidth = buttonHeight + 2;\n@@ -88,1 +110,0 @@\n-        UIManager.put(\"InternalFrame.titleButtonWidth\", buttonWidth);\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsInternalFrameTitlePane.java","additions":29,"deletions":8,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -58,1 +58,1 @@\n-               \"com.sun.java.swing.plaf.windows.WindowsClassicLookAndFeel\");\n+                   \"com.sun.java.swing.plaf.windows.WindowsClassicLookAndFeel\");\n@@ -68,0 +68,11 @@\n+        UIManager.setLookAndFeel(\n+              \"com.sun.java.swing.plaf.windows.WindowsLookAndFeel\");\n+        try {\n+            test();\n+        } finally {\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n+\t}\n@@ -102,9 +113,14 @@\n-                    if (icon.getIconHeight() > height - 4\n-                        || icon.getIconWidth() > height - 2) {\n-                        throw new RuntimeException(\"Wrong title icon size\");\n-                    }\n-                    if (UIManager.getInt(\"InternalFrame.titleButtonWidth\")\n-                                         != icon.getIconWidth()) {\n-                        throw new RuntimeException(\n-                            \"UIManager width setting not same as returned icon width\");\n-                    }\n+                    if (UIManager.getLookAndFeel().toString().\n+                            contains(\"WindowsClassicLookAndFeel\")) {\n+                        if ((icon.getIconWidth() > height - 2) &&\n+\t\t\t    height != UIManager.getInt(\n+\t\t\t\t    \"InternalFrame.titleButtonHeight\") - 4) {\n+                            throw new RuntimeException(\"Wrong title icon size\");\n+                        }\n+                    } else if (UIManager.getLookAndFeel().\n+                               toString().contains(\"WindowsLookAndFeel\")) {\n+                        if (icon.getIconWidth() > UIManager.getInt(\n+                                \"InternalFrame.titleButtonHeight\") + 10) {\n+                            throw new RuntimeException(\"Wrong title icon size\");\n+                        }\n+\t\t    }\n","filename":"test\/jdk\/javax\/swing\/JInternalFrame\/InternalFrameTitleButtonTest.java","additions":26,"deletions":10,"binary":false,"changes":36,"status":"modified"}]}