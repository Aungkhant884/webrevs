{"files":[{"patch":"@@ -337,1 +337,1 @@\n-ccstr Arguments::process_nmt_property(JavaVMInitArgs* args) {\n+NMT_TrackingLevel Arguments::process_nmt_setting(JavaVMInitArgs* args) {\n@@ -347,0 +347,6 @@\n+    if (match_option(option, \"-XX:+PrintNMTStatistics\", &tail)) {\n+      PrintNMTStatistics = 1;\n+    }\n+    if (match_option(option, \"-XX:-PrintNMTStatistics\", &tail)) {\n+      PrintNMTStatistics = 0;\n+    }\n@@ -349,1 +355,1 @@\n-  \/\/ Verify NMT arguments\n+  \/\/ Verify NMT settings\n@@ -353,2 +359,2 @@\n-                \"Syntax error, expecting -XX:NativeMemoryTracking=[off|summary|detail]\", nullptr);\n-    return nullptr;\n+                \"Syntax error, expecting -XX:NativeMemoryTracking=[off|summary|detail]\");\n+    return level;\n@@ -356,2 +362,5 @@\n-\n-  return nmt;\n+  if (PrintNMTStatistics && level == NMT_off) {\n+    warning(\"PrintNMTStatistics is disabled, because native memory tracking is not enabled\");\n+    FLAG_SET_DEFAULT(PrintNMTStatistics, false);\n+  }\n+  return level;\n@@ -3972,12 +3981,0 @@\n-  \/\/ Verify NMT arguments\n-  const NMT_TrackingLevel lvl = NMTUtil::parse_tracking_level(NativeMemoryTracking);\n-  if (lvl == NMT_unknown) {\n-    jio_fprintf(defaultStream::error_stream(),\n-                \"Syntax error, expecting -XX:NativeMemoryTracking=[off|summary|detail]\\n\");\n-    return JNI_ERR;\n-  }\n-  if (PrintNMTStatistics && lvl == NMT_off) {\n-    warning(\"PrintNMTStatistics is disabled, because native memory tracking is not enabled\");\n-    FLAG_SET_DEFAULT(PrintNMTStatistics, false);\n-  }\n-\n","filename":"src\/hotspot\/share\/runtime\/arguments.cpp","additions":15,"deletions":18,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -35,0 +35,1 @@\n+#include \"services\/nmtCommon.hpp\"\n@@ -453,1 +454,1 @@\n-  static ccstr process_nmt_property(JavaVMInitArgs* args);\n+  static NMT_TrackingLevel process_nmt_setting(JavaVMInitArgs* args);\n","filename":"src\/hotspot\/share\/runtime\/arguments.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -419,2 +419,2 @@\n-  ccstr nmt = Arguments::process_nmt_property(args);\n-  if (nmt == nullptr) return JNI_ERR;\n+  NMT_TrackingLevel nmt = Arguments::process_nmt_setting(args);\n+  if (nmt == NMT_unknown) return JNI_ERR;\n@@ -458,1 +458,1 @@\n-  \/\/ Verify NMT flag(s) and log the initial state to the ouput\n+  \/\/ Verify NMT settings and log the initial state to the output\n","filename":"src\/hotspot\/share\/runtime\/threads.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -55,1 +55,1 @@\n-void MemTracker::initialize(ccstr value) {\n+void MemTracker::initialize(NMT_TrackingLevel level) {\n@@ -59,1 +59,0 @@\n-  NMT_TrackingLevel level = NMTUtil::parse_tracking_level(value);\n@@ -62,1 +61,1 @@\n-         \"Invalid setting for NativeMemoryTracking (%s)\", value);\n+         \"Invalid setting for NativeMemoryTracking (%s)\", NMTUtil::tracking_level_to_string(level));\n","filename":"src\/hotspot\/share\/services\/memTracker.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -76,1 +76,1 @@\n-  static void initialize(ccstr value);\n+  static void initialize(NMT_TrackingLevel level);\n","filename":"src\/hotspot\/share\/services\/memTracker.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}