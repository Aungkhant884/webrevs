{"files":[{"patch":"@@ -62,0 +62,1 @@\n+import java.util.Objects;\n@@ -284,0 +285,10 @@\n+    @Override\n+    public void setBackground(final Color c) {\n+        Color oldBg = getBackground();\n+        if (Objects.equals(oldBg, c)) {\n+            return;\n+        }\n+        super.setBackground(c);\n+        updateOpaque();\n+    }\n+\n@@ -292,9 +303,0 @@\n-        if (visible) {\n-            \/\/ Set correct background for a window before making it visible.\n-            \/\/ It is necessary to eliminate a flashing effect\n-            \/\/ (when initial background color replaced with the content layer's color)\n-            Color color = getBackground();\n-            if (color != null) {\n-                platformWindow.setBackground(color);\n-            }\n-        }\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/LWWindowPeer.java","additions":11,"deletions":9,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -142,2 +142,0 @@\n-    public void setBackground(Color color);\n-\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/PlatformWindow.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -183,3 +183,0 @@\n-    @Override\n-    public void setBackground(Color color) {}\n-\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CPlatformEmbeddedFrame.java","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -951,6 +951,0 @@\n-    @Override\n-    public void setBackground(Color color) {\n-        int rgb = color.getRGB();\n-        execute(ptr->CWrapper.NSWindow.setBackgroundColor(ptr, rgb));\n-    }\n-\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CPlatformWindow.java","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -28,1 +28,0 @@\n-import java.awt.Color;\n@@ -185,4 +184,0 @@\n-    @Override\n-    public void setBackground(Color color) {\n-    }\n-\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CViewPlatformEmbeddedFrame.java","additions":0,"deletions":5,"binary":false,"changes":5,"status":"modified"}]}