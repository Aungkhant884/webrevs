{"files":[{"patch":"@@ -26,0 +26,3 @@\n+#ifdef AIX\n+#include <pthread.h>\n+#endif \/\/AIX\n@@ -38,1 +41,9 @@\n-int main(int argc, char *argv[]) {\n+typedef struct {\n+    int argc;\n+    char **argv;\n+} args_list;\n+\n+void* run(void* argp){\n+  args_list *arg = (args_list*) argp;\n+  int argc =  arg->argc;\n+  char **argv = arg->argv;\n@@ -105,0 +116,20 @@\n+  return 0;\n+}\n+\n+int main(int argc, char *argv[]) {\n+   args_list args;\n+   args.argc = argc;\n+   args.argv = argv;\n+   #ifdef AIX\n+   size_t adjusted_stack_size = 1024*1024;\n+   pthread_t id;\n+   pthread_attr_t attr;\n+   pthread_attr_init(&attr);\n+   pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE);\n+   pthread_attr_setguardsize(&attr, 0);\n+   pthread_attr_setstacksize(&attr, adjusted_stack_size);\n+   pthread_create (&id,&attr,run,(void *)&args);\n+   pthread_join(id,NULL);\n+   #else\n+   run(&args);\n+   #endif\n","filename":"test\/hotspot\/jtreg\/runtime\/jni\/daemonDestroy\/exedaemonDestroy.c","additions":32,"deletions":1,"binary":false,"changes":33,"status":"modified"}]}