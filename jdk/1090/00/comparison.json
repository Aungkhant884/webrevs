{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -596,2 +596,1 @@\n-            if (ThemeReader.isGetThemeTransitionDurationDefined()\n-                  && component instanceof JComponent\n+            if (component instanceof JComponent\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/XPStyle.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,7 +38,0 @@\n-\/* !!!! WARNING !!!!\n- * This class has to be in sync with\n- * src\/solaris\/classes\/sun\/awt\/windows\/ThemeReader.java\n- * while we continue to build WinL&F on solaris\n- *\/\n-\n-\n@@ -302,2 +295,0 @@\n-    public static native boolean isGetThemeTransitionDurationDefined();\n-\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/ThemeReader.java","additions":1,"deletions":10,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,0 @@\n-#include <string.h>\n@@ -31,2 +30,0 @@\n-#include \"awt_Object.h\"\n-#include \"awt_Component.h\"\n@@ -36,36 +33,1 @@\n-\/\/ Important note about VC6 and VC7 (or XP Platform SDK)   !\n-\/\/\n-\/\/ These type definitions have been imported from UxTheme.h\n-\/\/ They have been imported instead of including them, because\n-\/\/ currently we don't require Platform SDK for building J2SE and\n-\/\/ VC6 includes do not have UxTheme.h. When we move to VC7\n-\/\/ we should remove these imports and just include\n-\/\/\n-\/\/  Uncomment these when we start using VC 7 (or XP Platform SDK)\n-\/\/\n-\/\/  #include <uxtheme.h>\n-\/\/  #incldue <tmschema.h>\n-\n-\n-\/\/ Remove everyting inside this ifdef when we start using VC 7 (or XP Platform SDK)\n-#ifndef  _UXTHEME_H_\n-typedef HANDLE HTHEME;          \/\/ handle to a section of theme data for class\n-\n-typedef enum {\n-    TS_MIN,\n-    TS_TRUE,\n-    TS_DRAW\n-} THEME_SIZE;\n-\n-\n-\/\/ Remove these when we start using VC 7 (or XP Platform SDK)\n-typedef struct _MARGINS\n-{\n-    int cxLeftWidth;      \/\/ width of left border that retains its size\n-    int cxRightWidth;     \/\/ width of right border that retains its size\n-    int cyTopHeight;      \/\/ height of top border that retains its size\n-    int cyBottomHeight;   \/\/ height of bottom border that retains its size\n-} MARGINS, *PMARGINS;\n-\n-#define TMT_TRANSPARENT 2201\n-#endif \/\/ _UXTHEME_H_\n+#include <uxtheme.h>\n@@ -122,1 +84,1 @@\n-        int iPartId, int iStateId, RECT *prc, THEME_SIZE eSize, SIZE *size);\n+        int iPartId, int iStateId, RECT *prc, THEMESIZE eSize, SIZE *size);\n@@ -137,15 +99,15 @@\n-static PFNOPENTHEMEDATA OpenThemeData = NULL;\n-static PFNDRAWTHEMEBACKGROUND DrawThemeBackground = NULL;\n-static PFNCLOSETHEMEDATA CloseThemeData = NULL;\n-static PFNDRAWTHEMETEXT DrawThemeText = NULL;\n-static PFNGETTHEMEBACKGROUNDCONTENTRECT GetThemeBackgroundContentRect = NULL;\n-static PFNGETTHEMEMARGINS GetThemeMargins = NULL;\n-static PFNISTHEMEPARTDEFINED IsThemePartDefined = NULL;\n-static PFNGETTHEMEBOOL GetThemeBool=NULL;\n-static PFNGETTHEMESYSBOOL GetThemeSysBool=NULL;\n-static PFNGETTHEMECOLOR GetThemeColor=NULL;\n-static PFNGETTHEMEENUMVALUE GetThemeEnumValue = NULL;\n-static PFNGETTHEMEINT GetThemeInt = NULL;\n-static PFNGETTHEMEPARTSIZE GetThemePartSize = NULL;\n-static PFNGETTHEMEPOSITION GetThemePosition = NULL;\n-static PFNSETWINDOWTHEME SetWindowTheme = NULL;\n+static PFNOPENTHEMEDATA OpenThemeDataFunc = NULL;\n+static PFNDRAWTHEMEBACKGROUND DrawThemeBackgroundFunc = NULL;\n+static PFNCLOSETHEMEDATA CloseThemeDataFunc = NULL;\n+static PFNDRAWTHEMETEXT DrawThemeTextFunc = NULL;\n+static PFNGETTHEMEBACKGROUNDCONTENTRECT GetThemeBackgroundContentRectFunc = NULL;\n+static PFNGETTHEMEMARGINS GetThemeMarginsFunc = NULL;\n+static PFNISTHEMEPARTDEFINED IsThemePartDefinedFunc = NULL;\n+static PFNGETTHEMEBOOL GetThemeBoolFunc=NULL;\n+static PFNGETTHEMESYSBOOL GetThemeSysBoolFunc=NULL;\n+static PFNGETTHEMECOLOR GetThemeColorFunc=NULL;\n+static PFNGETTHEMEENUMVALUE GetThemeEnumValueFunc = NULL;\n+static PFNGETTHEMEINT GetThemeIntFunc = NULL;\n+static PFNGETTHEMEPARTSIZE GetThemePartSizeFunc = NULL;\n+static PFNGETTHEMEPOSITION GetThemePositionFunc = NULL;\n+static PFNSETWINDOWTHEME SetWindowThemeFunc = NULL;\n@@ -153,3 +115,2 @@\n-                                   IsThemeBackgroundPartiallyTransparent = NULL;\n-\/\/this function might not exist on Windows XP\n-static PFNGETTHEMETRANSITIONDURATION GetThemeTransitionDuration = NULL;\n+                               IsThemeBackgroundPartiallyTransparentFunc = NULL;\n+static PFNGETTHEMETRANSITIONDURATION GetThemeTransitionDurationFunc = NULL;\n@@ -164,1 +125,1 @@\n-        OpenThemeData = (PFNOPENTHEMEDATA)GetProcAddress(hModThemes,\n+        OpenThemeDataFunc = (PFNOPENTHEMEDATA)GetProcAddress(hModThemes,\n@@ -166,1 +127,1 @@\n-        DrawThemeBackground = (PFNDRAWTHEMEBACKGROUND)GetProcAddress(\n+        DrawThemeBackgroundFunc = (PFNDRAWTHEMEBACKGROUND)GetProcAddress(\n@@ -168,1 +129,1 @@\n-        CloseThemeData = (PFNCLOSETHEMEDATA)GetProcAddress(\n+        CloseThemeDataFunc = (PFNCLOSETHEMEDATA)GetProcAddress(\n@@ -170,1 +131,1 @@\n-        DrawThemeText = (PFNDRAWTHEMETEXT)GetProcAddress(\n+        DrawThemeTextFunc = (PFNDRAWTHEMETEXT)GetProcAddress(\n@@ -172,1 +133,1 @@\n-        GetThemeBackgroundContentRect = (PFNGETTHEMEBACKGROUNDCONTENTRECT)\n+        GetThemeBackgroundContentRectFunc = (PFNGETTHEMEBACKGROUNDCONTENTRECT)\n@@ -174,1 +135,1 @@\n-        GetThemeMargins = (PFNGETTHEMEMARGINS)GetProcAddress(\n+        GetThemeMarginsFunc = (PFNGETTHEMEMARGINS)GetProcAddress(\n@@ -176,1 +137,1 @@\n-        IsThemePartDefined = (PFNISTHEMEPARTDEFINED)GetProcAddress(\n+        IsThemePartDefinedFunc = (PFNISTHEMEPARTDEFINED)GetProcAddress(\n@@ -178,1 +139,1 @@\n-        GetThemeBool = (PFNGETTHEMEBOOL)GetProcAddress(\n+        GetThemeBoolFunc = (PFNGETTHEMEBOOL)GetProcAddress(\n@@ -180,1 +141,1 @@\n-        GetThemeSysBool = (PFNGETTHEMESYSBOOL)GetProcAddress(hModThemes,\n+        GetThemeSysBoolFunc = (PFNGETTHEMESYSBOOL)GetProcAddress(hModThemes,\n@@ -182,1 +143,1 @@\n-        GetThemeColor = (PFNGETTHEMECOLOR)GetProcAddress(hModThemes,\n+        GetThemeColorFunc = (PFNGETTHEMECOLOR)GetProcAddress(hModThemes,\n@@ -184,1 +145,1 @@\n-        GetThemeEnumValue = (PFNGETTHEMEENUMVALUE)GetProcAddress(hModThemes,\n+        GetThemeEnumValueFunc = (PFNGETTHEMEENUMVALUE)GetProcAddress(hModThemes,\n@@ -186,2 +147,2 @@\n-        GetThemeInt = (PFNGETTHEMEINT)GetProcAddress(hModThemes, \"GetThemeInt\");\n-        GetThemePosition = (PFNGETTHEMEPOSITION)GetProcAddress(hModThemes,\n+        GetThemeIntFunc = (PFNGETTHEMEINT)GetProcAddress(hModThemes, \"GetThemeInt\");\n+        GetThemePositionFunc = (PFNGETTHEMEPOSITION)GetProcAddress(hModThemes,\n@@ -189,1 +150,1 @@\n-        GetThemePartSize = (PFNGETTHEMEPARTSIZE)GetProcAddress(hModThemes,\n+        GetThemePartSizeFunc = (PFNGETTHEMEPARTSIZE)GetProcAddress(hModThemes,\n@@ -191,1 +152,1 @@\n-        SetWindowTheme = (PFNSETWINDOWTHEME)GetProcAddress(hModThemes,\n+        SetWindowThemeFunc = (PFNSETWINDOWTHEME)GetProcAddress(hModThemes,\n@@ -193,1 +154,1 @@\n-        IsThemeBackgroundPartiallyTransparent =\n+        IsThemeBackgroundPartiallyTransparentFunc =\n@@ -196,2 +157,1 @@\n-        \/\/this function might not exist\n-        GetThemeTransitionDuration =\n+        GetThemeTransitionDurationFunc =\n@@ -201,16 +161,17 @@\n-        if(OpenThemeData\n-           && DrawThemeBackground\n-           && CloseThemeData\n-           && DrawThemeText\n-           && GetThemeBackgroundContentRect\n-           && GetThemeMargins\n-           && IsThemePartDefined\n-           && GetThemeBool\n-           && GetThemeSysBool\n-           && GetThemeColor\n-           && GetThemeEnumValue\n-           && GetThemeInt\n-           && GetThemePartSize\n-           && GetThemePosition\n-           && SetWindowTheme\n-           && IsThemeBackgroundPartiallyTransparent\n+        if(OpenThemeDataFunc\n+           && DrawThemeBackgroundFunc\n+           && CloseThemeDataFunc\n+           && DrawThemeTextFunc\n+           && GetThemeBackgroundContentRectFunc\n+           && GetThemeMarginsFunc\n+           && IsThemePartDefinedFunc\n+           && GetThemeBoolFunc\n+           && GetThemeSysBoolFunc\n+           && GetThemeColorFunc\n+           && GetThemeEnumValueFunc\n+           && GetThemeIntFunc\n+           && GetThemePartSizeFunc\n+           && GetThemePositionFunc\n+           && SetWindowThemeFunc\n+           && IsThemeBackgroundPartiallyTransparentFunc\n+           && GetThemeTransitionDurationFunc\n@@ -221,1 +182,1 @@\n-              HTHEME hTheme = OpenThemeData(AwtToolkit::GetInstance().GetHWnd(), L\"Button\");\n+              HTHEME hTheme = OpenThemeDataFunc(AwtToolkit::GetInstance().GetHWnd(), L\"Button\");\n@@ -224,1 +185,1 @@\n-                  CloseThemeData(hTheme);\n+                  CloseThemeDataFunc(hTheme);\n@@ -293,1 +254,1 @@\n-    HTHEME htheme = OpenThemeData(AwtToolkit::GetInstance().GetHWnd(), str);\n+    HTHEME htheme = OpenThemeDataFunc(AwtToolkit::GetInstance().GetHWnd(), str);\n@@ -311,1 +272,1 @@\n-    HRESULT hres = SetWindowTheme(AwtToolkit::GetInstance().GetHWnd(), str, NULL);\n+    HRESULT hres = SetWindowThemeFunc(AwtToolkit::GetInstance().GetHWnd(), str, NULL);\n@@ -326,1 +287,1 @@\n-    HRESULT hres = CloseThemeData((HTHEME)theme);\n+    HRESULT hres = CloseThemeDataFunc((HTHEME)theme);\n@@ -477,1 +438,1 @@\n-    HRESULT hres = DrawThemeBackground(hTheme, memDC, part, state, &rect, NULL);\n+    HRESULT hres = DrawThemeBackgroundFunc(hTheme, memDC, part, state, &rect, NULL);\n@@ -485,1 +446,1 @@\n-        transparent = IsThemeBackgroundPartiallyTransparent(hTheme,part,state);\n+        transparent = IsThemeBackgroundPartiallyTransparentFunc(hTheme, part, state);\n@@ -533,1 +494,1 @@\n-        HRESULT hres = GetThemeMargins(hTheme, NULL, part, state, property, NULL, &margins);\n+        HRESULT hres = GetThemeMarginsFunc(hTheme, NULL, part, state, property, NULL, &margins);\n@@ -554,1 +515,1 @@\n-    return JNI_IS_TRUE(IsThemePartDefined(hTheme, part, state));\n+    return JNI_IS_TRUE(IsThemePartDefinedFunc(hTheme, part, state));\n@@ -570,1 +531,1 @@\n-        if (GetThemeColor(hTheme, part, state, type, &color) != S_OK) {\n+        if (GetThemeColorFunc(hTheme, part, state, type, &color) != S_OK) {\n@@ -616,1 +577,1 @@\n-        HRESULT hres = GetThemeInt(hTheme, part, state, prop, &retVal);\n+        HRESULT hres = GetThemeIntFunc(hTheme, part, state, prop, &retVal);\n@@ -632,1 +593,1 @@\n-        HRESULT hres = GetThemeEnumValue(hTheme, part, state, prop, &retVal);\n+        HRESULT hres = GetThemeEnumValueFunc(hTheme, part, state, prop, &retVal);\n@@ -648,1 +609,1 @@\n-        HRESULT hres = GetThemeBool(hTheme, part, state, prop, &retVal);\n+        HRESULT hres = GetThemeBoolFunc(hTheme, part, state, prop, &retVal);\n@@ -663,1 +624,1 @@\n-        return JNI_IS_TRUE(GetThemeSysBool(hTheme, prop));\n+        return JNI_IS_TRUE(GetThemeSysBoolFunc(hTheme, prop));\n@@ -679,1 +640,1 @@\n-        if (GetThemePosition(hTheme, part, state, prop, &point) != S_OK) {\n+        if (GetThemePositionFunc(hTheme, part, state, prop, &point) != S_OK) {\n@@ -726,1 +687,1 @@\n-        HRESULT hres = GetThemePosition(hTheme, part, state, prop, &point);\n+        HRESULT hres = GetThemePositionFunc(hTheme, part, state, prop, &point);\n@@ -792,1 +753,1 @@\n-        if (SUCCEEDED(GetThemePartSize((HTHEME)theme, NULL, part, state,\n+        if (SUCCEEDED(GetThemePartSizeFunc((HTHEME)theme, NULL, part, state,\n@@ -836,3 +797,4 @@\n-        if (SUCCEEDED(GetThemeBackgroundContentRect((HTHEME) hTheme, NULL, part,\n-                                                    state, &boundingRect,\n-                                                    &contentRect))) {\n+        if (SUCCEEDED(GetThemeBackgroundContentRectFunc((HTHEME) hTheme, NULL,\n+                                                        part, state,\n+                                                        &boundingRect,\n+                                                        &contentRect))) {\n@@ -858,6 +820,4 @@\n-    if (GetThemeTransitionDuration != NULL) {\n-        DWORD duration = 0;\n-        if (SUCCEEDED(GetThemeTransitionDuration((HTHEME) theme, part,\n-                                      stateFrom, stateTo, propId, &duration))) {\n-            rv = duration;\n-        }\n+    DWORD duration = 0;\n+    if (SUCCEEDED(GetThemeTransitionDurationFunc((HTHEME) theme, part,\n+                                  stateFrom, stateTo, propId, &duration))) {\n+        rv = duration;\n@@ -867,11 +827,0 @@\n-\n-\/*\n- * Class:     sun_awt_windows_ThemeReader\n- * Method:    isGetThemeTransitionDurationDefined\n- * Signature: ()Z\n- *\/\n-JNIEXPORT jboolean JNICALL\n-Java_sun_awt_windows_ThemeReader_isGetThemeTransitionDurationDefined\n-(JNIEnv *env, jclass klass) {\n-    return (GetThemeTransitionDuration != NULL) ? JNI_TRUE : JNI_FALSE;\n-}\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/ThemeReader.cpp","additions":79,"deletions":130,"binary":false,"changes":209,"status":"modified"}]}