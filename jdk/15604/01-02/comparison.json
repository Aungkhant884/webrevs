{"files":[{"patch":"@@ -48,1 +48,1 @@\n-    public static void wasteCodeCache()  throws Exception {\n+    public static void wasteCodeCache() throws Throwable {\n@@ -51,3 +51,11 @@\n-        for (int i = 0; i < 500; i++) {\n-            ClassLoader cl = new MyClassLoader(url);\n-            refClass(cl.loadClass(\"SomeClass\"));\n+        try {\n+            for (int i = 0; i < 500; i++) {\n+                ClassLoader cl = new MyClassLoader(url);\n+                refClass(cl.loadClass(\"SomeClass\"));\n+            }\n+        } catch (Throwable t) {\n+            \/\/ Expose the root cause of the Throwable instance.\n+            while (t.getCause() != null) {\n+                t = t.getCause();\n+            }\n+            throw t;\n@@ -61,0 +69,5 @@\n+        \/\/ Ignore adapter creation failures\n+        if (oa.getExitValue() != 0 && !oa.getOutput().contains(\"Out of space in CodeCache for adapters\")) {\n+            oa.reportDiagnosticSummary();\n+            throw new RuntimeException(\"VM finished with exit code \" + oa.getExitValue());\n+        }\n","filename":"test\/hotspot\/jtreg\/compiler\/codecache\/CodeCacheFullCountTest.java","additions":17,"deletions":4,"binary":false,"changes":21,"status":"modified"}]}