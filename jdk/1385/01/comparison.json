{"files":[{"patch":"@@ -194,1 +194,1 @@\n-      PhaseIterGVN *igvn = phase->is_IterGVN();\n+      PhaseIterGVN* igvn = phase->is_IterGVN();\n@@ -630,1 +630,1 @@\n-      PhaseIterGVN *igvn = phase->is_IterGVN();\n+      PhaseIterGVN* igvn = phase->is_IterGVN();\n","filename":"src\/hotspot\/share\/opto\/addnode.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -310,1 +310,1 @@\n-      phase->is_IterGVN()->_worklist.push(this);\n+      igvn->_worklist.push(this);\n@@ -322,1 +322,1 @@\n-    phase->is_IterGVN()->_worklist.push(this);\n+    igvn->_worklist.push(this);\n@@ -353,1 +353,1 @@\n-    phase->is_IterGVN()->_worklist.push(this);\n+    igvn->_worklist.push(this);\n@@ -1724,1 +1724,1 @@\n-        phase->is_IterGVN()->_worklist.push(this);\n+        igvn->_worklist.push(this);\n@@ -2635,1 +2635,3 @@\n-        phase->igvn_rehash_node_delayed(use);\n+        if (phase->is_IterGVN()) {\n+          phase->is_IterGVN()->rehash_node_delayed(use);\n+        }\n@@ -2749,1 +2751,2 @@\n-  if (result != this && phase->is_IterGVN() != NULL) {\n+  PhaseIterGVN* igvn = phase->is_IterGVN();\n+  if (result != this && igvn != NULL) {\n@@ -2756,1 +2759,0 @@\n-      PhaseIterGVN* igvn = phase->is_IterGVN();\n@@ -3954,1 +3956,4 @@\n-  phase->igvn_rehash_node_delayed(this);\n+  PhaseIterGVN* igvn = phase->is_IterGVN();\n+  if (igvn) {\n+    igvn->rehash_node_delayed(this);\n+  }\n","filename":"src\/hotspot\/share\/opto\/memnode.cpp","additions":13,"deletions":8,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -657,1 +657,4 @@\n-    phase->igvn_rehash_node_delayed(shiftNode);\n+    PhaseIterGVN* igvn = phase->is_IterGVN();\n+    if (igvn) {\n+      igvn->rehash_node_delayed(shiftNode);\n+    }\n","filename":"src\/hotspot\/share\/opto\/mulnode.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -693,1 +693,2 @@\n-PhaseValues::PhaseValues( Arena *arena, uint est_max_size ) : PhaseTransform(arena, GVN), _table(arena, est_max_size) {\n+PhaseValues::PhaseValues( Arena *arena, uint est_max_size )\n+  : PhaseTransform(arena, GVN), _table(arena, est_max_size), _iterGVN(false) {\n@@ -699,2 +700,2 @@\n-PhaseValues::PhaseValues( PhaseValues *ptv ) : PhaseTransform( ptv, GVN ),\n-  _table(&ptv->_table) {\n+PhaseValues::PhaseValues(PhaseValues* ptv)\n+  : PhaseTransform(ptv, GVN), _table(&ptv->_table), _iterGVN(false) {\n@@ -935,4 +936,4 @@\n-PhaseIterGVN::PhaseIterGVN( PhaseIterGVN *igvn ) : PhaseGVN(igvn),\n-                                                   _delay_transform(igvn->_delay_transform),\n-                                                   _stack( igvn->_stack ),\n-                                                   _worklist( igvn->_worklist )\n+PhaseIterGVN::PhaseIterGVN(PhaseIterGVN* igvn) : PhaseGVN(igvn),\n+                                                 _delay_transform(igvn->_delay_transform),\n+                                                 _stack(igvn->_stack ),\n+                                                 _worklist(igvn->_worklist)\n@@ -940,0 +941,1 @@\n+  _iterGVN = true;\n@@ -944,2 +946,2 @@\n-PhaseIterGVN::PhaseIterGVN( PhaseGVN *gvn ) : PhaseGVN(gvn),\n-                                              _delay_transform(false),\n+PhaseIterGVN::PhaseIterGVN(PhaseGVN* gvn) : PhaseGVN(gvn),\n+                                            _delay_transform(false),\n@@ -950,2 +952,2 @@\n-                                              _stack(C->comp_arena(), 32),\n-                                              _worklist(*C->for_igvn())\n+                                            _stack(C->comp_arena(), 32),\n+                                            _worklist(*C->for_igvn())\n@@ -953,0 +955,1 @@\n+  _iterGVN = true;\n","filename":"src\/hotspot\/share\/opto\/phaseX.cpp","additions":14,"deletions":11,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -338,3 +338,0 @@\n-  \/\/ Delayed node rehash if this is an IGVN phase\n-  virtual void igvn_rehash_node_delayed(Node* n) {}\n-\n@@ -372,1 +369,1 @@\n-\n+  bool      _iterGVN;\n@@ -374,4 +371,4 @@\n-  PhaseValues( Arena *arena, uint est_max_size );\n-  PhaseValues( PhaseValues *pt );\n-  NOT_PRODUCT( ~PhaseValues(); )\n-  virtual PhaseIterGVN *is_IterGVN() { return 0; }\n+  PhaseValues(Arena* arena, uint est_max_size);\n+  PhaseValues(PhaseValues* pt);\n+  NOT_PRODUCT(~PhaseValues();)\n+  PhaseIterGVN* is_IterGVN() { return (_iterGVN) ? (PhaseIterGVN*)this : NULL; }\n@@ -380,4 +377,4 @@\n-  bool   hash_delete(Node *n)     { return _table.hash_delete(n); }\n-  void   hash_insert(Node *n)     { _table.hash_insert(n); }\n-  Node  *hash_find_insert(Node *n){ return _table.hash_find_insert(n); }\n-  Node  *hash_find(const Node *n) { return _table.hash_find(n); }\n+  bool   hash_delete(Node* n)     { return _table.hash_delete(n); }\n+  void   hash_insert(Node* n)     { _table.hash_insert(n); }\n+  Node*  hash_find_insert(Node* n){ return _table.hash_find_insert(n); }\n+  Node*  hash_find(const Node* n) { return _table.hash_find(n); }\n@@ -394,2 +391,2 @@\n-  virtual const Type* saturate(const Type* new_type, const Type* old_type,\n-                               const Type* limit_type) const\n+  const Type* saturate(const Type* new_type, const Type* old_type,\n+                       const Type* limit_type) const\n@@ -466,2 +463,2 @@\n-  PhaseIterGVN( PhaseIterGVN *igvn ); \/\/ Used by CCP constructor\n-  PhaseIterGVN( PhaseGVN *gvn ); \/\/ Used after Parser\n+  PhaseIterGVN(PhaseIterGVN* igvn); \/\/ Used by CCP constructor\n+  PhaseIterGVN(PhaseGVN* gvn); \/\/ Used after Parser\n@@ -473,2 +470,0 @@\n-  virtual PhaseIterGVN *is_IterGVN() { return this; }\n-\n@@ -530,4 +525,0 @@\n-  void igvn_rehash_node_delayed(Node* n) {\n-    rehash_node_delayed(n);\n-  }\n-\n","filename":"src\/hotspot\/share\/opto\/phaseX.hpp","additions":13,"deletions":22,"binary":false,"changes":35,"status":"modified"}]}