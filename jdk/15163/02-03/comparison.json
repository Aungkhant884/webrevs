{"files":[{"patch":"@@ -142,4 +142,5 @@\n-        int certLen = GetIntegerAction.privilegedGetProperty(\n-                \"jdk.tls.maxCertificateChainLength\", 10);\n-        if (certLen < 0) {\n-            certLen = 10;\n+        \/\/ jdk.tls.maxCertificateChainLength property has no default\n+        Integer certLen = GetIntegerAction.privilegedGetProperty(\n+                \"jdk.tls.maxCertificateChainLength\");\n+        if (certLen == null || (int)certLen < 0) {\n+            certLen = 0;\n@@ -149,7 +150,1 @@\n-        \/*\n-         * If the jdk.tls.maxClientCertificateChainLength or jdk.tls.maxServerCertificateChainLength\n-         * system property is not set, it will default to the value of the\n-         * jdk.tls.maxCertificateChainLength system property. If either of them is\n-         * set, it will supersede the value of the jdk.tls.maxCertificateChainLength\n-         * system property.\n-         *\/\n+        \/\/ Default for jdk.tls.maxClientCertificateChainLength is 8\n@@ -157,1 +152,1 @@\n-                \"jdk.tls.maxClientCertificateChainLength\", maxCertificateChainLength);\n+                \"jdk.tls.maxClientCertificateChainLength\", 8);\n@@ -159,1 +154,1 @@\n-            clientLen = maxCertificateChainLength;\n+            clientLen = 8;\n@@ -161,1 +156,0 @@\n-        maxClientCertificateChainLength = clientLen;\n@@ -163,0 +157,1 @@\n+        \/\/ Default for jdk.tls.maxServerCertificateChainLength is 10\n@@ -164,1 +159,1 @@\n-                \"jdk.tls.maxServerCertificateChainLength\", maxCertificateChainLength);\n+                \"jdk.tls.maxServerCertificateChainLength\", 10);\n@@ -166,1 +161,1 @@\n-            serverLen = maxCertificateChainLength;\n+            serverLen = 10;\n@@ -168,0 +163,19 @@\n+\n+        \/*\n+         * When jdk.tls.maxCertificateChainLength is set, it will override\n+         * the defaults for jdk.tls.maxClientCertificateChainLength and\n+         * jdk.tls.maxServerCertificateChainLength if they are not explicitly\n+         * overridden. That means if either of those properties have been set,\n+         * the jdk.tls.maxCertificateChainLength property will not override\n+         * the values.\n+         *\/\n+        if (maxCertificateChainLength > 0) {\n+            if (clientLen == 8) {\n+                clientLen = maxCertificateChainLength;\n+            }\n+            if (serverLen == 10) {\n+                serverLen = maxCertificateChainLength;\n+            }\n+        }\n+\n+        maxClientCertificateChainLength = clientLen;\n","filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/SSLConfiguration.java","additions":30,"deletions":16,"binary":false,"changes":46,"status":"modified"}]}