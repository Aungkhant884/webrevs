{"files":[{"patch":"@@ -326,1 +326,4 @@\n-    \/\/ Convert \"a*b+a*c into a *(b+c)\n+    Node* add_in1 = NULL;\n+    Node* add_in2 = NULL;\n+    Node* mul_in = NULL;\n+\n@@ -328,2 +331,4 @@\n-      Node* add = phase->transform(new AddINode(in1->in(2), in2->in(2)));\n-      return new MulINode(in1->in(1), add);\n+      \/\/ Convert \"a*b+a*c into a *(b+c)\n+      add_in1 = in1->in(2);\n+      add_in2 = in2->in(2);\n+      mul_in = in1->in(1);\n@@ -332,2 +337,3 @@\n-      Node* add = phase->transform(new AddINode(in1->in(1), in2->in(2)));\n-      return new MulINode(in1->in(2), add);\n+      add_in1 = in1->in(1);\n+      add_in2 = in2->in(2);\n+      mul_in = in1->in(2);\n@@ -336,2 +342,3 @@\n-      Node* add = phase->transform(new AddINode(in1->in(1), in2->in(1)));\n-      return new MulINode(in1->in(2), add);\n+      add_in1 = in1->in(1);\n+      add_in2 = in2->in(1);\n+      mul_in = in1->in(2);\n@@ -340,2 +347,8 @@\n-      Node* add = phase->transform(new AddINode(in1->in(2), in2->in(1)));\n-      return new MulINode(in1->in(1), add);\n+      add_in1 = in1->in(2);\n+      add_in2 = in2->in(1);\n+      mul_in = in1->in(1);\n+    }\n+\n+    if (mul_in != NULL) {\n+      Node* add = phase->transform(new AddINode(add_in1, add_in2));\n+      return new MulINode(mul_in, add);\n@@ -495,1 +508,4 @@\n-    \/\/ Convert \"a*b+a*c into a*(b+c)\n+    Node* add_in1 = NULL;\n+    Node* add_in2 = NULL;\n+    Node* mul_in = NULL;\n+\n@@ -497,2 +513,4 @@\n-      Node* add = phase->transform(new AddLNode(in1->in(2), in2->in(2)));\n-      return new MulLNode(in1->in(1), add);\n+      \/\/ Convert \"a*b+a*c into a*(b+c)\n+      add_in1 = in1->in(2);\n+      add_in2 = in2->in(2);\n+      mul_in = in1->in(1);\n@@ -501,2 +519,3 @@\n-      Node* add = phase->transform(new AddLNode(in1->in(1), in2->in(2)));\n-      return new MulLNode(in1->in(2), add);\n+      add_in1 = in1->in(1);\n+      add_in2 = in2->in(2);\n+      mul_in = in1->in(2);\n@@ -505,2 +524,3 @@\n-      Node* add = phase->transform(new AddLNode(in1->in(1), in2->in(1)));\n-      return new MulLNode(in1->in(2), add);\n+      add_in1 = in1->in(1);\n+      add_in2 = in2->in(1);\n+      mul_in = in1->in(2);\n@@ -509,2 +529,8 @@\n-      Node* add = phase->transform(new AddLNode(in1->in(2), in2->in(1)));\n-      return new MulLNode(in1->in(1), add);\n+      add_in1 = in1->in(2);\n+      add_in2 = in2->in(1);\n+      mul_in = in1->in(1);\n+    }\n+\n+    if (mul_in != NULL) {\n+      Node* add = phase->transform(new AddLNode(add_in1, add_in2));\n+      return new MulLNode(mul_in, add);\n","filename":"src\/hotspot\/share\/opto\/addnode.cpp","additions":44,"deletions":18,"binary":false,"changes":62,"status":"modified"},{"patch":"@@ -274,1 +274,4 @@\n-    \/\/ Convert \"a*b-a*c into a*(b-c)\n+    Node* sub_in1 = NULL;\n+    Node* sub_in2 = NULL;\n+    Node* mul_in = NULL;\n+\n@@ -276,2 +279,4 @@\n-      Node* sub = phase->transform(new SubINode(in1->in(2), in2->in(2)));\n-      return new MulINode(in1->in(1), sub);\n+      \/\/ Convert \"a*b-a*c into a*(b-c)\n+      sub_in1 = in1->in(2);\n+      sub_in2 = in2->in(2);\n+      mul_in = in1->in(1);\n@@ -280,2 +285,3 @@\n-      Node* sub = phase->transform(new SubINode(in1->in(1), in2->in(2)));\n-      return new MulINode(in1->in(2), sub);\n+      sub_in1 = in1->in(1);\n+      sub_in2 = in2->in(2);\n+      mul_in = in1->in(2);\n@@ -284,2 +290,3 @@\n-      Node* sub = phase->transform(new SubINode(in1->in(1), in2->in(1)));\n-      return new MulINode(sub, in1->in(2));\n+      sub_in1 = in1->in(1);\n+      sub_in2 = in2->in(1);\n+      mul_in = in1->in(2);\n@@ -288,2 +295,8 @@\n-      Node* sub = phase->transform(new SubINode(in1->in(2), in2->in(1)));\n-      return new MulINode(in1->in(1), sub);\n+      sub_in1 = in1->in(2);\n+      sub_in2 = in2->in(1);\n+      mul_in = in1->in(1);\n+    }\n+\n+    if (mul_in != NULL) {\n+      Node* sub = phase->transform(new SubINode(sub_in1, sub_in2));\n+      return new MulINode(mul_in, sub);\n@@ -419,1 +432,4 @@\n-    \/\/ Convert \"a*b-a*c into a*(b+c)\n+    Node* sub_in1 = NULL;\n+    Node* sub_in2 = NULL;\n+    Node* mul_in = NULL;\n+\n@@ -421,2 +437,4 @@\n-      Node* sub = phase->transform(new SubLNode(in1->in(2), in2->in(2)));\n-      return new MulLNode(in1->in(1), sub);\n+      \/\/ Convert \"a*b-a*c into a*(b+c)\n+      sub_in1 = in1->in(2);\n+      sub_in2 = in2->in(2);\n+      mul_in = in1->in(1);\n@@ -425,2 +443,3 @@\n-      Node* sub = phase->transform(new SubLNode(in1->in(1), in2->in(2)));\n-      return new MulLNode(in1->in(2), sub);\n+      sub_in1 = in1->in(1);\n+      sub_in2 = in2->in(2);\n+      mul_in = in1->in(2);\n@@ -429,2 +448,3 @@\n-      Node* sub = phase->transform(new SubLNode(in1->in(1), in2->in(1)));\n-      return new MulLNode(sub, in1->in(2));\n+      sub_in1 = in1->in(1);\n+      sub_in2 = in2->in(1);\n+      mul_in = in1->in(2);\n@@ -433,2 +453,8 @@\n-      Node* sub = phase->transform(new SubLNode(in1->in(2), in2->in(1)));\n-      return new MulLNode(in1->in(1), sub);\n+      sub_in1 = in1->in(2);\n+      sub_in2 = in2->in(1);\n+      mul_in = in1->in(1);\n+    }\n+\n+    if (mul_in != NULL) {\n+      Node* sub = phase->transform(new SubLNode(sub_in1, sub_in2));\n+      return new MulLNode(mul_in, sub);\n","filename":"src\/hotspot\/share\/opto\/subnode.cpp","additions":44,"deletions":18,"binary":false,"changes":62,"status":"modified"}]}