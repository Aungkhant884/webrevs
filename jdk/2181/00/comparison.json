{"files":[{"patch":"@@ -239,0 +239,12 @@\n+  HeapRegion* prev = curr->prev();\n+  if (prev == NULL) {\n+    assert_free_region_list(_head == curr, \"invariant\");\n+  } else {\n+    assert_free_region_list(_head != curr, \"invariant\");\n+  }\n+  HeapRegion* next = curr->next();\n+  if (next == NULL) {\n+    assert_free_region_list(_tail == curr, \"invariant\");\n+  } else {\n+    assert_free_region_list(_tail != curr, \"invariant\");\n+  }\n@@ -242,2 +254,1 @@\n-    HeapRegion* next = curr->next();\n-    HeapRegion* prev = curr->prev();\n+    next = curr->next();\n@@ -245,0 +256,5 @@\n+    assert_free_region_list(_head != next, \"invariant\");\n+    if (next != NULL) {\n+      assert_free_region_list(next->prev() != NULL, \"invariant\");\n+      assert_free_region_list(_tail != curr, \"invariant\");\n+    }\n@@ -250,14 +266,0 @@\n-    if (prev == NULL) {\n-      assert_free_region_list(_head == curr, \"invariant\");\n-      _head = next;\n-    } else {\n-      assert_free_region_list(_head != curr, \"invariant\");\n-      prev->set_next(next);\n-    }\n-    if (next == NULL) {\n-      assert_free_region_list(_tail == curr, \"invariant\");\n-      _tail = prev;\n-    } else {\n-      assert_free_region_list(_tail != curr, \"invariant\");\n-      next->set_prev(prev);\n-    }\n@@ -279,0 +281,11 @@\n+  if (prev == NULL) {\n+    _head = next;\n+  } else {\n+    prev->set_next(next);\n+  }\n+  if (next == NULL) {\n+    _tail = prev;\n+  } else {\n+    next->set_prev(prev);\n+  }\n+\n","filename":"src\/hotspot\/share\/gc\/g1\/heapRegionSet.cpp","additions":29,"deletions":16,"binary":false,"changes":45,"status":"modified"}]}