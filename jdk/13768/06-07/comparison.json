{"files":[{"patch":"@@ -460,1 +460,1 @@\n-ifneq ($(filter static-libs-bundles java-static-libs-bundles, $(MAKECMDGOALS)), )\n+ifneq ($(filter static-libs-bundles, $(MAKECMDGOALS)), )\n@@ -493,1 +493,0 @@\n-java-static-libs-bundles: $(HOTSPOT_VARIANT_MAIN_STATIC_LIBS_TARGETS) $(STATIC_LIBS_TARGETS)\n@@ -498,1 +497,1 @@\n-    static-libs-bundles java-static-libs-bundles jcov-bundles\n+    static-libs-bundles jcov-bundles\n","filename":"make\/Bundles.gmk","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -236,1 +236,1 @@\n-HOTSPOT_VARIANT_MAIN_STATIC_LIBS_TARGETS := hotspot-$(JVM_VARIANT_MAIN)-static-libs\n+HOTSPOT_VARIANT_STATIC_LIBS_TARGETS := $(addsuffix -static-libs, $(HOTSPOT_VARIANT_TARGETS))\n@@ -256,1 +256,1 @@\n-  hotspot-$(JVM_VARIANT_MAIN)-static-libs:\n+  hotspot-$1-static-libs:\n@@ -258,1 +258,1 @@\n-\t    JVM_VARIANT=$(JVM_VARIANT_MAIN) STATIC_LIBS=true)\n+\t    JVM_VARIANT=$1 STATIC_LIBS=true)\n@@ -261,1 +261,1 @@\n-$(eval $(call DeclareHotspotStaticLibsRecipe))\n+$(foreach v, $(JVM_VARIANTS), $(eval $(call DeclareHotspotStaticLibsRecipe,$v)))\n@@ -310,1 +310,1 @@\n-    $(HOTSPOT_VARIANT_LIBS_TARGETS) $(HOTSPOT_VARIANT_MAIN_STATIC_LIBS_TARGETS)\n+    $(HOTSPOT_VARIANT_LIBS_TARGETS) $(HOTSPOT_VARIANT_STATIC_LIBS_TARGETS) \n@@ -474,0 +474,1 @@\n+    TARGET := static-libs-image, \\\n@@ -476,2 +477,3 @@\n-$(eval $(call SetupTarget, java-static-libs-image, \\\n-    MAKEFILE := StaticJvmLibsImage, \\\n+$(eval $(call SetupTarget, static-libs-graal-image, \\\n+    MAKEFILE := StaticLibsImage, \\\n+    TARGET := static-libs-graal-image, \\\n@@ -505,1 +507,1 @@\n-    DEPS := jdk-image static-libs-image, \\\n+    DEPS := jdk-image static-libs-graal-image, \\\n@@ -852,6 +854,0 @@\n-$(eval $(call SetupTarget, java-static-libs-bundles, \\\n-    MAKEFILE := Bundles, \\\n-    TARGET := java-static-libs-bundles, \\\n-    DEPS := java-static-libs-image, \\\n-))\n-\n@@ -911,0 +907,1 @@\n+      $(eval hotspot-$v-static-libs: hotspot-$v-gensrc java.base-copy) \\\n@@ -913,2 +910,0 @@\n-  hotspot-$(JVM_VARIANT_MAIN)-static-libs: hotspot-$(JVM_VARIANT_MAIN)-gensrc java.base-copy\n-\n@@ -1071,1 +1066,1 @@\n-  static-libs-image: $(STATIC_LIBS_TARGETS)\n+  static-libs-image: hotspot-static-libs $(STATIC_LIBS_TARGETS)\n@@ -1073,1 +1068,1 @@\n-  java-static-libs-image: hotspot-static-libs static-libs-image\n+  static-libs-graal-image: $(STATIC_LIBS_TARGETS) \n@@ -1123,0 +1118,1 @@\n+  $(eval hotspot-static-libs: hotspot-$v-static-libs) \\\n@@ -1125,2 +1121,0 @@\n-$(eval hotspot-static-libs: hotspot-$(JVM_VARIANT_MAIN)-static-libs)\n-\n@@ -1285,1 +1279,1 @@\n-all-bundles: product-bundles test-bundles docs-bundles static-libs-bundles java-static-libs-bundles\n+all-bundles: product-bundles test-bundles docs-bundles static-libs-bundles\n","filename":"make\/Main.gmk","additions":15,"deletions":21,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -1,49 +0,0 @@\n-#\n-# Copyright (c) 2023 Google Inc. All rights reserved.\n-# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-#\n-# This code is free software; you can redistribute it and\/or modify it\n-# under the terms of the GNU General Public License version 2 only, as\n-# published by the Free Software Foundation.  Oracle designates this\n-# particular file as subject to the \"Classpath\" exception as provided\n-# by Oracle in the LICENSE file that accompanied this code.\n-#\n-# This code is distributed in the hope that it will be useful, but WITHOUT\n-# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n-# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n-# version 2 for more details (a copy is included in the LICENSE file that\n-# accompanied this code).\n-#\n-# You should have received a copy of the GNU General Public License version\n-# 2 along with this work; if not, write to the Free Software Foundation,\n-# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-#\n-# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-# or visit www.oracle.com if you need additional information or have any\n-# questions.\n-#\n-\n-# This makefile creates an image of the optional static version of Hotspot\n-# JVM library.\n-\n-default: all\n-\n-include $(SPEC)\n-include MakeBase.gmk\n-\n-################################################################################\n-\n-TARGETS :=\n-\n-$(eval $(call SetupCopyFiles, COPY_STATIC_LIBS_libjvm, \\\n-    SRC := $(HOTSPOT_OUTPUTDIR)\/variant-$(JVM_VARIANT_MAIN)\/libjvm\/objs\/static, \\\n-    DEST := $(STATIC_LIBS_IMAGE_DIR)\/lib, \\\n-    FILES := $(wildcard $(HOTSPOT_OUTPUTDIR)\/variant-$(JVM_VARIANT_MAIN)\/libjvm\/objs\/static\/*$(STATIC_LIBRARY_SUFFIX)), \\\n-))\n-TARGETS += $(COPY_STATIC_LIBS_libjvm)\n-\n-################################################################################\n-\n-all: $(TARGETS)\n-\n-.PHONY: all\n","filename":"make\/StaticJvmLibsImage.gmk","additions":0,"deletions":49,"binary":false,"changes":49,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,0 +41,7 @@\n+ifneq ($(filter static-libs-image, $(MAKECMDGOALS)), )\n+  IMAGE_DEST_DIR=$(STATIC_LIBS_IMAGE_DIR)\/lib\n+else ifneq ($(filter static-libs-graal-image, $(MAKECMDGOALS)), )\n+  IMAGE_DEST_DIR=$(STATIC_LIBS_GRAAL_IMAGE_DIR)\/lib\n+endif\n+\n+# Copy JDK static libs to the image.\n@@ -45,1 +52,1 @@\n-      DEST := $(STATIC_LIBS_IMAGE_DIR)\/lib, \\\n+      DEST := $(IMAGE_DEST_DIR), \\\n@@ -50,0 +57,1 @@\n+  $(eval STATIC_LIBS_TARGETS += $$(COPY_STATIC_LIBS_$m)) \\\n@@ -52,0 +60,13 @@\n+ifneq ($(filter static-libs-image, $(MAKECMDGOALS)), )\n+  # Copy libjvm static library to the image.\n+  $(foreach v, $(JVM_VARIANTS), \\\n+    $(eval $(call SetupCopyFiles, COPY_STATIC_LIBS_$v, \\\n+        SRC := $(HOTSPOT_OUTPUTDIR)\/variant-$v\/libjvm\/objs\/static, \\\n+        DEST := $(IMAGE_DEST_DIR)\/$v, \\\n+        FILES := $(wildcard $(HOTSPOT_OUTPUTDIR)\/variant-$v\/libjvm\/objs\/static\/*$(STATIC_LIBRARY_SUFFIX)), \\\n+    )) \\\n+    $(eval TARGETS += $$(COPY_STATIC_LIBS_$v)) \\\n+    $(eval HOTSPOT_VARIANT_STATIC_LIBS_TARGETS += $$(COPY_STATIC_LIBS_$v)) \\\n+  )\n+endif\n+\n@@ -54,0 +75,3 @@\n+static-libs-image: $(HOTSPOT_VARIANT_STATIC_LIBS_TARGETS) $(STATIC_LIBS_TARGETS)\n+static-libs-graal-image: $(STATIC_LIBS_TARGETS)\n+\n","filename":"make\/StaticLibsImage.gmk","additions":26,"deletions":2,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -931,0 +931,4 @@\n+# Graal static libs image\n+STATIC_LIBS_GRAAL_IMAGE_SUBDIR := static-libs-graal\n+STATIC_LIBS_GRAAL_IMAGE_DIR := $(IMAGES_OUTPUTDIR)\/$(STATIC_LIBS_GRAAL_IMAGE_SUBDIR)\n+\n","filename":"make\/autoconf\/spec.gmk.in","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"}]}