{"files":[{"patch":"@@ -107,1 +107,1 @@\n-bool ShenandoahCodeRoots::should_use_nmethod_barriers() {\n+bool ShenandoahCodeRoots::use_nmethod_barriers_for_mark() {\n@@ -135,2 +135,2 @@\n-void ShenandoahCodeRoots::arm_nmethods() {\n-  if (should_use_nmethod_barriers()) {\n+void ShenandoahCodeRoots::arm_nmethods_for_mark() {\n+  if (use_nmethod_barriers_for_mark()) {\n@@ -141,0 +141,4 @@\n+void ShenandoahCodeRoots::arm_nmethods_for_evac() {\n+  BarrierSet::barrier_set()->barrier_set_nmethod()->arm_all_nmethods();\n+}\n+\n@@ -181,1 +185,1 @@\n-  if (should_use_nmethod_barriers()) {\n+  if (use_nmethod_barriers_for_mark()) {\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahCodeRoots.cpp","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -100,1 +100,2 @@\n-  static void arm_nmethods();\n+  static void arm_nmethods_for_mark();\n+  static void arm_nmethods_for_evac();\n@@ -105,1 +106,1 @@\n-  static bool should_use_nmethod_barriers();\n+  static bool use_nmethod_barriers_for_mark();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahCodeRoots.hpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -550,1 +550,1 @@\n-  ShenandoahCodeRoots::arm_nmethods();\n+  ShenandoahCodeRoots::arm_nmethods_for_mark();\n@@ -603,1 +603,1 @@\n-      ShenandoahCodeRoots::arm_nmethods();\n+      ShenandoahCodeRoots::arm_nmethods_for_evac();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahConcurrentGC.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -209,1 +209,1 @@\n-  CodeBlobToOopClosure* adjust_code_closure = ShenandoahCodeRoots::should_use_nmethod_barriers() ?\n+  CodeBlobToOopClosure* adjust_code_closure = ShenandoahCodeRoots::use_nmethod_barriers_for_mark() ?\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahRootProcessor.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -175,1 +175,1 @@\n-  CodeBlobToOopClosure* codes_cl = ShenandoahCodeRoots::should_use_nmethod_barriers() ?\n+  CodeBlobToOopClosure* codes_cl = ShenandoahCodeRoots::use_nmethod_barriers_for_mark() ?\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahRootProcessor.inline.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -96,1 +96,1 @@\n-  ShenandoahCodeRoots::arm_nmethods();\n+  ShenandoahCodeRoots::arm_nmethods_for_mark();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahSTWMark.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}