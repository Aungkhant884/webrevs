{"files":[{"patch":"@@ -159,0 +159,1 @@\n+        boolean resetTransform = false;\n@@ -163,1 +164,4 @@\n-            if((at.getType() & AffineTransform.TYPE_MASK_SCALE) != 0) {\n+            \/\/ if m01 or m10 is non-zero, then there is a rotation or shear\n+            \/\/ skip resetting the transform\n+            resetTransform = (at.getShearX() == 0) && (at.getShearY() == 0);\n+            if(resetTransform) {\n@@ -167,2 +171,0 @@\n-                RenderingHints rend =\n-                        new RenderingHints(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);\n@@ -170,0 +172,2 @@\n+            RenderingHints rend =\n+                    new RenderingHints(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);\n@@ -172,5 +176,15 @@\n-        int w = (int) Math.floor(at.getScaleX()*width-1);\n-        int h = (int) Math.floor(at.getScaleY()*height-1);\n-\n-        int xtranslation = (int) Math.ceil(at.getScaleX()*x+at.getTranslateX());\n-        int ytranslation = (int) Math.ceil(at.getScaleY()*y+at.getTranslateY());\n+        int w;\n+        int h;\n+        int xtranslation;\n+        int ytranslation;\n+        if(resetTransform) {\n+            w = (int) Math.floor(at.getScaleX() * width - 1);\n+            h = (int) Math.floor(at.getScaleY() * height - 1);\n+            xtranslation = (int) Math.ceil(at.getScaleX()*x+at.getTranslateX());\n+            ytranslation = (int) Math.ceil(at.getScaleY()*y+at.getTranslateY());\n+        } else {\n+            w = width;\n+            h = height;\n+            xtranslation = x;\n+            ytranslation = y;\n+        }\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/border\/EtchedBorder.java","additions":22,"deletions":8,"binary":false,"changes":30,"status":"modified"}]}