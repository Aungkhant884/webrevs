{"files":[{"patch":"@@ -40,0 +40,6 @@\n+import java.awt.GraphicsDevice;\n+\n+import java.awt.GraphicsEnvironment;\n+\n+import sun.awt.X11GraphicsDevice;\n+\n@@ -600,1 +606,36 @@\n-        if (xwindow == null) {\n+        if (xwindow != null) {\n+            x = xwindow.scaleDown(x);\n+            y = xwindow.scaleDown(y);\n+        } else {\n+            long display = xclient.get_display();\n+            GraphicsEnvironment ge = GraphicsEnvironment.\n+                    getLocalGraphicsEnvironment();\n+            GraphicsDevice[] gds = ge.getScreenDevices();\n+            int gdslen = gds.length;\n+            XToolkit.awtLock();\n+            try {\n+                for (int i = 0; i < gdslen; i++) {\n+                    long screenRoot = XlibWrapper.RootWindow(display, i);\n+                    boolean pointerFound = XlibWrapper.XQueryPointer(\n+                            display, screenRoot,\n+                            XlibWrapper.larg1,  \/\/ root_return\n+                            XlibWrapper.larg2,  \/\/ child_return\n+                            XlibWrapper.larg3,  \/\/ xr_return\n+                            XlibWrapper.larg4,  \/\/ yr_return\n+                            XlibWrapper.larg5,  \/\/ xw_return\n+                            XlibWrapper.larg6,  \/\/ yw_return\n+                            XlibWrapper.larg7); \/\/ mask_return\n+                    if (pointerFound) {\n+                        GraphicsDevice device = gds[i];\n+                        if (device instanceof X11GraphicsDevice) {\n+                            int scale = ((X11GraphicsDevice) device).getScaleFactor();\n+                            x = XlibUtil.scaleDown(x, scale);\n+                            y = XlibUtil.scaleDown(y, scale);\n+                        }\n+                        break;\n+                    }\n+                }\n+            } finally {\n+                XToolkit.awtUnlock();\n+            }\n+\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XDnDDropTargetProtocol.java","additions":42,"deletions":1,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -527,2 +527,2 @@\n-            dragProtocol.sendMoveMessage(scaleDown(xmotion.get_x_root()),\n-                                         scaleDown(xmotion.get_y_root()),\n+            dragProtocol.sendMoveMessage(xmotion.get_x_root(),\n+                                         xmotion.get_y_root(),\n@@ -536,2 +536,2 @@\n-            dragProtocol.initiateDrop(scaleDown(xbutton.get_x_root()),\n-                                      scaleDown(xbutton.get_y_root()),\n+            dragProtocol.initiateDrop(xbutton.get_x_root(),\n+                                      xbutton.get_y_root(),\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XDragSourceContextPeer.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}