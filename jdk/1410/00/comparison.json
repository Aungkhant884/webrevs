{"files":[{"patch":"@@ -1608,1 +1608,17 @@\n-  set_req(1, igvn->intcon(br == tb ? 1 : 0));\n+  bool is_always_true = br == tb;\n+  set_req(1, igvn->intcon(is_always_true ? 1 : 0));\n+\n+  \/\/ Update any data dependencies to the directly dominating test. This subsumed test is not immediately removed by igvn\n+  \/\/ and therefore subsequent optimizations might miss these data dependencies otherwise. There might be a dead loop\n+  \/\/ ('always_taken_proj' == 'pre') that is cleaned up later. Skip this case to make the iterator work properly.\n+  Node* always_taken_proj = proj_out(is_always_true);\n+  if (always_taken_proj != pre) {\n+    for (DUIterator_Fast imax, i = always_taken_proj->fast_outs(imax); i < imax; i++) {\n+      Node* u = always_taken_proj->fast_out(i);\n+      if (!u->is_CFG()) {\n+        igvn->replace_input_of(u, 0, pre);\n+        --i;\n+        --imax;\n+      }\n+    }\n+  }\n","filename":"src\/hotspot\/share\/opto\/ifnode.cpp","additions":17,"deletions":1,"binary":false,"changes":18,"status":"modified"}]}