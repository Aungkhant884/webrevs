{"files":[{"patch":"@@ -55,1 +55,4 @@\n-        if (encoding.equalsIgnoreCase(\"windows-31j\")) {\n+        if (encoding.equalsIgnoreCase(\"windows-31j\") ||\n+            (encoding.equalsIgnoreCase(\"UTF-8\") &&\n+             startupLocale.getLanguage().equals(\"ja\")))\n+        {\n@@ -176,0 +179,1 @@\n+                break;\n@@ -183,1 +187,1 @@\n-    private static String textInputCharset;\n+    private static String textInputCharset = \"DEFAULT_CHARSET\";\n@@ -240,2 +244,0 @@\n-        } else if (\"UTF-8\".equals(defaultEncoding)) {\n-            textInputCharset = \"DEFAULT_CHARSET\";\n@@ -252,2 +254,19 @@\n-        } else {\n-            textInputCharset = \"DEFAULT_CHARSET\";\n+        } else if (defaultEncoding.startsWith(\"UTF-8\")) {\n+            String lang = startupLocale.getLanguage();\n+            String country = startupLocale.getCountry();\n+            textInputCharset = switch(lang) {\n+                case \"ar\" -> \"ARABIC_CHARSET\";\n+                case \"zh\" -> {\n+                    yield switch(country) {\n+                        case \"TW\", \"HK\" -> \"CHINESEBIG5_CHARSET\";\n+                        default -> \"GB2312_CHARSET\";\n+                    };\n+                }\n+                case \"ru\" -> \"RUSSIAN_CHARSET\";\n+                case \"el\" -> \"GREEK_CHARSET\";\n+                case \"iw\" -> \"HEBREW_CHARSET\";\n+                case \"ja\" -> \"SHIFTJIS_CHARSET\";\n+                case \"ko\" -> \"HANGEUL_CHARSET\";\n+                case \"th\" -> \"THAI_CHARSET\";\n+                default -> \"DEFAULT_CHARSET\";\n+            };\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/WFontConfiguration.java","additions":25,"deletions":6,"binary":false,"changes":31,"status":"modified"}]}