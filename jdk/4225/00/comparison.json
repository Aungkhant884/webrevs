{"files":[{"patch":"@@ -97,0 +97,4 @@\n+  \/\/ Finally consider the amount of used regions.\n+  uint regions_per_worker = (uint) (HeapSizePerGCThread \/ G1HeapRegionSize);\n+  uint used_worker_limit = MAX2((heap->num_used_regions() \/ regions_per_worker), 1u);\n+\n@@ -98,3 +102,4 @@\n-  uint worker_count = MIN2(heap_waste_worker_limit, active_worker_limit);\n-  log_debug(gc, task)(\"Requesting %u active workers for full compaction (waste limited workers: %u, adaptive workers: %u)\",\n-                      worker_count, heap_waste_worker_limit, active_worker_limit);\n+  uint worker_count = MIN3(heap_waste_worker_limit, active_worker_limit, used_worker_limit);\n+  log_debug(gc, task)(\"Requesting %u active workers for full compaction (waste limited workers: %u, \"\n+                      \"adaptive workers: %u, used limited workers: %u)\",\n+                      worker_count, heap_waste_worker_limit, active_worker_limit, used_worker_limit);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1FullCollector.cpp","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"}]}