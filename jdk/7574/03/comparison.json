{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,1 +30,1 @@\n- *      8067796 8224905 8263729 8265173 8272600 8231297\n+ *      8067796 8224905 8263729 8265173 8272600 8231297 8282219\n@@ -63,0 +63,1 @@\n+import java.util.stream.Collectors;\n@@ -78,2 +79,18 @@\n-    \/* used for AIX only *\/\n-    static final String libpath = System.getenv(\"LIBPATH\");\n+    \/* used for AIX only (without test.nativepath setting) *\/\n+    static final String libpath;\n+    static {\n+        String libpathString = System.getenv(\"LIBPATH\");\n+        if (libpathString == null) {\n+            libpathString = \"\";\n+        } else if (AIX.is()) {\n+            String nativepath = System.getProperty(\"test.nativepath\");\n+            if (nativepath != null) {\n+                libpathString = Arrays.asList(\n+                    libpathString.split(File.pathSeparator))\n+                    .stream()\n+                    .filter(s -> !s.equals(nativepath))\n+                    .collect(Collectors.joining(File.pathSeparator));\n+            }\n+        }\n+        libpath = libpathString;\n+    }\n@@ -1366,3 +1383,0 @@\n-            if (AIX.is()) {\n-                pb.environment().put(\"LIBPATH\", libpath);\n-            }\n","filename":"test\/jdk\/java\/lang\/ProcessBuilder\/Basic.java","additions":21,"deletions":7,"binary":false,"changes":28,"status":"modified"}]}