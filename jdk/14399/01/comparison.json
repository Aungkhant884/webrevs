{"files":[{"patch":"@@ -1388,3 +1388,2 @@\n-      if ((holder == resolver.Carrier_klass\n-           || holder == vmClasses::VirtualThread_klass()\n-           || holder == vmClasses::Thread_klass())) {\n+      if (holder == vmClasses::Thread_klass()\n+          || holder == resolver.Carrier_klass) {\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -1594,1 +1594,1 @@\n-    private void runWith(Object bindings, Runnable op) {\n+    final void runWith(Object bindings, Runnable op) {\n","filename":"src\/java.base\/share\/classes\/java\/lang\/Thread.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -436,1 +436,2 @@\n-                task.run();\n+                Object bindings = scopedValueBindings();\n+                runWith(bindings, task);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/ThreadBuilders.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -27,1 +27,0 @@\n-import java.lang.ref.Reference;\n@@ -337,8 +336,0 @@\n-    @Hidden\n-    @ForceInline\n-    private void runWith(Object bindings, Runnable op) {\n-        ensureMaterializedForStackWalk(bindings);\n-        op.run();\n-        Reference.reachabilityFence(bindings);\n-    }\n-\n","filename":"src\/java.base\/share\/classes\/java\/lang\/VirtualThread.java","additions":0,"deletions":9,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -47,2 +47,0 @@\n-java\/lang\/ScopedValue\/StressStackOverflow.java 8309646 generic-all\n-\n","filename":"test\/jdk\/ProblemList-Virtual.txt","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -24,2 +24,2 @@\n-\/**\n- * @test\n+\/*\n+ * @test id=default\n@@ -33,0 +33,7 @@\n+\/*\n+ * @test id=no-vmcontinuations\n+ * @requires vm.continuations\n+ * @enablePreview\n+ * @run main\/othervm\/timeout=300 -XX:+UnlockExperimentalVMOptions -XX:-VMContinuations StressStackOverflow\n+ *\/\n+\n","filename":"test\/jdk\/java\/lang\/ScopedValue\/StressStackOverflow.java","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"}]}