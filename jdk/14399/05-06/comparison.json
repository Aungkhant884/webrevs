{"files":[{"patch":"@@ -41,1 +41,0 @@\n-import java.util.concurrent.ThreadFactory;\n@@ -52,1 +51,0 @@\n-    final ThreadLocalRandom tlr = ThreadLocalRandom.current();\n@@ -64,1 +62,1 @@\n-    class DeepRecursion implements Callable, Supplier, Runnable {\n+    class DeepRecursion implements Callable<Object>, Supplier<Object>, Runnable {\n@@ -66,1 +64,1 @@\n-        static enum Behaviour {\n+        enum Behaviour {\n@@ -68,1 +66,1 @@\n-            private static Behaviour[] values = values();\n+            private static final Behaviour[] values = values();\n@@ -87,1 +85,1 @@\n-                var nextRandomFloat = tlr.nextFloat();\n+                var nextRandomFloat = ThreadLocalRandom.current().nextFloat();\n@@ -128,3 +126,1 @@\n-    static final Runnable nop = new Runnable() {\n-        public void run() { }\n-    };\n+    static final Runnable nop = () -> {};\n@@ -134,1 +130,0 @@\n-\n@@ -151,1 +146,1 @@\n-            return fibonacci_pad1(tlr.nextInt(n), op);\n+            return fibonacci_pad1(ThreadLocalRandom.current().nextInt(n), op);\n@@ -166,2 +161,2 @@\n-                = (tlr.nextBoolean() ? Thread.ofPlatform() : Thread.ofVirtual()).factory();\n-        try (var scope = new StructuredTaskScope<Object>(\"\", threadFactory)) {\n+                = (ThreadLocalRandom.current().nextBoolean() ? Thread.ofPlatform() : Thread.ofVirtual()).factory();\n+        try (var scope = new StructuredTaskScope<>(\"\", threadFactory)) {\n@@ -184,1 +179,1 @@\n-                try (var scope = new StructuredTaskScope<Object>()) {\n+                try (var scope = new StructuredTaskScope<>()) {\n@@ -186,1 +181,1 @@\n-                        if (tlr.nextBoolean()) {\n+                        if (ThreadLocalRandom.current().nextBoolean()) {\n@@ -189,1 +184,1 @@\n-                                = new DeepRecursion(DeepRecursion.Behaviour.choose(tlr));\n+                                = new DeepRecursion(DeepRecursion.Behaviour.choose(ThreadLocalRandom.current()));\n@@ -246,2 +241,0 @@\n-            } catch (TestFailureException e) {\n-                throw e;\n","filename":"test\/jdk\/java\/lang\/ScopedValue\/StressStackOverflow.java","additions":11,"deletions":18,"binary":false,"changes":29,"status":"modified"}]}