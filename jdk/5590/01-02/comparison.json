{"files":[{"patch":"@@ -376,1 +376,1 @@\n-void unlock_locks_owned_by(Thread* thread) {\n+void unlock_locks_on_error(JavaThread* thread) {\n@@ -378,4 +378,0 @@\n-  if (thread->is_Watcher_thread()) {\n-    \/\/ need WatcherThread as a safeguard against potential deadlocks\n-    return;\n-  }\n@@ -390,2 +386,1 @@\n-#endif \/\/ ASSERT\n-\n+#else\n@@ -397,0 +392,1 @@\n+#endif \/\/ ASSERT\n","filename":"src\/hotspot\/share\/runtime\/mutexLocker.cpp","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -175,1 +175,2 @@\n-void unlock_locks_owned_by(Thread* t);\n+\/\/ Unlock all Mutex\/Monitors currently owned by a JavaThread.\n+void unlock_locks_on_error(JavaThread* t);\n","filename":"src\/hotspot\/share\/runtime\/mutexLocker.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1327,1 +1327,2 @@\n-      unlock_locks_owned_by(t);\n+      unlock_locks_on_error(jt);\n+\n","filename":"src\/hotspot\/share\/utilities\/vmError.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @bug 8155004 8273608\n@@ -32,1 +33,0 @@\n- * @bug 8155004 8273608\n@@ -65,1 +65,0 @@\n-        \/\/ else this is the main test\n@@ -87,0 +86,3 @@\n+        \/\/ before\n+        output_single.stdoutShouldMatch(\"^Full thread dump\");\n+        \/\/ echo $msg\n@@ -88,0 +90,2 @@\n+        \/\/ after\n+        output_single.stdoutShouldContain(\"Heap dump file created\");\n@@ -90,0 +94,1 @@\n+        \/\/output_single.reportDiagnosticSummary();\n","filename":"test\/hotspot\/jtreg\/runtime\/ErrorHandling\/TestOutOfMemoryErrorFromNIO.java","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"}]}