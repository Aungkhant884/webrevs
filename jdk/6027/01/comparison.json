{"files":[{"patch":"@@ -3180,11 +3180,0 @@\n-        \/\/ This is an unsupported hack, but left in for a customer.\n-        \/\/ Do not remove.\n-        FontManager fm = FontManagerFactory.getInstance();\n-        if (fm instanceof SunFontManager\n-            && ((SunFontManager) fm).usePlatformFontMetrics()) {\n-\n-            if (peer != null &&\n-                !(peer instanceof LightweightPeer)) {\n-                return peer.getFontMetrics(font);\n-            }\n-        }\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Component.java","additions":0,"deletions":11,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -233,6 +233,0 @@\n-    \/**\n-     * Deprecated, unsupported hack - actually invokes a bug!\n-     * Left in for a customer, don't remove.\n-     *\/\n-    private boolean usePlatformFontMetrics = false;\n-\n@@ -457,16 +451,0 @@\n-        boolean platformFont = AccessController.doPrivileged(\n-            new PrivilegedAction<Boolean>() {\n-                    public Boolean run() {\n-                        String prop = System.getProperty(\"java2d.font.usePlatformFont\");\n-                        String env = System.getenv(\"JAVA2D_USEPLATFORMFONT\");\n-                        return \"true\".equals(prop) || env != null;\n-                    }\n-            });\n-\n-        if (platformFont) {\n-            usePlatformFontMetrics = true;\n-            System.out.println(\"Enabling platform font metrics for win32. This is an unsupported option.\");\n-            System.out.println(\"This yields incorrect composite font metrics as reported by 1.1.x releases.\");\n-            System.out.println(\"It is appropriate only for use by applications which do not use any Java 2\");\n-            System.out.println(\"functionality. This property will be removed in a later release.\");\n-        }\n@@ -2191,9 +2169,0 @@\n-    \/*\n-     * Workaround for apps which are dependent on a font metrics bug\n-     * in JDK 1.1. This is an unsupported win32 private setting.\n-     * Left in for a customer - do not remove.\n-     *\/\n-    public boolean usePlatformFontMetrics() {\n-        return usePlatformFontMetrics;\n-    }\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/font\/SunFontManager.java","additions":0,"deletions":31,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -687,13 +687,0 @@\n-\n-    @Override\n-    public FontMetrics getFontMetrics(Font font) {\n-        \/\/ This is an unsupported hack, but left in for a customer.\n-        \/\/ Do not remove.\n-        FontManager fm = FontManagerFactory.getInstance();\n-        if (fm instanceof SunFontManager\n-            && ((SunFontManager) fm).usePlatformFontMetrics()) {\n-            return WFontMetrics.getFontMetrics(font);\n-        }\n-        return super.getFontMetrics(font);\n-    }\n-\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/WToolkit.java","additions":0,"deletions":13,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -242,1 +242,0 @@\n-java\/awt\/FontMetrics\/FontCrash.java 8198336 windows-all\n","filename":"test\/jdk\/ProblemList.txt","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1,42 +0,0 @@\n-\/*\n- * Copyright (c) 2017, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/*\n- * @test\n- * @bug 8172999\n- * @summary Verify no crash loading font metrics instance.\n- * @run main\/othervm FontCrash\n- *\/\n-import java.awt.Font;\n-import java.awt.FontMetrics;\n-import java.awt.Toolkit;\n-\n-public class FontCrash {\n-\n-    public static void main(String[] args) {\n-        System.setProperty(\"java2d.font.usePlatformFont\", \"true\");\n-        Font f = new Font(Font.DIALOG,Font.PLAIN,12);\n-        Toolkit tk = Toolkit.getDefaultToolkit();\n-        tk.getFontMetrics(f);\n-    }\n-}\n","filename":"test\/jdk\/java\/awt\/FontMetrics\/FontCrash.java","additions":0,"deletions":42,"binary":false,"changes":42,"status":"deleted"}]}