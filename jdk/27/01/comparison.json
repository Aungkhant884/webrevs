{"files":[{"patch":"@@ -2679,1 +2679,1 @@\n-  Universe::update_heap_info_at_gc();\n+  Universe::heap()->update_capacity_and_used_at_gc();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1283,1 +1283,1 @@\n-  Universe::update_heap_info_at_gc();\n+  Universe::heap()->update_capacity_and_used_at_gc();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMark.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1046,1 +1046,1 @@\n-  Universe::update_heap_info_at_gc();\n+  Universe::heap()->update_capacity_and_used_at_gc();\n","filename":"src\/hotspot\/share\/gc\/parallel\/psParallelCompact.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -138,1 +138,1 @@\n-  Universe::update_heap_info_at_gc();\n+  Universe::heap()->update_capacity_and_used_at_gc();\n","filename":"src\/hotspot\/share\/gc\/serial\/genMarkSweep.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -193,0 +193,2 @@\n+  _capacity_at_last_gc(0),\n+  _used_at_last_gc(0),\n@@ -593,0 +595,7 @@\n+\n+\/\/ It's the caller's responsibility to ensure glitch-freedom\n+\/\/ (if required).\n+void CollectedHeap::update_capacity_and_used_at_gc() {\n+  _capacity_at_last_gc = capacity();\n+  _used_at_last_gc     = used();\n+}\n","filename":"src\/hotspot\/share\/gc\/shared\/collectedHeap.cpp","additions":9,"deletions":0,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -113,0 +113,4 @@\n+  \/\/ Historic gc information\n+  size_t _capacity_at_last_gc;\n+  size_t _used_at_last_gc;\n+\n@@ -242,0 +246,5 @@\n+  \/\/ Historic gc information\n+  size_t free_at_last_gc()    { return _capacity_at_last_gc - _used_at_last_gc; }\n+  size_t used_at_last_gc()    { return _used_at_last_gc; }\n+  void update_capacity_and_used_at_gc();\n+\n","filename":"src\/hotspot\/share\/gc\/shared\/collectedHeap.hpp","additions":9,"deletions":0,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -38,1 +38,1 @@\n-  _max_interval = (Universe::get_heap_free_at_last_gc() \/ M) * SoftRefLRUPolicyMSPerMB;\n+  _max_interval = (Universe::heap()->free_at_last_gc() \/ M) * SoftRefLRUPolicyMSPerMB;\n@@ -66,1 +66,1 @@\n-  max_heap -= Universe::get_heap_used_at_last_gc();\n+  max_heap -= Universe::heap()->used_at_last_gc();\n","filename":"src\/hotspot\/share\/gc\/shared\/referencePolicy.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -240,1 +240,1 @@\n-        Universe::update_heap_info_at_gc();\n+        Universe::heap()->update_capacity_and_used_at_gc();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahControlThread.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -383,1 +383,1 @@\n-    Universe::update_heap_info_at_gc();\n+    Universe::heap()->update_capacity_and_used_at_gc();\n","filename":"src\/hotspot\/share\/gc\/z\/zDriver.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -229,1 +229,1 @@\n-  sample->set_heap_used_at_last_gc(Universe::get_heap_used_at_last_gc());\n+  sample->set_heap_used_at_last_gc(Universe::heap()->used_at_last_gc());\n","filename":"src\/hotspot\/share\/jfr\/leakprofiler\/sampling\/objectSampler.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -144,3 +144,0 @@\n-size_t          Universe::_heap_capacity_at_last_gc;\n-size_t          Universe::_heap_used_at_last_gc = 0;\n-\n@@ -868,8 +865,0 @@\n-\n-\/\/ It's the caller's responsibility to ensure glitch-freedom\n-\/\/ (if required).\n-void Universe::update_heap_info_at_gc() {\n-  _heap_capacity_at_last_gc = heap()->capacity();\n-  _heap_used_at_last_gc     = heap()->used();\n-}\n-\n@@ -1011,1 +1000,1 @@\n-    Universe::update_heap_info_at_gc();\n+    Universe::heap()->update_capacity_and_used_at_gc();\n","filename":"src\/hotspot\/share\/memory\/universe.cpp","additions":1,"deletions":12,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -165,4 +165,0 @@\n-  \/\/ Historic gc information\n-  static size_t _heap_capacity_at_last_gc;\n-  static size_t _heap_used_at_last_gc;\n-\n@@ -312,5 +308,0 @@\n-  \/\/ Historic gc information\n-  static size_t get_heap_free_at_last_gc()             { return _heap_capacity_at_last_gc - _heap_used_at_last_gc; }\n-  static size_t get_heap_used_at_last_gc()             { return _heap_used_at_last_gc; }\n-  static void update_heap_info_at_gc();\n-\n","filename":"src\/hotspot\/share\/memory\/universe.hpp","additions":0,"deletions":9,"binary":false,"changes":9,"status":"modified"}]}