{"files":[{"patch":"@@ -432,1 +432,1 @@\n-  _g1h->g1mm()->update_sizes();\n+  _g1h->monitoring_support()->update_sizes();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1Allocator.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -350,1 +350,1 @@\n-    g1mm()->update_sizes();\n+    monitoring_support()->update_sizes();\n@@ -1453,1 +1453,1 @@\n-  _g1mm(NULL),\n+  _monitoring_support(nullptr),\n@@ -1766,1 +1766,1 @@\n-  _g1mm = new G1MonitoringSupport(this);\n+  _monitoring_support = new G1MonitoringSupport(this);\n@@ -3076,1 +3076,1 @@\n-    G1MonitoringScope ms(g1mm(),\n+    G1MonitoringScope ms(monitoring_support(),\n@@ -4174,1 +4174,1 @@\n-  g1mm()->update_eden_size();\n+  monitoring_support()->update_eden_size();\n@@ -4374,1 +4374,1 @@\n-  _g1mm->initialize_serviceability();\n+  _monitoring_support->initialize_serviceability();\n@@ -4378,1 +4378,1 @@\n-  return _g1mm->memory_usage();\n+  return _monitoring_support->memory_usage();\n@@ -4382,1 +4382,1 @@\n-  return _g1mm->memory_managers();\n+  return _monitoring_support->memory_managers();\n@@ -4386,1 +4386,1 @@\n-  return _g1mm->memory_pools();\n+  return _monitoring_support->memory_pools();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.cpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -251,1 +251,1 @@\n-  G1MonitoringSupport* _g1mm;\n+  G1MonitoringSupport* _monitoring_support;\n@@ -580,3 +580,3 @@\n-  G1MonitoringSupport* g1mm() {\n-    assert(_g1mm != NULL, \"should have been initialized\");\n-    return _g1mm;\n+  G1MonitoringSupport* monitoring_support() {\n+    assert(_monitoring_support != nullptr, \"should have been initialized\");\n+    return _monitoring_support;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -1312,1 +1312,1 @@\n-  _g1h->g1mm()->update_sizes();\n+  _g1h->monitoring_support()->update_sizes();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMark.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -116,1 +116,1 @@\n-    _scope(heap->g1mm(), explicit_gc, clear_soft_refs, do_maximum_compaction),\n+    _scope(heap->monitoring_support(), explicit_gc, clear_soft_refs, do_maximum_compaction),\n","filename":"src\/hotspot\/share\/gc\/g1\/g1FullCollector.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -39,1 +39,1 @@\n-  _g1mm(g1h->g1mm()) {\n+  _g1mm(g1h->monitoring_support()) {\n","filename":"src\/hotspot\/share\/gc\/g1\/g1MemoryPool.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -36,1 +36,1 @@\n-  G1MonitoringSupport* _g1mm;\n+  G1MonitoringSupport* _monitoring_support;\n@@ -39,1 +39,1 @@\n-  G1GenerationCounters(G1MonitoringSupport* g1mm,\n+  G1GenerationCounters(G1MonitoringSupport* monitoring_support,\n@@ -44,1 +44,2 @@\n-                       max_capacity, curr_capacity), _g1mm(g1mm) { }\n+                       max_capacity, curr_capacity),\n+    _monitoring_support(monitoring_support) { }\n@@ -51,2 +52,2 @@\n-  G1YoungGenerationCounters(G1MonitoringSupport* g1mm, const char* name, size_t max_size)\n-  : G1GenerationCounters(g1mm, name, 0 \/* ordinal *\/, 3 \/* spaces *\/,\n+  G1YoungGenerationCounters(G1MonitoringSupport* monitoring_support, const char* name, size_t max_size)\n+  : G1GenerationCounters(monitoring_support, name, 0 \/* ordinal *\/, 3 \/* spaces *\/,\n@@ -63,1 +64,1 @@\n-              G1MonitoringSupport::pad_capacity(_g1mm->young_gen_committed(), 3);\n+              G1MonitoringSupport::pad_capacity(_monitoring_support->young_gen_committed(), 3);\n@@ -70,2 +71,2 @@\n-  G1OldGenerationCounters(G1MonitoringSupport* g1mm, const char* name, size_t max_size)\n-  : G1GenerationCounters(g1mm, name, 1 \/* ordinal *\/, 1 \/* spaces *\/,\n+  G1OldGenerationCounters(G1MonitoringSupport* monitoring_support, const char* name, size_t max_size)\n+  : G1GenerationCounters(monitoring_support, name, 1 \/* ordinal *\/, 1 \/* spaces *\/,\n@@ -82,1 +83,1 @@\n-              G1MonitoringSupport::pad_capacity(_g1mm->old_gen_committed());\n+              G1MonitoringSupport::pad_capacity(_monitoring_support->old_gen_committed());\n@@ -345,4 +346,4 @@\n-G1MonitoringScope::G1MonitoringScope(G1MonitoringSupport* g1mm, bool full_gc, bool all_memory_pools_affected) :\n-  _g1mm(g1mm),\n-  _tcs(full_gc ? g1mm->_full_collection_counters : g1mm->_incremental_collection_counters),\n-  _tms(full_gc ? &g1mm->_full_gc_memory_manager : &g1mm->_incremental_memory_manager,\n+G1MonitoringScope::G1MonitoringScope(G1MonitoringSupport* monitoring_support, bool full_gc, bool all_memory_pools_affected) :\n+  _monitoring_support(monitoring_support),\n+  _tcs(full_gc ? monitoring_support->_full_collection_counters : monitoring_support->_incremental_collection_counters),\n+  _tms(full_gc ? &monitoring_support->_full_gc_memory_manager : &monitoring_support->_incremental_memory_manager,\n@@ -353,1 +354,1 @@\n-  _g1mm->update_sizes();\n+  _monitoring_support->update_sizes();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1MonitoringSupport.cpp","additions":15,"deletions":14,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -241,1 +241,1 @@\n-  G1MonitoringSupport* _g1mm;\n+  G1MonitoringSupport* _monitoring_support;\n@@ -245,1 +245,1 @@\n-  G1MonitoringScope(G1MonitoringSupport* g1mm, bool full_gc, bool all_memory_pools_affected);\n+  G1MonitoringScope(G1MonitoringSupport* monitoring_support, bool full_gc, bool all_memory_pools_affected);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1MonitoringSupport.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -173,1 +173,1 @@\n-  TraceCollectorStats tcs(g1h->g1mm()->conc_collection_counters());\n+  TraceCollectorStats tcs(g1h->monitoring_support()->conc_collection_counters());\n","filename":"src\/hotspot\/share\/gc\/g1\/g1VMOperations.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -59,1 +59,1 @@\n-  nonstatic_field(G1CollectedHeap, _g1mm,               G1MonitoringSupport*) \\\n+  nonstatic_field(G1CollectedHeap, _monitoring_support, G1MonitoringSupport*) \\\n","filename":"src\/hotspot\/share\/gc\/g1\/vmStructs_g1.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -56,2 +56,2 @@\n-    \/\/ G1MonitoringSupport* _g1mm;\n-    static private AddressField g1mmField;\n+    \/\/ G1MonitoringSupport* _monitoring_support;\n+    static private AddressField monitoringSupportField;\n@@ -78,1 +78,1 @@\n-        g1mmField = type.getAddressField(\"_g1mm\");\n+        monitoringSupportField = type.getAddressField(\"_monitoring_support\");\n@@ -102,3 +102,3 @@\n-    public G1MonitoringSupport g1mm() {\n-        Address g1mmAddr = g1mmField.getValue(addr);\n-        return (G1MonitoringSupport) VMObjectFactory.newObject(G1MonitoringSupport.class, g1mmAddr);\n+    public G1MonitoringSupport monitoringSupport() {\n+        Address monitoringSupportAddr = monitoringSupportField.getValue(addr);\n+        return (G1MonitoringSupport) VMObjectFactory.newObject(G1MonitoringSupport.class, monitoringSupportAddr);\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/gc\/g1\/G1CollectedHeap.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -247,3 +247,3 @@\n-      G1MonitoringSupport g1mm = g1h.g1mm();\n-      long edenSpaceRegionNum = g1mm.edenSpaceRegionNum();\n-      long survivorSpaceRegionNum = g1mm.survivorSpaceRegionNum();\n+      G1MonitoringSupport monitoringSupport = g1h.monitoringSupport();\n+      long edenSpaceRegionNum = monitoringSupport.edenSpaceRegionNum();\n+      long survivorSpaceRegionNum = monitoringSupport.survivorSpaceRegionNum();\n@@ -258,1 +258,1 @@\n-                   g1mm.edenSpaceUsed(), g1mm.edenSpaceCommitted());\n+                   monitoringSupport.edenSpaceUsed(), monitoringSupport.edenSpaceCommitted());\n@@ -260,1 +260,1 @@\n-                   g1mm.survivorSpaceUsed(), g1mm.survivorSpaceCommitted());\n+                   monitoringSupport.survivorSpaceUsed(), monitoringSupport.survivorSpaceCommitted());\n@@ -262,1 +262,1 @@\n-                   g1mm.oldGenUsed(), g1mm.oldGenCommitted());\n+                   monitoringSupport.oldGenUsed(), monitoringSupport.oldGenCommitted());\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/tools\/HeapSummary.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"}]}