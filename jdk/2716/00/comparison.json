{"files":[{"patch":"@@ -57,1 +57,1 @@\n-    final static String DEFAULT_ICON = \"java32.png\";\n+    final static String DEFAULT_ICON = \"JavaApp.png\";\n","filename":"src\/jdk.jpackage\/linux\/classes\/jdk\/jpackage\/internal\/LinuxAppImageBuilder.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"","filename":"src\/jdk.jpackage\/linux\/classes\/jdk\/jpackage\/internal\/resources\/JavaApp.png","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.jpackage\/linux\/classes\/jdk\/jpackage\/internal\/resources\/java32.png","status":"renamed"},{"patch":"@@ -34,0 +34,1 @@\n+import static jdk.jpackage.internal.MacAppImageBuilder.APP_STORE;\n@@ -44,1 +45,1 @@\n-    private static final String TEMPLATE_BUNDLE_ICON = \"java.icns\";\n+    private static final String TEMPLATE_BUNDLE_ICON = \"JavaApp.icns\";\n@@ -65,5 +66,14 @@\n-                    String result = MacBaseInstallerBundler.findKey(\n-                            \"Developer ID Application: \",\n-                            SIGNING_KEY_USER.fetchFrom(params),\n-                            SIGNING_KEYCHAIN.fetchFrom(params),\n-                            VERBOSE.fetchFrom(params));\n+                    String user = SIGNING_KEY_USER.fetchFrom(params);\n+                    String keychain = SIGNING_KEYCHAIN.fetchFrom(params);\n+                    String result = null;\n+                    if (APP_STORE.fetchFrom(params)) {\n+                        result = MacBaseInstallerBundler.findKey(\n+                            \"3rd Party Mac Developer Application: \",\n+                            user, keychain);\n+                    }\n+                    \/\/ if either not signing for app store or couldn't find\n+                    if (result == null) {\n+                        result = MacBaseInstallerBundler.findKey(\n+                            \"Developer ID Application: \", user, keychain);\n+                    }\n+\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/MacAppBundler.java","additions":16,"deletions":6,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -75,1 +75,1 @@\n-    private static final String TEMPLATE_BUNDLE_ICON = \"java.icns\";\n+    private static final String TEMPLATE_BUNDLE_ICON = \"JavaApp.icns\";\n@@ -105,0 +105,7 @@\n+    public static final BundlerParamInfo<String> APP_CATEGORY =\n+            new StandardBundlerParam<>(\n+                    Arguments.CLIOptions.MAC_CATEGORY.getId(),\n+                    String.class,\n+                    params -> \"utilities\",\n+                    (s, p) -> s);\n+\n@@ -147,0 +154,32 @@\n+    public static final StandardBundlerParam<Boolean> APP_STORE =\n+            new StandardBundlerParam<>(\n+            Arguments.CLIOptions.MAC_APP_STORE.getId(),\n+            Boolean.class,\n+            params -> false,\n+            \/\/ valueOf(null) is false, we actually do want null in some cases\n+            (s, p) -> (s == null || \"null\".equalsIgnoreCase(s)) ?\n+                    null : Boolean.valueOf(s)\n+        );\n+\n+    public static final BundlerParamInfo<Path> ENTITLEMENTS =\n+            new StandardBundlerParam<>(\n+            Arguments.CLIOptions.MAC_ENTITLEMENTS.getId(),\n+            Path.class,\n+            params -> {\n+                try {\n+                    Path path = CONFIG_ROOT.fetchFrom(params).resolve(\n+                        getLauncherName(params) + \".entitlements\");\n+                    String defPath = (APP_STORE.fetchFrom(params) ?\n+                        \"sandbox.plist\" : \"entitlements.plist\");\n+                    createResource(defPath, params)\n+                        .setCategory(I18N.getString(\"resource.entitlements\"))\n+                        .saveToFile(path);\n+                    return path;\n+                } catch (IOException ioe) {\n+                   Log.verbose(ioe);\n+                }\n+                return null;\n+            },\n+            (s, p) -> Path.of(s)\n+        );\n+\n@@ -337,1 +376,0 @@\n-                prepareEntitlements(params);\n@@ -340,1 +378,1 @@\n-                        getConfig_Entitlements(params));\n+                        ENTITLEMENTS.fetchFrom(params));\n@@ -346,12 +384,0 @@\n-    static Path getConfig_Entitlements(Map<String, ? super Object> params) {\n-        return CONFIG_ROOT.fetchFrom(params).resolve(\n-                getLauncherName(params) + \".entitlements\");\n-    }\n-\n-    static void prepareEntitlements(Map<String, ? super Object> params)\n-            throws IOException {\n-        createResource(\"entitlements.plist\", params)\n-                .setCategory(I18N.getString(\"resource.entitlements\"))\n-                .saveToFile(getConfig_Entitlements(params));\n-    }\n-\n@@ -392,2 +418,11 @@\n-        data.put(\"CF_BUNDLE_VERSION\", VERSION.fetchFrom(params));\n-        data.put(\"CF_BUNDLE_SHORT_VERSION_STRING\", VERSION.fetchFrom(params));\n+        String ver = VERSION.fetchFrom(params);\n+        String sver = ver;\n+        int index = ver.indexOf(\".\");\n+        if (index > 0 && ((index + 1) < ver.length())) {\n+            index = ver.indexOf(\".\", index + 1);\n+            if (index > 0 ) {\n+                sver = ver.substring(0, index);\n+            }\n+        }\n+        data.put(\"CF_BUNDLE_VERSION\", ver);\n+        data.put(\"CF_BUNDLE_SHORT_VERSION_STRING\", sver);\n@@ -444,0 +479,2 @@\n+        data.put(\"DEPLOY_APP_CATEGORY\", \"public.app-category.\" +\n+                APP_CATEGORY.fetchFrom(params));\n@@ -644,3 +681,2 @@\n-                      && !(p.toString().endsWith(appExecutable)\n-                      || p.toString().contains(\"\/Contents\/runtime\")\n-                      || p.toString().contains(\"\/Contents\/Frameworks\"))\n+                      && !(p.toString().contains(\"dylib.dSYM\/Contents\"))\n+                      && !(p.toString().endsWith(appExecutable))\n@@ -655,4 +691,0 @@\n-                } else if (isFileSigned(p)) {\n-                    \/\/ executable or lib already signed\n-                    Log.verbose(MessageFormat.format(I18N.getString(\n-                            \"message.already.signed\"), p.toString()));\n@@ -660,1 +692,23 @@\n-                    List<String> args = new ArrayList<>();\n+                    List<String> args;\n+                    \/\/ runtime and Framework files will be signed below\n+                    \/\/ but they need to be unsigned first here\n+                    if ((p.toString().contains(\"\/Contents\/runtime\")) ||\n+                        (p.toString().contains(\"\/Contents\/Frameworks\"))) {\n+\n+                        args = new ArrayList<>();\n+                        args.addAll(Arrays.asList(\"\/usr\/bin\/codesign\",\n+                                \"--remove-signature\", p.toString()));\n+                        try {\n+                            Set<PosixFilePermission> oldPermissions =\n+                                    Files.getPosixFilePermissions(p);\n+                            p.toFile().setWritable(true, true);\n+                            ProcessBuilder pb = new ProcessBuilder(args);\n+                            IOUtils.exec(pb);\n+                            Files.setPosixFilePermissions(p,oldPermissions);\n+                        } catch (IOException ioe) {\n+                            Log.verbose(ioe);\n+                            toThrow.set(ioe);\n+                            return;\n+                        }\n+                    }\n+                    args = new ArrayList<>();\n@@ -671,1 +725,0 @@\n-\n@@ -678,1 +731,0 @@\n-\n@@ -680,1 +732,0 @@\n-\n@@ -685,1 +736,0 @@\n-\n@@ -687,1 +737,0 @@\n-\n@@ -689,1 +738,0 @@\n-\n@@ -722,0 +770,4 @@\n+                if (entitlements != null) {\n+                    args.add(\"--entitlements\");\n+                    args.add(entitlements.toString());\n+                }\n@@ -759,0 +811,1 @@\n+                \"--prefix\", identifierPrefix,\n@@ -779,14 +832,0 @@\n-    private static boolean isFileSigned(Path file) {\n-        ProcessBuilder pb =\n-                new ProcessBuilder(\"\/usr\/bin\/codesign\",\n-                        \"--verify\", file.toString());\n-\n-        try {\n-            IOUtils.exec(pb);\n-        } catch (IOException ex) {\n-            return false;\n-        }\n-\n-        return true;\n-    }\n-\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/MacAppImageBuilder.java","additions":84,"deletions":45,"binary":false,"changes":129,"status":"modified"},{"patch":"@@ -155,8 +155,7 @@\n-    public static String findKey(String keyPrefix, String teamName, String keychainName,\n-            boolean verbose) {\n-        String key = (teamName.startsWith(keyPrefix)\n-                || teamName.startsWith(\"3rd Party Mac Developer\"))\n-                ? teamName : (keyPrefix + teamName);\n-        if (Platform.getPlatform() != Platform.MAC) {\n-            return null;\n-        }\n+    public static String findKey(String keyPrefix, String teamName, String keychainName) {\n+\n+        boolean useAsIs = teamName.startsWith(keyPrefix)\n+                || teamName.startsWith(\"Developer ID\")\n+                || teamName.startsWith(\"3rd Party Mac\");\n+\n+        String key = (useAsIs) ? teamName : (keyPrefix + teamName);\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/MacBaseInstallerBundler.java","additions":7,"deletions":8,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -61,1 +61,1 @@\n-    static final String TEMPLATE_BUNDLE_ICON = \"java.icns\";\n+    static final String TEMPLATE_BUNDLE_ICON = \"JavaApp.icns\";\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/MacDmgBundler.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -51,0 +51,1 @@\n+import static jdk.jpackage.internal.MacAppImageBuilder.APP_STORE;\n@@ -60,0 +61,1 @@\n+    private static final String DEFAULT_PDF = \"product-def.plist\";\n@@ -105,5 +107,14 @@\n-                    String result = MacBaseInstallerBundler.findKey(\n-                            \"Developer ID Installer: \",\n-                            SIGNING_KEY_USER.fetchFrom(params),\n-                            SIGNING_KEYCHAIN.fetchFrom(params),\n-                            VERBOSE.fetchFrom(params));\n+                    String user = SIGNING_KEY_USER.fetchFrom(params);\n+                    String keychain = SIGNING_KEYCHAIN.fetchFrom(params);\n+                    String result = null;\n+                    if (APP_STORE.fetchFrom(params)) {\n+                        result = MacBaseInstallerBundler.findKey(\n+                            \"3rd Party Mac Developer Installer: \",\n+                            user, keychain);\n+                    }\n+                    \/\/ if either not signing for app store or couldn't find\n+                    if (result == null) {\n+                        result = MacBaseInstallerBundler.findKey(\n+                            \"Developer ID Installer: \", user, keychain);\n+                    }\n+\n@@ -167,0 +178,4 @@\n+    private Path getConfig_PDF(Map<String, ? super Object> params) {\n+        return CONFIG_ROOT.fetchFrom(params).resolve(\"product-def.plist\");\n+    }\n+\n@@ -318,0 +333,4 @@\n+        createResource(DEFAULT_PDF, params)\n+                .setCategory(I18N.getString(\"resource.pkg-pdf\"))\n+                .saveToFile(getConfig_PDF(params));\n+\n@@ -433,2 +452,0 @@\n-            preparePackageScripts(params);\n-\n@@ -436,13 +453,29 @@\n-            pb = new ProcessBuilder(\"\/usr\/bin\/pkgbuild\",\n-                    \"--root\",\n-                    root,\n-                    \"--install-location\",\n-                    getInstallDir(params),\n-                    \"--component-plist\",\n-                    cpl.toAbsolutePath().toString(),\n-                    \"--scripts\",\n-                    SCRIPTS_DIR.fetchFrom(params).toAbsolutePath().toString(),\n-                    \"--identifier\",\n-                     MAC_CF_BUNDLE_IDENTIFIER.fetchFrom(params),\n-                    appPKG.toAbsolutePath().toString());\n-            IOUtils.exec(pb);\n+            if (APP_STORE.fetchFrom(params)) {\n+                pb = new ProcessBuilder(\"\/usr\/bin\/pkgbuild\",\n+                        \"--root\",\n+                        root,\n+                        \"--install-location\",\n+                        getInstallDir(params),\n+                        \"--component-plist\",\n+                        cpl.toAbsolutePath().toString(),\n+                        \"--identifier\",\n+                         MAC_CF_BUNDLE_IDENTIFIER.fetchFrom(params),\n+                        appPKG.toAbsolutePath().toString());\n+                IOUtils.exec(pb);\n+            } else {\n+                preparePackageScripts(params);\n+                pb = new ProcessBuilder(\"\/usr\/bin\/pkgbuild\",\n+                        \"--root\",\n+                        root,\n+                        \"--install-location\",\n+                        getInstallDir(params),\n+                        \"--component-plist\",\n+                        cpl.toAbsolutePath().toString(),\n+                        \"--scripts\",\n+                        SCRIPTS_DIR.fetchFrom(params)\n+                        .toAbsolutePath().toString(),\n+                        \"--identifier\",\n+                         MAC_CF_BUNDLE_IDENTIFIER.fetchFrom(params),\n+                        appPKG.toAbsolutePath().toString());\n+                IOUtils.exec(pb);\n+            }\n@@ -486,6 +519,16 @@\n-            commandLine.add(\"--distribution\");\n-            commandLine.add(\n-                    getConfig_DistributionXMLFile(params).toAbsolutePath().toString());\n-            commandLine.add(\"--package-path\");\n-            commandLine.add(PACKAGES_ROOT.fetchFrom(params).toAbsolutePath().toString());\n-\n+            if (APP_STORE.fetchFrom(params)) {\n+                commandLine.add(\"--product\");\n+                commandLine.add(getConfig_PDF(params)\n+                        .toAbsolutePath().toString());\n+                commandLine.add(\"--component\");\n+                Path p = Path.of(root, APP_NAME.fetchFrom(params) + \".app\");\n+                commandLine.add(p.toAbsolutePath().toString());\n+                commandLine.add(getInstallDir(params));\n+            } else {\n+                commandLine.add(\"--distribution\");\n+                commandLine.add(getConfig_DistributionXMLFile(params)\n+                        .toAbsolutePath().toString());\n+                commandLine.add(\"--package-path\");\n+                commandLine.add(PACKAGES_ROOT.fetchFrom(params)\n+                        .toAbsolutePath().toString());\n+            }\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/MacPkgBundler.java","additions":69,"deletions":26,"binary":false,"changes":95,"status":"modified"},{"patch":"@@ -6,1 +6,1 @@\n-  <string>10.9<\/string>\n+  <string>10.11<\/string>\n@@ -29,1 +29,1 @@\n-  <string>Unknown<\/string>\n+  <string>DEPLOY_APP_CATEGORY<\/string>\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/resources\/Info-lite.plist.template","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/resources\/JavaApp.icns","binary":true,"status":"added"},{"patch":"@@ -32,1 +32,1 @@\n-error.invalid-cfbundle-version.advice=Set a compatible 'appVersion' or set a 'mac.CFBundleVersion'. Valid versions are one to three integers separated by dots.\n+error.invalid-cfbundle-version.advice=Set a compatible 'app-version' value. Valid versions are one to three integers separated by dots.\n@@ -58,0 +58,1 @@\n+resource.pkg-pdf=project definition file\n@@ -63,2 +64,2 @@\n-message.version-string-too-many-components=Version sting may have between 1 and 3 numbers: 1, 1.2, 1.2.3.\n-message.version-string-first-number-not-zero=The first number in a CFBundleVersion cannot be zero or negative.\n+message.version-string-too-many-components='app-version' may have between 1 and 3 numbers: 1, 1.2, 1.2.3.\n+message.version-string-first-number-not-zero=The first number in an app-version cannot be zero or negative.\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/resources\/MacResources.properties","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n-error.invalid-cfbundle-version.advice=\\u4E92\\u63DB\\u6027\\u306E\\u3042\\u308B'appVersion'\\u3092\\u8A2D\\u5B9A\\u3059\\u308B\\u304B\\u3001'mac.CFBundleVersion'\\u3092\\u8A2D\\u5B9A\\u3057\\u307E\\u3059\\u3002\\u6709\\u52B9\\u306A\\u30D0\\u30FC\\u30B8\\u30E7\\u30F3\\u306F\\u3001\\u30C9\\u30C3\\u30C8\\u3067\\u533A\\u5207\\u3089\\u308C\\u305F1\\u304B\\u30893\\u3064\\u306E\\u6574\\u6570\\u3067\\u3059\\u3002\n+error.invalid-cfbundle-version.advice=Set a compatible 'app-version'. Valid versions are one to three integers separated by dots.\n@@ -64,1 +64,1 @@\n-message.version-string-first-number-not-zero=CFBundleVersion\\u306E\\u6700\\u521D\\u306E\\u6570\\u5B57\\u306F\\u3001\\u30BC\\u30ED\\u307E\\u305F\\u306F\\u8CA0\\u306E\\u5024\\u306B\\u3067\\u304D\\u307E\\u305B\\u3093\\u3002\n+message.version-string-first-number-not-zero='app-version' \\u306E\\u6700\\u521D\\u306E\\u6570\\u5B57\\u306F\\u3001\\u30BC\\u30ED\\u307E\\u305F\\u306F\\u8CA0\\u306E\\u5024\\u306B\\u3067\\u304D\\u307E\\u305B\\u3093\\u3002\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/resources\/MacResources_ja.properties","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -32,1 +32,1 @@\n-error.invalid-cfbundle-version.advice=\\u8BBE\\u7F6E\\u517C\\u5BB9\\u7684 'appVersion' \\u6216\\u8005\\u8BBE\\u7F6E 'mac.CFBundleVersion'\\u3002\\u6709\\u6548\\u7248\\u672C\\u5305\\u542B\\u4E00\\u5230\\u4E09\\u4E2A\\u7528\\u70B9\\u5206\\u9694\\u7684\\u6574\\u6570\\u3002\n+error.invalid-cfbundle-version.advice=Set a compatible 'app-version'. Valid versions are one to three integers separated by dots.\n@@ -64,1 +64,1 @@\n-message.version-string-first-number-not-zero=CFBundleVersion \\u4E2D\\u7684\\u7B2C\\u4E00\\u4E2A\\u6570\\u5B57\\u4E0D\\u80FD\\u4E3A\\u96F6\\u6216\\u8D1F\\u6570\\u3002\n+message.version-string-first-number-not-zero='app-version' \\u4E2D\\u7684\\u7B2C\\u4E00\\u4E2A\\u6570\\u5B57\\u4E0D\\u80FD\\u4E3A\\u96F6\\u6216\\u8D1F\\u6570\\u3002\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/resources\/MacResources_zh_CN.properties","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/resources\/java.icns","binary":true,"status":"deleted"},{"patch":"@@ -0,0 +1,11 @@\n+\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!DOCTYPE plist PUBLIC \"-\/\/Apple\/\/DTD PLIST 1.0\/\/EN\" \"http:\/\/www.apple.com\/DTDs\/PropertyList-1.0.dtd\">\n+<plist version=\"1.0\">\n+<dict>\n+    <key>os<\/key>\n+    <array>\n+        <string>10.11<\/string>\n+    <\/array>\n+<\/dict>\n+<\/plist>\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/resources\/product-def.plist","additions":11,"deletions":0,"binary":false,"changes":11,"status":"added"},{"patch":"@@ -0,0 +1,18 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!DOCTYPE plist PUBLIC \"-\/\/Apple\/\/DTD PLIST 1.0\/\/EN\" \"http:\/\/www.apple.com\/DTDs\/PropertyList-1.0.dtd\">\n+<plist version=\"1.0\">\n+<dict>\n+    <key>com.apple.security.app-sandbox<\/key>\n+    <true\/>\n+    <key>com.apple.security.cs.allow-jit<\/key>\n+    <true\/>\n+    <key>com.apple.security.cs.allow-unsigned-executable-memory<\/key>\n+    <true\/>\n+    <key>com.apple.security.cs.disable-library-validation<\/key>\n+    <true\/>\n+    <key>com.apple.security.cs.allow-dyld-environment-variables<\/key>\n+    <true\/>\n+    <key>com.apple.security.cs.debugger<\/key>\n+    <true\/>\n+<\/dict>\n+<\/plist>\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/resources\/sandbox.plist","additions":18,"deletions":0,"binary":false,"changes":18,"status":"added"},{"patch":"@@ -308,0 +308,6 @@\n+        MAC_APP_STORE (\"mac-app-store\", OptionCategories.PLATFORM_MAC, () -> {\n+            setOptionValue(\"mac-app-store\", true);\n+        }),\n+\n+        MAC_CATEGORY (\"mac-app-category\", OptionCategories.PLATFORM_MAC),\n+\n@@ -322,0 +328,2 @@\n+        MAC_ENTITLEMENTS (\"mac-entitlements\", OptionCategories.PLATFORM_MAC),\n+\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/Arguments.java","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -112,0 +112,3 @@\n+            options.put(CLIOptions.MAC_APP_STORE.getId(), USE.ALL);\n+            options.put(CLIOptions.MAC_CATEGORY.getId(), USE.ALL);\n+            options.put(CLIOptions.MAC_ENTITLEMENTS.getId(), USE.ALL);\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/ValidOptions.java","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -188,1 +188,1 @@\n-\\  --runtime-image <file-path>\\n\\\n+\\  --runtime-image <file path>\\n\\\n@@ -244,2 +244,10 @@\n-\\          Team name portion in Apple signing identities' names.\\n\\\n-\\          For example \"Developer ID Application: \"\\n\\\n+\\          Team or user name portion of Apple signing identities.\\n\\\n+\\  --mac-app-store\\n\\\n+\\          Indicates that the jpackage output is intended for the\\n\\\n+\\          Mac App Store.\\n\\\n+\\  --mac-entitlements <file path>\\n\\\n+\\          Path to file containing entitlements to use when signing\\n\\\n+\\          executables and libraries in the bundle.\\n\\\n+\\  --mac-app-category <category string>\\n\\\n+\\          String used to construct LSApplicationCategoryType in\\n\\\n+\\          application plist.  The default value is \"utilities\".\\n\\\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/resources\/HelpResources.properties","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -36,1 +36,13 @@\n-MSG_Help_mac_launcher=\\  --mac-package-identifier <ID string>\\n          MacOS\\u306E\\u30A2\\u30D7\\u30EA\\u30B1\\u30FC\\u30B7\\u30E7\\u30F3\\u3092\\u4E00\\u610F\\u306B\\u8B58\\u5225\\u3059\\u308BID\\n          \\u30E1\\u30A4\\u30F3\\u30FB\\u30AF\\u30E9\\u30B9\\u540D\\u306B\\u30C7\\u30D5\\u30A9\\u30EB\\u30C8\\u8A2D\\u5B9A\\u3055\\u308C\\u3066\\u3044\\u307E\\u3059\\u3002\\n          \\u82F1\\u6570\\u5B57(A-Z\\u3001a-z\\u30010-9)\\u3001\\u30CF\\u30A4\\u30D5\\u30F3(-)\\n          \\u304A\\u3088\\u3073\\u30D4\\u30EA\\u30AA\\u30C9(.)\\u6587\\u5B57\\u306E\\u307F\\u4F7F\\u7528\\u3067\\u304D\\u307E\\u3059\\u3002\\n  --mac-package-name <name string>\\n          \\u30E1\\u30CB\\u30E5\\u30FC\\u30FB\\u30D0\\u30FC\\u306B\\u8868\\u793A\\u3055\\u308C\\u308B\\u30A2\\u30D7\\u30EA\\u30B1\\u30FC\\u30B7\\u30E7\\u30F3\\u306E\\u540D\\u524D\\n          \\u30A2\\u30D7\\u30EA\\u30B1\\u30FC\\u30B7\\u30E7\\u30F3\\u540D\\u3068\\u306F\\u7570\\u306A\\u308A\\u307E\\u3059\\u3002\\n          \\u3053\\u306E\\u540D\\u524D\\u306F16\\u6587\\u5B57\\u672A\\u6E80\\u306B\\u3059\\u308B\\u5FC5\\u8981\\u304C\\u3042\\u308A\\u3001\\u30E1\\u30CB\\u30E5\\u30FC\\u30FB\\u30D0\\u30FC\\n          \\u304A\\u3088\\u3073\\u30A2\\u30D7\\u30EA\\u30B1\\u30FC\\u30B7\\u30E7\\u30F3\\u60C5\\u5831\\u30A6\\u30A3\\u30F3\\u30C9\\u30A6\\u306B\\u8868\\u793A\\u3059\\u308B\\u306E\\u306B\\u9069\\u3057\\u3066\\u3044\\u308B\\u5FC5\\u8981\\u304C\\u3042\\u308A\\u307E\\u3059\\u3002\\n          \\u30A2\\u30D7\\u30EA\\u30B1\\u30FC\\u30B7\\u30E7\\u30F3\\u540D\\u306B\\u30C7\\u30D5\\u30A9\\u30EB\\u30C8\\u8A2D\\u5B9A\\u3055\\u308C\\u3066\\u3044\\u307E\\u3059\\u3002\\n  --mac-package-signing-prefix <prefix string>\\n          \\u30A2\\u30D7\\u30EA\\u30B1\\u30FC\\u30B7\\u30E7\\u30F3\\u30FB\\u30D1\\u30C3\\u30B1\\u30FC\\u30B8\\u306B\\u7F72\\u540D\\u3059\\u308B\\u969B\\u3001\\u65E2\\u5B58\\u306E\\u30D1\\u30C3\\u30B1\\u30FC\\u30B8ID\\u306E\\u306A\\u3044\\n          \\u7F72\\u540D\\u304C\\u5FC5\\u8981\\u306A\\u3059\\u3079\\u3066\\u306E\\u30B3\\u30F3\\u30DD\\u30FC\\u30CD\\u30F3\\u30C8\\u306B\\u3001\\n          \\u3053\\u306E\\u5024\\u304C\\u63A5\\u982D\\u8F9E\\u3068\\u3057\\u3066\\u4ED8\\u3051\\u3089\\u308C\\u307E\\u3059\\u3002\\n  --mac-sign\\n          \\u30D1\\u30C3\\u30B1\\u30FC\\u30B8\\u306B\\u7F72\\u540D\\u3059\\u308B\\u3088\\u3046\\u30EA\\u30AF\\u30A8\\u30B9\\u30C8\\u3057\\u307E\\u3059\\n  --mac-signing-keychain <file path>\\n          \\u7F72\\u540D\\u30A2\\u30A4\\u30C7\\u30F3\\u30C6\\u30A3\\u30C6\\u30A3\\u3092\\u691C\\u7D22\\u3059\\u308B\\u30AD\\u30FC\\u30C1\\u30A7\\u30FC\\u30F3\\u306E\\u30D1\\u30B9\\n          (\\u7D76\\u5BFE\\u30D1\\u30B9\\u307E\\u305F\\u306F\\u73FE\\u5728\\u306E\\u30C7\\u30A3\\u30EC\\u30AF\\u30C8\\u30EA\\u304B\\u3089\\u306E\\u76F8\\u5BFE\\u30D1\\u30B9)\\u3002\\n          \\u6307\\u5B9A\\u3057\\u306A\\u304B\\u3063\\u305F\\u5834\\u5408\\u3001\\u6A19\\u6E96\\u306E\\u30AD\\u30FC\\u30C1\\u30A7\\u30FC\\u30F3\\u304C\\u4F7F\\u7528\\u3055\\u308C\\u307E\\u3059\\u3002\\n  --mac-signing-key-user-name <team name>\\n          Apple\\u7F72\\u540D\\u30A2\\u30A4\\u30C7\\u30F3\\u30C6\\u30A3\\u30C6\\u30A3\\u306E\\u540D\\u524D\\u306E\\u30C1\\u30FC\\u30E0\\u540D\\u90E8\\u5206\\u3002\\n          \\u4F8B: \"Developer ID Application: \"\\n\n+MSG_Help_mac_launcher=\\  --mac-package-identifier <ID string>\\n          MacOS\\u306E\\u30A2\\u30D7\\u30EA\\u30B1\\u30FC\\u30B7\\u30E7\\u30F3\\u3092\\u4E00\\u610F\\u306B\\u8B58\\u5225\\u3059\\u308BID\\n          \\u30E1\\u30A4\\u30F3\\u30FB\\u30AF\\u30E9\\u30B9\\u540D\\u306B\\u30C7\\u30D5\\u30A9\\u30EB\\u30C8\\u8A2D\\u5B9A\\u3055\\u308C\\u3066\\u3044\\u307E\\u3059\\u3002\\n          \\u82F1\\u6570\\u5B57(A-Z\\u3001a-z\\u30010-9)\\u3001\\u30CF\\u30A4\\u30D5\\u30F3(-)\\n          \\u304A\\u3088\\u3073\\u30D4\\u30EA\\u30AA\\u30C9(.)\\u6587\\u5B57\\u306E\\u307F\\u4F7F\\u7528\\u3067\\u304D\\u307E\\u3059\\u3002\\n  --mac-package-name <name string>\\n          \\u30E1\\u30CB\\u30E5\\u30FC\\u30FB\\u30D0\\u30FC\\u306B\\u8868\\u793A\\u3055\\u308C\\u308B\\u30A2\\u30D7\\u30EA\\u30B1\\u30FC\\u30B7\\u30E7\\u30F3\\u306E\\u540D\\u524D\\n          \\u30A2\\u30D7\\u30EA\\u30B1\\u30FC\\u30B7\\u30E7\\u30F3\\u540D\\u3068\\u306F\\u7570\\u306A\\u308A\\u307E\\u3059\\u3002\\n          \\u3053\\u306E\\u540D\\u524D\\u306F16\\u6587\\u5B57\\u672A\\u6E80\\u306B\\u3059\\u308B\\u5FC5\\u8981\\u304C\\u3042\\u308A\\u3001\\u30E1\\u30CB\\u30E5\\u30FC\\u30FB\\u30D0\\u30FC\\n          \\u304A\\u3088\\u3073\\u30A2\\u30D7\\u30EA\\u30B1\\u30FC\\u30B7\\u30E7\\u30F3\\u60C5\\u5831\\u30A6\\u30A3\\u30F3\\u30C9\\u30A6\\u306B\\u8868\\u793A\\u3059\\u308B\\u306E\\u306B\\u9069\\u3057\\u3066\\u3044\\u308B\\u5FC5\\u8981\\u304C\\u3042\\u308A\\u307E\\u3059\\u3002\\n          \\u30A2\\u30D7\\u30EA\\u30B1\\u30FC\\u30B7\\u30E7\\u30F3\\u540D\\u306B\\u30C7\\u30D5\\u30A9\\u30EB\\u30C8\\u8A2D\\u5B9A\\u3055\\u308C\\u3066\\u3044\\u307E\\u3059\\u3002\\n  --mac-package-signing-prefix <prefix string>\\n          \\u30A2\\u30D7\\u30EA\\u30B1\\u30FC\\u30B7\\u30E7\\u30F3\\u30FB\\u30D1\\u30C3\\u30B1\\u30FC\\u30B8\\u306B\\u7F72\\u540D\\u3059\\u308B\\u969B\\u3001\\u65E2\\u5B58\\u306E\\u30D1\\u30C3\\u30B1\\u30FC\\u30B8ID\\u306E\\u306A\\u3044\\n          \\u7F72\\u540D\\u304C\\u5FC5\\u8981\\u306A\\u3059\\u3079\\u3066\\u306E\\u30B3\\u30F3\\u30DD\\u30FC\\u30CD\\u30F3\\u30C8\\u306B\\u3001\\n          \\u3053\\u306E\\u5024\\u304C\\u63A5\\u982D\\u8F9E\\u3068\\u3057\\u3066\\u4ED8\\u3051\\u3089\\u308C\\u307E\\u3059\\u3002\\n  --mac-sign\\n          \\u30D1\\u30C3\\u30B1\\u30FC\\u30B8\\u306B\\u7F72\\u540D\\u3059\\u308B\\u3088\\u3046\\u30EA\\u30AF\\u30A8\\u30B9\\u30C8\\u3057\\u307E\\u3059\\n  --mac-signing-keychain <file path>\\n          \\u7F72\\u540D\\u30A2\\u30A4\\u30C7\\u30F3\\u30C6\\u30A3\\u30C6\\u30A3\\u3092\\u691C\\u7D22\\u3059\\u308B\\u30AD\\u30FC\\u30C1\\u30A7\\u30FC\\u30F3\\u306E\\u30D1\\u30B9\\n          (\\u7D76\\u5BFE\\u30D1\\u30B9\\u307E\\u305F\\u306F\\u73FE\\u5728\\u306E\\u30C7\\u30A3\\u30EC\\u30AF\\u30C8\\u30EA\\u304B\\u3089\\u306E\\u76F8\\u5BFE\\u30D1\\u30B9)\\u3002\\n          \\u6307\\u5B9A\\u3057\\u306A\\u304B\\u3063\\u305F\\u5834\\u5408\\u3001\\u6A19\\u6E96\\u306E\\u30AD\\u30FC\\u30C1\\u30A7\\u30FC\\u30F3\\u304C\\u4F7F\\u7528\\u3055\\u308C\\u307E\\u3059\\u3002\\n\n+\\  --mac-signing-key-user-name <team name>\\n\\\n+\\          Team or user name portion of Apple signing identities.\\n\\\n+\\  --mac-app-store\\n\\\n+\\          Indicates that the jpackage output is intended for the\\n\\\n+\\          Mac App Store.\\n\\\n+\\  --mac-entitlements <file path>\\n\\\n+\\          Path to file containing entitlements to use when signing\\n\\\n+\\          executables and libraries in the bundle.\\n\\\n+\\  --mac-app-category <category string>\\n\\\n+\\          String used to construct LSApplicationCategoryType in\\n\\\n+\\          application plist.  The default value is \"utilities\".\\n\\\n+\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/resources\/HelpResources_ja.properties","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -35,1 +35,13 @@\n-MSG_Help_mac_launcher=\\  --mac-package-identifier <ID string>\\n          \\u7528\\u6765\\u552F\\u4E00\\u5730\\u6807\\u8BC6 macOS \\u5E94\\u7528\\u7A0B\\u5E8F\\u7684\\u6807\\u8BC6\\u7B26\\n          \\u9ED8\\u8BA4\\u4E3A\\u4E3B\\u7C7B\\u540D\\u79F0\\u3002\\n          \\u53EA\\u80FD\\u4F7F\\u7528\\u5B57\\u6BCD\\u6570\\u5B57\\uFF08A-Z\\u3001a-z\\u30010-9\\uFF09\\u3001\\u8FDE\\u5B57\\u7B26 (-) \\u548C\\n          \\u53E5\\u70B9 (.) \\u5B57\\u7B26\\u3002\\n  --mac-package-name <name string>\\n          \\u51FA\\u73B0\\u5728\\u83DC\\u5355\\u680F\\u4E2D\\u7684\\u5E94\\u7528\\u7A0B\\u5E8F\\u540D\\u79F0\\n          \\u8FD9\\u53EF\\u4EE5\\u4E0E\\u5E94\\u7528\\u7A0B\\u5E8F\\u540D\\u79F0\\u4E0D\\u540C\\u3002\\n          \\u6B64\\u540D\\u79F0\\u7684\\u957F\\u5EA6\\u5FC5\\u987B\\u5C0F\\u4E8E 16 \\u4E2A\\u5B57\\u7B26\\uFF0C\\u9002\\u5408\\n          \\u663E\\u793A\\u5728\\u83DC\\u5355\\u680F\\u4E2D\\u548C\\u5E94\\u7528\\u7A0B\\u5E8F\\u201C\\u4FE1\\u606F\\u201D\\u7A97\\u53E3\\u4E2D\\u3002\\n          \\u9ED8\\u8BA4\\u4E3A\\u5E94\\u7528\\u7A0B\\u5E8F\\u540D\\u79F0\\u3002\\n  --mac-package-signing-prefix <prefix string>\\n          \\u5728\\u5BF9\\u5E94\\u7528\\u7A0B\\u5E8F\\u5305\\u7B7E\\u540D\\u65F6\\uFF0C\\u4F1A\\u5728\\u6240\\u6709\\u9700\\u8981\\u7B7E\\u540D\\n          \\u4F46\\u5F53\\u524D\\u6CA1\\u6709\\u7A0B\\u5E8F\\u5305\\u6807\\u8BC6\\u7B26\\u7684\\u7EC4\\u4EF6\\u7684\\n          \\u524D\\u9762\\u52A0\\u4E0A\\u6B64\\u503C\\u3002\\n  --mac-sign\\n          \\u8BF7\\u6C42\\u5BF9\\u7A0B\\u5E8F\\u5305\\u8FDB\\u884C\\u7B7E\\u540D\\n  --mac-signing-keychain <file path>\\n          \\u8981\\u7528\\u6765\\u641C\\u7D22\\u7B7E\\u540D\\u8EAB\\u4EFD\\u7684\\u5BC6\\u94A5\\u94FE\\u7684\\u8DEF\\u5F84\\n          \\uFF08\\u7EDD\\u5BF9\\u8DEF\\u5F84\\u6216\\u76F8\\u5BF9\\u4E8E\\u5F53\\u524D\\u76EE\\u5F55\\u7684\\u8DEF\\u5F84\\uFF09\\u3002\\n          \\u5982\\u679C\\u672A\\u6307\\u5B9A\\uFF0C\\u5219\\u4F7F\\u7528\\u6807\\u51C6\\u7684\\u5BC6\\u94A5\\u94FE\\u3002\\n  --mac-signing-key-user-name <team name>\\n          Apple \\u7B7E\\u540D\\u8EAB\\u4EFD\\u540D\\u79F0\\u4E2D\\u7684\\u56E2\\u961F\\u540D\\u79F0\\u9009\\u9879\\u3002\\n          \\u4F8B\\u5982\\uFF0C\"Developer ID Application: \"\\n\n+MSG_Help_mac_launcher=\\  --mac-package-identifier <ID string>\\n          \\u7528\\u6765\\u552F\\u4E00\\u5730\\u6807\\u8BC6 macOS \\u5E94\\u7528\\u7A0B\\u5E8F\\u7684\\u6807\\u8BC6\\u7B26\\n          \\u9ED8\\u8BA4\\u4E3A\\u4E3B\\u7C7B\\u540D\\u79F0\\u3002\\n          \\u53EA\\u80FD\\u4F7F\\u7528\\u5B57\\u6BCD\\u6570\\u5B57\\uFF08A-Z\\u3001a-z\\u30010-9\\uFF09\\u3001\\u8FDE\\u5B57\\u7B26 (-) \\u548C\\n          \\u53E5\\u70B9 (.) \\u5B57\\u7B26\\u3002\\n  --mac-package-name <name string>\\n          \\u51FA\\u73B0\\u5728\\u83DC\\u5355\\u680F\\u4E2D\\u7684\\u5E94\\u7528\\u7A0B\\u5E8F\\u540D\\u79F0\\n          \\u8FD9\\u53EF\\u4EE5\\u4E0E\\u5E94\\u7528\\u7A0B\\u5E8F\\u540D\\u79F0\\u4E0D\\u540C\\u3002\\n          \\u6B64\\u540D\\u79F0\\u7684\\u957F\\u5EA6\\u5FC5\\u987B\\u5C0F\\u4E8E 16 \\u4E2A\\u5B57\\u7B26\\uFF0C\\u9002\\u5408\\n          \\u663E\\u793A\\u5728\\u83DC\\u5355\\u680F\\u4E2D\\u548C\\u5E94\\u7528\\u7A0B\\u5E8F\\u201C\\u4FE1\\u606F\\u201D\\u7A97\\u53E3\\u4E2D\\u3002\\n          \\u9ED8\\u8BA4\\u4E3A\\u5E94\\u7528\\u7A0B\\u5E8F\\u540D\\u79F0\\u3002\\n  --mac-package-signing-prefix <prefix string>\\n          \\u5728\\u5BF9\\u5E94\\u7528\\u7A0B\\u5E8F\\u5305\\u7B7E\\u540D\\u65F6\\uFF0C\\u4F1A\\u5728\\u6240\\u6709\\u9700\\u8981\\u7B7E\\u540D\\n          \\u4F46\\u5F53\\u524D\\u6CA1\\u6709\\u7A0B\\u5E8F\\u5305\\u6807\\u8BC6\\u7B26\\u7684\\u7EC4\\u4EF6\\u7684\\n          \\u524D\\u9762\\u52A0\\u4E0A\\u6B64\\u503C\\u3002\\n  --mac-sign\\n          \\u8BF7\\u6C42\\u5BF9\\u7A0B\\u5E8F\\u5305\\u8FDB\\u884C\\u7B7E\\u540D\\n  --mac-signing-keychain <file path>\\n          \\u8981\\u7528\\u6765\\u641C\\u7D22\\u7B7E\\u540D\\u8EAB\\u4EFD\\u7684\\u5BC6\\u94A5\\u94FE\\u7684\\u8DEF\\u5F84\\n          \\uFF08\\u7EDD\\u5BF9\\u8DEF\\u5F84\\u6216\\u76F8\\u5BF9\\u4E8E\\u5F53\\u524D\\u76EE\\u5F55\\u7684\\u8DEF\\u5F84\\uFF09\\u3002\\n          \\u5982\\u679C\\u672A\\u6307\\u5B9A\\uFF0C\\u5219\\u4F7F\\u7528\\u6807\\u51C6\\u7684\\u5BC6\\u94A5\\u94FE\\u3002\\n\\\n+\\  --mac-signing-key-user-name <team name>\\n\\\n+\\          Team or user name portion of Apple signing identities.\\n\\\n+\\  --mac-app-store\\n\\\n+\\          Indicates that the jpackage output is intended for the\\n\\\n+\\          Mac App Store.\\n\\\n+\\  --mac-entitlements <file path>\\n\\\n+\\          Path to file containing entitlements to use when signing\\n\\\n+\\          executables and libraries in the bundle.\\n\\\n+\\  --mac-app-category <category string>\\n\\\n+\\          String used to construct LSApplicationCategoryType in\\n\\\n+\\          application plist.  The default value is \"utilities\".\\n\\\n+\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/resources\/HelpResources_zh_CN.properties","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -45,1 +45,1 @@\n-    private static final String TEMPLATE_APP_ICON =\"java48.ico\";\n+    private static final String TEMPLATE_APP_ICON =\"JavaApp.ico\";\n","filename":"src\/jdk.jpackage\/windows\/classes\/jdk\/jpackage\/internal\/WindowsAppImageBuilder.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"","filename":"src\/jdk.jpackage\/windows\/classes\/jdk\/jpackage\/internal\/resources\/JavaApp.ico","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.jpackage\/windows\/classes\/jdk\/jpackage\/internal\/resources\/java48.ico","status":"renamed"},{"patch":"@@ -78,1 +78,1 @@\n-            components = new String[] { \"macosx\", \"java.icns\" };\n+            components = new String[] { \"macosx\", \"JavaApp.icns\" };\n@@ -80,1 +80,1 @@\n-            components = new String[] { \"linux\", \"java32.png\" };\n+            components = new String[] { \"linux\", \"JavaApp.png\" };\n@@ -82,1 +82,1 @@\n-            components = new String[] { \"windows\", \"java48.ico\" };\n+            components = new String[] { \"windows\", \"JavaApp.ico\" };\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/LauncherIconVerifier.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}