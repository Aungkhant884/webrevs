{"files":[{"patch":"@@ -88,2 +88,1 @@\n-\n-        env.put(Context.PROVIDER_URL, \"ldap:\/\/10.0.0.0\");\n+        env.put(Context.PROVIDER_URL, \"ldap:\/\/example.com:1234\");\n@@ -117,10 +116,20 @@\n-        Assert.ThrowingRunnable completion =\n-                () -> LdapTimeoutTest.assertCompletion(CONNECT_MILLIS - 1000,\n-                                       2 * CONNECT_MILLIS + TOLERANCE,\n-                                       () -> new InitialDirContext(env));\n-        NamingException e = expectThrows(NamingException.class, completion);\n-        String msg = e.getCause() == null ? e.getMessage() : e.getCause().getMessage();\n-        assertTrue(msg != null &&\n-                (msg.contains(\"Timed out\")\n-                    || msg.contains(\"timed out\")\n-                    || msg.contains(\"Timeout\")));\n+        try {\n+            LdapTimeoutTest.assertCompletion(CONNECT_MILLIS - 1000,\n+                   2 * CONNECT_MILLIS + TOLERANCE,\n+                   () -> new InitialDirContext(env));\n+        } catch (RuntimeException e) {\n+            String msg = e.getCause() == null ? e.getMessage() : e.getCause().getMessage();\n+            System.err.println(\"MSG RTE: \" + msg);\n+            \/\/ assertCompletion may wrap a CommunicationException in an RTE\n+            assertTrue(msg != null && msg.contains(\"Network is unreachable\"));\n+        } catch (NamingException ex) {\n+            String msg = ex.getCause() == null ? ex.getMessage() : ex.getCause().getMessage();\n+            System.err.println(\"MSG: \" + msg);\n+            assertTrue(msg != null &&\n+                    (msg.contains(\"Network is unreachable\")\n+                        || msg.contains(\"Timed out waiting for lock\")\n+                        || msg.contains(\"Connect timed out\")\n+                        || msg.contains(\"Timeout exceeded while waiting for a connection\")));\n+        } catch (Throwable t) {\n+            throw new RuntimeException(t);\n+        }\n","filename":"test\/jdk\/com\/sun\/jndi\/ldap\/LdapPoolTimeoutTest.java","additions":21,"deletions":12,"binary":false,"changes":33,"status":"modified"}]}