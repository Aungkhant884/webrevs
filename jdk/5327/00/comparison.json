{"files":[{"patch":"@@ -290,6 +290,8 @@\n-        char linkbuf[PATH_MAX+1];\n-        int len;\n-\n-        if ((len = readlink(DEFAULT_ZONEINFO_FILE, linkbuf, sizeof(linkbuf)-1)) == -1) {\n-            jio_fprintf(stderr, (const char *) \"can't get a symlink of %s\\n\",\n-                        DEFAULT_ZONEINFO_FILE);\n+        \/* canonicalize the path *\/\n+        char resolvedpath[PATH_MAX + 1];\n+        char *path = realpath(DEFAULT_ZONEINFO_FILE, resolvedpath);\n+        if (path == NULL) {\n+            if (errno != ENOTDIR) {\n+                jio_fprintf(stderr, (const char *) \"can't to get a symlink of %s\\n\",\n+                              DEFAULT_ZONEINFO_FILE);\n+            }\n@@ -298,2 +300,1 @@\n-        linkbuf[len] = '\\0';\n-        tz = getZoneName(linkbuf);\n+        tz = getZoneName(resolvedpath);\n","filename":"src\/java.base\/unix\/native\/libjava\/TimeZone_md.c","additions":9,"deletions":8,"binary":false,"changes":17,"status":"modified"}]}