{"files":[{"patch":"@@ -248,11 +248,4 @@\n-    if (dst == rscratch1) {\n-      __ push(rscratch1, sp);\n-    }\n-    __ mov(rscratch1, ShenandoahHeap::HAS_FORWARDED | ShenandoahHeap::WEAK_ROOTS);\n-    __ tst(rscratch1, rscratch2);\n-\n-    if (dst == rscratch1) {\n-      __ pop(rscratch1, sp);\n-    }\n-\n-    __ br(Assembler::EQ, heap_stable);\n+    Label lrb;\n+    __ tbnz(rscratch2, ShenandoahHeap::WEAK_ROOTS_BITPOS, lrb);\n+    __ tbz(rscratch2, ShenandoahHeap::HAS_FORWARDED_BITPOS, heap_stable);\n+    __ bind(lrb);\n","filename":"src\/hotspot\/cpu\/aarch64\/gc\/shenandoah\/shenandoahBarrierSetAssembler_aarch64.cpp","additions":4,"deletions":11,"binary":false,"changes":15,"status":"modified"}]}