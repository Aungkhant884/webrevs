{"files":[{"patch":"@@ -424,1 +424,1 @@\n-  double predicted_base_time_ms = _policy->predict_base_elapsed_time_ms(pending_cards);\n+  double predicted_base_time_ms = _policy->predict_base_time_ms(pending_cards);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectionSet.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -260,1 +260,1 @@\n-    double survivor_base_time_ms = predict_base_elapsed_time_ms(pending_cards, rs_length);\n+    double base_time_ms = predict_base_time_ms(pending_cards, rs_length);\n@@ -263,1 +263,1 @@\n-      calculate_desired_eden_length_by_pause(survivor_base_time_ms,\n+      calculate_desired_eden_length_by_pause(base_time_ms,\n@@ -479,1 +479,1 @@\n-uint G1Policy::calculate_desired_eden_length_before_mixed(double survivor_base_time_ms,\n+uint G1Policy::calculate_desired_eden_length_before_mixed(double base_time_ms,\n@@ -486,1 +486,1 @@\n-  double predicted_region_evac_time_ms = survivor_base_time_ms;\n+  double predicted_region_evac_time_ms = base_time_ms;\n@@ -489,1 +489,1 @@\n-    predicted_region_evac_time_ms += predict_region_total_time_ms(r, false);\n+    predicted_region_evac_time_ms += predict_region_total_time_ms(r, false \/* for_young_gc *\/);\n@@ -1011,2 +1011,2 @@\n-double G1Policy::predict_base_elapsed_time_ms(size_t pending_cards,\n-                                              size_t rs_length) const {\n+double G1Policy::predict_base_time_ms(size_t pending_cards,\n+                                      size_t rs_length) const {\n@@ -1014,5 +1014,11 @@\n-  return\n-    _analytics->predict_card_merge_time_ms(pending_cards + rs_length, collector_state()->in_young_only_phase()) +\n-    _analytics->predict_card_scan_time_ms(effective_scanned_cards, collector_state()->in_young_only_phase()) +\n-    _analytics->predict_constant_other_time_ms() +\n-    predict_survivor_regions_evac_time();\n+\n+  double card_merge_time = _analytics->predict_card_merge_time_ms(pending_cards + rs_length, collector_state()->in_young_only_phase());\n+  double card_scan_time = _analytics->predict_card_scan_time_ms(effective_scanned_cards, collector_state()->in_young_only_phase());\n+  double constant_other_time = _analytics->predict_constant_other_time_ms();\n+  double survivor_evac_time = predict_survivor_regions_evac_time();\n+\n+  double total_time = card_merge_time + card_scan_time + constant_other_time + survivor_evac_time;\n+\n+  log_trace(gc, ergo, heap)(\"Predicted base time: total %f lb_cards %zu rs_length %zu effective_scanned_cards %zu card_merge_time %f card_scan_time %f constant_other_time %f survivor_evac_time %f\",\n+                            total_time, pending_cards, rs_length, effective_scanned_cards, card_merge_time, card_scan_time, constant_other_time, survivor_evac_time);\n+  return total_time;\n@@ -1021,1 +1027,1 @@\n-double G1Policy::predict_base_elapsed_time_ms(size_t pending_cards) const {\n+double G1Policy::predict_base_time_ms(size_t pending_cards) const {\n@@ -1023,1 +1029,1 @@\n-  return predict_base_elapsed_time_ms(pending_cards, rs_length);\n+  return predict_base_time_ms(pending_cards, rs_length);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1Policy.cpp","additions":20,"deletions":14,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -140,1 +140,1 @@\n-  double predict_base_elapsed_time_ms(size_t num_pending_cards) const;\n+  double predict_base_time_ms(size_t pending_cards) const;\n@@ -143,1 +143,1 @@\n-  double predict_base_elapsed_time_ms(size_t num_pending_cards, size_t rs_length) const;\n+  double predict_base_time_ms(size_t pending_cards, size_t rs_length) const;\n@@ -222,1 +222,1 @@\n-  uint calculate_desired_eden_length_before_mixed(double survivor_base_time_ms,\n+  uint calculate_desired_eden_length_before_mixed(double base_time_ms,\n","filename":"src\/hotspot\/share\/gc\/g1\/g1Policy.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}