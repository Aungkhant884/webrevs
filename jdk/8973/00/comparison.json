{"files":[{"patch":"@@ -30,1 +30,0 @@\n-import java.util.ListIterator;\n@@ -84,1 +83,1 @@\n-        if (!releases.isEmpty()) {\n+        if (releases.size() > 1) {\n@@ -88,1 +87,0 @@\n-                int releaseIndex = i + 1;\n@@ -90,0 +88,4 @@\n+                String releaseIndex = release.isEmpty() ? \"\" : Integer.toString(i + 1);\n+                Content releaseLabel = release.isEmpty()\n+                        ? contents.getContent(\"doclet.Deprecated_API_Checkbox_Other_Releases\")\n+                        : Text.of(release);\n@@ -96,1 +98,1 @@\n-                        .add(HtmlTree.SPAN(Text.of(release))));\n+                        .add(HtmlTree.SPAN(releaseLabel)));\n@@ -125,0 +127,3 @@\n+            table.setGridStyle(HtmlStyle.threeColumnReleaseSummary);\n+        }\n+        if (releases.size() > 1) {\n@@ -127,2 +132,1 @@\n-                    .setRenderTabs(false)\n-                    .setGridStyle(HtmlStyle.threeColumnReleaseSummary);\n+                    .setRenderTabs(false);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/DeprecatedListWriter.java","additions":10,"deletions":6,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -82,1 +82,1 @@\n-        if (!releases.isEmpty()) {\n+        if (releases.size() > 1) {\n@@ -101,0 +101,1 @@\n+        table.setGridStyle(HtmlStyle.threeColumnReleaseSummary);\n@@ -102,1 +103,1 @@\n-        if (!releases.isEmpty()) {\n+        if (releases.size() > 1) {\n@@ -105,2 +106,1 @@\n-                    .setRenderTabs(false)\n-                    .setGridStyle(HtmlStyle.threeColumnReleaseSummary);\n+                    .setRenderTabs(false);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/NewAPIListWriter.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -37,0 +37,1 @@\n+import jdk.javadoc.internal.doclets.formats.html.markup.Script;\n@@ -134,0 +135,9 @@\n+        bodyContents.addMainContent(new Script(\"\"\"\n+                document.addEventListener(\"DOMContentLoaded\", function(e) {\n+                    document.querySelectorAll('input[type=\"checkbox\"]').forEach(\n+                        function(c, i) {\n+                            c.disabled = false;\n+                            c.onclick();\n+                        });\n+                    });\n+                \"\"\").asContent());\n@@ -143,1 +153,1 @@\n-     * @param headingKey\n+     * @param headingKey the key for the heading content\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/SummaryListWriter.java","additions":11,"deletions":1,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -113,0 +113,1 @@\n+doclet.Deprecated_API_Checkbox_Other_Releases=other\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/standard.properties","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -94,1 +94,1 @@\n-            return -1;\n+            return descending ? 1 : -1;\n@@ -96,1 +96,1 @@\n-            return 1;\n+            return descending ? -1 : 1;\n@@ -100,3 +100,0 @@\n-    if (descending) {\n-        sorted = sorted.reverse();\n-    }\n@@ -105,1 +102,1 @@\n-        if (row[0].style.display === '') {\n+        if (row[0].style.display !== 'none') {\n@@ -121,1 +118,3 @@\n-        selectedClass = id + \"-tab\" + selected;\n+        var selectedClass = id + \"-tab\" + selected;\n+        \/\/ if selected is empty string it selects all uncategorized entries\n+        var selectUncategorized = !Boolean(selected);\n@@ -125,1 +124,5 @@\n-                if (elem.classList.contains(selectedClass)) {\n+                if (selectUncategorized) {\n+                    if (elem.className.indexOf(selectedClass) === -1) {\n+                        elem.style.display = display;\n+                    }\n+                } else if (elem.classList.contains(selectedClass)) {\n@@ -263,5 +266,0 @@\n-    document.querySelectorAll('input[type=\"checkbox\"]').forEach(\n-        function(c, i) {\n-            c.disabled = false;\n-            toggleGlobal(c, String(i + 1), 3)\n-        });\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/script.js","additions":12,"deletions":14,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -41,0 +41,1 @@\n+    private final Set<String> foundReleases;\n@@ -46,1 +47,1 @@\n-     * @param releases list of releases\n+     * @param since list of releases passed via <code>--since<\/code> option\n@@ -48,1 +49,1 @@\n-    public DeprecatedAPIListBuilder(BaseConfiguration configuration, List<String> releases) {\n+    public DeprecatedAPIListBuilder(BaseConfiguration configuration, List<String> since) {\n@@ -50,1 +51,1 @@\n-        this.releases = releases;\n+        this.foundReleases = new HashSet<>();\n@@ -52,0 +53,14 @@\n+        \/\/ The releases list is set to the intersection of releases defined via `--since` option\n+        \/\/ and actually occurring values of `Deprecated.since` in documented deprecated elements.\n+        \/\/ If there are `Deprecated.since` values not contained in the `--since` option list\n+        \/\/ an empty string is added to the releases list which causes the writer to generate\n+        \/\/ a checkbox for other (unlisted) releases.\n+        List<String> releases = new ArrayList<>(since);\n+        if (!releases.isEmpty()) {\n+            releases.retainAll(foundReleases);\n+            if (!releases.containsAll(foundReleases)) {\n+                \/\/ Empty string is added for other releases, including the default value \"\"\n+                releases.add(\"\");\n+            }\n+        }\n+        this.releases = Collections.unmodifiableList(releases);\n@@ -63,0 +78,1 @@\n+        foundReleases.add(utils.getDeprecatedSince(e));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/DeprecatedAPIListBuilder.java","additions":19,"deletions":3,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug      8263468 8269401 8268422\n+ * @bug      8263468 8269401 8268422 8287524\n@@ -479,1 +479,1 @@\n-                <div class=\"col-summary-item-name even-row-color for-removal for-removal-tab6\"><a hr\\\n+                <div class=\"col-summary-item-name even-row-color for-removal for-removal-tab1\"><a hr\\\n@@ -481,2 +481,2 @@\n-                <div class=\"col-second even-row-color for-removal for-removal-tab6\">5<\/div>\n-                <div class=\"col-last even-row-color for-removal for-removal-tab6\"><\/div>\n+                <div class=\"col-second even-row-color for-removal for-removal-tab1\">3.2<\/div>\n+                <div class=\"col-last even-row-color for-removal for-removal-tab1\"><\/div>\n@@ -494,1 +494,1 @@\n-                <div class=\"col-summary-item-name even-row-color method method-tab6\"><a href=\"mdl\/pk\\\n+                <div class=\"col-summary-item-name even-row-color method method-tab1\"><a href=\"mdl\/pk\\\n@@ -496,2 +496,2 @@\n-                <div class=\"col-second even-row-color method method-tab6\">5<\/div>\n-                <div class=\"col-last even-row-color method method-tab6\"><\/div>\n+                <div class=\"col-second even-row-color method method-tab1\">3.2<\/div>\n+                <div class=\"col-last even-row-color method method-tab1\"><\/div>\n@@ -509,4 +509,4 @@\n-                <div class=\"col-summary-item-name even-row-color constructor constructor-tab6\"><a hr\\\n-                ef=\"mdl\/pkg\/TestClass.html#%3Cinit%3E()\">pkg.TestClass()<\/a><\/div>\n-                <div class=\"col-second even-row-color constructor constructor-tab6\">5<\/div>\n-                <div class=\"col-last even-row-color constructor constructor-tab6\"><\/div>\n+                <div class=\"col-summary-item-name even-row-color constructor\"><a href=\"mdl\/pkg\/TestC\\\n+                lass.html#%3Cinit%3E()\">pkg.TestClass()<\/a><\/div>\n+                <div class=\"col-second even-row-color constructor\">6<\/div>\n+                <div class=\"col-last even-row-color constructor\"><\/div>\n@@ -524,1 +524,1 @@\n-                <div class=\"col-summary-item-name even-row-color enum-constant enum-constant-tab6\"><\\\n+                <div class=\"col-summary-item-name even-row-color enum-constant enum-constant-tab2\"><\\\n@@ -526,2 +526,2 @@\n-                <div class=\"col-second even-row-color enum-constant enum-constant-tab6\">5<\/div>\n-                <div class=\"col-last even-row-color enum-constant enum-constant-tab6\"><\/div>\n+                <div class=\"col-second even-row-color enum-constant enum-constant-tab2\">5<\/div>\n+                <div class=\"col-last even-row-color enum-constant enum-constant-tab2\"><\/div>\n@@ -540,3 +540,3 @@\n-                ion-interface-member-tab6\"><a href=\"mdl\/pkg\/TestAnnotation.html#required()\">pkg.TestAnnotation.required()<\/a><\/div>\n-                <div class=\"col-second even-row-color annotation-interface-member annotation-interface-member-tab6\">5<\/div>\n-                <div class=\"col-last even-row-color annotation-interface-member annotation-interface-member-tab6\"><\/div>\n+                ion-interface-member-tab1\"><a href=\"mdl\/pkg\/TestAnnotation.html#required()\">pkg.TestAnnotation.required()<\/a><\/div>\n+                <div class=\"col-second even-row-color annotation-interface-member annotation-interface-member-tab1\">3.2<\/div>\n+                <div class=\"col-last even-row-color annotation-interface-member annotation-interface-member-tab1\"><\/div>\n@@ -556,1 +556,1 @@\n-                <div class=\"checkboxes\">Show API added in:<label for=\"release-1\">\"\"\");\n+                <ul class=\"block-list\">\"\"\");\n@@ -562,1 +562,0 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n@@ -564,3 +563,1 @@\n-                <\/div>\n-                <div id=\"method.tabpanel\" role=\"tabpanel\">\n-                <div class=\"summary-table three-column-release-summary\" aria-labelledby=\"method-tab0\">\n+                <div class=\"summary-table three-column-release-summary\">\n@@ -570,5 +567,4 @@\n-                <div class=\"col-summary-item-name even-row-color method method-tab1\"><a href=\"mdl\/pk\\\n-                g\/TestClass.html#overloadedMethod(java.lang.String)\">pkg.TestClass.overloadedMethod<\\\n-                wbr>(String)<\/a><\/div>\n-                <div class=\"col-second even-row-color method method-tab1\">5<\/div>\n-                <div class=\"col-last even-row-color method method-tab1\">\n+                <div class=\"col-summary-item-name even-row-color\"><a href=\"mdl\/pkg\/TestClass.html#ov\\\n+                erloadedMethod(java.lang.String)\">pkg.TestClass.overloadedMethod<wbr>(String)<\/a><\/div>\n+                <div class=\"col-second even-row-color\">5<\/div>\n+                <div class=\"col-last even-row-color\">\n@@ -577,4 +573,4 @@\n-                <div class=\"col-summary-item-name odd-row-color method method-tab1\"><a href=\"mdl\/pkg\\\n-                \/TestRecord.html#x()\">pkg.TestRecord.x()<\/a><\/div>\n-                <div class=\"col-second odd-row-color method method-tab1\">5<\/div>\n-                <div class=\"col-last odd-row-color method method-tab1\">\n+                <div class=\"col-summary-item-name odd-row-color\"><a href=\"mdl\/pkg\/TestRecord.html#x(\\\n+                )\">pkg.TestRecord.x()<\/a><\/div>\n+                <div class=\"col-second odd-row-color\">5<\/div>\n+                <div class=\"col-last odd-row-color\">\n@@ -585,1 +581,0 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n@@ -587,3 +582,1 @@\n-                <\/div>\n-                <div id=\"constructor.tabpanel\" role=\"tabpanel\">\n-                <div class=\"summary-table three-column-release-summary\" aria-labelledby=\"constructor-tab0\">\n+                <div class=\"summary-table three-column-release-summary\">\n@@ -593,4 +586,4 @@\n-                <div class=\"col-summary-item-name even-row-color constructor constructor-tab1\"><a hr\\\n-                ef=\"mdl\/pkg\/TestError.html#%3Cinit%3E()\">pkg.TestError()<\/a><\/div>\n-                <div class=\"col-second even-row-color constructor constructor-tab1\">5<\/div>\n-                <div class=\"col-last even-row-color constructor constructor-tab1\">\n+                <div class=\"col-summary-item-name even-row-color\"><a href=\"mdl\/pkg\/TestError.html#%3\\\n+                Cinit%3E()\">pkg.TestError()<\/a><\/div>\n+                <div class=\"col-second even-row-color\">5<\/div>\n+                <div class=\"col-last even-row-color\">\n@@ -599,4 +592,4 @@\n-                <div class=\"col-summary-item-name odd-row-color constructor constructor-tab1\"><a hre\\\n-                f=\"mdl\/pkg\/TestException.html#%3Cinit%3E()\">pkg.TestException()<\/a><\/div>\n-                <div class=\"col-second odd-row-color constructor constructor-tab1\">5<\/div>\n-                <div class=\"col-last odd-row-color constructor constructor-tab1\">\n+                <div class=\"col-summary-item-name odd-row-color\"><a href=\"mdl\/pkg\/TestException.html\\\n+                #%3Cinit%3E()\">pkg.TestException()<\/a><\/div>\n+                <div class=\"col-second odd-row-color\">5<\/div>\n+                <div class=\"col-last odd-row-color\">\n@@ -631,4 +624,4 @@\n-                <div class=\"col-summary-item-name even-row-color for-removal for-removal-tab1\"><a hr\\\n-                ef=\"mdl\/pkg\/TestAnnotation.html#required()\">pkg.TestAnnotation.required()<\/a><\/div>\n-                <div class=\"col-second even-row-color for-removal for-removal-tab1\">5<\/div>\n-                <div class=\"col-last even-row-color for-removal for-removal-tab1\"><\/div>\n+                <div class=\"col-summary-item-name even-row-color for-removal\"><a href=\"mdl\/pkg\/TestA\\\n+                nnotation.html#required()\">pkg.TestAnnotation.required()<\/a><\/div>\n+                <div class=\"col-second even-row-color for-removal\">3.2<\/div>\n+                <div class=\"col-last even-row-color for-removal\"><\/div>\n@@ -646,4 +639,4 @@\n-                <div class=\"col-summary-item-name even-row-color method method-tab1\"><a href=\"mdl\/pk\\\n-                g\/TestAnnotation.html#required()\">pkg.TestAnnotation.required()<\/a><\/div>\n-                <div class=\"col-second even-row-color method method-tab1\">5<\/div>\n-                <div class=\"col-last even-row-color method method-tab1\"><\/div>\n+                <div class=\"col-summary-item-name even-row-color method\"><a href=\"mdl\/pkg\/TestAnnota\\\n+                tion.html#required()\">pkg.TestAnnotation.required()<\/a><\/div>\n+                <div class=\"col-second even-row-color method\">3.2<\/div>\n+                <div class=\"col-last even-row-color method\"><\/div>\n@@ -661,4 +654,4 @@\n-                <div class=\"col-summary-item-name even-row-color constructor constructor-tab1\"><a hr\\\n-                ef=\"mdl\/pkg\/TestClass.html#%3Cinit%3E()\">pkg.TestClass()<\/a><\/div>\n-                <div class=\"col-second even-row-color constructor constructor-tab1\">5<\/div>\n-                <div class=\"col-last even-row-color constructor constructor-tab1\"><\/div>\n+                <div class=\"col-summary-item-name even-row-color constructor\"><a href=\"mdl\/pkg\/TestC\\\n+                lass.html#%3Cinit%3E()\">pkg.TestClass()<\/a><\/div>\n+                <div class=\"col-second even-row-color constructor\">6<\/div>\n+                <div class=\"col-last even-row-color constructor\"><\/div>\n@@ -789,1 +782,1 @@\n-                <div class=\"checkboxes\">Show API deprecated in:<label for=\"release-1\">\n+                <ul class=\"block-list\">\n@@ -793,1 +786,0 @@\n-                <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n@@ -795,3 +787,1 @@\n-                <\/div>\n-                <div id=\"constructor.tabpanel\" role=\"tabpanel\">\n-                <div class=\"summary-table three-column-release-summary\" aria-labelledby=\"constructor-tab0\">\n+                <div class=\"summary-table three-column-release-summary\">\n@@ -801,4 +791,4 @@\n-                <div class=\"col-summary-item-name even-row-color constructor constructor-tab4\"><a hr\\\n-                ef=\"pkg\/TestClass.html#%3Cinit%3E()\">pkg.TestClass()<\/a><\/div>\n-                <div class=\"col-second even-row-color constructor constructor-tab4\">5<\/div>\n-                <div class=\"col-last even-row-color constructor constructor-tab4\"><\/div>\n+                <div class=\"col-summary-item-name even-row-color\"><a href=\"pkg\/TestClass.html#%3Cini\\\n+                t%3E()\">pkg.TestClass()<\/a><\/div>\n+                <div class=\"col-second even-row-color\">5<\/div>\n+                <div class=\"col-last even-row-color\"><\/div>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testNewApiList\/TestNewApiList.java","additions":54,"deletions":64,"binary":false,"changes":118,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,1 +41,1 @@\n-     *  Required annotation interface element.\n+     * Required annotation interface element.\n@@ -44,1 +44,1 @@\n-    @Deprecated(forRemoval=true,since=\"5\")\n+    @Deprecated(forRemoval=true,since=\"3.2\")\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testNewApiList\/mdl\/pkg\/TestAnnotation.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,1 +42,1 @@\n-    @Deprecated(since=\"5\")\n+    @Deprecated(since=\"6\")\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testNewApiList\/mdl\/pkg\/TestClass.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}