{"files":[{"patch":"@@ -553,2 +553,3 @@\n-                int initialBatchSize = Math.max(walker.estimateDepth()+RESERVED_ELEMENTS, MIN_BATCH_SIZE);\n-                return Math.min(initialBatchSize, LARGE_BATCH_SIZE);\n+                return walker.estimateDepth() == 0\n+                        ? SMALL_BATCH\n+                        : Math.min(walker.estimateDepth() + RESERVED_ELEMENTS, LARGE_BATCH_SIZE);\n@@ -558,5 +559,3 @@\n-                if (lastBatchSize > BATCH_SIZE || !frameBuffer.isFull()) {\n-                    return lastBatchSize;\n-                } else {\n-                    return Math.min(lastBatchSize*2, BATCH_SIZE);\n-                }\n+                return (lastBatchSize > BATCH_SIZE || !frameBuffer.isFull())\n+                        ? lastBatchSize\n+                        : Math.min(lastBatchSize*2, BATCH_SIZE);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/StackStreamFactory.java","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"}]}