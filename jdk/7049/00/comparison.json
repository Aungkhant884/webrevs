{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -39,0 +39,1 @@\n+import jdk.tools.jlink.plugin.ResourcePoolEntry;\n@@ -86,0 +87,15 @@\n+    ClassReader newClassReader(String path, ResourcePoolEntry resource) {\n+        byte[] content = resource.contentBytes();\n+        try {\n+            return new ClassReader(content);\n+        } catch (Exception e) {\n+            if (JlinkTask.DEBUG) {\n+                System.err.printf(\"Failed to parse class file: %s from resource of type %s\\n\", path,\n+                        resource.getClass().getName());\n+                e.printStackTrace();\n+                dumpClassFile(path, content);\n+            }\n+            throw e;\n+        }\n+    }\n+\n@@ -89,1 +105,1 @@\n-        } catch (IllegalArgumentException iae) {\n+        } catch (Exception e) {\n@@ -92,1 +108,1 @@\n-                iae.printStackTrace();\n+                e.printStackTrace();\n@@ -95,1 +111,1 @@\n-            throw iae;\n+            throw e;\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jlink\/internal\/plugins\/AbstractPlugin.java","additions":20,"deletions":4,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -62,1 +62,1 @@\n-                        ClassReader reader = newClassReader(path, resource.contentBytes());\n+                        ClassReader reader = newClassReader(path, resource);\n","filename":"src\/jdk.jlink\/share\/classes\/jdk\/tools\/jlink\/internal\/plugins\/StripJavaDebugAttributesPlugin.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}