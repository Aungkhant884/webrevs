{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -133,0 +133,2 @@\n+\n+  static void get_compatible_board(char *buf, int buflen);\n","filename":"src\/hotspot\/cpu\/aarch64\/vm_version_aarch64.hpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -54,1 +54,6 @@\n-  snprintf(_cpu_desc, CPU_DETAILED_DESC_BUF_SIZE, \"AArch64 %s\", _features_string);\n+\n+  int desc_len = snprintf(_cpu_desc, CPU_DETAILED_DESC_BUF_SIZE, \"AArch64 \");\n+  VM_Version::get_compatible_board(_cpu_desc + desc_len, CPU_DETAILED_DESC_BUF_SIZE - desc_len);\n+  desc_len = (int)strlen(_cpu_desc);\n+  snprintf(_cpu_desc + desc_len, CPU_DETAILED_DESC_BUF_SIZE - desc_len, \" %s\", _features_string);\n+\n","filename":"src\/hotspot\/cpu\/aarch64\/vm_version_ext_aarch64.cpp","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2006, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2006, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -170,0 +170,20 @@\n+\n+void VM_Version::get_compatible_board(char *buf, int buflen) {\n+  assert(buf != NULL, \"invalid argument\");\n+  assert(buflen >= 1, \"invalid argument\");\n+  *buf = '\\0';\n+  int fd = open(\"\/proc\/device-tree\/compatible\", O_RDONLY);\n+  if (fd != -1) {\n+    ssize_t read_sz = read(fd, buf, buflen - 1);\n+    buf[buflen - 1] = '\\0';\n+    if (read_sz > 0) {\n+      \/\/ Replace '\\0' to ' '\n+      for (char *ch = buf; ch < buf + read_sz; ch++) {\n+        if (*ch == '\\0') {\n+          *ch = ' ';\n+        }\n+      }\n+    }\n+    close(fd);\n+  }\n+}\n","filename":"src\/hotspot\/os_cpu\/linux_aarch64\/vm_version_linux_aarch64.cpp","additions":21,"deletions":1,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, Microsoft Corporation. All rights reserved.\n+ * Copyright (c) 2020, 2021, Microsoft Corporation. All rights reserved.\n@@ -100,0 +100,6 @@\n+\n+void VM_Version::get_compatible_board(char *buf, int buflen) {\n+  assert(buf != NULL, \"invalid argument\");\n+  assert(buflen >= 1, \"invalid argument\");\n+  *buf = '\\0';\n+}\n","filename":"src\/hotspot\/os_cpu\/windows_aarch64\/vm_version_windows_aarch64.cpp","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"}]}