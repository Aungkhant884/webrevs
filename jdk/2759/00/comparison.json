{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -54,1 +54,22 @@\n-  snprintf(_cpu_desc, CPU_DETAILED_DESC_BUF_SIZE, \"AArch64 %s\", _features_string);\n+\n+  int fd = open(\"\/proc\/device-tree\/compatible\", O_RDONLY);\n+  if (fd != -1) {\n+    struct stat statbuf;\n+    fstat(fd, &statbuf);\n+    char* tmp = NEW_C_HEAP_ARRAY(char, statbuf.st_size, mtInternal);\n+    if (read(fd, tmp, statbuf.st_size) != -1) {\n+      \/\/ Replace '\\0' to ' '\n+      char *tok = tmp;\n+      while ((tok = (char*)memchr(tok, 0, statbuf.st_size - (tok - tmp) - 1)) != NULL) {\n+        *tok = ' ';\n+      }\n+      snprintf(_cpu_desc, CPU_DETAILED_DESC_BUF_SIZE, \"%s %s\", tmp, _features_string);\n+    } else {\n+      snprintf(_cpu_desc, CPU_DETAILED_DESC_BUF_SIZE, \"AArch64 %s\", _features_string);\n+    }\n+    FREE_C_HEAP_ARRAY(char, tmp);\n+    close(fd);\n+  } else {\n+    snprintf(_cpu_desc, CPU_DETAILED_DESC_BUF_SIZE, \"AArch64 %s\", _features_string);\n+  }\n+\n","filename":"src\/hotspot\/cpu\/aarch64\/vm_version_ext_aarch64.cpp","additions":23,"deletions":2,"binary":false,"changes":25,"status":"modified"}]}