{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -285,3 +285,8 @@\n-    \/\/ heavy weight assert\n-    assert(_cur_stack_depth == count_frames(),\n-           \"cur_stack_depth out of sync\");\n+#ifdef ASSERT\n+    if (EnableJVMTIStackDepthAsserts) {\n+      \/\/ heavy weight assert\n+      jint num_frames = count_frames();\n+      assert(_cur_stack_depth == num_frames, \"cur_stack_depth out of sync _cur_stack_depth: %d num_frames: %d\",\n+             _cur_stack_depth, num_frames);\n+    }\n+#endif\n","filename":"src\/hotspot\/share\/prims\/jvmtiThreadState.cpp","additions":9,"deletions":4,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -1848,0 +1848,3 @@\n+  notproduct(bool, EnableJVMTIStackDepthAsserts, true,                      \\\n+          \"Enable JVMTI asserts related to stack depth checks\")             \\\n+                                                                            \\\n","filename":"src\/hotspot\/share\/runtime\/globals.hpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"}]}