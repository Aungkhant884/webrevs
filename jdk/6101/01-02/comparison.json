{"files":[{"patch":"@@ -1483,0 +1483,3 @@\n+  const int cmp1_op = cmp1->Opcode();\n+  const int cmp2_op = cmp2->Opcode();\n+\n@@ -1485,1 +1488,0 @@\n-  uint op2 = cmp2->Opcode();\n@@ -1489,1 +1491,1 @@\n-  if( con->is_Con() && !cmp2->is_Con() && op2 != Op_Opaque1 &&\n+  if( con->is_Con() && !cmp2->is_Con() && cmp2_op != Op_Opaque1 &&\n@@ -1507,1 +1509,1 @@\n-      cmp1->Opcode() == Op_AndI && cmp2->Opcode() == Op_ConI &&\n+      cmp1_op == Op_AndI && cmp2_op == Op_ConI &&\n@@ -1521,1 +1523,1 @@\n-      cmp1->Opcode() == Op_AndL && cmp2->Opcode() == Op_ConL &&\n+      cmp1_op == Op_AndL && cmp2_op == Op_ConL &&\n@@ -1532,8 +1534,5 @@\n-  const int cmp1_op = cmp1->Opcode();\n-  const int cmp2_op = cmp2->Opcode();\n-\n-  \/\/ Change x +- Integer.MIN_VALUE <=> y +- Integer.MIN_VALUE into x u<=> y\n-  if ((_test._test == BoolTest::lt || _test._test == BoolTest::le ||\n-        _test._test == BoolTest::gt || _test._test == BoolTest::ge) &&\n-      cop == Op_CmpI &&\n-      (cmp1_op == Op_AddI || cmp1_op == Op_SubI) &&\n+  \/\/ Change x + Integer.MIN_VALUE <=> y + Integer.MIN_VALUE into x u<=> y\n+  \/\/ and x + Integer.MIN_VALUE <=> c into x u<=> c + Integer.MIN_VALUE\n+  if (cop == Op_CmpI &&\n+      (_test.is_less() || _test.is_greater()) &&\n+      cmp1_op == Op_AddI &&\n@@ -1545,2 +1544,2 @@\n-    } else if ((cmp2_op == Op_AddI || cmp2_op == Op_SubI) &&\n-        phase->type(cmp2->in(2)) == TypeInt::MIN) {\n+    } else if (cmp2_op == Op_AddI &&\n+               phase->type(cmp2->in(2)) == TypeInt::MIN) {\n@@ -1552,5 +1551,5 @@\n-  \/\/ Change x +- Long.MIN_VALUE <=> y +- Long.MIN_VALUE into x u<=> y\n-  if ((_test._test == BoolTest::lt || _test._test == BoolTest::le ||\n-        _test._test == BoolTest::gt || _test._test == BoolTest::ge) &&\n-      cop == Op_CmpL &&\n-      (cmp1_op == Op_AddL || cmp1_op == Op_SubL) &&\n+  \/\/ Change x + Long.MIN_VALUE <=> y + Long.MIN_VALUE into x u<=> y\n+  \/\/ and x + Long.MIN_VALUE <=> c into x u<=> c + Long.MIN_VALUE\n+  if (cop == Op_CmpL &&\n+      (_test.is_less() || _test.is_greater()) &&\n+      cmp1_op == Op_AddL &&\n@@ -1562,2 +1561,2 @@\n-    } else if ((cmp2_op == Op_AddL || cmp2_op == Op_SubL) &&\n-        phase->type(cmp2->in(2)) == TypeLong::MIN) {\n+    } else if (cmp2_op == Op_AddL &&\n+               phase->type(cmp2->in(2)) == TypeLong::MIN) {\n","filename":"src\/hotspot\/share\/opto\/subnode.cpp","additions":20,"deletions":21,"binary":false,"changes":41,"status":"modified"}]}