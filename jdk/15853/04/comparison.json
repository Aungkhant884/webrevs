{"files":[{"patch":"@@ -0,0 +1,159 @@\n+\/*\n+ * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4372743\n+ * @summary test that checks transitions of ERA and YEAR which are caused by add(MONTH).\n+ * @run junit AddMonthShouldTransitionEra\n+ *\/\n+\n+import java.util.GregorianCalendar;\n+import java.util.TimeZone;\n+import java.util.stream.Stream;\n+\n+import static java.util.GregorianCalendar.AD;\n+import static java.util.GregorianCalendar.APRIL;\n+import static java.util.GregorianCalendar.AUGUST;\n+import static java.util.GregorianCalendar.BC;\n+import static java.util.GregorianCalendar.DECEMBER;\n+import static java.util.GregorianCalendar.ERA;\n+import static java.util.GregorianCalendar.FEBRUARY;\n+import static java.util.GregorianCalendar.JANUARY;\n+import static java.util.GregorianCalendar.JULY;\n+import static java.util.GregorianCalendar.JUNE;\n+import static java.util.GregorianCalendar.MARCH;\n+import static java.util.GregorianCalendar.MAY;\n+import static java.util.GregorianCalendar.MONTH;\n+import static java.util.GregorianCalendar.NOVEMBER;\n+import static java.util.GregorianCalendar.OCTOBER;\n+import static java.util.GregorianCalendar.SEPTEMBER;\n+import static java.util.GregorianCalendar.YEAR;\n+\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.BeforeAll;\n+\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.Arguments;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+public class AddMonthShouldTransitionEra {\n+\n+    private static final TimeZone savedTz = TimeZone.getDefault();\n+\n+    \/\/ Save JVM default Locale and TimeZone\n+    @BeforeAll\n+    static void initAll() {\n+        TimeZone.setDefault(TimeZone.getTimeZone(\"PST\"));\n+    }\n+\n+    \/\/ Restore JVM default Locale and TimeZone\n+    @AfterAll\n+    static void tearDownAll() {\n+        TimeZone.setDefault(savedTz);\n+    }\n+\n+    \/*\n+     * Set GregorianCalendar to (March 3, A.D. 2) and test adding\n+     * to the month field. Ensure that the added field is as expected.\n+     *\/\n+    @ParameterizedTest\n+    @MethodSource(\"A_D_Values\")\n+    public void A_D_Test(GregorianCalendar gc, int monthValue) {\n+        for (int i = 0; i < tableSize; i+=(-monthValue)) {\n+            check(gc, i);\n+            gc.add(MONTH, monthValue);\n+        }\n+    }\n+\n+    \/\/ Given in format: (A.D.) GregorianCalendar, amount to add\n+    private static Stream<Arguments> A_D_Values() {\n+        return Stream.of(\n+                Arguments.of(new GregorianCalendar(2, MARCH, 3), -1),\n+                Arguments.of(new GregorianCalendar(2, MARCH, 3), -7));\n+    }\n+\n+    \/*\n+     * Set GregorianCalendar to (March 10, 2 B.C.) and test adding\n+     * to the month field. Ensure that the added field is as expected.\n+     *\/\n+    @ParameterizedTest\n+    @MethodSource(\"B_C_Values\")\n+    public void B_C_Test(GregorianCalendar gc, int monthValue) {\n+            gc.add(YEAR, -3);\n+            for (int i = tableSize - 1; i >= 0; i-=monthValue) {\n+                check(gc, i);\n+                gc.add(MONTH, monthValue);\n+            }\n+    }\n+\n+    \/\/ Given in format: (B.C.) GregorianCalendar, amount to add\n+    private static Stream<Arguments> B_C_Values() {\n+        return Stream.of(\n+                Arguments.of(new GregorianCalendar(2, OCTOBER, 10), 1),\n+                Arguments.of(new GregorianCalendar(2, OCTOBER, 10), 8));\n+    }\n+\n+    \/\/ Check golden data array with actual value\n+    private void check(GregorianCalendar gc, int index) {\n+        assertEquals(data[index][ERA], gc.get(ERA), \"Invalid era\");\n+        assertEquals(data[index][YEAR], gc.get(YEAR), \"Invalid year\");\n+        assertEquals(data[index][MONTH], gc.get(MONTH), \"Invalid month\");\n+    }\n+\n+    \/\/ Expected ERA, YEAR, and MONTH combinations\n+    private final int[][] data = {\n+        {AD, 2, MARCH},\n+        {AD, 2, FEBRUARY},\n+        {AD, 2, JANUARY},\n+        {AD, 1, DECEMBER},\n+        {AD, 1, NOVEMBER},\n+        {AD, 1, OCTOBER},\n+        {AD, 1, SEPTEMBER},\n+        {AD, 1, AUGUST},\n+        {AD, 1, JULY},\n+        {AD, 1, JUNE},\n+        {AD, 1, MAY},\n+        {AD, 1, APRIL},\n+        {AD, 1, MARCH},\n+        {AD, 1, FEBRUARY},\n+        {AD, 1, JANUARY},\n+        {BC, 1, DECEMBER},\n+        {BC, 1, NOVEMBER},\n+        {BC, 1, OCTOBER},\n+        {BC, 1, SEPTEMBER},\n+        {BC, 1, AUGUST},\n+        {BC, 1, JULY},\n+        {BC, 1, JUNE},\n+        {BC, 1, MAY},\n+        {BC, 1, APRIL},\n+        {BC, 1, MARCH},\n+        {BC, 1, FEBRUARY},\n+        {BC, 1, JANUARY},\n+        {BC, 2, DECEMBER},\n+        {BC, 2, NOVEMBER},\n+        {BC, 2, OCTOBER}};\n+    private final int tableSize = data.length;\n+}\n","filename":"test\/jdk\/java\/util\/Calendar\/AddMonthShouldTransitionEra.java","additions":159,"deletions":0,"binary":false,"changes":159,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,3 @@\n- * @summary Confirm that BuddhistCalendar's add(), roll() and toString() work correctly with Buddhist Era years.\n+ * @summary Confirm that BuddhistCalendar's add(), roll(), set(), and toString()\n+ *          work correctly with Buddhist Era years.\n+ * @run junit BuddhistCalendarTest\n@@ -33,1 +35,21 @@\n-import static java.util.Calendar.*;\n+import java.util.stream.Stream;\n+\n+import static java.util.Calendar.APRIL;\n+import static java.util.Calendar.DATE;\n+import static java.util.Calendar.DECEMBER;\n+import static java.util.Calendar.ERA;\n+import static java.util.Calendar.FEBRUARY;\n+import static java.util.Calendar.JANUARY;\n+import static java.util.Calendar.MAY;\n+import static java.util.Calendar.MONTH;\n+import static java.util.Calendar.WEEK_OF_YEAR;\n+import static java.util.Calendar.YEAR;\n+\n+\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.Arguments;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertThrows;\n@@ -39,5 +61,86 @@\n-    public static void main(String[] args) {\n-        testAddRoll();\n-        testToString();\n-        testException();\n-        testLeastMax();\n+    \/*\n+     * Test some add values for the BuddhistCalendar. This test compares the same field\n+     * as the one added.\n+     *\/\n+    @ParameterizedTest\n+    @MethodSource(\"addDataProvider\")\n+    public void buddhistAddTest(Calendar cal, int amount, int fieldToAdd) {\n+        int base = cal.get(YEAR);\n+        cal.add(fieldToAdd, amount);\n+        int yearAfterRoll = cal.get(YEAR);\n+        assertEquals(yearAfterRoll, base+amount, String.format(\n+                \"Added: %s to field: %s\", amount, fieldToAdd));\n+    }\n+\n+    \/*\n+     * Given in the format: Calendar, amount to add, and field to add.\n+     * Test adding of positive and negative year values.\n+     *\/\n+    private static Stream<Arguments> addDataProvider() {\n+        return Stream.of(\n+                Arguments.of(getBuddhistCalendar(), 1, YEAR),\n+                Arguments.of(getBuddhistCalendar(), -3, YEAR)\n+        );\n+    }\n+\n+    \/*\n+     * Test some add values for the BuddhistCalendar. Compare a bigger field\n+     * (year) than the one added (month). Larger field should roll over.\n+     *\/\n+    @ParameterizedTest\n+    @MethodSource(\"alternateAddDataProvider\")\n+    public void buddhistAlternateAddTest(Calendar cal, int amount, int fieldToAdd) {\n+        int base = cal.get(YEAR);\n+        cal.add(fieldToAdd, amount);\n+        int yearAfterRoll = cal.get(YEAR);\n+        assertEquals(yearAfterRoll, (amount>0) ? (base+1): (base-1), String.format(\n+                \"Added: %s to field: %s\", amount, fieldToAdd));\n+    }\n+\n+    \/*\n+     * Given in the format: Calendar, amount to add, and field to add.\n+     * Test adding of positive and negative month values.\n+     *\/\n+    private static Stream<Arguments> alternateAddDataProvider() {\n+        return Stream.of(\n+                Arguments.of(getBuddhistCalendarBuilder().set(MONTH, DECEMBER).build(), 2, MONTH),\n+                Arguments.of(getBuddhistCalendarBuilder().set(MONTH, FEBRUARY).build(), -4, MONTH)\n+                );\n+    }\n+\n+    \/*\n+     * Test some roll values for the BuddhistCalendar. Compare same field\n+     * that was rolled, value should change.\n+     *\/\n+    @ParameterizedTest\n+    @MethodSource(\"rollProvider\")\n+    public void buddhistRollTest(Calendar cal, int amount, int fieldToRoll) {\n+        int base = cal.get(YEAR);\n+        cal.roll(fieldToRoll, amount);\n+        int year = cal.get(YEAR);\n+        assertEquals(year, base+amount, \"Rolling field should change value\");\n+    }\n+\n+    \/*\n+     * Given in the format: Calendar, amount to roll, and field to roll.\n+     * Test rolling of positive and negative year values.\n+     *\/\n+    private static Stream<Arguments> rollProvider() {\n+        return Stream.of(\n+                Arguments.of(getBuddhistCalendar(), 2, YEAR),\n+                Arguments.of(getBuddhistCalendar(), -4, YEAR)\n+        );\n+    }\n+\n+    \/*\n+     * Set some calendar values and roll, however, measure a different\n+     * field than the field that was rolled. Rolling should not change the\n+     * larger field.\n+     *\/\n+    @ParameterizedTest\n+    @MethodSource(\"alternateRollProvider\")\n+    public void buddhistAlternateRollTest(Calendar cal, int amount, int fieldToRoll) {\n+        int base = cal.get(YEAR);\n+        cal.roll(fieldToRoll, amount);\n+        int year = cal.get(YEAR);\n+        assertEquals(year, base, \"Rolling smaller field should not change bigger field\");\n@@ -46,2 +149,3 @@\n-    \/**\n-     * 4817812\n+    \/*\n+     * Given in the format: Calendar, amount to roll, and field to roll.\n+     * Test rolling of positive and negative week_of_year values.\n@@ -49,79 +153,13 @@\n-    static void testAddRoll() {\n-        Calendar cal;\n-        int base, year;\n-\n-        \/*\n-         * Test: BuddhistCalendar.add(YEAR)\n-         *\/\n-        cal = getBuddhistCalendar();\n-        base = cal.get(YEAR);\n-        cal.add(YEAR, 1);\n-        year = cal.get(YEAR);\n-        check(year, base+1, \"add(+YEAR)\");\n-\n-        cal = getBuddhistCalendar();\n-        base = cal.get(YEAR);\n-        cal.add(YEAR, -3);\n-        year = cal.get(YEAR);\n-        check(year, base-3, \"add(-YEAR)\");\n-\n-        \/*\n-         * Test BuddhistCalendar.add(MONTH)\n-         *\/\n-        cal = getBuddhistCalendar();\n-        base = cal.get(YEAR);\n-        cal.set(MONTH, DECEMBER);\n-        cal.add(MONTH, 2);\n-        year = cal.get(YEAR);\n-        check(year, base+1, \"add(+MONTH)\");\n-\n-        cal = getBuddhistCalendar();\n-        base = cal.get(YEAR);\n-        cal.set(MONTH, FEBRUARY);\n-        cal.add(MONTH, -4);\n-        year = cal.get(YEAR);\n-        check(year, base-1, \"add(-MONTH)\");\n-\n-        \/*\n-         * Test BuddhistCalendar.roll(YEAR)\n-         *\/\n-        cal = getBuddhistCalendar();\n-        base = cal.get(YEAR);\n-        cal.roll(YEAR, 2);\n-        year = cal.get(YEAR);\n-        check(year, base+2, \"roll(+YEAR)\");\n-\n-        cal = getBuddhistCalendar();\n-        base = cal.get(YEAR);\n-        cal.roll(YEAR, -4);\n-        year = cal.get(YEAR);\n-        check(year, base-4, \"roll(-YEAR)\");\n-\n-        \/*\n-         * Test BuddhistCalendar.roll(WEEK_OF_YEAR)\n-         *\/\n-        cal = getBuddhistCalendar();\n-        cal.set(YEAR, 2543);   \/\/ A.D.2000\n-        cal.set(MONTH, DECEMBER);\n-        cal.set(DATE, 31);\n-        base = cal.get(YEAR);\n-        check(base, 2543, \"roll(+WEEK_OF_YEAR)\");\n-        cal.roll(WEEK_OF_YEAR, 10);\n-        year = cal.get(YEAR);\n-        check(year, base, \"roll(+WEEK_OF_YEAR)\");\n-\n-        cal = getBuddhistCalendar();\n-        cal.set(YEAR, 2543);   \/\/ A.D.2000\n-        cal.set(MONTH, JANUARY);\n-        cal.set(DATE, 1);\n-        base = cal.get(YEAR);\n-        check(base, 2543, \"roll(+WEEK_OF_YEAR)\");\n-        cal.roll(WEEK_OF_YEAR, -10);\n-        year = cal.get(YEAR);\n-        check(year, base, \"roll(-WEEK_OF_YEAR)\");\n-\n-        \/*\n-         * Test Calendar.set(year, month, date)\n-         *\/\n-        cal = getBuddhistCalendar();\n-        base = cal.get(YEAR);\n+    private static Stream<Arguments> alternateRollProvider() {\n+        return Stream.of(\n+                Arguments.of(getBuddhistCalendarBuilder().set(YEAR, 2543)\n+                        .set(MONTH, DECEMBER).set(DATE, 31).build(), 10, WEEK_OF_YEAR),\n+                Arguments.of(getBuddhistCalendarBuilder().set(YEAR, 2543)\n+                        .set(MONTH, JANUARY).set(DATE, 1).build(), -10, WEEK_OF_YEAR)\n+        );\n+    }\n+\n+    \/\/ Test the overloaded set() methods. Check year value.\n+    @Test\n+    public void buddhistSetTest() {\n+        Calendar cal = getBuddhistCalendar();\n@@ -129,8 +167,1 @@\n-        year = cal.get(YEAR);\n-        check(year, 3001, \"set(year, month, date)\");\n-\n-        \/*\n-         * Test Calendar.set(year, month, date, hour, minute)\n-         *\/\n-        cal = getBuddhistCalendar();\n-        base = cal.get(YEAR);\n+        assertEquals(cal.get(YEAR), 3001);\n@@ -138,36 +169,9 @@\n-        year = cal.get(YEAR);\n-        check(year, 3020, \"set(year, month, date, hour, minute)\");\n-\n-        \/*\n-         * Test Calendar.set(year, month, date, hour, minute, second)\n-         *\/\n-        cal = getBuddhistCalendar();\n-        base = cal.get(YEAR);\n-        cal.set(3120, MAY, 20, 9, 10, 52);\n-        year = cal.get(YEAR);\n-        check(year, 3120, \"set(year, month, date, hour, minute, second)\");\n-\n-        \/*\n-         * Test BuddhistCalendar.getActualMaximum(YEAR);\n-         *    set(YEAR)\/get(YEAR) in this method doesn't affect the real\n-         *    YEAR value because a clone is used with set()&get().\n-         *\/\n-        cal = getBuddhistCalendar();\n-        base = cal.get(YEAR);\n-        int limit = cal.getActualMaximum(YEAR);\n-        year = cal.get(YEAR);\n-        check(year, base, \"BuddhistCalendar.getActualMaximum(YEAR)\");\n-\n-        \/*\n-         * Test BuddhistCalendar.getActualMinimum(YEAR);\n-         *   This doesn't call set(YEAR) nor get(YEAR), though.\n-         *\/\n-        cal = getBuddhistCalendar();\n-        base = cal.get(YEAR);\n-        limit = cal.getActualMinimum(YEAR);\n-        year = cal.get(YEAR);\n-        check(year, base, \"BuddhistCalendar.getActualMinimum(YEAR)\");\n-    }\n-\n-    \/**\n-     * 4847186: BuddhistCalendar: toString() returns Gregorian year\n+        assertEquals(cal.get(YEAR), 3020);\n+        cal.set(3120, MAY, 20, 9, 10, 52 );\n+        assertEquals(cal.get(YEAR), 3120);\n+    }\n+\n+    \/*\n+     * Test BuddhistCalendar.getActualMaximum(YEAR);\n+     * set(YEAR)\/get(YEAR) in this method doesn't affect the real\n+     * YEAR value because a clone is used with set() and get().\n@@ -175,1 +179,22 @@\n-    static void testToString() {\n+    @Test\n+    public void buddhistActualMaximumTest() {\n+        Calendar cal = getBuddhistCalendar();\n+        int base = cal.get(YEAR);\n+        int ignored = cal.getActualMaximum(YEAR);\n+        int year = cal.get(YEAR);\n+        assertEquals(year, base, \"BuddhistCalendar.getActualMaximum(YEAR)\");\n+    }\n+\n+    \/\/ Test BuddhistCalendar.getActualMinimum(YEAR), doesn't call set(YEAR) nor get(YEAR).\n+    @Test\n+    public void buddhistActualMinimumTest() {\n+        Calendar cal = getBuddhistCalendar();\n+        int base = cal.get(YEAR);\n+        int ignored = cal.getActualMinimum(YEAR);\n+        int year = cal.get(YEAR);\n+        assertEquals(year, base, \"BuddhistCalendar.getActualMinimum(YEAR)\");\n+    }\n+\n+    \/\/ 4847186: BuddhistCalendar: toString() returns Gregorian year\n+    @Test\n+    public void buddhistToStringTest() {\n@@ -180,4 +205,1 @@\n-        if (Integer.parseInt(y) != year) {\n-            throw new RuntimeException(\"toString(): wrong year value: got \" + y\n-                                       + \", expected \" + year);\n-        }\n+        assertEquals(year, Integer.parseInt(y), \"Wrong year value\");\n@@ -186,4 +208,3 @@\n-    \/**\n-     * 4956479: BuddhistCalendar methods may return wrong values after exception\n-     *\/\n-    static void testException() {\n+    \/\/ 4956479: BuddhistCalendar methods may return wrong values after exception\n+    @Test\n+    public void buddhistValuesAfterExceptionTest() {\n@@ -192,9 +213,1 @@\n-        boolean exceptionOccurred = false;\n-        try {\n-            cal.add(100, +1); \/\/ cause exception\n-        } catch (Exception e) {\n-            exceptionOccurred = true;\n-        }\n-        if (!exceptionOccurred) {\n-            throw new RuntimeException(\"testException: test case failed: no exception thrown\");\n-        }\n+        assertThrows(IllegalArgumentException.class, ()-> cal.add(100, +1));\n@@ -202,4 +215,1 @@\n-        if (year2 != year) {\n-            throw new RuntimeException(\"wrong year value after exception: got \" + year2\n-                                       + \", expected \" + year);\n-        }\n+        assertEquals(year2, year, \"Wrong year value after exception thrown\");\n@@ -208,4 +218,3 @@\n-    \/**\n-     * 4956227: getLeastMaximum(WEEK_OF_MONTH) return diff. val. for Greg. and Buddhist Calendar\n-     *\/\n-    static void testLeastMax() {\n+    \/\/ 4956227: getLeastMaximum(WEEK_OF_MONTH) return diff. val. for Greg. and Buddhist Calendar\n+    @Test\n+    public void buddhistLeastMaximumTest() {\n@@ -222,5 +231,1 @@\n-            if (bn != gn) {\n-                throw new RuntimeException(\"inconsistent Least Max value for \" + Koyomi.getFieldName(f)\n-                                           + \": Buddhist=\" + bn\n-                                           + \": Gregorian=\" + gn);\n-            }\n+            assertEquals(bn, gn, \"Inconsistent Least Max value for \" + Koyomi.getFieldName(f));\n@@ -230,5 +235,3 @@\n-    \/**\n-     * @return a BuddhistCalendar\n-     *\/\n-    static Calendar getBuddhistCalendar() {\n-        return Calendar.getInstance(THAI_LOCALE);\n+    \/\/ Utility to get a new Buddhist Calendar Builder (to allow setting of other values)\n+    private static Calendar.Builder getBuddhistCalendarBuilder() {\n+        return new Calendar.Builder().setLocale(THAI_LOCALE);\n@@ -237,5 +240,3 @@\n-    static void check(int got, int expected, String s) {\n-        if (got != expected) {\n-            throw new RuntimeException(\"Failed: \" +\n-                s + \": got:\" + got + \", expected:\" + expected);\n-        }\n+    \/\/ Utility to get a new Buddhist calendar\n+    private static Calendar getBuddhistCalendar() {\n+        return Calendar.getInstance(THAI_LOCALE);\n","filename":"test\/jdk\/java\/util\/Calendar\/BuddhistCalendarTest.java","additions":175,"deletions":174,"binary":false,"changes":349,"status":"modified"},{"patch":"@@ -1,43 +0,0 @@\n-\/*\n- * Copyright (c) 2001, 2022, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/*\n- * @test\n- * @bug 4302966 8176841\n- * @modules jdk.localedata\n- * @summary In Czech Republic first day of week is Monday not Sunday\n- *\/\n-\n-import java.util.Calendar;\n-import java.util.Locale;\n-\n-public class Bug4302966 {\n-\n-    public static void main(String[] args) {\n-        Calendar czechCalendar = Calendar.getInstance(Locale.of(\"cs\", \"CZ\"));\n-        int firstDayOfWeek = czechCalendar.getFirstDayOfWeek();\n-        if (firstDayOfWeek != Calendar.MONDAY) {\n-            throw new RuntimeException();\n-        }\n-    }\n-}\n","filename":"test\/jdk\/java\/util\/Calendar\/Bug4302966.java","additions":0,"deletions":43,"binary":false,"changes":43,"status":"deleted"},{"patch":"@@ -1,53 +0,0 @@\n-\/*\n- * Copyright (c) 2002, 2016, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/*\n- * @test\n- * @bug 4766302\n- * @summary Make sure that computeTime call doesn't reset the isTimeSet value.\n- *\/\n-\n-import java.util.GregorianCalendar;\n-\n-@SuppressWarnings(\"serial\")\n-public class Bug4766302 {\n-\n-    static class MyCalendar extends GregorianCalendar {\n-\n-        boolean isTimeStillSet() {\n-            return isTimeSet;\n-        }\n-\n-        protected void computeTime() {\n-            super.computeTime();\n-        }\n-    }\n-\n-    public static void main(String[] args) {\n-        MyCalendar cal = new MyCalendar();\n-        cal.computeTime();\n-        if (!cal.isTimeStillSet()) {\n-            throw new RuntimeException(\"computeTime() call reset isTimeSet.\");\n-        }\n-    }\n-}\n","filename":"test\/jdk\/java\/util\/Calendar\/Bug4766302.java","additions":0,"deletions":53,"binary":false,"changes":53,"status":"deleted"},{"patch":"@@ -0,0 +1,82 @@\n+\/*\n+ * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4316678\n+ * @summary test that Calendar's Serialization works correctly.\n+ * @run junit CalendarSerialization\n+ *\/\n+\n+import java.io.FileInputStream;\n+import java.io.FileOutputStream;\n+import java.io.IOException;\n+import java.io.ObjectInputStream;\n+import java.io.ObjectOutputStream;\n+import java.util.Calendar;\n+import java.util.GregorianCalendar;\n+import java.util.TimeZone;\n+\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+public class CalendarSerialization {\n+\n+    private static final String serializedData = \"bug4316678.ser\";\n+    private static final TimeZone savedTz = TimeZone.getDefault();\n+\n+    \/\/ Save JVM default Locale and TimeZone\n+    @BeforeAll\n+    static void initAll() {\n+        TimeZone.setDefault(TimeZone.getTimeZone(\"PST\"));\n+    }\n+\n+    \/\/ Restore JVM default Locale and TimeZone\n+    @AfterAll\n+    static void tearDownAll() {\n+        TimeZone.setDefault(savedTz);\n+    }\n+\n+    \/\/ Test that a serialized GregorianCalendar has the expected values\n+    @Test\n+    public void serializationTest() throws IOException, ClassNotFoundException {\n+        GregorianCalendar gc1 = new GregorianCalendar(2000, Calendar.OCTOBER, 10);\n+        GregorianCalendar gc2;\n+        try (ObjectOutputStream out\n+                = new ObjectOutputStream(new FileOutputStream(serializedData))) {\n+            out.writeObject(gc1);\n+        }\n+\n+        try (ObjectInputStream in = new ObjectInputStream(new FileInputStream(serializedData))) {\n+            gc2 = (GregorianCalendar)in.readObject();\n+        }\n+\n+        gc1.set(Calendar.DATE, 16);\n+        gc2.set(Calendar.DATE, 16);\n+        assertEquals(gc2.getTime(), gc1.getTime(),\n+                \"Times should be equal after serialization\");\n+    }\n+}\n","filename":"test\/jdk\/java\/util\/Calendar\/CalendarSerialization.java","additions":82,"deletions":0,"binary":false,"changes":82,"status":"added"},{"patch":"@@ -0,0 +1,53 @@\n+\/*\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4028518\n+ * @summary Ensure cloned GregorianCalendar is unchanged when modifying its original.\n+ * @run junit ClonedGregorianUnchanged\n+ *\/\n+\n+import java.util.GregorianCalendar;\n+\n+import static java.util.Calendar.DAY_OF_MONTH;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import static org.junit.jupiter.api.Assertions.assertNotEquals;\n+\n+public class ClonedGregorianUnchanged {\n+\n+    \/*\n+     * Ensure modifying the original GregorianCalendar does not\n+     * modify the cloned one as well\n+     *\/\n+    @Test\n+    public void clonedShouldNotChangeOriginalTest() {\n+        GregorianCalendar cal1 = new GregorianCalendar() ;\n+        GregorianCalendar cal2 = (GregorianCalendar) cal1.clone() ;\n+        cal1.add(DAY_OF_MONTH, 1) ;\n+        assertNotEquals(cal1.get(DAY_OF_MONTH), cal2.get(DAY_OF_MONTH),\n+                \"Cloned calendar should not have same value as original\");\n+    }\n+}\n","filename":"test\/jdk\/java\/util\/Calendar\/ClonedGregorianUnchanged.java","additions":53,"deletions":0,"binary":false,"changes":53,"status":"added"},{"patch":"@@ -0,0 +1,47 @@\n+\/*\n+ * Copyright (c) 2001, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4302966 8176841\n+ * @modules jdk.localedata\n+ * @summary In Czech Republic first day of week is Monday not Sunday\n+ * @run junit CzechFirstDayOfWeek\n+ *\/\n+\n+import java.util.Calendar;\n+import java.util.Locale;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+public class CzechFirstDayOfWeek {\n+\n+    \/\/ Specific day of week test for Czech locale\n+    public void czechDayOfWeekTest() {\n+        Calendar czechCalendar = Calendar.getInstance(Locale.of(\"cs\", \"CZ\"));\n+        int firstDayOfWeek = czechCalendar.getFirstDayOfWeek();\n+        assertEquals(firstDayOfWeek, Calendar.MONDAY);\n+    }\n+}\n","filename":"test\/jdk\/java\/util\/Calendar\/CzechFirstDayOfWeek.java","additions":47,"deletions":0,"binary":false,"changes":47,"status":"added"},{"patch":"@@ -0,0 +1,58 @@\n+\/*\n+ * Copyright (c) 2002, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4766302\n+ * @summary Make sure that calling computeTime doesn't reset the isTimeSet value.\n+ * @run junit IsTimeSetValueShouldNotReset\n+ *\/\n+\n+import java.util.GregorianCalendar;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public class IsTimeSetValueShouldNotReset {\n+\n+    \/\/ Extend GregorianCalendar to check the protected value of isTimeSet\n+    @SuppressWarnings(\"serial\")\n+    static class MyCalendar extends GregorianCalendar {\n+        boolean isTimeStillSet() {\n+            return isTimeSet;\n+        }\n+\n+        protected void computeTime() {\n+            super.computeTime();\n+        }\n+    }\n+\n+    \/\/ Check the value of isTimeStillSet() after calling computeTime()\n+    @Test\n+    public void validateIsTimeSetTest() {\n+        MyCalendar cal = new MyCalendar();\n+        cal.computeTime();\n+        assertTrue(cal.isTimeStillSet(), \"computeTime() call reset isTimeSet.\");\n+    }\n+}\n","filename":"test\/jdk\/java\/util\/Calendar\/IsTimeSetValueShouldNotReset.java","additions":58,"deletions":0,"binary":false,"changes":58,"status":"added"},{"patch":"@@ -0,0 +1,82 @@\n+\/*\n+ * Copyright (c) 2001, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4401223\n+ * @summary Make sure that GregorianCalendar doesn't cause\n+ *          IllegalArgumentException at some special situations which are\n+ *          related to the Leap Year.\n+ * @run junit LeapYearExceptions\n+ *\/\n+\n+import java.util.Date;\n+import java.util.GregorianCalendar;\n+\n+import static java.util.GregorianCalendar.DATE;\n+import static java.util.GregorianCalendar.DAY_OF_YEAR;\n+import static java.util.GregorianCalendar.DECEMBER;\n+import static java.util.GregorianCalendar.FEBRUARY;\n+import static java.util.GregorianCalendar.MONTH;\n+import static java.util.GregorianCalendar.YEAR;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import static org.junit.jupiter.api.Assertions.assertDoesNotThrow;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+public class LeapYearExceptions {\n+\n+    \/\/ Ensure IAE not thrown for date: 12-29-00\n+    @SuppressWarnings(\"deprecation\")\n+    @Test\n+    public void checkExceptionTest() {\n+        Date date = new Date(2000 - 1900, FEBRUARY, 29);\n+        GregorianCalendar gc = new GregorianCalendar();\n+        assertDoesNotThrow(() -> {\n+            gc.setTime(date);\n+            gc.setLenient(false);\n+            gc.set(YEAR, 2001);\n+        }, \"Exception occurred for 2\/29\/00 & set(YEAR,2001)\");\n+    }\n+\n+    \/\/ Ensure IAE not thrown for date: 12-31-00. Validate expected values.\n+    @SuppressWarnings(\"deprecation\")\n+    @Test\n+    public void checkExceptionAndValuesTest() {\n+        Date date = new Date(2000 - 1900, DECEMBER, 31);\n+        GregorianCalendar gc = new GregorianCalendar();\n+        assertDoesNotThrow(() -> {\n+            gc.setTime(date);\n+            gc.setLenient(false);\n+            gc.set(YEAR, 2001);\n+        }, \"Exception occurred for 12\/31\/00 & set(YEAR,2001)\");\n+\n+        String errMsg = \"Wrong date,  got: \" + gc.getTime();\n+\n+        assertEquals(2001, gc.get(YEAR), errMsg);\n+        assertEquals(DECEMBER, gc.get(MONTH), errMsg);\n+        assertEquals(31, gc.get(DATE), errMsg);\n+        assertEquals(365, gc.get(DAY_OF_YEAR), errMsg);\n+    }\n+}\n","filename":"test\/jdk\/java\/util\/Calendar\/LeapYearExceptions.java","additions":82,"deletions":0,"binary":false,"changes":82,"status":"added"},{"patch":"@@ -0,0 +1,122 @@\n+\/*\n+ * Copyright (c) 2002, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4514831\n+ * @summary Confirm that GregorianCalendar.roll() works properly during\n+ *          transition from Daylight Saving Time to Standard Time.\n+ * @run junit RollDuringDaylightTransition\n+ *\/\n+\n+import java.util.GregorianCalendar;\n+import java.util.Locale;\n+import java.util.TimeZone;\n+\n+import static java.util.GregorianCalendar.DAY_OF_MONTH;\n+import static java.util.GregorianCalendar.DAY_OF_WEEK;\n+import static java.util.GregorianCalendar.DAY_OF_WEEK_IN_MONTH;\n+import static java.util.GregorianCalendar.DAY_OF_YEAR;\n+import static java.util.GregorianCalendar.OCTOBER;\n+import static java.util.GregorianCalendar.THURSDAY;\n+\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+public class RollDuringDaylightTransition {\n+    \/\/ Data of 7 rolls in the form of a string for the respective field\n+    private static final String expectedDayOfYearData = \"27-28 28-29 29-30 30-31 31-1 1-2 2-3 \";\n+    private static final String expectedDayOfWeekData = \"27-28 28-29 29-30 30-31 31-25 25-26 26-27 \";\n+    private static final String expectedDayOfWeekInMonthData = \"1-8 8-15 15-22 22-29 29-1 1-8 8-15 \";\n+    private static final TimeZone savedTz = TimeZone.getDefault();\n+    private static final Locale savedLocale = Locale.getDefault();\n+\n+    \/\/ Save JVM default Locale and TimeZone\n+    @BeforeAll\n+    void initAll() {\n+        Locale.setDefault(Locale.US);\n+        TimeZone.setDefault(TimeZone.getTimeZone(\"US\/Pacific\"));\n+    }\n+\n+    \/\/ Restore JVM default Locale and TimeZone\n+    @AfterAll\n+    void tearDownAll() {\n+        Locale.setDefault(savedLocale);\n+        TimeZone.setDefault(savedTz);\n+    }\n+\n+    \/*\n+     * Test some roll values during transition (DAY_OF_YEAR field). Uses\n+     * the boolean roll method. Roll multiple times and attach the returned\n+     * values to a long string which is then compared to the expected data.\n+     *\/\n+    public void rollDayOfYearTest() {\n+        StringBuilder actualRollData = new StringBuilder();\n+        GregorianCalendar cal = new GregorianCalendar(2001, OCTOBER, 27);\n+        for (int i = 0; i < 7; i++) {\n+            actualRollData.append(cal.get(DAY_OF_MONTH)).append(\"-\");\n+            cal.roll(DAY_OF_YEAR, true);\n+            actualRollData.append(cal.get(DAY_OF_MONTH)).append(\" \");\n+        }\n+        assertEquals(expectedDayOfYearData, actualRollData.toString(),\n+                \"Wrong roll(DAY_OF_YEAR) transition\");\n+    }\n+\n+    \/*\n+     * Test some roll values during transition (DAY_OF_WEEK field). Uses\n+     * the boolean roll method. Roll multiple times and attach the returned\n+     * values to a long string which is then compared to the expected data.\n+     *\/\n+    public void rollDayOfWeekTest() {\n+        StringBuilder actualRollData = new StringBuilder();\n+        GregorianCalendar cal = new GregorianCalendar(2001, OCTOBER, 27);\n+        cal.setFirstDayOfWeek(THURSDAY);\n+        for (int i = 0; i < 7; i++) {\n+            actualRollData.append(cal.get(DAY_OF_MONTH)).append(\"-\");\n+            cal.roll(DAY_OF_WEEK, true);\n+            actualRollData.append(cal.get(DAY_OF_MONTH)).append(\" \");\n+        }\n+        assertEquals(expectedDayOfWeekData, actualRollData.toString(),\n+                \"Wrong roll(DAY_OF_WEEK) transition\");\n+    }\n+\n+    \/*\n+     * Test some roll values during transition (DAY_OF_WEEK_IN_MONTH field). Uses\n+     * the boolean roll method. Roll multiple times and attach the returned\n+     * values to a long string which is then compared to the expected data.\n+     *\/\n+    public void rollDayOfWeekInMonthTest() {\n+        StringBuilder actualRollData = new StringBuilder();\n+        GregorianCalendar cal = new GregorianCalendar(2001, OCTOBER, 1);\n+        for (int i = 0; i < 7; i++) {\n+            actualRollData.append(cal.get(DAY_OF_MONTH)).append(\"-\");\n+            cal.roll(DAY_OF_WEEK_IN_MONTH, true);\n+            actualRollData.append(cal.get(DAY_OF_MONTH)).append(\" \");\n+        }\n+        assertEquals(expectedDayOfWeekInMonthData, actualRollData.toString(),\n+                \"Wrong roll(DAY_OF_WEEK_IN_MONTH) transition\");\n+    }\n+}\n","filename":"test\/jdk\/java\/util\/Calendar\/RollDuringDaylightTransition.java","additions":122,"deletions":0,"binary":false,"changes":122,"status":"added"},{"patch":"@@ -0,0 +1,52 @@\n+\/*\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4100311\n+ * @summary Ensure set(DAY_OF_YEAR, 1) works.\n+ * @run junit SetDayOfYearJanFirst\n+ *\/\n+\n+import java.util.Calendar;\n+import java.util.GregorianCalendar;\n+import java.util.Date;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+public class SetDayOfYearJanFirst {\n+\n+    \/\/ GregorianCalendar should be able to date to january 1st properly\n+    @SuppressWarnings(\"deprecation\")\n+    @Test\n+    public void dayOfYearIsOneTest() {\n+        GregorianCalendar cal = new GregorianCalendar();\n+        cal.set(Calendar.YEAR, 1997);\n+        cal.set(Calendar.DAY_OF_YEAR, 1);\n+        Date d = cal.getTime();\n+        assertEquals(0, d.getMonth(), \"Date: \"+d+\" isn't January 1st\");\n+        assertEquals(1, d.getDate(),\"Date: \"+d+\" isn't January 1st\");\n+    }\n+}\n","filename":"test\/jdk\/java\/util\/Calendar\/SetDayOfYearJanFirst.java","additions":52,"deletions":0,"binary":false,"changes":52,"status":"added"},{"patch":"@@ -0,0 +1,111 @@\n+\/*\n+ * Copyright (c) 2001, 2023, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4243802\n+ * @summary confirm that Calendar.setTimeInMillis() and getTimeInMillis()\n+ *          can be called from a user program. They used to be protected methods.\n+ * @run junit SetTimeAndGetTimeInMillis\n+ *\/\n+\n+import java.util.Calendar;\n+import java.util.Locale;\n+import java.util.TimeZone;\n+\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.BeforeAll;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+public class SetTimeAndGetTimeInMillis {\n+\n+    private static final TimeZone savedTz = TimeZone.getDefault();\n+    private static final Locale savedLocale = Locale.getDefault();\n+\n+    \/\/ Save JVM default Locale and TimeZone\n+    @BeforeAll\n+    static void initAll() {\n+        Locale.setDefault(Locale.US);\n+        TimeZone.setDefault(TimeZone.getTimeZone(\"America\/Los_Angeles\"));\n+    }\n+\n+    \/\/ Restore JVM default Locale and TimeZone\n+    @AfterAll\n+    static void tearDownAll() {\n+        Locale.setDefault(savedLocale);\n+        TimeZone.setDefault(savedTz);\n+    }\n+\n+    \/*\n+     * Test getTimeInMillis() and setTimeInMillis(). Compare a Calendar\n+     * set with a traditional date to one set using setTimeInMillis(),\n+     * where both Calendars should be of equal times.\n+     *\/\n+    @Test\n+    public void setCalendarWithoutDateTest() {\n+        Calendar cal1 = Calendar.getInstance();\n+        Calendar cal2 = Calendar.getInstance();\n+\n+        cal1.clear();\n+        cal2.clear();\n+\n+        cal1.set(2001, Calendar.JANUARY, 25, 1, 23, 45);\n+        \/\/ Build the second calendar using the getTimeInMillis of the first\n+        cal2.setTimeInMillis(cal1.getTimeInMillis());\n+\n+        assertEquals(2001, cal2.get(Calendar.YEAR), getErrMsg(cal1));\n+        assertEquals(Calendar.JANUARY, cal2.get(Calendar.MONTH), getErrMsg(cal1));\n+        assertEquals(25, cal2.get(Calendar.DAY_OF_MONTH), getErrMsg(cal1));\n+        assertEquals(1, cal2.get(Calendar.HOUR_OF_DAY), getErrMsg(cal1));\n+        assertEquals(23, cal2.get(Calendar.MINUTE), getErrMsg(cal1));\n+        assertEquals(45, cal2.get(Calendar.SECOND), getErrMsg(cal1));\n+        assertEquals(0, cal2.get(Calendar.MILLISECOND), getErrMsg(cal1));\n+    }\n+\n+    \/\/ Utility to build a long error message\n+    private static String getErrMsg(Calendar cal) {\n+        return \"Failed: expected 1\/25\/2001 1:23:45.000\" +\n+                \", got \" + (cal.get(Calendar.MONTH)+1) + \"\/\" +\n+                cal.get(Calendar.DAY_OF_MONTH) +\"\/\" +\n+                cal.get(Calendar.YEAR) + \" \" +\n+                cal.get(Calendar.HOUR_OF_DAY) + \":\" +\n+                cal.get(Calendar.MINUTE) + \":\" +\n+                cal.get(Calendar.SECOND) + \".\" +\n+                toMillis(cal.get(Calendar.MILLISECOND));\n+    }\n+\n+    \/\/ Utility to convert value to format of expected milisecond value\n+    private static String toMillis(int m) {\n+        StringBuilder sb = new StringBuilder();\n+        if (m < 100) {\n+            sb.append('0');\n+        }\n+        if (m < 10) {\n+            sb.append('0');\n+        }\n+        return sb.append(m).toString();\n+    }\n+}\n","filename":"test\/jdk\/java\/util\/Calendar\/SetTimeAndGetTimeInMillis.java","additions":111,"deletions":0,"binary":false,"changes":111,"status":"added"},{"patch":"@@ -1,56 +0,0 @@\n-\/*\n- * Copyright (c) 1998, 2016, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/*\n- * @test\n- * @bug 4028518\n- * @summary Make sure cloned GregorianCalendar is unchanged by modifying its original.\n- *\/\n-\n-import java.util.GregorianCalendar ;\n-import static java.util.Calendar.*;\n-\n-public class bug4028518 {\n-\n-    public static void main(String[] args)\n-    {\n-        GregorianCalendar cal1 = new GregorianCalendar() ;\n-        GregorianCalendar cal2 = (GregorianCalendar) cal1.clone() ;\n-\n-        printdate(cal1, \"cal1: \") ;\n-        printdate(cal2, \"cal2 - cloned(): \") ;\n-        cal1.add(DAY_OF_MONTH, 1) ;\n-        printdate(cal1, \"cal1 after adding 1 day: \") ;\n-        printdate(cal2, \"cal2 should be unmodified: \") ;\n-        if (cal1.get(DAY_OF_MONTH) == cal2.get(DAY_OF_MONTH)) {\n-            throw new RuntimeException(\"cloned GregorianCalendar modified\");\n-        }\n-    }\n-\n-    private static void printdate(GregorianCalendar cal, String string)\n-    {\n-        System.out.println(string + (cal.get(MONTH) + 1)\n-                           + \"\/\" + cal.get(DAY_OF_MONTH)\n-                           + \"\/\" + cal.get(YEAR)) ;\n-    }\n-}\n","filename":"test\/jdk\/java\/util\/Calendar\/bug4028518.java","additions":0,"deletions":56,"binary":false,"changes":56,"status":"deleted"},{"patch":"@@ -1,47 +0,0 @@\n-\/*\n- * Copyright (c) 1998, 2016, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/*\n- * @test\n- * @bug 4100311\n- * @summary Make sure set(DAY_OF_YEAR, 1) works.\n- *\/\n-\n-import java.util.Calendar;\n-import java.util.GregorianCalendar;\n-import java.util.Date;\n-\n-public class bug4100311\n-{\n-    @SuppressWarnings(\"deprecation\")\n-    public static void main(String args[])\n-    {\n-        GregorianCalendar cal = new GregorianCalendar();\n-        cal.set(Calendar.YEAR, 1997);\n-        cal.set(Calendar.DAY_OF_YEAR, 1);\n-        Date d = cal.getTime();             \/\/ Should be Jan 1\n-        if (d.getMonth() != 0 || d.getDate() != 1) {\n-            throw new RuntimeException(\"Date isn't Jan 1\");\n-        }\n-    }\n-}\n","filename":"test\/jdk\/java\/util\/Calendar\/bug4100311.java","additions":0,"deletions":47,"binary":false,"changes":47,"status":"deleted"},{"patch":"@@ -1,93 +0,0 @@\n-\/*\n- * Copyright (c) 2001, 2016, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/*\n- * @test\n- * @bug 4243802\n- * @summary confirm that Calendar.setTimeInMillis() and\n- * getTimeInMillis() can be called from a user program. (They used to\n- * be protected methods.)\n- * @library \/java\/text\/testlib\n- *\/\n-\n-import java.util.*;\n-\n-public class bug4243802 extends IntlTest {\n-\n-    public static void main(String[] args) throws Exception {\n-        new bug4243802().run(args);\n-    }\n-\n-    \/**\n-     * 4243802: RFE: need way to set the date of a calendar without a Date object\n-     *\/\n-    public void Test4243802() {\n-        TimeZone saveZone = TimeZone.getDefault();\n-        Locale saveLocale = Locale.getDefault();\n-        try {\n-            Locale.setDefault(Locale.US);\n-            TimeZone.setDefault(TimeZone.getTimeZone(\"America\/Los_Angeles\"));\n-\n-            Calendar cal1 = Calendar.getInstance();\n-            Calendar cal2 = Calendar.getInstance();\n-\n-            cal1.clear();\n-            cal2.clear();\n-            cal1.set(2001, Calendar.JANUARY, 25, 1, 23, 45);\n-            cal2.setTimeInMillis(cal1.getTimeInMillis());\n-            if ((cal2.get(Calendar.YEAR) != 2001) ||\n-                (cal2.get(Calendar.MONTH) != Calendar.JANUARY) ||\n-                (cal2.get(Calendar.DAY_OF_MONTH) != 25) ||\n-                (cal2.get(Calendar.HOUR_OF_DAY) != 1) ||\n-                (cal2.get(Calendar.MINUTE) != 23) ||\n-                (cal2.get(Calendar.SECOND) != 45) ||\n-                (cal2.get(Calendar.MILLISECOND) != 0)) {\n-                 errln(\"Failed: expected 1\/25\/2001 1:23:45.000\" +\n-                       \", got \" + (cal2.get(Calendar.MONTH)+1) + \"\/\" +\n-                       cal2.get(Calendar.DAY_OF_MONTH) +\"\/\" +\n-                       cal2.get(Calendar.YEAR) + \" \" +\n-                       cal2.get(Calendar.HOUR_OF_DAY) + \":\" +\n-                       cal2.get(Calendar.MINUTE) + \":\" +\n-                       cal2.get(Calendar.SECOND) + \".\" +\n-                       toMillis(cal2.get(Calendar.MILLISECOND)));\n-            }\n-            logln(\"Passed.\");\n-        }\n-        finally {\n-            Locale.setDefault(saveLocale);\n-            TimeZone.setDefault(saveZone);\n-        }\n-    }\n-\n-    private String toMillis(int m) {\n-        StringBuffer sb = new StringBuffer();\n-        if (m < 100) {\n-            sb.append('0');\n-        }\n-        if (m < 10) {\n-            sb.append('0');\n-        }\n-        sb.append(m);\n-        return sb.toString();\n-    }\n-}\n","filename":"test\/jdk\/java\/util\/Calendar\/bug4243802.java","additions":0,"deletions":93,"binary":false,"changes":93,"status":"deleted"},{"patch":"@@ -1,69 +0,0 @@\n-\/*\n- * Copyright (c) 2000, 2016, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-import java.io.*;\n-import java.util.*;\n-import java.text.*;\n-\n-\/**\n- * @test\n- * @bug 4316678\n- * @summary test that Calendar's Serializasion works correctly.\n- * @library \/java\/text\/testlib\n- *\/\n-public class bug4316678 extends IntlTest {\n-\n-    public static void main(String[] args) throws Exception {\n-        new bug4316678().run(args);\n-    }\n-\n-    public void Test4316678() throws Exception {\n-        GregorianCalendar gc1;\n-        GregorianCalendar gc2;\n-        TimeZone saveZone = TimeZone.getDefault();\n-\n-        try {\n-            TimeZone.setDefault(TimeZone.getTimeZone(\"PST\"));\n-\n-            gc1 = new GregorianCalendar(2000, Calendar.OCTOBER, 10);\n-            try (ObjectOutputStream out\n-                    = new ObjectOutputStream(new FileOutputStream(\"bug4316678.ser\"))) {\n-                out.writeObject(gc1);\n-            }\n-\n-            try (ObjectInputStream in\n-                    = new ObjectInputStream(new FileInputStream(\"bug4316678.ser\"))) {\n-                gc2 = (GregorianCalendar)in.readObject();\n-            }\n-\n-            gc1.set(Calendar.DATE, 16);\n-            gc2.set(Calendar.DATE, 16);\n-            if (!gc1.getTime().equals(gc2.getTime())) {\n-                errln(\"Invalid Time :\" + gc2.getTime() +\n-                    \", expected :\" + gc1.getTime());\n-            }\n-        } finally {\n-            TimeZone.setDefault(saveZone);\n-        }\n-    }\n-}\n","filename":"test\/jdk\/java\/util\/Calendar\/bug4316678.java","additions":0,"deletions":69,"binary":false,"changes":69,"status":"deleted"},{"patch":"@@ -1,130 +0,0 @@\n-\/*\n- * Copyright (c) 2000, 2016, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/*\n- * @test\n- * @bug 4372743\n- * @summary test that checks transitions of ERA and YEAR which are caused by add(MONTH).\n- * @library \/java\/text\/testlib\n- *\/\n-\n-import java.util.GregorianCalendar;\n-import java.util.TimeZone;\n-\n-import static java.util.GregorianCalendar.*;\n-\n-public class bug4372743 extends IntlTest {\n-\n-    public static void main(String[] args) throws Exception {\n-        new bug4372743().run(args);\n-    }\n-\n-    private int[][] data = {\n-        {AD, 2, MARCH},\n-        {AD, 2, FEBRUARY},\n-        {AD, 2, JANUARY},\n-        {AD, 1, DECEMBER},\n-        {AD, 1, NOVEMBER},\n-        {AD, 1, OCTOBER},\n-        {AD, 1, SEPTEMBER},\n-        {AD, 1, AUGUST},\n-        {AD, 1, JULY},\n-        {AD, 1, JUNE},\n-        {AD, 1, MAY},\n-        {AD, 1, APRIL},\n-        {AD, 1, MARCH},\n-        {AD, 1, FEBRUARY},\n-        {AD, 1, JANUARY},\n-        {BC, 1, DECEMBER},\n-        {BC, 1, NOVEMBER},\n-        {BC, 1, OCTOBER},\n-        {BC, 1, SEPTEMBER},\n-        {BC, 1, AUGUST},\n-        {BC, 1, JULY},\n-        {BC, 1, JUNE},\n-        {BC, 1, MAY},\n-        {BC, 1, APRIL},\n-        {BC, 1, MARCH},\n-        {BC, 1, FEBRUARY},\n-        {BC, 1, JANUARY},\n-        {BC, 2, DECEMBER},\n-        {BC, 2, NOVEMBER},\n-        {BC, 2, OCTOBER}};\n-    private int tablesize = data.length;\n-\n-    private void check(GregorianCalendar gc, int index) {\n-        if (gc.get(ERA) != data[index][ERA]) {\n-            errln(\"Invalid era :\" + gc.get(ERA)\n-                    + \", expected :\" + data[index][ERA]);\n-        }\n-        if (gc.get(YEAR) != data[index][YEAR]) {\n-            errln(\"Invalid year :\" + gc.get(YEAR)\n-                    + \", expected :\" + data[index][YEAR]);\n-        }\n-        if (gc.get(MONTH) != data[index][MONTH]) {\n-            errln(\"Invalid month :\" + gc.get(MONTH)\n-                    + \", expected :\" + data[index][MONTH]);\n-        }\n-    }\n-\n-    public void Test4372743() {\n-        GregorianCalendar gc;\n-        TimeZone saveZone = TimeZone.getDefault();\n-\n-        try {\n-            TimeZone.setDefault(TimeZone.getTimeZone(\"PST\"));\n-\n-            \/* Set March 3, A.D. 2 *\/\n-            gc = new GregorianCalendar(2, MARCH, 3);\n-            for (int i = 0; i < tablesize; i++) {\n-                check(gc, i);\n-                gc.add(MONTH, -1);\n-            }\n-\n-            \/* Again, Set March 3, A.D. 2 *\/\n-            gc = new GregorianCalendar(2, MARCH, 3);\n-            for (int i = 0; i < tablesize; i += 7) {\n-                check(gc, i);\n-                gc.add(MONTH, -7);\n-            }\n-\n-            \/* Set March 10, 2 B.C. *\/\n-            gc = new GregorianCalendar(2, OCTOBER, 10);\n-            gc.add(YEAR, -3);\n-            for (int i = tablesize - 1; i >= 0; i--) {\n-                check(gc, i);\n-                gc.add(MONTH, 1);\n-            }\n-\n-            \/* Again, Set March 10, 2 B.C. *\/\n-            gc = new GregorianCalendar(2, OCTOBER, 10);\n-            gc.add(YEAR, -3);\n-            for (int i = tablesize - 1; i >= 0; i -= 8) {\n-                check(gc, i);\n-                gc.add(MONTH, 8);\n-            }\n-        } finally {\n-            TimeZone.setDefault(saveZone);\n-        }\n-    }\n-}\n","filename":"test\/jdk\/java\/util\/Calendar\/bug4372743.java","additions":0,"deletions":130,"binary":false,"changes":130,"status":"deleted"},{"patch":"@@ -1,96 +0,0 @@\n-\/*\n- * Copyright (c) 2001, 2016, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/*\n- * @test\n- * @bug 4401223\n- * @summary Make sure that GregorianCalendar doesn't cause IllegalArgumentException at some special situations which are related to the Leap Year.\n- * @library \/java\/text\/testlib\n- *\/\n-\n-import java.util.Date;\n-import java.util.GregorianCalendar;\n-\n-import static java.util.GregorianCalendar.*;\n-\n-public class bug4401223 extends IntlTest {\n-\n-    public void Test4401223a() {\n-        int status = 0;\n-        String s = null;\n-\n-        try {\n-            @SuppressWarnings(\"deprecation\")\n-            Date date = new Date(2000 - 1900, FEBRUARY, 29);\n-            GregorianCalendar gc = new GregorianCalendar();\n-            gc.setTime(date);\n-            gc.setLenient(false);\n-            gc.set(YEAR, 2001);\n-            s = \"02\/29\/00 & set(YEAR,2001) = \" + gc.getTime().toString();\n-        } catch (Exception ex) {\n-            status++;\n-            s = \"Exception occurred for 2\/29\/00 & set(YEAR,2001): \" + ex;\n-        }\n-        if (status > 0) {\n-            errln(s);\n-        } else {\n-            logln(s);\n-        }\n-    }\n-\n-    public void Test4401223b() {\n-        int status = 0;\n-        String s = null;\n-\n-        try {\n-            @SuppressWarnings(\"deprecation\")\n-            Date date = new Date(2000 - 1900, DECEMBER, 31);\n-            GregorianCalendar gc = new GregorianCalendar();\n-            gc.setTime(date);\n-            gc.setLenient(false);\n-            gc.set(YEAR, 2001);\n-\n-            if (gc.get(YEAR) != 2001\n-                    || gc.get(MONTH) != DECEMBER\n-                    || gc.get(DATE) != 31\n-                    || gc.get(DAY_OF_YEAR) != 365) {\n-                status++;\n-                s = \"Wrong Date : 12\/31\/00 & set(YEAR,2001) ---> \" + gc.getTime().toString();\n-            } else {\n-                s = \"12\/31\/00 & set(YEAR,2001) = \" + gc.getTime().toString();\n-            }\n-        } catch (Exception ex) {\n-            status++;\n-            s = \"Exception occurred for 12\/31\/00 & set(YEAR,2001) : \" + ex;\n-        }\n-        if (status > 0) {\n-            errln(s);\n-        } else {\n-            logln(s);\n-        }\n-    }\n-\n-    public static void main(String[] args) throws Exception {\n-        new bug4401223().run(args);\n-    }\n-}\n","filename":"test\/jdk\/java\/util\/Calendar\/bug4401223.java","additions":0,"deletions":96,"binary":false,"changes":96,"status":"deleted"},{"patch":"@@ -1,100 +0,0 @@\n-\/*\n- * Copyright (c) 2002, 2016, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-\/*\n- * @test\n- * @bug 4514831\n- * @summary Confirm that GregorianCalendar.roll() works properly during transition from Daylight Saving Time to Standard Time.\n- *\/\n-\n-import java.util.GregorianCalendar;\n-import java.util.Locale;\n-import java.util.TimeZone;\n-\n-import static java.util.GregorianCalendar.*;\n-\n-\n-public class bug4514831 {\n-\n-    public static void main(String[] args) {\n-        Locale savedLocale = Locale.getDefault();\n-        TimeZone savedTimeZone = TimeZone.getDefault();\n-        boolean err = false;\n-\n-        String golden_data1 = \"27-28 28-29 29-30 30-31 31-1 1-2 2-3 \";\n-        String golden_data2 = \"27-28 28-29 29-30 30-31 31-25 25-26 26-27 \";\n-        String golden_data3 = \"1-8 8-15 15-22 22-29 29-1 1-8 8-15 \";\n-\n-        try {\n-            Locale.setDefault(Locale.US);\n-            TimeZone.setDefault(TimeZone.getTimeZone(\"US\/Pacific\"));\n-\n-            String test_roll = \"\";\n-            GregorianCalendar c_roll = new GregorianCalendar(2001, OCTOBER, 27);\n-            for (int i = 0; i < 7; i++) {\n-                test_roll += c_roll.get(DAY_OF_MONTH) + \"-\";\n-                c_roll.roll(DAY_OF_YEAR, true);\n-                test_roll += c_roll.get(DAY_OF_MONTH) + \" \";\n-            }\n-            if (!test_roll.equals(golden_data1)) {\n-                err = true;\n-                System.err.println(\"Wrong roll(DAY_OF_YEAR) transition: got \"\n-                        + test_roll + \"expected \" + golden_data1);\n-            }\n-\n-            test_roll = \"\";\n-            c_roll = new GregorianCalendar(2001, OCTOBER, 27);\n-            c_roll.setFirstDayOfWeek(THURSDAY);\n-            for (int i = 0; i < 7; i++) {\n-                test_roll += c_roll.get(DAY_OF_MONTH) + \"-\";\n-                c_roll.roll(DAY_OF_WEEK, true);\n-                test_roll += c_roll.get(DAY_OF_MONTH) + \" \";\n-            }\n-            if (!test_roll.equals(golden_data2)) {\n-                err = true;\n-                System.err.println(\"Wrong roll(DAY_OF_WEEK) transition: got \"\n-                        + test_roll + \"expected \" + golden_data2);\n-            }\n-\n-            test_roll = \"\";\n-            c_roll = new GregorianCalendar(2001, OCTOBER, 1);\n-            for (int i = 0; i < 7; i++) {\n-                test_roll += c_roll.get(DAY_OF_MONTH) + \"-\";\n-                c_roll.roll(DAY_OF_WEEK_IN_MONTH, true);\n-                test_roll += c_roll.get(DAY_OF_MONTH) + \" \";\n-            }\n-            if (!test_roll.equals(golden_data3)) {\n-                err = true;\n-                System.err.println(\"Wrong roll(DAY_OF_WEEK_IN_MONTH) transition: got \"\n-                        + test_roll + \"expected \" + golden_data3);\n-            }\n-        } finally {\n-            Locale.setDefault(savedLocale);\n-            TimeZone.setDefault(savedTimeZone);\n-        }\n-\n-        if (err) {\n-            throw new RuntimeException(\"Wrong roll() transition\");\n-        }\n-    }\n-}\n","filename":"test\/jdk\/java\/util\/Calendar\/bug4514831.java","additions":0,"deletions":100,"binary":false,"changes":100,"status":"deleted"}]}