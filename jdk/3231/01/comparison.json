{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -238,3 +238,4 @@\n-  \/\/ Convert \"0 - (x-y)\" into \"y-x\"\n-  if( t1 == TypeInt::ZERO && op2 == Op_SubI )\n-    return new SubINode( in2->in(2), in2->in(1) );\n+  \/\/ Convert \"0 - (x-y)\" into \"y-x\", leave the double negation \"-(-y)\" to SubNode::Identity().\n+  if (t1 == TypeInt::ZERO && op2 == Op_SubI && phase->type(in2->in(1)) != TypeInt::ZERO) {\n+    return new SubINode(in2->in(2), in2->in(1));\n+  }\n@@ -376,3 +377,4 @@\n-  \/\/ Convert \"0 - (x-y)\" into \"y-x\"\n-  if( phase->type( in1 ) == TypeLong::ZERO && op2 == Op_SubL )\n-    return new SubLNode( in2->in(2), in2->in(1) );\n+  \/\/ Convert \"0 - (x-y)\" into \"y-x\", leave the double negation \"-(-y)\" to SubNode::Identity.\n+  if (t1 == TypeLong::ZERO && op2 == Op_SubL && phase->type(in2->in(1)) != TypeLong::ZERO) {\n+    return new SubLNode(in2->in(2), in2->in(1));\n+  }\n","filename":"src\/hotspot\/share\/opto\/subnode.cpp","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"}]}