{"files":[{"patch":"@@ -358,0 +358,1 @@\n+  address last_java_pc = jfa->last_Java_pc();\n@@ -359,2 +360,2 @@\n-    \/\/ Capture _last_Java_pc (if needed) and mark anchor walkable.\n-    jfa->capture_last_Java_pc();\n+    \/\/ Capture _last_Java_pc (if needed)\n+    last_java_pc = jfa->obtain_last_Java_pc();\n@@ -364,2 +365,1 @@\n-  vmassert(jfa->last_Java_pc() != NULL, \"not walkable\");\n-  frame fr(jfa->last_Java_sp(), jfa->last_Java_fp(), jfa->last_Java_pc());\n+  frame fr(jfa->last_Java_sp(), jfa->last_Java_fp(), last_java_pc);\n@@ -853,1 +853,1 @@\n-  vmassert(_last_Java_pc == NULL || _last_Java_pc == (address)_last_Java_sp[-1], \"already walkable\");\n+  vmassert(_last_Java_pc == NULL, \"already walkable\");\n@@ -856,0 +856,5 @@\n+\n+address JavaFrameAnchor::obtain_last_Java_pc() const {\n+  vmassert(_last_Java_sp != NULL, \"no last frame set\");\n+  return (address)_last_Java_sp[-1];\n+}\n","filename":"src\/hotspot\/cpu\/aarch64\/frame_aarch64.cpp","additions":10,"deletions":5,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -70,0 +70,1 @@\n+  address obtain_last_Java_pc(void) const;\n","filename":"src\/hotspot\/cpu\/aarch64\/javaFrameAnchor_aarch64.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -341,0 +341,1 @@\n+  address last_java_pc = jfa->last_Java_pc();\n@@ -342,2 +343,2 @@\n-    \/\/ Capture _last_Java_pc (if needed) and mark anchor walkable.\n-    jfa->capture_last_Java_pc();\n+    \/\/ Capture _last_Java_pc (if needed)\n+    last_java_pc = jfa->obtain_last_Java_pc();\n@@ -347,2 +348,1 @@\n-  vmassert(jfa->last_Java_pc() != NULL, \"not walkable\");\n-  frame fr(jfa->last_Java_sp(), jfa->last_Java_fp(), jfa->last_Java_pc());\n+  frame fr(jfa->last_Java_sp(), jfa->last_Java_fp(), last_java_pc);\n@@ -695,1 +695,1 @@\n-  vmassert(_last_Java_pc == NULL || _last_Java_pc == (address)_last_Java_sp[-1], \"already walkable\");\n+  vmassert(_last_Java_pc == NULL, \"already walkable\");\n@@ -698,0 +698,5 @@\n+\n+address JavaFrameAnchor::obtain_last_Java_pc() const {\n+  vmassert(_last_Java_sp != NULL, \"no last frame set\");\n+  return (address)_last_Java_sp[-1];\n+}\n","filename":"src\/hotspot\/cpu\/riscv\/frame_riscv.cpp","additions":10,"deletions":5,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -344,0 +344,1 @@\n+  address last_java_pc = jfa->last_Java_pc();\n@@ -345,2 +346,2 @@\n-    \/\/ Capture _last_Java_pc (if needed) and mark anchor walkable.\n-    jfa->capture_last_Java_pc();\n+    \/\/ Capture _last_Java_pc (if needed)\n+    last_java_pc = jfa->obtain_last_Java_pc();\n@@ -350,2 +351,1 @@\n-  vmassert(jfa->last_Java_pc() != NULL, \"not walkable\");\n-  frame fr(jfa->last_Java_sp(), jfa->last_Java_fp(), jfa->last_Java_pc());\n+  frame fr(jfa->last_Java_sp(), jfa->last_Java_fp(), last_java_pc);\n@@ -380,0 +380,1 @@\n+  address last_java_pc = jfa->last_Java_pc();\n@@ -381,2 +382,2 @@\n-    \/\/ Capture _last_Java_pc (if needed) and mark anchor walkable.\n-    jfa->capture_last_Java_pc();\n+    \/\/ Capture _last_Java_pc (if needed)\n+    last_java_pc = jfa->obtain_last_Java_pc();\n@@ -386,2 +387,1 @@\n-  vmassert(jfa->last_Java_pc() != NULL, \"not walkable\");\n-  frame fr(jfa->last_Java_sp(), jfa->last_Java_fp(), jfa->last_Java_pc());\n+  frame fr(jfa->last_Java_sp(), jfa->last_Java_fp(), last_java_pc);\n@@ -737,1 +737,1 @@\n-  vmassert(_last_Java_pc == NULL || _last_Java_pc == (address)_last_Java_sp[-1], \"already walkable\");\n+  vmassert(_last_Java_pc == NULL, \"already walkable\");\n@@ -740,0 +740,5 @@\n+\n+address JavaFrameAnchor::obtain_last_Java_pc() const {\n+  vmassert(_last_Java_sp != NULL, \"no last frame set\");\n+  return (address)_last_Java_sp[-1];\n+}\n","filename":"src\/hotspot\/cpu\/x86\/frame_x86.cpp","additions":14,"deletions":9,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -68,0 +68,1 @@\n+  address obtain_last_Java_pc() const;\n","filename":"src\/hotspot\/cpu\/x86\/javaFrameAnchor_x86.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}