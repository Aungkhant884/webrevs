{"files":[{"patch":"@@ -194,1 +194,1 @@\n-    AC_MSG_NOTICE([configure command line: cd $BINUTILS_DIR && $BINUTILS_SRC\/configure --without-zstd --disable-nls CFLAGS=\"$binutils_cflags\" CC=\"$binutils_cc\" AR=\"$AR\" $binutils_target])\n+    AC_MSG_NOTICE([configure command line: cd $BINUTILS_DIR && $BINUTILS_SRC\/configure --disable-nls CFLAGS=\"$binutils_cflags\" CC=\"$binutils_cc\" AR=\"$AR\" $binutils_target])\n@@ -197,1 +197,1 @@\n-    $BINUTILS_SRC\/configure --without-zstd --disable-nls CFLAGS=\"$binutils_cflags\" CC=\"$binutils_cc\" AR=\"$AR\" $binutils_target\n+    $BINUTILS_SRC\/configure --disable-nls CFLAGS=\"$binutils_cflags\" CC=\"$binutils_cc\" AR=\"$AR\" $binutils_target\n@@ -264,0 +264,17 @@\n+  AC_MSG_CHECKING([Checking binutils API])\n+  if test -n \"$BINUTILS_SRC\"; then\n+    include_dis=\"#include \\\"$BINUTILS_SRC\/include\/dis-asm.h\\\"\"\n+  else\n+    include_dis=\"#include \\\"$BINUTILS_DIR\/include\/dis-asm.h\\\"\"\n+  fi\n+\n+  AC_COMPILE_IFELSE([AC_LANG_PROGRAM([$include_dis],[[void foo() {init_disassemble_info(0, 0, 0, 0);}]])],\n+    [\n+      AC_MSG_RESULT([New API])\n+      HSDIS_CFLAGS=\"$HSDIS_CFLAGS -DBINUTILS_NEW_API\"\n+    ],\n+    [\n+      AC_MSG_RESULT([Old API])\n+    ]\n+  )\n+\n","filename":"make\/autoconf\/lib-hsdis.m4","additions":19,"deletions":2,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -62,1 +62,0 @@\n-#include <bfdver.h>\n@@ -562,1 +561,1 @@\n-#if BFD_VERSION >= 239000000\n+#ifdef BINUTILS_NEW_API\n@@ -583,1 +582,1 @@\n-#if BFD_VERSION >= 239000000\n+#ifdef BINUTILS_NEW_API\n","filename":"src\/utils\/hsdis\/binutils\/hsdis-binutils.c","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"}]}