{"files":[{"patch":"@@ -56,2 +56,4 @@\n-            byte[] magic = new byte[4];\n-            in.read(magic);\n+            byte[] magic = in.readNBytes(4);\n+            if (magic.length != 4) {\n+                throw new IOException(\"Header expected to be of length 4, but was \" + magic.length);\n+            }\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/jmod\/JmodFile.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -201,1 +201,1 @@\n-                    .call().assertFailure(\"Error: java.io.IOException: Invalid JMOD file\");\n+                    .call().assertFailure(\"Header expected to be of length 4, but was 0\");\n","filename":"test\/jdk\/tools\/jlink\/JLinkNegativeTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}