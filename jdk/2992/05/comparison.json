{"files":[{"patch":"@@ -28,1 +28,0 @@\n-import java.io.BufferedInputStream;\n@@ -55,2 +54,1 @@\n-        try (InputStream in = Files.newInputStream(file);\n-             BufferedInputStream bis = new BufferedInputStream(in)) {\n+        try (InputStream in = Files.newInputStream(file)) {\n@@ -58,2 +56,4 @@\n-            byte[] magic = new byte[4];\n-            bis.read(magic);\n+            byte[] magic = in.readNBytes(4);\n+            if (magic.length != 4) {\n+                throw new IOException(\"Invalid JMOD file: \" + file);\n+            }\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/jmod\/JmodFile.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -30,1 +30,0 @@\n-import java.io.BufferedInputStream;\n@@ -55,4 +54,2 @@\n-        InputStream is =\n-            new BufferedInputStream(new ByteArrayInputStream(imagedata,\n-                                                             imageoffset,\n-                                                             imagelength));\n+        InputStream is = new ByteArrayInputStream(imagedata, imageoffset,\n+                imagelength);\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/ByteArrayImageSource.java","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"}]}