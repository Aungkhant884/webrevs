{"files":[{"patch":"@@ -73,17 +73,0 @@\n-size_t MallocMemorySnapshot::thread_count() const {\n-  if (ThreadStackTracker::track_as_vm()) {\n-    return _thread_count;\n-  } else {\n-    assert(_thread_count == 0, \"_thread_count can not be used if ThreadStackTracker::track_as_vm() == false\");\n-    return by_type(mtThreadStack)->malloc_count();\n-  }\n-}\n-\n-void MallocMemorySnapshot::snapshot_thread_count() {\n-  if (ThreadStackTracker::track_as_vm()) {\n-    _thread_count = ThreadStackTracker::thread_count();\n-  } else {\n-    \/\/ Thread count will be reported as malloc count for mtThreadStack.\n-  }\n-}\n-\n","filename":"src\/hotspot\/share\/services\/mallocTracker.cpp","additions":0,"deletions":17,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -155,3 +155,0 @@\n-  \/\/ Used only for ThreadStackTracker::track_as_vm() == true to report thread\n-  \/\/ count diff during \"jcmd <pid> VM.native_memory summary.diff\" correctly.\n-  size_t            _thread_count;\n@@ -160,2 +157,0 @@\n-  MallocMemorySnapshot() : _thread_count(0) {  }\n-\n@@ -189,3 +184,0 @@\n-  size_t thread_count() const;\n-  void snapshot_thread_count();\n-\n@@ -253,1 +245,0 @@\n-     s->snapshot_thread_count();\n","filename":"src\/hotspot\/share\/services\/mallocTracker.hpp","additions":0,"deletions":9,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -193,0 +193,1 @@\n+  _thread_count = ThreadStackTracker::thread_count();\n","filename":"src\/hotspot\/share\/services\/memBaseline.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -67,0 +67,1 @@\n+  size_t                 _thread_count;\n@@ -87,1 +88,1 @@\n-    _instance_class_count(0), _array_class_count(0),\n+    _instance_class_count(0), _array_class_count(0), _thread_count(0),\n@@ -174,1 +175,1 @@\n-    return _malloc_memory_snapshot.thread_count();\n+    return _thread_count;\n@@ -183,0 +184,1 @@\n+    _thread_count = 0;\n","filename":"src\/hotspot\/share\/services\/memBaseline.hpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -55,1 +55,1 @@\n-    _thread_count ++;\n+    _thread_count++;\n@@ -64,0 +64,1 @@\n+      _thread_count++;\n@@ -84,0 +85,1 @@\n+      _thread_count--;\n","filename":"src\/hotspot\/share\/services\/threadStackTracker.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"}]}