{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -4040,2 +4040,11 @@\n-  \/\/ Print the name of the klass.\n-  klass()->print_name_on(st);\n+\n+  if (_ptr == Constant && (WizardMode || Verbose)) {\n+    bool saved = st->is_suppress_cr();\n+    st->set_suppress_cr(true);\n+    const_oop()->print_oop(st);\n+    st->set_suppress_cr(saved);\n+  }\n+  else {\n+    \/\/ Print the name of the klass.\n+    klass()->print_name_on(st);\n+  }\n@@ -4044,5 +4053,1 @@\n-  case Constant:\n-    \/\/ TO DO: Make CI print the hex address of the underlying oop.\n-    if (WizardMode || Verbose) {\n-      const_oop()->print_oop(st);\n-    }\n+  case Constant: \/* fall-through *\/\n","filename":"src\/hotspot\/share\/opto\/type.cpp","additions":13,"deletions":8,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,0 +49,1 @@\n+  _suppress_cr = false;\n@@ -59,0 +60,1 @@\n+  _suppress_cr = false;\n@@ -157,1 +159,1 @@\n-  do_vsnprintf_and_write(format, ap, true);\n+  do_vsnprintf_and_write(format, ap, !_suppress_cr);\n@@ -166,1 +168,1 @@\n-  do_vsnprintf_and_write(format, argptr, true);\n+  do_vsnprintf_and_write(format, argptr, !_suppress_cr);\n@@ -209,1 +211,3 @@\n-  this->write(\"\\n\", 1);\n+  if (!_suppress_cr) {\n+    this->write(\"\\n\", 1);\n+  }\n","filename":"src\/hotspot\/share\/utilities\/ostream.cpp","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -53,0 +53,1 @@\n+   bool _suppress_cr;\/\/ suppress all CRs\n@@ -90,0 +91,2 @@\n+   int newlines() const { return _newlines; }\n+   bool is_suppress_cr() const { return _suppress_cr; }\n@@ -93,0 +96,1 @@\n+   void set_suppress_cr(bool suppress) { _suppress_cr = suppress; }\n","filename":"src\/hotspot\/share\/utilities\/ostream.hpp","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"}]}