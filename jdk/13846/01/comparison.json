{"files":[{"patch":"@@ -1172,3 +1172,8 @@\n-        long secsDiff = Math.subtractExact(end.seconds, seconds);\n-        long totalMicros = Math.multiplyExact(secsDiff, MICROS_PER_SECOND);\n-        return Math.addExact(totalMicros, (end.nanos - nanos) \/ 1000);\n+        long microsDiff = Math.multiplyExact(end.seconds - seconds, MICROS_PER_SECOND);\n+        int nanosDiff = end.nanos - nanos;\n+        if (microsDiff > 0 && nanosDiff < 0) {\n+            return (microsDiff - 1_000_000) + (nanosDiff + 1_000_000_000) \/ 1_000;\n+        } else if (microsDiff < 0 && nanosDiff > 0) {\n+            return (microsDiff + 1_000_000) + (nanosDiff - 1_000_000_000) \/ 1_000;\n+        }\n+        return Math.addExact(microsDiff, nanosDiff \/ 1_000);\n@@ -1178,3 +1183,8 @@\n-        long secsDiff = Math.subtractExact(end.seconds, seconds);\n-        long totalMillis = Math.multiplyExact(secsDiff, MILLIS_PER_SECOND);\n-        return Math.addExact(totalMillis, (end.nanos - nanos) \/ 1000_000);\n+        long millisDiff = Math.multiplyExact(end.seconds - seconds, MILLIS_PER_SECOND);\n+        int nanosDiff = end.nanos - nanos;\n+        if (millisDiff > 0 && nanosDiff < 0) {\n+            return (millisDiff - 1_000) + (nanosDiff + 1_000_000_000) \/ 1_000_000;\n+        } else if (millisDiff < 0 && nanosDiff > 0) {\n+            return (millisDiff + 1_000) + (nanosDiff - 1_000_000_000) \/ 1_000_000;\n+        }\n+        return Math.addExact(millisDiff, nanosDiff \/ 1_000_000);\n@@ -1185,1 +1195,1 @@\n-        long nanosDiff = end.nanos - nanos;\n+        int nanosDiff = end.nanos - nanos;\n","filename":"src\/java.base\/share\/classes\/java\/time\/Instant.java","additions":17,"deletions":7,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -116,1 +116,1 @@\n- * @bug 8133022\n+ * @bug 8133022 8307466\n@@ -1757,0 +1757,60 @@\n+                {5, 650_000_000, 5, 650_999_666, MILLIS, 0L},\n+                {5, 999_777, 6, 0, MILLIS, 999L},\n+                {5, 999_888, 6, 1000000, MILLIS, 1000L},\n+\n+                {5, 650_000_000, 3, 650_000_000, MILLIS, -2_000L},\n+                {5, 650_000_000, 4, 650_000_000, MILLIS, -1_000L},\n+                {5, 650_000_000, 5, 650_000_000, MILLIS, 0},\n+                {5, 650_000_000, 6, 650_000_000, MILLIS, 1_000L},\n+                {5, 650_000_000, 7, 650_000_000, MILLIS, 2_000L},\n+\n+                {5, 650_000_000, 3, 0, MILLIS, -2_650L},\n+                {5, 650_000_000, 4, 0, MILLIS, -1_650L},\n+                {5, 650_000_000, 5, 0, MILLIS, -650L},\n+                {5, 650_000_000, 6, 0, MILLIS, 350L},\n+                {5, 650_000_000, 7, 0, MILLIS, 1_350L},\n+\n+                {5, 650_000_000, -1, 950_000_000, MILLIS, -5_700L},\n+                {5, 650_000_000, 0, 950_000_000, MILLIS, -4_700L},\n+                {5, 650_000_000, 3, 950_000_000, MILLIS, -1_700L},\n+                {5, 650_000_000, 4, 950_000_000, MILLIS, -700L},\n+                {5, 650_000_000, 5, 950_000_000, MILLIS, 300L},\n+                {5, 650_000_000, 6, 950_000_000, MILLIS, 1_300L},\n+                {5, 650_000_000, 7, 950_000_000, MILLIS, 2_300L},\n+\n+                {5, 650_000_000, 4, 50_000_000, MILLIS, -1_600L},\n+                {5, 650_000_000, 5, 50_000_000, MILLIS, -600L},\n+                {5, 650_000_000, 6, 50_000_000, MILLIS, 400L},\n+                {5, 650_000_000, 7, 50_000_000, MILLIS, 1_400L},\n+                {5, 650_000_000, 8, 50_000_000, MILLIS, 2_400L},\n+\n+                {5, 650_000_000, 5, 650_999_000, MICROS, 999L},\n+                {0, 999_000, 1, 0, MICROS, 999_001L},\n+                {0, 999_000, 1, 1000000, MICROS, 1000_001L},\n+\n+                {5, 650_000_000, 3, 650_000_000, MICROS, -2_000_000L},\n+                {5, 650_000_000, 4, 650_000_000, MICROS, -1_000_000L},\n+                {5, 650_000_000, 5, 650_000_000, MICROS, 0},\n+                {5, 650_000_000, 6, 650_000_000, MICROS, 1_000_000L},\n+                {5, 650_000_000, 7, 650_000_000, MICROS, 2_000_000L},\n+\n+                {5, 650_000_000, 3, 0, MICROS, -2_650_000L},\n+                {5, 650_000_000, 4, 0, MICROS, -1_650_000L},\n+                {5, 650_000_000, 5, 0, MICROS, -650_000L},\n+                {5, 650_000_000, 6, 0, MICROS, 350_000L},\n+                {5, 650_000_000, 7, 0, MICROS, 1_350_000L},\n+\n+                {5, 650_000_000, -1, 950_000_000, MICROS, -5_700_000L},\n+                {5, 650_000_000, 0, 950_000_000, MICROS, -4_700_000L},\n+                {5, 650_000_000, 3, 950_000_000, MICROS, -1_700_000L},\n+                {5, 650_000_000, 4, 950_000_000, MICROS, -700_000L},\n+                {5, 650_000_000, 5, 950_000_000, MICROS, 300_000L},\n+                {5, 650_000_000, 6, 950_000_000, MICROS, 1_300_000L},\n+                {5, 650_000_000, 7, 950_000_000, MICROS, 2_300_000L},\n+\n+                {5, 650_000_000, 4, 50_000_000, MICROS, -1_600_000L},\n+                {5, 650_000_000, 5, 50_000_000, MICROS, -600_000L},\n+                {5, 650_000_000, 6, 50_000_000, MICROS, 400_000L},\n+                {5, 650_000_000, 7, 50_000_000, MICROS, 1_400_000L},\n+                {5, 650_000_000, 8, 50_000_000, MICROS, 2_400_000L},\n+\n","filename":"test\/jdk\/java\/time\/tck\/java\/time\/TCKInstant.java","additions":61,"deletions":1,"binary":false,"changes":62,"status":"modified"}]}