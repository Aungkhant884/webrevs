{"files":[{"patch":"@@ -65,2 +65,1 @@\n-    private int implRead(byte[] b, int off, int len) throws IOException {\n-        int timeout = timeoutSupplier.getAsInt();\n+    private int implRead(byte[] b, int off, int len, int timeout) throws IOException {\n@@ -77,0 +76,1 @@\n+        int timeout = timeoutSupplier.getAsInt();\n@@ -78,1 +78,1 @@\n-            return implRead(b, off, len);\n+            return implRead(b, off, len, timeout);\n@@ -81,2 +81,2 @@\n-        int n = implRead(b, off, len);\n-        SocketReadEvent.offer(start, n, sc.remoteAddress(), timeoutSupplier.getAsInt());\n+        int n = implRead(b, off, len, timeout);\n+        SocketReadEvent.offer(start, n, sc.remoteAddress(), timeout);\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/ch\/SocketInputStream.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -31,0 +31,2 @@\n+import java.net.InetAddress;\n+import java.net.InetSocketAddress;\n@@ -68,1 +70,1 @@\n-            try (ServerSocketChannel ss = ServerSocketChannel.open()) {\n+            try (ServerSocketChannel ssc = ServerSocketChannel.open()) {\n@@ -73,2 +75,3 @@\n-                ss.socket().setReuseAddress(true);\n-                ss.socket().bind(null);\n+                ssc.socket().setReuseAddress(true);\n+                InetAddress lb = InetAddress.getLoopbackAddress();\n+                ssc.bind(new InetSocketAddress(lb, 0));\n@@ -80,1 +83,3 @@\n-                        try (SocketChannel sc = ss.accept(); Socket s = sc.socket(); InputStream is = s.getInputStream()) {\n+                        try (SocketChannel sc = ssc.accept(); Socket s = sc.socket();\n+                             InputStream is = s.getInputStream()) {\n+\n@@ -103,1 +108,3 @@\n-                try (SocketChannel sc = SocketChannel.open(ss.socket().getLocalSocketAddress()); Socket s = sc.socket(); OutputStream os = s.getOutputStream()) {\n+                try (SocketChannel sc = SocketChannel.open(ssc.getLocalAddress());\n+                     Socket s = sc.socket(); OutputStream os = s.getOutputStream()) {\n+\n","filename":"test\/jdk\/jdk\/jfr\/event\/io\/TestSocketAdapterEvents.java","additions":12,"deletions":5,"binary":false,"changes":17,"status":"modified"}]}