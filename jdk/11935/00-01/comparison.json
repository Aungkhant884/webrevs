{"files":[{"patch":"@@ -270,1 +270,1 @@\n-  sprintf(ver_str, \"%d\", ATTACH_PROTOCOL_VER);\n+  os::snprintf_checked(ver_str, sizeof(ver_str), \"%d\", ATTACH_PROTOCOL_VER);\n@@ -315,1 +315,1 @@\n-            sprintf(msg, \"%d\\n\", ATTACH_ERROR_BADVERSION);\n+            os::snprintf_checked(msg, sizeof(msg), \"%d\\n\", ATTACH_ERROR_BADVERSION);\n@@ -445,1 +445,1 @@\n-  sprintf(msg, \"%d\\n\", result);\n+  os::snprintf_checked(msg, sizeof(msg), \"%d\\n\", result);\n@@ -548,1 +548,1 @@\n-  sprintf(fn, \".attach_pid%d\", os::current_process_id());\n+  os::snprintf_checked(fn, sizeof(fn), \".attach_pid%d\", os::current_process_id());\n","filename":"src\/hotspot\/os\/aix\/attachListener_aix.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -526,1 +526,1 @@\n-  \/\/ Buffer that fits several sprintfs.\n+  \/\/ Buffer that fits several snprintfs.\n@@ -574,2 +574,3 @@\n-  char *ld_library_path = NEW_C_HEAP_ARRAY(char, strlen(v) + 1 + sizeof(DEFAULT_LIBPATH) + 1, mtInternal);\n-  sprintf(ld_library_path, \"%s%s\" DEFAULT_LIBPATH, v, v_colon);\n+  size_t pathsize = strlen(v) + 1 + sizeof(DEFAULT_LIBPATH) + 1;\n+  char *ld_library_path = NEW_C_HEAP_ARRAY(char, pathsize, mtInternal);\n+  os::snprintf_checked(ld_library_path, pathsize, \"%s%s\" DEFAULT_LIBPATH, v, v_colon);\n@@ -580,1 +581,1 @@\n-  sprintf(buf, \"%s\" EXTENSIONS_DIR, Arguments::get_java_home());\n+  os::snprintf_checked(buf, bufsize, \"%s\" EXTENSIONS_DIR, Arguments::get_java_home());\n","filename":"src\/hotspot\/os\/aix\/os_aix.cpp","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -251,1 +251,1 @@\n-  sprintf(ver_str, \"%d\", ATTACH_PROTOCOL_VER);\n+  os::snprintf_checked(ver_str, sizeof(ver_str), \"%d\", ATTACH_PROTOCOL_VER);\n@@ -294,1 +294,1 @@\n-            sprintf(msg, \"%d\\n\", ATTACH_ERROR_BADVERSION);\n+            os::snprintf_checked(msg, sizeof(msg), \"%d\\n\", ATTACH_ERROR_BADVERSION);\n@@ -414,1 +414,1 @@\n-  sprintf(msg, \"%d\\n\", result);\n+  os::snprintf_checked(msg, sizeof(msg), \"%d\\n\", result);\n@@ -516,1 +516,1 @@\n-  sprintf(fn, \".attach_pid%d\", os::current_process_id());\n+  os::snprintf_checked(fn, sizeof(fn), \".attach_pid%d\", os::current_process_id());\n","filename":"src\/hotspot\/os\/linux\/attachListener_linux.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -447,1 +447,1 @@\n-  \/\/ Buffer that fits several sprintfs.\n+  \/\/ Buffer that fits several snprintfs.\n@@ -502,5 +502,3 @@\n-    char *ld_library_path = NEW_C_HEAP_ARRAY(char,\n-                                             strlen(v) + 1 +\n-                                             sizeof(SYS_EXT_DIR) + sizeof(\"\/lib\/\") + sizeof(DEFAULT_LIBPATH) + 1,\n-                                             mtInternal);\n-    sprintf(ld_library_path, \"%s%s\" SYS_EXT_DIR \"\/lib:\" DEFAULT_LIBPATH, v, v_colon);\n+    size_t pathsize = strlen(v) + 1 + sizeof(SYS_EXT_DIR) + sizeof(\"\/lib\/\") + sizeof(DEFAULT_LIBPATH) + 1;\n+    char *ld_library_path = NEW_C_HEAP_ARRAY(char, pathsize, mtInternal);\n+    os::snprintf_checked(ld_library_path, pathsize, \"%s%s\" SYS_EXT_DIR \"\/lib:\" DEFAULT_LIBPATH, v, v_colon);\n@@ -512,1 +510,1 @@\n-  sprintf(buf, \"%s\" EXTENSIONS_DIR \":\" SYS_EXT_DIR EXTENSIONS_DIR, Arguments::get_java_home());\n+  os::snprintf_checked(buf, bufsize, \"%s\" EXTENSIONS_DIR \":\" SYS_EXT_DIR EXTENSIONS_DIR, Arguments::get_java_home());\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":5,"deletions":7,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -385,1 +385,2 @@\n-    sprintf(buf, \"%s%s;%s%s%s\", Arguments::get_java_home(), EXT_DIR,\n+    os::snprintf_checked(buf, sizeof(buf), \"%s%s;%s%s%s\",\n+            Arguments::get_java_home(), EXT_DIR,\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -367,1 +367,1 @@\n-    regalloc->dump_register(n,buf);\n+    regalloc->dump_register(n,buf,sizeof(buf));\n","filename":"src\/hotspot\/share\/opto\/callnode.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2186,1 +2186,1 @@\n-static char *print_reg(OptoReg::Name reg, const PhaseChaitin* pc, char* buf) {\n+static char *print_reg(OptoReg::Name reg, const PhaseChaitin* pc, char* buf, size_t buf_size) {\n@@ -2188,1 +2188,1 @@\n-    sprintf(buf, \"<OptoReg::%d>\", (int)reg);\n+    os::snprintf_checked(buf, buf_size, \"<OptoReg::%d>\", (int)reg);\n@@ -2192,1 +2192,1 @@\n-    sprintf(buf,\"%s + #%d\",OptoReg::regname(OptoReg::c_frame_pointer),\n+    os::snprintf_checked(buf, buf_size, \"%s + #%d\",OptoReg::regname(OptoReg::c_frame_pointer),\n@@ -2199,1 +2199,1 @@\n-char *PhaseChaitin::dump_register(const Node* n, char* buf) const {\n+char *PhaseChaitin::dump_register(const Node* n, char* buf, size_t buf_size) const {\n@@ -2206,1 +2206,1 @@\n-      sprintf(buf,\"L%d\",lidx);  \/\/ No register binding yet\n+      os::snprintf_checked(buf, buf_size, \"L%d\",lidx);  \/\/ No register binding yet\n@@ -2214,1 +2214,1 @@\n-          sprintf(buf,\"L%d\",lidx); \/\/ No register binding yet\n+          os::snprintf_checked(buf, buf_size, \"L%d\",lidx); \/\/ No register binding yet\n@@ -2221,1 +2221,1 @@\n-        sprintf(buf,\"L%d\",lidx); \/\/ No register binding yet\n+        os::snprintf_checked(buf, buf_size, \"L%d\",lidx); \/\/ No register binding yet\n","filename":"src\/hotspot\/share\/opto\/chaitin.cpp","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -806,1 +806,1 @@\n-  char *dump_register(const Node* n, char* buf) const;\n+  char *dump_register(const Node* n, char* buf, size_t buf_size) const;\n","filename":"src\/hotspot\/share\/opto\/chaitin.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -533,1 +533,1 @@\n-        sprintf(buffer, \"P%d\", index);\n+        os::snprintf_checked(buffer, sizeof(buffer), \"P%d\", index);\n@@ -549,1 +549,1 @@\n-          sprintf(buffer, \"%d\", value);\n+          os::snprintf_checked(buffer, sizeof(buffer), \"%d\", value);\n@@ -563,1 +563,1 @@\n-          sprintf(buffer, JLONG_FORMAT, value);\n+          os::snprintf_checked(buffer, sizeof(buffer), JLONG_FORMAT, value);\n@@ -626,1 +626,1 @@\n-      _chaitin->dump_register(node, buffer);\n+      _chaitin->dump_register(node, buffer, sizeof(buffer));\n","filename":"src\/hotspot\/share\/opto\/idealGraphPrinter.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2280,1 +2280,1 @@\n-    sprintf(buf,\"_\");           \/\/ null\n+    os::snprintf_checked(buf, sizeof(buf), \"_\");           \/\/ null\n@@ -2282,1 +2282,1 @@\n-    sprintf(buf, \"%d\", n->_idx);  \/\/ new node\n+    os::snprintf_checked(buf, sizeof(buf), \"%d\", n->_idx);  \/\/ new node\n@@ -2284,1 +2284,1 @@\n-    sprintf(buf, \"o%d\", n->_idx); \/\/ old node\n+    os::snprintf_checked(buf, sizeof(buf), \"o%d\", n->_idx); \/\/ old node\n@@ -2292,1 +2292,1 @@\n-  sprintf(buf, \"B%d\", b->_pre_order);\n+  os::snprintf_checked(buf, sizeof(buf), \"B%d\", b->_pre_order);\n","filename":"src\/hotspot\/share\/opto\/node.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -130,1 +130,1 @@\n-  virtual char *dump_register( const Node *n, char *buf  ) const = 0;\n+  virtual char *dump_register( const Node *n, char *buf, size_t buf_size) const = 0;\n","filename":"src\/hotspot\/share\/opto\/regalloc.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1677,1 +1677,1 @@\n-static const char* intname(char* buf, jint n) {\n+static const char* intname(char* buf, size_t buf_size, jint n) {\n@@ -1681,1 +1681,1 @@\n-    sprintf(buf, \"min+\" INT32_FORMAT, n - min_jint);\n+    os::snprintf_checked(buf, buf_size, \"min+\" INT32_FORMAT, n - min_jint);\n@@ -1685,1 +1685,1 @@\n-    sprintf(buf, \"max-\" INT32_FORMAT, max_jint - n);\n+    os::snprintf_checked(buf, buf_size, \"max-\" INT32_FORMAT, max_jint - n);\n@@ -1687,1 +1687,1 @@\n-    sprintf(buf, INT32_FORMAT, n);\n+    os::snprintf_checked(buf, buf_size, INT32_FORMAT, n);\n@@ -1696,1 +1696,1 @@\n-    st->print(\"int:%s\", intname(buf, get_con()));\n+    st->print(\"int:%s\", intname(buf, sizeof(buf), get_con()));\n@@ -1706,1 +1706,1 @@\n-    st->print(\"int:>=%s\", intname(buf, _lo));\n+    st->print(\"int:>=%s\", intname(buf, sizeof(buf), _lo));\n@@ -1708,1 +1708,1 @@\n-    st->print(\"int:<=%s\", intname(buf, _hi));\n+    st->print(\"int:<=%s\", intname(buf, sizeof(buf), _hi));\n@@ -1710,1 +1710,1 @@\n-    st->print(\"int:%s..%s\", intname(buf, _lo), intname(buf2, _hi));\n+    st->print(\"int:%s..%s\", intname(buf, sizeof(buf), _lo), intname(buf2, sizeof(buf2), _hi));\n@@ -1943,1 +1943,1 @@\n-static const char* longnamenear(jlong x, const char* xname, char* buf, jlong n) {\n+static const char* longnamenear(jlong x, const char* xname, char* buf, size_t buf_size, jlong n) {\n@@ -1946,1 +1946,1 @@\n-    sprintf(buf, \"%s+\" JLONG_FORMAT, xname, n - x);\n+    os::snprintf_checked(buf, buf_size, \"%s+\" JLONG_FORMAT, xname, n - x);\n@@ -1949,1 +1949,1 @@\n-    sprintf(buf, \"%s-\" JLONG_FORMAT, xname, x - n);\n+    os::snprintf_checked(buf, buf_size, \"%s-\" JLONG_FORMAT, xname, x - n);\n@@ -1956,1 +1956,1 @@\n-static const char* longname(char* buf, jlong n) {\n+static const char* longname(char* buf, size_t buf_size, jlong n) {\n@@ -1961,1 +1961,1 @@\n-    sprintf(buf, \"min+\" JLONG_FORMAT, n - min_jlong);\n+    os::snprintf_checked(buf, buf_size, \"min+\" JLONG_FORMAT, n - min_jlong);\n@@ -1965,1 +1965,1 @@\n-    sprintf(buf, \"max-\" JLONG_FORMAT, max_jlong - n);\n+    os::snprintf_checked(buf, buf_size, \"max-\" JLONG_FORMAT, max_jlong - n);\n@@ -1973,1 +1973,1 @@\n-    sprintf(buf, JLONG_FORMAT, n);\n+    os::snprintf_checked(buf, buf_size, JLONG_FORMAT, n);\n@@ -1982,1 +1982,1 @@\n-    st->print(\"long:%s\", longname(buf, get_con()));\n+    st->print(\"long:%s\", longname(buf, sizeof(buf), get_con()));\n@@ -1984,1 +1984,1 @@\n-    st->print(\"long:>=%s\", longname(buf, _lo));\n+    st->print(\"long:>=%s\", longname(buf, sizeof(buf), _lo));\n@@ -1986,1 +1986,1 @@\n-    st->print(\"long:<=%s\", longname(buf, _hi));\n+    st->print(\"long:<=%s\", longname(buf, sizeof(buf), _hi));\n@@ -1988,1 +1988,1 @@\n-    st->print(\"long:%s..%s\", longname(buf, _lo), longname(buf2, _hi));\n+    st->print(\"long:%s..%s\", longname(buf, sizeof(buf), _lo), longname(buf2,sizeof(buf2),  _hi));\n","filename":"src\/hotspot\/share\/opto\/type.cpp","additions":19,"deletions":19,"binary":false,"changes":38,"status":"modified"}]}