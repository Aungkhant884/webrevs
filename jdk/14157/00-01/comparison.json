{"files":[{"patch":"@@ -28,0 +28,1 @@\n+ * @run main\/othervm MacToRealPathWithSM\n@@ -35,0 +36,1 @@\n+    @SuppressWarnings(\"removal\")\n@@ -36,1 +38,1 @@\n-        String policyFile = args[0];\n+        String policyFile = args.length > 0 ? args[0] : null;\n@@ -41,2 +43,1 @@\n-        System.out.println(\"testSrc: \" + testSrc);\n-        System.out.println(\"tmpDir: \" + tmpDir);\n+        System.out.printf(\"testSrc: %s%ntmpDir:  %s%n\", testSrc, tmpDir);\n@@ -55,3 +56,5 @@\n-        System.setProperty(\"java.security.policy\",\n-            src.resolve(policyFile).toString());\n-        System.setSecurityManager(new SecurityManager());\n+        if (policyFile != null) {\n+            System.setProperty(\"java.security.policy\",\n+                src.resolve(policyFile).toString());\n+            System.setSecurityManager(new SecurityManager());\n+        }\n@@ -59,1 +62,4 @@\n-        \/\/ Derive real path\n+        \/\/ Derive real path. Without the source change for this issue applied,\n+        \/\/ if a SecurityManager is used which does not grant read permission\n+        \/\/ for traversing \"path\" down from its root, an AccessContolException\n+        \/\/ is thrown by UnixPath::toRealPath\n","filename":"test\/jdk\/java\/nio\/file\/Path\/MacToRealPathWithSM.java","additions":13,"deletions":7,"binary":false,"changes":20,"status":"modified"}]}