{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/module\/ArchivedModuleGraph.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -230,1 +230,2 @@\n-                    canArchive = true;\n+                    if (CDS.isDumpingStaticArchive())\n+                        canArchive = true;\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/module\/ModuleBootstrap.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -81,0 +81,22 @@\n+\n+        \/\/ Test case 3)\n+        \/\/ dump an archive with the -m jdk.compiler option\n+        \/\/ run with -Xshare:off without -m option\n+        \/\/ run with archive without -m option\n+        \/\/ the list of modules from both runs should be the same\n+        System.out.println(\"---------------- Test case 3 -----------------\");\n+        output = TestCommon.dump(appJar,\n+                     TestCommon.list(\"PrintSystemModulesApp\"),\n+                     \"-m\", \"jdk.compiler\");\n+        TestCommon.checkDump(output);\n+\n+        output = TestCommon.execOff(\"-cp\", appJar, \"PrintSystemModulesApp\");\n+        output.shouldHaveExitValue(0);\n+        bootModules1 = TestCommon.filterOutLogs(output.getStdout());\n+\n+        output = TestCommon.exec(appJar, \"PrintSystemModulesApp\");\n+        TestCommon.checkExec(output);\n+        if (output.getStderr().contains(\"sharing\")) {\n+            String bootModules2 = TestCommon.filterOutLogs(output.getStdout());\n+            TestCommon.checkOutputStrings(bootModules1, bootModules2, \", \");\n+        }\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/cacheObject\/ArchivedModuleCompareTest.java","additions":23,"deletions":1,"binary":false,"changes":24,"status":"modified"}]}