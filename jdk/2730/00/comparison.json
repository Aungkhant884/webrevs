{"files":[{"patch":"@@ -113,2 +113,2 @@\n-                        if (identifier != null) {\n-                            return identifier;\n+                        if (identifier == null) {\n+                            identifier =  MacAppBundler.getIdentifier(params);\n@@ -116,2 +116,4 @@\n-\n-                        return MacAppBundler.getIdentifier(params);\n+                        if (identifier == null) {\n+                            identifier = APP_NAME.fetchFrom(params);\n+                        }\n+                        return identifier;\n","filename":"src\/jdk.jpackage\/macosx\/classes\/jdk\/jpackage\/internal\/MacAppImageBuilder.java","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -726,1 +726,1 @@\n-                if (isImagePackageType() || TKit.isOSX()) {\n+                if (isImagePackageType() || (TKit.isOSX() && !isRuntime())) {\n@@ -753,1 +753,0 @@\n-        }\n@@ -755,3 +754,4 @@\n-        if (TKit.isOSX()) {\n-            TKit.assertFileExists(appRuntimeDirectory().resolve(\n-                    \"Contents\/MacOS\/libjli.dylib\"));\n+            if (TKit.isOSX()) {\n+                TKit.assertFileExists(appRuntimeDirectory().resolve(\n+                        \"Contents\/MacOS\/libjli.dylib\"));\n+            }\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/JPackageCommand.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -65,1 +65,2 @@\n-            Path dmgImage = mountPoint.resolve(cmd.name() + \".app\");\n+            Path dmgImage = mountPoint.resolve(cmd.name() +\n+                    (cmd.isRuntime() ? \"\" : \".app\"));\n@@ -218,1 +219,1 @@\n-                .resolve(cmd.name() + \".app\");\n+                .resolve(cmd.name() + (cmd.isRuntime() ? \"\" : \".app\"));\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/MacHelper.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -56,2 +56,0 @@\n- * @comment Temporary disable for OSX until functionality implemented\n- * @requires (os.family != \"mac\")\n@@ -71,2 +69,0 @@\n- * @comment Temporary disable for OSX until functionality implemented\n- * @requires (os.family != \"mac\")\n@@ -114,1 +110,5 @@\n-            Set<Path> dstRuntime = listFiles(cmd.appRuntimeDirectory());\n+            Path dest = cmd.appRuntimeDirectory();\n+            if (TKit.isOSX()) {\n+                dest = dest.resolve(\"Contents\/Home\");\n+            }\n+            Set<Path> dstRuntime = listFiles(dest);\n","filename":"test\/jdk\/tools\/jpackage\/share\/RuntimePackageTest.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"}]}