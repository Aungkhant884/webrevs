{"files":[{"patch":"@@ -72,0 +72,3 @@\n+if [ -e $IDEA_OUTPUT ] ; then\n+    rm -r $IDEA_OUTPUT\n+fi\n@@ -227,5 +230,4 @@\n-if [ \"x$CYGPATH\" != \"x\" ] ; then ## CYGPATH may be set in env.cfg\n-  JAVAC_SOURCE_FILE=`$CYGPATH -am $IDEA_OUTPUT\/src\/idea\/IdeaLoggerWrapper.java`\n-  JAVAC_SOURCE_PATH=`$CYGPATH -am $IDEA_OUTPUT\/src`\n-  JAVAC_CLASSES=`$CYGPATH -am $CLASSES`\n-  JAVAC_CP=`$CYGPATH -am $CP`\n+# If we have a Windows boot JDK, we need a .exe suffix\n+if [ -e \"$BOOT_JDK\/bin\/java.exe\" ] ; then\n+  JAVAC=javac.exe\n+else \n@@ -233,1 +235,6 @@\n-elif [ \"x$WSL_DISTRO_NAME\" != \"x\" ]; then\n+fi\n+\n+# If we are on WSL, the boot JDK might be either Windows or Linux,\n+# and we need to use realpath instead of CYGPATH to make javac work on both.\n+# We need to handle this case first since CYGPATH might be set on WSL.\n+if [ \"x$WSL_DISTRO_NAME\" != \"x\" ]; then\n@@ -240,1 +247,5 @@\n-  JAVAC=javac.exe\n+elif [ \"x$CYGPATH\" != \"x\" ] ; then ## CYGPATH may be set in env.cfg\n+  JAVAC_SOURCE_FILE=`$CYGPATH -am $IDEA_OUTPUT\/src\/idea\/IdeaLoggerWrapper.java`\n+  JAVAC_SOURCE_PATH=`$CYGPATH -am $IDEA_OUTPUT\/src`\n+  JAVAC_CLASSES=`$CYGPATH -am $CLASSES`\n+  JAVAC_CP=`$CYGPATH -am $CP`\n@@ -246,6 +257,0 @@\n-  JAVAC=javac\n-fi\n-\n-EXE_SUFFIX=\n-if [ \"x$WSL_DISTRO_NAME\" != \"x\" ]; then\n-  EXE_SUFFIX=.exe\n@@ -254,1 +259,1 @@\n-$BOOT_JDK\/bin\/$JAVAC$EXE_SUFFIX -d $JAVAC_CLASSES -sourcepath $JAVAC_SOURCE_PATH -cp $JAVAC_CP $JAVAC_SOURCE_FILE\n+$BOOT_JDK\/bin\/$JAVAC -d $JAVAC_CLASSES -sourcepath $JAVAC_SOURCE_PATH -cp $JAVAC_CP $JAVAC_SOURCE_FILE\n","filename":"bin\/idea.sh","additions":19,"deletions":14,"binary":false,"changes":33,"status":"modified"}]}