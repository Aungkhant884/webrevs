{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -254,1 +254,2 @@\n-        java.net.http;\n+        java.net.http,\n+        jdk.naming.dns;\n","filename":"src\/java.base\/share\/classes\/module-info.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -54,0 +54,1 @@\n+import jdk.internal.ref.CleanerFactory;\n@@ -161,0 +162,10 @@\n+        \/\/ register a cleaning action to close the channel\n+        \/\/ selector when this DNS client becomes phantom reachable\n+        Selector sel = udpChannelSelector;\n+        CleanerFactory.cleaner().register(this, () -> {\n+            try {\n+                sel.close();\n+            } catch (IOException ignore) {\n+            }\n+        });\n+\n@@ -176,5 +187,0 @@\n-    @SuppressWarnings(\"removal\")\n-    protected void finalize() {\n-        close();\n-    }\n-\n","filename":"src\/jdk.naming.dns\/share\/classes\/com\/sun\/jndi\/dns\/DnsClient.java","additions":12,"deletions":6,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -1053,5 +1053,0 @@\n-    \/\/ Finalizer not needed since it's safe to leave ctx unclosed.\n-\/\/  protected void finalize() {\n-\/\/      close();\n-\/\/  }\n-\n","filename":"src\/jdk.naming.dns\/share\/classes\/com\/sun\/jndi\/dns\/DnsContext.java","additions":1,"deletions":6,"binary":false,"changes":7,"status":"modified"}]}