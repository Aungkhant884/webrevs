{"files":[{"patch":"@@ -209,5 +209,5 @@\n-            StackTraceElement[] stacktrace = t.getStackTrace();\n-            for (int i = 0; i < stacktrace.length; i++) {\n-                StackTraceElement ste = stacktrace[i];\n-                out.println(INDENT + \"at \" + ste.toString());\n-            }\n+                StackTraceElement[] stacktrace = t.getStackTrace();\n+                for (int i = 0; i < stacktrace.length; i++) {\n+                        StackTraceElement ste = stacktrace[i];\n+                        out.println(INDENT + \"at \" + ste.toString());\n+                }\n@@ -232,1 +232,1 @@\n-        \/\/ Sleep time increased to help avoid spurious failures.\n+        \/\/ These values should avoid spurious failures.\n@@ -238,2 +238,2 @@\n-                long ctime = System.currentTimeMillis();\n-                long ctime2 = 0;\n+                long startTime = System.currentTimeMillis();\n+                long elapsedTime = 0;\n@@ -242,7 +242,7 @@\n-                            \/\/ Failed to see desired state, give info to help diagnose the isuse.\n-                            \/\/ Show the thread, and fail with Exception showing retries and time taken.\n-                            ctime2 = System.currentTimeMillis() - ctime;\n-                            System.err.println(\"waitThreadState: problem thread: \" + thread);\n-                            printStackTrace(System.err, thread);\n-                            throw new TestFailure(\"Thread \" + thread + \" with current state \" + thread.getState() + \" did not reach state \"\n-                                                  + state + \" with number of retries: \" + retries + \", time: \" + ctime2);\n+                                \/\/ Failed to see desired state, give info to help diagnose the isuse.\n+                                \/\/ Show the thread, and fail with Exception showing retries and time taken.\n+                                elapsedTime = System.currentTimeMillis() - startTime;\n+                                System.err.println(\"waitThreadState: problem thread: \" + thread);\n+                                printStackTrace(System.err, thread);\n+                                throw new TestFailure(\"Thread \" + thread + \" with current state \" + thread.getState() + \" did not reach state \"\n+                                                      + state + \" with number of retries: \" + retries + \", time: \" + elapsedTime);\n@@ -251,1 +251,1 @@\n-                            Thread.sleep(waitThreadStateSleepTime);\n+                                Thread.sleep(waitThreadStateSleepTime);\n@@ -256,2 +256,2 @@\n-                ctime2 = System.currentTimeMillis() - ctime;\n-                System.out.println(\"waitThreadState: OK. retries: \" + retries + \" time: \" + ctime2);\n+                elapsedTime = System.currentTimeMillis() - startTime;\n+                System.out.println(\"waitThreadState: OK. retries: \" + retries + \" time: \" + elapsedTime);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/monitoring\/share\/thread\/ThreadUtils.java","additions":18,"deletions":18,"binary":false,"changes":36,"status":"modified"}]}