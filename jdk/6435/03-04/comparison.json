{"files":[{"patch":"@@ -177,1 +177,1 @@\n-        return getPathForWin32Calls(false);\n+        return getPathForWin32Calls(0);\n@@ -180,2 +180,5 @@\n-    String getPathWithPrefixForWin32Calls() throws WindowsException {\n-        return getPathForWin32Calls(true);\n+    \/\/ This method will prefix long paths with \\\\?\\ or \\\\?\\UNC if\n+    \/\/ path.length + pad > MAX_PATH. The parameter represents the\n+    \/\/ length by which the path will be extended.\n+    String getPathWithPadForWin32Calls(int pad) throws WindowsException {\n+        return getPathForWin32Calls(Math.max(0, pad));\n@@ -184,4 +187,5 @@\n-    private String getPathForWin32Calls(boolean forceLongPrefix) throws WindowsException {\n-        \/\/ short absolute paths can be used directly\n-        if (isAbsolute() && path.length() <= MAX_PATH)\n-            return forceLongPrefix ? addPrefix(path) : path;\n+    private String getPathForWin32Calls(int pad) throws WindowsException {\n+        if (pad == 0) {\n+            \/\/ short absolute paths can be used directly\n+            if (isAbsolute() && path.length() <= MAX_PATH)\n+                return path;\n@@ -189,2 +193,1 @@\n-        \/\/ return cached value if available\n-        if (!forceLongPrefix) {\n+            \/\/ return cached value if available\n@@ -207,1 +210,1 @@\n-        if (resolved.length() > MAX_PATH || forceLongPrefix) {\n+        if (resolved.length() + pad > MAX_PATH) {\n@@ -218,1 +221,1 @@\n-        if (!forceLongPrefix && type != WindowsPathType.DRIVE_RELATIVE) {\n+        if (pad == 0 && type != WindowsPathType.DRIVE_RELATIVE) {\n","filename":"src\/java.base\/windows\/classes\/sun\/nio\/fs\/WindowsPath.java","additions":14,"deletions":11,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -64,1 +64,2 @@\n-        return join(file.getPathWithPrefixForWin32Calls(), name);\n+        int pad = 1 + name.length();  \/\/ colon + name length\n+        return join(file.getPathWithPadForWin32Calls(pad), name);\n","filename":"src\/java.base\/windows\/classes\/sun\/nio\/fs\/WindowsUserDefinedFileAttributeView.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}