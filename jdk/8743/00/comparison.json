{"files":[{"patch":"@@ -26,0 +26,1 @@\n+ * @bug 8284161 8286788\n@@ -27,0 +28,1 @@\n+ * @enablePreview\n@@ -29,2 +31,1 @@\n- * @compile --enable-preview -source ${jdk.version} ThreadAPI.java\n- * @run testng\/othervm\/timeout=300 --enable-preview ThreadAPI\n+ * @run testng\/othervm\/timeout=300 ThreadAPI\n@@ -1900,1 +1901,0 @@\n-        Thread.sleep(200);  \/\/ give time for thread to block\n@@ -1902,3 +1902,4 @@\n-            assertTrue(thread.getState() == Thread.State.RUNNABLE);\n-            StackTraceElement[] stack = thread.getStackTrace();\n-            assertTrue(contains(stack, \"select\"));\n+            while (!contains(thread.getStackTrace(), \"select\")) {\n+                assertTrue(thread.isAlive());\n+                Thread.sleep(20);\n+            }\n@@ -1912,1 +1913,1 @@\n-     * Test Thread::getStackTrace on running thread waiting in Object.wait.\n+     * Test Thread::getStackTrace on thread waiting in Object.wait.\n","filename":"test\/jdk\/java\/lang\/Thread\/virtual\/ThreadAPI.java","additions":8,"deletions":7,"binary":false,"changes":15,"status":"modified"}]}