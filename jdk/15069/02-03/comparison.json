{"files":[{"patch":"@@ -25,2 +25,0 @@\n-import javax.swing.JFrame;\n-import javax.swing.SwingUtilities;\n@@ -28,3 +26,0 @@\n-import javax.swing.WindowConstants;\n-\n-import java.awt.BorderLayout;\n@@ -32,0 +27,1 @@\n+import java.io.File;\n@@ -38,3 +34,0 @@\n- * @key headful\n- * @library \/java\/awt\/regtesthelpers\n- * @build PassFailJFrame\n@@ -43,1 +36,1 @@\n- * @run main\/manual FileChooserNewFolderLocaleTest\n+ * @run main FileChooserNewFolderLocaleTest\n@@ -47,3 +40,0 @@\n-    static JFrame frame;\n-    static JFileChooser jfc;\n-    static PassFailJFrame passFailJFrame;\n@@ -51,0 +41,2 @@\n+    static String newFolderKey;\n+    static String newFolderSubKey;\n@@ -53,41 +45,4 @@\n-        SwingUtilities.invokeAndWait(new Runnable() {\n-            public void run() {\n-                try {\n-                    initialize();\n-                } catch (Exception e) {\n-                    throw new RuntimeException(e);\n-                }\n-            }\n-        });\n-        passFailJFrame.awaitAndCheck();\n-    }\n-\n-    private static void initialize() throws Exception {\n-        setLocale(\"fr\");\n-        \/\/Initialize the components\n-        final String INSTRUCTIONS = \"\"\"\n-                Instructions to Test:\n-                1. Click on New Folder button to create new Folder.\n-                2. If the created New Folder name is \"Nouveau dossier\"\n-                   (set from bundle_fr properties file) test is PASS.\n-                3. created New Folder name is \"New Folder\" then test is FAIL.\n-                \"\"\";\n-        frame = new JFrame(\"JFileChooser NewFolder Locale test\");\n-        jfc = new JFileChooser();\n-\n-        passFailJFrame = new PassFailJFrame(\"Test Instructions\",\n-                INSTRUCTIONS, 5L, 8, 40);\n-        PassFailJFrame.addTestWindow(frame);\n-        PassFailJFrame.positionTestWindow(frame, PassFailJFrame.Position.HORIZONTAL);\n-\n-        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n-        frame.add(jfc, BorderLayout.CENTER);\n-        frame.pack();\n-        frame.setVisible(true);\n-    }\n-\n-    private static void setLocale(String locale) {\n-        boolean IS_WINDOWS = System.getProperty(\"os.name\").toLowerCase().contains(\"windows\");\n-        String newFolderKey;\n-        String newFolderSubKey;\n-\n+        File newFolderEnglish = null;\n+        File newFolderFrench = null;\n+        boolean IS_WINDOWS =\n+                System.getProperty(\"os.name\").toLowerCase().contains(\"windows\");\n@@ -102,13 +57,58 @@\n-        res = ResourceBundle.getBundle(\"bundle\", new Locale(locale));\n-        UIManager.put(\"FileChooser.acceptAllFileFilterText\", res.getString(\"accept_all\"));\n-        UIManager.put(\"FileChooser.directoryOpenButtonText\", res.getString(\"open_text\"));\n-        UIManager.put(\"FileChooser.openButtonText\", res.getString(\"open_text\"));\n-        UIManager.put(\"FileChooser.saveButtonText\", res.getString(\"save_text\"));\n-        UIManager.put(\"FileChooser.cancelButtonText\", res.getString(\"cancel_text\"));\n-        UIManager.put(\"FileChooser.lookInLabelText\", res.getString(\"file_look\"));\n-        UIManager.put(\"FileChooser.saveInLabelText\", res.getString(\"file_save\"));\n-        UIManager.put(\"FileChooser.fileNameLabelText\", res.getString(\"file_name\"));\n-        UIManager.put(\"FileChooser.filesOfTypeLabelText\", res.getString(\"file_type\"));\n-        UIManager.put(newFolderKey, res.getString(\"new_folder\"));\n-        UIManager.put(newFolderSubKey, res.getString(\"new_folder\")\n-                + \" ({0})\");\n+        try {\n+            JFileChooser fileChooser = new JFileChooser();\n+            File currentDir = new File(\".\");\n+            newFolderEnglish =\n+                    fileChooser.getFileSystemView().createNewFolder(currentDir);\n+\n+            setLocale(\"fr\");\n+            fileChooser = new JFileChooser();\n+            newFolderFrench =\n+                    fileChooser.getFileSystemView().createNewFolder(currentDir);\n+            if( !newFolderFrench.getName().contains\n+                    (UIManager.getString(newFolderKey))) {\n+                throw new RuntimeException(\"Failed to update new Locale\");\n+            }\n+        } finally {\n+            if (newFolderEnglish != null && newFolderEnglish.delete()) {\n+                System.out.println(\"Deleted the file: \" +\n+                        newFolderEnglish.getName());\n+            } else {\n+                System.out.println(\"Failed to delete file : \" +\n+                        newFolderEnglish.getName());\n+            }\n+            if (newFolderFrench != null && newFolderFrench.delete()) {\n+                System.out.println(\"Deleted the file: \" +\n+                        newFolderFrench.getName());\n+            } else {\n+                System.out.println(\"Failed to delete file : \" +\n+                        newFolderFrench.getName());\n+            }\n+        }\n+        System.out.println(\"Test Passed!\");\n+    }\n+\n+    private static void setLocale(String locale) {\n+        res = ResourceBundle.getBundle(\"bundle\",\n+                new Locale(locale));\n+        UIManager.put(\"FileChooser.acceptAllFileFilterText\",\n+                res.getString(\"accept_all\"));\n+        UIManager.put(\"FileChooser.directoryOpenButtonText\",\n+                res.getString(\"open_text\"));\n+        UIManager.put(\"FileChooser.openButtonText\",\n+                res.getString(\"open_text\"));\n+        UIManager.put(\"FileChooser.saveButtonText\",\n+                res.getString(\"save_text\"));\n+        UIManager.put(\"FileChooser.cancelButtonText\",\n+                res.getString(\"cancel_text\"));\n+        UIManager.put(\"FileChooser.lookInLabelText\",\n+                res.getString(\"file_look\"));\n+        UIManager.put(\"FileChooser.saveInLabelText\",\n+                res.getString(\"file_save\"));\n+        UIManager.put(\"FileChooser.fileNameLabelText\",\n+                res.getString(\"file_name\"));\n+        UIManager.put(\"FileChooser.filesOfTypeLabelText\",\n+                res.getString(\"file_type\"));\n+        UIManager.put(newFolderKey,\n+                res.getString(\"new_folder\"));\n+        UIManager.put(newFolderSubKey,\n+                res.getString(\"new_folder\") + \" ({0})\");\n","filename":"test\/jdk\/javax\/swing\/JFileChooser\/NewFolderLocale\/FileChooserNewFolderLocaleTest.java","additions":66,"deletions":66,"binary":false,"changes":132,"status":"modified"}]}