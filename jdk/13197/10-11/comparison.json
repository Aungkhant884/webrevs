{"files":[{"patch":"@@ -51,0 +51,1 @@\n+import jdk.internal.misc.VM;\n@@ -189,0 +190,2 @@\n+        if (!VM.isModuleSystemInited())\n+            throw newInternalError(\"asInterfaceInstance is not supported until module system is initialized\");\n@@ -223,1 +226,1 @@\n-            proxy = lookup.findConstructor(lookup.lookupClass(), methodType(void.class, Lookup.class))\n+            proxy = lookup.findConstructor(lookup.lookupClass(), MT_void_Lookup)\n@@ -225,0 +228,1 @@\n+\n@@ -226,2 +230,0 @@\n-        } catch (Error e) {\n-            throw e;\n@@ -229,1 +231,1 @@\n-            throw new InternalError(\"Cannot create interface instance\", e);\n+            throw uncaughtException(e);\n@@ -265,1 +267,1 @@\n-                var thrown = m.getExceptionTypes();\n+                var thrown = JLRA.getExecutableSharedExceptionTypes(m);\n@@ -309,1 +311,2 @@\n-    private static final MethodTypeDesc MTD_void_Lookup = MethodTypeDesc.of(CD_void, CD_MethodHandles_Lookup);\n+    private static final MethodType MT_void_Lookup = methodType(void.class, Lookup.class);\n+    private static final MethodTypeDesc MTD_void_Lookup = desc(MT_void_Lookup);\n@@ -434,1 +437,1 @@\n-        return cl.describeConstable().orElseThrow(() -> new InternalError(\"Cannot convert class \"\n+        return cl.describeConstable().orElseThrow(() -> newInternalError(\"Cannot convert class \"\n@@ -439,1 +442,1 @@\n-        return mt.describeConstable().orElseThrow(() -> new InternalError(\"Cannot convert method type \"\n+        return mt.describeConstable().orElseThrow(() -> newInternalError(\"Cannot convert method type \"\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/MethodHandleProxies.java","additions":11,"deletions":8,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -26,2 +26,1 @@\n- * @run testng\/othervm -Djdk.invoke.MethodHandleProxies.dumpInterfaceInstances\n- *      test.java.lang.invoke.MethodHandlesProxiesTest\n+ * @run testng test.java.lang.invoke.MethodHandlesProxiesTest\n","filename":"test\/jdk\/java\/lang\/invoke\/MethodHandleProxies\/MethodHandlesProxiesTest.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -27,2 +27,1 @@\n- * @run main\/othervm\/policy=jtreg.security.policy\n- *      -Djdk.invoke.MethodHandleProxies.dumpInterfaceInstances WithSecurityManagerTest\n+ * @run main\/othervm\/policy=jtreg.security.policy WithSecurityManagerTest\n","filename":"test\/jdk\/java\/lang\/invoke\/MethodHandleProxies\/WithSecurityManagerTest.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"}]}