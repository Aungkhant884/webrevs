{"files":[{"patch":"@@ -1249,1 +1249,1 @@\n-            U.putReferenceVolatile(this, ARRAY, a);\n+            U.getAndSetReference(this, ARRAY, a);\n@@ -2061,1 +2061,1 @@\n-                if ((window == (window = scan(w, window, r))) &&\n+                if (window == (window = scan(w, window, r)) &&\n@@ -2108,6 +2108,0 @@\n-                            if (q.array != a) {   \/\/ resized\n-                                next |= RESCAN;\n-                                break;\n-                            }\n-                            if (contended)        \/\/ reduce incoming contention\n-                                break;\n@@ -2115,2 +2109,4 @@\n-                                if (next >= 0L &&\n-                                    (a[nk] != null || q.top - b > 0))\n+                                if (next >= 0L && \/\/  and resized or uncontended\n+                                    (q.array != a ||\n+                                     (!contended &&\n+                                      (a[nk] != null || q.top - b > 0))))\n@@ -2162,1 +2158,1 @@\n-                    if ((p = w.phase) != idlePhase)\n+                    if ((runState & STOP) != 0 || (p = w.phase) != idlePhase)\n@@ -2165,1 +2161,1 @@\n-                    if ((p = w.phase) != idlePhase)\n+                    if ((p = w.phase) != idlePhase || (runState & STOP) != 0)\n@@ -2168,2 +2164,0 @@\n-                    if ((runState & STOP) != 0)\n-                        break;\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/ForkJoinPool.java","additions":8,"deletions":14,"binary":false,"changes":22,"status":"modified"}]}