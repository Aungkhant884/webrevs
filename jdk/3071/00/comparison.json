{"files":[{"patch":"@@ -4755,0 +4755,10 @@\n+\/\/ Called from debugger. Prints current method immediately. This differs from above, it creates a well-formed\n+\/\/ and complete ideal graph xml immediately, while others accomplish their ideal graph xml when VM exists.\n+void igv_print_immediately() {\n+ Compile::current()->igv_print_method_to_file_immediately();\n+}\n+\n+void igv_print_immediately(const char* phase_name) {\n+ Compile::current()->igv_print_method_to_file_immediately(phase_name);\n+}\n+\n@@ -4803,0 +4813,17 @@\n+void Compile::igv_print_method_to_file_immediately(const char* phase_name) {\n+  if (strlen(phase_name) >= 508) {\n+    tty->print_cr(\"Method name %s too long!\", phase_name);\n+    return;\n+  }\n+  ResourceMark rm;\n+  char file_name[512];\n+  sprintf(file_name, \"%s.xml\", phase_name);\n+  {\n+    IdealGraphPrinter* tmp_printer = new IdealGraphPrinter(C, file_name, false);\n+    tty->print_cr(\"Method printed to %s\", file_name);\n+    tmp_printer->print(phase_name, (Node*)C->root());\n+    tmp_printer->end_method();\n+    IdealGraphPrinter::clean_up(tmp_printer);\n+  }\n+}\n+\n","filename":"src\/hotspot\/share\/opto\/compile.cpp","additions":27,"deletions":0,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -652,0 +652,1 @@\n+  void igv_print_method_to_file_immediately(const char* phase_name = \"Debug\");\n","filename":"src\/hotspot\/share\/opto\/compile.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -91,1 +91,7 @@\n-void IdealGraphPrinter::clean_up() {\n+void IdealGraphPrinter::clean_up(IdealGraphPrinter* printer) {\n+  \/\/ clean the given ones\n+  if (printer != NULL) {\n+    delete printer;\n+    return;\n+  }\n+  \/\/ otherwise, clean all others\n","filename":"src\/hotspot\/share\/opto\/idealGraphPrinter.cpp","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -120,1 +120,1 @@\n-  static void clean_up();\n+  static void clean_up(IdealGraphPrinter* printer = NULL);\n","filename":"src\/hotspot\/share\/opto\/idealGraphPrinter.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}