{"files":[{"patch":"@@ -202,1 +202,1 @@\n-        Content localTagsContent = docletWriter.commentTagsToContent(null, dfElement, localTags, false);\n+        Content localTagsContent = docletWriter.commentTagsToContent(dfElement, localTags, false);\n@@ -208,1 +208,1 @@\n-        Content pageContent = docletWriter.commentTagsToContent(null, dfElement, fullBody, false);\n+        Content pageContent = docletWriter.commentTagsToContent(dfElement, fullBody, false);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/DocFilesHandlerImpl.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -369,1 +369,1 @@\n-    private Content getInlineTagOutput(Element element, DocTree holder, DocTree tree, TagletWriterImpl.Context context) {\n+    private Content getInlineTagOutput(Element element, DocTree tree, TagletWriterImpl.Context context) {\n@@ -371,1 +371,1 @@\n-                .getInlineTagOutput(element, configuration.tagletManager, holder, tree);\n+                .getInlineTagOutput(element, configuration.tagletManager, tree);\n@@ -1018,1 +1018,1 @@\n-                commentTagsToContent(see, element, label, context));\n+                commentTagsToContent(element, label, context));\n@@ -1373,1 +1373,1 @@\n-        Content result = commentTagsToContent(null, element, tags, first, inSummary);\n+        Content result = commentTagsToContent(element, tags, first, inSummary);\n@@ -1415,5 +1415,3 @@\n-     * @param holderTag    specific tag where comment resides\n-     * @param element    specific element where comment resides\n-     * @param tags   array of text tags and inline tags (often alternating)\n-               present in the text of interest for this element\n-     * @param isFirstSentence  true if text is first sentence\n+     * @param element         specific element where comment resides\n+     * @param tags            list of text trees and inline tag trees (often alternating)\n+     * @param isFirstSentence true if text is first sentence\n@@ -1422,2 +1420,1 @@\n-    public Content commentTagsToContent(DocTree holderTag,\n-                                        Element element,\n+    public Content commentTagsToContent(Element element,\n@@ -1427,1 +1424,1 @@\n-        return commentTagsToContent(holderTag, element, tags, isFirstSentence, false);\n+        return commentTagsToContent(element, tags, isFirstSentence, false);\n@@ -1431,1 +1428,1 @@\n-     * Converts inline tags and text to text strings, expanding the\n+     * Converts inline tags and text to Content, expanding the\n@@ -1436,1 +1433,0 @@\n-     * @param holderTag       specific tag where comment resides\n@@ -1438,2 +1434,1 @@\n-     * @param trees           array of text tags and inline tags (often alternating)\n-     *                        present in the text of interest for this element\n+     * @param trees           list of text trees and inline tag trees (often alternating)\n@@ -1444,2 +1439,1 @@\n-    public Content commentTagsToContent(DocTree holderTag,\n-                                        Element element,\n+    public Content commentTagsToContent(Element element,\n@@ -1449,1 +1443,1 @@\n-        return commentTagsToContent(holderTag, element, trees,\n+        return commentTagsToContent(element, trees,\n@@ -1454,1 +1448,1 @@\n-     * Converts inline tags and text to text strings, expanding the\n+     * Converts inline tags and text to Content, expanding the\n@@ -1459,1 +1453,0 @@\n-     * @param holderTag specific tag where comment resides\n@@ -1462,1 +1455,0 @@\n-     *                  present in the text of interest for this element\n@@ -1467,2 +1459,1 @@\n-    public Content commentTagsToContent(DocTree holderTag,\n-                                        Element element,\n+    public Content commentTagsToContent(Element element,\n@@ -1579,1 +1570,1 @@\n-                    Content docRootContent = getInlineTagOutput(element, holderTag, node, context);\n+                    Content docRootContent = getInlineTagOutput(element, node, context);\n@@ -1623,1 +1614,1 @@\n-                    Content output = getInlineTagOutput(element, holderTag, node, context);\n+                    Content output = getInlineTagOutput(element, node, context);\n@@ -1631,1 +1622,1 @@\n-                    Content output = getInlineTagOutput(element, holderTag, node, context);\n+                    Content output = getInlineTagOutput(element, node, context);\n@@ -1646,1 +1637,1 @@\n-                        Content label = commentTagsToContent(node, element, node.getLabel(), context);\n+                        Content label = commentTagsToContent(element, node.getLabel(), context);\n@@ -1689,1 +1680,1 @@\n-                    Content output = getInlineTagOutput(element, holderTag, node, context);\n+                    Content output = getInlineTagOutput(element, node, context);\n@@ -1696,1 +1687,1 @@\n-                    Content output = getInlineTagOutput(element, holderTag, node, context);\n+                    Content output = getInlineTagOutput(element, node, context);\n@@ -1729,1 +1720,1 @@\n-                    Content output = getInlineTagOutput(element, holderTag, node, context);\n+                    Content output = getInlineTagOutput(element, node, context);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlDocletWriter.java","additions":22,"deletions":31,"binary":false,"changes":53,"status":"modified"},{"patch":"@@ -349,1 +349,1 @@\n-                providesTrees.put(t, commentTagsToContent(tree, mdle, ch.getDescription(tree), false, true));\n+                providesTrees.put(t, commentTagsToContent(mdle, ch.getDescription(tree), false, true));\n@@ -356,1 +356,1 @@\n-                usesTrees.put(t, commentTagsToContent(tree, mdle, ch.getDescription(tree), false, true));\n+                usesTrees.put(t, commentTagsToContent(mdle, ch.getDescription(tree), false, true));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/ModuleWriterImpl.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -212,1 +212,1 @@\n-        Content desc = htmlWriter.commentTagsToContent(tag, element, tag.getDescription(), context.within(tag));\n+        Content desc = htmlWriter.commentTagsToContent(element, tag.getDescription(), context.within(tag));\n@@ -301,1 +301,1 @@\n-        body.add(htmlWriter.commentTagsToContent(paramTag, element, description, context.within(paramTag)));\n+        body.add(htmlWriter.commentTagsToContent(element, description, context.within(paramTag)));\n@@ -309,1 +309,1 @@\n-        Content content = htmlWriter.commentTagsToContent(returnTag, element, desc , context.within(returnTag));\n+        Content content = htmlWriter.commentTagsToContent(element, desc , context.within(returnTag));\n@@ -369,1 +369,1 @@\n-            body.add(htmlWriter.commentTagsToContent(simpleTag, element, bodyTags, context.within(simpleTag)));\n+            body.add(htmlWriter.commentTagsToContent(element, bodyTags, context.within(simpleTag)));\n@@ -516,1 +516,1 @@\n-        Content desc = htmlWriter.commentTagsToContent(throwsTag, element, description, context.within(throwsTag));\n+        Content desc = htmlWriter.commentTagsToContent(element, description, context.within(throwsTag));\n@@ -561,1 +561,1 @@\n-        return htmlWriter.commentTagsToContent(holderTag, holder,\n+        return htmlWriter.commentTagsToContent(holder,\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/TagletWriterImpl.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+import com.sun.source.util.DocTreePath;\n@@ -59,3 +60,6 @@\n-     * Given an element, a {@code DocTree} in the element's doc comment\n-     * replace all occurrences of {@code {@inheritDoc}} with documentation from its\n-     * superclass or superinterface.\n+     * Given an element and {@code @inheritDoc} tag in that element's doc comment,\n+     * returns the (recursive) expansion of that tag.\n+     *\n+     * This method does not expand all {@code {@inheritDoc}} tags in the given\n+     * element's doc comment. To do this, the method must be called for every\n+     * such tag.\n@@ -65,10 +69,1 @@\n-     *\n-     * @param holderTag\n-     *\n-     * either the tag that holds the {@code {@inheritDoc}} tag or {@code null},\n-     * which can mean either of:\n-     * <ul>\n-     *     <li>the tag is used on a class {@link jdk.javadoc.doclet.Taglet.Location#TYPE} declaration, or\n-     *     <li>the tag is used to copy the overall doc comment\n-     * <\/ul>\n-     *\n+     * @param inheritDoc the {@code {@inheritDoc}} tag\n@@ -79,1 +74,1 @@\n-                                                   DocTree holderTag,\n+                                                   DocTree inheritDoc,\n@@ -86,1 +81,3 @@\n-        Taglet taglet = holderTag == null\n+        var path = ch.getDocTreePath(inheritDoc);\n+        DocTree holderTag = path.getParentPath().getLeaf();\n+        Taglet taglet = holderTag.getKind() == DocTree.Kind.DOC_COMMENT\n@@ -91,1 +88,0 @@\n-            var path = writer.configuration().utils.getCommentHelper(e).getDocTreePath(holderTag);\n@@ -122,4 +118,2 @@\n-    public Content getInlineTagOutput(Element e, DocTree tag, TagletWriter tagletWriter) {\n-        DocTree inheritTag = (tag.getKind() == DocTree.Kind.INHERIT_DOC) ? null : tag;\n-        return retrieveInheritedDocumentation(tagletWriter, e,\n-                inheritTag, tagletWriter.isFirstSentence);\n+    public Content getInlineTagOutput(Element e, DocTree inheritDoc, TagletWriter tagletWriter) {\n+        return retrieveInheritedDocumentation(tagletWriter, e, inheritDoc, tagletWriter.isFirstSentence);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/taglets\/InheritDocTaglet.java","additions":14,"deletions":20,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -329,2 +329,0 @@\n-     * @param holderTag     the tag that holds this inline tag, or {@code null} if\n-     *                      there is no tag that holds it\n@@ -337,1 +335,0 @@\n-                                      DocTree holderTag,\n@@ -349,3 +346,1 @@\n-            Content tagletOutput = t.getInlineTagOutput(holder,\n-                    holderTag != null && t.getName().equals(\"inheritDoc\") ? holderTag : inlineTag,\n-                    this);\n+            Content tagletOutput = t.getInlineTagOutput(holder, inlineTag, this);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/taglets\/TagletWriter.java","additions":1,"deletions":6,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -714,1 +714,1 @@\n-        return inheritedDoc == null || inheritedDoc.holder == ee\n+        return inheritedDoc.holder == ee\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/CommentHelper.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}