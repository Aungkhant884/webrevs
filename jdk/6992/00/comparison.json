{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -388,1 +388,1 @@\n-    int n = ::write(s, buf, len);\n+    ssize_t n = ::write(s, buf, len);\n","filename":"src\/hotspot\/os\/linux\/attachListener_linux.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -682,3 +682,3 @@\n-size_t os::write(int fd, const void *buf, unsigned int nBytes) {\n-  size_t res;\n-  RESTARTABLE((size_t) ::write(fd, buf, (size_t) nBytes), res);\n+ssize_t os::write(int fd, const void *buf, unsigned int nBytes) {\n+  ssize_t res;\n+  RESTARTABLE(::write(fd, buf, (size_t) nBytes), res);\n","filename":"src\/hotspot\/os\/posix\/os_posix.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -101,1 +101,1 @@\n-  int result;\n+  int fd;\n@@ -103,3 +103,2 @@\n-  RESTARTABLE(os::open(destfile, O_CREAT|O_WRONLY|O_TRUNC, S_IRUSR|S_IWUSR),\n-              result);\n-  if (result == OS_ERR) {\n+  RESTARTABLE(os::open(destfile, O_CREAT|O_WRONLY|O_TRUNC, S_IRUSR|S_IWUSR), fd);\n+  if (fd == OS_ERR) {\n@@ -111,1 +110,1 @@\n-    int fd = result;\n+    ssize_t result;\n@@ -115,1 +114,1 @@\n-      RESTARTABLE(::write(fd, addr, remaining), result);\n+      result = os::write(fd, addr, remaining);\n@@ -128,1 +127,1 @@\n-    result = ::close(fd);\n+    result = os::close(fd);\n@@ -845,3 +844,3 @@\n-  int result;\n-  RESTARTABLE(os::open(filename, O_RDWR|O_CREAT|O_NOFOLLOW, S_IRUSR|S_IWUSR), result);\n-  if (result == OS_ERR) {\n+  int fd;\n+  RESTARTABLE(os::open(filename, O_RDWR|O_CREAT|O_NOFOLLOW, S_IRUSR|S_IWUSR), fd);\n+  if (fd == OS_ERR) {\n@@ -863,3 +862,0 @@\n-  \/\/ save the file descriptor\n-  int fd = result;\n-\n@@ -872,0 +868,2 @@\n+  ssize_t result;\n+\n@@ -898,1 +896,1 @@\n-    RESTARTABLE(::write(fd, &zero_int, 1), result);\n+    result = os::write(fd, &zero_int, 1);\n@@ -910,1 +908,1 @@\n-    ::close(fd);\n+    os::close(fd);\n","filename":"src\/hotspot\/os\/posix\/perfMemory_posix.cpp","additions":14,"deletions":16,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -4761,1 +4761,1 @@\n-size_t os::write(int fd, const void *buf, unsigned int nBytes) {\n+ssize_t os::write(int fd, const void *buf, unsigned int nBytes) {\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -1617,2 +1617,2 @@\n-  size_t n = os::write(_fd, buffer, (unsigned int)nbytes);\n-  if (n != nbytes) {\n+  ssize_t n = os::write(_fd, buffer, (unsigned int)nbytes);\n+  if (n < 0 || (size_t)n != nbytes) {\n","filename":"src\/hotspot\/share\/cds\/filemap.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -79,1 +79,1 @@\n-    const ssize_t num_written = (ssize_t)os::write(_fd, buf, nBytes);\n+    const ssize_t num_written = os::write(_fd, buf, nBytes);\n","filename":"src\/hotspot\/share\/jfr\/writers\/jfrStreamWriterHost.inline.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -2839,1 +2839,1 @@\n-    size_t count = ::write(defaultStream::output_fd(), s, (int)len);\n+    ssize_t count = os::write(defaultStream::output_fd(), s, (int)len);\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -568,1 +568,1 @@\n-  static size_t write(int fd, const void *buf, unsigned int nBytes);\n+  static ssize_t write(int fd, const void *buf, unsigned int nBytes);\n","filename":"src\/hotspot\/share\/runtime\/os.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,0 +2,1 @@\n+ * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -57,1 +58,1 @@\n-  ssize_t n = (ssize_t) os::write(_fd, buf, (uint) size);\n+  ssize_t n = os::write(_fd, buf, (uint) size);\n","filename":"src\/hotspot\/share\/services\/heapDumperCompression.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -617,1 +617,1 @@\n-    size_t count = ::write(_fd, s, (int)len);\n+    ssize_t count = ::write(_fd, s, (int)len);\n","filename":"src\/hotspot\/share\/utilities\/ostream.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}