{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2012, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -88,1 +88,0 @@\n-    SDRenderType renderType = SD_Nothing;\n@@ -98,1 +97,2 @@\n-        renderType = SD_Nothing;\n+\n+        return SD_Nothing;\n@@ -104,2 +104,0 @@\n-        renderType = SD_Stroke;\n-    }\n@@ -107,1 +105,2 @@\n-    return renderType;\n+        return SD_Stroke;\n+    }\n@@ -128,1 +127,0 @@\n-    SDRenderType renderType = SD_Nothing;\n@@ -130,1 +128,1 @@\n-    if (fill == YES)\n+    if (simple)\n@@ -132,1 +130,1 @@\n-        if (simple == YES)\n+        if (fill)\n@@ -135,1 +133,0 @@\n-            renderType = SD_Nothing;\n@@ -139,2 +136,1 @@\n-            CGContextAddRect(cgRef, CGRectMake(x, y, w, h));\n-            renderType = SD_Fill;\n+            CGContextStrokeRect(cgRef, CGRectMake(x+offsetX, y+offsetY, w, h));\n@@ -142,0 +138,2 @@\n+\n+        return SD_Nothing;\n@@ -145,1 +143,1 @@\n-        if (simple == YES)\n+        if (fill)\n@@ -147,2 +145,3 @@\n-            CGContextStrokeRect(cgRef, CGRectMake(x+offsetX, y+offsetY, w, h));\n-            renderType = SD_Nothing;\n+            CGContextAddRect(cgRef, CGRectMake(x, y, w, h));\n+\n+            return SD_Fill;\n@@ -153,1 +152,2 @@\n-            renderType = SD_Stroke;\n+\n+            return SD_Stroke;\n@@ -156,2 +156,0 @@\n-\n-    return renderType;\n@@ -159,0 +157,1 @@\n+\n@@ -173,11 +172,0 @@\n-    SDRenderType renderType = SD_Nothing;\n-\n-    if (fill == YES)\n-    {\n-        renderType = SD_Fill;\n-    }\n-    else\n-    {\n-        renderType = SD_Stroke;\n-    }\n-\n@@ -255,1 +243,1 @@\n-    return renderType;\n+    return fill ? SD_Fill : SD_Stroke;\n@@ -272,2 +260,0 @@\n-    SDRenderType renderType = SD_Nothing;\n-\n@@ -284,0 +270,2 @@\n+\n+        return SD_Nothing;\n@@ -287,9 +275,0 @@\n-        if (fill == YES)\n-        {\n-            renderType = SD_Fill;\n-        }\n-        else\n-        {\n-            renderType = SD_Stroke;\n-        }\n-\n@@ -297,1 +276,0 @@\n-    }\n@@ -299,1 +277,2 @@\n-    return renderType;\n+        return fill ? SD_Fill : SD_Stroke;\n+    }\n@@ -301,0 +280,1 @@\n+\n@@ -325,10 +305,0 @@\n-    SDRenderType renderType = SD_Nothing;\n-\n-    if (fill == YES)\n-    {\n-        renderType = SD_Fill;\n-    }\n-    else\n-    {\n-        renderType = SD_Stroke;\n-    }\n@@ -423,1 +393,1 @@\n-    return renderType;\n+    return fill ? SD_Fill : SD_Stroke;\n@@ -438,3 +408,1 @@\n-    SDRenderType renderType = SD_Nothing;\n-\n-    if (xpointsarray == NULL || ypointsarray == NULL) {\n+    if (xpointsarray == NULL || ypointsarray == NULL || npoints <= 1) {\n@@ -443,12 +411,0 @@\n-    if (npoints > 1)\n-    {\n-        if (fill == YES)\n-        {\n-            renderType = SD_Fill;\n-        }\n-        else\n-        {\n-            renderType = SD_Stroke;\n-        }\n-\n-        jint i;\n@@ -456,9 +412,9 @@\n-        jint* xpoints = (jint*)(*env)->GetPrimitiveArrayCritical(env, xpointsarray, NULL);\n-        if (xpoints == NULL) {\n-            return SD_Nothing;\n-        }\n-        jint* ypoints = (jint*)(*env)->GetPrimitiveArrayCritical(env, ypointsarray, NULL);\n-        if (ypoints == NULL) {\n-            (*env)->ReleasePrimitiveArrayCritical(env, xpointsarray, xpoints, 0);\n-            return SD_Nothing;\n-        }\n+    jint* xpoints = (jint*)(*env)->GetPrimitiveArrayCritical(env, xpointsarray, NULL);\n+    if (xpoints == NULL) {\n+        return SD_Nothing;\n+    }\n+    jint* ypoints = (jint*)(*env)->GetPrimitiveArrayCritical(env, ypointsarray, NULL);\n+    if (ypoints == NULL) {\n+        (*env)->ReleasePrimitiveArrayCritical(env, xpointsarray, xpoints, 0);\n+        return SD_Nothing;\n+    }\n@@ -466,1 +422,1 @@\n-        CGContextMoveToPoint(cgRef, xpoints[0]+offsetX, ypoints[0]+offsetY);\n+    CGContextMoveToPoint(cgRef, xpoints[0]+offsetX, ypoints[0]+offsetY);\n@@ -468,4 +424,4 @@\n-        for (i=1; i<npoints; i++)\n-        {\n-            CGContextAddLineToPoint(cgRef, xpoints[i]+offsetX, ypoints[i]+offsetY);\n-        }\n+    for (jint i = 1; i<npoints; i++)\n+    {\n+        CGContextAddLineToPoint(cgRef, xpoints[i]+offsetX, ypoints[i]+offsetY);\n+    }\n@@ -473,1 +429,3 @@\n-        if (polygon == YES)\n+    if (polygon == YES)\n+    {\n+        if ((xpoints[0] != xpoints[npoints-1]) || (ypoints[0] != ypoints[npoints-1])) \/\/ according to the specs (only applies to polygons, not polylines)\n@@ -475,4 +433,1 @@\n-            if ((xpoints[0] != xpoints[npoints-1]) || (ypoints[0] != ypoints[npoints-1])) \/\/ according to the specs (only applies to polygons, not polylines)\n-            {\n-                CGContextAddLineToPoint(cgRef, xpoints[0]+offsetX, ypoints[0]+offsetY);\n-            }\n+            CGContextAddLineToPoint(cgRef, xpoints[0]+offsetX, ypoints[0]+offsetY);\n@@ -480,3 +435,0 @@\n-\n-        (*env)->ReleasePrimitiveArrayCritical(env, ypointsarray, ypoints, 0);\n-        (*env)->ReleasePrimitiveArrayCritical(env, xpointsarray, xpoints, 0);\n@@ -485,1 +437,4 @@\n-    return renderType;\n+    (*env)->ReleasePrimitiveArrayCritical(env, ypointsarray, ypoints, 0);\n+    (*env)->ReleasePrimitiveArrayCritical(env, xpointsarray, xpoints, 0);\n+\n+    return fill ? SD_Fill : SD_Stroke;\n@@ -487,0 +442,1 @@\n+\n@@ -595,1 +551,1 @@\n-                break;\n+            break;\n@@ -639,2 +595,1 @@\n-    SDRenderType renderType = SD_Stroke;\n-    qsdo->BeginSurface(env, qsdo, renderType);\n+    qsdo->BeginSurface(env, qsdo, SD_Stroke);\n@@ -660,2 +615,1 @@\n-    SDRenderType renderType    = (isfill? SD_Fill : SD_Stroke);\n-    qsdo->BeginSurface(env, qsdo, renderType);\n+    qsdo->BeginSurface(env, qsdo, isfill ? SD_Fill : SD_Stroke);\n@@ -681,2 +635,1 @@\n-    SDRenderType renderType    = (isfill? SD_Fill : SD_Stroke);\n-    qsdo->BeginSurface(env, qsdo, renderType);\n+    qsdo->BeginSurface(env, qsdo, isfill ? SD_Fill : SD_Stroke);\n@@ -702,2 +655,1 @@\n-    SDRenderType renderType    = (isfill? SD_Fill : SD_Stroke);\n-    qsdo->BeginSurface(env, qsdo, renderType);\n+    qsdo->BeginSurface(env, qsdo, isfill ? SD_Fill : SD_Stroke);\n@@ -723,2 +675,1 @@\n-    SDRenderType renderType    = (isfill? SD_Fill : SD_Stroke);\n-    qsdo->BeginSurface(env, qsdo, renderType);\n+    qsdo->BeginSurface(env, qsdo, isfill ? SD_Fill : SD_Stroke);\n@@ -744,3 +695,2 @@\n-    BOOL eoFill = YES; \/\/ polys are WIND_EVEN_ODD by definition\n-    SDRenderType renderType    = (isfill? (eoFill ? SD_EOFill : SD_Fill) : SD_Stroke);\n-    qsdo->BeginSurface(env, qsdo, renderType);\n+    \/\/ polys are WIND_EVEN_ODD by definition\n+    qsdo->BeginSurface(env, qsdo, isfill ? SD_EOFill : SD_Stroke);\n@@ -766,2 +716,1 @@\n-    BOOL eoFill = (windingRule == java_awt_geom_PathIterator_WIND_EVEN_ODD);\n-    SDRenderType renderType    = (isfill? (eoFill ? SD_EOFill : SD_Fill) : SD_Stroke);\n+    SDRenderType renderType = isfill ? ((windingRule == java_awt_geom_PathIterator_WIND_EVEN_ODD) ? SD_EOFill : SD_Fill) : SD_Stroke;\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/QuartzRenderer.m","additions":57,"deletions":108,"binary":false,"changes":165,"status":"modified"},{"patch":"@@ -1118,1 +1118,0 @@\n-    SDRenderType renderType = SD_Nothing;\n@@ -1126,9 +1125,0 @@\n-    if (fill == YES)\n-    {\n-        renderType = SD_Fill;\n-    }\n-    else\n-    {\n-        renderType = SD_Stroke;\n-    }\n-\n@@ -1209,1 +1199,1 @@\n-    return renderType;\n+    return fill ? SD_Fill : SD_Stroke;\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/QuartzSurfaceData.m","additions":1,"deletions":11,"binary":false,"changes":12,"status":"modified"}]}