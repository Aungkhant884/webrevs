[{"commit":{"message":"4200096: OffScreenImageSource.removeConsumer NullPointerException\n\nMake sure OffScreenImageSource#addConsumer doesn't throw a NPE if the argument is null.\n\nThe rationale here is:\nThe preexisting implementation wouldn't throw a NPE, so we shouldn't change that now.\n\n(Or more specifically: the preexisting implementation *would* throw a NPE, but it would also catch it and print it to System.err. The caller wouldn't need to anticipate a NPE.)"},"files":[{"filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/OffScreenImageSource.java"},{"filename":"test\/jdk\/sun\/awt\/image\/OffScreenImageSource\/bug4200096.java"}],"sha":"36feaad061150eededede76008919f34d7268b7b"},{"commit":{"message":"4200096: OffScreenImageSource.removeConsumer NullPointerException\n\nChanging `runImageConsumerTest` to make sure we're explicitly testing a `OffScreenImageSource`.\n\nBy contrast: the `runImageDimensionTest` is more of an integration-style test that *happens* to test the `OffScreenImageSource`."},"files":[{"filename":"test\/jdk\/sun\/awt\/image\/OffScreenImageSource\/bug4200096.java"}],"sha":"8434bfbcb96af0c463d273cba4fec9cc656233eb"},{"commit":{"message":"4200096: OffScreenImageSource.removeConsumer NullPointerException\n\nAdding createAbstractImage() with a little documentation to clarify why we're creating an image the way we are."},"files":[{"filename":"test\/jdk\/sun\/awt\/image\/OffScreenImageSource\/bug4200096.java"}],"sha":"39d3bb31dd154e6342d32672b12f2ce44722b495"},{"commit":{"message":"4200096: OffScreenImageSource.removeConsumer NullPointerException\n\nRe-adding the 'synchronized' keyword.\n\nWe can probably do without it now, but I'm just trying to minimize possible unintended side-effects of this PR. Nobody asked for improved multithreaded support. And this class is used to iterate over BufferedImages (which are already in memory), so (as long as the ImageConsumer isn't taking too long -- or blocking) this should be very fast."},"files":[{"filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/OffScreenImageSource.java"}],"sha":"ef9d263a2fd2a2fb8c785bcf4e8113e631909d5a"},{"commit":{"message":"4200096: OffScreenImageSource.removeConsumer NullPointerException\n\nIn code review prrace pointed out:\n> I'd capture \"theConsumer\" into a local var in each of the methods sendPixel() and produce() and check and use the local var\n\nhttps:\/\/github.com\/openjdk\/jdk\/pull\/13408#issuecomment-1502348061\n\nThis is actually my previous\/original draft for JDK-4200096 ( 49a49ee8585e8a4b5f33a6af04f2ce0165bf1199 ), but I shied way from this approach because I was afraid code reviewers would point out its changes are excessively invasive for the original complaint. (For ex: now OSIS supports multithreading, which nobody asked for. Should I re-add the `synchronized` method modifiers? (although they are theoretically no longer necessary, keeping them reduces the risk of unintended consequences...) Or if multithreaded support is worth keeping: should I at least add a unit test for it? These questions seemed like they're straying off-topic from the original bug.)"},"files":[{"filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/OffScreenImageSource.java"}],"sha":"3a125e05ccee2077c1264128890fd748c9f49f40"},{"commit":{"message":"4200096: OffScreenImageSource.removeConsumer NullPointerException\n\nIn code review mrserb pointed out we shouldn't use System.exit(1) as an error condition.\n\nhttps:\/\/github.com\/openjdk\/jdk\/pull\/13408#discussion_r1162182212"},"files":[{"filename":"test\/jdk\/sun\/awt\/image\/OffScreenImageSource\/bug4200096.java"}],"sha":"c1e8353b5a23aced59e83d5a4afb1bc4b1b677f0"}]