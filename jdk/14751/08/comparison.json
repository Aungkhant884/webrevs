{"files":[{"patch":"@@ -536,2 +536,1 @@\n-            int cp = value[first] & 0xff;\n-            if (cp != CharacterDataLatin1.instance.toLowerCase(cp)) {  \/\/ no need to check Character.ERROR\n+            if (CharacterDataLatin1.instance.isUpperCase(value[first] & 0xff)) {\n@@ -551,6 +550,1 @@\n-            int cp = value[i] & 0xff;\n-            cp = CharacterDataLatin1.instance.toLowerCase(cp);\n-            if (!canEncode(cp)) {                      \/\/ not a latin1 character\n-                return toLowerCaseEx(str, value, first, locale, false);\n-            }\n-            result[i] = (byte)cp;\n+            result[i] = (byte)CharacterDataLatin1.instance.toLowerCase(value[i] & 0xff);\n@@ -611,1 +605,2 @@\n-            if (cp != CharacterDataLatin1.instance.toUpperCaseEx(cp)) {   \/\/ no need to check Character.ERROR\n+            boolean hasUpperCaseEx = cp >= 'a' && (cp <= 'z' || cp == 181 || (cp >= 223 && cp != 247));\n+            if (hasUpperCaseEx) {\n@@ -626,2 +621,1 @@\n-            int cp = value[i] & 0xff;\n-            cp = CharacterDataLatin1.instance.toUpperCaseEx(cp);\n+            int cp = CharacterDataLatin1.instance.toUpperCaseEx(value[i] & 0xff);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/StringLatin1.java","additions":5,"deletions":11,"binary":false,"changes":16,"status":"modified"}]}