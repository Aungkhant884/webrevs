{"files":[{"patch":"@@ -56,1 +56,0 @@\n-  _last_valid_index = num_cards - 1;\n@@ -67,1 +66,1 @@\n-  assert(byte_for(high_bound-1) <= &_byte_map[_last_valid_index], \"Checking end of map\");\n+  assert(byte_for(high_bound-1) <= &_byte_map[last_valid_index()], \"Checking end of map\");\n@@ -70,2 +69,2 @@\n-  log_trace(gc, barrier)(\"    &_byte_map[0]: \" PTR_FORMAT \"  &_byte_map[_last_valid_index]: \" PTR_FORMAT,\n-                         p2i(&_byte_map[0]), p2i(&_byte_map[_last_valid_index]));\n+  log_trace(gc, barrier)(\"    &_byte_map[0]: \" PTR_FORMAT \"  &_byte_map[last_valid_index()]: \" PTR_FORMAT,\n+                         p2i(&_byte_map[0]), p2i(&_byte_map[last_valid_index()]));\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CardTable.cpp","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -72,1 +72,0 @@\n-  _last_valid_index(0),\n@@ -93,1 +92,0 @@\n-  _last_valid_index = num_cards - 1;\n@@ -124,1 +122,1 @@\n-  assert(byte_for(high_bound-1) <= &_byte_map[_last_valid_index], \"Checking end of map\");\n+  assert(byte_for(high_bound-1) <= &_byte_map[last_valid_index()], \"Checking end of map\");\n@@ -131,2 +129,2 @@\n-  log_trace(gc, barrier)(\"    &_byte_map[0]: \" PTR_FORMAT \"  &_byte_map[_last_valid_index]: \" PTR_FORMAT,\n-                  p2i(&_byte_map[0]), p2i(&_byte_map[_last_valid_index]));\n+  log_trace(gc, barrier)(\"    &_byte_map[0]: \" PTR_FORMAT \"  &_byte_map[last_valid_index()]: \" PTR_FORMAT,\n+                  p2i(&_byte_map[0]), p2i(&_byte_map[last_valid_index()]));\n@@ -298,1 +296,1 @@\n-    assert(index_for(new_region.last()) <=  _last_valid_index,\n+    assert(index_for(new_region.last()) <=  last_valid_index(),\n","filename":"src\/hotspot\/share\/gc\/shared\/cardTable.cpp","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -47,1 +47,0 @@\n-  size_t          _last_valid_index; \/\/ index of the last valid element\n@@ -110,0 +109,3 @@\n+  size_t last_valid_index() const {\n+    return cards_required(_whole_heap.word_size()) - 1;\n+  }\n@@ -130,1 +132,1 @@\n-  inline size_t cards_required(size_t covered_words) {\n+  inline size_t cards_required(size_t covered_words) const {\n","filename":"src\/hotspot\/share\/gc\/shared\/cardTable.hpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -91,1 +91,0 @@\n-  nonstatic_field(CardTable,                   _last_valid_index,                             const size_t)                          \\\n","filename":"src\/hotspot\/share\/gc\/shared\/vmStructs_gc.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}