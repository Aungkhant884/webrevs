{"files":[{"patch":"@@ -83,2 +83,0 @@\n-        \/\/ trustSettings can be null, if no trust settings for the certificate\n-        \/\/ exist.\n@@ -345,6 +343,3 @@\n-                        tEntry.cert, tEntry.trustSettings == null ?\n-                                Set.of(\n-                                        new LocalAttr(KnownOIDs.ORACLE_TrustedKeyUsage.value(), tEntry.trustedKeyUsageValue)) :\n-                                Set.of(\n-                                        new LocalAttr(KnownOIDs.ORACLE_TrustedKeyUsage.value(), tEntry.trustedKeyUsageValue),\n-                                        new LocalAttr(\"trustSettings\", tEntry.trustSettings.toString())));\n+                        tEntry.cert, Set.of(\n+                                new LocalAttr(KnownOIDs.ORACLE_TrustedKeyUsage.value(), tEntry.trustedKeyUsageValue),\n+                                new LocalAttr(\"trustSettings\", tEntry.trustSettings.toString())));\n@@ -660,1 +655,0 @@\n-                Certificate certElem;\n@@ -799,2 +793,0 @@\n-     *\n-     * If inputTrust is null, no explicit trust settings for the certificate are found\n@@ -849,2 +841,1 @@\n-            \/\/ Find out if cert is self signed and no root CA\n-            boolean isSelfSigned = false;\n+            boolean isSelfSigned;\n@@ -855,1 +846,1 @@\n-                \/\/ ignore silently, cert is not self signed then\n+                isSelfSigned = false;\n@@ -860,1 +851,1 @@\n-                    \/\/ If a self-signed certificate has empty trust settings,\n+                    \/\/ If a self-signed certificate has trust settings without specific entries,\n@@ -885,2 +876,3 @@\n-                    \/\/ Trust, if explicitly trusted\n-                    if (result == null || \"1\".equals(result) || \"2\".equals(result)) {\n+                    \/\/ Trust, if explicitly trusted or result is null and certificate is self signed\n+                    if ((result == null && isSelfSigned)\n+                            || \"1\".equals(result) || \"2\".equals(result)) {\n","filename":"src\/java.base\/macosx\/classes\/apple\/security\/KeychainStore.java","additions":9,"deletions":17,"binary":false,"changes":26,"status":"modified"}]}