{"files":[{"patch":"@@ -4083,0 +4083,5 @@\n+void MacroAssembler::load_klass_check_null(Register dst, Register src) {\n+  null_check(src, oopDesc::klass_offset_in_bytes());\n+  load_klass(dst, src);\n+}\n+\n","filename":"src\/hotspot\/cpu\/aarch64\/macroAssembler_aarch64.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -846,0 +846,1 @@\n+  void load_klass_check_null(Register dst, Register src);\n","filename":"src\/hotspot\/cpu\/aarch64\/macroAssembler_aarch64.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -325,2 +325,1 @@\n-        __ null_check(receiver_reg, oopDesc::klass_offset_in_bytes());\n-        __ load_klass(temp1_recv_klass, receiver_reg);\n+        __ load_klass_check_null(temp1_recv_klass, receiver_reg);\n","filename":"src\/hotspot\/cpu\/aarch64\/methodHandles_aarch64.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -3239,2 +3239,1 @@\n-  __ null_check(recv, oopDesc::klass_offset_in_bytes());\n-  __ load_klass(r0, recv);\n+  __ load_klass_check_null(r0, recv);\n@@ -3329,2 +3328,1 @@\n-  __ null_check(r2, oopDesc::klass_offset_in_bytes());\n-  __ load_klass(r3, r2);\n+  __ load_klass_check_null(r3, r2);\n@@ -3346,2 +3344,1 @@\n-  __ null_check(r2, oopDesc::klass_offset_in_bytes());\n-  __ load_klass(r3, r2);\n+  __ load_klass_check_null(r3, r2);\n","filename":"src\/hotspot\/cpu\/aarch64\/templateTable_aarch64.cpp","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -1659,0 +1659,4 @@\n+void MacroAssembler::load_klass_check_null(Register dst_klass, Register src_oop, Register tmp, AsmCondition cond) {\n+  null_check(src_oop, tmp, oopDesc::klass_offset_in_bytes());\n+  load_klass(dst_klass, src_oop, cond);\n+}\n","filename":"src\/hotspot\/cpu\/arm\/macroAssembler_arm.cpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -856,0 +856,1 @@\n+  void load_klass_check_null(Register dst_klass, Register src_oop, Register tmp, AsmCondition cond = al);\n","filename":"src\/hotspot\/cpu\/arm\/macroAssembler_arm.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -334,2 +334,1 @@\n-        __ null_check(receiver_reg, temp3, oopDesc::klass_offset_in_bytes());\n-        __ load_klass(temp1_recv_klass, receiver_reg);\n+        __ load_klass_check_null(temp1_recv_klass, receiver_reg, temp3);\n","filename":"src\/hotspot\/cpu\/arm\/methodHandles_arm.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -3628,2 +3628,1 @@\n-  __ null_check(recv, Rtemp, oopDesc::klass_offset_in_bytes());\n-  __ load_klass(recv_klass, recv);\n+  __ load_klass_check_null(recv_klass, recv, Rtemp);\n","filename":"src\/hotspot\/cpu\/arm\/templateTable_arm.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -48,2 +48,1 @@\n-  MacroAssembler::null_check(receiver, oopDesc::klass_offset_in_bytes(), &Lmiss);\n-  load_klass(temp_reg, receiver);\n+  load_klass_check_null(temp_reg, receiver, &Lmiss);\n","filename":"src\/hotspot\/cpu\/ppc\/c1_MacroAssembler_ppc.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -41,0 +41,1 @@\n+  void load_klass_check_null_throw(Register dst, Register src, Register temp_reg);\n","filename":"src\/hotspot\/cpu\/ppc\/interp_masm_ppc.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -58,0 +58,5 @@\n+void InterpreterMacroAssembler::load_klass_check_null_throw(Register dst, Register src, Register temp_reg) {\n+  null_check_throw(src, oopDesc::klass_offset_in_bytes(), temp_reg);\n+  load_klass(dst, src);\n+}\n+\n","filename":"src\/hotspot\/cpu\/ppc\/interp_masm_ppc_64.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -3063,0 +3063,5 @@\n+void MacroAssembler::load_klass_check_null(Register dst, Register src, Label* is_null) {\n+  null_check(src, oopDesc::klass_offset_in_bytes(), is_null);\n+  load_klass(dst, src);\n+}\n+\n","filename":"src\/hotspot\/cpu\/ppc\/macroAssembler_ppc.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -735,0 +735,1 @@\n+  void load_klass_check_null(Register dst, Register src, Label* is_null = NULL);\n","filename":"src\/hotspot\/cpu\/ppc\/macroAssembler_ppc.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -3445,2 +3445,1 @@\n-  __ null_check_throw(Rrecv, oopDesc::klass_offset_in_bytes(), R11_scratch1);\n-  __ load_klass(Rrecv_klass, Rrecv);\n+  __ load_klass_check_null_throw(Rrecv_klass, Rrecv, R11_scratch1);\n@@ -3583,2 +3582,1 @@\n-  __ null_check_throw(Rreceiver, oopDesc::klass_offset_in_bytes(), Rscratch2);\n-  __ load_klass(Rrecv_klass, Rreceiver);\n+  __ load_klass_check_null_throw(Rrecv_klass, Rreceiver, Rscratch2);\n","filename":"src\/hotspot\/cpu\/ppc\/templateTable_ppc_64.cpp","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -86,2 +86,0 @@\n-  \/\/ check if we must do an explicit check (implicit checks disabled, offset too large).\n-  __ null_check(R3, oopDesc::klass_offset_in_bytes(), \/*implicit only*\/NULL);\n@@ -89,1 +87,1 @@\n-  __ load_klass(rcvr_klass, R3);\n+  __ load_klass_check_null(rcvr_klass, R3);\n@@ -183,2 +181,1 @@\n-  __ null_check(R3_ARG1, oopDesc::klass_offset_in_bytes(), \/*implicit only*\/NULL);\n-  __ load_klass(rcvr_klass, R3_ARG1);\n+  __ load_klass_check_null(rcvr_klass, R3_ARG1);\n","filename":"src\/hotspot\/cpu\/ppc\/vtableStubs_ppc_64.cpp","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2082,0 +2082,5 @@\n+void MacroAssembler::load_klass_check_null(Register dst, Register src, Register tmp) {\n+  null_check(src, oopDesc::klass_offset_in_bytes());\n+  load_klass(dst, src, tmp);\n+}\n+\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -198,0 +198,1 @@\n+  void load_klass_check_null(Register dst, Register src, Register tmp = t0);\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -318,2 +318,1 @@\n-        __ null_check(receiver_reg, oopDesc::klass_offset_in_bytes());\n-        __ load_klass(temp1_recv_klass, receiver_reg);\n+        __ load_klass_check_null(temp1_recv_klass, receiver_reg);\n","filename":"src\/hotspot\/cpu\/riscv\/methodHandles_riscv.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -3153,2 +3153,1 @@\n-  __ null_check(recv, oopDesc::klass_offset_in_bytes());\n-  __ load_klass(x10, recv);\n+  __ load_klass_check_null(x10, recv);\n@@ -3239,2 +3238,1 @@\n-  __ null_check(x12, oopDesc::klass_offset_in_bytes());\n-  __ load_klass(x13, x12);\n+  __ load_klass_check_null(x13, x12);\n@@ -3256,2 +3254,1 @@\n-  __ null_check(x12, oopDesc::klass_offset_in_bytes());\n-  __ load_klass(x13, x12);\n+  __ load_klass_check_null(x13, x12);\n","filename":"src\/hotspot\/cpu\/riscv\/templateTable_riscv.cpp","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -3640,0 +3640,5 @@\n+void MacroAssembler::load_klass_check_null(Register klass, Register src_oop, Register tmp) {\n+  null_check(src_oop, tmp, oopDesc::klass_offset_in_bytes());\n+  load_klass(klass, src_oop);\n+}\n+\n","filename":"src\/hotspot\/cpu\/s390\/macroAssembler_s390.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -769,0 +769,1 @@\n+  void load_klass_check_null(Register klass, Register src_oop, Register tmp);\n","filename":"src\/hotspot\/cpu\/s390\/macroAssembler_s390.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -416,2 +416,1 @@\n-      __ null_check(receiver_reg, Z_R0, oopDesc::klass_offset_in_bytes());\n-      __ load_klass(temp1_recv_klass, receiver_reg);\n+      __ load_klass_check_null(temp1_recv_klass, receiver_reg, Z_R0);\n","filename":"src\/hotspot\/cpu\/s390\/methodHandles_s390.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -3492,2 +3492,1 @@\n-  __ null_check(recv, Z_R0_scratch, oopDesc::klass_offset_in_bytes());\n-  __ load_klass(Z_tmp_2, recv);\n+  __ load_klass_check_null(Z_tmp_2, recv, Z_R0_scratch);\n","filename":"src\/hotspot\/cpu\/s390\/templateTable_s390.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -86,2 +86,0 @@\n-  \/\/ check if we must do an explicit check (implicit checks disabled, offset too large).\n-  __ null_check(Z_ARG1, Z_R1_scratch, oopDesc::klass_offset_in_bytes());\n@@ -89,1 +87,1 @@\n-  __ load_klass(rcvr_klass, Z_ARG1);\n+  __ load_klass_check_null(rcvr_klass, Z_ARG1, Z_R1_scratch);\n@@ -199,2 +197,1 @@\n-  __ null_check(Z_ARG1, Z_R1_scratch, oopDesc::klass_offset_in_bytes());\n-  __ load_klass(rcvr_klass, Z_ARG1);\n+  __ load_klass_check_null(rcvr_klass, Z_ARG1, Z_R1_scratch);\n","filename":"src\/hotspot\/cpu\/s390\/vtableStubs_s390.cpp","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -5135,0 +5135,5 @@\n+void MacroAssembler::load_klass_check_null(Register dst, Register src, Register tmp) {\n+  null_check(src, oopDesc::klass_offset_in_bytes());\n+  load_klass(dst, src, tmp);\n+}\n+\n","filename":"src\/hotspot\/cpu\/x86\/macroAssembler_x86.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -352,0 +352,1 @@\n+  void load_klass_check_null(Register dst, Register src, Register tmp);\n","filename":"src\/hotspot\/cpu\/x86\/macroAssembler_x86.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -382,2 +382,1 @@\n-        __ null_check(receiver_reg, oopDesc::klass_offset_in_bytes());\n-        __ load_klass(temp1_recv_klass, receiver_reg, temp2);\n+        __ load_klass_check_null(temp1_recv_klass, receiver_reg, temp2);\n","filename":"src\/hotspot\/cpu\/x86\/methodHandles_x86.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -3664,2 +3664,1 @@\n-  __ null_check(recv, oopDesc::klass_offset_in_bytes());\n-  __ load_klass(rax, recv, rscratch1);\n+  __ load_klass_check_null(rax, recv, rscratch1);\n@@ -3756,2 +3755,1 @@\n-  __ null_check(rcx, oopDesc::klass_offset_in_bytes());\n-  __ load_klass(rlocals, rcx, rscratch1);\n+  __ load_klass_check_null(rlocals, rcx, rscratch1);\n@@ -3779,2 +3777,1 @@\n-  __ null_check(rcx, oopDesc::klass_offset_in_bytes());\n-  __ load_klass(rdx, rcx, rscratch1);\n+  __ load_klass_check_null(rdx, rcx, rscratch1);\n","filename":"src\/hotspot\/cpu\/x86\/templateTable_x86.cpp","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"}]}