{"files":[{"patch":"@@ -284,4 +284,9 @@\n-  \/\/ Note: on Linux, in THP \"advise\" mode, we refrain from advising the system to use large pages\n-  \/\/  since we know these commits will be short lived.\n-  const size_t aux_bitmap_page_size =\n-    LINUX_ONLY(UseTransparentHugePages ? os::vm_page_size() :) bitmap_page_size;\n+  size_t aux_bitmap_page_size = bitmap_page_size;\n+#ifdef LINUX\n+  \/\/ In THP \"advise\" mode, we refrain from advising the system to use large pages\n+  \/\/ since we know these commits will be short lived, and there is no reason to trash\n+  \/\/ the THP area with this bitmap.\n+  if (UseTransparentHugePages) {\n+    aux_bitmap_page_size = os::vm_page_size();\n+  }\n+#endif\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.cpp","additions":9,"deletions":4,"binary":false,"changes":13,"status":"modified"}]}