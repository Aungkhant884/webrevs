{"files":[{"patch":"@@ -39,10 +39,0 @@\n-template <>\n-void WorkerDataArray<double>::WDAPrinter::summary(outputStream* out, double time) {\n-  out->print_cr(\" %.1lfms\", time * MILLIUNITS);\n-}\n-\n-template <>\n-void WorkerDataArray<size_t>::WDAPrinter::summary(outputStream* out, size_t value) {\n-  out->print_cr(\" \" SIZE_FORMAT, value);\n-}\n-\n","filename":"src\/hotspot\/share\/gc\/shared\/workerDataArray.cpp","additions":0,"deletions":10,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -49,1 +49,1 @@\n-  WorkerDataArray(const char* short_name, const char* title, uint length, bool is_serial = false);\n+  WorkerDataArray(const char* short_name, const char* title, uint length);\n@@ -94,1 +94,0 @@\n-    static void summary(outputStream* out, double time);\n@@ -96,1 +95,0 @@\n-    static void summary(outputStream* out, size_t value);\n","filename":"src\/hotspot\/share\/gc\/shared\/workerDataArray.hpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n-WorkerDataArray<T>::WorkerDataArray(const char* short_name, const char* title, uint length, bool is_serial) :\n+WorkerDataArray<T>::WorkerDataArray(const char* short_name, const char* title, uint length) :\n@@ -38,2 +38,1 @@\n- _title(title),\n- _is_serial(is_serial) {\n+ _title(title) {\n@@ -41,1 +40,0 @@\n-  assert(!is_serial || length == 1, \"Serial phase must only have a single entry.\");\n@@ -161,5 +159,1 @@\n-  if (_is_serial) {\n-    out->print(\"%s:\", title());\n-  } else {\n-    out->print(\"%-30s\", title());\n-  }\n+  out->print(\"%-30s\", title());\n@@ -172,15 +166,11 @@\n-    if (_is_serial) {\n-      WDAPrinter::summary(out, get(0));\n-    } else {\n-      T min = get(start);\n-      T max = min;\n-      T sum = 0;\n-      uint contributing_threads = 0;\n-      for (uint i = start; i < _length; ++i) {\n-        T value = get(i);\n-        if (value != uninitialized()) {\n-          max = MAX2(max, value);\n-          min = MIN2(min, value);\n-          sum += value;\n-          contributing_threads++;\n-        }\n+    T min = get(start);\n+    T max = min;\n+    T sum = 0;\n+    uint contributing_threads = 0;\n+    for (uint i = start; i < _length; ++i) {\n+      T value = get(i);\n+      if (value != uninitialized()) {\n+        max = MAX2(max, value);\n+        min = MIN2(min, value);\n+        sum += value;\n+        contributing_threads++;\n@@ -188,5 +178,0 @@\n-      T diff = max - min;\n-      assert(contributing_threads != 0, \"Must be since we found a used value for the start index\");\n-      double avg = sum \/ (double) contributing_threads;\n-      WDAPrinter::summary(out, min, avg, max, diff, sum, print_sum);\n-      out->print_cr(\", Workers: %d\", contributing_threads);\n@@ -194,0 +179,5 @@\n+    T diff = max - min;\n+    assert(contributing_threads != 0, \"Must be since we found a used value for the start index\");\n+    double avg = sum \/ (double) contributing_threads;\n+    WDAPrinter::summary(out, min, avg, max, diff, sum, print_sum);\n+    out->print_cr(\", Workers: %d\", contributing_threads);\n","filename":"src\/hotspot\/share\/gc\/shared\/workerDataArray.inline.hpp","additions":19,"deletions":29,"binary":false,"changes":48,"status":"modified"}]}