{"files":[{"patch":"@@ -28,1 +28,1 @@\n- * @library \/test\/lib \/test\/hotspot\/jtreg\/runtime\/cds\/appcds\n+ * @library \/test\/lib\n@@ -33,2 +33,0 @@\n-import java.io.File;\n-import jdk.test.lib.cds.CDSTestUtils;\n@@ -36,0 +34,1 @@\n+import jdk.test.lib.process.ProcessTools;\n@@ -39,6 +38,1 @@\n-        String java_home_src = System.getProperty(\"java.home\");\n-        String java_home_dst = CDSTestUtils.getOutputDir() + File.separator + \"moved_jdk\";\n-        CDSTestUtils.clone(new File(java_home_src), new File(java_home_dst));\n-        String dstJava  = java_home_dst + File.separator + \"bin\" + File.separator + \"java\";\n-\n-        ProcessBuilder pb = CDSTestUtils.makeBuilder(dstJava,\n+        ProcessBuilder pb = ProcessTools.createJavaProcessBuilder(\n@@ -46,3 +40,4 @@\n-                \"-XX:+UnlockExperimentalVMOptions\", \"-XX:+UseEpsilonGC\", \"-Xshare:dump\");\n-        OutputAnalyzer out = TestCommon.executeAndLog(pb, \"exec-dst\");\n-        out.shouldHaveExitValue(0);\n+                \"-XX:+UnlockExperimentalVMOptions\", \"-XX:+UseEpsilonGC\", \"-Xshare:dump\",\n+                \"-XX:SharedArchiveFile=.\/hello.jsa\");\n+        OutputAnalyzer analyzer = new OutputAnalyzer(pb.start());\n+        analyzer.shouldHaveExitValue(0);\n@@ -50,1 +45,1 @@\n-        pb = CDSTestUtils.makeBuilder(dstJava,\n+        pb = ProcessTools.createJavaProcessBuilder(\n@@ -52,3 +47,3 @@\n-                \"-XX:TLABSize=2048\", \"-Xshare:dump\");\n-        out = TestCommon.executeAndLog(pb, \"exec-dst\");\n-        out.shouldHaveExitValue(0);\n+                \"-XX:TLABSize=2048\", \"-Xshare:dump\", \"-XX:SharedArchiveFile=.\/hello.jsa\");\n+        analyzer = new OutputAnalyzer(pb.start());\n+        analyzer.shouldHaveExitValue(0);\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/FillerObjectLoadTest.java","additions":11,"deletions":16,"binary":false,"changes":27,"status":"modified"}]}