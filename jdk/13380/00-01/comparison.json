{"files":[{"patch":"@@ -27,0 +27,1 @@\n+import java.awt.Toolkit;\n@@ -62,0 +63,8 @@\n+    private static Robot robot;\n+\n+    private static final int MOUSE_POS1 = 0;\n+    private static final int MOUSE_POS2 = 149;\n+    private static final int MOUSE_POS3 = 170;\n+\n+    private static final int FRAME1_DIM = 100;\n+    private static final int FRAME2_DIM = 120;\n@@ -64,2 +73,2 @@\n-    \/\/(2nd Frame in this test) after final mouse move.\n-    private static final int EXPECTED_MOUSE_POS = 50;\n+    \/\/(2nd Frame in this test) after 3rd mouse move.\n+    private static final int EXPECTED_MOUSE_POS = MOUSE_POS3 - FRAME2_DIM;\n@@ -69,2 +78,2 @@\n-            Robot r = new Robot();\n-            r.setAutoDelay(300);\n+            robot = new Robot();\n+            robot.setAutoDelay(200);\n@@ -73,3 +82,2 @@\n-            r.mouseMove(0, 0);\n-            r.waitForIdle();\n-            r.delay(100);\n+            robot.mouseMove(MOUSE_POS1, MOUSE_POS1);\n+            syncLocationToWindowManager();\n@@ -78,2 +86,1 @@\n-            r.waitForIdle();\n-            r.delay(200);\n+            syncLocationToWindowManager();\n@@ -82,3 +89,2 @@\n-            r.mouseMove(149, 149);\n-            r.waitForIdle();\n-            r.delay(200);\n+            robot.mouseMove(MOUSE_POS2, MOUSE_POS2);\n+            syncLocationToWindowManager();\n@@ -88,4 +94,2 @@\n-            r.mouseMove(170, 170);\n-            r.waitForIdle();\n-            r.delay(100);\n-\n+            robot.mouseMove(MOUSE_POS3, MOUSE_POS3);\n+            syncLocationToWindowManager();\n@@ -102,1 +106,1 @@\n-        frame1.setBounds(100, 100, 100, 100);\n+        frame1.setBounds(FRAME1_DIM, FRAME1_DIM, FRAME1_DIM, FRAME1_DIM);\n@@ -111,1 +115,1 @@\n-                frame2.setBounds(120, 120, 120, 120);\n+                frame2.setBounds(FRAME2_DIM, FRAME2_DIM, FRAME2_DIM, FRAME2_DIM);\n@@ -138,0 +142,10 @@\n+\n+    private static void syncLocationToWindowManager() {\n+        Toolkit.getDefaultToolkit().sync();\n+        try {\n+            Thread.sleep(500);\n+        } catch (InterruptedException e) {\n+            e.printStackTrace();\n+        }\n+        robot.waitForIdle();\n+    }\n","filename":"test\/jdk\/java\/awt\/Mouse\/GetMousePositionTest\/GetMousePositionWithPopup.java","additions":32,"deletions":18,"binary":false,"changes":50,"status":"modified"}]}