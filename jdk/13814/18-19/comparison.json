{"files":[{"patch":"@@ -111,2 +111,5 @@\n-    \/\/ No need for atomicity, method is called under the Threads_lock\n-    _exited_allocated_bytes += size;\n+    \/\/ No need for an atomic add because called under the Threads_lock,\n+    \/\/ but because _exited_allocated_bytes is read concurrently, need\n+    \/\/ atomic load\/store to avoid readers seeing a partial update\n+    jlong old = Atomic::load(&_exited_allocated_bytes);\n+    Atomic::store(&_exited_allocated_bytes, old + size);\n","filename":"src\/hotspot\/share\/services\/threadService.hpp","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"}]}