{"files":[{"patch":"@@ -2117,0 +2117,9 @@\n+\/\/ Acquires Compilation_lock and waits for it to be notified\n+\/\/ as long as WhiteBox::compilation_locked is true.\n+static void whitebox_lock_compilation() {\n+  MonitorLocker locker(Compilation_lock, Mutex::_no_safepoint_check_flag);\n+  while (WhiteBox::compilation_locked) {\n+    locker.wait();\n+  }\n+}\n+\n@@ -2199,0 +2208,5 @@\n+        if (WhiteBoxAPI && WhiteBox::compilation_locked) {\n+          \/\/ Must switch to native to block\n+          ThreadToNativeFromVM ttn(thread);\n+          whitebox_lock_compilation();\n+        }\n@@ -2260,4 +2274,1 @@\n-        MonitorLocker locker(Compilation_lock, Mutex::_no_safepoint_check_flag);\n-        while (WhiteBox::compilation_locked) {\n-          locker.wait();\n-        }\n+        whitebox_lock_compilation();\n","filename":"src\/hotspot\/share\/compiler\/compileBroker.cpp","additions":15,"deletions":4,"binary":false,"changes":19,"status":"modified"}]}