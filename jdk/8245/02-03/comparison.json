{"files":[{"patch":"@@ -107,0 +107,1 @@\n+            sz = sizeof(optval);\n","filename":"src\/jdk.net\/windows\/native\/libextnet\/WindowsSocketOptions.c","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -45,5 +45,7 @@\n-        DatagramSocket c = new DatagramSocket();\n-        testDatagramSocket(c);\n-        DatagramChannel dc = DatagramChannel.open(fam);\n-        c = dc.socket();\n-        testDatagramSocket(c);\n+        try (DatagramSocket c = new DatagramSocket()) {\n+            testDatagramSocket(c);\n+\t}\n+        try (DatagramChannel dc = DatagramChannel.open(fam)) {\n+            var c = dc.socket();\n+            testDatagramSocket(c);\n+\t}\n@@ -54,1 +56,1 @@\n-        DatagramChannel c1 = DatagramChannel.open(fam);\n+        try (DatagramChannel c1 = DatagramChannel.open(fam)) {\n@@ -56,6 +58,11 @@\n-        if (c1.getOption(IP_DONTFRAGMENT)) {\n-            throw new RuntimeException(\"IP_DONTFRAGMENT should not be set\");\n-        }\n-        c1.setOption(IP_DONTFRAGMENT, true);\n-        if (!c1.getOption(IP_DONTFRAGMENT)) {\n-            throw new RuntimeException(\"IP_DONTFRAGMENT should be set\");\n+            if (c1.getOption(IP_DONTFRAGMENT)) {\n+                throw new RuntimeException(\"IP_DONTFRAGMENT should not be set\");\n+            }\n+            c1.setOption(IP_DONTFRAGMENT, true);\n+            if (!c1.getOption(IP_DONTFRAGMENT)) {\n+                throw new RuntimeException(\"IP_DONTFRAGMENT should be set\");\n+            }\n+            c1.setOption(IP_DONTFRAGMENT, false);\n+            if (c1.getOption(IP_DONTFRAGMENT)) {\n+                throw new RuntimeException(\"IP_DONTFRAGMENT should not be set\");\n+            }\n@@ -63,5 +70,0 @@\n-        c1.setOption(IP_DONTFRAGMENT, false);\n-        if (c1.getOption(IP_DONTFRAGMENT)) {\n-            throw new RuntimeException(\"IP_DONTFRAGMENT should not be set\");\n-        }\n-        c1.close();\n@@ -86,1 +88,1 @@\n-        MulticastSocket c1 = new MulticastSocket();\n+        try (MulticastSocket c1 = new MulticastSocket()) {\n@@ -88,6 +90,11 @@\n-        if (c1.getOption(IP_DONTFRAGMENT)) {\n-            throw new RuntimeException(\"IP_DONTFRAGMENT should not be set\");\n-        }\n-        c1.setOption(IP_DONTFRAGMENT, true);\n-        if (!c1.getOption(IP_DONTFRAGMENT)) {\n-            throw new RuntimeException(\"IP_DONTFRAGMENT should be set\");\n+            if (c1.getOption(IP_DONTFRAGMENT)) {\n+                throw new RuntimeException(\"IP_DONTFRAGMENT should not be set\");\n+            }\n+            c1.setOption(IP_DONTFRAGMENT, true);\n+            if (!c1.getOption(IP_DONTFRAGMENT)) {\n+                throw new RuntimeException(\"IP_DONTFRAGMENT should be set\");\n+            }\n+            c1.setOption(IP_DONTFRAGMENT, false);\n+            if (c1.getOption(IP_DONTFRAGMENT)) {\n+                throw new RuntimeException(\"IP_DONTFRAGMENT should not be set\");\n+            }\n@@ -95,5 +102,0 @@\n-        c1.setOption(IP_DONTFRAGMENT, false);\n-        if (c1.getOption(IP_DONTFRAGMENT)) {\n-            throw new RuntimeException(\"IP_DONTFRAGMENT should not be set\");\n-        }\n-        c1.close();\n","filename":"test\/jdk\/jdk\/net\/ExtendedSocketOption\/DontFragmentTest.java","additions":31,"deletions":29,"binary":false,"changes":60,"status":"modified"}]}