{"files":[{"patch":"@@ -1620,1 +1620,1 @@\n-                                    bool is_double, bool is_min) {\n+                                    bool is_double, bool is_min, int length_in_bytes) {\n@@ -1623,1 +1623,1 @@\n-  vsetvli(t0, x0, is_double ? Assembler::e64 : Assembler::e32);\n+  rvv_vsetvli(is_double ? T_DOUBLE : T_FLOAT, length_in_bytes);\n","filename":"src\/hotspot\/cpu\/riscv\/c2_MacroAssembler_riscv.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -188,1 +188,1 @@\n-                  bool is_double, bool is_min);\n+                  bool is_double, bool is_min, int length_in_bytes);\n","filename":"src\/hotspot\/cpu\/riscv\/c2_MacroAssembler_riscv.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -135,1 +135,1 @@\n-    __ vsetvli(t0, x0, Assembler::e8);\n+    __ rvv_vsetvli(T_BYTE, Matcher::vector_length_in_bytes(this));\n@@ -149,1 +149,1 @@\n-    __ vsetvli(t0, x0, Assembler::e16);\n+    __ rvv_vsetvli(T_SHORT, Matcher::vector_length_in_bytes(this));\n@@ -163,1 +163,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_INT, Matcher::vector_length_in_bytes(this));\n@@ -177,1 +177,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -189,1 +189,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_FLOAT, Matcher::vector_length_in_bytes(this));\n@@ -200,1 +200,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_DOUBLE, Matcher::vector_length_in_bytes(this));\n@@ -213,1 +213,1 @@\n-    __ vsetvli(t0, x0, Assembler::e8);\n+    __ rvv_vsetvli(T_BYTE, Matcher::vector_length_in_bytes(this));\n@@ -226,1 +226,1 @@\n-    __ vsetvli(t0, x0, Assembler::e16);\n+    __ rvv_vsetvli(T_SHORT, Matcher::vector_length_in_bytes(this));\n@@ -239,1 +239,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_INT, Matcher::vector_length_in_bytes(this));\n@@ -252,1 +252,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -265,1 +265,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_FLOAT, Matcher::vector_length_in_bytes(this));\n@@ -278,1 +278,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_DOUBLE, Matcher::vector_length_in_bytes(this));\n@@ -293,1 +293,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -308,1 +308,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -323,1 +323,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -338,1 +338,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_FLOAT, Matcher::vector_length_in_bytes(this));\n@@ -351,1 +351,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_DOUBLE, Matcher::vector_length_in_bytes(this));\n@@ -369,2 +369,1 @@\n-    Assembler::SEW sew = Assembler::elemtype_to_sew(bt);\n-    __ vsetvli(t0, x0, sew);\n+    __ rvv_vsetvli(bt, Matcher::vector_length_in_bytes(this));\n@@ -385,2 +384,1 @@\n-    Assembler::SEW sew = Assembler::elemtype_to_sew(bt);\n-    __ vsetvli(t0, x0, sew);\n+    __ rvv_vsetvli(bt, Matcher::vector_length_in_bytes(this));\n@@ -404,1 +402,1 @@\n-                   false \/* is_double *\/, false \/* is_min *\/);\n+                   false \/* is_double *\/, false \/* is_min *\/, Matcher::vector_length_in_bytes(this));\n@@ -418,1 +416,1 @@\n-                   true \/* is_double *\/, false \/* is_min *\/);\n+                   true \/* is_double *\/, false \/* is_min *\/, Matcher::vector_length_in_bytes(this));\n@@ -432,1 +430,1 @@\n-                   false \/* is_double *\/, true \/* is_min *\/);\n+                   false \/* is_double *\/, true \/* is_min *\/, Matcher::vector_length_in_bytes(this));\n@@ -446,1 +444,1 @@\n-                   true \/* is_double *\/, true \/* is_min *\/);\n+                   true \/* is_double *\/, true \/* is_min *\/, Matcher::vector_length_in_bytes(this));\n@@ -460,1 +458,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_FLOAT, Matcher::vector_length_in_bytes(this));\n@@ -474,1 +472,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_DOUBLE, Matcher::vector_length_in_bytes(this));\n@@ -492,1 +490,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_FLOAT, Matcher::vector_length_in_bytes(this));\n@@ -508,1 +506,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_DOUBLE, Matcher::vector_length_in_bytes(this));\n@@ -526,1 +524,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_FLOAT, Matcher::vector_length_in_bytes(this));\n@@ -542,1 +540,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_DOUBLE, Matcher::vector_length_in_bytes(this));\n@@ -558,1 +556,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_FLOAT, Matcher::vector_length_in_bytes(this));\n@@ -572,1 +570,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_DOUBLE, Matcher::vector_length_in_bytes(this));\n@@ -587,1 +585,1 @@\n-    __ vsetvli(t0, x0, Assembler::e8);\n+    __ rvv_vsetvli(T_BYTE, Matcher::vector_length_in_bytes(this));\n@@ -600,1 +598,1 @@\n-    __ vsetvli(t0, x0, Assembler::e16);\n+    __ rvv_vsetvli(T_SHORT, Matcher::vector_length_in_bytes(this));\n@@ -613,1 +611,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_INT, Matcher::vector_length_in_bytes(this));\n@@ -626,1 +624,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -641,1 +639,1 @@\n-    __ vsetvli(t0, x0, Assembler::e8);\n+    __ rvv_vsetvli(T_BYTE, Matcher::vector_length_in_bytes(this));\n@@ -654,1 +652,1 @@\n-    __ vsetvli(t0, x0, Assembler::e16);\n+    __ rvv_vsetvli(T_SHORT, Matcher::vector_length_in_bytes(this));\n@@ -667,1 +665,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_INT, Matcher::vector_length_in_bytes(this));\n@@ -680,1 +678,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -694,1 +692,1 @@\n-    __ vsetvli(t0, x0, Assembler::e8);\n+    __ rvv_vsetvli(T_BYTE, Matcher::vector_length_in_bytes(this));\n@@ -706,1 +704,1 @@\n-    __ vsetvli(t0, x0, Assembler::e16);\n+    __ rvv_vsetvli(T_SHORT, Matcher::vector_length_in_bytes(this));\n@@ -718,1 +716,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_INT, Matcher::vector_length_in_bytes(this));\n@@ -730,1 +728,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -742,1 +740,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_FLOAT, Matcher::vector_length_in_bytes(this));\n@@ -754,1 +752,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_DOUBLE, Matcher::vector_length_in_bytes(this));\n@@ -769,2 +767,1 @@\n-    Assembler::SEW sew = Assembler::elemtype_to_sew(bt);\n-    __ vsetvli(t0, x0, sew);\n+    __ rvv_vsetvli(bt, Matcher::vector_length_in_bytes(this));\n@@ -781,1 +778,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -794,1 +791,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_FLOAT, Matcher::vector_length_in_bytes(this));\n@@ -805,1 +802,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_DOUBLE, Matcher::vector_length_in_bytes(this));\n@@ -1164,1 +1161,1 @@\n-    __ vsetvli(t0, x0, Assembler::e8);\n+    __ rvv_vsetvli(T_BYTE, Matcher::vector_length_in_bytes(this));\n@@ -1175,1 +1172,1 @@\n-    __ vsetvli(t0, x0, Assembler::e16);\n+    __ rvv_vsetvli(T_SHORT, Matcher::vector_length_in_bytes(this));\n@@ -1186,1 +1183,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_INT, Matcher::vector_length_in_bytes(this));\n@@ -1197,1 +1194,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -1208,1 +1205,1 @@\n-    __ vsetvli(t0, x0, Assembler::e8);\n+    __ rvv_vsetvli(T_BYTE, Matcher::vector_length_in_bytes(this));\n@@ -1219,1 +1216,1 @@\n-    __ vsetvli(t0, x0, Assembler::e16);\n+    __ rvv_vsetvli(T_SHORT, Matcher::vector_length_in_bytes(this));\n@@ -1230,1 +1227,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_INT, Matcher::vector_length_in_bytes(this));\n@@ -1241,1 +1238,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -1252,1 +1249,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_FLOAT, Matcher::vector_length_in_bytes(this));\n@@ -1263,1 +1260,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_DOUBLE, Matcher::vector_length_in_bytes(this));\n@@ -1280,1 +1277,1 @@\n-    __ vsetvli(t0, x0, Assembler::e8);\n+    __ rvv_vsetvli(T_BYTE, Matcher::vector_length_in_bytes(this));\n@@ -1302,1 +1299,1 @@\n-    __ vsetvli(t0, x0, Assembler::e16);\n+    __ rvv_vsetvli(T_SHORT, Matcher::vector_length_in_bytes(this));\n@@ -1320,1 +1317,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_INT, Matcher::vector_length_in_bytes(this));\n@@ -1332,1 +1329,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -1348,1 +1345,1 @@\n-    __ vsetvli(t0, x0, Assembler::e8);\n+    __ rvv_vsetvli(T_BYTE, Matcher::vector_length_in_bytes(this));\n@@ -1370,1 +1367,1 @@\n-    __ vsetvli(t0, x0, Assembler::e16);\n+    __ rvv_vsetvli(T_SHORT, Matcher::vector_length_in_bytes(this));\n@@ -1388,1 +1385,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_INT, Matcher::vector_length_in_bytes(this));\n@@ -1400,1 +1397,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -1416,1 +1413,1 @@\n-    __ vsetvli(t0, x0, Assembler::e8);\n+    __ rvv_vsetvli(T_BYTE, Matcher::vector_length_in_bytes(this));\n@@ -1438,1 +1435,1 @@\n-    __ vsetvli(t0, x0, Assembler::e16);\n+    __ rvv_vsetvli(T_SHORT, Matcher::vector_length_in_bytes(this));\n@@ -1457,1 +1454,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_INT, Matcher::vector_length_in_bytes(this));\n@@ -1470,1 +1467,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -1483,1 +1480,1 @@\n-    __ vsetvli(t0, x0, Assembler::e8);\n+    __ rvv_vsetvli(T_BYTE, Matcher::vector_length_in_bytes(this));\n@@ -1501,1 +1498,1 @@\n-    __ vsetvli(t0, x0, Assembler::e16);\n+    __ rvv_vsetvli(T_SHORT, Matcher::vector_length_in_bytes(this));\n@@ -1519,1 +1516,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_INT, Matcher::vector_length_in_bytes(this));\n@@ -1537,1 +1534,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -1554,1 +1551,1 @@\n-    __ vsetvli(t0, x0, Assembler::e8);\n+    __ rvv_vsetvli(T_BYTE, Matcher::vector_length_in_bytes(this));\n@@ -1576,1 +1573,1 @@\n-    __ vsetvli(t0, x0, Assembler::e16);\n+    __ rvv_vsetvli(T_SHORT, Matcher::vector_length_in_bytes(this));\n@@ -1598,1 +1595,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_INT, Matcher::vector_length_in_bytes(this));\n@@ -1616,1 +1613,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -1633,1 +1630,1 @@\n-    __ vsetvli(t0, x0, Assembler::e8);\n+    __ rvv_vsetvli(T_BYTE, Matcher::vector_length_in_bytes(this));\n@@ -1650,1 +1647,1 @@\n-    __ vsetvli(t0, x0, Assembler::e16);\n+    __ rvv_vsetvli(T_SHORT, Matcher::vector_length_in_bytes(this));\n@@ -1667,1 +1664,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_INT, Matcher::vector_length_in_bytes(this));\n@@ -1680,1 +1677,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -1692,1 +1689,1 @@\n-    __ vsetvli(t0, x0, Assembler::e8);\n+    __ rvv_vsetvli(T_BYTE, Matcher::vector_length_in_bytes(this));\n@@ -1705,1 +1702,1 @@\n-    __ vsetvli(t0, x0, Assembler::e16);\n+    __ rvv_vsetvli(T_SHORT, Matcher::vector_length_in_bytes(this));\n@@ -1717,1 +1714,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_INT, Matcher::vector_length_in_bytes(this));\n@@ -1729,1 +1726,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -1742,1 +1739,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_INT, Matcher::vector_length_in_bytes(this));\n@@ -1753,1 +1750,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -1766,1 +1763,1 @@\n-    __ vsetvli(t0, x0, Assembler::e8);\n+    __ rvv_vsetvli(T_BYTE, Matcher::vector_length_in_bytes(this));\n@@ -1778,1 +1775,1 @@\n-    __ vsetvli(t0, x0, Assembler::e16);\n+    __ rvv_vsetvli(T_SHORT, Matcher::vector_length_in_bytes(this));\n@@ -1790,1 +1787,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_INT, Matcher::vector_length_in_bytes(this));\n@@ -1802,1 +1799,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_LONG, Matcher::vector_length_in_bytes(this));\n@@ -1814,1 +1811,1 @@\n-    __ vsetvli(t0, x0, Assembler::e32);\n+    __ rvv_vsetvli(T_FLOAT, Matcher::vector_length_in_bytes(this));\n@@ -1826,1 +1823,1 @@\n-    __ vsetvli(t0, x0, Assembler::e64);\n+    __ rvv_vsetvli(T_DOUBLE, Matcher::vector_length_in_bytes(this));\n@@ -2100,2 +2097,1 @@\n-    Assembler::SEW sew = Assembler::elemtype_to_sew(bt);\n-    __ vsetvli(t0, x0, sew);\n+    __ rvv_vsetvli(bt, Matcher::vector_length_in_bytes(this));\n","filename":"src\/hotspot\/cpu\/riscv\/riscv_v.ad","additions":96,"deletions":100,"binary":false,"changes":196,"status":"modified"}]}