{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,0 +25,1 @@\n+import java.awt.Window;\n@@ -30,1 +31,0 @@\n-import java.lang.reflect.InvocationTargetException;\n@@ -37,1 +37,0 @@\n-import javax.swing.JTextArea;\n@@ -39,1 +38,1 @@\n-import javax.swing.SwingUtilities;\n+import javax.swing.JTextArea;\n@@ -54,0 +53,51 @@\n+    private static final String INSTRUCTIONS = \"\"\"\n+            <html><body>\n+            Instructions to Test:\n+            <ol>\n+            <li>Open an elevated <i>Command Prompt<\/i>.\n+            <li>Paste the following commands:\n+            <pre><code>cd \/d C:\\\\\n+            mkdir FileChooserTest\n+            cd FileChooserTest\n+            mkdir target\n+            mklink \/d link target<\/code><\/pre>\n+\n+            <li>Navigate to <code>C:\\\\FileChooserTest<\/code> in\n+                the <code>JFileChooser<\/code>.\n+            <li>Perform testing in single- and multi-selection modes:\n+                <ul style=\"margin-bottom: 0px\">\n+                <li><strong>Single-selection:<\/strong>\n+                    <ol>\n+                        <li>Ensure <b>Enable multi-selection<\/b> is cleared\n+                            (the default state).\n+                        <li>Click <code>link<\/code> directory,\n+                            the absolute path of the symbolic\n+                            link should be displayed.<br>\n+                            If it's <code>null<\/code>, click <b>Fail<\/b>.\n+                        <li>Click <code>target<\/code> directory,\n+                            its absolute path should be displayed.\n+                    <\/ol>\n+                <li><strong>Multi-selection:<\/strong>\n+                    <ol>\n+                        <li>Select <b>Enable multi-selection<\/b>.\n+                        <li>Click <code>link<\/code>,\n+                        <li>Press <kbd>Ctrl<\/kbd> and\n+                            then click <code>target<\/code>.\n+                        <li>Both should be selected and\n+                            their absolute paths should be displayed.\n+                        <li>If <code>link<\/code> can't be selected or\n+                            if its absolute path is <code>null<\/code>,\n+                            click <b>Fail<\/b>.\n+                    <\/ol>\n+                <\/ul>\n+                <p>If <code>link<\/code> can be selected in both\n+                single- and multi-selection modes, click <b>Pass<\/b>.<\/p>\n+            <li>When done with testing, paste the following commands to\n+               remove the <code>FileChooserTest<\/code> directory:\n+            <pre><code>cd \\\\\n+            rmdir \/s \/q C:\\\\FileChooserTest<\/code><\/pre>\n+\n+            or use File Explorer to clean it up.\n+            <\/ol>\n+            \"\"\";\n+\n@@ -59,1 +109,0 @@\n-    static PassFailJFrame passFailJFrame;\n@@ -62,10 +111,7 @@\n-        SwingUtilities.invokeAndWait(new Runnable() {\n-            public void run() {\n-                try {\n-                    initialize();\n-                } catch (InterruptedException | InvocationTargetException e) {\n-                    throw new RuntimeException(e);\n-                }\n-            }\n-        });\n-        passFailJFrame.awaitAndCheck();\n+        PassFailJFrame.builder()\n+                      .instructions(INSTRUCTIONS)\n+                      .rows(35)\n+                      .columns(50)\n+                      .testUI(FileChooserSymLinkTest::createTestUI)\n+                      .build()\n+                      .awaitAndCheck();\n@@ -74,39 +120,1 @@\n-    static void initialize() throws InterruptedException, InvocationTargetException {\n-        \/\/Initialize the components\n-        final String INSTRUCTIONS = \"\"\"\n-                Instructions to Test:\n-                1. Open an elevated Command Prompt.\n-                2. Paste the following commands:\n-                cd \/d C:\\\\\n-                mkdir FileChooserTest\n-                cd FileChooserTest\n-                mkdir target\n-                mklink \/d link target\n-\n-                3. Navigate to C:\\\\FileChooserTest in the JFileChooser.\n-                4. Use \"Enable Multi-Selection\" checkbox to enable\/disable\n-                   MultiSelection Mode\n-                5. Single-selection:\n-                   Click \"link\" directory, the absolute path of the symbolic\n-                   link should be displayed. If it's null, click FAIL.\n-                   Click \"target\" directory, its absolute path should be\n-                   displayed.\n-\n-                   Enable multiple selection by clicking the checkbox.\n-                   Multi-selection:\n-                   Click \"link\", press Ctrl and then click \"target\".\n-                   Both should be selected and their absolute paths should be\n-                   displayed.\n-\n-                   If \"link\" can't be selected or if its absolute path is null,\n-                   click FAIL.\n-\n-                   If \"link\" can be selected in both single- and multi-selection modes,\n-                   click PASS.\n-                6. When done with testing, paste the following commands to\n-                   remove the 'FileChooserTest' directory:\n-                cd \\\\\n-                rmdir \/s \/q C:\\\\FileChooserTest\n-\n-                or use File Explorer to clean it up.\n-                \"\"\";\n+    private static Window createTestUI() {\n@@ -118,1 +126,0 @@\n-        passFailJFrame = new PassFailJFrame(\"Test Instructions\", INSTRUCTIONS, 5L, 35, 40);\n@@ -120,2 +127,0 @@\n-        PassFailJFrame.addTestWindow(frame);\n-        PassFailJFrame.positionTestWindow(frame, PassFailJFrame.Position.HORIZONTAL);\n@@ -156,1 +161,1 @@\n-        frame.setVisible(true);\n+        return frame;\n","filename":"test\/jdk\/javax\/swing\/JFileChooser\/FileChooserSymLinkTest.java","additions":63,"deletions":58,"binary":false,"changes":121,"status":"modified"}]}