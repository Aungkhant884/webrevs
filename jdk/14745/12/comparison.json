{"files":[{"patch":"@@ -42,3 +42,3 @@\n-     *       0 -> '00' -> ('0' << 8) | '0' -> 12336\n-     *       1 -> '01' -> ('0' << 8) | '1' -> 12337\n-     *       2 -> '02' -> ('0' << 8) | '2' -> 12338\n+     *       0 -> '00' -> '0' | ('0' << 8) -> 0x3030\n+     *       1 -> '01' -> '0' | ('1' << 8) -> 0x3130\n+     *       2 -> '02' -> '0' | ('2' << 8) -> 0x3230\n@@ -48,3 +48,3 @@\n-     *      10 -> '0a' -> ('0' << 8) | 'a' -> 12385\n-     *      11 -> '0b' -> ('0' << 8) | 'b' -> 12386\n-     *      12 -> '0c' -> ('0' << 8) | 'b' -> 12387\n+     *      10 -> '0a' -> '0' | ('a' << 8) -> 0x6130\n+     *      11 -> '0b' -> '0' | ('b' << 8) -> 0x6230\n+     *      12 -> '0c' -> '0' | ('b' << 8) -> 0x6330\n@@ -54,3 +54,3 @@\n-     *      26 -> '1a' -> ('1' << 8) | 'a' -> 12641\n-     *      27 -> '1b' -> ('1' << 8) | 'b' -> 12642\n-     *      28 -> '1c' -> ('1' << 8) | 'c' -> 12643\n+     *      26 -> '1a' -> '1' | ('a' << 8) -> 0x6131\n+     *      27 -> '1b' -> '1' | ('b' << 8) -> 0x6231\n+     *      28 -> '1c' -> '1' | ('c' << 8) -> 0x6331\n@@ -60,14 +60,3 @@\n-     *     253 -> 'fd' -> ('f' << 8) | 'd' -> 26212\n-     *     254 -> 'fe' -> ('f' << 8) | 'e' -> 26213\n-     *     255 -> 'ff' -> ('f' << 8) | 'f' -> 26214\n-     * <\/pre>\n-     * <p>use like this:\n-     * <pre>\n-     *     int v = 254;\n-     *\n-     *     char[] chars = new char[2];\n-     *\n-     *     short i = DIGITS[v]; \/\/ 26213\n-     *\n-     *     chars[0] = (char) (byte) (i >> 8); \/\/ 'f'\n-     *     chars[1] = (char) (byte) i;        \/\/ 'e'\n+     *     253 -> 'fd' -> 'f' | ('d' << 8) -> 0x6466\n+     *     254 -> 'fe' -> 'f' | ('e' << 8) -> 0x6566\n+     *     255 -> 'ff' -> 'f' | ('f' << 8) -> 0x6666\n@@ -88,1 +77,1 @@\n-            short hi = (short) ((i < 10 ? i + '0' : i - 10 + 'a') << 8);\n+            short lo = (short) (i < 10 ? i + '0' : i - 10 + 'a');\n@@ -91,2 +80,2 @@\n-                short lo = (short) (j < 10 ? j + '0' : j - 10 + 'a');\n-                digits[(i << 4) + j] = (short) (hi | lo);\n+                short hi = (short) ((j < 10 ? j + '0' : j - 10 + 'a') << 8);\n+                digits[(i << 4) + j] = (short) (lo | hi);\n@@ -106,1 +95,3 @@\n-     * Combine two hex shorts into one int based on big endian\n+     * Return a little-endian packed integer for the 4 ASCII bytes for an input unsigned 2-byte integer.\n+     * {@code b0} is the most significant byte and {@code b1} is the least significant byte.\n+     * The integer is passed byte-wise to allow reordering of execution.\n@@ -108,2 +99,2 @@\n-    static int digit(int b0, int b1) {\n-        return (DIGITS[b0 & 0xff] << 16) | DIGITS[b1 & 0xff];\n+    static int packDigits(int b0, int b1) {\n+        return DIGITS[b0 & 0xff] | (DIGITS[b1 & 0xff] << 16);\n@@ -113,1 +104,3 @@\n-     * Combine four hex shorts into one long based on big endian\n+     * Return a little-endian packed long for the 8 ASCII bytes for an input unsigned 4-byte integer.\n+     * {@code b0} is the most significant byte and {@code b3} is the least significant byte.\n+     * The integer is passed byte-wise to allow reordering of execution.\n@@ -115,5 +108,5 @@\n-    static long digit(int b0, int b1, int b2, int b3) {\n-        return (((long) DIGITS[b0 & 0xff]) << 48)\n-                | (((long) DIGITS[b1 & 0xff]) << 32)\n-                | (DIGITS[b2 & 0xff] << 16)\n-                | DIGITS[b3 & 0xff];\n+    static long packDigits(int b0, int b1, int b2, int b3) {\n+        return DIGITS[b0 & 0xff]\n+                | (DIGITS[b1 & 0xff] << 16)\n+                | (((long) DIGITS[b2 & 0xff]) << 32)\n+                | (((long) DIGITS[b3 & 0xff]) << 48);\n@@ -128,1 +121,0 @@\n-            putCharMH.invokeExact(buffer, --index, digits & 0xFF);\n@@ -130,0 +122,1 @@\n+            putCharMH.invokeExact(buffer, --index, digits & 0xFF);\n@@ -133,1 +126,1 @@\n-        putCharMH.invokeExact(buffer, --index, digits & 0xFF);\n+        putCharMH.invokeExact(buffer, --index, digits >> 8);\n@@ -136,1 +129,1 @@\n-            putCharMH.invokeExact(buffer, --index, digits >> 8);\n+            putCharMH.invokeExact(buffer, --index, digits & 0xFF);\n","filename":"src\/java.base\/share\/classes\/java\/util\/HexDigits.java","additions":31,"deletions":38,"binary":false,"changes":69,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n-import jdk.internal.util.ByteArray;\n+import jdk.internal.util.ByteArrayLittleEndian;\n@@ -79,1 +79,0 @@\n-\n@@ -472,1 +471,1 @@\n-        ByteArray.setLong(\n+        ByteArrayLittleEndian.setLong(\n@@ -475,1 +474,1 @@\n-                HexDigits.digit((int) (msb >> 56), (int) (msb >> 48), (int) (msb >> 40), (int) (msb >> 32)));\n+                HexDigits.packDigits((int) (msb >> 56), (int) (msb >> 48), (int) (msb >> 40), (int) (msb >> 32)));\n@@ -477,1 +476,1 @@\n-        ByteArray.setInt(\n+        ByteArrayLittleEndian.setInt(\n@@ -480,1 +479,1 @@\n-                HexDigits.digit(((int) msb) >> 24, ((int) msb) >> 16));\n+                HexDigits.packDigits(((int) msb) >> 24, ((int) msb) >> 16));\n@@ -482,1 +481,1 @@\n-        ByteArray.setInt(\n+        ByteArrayLittleEndian.setInt(\n@@ -485,1 +484,1 @@\n-                HexDigits.digit(((int) msb) >> 8, (int) msb));\n+                HexDigits.packDigits(((int) msb) >> 8, (int) msb));\n@@ -487,1 +486,1 @@\n-        ByteArray.setInt(\n+        ByteArrayLittleEndian.setInt(\n@@ -490,1 +489,1 @@\n-                HexDigits.digit((int) (lsb >> 56), (int) (lsb >> 48)));\n+                HexDigits.packDigits((int) (lsb >> 56), (int) (lsb >> 48)));\n@@ -492,1 +491,1 @@\n-        ByteArray.setLong(\n+        ByteArrayLittleEndian.setLong(\n@@ -495,2 +494,2 @@\n-                HexDigits.digit(((int) (lsb >> 40)), (int) (lsb >> 32), ((int) lsb) >> 24, ((int) lsb) >> 16));\n-        ByteArray.setInt(\n+                HexDigits.packDigits((int) (lsb >> 40), (int) (lsb >> 32), ((int) lsb) >> 24, ((int) lsb) >> 16));\n+        ByteArrayLittleEndian.setInt(\n@@ -499,1 +498,1 @@\n-                HexDigits.digit(((int) lsb) >> 8, (int) lsb));\n+                HexDigits.packDigits(((int) lsb) >> 8, (int) lsb));\n","filename":"src\/java.base\/share\/classes\/java\/util\/UUID.java","additions":13,"deletions":14,"binary":false,"changes":27,"status":"modified"}]}