{"files":[{"patch":"@@ -1139,6 +1139,0 @@\n-  MutexLocker ml(Heap_lock);\n-  IterateOverHeapObjectClosure blk(this,\n-                                   klass,\n-                                   object_filter,\n-                                   heap_object_callback,\n-                                   user_data);\n@@ -1146,3 +1140,12 @@\n-  GrowableArray<jlong> dead_objects(&dead_object_arena, 10, 0, 0);\n-  VM_HeapIterateOperation op(&blk, &dead_objects);\n-  VMThread::execute(&op);\n+  GrowableArray <jlong> dead_objects(&dead_object_arena, 10, 0, 0);\n+  {\n+    MutexLocker ml(Heap_lock);\n+    IterateOverHeapObjectClosure blk(this,\n+                                     klass,\n+                                     object_filter,\n+                                     heap_object_callback,\n+                                     user_data);\n+    VM_HeapIterateOperation op(&blk, &dead_objects);\n+    VMThread::execute(&op);\n+  }\n+  \/\/ Post events outside of Heap_lock\n","filename":"src\/hotspot\/share\/prims\/jvmtiTagMap.cpp","additions":12,"deletions":9,"binary":false,"changes":21,"status":"modified"}]}