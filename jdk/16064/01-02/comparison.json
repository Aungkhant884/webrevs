{"files":[{"patch":"@@ -234,3 +234,0 @@\n-     * @implSpec {@link #ChoiceFormat(String)} may invoke this method.\n-     * Therefore, any changes made to the {@code applyPattern} method in subclasses\n-     * may be reflected in the constructor as well.\n@@ -245,0 +242,11 @@\n+        applyPatternImpl(newPattern);\n+    }\n+\n+    \/**\n+     * Implementation of applying a pattern to this ChoiceFormat.\n+     * This method processes a String pattern in accordance with the ChoiceFormat\n+     * pattern syntax and populates the internal {@code limits} and {@code formats}\n+     * array variables. See the {@linkplain ##patterns} section for\n+     * further understanding of certain special characters: \"#\", \"<\", \"\\u2264\", \"|\".\n+     *\/\n+    private void applyPatternImpl(String newPattern) {\n@@ -325,2 +333,2 @@\n-     * {@return a pattern {@code string} that represents the the limits and formats\n-     * of this ChoiceFormat object}\n+     * {@return a pattern {@code string} that represents the {@code limits} and\n+     * {@code formats} of this ChoiceFormat object}\n@@ -395,1 +403,1 @@\n-        applyPattern(newPattern);\n+        applyPatternImpl(newPattern);\n@@ -410,1 +418,1 @@\n-        setChoices(limits, formats);\n+        setChoicesImpl(limits, formats);\n@@ -416,3 +424,0 @@\n-     * @implSpec {@link #ChoiceFormat(double[], String[])} may invoke this method.\n-     * Therefore, any changes made to the {@code setChoices} method in subclasses\n-     * may be reflected in the constructor as well.\n@@ -432,0 +437,8 @@\n+        setChoicesImpl(limits, formats);\n+    }\n+\n+    \/**\n+     * Implementation of populating the {@code limits} and\n+     * {@code formats} of this ChoiceFormat. Defensive copies are made.\n+     *\/\n+    private void setChoicesImpl(double[] limits, String[] formats) {\n@@ -444,2 +457,1 @@\n-        double[] newLimits = Arrays.copyOf(choiceLimits, choiceLimits.length);\n-        return newLimits;\n+        return Arrays.copyOf(choiceLimits, choiceLimits.length);\n@@ -452,2 +464,1 @@\n-        Object[] newFormats = Arrays.copyOf(choiceFormats, choiceFormats.length);\n-        return newFormats;\n+        return Arrays.copyOf(choiceFormats, choiceFormats.length);\n@@ -549,1 +560,1 @@\n-    public static final double nextDouble (double d) {\n+    public static double nextDouble (double d) {\n@@ -564,1 +575,1 @@\n-    public static final double previousDouble (double d) {\n+    public static double previousDouble (double d) {\n","filename":"src\/java.base\/share\/classes\/java\/text\/ChoiceFormat.java","additions":27,"deletions":16,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -374,1 +374,1 @@\n-     * <a href=\"#patterns\">class description<\/a>.\n+     * {@linkplain ##patterns class description}.\n@@ -383,1 +383,1 @@\n-        applyPattern(pattern);\n+        applyPatternImpl(pattern);\n@@ -392,1 +392,1 @@\n-     * <a href=\"#patterns\">class description<\/a>.\n+     * {@linkplain ##patterns class description}.\n@@ -411,1 +411,1 @@\n-        applyPattern(pattern);\n+        applyPatternImpl(pattern);\n@@ -450,1 +450,1 @@\n-     * <a href=\"#patterns\">class description<\/a>.\n+     * {@linkplain ##patterns class description}.\n@@ -452,4 +452,0 @@\n-     * @implSpec {@link #MessageFormat(String)} and\n-     * {@link #MessageFormat(String, Locale)} may invoke this method.\n-     * Therefore, any changes made to the {@code applyPattern} method in\n-     * subclasses may be reflected in the constructors as well.\n@@ -461,1 +457,0 @@\n-    @SuppressWarnings(\"fallthrough\") \/\/ fallthrough in switch is expected, suppress it\n@@ -463,0 +458,15 @@\n+        applyPatternImpl(pattern);\n+    }\n+\n+    \/**\n+     * Implementation of applying a pattern to this MessageFormat.\n+     * This method processes a String pattern in accordance with the MessageFormat\n+     * pattern syntax and sets the internal {@code pattern} variable as well as\n+     * populating the {@code formats} array with the subformats defined in the\n+     * pattern. See the {@linkplain ##patterns} section for further understanding\n+     * of certain special characters: \"{\", \"}\", \",\". See {@linkplain\n+     * ##makeFormat(int, int, StringBuilder[])} for the implementation of setting\n+     * a subformat.\n+     *\/\n+    @SuppressWarnings(\"fallthrough\") \/\/ fallthrough in switch is expected, suppress it\n+    private void applyPatternImpl(String pattern) {\n@@ -516,0 +526,1 @@\n+                                \/\/ Set the subformat\n@@ -1599,1 +1610,1 @@\n-    private static final int findKeyword(String s, String[] list) {\n+    private static int findKeyword(String s, String[] list) {\n@@ -1616,2 +1627,2 @@\n-    private static final void copyAndFixQuotes(String source, int start, int end,\n-                                               StringBuilder target) {\n+    private static void copyAndFixQuotes(String source, int start, int end,\n+                                         StringBuilder target) {\n","filename":"src\/java.base\/share\/classes\/java\/text\/MessageFormat.java","additions":24,"deletions":13,"binary":false,"changes":37,"status":"modified"}]}