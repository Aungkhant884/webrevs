{"files":[{"patch":"@@ -392,1 +392,1 @@\n-    if (!is_old_class(ik)) {\n+    if (!has_old_class_version(ik)) {\n@@ -577,2 +577,6 @@\n-\/\/ Check if a class or its super class\/interface is old.\n-bool MetaspaceShared::is_old_class(InstanceKlass* ik) {\n+\/\/ Check if a class or its super class\/interface has a version older than 50.\n+\/\/ CDS will not perform verification of old classes during dump time because\n+\/\/ without changing the old verifier, the verification constraint cannot be\n+\/\/ retrieved during dump time.\n+\/\/ Verification of archived old classes will be performed during run time.\n+bool MetaspaceShared::has_old_class_version(InstanceKlass* ik) {\n@@ -585,1 +589,1 @@\n-  if (is_old_class(ik->java_super())) {\n+  if (has_old_class_version(ik->java_super())) {\n@@ -591,1 +595,1 @@\n-    if (is_old_class(interfaces->at(i))) {\n+    if (has_old_class_version(interfaces->at(i))) {\n@@ -601,1 +605,1 @@\n-  return DumpSharedSpaces ? !MetaspaceShared::is_old_class(ik) : !ik->is_shared_unregistered_class();\n+  return DumpSharedSpaces ? !MetaspaceShared::has_old_class_version(ik) : !ik->is_shared_unregistered_class();\n@@ -781,1 +785,1 @@\n-  if (ik->is_loaded() && !ik->is_linked() && !MetaspaceShared::is_old_class(ik) &&\n+  if (ik->is_loaded() && !ik->is_linked() && !MetaspaceShared::has_old_class_version(ik) &&\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.cpp","additions":11,"deletions":7,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -140,1 +140,1 @@\n-  static bool is_old_class(InstanceKlass* ik) NOT_CDS_RETURN_(false);\n+  static bool has_old_class_version(InstanceKlass* ik) NOT_CDS_RETURN_(false);\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1385,1 +1385,1 @@\n-      if (!MetaspaceShared::is_old_class(k)) {\n+      if (!MetaspaceShared::has_old_class_version(k)) {\n@@ -1400,1 +1400,1 @@\n-  if (MetaspaceShared::is_old_class(k) && k->is_linked()) {\n+  if (MetaspaceShared::has_old_class_version(k) && k->is_linked()) {\n","filename":"src\/hotspot\/share\/classfile\/systemDictionaryShared.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -574,1 +574,1 @@\n-    assert(MetaspaceShared::is_old_class(klass), \"only shared old classes aren't rewritten\");\n+    assert(MetaspaceShared::has_old_class_version(klass), \"only shared old classes aren't rewritten\");\n","filename":"src\/hotspot\/share\/interpreter\/rewriter.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2432,1 +2432,1 @@\n-  if (MetaspaceShared::is_old_class(this)) {\n+  if (MetaspaceShared::has_old_class_version(this)) {\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1097,2 +1097,2 @@\n-     !MetaspaceShared::is_old_class(m->method_holder()) &&\n-     !MetaspaceShared::is_old_class(klass)) {\n+     !MetaspaceShared::has_old_class_version(m->method_holder()) &&\n+     !MetaspaceShared::has_old_class_version(klass)) {\n","filename":"src\/hotspot\/share\/oops\/klassVtable.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}