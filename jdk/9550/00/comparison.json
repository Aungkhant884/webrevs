{"files":[{"patch":"@@ -315,3 +315,1 @@\n-#ifdef ASSERT\n-  call->verify();\n-#endif\n+  DEBUG_ONLY(call->verify());\n@@ -324,3 +322,1 @@\n-#ifdef ASSERT\n-  call->verify();\n-#endif\n+  DEBUG_ONLY(call->verify());\n@@ -366,1 +362,1 @@\n-  void  set_data(intptr_t x);\n+  void set_data(intptr_t x);\n@@ -374,2 +370,2 @@\n-  void  verify();\n-  void  print();\n+  void verify();\n+  void print();\n@@ -385,3 +381,1 @@\n-#ifdef ASSERT\n-  test->verify();\n-#endif\n+  DEBUG_ONLY(test->verify());\n@@ -394,3 +388,1 @@\n-#ifdef ASSERT\n-  test->verify();\n-#endif\n+  DEBUG_ONLY(test->verify());\n@@ -400,1 +392,2 @@\n-\/\/ RISCV should not use C1 runtime patching, so just leave NativeMovRegMem Unimplemented.\n+\/\/ RISCV should not use C1 runtime patching, but still implement\n+\/\/ NativeMovRegMem to keep some compilers happy.\n@@ -403,4 +396,6 @@\n-  int instruction_start() const {\n-    Unimplemented();\n-    return 0;\n-  }\n+  enum RISCV_specific_constants {\n+    instruction_size            =    NativeInstruction::instruction_size,\n+    instruction_offset          =    0,\n+    data_offset                 =    0,\n+    next_instruction_offset     =    NativeInstruction::instruction_size\n+  };\n@@ -408,4 +403,1 @@\n-  address instruction_address() const {\n-    Unimplemented();\n-    return NULL;\n-  }\n+  int instruction_start() const { return instruction_offset; }\n@@ -413,4 +405,3 @@\n-  int num_bytes_to_end_of_patch() const {\n-    Unimplemented();\n-    return 0;\n-  }\n+  address instruction_address() const { return addr_at(instruction_offset); }\n+\n+  int num_bytes_to_end_of_patch() const { return instruction_offset + instruction_size; }\n@@ -422,1 +413,3 @@\n-  void add_offset_in_bytes(int add_offset) { Unimplemented(); }\n+  void add_offset_in_bytes(int add_offset) {\n+    set_offset(offset() + add_offset);\n+  }\n@@ -428,1 +421,1 @@\n-  inline friend NativeMovRegMem* nativeMovRegMem_at (address addr);\n+  inline friend NativeMovRegMem* nativeMovRegMem_at(address addr);\n@@ -431,3 +424,4 @@\n-inline NativeMovRegMem* nativeMovRegMem_at (address addr) {\n-  Unimplemented();\n-  return NULL;\n+inline NativeMovRegMem* nativeMovRegMem_at(address addr) {\n+  NativeMovRegMem* test = (NativeMovRegMem*)(addr - NativeMovRegMem::instruction_offset);\n+  DEBUG_ONLY(test->verify());\n+  return test;\n@@ -464,3 +458,1 @@\n-#ifdef ASSERT\n-  jump->verify();\n-#endif\n+  DEBUG_ONLY(jump->verify());\n","filename":"src\/hotspot\/cpu\/riscv\/nativeInst_riscv.hpp","additions":28,"deletions":36,"binary":false,"changes":64,"status":"modified"},{"patch":"@@ -174,1 +174,1 @@\n-  \/\/  t2: CompiledICHolder\n+  \/\/  t1: CompiledICHolder\n","filename":"src\/hotspot\/cpu\/riscv\/vtableStubs_riscv.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}