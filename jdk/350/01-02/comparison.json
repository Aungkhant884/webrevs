{"files":[{"patch":"@@ -63,3 +63,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -67,2 +66,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -72,1 +71,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -76,2 +75,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -83,5 +82,5 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.caught_exception.caught_exception002\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".caught_exception002\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String PACKAGE_NAME       = \"nsk.jdb.caught_exception.caught_exception002\";\n+    static final String TEST_CLASS         = PACKAGE_NAME + \".caught_exception002\";\n+    static final String DEBUGGEE_CLASS     = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -94,0 +93,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -95,1 +100,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -98,1 +103,1 @@\n-            jdb.receiveReplyFor(JdbCommand._catch + \" caught \" + PACKAGE_NAME + \".MyException\" + i);\n+            reply = jdb.receiveReplyFor(JdbCommand._catch + \" caught \" + PACKAGE_NAME + \".MyException\" + i);\n@@ -102,1 +107,1 @@\n-            String[] reply = jdb.receiveReplyFor(JdbCommand.cont);\n+            reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -109,3 +114,7 @@\n-    private void checkCatch(String[] reply, int i) {\n-        var grep = new Paragrep(reply);\n-        var v = new Vector<String>();\n+    private void checkCatch (String[] reply, int i) {\n+        Paragrep grep;\n+        int count;\n+        String found;\n+        Vector v = new Vector();\n+\n+        grep = new Paragrep(reply);\n@@ -114,1 +123,1 @@\n-        int count = grep.find(v);\n+        count = grep.find(v);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/caught_exception\/caught_exception002\/caught_exception002.java","additions":29,"deletions":20,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -54,3 +54,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -58,1 +57,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -62,1 +62,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -66,2 +66,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -73,5 +73,6 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.classes.classes001\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".classes001\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String PACKAGE_NAME       = \"nsk.jdb.classes.classes001\";\n+    static final String TEST_CLASS         = PACKAGE_NAME + \".classes001\";\n+    static final String DEBUGGEE_CLASS     = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String NOT_VALID_SAMPLE   = \"is not a valid\";\n@@ -80,20 +81,20 @@\n-            DEBUGGEE_CLASS,\n-            DEBUGGEE_CLASS + \"$Inner1\",\n-            DEBUGGEE_CLASS + \"$Inner2\",\n-            DEBUGGEE_CLASS + \"$Inner3\",\n-            DEBUGGEE_CLASS + \"$Inner4\",\n-            DEBUGGEE_CLASS + \"$Inner5\",\n-            DEBUGGEE_CLASS + \"$Inner6\",\n-            DEBUGGEE_CLASS + \"$Inner7\",\n-            DEBUGGEE_CLASS + \"$Inner8\",\n-            DEBUGGEE_CLASS + \"$InnerInt1\",\n-            DEBUGGEE_CLASS + \"$InnerInt2\",\n-            DEBUGGEE_CLASS + \"$InnerInt3\",\n-            DEBUGGEE_CLASS + \"$InnerInt4\",\n-            DEBUGGEE_CLASS + \"$InnerInt5\",\n-            PACKAGE_NAME + \".Outer1\",\n-            PACKAGE_NAME + \".Outer2\",\n-            PACKAGE_NAME + \".Outer3\",\n-            PACKAGE_NAME + \".OuterInt1\",\n-            PACKAGE_NAME + \".OuterInt2\"\n-    };\n+        DEBUGGEE_CLASS,\n+        DEBUGGEE_CLASS + \"$Inner1\",\n+        DEBUGGEE_CLASS + \"$Inner2\",\n+        DEBUGGEE_CLASS + \"$Inner3\",\n+        DEBUGGEE_CLASS + \"$Inner4\",\n+        DEBUGGEE_CLASS + \"$Inner5\",\n+        DEBUGGEE_CLASS + \"$Inner6\",\n+        DEBUGGEE_CLASS + \"$Inner7\",\n+        DEBUGGEE_CLASS + \"$Inner8\",\n+        DEBUGGEE_CLASS + \"$InnerInt1\",\n+        DEBUGGEE_CLASS + \"$InnerInt2\",\n+        DEBUGGEE_CLASS + \"$InnerInt3\",\n+        DEBUGGEE_CLASS + \"$InnerInt4\",\n+        DEBUGGEE_CLASS + \"$InnerInt5\",\n+        PACKAGE_NAME + \".Outer1\",\n+        PACKAGE_NAME + \".Outer2\",\n+        PACKAGE_NAME + \".Outer3\",\n+        PACKAGE_NAME + \".OuterInt1\",\n+        PACKAGE_NAME + \".OuterInt2\"\n+                                      };\n@@ -104,0 +105,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -105,1 +112,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -107,1 +114,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.classes);\n+        reply = jdb.receiveReplyFor(JdbCommand.classes);\n@@ -109,2 +116,2 @@\n-        for (String checkedClass : checkedClasses) {\n-            if (!checkClass(checkedClass, reply)) {\n+        for (int i = 0; i < checkedClasses.length; i++) {\n+            if (!checkClass(checkedClasses[i], reply)) {\n@@ -118,1 +125,3 @@\n-    private boolean checkClass(String className, String[] reply) {\n+    private boolean checkClass (String className, String[] reply) {\n+        Paragrep grep;\n+        String found;\n@@ -121,2 +130,2 @@\n-        var grep = new Paragrep(reply);\n-        String found = grep.findFirst(className);\n+        grep = new Paragrep(reply);\n+        found = grep.findFirst(className);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/classes\/classes001\/classes001.java","additions":48,"deletions":39,"binary":false,"changes":87,"status":"modified"},{"patch":"@@ -53,3 +53,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -57,1 +56,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -61,1 +61,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -65,2 +65,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -75,2 +75,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -79,1 +79,5 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.classpath);\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n@@ -81,2 +85,4 @@\n-        var grep = new Paragrep(reply);\n-        String found = grep.findFirst(\"lasspath\");\n+        reply = jdb.receiveReplyFor(JdbCommand.classpath);\n+\n+        grep = new Paragrep(reply);\n+        found = grep.findFirst(\"lasspath\");\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/classpath\/classpath001\/classpath001.java","additions":18,"deletions":12,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -55,4 +55,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.Jdb;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -60,2 +58,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -65,1 +63,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -69,2 +67,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -76,6 +74,6 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.clear.clear002\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".clear002\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-    static final String METHOD_TO_STOP = DEBUGGEE_CLASS + \".func5\";\n+    static final String PACKAGE_NAME     = \"nsk.jdb.clear.clear002\";\n+    static final String TEST_CLASS       = PACKAGE_NAME + \".clear002\";\n+    static final String DEBUGGEE_CLASS   = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK      = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK       = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String METHOD_TO_STOP   = DEBUGGEE_CLASS + \".func5\";\n@@ -84,1 +82,1 @@\n-    static final String REMOVED_SAMPLE = \"Removed:\";\n+    static final String REMOVED_SAMPLE   = \"Removed:\";\n@@ -87,0 +85,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -96,1 +100,1 @@\n-        if (!checkClear(METHOD1_TO_CLEAR)) {\n+        if (!checkClear (METHOD1_TO_CLEAR)) {\n@@ -100,1 +104,1 @@\n-        if (!checkClear(METHOD2_TO_CLEAR)) {\n+        if (!checkClear (METHOD2_TO_CLEAR)) {\n@@ -106,2 +110,2 @@\n-        var grep = new Paragrep(jdb.getTotalReply());\n-        int count = grep.find(Jdb.BREAKPOINT_HIT);\n+        grep = new Paragrep(jdb.getTotalReply());\n+        count = grep.find(Jdb.BREAKPOINT_HIT);\n@@ -114,1 +118,1 @@\n-        if (!checkBreakpoint(METHOD1_TO_CLEAR, grep)) {\n+        if (!checkBreakpoint (METHOD1_TO_CLEAR, grep)) {\n@@ -118,1 +122,1 @@\n-        if (!checkBreakpoint(METHOD2_TO_CLEAR, grep)) {\n+        if (!checkBreakpoint (METHOD2_TO_CLEAR, grep)) {\n@@ -123,1 +127,2 @@\n-    private boolean checkBreakpoint(String methodName, Paragrep grep) {\n+    private boolean checkBreakpoint (String methodName, Paragrep grep) {\n+        String found;\n@@ -125,0 +130,2 @@\n+        int count;\n+        Vector v;\n@@ -126,1 +133,1 @@\n-        var v = new Vector<String>();\n+        v = new Vector();\n@@ -130,1 +137,1 @@\n-        String found = grep.findFirst(v);\n+        found = grep.findFirst(v);\n@@ -138,1 +145,4 @@\n-    private boolean checkClear(String methodName) {\n+    private boolean checkClear (String methodName) {\n+        Paragrep grep;\n+        String found;\n+        String[] reply;\n@@ -140,0 +150,2 @@\n+        int count;\n+        Vector v;\n@@ -141,1 +153,1 @@\n-        var v = new Vector<String>();\n+        v = new Vector();\n@@ -146,2 +158,2 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.clear + methodName);\n-        var grep = new Paragrep(reply);\n+        reply = jdb.receiveReplyFor(JdbCommand.clear + methodName);\n+        grep = new Paragrep(reply);\n@@ -149,1 +161,1 @@\n-        String found = grep.findFirst(v);\n+        found = grep.findFirst(v);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/clear\/clear002\/clear002.java","additions":42,"deletions":30,"binary":false,"changes":72,"status":"modified"},{"patch":"@@ -56,4 +56,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.Jdb;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -61,1 +59,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -65,1 +64,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -69,2 +68,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -79,2 +78,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK      = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK       = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -86,0 +85,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -90,3 +95,3 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.clear + METHOD_TO_CLEAR);\n-        var grep = new Paragrep(reply);\n-        int count = grep.find(\"Removed:\");\n+        reply = jdb.receiveReplyFor(JdbCommand.clear + METHOD_TO_CLEAR);\n+        grep = new Paragrep(reply);\n+        count = grep.find(\"Removed:\");\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/clear\/clear003\/clear003.java","additions":18,"deletions":13,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -57,4 +57,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.Jdb;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -62,2 +60,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -67,1 +65,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -71,2 +69,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -78,10 +76,10 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.clear.clear004\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".clear004\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-    static final String[] BREAKPOINTS = new String[]{\n-            DEBUGGEE_CLASS + \":63\",\n-            DEBUGGEE_CLASS + \":67\",\n-            DEBUGGEE_CLASS + \":71\"};\n-    static final String REMOVED_SAMPLE = \"Removed:\";\n+    static final String PACKAGE_NAME     = \"nsk.jdb.clear.clear004\";\n+    static final String TEST_CLASS       = PACKAGE_NAME + \".clear004\";\n+    static final String DEBUGGEE_CLASS   = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK      = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK       = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String[] BREAKPOINTS = new String[]\n+        { DEBUGGEE_CLASS + \":63\",\n+          DEBUGGEE_CLASS + \":67\",\n+          DEBUGGEE_CLASS + \":71\" };\n+    static final String REMOVED_SAMPLE   = \"Removed:\";\n@@ -90,3 +88,9 @@\n-        for (String breakpoint : BREAKPOINTS) {\n-            log.display(\"Setting breakpoint at \" + breakpoint);\n-            jdb.receiveReplyFor(JdbCommand.stop_at + breakpoint);\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n+        for (int i = 0; i < BREAKPOINTS.length; i++) {\n+           log.display(\"Setting breakpoint at \" + BREAKPOINTS[i]);\n+           reply = jdb.receiveReplyFor(JdbCommand.stop_at + BREAKPOINTS[i]);\n@@ -95,1 +99,1 @@\n-        if (!checkClear(BREAKPOINTS[1])) {\n+        if (!checkClear (BREAKPOINTS[1])) {\n@@ -101,2 +105,2 @@\n-        var grep = new Paragrep(jdb.getTotalReply());\n-        int count = grep.find(Jdb.BREAKPOINT_HIT);\n+        grep = new Paragrep(jdb.getTotalReply());\n+        count = grep.find(Jdb.BREAKPOINT_HIT);\n@@ -109,1 +113,1 @@\n-        if (!checkBreakpoint(BREAKPOINTS[1], grep)) {\n+        if (!checkBreakpoint (BREAKPOINTS[1], grep)) {\n@@ -115,1 +119,2 @@\n-    private boolean checkBreakpoint(String breakpoint, Paragrep grep) {\n+    private boolean checkBreakpoint (String breakpoint, Paragrep grep) {\n+        String found;\n@@ -117,1 +122,4 @@\n-        var v = new Vector<String>();\n+        int count;\n+        Vector v;\n+\n+        v = new Vector();\n@@ -121,1 +129,1 @@\n-        String found = grep.findFirst(v);\n+        found = grep.findFirst(v);\n@@ -129,1 +137,4 @@\n-    private boolean checkClear(String breakpoint) {\n+    private boolean checkClear (String breakpoint) {\n+        Paragrep grep;\n+        String found;\n+        String[] reply;\n@@ -131,0 +142,2 @@\n+        int count;\n+        Vector v;\n@@ -132,1 +145,1 @@\n-        var v = new Vector<String>();\n+        v = new Vector();\n@@ -137,2 +150,2 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.clear + breakpoint);\n-        var grep = new Paragrep(reply);\n+        reply = jdb.receiveReplyFor(JdbCommand.clear + breakpoint);\n+        grep = new Paragrep(reply);\n@@ -140,1 +153,1 @@\n-        String found = grep.findFirst(v);\n+        found = grep.findFirst(v);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/clear\/clear004\/clear004.java","additions":47,"deletions":34,"binary":false,"changes":81,"status":"modified"},{"patch":"@@ -60,3 +60,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -64,2 +63,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -69,1 +68,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -73,2 +72,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -80,15 +79,15 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.down.down002\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".down002\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-\n-    static final String[][] FRAMES = new String[][]{\n-            {\"[1]\", DEBUGGEE_CLASS + \".func5\"},\n-            {\"[2]\", DEBUGGEE_CLASS + \".func4\"},\n-            {\"[3]\", DEBUGGEE_CLASS + \".func3\"},\n-            {\"[4]\", DEBUGGEE_CLASS + \".func2\"},\n-            {\"[5]\", DEBUGGEE_CLASS + \".func1\"},\n-            {\"[6]\", DEBUGGEE_CLASS + \".runIt\"},\n-            {\"[7]\", DEBUGGEE_CLASS + \".main\"}\n-    };\n+    static final String PACKAGE_NAME     = \"nsk.jdb.down.down002\";\n+    static final String TEST_CLASS       = PACKAGE_NAME + \".down002\";\n+    static final String DEBUGGEE_CLASS   = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK      = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK       = DEBUGGEE_CLASS + \".lastBreak\";\n+\n+    static final String[][] FRAMES = new String[][] {\n+        {\"[1]\", DEBUGGEE_CLASS + \".func5\"},\n+        {\"[2]\", DEBUGGEE_CLASS + \".func4\"},\n+        {\"[3]\", DEBUGGEE_CLASS + \".func3\"},\n+        {\"[4]\", DEBUGGEE_CLASS + \".func2\"},\n+        {\"[5]\", DEBUGGEE_CLASS + \".func1\"},\n+        {\"[6]\", DEBUGGEE_CLASS + \".runIt\"},\n+        {\"[7]\", DEBUGGEE_CLASS + \".main\"}\n+                                                };\n@@ -97,0 +96,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -100,1 +105,1 @@\n-        for (int i = 0; i < (FRAMES.length - 1); i++) {\n+        for (int i = 0; i < (FRAMES.length-1); i++) {\n@@ -104,1 +109,1 @@\n-        for (int i = 0; i < (FRAMES.length - 1); i++) {\n+        for (int i = 0; i < (FRAMES.length-1); i++) {\n@@ -111,2 +116,2 @@\n-        String[] reply = jdb.getTotalReply();\n-        var grep = new Paragrep(reply);\n+        reply = jdb.getTotalReply();\n+        grep = new Paragrep(reply);\n@@ -114,2 +119,2 @@\n-        for (int i = 1; i < (FRAMES.length - 1); i++) {\n-            var v = new Vector<String>();\n+        for (int i = 1; i < (FRAMES.length-1); i++) {\n+            v = new Vector();\n@@ -118,2 +123,2 @@\n-            int count = grep.find(v);\n-            if (count != (i + 1)) {\n+            count = grep.find(v);\n+            if (count != (i+1)) {\n@@ -121,1 +126,1 @@\n-                        \"\\n\\texpected value : \" + (i + 1) + \", got : \" + count);\n+                    \"\\n\\texpected value : \" + (i+1) + \", got : \" + count);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/down\/down002\/down002.java","additions":37,"deletions":32,"binary":false,"changes":69,"status":"modified"},{"patch":"@@ -64,3 +64,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -68,2 +67,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -73,1 +72,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -77,2 +76,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -88,2 +87,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -93,26 +92,26 @@\n-            \"_dump002a\",\n-            \"iStatic\",\n-            \"iPrivate\",\n-            \"iProtect\",\n-            \"iPublic\",\n-            \"iFinal\",\n-            \"iTransient\",\n-            \"iVolatile\",\n-            \"iArray\",\n-            \"sStatic\",\n-            \"sPrivate\",\n-            \"sProtected\",\n-            \"sPublic\",\n-            \"sFinal\",\n-            \"sTransient\",\n-            \"sVolatile\",\n-            \"sArray\",\n-            \"fBoolean\",\n-            \"fByte\",\n-            \"fChar\",\n-            \"fDouble\",\n-            \"fFloat\",\n-            \"fInt\",\n-            \"fLong\",\n-            \"fShort\"\n-    };\n+        \"_dump002a\",\n+        \"iStatic\",\n+        \"iPrivate\",\n+        \"iProtect\",\n+        \"iPublic\",\n+        \"iFinal\",\n+        \"iTransient\",\n+        \"iVolatile\",\n+        \"iArray\",\n+        \"sStatic\",\n+        \"sPrivate\",\n+        \"sProtected\",\n+        \"sPublic\",\n+        \"sFinal\",\n+        \"sTransient\",\n+        \"sVolatile\",\n+        \"sArray\",\n+        \"fBoolean\",\n+        \"fByte\",\n+        \"fChar\",\n+        \"fDouble\",\n+        \"fFloat\",\n+        \"fInt\",\n+        \"fLong\",\n+        \"fShort\"\n+                                         };\n@@ -121,0 +120,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v = new Vector();\n+        String found;\n+\n@@ -122,1 +127,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -124,4 +129,3 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.dump + DEBUGGEE_CLASS + \"._dump002a\");\n-        var grep = new Paragrep(reply);\n-        var v = new Vector<String>();\n-        for (String field : CHECKED_FIELDS) {\n+        reply = jdb.receiveReplyFor(JdbCommand.dump + DEBUGGEE_CLASS + \"._dump002a\");\n+        grep = new Paragrep(reply);\n+        for (int i = 0; i < CHECKED_FIELDS.length; i++) {\n@@ -129,1 +133,1 @@\n-            v.add(field);\n+            v.add(CHECKED_FIELDS[i]);\n@@ -132,1 +136,1 @@\n-                failure(\"The field is not dumped : \" + field);\n+                failure(\"The field is not dumped : \" + CHECKED_FIELDS[i]);\n@@ -147,1 +151,1 @@\n-    void checkField(String[] reply, String fieldName) {\n+    void checkField (String[] reply, String fieldName) {\n@@ -149,1 +153,1 @@\n-        var v = new Vector<String>();\n+        Vector v = new Vector();\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/dump\/dump002\/dump002.java","additions":49,"deletions":45,"binary":false,"changes":94,"status":"modified"},{"patch":"@@ -69,3 +69,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -73,2 +72,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -78,1 +77,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -82,2 +81,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -92,2 +91,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -96,9 +95,9 @@\n-            {DEBUGGEE_CLASS + \".myStaticField\", \"-2147483648\"},\n-            {DEBUGGEE_CLASS + \"._eval001a.myInstanceField\", \"9223372036854775807\"},\n-            {DEBUGGEE_CLASS + \"._eval001a.myArrayField[0][0].toString()\", \"ABCDE\"},\n-            {DEBUGGEE_CLASS + \"._eval001a.myMethod()\", \"2147483647\"},\n-            {\"myClass.toString().equals(\\\"abcde\\\")\", \"true\"},\n-            {\"i + j + k\", \"777\"},\n-            {\"new java.lang.String(\\\"Hello, World\\\").length()\", \"12\"},\n-            {DEBUGGEE_CLASS + \"._eval001a.testPrimitiveArray(test)\", \"1.0\"}\n-    };\n+        { DEBUGGEE_CLASS + \".myStaticField\", \"-2147483648\" },\n+        { DEBUGGEE_CLASS + \"._eval001a.myInstanceField\", \"9223372036854775807\" },\n+        { DEBUGGEE_CLASS + \"._eval001a.myArrayField[0][0].toString()\", \"ABCDE\" },\n+        { DEBUGGEE_CLASS + \"._eval001a.myMethod()\", \"2147483647\" },\n+        { \"myClass.toString().equals(\\\"abcde\\\")\", \"true\"},\n+        { \"i + j + k\", \"777\"},\n+        { \"new java.lang.String(\\\"Hello, World\\\").length()\", \"12\"},\n+        { DEBUGGEE_CLASS + \"._eval001a.testPrimitiveArray(test)\", \"1.0\" }\n+                                          };\n@@ -107,0 +106,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -108,1 +113,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -111,1 +116,1 @@\n-        jdb.receiveReplyFor(JdbCommand.step);\n+        reply = jdb.receiveReplyFor(JdbCommand.step);\n@@ -113,2 +118,2 @@\n-        for (String[] strings : checkedExpr) {\n-            if (!checkValue(strings[0], strings[1])) {\n+        for (int i = 0; i < checkedExpr.length; i++) {\n+            if (!checkValue(checkedExpr[i][0], checkedExpr[i][1])) {\n@@ -122,1 +127,5 @@\n-    private boolean checkValue(String expr, String value) {\n+    private boolean checkValue (String expr, String value) {\n+        Paragrep grep;\n+        String[] reply;\n+        String found;\n+        Vector v;\n@@ -125,3 +134,3 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.eval + expr);\n-        var grep = new Paragrep(reply);\n-        String found = grep.findFirst(value);\n+        reply = jdb.receiveReplyFor(JdbCommand.eval + expr);\n+        grep = new Paragrep(reply);\n+        found = grep.findFirst(value);\n@@ -130,1 +139,1 @@\n-            log.complain(\"expected : \" + value + \" ;\\nreported: \" + (reply.length > 0 ? reply[0] : \"\"));\n+            log.complain(\"expected : \" + value + \" ;\\nreported: \" + (reply.length > 0? reply[0]: \"\"));\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/eval\/eval001\/eval001.java","additions":37,"deletions":28,"binary":false,"changes":65,"status":"modified"},{"patch":"@@ -76,3 +76,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -80,1 +79,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -84,1 +84,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -88,2 +88,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -95,6 +95,6 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.exclude.exclude001\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".exclude001\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-    static final String MYTHREAD = \"MyThread\";\n+    static final String PACKAGE_NAME    = \"nsk.jdb.exclude.exclude001\";\n+    static final String TEST_CLASS      = PACKAGE_NAME + \".exclude001\";\n+    static final String DEBUGGEE_CLASS  = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK     = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK      = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String MYTHREAD        = \"MyThread\";\n@@ -104,1 +104,1 @@\n-    static final String SUN_METHOD = \"sun.util.calendar.Gregorian\";\n+    static final String SUN_METHOD   = \"sun.util.calendar.Gregorian\";\n@@ -107,0 +107,7 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+        String[] threads;\n+\n@@ -115,1 +122,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.exclude);\n+        reply = jdb.receiveReplyFor(JdbCommand.exclude);\n@@ -120,0 +127,1 @@\n+\n@@ -127,1 +135,2 @@\n-                    String[] threads = jdb.getThreadIds(DEBUGGEE_THREAD);\n+\n+                    threads = jdb.getThreadIds(DEBUGGEE_THREAD);\n@@ -135,1 +144,1 @@\n-                        jdb.receiveReplyFor(JdbCommand.step); \/\/ to get out of lastBreak;\n+                        reply = jdb.receiveReplyFor(JdbCommand.step); \/\/ to get out of lastBreak;\n@@ -138,2 +147,3 @@\n-                            case 0: \/\/ block all\n-                                jdb.receiveReplyFor(JdbCommand.exclude + \"java.*,javax.*,sun.*,com.sun.*,jdk.*\");\n+                        case 0: \/\/ block all\n+                                reply = jdb.receiveReplyFor(JdbCommand.exclude + \"java.*,javax.*,sun.*,com.sun.*,jdk.*\");\n+\n@@ -141,2 +151,2 @@\n-                            case 1: \/\/ allow java.*\n-                                jdb.receiveReplyFor(JdbCommand.exclude + \"javax.*,sun.*,com.sun.*,jdk.*\");\n+                        case 1: \/\/ allow java.*\n+                                reply = jdb.receiveReplyFor(JdbCommand.exclude + \"javax.*,sun.*,com.sun.*,jdk.*\");\n@@ -144,2 +154,2 @@\n-                            case 2: \/\/ allow sun.*\n-                                jdb.receiveReplyFor(JdbCommand.exclude + \"java.*,javax.*,com.sun.*,jdk.*\");\n+                        case 2: \/\/ allow sun.*\n+                                reply = jdb.receiveReplyFor(JdbCommand.exclude + \"java.*,javax.*,com.sun.*,jdk.*\");\n@@ -149,1 +159,1 @@\n-                        jdb.receiveReplyFor(JdbCommand.trace + \"methods \" + threads[0]);\n+                        reply = jdb.receiveReplyFor(JdbCommand.trace + \"methods \" + threads[0]);\n@@ -154,2 +164,2 @@\n-                            var grep = new Paragrep(reply);\n-                            int count = grep.find(JAVA_CORE_METHOD);\n+                            grep = new Paragrep(reply);\n+                            count = grep.find(JAVA_CORE_METHOD);\n@@ -177,2 +187,2 @@\n-                                jdb.receiveReplyFor(JdbCommand.exclude + oldExclude);\n-                                jdb.receiveReplyFor(JdbCommand.untrace + \"methods \" + threads[0]);\n+                                reply = jdb.receiveReplyFor(JdbCommand.exclude + oldExclude);\n+                                reply = jdb.receiveReplyFor(JdbCommand.untrace + \"methods \"+ threads[0]);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/exclude\/exclude001\/exclude001.java","additions":38,"deletions":28,"binary":false,"changes":66,"status":"modified"},{"patch":"@@ -58,3 +58,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -62,2 +61,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -67,1 +66,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -71,2 +70,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -78,7 +77,8 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.fields.fields001\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".fields001\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String DEBUGGEE_CLASS1 = DEBUGGEE_CLASS + \"$Inner\";\n-    static final String DEBUGGEE_CLASS2 = DEBUGGEE_CLASS + \"$Extender\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String PACKAGE_NAME       = \"nsk.jdb.fields.fields001\";\n+    static final String TEST_CLASS         = PACKAGE_NAME + \".fields001\";\n+    static final String DEBUGGEE_CLASS     = TEST_CLASS + \"a\";\n+    static final String DEBUGGEE_CLASS1    = DEBUGGEE_CLASS + \"$Inner\";\n+    static final String DEBUGGEE_CLASS2    = DEBUGGEE_CLASS + \"$Extender\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String NOT_VALID_SAMPLE   = \"is not a valid\";\n@@ -87,11 +87,11 @@\n-            \"i_st\", \"o_st\",\n-            \"i_pv\", \"o_pv\",\n-            \"i_pt\", \"o_pt\",\n-            \"i_pb\", \"o_pb\",\n-            \"i_fn\", \"o_fn\",\n-            \"i_tr\", \"o_tr\",\n-            \"i_vl\", \"o_vl\",\n-            \"i_a\", \"o_a\",\n-            \"i_aa\", \"o_aa\",\n-            \"i_aaa\", \"o_aaa\"\n-    };\n+        \"i_st\",    \"o_st\",\n+        \"i_pv\",    \"o_pv\",\n+        \"i_pt\",    \"o_pt\",\n+        \"i_pb\",    \"o_pb\",\n+        \"i_fn\",    \"o_fn\",\n+        \"i_tr\",    \"o_tr\",\n+        \"i_vl\",    \"o_vl\",\n+        \"i_a\",     \"o_a\",\n+        \"i_aa\",    \"o_aa\",\n+        \"i_aaa\",   \"o_aaa\"\n+                                      };\n@@ -100,10 +100,10 @@\n-            \"ii_pv\", \"oi_pv\",\n-            \"ii_pt\", \"oi_pt\",\n-            \"ii_pb\", \"oi_pb\",\n-            \"ii_fn\", \"oi_fn\",\n-            \"ii_tr\", \"oi_tr\",\n-            \"ii_vl\", \"oi_vl\",\n-            \"ii_a\", \"oi_a\",\n-            \"ii_aa\", \"oi_aa\",\n-            \"ii_aaa\", \"oi_aaa\"\n-    };\n+        \"ii_pv\",    \"oi_pv\",\n+        \"ii_pt\",    \"oi_pt\",\n+        \"ii_pb\",    \"oi_pb\",\n+        \"ii_fn\",    \"oi_fn\",\n+        \"ii_tr\",    \"oi_tr\",\n+        \"ii_vl\",    \"oi_vl\",\n+        \"ii_a\",     \"oi_a\",\n+        \"ii_aa\",    \"oi_aa\",\n+        \"ii_aaa\",   \"oi_aaa\"\n+                                      };\n@@ -112,0 +112,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -113,1 +119,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -115,1 +121,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS);\n+        reply = jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS);\n@@ -133,1 +139,3 @@\n-    private boolean checkFields(String className, String[] reply, String[] checkedFields) {\n+    private boolean checkFields (String className, String[] reply, String[] checkedFields) {\n+        Paragrep grep;\n+        String found;\n@@ -135,3 +143,5 @@\n-        var grep = new Paragrep(reply);\n-        for (String checkedField : checkedFields) {\n-            int count = grep.find(checkedField);\n+        int count;\n+\n+        grep = new Paragrep(reply);\n+        for (int i = 0; i < checkedFields.length; i++) {\n+            count = grep.find(checkedFields[i]);\n@@ -139,1 +149,1 @@\n-                log.complain(\"Failed to report field \" + checkedField + \" for class \" + className);\n+                log.complain(\"Failed to report field \" + checkedFields[i] + \" for class \" + className);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/fields\/fields001\/fields001.java","additions":53,"deletions":43,"binary":false,"changes":96,"status":"modified"},{"patch":"@@ -48,5 +48,4 @@\n-import nsk.share.Failure;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n-\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -55,3 +54,3 @@\n-    static final String DEBUGGEE_CLASS = hc001a.class.getTypeName();\n-    static final String HC_NAME_FIELD = DEBUGGEE_CLASS + \".hcName\";\n-    static final String MAIN_METHOD_NAME = DEBUGGEE_CLASS + \".main\";\n+    static final String DEBUGGEE_CLASS    = hc001a.class.getTypeName();\n+    static final String HC_NAME_FIELD     = DEBUGGEE_CLASS + \".hcName\";\n+    static final String MAIN_METHOD_NAME  = DEBUGGEE_CLASS + \".main\";\n@@ -59,2 +58,3 @@\n-    static final String HC_METHOD_NAME = \"hcMethod\";\n-    static final String HC_FIELD_NAME = \"hcField\";\n+    static final String HC_METHOD_NAME    = \"hcMethod\";\n+    static final String HC_FIELD_NAME     = \"hcField\";\n+    static final int    MAX_SLEEP_CNT     = 3;\n@@ -62,1 +62,1 @@\n-    public static void main(String[] argv) {\n+    public static void main(String argv[]) {\n@@ -66,1 +66,1 @@\n-    public static int run(String[] argv, PrintStream out) {\n+    public static int run(String argv[], PrintStream out) {\n@@ -73,2 +73,3 @@\n-        for (String str : arr) {\n-            if (str.contains(pattern)) {\n+        for (int idx = 0; idx < arr.length; idx++) {\n+            String str = arr[idx];\n+            if (str.indexOf(pattern) != -1) {\n@@ -92,0 +93,2 @@\n+        String[] reply = null;\n+\n@@ -102,1 +105,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -125,0 +128,2 @@\n+        String[] reply = null;\n+\n@@ -128,1 +133,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.classes);\n+        reply = jdb.receiveReplyFor(JdbCommand.classes);\n@@ -145,0 +150,1 @@\n+        String[] reply = null;\n@@ -153,1 +159,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.clear);\n+        reply = jdb.receiveReplyFor(JdbCommand.clear);\n@@ -167,0 +173,1 @@\n+        String[] reply = null;\n@@ -171,1 +178,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.where);\n+        reply = jdb.receiveReplyFor(JdbCommand.where);\n@@ -192,0 +199,1 @@\n+        String[] reply = null;\n@@ -200,1 +208,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.where);\n+        reply = jdb.receiveReplyFor(JdbCommand.where);\n@@ -209,0 +217,2 @@\n+        String[] reply = null;\n+\n@@ -212,1 +222,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.methods + hcName);\n+        reply = jdb.receiveReplyFor(JdbCommand.methods + hcName);\n@@ -229,0 +239,1 @@\n+        String[] reply = null;\n@@ -233,1 +244,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.watch + hcFieldName);\n+        reply = jdb.receiveReplyFor(JdbCommand.watch + hcFieldName);\n@@ -254,0 +265,1 @@\n+        String[] reply = null;\n@@ -258,1 +270,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.eval + hcFieldName);\n+        reply = jdb.receiveReplyFor(JdbCommand.eval + hcFieldName);\n@@ -283,0 +295,1 @@\n+        String[] reply = null;\n@@ -285,1 +298,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.watch + hcFieldName);\n+        reply = jdb.receiveReplyFor(JdbCommand.watch + hcFieldName);\n@@ -296,0 +309,1 @@\n+        String[] reply = null;\n@@ -298,1 +312,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.eval + hcFieldName);\n+        reply = jdb.receiveReplyFor(JdbCommand.eval + hcFieldName);\n@@ -307,0 +321,1 @@\n+        String className = null;\n@@ -308,3 +323,3 @@\n-                \"xx.yyy\/0x111\/0x222\",\n-                \"xx.\/0x111.0x222\",\n-                \"xx.yyy.zzz\/\"\n+            \"xx.yyy\/0x111\/0x222\",\n+            \"xx.\/0x111.0x222\",\n+            \"xx.yyy.zzz\/\"\n@@ -316,1 +331,2 @@\n-        for (String className : invClassNames) {\n+        for (int idx = 0; idx < invClassNames.length; idx++) {\n+            className = invClassNames[idx];\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/hidden_class\/hc001\/hc001.java","additions":44,"deletions":28,"binary":false,"changes":72,"status":"modified"},{"patch":"@@ -57,3 +57,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -61,2 +60,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -66,1 +65,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -70,2 +69,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -77,7 +76,7 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.ignore.ignore001\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".ignore001\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String EXCEPTION_SAMPLE = \"Exception occurred:\";\n-    static final String REMOVED_SAMPLE = \"Removed:\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String PACKAGE_NAME       = \"nsk.jdb.ignore.ignore001\";\n+    static final String TEST_CLASS         = PACKAGE_NAME + \".ignore001\";\n+    static final String DEBUGGEE_CLASS     = TEST_CLASS + \"a\";\n+    static final String EXCEPTION_SAMPLE   = \"Exception occurred:\";\n+    static final String REMOVED_SAMPLE     = \"Removed:\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -86,0 +85,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -89,1 +94,1 @@\n-        jdb.receiveReplyFor(JdbCommand._catch + \" caught \" + nsk.jdb.ignore.ignore001.ignore001a.JAVA_EXCEPTION);\n+        reply = jdb.receiveReplyFor(JdbCommand._catch + \" caught \" + nsk.jdb.ignore.ignore001.ignore001a.JAVA_EXCEPTION);\n@@ -92,1 +97,1 @@\n-        jdb.receiveReplyFor(JdbCommand._catch + \" caught \" + nsk.jdb.ignore.ignore001.ignore001a.USER_EXCEPTION1);\n+        reply = jdb.receiveReplyFor(JdbCommand._catch + \" caught \" + nsk.jdb.ignore.ignore001.ignore001a.USER_EXCEPTION1);\n@@ -95,1 +100,1 @@\n-        jdb.receiveReplyFor(JdbCommand._catch + \" caught \" + nsk.jdb.ignore.ignore001.ignore001a.USER_EXCEPTION2);\n+        reply = jdb.receiveReplyFor(JdbCommand._catch + \" caught \" + nsk.jdb.ignore.ignore001.ignore001a.USER_EXCEPTION2);\n@@ -97,3 +102,3 @@\n-        while (true) {\n-            if (!checkCatch(ignore001a.JAVA_EXCEPTION)) {\n-                success = false;\n+        for (;;) {\n+            if (!checkCatch(nsk.jdb.ignore.ignore001.ignore001a.JAVA_EXCEPTION)) {\n+               success = false;\n@@ -101,2 +106,2 @@\n-            if (!checkCatch(ignore001a.USER_EXCEPTION1)) {\n-                success = false;\n+            if (!checkCatch(nsk.jdb.ignore.ignore001.ignore001a.USER_EXCEPTION1)) {\n+               success = false;\n@@ -104,2 +109,2 @@\n-            if (!checkCatch(ignore001a.USER_EXCEPTION2)) {\n-                success = false;\n+            if (!checkCatch(nsk.jdb.ignore.ignore001.ignore001a.USER_EXCEPTION2)) {\n+               success = false;\n@@ -108,2 +113,2 @@\n-            if (!checkIgnore(ignore001a.JAVA_EXCEPTION)) {\n-                success = false;\n+            if (!checkIgnore(nsk.jdb.ignore.ignore001.ignore001a.JAVA_EXCEPTION)) {\n+               success = false;\n@@ -111,2 +116,2 @@\n-            if (!checkIgnore(ignore001a.USER_EXCEPTION1)) {\n-                success = false;\n+            if (!checkIgnore(nsk.jdb.ignore.ignore001.ignore001a.USER_EXCEPTION1)) {\n+               success = false;\n@@ -114,2 +119,2 @@\n-            if (!checkIgnore(ignore001a.USER_EXCEPTION2)) {\n-                success = false;\n+            if (!checkIgnore(nsk.jdb.ignore.ignore001.ignore001a.USER_EXCEPTION2)) {\n+               success = false;\n@@ -120,3 +125,3 @@\n-            String[] reply = jdb.getTotalReply();\n-            var grep = new Paragrep(reply);\n-            int count = grep.find(EXCEPTION_SAMPLE);\n+            reply = jdb.getTotalReply();\n+            grep = new Paragrep(reply);\n+            count = grep.find(EXCEPTION_SAMPLE);\n@@ -132,1 +137,6 @@\n-    private boolean checkCatch(String exceptionName) {\n+    private boolean checkCatch (String exceptionName) {\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n@@ -136,1 +146,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -138,1 +148,1 @@\n-        var v = new Vector<String>();\n+        v = new Vector();\n@@ -142,2 +152,2 @@\n-        var grep = new Paragrep(reply);\n-        String found = grep.findFirst(v);\n+        grep = new Paragrep(reply);\n+        found = grep.findFirst(v);\n@@ -151,1 +161,6 @@\n-    private boolean checkIgnore(String exceptionName) {\n+    private boolean checkIgnore (String exceptionName) {\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n@@ -155,1 +170,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.ignore + \" caught \" + exceptionName);\n+        reply = jdb.receiveReplyFor(JdbCommand.ignore + \" caught \" + exceptionName);\n@@ -157,1 +172,1 @@\n-        var v = new Vector<String>();\n+        v = new Vector();\n@@ -161,2 +176,2 @@\n-        var grep = new Paragrep(reply);\n-        String found = grep.findFirst(v);\n+        grep = new Paragrep(reply);\n+        found = grep.findFirst(v);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/ignore\/ignore001\/ignore001.java","additions":59,"deletions":44,"binary":false,"changes":103,"status":"modified"},{"patch":"@@ -64,9 +64,5 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n-\n-import java.io.PrintStream;\n-import java.util.Arrays;\n-import java.util.HashSet;\n-import java.util.Objects;\n-import java.util.Set;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n+\n+import java.io.*;\n+import java.util.*;\n@@ -79,1 +75,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -83,2 +79,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -89,6 +85,6 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.interrupt.interrupt001\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".interrupt001\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".breakHere\";\n-    static final String MYTHREAD = \"MyThread\";\n+    static final String PACKAGE_NAME    = \"nsk.jdb.interrupt.interrupt001\";\n+    static final String TEST_CLASS      = PACKAGE_NAME + \".interrupt001\";\n+    static final String DEBUGGEE_CLASS  = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK     = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK      = DEBUGGEE_CLASS + \".breakHere\";\n+    static final String MYTHREAD        = \"MyThread\";\n@@ -109,0 +105,5 @@\n+        String[] reply;\n+        Paragrep grep;\n+        String found;\n+        String[] threads;\n+\n@@ -110,1 +111,3 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n+\n+        threads = jdb.getThreadIds(DEBUGGEE_THREAD);\n@@ -112,1 +115,0 @@\n-        String[] threads = jdb.getThreadIds(DEBUGGEE_THREAD);\n@@ -121,2 +123,2 @@\n-        for (String thread : threads) {\n-            jdb.receiveReplyFor(JdbCommand.interrupt + thread);\n+        for (int i = 0; i < threads.length; i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.interrupt + threads[i]);\n@@ -125,2 +127,2 @@\n-        jdb.receiveReplyFor(JdbCommand.threads);\n-        jdb.receiveReplyFor(JdbCommand.cont, true);\n+        reply = jdb.receiveReplyFor(JdbCommand.threads);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont, true);\n@@ -128,3 +130,3 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.eval + DEBUGGEE_RESULT);\n-        var grep = new Paragrep(reply);\n-        String found = grep.findFirst(DEBUGGEE_RESULT + \" =\");\n+        reply = jdb.receiveReplyFor(JdbCommand.eval + DEBUGGEE_RESULT);\n+        grep = new Paragrep(reply);\n+        found = grep.findFirst(DEBUGGEE_RESULT + \" =\" );\n@@ -132,4 +134,4 @@\n-            if (!found.contains(DEBUGGEE_RESULT + \" = 0\")) {\n-                log.complain(\"Not all \" + MYTHREAD + \"s were interrupted.\");\n-                log.complain(found);\n-                success = false;\n+            if (found.indexOf(DEBUGGEE_RESULT + \" = 0\") < 0) {\n+               log.complain(\"Not all \" + MYTHREAD + \"s were interrupted.\");\n+               log.complain(found);\n+               success = false;\n@@ -145,0 +147,1 @@\n+        String[] reply;\n@@ -151,12 +154,12 @@\n-            String[] thrdsRply = jdb.receiveReplyFor(JdbCommand.threads);\n-            waitingTids = Arrays.stream(thrdsRply)\n-                    .filter((r) -> r.endsWith(\"waiting\"))\n-                    .map((r) -> {\n-                        Matcher m = tidPattern.matcher(r);\n-                        if (m.find()) {\n-                            return m.group(1);\n-                        }\n-                        return null;\n-                    })\n-                    .filter(Objects::nonNull)\n-                    .collect(Collectors.toSet());\n+            String[] thrdsRply = (String[])jdb.receiveReplyFor(JdbCommand.threads);\n+            waitingTids = Arrays.asList(thrdsRply).stream()\n+                .filter((r)-> r.endsWith(\"waiting\"))\n+                .map((r)->{\n+                    Matcher m = tidPattern.matcher(r);\n+                    if (m.find()) {\n+                        return m.group(1);\n+                    }\n+                    return null;\n+                })\n+                .filter((r)-> r != null)\n+                .collect(Collectors.toSet());\n@@ -168,1 +171,1 @@\n-                jdb.receiveReplyFor(JdbCommand.set + DEBUGGEE_CLASS + \".allWorkersAreWaiting=true\");\n+                reply = jdb.receiveReplyFor(JdbCommand.set + DEBUGGEE_CLASS + \".allWorkersAreWaiting=true\");\n@@ -171,1 +174,1 @@\n-                jdb.receiveReplyFor(JdbCommand.cont);\n+                reply = jdb.receiveReplyFor(JdbCommand.cont);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/interrupt\/interrupt001\/interrupt001.java","additions":48,"deletions":45,"binary":false,"changes":93,"status":"modified"},{"patch":"@@ -64,3 +64,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -68,2 +67,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -73,1 +72,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -77,2 +76,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -83,6 +82,6 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.kill.kill001\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".kill001\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".breakHere\";\n-    static final String MYTHREAD = \"MyThread\";\n+    static final String PACKAGE_NAME    = \"nsk.jdb.kill.kill001\";\n+    static final String TEST_CLASS      = PACKAGE_NAME + \".kill001\";\n+    static final String DEBUGGEE_CLASS  = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK     = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK      = DEBUGGEE_CLASS + \".breakHere\";\n+    static final String MYTHREAD        = \"MyThread\";\n@@ -96,0 +95,7 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+        String[] threads;\n+\n@@ -97,1 +103,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -99,1 +105,1 @@\n-        String[] threads = jdb.getThreadIds(DEBUGGEE_THREAD);\n+        threads = jdb.getThreadIds(DEBUGGEE_THREAD);\n@@ -109,2 +115,2 @@\n-                            DEBUGGEE_EXCEPTIONS + \"[\" + i + \"]\",\n-                    \"killed\");\n+                                                       DEBUGGEE_EXCEPTIONS + \"[\" + i + \"]\",\n+                                                       \"killed\");\n@@ -125,3 +131,3 @@\n-                DEBUGGEE_RESULT + \" =\");\n-        var grep = new Paragrep(reply);\n-        String found = grep.findFirst(DEBUGGEE_RESULT + \" =\");\n+                                                   DEBUGGEE_RESULT + \" =\");\n+        grep = new Paragrep(reply);\n+        found = grep.findFirst(DEBUGGEE_RESULT + \" =\" );\n@@ -129,3 +135,3 @@\n-            if (!found.contains(DEBUGGEE_RESULT + \" = 0\")) {\n-                log.complain(\"Not all \" + MYTHREAD + \"s were killed. \" + found + \" remaining\");\n-                success = false;\n+            if (found.indexOf(DEBUGGEE_RESULT + \" = 0\") < 0) {\n+               log.complain(\"Not all \" + MYTHREAD + \"s were killed. \" + found + \" remaining\");\n+               success = false;\n@@ -138,1 +144,1 @@\n-        jdb.receiveReplyFor(JdbCommand.threads);\n+        reply = jdb.receiveReplyFor(JdbCommand.threads);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/kill\/kill001\/kill001.java","additions":31,"deletions":25,"binary":false,"changes":56,"status":"modified"},{"patch":"@@ -60,3 +60,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -64,1 +63,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -68,1 +68,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -72,2 +72,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -78,6 +78,6 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.kill.kill002\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".kill002\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".breakHere\";\n-    static final String MYTHREAD = \"MyThread\";\n+    static final String PACKAGE_NAME    = \"nsk.jdb.kill.kill002\";\n+    static final String TEST_CLASS      = PACKAGE_NAME + \".kill002\";\n+    static final String DEBUGGEE_CLASS  = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK     = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK      = DEBUGGEE_CLASS + \".breakHere\";\n+    static final String MYTHREAD        = \"MyThread\";\n@@ -91,0 +91,7 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+        String[] threads;\n+\n@@ -92,1 +99,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -94,1 +101,1 @@\n-        String[] threads = jdb.getThreadIds(DEBUGGEE_THREAD);\n+        threads = jdb.getThreadIds(DEBUGGEE_THREAD);\n@@ -103,3 +110,3 @@\n-            jdb.receiveReplyForWithMessageWait(JdbCommand.kill + threads[i] + \" \" +\n-                            DEBUGGEE_EXCEPTIONS + \"[\" + i + \"]\",\n-                    \"killed\");\n+            reply = jdb.receiveReplyForWithMessageWait(JdbCommand.kill + threads[i] + \" \" +\n+                                                       DEBUGGEE_EXCEPTIONS + \"[\" + i + \"]\",\n+                                                       \"killed\");\n@@ -107,2 +114,2 @@\n-        jdb.receiveReplyFor(JdbCommand.threads);\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.threads);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -118,3 +125,3 @@\n-                DEBUGGEE_RESULT + \" =\");\n-        var grep = new Paragrep(reply);\n-        String found = grep.findFirst(DEBUGGEE_RESULT + \" =\");\n+                                            DEBUGGEE_RESULT + \" =\");\n+        grep = new Paragrep(reply);\n+        found = grep.findFirst(DEBUGGEE_RESULT + \" =\" );\n@@ -122,3 +129,3 @@\n-            if (!found.contains(DEBUGGEE_RESULT + \" = 0\")) {\n-                log.complain(\"Not all \" + MYTHREAD + \"s were killed. \" + found + \" remaining\");\n-                success = false;\n+            if (found.indexOf(DEBUGGEE_RESULT + \" = 0\") < 0) {\n+               log.complain(\"Not all \" + MYTHREAD + \"s were killed. \" + found + \" remaining\");\n+               success = false;\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/kill\/kill002\/kill002.java","additions":33,"deletions":26,"binary":false,"changes":59,"status":"modified"},{"patch":"@@ -57,3 +57,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -61,1 +60,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -65,1 +65,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -69,2 +69,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -76,6 +76,6 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.klass.class001\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".class001\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-    static final String NOT_VALID_SAMPLE = \"is not a valid\";\n+    static final String PACKAGE_NAME       = \"nsk.jdb.klass.class001\";\n+    static final String TEST_CLASS         = PACKAGE_NAME + \".class001\";\n+    static final String DEBUGGEE_CLASS     = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String NOT_VALID_SAMPLE   = \"is not a valid\";\n@@ -84,9 +84,9 @@\n-            DEBUGGEE_CLASS,\n-            DEBUGGEE_CLASS + \"$InnerInt1\",\n-            DEBUGGEE_CLASS + \"$Inner2\",\n-            DEBUGGEE_CLASS + \"$Inner3\",\n-            DEBUGGEE_CLASS + \"$Inner4\",\n-            DEBUGGEE_CLASS + \"$Inner5\",\n-            DEBUGGEE_CLASS + \"$Inner6\",\n-            PACKAGE_NAME + \".Outer1\"\n-    };\n+        DEBUGGEE_CLASS,\n+        DEBUGGEE_CLASS + \"$InnerInt1\",\n+        DEBUGGEE_CLASS + \"$Inner2\",\n+        DEBUGGEE_CLASS + \"$Inner3\",\n+        DEBUGGEE_CLASS + \"$Inner4\",\n+        DEBUGGEE_CLASS + \"$Inner5\",\n+        DEBUGGEE_CLASS + \"$Inner6\",\n+        PACKAGE_NAME + \".Outer1\"\n+                                      };\n@@ -97,0 +97,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -98,1 +104,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -100,2 +106,2 @@\n-        for (String checkedClass : checkedClasses) {\n-            if (!checkClass(checkedClass)) {\n+        for (int i = 0; i < checkedClasses.length; i++) {\n+            if (!checkClass(checkedClasses[i])) {\n@@ -109,1 +115,5 @@\n-    private boolean checkClass(String className) {\n+    private boolean checkClass (String className) {\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        String found;\n@@ -112,3 +122,4 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand._class + className);\n-        var grep = new Paragrep(reply);\n-        String found = grep.findFirst(NOT_VALID_SAMPLE);\n+        reply = jdb.receiveReplyFor(JdbCommand._class + className);\n+\n+        grep = new Paragrep(reply);\n+        found = grep.findFirst(NOT_VALID_SAMPLE);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/klass\/class001\/class001.java","additions":40,"deletions":29,"binary":false,"changes":69,"status":"modified"},{"patch":"@@ -62,3 +62,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -66,1 +65,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -70,1 +70,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -74,2 +74,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -81,14 +81,14 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.list.list002\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".list002\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".runIt\";\n-    static final int LINE_NUMBER = 38;\n-\n-    final static String[] METHOD_SOURCE = new String[]{\n-            \"public int runIt(String args[], PrintStream out) {\",\n-            \"JdbArgumentHandler argumentHandler = new JdbArgumentHandler(args);\",\n-            \"Log log = new Log(out, argumentHandler);\",\n-            \"log.display(\\\"Debuggee PASSED\\\");\",\n-            \"return list002.PASSED;\"\n-    };\n+    static final String PACKAGE_NAME    = \"nsk.jdb.list.list002\";\n+    static final String TEST_CLASS      = PACKAGE_NAME + \".list002\";\n+    static final String DEBUGGEE_CLASS  = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK     = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK      = DEBUGGEE_CLASS + \".runIt\";\n+    static final int    LINE_NUMBER     = 38;\n+\n+    final static String METHOD_SOURCE[] = new String[] {\n+        \"public int runIt(String args[], PrintStream out) {\",\n+        \"JdbArgumentHandler argumentHandler = new JdbArgumentHandler(args);\",\n+        \"Log log = new Log(out, argumentHandler);\",\n+        \"log.display(\\\"Debuggee PASSED\\\");\",\n+        \"return list002.PASSED;\"\n+                                                    };\n@@ -97,1 +97,1 @@\n-            \"System.exit(list002.JCK_STATUS_BASE + _list002a.runIt(args, System.out));\";\n+        \"System.exit(list002.JCK_STATUS_BASE + _list002a.runIt(args, System.out));\";\n@@ -102,0 +102,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -103,1 +109,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -105,2 +111,2 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.list + \"runIt\");\n-        var grep = new Paragrep(reply);\n+        reply = jdb.receiveReplyFor(JdbCommand.list + \"runIt\");\n+        grep = new Paragrep(reply);\n@@ -110,3 +116,4 @@\n-            for (String s : METHOD_SOURCE) {\n-                if (grep.find(s) == 0) {\n-                    failure(\"Line is not found in method sources:\\n\\t\" + s);\n+            for (int i = 0; i < METHOD_SOURCE.length; i++) {\n+                if (grep.find(METHOD_SOURCE[i]) == 0) {\n+                    failure(\"Line is not found in method sources:\\n\\t\"+\n+                        METHOD_SOURCE[i]);\n@@ -123,1 +130,2 @@\n-                failure(\"Line \" + LINE_NUMBER + \" is not found:\\n\\t\" + LINE_SOURCE);\n+                failure(\"Line \" + LINE_NUMBER + \" is not found:\\n\\t\"+\n+                    LINE_SOURCE);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/list\/list002\/list002.java","additions":37,"deletions":29,"binary":false,"changes":66,"status":"modified"},{"patch":"@@ -69,3 +69,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -73,2 +72,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -78,1 +77,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -82,2 +81,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -93,2 +92,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -96,15 +95,16 @@\n-    static final int BREAKPOINT_LINE1 = 84;\n-    static final int BREAKPOINT_LINE2 = 100;\n-\n-    static final String[][] LOCALS = new String[][]{\n-            {\"boolVar\",     \"true\",         \"false\"},\n-            {\"byteVar\",     \"27\",           \"12\"},\n-            {\"charVar\",     \"V\",            \"A\"},\n-            {\"shortVar\",    \"767\",          \"327\"},\n-            {\"intVar\",      \"1474\",         \"3647\"},\n-            {\"longVar\",     \"21345\",        \"65789\"},\n-            {\"floatVar\",    \"3.141\",        \"4.852\"},\n-            {\"doubleVar\",   \"2.578\",        \"3.8976\"},\n-            {\"objVar\",      \"objVarString\", \"objArgString\"},\n-            {\"arrVar\",      \"int[5]\",       \"int[3]\"}\n-    };\n+    static final int    BREAKPOINT_LINE1 = 84;\n+    static final int    BREAKPOINT_LINE2 = 100;\n+\n+    static final String LOCALS[][] = new String[][] {\n+       { \"boolVar\"  , \"true\"         , \"false\"         },\n+       { \"byteVar\"  , \"27\"           , \"12\"            },\n+       { \"charVar\"  , \"V\"            , \"A\"             },\n+       { \"shortVar\" , \"767\"          , \"327\"           },\n+       { \"intVar\"   , \"1474\"         , \"3647\"          },\n+       { \"longVar\"  , \"21345\"        , \"65789\"         },\n+       { \"floatVar\" , \"3.141\"        , \"4.852\"         },\n+       { \"doubleVar\", \"2.578\"        , \"3.8976\"        },\n+       { \"objVar\"   , \"objVarString\" , \"objArgString\"  },\n+       { \"arrVar\"   , \"int[5]\"       , \"int[3]\"        }\n+\n+                                                    };\n@@ -113,0 +113,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -117,6 +123,6 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.locals);\n-        var grep = new Paragrep(reply);\n-        for (String[] local : LOCALS) {\n-            var v = new Vector<String>();\n-            v.add(local[0]);\n-            v.add(local[2]);\n+        reply = jdb.receiveReplyFor(JdbCommand.locals);\n+        grep = new Paragrep(reply);\n+        for (int i = 0; i < LOCALS.length; i++) {\n+            v = new Vector();\n+            v.add(LOCALS[i][0]);\n+            v.add(LOCALS[i][2]);\n@@ -124,1 +130,2 @@\n-                failure(\"Cannot find \" + LOCALS[0][0] + \" with expected value: \" + local[2]);\n+                failure(\"Cannot find \" + LOCALS[0][0] +\n+                    \" with expected value: \" + LOCALS[i][2]);\n@@ -131,4 +138,4 @@\n-        for (String[] local : LOCALS) {\n-            var v = new Vector<String>();\n-            v.add(local[0]);\n-            v.add(local[1]);\n+        for (int i = 0; i < LOCALS.length; i++) {\n+            v = new Vector();\n+            v.add(LOCALS[i][0]);\n+            v.add(LOCALS[i][1]);\n@@ -136,1 +143,2 @@\n-                failure(\"Cannot find \" + LOCALS[0][0] + \" with expected value: \" + local[1]);\n+                failure(\"Cannot find \" + LOCALS[0][0] +\n+                    \" with expected value: \" + LOCALS[i][1]);\n@@ -142,0 +150,10 @@\n+\n+    private boolean checkStop () {\n+        Paragrep grep;\n+        String[] reply;\n+        String found;\n+        Vector v;\n+        boolean result = true;\n+\n+        return result;\n+    }\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/locals\/locals002\/locals002.java","additions":55,"deletions":37,"binary":false,"changes":92,"status":"modified"},{"patch":"@@ -67,3 +67,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -71,3 +70,2 @@\n-import java.io.PrintStream;\n-import java.util.StringTokenizer;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -77,1 +75,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -81,2 +79,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -91,2 +89,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -95,0 +93,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -96,1 +100,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -100,1 +104,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.methods + testedClass1);\n+        reply = jdb.receiveReplyFor(JdbCommand.methods + testedClass1);\n@@ -102,1 +106,1 @@\n-            checkMethod(reply, \"m\" + intToString(i), 1, testedClass1, testedClass1);\n+            checkMethod( reply, \"m\" + intToString(i), 1, testedClass1, testedClass1 );\n@@ -105,1 +109,1 @@\n-            checkMethod(reply, \"f\" + intToString(i), 1, testedClass1, testedClass1);\n+            checkMethod( reply, \"f\" + intToString(i), 1, testedClass1, testedClass1 );\n@@ -112,1 +116,1 @@\n-        checkMethod(reply1, \"<init>\", 4, testedClass2, testedClass2);\n+        checkMethod( reply1, \"<init>\", 4, testedClass2, testedClass2 );\n@@ -118,1 +122,1 @@\n-        checkMethod(reply1, \"m01\", 3, testedClass3, testedClass3);\n+        checkMethod( reply1, \"m01\", 3, testedClass3, testedClass3 );\n@@ -123,1 +127,1 @@\n-        checkMethod(reply, \"m01\", 1, testedClass4, testedClass4);\n+        checkMethod( reply, \"m01\", 1, testedClass4, testedClass4 );\n@@ -128,1 +132,1 @@\n-        checkMethod(reply, \"i01\", 1, testedClass5, testedClass5);\n+        checkMethod( reply, \"i01\", 1, testedClass5, testedClass5 );\n@@ -133,3 +137,3 @@\n-        checkMethod(reply, \"m01\", 1, testedClass4, testedClass6);\n-        checkMethod(reply, \"i01\", 1, testedClass5, testedClass6);\n-        checkMethod(reply, \"m01\", 1, testedClass6, testedClass6);\n+        checkMethod( reply, \"m01\", 1, testedClass4, testedClass6 );\n+        checkMethod( reply, \"i01\", 1, testedClass5, testedClass6 );\n+        checkMethod( reply, \"m01\", 1, testedClass6, testedClass6 );\n@@ -141,1 +145,1 @@\n-            checkMethod(reply, \"m\" + intToString(i), 1, testedClass1, testedClass7);\n+            checkMethod( reply, \"m\" + intToString(i), 1, testedClass1, testedClass7 );\n@@ -144,1 +148,1 @@\n-            checkMethod(reply, \"f\" + intToString(i), 1, testedClass1, testedClass7);\n+            checkMethod( reply, \"f\" + intToString(i), 1, testedClass1, testedClass7 );\n@@ -151,1 +155,1 @@\n-            checkMethod(reply, \"m\" + intToString(i), 1, testedClass8, testedClass8);\n+            checkMethod( reply, \"m\" + intToString(i), 1, testedClass8, testedClass8 );\n@@ -154,1 +158,1 @@\n-            checkMethod(reply, \"m\" + intToString(i), 1, testedClass1, testedClass8);\n+            checkMethod( reply, \"m\" + intToString(i), 1, testedClass1, testedClass8 );\n@@ -157,1 +161,1 @@\n-            checkMethod(reply, \"f\" + intToString(i), 1, testedClass1, testedClass8);\n+            checkMethod( reply, \"f\" + intToString(i), 1, testedClass1, testedClass8 );\n@@ -163,9 +167,10 @@\n-    private void checkMethod(\n-            String[] reply,       \/* reply on 'methods' command *\/\n-            String methodName,    \/* method name *\/\n-            int expOccur,         \/* expected number of occurences of the method *\/\n-            String ownerClass,    \/* name of class defining method *\/\n-            String testedClass    \/* name of tested class *\/\n-    ) {\n-        var grep = new Paragrep(reply);\n-        var v = new Vector<String>();\n+    private void checkMethod (\n+        String[] reply,       \/* reply on 'methods' command *\/\n+        String methodName,    \/* method name *\/\n+        int expOccur,         \/* expected number of occurences of the method *\/\n+        String ownerClass,    \/* name of class defining method *\/\n+        String testedClass    \/* name of tested class *\/\n+                             ) {\n+\n+        Paragrep grep = new Paragrep(reply);\n+        Vector v = new Vector();\n@@ -178,3 +183,3 @@\n-                    \"\\n\\t of class \" + ownerClass +\n-                    \"\\n\\t in class \" + testedClass +\n-                    \"\\n\\t expected number: \" + expOccur + \" got: \" + j);\n+                \"\\n\\t of class \" + ownerClass +\n+                \"\\n\\t in class \" + testedClass +\n+                \"\\n\\t expected number: \" + expOccur + \" got: \" + j);\n@@ -184,4 +189,4 @@\n-    private String[] toStringArray(String[] arr) {\n-        var v = new Vector<String>();\n-        for (String s : arr) {\n-            StringTokenizer st = new StringTokenizer(s, \"\\r\\n\");\n+    private String[] toStringArray (String[] arr) {\n+        Vector v = new Vector();\n+        for (int i = 0; i < arr.length; i++) {\n+            StringTokenizer st = new StringTokenizer(arr[i], \"\\r\\n\");\n@@ -195,1 +200,1 @@\n-            results[i] = (String) objects[i];\n+            results[i] = (String)objects[i];\n@@ -200,1 +205,1 @@\n-    private String intToString(int i) {\n+    private String intToString (int i) {\n@@ -202,1 +207,1 @@\n-        if (s.length() == 1) {\n+        if (s.length()==1)\n@@ -204,1 +209,0 @@\n-        }\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/methods\/methods002\/methods002.java","additions":51,"deletions":47,"binary":false,"changes":98,"status":"modified"},{"patch":"@@ -63,3 +63,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -67,2 +66,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -72,1 +71,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -76,2 +75,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -86,3 +85,3 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-    static final int LINE_NUMBER = 47;\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final int    LINE_NUMBER        = 47;\n@@ -91,5 +90,5 @@\n-            JdbCommand.threads,\n-            JdbCommand.methods + DEBUGGEE_CLASS,\n-            JdbCommand.fields + DEBUGGEE_CLASS,\n-            JdbCommand.eval + \"(new java.lang.String(\\\"Hello, World\\\")).length()\"\n-    };\n+        JdbCommand.threads,\n+        JdbCommand.methods + DEBUGGEE_CLASS,\n+        JdbCommand.fields  + DEBUGGEE_CLASS,\n+        JdbCommand.eval + \"(new java.lang.String(\\\"Hello, World\\\")).length()\"\n+                                             };\n@@ -98,1 +97,7 @@\n-        jdb.receiveReplyFor(JdbCommand.stop_at + DEBUGGEE_CLASS + \":\" + LINE_NUMBER);\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n+        reply = jdb.receiveReplyFor(JdbCommand.stop_at + DEBUGGEE_CLASS + \":\" + LINE_NUMBER);\n@@ -100,2 +105,2 @@\n-        for (String checkedCommand : CHECKED_COMMANDS) {\n-            jdb.receiveReplyFor(JdbCommand.monitor + checkedCommand);\n+        for (int i = 0; i < CHECKED_COMMANDS.length; i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.monitor + CHECKED_COMMANDS[i]);\n@@ -105,1 +110,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont, true, repliesCount);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont, true, repliesCount);\n@@ -107,1 +112,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.monitor);\n+        reply = jdb.receiveReplyFor(JdbCommand.monitor);\n@@ -121,0 +126,3 @@\n+        Paragrep grep;\n+        String found;\n+        Vector v;\n@@ -122,0 +130,1 @@\n+        int count;\n@@ -123,5 +132,4 @@\n-        var grep = new Paragrep(reply);\n-        for (String checkedCommand : CHECKED_COMMANDS) {\n-            int count =  grep.find(checkedCommand);\n-            if (count != 1) {\n-                log.complain(\"Wrong number of monitor command: \" + checkedCommand);\n+        grep = new Paragrep(reply);\n+        for (int i = 0; i < CHECKED_COMMANDS.length; i++) {\n+            if ((count = grep.find(CHECKED_COMMANDS[i])) != 1) {\n+                log.complain(\"Wrong number of monitor command: \" + CHECKED_COMMANDS[i]);\n@@ -137,0 +145,3 @@\n+        Paragrep grep;\n+        String found;\n+        Vector v = new Vector();\n@@ -138,2 +149,0 @@\n-\n-        var grep = new Paragrep(reply);\n@@ -142,0 +151,2 @@\n+        grep = new Paragrep(reply);\n+\n@@ -143,1 +154,0 @@\n-        var v = new Vector<String>();\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/monitor\/monitor001\/monitor001.java","additions":39,"deletions":29,"binary":false,"changes":68,"status":"modified"},{"patch":"@@ -59,3 +59,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -63,1 +62,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -67,1 +67,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -71,2 +71,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -81,3 +81,3 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-    static final int LINE_NUMBER = 47;\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final int    LINE_NUMBER        = 47;\n@@ -86,2 +86,2 @@\n-            JdbCommand.unmonitor + \"1\"\n-    };\n+        JdbCommand.unmonitor + \"1\"\n+                                             };\n@@ -90,1 +90,7 @@\n-        jdb.receiveReplyFor(JdbCommand.stop_at + DEBUGGEE_CLASS + \":\" + LINE_NUMBER);\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n+        reply = jdb.receiveReplyFor(JdbCommand.stop_at + DEBUGGEE_CLASS + \":\" + LINE_NUMBER);\n@@ -92,2 +98,2 @@\n-        for (String checkedCommand : CHECKED_COMMANDS) {\n-            jdb.receiveReplyFor(JdbCommand.monitor + checkedCommand);\n+        for (int i = 0; i < CHECKED_COMMANDS.length; i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.monitor + CHECKED_COMMANDS[i]);\n@@ -97,1 +103,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont, true, repliesCount);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont, true, repliesCount);\n@@ -99,1 +105,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.monitor);\n+        reply = jdb.receiveReplyFor(JdbCommand.monitor);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/monitor\/monitor002\/monitor002.java","additions":23,"deletions":17,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -63,3 +63,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -67,1 +66,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -71,1 +71,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -75,2 +75,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -82,6 +82,6 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.next.next001\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".next001\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-    static final String MYTHREAD = \"MyThread\";\n+    static final String PACKAGE_NAME    = \"nsk.jdb.next.next001\";\n+    static final String TEST_CLASS      = PACKAGE_NAME + \".next001\";\n+    static final String DEBUGGEE_CLASS  = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK     = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK      = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String MYTHREAD        = \"MyThread\";\n@@ -93,0 +93,7 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+        String[] threads;\n+\n@@ -95,0 +102,1 @@\n+        int breakCount = 0;\n@@ -97,1 +105,1 @@\n-            String[] reply = jdb.receiveReplyFor(JdbCommand.cont);\n+            reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -99,1 +107,2 @@\n-                jdb.receiveReplyFor(JdbCommand.step); \/\/ to get out of lastBreak;\n+                breakCount++;\n+                reply = jdb.receiveReplyFor(JdbCommand.step); \/\/ to get out of lastBreak;\n@@ -101,1 +110,1 @@\n-                jdb.receiveReplyFor(JdbCommand.next);\n+                reply = jdb.receiveReplyFor(JdbCommand.next);\n@@ -120,1 +129,4 @@\n-    private boolean checkNext() {\n+    private boolean checkNext () {\n+        Paragrep grep;\n+        String found;\n+        int count;\n@@ -122,0 +134,3 @@\n+        String[] reply;\n+\n+        reply = jdb.receiveReplyFor(JdbCommand.where);\n@@ -123,3 +138,2 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.where);\n-        var grep = new Paragrep(reply);\n-        int count = grep.find(DEBUGGEE_THREAD + \".\" + checkedMethods[2]);\n+        grep = new Paragrep(reply);\n+        count = grep.find(DEBUGGEE_THREAD + \".\" + checkedMethods[2]);\n@@ -128,1 +142,1 @@\n-            result = false;\n+            result= false;\n@@ -134,1 +148,1 @@\n-            result = false;\n+            result= false;\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/next\/next001\/next001.java","additions":36,"deletions":22,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -65,3 +65,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -69,2 +68,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -74,1 +73,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -78,2 +77,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -88,2 +87,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -101,0 +100,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -104,3 +109,3 @@\n-            String[] reply = jdb.getTotalReply();\n-            var grep = new Paragrep(reply);\n-            var v = new Vector<String>();\n+            reply = jdb.getTotalReply();\n+            grep = new Paragrep(reply);\n+            v = new Vector();\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/options\/connect\/connect001\/connect001.java","additions":18,"deletions":13,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -65,3 +65,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -69,2 +68,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -74,1 +73,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -78,2 +77,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -88,2 +87,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -101,0 +100,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -104,3 +109,3 @@\n-            String[] reply = jdb.getTotalReply();\n-            var grep = new Paragrep(reply);\n-            var v = new Vector<String>();\n+            reply = jdb.getTotalReply();\n+            grep = new Paragrep(reply);\n+            v = new Vector();\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/options\/connect\/connect002\/connect002.java","additions":18,"deletions":13,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -65,3 +65,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -69,2 +68,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -74,1 +73,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -78,2 +77,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -88,2 +87,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -101,0 +100,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -104,3 +109,3 @@\n-            String[] reply = jdb.getTotalReply();\n-            var grep = new Paragrep(reply);\n-            var v = new Vector<String>();\n+            reply = jdb.getTotalReply();\n+            grep = new Paragrep(reply);\n+            v = new Vector();\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/options\/connect\/connect003\/connect003.java","additions":18,"deletions":13,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -65,3 +65,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -69,2 +68,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -74,1 +73,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -78,2 +77,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -88,2 +87,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -101,0 +100,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -104,3 +109,3 @@\n-            String[] reply = jdb.getTotalReply();\n-            var grep = new Paragrep(reply);\n-            var v = new Vector<String>();\n+            reply = jdb.getTotalReply();\n+            grep = new Paragrep(reply);\n+            v = new Vector();\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/options\/connect\/connect004\/connect004.java","additions":18,"deletions":13,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -65,3 +65,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -69,2 +68,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -74,1 +73,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -78,2 +77,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -88,2 +87,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -101,0 +100,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -104,3 +109,3 @@\n-            String[] reply = jdb.getTotalReply();\n-            var grep = new Paragrep(reply);\n-            var v = new Vector<String>();\n+            reply = jdb.getTotalReply();\n+            grep = new Paragrep(reply);\n+            v = new Vector();\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/options\/connect\/connect005\/connect005.java","additions":18,"deletions":13,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -69,3 +69,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.Jdb;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -73,2 +72,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -78,1 +77,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -82,2 +81,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -89,0 +88,2 @@\n+    static final String PACKAGE_NAME = \"nsk.jdb.options.connect\";\n+    static final String TEST_CLASS = PACKAGE_NAME + \".connect001\";\n@@ -90,2 +91,2 @@\n-    static final String FIRST_BREAK = null;\n-    static final String LAST_BREAK = null;\n+    static final String FIRST_BREAK    = null;\n+    static final String LAST_BREAK     = null;\n@@ -93,0 +94,1 @@\n+    static final String TESTED_OPTION = \"-listconnectors\";\n@@ -94,8 +96,8 @@\n-            \"com.sun.jdi.CommandLineLaunch\", \"dt_socket\",\n-            \"com.sun.jdi.CommandLineLaunch\", \"dt_shmem\",\n-            \"com.sun.jdi.RawCommandLineLaunch\", \"dt_socket\",\n-            \"com.sun.jdi.RawCommandLineLaunch\", \"dt_shmem\",\n-            \"com.sun.jdi.SocketAttach\", \"dt_socket\",\n-            \"com.sun.jdi.SocketListen\", \"dt_socket\",\n-            \"com.sun.jdi.SharedMemoryAttach\", \"dt_shmem\",\n-            \"com.sun.jdi.SharedMemoryListen\", \"dt_shmem\",\n+        \"com.sun.jdi.CommandLineLaunch\", \"dt_socket\",\n+        \"com.sun.jdi.CommandLineLaunch\", \"dt_shmem\",\n+        \"com.sun.jdi.RawCommandLineLaunch\", \"dt_socket\",\n+        \"com.sun.jdi.RawCommandLineLaunch\", \"dt_shmem\",\n+        \"com.sun.jdi.SocketAttach\", \"dt_socket\",\n+        \"com.sun.jdi.SocketListen\", \"dt_socket\",\n+        \"com.sun.jdi.SharedMemoryAttach\", \"dt_shmem\",\n+        \"com.sun.jdi.SharedMemoryListen\", \"dt_shmem\",\n@@ -127,3 +129,3 @@\n-            String connector = TESTED_CONNECTORS_LIST[i * 2];\n-            String transport = TESTED_CONNECTORS_LIST[i * 2 + 1];\n-            var grep = new Paragrep(reply);\n+            String connector = TESTED_CONNECTORS_LIST[i*2 + 0];\n+            String transport = TESTED_CONNECTORS_LIST[i*2 + 1];\n+            Paragrep grep = new Paragrep(reply);\n@@ -131,1 +133,1 @@\n-            var v = new Vector<String>();\n+            Vector<String> v = new Vector<String>();\n@@ -151,1 +153,1 @@\n-                    || argumentHandler.shouldPass(connector, transport)) {\n+                            || argumentHandler.shouldPass(connector, transport)) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/options\/listconnectors\/listconnectors001\/listconnectors001.java","additions":25,"deletions":23,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -64,3 +64,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -68,2 +67,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -73,1 +72,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -77,2 +76,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -86,3 +85,3 @@\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String DEBUGGEE_CLASS  = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK     = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK      = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -90,1 +89,1 @@\n-    static final String MYTHREAD = \"MyThread\";\n+    static final String MYTHREAD        = \"MyThread\";\n@@ -92,0 +91,1 @@\n+    static final String[] CHECKED_METHODS = {\"func1\", \"func2\", \"func3\", \"func4\", \"func5\"};\n@@ -94,0 +94,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -95,1 +101,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -106,1 +112,1 @@\n-            jdb.receiveReplyFor(JdbCommand.thread + threads[0]);\n+            reply = jdb.receiveReplyFor(JdbCommand.thread + threads[0]);\n@@ -108,1 +114,1 @@\n-            jdb.receiveReplyFor(JdbCommand.step); \/\/ to get out of lastBreak()\n+            reply = jdb.receiveReplyFor(JdbCommand.step); \/\/ to get out of lastBreak()\n@@ -110,1 +116,1 @@\n-            String[]  reply = jdb.receiveReplyFor(JdbCommand.where);\n+            reply = jdb.receiveReplyFor(JdbCommand.where);\n@@ -112,1 +118,1 @@\n-                success = false;\n+                 success = false;\n@@ -114,1 +120,1 @@\n-            jdb.receiveReplyFor(JdbCommand.up + \" 3\");\n+            reply = jdb.receiveReplyFor(JdbCommand.up + \" 3\");\n@@ -121,1 +127,1 @@\n-            jdb.receiveReplyFor(JdbCommand.pop);\n+            reply = jdb.receiveReplyFor(JdbCommand.pop);\n@@ -129,1 +135,1 @@\n-            var grep = new Paragrep(reply);\n+            grep = new Paragrep(reply);\n@@ -132,2 +138,2 @@\n-                for (String s : reply) {\n-                    log.complain(s);\n+                for (int i = 0; i < reply.length; i++) {\n+                    log.complain(reply[i]);\n@@ -144,1 +150,4 @@\n-    private boolean checkStack(String[] reply, String shouldBe, String frameNum, String shouldNotBe, boolean pop) {\n+    private boolean checkStack (String[] reply, String shouldBe, String frameNum, String shouldNotBe, boolean pop ) {\n+        Paragrep grep;\n+        String found;\n+        Vector v = new Vector();\n@@ -146,0 +155,1 @@\n+        int count;\n@@ -147,2 +157,1 @@\n-        var grep = new Paragrep(reply);\n-        var v = new Vector<String>();\n+        grep = new Paragrep(reply);\n@@ -151,3 +160,2 @@\n-        int count = grep.find(v);\n-        if (count != 1) {\n-            log.complain(\"Contents of stack trace is incorrect \" + (pop ? \"after 'pop' command\" : \"\"));\n+        if ((count = grep.find(v)) != 1) {\n+            log.complain(\"Contents of stack trace is incorrect \" + ( pop? \"after 'pop' command\": \"\"));\n@@ -160,1 +168,1 @@\n-            log.complain(\"Contents of stack trace is incorrect \" + (pop ? \"after 'pop' command\" : \"\"));\n+            log.complain(\"Contents of stack trace is incorrect \" + ( pop? \"after 'pop' command\": \"\"));\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/pop\/pop001\/pop001.java","additions":37,"deletions":29,"binary":false,"changes":66,"status":"modified"},{"patch":"@@ -51,3 +51,2 @@\n-import nsk.share.Failure;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -55,1 +54,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -59,5 +59,5 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.pop_exception.pop_exception001\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".pop_exception001\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String PACKAGE_NAME    = \"nsk.jdb.pop_exception.pop_exception001\";\n+    static final String TEST_CLASS      = PACKAGE_NAME + \".pop_exception001\";\n+    static final String DEBUGGEE_CLASS  = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK     = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK      = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -65,1 +65,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -69,2 +69,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -77,0 +77,1 @@\n+\n@@ -78,0 +79,1 @@\n+\n@@ -80,1 +82,1 @@\n-        \/\/ exception\n+        \/\/exception\n@@ -94,5 +96,5 @@\n-        StringBuilder replyString = new StringBuilder();\n-        for (String s : jdbReply) {\n-            replyString.append(s);\n-            if (s.contains(\"line=\")) {\n-                if (!s.contains(\"line=\" + pop_exception001a.expectedFinish)) {\n+        String replyString = \"\";\n+        for(String s: jdbReply) {\n+            replyString += s;\n+            if(s.contains(\"line=\")){\n+                if(!s.contains(\"line=\" + pop_exception001a.expectedFinish)) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/pop_exception\/pop_exception001\/pop_exception001.java","additions":20,"deletions":18,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -69,3 +69,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -73,2 +72,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -78,1 +77,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -82,2 +81,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -92,2 +91,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -96,4 +95,4 @@\n-            {\"i + j\", \"8\"},\n-            {\"j - i\", \"4\"},\n-            {\"j * i\", \"12\"},\n-            {\"j \/ i\", \"3\"},\n+        { \"i + j\", \"8\"},\n+        { \"j - i\", \"4\"},\n+        { \"j * i\", \"12\"},\n+        { \"j \/ i\", \"3\"},\n@@ -108,2 +107,2 @@\n-            {\"a.b.c.d.e.f.g.h.i.j.k.l.m.n.o.p.q.r.s.t.u.v.w.x.y.z.s\", \"foo\"}\n-    };\n+        { \"a.b.c.d.e.f.g.h.i.j.k.l.m.n.o.p.q.r.s.t.u.v.w.x.y.z.s\", \"foo\" }\n+                                          };\n@@ -112,0 +111,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -113,1 +118,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -116,1 +121,1 @@\n-        jdb.receiveReplyFor(JdbCommand.step);\n+        reply = jdb.receiveReplyFor(JdbCommand.step);\n@@ -118,2 +123,2 @@\n-        for (String[] strings : checkedExpr) {\n-            if (!checkValue(strings[0], strings[1])) {\n+        for (int i = 0; i < checkedExpr.length; i++) {\n+            if (!checkValue(checkedExpr[i][0], checkedExpr[i][1])) {\n@@ -127,1 +132,5 @@\n-    private boolean checkValue(String expr, String value) {\n+    private boolean checkValue (String expr, String value) {\n+        Paragrep grep;\n+        String[] reply;\n+        String found;\n+        Vector v;\n@@ -130,3 +139,3 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.print + expr);\n-        var grep = new Paragrep(reply);\n-        String found = grep.findFirst(value);\n+        reply = jdb.receiveReplyFor(JdbCommand.print + expr);\n+        grep = new Paragrep(reply);\n+        found = grep.findFirst(value);\n@@ -135,1 +144,1 @@\n-            log.complain(\"\\t expected : \" + value + \" ;\\n\\t reported: \" + (reply.length > 0 ? reply[0] : \"\"));\n+            log.complain(\"\\t expected : \" + value + \" ;\\n\\t reported: \" + (reply.length > 0? reply[0]: \"\"));\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/print\/print002\/print002.java","additions":34,"deletions":25,"binary":false,"changes":59,"status":"modified"},{"patch":"@@ -69,0 +69,2 @@\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -70,3 +72,0 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n@@ -74,2 +73,2 @@\n-import java.io.File;\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -79,1 +78,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -83,2 +82,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -93,2 +92,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK    = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK     = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -100,0 +99,1 @@\n+        String[] reply;\n@@ -104,1 +104,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -107,1 +107,1 @@\n-        jdb.receiveReplyFor(JdbCommand.step);\n+        reply = jdb.receiveReplyFor(JdbCommand.step);\n@@ -111,1 +111,1 @@\n-        String[] reply = jdb.receiveReplyFor(command, true, count);\n+        reply = jdb.receiveReplyFor(command, true, count);\n@@ -121,0 +121,3 @@\n+        Paragrep grep;\n+        String found;\n+        Vector v = new Vector();\n@@ -124,1 +127,1 @@\n-        var grep = new Paragrep(reply);\n+        grep = new Paragrep(reply);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/read\/read001\/read001.java","additions":17,"deletions":14,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -73,1 +73,2 @@\n-import nsk.share.Paragrep;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -75,2 +76,0 @@\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n@@ -78,2 +77,2 @@\n-import java.io.File;\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -83,1 +82,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -87,2 +86,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -97,2 +96,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -100,1 +99,1 @@\n-    static final String REDEFINED_CLASS = PACKAGE_NAME + \".RedefinedClass\";\n+    static final String REDEFINED_CLASS    = PACKAGE_NAME + \".RedefinedClass\";\n@@ -102,1 +101,1 @@\n-    static final String FIRST_REDEFINITION = \"AFTER_REDEFINITION\";\n+    static final String FIRST_REDEFINITION  = \"AFTER_REDEFINITION\";\n@@ -106,0 +105,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -107,1 +112,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -109,1 +114,1 @@\n-        jdb.receiveReplyFor(JdbCommand.step); \/\/ to get out of lastBreak()\n+        reply = jdb.receiveReplyFor(JdbCommand.step); \/\/ to get out of lastBreak()\n@@ -111,2 +116,2 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.eval + DEBUGGEE_CLASS + \".flag\");\n-        var grep = new Paragrep(reply);\n+        reply = jdb.receiveReplyFor(JdbCommand.eval + DEBUGGEE_CLASS + \".flag\");\n+        grep = new Paragrep(reply);\n@@ -114,1 +119,1 @@\n-            log.complain(\"Wrong value of redefine001a.flag before redefinition: \" + (reply.length > 0 ? reply[0] : \"\"));\n+            log.complain(\"Wrong value of redefine001a.flag before redefinition: \" + (reply.length > 0? reply[0]: \"\"));\n@@ -121,1 +126,1 @@\n-            jdb.receiveReplyFor(JdbCommand.redefine + REDEFINED_CLASS + \" \" + pathToRedefFile1);\n+            reply = jdb.receiveReplyFor(JdbCommand.redefine + REDEFINED_CLASS + \" \" + pathToRedefFile1);\n@@ -123,1 +128,1 @@\n-            jdb.receiveReplyFor(JdbCommand.cont);\n+            reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -128,1 +133,1 @@\n-                log.complain(\"Wrong value of redefine001a.flag after first redefinition: \" + (reply.length > 0 ? reply[0] : \"\"));\n+                log.complain(\"Wrong value of redefine001a.flag after first redefinition: \" + (reply.length > 0? reply[0]: \"\"));\n@@ -138,1 +143,1 @@\n-            jdb.receiveReplyFor(JdbCommand.redefine + REDEFINED_CLASS + \" \" + pathToRedefFile2);\n+            reply = jdb.receiveReplyFor(JdbCommand.redefine + REDEFINED_CLASS + \" \" + pathToRedefFile2);\n@@ -140,1 +145,1 @@\n-            jdb.receiveReplyFor(JdbCommand.cont);\n+            reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -145,1 +150,1 @@\n-                log.complain(\"Wrong value of redefine001a.flag after second redefinition: \" + (reply.length > 0 ? reply[0] : \"\"));\n+                log.complain(\"Wrong value of redefine001a.flag after second redefinition: \" + (reply.length > 0? reply[0]: \"\"));\n@@ -155,0 +160,10 @@\n+\n+    private boolean checkStop () {\n+        Paragrep grep;\n+        String[] reply;\n+        String found;\n+        Vector v;\n+        boolean result = true;\n+\n+        return result;\n+    }\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/redefine\/redefine001\/redefine001.java","additions":38,"deletions":23,"binary":false,"changes":61,"status":"modified"},{"patch":"@@ -63,3 +63,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -67,2 +66,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -72,1 +71,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -76,2 +75,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -85,3 +84,3 @@\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String DEBUGGEE_CLASS  = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK     = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK      = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -89,1 +88,1 @@\n-    static final String MYTHREAD = \"MyThread\";\n+    static final String MYTHREAD        = \"MyThread\";\n@@ -91,0 +90,1 @@\n+    static final String[] CHECKED_METHODS = {\"func1\", \"func2\", \"func3\", \"func4\", \"func5\"};\n@@ -93,0 +93,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -94,1 +100,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -105,1 +111,1 @@\n-            jdb.receiveReplyFor(JdbCommand.thread + threads[0]);\n+            reply = jdb.receiveReplyFor(JdbCommand.thread + threads[0]);\n@@ -107,1 +113,1 @@\n-            jdb.receiveReplyFor(JdbCommand.step); \/\/ to get out of lastBreak()\n+            reply = jdb.receiveReplyFor(JdbCommand.step); \/\/ to get out of lastBreak()\n@@ -109,1 +115,1 @@\n-            String[] reply = jdb.receiveReplyFor(JdbCommand.where);\n+            reply = jdb.receiveReplyFor(JdbCommand.where);\n@@ -114,1 +120,1 @@\n-            jdb.receiveReplyFor(JdbCommand.up + \" 3\");\n+            reply = jdb.receiveReplyFor(JdbCommand.up + \" 3\");\n@@ -121,1 +127,1 @@\n-            jdb.receiveReplyFor(JdbCommand.reenter);\n+            reply = jdb.receiveReplyFor(JdbCommand.reenter);\n@@ -129,1 +135,1 @@\n-            var grep = new Paragrep(reply);\n+            grep = new Paragrep(reply);\n@@ -132,2 +138,2 @@\n-                for (String s : reply) {\n-                    log.complain(s);\n+                for (int i = 0; i < reply.length; i++) {\n+                    log.complain(reply[i]);\n@@ -144,1 +150,4 @@\n-    private boolean checkStack(String[] reply, String shouldBe, String frameNum, String shouldNotBe, boolean reenter) {\n+    private boolean checkStack (String[] reply, String shouldBe, String frameNum, String shouldNotBe, boolean reenter ) {\n+        Paragrep grep;\n+        String found;\n+        Vector v = new Vector();\n@@ -148,2 +157,1 @@\n-        var grep = new Paragrep(reply);\n-        var v = new Vector<String>();\n+        grep = new Paragrep(reply);\n@@ -153,1 +161,1 @@\n-            log.complain(\"Contents of stack trace is incorrect \" + (reenter ? \"after 'reenter' command\" : \"\"));\n+            log.complain(\"Contents of stack trace is incorrect \" + ( reenter? \"after 'reenter' command\": \"\"));\n@@ -160,1 +168,1 @@\n-            log.complain(\"Contents of stack trace is incorrect \" + (reenter ? \"after 'reenter' command\" : \"\"));\n+            log.complain(\"Contents of stack trace is incorrect \" + ( reenter? \"after 'reenter' command\": \"\"));\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/reenter\/reenter001\/reenter001.java","additions":34,"deletions":26,"binary":false,"changes":60,"status":"modified"},{"patch":"@@ -118,2 +118,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.TestFailure;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -121,2 +121,0 @@\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n@@ -124,2 +122,2 @@\n-import java.io.File;\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -128,6 +126,6 @@\n-    final static String TEST_CLASS = b4689395.class.getName();\n-    final static String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    final static String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    final static String ERROR_MESSAGE = \"ERROR_M\";\n-    final static int LINE_NUMBER = 54;\n-    private String classFile;\n+        final static String TEST_CLASS     = b4689395.class.getName();\n+        final static String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n+        final static String FIRST_BREAK    = DEBUGGEE_CLASS + \".main\";\n+        final static String ERROR_MESSAGE  = \"ERROR_M\";\n+        final static int    LINE_NUMBER    = 54;\n+        private String classFile;\n@@ -135,3 +133,3 @@\n-    public static void main(String[] argv) {\n-        System.exit(run(argv, System.out) + JCK_STATUS_BASE);\n-    }\n+        public static void main (String argv[]) {\n+                System.exit(run(argv, System.out) + JCK_STATUS_BASE);\n+        }\n@@ -139,5 +137,5 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n-        firstBreak = FIRST_BREAK;\n-        return new b4689395().runTest(argv, out);\n-    }\n+        public static int run(String argv[], PrintStream out) {\n+                debuggeeClass =  DEBUGGEE_CLASS;\n+                firstBreak = FIRST_BREAK;\n+                return new b4689395().runTest(argv, out);\n+        }\n@@ -145,4 +143,4 @@\n-    public b4689395() {\n-        classFile = ClassLoadUtils.getRedefineClassFileName(DEBUGGEE_CLASS);\n-        if (classFile == null) {\n-            throw new TestFailure(\"Unable to find redefine class file in classpath for: \" + DEBUGGEE_CLASS);\n+        public b4689395() {\n+                classFile = ClassLoadUtils.getRedefineClassFileName(DEBUGGEE_CLASS);\n+                if (classFile == null)\n+                        throw new TestFailure(\"Unable to find redefine class file in classpath for: \" + DEBUGGEE_CLASS);\n@@ -150,1 +148,0 @@\n-    }\n@@ -152,3 +149,4 @@\n-    protected void runCases() {\n-        jdb.receiveReplyFor(JdbCommand.stop_at + DEBUGGEE_CLASS + \":\" + LINE_NUMBER);\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        protected void runCases() {\n+                String[] reply;\n+                reply = jdb.receiveReplyFor(JdbCommand.stop_at + DEBUGGEE_CLASS + \":\" + LINE_NUMBER);\n+                reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -156,3 +154,4 @@\n-        if (new File(classFile).exists()) {\n-            jdb.receiveReplyFor(JdbCommand.redefine + DEBUGGEE_CLASS + \" \" + classFile);\n-            String[] reply = jdb.receiveReplyFor(JdbCommand.next);\n+                if (new File(classFile).exists()) {\n+                        reply = jdb.receiveReplyFor(JdbCommand.redefine + DEBUGGEE_CLASS\n+                                        + \" \" + classFile);\n+                        reply = jdb.receiveReplyFor(JdbCommand.next);\n@@ -160,10 +159,10 @@\n-            var grep = new Paragrep(reply);\n-            if (grep.find(ERROR_MESSAGE) != 0) {\n-                log.complain(\"'\" + ERROR_MESSAGE + \"' is not expected to be \"\n-                        + \"printed after 'next' command.\");\n-                success = false;\n-            }\n-        } else {\n-            log.complain(\"File does not exist: \" + classFile);\n-            success = false;\n-        }\n+                        Paragrep grep = new Paragrep(reply);\n+                        if (grep.find(ERROR_MESSAGE) != 0) {\n+                                log.complain(\"'\" + ERROR_MESSAGE + \"' is not expected to be \"\n+                                                + \"printed after 'next' command.\");\n+                                success = false;\n+                        }\n+                } else {\n+                        log.complain(\"File does not exist: \" + classFile);\n+                        success = false;\n+                }\n@@ -171,2 +170,2 @@\n-        jdb.contToExit(1);\n-    }\n+                jdb.contToExit(1);\n+        }\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/regression\/b4689395\/b4689395.java","additions":42,"deletions":43,"binary":false,"changes":85,"status":"modified"},{"patch":"@@ -67,3 +67,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -71,1 +70,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -75,1 +75,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -79,2 +79,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -86,5 +86,5 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.resume.resume002\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".resume002\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String PACKAGE_NAME     = \"nsk.jdb.resume.resume002\";\n+    static final String TEST_CLASS       = PACKAGE_NAME + \".resume002\";\n+    static final String DEBUGGEE_CLASS   = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK      = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK       = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -92,1 +92,1 @@\n-    static final String THREAD_NAME = \"MyThread\";\n+    static final String THREAD_NAME      = \"MyThread\";\n@@ -95,0 +95,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -100,2 +106,2 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.suspend);\n-        var grep = new Paragrep(reply);\n+        reply = jdb.receiveReplyFor(JdbCommand.suspend);\n+        grep = new Paragrep(reply);\n@@ -105,1 +111,0 @@\n-\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/resume\/resume002\/resume002.java","additions":21,"deletions":16,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -61,3 +61,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -65,2 +64,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -70,1 +69,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -74,2 +73,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -84,2 +83,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -88,0 +87,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -91,3 +96,3 @@\n-            String[] reply = jdb.getTotalReply();\n-            var grep = new Paragrep(reply);\n-            var v = new Vector<String>();\n+            reply = jdb.getTotalReply();\n+            grep = new Paragrep(reply);\n+            v = new Vector();\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/run\/run002\/run002.java","additions":18,"deletions":13,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -70,2 +70,2 @@\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -73,1 +73,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -77,1 +78,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -81,2 +82,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -91,2 +92,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -97,3 +98,3 @@\n-            {DEBUGGEE_CLASS + \".myStaticField\", \"-2147483648\"},\n-            {DEBUGGEE_CLASS + \"._set001a.myInstanceField\", \"9223372036854775807\"},\n-    };\n+        { DEBUGGEE_CLASS + \".myStaticField\", \"-2147483648\" },\n+        { DEBUGGEE_CLASS + \"._set001a.myInstanceField\", \"9223372036854775807\" },\n+                                          };\n@@ -102,0 +103,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -103,1 +110,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -106,1 +113,1 @@\n-        jdb.receiveReplyFor(JdbCommand.step);\n+        reply = jdb.receiveReplyFor(JdbCommand.step);\n@@ -109,2 +116,2 @@\n-        for (String[] strings : checkedExpr) {\n-            jdb.receiveReplyFor(JdbCommand.set + strings[0] + \" = \" + strings[1]);\n+        for (int i = 0; i < checkedExpr.length; i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.set + checkedExpr[i][0] + \" = \" + checkedExpr[i][1]);\n@@ -113,1 +120,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -115,3 +122,3 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.eval + ERROR_MESSAGE);\n-        \/\/ if everything is OK reply will look like this\n-        \/\/   nsk.jdb.set.set001.set001a.errorMessage = \"\"\n+        reply = jdb.receiveReplyFor(JdbCommand.eval + ERROR_MESSAGE);\n+        \/\/if everything is OK reply will look like this\n+        \/\/  nsk.jdb.set.set001.set001a.errorMessage = \"\"\n@@ -120,2 +127,2 @@\n-            for (String s : reply) {\n-                log.complain(s);\n+            for (int i = 0; i < reply.length; i++) {\n+                log.complain(reply[i]);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/set\/set001\/set001.java","additions":28,"deletions":21,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -70,3 +70,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -74,2 +73,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -79,1 +78,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -83,2 +82,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -94,2 +93,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -100,3 +99,3 @@\n-            {DEBUGGEE_CLASS + \"._set002a.myArrayField[0][0].line\", \"\\\"ABCDE\\\"\"},\n-            {\"localInt\", \"java.lang.Integer.MIN_VALUE\"}\n-    };\n+        { DEBUGGEE_CLASS + \"._set002a.myArrayField[0][0].line\", \"\\\"ABCDE\\\"\" },\n+        { \"localInt\", \"java.lang.Integer.MIN_VALUE\"}\n+                                          };\n@@ -105,0 +104,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -106,1 +111,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -109,1 +114,1 @@\n-        jdb.receiveReplyFor(JdbCommand.step);\n+        reply = jdb.receiveReplyFor(JdbCommand.step);\n@@ -112,2 +117,2 @@\n-        for (String[] strings : checkedExpr) {\n-            jdb.receiveReplyFor(JdbCommand.set + strings[0] + \" = \" + strings[1]);\n+        for (int i = 0; i < checkedExpr.length; i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.set + checkedExpr[i][0] + \" = \" + checkedExpr[i][1]);\n@@ -116,1 +121,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -118,1 +123,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.eval + ERROR_MESSAGE);\n+        reply = jdb.receiveReplyFor(JdbCommand.eval + ERROR_MESSAGE);\n@@ -120,2 +125,2 @@\n-        \/\/ if everything is OK reply will look like this\n-        \/\/   nsk.jdb.set.set002.set002a.errorMessage = \"\"\n+        \/\/if everything is OK reply will look like this\n+        \/\/  nsk.jdb.set.set002.set002a.errorMessage = \"\"\n@@ -124,2 +129,2 @@\n-            for (String s : reply) {\n-                log.complain(s);\n+            for (int i = 0; i < reply.length; i++) {\n+                log.complain(reply[i]);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/set\/set002\/set002.java","additions":28,"deletions":23,"binary":false,"changes":51,"status":"modified"},{"patch":"@@ -73,3 +73,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -77,1 +76,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -81,1 +81,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -85,2 +85,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -92,6 +92,6 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.step.step002\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".step002\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-    static final int BREAKPOINT_LINE = 50;\n+    static final String PACKAGE_NAME    = \"nsk.jdb.step.step002\";\n+    static final String TEST_CLASS      = PACKAGE_NAME + \".step002\";\n+    static final String DEBUGGEE_CLASS  = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK     = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK      = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final int    BREAKPOINT_LINE = 50;\n@@ -100,2 +100,9 @@\n-        jdb.receiveReplyFor(JdbCommand.stop_at + DEBUGGEE_CLASS + \":\" + BREAKPOINT_LINE);\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+        String[] threads;\n+\n+        reply = jdb.receiveReplyFor(JdbCommand.stop_at + DEBUGGEE_CLASS + \":\" + BREAKPOINT_LINE);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -104,3 +111,3 @@\n-        jdb.receiveReplyFor(JdbCommand.step);\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.eval + \"intVar\");\n-        var grep = new Paragrep(reply);\n+        reply = jdb.receiveReplyFor(JdbCommand.step);\n+        reply = jdb.receiveReplyFor(JdbCommand.eval + \"intVar\");\n+        grep = new Paragrep(reply);\n@@ -112,1 +119,1 @@\n-        jdb.receiveReplyFor(JdbCommand.step);\n+        reply = jdb.receiveReplyFor(JdbCommand.step);\n@@ -120,1 +127,1 @@\n-        jdb.receiveReplyFor(JdbCommand.step);\n+        reply = jdb.receiveReplyFor(JdbCommand.step);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/step\/step002\/step002.java","additions":27,"deletions":20,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -62,3 +62,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -66,1 +65,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -70,1 +70,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -74,2 +74,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -81,6 +81,6 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.step_up.step_up001\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".step_up001\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-    static final String MYTHREAD = \"MyThread\";\n+    static final String PACKAGE_NAME    = \"nsk.jdb.step_up.step_up001\";\n+    static final String TEST_CLASS      = PACKAGE_NAME + \".step_up001\";\n+    static final String DEBUGGEE_CLASS  = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK     = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK      = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String MYTHREAD        = \"MyThread\";\n@@ -92,0 +92,7 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+        String[] threads;\n+\n@@ -94,0 +101,1 @@\n+        int breakCount = 0;\n@@ -96,1 +104,1 @@\n-            String[] reply = jdb.receiveReplyFor(JdbCommand.cont);\n+            reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -98,1 +106,2 @@\n-                jdb.receiveReplyFor(JdbCommand.step); \/\/ to get out of lastBreak;\n+                breakCount++;\n+                reply = jdb.receiveReplyFor(JdbCommand.step); \/\/ to get out of lastBreak;\n@@ -100,1 +109,1 @@\n-                jdb.receiveReplyFor(JdbCommand.step_up);\n+                reply = jdb.receiveReplyFor(JdbCommand.step_up);\n@@ -119,1 +128,1 @@\n-    private boolean checkSteppedUp() {\n+    private boolean checkSteppedUp () {\n@@ -121,0 +130,1 @@\n+        String found;\n@@ -132,1 +142,1 @@\n-                result = false;\n+                result= false;\n@@ -139,1 +149,1 @@\n-            result = false;\n+            result= false;\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/step_up\/step_up001\/step_up001.java","additions":29,"deletions":19,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -54,3 +54,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -58,1 +57,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -64,0 +64,1 @@\n+ *\n@@ -68,1 +69,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -72,2 +73,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -82,2 +83,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -89,0 +90,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -100,1 +107,4 @@\n-    private boolean checkStop(String location) {\n+    private boolean checkStop (String location) {\n+        Paragrep grep;\n+        String[] reply;\n+        String found;\n@@ -104,1 +114,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.stop_at + location);\n+        reply = jdb.receiveReplyFor(JdbCommand.stop_at + location);\n@@ -106,2 +116,2 @@\n-        var grep = new Paragrep(reply);\n-        String found = grep.findFirst(FAILURE_PATTERN);\n+        grep = new Paragrep(reply);\n+        found = grep.findFirst(FAILURE_PATTERN);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/stop_at\/stop_at002\/stop_at002.java","additions":23,"deletions":13,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -66,3 +66,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -70,1 +69,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -76,0 +76,1 @@\n+ *\n@@ -80,1 +81,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -84,2 +85,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -94,8 +95,8 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-    static final String[][] LOCATIONS = new String[][]{\n-            {PACKAGE_NAME + \".stop_at003b:61\", PACKAGE_NAME + \".stop_at003b.<clinit>()\"},\n-            {PACKAGE_NAME + \".stop_at003b:63\", PACKAGE_NAME + \".stop_at003b.<init>()\"},\n-            {PACKAGE_NAME + \".stop_at003b:66\", PACKAGE_NAME + \".stop_at003b.<init>()\"},\n-            {PACKAGE_NAME + \".stop_at003b:72\", PACKAGE_NAME + \".stop_at003b.foo()\"}\n-    };\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String[][] LOCATIONS = new String[][] {\n+        { PACKAGE_NAME + \".stop_at003b:61\", PACKAGE_NAME + \".stop_at003b.<clinit>()\" },\n+        { PACKAGE_NAME + \".stop_at003b:63\", PACKAGE_NAME + \".stop_at003b.<init>()\" },\n+        { PACKAGE_NAME + \".stop_at003b:66\", PACKAGE_NAME + \".stop_at003b.<init>()\" },\n+        { PACKAGE_NAME + \".stop_at003b:72\", PACKAGE_NAME + \".stop_at003b.foo()\" }\n+                                                   };\n@@ -105,3 +106,9 @@\n-        for (String[] location : LOCATIONS) {\n-            if (!checkStop(location[0])) {\n-                failure(\"jdb failed to set line breakpoint at : \" + location[0]);\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n+        for (int i = 0; i < LOCATIONS.length; i++) {\n+            if (!checkStop(LOCATIONS[i][0])) {\n+                failure(\"jdb failed to set line breakpoint at : \" + LOCATIONS[i][0]);\n@@ -111,4 +118,4 @@\n-        for (String[] location : LOCATIONS) {\n-            String[] reply = jdb.receiveReplyFor(JdbCommand.cont);\n-            if (!jdb.isAtBreakpoint(reply, location[1])) {\n-                failure(\"Missed breakpoint at : \" + location[0]);\n+        for (int i = 0; i < LOCATIONS.length; i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.cont);\n+            if (!jdb.isAtBreakpoint(reply, LOCATIONS[i][1])) {\n+                failure(\"Missed breakpoint at : \" + LOCATIONS[i][0]);\n@@ -121,1 +128,4 @@\n-    private boolean checkStop(String location) {\n+    private boolean checkStop (String location) {\n+        Paragrep grep;\n+        String[] reply;\n+        String found;\n@@ -125,1 +135,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.stop_at + location);\n+        reply = jdb.receiveReplyFor(JdbCommand.stop_at + location);\n@@ -127,2 +137,2 @@\n-        var grep = new Paragrep(reply);\n-        String found = grep.findFirst(FAILURE_PATTERN);\n+        grep = new Paragrep(reply);\n+        found = grep.findFirst(FAILURE_PATTERN);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/stop_at\/stop_at003\/stop_at003.java","additions":36,"deletions":26,"binary":false,"changes":62,"status":"modified"},{"patch":"@@ -67,3 +67,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -71,1 +70,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -82,1 +82,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -86,2 +86,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -96,9 +96,9 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-    static final String[] LOCATIONS = new String[]{\n-            PACKAGE_NAME + \".stop_in002b.<clinit>\",\n-            PACKAGE_NAME + \".stop_in002b.<init>\",\n-            PACKAGE_NAME + \".stop_in002b$StaticNested.m1\",\n-            PACKAGE_NAME + \".stop_in002b$Inner.m2\",\n-            PACKAGE_NAME + \".stop_in002b.foo\"\n-    };\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String[] LOCATIONS = new String[] {\n+        PACKAGE_NAME + \".stop_in002b.<clinit>\",\n+        PACKAGE_NAME + \".stop_in002b.<init>\",\n+        PACKAGE_NAME + \".stop_in002b$StaticNested.m1\",\n+        PACKAGE_NAME + \".stop_in002b$Inner.m2\",\n+        PACKAGE_NAME + \".stop_in002b.foo\"\n+                                                   };\n@@ -108,3 +108,9 @@\n-        for (String location : LOCATIONS) {\n-            if (!checkStop(location)) {\n-                failure(\"jdb failed to set line breakpoint at : \" + location);\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n+        for (int i = 0; i < LOCATIONS.length; i++) {\n+            if (!checkStop(LOCATIONS[i])) {\n+                failure(\"jdb failed to set line breakpoint at : \" + LOCATIONS[i]);\n@@ -114,4 +120,4 @@\n-        for (String location : LOCATIONS) {\n-            String[] reply = jdb.receiveReplyFor(JdbCommand.cont);\n-            if (!jdb.isAtBreakpoint(reply, location)) {\n-                failure(\"Missed breakpoint at : \" + location);\n+        for (int i = 0; i < LOCATIONS.length; i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.cont);\n+            if (!jdb.isAtBreakpoint(reply, LOCATIONS[i])) {\n+                failure(\"Missed breakpoint at : \" + LOCATIONS[i]);\n@@ -124,1 +130,4 @@\n-    private boolean checkStop(String location) {\n+    private boolean checkStop (String location) {\n+        Paragrep grep;\n+        String[] reply;\n+        String found;\n@@ -128,1 +137,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.stop_in + location);\n+        reply = jdb.receiveReplyFor(JdbCommand.stop_in + location);\n@@ -130,2 +139,2 @@\n-        var grep = new Paragrep(reply);\n-        String found = grep.findFirst(FAILURE_PATTERN);\n+        grep = new Paragrep(reply);\n+        found = grep.findFirst(FAILURE_PATTERN);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/stop_in\/stop_in002\/stop_in002.java","additions":36,"deletions":27,"binary":false,"changes":63,"status":"modified"},{"patch":"@@ -63,3 +63,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -67,2 +66,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -72,1 +71,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -76,2 +75,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -86,2 +85,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".breakHere\";\n+    static final String FIRST_BREAK    = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK     = DEBUGGEE_CLASS + \".breakHere\";\n@@ -89,1 +88,1 @@\n-    static final String SUSPENDED = \"Suspended\";\n+    static final String SUSPENDED       = \"Suspended\";\n@@ -94,0 +93,7 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+        String[] threads;\n+\n@@ -95,1 +101,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -97,1 +103,1 @@\n-            String[] threads = jdb.getThreadIds(DEBUGGEE_THREAD);\n+            threads = jdb.getThreadIds(DEBUGGEE_THREAD);\n@@ -105,1 +111,1 @@\n-            jdb.receiveReplyFor(JdbCommand.suspend + threads[0]);\n+            reply = jdb.receiveReplyFor(JdbCommand.suspend + threads[0]);\n@@ -107,1 +113,1 @@\n-            String[] reply = jdb.receiveReplyFor(JdbCommand.cont);\n+            reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -115,7 +121,7 @@\n-            var grep = new Paragrep(reply);\n-            String found = grep.findFirst(DEBUGGEE_RESULT + \" =\");\n-            if (found.length() > 0 && !found.contains(DEBUGGEE_RESULT + \" = null\")) {\n-                if (!found.contains(DEBUGGEE_RESULT + \" = 1\")) {\n-                    log.complain(\"Wrong value of \" + DEBUGGEE_RESULT);\n-                    log.complain(found);\n-                    success = false;\n+            grep = new Paragrep(reply);\n+            found = grep.findFirst(DEBUGGEE_RESULT + \" =\" );\n+            if (found.length() > 0 && found.indexOf(DEBUGGEE_RESULT + \" = null\") < 0) {\n+                if (found.indexOf(DEBUGGEE_RESULT + \" = 1\") < 0) {\n+                   log.complain(\"Wrong value of \" + DEBUGGEE_RESULT);\n+                   log.complain(found);\n+                   success = false;\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/suspend\/suspend001\/suspend001.java","additions":28,"deletions":22,"binary":false,"changes":50,"status":"modified"},{"patch":"@@ -60,3 +60,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -64,1 +63,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -68,1 +68,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -72,2 +72,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -79,5 +79,5 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.thread.thread002\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".thread002\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String PACKAGE_NAME     = \"nsk.jdb.thread.thread002\";\n+    static final String TEST_CLASS       = PACKAGE_NAME + \".thread002\";\n+    static final String DEBUGGEE_CLASS   = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK      = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK       = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -85,1 +85,1 @@\n-    static final String THREAD_NAME = \"MyThread\";\n+    static final String THREAD_NAME      = \"MyThread\";\n@@ -88,0 +88,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -100,2 +106,2 @@\n-        String[] reply = jdb.getTotalReply();\n-        var grep = new Paragrep(reply);\n+        reply = jdb.getTotalReply();\n+        grep = new Paragrep(reply);\n@@ -103,1 +109,1 @@\n-            int count = grep.find(THREAD_NAME + \"#\" + i);\n+            count = grep.find(THREAD_NAME + \"#\" + i);\n@@ -105,1 +111,1 @@\n-                failure(\"jdb failed to switch to thread: \" + threadIds[i]);\n+                 failure(\"jdb failed to switch to thread: \" + threadIds[i]);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/thread\/thread002\/thread002.java","additions":23,"deletions":17,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -58,3 +58,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -62,1 +61,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -66,1 +66,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -70,2 +70,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -77,5 +77,5 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.threadgroup.threadgroup002\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".threadgroup002\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String PACKAGE_NAME     = \"nsk.jdb.threadgroup.threadgroup002\";\n+    static final String TEST_CLASS       = PACKAGE_NAME + \".threadgroup002\";\n+    static final String DEBUGGEE_CLASS   = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK      = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK       = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -84,0 +84,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -89,3 +95,3 @@\n-            String[] reply = jdb.receiveReplyFor(JdbCommand.threadgroup + threadgroup002a.THREADGROUP_NAME + i);\n-            var grep = new Paragrep(reply);\n-            int count = grep.find(\"not a valid threadgroup name\");\n+            reply = jdb.receiveReplyFor(JdbCommand.threadgroup + threadgroup002a.THREADGROUP_NAME + i);\n+            grep = new Paragrep(reply);\n+            count = grep.find(\"not a valid threadgroup name\");\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/threadgroup\/threadgroup002\/threadgroup002.java","additions":21,"deletions":15,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -58,3 +58,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -62,1 +61,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -66,1 +66,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -70,2 +70,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -77,5 +77,5 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.threadgroups.threadgroups002\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".threadgroups002\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String PACKAGE_NAME     = \"nsk.jdb.threadgroups.threadgroups002\";\n+    static final String TEST_CLASS       = PACKAGE_NAME + \".threadgroups002\";\n+    static final String DEBUGGEE_CLASS   = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK      = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK       = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -84,0 +84,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -87,4 +93,4 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.threadgroups);\n-        var grep = new Paragrep(reply);\n-        int count = grep.find(threadgroups002a.THREADGROUP_NAME);\n-        if (count != threadgroups002a.numThreadGroups) {\n+        reply = jdb.receiveReplyFor(JdbCommand.threadgroups);\n+        grep = new Paragrep(reply);\n+        count = grep.find(threadgroups002a.THREADGROUP_NAME);\n+        if (count != threadgroups002a.numThreadGroups ) {\n@@ -92,1 +98,1 @@\n-                    \"\\n\\texpected value: \" + threadgroups002a.numThreadGroups);\n+                \"\\n\\texpected value: \" + threadgroups002a.numThreadGroups);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/threadgroups\/threadgroups002\/threadgroups002.java","additions":23,"deletions":17,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -57,3 +57,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -61,1 +60,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -65,1 +65,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -69,2 +69,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -76,5 +76,5 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.threads.threads002\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".threads002\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String PACKAGE_NAME     = \"nsk.jdb.threads.threads002\";\n+    static final String TEST_CLASS       = PACKAGE_NAME + \".threads002\";\n+    static final String DEBUGGEE_CLASS   = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK      = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK       = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -82,1 +82,1 @@\n-    static final String THREAD_NAME = PACKAGE_NAME + \".MyThread\";\n+    static final String THREAD_NAME      = PACKAGE_NAME + \".MyThread\";\n@@ -85,0 +85,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -88,4 +94,4 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.threads);\n-        var grep = new Paragrep(reply);\n-        int count = grep.find(THREAD_NAME);\n-        if (count != threads002a.numThreads) {\n+        reply = jdb.receiveReplyFor(JdbCommand.threads);\n+        grep = new Paragrep(reply);\n+        count = grep.find(THREAD_NAME);\n+        if (count != threads002a.numThreads ) {\n@@ -93,1 +99,1 @@\n-                    \"\\n\\texpected value: \" + threads002a.numThreads);\n+                \"\\n\\texpected value: \" + threads002a.numThreads);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/threads\/threads002\/threads002.java","additions":24,"deletions":18,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -64,3 +64,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -68,2 +67,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -73,1 +72,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -77,2 +76,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -84,6 +83,6 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.trace.trace001\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".trace001\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-    static final String MYTHREAD = \"MyThread\";\n+    static final String PACKAGE_NAME    = \"nsk.jdb.trace.trace001\";\n+    static final String TEST_CLASS      = PACKAGE_NAME + \".trace001\";\n+    static final String DEBUGGEE_CLASS  = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK     = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK      = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String MYTHREAD        = \"MyThread\";\n@@ -95,0 +94,7 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+        String[] threads;\n+\n@@ -96,1 +102,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -98,1 +104,1 @@\n-        String[] threads = jdb.getThreadIds(DEBUGGEE_THREAD);\n+        threads = jdb.getThreadIds(DEBUGGEE_THREAD);\n@@ -106,2 +112,2 @@\n-        for (String thread : threads) {\n-            jdb.receiveReplyFor(JdbCommand.trace + \"methods \" + thread);\n+        for (int i = 0; i < threads.length; i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.trace + \"methods \" + threads[i]);\n@@ -110,1 +116,1 @@\n-        jdb.contToExit(CHECKED_METHODS.length * threads.length * 2 + 3);\n+        jdb.contToExit(CHECKED_METHODS.length*threads.length*2 + 3);\n@@ -112,1 +118,1 @@\n-        String[] reply = jdb.getTotalReply();\n+        reply = jdb.getTotalReply();\n@@ -118,2 +124,5 @@\n-    private boolean checkTrace(String[] checkedMethods, String[] reply) {\n-        var v = new Vector<String>();\n+    private boolean checkTrace (String[] checkedMethods, String[] reply) {\n+        Paragrep grep;\n+        String found;\n+        int count;\n+        Vector v = new Vector();\n@@ -122,2 +131,2 @@\n-        var grep = new Paragrep(reply);\n-        for (String checkedMethod : checkedMethods) {\n+        grep = new Paragrep(reply);\n+        for (int i = 0; i < checkedMethods.length; i++) {\n@@ -125,1 +134,1 @@\n-            v.add(DEBUGGEE_THREAD + \".\" + checkedMethod);\n+            v.add(DEBUGGEE_THREAD + \".\" + checkedMethods[i]);\n@@ -127,1 +136,1 @@\n-            int count = grep.find(v);\n+            count = grep.find(v);\n@@ -129,1 +138,1 @@\n-                log.complain(\"Count of method enter is incorrect for the method : \" + DEBUGGEE_THREAD + \".\" + checkedMethod);\n+                log.complain(\"Count of method enter is incorrect for the method : \" + DEBUGGEE_THREAD + \".\" + checkedMethods[i]);\n@@ -131,1 +140,1 @@\n-                result = false;\n+                result= false;\n@@ -135,1 +144,1 @@\n-            v.add(DEBUGGEE_THREAD + \".\" + checkedMethod);\n+            v.add(DEBUGGEE_THREAD + \".\" + checkedMethods[i]);\n@@ -139,1 +148,1 @@\n-                log.complain(\"Count of method exit is incorrect for the method : \" + DEBUGGEE_THREAD + \".\" + checkedMethod);\n+                log.complain(\"Count of method exit is incorrect for the method : \" + DEBUGGEE_THREAD + \".\" + checkedMethods[i]);\n@@ -141,1 +150,1 @@\n-                result = false;\n+                result= false;\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/trace\/trace001\/trace001.java","additions":40,"deletions":31,"binary":false,"changes":71,"status":"modified"},{"patch":"@@ -69,3 +69,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -73,2 +72,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -78,1 +77,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -82,2 +81,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -92,2 +91,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -95,1 +94,6 @@\n-    public uncaught_exception002(boolean debuggeeShouldFail) {\n+    static final String[] FRAMES = new String[] {\n+        DEBUGGEE_CLASS + \".func\",\n+        DEBUGGEE_CLASS + \".runIt\",\n+        DEBUGGEE_CLASS + \".main\"                };\n+\n+    public uncaught_exception002 (boolean debuggeeShouldFail) {\n@@ -100,0 +104,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -104,2 +114,2 @@\n-        String[] reply = jdb.getTotalReply();\n-        var grep = new Paragrep(reply);\n+        reply = jdb.getTotalReply();\n+        grep = new Paragrep(reply);\n@@ -107,1 +117,1 @@\n-        var v = new Vector<String>();\n+        v = new Vector();\n@@ -114,1 +124,1 @@\n-        v = new Vector<>();\n+        v = new Vector();\n@@ -119,1 +129,1 @@\n-                    \"is not accessible\");\n+                \"is not accessible\");\n@@ -122,0 +132,10 @@\n+\n+    private boolean checkStop () {\n+        Paragrep grep;\n+        String[] reply;\n+        String found;\n+        Vector v;\n+        boolean result = true;\n+\n+        return result;\n+    }\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/uncaught_exception\/uncaught_exception002\/uncaught_exception002.java","additions":36,"deletions":16,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -73,3 +73,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -77,2 +76,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -82,1 +81,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[])  {\n@@ -86,2 +85,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -96,3 +95,3 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-    static final int BREAKPOINT_LINE = 47;\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final int    BREAKPOINT_LINE    = 47;\n@@ -101,6 +100,6 @@\n-            JdbCommand.locals,\n-            JdbCommand.threads,\n-            JdbCommand.methods + DEBUGGEE_CLASS,\n-            JdbCommand.fields + DEBUGGEE_CLASS,\n-            JdbCommand.eval + \"(new java.lang.String(\\\"Hello, World\\\")).length()\"\n-    };\n+        JdbCommand.locals,\n+        JdbCommand.threads,\n+        JdbCommand.methods + DEBUGGEE_CLASS,\n+        JdbCommand.fields  + DEBUGGEE_CLASS,\n+        JdbCommand.eval + \"(new java.lang.String(\\\"Hello, World\\\")).length()\"\n+                                             };\n@@ -109,1 +108,7 @@\n-        jdb.receiveReplyFor(JdbCommand.stop_at + DEBUGGEE_CLASS + \":\" + BREAKPOINT_LINE);\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n+        reply = jdb.receiveReplyFor(JdbCommand.stop_at + DEBUGGEE_CLASS + \":\" + BREAKPOINT_LINE);\n@@ -112,3 +117,3 @@\n-        jdb.receiveReplyFor(JdbCommand.monitor + CHECKED_COMMANDS[0]);\n-        jdb.receiveReplyFor(JdbCommand.monitor + CHECKED_COMMANDS[1]);\n-        jdb.receiveReplyFor(JdbCommand.monitor + CHECKED_COMMANDS[2]);\n+        reply = jdb.receiveReplyFor(JdbCommand.monitor + CHECKED_COMMANDS[0]);\n+        reply = jdb.receiveReplyFor(JdbCommand.monitor + CHECKED_COMMANDS[1]);\n+        reply = jdb.receiveReplyFor(JdbCommand.monitor + CHECKED_COMMANDS[2]);\n@@ -117,1 +122,1 @@\n-        jdb.receiveReplyFor(JdbCommand.unmonitor + \" 1\");\n+        reply = jdb.receiveReplyFor(JdbCommand.unmonitor + \" 1\");\n@@ -120,2 +125,2 @@\n-        jdb.receiveReplyFor(JdbCommand.monitor + CHECKED_COMMANDS[3]);\n-        jdb.receiveReplyFor(JdbCommand.monitor + CHECKED_COMMANDS[4]);\n+        reply = jdb.receiveReplyFor(JdbCommand.monitor + CHECKED_COMMANDS[3]);\n+        reply = jdb.receiveReplyFor(JdbCommand.monitor + CHECKED_COMMANDS[4]);\n@@ -124,1 +129,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont, true, repliesCount);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont, true, repliesCount);\n@@ -126,1 +131,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.monitor);\n+        reply = jdb.receiveReplyFor(JdbCommand.monitor);\n@@ -143,0 +148,3 @@\n+        Paragrep grep;\n+        String found;\n+        Vector v;\n@@ -146,1 +154,1 @@\n-        var grep = new Paragrep(reply);\n+        grep = new Paragrep(reply);\n@@ -165,0 +173,3 @@\n+        Paragrep grep;\n+        String found;\n+        Vector v = new Vector();;\n@@ -166,1 +177,0 @@\n-        var grep = new Paragrep(reply);\n@@ -169,0 +179,2 @@\n+        grep = new Paragrep(reply);\n+\n@@ -176,1 +188,0 @@\n-        var v = new Vector<String>();\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/unmonitor\/unmonitor001\/unmonitor001.java","additions":40,"deletions":29,"binary":false,"changes":69,"status":"modified"},{"patch":"@@ -71,3 +71,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -75,2 +74,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -80,1 +79,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -84,2 +83,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -91,6 +90,6 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.untrace.untrace001\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".untrace001\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".breakHere\";\n-    static final String MYTHREAD = \"MyThread\";\n+    static final String PACKAGE_NAME    = \"nsk.jdb.untrace.untrace001\";\n+    static final String TEST_CLASS      = PACKAGE_NAME + \".untrace001\";\n+    static final String DEBUGGEE_CLASS  = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK     = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK      = DEBUGGEE_CLASS + \".breakHere\";\n+    static final String MYTHREAD        = \"MyThread\";\n@@ -102,0 +101,7 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+        String[] threads;\n+\n@@ -103,1 +109,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -105,1 +111,1 @@\n-        String[] threads = jdb.getThreadIds(DEBUGGEE_THREAD);\n+        threads = jdb.getThreadIds(DEBUGGEE_THREAD);\n@@ -113,2 +119,2 @@\n-        for (String thread : threads) {\n-            jdb.receiveReplyFor(JdbCommand.trace + \"methods \" + thread);\n+        for (int i = 0; i < threads.length; i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.trace + \"methods \" + threads[i]);\n@@ -118,2 +124,2 @@\n-        for (int i = 0; i < (CHECKED_METHODS.length * threads.length * 2 + 1); i++) {\n-            jdb.receiveReplyFor(JdbCommand.cont);\n+        for (int i = 0; i < (CHECKED_METHODS.length*threads.length*2 + 1); i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -122,2 +128,2 @@\n-        for (String thread : threads) {\n-            jdb.receiveReplyFor(JdbCommand.untrace + \"methods \" + thread);\n+        for (int i = 0; i < threads.length; i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.untrace + \"methods \" + threads[i]);\n@@ -126,1 +132,1 @@\n-        jdb.contToExit(CHECKED_METHODS.length * threads.length * 2 + 2);\n+        jdb.contToExit(CHECKED_METHODS.length*threads.length*2 + 2);\n@@ -128,1 +134,1 @@\n-        String[] reply = jdb.getTotalReply();\n+        reply = jdb.getTotalReply();\n@@ -134,2 +140,5 @@\n-    private boolean checkTrace(String[] checkedMethods, String[] reply) {\n-        var v = new Vector<String>();\n+    private boolean checkTrace (String[] checkedMethods, String[] reply) {\n+        Paragrep grep;\n+        String found;\n+        int count;\n+        Vector v = new Vector();\n@@ -137,1 +146,0 @@\n-        var grep = new Paragrep(reply);\n@@ -139,1 +147,2 @@\n-        for (String checkedMethod : checkedMethods) {\n+        grep = new Paragrep(reply);\n+        for (int i = 0; i < checkedMethods.length; i++) {\n@@ -141,1 +150,1 @@\n-            v.add(DEBUGGEE_THREAD + \".\" + checkedMethod);\n+            v.add(DEBUGGEE_THREAD + \".\" + checkedMethods[i]);\n@@ -143,1 +152,1 @@\n-            int count = grep.find(v);\n+            count = grep.find(v);\n@@ -145,1 +154,1 @@\n-                log.complain(\"Count of method enter is incorrect for the method : \" + DEBUGGEE_THREAD + \".\" + checkedMethod);\n+                log.complain(\"Count of method enter is incorrect for the method : \" + DEBUGGEE_THREAD + \".\" + checkedMethods[i]);\n@@ -147,1 +156,1 @@\n-                result = false;\n+                result= false;\n@@ -151,1 +160,1 @@\n-            v.add(DEBUGGEE_THREAD + \".\" + checkedMethod);\n+            v.add(DEBUGGEE_THREAD + \".\" + checkedMethods[i]);\n@@ -155,1 +164,1 @@\n-                log.complain(\"Count of method exit is incorrect for the method : \" + DEBUGGEE_THREAD + \".\" + checkedMethod);\n+                log.complain(\"Count of method exit is incorrect for the method : \" + DEBUGGEE_THREAD + \".\" + checkedMethods[i]);\n@@ -157,1 +166,1 @@\n-                result = false;\n+                result= false;\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/untrace\/untrace001\/untrace001.java","additions":44,"deletions":35,"binary":false,"changes":79,"status":"modified"},{"patch":"@@ -67,3 +67,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -71,2 +70,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -76,1 +75,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -80,2 +79,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -87,6 +86,6 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.unwatch.unwatch001\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".unwatch001\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String DEBUGGEE_CLASS2 = DEBUGGEE_CLASS + \"$CheckedFields\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".breakHere\";\n+    static final String PACKAGE_NAME       = \"nsk.jdb.unwatch.unwatch001\";\n+    static final String TEST_CLASS         = PACKAGE_NAME + \".unwatch001\";\n+    static final String DEBUGGEE_CLASS     = TEST_CLASS + \"a\";\n+    static final String DEBUGGEE_CLASS2    = DEBUGGEE_CLASS + \"$CheckedFields\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".breakHere\";\n@@ -94,2 +93,2 @@\n-    static String[] checkedFields = {\"fS1\", \"FS0\"};\n-    static String[] checkedFields2 = {\"fP1\", \"fU1\", \"fR1\"};\n+    static String[] checkedFields  = { \"fS1\", \"FS0\" };\n+    static String[] checkedFields2 = { \"fP1\", \"fU1\", \"fR1\"};\n@@ -98,0 +97,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -100,1 +105,1 @@\n-        jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS);\n+        reply = jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS);\n@@ -102,1 +107,1 @@\n-        jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS2);\n+        reply = jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS2);\n@@ -104,2 +109,2 @@\n-        watchFields(DEBUGGEE_CLASS, checkedFields);\n-        watchFields(DEBUGGEE_CLASS2, checkedFields2);\n+        watchFields (DEBUGGEE_CLASS, checkedFields);\n+        watchFields (DEBUGGEE_CLASS2, checkedFields2);\n@@ -108,1 +113,1 @@\n-            jdb.receiveReplyFor(JdbCommand.cont);\n+            reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -111,2 +116,2 @@\n-        unwatchFields(DEBUGGEE_CLASS, checkedFields);\n-        unwatchFields(DEBUGGEE_CLASS2, checkedFields2);\n+        unwatchFields (DEBUGGEE_CLASS, checkedFields);\n+        unwatchFields (DEBUGGEE_CLASS2, checkedFields2);\n@@ -117,2 +122,2 @@\n-        String[] reply = jdb.getTotalReply();\n-        if (!checkFields(DEBUGGEE_CLASS, reply, checkedFields)) {\n+        reply = jdb.getTotalReply();\n+        if (!checkFields (DEBUGGEE_CLASS, reply, checkedFields)) {\n@@ -121,1 +126,1 @@\n-        if (!checkFields(DEBUGGEE_CLASS2, reply, checkedFields2)) {\n+        if (!checkFields (DEBUGGEE_CLASS2, reply, checkedFields2)) {\n@@ -126,3 +131,5 @@\n-    private void watchFields(String className, String[] checkedFields) {\n-        for (String checkedField : checkedFields) {\n-            jdb.receiveReplyFor(JdbCommand.watch + \" access \" + className + \".\" + checkedField);\n+    private void watchFields (String className, String[] checkedFields) {\n+        String[] reply;\n+\n+        for (int i = 0; i < checkedFields.length; i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.watch + \" access \" + className + \".\" + checkedFields[i]);\n@@ -130,0 +137,1 @@\n+\n@@ -132,3 +140,5 @@\n-    private void unwatchFields(String className, String[] checkedFields) {\n-        for (String checkedField : checkedFields) {\n-            jdb.receiveReplyFor(JdbCommand.unwatch + \" access \" + className + \".\" + checkedField);\n+    private void unwatchFields (String className, String[] checkedFields) {\n+        String[] reply;\n+\n+        for (int i = 0; i < checkedFields.length; i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.unwatch + \" access \" + className + \".\" + checkedFields[i]);\n@@ -136,0 +146,1 @@\n+\n@@ -138,1 +149,3 @@\n-    private boolean checkFields(String className, String[] reply, String[] checkedFields) {\n+    private boolean checkFields (String className, String[] reply, String[] checkedFields) {\n+        Paragrep grep;\n+        String found;\n@@ -140,2 +153,2 @@\n-        var v = new Vector<String>();\n-        var grep = new Paragrep(reply);\n+        int count;\n+        Vector v = new Vector();\n@@ -143,1 +156,3 @@\n-        for (String checkedField : checkedFields) {\n+        grep = new Paragrep(reply);\n+        v.add(\"access encountered\");\n+        for (int i = 0; i < checkedFields.length; i++) {\n@@ -146,1 +161,1 @@\n-            v.add(className + \".\" + checkedField);\n+            v.add(className + \".\" + checkedFields[i]);\n@@ -148,1 +163,1 @@\n-            int count = grep.find(v);\n+            count = grep.find(v);\n@@ -150,1 +165,1 @@\n-                log.complain(\"jdb reported wrong number of access to the field \" + className + \".\" + checkedField);\n+                log.complain(\"jdb reported wrong number of access to the field \" + className + \".\" + checkedFields[i]);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/unwatch\/unwatch001\/unwatch001.java","additions":54,"deletions":39,"binary":false,"changes":93,"status":"modified"},{"patch":"@@ -68,3 +68,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -72,2 +71,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -77,1 +76,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -81,2 +80,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -88,7 +87,7 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.unwatch.unwatch002\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".unwatch002\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String DEBUGGEE_CLASS2 = DEBUGGEE_CLASS + \"$CheckedFields\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".breakHere\";\n-    static final String expectedPrompt = \"main[1]\";\n+    static final String PACKAGE_NAME       = \"nsk.jdb.unwatch.unwatch002\";\n+    static final String TEST_CLASS         = PACKAGE_NAME + \".unwatch002\";\n+    static final String DEBUGGEE_CLASS     = TEST_CLASS + \"a\";\n+    static final String DEBUGGEE_CLASS2    = DEBUGGEE_CLASS + \"$CheckedFields\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".breakHere\";\n+    static final String expectedPrompt     = \"main[1]\";\n@@ -96,2 +95,2 @@\n-    static String[] checkedFields = {\"FS1\"};\n-    static String[] checkedFields2 = {\"FT1\", \"FV1\"};\n+    static String[] checkedFields  = { \"FS1\" };\n+    static String[] checkedFields2 = { \"FT1\", \"FV1\" };\n@@ -100,0 +99,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -102,1 +107,1 @@\n-        jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS);\n+        reply = jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS);\n@@ -104,1 +109,1 @@\n-        jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS2);\n+        reply = jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS2);\n@@ -106,2 +111,2 @@\n-        watchFields(DEBUGGEE_CLASS, checkedFields);\n-        watchFields(DEBUGGEE_CLASS2, checkedFields2);\n+        watchFields (DEBUGGEE_CLASS, checkedFields);\n+        watchFields (DEBUGGEE_CLASS2, checkedFields2);\n@@ -110,2 +115,2 @@\n-        for (int i = 0; i < (checkedFields.length * 2 + checkedFields2.length * 2 + 2); i++) {\n-            jdb.receiveReplyForWithMessageWait(JdbCommand.cont, expectedPrompt);\n+        for (int i = 0; i < (checkedFields.length *2 + checkedFields2.length*2 + 2); i++) {\n+            reply = jdb.receiveReplyForWithMessageWait(JdbCommand.cont, expectedPrompt);\n@@ -114,2 +119,2 @@\n-        unwatchFields(DEBUGGEE_CLASS, checkedFields);\n-        unwatchFields(DEBUGGEE_CLASS2, checkedFields2);\n+        unwatchFields (DEBUGGEE_CLASS, checkedFields);\n+        unwatchFields (DEBUGGEE_CLASS2, checkedFields2);\n@@ -118,1 +123,1 @@\n-        jdb.contToExit(checkedFields.length * 2 + checkedFields2.length * 2 + 1);\n+        jdb.contToExit(checkedFields.length*2 + checkedFields2.length*2 + 1);\n@@ -120,2 +125,2 @@\n-        String[] reply = jdb.getTotalReply();\n-        if (!checkFields(DEBUGGEE_CLASS, reply, checkedFields)) {\n+        reply = jdb.getTotalReply();\n+        if (!checkFields (DEBUGGEE_CLASS, reply, checkedFields)) {\n@@ -124,1 +129,1 @@\n-        if (!checkFields(DEBUGGEE_CLASS2, reply, checkedFields2)) {\n+        if (!checkFields (DEBUGGEE_CLASS2, reply, checkedFields2)) {\n@@ -129,3 +134,5 @@\n-    private void watchFields(String className, String[] checkedFields) {\n-        for (String checkedField : checkedFields) {\n-            jdb.receiveReplyFor(JdbCommand.watch + \" all \" + className + \".\" + checkedField);\n+    private void watchFields (String className, String[] checkedFields) {\n+        String[] reply;\n+\n+        for (int i = 0; i < checkedFields.length; i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.watch + \" all \" + className + \".\" + checkedFields[i]);\n@@ -133,0 +140,1 @@\n+\n@@ -135,3 +143,5 @@\n-    private void unwatchFields(String className, String[] checkedFields) {\n-        for (String checkedField : checkedFields) {\n-            jdb.receiveReplyFor(JdbCommand.unwatch + \" all \" + className + \".\" + checkedField);\n+    private void unwatchFields (String className, String[] checkedFields) {\n+        String[] reply;\n+\n+        for (int i = 0; i < checkedFields.length; i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.unwatch + \" all \" + className + \".\" + checkedFields[i]);\n@@ -139,0 +149,1 @@\n+\n@@ -141,1 +152,3 @@\n-    private boolean checkFields(String className, String[] reply, String[] checkedFields) {\n+    private boolean checkFields (String className, String[] reply, String[] checkedFields) {\n+        Paragrep grep;\n+        String found;\n@@ -143,2 +156,2 @@\n-        var v = new Vector<String>();\n-        var grep = new Paragrep(reply);\n+        int count;\n+        Vector v = new Vector();\n@@ -146,1 +159,3 @@\n-        for (String checkedField : checkedFields) {\n+        grep = new Paragrep(reply);\n+        v.add(\"access encountered\");\n+        for (int i = 0; i < checkedFields.length; i++) {\n@@ -149,1 +164,1 @@\n-            v.add(className + \".\" + checkedField);\n+            v.add(className + \".\" + checkedFields[i]);\n@@ -151,1 +166,1 @@\n-            int count = grep.find(v);\n+            count = grep.find(v);\n@@ -153,1 +168,1 @@\n-                log.complain(\"jdb reported wrong number of access to the field \" + className + \".\" + checkedField);\n+                log.complain(\"jdb reported wrong number of access to the field \" + className + \".\" + checkedFields[i]);\n@@ -159,1 +174,1 @@\n-            v.add(className + \".\" + checkedField);\n+            v.add(className + \".\" + checkedFields[i]);\n@@ -164,1 +179,1 @@\n-                log.complain(\"jdb reported wrong number of modification of the field \" + className + \".\" + checkedField);\n+                log.complain(\"jdb reported wrong number of modification of the field \" + className + \".\" + checkedFields[i]);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/unwatch\/unwatch002\/unwatch002.java","additions":59,"deletions":44,"binary":false,"changes":103,"status":"modified"},{"patch":"@@ -60,3 +60,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -64,2 +63,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -69,1 +68,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -73,2 +72,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -80,15 +79,15 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.up.up002\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".up002\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-\n-    static final String[][] FRAMES = new String[][]{\n-            {\"[1]\", DEBUGGEE_CLASS + \".func5\"},\n-            {\"[2]\", DEBUGGEE_CLASS + \".func4\"},\n-            {\"[3]\", DEBUGGEE_CLASS + \".func3\"},\n-            {\"[4]\", DEBUGGEE_CLASS + \".func2\"},\n-            {\"[5]\", DEBUGGEE_CLASS + \".func1\"},\n-            {\"[6]\", DEBUGGEE_CLASS + \".runIt\"},\n-            {\"[7]\", DEBUGGEE_CLASS + \".main\"}\n-    };\n+    static final String PACKAGE_NAME     = \"nsk.jdb.up.up002\";\n+    static final String TEST_CLASS       = PACKAGE_NAME + \".up002\";\n+    static final String DEBUGGEE_CLASS   = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK      = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK       = DEBUGGEE_CLASS + \".lastBreak\";\n+\n+    static final String[][] FRAMES = new String[][] {\n+        {\"[1]\", DEBUGGEE_CLASS + \".func5\"},\n+        {\"[2]\", DEBUGGEE_CLASS + \".func4\"},\n+        {\"[3]\", DEBUGGEE_CLASS + \".func3\"},\n+        {\"[4]\", DEBUGGEE_CLASS + \".func2\"},\n+        {\"[5]\", DEBUGGEE_CLASS + \".func1\"},\n+        {\"[6]\", DEBUGGEE_CLASS + \".runIt\"},\n+        {\"[7]\", DEBUGGEE_CLASS + \".main\"}\n+                                                };\n@@ -97,0 +96,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -107,2 +112,2 @@\n-        String[] reply = jdb.getTotalReply();\n-        var grep = new Paragrep(reply);\n+        reply = jdb.getTotalReply();\n+        grep = new Paragrep(reply);\n@@ -110,2 +115,2 @@\n-        for (int i = 1; i < (FRAMES.length - 1); i++) {\n-            var v = new Vector<String>();\n+        for (int i = 1; i < (FRAMES.length-1); i++) {\n+            v = new Vector();\n@@ -114,2 +119,2 @@\n-            int count = grep.find(v);\n-            if (count != (i + 1)) {\n+            count = grep.find(v);\n+            if (count != (i+1)) {\n@@ -117,1 +122,1 @@\n-                        \"\\n\\texpected value : \" + (i + 1) + \", got : \" + count);\n+                    \"\\n\\texpected value : \" + (i+1) + \", got : \" + count);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/up\/up002\/up002.java","additions":35,"deletions":30,"binary":false,"changes":65,"status":"modified"},{"patch":"@@ -60,0 +60,2 @@\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -61,3 +63,0 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n@@ -65,2 +64,2 @@\n-import java.io.File;\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -70,1 +69,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -74,2 +73,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -84,2 +83,2 @@\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -88,0 +87,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -95,1 +100,1 @@\n-            String[] reply = jdb.receiveReplyFor(JdbCommand.use);\n+            reply = jdb.receiveReplyFor(JdbCommand.use);\n@@ -123,1 +128,1 @@\n-            var grep = new Paragrep(reply);\n+            grep = new Paragrep(reply);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/use\/use001\/use001.java","additions":17,"deletions":12,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -65,3 +65,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -69,2 +68,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -74,1 +73,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -78,2 +77,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -86,6 +85,6 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.watch.watch001\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".watch001\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String DEBUGGEE_CLASS2 = DEBUGGEE_CLASS + \"$CheckedFields\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".breakHere\";\n+    static final String PACKAGE_NAME       = \"nsk.jdb.watch.watch001\";\n+    static final String TEST_CLASS         = PACKAGE_NAME + \".watch001\";\n+    static final String DEBUGGEE_CLASS     = TEST_CLASS + \"a\";\n+    static final String DEBUGGEE_CLASS2    = DEBUGGEE_CLASS + \"$CheckedFields\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".breakHere\";\n@@ -94,2 +93,2 @@\n-    static String[] checkedFields = {\"fS0\", \"FS1\"};\n-    static String[] checkedFields2 = {\"FP0\", \"FU1\", \"FR0\", \"FT1\", \"FV0\"};\n+    static String[] checkedFields  = { \"fS0\", \"FS1\" };\n+    static String[] checkedFields2 = { \"FP0\", \"FU1\", \"FR0\", \"FT1\", \"FV0\" };\n@@ -98,0 +97,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -100,1 +105,1 @@\n-        jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS);\n+        reply = jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS);\n@@ -102,1 +107,1 @@\n-        jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS2);\n+        reply = jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS2);\n@@ -104,2 +109,2 @@\n-        watchFields(DEBUGGEE_CLASS, checkedFields);\n-        watchFields(DEBUGGEE_CLASS2, checkedFields2);\n+        watchFields (DEBUGGEE_CLASS, checkedFields);\n+        watchFields (DEBUGGEE_CLASS2, checkedFields2);\n@@ -109,2 +114,2 @@\n-        String[] reply = jdb.getTotalReply();\n-        if (!checkFields(DEBUGGEE_CLASS, reply, checkedFields)) {\n+        reply = jdb.getTotalReply();\n+        if (!checkFields (DEBUGGEE_CLASS, reply, checkedFields)) {\n@@ -113,1 +118,1 @@\n-        if (!checkFields(DEBUGGEE_CLASS2, reply, checkedFields2)) {\n+        if (!checkFields (DEBUGGEE_CLASS2, reply, checkedFields2)) {\n@@ -118,3 +123,5 @@\n-    private void watchFields(String className, String[] checkedFields) {\n-        for (String checkedField : checkedFields) {\n-            jdb.receiveReplyFor(JdbCommand.watch + \" access \" + className + \".\" + checkedField);\n+    private void watchFields (String className, String[] checkedFields) {\n+        String[] reply;\n+\n+        for (int i = 0; i < checkedFields.length; i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.watch + \" access \" + className + \".\" + checkedFields[i]);\n@@ -125,1 +132,3 @@\n-    private boolean checkFields(String className, String[] reply, String[] checkedFields) {\n+    private boolean checkFields (String className, String[] reply, String[] checkedFields) {\n+        Paragrep grep;\n+        String found;\n@@ -127,2 +136,2 @@\n-        var v = new Vector<String>();\n-        var grep = new Paragrep(reply);\n+        int count;\n+        Vector v = new Vector();\n@@ -130,1 +139,3 @@\n-        for (String checkedField : checkedFields) {\n+        grep = new Paragrep(reply);\n+        v.add(\"access encountered\");\n+        for (int i = 0; i < checkedFields.length; i++) {\n@@ -133,1 +144,1 @@\n-            v.add(className + \".\" + checkedField);\n+            v.add(className + \".\" + checkedFields[i]);\n@@ -135,1 +146,1 @@\n-            String found = grep.findFirst(v);\n+            found = grep.findFirst(v);\n@@ -137,1 +148,1 @@\n-                log.complain(\"Failed to report access to field \" + className + \".\" + checkedField);\n+                log.complain(\"Failed to report access to field \" + className + \".\" + checkedFields[i]);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/watch\/watch001\/watch001.java","additions":44,"deletions":33,"binary":false,"changes":77,"status":"modified"},{"patch":"@@ -65,3 +65,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -69,2 +68,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -74,1 +73,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -78,2 +77,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -86,6 +85,6 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.watch.watch002\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".watch002\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String DEBUGGEE_CLASS2 = DEBUGGEE_CLASS + \"$CheckedFields\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".breakHere\";\n+    static final String PACKAGE_NAME       = \"nsk.jdb.watch.watch002\";\n+    static final String TEST_CLASS         = PACKAGE_NAME + \".watch002\";\n+    static final String DEBUGGEE_CLASS     = TEST_CLASS + \"a\";\n+    static final String DEBUGGEE_CLASS2    = DEBUGGEE_CLASS + \"$CheckedFields\";\n+    static final String FIRST_BREAK        = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK         = DEBUGGEE_CLASS + \".breakHere\";\n@@ -94,2 +93,2 @@\n-    static String[] checkedFields = {\"FS0\", \"FS1\"};\n-    static String[] checkedFields2 = {\"FP1\", \"FU1\", \"FR1\", \"FT1\", \"FV1\"};\n+    static String[] checkedFields  = { \"FS0\", \"FS1\" };\n+    static String[] checkedFields2 = { \"FP1\", \"FU1\", \"FR1\", \"FT1\", \"FV1\" };\n@@ -98,0 +97,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -100,1 +105,1 @@\n-        jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS);\n+        reply = jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS);\n@@ -102,1 +107,1 @@\n-        jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS2);\n+        reply = jdb.receiveReplyFor(JdbCommand.fields + DEBUGGEE_CLASS2);\n@@ -104,2 +109,2 @@\n-        watchFields(DEBUGGEE_CLASS, checkedFields);\n-        watchFields(DEBUGGEE_CLASS2, checkedFields2);\n+        watchFields (DEBUGGEE_CLASS, checkedFields);\n+        watchFields (DEBUGGEE_CLASS2, checkedFields2);\n@@ -107,1 +112,1 @@\n-        jdb.contToExit((checkedFields.length * 2) + (checkedFields2.length * 2) + 2);\n+        jdb.contToExit((checkedFields.length *2)  + (checkedFields2.length *2) + 2);\n@@ -109,2 +114,2 @@\n-        String[] reply = jdb.getTotalReply();\n-        if (!checkFields(DEBUGGEE_CLASS, reply, checkedFields)) {\n+        reply = jdb.getTotalReply();\n+        if (!checkFields (DEBUGGEE_CLASS, reply, checkedFields)) {\n@@ -113,1 +118,1 @@\n-        if (!checkFields(DEBUGGEE_CLASS2, reply, checkedFields2)) {\n+        if (!checkFields (DEBUGGEE_CLASS2, reply, checkedFields2)) {\n@@ -118,3 +123,5 @@\n-    private void watchFields(String className, String[] checkedFields) {\n-        for (String checkedField : checkedFields) {\n-            jdb.receiveReplyFor(JdbCommand.watch + \" all \" + className + \".\" + checkedField);\n+    private void watchFields (String className, String[] checkedFields) {\n+        String[] reply;\n+\n+        for (int i = 0; i < checkedFields.length; i++) {\n+            reply = jdb.receiveReplyFor(JdbCommand.watch + \" all \" + className + \".\" + checkedFields[i]);\n@@ -125,1 +132,3 @@\n-    private boolean checkFields(String className, String[] reply, String[] checkedFields) {\n+    private boolean checkFields (String className, String[] reply, String[] checkedFields) {\n+        Paragrep grep;\n+        String found;\n@@ -127,2 +136,2 @@\n-        var v = new Vector<String>();\n-        var grep = new Paragrep(reply);\n+        int count;\n+        Vector v = new Vector();\n@@ -130,1 +139,3 @@\n-        for (String checkedField : checkedFields) {\n+        grep = new Paragrep(reply);\n+        v.add(\"access encountered\");\n+        for (int i = 0; i < checkedFields.length; i++) {\n@@ -133,1 +144,1 @@\n-            v.add(className + \".\" + checkedField);\n+            v.add(className + \".\" + checkedFields[i]);\n@@ -135,1 +146,1 @@\n-            String found = grep.findFirst(v);\n+            found = grep.findFirst(v);\n@@ -137,1 +148,1 @@\n-                log.complain(\"Failed to report access to field \" + className + \".\" + checkedField);\n+                log.complain(\"Failed to report access to field \" + className + \".\" + checkedFields[i]);\n@@ -143,1 +154,1 @@\n-            v.add(className + \".\" + checkedField);\n+            v.add(className + \".\" + checkedFields[i]);\n@@ -147,1 +158,1 @@\n-                log.complain(\"Failed to report modification of field \" + className + \".\" + checkedField);\n+                log.complain(\"Failed to report modification of field \" + className + \".\" + checkedFields[i]);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/watch\/watch002\/watch002.java","additions":47,"deletions":36,"binary":false,"changes":83,"status":"modified"},{"patch":"@@ -58,3 +58,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -62,2 +61,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -67,1 +66,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -71,2 +70,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -78,15 +77,5 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.where.where004\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".where004\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-\n-    static final String[][] FRAMES = new String[][]{\n-            {DEBUGGEE_CLASS + \".func5\", \"71\"},\n-            {DEBUGGEE_CLASS + \".func4\", \"67\"},\n-            {DEBUGGEE_CLASS + \".func3\", \"63\"},\n-            {DEBUGGEE_CLASS + \".func2\", \"59\"},\n-            {DEBUGGEE_CLASS + \".func1\", \"55\"},\n-            {DEBUGGEE_CLASS + \".runIt\", \"48\"},\n-            {DEBUGGEE_CLASS + \".main\", \"39\"}\n-    };\n+    static final String PACKAGE_NAME     = \"nsk.jdb.where.where004\";\n+    static final String TEST_CLASS       = PACKAGE_NAME + \".where004\";\n+    static final String DEBUGGEE_CLASS   = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK      = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK       = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -94,0 +83,9 @@\n+    static final String[][] FRAMES = new String[][] {\n+        {DEBUGGEE_CLASS + \".func5\", \"71\"},\n+        {DEBUGGEE_CLASS + \".func4\", \"67\"},\n+        {DEBUGGEE_CLASS + \".func3\", \"63\"},\n+        {DEBUGGEE_CLASS + \".func2\", \"59\"},\n+        {DEBUGGEE_CLASS + \".func1\", \"55\"},\n+        {DEBUGGEE_CLASS + \".runIt\", \"48\"},\n+        {DEBUGGEE_CLASS + \".main\",  \"39\"}\n+                                                };\n@@ -95,0 +93,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -98,2 +102,2 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.where);\n-        var grep = new Paragrep(reply);\n+        reply = jdb.receiveReplyFor(JdbCommand.where);\n+        grep = new Paragrep(reply);\n@@ -101,5 +105,5 @@\n-        for (String[] frame : FRAMES) {\n-            var v = new Vector<String>();\n-            v.add(frame[0]);\n-            v.add(frame[1]);\n-            int count = grep.find(v);\n+        for (int i = 0; i < FRAMES.length; i++) {\n+            v = new Vector();\n+            v.add(FRAMES[i][0]);\n+            v.add(FRAMES[i][1]);\n+            count = grep.find(v);\n@@ -107,2 +111,2 @@\n-                failure(\"Unexpected number or location of the stack frame: \" + frame[0] +\n-                        \"\\n\\texpected value : 1, got one: \" + count);\n+                failure(\"Unexpected number or location of the stack frame: \" + FRAMES[i][0] +\n+                    \"\\n\\texpected value : 1, got one: \" + count);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/where\/where004\/where004.java","additions":36,"deletions":32,"binary":false,"changes":68,"status":"modified"},{"patch":"@@ -59,3 +59,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -63,2 +62,2 @@\n-import java.io.PrintStream;\n-import java.util.Vector;\n+import java.io.*;\n+import java.util.*;\n@@ -68,1 +67,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -72,2 +71,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -79,1 +78,1 @@\n-    public where005(boolean debuggeeShouldFail) {\n+    public where005 (boolean debuggeeShouldFail) {\n@@ -83,16 +82,5 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.where.where005\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".where005\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-\n-    static final String[][] FRAMES = new String[][]{\n-            {DEBUGGEE_CLASS + \".func6\", \"76\"},\n-            {DEBUGGEE_CLASS + \".func5\", \"71\"},\n-            {DEBUGGEE_CLASS + \".func4\", \"67\"},\n-            {DEBUGGEE_CLASS + \".func3\", \"63\"},\n-            {DEBUGGEE_CLASS + \".func2\", \"59\"},\n-            {DEBUGGEE_CLASS + \".func1\", \"55\"},\n-            {DEBUGGEE_CLASS + \".runIt\", \"48\"},\n-            {DEBUGGEE_CLASS + \".main\", \"39\"}\n-    };\n+    static final String PACKAGE_NAME     = \"nsk.jdb.where.where005\";\n+    static final String TEST_CLASS       = PACKAGE_NAME + \".where005\";\n+    static final String DEBUGGEE_CLASS   = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK      = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK       = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -100,0 +88,10 @@\n+    static final String[][] FRAMES = new String[][] {\n+        {DEBUGGEE_CLASS + \".func6\", \"76\"},\n+        {DEBUGGEE_CLASS + \".func5\", \"71\"},\n+        {DEBUGGEE_CLASS + \".func4\", \"67\"},\n+        {DEBUGGEE_CLASS + \".func3\", \"63\"},\n+        {DEBUGGEE_CLASS + \".func2\", \"59\"},\n+        {DEBUGGEE_CLASS + \".func1\", \"55\"},\n+        {DEBUGGEE_CLASS + \".runIt\", \"48\"},\n+        {DEBUGGEE_CLASS + \".main\",  \"39\"}\n+                                                };\n@@ -101,2 +99,8 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.cont);\n-        var grep = new Paragrep(reply);\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n+        grep = new Paragrep(reply);\n@@ -110,5 +114,5 @@\n-            for (String[] frame : FRAMES) {\n-                var v = new Vector<String>();\n-                v.add(frame[0]);\n-                v.add(frame[1]);\n-                int count = grep.find(v);\n+            for (int i = 0; i < FRAMES.length; i++) {\n+                v = new Vector();\n+                v.add(FRAMES[i][0]);\n+                v.add(FRAMES[i][1]);\n+                count = grep.find(v);\n@@ -116,2 +120,2 @@\n-                    failure(\"Unexpected number or location of the stack frame: \" + frame[0] +\n-                            \"\\n\\texpected value : 1, got one: \" + count);\n+                    failure(\"Unexpected number or location of the stack frame: \" + FRAMES[i][0] +\n+                        \"\\n\\texpected value : 1, got one: \" + count);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/where\/where005\/where005.java","additions":38,"deletions":34,"binary":false,"changes":72,"status":"modified"},{"patch":"@@ -59,3 +59,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -63,1 +62,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -67,1 +67,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -71,2 +71,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -78,14 +78,5 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.where.where006\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".where006\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n-\n-    static final String[][] FRAMES = new String[][]{\n-            {PACKAGE_NAME + \".MyThread.func5\", \"111\"},\n-            {PACKAGE_NAME + \".MyThread.func4\", \"103\"},\n-            {PACKAGE_NAME + \".MyThread.func3\", \"99\"},\n-            {PACKAGE_NAME + \".MyThread.func2\", \"95\"},\n-            {PACKAGE_NAME + \".MyThread.func1\", \"91\"},\n-            {PACKAGE_NAME + \".MyThread.run\", \"85\"},\n-    };\n+    static final String PACKAGE_NAME     = \"nsk.jdb.where.where006\";\n+    static final String TEST_CLASS       = PACKAGE_NAME + \".where006\";\n+    static final String DEBUGGEE_CLASS   = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK      = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK       = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -93,0 +84,8 @@\n+    static final String[][] FRAMES = new String[][] {\n+        {PACKAGE_NAME + \".MyThread.func5\", \"111\"},\n+        {PACKAGE_NAME + \".MyThread.func4\", \"103\"},\n+        {PACKAGE_NAME + \".MyThread.func3\", \"99\"},\n+        {PACKAGE_NAME + \".MyThread.func2\", \"95\"},\n+        {PACKAGE_NAME + \".MyThread.func1\", \"91\"},\n+        {PACKAGE_NAME + \".MyThread.run\", \"85\"},\n+                                                };\n@@ -94,0 +93,6 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n@@ -98,1 +103,1 @@\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.where + \"all\");\n+        reply = jdb.receiveReplyFor(JdbCommand.where + \"all\");\n@@ -111,4 +116,9 @@\n-    void checkFrames(String threadId, String[] reply, int expectedVal) {\n-        var grep = new Paragrep(reply);\n-        for (String[] frame : FRAMES) {\n-            int count = grep.find(frame[0]);\n+    void checkFrames (String threadId, String[] reply, int expectedVal) {\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+\n+        grep = new Paragrep(reply);\n+        for (int j = 0; j < FRAMES.length; j++) {\n+            count = grep.find(FRAMES[j][0]);\n@@ -116,3 +126,3 @@\n-                failure(\"Unexpected number of occurencies of the stack frame: \" + frame[0] +\n-                        \" for thread \" + threadId +\n-                        \"\\n\\t Expected number of occurence: \" + expectedVal + \", got : \" + count);\n+                failure(\"Unexpected number of occurencies of the stack frame: \" + FRAMES[j][0] +\n+                    \" for thread \" + threadId +\n+                    \"\\n\\t Expected number of occurence: \" + expectedVal +\", got : \" + count);\n@@ -120,5 +130,5 @@\n-                    String found = grep.findFirst(frame[0]);\n-                    if (!found.contains(frame[1])) {\n-                        failure(\"Unexpected location in the stack frame: \" + frame[0] +\n-                                \" for thread \" + threadId +\n-                                \"\\n\\t Expected location: \" + frame[1] + \", got :\\n\\t\" + found);\n+                    found = grep.findFirst(FRAMES[j][0]);\n+                    if (found.indexOf(FRAMES[j][1]) < 0) {\n+                        failure(\"Unexpected location in the stack frame: \" + FRAMES[j][0] +\n+                            \" for thread \" + threadId +\n+                            \"\\n\\t Expected location: \" + FRAMES[j][1] + \", got :\\n\\t\" + found);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/where\/where006\/where006.java","additions":44,"deletions":34,"binary":false,"changes":78,"status":"modified"},{"patch":"@@ -54,3 +54,2 @@\n-import nsk.share.Paragrep;\n-import nsk.share.jdb.JdbCommand;\n-import nsk.share.jdb.JdbTest;\n+import nsk.share.*;\n+import nsk.share.jdb.*;\n@@ -58,1 +57,2 @@\n-import java.io.PrintStream;\n+import java.io.*;\n+import java.util.*;\n@@ -62,1 +62,1 @@\n-    public static void main(String[] argv) {\n+    public static void main (String argv[]) {\n@@ -66,2 +66,2 @@\n-    public static int run(String[] argv, PrintStream out) {\n-        debuggeeClass = DEBUGGEE_CLASS;\n+    public static int run(String argv[], PrintStream out) {\n+        debuggeeClass =  DEBUGGEE_CLASS;\n@@ -73,5 +73,5 @@\n-    static final String PACKAGE_NAME = \"nsk.jdb.wherei.wherei001\";\n-    static final String TEST_CLASS = PACKAGE_NAME + \".wherei001\";\n-    static final String DEBUGGEE_CLASS = TEST_CLASS + \"a\";\n-    static final String FIRST_BREAK = DEBUGGEE_CLASS + \".main\";\n-    static final String LAST_BREAK = DEBUGGEE_CLASS + \".lastBreak\";\n+    static final String PACKAGE_NAME    = \"nsk.jdb.wherei.wherei001\";\n+    static final String TEST_CLASS      = PACKAGE_NAME + \".wherei001\";\n+    static final String DEBUGGEE_CLASS  = TEST_CLASS + \"a\";\n+    static final String FIRST_BREAK     = DEBUGGEE_CLASS + \".main\";\n+    static final String LAST_BREAK      = DEBUGGEE_CLASS + \".lastBreak\";\n@@ -81,0 +81,7 @@\n+        String[] reply;\n+        Paragrep grep;\n+        int count;\n+        Vector v;\n+        String found;\n+        String[] threads;\n+\n@@ -82,1 +89,1 @@\n-        jdb.receiveReplyFor(JdbCommand.cont);\n+        reply = jdb.receiveReplyFor(JdbCommand.cont);\n@@ -84,1 +91,1 @@\n-        String[] threads = jdb.getThreadIds(DEBUGGEE_THREAD);\n+        threads = jdb.getThreadIds(DEBUGGEE_THREAD);\n@@ -92,2 +99,2 @@\n-        for (String thread : threads) {\n-            if (!checkStack(thread)) {\n+        for (int i = 0; i < threads.length; i++) {\n+            if (!checkStack(threads[i])) {\n@@ -101,1 +108,6 @@\n-    private boolean checkStack(String threadId) {\n+    private boolean checkStack (String threadId) {\n+        Paragrep grep;\n+        String[] reply;\n+        String found;\n+        int count;\n+        Vector v;\n@@ -103,2 +115,3 @@\n-        String[] func = {\"func5\", \"func4\", \"func3\", \"func2\", \"func1\", \"run\"};\n-        String[] reply = jdb.receiveReplyFor(JdbCommand.wherei + threadId);\n+        String[] func = { \"func5\", \"func4\", \"func3\", \"func2\", \"func1\", \"run\" };\n+\n+        reply = jdb.receiveReplyFor(JdbCommand.wherei + threadId);\n@@ -106,3 +119,3 @@\n-        var grep = new Paragrep(reply);\n-        for (String s : func) {\n-            int count = grep.find(DEBUGGEE_THREAD + \".\" + s);\n+        grep = new Paragrep(reply);\n+        for (int i = 0; i < func.length; i++) {\n+            count = grep.find(DEBUGGEE_THREAD + \".\" + func[i]);\n@@ -111,1 +124,1 @@\n-                log.complain(\"Searched for: \" + DEBUGGEE_THREAD + \".\" + s);\n+                log.complain(\"Searched for: \" + DEBUGGEE_THREAD + \".\" + func[i]);\n@@ -113,1 +126,1 @@\n-                result = false;\n+                result= false;\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jdb\/wherei\/wherei001\/wherei001.java","additions":37,"deletions":24,"binary":false,"changes":61,"status":"modified"},{"patch":"@@ -26,2 +26,6 @@\n-import java.util.ArrayList;\n-import java.util.List;\n+import nsk.share.*;\n+import nsk.share.jpda.*;\n+import nsk.share.jdi.ArgumentHandler;\n+\n+import java.io.*;\n+import java.util.*;\n@@ -69,4 +73,6 @@\n-     * @param args Array of the raw command-line arguments.\n-     * @throws NullPointerException     If <code>args==null<\/code>.\n-     * @throws IllegalArgumentException If Binder or Log options\n-     *                                  are set incorrectly.\n+     * @param  args  Array of the raw command-line arguments.\n+     *\n+     * @throws  NullPointerException  If <code>args==null<\/code>.\n+     * @throws  IllegalArgumentException  If Binder or Log options\n+     *                                    are set incorrectly.\n+     *\n@@ -75,1 +81,1 @@\n-    public JdbArgumentHandler(String[] args) {\n+    public JdbArgumentHandler(String args[]) {\n@@ -85,2 +91,2 @@\n-     * @param value  string representation of value (could be an empty string)\n-     *               null if this option has no value\n+     * @param value string representation of value (could be an empty string)\n+     *              null if this option has no value\n@@ -88,1 +94,2 @@\n-     * <i>false<\/i> if option is not admissible\n+     *         <i>false<\/i> if option is not admissible\n+     *\n@@ -90,0 +97,1 @@\n+     *\n@@ -118,1 +126,1 @@\n-                    throw new BadOption(\"jdb option -listen is not admissible: \" + value);\n+                    throw new BadOption(\"jdb option -listen is not admissible: \"  + value);\n@@ -152,0 +160,1 @@\n+\n@@ -165,0 +174,1 @@\n+     *\n@@ -175,1 +185,4 @@\n-        return removeSurroundingQuotes(value);\n+        if (value.length() > 1 && value.startsWith(\"\\\"\") && value.endsWith(\"\\\"\")) {\n+            value = value.substring(1, value.length() - 1).trim();\n+        }\n+        return value;\n@@ -184,2 +197,2 @@\n-        for (String option : javaOptions.split(\"\\\\s+\")) {\n-            if (option.length() > 0) {\n+        for (String option : javaOptions.split(\"\\\\s+\"))\n+            if (option.length() > 0)\n@@ -187,2 +200,0 @@\n-            }\n-        }\n@@ -198,1 +209,3 @@\n-        value = removeSurroundingQuotes(value);\n+        if (value.length() > 1 && value.startsWith(\"\\\"\") && value.endsWith(\"\\\"\")) {\n+            value = value.substring(1, value.length() - 1).trim();\n+        }\n@@ -213,1 +226,41 @@\n-        return removeSurroundingQuotes(value);\n+        if (value.length() > 1 && value.startsWith(\"\\\"\") && value.endsWith(\"\\\"\")) {\n+            value = value.substring(1, value.length() - 1).trim();\n+        }\n+        return value;\n+    }\n+\n+    \/**\n+     * Remove \"<code>-server<\/code>\" or \"<code>-client<\/code>\" from options string,\n+     * if anything of them are presented.\n+     *\/\n+    public static String removeVMFlavorOption(String javaOptions) {\n+        StringBuffer result = new StringBuffer();\n+        StringTokenizer tokenizer = new StringTokenizer(javaOptions);\n+        while (tokenizer.hasMoreTokens()) {\n+            String option = tokenizer.nextToken();\n+            if (!option.equals(\"-server\") && !option.equals(\"-client\")) {\n+                result.append( (result.length() > 0 ? \" \" : \"\") + option);\n+            }\n+        };\n+        return result.toString();\n+    }\n+\n+    \/**\n+     * @return \"<code>-tserver<\/code>\" if \"<code>-server<\/code>\" is presented in options string.\n+     * @return \"<code>-tclient<\/code>\" if \"<code>-client<\/code>\" is presented in options string.\n+     * @return empty string otherwise.\n+     *\/\n+    public static String stripVMFlavorOption(String javaOptions) {\n+        String result = \"\";\n+        StringTokenizer tokenizer = new StringTokenizer(javaOptions);\n+        while (tokenizer.hasMoreTokens()) {\n+            String option = tokenizer.nextToken();\n+            if (option.equals(\"-server\")) {\n+                result = \"-tserver\";\n+                break;\n+            } else if (option.equals(\"-client\")) {\n+                result = \"-tclient\";\n+                break;\n+            }\n+        };\n+        return result;\n@@ -220,1 +273,1 @@\n-        if (!value.contains(subString)) {\n+        if (NO_SUBSTR_MATCH == value.indexOf(subString)) {\n@@ -247,1 +300,1 @@\n-            throw new BadOption(value + \" not correctly quoted\");\n+            throw new BadOption(value +  \" not correctly quoted\");\n@@ -252,6 +305,1 @@\n-    private static String removeSurroundingQuotes(String value) {\n-        if (value.length() > 1 && value.startsWith(\"\\\"\") && value.endsWith(\"\\\"\")) {\n-            value = value.substring(1, value.length() - 1).trim();\n-        }\n-        return value;\n-    }\n+    private static final int NO_SUBSTR_MATCH = -1;\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/jdb\/JdbArgumentHandler.java","additions":74,"deletions":26,"binary":false,"changes":100,"status":"modified"}]}