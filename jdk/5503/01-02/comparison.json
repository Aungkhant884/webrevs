{"files":[{"patch":"@@ -39,2 +39,1 @@\n-import java.awt.GridBagLayout;\n-import java.awt.GridBagConstraints;\n+import java.awt.GridLayout;\n@@ -44,1 +43,0 @@\n-import java.awt.TextArea;\n@@ -47,1 +45,0 @@\n-import java.awt.Insets;\n@@ -51,2 +48,0 @@\n-import java.awt.event.WindowAdapter;\n-import java.awt.event.WindowEvent;\n@@ -58,2 +53,3 @@\n-    private static final Frame instructionFrame = new Frame();\n-    private static volatile boolean testResult = false;\n+    private static final Frame testFrame = new Frame(\"Composite and Text Test\");\n+    private static final String text = \"This test passes only if this text appears SIX TIMES else fail\";\n+    private static volatile boolean testResult;\n@@ -61,4 +57,0 @@\n-    private static String text = \"This test passes only if this text appears SIX TIMES\";\n-    private static final String INSTRUCTIONS = \"INSTRUCTIONS:\\n\\n\" +\n-            \"You should see the text \\' \" + text + \" \\' on the frame. \\n\" +\n-            \"If you see the same then test pass else test fail.\";\n@@ -67,1 +59,1 @@\n-        Graphics2D g2d = (Graphics2D) g.create();\n+        Graphics2D g2d = (Graphics2D)g.create();\n@@ -69,1 +61,1 @@\n-        g2d.fillRect(0, 0, getSize().width, getSize().height);\n+        g2d.fillRect(0,0,getSize().width, getSize().height);\n@@ -77,1 +69,1 @@\n-        Graphics2D g2d = (Graphics2D) g;\n+        Graphics2D g2d = (Graphics2D)g;\n@@ -79,1 +71,1 @@\n-                RenderingHints.VALUE_TEXT_ANTIALIAS_LCD_HRGB);\n+                             RenderingHints.VALUE_TEXT_ANTIALIAS_LCD_HRGB);\n@@ -83,1 +75,1 @@\n-                AlphaComposite.SRC_OVER, 0.9f));\n+                         AlphaComposite.SRC_OVER, 0.9f));\n@@ -88,1 +80,1 @@\n-        Graphics2D g2d = (Graphics2D) g;\n+        Graphics2D g2d = (Graphics2D)g;\n@@ -90,1 +82,1 @@\n-                RenderingHints.VALUE_TEXT_ANTIALIAS_LCD_HRGB);\n+                             RenderingHints.VALUE_TEXT_ANTIALIAS_LCD_HRGB);\n@@ -94,1 +86,1 @@\n-                0f, 0f, Color.BLACK, 100f, 100f, Color.GRAY));\n+                     0f, 0f, Color.BLACK, 100f, 100f, Color.GRAY));\n@@ -99,1 +91,1 @@\n-        Graphics2D g2d = (Graphics2D) g;\n+        Graphics2D g2d = (Graphics2D)g;\n@@ -101,1 +93,1 @@\n-                RenderingHints.VALUE_TEXT_ANTIALIAS_LCD_HRGB);\n+                             RenderingHints.VALUE_TEXT_ANTIALIAS_LCD_HRGB);\n@@ -110,1 +102,1 @@\n-        return new Dimension(500, 600);\n+        return new Dimension(500,600);\n@@ -113,15 +105,4 @@\n-    private static void createInstructionUI() {\n-        GridBagLayout layout = new GridBagLayout();\n-        Panel mainControlPanel = new Panel(layout);\n-        Panel resultButtonPanel = new Panel(layout);\n-        GridBagConstraints gbc = new GridBagConstraints();\n-        gbc.gridx = 0;\n-        gbc.gridy = 0;\n-        gbc.insets = new Insets(5, 15, 5, 15);\n-        gbc.fill = GridBagConstraints.HORIZONTAL;\n-\n-        TextArea instructionTextArea = new TextArea();\n-        instructionTextArea.setText(INSTRUCTIONS);\n-        instructionTextArea.setEditable(false);\n-        instructionTextArea.setBackground(Color.white);\n-        mainControlPanel.add(instructionTextArea, gbc);\n+    public static void disposeUI() {\n+        countDownLatch.countDown();\n+        testFrame.dispose();\n+    }\n@@ -129,0 +110,3 @@\n+    public static void createTestUI() {\n+        testFrame.add(new LCDTextAndGraphicsState(), BorderLayout.NORTH);\n+        Panel resultButtonPanel = new Panel(new GridLayout(1, 2));\n@@ -130,1 +114,0 @@\n-        passButton.setActionCommand(\"Pass\");\n@@ -133,1 +116,1 @@\n-            countDownLatch.countDown();\n+            disposeUI();\n@@ -137,1 +120,0 @@\n-        failButton.setActionCommand(\"Fail\");\n@@ -139,22 +121,2 @@\n-            countDownLatch.countDown();\n-        });\n-\n-        gbc.gridx = 0;\n-        gbc.gridy = 0;\n-\n-        resultButtonPanel.add(passButton, gbc);\n-\n-        gbc.gridx = 1;\n-        gbc.gridy = 0;\n-        resultButtonPanel.add(failButton, gbc);\n-\n-        gbc.gridx = 0;\n-        gbc.gridy = 2;\n-        mainControlPanel.add(resultButtonPanel, gbc);\n-\n-        instructionFrame.addWindowListener(new WindowAdapter() {\n-            @Override\n-            public void windowClosing(WindowEvent e) {\n-                super.windowClosing(e);\n-                countDownLatch.countDown();\n-            }\n+            testResult = false;\n+            disposeUI();\n@@ -162,12 +124,6 @@\n-        instructionFrame.pack();\n-        instructionFrame.add(mainControlPanel);\n-        instructionFrame.pack();\n-        instructionFrame.setVisible(true);\n-    }\n-\n-    public static void createUI() {\n-        Frame f = new Frame(\"Composite and Text Test\");\n-        f.add(new LCDTextAndGraphicsState(), BorderLayout.CENTER);\n-        f.pack();\n-        f.setLocationRelativeTo(null);\n-        f.setVisible(true);\n+        resultButtonPanel.add(passButton);\n+        resultButtonPanel.add(failButton);\n+        testFrame.add(resultButtonPanel, BorderLayout.SOUTH);\n+        testFrame.pack();\n+        testFrame.setLocationRelativeTo(null);\n+        testFrame.setVisible(true);\n@@ -178,3 +134,2 @@\n-        createInstructionUI();\n-        createUI();\n-        if (!countDownLatch.await(15, TimeUnit.MINUTES)) {\n+        createTestUI();\n+        if (!countDownLatch.await(10, TimeUnit.MINUTES)) {\n","filename":"test\/jdk\/java\/awt\/Graphics\/LCDTextAndGraphicsState.java","additions":33,"deletions":78,"binary":false,"changes":111,"status":"modified"}]}