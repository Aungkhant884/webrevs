{"files":[{"patch":"@@ -1767,6 +1767,11 @@\n-  ssize_t n = os::write(_fd, buffer, (unsigned int)nbytes);\n-  if (n < 0 || (size_t)n != nbytes) {\n-    \/\/ If the shared archive is corrupted, close it and remove it.\n-    close();\n-    remove(_full_path);\n-    fail_stop(\"Unable to write to shared archive file.\");\n+  ssize_t size = (ssize_t)nbytes;\n+  while (size > 0) {\n+    ssize_t n = os::write(_fd, buffer, (unsigned int)size);\n+    if (n < 0) {\n+      \/\/ If the shared archive is corrupted, close it and remove it.\n+      close();\n+      remove(_full_path);\n+      fail_stop(\"Unable to write to shared archive file.\");\n+    }\n+    buffer = (const void *)((const char *)buffer + n);\n+    size -= n;\n","filename":"src\/hotspot\/share\/cds\/filemap.cpp","additions":11,"deletions":6,"binary":false,"changes":17,"status":"modified"}]}