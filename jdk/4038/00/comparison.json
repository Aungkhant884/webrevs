{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -1408,9 +1408,0 @@\n-    @SuppressWarnings(\"serial\")\n-    public static class OperationTimedOut extends RuntimeException {\n-        public OperationTimedOut(String msg) {\n-            super(msg);\n-        }\n-        public OperationTimedOut() {\n-        }\n-    }\n-\n@@ -1434,1 +1425,1 @@\n-    public void realSync() throws OperationTimedOut {\n+    public void realSync() {\n@@ -1483,1 +1474,1 @@\n-    public void realSync(final long timeout) throws OperationTimedOut {\n+    public void realSync(final long timeout) {\n@@ -1539,1 +1530,1 @@\n-    private long timeout(long end){\n+    protected long timeout(long end){\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/SunToolkit.java","additions":4,"deletions":13,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -127,0 +127,1 @@\n+import java.util.concurrent.TimeUnit;\n@@ -2396,1 +2397,1 @@\n-    protected boolean syncNativeQueue(final long timeout) {\n+    protected boolean syncNativeQueue(long timeout) {\n@@ -2421,3 +2422,0 @@\n-            \/\/ Generate OOPS ConfigureNotify event\n-            XlibWrapper.XMoveWindow(getDisplay(), win.getWindow(),\n-                                    win.scaleUp(++oops_position), 0);\n@@ -2425,0 +2423,1 @@\n+            oops_position += 5;\n@@ -2428,0 +2427,3 @@\n+            \/\/ Generate OOPS ConfigureNotify event\n+            XlibWrapper.XMoveWindow(getDisplay(), win.getWindow(),\n+                                    oops_position, 0);\n@@ -2433,1 +2435,3 @@\n-            long start = System.currentTimeMillis();\n+            long end = TimeUnit.NANOSECONDS.toMillis(System.nanoTime()) + timeout;\n+            \/\/ This \"while\" is a protection from spurious wake-ups.\n+            \/\/ However, we shouldn't wait for too long.\n@@ -2435,0 +2439,4 @@\n+                timeout = timeout(end);\n+                if (timeout <= 0) {\n+                    break;\n+                }\n@@ -2441,5 +2449,0 @@\n-                \/\/ This \"while\" is a protection from spurious\n-                \/\/ wake-ups.  However, we shouldn't wait for too long\n-                if ((System.currentTimeMillis() - start > timeout) && timeout >= 0) {\n-                    throw new OperationTimedOut(Long.toString(System.currentTimeMillis() - start));\n-                }\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XToolkit.java","additions":13,"deletions":10,"binary":false,"changes":23,"status":"modified"}]}