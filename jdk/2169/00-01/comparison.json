{"files":[{"patch":"@@ -28,0 +28,1 @@\n+import java.util.HashMap;\n@@ -29,0 +30,1 @@\n+import java.util.Map;\n@@ -33,6 +35,1 @@\n-import com.sun.tools.javac.util.List;\n-import com.sun.tools.javac.util.Name;\n-import com.sun.tools.javac.util.Context;\n-import com.sun.tools.javac.util.Filter;\n-import com.sun.tools.javac.util.ListBuffer;\n-import com.sun.tools.javac.util.Names;\n+import com.sun.tools.javac.util.*;\n@@ -55,9 +52,1 @@\n-    private final TokenKind[] key;\n-\n-    \/**  The number of the last entered keyword.\n-     *\/\n-    private int maxKey = 0;\n-\n-    \/** The names of all tokens.\n-     *\/\n-    private Name[] tokenName;\n+    private Map<String, TokenKind> keywords = new HashMap<>();\n@@ -77,8 +66,0 @@\n-        tokenName = names.tokenName;\n-        for (Name n : tokenName) {\n-            if (n != null && n.getIndex() > maxKey)\n-                maxKey = n.getIndex();\n-        }\n-\n-        key = new TokenKind[maxKey+1];\n-        for (int i = 0; i <= maxKey; i++) key[i] = TokenKind.IDENTIFIER;\n@@ -86,2 +67,4 @@\n-            if (t.name != null)\n-                key[tokenName[t.ordinal()].getIndex()] = t;\n+            if (t.name != null) {\n+                names.fromString(t.name);\n+                keywords.put(t.name, t);\n+            }\n@@ -97,1 +80,2 @@\n-        return (name.getIndex() > maxKey) ? TokenKind.IDENTIFIER : key[name.getIndex()];\n+        TokenKind t = keywords.get(name.toString());\n+        return (t != null) ? t : TokenKind.IDENTIFIER;\n@@ -101,1 +85,2 @@\n-        return lookupKind(names.fromString(name));\n+        TokenKind t = keywords.get(name);\n+        return (t != null) ? t : TokenKind.IDENTIFIER;\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/parser\/Tokens.java","additions":12,"deletions":27,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -28,2 +28,0 @@\n-import com.sun.tools.javac.parser.Tokens.TokenKind;\n-\n@@ -52,3 +50,0 @@\n-    \/\/ the names about TokenKind\n-    public final Name[] tokenName = new Name[TokenKind.values().length];\n-\n@@ -228,9 +223,0 @@\n-        \/\/ set the names about TokenKind\n-        for (TokenKind tokenKind : TokenKind.values()) {\n-            Name tempName = null;\n-            if (tokenKind.name != null) {\n-                tempName = fromString(tokenKind.name);\n-            }\n-            tokenName[tokenKind.ordinal()] = tempName;\n-        }\n-\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/util\/Names.java","additions":0,"deletions":14,"binary":false,"changes":14,"status":"modified"}]}