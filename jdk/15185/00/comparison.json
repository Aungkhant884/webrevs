{"files":[{"patch":"@@ -481,0 +481,17 @@\n+        \/\/ Note that the position may be later adjusted to fit the menu into the screen if possible.\n+        \/\/ However, the code that does it (JPopupMenu.adjustPopupLocationToFitScreen) has no idea which screen\n+        \/\/ to fit into, and determines it by the position calculated here, so we need to make sure it's on\n+        \/\/ the correct screen, otherwise the menu may appear on the wrong screen (JDK-6415065).\n+        \/\/ (Both x and y are relative to the JMenu position here, that's why we need these +-position.x\/y here.)\n+        if (position.y + y < screenBounds.y) { \/\/ Above the current screen?\n+            y = screenBounds.y - position.y; \/\/ The top of the screen relative to this JMenu.\n+        }\n+        if (position.y + y >= screenBounds.y + screenBounds.height) { \/\/ Below the current screen?\n+            y = screenBounds.y + screenBounds.height - 1 - position.y; \/\/ The bottom of the screen...\n+        }\n+        if (position.x + x < screenBounds.x) { \/\/ To the left of the current screen?\n+            x = screenBounds.x - position.x; \/\/ The left edge of the screen...\n+        }\n+        if (position.x + x >= screenBounds.x + screenBounds.width) { \/\/ To the right of the current screen?\n+            x = screenBounds.x + screenBounds.width - 1 - position.x; \/\/ The right edge of the screen...\n+        }\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/JMenu.java","additions":17,"deletions":0,"binary":false,"changes":17,"status":"modified"}]}