{"files":[{"patch":"@@ -52,1 +52,1 @@\n-    PhaseIdealLoop ideal_loop(igvn, LoopOptsShenandoahExpand);\n+    PhaseIdealLoop::optimize(igvn, LoopOptsShenandoahExpand);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/c2\/shenandoahSupport.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -4569,0 +4569,1 @@\n+          Node* cfg = NULL;       \/\/ Find the One True Control User of m\n@@ -4571,6 +4572,2 @@\n-            if (x != m && x != iff && !x->is_Phi()) {\n-              _igvn.rehash_node_delayed(x);\n-              int nb = x->replace_edge(m, if_t);\n-              assert(nb > 0, \"use should have been updated\");\n-              --j, jmax -= nb;\n-            }\n+            if (x->is_CFG() && x != m && x != iff)\n+              { cfg = x; break; }\n@@ -4578,0 +4575,5 @@\n+          assert(cfg != NULL, \"must find the control user of m\");\n+          uint k = 0;             \/\/ Probably cfg->in(0)\n+          while( cfg->in(k) != m ) k++; \/\/ But check incase cfg is a Region\n+          cfg->set_req( k, if_t ); \/\/ Now point to NeverBranch\n+          _igvn._worklist.push(cfg);\n","filename":"src\/hotspot\/share\/opto\/loopnode.cpp","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"}]}