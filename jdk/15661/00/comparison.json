{"files":[{"patch":"@@ -54,0 +54,1 @@\n+import javax.swing.JEditorPane;\n@@ -61,0 +62,3 @@\n+import javax.swing.text.JTextComponent;\n+import javax.swing.text.html.HTMLEditorKit;\n+import javax.swing.text.html.StyleSheet;\n@@ -84,0 +88,1 @@\n+\n@@ -85,0 +90,1 @@\n+\n@@ -86,0 +92,1 @@\n+\n@@ -171,2 +178,1 @@\n-            createUI(title, instructions, testTimeOut, rows, columns,\n-                    enableScreenCapture);\n+            createUI(title, instructions, testTimeOut, rows, columns, enableScreenCapture);\n@@ -190,3 +196,5 @@\n-        JTextArea instructionsText = new JTextArea(instructions, rows, columns);\n-        instructionsText.setEditable(false);\n-        instructionsText.setLineWrap(true);\n+\n+        JTextComponent text = instructions.startsWith(\"<html>\")\n+                              ? configureHTML(instructions, rows, columns)\n+                              : configurePlainText(instructions, rows, columns);\n+        text.setEditable(false);\n@@ -213,1 +221,1 @@\n-        frame.add(new JScrollPane(instructionsText), BorderLayout.CENTER);\n+        frame.add(new JScrollPane(text), BorderLayout.CENTER);\n@@ -252,0 +260,26 @@\n+    private static JTextComponent configurePlainText(String instructions,\n+                                                     int rows, int columns) {\n+        JTextArea text = new JTextArea(instructions, rows, columns);\n+        text.setLineWrap(true);\n+        text.setWrapStyleWord(true);\n+        return text;\n+    }\n+\n+    private static JTextComponent configureHTML(String instructions,\n+                                                int rows, int columns) {\n+        JEditorPane text = new JEditorPane(\"text\/html\", instructions);\n+        text.putClientProperty(JEditorPane.HONOR_DISPLAY_PROPERTIES,\n+                               Boolean.TRUE);\n+        \/\/ Set preferred size as if it were JTextArea\n+        text.setPreferredSize(new JTextArea(rows, columns).getPreferredSize());\n+\n+        HTMLEditorKit kit = (HTMLEditorKit) text.getEditorKit();\n+        StyleSheet styles = kit.getStyleSheet();\n+        \/\/ Reduce the default margins\n+        styles.addRule(\"ol, ul { margin-left-ltr: 20; margin-left-rtl: 20 }\");\n+        \/\/ Make the size of code blocks the same as other text\n+        styles.addRule(\"code { font-size: inherit }\");\n+\n+        return text;\n+    }\n+\n","filename":"test\/jdk\/java\/awt\/regtesthelpers\/PassFailJFrame.java","additions":40,"deletions":6,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -77,0 +77,1 @@\n+                <html><body>\n@@ -78,3 +79,4 @@\n-                1. Open an elevated Command Prompt.\n-                2. Paste the following commands:\n-                cd \/d C:\\\\\n+                <ol>\n+                <li>Open an elevated <i>Command Prompt<\/i>.\n+                <li>Paste the following commands:\n+                <pre><code>cd \/d C:\\\\\n@@ -84,1 +86,1 @@\n-                mklink \/d link target\n+                mklink \/d link target<\/code><\/pre>\n@@ -86,24 +88,34 @@\n-                3. Navigate to C:\\\\FileChooserTest in the JFileChooser.\n-                4. Use \"Enable Multi-Selection\" checkbox to enable\/disable\n-                   MultiSelection Mode\n-                5. Single-selection:\n-                   Click \"link\" directory, the absolute path of the symbolic\n-                   link should be displayed. If it's null, click FAIL.\n-                   Click \"target\" directory, its absolute path should be\n-                   displayed.\n-\n-                   Enable multiple selection by clicking the checkbox.\n-                   Multi-selection:\n-                   Click \"link\", press Ctrl and then click \"target\".\n-                   Both should be selected and their absolute paths should be\n-                   displayed.\n-\n-                   If \"link\" can't be selected or if its absolute path is null,\n-                   click FAIL.\n-\n-                   If \"link\" can be selected in both single- and multi-selection modes,\n-                   click PASS.\n-                6. When done with testing, paste the following commands to\n-                   remove the 'FileChooserTest' directory:\n-                cd \\\\\n-                rmdir \/s \/q C:\\\\FileChooserTest\n+                <li>Navigate to <code>C:\\\\FileChooserTest<\/code> in\n+                    the <code>JFileChooser<\/code>.\n+                <li>Perform testing in single- and multi-selection modes:\n+                    <ul style=\"margin-bottom: 0px\">\n+                    <li><strong>Single-selection:<\/strong>\n+                        <ol>\n+                            <li>Ensure <b>Enable multi-selection<\/b> is cleared\n+                                (the default state).\n+                            <li>Click <code>link<\/code> directory,\n+                                the absolute path of the symbolic\n+                                link should be displayed.<br>\n+                                If it's <code>null<\/code>, click <b>Fail<\/b>.\n+                            <li>Click <code>target<\/code> directory,\n+                                its absolute path should be displayed.\n+                        <\/ol>\n+                    <li><strong>Multi-selection:<\/strong>\n+                        <ol>\n+                            <li>Select <b>Enable multi-selection<\/b>.\n+                            <li>Click <code>link<\/code>,\n+                            <li>Press <kbd>Ctrl<\/kbd> and\n+                                then click <code>target<\/code>.\n+                            <li>Both should be selected and\n+                                their absolute paths should be displayed.\n+                            <li>If <code>link<\/code> can't be selected or\n+                                if its absolute path is <code>null<\/code>,\n+                                click <b>Fail<\/b>.\n+                        <\/ol>\n+                    <\/ul>\n+                    <p>If <code>link<\/code> can be selected in both\n+                    single- and multi-selection modes, click <b>Pass<\/b>.<\/p>\n+                <li>When done with testing, paste the following commands to\n+                   remove the <code>FileChooserTest<\/code> directory:\n+                <pre><code>cd \\\\\n+                rmdir \/s \/q C:\\\\FileChooserTest<\/code><\/pre>\n@@ -112,0 +124,1 @@\n+                <\/ol>\n@@ -118,1 +131,1 @@\n-        passFailJFrame = new PassFailJFrame(\"Test Instructions\", INSTRUCTIONS, 5L, 35, 40);\n+        passFailJFrame = new PassFailJFrame(\"Test Instructions\", INSTRUCTIONS, 5L, 35, 50);\n","filename":"test\/jdk\/javax\/swing\/JFileChooser\/FileChooserSymLinkTest.java","additions":43,"deletions":30,"binary":false,"changes":73,"status":"modified"}]}