{"files":[{"patch":"@@ -139,2 +139,3 @@\n-                                    ((path, attrs) -> attrs.isRegularFile()));\n-                stream.forEach((file) -> loadProps(null, file.toString(), false));\n+                                    ((path, attrs) -> attrs.isRegularFile() &&\n+                                                      !path.toFile().isHidden()));\n+                stream.sorted().forEach((file) -> loadProps(null, file.toString(), false));\n","filename":"src\/java.base\/share\/classes\/java\/security\/Security.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -20,4 +20,12 @@\n-# above. If both properties are specified, all properties found in\n-# the directory, plus those in the single file, will be appended. The\n-# overall effect is thus as if the single file was present in the\n-# directory.\n+# above, in lexicographic order of the file paths. Only regular non-hidden\n+# files are considered. If the same property occurs in a file later in the\n+# ordering, it will override the previous value of that property. For example,\n+# a property 'x' defined in both '01-props' and '02-props' will assume\n+# the value used in '02-props'.\n+#\n+# If both system properties are specified, all properties found in the\n+# directory, followed by those in the single file, will be appended.\n+# The overall effect is thus as if the single file occurred last\n+# lexicographically in the directory and so any properties specified\n+# in that single file will override definitions from the files in\n+# the directory.\n","filename":"src\/java.base\/share\/conf\/security\/java.security","additions":12,"deletions":4,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -77,0 +77,6 @@\n+            if (\"propDirNoHidden\".equals(args[0])) {\n+                \/\/ Properties listed in hidden files should not be registered\n+                if (Security.getProperty(\"testProp4\") != null) {\n+                    System.exit(1);\n+                }\n+            }\n@@ -148,0 +154,17 @@\n+            \/\/ test that hidden property files are ignored\n+            addHiddenFile(secPropDir);\n+            exerciseSecurity(0, \"testProp3=cherry\",\n+                    copiedJava.toString(), \"-cp\", System.getProperty(\"test.classes\"),\n+                    \"-Djava.security.debug=all\", \"-Djavax.net.debug=all\",\n+                    \"-Djava.security.properties=file:\/\/\/\" + extraPropsFile,\n+                    \"ConfigFileTest\", \"propDirNoHidden\");\n+\n+            \/\/ test that property files that occur lexicographically later\n+            \/\/ override properties in earlier files\n+            addOverrideFile(secPropDir);\n+            exerciseSecurity(0, \"testProp3=cabbage\",\n+                    copiedJava.toString(), \"-cp\", System.getProperty(\"test.classes\"),\n+                    \"-Djava.security.debug=all\", \"-Djavax.net.debug=all\",\n+                    \"-Djava.security.properties=file:\/\/\/\" + extraPropsFile,\n+                    \"ConfigFileTest\", \"propDir\");\n+\n@@ -204,3 +227,3 @@\n-        Files.writeString(dir.resolve(\"testFile1\"), \"testProp1=apple\");\n-        Files.writeString(dir.resolve(\"testFile2\"), \"testProp2=banana\");\n-        Path extraDir = dir.resolve(\"extra\");\n+        Files.writeString(dir.resolve(\"01-testFile\"), \"testProp1=apple\");\n+        Files.writeString(dir.resolve(\"02-testFile\"), \"testProp2=banana\");\n+        Path extraDir = dir.resolve(\"03-testDir\");\n@@ -208,1 +231,9 @@\n-        Files.writeString(extraDir.resolve(\"testFile3\"), \"testProp3=cherry\");\n+        Files.writeString(extraDir.resolve(\"extra\"), \"testProp3=cherry\");\n+    }\n+\n+    private static void addHiddenFile(Path dir) throws Exception {\n+        Files.writeString(dir.resolve(\".04-testFile\"), \"testProp4=diamond\");\n+    }\n+\n+    private static void addOverrideFile(Path dir) throws Exception {\n+        Files.writeString(dir.resolve(\"05-testFile\"), \"testProp3=cabbage\");\n","filename":"test\/jdk\/java\/security\/Security\/ConfigFileTest.java","additions":35,"deletions":4,"binary":false,"changes":39,"status":"modified"}]}