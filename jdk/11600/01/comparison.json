{"files":[{"patch":"@@ -52,15 +52,6 @@\n-        int commonattr = 0;\n-        long modValue = 0L;\n-        if (lastModifiedTime != null) {\n-            modValue = lastModifiedTime.to(TimeUnit.NANOSECONDS);\n-            commonattr |= UnixConstants.ATTR_CMN_MODTIME;\n-        }\n-        long accValue = 0L;\n-        if (lastAccessTime != null) {\n-            accValue = lastAccessTime.to(TimeUnit.NANOSECONDS);\n-            commonattr |= UnixConstants.ATTR_CMN_ACCTIME;\n-        }\n-        long createValue = 0L;\n-        if (createTime != null) {\n-            createValue = createTime.to(TimeUnit.NANOSECONDS);\n-            commonattr |= UnixConstants.ATTR_CMN_CRTIME;\n+        \/\/ not all volumes support setattrlist(2), so set the last\n+        \/\/ modified and last access times using the Unix implementation\n+        if (lastModifiedTime != null || lastAccessTime != null) {\n+            UnixFileAttributeViews.Basic basic =\n+                new UnixFileAttributeViews.Basic(path, followLinks);\n+            basic.setTimes(lastModifiedTime, lastAccessTime, null);\n@@ -69,5 +60,10 @@\n-        try {\n-            setattrlist(path, commonattr, modValue, accValue, createValue,\n-                        followLinks ?  0 : UnixConstants.FSOPT_NOFOLLOW);\n-        } catch (UnixException x) {\n-            x.rethrowAsIOException(path);\n+        \/\/ set the creation time using setattrlist\n+        if (createTime != null) {\n+            long createValue = createTime.to(TimeUnit.NANOSECONDS);\n+            int commonattr = UnixConstants.ATTR_CMN_CRTIME;\n+            try {\n+                setattrlist(path, commonattr, 0L, 0L, createValue,\n+                            followLinks ?  0 : UnixConstants.FSOPT_NOFOLLOW);\n+            } catch (UnixException x) {\n+                x.rethrowAsIOException(path);\n+            }\n","filename":"src\/java.base\/macosx\/classes\/sun\/nio\/fs\/BsdFileAttributeViews.java","additions":16,"deletions":20,"binary":false,"changes":36,"status":"modified"}]}