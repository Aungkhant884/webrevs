{"files":[{"patch":"@@ -822,0 +822,3 @@\n+  AC_ARG_WITH([llvm], [AS_HELP_STRING([--with-llvm],\n+      [where to find LLVM, needed for hsdis\/llvm])])\n+\n@@ -895,5 +898,18 @@\n-    # Macs with homebrew can have llvm in different places\n-    UTIL_LOOKUP_PROGS(LLVM_CONFIG, llvm-config, [$PATH:\/usr\/local\/opt\/llvm\/bin:\/opt\/homebrew\/opt\/llvm\/bin])\n-    if test \"x$LLVM_CONFIG\" = x; then\n-      AC_MSG_NOTICE([Cannot locate llvm-config which is needed for hsdis\/llvm. Try using LLVM_CONFIG=<path>.])\n-      AC_MSG_ERROR([Cannot continue])\n+\n+    if test \"x$with_llvm\" != x; then\n+      LLVM_DIR=\"$with_llvm\"\n+    fi\n+\n+    if test \"x$LLVM_DIR\" != x; then\n+      UTIL_LOOKUP_PROGS(LLVM_CONFIG, llvm-config, [$LLVM_DIR\/bin])\n+      if test \"x$LLVM_CONFIG\" = x; then\n+        AC_MSG_NOTICE([Cannot locate llvm-config in $LLVM_DIR. Check your --with-llvm argument.])\n+        AC_MSG_ERROR([Cannot continue])\n+      fi\n+    else\n+      # Macs with homebrew can have llvm in different places\n+      UTIL_LOOKUP_PROGS(LLVM_CONFIG, llvm-config, [$PATH:\/usr\/local\/opt\/llvm\/bin:\/opt\/homebrew\/opt\/llvm\/bin])\n+      if test \"x$LLVM_CONFIG\" = x; then\n+        AC_MSG_NOTICE([Cannot locate llvm-config which is needed for hsdis\/llvm. Try using --with-llvm=<LLVM home>.])\n+        AC_MSG_ERROR([Cannot continue])\n+      fi\n","filename":"make\/autoconf\/jdk-options.m4","additions":21,"deletions":5,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -111,0 +111,16 @@\n+\n+* Building with LLVM\n+\n+To build this project using LLVM you need to have LLVM installed. Typical ways\n+of installation can be \"sudo apt install llvm\" (on Debian and derivatives),\n+or \"brew install llvm\" (on macOS with Homebrew).\n+\n+This has been tested with LLVM v13.0.0, but earlier (and later) versions are\n+also likely to work.\n+\n+To build hsdis using LLVM, you must enable it in configure by \"bash configure\n+--with-hsdis=llvm\".\n+\n+If llvm-config is not in your path, you will need to specify the LLVM home using\n+\"--with-llvm=<LLVM home>\". If your llvm-config is in ~\/my-llvm\/bin, then you\n+should use \"--with-llvm=~\/my-llvm\".\n","filename":"src\/utils\/hsdis\/README","additions":16,"deletions":0,"binary":false,"changes":16,"status":"modified"}]}