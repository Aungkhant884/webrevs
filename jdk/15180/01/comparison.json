{"files":[{"patch":"@@ -28,0 +28,1 @@\n+import java.io.FileNotFoundException;\n@@ -29,0 +30,1 @@\n+import java.net.URL;\n@@ -34,1 +36,0 @@\n-import java.util.Arrays;\n@@ -53,0 +54,1 @@\n+import jdk.javadoc.internal.doclets.toolkit.BaseConfiguration;\n@@ -64,0 +66,1 @@\n+import jdk.javadoc.internal.doclets.toolkit.util.ResourceIOException;\n@@ -110,6 +113,0 @@\n-    \/**\n-     * Base path for resources for this doclet.\n-     *\/\n-    private static final DocPath DOCLET_RESOURCES = DocPath\n-            .create(\"\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\");\n-\n@@ -235,2 +232,2 @@\n-        performCopy(options.helpFile(), DocPath.empty);\n-        performCopy(options.stylesheetFile(), DocPath.empty);\n+        copyFile(options.helpFile(), DocPath.empty);\n+        copyFile(options.stylesheetFile(), DocPaths.RESOURCE_FILES);\n@@ -238,1 +235,1 @@\n-            performCopy(stylesheet, DocPath.empty);\n+            copyFile(stylesheet, DocPaths.RESOURCE_FILES);\n@@ -241,1 +238,1 @@\n-            performCopy(script, DocPaths.SCRIPT_DIR);\n+            copyFile(script, DocPaths.SCRIPT_FILES);\n@@ -307,1 +304,0 @@\n-        DocFile f;\n@@ -309,2 +305,1 @@\n-            f = DocFile.createFileForOutput(configuration, DocPaths.STYLESHEET);\n-            f.copyResource(DocPaths.RESOURCES.resolve(DocPaths.STYLESHEET), true, true);\n+            copyResource(DocPaths.STYLESHEET, DocPaths.RESOURCE_FILES.resolve(DocPaths.STYLESHEET), true);\n@@ -312,12 +307,3 @@\n-        f = DocFile.createFileForOutput(configuration, DocPaths.JAVASCRIPT);\n-        f.copyResource(DocPaths.RESOURCES.resolve(DocPaths.JAVASCRIPT), true, true);\n-        f = DocFile.createFileForOutput(configuration, DocPaths.CLIPBOARD_SVG);\n-        f.copyResource(DocPaths.RESOURCES.resolve(DocPaths.CLIPBOARD_SVG), true, true);\n-        f = DocFile.createFileForOutput(configuration, DocPaths.LINK_SVG);\n-        f.copyResource(DocPaths.RESOURCES.resolve(DocPaths.LINK_SVG), true, true);\n-        if (options.createIndex()) {\n-            f = DocFile.createFileForOutput(configuration, DocPaths.SEARCH_JS);\n-            f.copyResource(DOCLET_RESOURCES.resolve(DocPaths.SEARCH_JS_TEMPLATE), configuration.docResources);\n-\n-            f = DocFile.createFileForOutput(configuration, DocPaths.SEARCH_PAGE_JS);\n-            f.copyResource(DOCLET_RESOURCES.resolve(DocPaths.SEARCH_PAGE_JS), configuration.docResources);\n+        copyResource(DocPaths.SCRIPT_JS, DocPaths.SCRIPT_FILES.resolve(DocPaths.SCRIPT_JS), true);\n+        copyResource(DocPaths.CLIPBOARD_SVG, DocPaths.RESOURCE_FILES.resolve(DocPaths.CLIPBOARD_SVG), true);\n+        copyResource(DocPaths.LINK_SVG, DocPaths.RESOURCE_FILES.resolve(DocPaths.LINK_SVG), true);\n@@ -325,7 +311,12 @@\n-            f = DocFile.createFileForOutput(configuration, DocPaths.RESOURCES.resolve(DocPaths.GLASS_IMG));\n-            f.copyResource(DOCLET_RESOURCES.resolve(DocPaths.GLASS_IMG), true, false);\n-\n-            f = DocFile.createFileForOutput(configuration, DocPaths.RESOURCES.resolve(DocPaths.X_IMG));\n-            f.copyResource(DOCLET_RESOURCES.resolve(DocPaths.X_IMG), true, false);\n-            copyJqueryFiles();\n-        }\n+        if (options.createIndex()) {\n+            copyResource(DocPaths.SEARCH_JS_TEMPLATE, DocPaths.SCRIPT_FILES.resolve(DocPaths.SEARCH_JS), true);\n+            copyResource(DocPaths.SEARCH_PAGE_JS, DocPaths.SCRIPT_FILES.resolve(DocPaths.SEARCH_PAGE_JS), true);\n+            copyResource(DocPaths.GLASS_IMG, DocPaths.RESOURCE_FILES.resolve(DocPaths.GLASS_IMG), false);\n+            copyResource(DocPaths.X_IMG, DocPaths.RESOURCE_FILES.resolve(DocPaths.X_IMG), false);\n+            \/\/ No newline replacement for JQuery files\n+            copyResource(DocPaths.JQUERY_DIR.resolve(DocPaths.JQUERY_JS),\n+                    DocPaths.SCRIPT_FILES.resolve(DocPaths.JQUERY_JS), false);\n+            copyResource(DocPaths.JQUERY_DIR.resolve(DocPaths.JQUERY_UI_JS),\n+                    DocPaths.SCRIPT_FILES.resolve(DocPaths.JQUERY_UI_JS), false);\n+            copyResource(DocPaths.JQUERY_DIR.resolve(DocPaths.JQUERY_UI_CSS),\n+                    DocPaths.RESOURCE_FILES.resolve(DocPaths.JQUERY_UI_CSS), false);        }\n@@ -343,14 +334,0 @@\n-\n-    }\n-\n-    private void copyJqueryFiles() throws DocletException {\n-        List<String> files = Arrays.asList(\n-                DocPaths.JQUERY_JS.getPath(),\n-                DocPaths.JQUERY_UI_JS.getPath(),\n-                DocPaths.JQUERY_UI_CSS.getPath());\n-        DocFile f;\n-        for (String file : files) {\n-            DocPath filePath = DocPaths.SCRIPT_DIR.resolve(file);\n-            f = DocFile.createFileForOutput(configuration, filePath);\n-            f.copyResource(DOCLET_RESOURCES.resolve(filePath), true, false);\n-        }\n@@ -447,1 +424,18 @@\n-    private void performCopy(String filename, DocPath targetPath) throws DocFileIOException {\n+    private void copyResource(DocPath sourcePath, DocPath targetPath, boolean replaceNewLine)\n+            throws DocletException {\n+        DocPath resourcePath = DocPaths.RESOURCES.resolve(sourcePath);\n+        \/\/ Resolve resources against doclets.formats.html package\n+        URL resourceURL = HtmlConfiguration.class.getResource(resourcePath.getPath());\n+        if (resourceURL == null) {\n+            throw new ResourceIOException(sourcePath, new FileNotFoundException(resourcePath.getPath()));\n+        }\n+        DocFile f = DocFile.createFileForOutput(configuration, targetPath);\n+\n+        if (sourcePath.getPath().toLowerCase(Locale.ROOT).endsWith(\".template\")) {\n+            f.copyResource(resourcePath, resourceURL, configuration.docResources);\n+        } else {\n+            f.copyResource(resourcePath, resourceURL, replaceNewLine);\n+        }\n+    }\n+\n+    private void copyFile(String filename, DocPath targetPath) throws DocFileIOException {\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlDoclet.java","additions":42,"deletions":48,"binary":false,"changes":90,"status":"modified"},{"patch":"@@ -469,1 +469,0 @@\n-        additionalStylesheets.addAll(localStylesheets);\n@@ -477,1 +476,1 @@\n-                .setStylesheets(configuration.getMainStylesheet(), additionalStylesheets)\n+                .setStylesheets(configuration.getMainStylesheet(), additionalStylesheets, localStylesheets)\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlDocletWriter.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -77,1 +77,1 @@\n-                .setStylesheets(configuration.getMainStylesheet(), List.of()) \/\/ avoid reference to default stylesheet\n+                .setStylesheets(configuration.getMainStylesheet(), List.of(), List.of())\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/IndexRedirectWriter.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -99,1 +99,2 @@\n-                                        .put(HtmlAttr.SRC, pathToRoot.resolve(DocPaths.CLIPBOARD_SVG).getPath())\n+                                        .put(HtmlAttr.SRC, pathToRoot.resolve(DocPaths.RESOURCE_FILES)\n+                                                                     .resolve(DocPaths.CLIPBOARD_SVG).getPath())\n@@ -117,1 +118,2 @@\n-                        .add(HtmlTree.SCRIPT(pathToRoot.resolve(DocPaths.SEARCH_PAGE_JS).getPath())));\n+                        .add(HtmlTree.SCRIPT(pathToRoot.resolve(DocPaths.SCRIPT_FILES)\n+                                                       .resolve(DocPaths.SEARCH_PAGE_JS).getPath())));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/SearchWriter.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import java.util.List;\n@@ -235,1 +236,1 @@\n-                .setStylesheets(configuration.getMainStylesheet(), configuration.getAdditionalStylesheets());\n+                .setStylesheets(configuration.getMainStylesheet(), configuration.getAdditionalStylesheets(), List.of());\n@@ -242,30 +243,0 @@\n-    \/**\n-     * Returns a link to the stylesheet file.\n-     *\n-     * @param head the content to which the stylesheet links will be added\n-     *\/\n-    public void addStyleSheetProperties(Content head) {\n-        String filename = options.stylesheetFile();\n-        DocPath stylesheet;\n-        if (filename.length() > 0) {\n-            DocFile file = DocFile.createFileForInput(configuration, filename);\n-            stylesheet = DocPath.create(file.getName());\n-        } else {\n-            stylesheet = DocPaths.STYLESHEET;\n-        }\n-        DocPath p = relativePath.resolve(stylesheet);\n-        var link = HtmlTree.LINK(\"stylesheet\", \"text\/css\", p.getPath(), \"Style\");\n-        head.add(link);\n-        addStylesheets(head);\n-    }\n-\n-    protected void addStylesheets(Content head) {\n-        options.additionalStylesheets().forEach(css -> {\n-            DocFile file = DocFile.createFileForInput(configuration, css);\n-            DocPath cssPath = DocPath.create(file.getName());\n-            var slink = HtmlTree.LINK(\"stylesheet\", \"text\/css\", relativePath.resolve(cssPath).getPath(),\n-                                      \"Style\");\n-            head.add(slink);\n-        });\n-    }\n-\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/SourceToHTMLConverter.java","additions":3,"deletions":32,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -58,0 +58,1 @@\n+    private List<DocPath> localStylesheets = List.of();\n@@ -160,0 +161,1 @@\n+     * @param local a list of module- or package-local stylesheets to be included\n@@ -162,1 +164,1 @@\n-    public Head setStylesheets(DocPath main, List<DocPath> additional) {\n+    public Head setStylesheets(DocPath main, List<DocPath> additional, List<DocPath> local) {\n@@ -165,0 +167,1 @@\n+        this.localStylesheets = local;\n@@ -322,1 +325,1 @@\n-        addStylesheet(head, mainStylesheet);\n+        addStylesheet(head, DocPaths.RESOURCE_FILES.resolve(mainStylesheet));\n@@ -325,0 +328,5 @@\n+            addStylesheet(head, DocPaths.RESOURCE_FILES.resolve(path));\n+        }\n+\n+        for (DocPath path : localStylesheets) {\n+            \/\/ Local stylesheets are contained in doc-files, so omit resource-files prefix\n@@ -329,1 +337,1 @@\n-            addStylesheet(head, DocPaths.SCRIPT_DIR.resolve(DocPaths.JQUERY_UI_CSS));\n+            addStylesheet(head, DocPaths.RESOURCE_FILES.resolve(DocPaths.JQUERY_UI_CSS));\n@@ -340,1 +348,1 @@\n-            head.add(HtmlTree.SCRIPT(pathToRoot.resolve(DocPaths.JAVASCRIPT).getPath()));\n+            addScriptElement(head, DocPaths.SCRIPT_FILES.resolve(DocPaths.SCRIPT_JS));\n@@ -350,2 +358,2 @@\n-            addScriptElement(head, DocPaths.JQUERY_JS);\n-            addScriptElement(head, DocPaths.JQUERY_UI_JS);\n+            addScriptElement(head, DocPaths.SCRIPT_FILES.resolve(DocPaths.JQUERY_JS));\n+            addScriptElement(head, DocPaths.SCRIPT_FILES.resolve(DocPaths.JQUERY_UI_JS));\n@@ -354,1 +362,1 @@\n-            addScriptElement(head, path);\n+            addScriptElement(head, DocPaths.SCRIPT_FILES.resolve(path));\n@@ -362,1 +370,1 @@\n-        DocPath scriptFile = pathToRoot.resolve(DocPaths.SCRIPT_DIR).resolve(filePath);\n+        DocPath scriptFile = pathToRoot.resolve(filePath);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/Head.java","additions":17,"deletions":9,"binary":false,"changes":26,"status":"modified"},{"patch":"","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/copy.svg","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/copy.svg","status":"renamed"},{"patch":"","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/external-link.svg","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/external-link.svg","status":"renamed"},{"patch":"","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/jquery\/jquery-3.6.1.js","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/jquery-3.6.1.js","status":"renamed"},{"patch":"","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/jquery\/jquery-3.6.1.min.js","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/jquery-3.6.1.min.js","status":"renamed"},{"patch":"","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/jquery\/jquery-ui.css","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/jquery-ui.css","status":"renamed"},{"patch":"","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/jquery\/jquery-ui.js","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/jquery-ui.js","status":"renamed"},{"patch":"","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/jquery\/jquery-ui.min.css","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/jquery-ui.min.css","status":"renamed"},{"patch":"","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/jquery\/jquery-ui.min.js","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/jquery-ui.min.js","status":"renamed"},{"patch":"","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/link.svg","additions":0,"deletions":0,"binary":false,"changes":0,"previous_filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/link.svg","status":"renamed"},{"filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/images\/ui-bg_glass_55_fbf9ee_1x400.png","binary":true,"status":"deleted"},{"filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/images\/ui-bg_glass_65_dadada_1x400.png","binary":true,"status":"deleted"},{"filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/images\/ui-bg_glass_75_dadada_1x400.png","binary":true,"status":"deleted"},{"filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/images\/ui-bg_glass_75_e6e6e6_1x400.png","binary":true,"status":"deleted"},{"filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/images\/ui-bg_glass_95_fef1ec_1x400.png","binary":true,"status":"deleted"},{"filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/images\/ui-bg_highlight-soft_75_cccccc_1x100.png","binary":true,"status":"deleted"},{"filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/images\/ui-icons_222222_256x240.png","binary":true,"status":"deleted"},{"filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/images\/ui-icons_2e83ff_256x240.png","binary":true,"status":"deleted"},{"filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/images\/ui-icons_454545_256x240.png","binary":true,"status":"deleted"},{"filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/images\/ui-icons_888888_256x240.png","binary":true,"status":"deleted"},{"filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script-dir\/images\/ui-icons_cd0a0a_256x240.png","binary":true,"status":"deleted"},{"patch":"@@ -40,1 +40,1 @@\n-    createElem(doc, tag, 'search.js');\n+    createElem(doc, tag, 'script-files\/search.js');\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/script.js","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/script.js","status":"renamed"},{"patch":"@@ -416,1 +416,1 @@\n-                + \"'><img src='\" + pathtoroot + \"link.svg' alt='\" + messages.linkIcon +\"' tabindex='0'\"\n+                + \"'><img src='\" + pathtoroot + \"resource-files\/link.svg' alt='\" + messages.linkIcon +\"' tabindex='0'\"\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/search.js.template","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -5,1 +5,1 @@\n-@import url('resources\/fonts\/dejavu.css');\n+@import url('fonts\/dejavu.css');\n@@ -760,1 +760,1 @@\n-    background-image:url('resources\/glass.png');\n+    background-image:url('glass.png');\n@@ -776,1 +776,1 @@\n-    background-image:url('resources\/x.png');\n+    background-image:url('x.png');\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/stylesheet.css","additions":3,"deletions":3,"binary":false,"changes":6,"previous_filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/stylesheet.css","status":"renamed"},{"patch":"@@ -225,1 +225,2 @@\n-                                .put(HtmlAttr.SRC, pathToRoot.resolve(DocPaths.CLIPBOARD_SVG).getPath())\n+                                .put(HtmlAttr.SRC, pathToRoot.resolve(DocPaths.RESOURCE_FILES)\n+                                                             .resolve(DocPaths.CLIPBOARD_SVG).getPath())\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/taglets\/SnippetTaglet.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,0 +35,1 @@\n+import java.net.URL;\n@@ -179,2 +180,2 @@\n-     * @param resource the path of the resource, relative to the package of this class\n-     * @param overwrite whether or not to overwrite the file if it already exists\n+     * @param resource the path of the resource\n+     * @param url the URL of the resource\n@@ -188,1 +189,1 @@\n-    public void copyResource(DocPath resource, boolean overwrite, boolean replaceNewLine)\n+    public void copyResource(DocPath resource, URL url, boolean replaceNewLine)\n@@ -190,4 +191,1 @@\n-        if (exists() && !overwrite)\n-            return;\n-\n-        copyResource(resource, replaceNewLine, null);\n+        copyResource(resource, url, replaceNewLine, null);\n@@ -199,1 +197,2 @@\n-     * @param resource the path of the resource, relative to the package of this class\n+     * @param resource the path of the resource\n+     * @param url the URL of the resource\n@@ -205,2 +204,2 @@\n-    public void copyResource(DocPath resource, Resources resources) throws DocFileIOException, ResourceIOException {\n-        copyResource(resource, true, resources);\n+    public void copyResource(DocPath resource, URL url, Resources resources) throws DocFileIOException, ResourceIOException {\n+        copyResource(resource, url, true, resources);\n@@ -209,1 +208,1 @@\n-    private void copyResource(DocPath resource, boolean replaceNewLine, Resources resources)\n+    private void copyResource(DocPath resource, URL url, boolean replaceNewLine, Resources resources)\n@@ -212,3 +211,1 @@\n-            InputStream in = BaseConfiguration.class.getResourceAsStream(resource.getPath());\n-            if (in == null)\n-                return;\n+            InputStream in = url.openStream();\n@@ -216,1 +213,1 @@\n-            try {\n+            try (in) {\n@@ -240,2 +237,0 @@\n-            } finally {\n-                in.close();\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/DocFile.java","additions":13,"deletions":18,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -95,1 +95,1 @@\n-    public static final DocPath JAVASCRIPT = DocPath.create(\"script.js\");\n+    public static final DocPath SCRIPT_JS = DocPath.create(\"script.js\");\n@@ -103,0 +103,3 @@\n+    \/** The name of the default jQuery directory. *\/\n+    public static final DocPath JQUERY_DIR = DocPath.create(\"jquery\");\n+\n@@ -148,0 +151,3 @@\n+    \/** The name of the directory for the resource files. *\/\n+    public static final DocPath RESOURCE_FILES = DocPath.create(\"resource-files\");\n+\n@@ -149,1 +155,1 @@\n-    public static final DocPath SCRIPT_DIR = DocPath.create(\"script-dir\");\n+    public static final DocPath SCRIPT_FILES = DocPath.create(\"script-files\");\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/DocPaths.java","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -53,1 +53,1 @@\n-        checkOutput(\"stylesheet.css\", true,\n+        checkOutput(\"resource-files\/stylesheet.css\", true,\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/AccessH1\/AccessH1.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -76,1 +76,1 @@\n-                                     .resolve(\"resources\/script-dir\");\n+                                     .resolve(\"resources\/jquery\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/checkLibraryVersions\/CheckLibraryVersions.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n- *          jdk.javadoc\/jdk.javadoc.internal.doclets.toolkit.resources:open\n+ *          jdk.javadoc\/jdk.javadoc.internal.doclets.formats.html.resources:open\n@@ -195,1 +195,1 @@\n-        String stylesheet = \"\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/stylesheet.css\";\n+        String stylesheet = \"\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/stylesheet.css\";\n@@ -214,1 +214,1 @@\n-}\n\\ No newline at end of file\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/checkStylesheetClasses\/CheckStylesheetClasses.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -59,1 +59,1 @@\n-        checkOutput(\"stylesheet.css\", true,\n+        checkOutput(\"resource-files\/stylesheet.css\", true,\n@@ -67,1 +67,1 @@\n-        checkOutput(\"stylesheet.css\", false,\n+        checkOutput(\"resource-files\/stylesheet.css\", false,\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testDocEncoding\/TestDocEncoding.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -64,1 +64,1 @@\n-        checkOutput(\"script.js\", false,\n+        checkOutput(\"script-files\/script.js\", false,\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testJavascript\/TestJavascript.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -119,1 +119,1 @@\n-        checkOutput(\"custom-stylesheet.css\", true, \"Custom javadoc style sheet\");\n+        checkOutput(\"resource-files\/custom-stylesheet.css\", true, \"Custom javadoc style sheet\");\n@@ -121,1 +121,1 @@\n-            <link rel=\"stylesheet\" type=\"text\/css\" href=\"..\/custom-stylesheet.css\" title=\"Style\">\"\"\");\n+            <link rel=\"stylesheet\" type=\"text\/css\" href=\"..\/resource-files\/custom-stylesheet.css\" title=\"Style\">\"\"\");\n@@ -132,1 +132,1 @@\n-        checkOutput(\"custom-stylesheet.css\", true, \"Custom javadoc style sheet\");\n+        checkOutput(\"resource-files\/custom-stylesheet.css\", true, \"Custom javadoc style sheet\");\n@@ -134,1 +134,1 @@\n-            <link rel=\"stylesheet\" type=\"text\/css\" href=\"..\/custom-stylesheet.css\" title=\"Style\">\"\"\");\n+            <link rel=\"stylesheet\" type=\"text\/css\" href=\"..\/resource-files\/custom-stylesheet.css\" title=\"Style\">\"\"\");\n@@ -147,3 +147,3 @@\n-        checkOutput(\"additional-stylesheet-1.css\", true, \"Additional javadoc style sheet 1\");\n-        checkOutput(\"additional-stylesheet-2.css\", true, \"Additional javadoc style sheet 2\");\n-        checkOutput(\"additional-stylesheet-3.css\", true, \"Additional javadoc style sheet 3\");\n+        checkOutput(\"resource-files\/additional-stylesheet-1.css\", true, \"Additional javadoc style sheet 1\");\n+        checkOutput(\"resource-files\/additional-stylesheet-2.css\", true, \"Additional javadoc style sheet 2\");\n+        checkOutput(\"resource-files\/additional-stylesheet-3.css\", true, \"Additional javadoc style sheet 3\");\n@@ -152,3 +152,3 @@\n-                    <link rel=\"stylesheet\" type=\"text\/css\" href=\"..\/additional-stylesheet-1.css\" title=\"Style\">\n-                    <link rel=\"stylesheet\" type=\"text\/css\" href=\"..\/additional-stylesheet-2.css\" title=\"Style\">\n-                    <link rel=\"stylesheet\" type=\"text\/css\" href=\"..\/additional-stylesheet-3.css\" title=\"Style\">\"\"\");\n+                    <link rel=\"stylesheet\" type=\"text\/css\" href=\"..\/resource-files\/additional-stylesheet-1.css\" title=\"Style\">\n+                    <link rel=\"stylesheet\" type=\"text\/css\" href=\"..\/resource-files\/additional-stylesheet-2.css\" title=\"Style\">\n+                    <link rel=\"stylesheet\" type=\"text\/css\" href=\"..\/resource-files\/additional-stylesheet-3.css\" title=\"Style\">\"\"\");\n@@ -192,2 +192,2 @@\n-        checkOutput(\"script-dir\/additional-script-1.js\", true, \"Additional script file 1\");\n-        checkOutput(\"script-dir\/additional-script-2.js\", true, \"Additional script file 2\");\n+        checkOutput(\"script-files\/additional-script-1.js\", true, \"Additional script file 1\");\n+        checkOutput(\"script-files\/additional-script-2.js\", true, \"Additional script file 2\");\n@@ -196,2 +196,2 @@\n-                    <script type=\"text\/javascript\" src=\"..\/script-dir\/additional-script-1.js\"><\/script>\n-                    <script type=\"text\/javascript\" src=\"..\/script-dir\/additional-script-2.js\"><\/script>\n+                    <script type=\"text\/javascript\" src=\"..\/script-files\/additional-script-1.js\"><\/script>\n+                    <script type=\"text\/javascript\" src=\"..\/script-files\/additional-script-2.js\"><\/script>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testOptions\/TestOptions.java","additions":15,"deletions":15,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -138,1 +138,1 @@\n-                \"search-page.js\",\n+                \"script-files\/search-page.js\",\n@@ -182,1 +182,1 @@\n-                \"search-page.js\",\n+                \"script-files\/search-page.js\",\n@@ -421,1 +421,1 @@\n-                    <link rel=\"stylesheet\" type=\"text\/css\" href=\"script-dir\/jquery-ui.min.css\" title=\"Style\">\n+                    <link rel=\"stylesheet\" type=\"text\/css\" href=\"resource-files\/jquery-ui.min.css\" title=\"Style\">\n@@ -424,1 +424,1 @@\n-                    <script type=\"text\/javascript\" src=\"script-dir\/jquery-3.6.1.min.js\"><\/script>\n+                    <script type=\"text\/javascript\" src=\"script-files\/jquery-3.6.1.min.js\"><\/script>\n@@ -427,1 +427,1 @@\n-                    <script type=\"text\/javascript\" src=\"script-dir\/jquery-ui.min.js\"><\/script>\"\"\",\n+                    <script type=\"text\/javascript\" src=\"script-files\/jquery-ui.min.js\"><\/script>\"\"\",\n@@ -693,6 +693,6 @@\n-                \"search.js\",\n-                \"script-dir\/jquery-3.6.1.min.js\",\n-                \"script-dir\/jquery-ui.min.js\",\n-                \"script-dir\/jquery-ui.min.css\",\n-                \"resources\/x.png\",\n-                \"resources\/glass.png\");\n+                \"script-files\/search.js\",\n+                \"script-files\/jquery-3.6.1.min.js\",\n+                \"script-files\/jquery-ui.min.js\",\n+                \"resource-files\/jquery-ui.min.css\",\n+                \"resource-files\/x.png\",\n+                \"resource-files\/glass.png\");\n@@ -703,1 +703,1 @@\n-        checkOutput(\"search.js\", false,\n+        checkOutput(\"script-files\/search.js\", false,\n@@ -706,1 +706,1 @@\n-        checkOutput(\"search.js\", true,\n+        checkOutput(\"script-files\/search.js\", true,\n@@ -711,1 +711,1 @@\n-        checkOutput(\"search-page.js\", true,\n+        checkOutput(\"script-files\/search-page.js\", true,\n@@ -715,1 +715,1 @@\n-        checkCssClasses(\"search.js\", \"stylesheet.css\");\n+        checkCssClasses(\"script-files\/search.js\", \"resource-files\/stylesheet.css\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSearch\/TestSearch.java","additions":15,"deletions":15,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -118,1 +118,1 @@\n-        var svgString = \"..\/\".repeat(nComponents) + \"copy.svg\";\n+        var svgString = \"..\/\".repeat(nComponents) + \"resource-files\/copy.svg\";\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSnippetTag\/SnippetTester.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -68,1 +68,1 @@\n-        checkOutput(\"stylesheet.css\", true,\n+        checkOutput(\"resource-files\/stylesheet.css\", true,\n@@ -144,1 +144,1 @@\n-                \"@import url('resources\/fonts\/dejavu.css');\",\n+                \"@import url('fonts\/dejavu.css');\",\n@@ -178,1 +178,1 @@\n-                        background-image:url('resources\/x.png');\n+                        background-image:url('x.png');\n@@ -200,1 +200,1 @@\n-                    <link rel=\"stylesheet\" type=\"text\/css\" href=\"..\/stylesheet.css\" title=\"Style\">\"\"\",\n+                    <link rel=\"stylesheet\" type=\"text\/css\" href=\"..\/resource-files\/stylesheet.css\" title=\"Style\">\"\"\",\n@@ -214,1 +214,1 @@\n-                    <link rel=\"stylesheet\" type=\"text\/css\" href=\"stylesheet.css\" title=\"Style\">\"\"\");\n+                    <link rel=\"stylesheet\" type=\"text\/css\" href=\"resource-files\/stylesheet.css\" title=\"Style\">\"\"\");\n@@ -216,1 +216,1 @@\n-        checkOutput(\"stylesheet.css\", false,\n+        checkOutput(\"resource-files\/stylesheet.css\", false,\n@@ -278,1 +278,1 @@\n-        String stylesheet = readFile(\"stylesheet.css\");\n+        String stylesheet = readFile(\"resource-files\/stylesheet.css\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testStylesheet\/TestStylesheet.java","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -1,1 +1,1 @@\n-\/* * Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n+\/* * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -61,0 +61,2 @@\n+        Path resourceDir = outDir.resolve(\"resource-files\");\n+        Files.createDirectories(resourceDir);\n@@ -62,2 +64,1 @@\n-        Files.createDirectory(outDir);\n-        Path stylesheet = outDir.resolve(\"stylesheet.css\");\n+        Path stylesheet = resourceDir.resolve(\"stylesheet.css\");\n@@ -74,1 +75,1 @@\n-        checkOutput(\"stylesheet.css\", true, \"Javadoc style sheet\");\n+        checkOutput(\"resource-files\/stylesheet.css\", true, \"Javadoc style sheet\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testStylesheetOverwrite\/TestStylesheetOverwrite.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -144,1 +144,1 @@\n-        checkOutput(\"search.js\", sv.compareTo(SourceVersion.RELEASE_16) < 0,\n+        checkOutput(\"script-files\/search.js\", sv.compareTo(SourceVersion.RELEASE_16) < 0,\n@@ -148,1 +148,1 @@\n-        checkOutput(\"search.js\", sv.compareTo(SourceVersion.RELEASE_16) >= 0,\n+        checkOutput(\"script-files\/search.js\", sv.compareTo(SourceVersion.RELEASE_16) >= 0,\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testTerminology\/TestTerminology.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -199,1 +199,0 @@\n-            \"copy.svg\",\n@@ -204,4 +203,0 @@\n-            \"link.svg\",\n-            \"script-dir\/jquery-3.6.1.min.js\",\n-            \"script-dir\/jquery-ui.min.js\",\n-            \"script-dir\/jquery-ui.min.css\",\n@@ -209,1 +204,0 @@\n-            \"search-page.js\",\n@@ -218,5 +212,11 @@\n-            \"resources\/glass.png\",\n-            \"resources\/x.png\",\n-            \"script.js\",\n-            \"search.js\",\n-            \"stylesheet.css\",\n+            \"resource-files\/copy.svg\",\n+            \"resource-files\/glass.png\",\n+            \"resource-files\/jquery-ui.min.css\",\n+            \"resource-files\/link.svg\",\n+            \"resource-files\/stylesheet.css\",\n+            \"resource-files\/x.png\",\n+            \"script-files\/jquery-3.6.1.min.js\",\n+            \"script-files\/jquery-ui.min.js\",\n+            \"script-files\/script.js\",\n+            \"script-files\/search.js\",\n+            \"script-files\/search-page.js\",\n@@ -228,3 +228,2 @@\n-            .filter(s ->    !s.startsWith(\"script-dir\")\n-                         && !s.startsWith(\"resources\")\n-                         && !s.endsWith(\"-search-index.js\")\n+            .filter(s ->\n+                            !s.endsWith(\"-search-index.js\")\n@@ -232,1 +231,6 @@\n-                         && !s.equals(\"search.js\")\n+                         && !s.equals(\"resource-files\/glass.png\")\n+                         && !s.equals(\"resource-files\/jquery-ui.min.css\")\n+                         && !s.equals(\"resource-files\/x.png\")\n+                         && !s.startsWith(\"script-files\/jquery-\")\n+                         && !s.equals(\"script-files\/search.js\")\n+                         && !s.equals(\"script-files\/search-page.js\")\n@@ -234,1 +238,0 @@\n-                         && !s.equals(\"search-page.js\")\n","filename":"test\/langtools\/jdk\/javadoc\/tool\/api\/basic\/APITest.java","additions":19,"deletions":16,"binary":false,"changes":35,"status":"modified"}]}