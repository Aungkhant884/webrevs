{"files":[{"patch":"@@ -28,0 +28,1 @@\n+import jdk.test.whitebox.WhiteBox;\n@@ -39,1 +40,3 @@\n- * @run driver compiler.c2.irTests.TestVectorizationMultiInvar\n+ * @build jdk.test.whitebox.WhiteBox\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller jdk.test.whitebox.WhiteBox\n+ * @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI compiler.c2.irTests.TestVectorizationMultiInvar\n@@ -44,0 +47,1 @@\n+    private final static WhiteBox wb = WhiteBox.getWhiteBox();\n@@ -46,1 +50,4 @@\n-        TestFramework.runWithFlags(\"--add-modules\", \"java.base\", \"--add-exports\", \"java.base\/jdk.internal.misc=ALL-UNNAMED\");\n+        Object alignVector = wb.getVMFlag(\"AlignVector\");\n+        if (alignVector != null && !((Boolean)alignVector)) {\n+            TestFramework.runWithFlags(\"--add-modules\", \"java.base\", \"--add-exports\", \"java.base\/jdk.internal.misc=ALL-UNNAMED\");\n+        }\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/irTests\/TestVectorizationMultiInvar.java","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"}]}