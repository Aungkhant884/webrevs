{"files":[{"patch":"@@ -221,0 +221,1 @@\n+\/\/   arg2: Compress level\n@@ -236,0 +237,11 @@\n+    const char* num_str = op->arg(2);\n+    uintx level = 0;\n+    if (num_str != NULL && num_str[0] != '\\0') {\n+      if (!Arguments::parse_uintx(num_str, &level, 0)) {\n+        out->print_cr(\"Invalid compress level: [%s]\", num_str);\n+        return JNI_ERR;\n+      } else if (level < 1 || level > 9) {\n+        out->print_cr(\"Compression level out of range (1-9): \" UINTX_FORMAT, level);\n+        return JNI_ERR;\n+      }\n+    }\n@@ -240,1 +252,1 @@\n-    dumper.dump(op->arg(0), out);\n+    dumper.dump(op->arg(0), out, (int)level);\n","filename":"src\/hotspot\/share\/services\/attachListener.cpp","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -212,0 +212,1 @@\n+        String compress_level = null;\n@@ -227,0 +228,6 @@\n+            } else if (subopt.startsWith(\"gz=\")) {\n+               compress_level = subopt.substring(\"gz=\".length());\n+               if (compress_level == null) {\n+                    System.err.println(\"Fail: no number provided in option: '\" + subopt + \"'\");\n+                    usage(1);\n+               }\n@@ -241,1 +248,1 @@\n-        executeCommandForPid(pid, \"dumpheap\", filename, liveopt);\n+        executeCommandForPid(pid, \"dumpheap\", filename, liveopt, compress_level);\n@@ -306,0 +313,2 @@\n+        System.err.println(\"      gz=<number>  If specified, the heap dump is written in gzipped format using the given compression level.\");\n+        System.err.println(\"                   1 (recommended) is the fastest, 9 the strongest compression.\");\n","filename":"src\/jdk.jcmd\/share\/classes\/sun\/tools\/jmap\/JMap.java","additions":10,"deletions":1,"binary":false,"changes":11,"status":"modified"}]}