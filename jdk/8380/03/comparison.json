{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,2 +29,0 @@\n- * @library ..\/..\/regtesthelpers\n- * @build Util\n@@ -82,1 +80,1 @@\n-            getImageIconBufferedImage();\n+            getImageIconBufferedImage(lookAndFeelString);\n@@ -92,1 +90,1 @@\n-            getIconBufferedImage();\n+            getIconBufferedImage(lookAndFeelString);\n@@ -142,0 +140,1 @@\n+                frame.setUndecorated(true);\n@@ -185,0 +184,1 @@\n+                frame.setUndecorated(true);\n@@ -192,1 +192,1 @@\n-    private static void getImageIconBufferedImage() throws Exception {\n+    private static void getImageIconBufferedImage(String lookAndFeelString) throws Exception {\n@@ -195,1 +195,9 @@\n-        Rectangle captureRect = new Rectangle(\n+        Rectangle captureRect = null;\n+        if (lookAndFeelString.contains(\"Aqua\")) {\n+            captureRect = new Rectangle(\n+                point.x + internalFrame.getInsets().left,\n+                point.y + internalFrame.getInsets().top,\n+                rect.width - internalFrame.getInsets().left - internalFrame.getInsets().right,\n+                internalFrame.getInsets().top);\n+        } else {\n+            captureRect = new Rectangle(\n@@ -200,1 +208,1 @@\n-\n+        }\n@@ -202,2 +210,1 @@\n-        imageIconImage\n-                = robot.createScreenCapture(captureRect);\n+        imageIconImage = robot.createScreenCapture(captureRect);\n@@ -206,1 +213,1 @@\n-    private static void getIconBufferedImage() throws Exception {\n+    private static void getIconBufferedImage(String lookAndFeelString) throws Exception {\n@@ -209,1 +216,9 @@\n-        Rectangle captureRect = new Rectangle(\n+        Rectangle captureRect = null;\n+        if (lookAndFeelString.contains(\"Aqua\")) {\n+            captureRect = new Rectangle(\n+                    point.x + internalFrame.getInsets().left,\n+                    point.y + internalFrame.getInsets().top,\n+                    rect.width - internalFrame.getInsets().left - internalFrame.getInsets().right,\n+                    internalFrame.getInsets().top);\n+        } else {\n+            captureRect = new Rectangle(\n@@ -214,1 +229,1 @@\n-\n+        }\n@@ -216,2 +231,1 @@\n-        iconImage\n-                = robot.createScreenCapture(captureRect);\n+        iconImage = robot.createScreenCapture(captureRect);\n@@ -228,1 +242,1 @@\n-            System.err.println(error);\n+            System.out.println(error);\n@@ -241,1 +255,1 @@\n-            final int colorTolerance = 25;\n+            final int colorTolerance = 1;\n","filename":"test\/jdk\/javax\/swing\/JInternalFrame\/8146321\/JInternalFrameIconTest.java","additions":31,"deletions":17,"binary":false,"changes":48,"status":"modified"}]}