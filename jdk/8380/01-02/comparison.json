{"files":[{"patch":"@@ -80,1 +80,1 @@\n-            getImageIconBufferedImage();\n+            getImageIconBufferedImage(lookAndFeelString);\n@@ -90,1 +90,1 @@\n-            getIconBufferedImage();\n+            getIconBufferedImage(lookAndFeelString);\n@@ -192,1 +192,1 @@\n-    private static void getImageIconBufferedImage() throws Exception {\n+    private static void getImageIconBufferedImage(String lookAndFeelString) throws Exception {\n@@ -195,1 +195,9 @@\n-        Rectangle captureRect = new Rectangle(\n+\tRectangle captureRect = null;\n+\tif (lookAndFeelString.contains(\"Aqua\")) {\n+            captureRect = new Rectangle(\n+                point.x + internalFrame.getInsets().left,\n+                point.y + internalFrame.getInsets().top,\n+                rect.width - internalFrame.getInsets().left - internalFrame.getInsets().right,\n+                internalFrame.getInsets().top);\n+        } else {\n+            captureRect = new Rectangle(\n@@ -200,1 +208,1 @@\n-\n+        }\n@@ -202,2 +210,1 @@\n-        imageIconImage\n-                = robot.createScreenCapture(captureRect);\n+        imageIconImage = robot.createScreenCapture(captureRect);\n@@ -206,1 +213,1 @@\n-    private static void getIconBufferedImage() throws Exception {\n+    private static void getIconBufferedImage(String lookAndFeelString) throws Exception {\n@@ -209,1 +216,9 @@\n-        Rectangle captureRect = new Rectangle(\n+        Rectangle captureRect = null;\n+        if (lookAndFeelString.contains(\"Aqua\")) {\n+            captureRect = new Rectangle(\n+                    point.x + internalFrame.getInsets().left,\n+                    point.y + internalFrame.getInsets().top,\n+                    rect.width - internalFrame.getInsets().left - internalFrame.getInsets().right,\n+                    internalFrame.getInsets().top);\n+        } else {\n+            captureRect = new Rectangle(\n@@ -214,1 +229,1 @@\n-\n+        }\n@@ -216,2 +231,1 @@\n-        iconImage\n-                = robot.createScreenCapture(captureRect);\n+        iconImage = robot.createScreenCapture(captureRect);\n@@ -257,3 +271,1 @@\n-                    if ((Math.abs(red1 - red2) > colorTolerance)\n-                            || (Math.abs(green1 - green2) > colorTolerance)\n-                            || (Math.abs(blue1 - blue2) > colorTolerance)) {\n+                    if (red1 != red2 || green1 != green2 || blue1 != blue2) {\n@@ -261,4 +273,4 @@\n-                        System.out.println(\"x \" + x + \" y \" + y +\n-                           \" red1 \" + red1 + \" red2 \" + red2 +\n-                           \" green1 \" + green1 + \" green2 \" + green2 +\n-                           \" blue1 \" + blue1 + \" blue2 \" + blue2);\n+                        if ((Math.abs(red1 - red2) > colorTolerance)\n+                                || (Math.abs(green1 - green2) > colorTolerance)\n+                                || (Math.abs(blue1 - blue2) > colorTolerance)) {\n+\n@@ -266,0 +278,1 @@\n+                        }\n","filename":"test\/jdk\/javax\/swing\/JInternalFrame\/8146321\/JInternalFrameIconTest.java","additions":32,"deletions":19,"binary":false,"changes":51,"status":"modified"}]}