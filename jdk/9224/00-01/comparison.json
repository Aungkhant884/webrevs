{"files":[{"patch":"@@ -267,2 +267,2 @@\n-                final Path appOutput = testFile.getParent()\n-                        .resolve(HelloApp.OUTPUT_FILENAME);\n+                final Path testDir = testFile.getParent();\n+                final Path appOutput = testDir.resolve(HelloApp.OUTPUT_FILENAME);\n@@ -276,4 +276,19 @@\n-                    TKit.trace(String.format(\"Use cmd.exe to open [%s] file with arguments\",\n-                            testFile));\n-                    Executor.of(\"cmd\", \"\/c\", testFile.toString(), \"foo\", \"bar\", \"baz\").execute();\n-                    expectedArgs.addAll(List.of(\"foo\", \"bar\", \"baz\"));\n+                    \/\/ write a shortcut and open it with desktop\n+                    final Path createShortcutVbs = testDir.resolve(\"createShortcut.vbs\");\n+                    final Path shortcutLnk = testDir.resolve(\"shortcut.lnk\");\n+                    TKit.createTextFile(createShortcutVbs, List.of(\n+                            \"Dim sc, shell\",\n+                            \"Set shell = WScript.CreateObject (\\\"WScript.Shell\\\")\",\n+                            \"Set sc = shell.CreateShortcut (\\\"\" + shortcutLnk + \"\\\")\",\n+                            \"sc.TargetPath = \\\"\\\"\\\"\" + testFile + \"\\\"\\\"\\\"\",\n+                            \"sc.Arguments = \\\"foo \\\"\\\"bar baz\\\"\\\" boo\\\"\",\n+                            \"sc.WorkingDirectory = \\\"\\\"\\\"\" + testDir + \"\\\"\\\"\\\"\",\n+                            \"sc.Save()\"\n+                    ));\n+                    Executor.of(\"cscript\", \"\/nologo\", createShortcutVbs.toString())\n+                            .execute();\n+                    TKit.assertFileExists(shortcutLnk);\n+                    TKit.trace(String.format(\"Use desktop to open [%s] file\",\n+                            shortcutLnk));\n+                    expectedArgs.addAll(List.of(\"foo\", \"bar baz\", \"boo\"));\n+                    Desktop.getDesktop().open(shortcutLnk.toFile());\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/PackageTest.java","additions":21,"deletions":6,"binary":false,"changes":27,"status":"modified"}]}