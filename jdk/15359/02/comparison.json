{"files":[{"patch":"@@ -91,3 +91,2 @@\n-    \/\/ has been aborted for any reason. Yielded is set if there has been an actual\n-    \/\/ yield for a pause.\n-    bool yield_if_necessary(bool& yielded) {\n+    \/\/ has been aborted for any reason.\n+    bool yield_if_necessary() {\n@@ -96,1 +95,1 @@\n-        yielded = _cm->do_yield_check();\n+        _cm->do_yield_check();\n@@ -126,2 +125,1 @@\n-        bool yielded;\n-        bool mark_aborted = yield_if_necessary(yielded);\n+        bool mark_aborted = yield_if_necessary();\n@@ -130,1 +128,1 @@\n-        } else if (yielded && !should_rebuild_or_scrub(hr)) {\n+        } else if (!should_rebuild_or_scrub(hr)) {\n@@ -132,1 +130,1 @@\n-          \/\/ have been reclaimed during the yield.\n+          \/\/ have been reclaimed during above yield\/safepoint.\n@@ -195,2 +193,1 @@\n-        bool yielded;\n-        bool mark_aborted = yield_if_necessary(yielded);\n+        bool mark_aborted = yield_if_necessary();\n@@ -199,2 +196,3 @@\n-        } else if (yielded && !should_rebuild_or_scrub(hr)) {\n-          \/\/ Region has been reclaimed while yielding. Exit continuing with the next region.\n+        } else if (!should_rebuild_or_scrub(hr)) {\n+          \/\/ We need to check should_rebuild_or_scrub() again because the region might\n+          \/\/ have been reclaimed during above yield\/safepoint.\n@@ -215,2 +213,1 @@\n-        bool yielded = true;\n-        bool mark_aborted = yield_if_necessary(yielded);\n+        bool mark_aborted = yield_if_necessary();\n@@ -219,1 +216,3 @@\n-        } else if (yielded && !should_rebuild_or_scrub(hr)) {\n+        } else if (!should_rebuild_or_scrub(hr)) {\n+          \/\/ We need to check should_rebuild_or_scrub() again because the region might\n+          \/\/ have been reclaimed during above yield\/safepoint.\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentRebuildAndScrub.cpp","additions":14,"deletions":15,"binary":false,"changes":29,"status":"modified"}]}