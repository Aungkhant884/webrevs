{"files":[{"patch":"@@ -704,8 +704,0 @@\n-  $1_SANITIZER_DEFAULT_OPTIONS_PREFIX := $(TOPDIR)\/make\/src\/native\/\n-\n-  ifneq ($$(filter %.cpp %.cc, $$($1_SRCS)), )\n-    $1_SANITIZER_DEFAULT_OPTIONS_SUFFIX := .cpp\n-  else\n-    $1_SANITIZER_DEFAULT_OPTIONS_SUFFIX := .c\n-  endif\n-\n@@ -714,1 +706,8 @@\n-      $1_SRCS += $$($1_SANITIZER_DEFAULT_OPTIONS_PREFIX)__ubsan_default_options$$($1_SANITIZER_DEFAULT_OPTIONS_SUFFIX)\n+      # We need to set the default options for UBSan. This needs to be included in every executable.\n+      # Rather than copy and paste code to everything with a main function, we add an additional\n+      # source file to every executable that exports __ubsan_default_options.\n+      ifneq ($$(filter %.cpp %.cc, $$($1_SRCS)), )\n+        $1_SRCS += $(TOPDIR)\/make\/src\/native\/__ubsan_default_options.cpp\n+      else\n+        $1_SRCS += $(TOPDIR)\/make\/src\/native\/__ubsan_default_options.c\n+      endif\n","filename":"make\/common\/NativeCompilation.gmk","additions":8,"deletions":9,"binary":false,"changes":17,"status":"modified"}]}