{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,0 @@\n- * @author Alexander Potochkin\n@@ -35,1 +34,6 @@\n-import javax.swing.*;\n+import javax.swing.JFrame;\n+import javax.swing.JMenu;\n+import javax.swing.JMenuBar;\n+import javax.swing.JMenuItem;\n+import javax.swing.SwingUtilities;\n+import javax.swing.UIManager;\n@@ -37,1 +41,2 @@\n-import java.awt.*;\n+import java.awt.Point;\n+import java.awt.Robot;\n@@ -51,1 +56,1 @@\n-            if(systemLAF.endsWith(\"MotifLookAndFeel\")){\n+            if (systemLAF.endsWith(\"MotifLookAndFeel\")) {\n@@ -57,1 +62,2 @@\n-            robot.setAutoDelay(10);\n+            robot.setAutoWaitForIdle(true);\n+            robot.setAutoDelay(100);\n@@ -59,1 +65,1 @@\n-            SwingUtilities.invokeAndWait(new Runnable() {\n+            SwingUtilities.invokeAndWait(() -> createAndShowUI());\n@@ -61,4 +67,0 @@\n-                public void run() {\n-                    createAndShowUI();\n-                }\n-            });\n@@ -66,0 +68,1 @@\n+            robot.delay(1000);\n@@ -70,2 +73,2 @@\n-            robot.mousePress(InputEvent.BUTTON1_MASK);\n-            robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -73,0 +76,1 @@\n+            robot.delay(250);\n@@ -76,2 +80,2 @@\n-            robot.mousePress(InputEvent.BUTTON1_MASK);\n-            robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -79,0 +83,1 @@\n+            robot.delay(250);\n@@ -87,0 +92,1 @@\n+            robot.delay(250);\n@@ -91,0 +97,1 @@\n+                    System.out.println(\"Menu Location: \" + menu.getLocationOnScreen());\n@@ -99,0 +106,1 @@\n+                    System.out.println(\"MenuItem Location: \" + menuItem.getLocationOnScreen());\n@@ -109,2 +117,2 @@\n-            robot.mousePress(InputEvent.BUTTON1_MASK);\n-            robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -113,1 +121,1 @@\n-            robot.mousePress(InputEvent.BUTTON1_MASK);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n@@ -115,1 +123,1 @@\n-            robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n@@ -122,1 +130,5 @@\n-            if (frame != null) SwingUtilities.invokeAndWait(() -> frame.dispose());\n+            SwingUtilities.invokeAndWait(() -> {\n+                if (frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n@@ -154,1 +166,0 @@\n-\n","filename":"test\/jdk\/javax\/swing\/JMenuItem\/4654927\/bug4654927.java","additions":32,"deletions":21,"binary":false,"changes":53,"status":"modified"}]}