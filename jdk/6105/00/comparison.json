{"files":[{"patch":"@@ -1641,1 +1641,2 @@\n-  if (!is_loaded()) {\n+  \/\/ Redefined scratch classes are on the list and need to be cleaned\n+  if (!is_loaded() && !is_scratch_class()) {\n@@ -2685,1 +2686,0 @@\n-\n@@ -2689,3 +2689,0 @@\n-\n-  \/\/ Deallocate and call destructors for MDO mutexes\n-  methods_do(method_release_C_heap_structures);\n@@ -2694,0 +2691,1 @@\n+\/\/ Called also by InstanceKlass::deallocate_contents\n@@ -2701,0 +2699,3 @@\n+  \/\/ Deallocate and call destructors for MDO mutexes\n+  methods_do(method_release_C_heap_structures);\n+\n@@ -3991,2 +3992,0 @@\n-      \/\/ For debugging purposes.\n-      pv_node->set_is_scratch_class();\n@@ -4107,2 +4106,0 @@\n-    \/\/ For debugging purposes.\n-    scratch_class->set_is_scratch_class();\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":6,"deletions":9,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -4407,0 +4407,3 @@\n+  \/\/ Scratch class is unloaded but still needs cleaning, and skipping for CDS.\n+  scratch_class->set_is_scratch_class();\n+\n","filename":"src\/hotspot\/share\/prims\/jvmtiRedefineClasses.cpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}