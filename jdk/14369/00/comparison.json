{"files":[{"patch":"@@ -539,2 +539,1 @@\n-    *ckpLength = jArray == NULL ? 0L : (*env)->GetArrayLength(env, jArray);\n-    if(*ckpLength == 0L) {\n+    if (jArray == NULL) {\n@@ -542,0 +541,1 @@\n+        *ckpLength = 0UL;\n@@ -544,0 +544,1 @@\n+    *ckpLength = (*env)->GetArrayLength(env, jArray);\n@@ -545,1 +546,1 @@\n-    if (jpTemp == NULL) {\n+    if (jpTemp == NULL && *ckpLength != 0UL) {\n@@ -555,2 +556,2 @@\n-    *ckpArray = (CK_BBOOL*) calloc (*ckpLength, sizeof(CK_BBOOL));\n-    if (*ckpArray == NULL) {\n+    *ckpArray = (CK_BBOOL*) calloc(*ckpLength, sizeof(CK_BBOOL));\n+    if (*ckpArray == NULL && *ckpLength != 0UL) {\n@@ -580,2 +581,1 @@\n-    *ckpLength = jArray == NULL ? 0L : (*env)->GetArrayLength(env, jArray);\n-    if(*ckpLength == 0L) {\n+    if (jArray == NULL) {\n@@ -583,0 +583,1 @@\n+        *ckpLength = 0UL;\n@@ -585,0 +586,1 @@\n+    *ckpLength = (*env)->GetArrayLength(env, jArray);\n@@ -586,1 +588,1 @@\n-    if (jpTemp == NULL) {\n+    if (jpTemp == NULL && *ckpLength != 0UL) {\n@@ -600,2 +602,2 @@\n-        *ckpArray = (CK_BYTE_PTR) calloc (*ckpLength, sizeof(CK_BYTE));\n-        if (*ckpArray == NULL) {\n+        *ckpArray = (CK_BYTE_PTR) calloc(*ckpLength, sizeof(CK_BYTE));\n+        if (*ckpArray == NULL && *ckpLength != 0UL) {\n@@ -626,2 +628,1 @@\n-    *ckpLength = jArray == NULL ? 0L : (*env)->GetArrayLength(env, jArray);\n-    if(*ckpLength == 0L) {\n+    if (jArray == NULL) {\n@@ -629,0 +630,1 @@\n+        *ckpLength = 0UL;\n@@ -631,0 +633,1 @@\n+    *ckpLength = (*env)->GetArrayLength(env, jArray);\n@@ -632,1 +635,1 @@\n-    if (jTemp == NULL) {\n+    if (jTemp == NULL && *ckpLength != 0UL) {\n@@ -643,1 +646,1 @@\n-    if (*ckpArray == NULL) {\n+    if (*ckpArray == NULL && *ckpLength != 0UL) {\n@@ -667,2 +670,1 @@\n-    *ckpLength = jArray == NULL ? 0L : (*env)->GetArrayLength(env, jArray);\n-    if(*ckpLength == 0L) {\n+    if (jArray == NULL) {\n@@ -670,0 +672,1 @@\n+        *ckpLength = 0UL;\n@@ -672,0 +675,1 @@\n+    *ckpLength = (*env)->GetArrayLength(env, jArray);\n@@ -673,1 +677,1 @@\n-    if (jpTemp == NULL) {\n+    if (jpTemp == NULL && *ckpLength != 0UL) {\n@@ -683,2 +687,2 @@\n-    *ckpArray = (CK_CHAR_PTR) calloc (*ckpLength, sizeof(CK_CHAR));\n-    if (*ckpArray == NULL) {\n+    *ckpArray = (CK_CHAR_PTR) calloc(*ckpLength, sizeof(CK_CHAR));\n+    if (*ckpArray == NULL && *ckpLength != 0UL) {\n@@ -708,2 +712,1 @@\n-    *ckpLength = jArray == NULL ? 0L : (*env)->GetArrayLength(env, jArray);\n-    if(*ckpLength == 0L) {\n+    if (jArray == NULL) {\n@@ -711,0 +714,1 @@\n+        *ckpLength = 0UL;\n@@ -713,0 +717,1 @@\n+    *ckpLength = (*env)->GetArrayLength(env, jArray);\n@@ -714,1 +719,1 @@\n-    if (jTemp == NULL) {\n+    if (jTemp == NULL && *ckpLength != 0UL) {\n@@ -724,1 +729,1 @@\n-    if (*ckpArray == NULL) {\n+    if (*ckpArray == NULL && *ckpLength != 0UL) {\n@@ -795,1 +800,1 @@\n-    if (*ckpArray == NULL) {\n+    if (*ckpArray == NULL && *ckpLength != 0UL) {\n@@ -836,1 +841,1 @@\n-        if (jpTemp == NULL) {\n+        if (jpTemp == NULL && ckLength != 0UL) {\n@@ -870,1 +875,1 @@\n-    if (jpTemp == NULL) {\n+    if (jpTemp == NULL && ckLength != 0UL) {\n@@ -901,1 +906,1 @@\n-    if (jpTemp == NULL) {\n+    if (jpTemp == NULL && ckLength != 0UL) {\n@@ -932,1 +937,1 @@\n-    if (jpTemp == NULL) {\n+    if (jpTemp == NULL && ckLength != 0UL) {\n","filename":"src\/jdk.crypto.cryptoki\/share\/native\/libj2pkcs11\/p11_util.c","additions":33,"deletions":28,"binary":false,"changes":61,"status":"modified"},{"patch":"@@ -609,1 +609,1 @@\n-sun\/security\/pkcs11\/Signature\/TestRSAKeyLength.java             8295343,8309569 linux-all,macosx-x64,windows-x64\n+sun\/security\/pkcs11\/Signature\/TestRSAKeyLength.java             8295343 linux-all\n","filename":"test\/jdk\/ProblemList.txt","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}