{"files":[{"patch":"@@ -735,0 +735,2 @@\n+    VPOPCNTB_OPCODE= (4u  << OPCODE_SHIFT | 1795u     ),\n+    VPOPCNTH_OPCODE= (4u  << OPCODE_SHIFT | 1859u     ),\n@@ -736,0 +738,1 @@\n+    VPOPCNTD_OPCODE= (4u  << OPCODE_SHIFT | 1987u     ),\n@@ -2345,0 +2348,2 @@\n+  inline void vpopcntb( VectorRegister d, VectorRegister b);\n+  inline void vpopcnth( VectorRegister d, VectorRegister b);\n@@ -2346,0 +2351,1 @@\n+  inline void vpopcntd( VectorRegister d, VectorRegister b);\n","filename":"src\/hotspot\/cpu\/ppc\/assembler_ppc.hpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1023,0 +1023,2 @@\n+inline void Assembler::vpopcntb(VectorRegister d, VectorRegister b)                   { emit_int32( VPOPCNTB_OPCODE | vrt(d) | vrb(b)); }\n+inline void Assembler::vpopcnth(VectorRegister d, VectorRegister b)                   { emit_int32( VPOPCNTH_OPCODE | vrt(d) | vrb(b)); }\n@@ -1024,0 +1026,1 @@\n+inline void Assembler::vpopcntd(VectorRegister d, VectorRegister b)                   { emit_int32( VPOPCNTD_OPCODE | vrt(d) | vrb(b)); }\n","filename":"src\/hotspot\/cpu\/ppc\/assembler_ppc.inline.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -14101,1 +14101,1 @@\n-instruct vpopcnt4I_reg(vecX dst, vecX src) %{\n+instruct vpopcnt_reg(vecX dst, vecX src) %{\n@@ -14103,2 +14103,1 @@\n-  predicate(n->as_Vector()->length() == 4);\n-  format %{ \"VPOPCNTW $dst,$src\\t\/\/ pop count packed4I\" %}\n+  format %{ \"VPOPCNT $dst,$src\\t\/\/ pop count packed\" %}\n@@ -14107,1 +14106,17 @@\n-    __ vpopcntw($dst$$VectorSRegister->to_vr(), $src$$VectorSRegister->to_vr());\n+    BasicType bt = Matcher::vector_element_basic_type(this);\n+    switch (bt) {\n+      case T_BYTE:\n+        __ vpopcntb($dst$$VectorSRegister->to_vr(), $src$$VectorSRegister->to_vr());\n+        break;\n+      case T_SHORT:\n+        __ vpopcnth($dst$$VectorSRegister->to_vr(), $src$$VectorSRegister->to_vr());\n+        break;\n+      case T_INT:\n+        __ vpopcntw($dst$$VectorSRegister->to_vr(), $src$$VectorSRegister->to_vr());\n+        break;\n+      case T_DOUBLE:\n+        __ vpopcntd($dst$$VectorSRegister->to_vr(), $src$$VectorSRegister->to_vr());\n+        break;\n+      default:\n+        ShouldNotReachHere();\n+    }\n","filename":"src\/hotspot\/cpu\/ppc\/ppc.ad","additions":19,"deletions":4,"binary":false,"changes":23,"status":"modified"}]}