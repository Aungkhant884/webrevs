{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,3 +28,0 @@\n-import java.awt.GraphicsDevice;\n-import java.awt.GraphicsEnvironment;\n-import java.awt.Color;\n@@ -32,1 +29,0 @@\n-import java.awt.Rectangle;\n@@ -34,0 +30,2 @@\n+import java.awt.GraphicsDevice;\n+import java.awt.GraphicsEnvironment;\n@@ -35,1 +33,1 @@\n-import java.awt.color.ColorSpace;\n+import java.awt.Rectangle;\n@@ -37,1 +35,1 @@\n-import java.awt.image.BufferedImage;\n+import java.awt.color.ColorSpace;\n@@ -43,1 +41,0 @@\n-import java.awt.peer.ComponentPeer;\n@@ -49,1 +46,0 @@\n-import sun.awt.X11GraphicsEnvironment;\n@@ -57,1 +53,0 @@\n-import sun.java2d.loops.SurfaceType;\n@@ -59,1 +54,0 @@\n-import sun.java2d.loops.RenderLoops;\n@@ -61,0 +55,2 @@\n+import sun.java2d.loops.RenderLoops;\n+import sun.java2d.loops.SurfaceType;\n@@ -62,2 +58,0 @@\n-import sun.java2d.loops.Blit;\n-import sun.java2d.pipe.ValidatePipe;\n@@ -65,1 +59,0 @@\n-import sun.java2d.pipe.TextPipe;\n@@ -67,0 +60,2 @@\n+import sun.java2d.pipe.TextPipe;\n+import sun.java2d.pipe.ValidatePipe;\n@@ -414,1 +409,2 @@\n-                                                  int transparency)\n+                                                  int transparency,\n+                                                  boolean isTexture)\n@@ -418,1 +414,1 @@\n-                                        cm, drawable, transparency);\n+                                        cm, drawable, transparency, isTexture);\n@@ -702,1 +698,4 @@\n-    public static class X11WindowSurfaceData extends X11SurfaceData {\n+    private final static class X11WindowSurfaceData extends X11SurfaceData {\n+\n+        private final int scale;\n+\n@@ -707,0 +706,1 @@\n+            this.scale = gc.getDevice().getScaleFactor();\n@@ -719,0 +719,2 @@\n+            r.width *= scale;\n+            r.height *= scale;\n@@ -733,0 +735,10 @@\n+\n+        @Override\n+        public double getDefaultScaleX() {\n+            return scale;\n+        }\n+\n+        @Override\n+        public double getDefaultScaleY() {\n+            return scale;\n+        }\n@@ -735,1 +747,1 @@\n-    public static class X11PixmapSurfaceData extends X11SurfaceData {\n+    private final static class X11PixmapSurfaceData extends X11SurfaceData {\n@@ -737,4 +749,5 @@\n-        Image                   offscreenImage;\n-        int                     width;\n-        int                     height;\n-        int                     transparency;\n+        private final Image offscreenImage;\n+        private final int width;\n+        private final int height;\n+        private final int transparency;\n+        private final int scale;\n@@ -746,1 +759,2 @@\n-                                    long drawable, int transparency)\n+                                    long drawable, int transparency,\n+                                    boolean isTexture)\n@@ -749,2 +763,3 @@\n-            this.width = width;\n-            this.height = height;\n+            this.scale = isTexture ? 1 : gc.getDevice().getScaleFactor();\n+            this.width = width * scale;\n+            this.height = height * scale;\n@@ -753,1 +768,1 @@\n-            initSurface(depth, width, height, drawable);\n+            initSurface(depth, this.width, this.height, drawable);\n@@ -801,0 +816,10 @@\n+\n+        @Override\n+        public double getDefaultScaleX() {\n+            return scale;\n+        }\n+\n+        @Override\n+        public double getDefaultScaleY() {\n+            return scale;\n+        }\n","filename":"src\/java.desktop\/unix\/classes\/sun\/java2d\/x11\/X11SurfaceData.java","additions":51,"deletions":26,"binary":false,"changes":77,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,2 +29,0 @@\n-import java.awt.AlphaComposite;\n-import java.awt.GraphicsConfiguration;\n@@ -33,1 +31,0 @@\n-import java.awt.image.IndexColorModel;\n@@ -35,0 +32,1 @@\n+import java.awt.image.IndexColorModel;\n@@ -37,0 +35,1 @@\n+import sun.java2d.SunGraphics2D;\n@@ -39,2 +38,0 @@\n-import sun.java2d.SunGraphics2D;\n-import sun.java2d.loops.SurfaceType;\n@@ -109,1 +106,2 @@\n-                                                       null, 0, getTransparency());\n+                                                       null, 0,\n+                                                       getTransparency(), true);\n","filename":"src\/java.desktop\/unix\/classes\/sun\/java2d\/x11\/X11SurfaceDataProxy.java","additions":5,"deletions":7,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2007, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,0 +32,1 @@\n+\n@@ -96,1 +97,2 @@\n-                                              Transparency.OPAQUE);\n+                                              Transparency.OPAQUE,\n+                                              false);\n","filename":"src\/java.desktop\/unix\/classes\/sun\/java2d\/x11\/X11VolatileSurfaceManager.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"}]}