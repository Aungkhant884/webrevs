{"files":[{"patch":"@@ -404,6 +404,2 @@\n-  while (t < _num_tasks) {\n-    uint res = Atomic::cmpxchg(&_num_claimed, t, t+1);\n-    if (res == t) {\n-      return true;\n-    }\n-    t = res;\n+  if (t < _num_tasks) {\n+    t = Atomic::add(&_num_claimed, 1u) - 1;\n@@ -411,1 +407,1 @@\n-  return false;\n+  return t < _num_tasks;\n","filename":"src\/hotspot\/share\/gc\/shared\/workgroup.cpp","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -361,1 +361,2 @@\n-    assert(_num_claimed == _num_tasks, \"Claimed %u tasks of %u\", _num_claimed, _num_tasks);\n+    \/\/ Claiming may try to claim more tasks than there are.\n+    assert(_num_claimed >= _num_tasks, \"Claimed %u tasks of %u\", _num_claimed, _num_tasks);\n@@ -366,2 +367,2 @@\n-  \/\/ claimed task.  Returns false if there are no more unclaimed tasks\n-  \/\/ in the sequence.\n+  \/\/ claimed task. Returns false if there are no more unclaimed tasks\n+  \/\/ in the sequence. In this case t is undefined.\n","filename":"src\/hotspot\/share\/gc\/shared\/workgroup.hpp","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"}]}