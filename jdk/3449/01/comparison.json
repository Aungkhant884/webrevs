{"files":[{"patch":"@@ -162,1 +162,2 @@\n-void set_client_emulation_mode_flags() {\n+void CompilerConfig::set_client_emulation_mode_flags() {\n+  assert(has_c1(), \"Must have C1 compiler present\");\n@@ -563,1 +564,2 @@\n-  if (!is_compilation_mode_selected()) {\n+  if (has_c1()) {\n+    if (!is_compilation_mode_selected()) {\n@@ -565,3 +567,3 @@\n-    if (FLAG_IS_DEFAULT(NeverActAsServerClassMachine)) {\n-      FLAG_SET_ERGO(NeverActAsServerClassMachine, true);\n-    }\n+      if (FLAG_IS_DEFAULT(NeverActAsServerClassMachine)) {\n+        FLAG_SET_ERGO(NeverActAsServerClassMachine, true);\n+      }\n@@ -569,1 +571,4 @@\n-    if (NeverActAsServerClassMachine) {\n+      if (NeverActAsServerClassMachine) {\n+        set_client_emulation_mode_flags();\n+      }\n+    } else if (!has_c2() && !is_jvmci_compiler()) {\n@@ -572,2 +577,0 @@\n-  } else if (!has_c2() && !is_jvmci_compiler()) {\n-    set_client_emulation_mode_flags();\n","filename":"src\/hotspot\/share\/compiler\/compilerDefinitions.cpp","additions":11,"deletions":8,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -249,0 +249,1 @@\n+  static void set_client_emulation_mode_flags();\n","filename":"src\/hotspot\/share\/compiler\/compilerDefinitions.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}