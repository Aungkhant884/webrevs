{"files":[{"patch":"@@ -50,0 +50,14 @@\n+\/\/ The following list contains the (approximate) announcement\/availability\n+\/\/ dates of the many System z generations in existence as of now.\n+\/\/ Information compiled from https:\/\/www.ibm.com\/support\/techdocs\/atsmastr.nsf\/WebIndex\/TD105503\n+\/\/   z900: 2000-10\n+\/\/   z990: 2003-06\n+\/\/   z9:   2005-09\n+\/\/   z10:  2007-04\n+\/\/   z10:  2008-02\n+\/\/   z196: 2010-08\n+\/\/   ec12: 2012-09\n+\/\/   z13:  2015-03\n+\/\/   z14:  2017-09\n+\/\/   z15:  2019-09\n+\n@@ -277,1 +291,1 @@\n-  _model_string = z_name[0];\n+  unsigned int model_ix  = 0;\n@@ -280,1 +294,1 @@\n-    _model_string = z_name[9];\n+    model_ix = 9;\n@@ -285,1 +299,1 @@\n-    _model_string = z_name[8];\n+    model_ix = 8;\n@@ -290,1 +304,1 @@\n-    _model_string = z_name[7];\n+    model_ix = 7;\n@@ -295,1 +309,1 @@\n-    _model_string = z_name[6];\n+    model_ix = 6;\n@@ -299,2 +313,2 @@\n-    _features_string = \"system-z, g5-z196, ldisp_fast, extimm, pcrel_load\/store, cmpb, cond_load\/store, interlocked_update, out-of-support_as_of_2021-12-31\";\n-    _model_string = z_name[5];\n+    _features_string = \"system-z, g5-z196, ldisp_fast, extimm, pcrel_load\/store, cmpb, cond_load\/store, interlocked_update\";\n+    model_ix = 5;\n@@ -304,2 +318,2 @@\n-    _features_string = \"system-z, g4-z10, ldisp_fast, extimm, pcrel_load\/store, cmpb, out-of-support_as_of_2019-12-31\";\n-    _model_string = z_name[4];\n+    _features_string = \"system-z, g4-z10, ldisp_fast, extimm, pcrel_load\/store, cmpb\";\n+    model_ix = 4;\n@@ -309,2 +323,2 @@\n-    _features_string = \"system-z, g3-z9, ldisp_fast, extimm, out-of-support_as_of_2016-04-01\";\n-    _model_string = z_name[3];\n+    _features_string = \"system-z, g3-z9, ldisp_fast, extimm\";\n+    model_ix = 3;\n@@ -314,2 +328,2 @@\n-    _features_string = \"system-z, g2-z990, ldisp_fast, out-of-support_as_of_2014-07-01\";\n-    _model_string = z_name[2];\n+    _features_string = \"system-z, g2-z990, ldisp_fast\";\n+    model_ix = 2;\n@@ -319,2 +333,2 @@\n-    _features_string = \"system-z, g1-z900, ldisp, out-of-support_as_of_2014-07-01\";\n-    _model_string = z_name[1];\n+    _features_string = \"system-z, g1-z900, ldisp\";\n+    model_ix = 1;\n@@ -324,0 +338,1 @@\n+  char buf[512];\n@@ -325,1 +340,4 @@\n-    _features_string = \"z\/Architecture (unknown generation)\";\n+    strcpy(buf, \"z\/Architecture (unknown generation)\");\n+  } else if (ambiguity == 1) {\n+    _model_string = z_name[model_ix];\n+    jio_snprintf(buf, sizeof(buf), \"%s, out-of-support_as_of_\", _features_string, z_EOS[model_ix]);\n@@ -329,1 +347,1 @@\n-    _features_string = \"z\/Architecture (ambiguous detection)\";\n+    strcpy(buf, \"z\/Architecture (ambiguous detection)\");\n@@ -331,0 +349,1 @@\n+  _features_string = os::strdup(buf);\n@@ -333,1 +352,0 @@\n-    char buf[256];\n@@ -340,0 +358,1 @@\n+    os::free((void *)_features_string);\n@@ -344,1 +363,0 @@\n-    char buf[256];\n@@ -352,1 +370,1 @@\n-    if (has_Crypto_AES()) { os::free((void *)_features_string); }\n+    os::free((void *)_features_string);\n","filename":"src\/hotspot\/cpu\/s390\/vm_version_s390.cpp","additions":38,"deletions":20,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -36,14 +36,0 @@\n-\/\/ The following list contains the (approximate) announcement\/availability\n-\/\/ dates of the many System z generations in existence as of now which\n-\/\/ implement the z\/Architecture.\n-\/\/   z900: 2000-10\n-\/\/   z990: 2003-06\n-\/\/   z9:   2005-09\n-\/\/   z10:  2007-04\n-\/\/   z10:  2008-02\n-\/\/   z196: 2010-08\n-\/\/   ec12: 2012-09\n-\/\/   z13:  2015-03\n-\/\/   z14:  2017-09\n-\/\/   z15:  2019-09\n-\/\/\n@@ -53,0 +39,4 @@\n+\/\/ For information concerning the life span of the individual\n+\/\/ z\/Architecture models, please check out the comments\/tables\n+\/\/ in vm_version_s390.cpp\n+\n","filename":"src\/hotspot\/cpu\/s390\/vm_version_s390.hpp","additions":4,"deletions":14,"binary":false,"changes":18,"status":"modified"}]}