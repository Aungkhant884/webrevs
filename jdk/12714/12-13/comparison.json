{"files":[{"patch":"@@ -43,1 +43,1 @@\n-    private ScriptEngine engine;\n+    private final ScriptEngine engine;\n@@ -63,1 +63,0 @@\n-        fireChangedEvent();\n@@ -68,1 +67,0 @@\n-        fireChangedEvent();\n@@ -73,7 +71,1 @@\n-        return new OpenCookie() {\n-\n-            @Override\n-            public void open() {\n-                openInEditor();\n-            }\n-        };\n+        return this::openInEditor;\n@@ -85,3 +77,5 @@\n-        boolean result = dialog.wasAccepted();\n-        this.getChangedEvent().fire();\n-        return result;\n+        boolean accepted = dialog.wasAccepted();\n+        if (accepted) {\n+            getChangedEvent().fire();\n+        }\n+        return accepted;\n","filename":"src\/utils\/IdealGraphVisualizer\/Filter\/src\/main\/java\/com\/sun\/hotspot\/igv\/filter\/CustomFilter.java","additions":7,"deletions":13,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -84,1 +84,1 @@\n-    private final ChangedEvent<FilterTopComponent> filterSettingsChangedEvent;\n+    private final ChangedEvent<FilterTopComponent> filterSettingsChangedEvent = new ChangedEvent<>(this);\n@@ -125,1 +125,0 @@\n-        filterSettingsChangedEvent = new ChangedEvent<>(this);\n@@ -209,1 +208,0 @@\n-        comboBoxSelectionChanged();\n","filename":"src\/utils\/IdealGraphVisualizer\/FilterWindow\/src\/main\/java\/com\/sun\/hotspot\/igv\/filterwindow\/FilterTopComponent.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -640,1 +640,0 @@\n-        update();\n","filename":"src\/utils\/IdealGraphVisualizer\/View\/src\/main\/java\/com\/sun\/hotspot\/igv\/view\/DiagramScene.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -73,1 +73,4 @@\n-    private final ChangedListener<FilterChain> filterChainChangedListener = source -> filterChanged();\n+    private final ChangedListener<FilterChain> filterChainChangedListener = changedFilterChain -> {\n+        assert filterChain == changedFilterChain;\n+        rebuildDiagram();\n+    };\n@@ -188,1 +191,1 @@\n-        setFilterChain(model.getFilterChain(), customFilterChain);\n+        setFilterChain(model.getFilterChain());\n@@ -211,1 +214,1 @@\n-        setFilterChain(provider.getFilterChain(), customFilterChain);\n+        setFilterChain(provider.getFilterChain());\n@@ -326,1 +329,2 @@\n-    private void setFilterChain(FilterChain newFC, FilterChain customFC) {\n+    private void setFilterChain(FilterChain newFC) {\n+        assert newFC != null && customFilterChain != null;\n@@ -330,2 +334,2 @@\n-        if (newFC.getName().equals(customFC.getName())) {\n-            filterChain = customFC;\n+        if (newFC.getName().equals(customFilterChain.getName())) {\n+            filterChain = customFilterChain;\n@@ -347,2 +351,2 @@\n-                setFilterChain(provider.getFilterChain(), customFilterChain);\n-                filterChanged();\n+                setFilterChain(provider.getFilterChain());\n+                rebuildDiagram();\n@@ -353,8 +357,0 @@\n-    \/\/ called when the filter in filterChain changed, but not filterChain itself\n-    private void filterChanged() {\n-        FilterChainProvider provider = Lookup.getDefault().lookup(FilterChainProvider.class);\n-        assert provider == null || (filterChain == provider.getFilterChain());\n-        rebuildDiagram();\n-        diagramChangedEvent.fire();\n-    }\n-\n@@ -362,0 +358,1 @@\n+        System.out.println(getGraph().getDisplayName() + \" removeListener to \" + filterChain.getName());\n@@ -379,0 +376,1 @@\n+        diagram.setCFG(getShowCFG());\n@@ -388,0 +386,1 @@\n+        diagramChangedEvent.fire();\n@@ -474,1 +473,0 @@\n-        diagram.setCFG(getShowCFG());\n","filename":"src\/utils\/IdealGraphVisualizer\/View\/src\/main\/java\/com\/sun\/hotspot\/igv\/view\/DiagramViewModel.java","additions":15,"deletions":17,"binary":false,"changes":32,"status":"modified"}]}