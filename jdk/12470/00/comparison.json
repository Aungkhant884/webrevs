{"files":[{"patch":"@@ -171,1 +171,1 @@\n-int CodeCache::_number_of_nmethods_with_dependencies = 0;\n+volatile int CodeCache::_number_of_nmethods_with_dependencies = 0;\n@@ -590,1 +590,1 @@\n-      _number_of_nmethods_with_dependencies--;\n+      Atomic::dec(&_number_of_nmethods_with_dependencies);\n@@ -625,1 +625,1 @@\n-      _number_of_nmethods_with_dependencies++;\n+      Atomic::inc(&_number_of_nmethods_with_dependencies);\n@@ -1222,2 +1222,2 @@\n-int CodeCache::number_of_nmethods_with_dependencies() {\n-  return _number_of_nmethods_with_dependencies;\n+bool CodeCache::have_nmethods_with_dependencies() {\n+  return Atomic::load_acquire(&_number_of_nmethods_with_dependencies) != 0;\n@@ -1434,1 +1434,3 @@\n-  if (number_of_nmethods_with_dependencies() == 0) return;\n+  if (!have_nmethods_with_dependencies()) {\n+    return;\n+  }\n","filename":"src\/hotspot\/share\/code\/codeCache.cpp","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -96,3 +96,3 @@\n-  static address _low_bound;                            \/\/ Lower bound of CodeHeap addresses\n-  static address _high_bound;                           \/\/ Upper bound of CodeHeap addresses\n-  static int _number_of_nmethods_with_dependencies;     \/\/ Total number of nmethods with dependencies\n+  static address _low_bound;                                 \/\/ Lower bound of CodeHeap addresses\n+  static address _high_bound;                                \/\/ Upper bound of CodeHeap addresses\n+  static volatile int _number_of_nmethods_with_dependencies; \/\/ Total number of nmethods with dependencies\n@@ -326,2 +326,2 @@\n-  \/\/ tells how many nmethods have dependencies\n-  static int number_of_nmethods_with_dependencies();\n+  \/\/ tells if there are nmethods with dependencies\n+  static bool have_nmethods_with_dependencies();\n","filename":"src\/hotspot\/share\/code\/codeCache.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"}]}