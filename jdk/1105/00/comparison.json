{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,1 +42,1 @@\n-    public static void main(String[] args)\n+    public static void main(String[] args) throws Exception\n@@ -52,0 +52,1 @@\n+            child.setName(\"window_\" +  i);\n@@ -73,3 +74,4 @@\n-            if (ref.get() != null)\n-            {\n-                throw new RuntimeException(\"Test FAILED: some of child windows are not GCed\");\n+            while (ref.get() != null) {\n+                System.out.println(\"ref.get() = \" + ref.get());\n+                System.gc();\n+                Thread.sleep(1000);\n@@ -80,16 +82,4 @@\n-        try\n-        {\n-            Field f = Window.class.getDeclaredField(\"ownedWindowList\");\n-            f.setAccessible(true);\n-            Vector ownersChildren = (Vector)f.get(owner);\n-            if (ownersChildren.size() > 0)\n-            {\n-                throw new RuntimeException(\"Test FAILED: some of the child windows are not removed from owner's children list\");\n-            }\n-        }\n-        catch (NoSuchFieldException z)\n-        {\n-            System.out.println(\"Test PASSED: no 'ownedWindowList' field in Window class\");\n-            return;\n-        }\n-        catch (Exception z)\n+        Field f = Window.class.getDeclaredField(\"ownedWindowList\");\n+        f.setAccessible(true);\n+        Vector ownersChildren = (Vector)f.get(owner);\n+        while (ownersChildren.size() > 0)\n@@ -97,1 +87,3 @@\n-            throw new RuntimeException(\"Test FAILED: unexpected exception\", z);\n+            System.out.println(\"ownersChildren = \" + ownersChildren);\n+            System.gc();\n+            Thread.sleep(1000);\n","filename":"test\/jdk\/java\/awt\/Window\/OwnedWindowsLeak\/OwnedWindowsLeak.java","additions":14,"deletions":22,"binary":false,"changes":36,"status":"modified"}]}