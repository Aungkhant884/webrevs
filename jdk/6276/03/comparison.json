{"files":[{"patch":"@@ -2275,0 +2275,1 @@\n+        assert(igvn != NULL, \"sanity check\");\n@@ -2278,4 +2279,3 @@\n-        if (igvn) {\n-          igvn->register_new_node_with_optimizer(new_base);\n-          hook->add_req(new_base);\n-        }\n+        igvn->register_new_node_with_optimizer(new_base);\n+        hook->add_req(new_base);\n+\n@@ -2293,4 +2293,2 @@\n-                if (igvn) {\n-                  igvn->register_new_node_with_optimizer(new_phi);\n-                  hook->add_req(new_phi);\n-                }\n+                igvn->register_new_node_with_optimizer(new_phi);\n+                hook->add_req(new_phi);\n@@ -2314,0 +2312,7 @@\n+        \/\/ Already replace this phi node to cut it off from the graph to not interfere in dead loop checks during the\n+        \/\/ transformations of the new phi nodes below. Otherwise, we could wrongly conclude that there is no dead loop\n+        \/\/ because we are finding this phi node again. Also set the type of the new MergeMem node in case we are also\n+        \/\/ visiting it in the transformations below.\n+        igvn->replace_node(this, result);\n+        igvn->set_type(result, result->bottom_type());\n+\n","filename":"src\/hotspot\/share\/opto\/cfgnode.cpp","additions":13,"deletions":8,"binary":false,"changes":21,"status":"modified"}]}