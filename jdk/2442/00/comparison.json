{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -43,1 +43,1 @@\n- * @LastModified: Aug 2019\n+ * @LastModified: Feb 2021\n@@ -174,1 +174,1 @@\n-                    if (m_doIndent) {\n+                    if (m_doIndent || m_isStandalone) {\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/xml\/internal\/serializer\/ToXMLStream.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -220,3 +220,1 @@\n- * after the XML declaration when the property\n- * {@link org.w3c.dom.ls.LSSerializer#getDomConfig() format-pretty-print} is set\n- * to true. Unlike the property\n+ * after the XML declaration. Unlike the property\n","filename":"src\/java.xml\/share\/classes\/module-info.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -69,1 +69,1 @@\n- * @bug 6439439 8087303 8174025 8223291 8249867\n+ * @bug 6439439 8087303 8174025 8223291 8249867 8261209\n@@ -81,0 +81,1 @@\n+    \/\/ pretty-print=true, isStandalone=true, linebreak added after header\n@@ -83,1 +84,2 @@\n-    private static final String XML_NOLB\n+    \/\/ pretty-print=true, isStandalone=false, no linebreak after header\n+    private static final String XML_PPTRUE_NOLB\n@@ -85,1 +87,3 @@\n-\n+    \/\/ pretty-print=false, isStandalone=true, linebreak added after header\n+    private static final String XML_PPFALSE_LB\n+            = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n<sometag\/>\";\n@@ -104,1 +108,1 @@\n-     * Data columns: property, system property, value, expected result\n+     * Data columns: pretty-print, property, system property, value, expected result\n@@ -109,5 +113,11 @@\n-            {false, true, true, XML_LB},   \/\/set System property\n-            {false, true, false, XML_NOLB},\/\/set System property\n-            {true, false, true, XML_LB},   \/\/set property\n-            {true, false, false, XML_NOLB},\/\/set property\n-            {false, false, false, XML_NOLB} \/\/default\n+            \/\/ pretty-print = true\n+            {true, false, true, true, XML_LB},       \/\/set System property = true\n+            {true, false, true, false, XML_PPTRUE_NOLB}, \/\/set System property = false\n+            {true, true, false, true, XML_LB},       \/\/set property = true\n+            {true, true, false, false, XML_PPTRUE_NOLB}, \/\/set property = false\n+            {true, false, false, false, XML_PPTRUE_NOLB},\/\/default\n+\n+            \/\/ pretty-print = false\n+            {false, false, true, true, XML_PPFALSE_LB}, \/\/System property = true\n+            {false, true, false, true, XML_PPFALSE_LB}, \/\/set property = true\n+\n@@ -137,0 +147,4 @@\n+     *\n+     * Bug: 8261209\n+     * Verifies that the property takes effect regardless of the settings of\n+     * property \"pretty-print\".\n@@ -139,1 +153,2 @@\n-    public void test(boolean p, boolean sp, boolean val, String expected)\n+    public void testIsStandalone_DOMLS(boolean pretty, boolean p, boolean sp,\n+            boolean val, String expected)\n@@ -147,1 +162,4 @@\n-        ser.getDomConfig().setParameter(\"format-pretty-print\", true);\n+        DOMConfiguration config = ser.getDomConfig();\n+        if (pretty) {\n+            config.setParameter(\"format-pretty-print\", true);\n+        }\n@@ -149,1 +167,1 @@\n-            ser.getDomConfig().setParameter(JDK_IS_STANDALONE, val);\n+            config.setParameter(JDK_IS_STANDALONE, val);\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/prettyprint\/PrettyPrintTest.java","additions":30,"deletions":12,"binary":false,"changes":42,"status":"modified"}]}