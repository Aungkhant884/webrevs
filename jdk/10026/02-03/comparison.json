{"files":[{"patch":"@@ -1081,12 +1081,11 @@\n-    private void centerRectangle(Rectangle rect) {\n-        Rectangle oldViewRect = this.convertSceneToView(rect);\n-        \/\/ calculate the center\n-        Point zoomCenter = new Point(oldViewRect.width \/ 2, oldViewRect.height \/ 2);\n-        Point oldViewCenter = this.convertSceneToView(zoomCenter);\n-\n-        double factorWidth = getScrollPane().getViewport().getViewRect().getWidth() \/ oldViewRect.getWidth() ;\n-        double factorHeight = getScrollPane().getViewport().getViewRect().getHeight() \/ oldViewRect.getHeight();\n-        double zoomFactor = Math.min(factorWidth, factorHeight);\n-        if (zoomFactor < 1.0) {\n-            this.setZoomFactor(getZoomFactor() * zoomFactor);\n-            this.validate();\n+    private void centerRectangle(Rectangle r) {\n+        Rectangle rect = convertSceneToView(r);\n+        Rectangle viewRect = getScrollPane().getViewport().getViewRect();\n+\n+        double factor = Math.min(viewRect.getWidth() \/ rect.getWidth(),  viewRect.getHeight() \/ rect.getHeight());\n+        if (factor < 1.0) {\n+            setZoomFactor(getZoomFactor() * factor);\n+            rect.x *= factor;\n+            rect.y *= factor;\n+            rect.width *= factor;\n+            rect.height *= factor;\n@@ -1094,8 +1093,11 @@\n-        Point newViewCenter = this.convertSceneToView(zoomCenter);\n-        Rectangle newVisibleRect = new Rectangle (\n-                newViewCenter.x - (oldViewCenter.x - oldViewRect.x),\n-                newViewCenter.y - (oldViewCenter.y - oldViewRect.y),\n-                oldViewRect.width,\n-                oldViewRect.height\n-        );\n-        this.getView().scrollRectToVisible(newVisibleRect);\n+\n+        viewRect.x = rect.x + rect.width \/ 2 - viewRect.width \/ 2;\n+        viewRect.y = rect.y + rect.height \/ 2 - viewRect.height \/ 2;\n+\n+        \/\/ Ensure to be within area\n+        viewRect.x = Math.max(0, viewRect.x);\n+        viewRect.x = Math.min(getScrollPane().getViewport().getViewSize().width - viewRect.width, viewRect.x);\n+        viewRect.y = Math.max(0, viewRect.y);\n+        viewRect.y = Math.min(getScrollPane().getViewport().getViewSize().height - viewRect.height, viewRect.y);\n+\n+        this.getView().scrollRectToVisible(viewRect);\n","filename":"src\/utils\/IdealGraphVisualizer\/View\/src\/main\/java\/com\/sun\/hotspot\/igv\/view\/DiagramScene.java","additions":22,"deletions":20,"binary":false,"changes":42,"status":"modified"}]}