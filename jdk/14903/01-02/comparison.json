{"files":[{"patch":"@@ -313,0 +313,15 @@\n+  const size_t ps = page_size(false, 8);\n+  \/\/ Print warning if using large pages but not able to use the size given\n+  if (UseLargePages) {\n+    if (ps < LargePageSizeInBytes) {\n+      char msg[256];\n+      jio_snprintf(msg, sizeof(msg),\n+                   \"Failed to reserve large page memory for code cache (\" SIZE_FORMAT \"%s). \"\n+                   \"Reverting to smaller page size (\" SIZE_FORMAT \"%s).\",\n+                   byte_size_in_exact_unit(LargePageSizeInBytes), exact_unit_for_byte_size(LargePageSizeInBytes),\n+                   byte_size_in_exact_unit(ps), exact_unit_for_byte_size(ps));\n+      log_warning(codecache)(\"%s\", msg);\n+      warning(\"%s\", msg);\n+    };\n+  }\n+\n@@ -315,1 +330,0 @@\n-  const size_t ps = page_size(false, 8);\n@@ -360,13 +374,0 @@\n-  if (UseLargePages) {\n-    const size_t ps = page_size();\n-    if (rs_ps < ps) {\n-      char msg[256];\n-      jio_snprintf(msg, sizeof(msg),\n-                   \"Failed to reserve large page memory for code cache (\" SIZE_FORMAT \"%s). \"\n-                   \"Reverting to smaller page size (\" SIZE_FORMAT \"%s).\",\n-                   byte_size_in_exact_unit(ps), exact_unit_for_byte_size(ps),\n-                   byte_size_in_exact_unit(rs_ps), exact_unit_for_byte_size(rs_ps));\n-      log_warning(codecache)(\"%s\", msg);\n-      warning(\"%s\", msg);\n-    };\n-  }\n","filename":"src\/hotspot\/share\/code\/codeCache.cpp","additions":15,"deletions":14,"binary":false,"changes":29,"status":"modified"}]}