{"files":[{"patch":"@@ -285,3 +285,3 @@\n-         \"48-bit overflow in address constant\");\n-  \/\/ Load upper 32 bits\n-  int32_t imm = imm64 >> 16;\n+         \"bit 47 overflows in address constant\");\n+  \/\/ Load upper 31 bits\n+  int32_t imm = imm64 >> 17;\n@@ -295,1 +295,1 @@\n-  \/\/ Load the rest 16 bits.\n+  \/\/ Load the rest 17 bits.\n@@ -297,2 +297,2 @@\n-  addi(Rd, Rd, (imm64 >> 5) & 0x7ff);\n-  slli(Rd, Rd, 5);\n+  addi(Rd, Rd, (imm64 >> 6) & 0x7ff);\n+  slli(Rd, Rd, 6);\n@@ -301,1 +301,1 @@\n-  offset = imm64 & 0x1f;\n+  offset = imm64 & 0x3f;\n","filename":"src\/hotspot\/cpu\/riscv\/assembler_riscv.cpp","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -76,1 +76,1 @@\n-  { 0xffffffff, 0x00529293, \"slli   t0, t0, 5       \"},\n+  { 0xffffffff, 0x00629293, \"slli   t0, t0, 6       \"},\n","filename":"src\/hotspot\/cpu\/riscv\/gc\/shared\/barrierSetNMethod_riscv.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1184,2 +1184,2 @@\n-  int32_t lower = ((intptr_t)target << 36) >> 36;\n-  int64_t upper = ((intptr_t)target - lower) >> 28;\n+  int32_t lower = ((intptr_t)target << 35) >> 35;\n+  int64_t upper = ((intptr_t)target - lower) >> 29;\n@@ -1187,3 +1187,3 @@\n-  Assembler::patch(branch + 4,  31, 20, (lower >> 16) & 0xfff);                 \/\/ Addi.            target[27:16] ==> branch[31:20]\n-  Assembler::patch(branch + 12, 31, 20, (lower >> 5) & 0x7ff);                  \/\/ Addi.            target[15: 5] ==> branch[31:20]\n-  Assembler::patch(branch + 20, 31, 20, lower & 0x1f);                          \/\/ Addi\/Jalr\/Load.  target[ 4: 0] ==> branch[31:20]\n+  Assembler::patch(branch + 4,  31, 20, (lower >> 17) & 0xfff);                 \/\/ Addi.            target[27:16] ==> branch[31:20]\n+  Assembler::patch(branch + 12, 31, 20, (lower >> 6) & 0x7ff);                  \/\/ Addi.            target[15: 5] ==> branch[31:20]\n+  Assembler::patch(branch + 20, 31, 20, lower & 0x3f);                          \/\/ Addi\/Jalr\/Load.  target[ 4: 0] ==> branch[31:20]\n@@ -1261,3 +1261,3 @@\n-  intptr_t target_address = (((int64_t)Assembler::sextract(((unsigned*)insn_addr)[0], 31, 12)) & 0xfffff) << 28;    \/\/ Lui.\n-  target_address += ((int64_t)Assembler::sextract(((unsigned*)insn_addr)[1], 31, 20)) << 16;                        \/\/ Addi.\n-  target_address += ((int64_t)Assembler::sextract(((unsigned*)insn_addr)[3], 31, 20)) << 5;                         \/\/ Addi.\n+  intptr_t target_address = (((int64_t)Assembler::sextract(((unsigned*)insn_addr)[0], 31, 12)) & 0xfffff) << 29;    \/\/ Lui.\n+  target_address += ((int64_t)Assembler::sextract(((unsigned*)insn_addr)[1], 31, 20)) << 17;                        \/\/ Addi.\n+  target_address += ((int64_t)Assembler::sextract(((unsigned*)insn_addr)[3], 31, 20)) << 6;                         \/\/ Addi.\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -818,1 +818,2 @@\n-    return ((uintptr_t)addr >> 48) == 0;\n+    \/\/ sv48: must have bits 63â€“48 all equal to bit 47\n+    return ((uintptr_t)addr >> 47) == 0;\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -92,1 +92,1 @@\n-         is_slli_shift_at(instr + instruction_size * 4, 5) && \/\/ Slli Rd, Rs, 5\n+         is_slli_shift_at(instr + instruction_size * 4, 6) && \/\/ Slli Rd, Rs, 6\n","filename":"src\/hotspot\/cpu\/riscv\/nativeInst_riscv.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}