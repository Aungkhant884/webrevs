{"files":[{"patch":"@@ -35,1 +35,1 @@\n-import java.util.Hashtable;\n+import java.util.*;\n@@ -40,5 +40,0 @@\n-import java.util.Iterator;\n-import java.util.Locale;\n-import java.util.NoSuchElementException;\n-import java.util.ServiceConfigurationError;\n-import java.util.ServiceLoader;\n@@ -443,1 +438,1 @@\n-        protocol = toLowerCase(protocol);\n+        protocol = lowerCaseProtocol(protocol);\n@@ -636,1 +631,1 @@\n-                    String s = toLowerCase(spec.substring(start, i));\n+                    String s = lowerCaseProtocol(spec.substring(start, i));\n@@ -1387,3 +1382,7 @@\n-    static String toLowerCase(String protocol) {\n-        if (protocol.equals(\"jrt\") || protocol.equals(\"file\") || protocol.equals(\"jar\")) {\n-            return protocol;\n+    static String lowerCaseProtocol(String protocol) {\n+        if (protocol.equals(\"jrt\")) {\n+            return \"jrt\";\n+        } else if (protocol.equals(\"file\")) {\n+            return \"file\";\n+        } else if (protocol.equals(\"jar\")) {\n+            return \"jar\";\n","filename":"src\/java.base\/share\/classes\/java\/net\/URL.java","additions":10,"deletions":11,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -46,0 +46,1 @@\n+\n@@ -1095,1 +1096,1 @@\n-        protocol = protocol.toLowerCase(Locale.US);\n+        protocol = URL.lowerCaseProtocol(protocol);\n@@ -1111,1 +1112,1 @@\n-        Boolean protoDefault = defaultCaching.get(protocol.toLowerCase(Locale.US));\n+        Boolean protoDefault = defaultCaching.get(URL.lowerCaseProtocol(protocol));\n","filename":"src\/java.base\/share\/classes\/java\/net\/URLConnection.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+import java.util.Locale;\n@@ -52,2 +53,8 @@\n-            \/* protocol is compared case-insensitive, so convert to lowercase *\/\n-            protocol = protocol.toLowerCase();\n+            \/* protocol is compared case-insensitive, so convert to lowercase\n+             * if needed. URL will store from lower-cased String literals for\n+             * built-in protocols, so avoid calling toLowerCase for these and\n+             * use identity tests for speed\n+             *\/\n+            if (protocol != \"file\" && protocol != \"jrt\" && protocol != \"jar\") {\n+                protocol = protocol.toLowerCase();\n+            }\n@@ -61,2 +68,3 @@\n-            host = host.toLowerCase();\n-            strForm.append(host);\n+            if (!host.isEmpty()) {\n+                strForm.append(host.toLowerCase());\n+            }\n","filename":"src\/java.base\/share\/classes\/sun\/net\/util\/URLUtil.java","additions":12,"deletions":4,"binary":false,"changes":16,"status":"modified"}]}