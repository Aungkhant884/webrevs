{"files":[{"patch":"@@ -443,1 +443,1 @@\n-        protocol = toLowerCase(protocol);\n+        protocol = lowerCaseProtocol(protocol);\n@@ -636,1 +636,1 @@\n-                    String s = toLowerCase(spec.substring(start, i));\n+                    String s = lowerCaseProtocol(spec.substring(start, i));\n@@ -1387,3 +1387,7 @@\n-    static String toLowerCase(String protocol) {\n-        if (protocol.equals(\"jrt\") || protocol.equals(\"file\") || protocol.equals(\"jar\")) {\n-            return protocol;\n+    static String lowerCaseProtocol(String protocol) {\n+        if (protocol.equals(\"jrt\")) {\n+            return \"jrt\";\n+        } else if (protocol.equals(\"file\")) {\n+            return \"file\";\n+        } else if (protocol.equals(\"jar\")) {\n+            return \"jar\";\n","filename":"src\/java.base\/share\/classes\/java\/net\/URL.java","additions":9,"deletions":5,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -1095,1 +1095,1 @@\n-        protocol = protocol.toLowerCase(Locale.US);\n+        protocol = URL.lowerCaseProtocol(protocol);\n@@ -1111,1 +1111,1 @@\n-        Boolean protoDefault = defaultCaching.get(protocol.toLowerCase(Locale.US));\n+        Boolean protoDefault = defaultCaching.get(URL.lowerCaseProtocol(protocol));\n","filename":"src\/java.base\/share\/classes\/java\/net\/URLConnection.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -52,2 +52,8 @@\n-            \/* protocol is compared case-insensitive, so convert to lowercase *\/\n-            protocol = protocol.toLowerCase();\n+            \/* protocol is compared case-insensitive, so convert to lowercase\n+             * if needed. URL will store from lower-cased String literals for\n+             * built-in protocols, so avoid calling toLowerCase for these and\n+             * use identity tests for speed\n+             *\/\n+            if (protocol != \"file\" && protocol != \"jrt\" && protocol != \"jar\") {\n+                protocol = protocol.toLowerCase();\n+            }\n@@ -61,2 +67,3 @@\n-            host = host.toLowerCase();\n-            strForm.append(host);\n+            if (!host.isEmpty()) {\n+                strForm.append(host.toLowerCase());\n+            }\n","filename":"src\/java.base\/share\/classes\/sun\/net\/util\/URLUtil.java","additions":11,"deletions":4,"binary":false,"changes":15,"status":"modified"}]}