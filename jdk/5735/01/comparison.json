{"files":[{"patch":"@@ -38,0 +38,6 @@\n+static jmethodID sjm_getAccessibleSelection = NULL;\n+#define GET_ACCESSIBLESELECTION_METHOD_RETURN(ret) \\\n+    GET_CACCESSIBILITY_CLASS_RETURN(ret); \\\n+    GET_STATIC_METHOD_RETURN(sjm_getAccessibleSelection, sjc_CAccessibility, \"getAccessibleSelection\", \\\n+    \"(Ljavax\/accessibility\/AccessibleContext;Ljava\/awt\/Component;)Ljavax\/accessibility\/AccessibleSelection;\", ret);\n+\n@@ -46,3 +52,9 @@\n-    jclass axContextClass = (*env)->GetObjectClass(env, axContext);\n-    DECLARE_METHOD_RETURN(jm_getAccessibleSelection, axContextClass, \"getAccessibleSelection\", \"(I)Ljavax\/accessibility\/Accessible;\", nil);\n-    jobject axSelectedChild = (*env)->CallObjectMethod(env, axContext, jm_getAccessibleSelection, 0);\n+    GET_ACCESSIBLESELECTION_METHOD_RETURN(nil);\n+    jobject axSelection = (*env)->CallStaticObjectMethod(env, sjc_CAccessibility, sjm_getAccessibleSelection, axContext, self->fComponent);\n+    CHECK_EXCEPTION();\n+    if (axSelection == NULL) {\n+        return nil;\n+    }\n+    jclass axSelectionClass = (*env)->GetObjectClass(env, axSelection);\n+    DECLARE_METHOD_RETURN(jm_getAccessibleSelection, axSelectionClass, \"getAccessibleSelection\", \"(I)Ljavax\/accessibility\/Accessible;\", nil);\n+    jobject axSelectedChild = (*env)->CallObjectMethod(env, axSelection, jm_getAccessibleSelection, 0);\n@@ -50,0 +62,1 @@\n+    (*env)->DeleteLocalRef(env, axSelection);\n@@ -54,1 +67,0 @@\n-    GET_CACCESSIBILITY_CLASS_RETURN(nil);\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/a11y\/ComboBoxAccessibility.m","additions":16,"deletions":4,"binary":false,"changes":20,"status":"modified"}]}