[{"commit":{"message":"Review suggestions"},"files":[{"filename":"src\/hotspot\/cpu\/aarch64\/aarch64.ad"},{"filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.hpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/interp_masm_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/macroAssembler_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/sharedRuntime_aarch64.cpp"}],"sha":"1608efd358b9f227414d70780639a2da0bfb2ed0"},{"commit":{"message":"8316880: AArch64: \"stop: Header is not fast-locked\" with -XX:-UseLSE since JDK-8315880\n\nBuilding a fastdebug image on a machine without LSE (e.g. A72) or\nexplicitly disabling LSE results in:\n\n  #\n  # A fatal error has been detected by the Java Runtime Environment:\n  #\n  # Internal Error (0xe0000000), pid=64585, tid=64619\n  # stop: Header is not fast-locked\n  #\n  # JRE version: OpenJDK Runtime Environment (22.0) (fastdebug build 22-internal-git-a2391a92c)\n  # Java VM: OpenJDK 64-Bit Server VM (fastdebug 22-internal-git-a2391a92c, mixed mode, tiered, compressed oops, compressed class ptrs, g1 gc, linux-aarch64)\n  # Problematic frame:\n  # J 1373 c2 sun.nio.ch.NativeThreadSet.add()I java.base (155 bytes) @ 0x0000ffff7ccdf110 [0x0000ffff7ccdef80+0x0000000000000190]\n  #\n\nWhen UseLSE is false MacroAssembler::cmpxchg() uses rscratch1 as a\ntemporary to store the result of the store-exclusive instruction.\nHowever rscratch1 may also be one of the registers passed as t1 or t2 to\nMacroAssembler::lightweight_lock() and holding a live value which is\nthen clobbered.  Fixed by ensuring rscratch1 is never passed as one of\nthese temporaries."},"files":[{"filename":"src\/hotspot\/cpu\/aarch64\/c1_LIRAssembler_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/c1_LIRGenerator_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/c1_MacroAssembler_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/c1_MacroAssembler_aarch64.hpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/c2_MacroAssembler_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/interp_masm_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/macroAssembler_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/sharedRuntime_aarch64.cpp"}],"sha":"ed2222c808d76358997270973751d3afb54ae5bd"}]