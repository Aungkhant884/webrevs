{"files":[{"patch":"@@ -391,0 +391,1 @@\n+    assert(current->current_pending_monitor() == NULL, \"invariant\");\n@@ -424,0 +425,3 @@\n+      \/\/ make sure 'this' is still set as pending monitor so that exit()\n+      \/\/ doesn't set _previous_owner_tid for this special case.\n+      assert(current->current_pending_monitor() == this, \"invariant\");\n@@ -1181,2 +1185,4 @@\n-  \/\/ set _previous_owner_tid for the MonitorEnter event if it is enabled and\n-  \/\/ the thread isn't releasing the monitor from inside enter()\n+  \/\/ Set _previous_owner_tid for the MonitorEnter event if it is enabled and\n+  \/\/ we legitimately owned this monitor. We can also get here if we need to self-suspend\n+  \/\/ in enter(), in which case we never really owned this monitor and so should not record\n+  \/\/ our thread id. In that case current_pending_monitor() is non-NULL.\n","filename":"src\/hotspot\/share\/runtime\/objectMonitor.cpp","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"}]}