{"files":[{"patch":"@@ -73,0 +73,4 @@\n+CFLAGS_JDK_VERSION := \\\n+    $(VERSION_CFLAGS) \\\n+    -DVERSION_RUNTIME_NAME='\"$(RUNTIME_NAME)\"'\n+\n@@ -152,0 +156,1 @@\n+    java.cpp_CXXFLAGS := $(CFLAGS_JDK_VERSION), \\\n","filename":"make\/hotspot\/lib\/CompileJvm.gmk","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -149,8 +149,0 @@\n-  \/* Java runtime version access *\/                                                               \\\n-  template(java_lang_VersionProps,                    \"java\/lang\/VersionProps\")                   \\\n-  template(java_version_name,                         \"java_version\")                             \\\n-  template(java_runtime_name_name,                    \"java_runtime_name\")                        \\\n-  template(java_runtime_version_name,                 \"java_runtime_version\")                     \\\n-  template(java_runtime_vendor_version_name,          \"VENDOR_VERSION\")                           \\\n-  template(java_runtime_vendor_vm_bug_url_name,       \"VENDOR_URL_VM_BUG\")                        \\\n-                                                                                                  \\\n","filename":"src\/hotspot\/share\/classfile\/vmSymbols.hpp","additions":0,"deletions":8,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -708,5 +708,7 @@\n-const char* JDK_Version::_java_version;\n-const char* JDK_Version::_runtime_name;\n-const char* JDK_Version::_runtime_version;\n-const char* JDK_Version::_runtime_vendor_version;\n-const char* JDK_Version::_runtime_vendor_vm_bug_url;\n+\n+\/\/ All version information is set at build\/configure time\n+const char* JDK_Version::_java_version = VERSION_SHORT;\n+const char* JDK_Version::_runtime_name = VERSION_RUNTIME_NAME;\n+const char* JDK_Version::_runtime_version = VERSION_STRING;\n+const char* JDK_Version::_runtime_vendor_version = VENDOR_VERSION_STRING;\n+const char* JDK_Version::_runtime_vendor_vm_bug_url = VENDOR_URL_VM_BUG;\n","filename":"src\/hotspot\/share\/runtime\/java.cpp","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -142,3 +142,0 @@\n-  static void set_java_version(const char* version) {\n-    _java_version = version;\n-  }\n@@ -149,3 +146,0 @@\n-  static void set_runtime_name(const char* name) {\n-    _runtime_name = name;\n-  }\n@@ -156,3 +150,0 @@\n-  static void set_runtime_version(const char* version) {\n-    _runtime_version = version;\n-  }\n@@ -163,3 +154,0 @@\n-  static void set_runtime_vendor_version(const char* vendor_version) {\n-    _runtime_vendor_version = vendor_version;\n-  }\n@@ -170,4 +158,0 @@\n-  static void set_runtime_vendor_vm_bug_url(const char* vendor_vm_bug_url) {\n-    _runtime_vendor_vm_bug_url = vendor_vm_bug_url;\n-  }\n-\n","filename":"src\/hotspot\/share\/runtime\/java.hpp","additions":0,"deletions":16,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -784,29 +784,0 @@\n-static char java_version[64] = \"\";\n-static char java_runtime_name[128] = \"\";\n-static char java_runtime_version[128] = \"\";\n-static char java_runtime_vendor_version[128] = \"\";\n-static char java_runtime_vendor_vm_bug_url[128] = \"\";\n-\n-\/\/ Extract version and vendor specific information.\n-static const char* get_java_version_info(InstanceKlass* ik,\n-                                         Symbol* field_name,\n-                                         char* buffer,\n-                                         int buffer_size) {\n-  fieldDescriptor fd;\n-  bool found = ik != NULL &&\n-               ik->find_local_field(field_name,\n-                                    vmSymbols::string_signature(), &fd);\n-  if (found) {\n-    oop name_oop = ik->java_mirror()->obj_field(fd.offset());\n-    if (name_oop == NULL) {\n-      return NULL;\n-    }\n-    const char* name = java_lang_String::as_utf8_string(name_oop,\n-                                                        buffer,\n-                                                        buffer_size);\n-    return name;\n-  } else {\n-    return NULL;\n-  }\n-}\n-\n@@ -2667,21 +2638,0 @@\n-  \/\/ get the Java runtime name, version, and vendor info after java.lang.System is initialized\n-  InstanceKlass* ik = SystemDictionary::find_instance_klass(vmSymbols::java_lang_VersionProps(),\n-                                                            Handle(), Handle());\n-\n-  JDK_Version::set_java_version(get_java_version_info(ik, vmSymbols::java_version_name(),\n-                                                      java_version, sizeof(java_version)));\n-\n-  JDK_Version::set_runtime_name(get_java_version_info(ik, vmSymbols::java_runtime_name_name(),\n-                                                      java_runtime_name, sizeof(java_runtime_name)));\n-\n-  JDK_Version::set_runtime_version(get_java_version_info(ik, vmSymbols::java_runtime_version_name(),\n-                                                         java_runtime_version, sizeof(java_runtime_version)));\n-\n-  JDK_Version::set_runtime_vendor_version(get_java_version_info(ik, vmSymbols::java_runtime_vendor_version_name(),\n-                                                                java_runtime_vendor_version,\n-                                                                sizeof(java_runtime_vendor_version)));\n-\n-  JDK_Version::set_runtime_vendor_vm_bug_url(get_java_version_info(ik, vmSymbols::java_runtime_vendor_vm_bug_url_name(),\n-                                                                   java_runtime_vendor_vm_bug_url,\n-                                                                   sizeof(java_runtime_vendor_vm_bug_url)));\n-\n","filename":"src\/hotspot\/share\/runtime\/thread.cpp","additions":0,"deletions":50,"binary":false,"changes":50,"status":"modified"}]}