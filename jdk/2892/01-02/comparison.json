{"files":[{"patch":"@@ -74,13 +74,5 @@\n-            try {\n-               String TempName = name;\n-               String currentDir = System.getProperty(\"test.classes\");\n-               String filename = currentDir + File.separator + TempName + \".class\";\n-               FileInputStream fis = new FileInputStream(filename);\n-               byte[] b = new byte[5000];\n-               int cnt = fis.read(b, 0, 5000);\n-               byte[] c = new byte[cnt];\n-               for (int i=0; i<cnt; i++) c[i] = b[i];\n-                 return c;\n-            } catch (IOException e) {\n-               return null;\n-            }\n+           try {\n+             return SimpleLoader.class.getClassLoader().getResourceAsStream(name + \".class\").readAllBytes();\n+           } catch (IOException e) {\n+              return null;\n+           }\n@@ -95,1 +87,1 @@\n-        \/\/ If byte array points to nul, the JVM throws ClassFormatError(\"Truncated class file\")\n+        \/\/ If byte array points to null, the JVM throws ClassFormatError(\"Truncated class file\")\n@@ -105,1 +97,1 @@\n-        \/\/ If byte array is NULL, ClassLoader native detects this and throws NPE\n+        \/\/ If byte array is null, ClassLoader native detects this and throws NPE\n","filename":"test\/hotspot\/jtreg\/runtime\/DefineClass\/NullClassBytesTest.java","additions":7,"deletions":15,"binary":false,"changes":22,"status":"modified"}]}