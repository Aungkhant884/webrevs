{"files":[{"patch":"@@ -261,1 +261,1 @@\n-    \/\/ There can be a race condition between a VM_Operation reaching a safepoint\n+    \/\/ There can be a race condition between a handshake\n@@ -263,1 +263,1 @@\n-    \/\/ We must recheck the last Java frame still exists.\n+    \/\/ We must recheck that the last Java frame still exists.\n@@ -266,8 +266,5 @@\n-      assert(vf != NULL, \"must have last java frame\");\n-      Method* method = vf->method();\n-      _method_id = method->jmethod_id();\n-      _bci = vf->bci();\n-    } else {\n-      \/\/ Clear current location as the target thread has no Java frames anymore.\n-      _method_id = (jmethodID)NULL;\n-      _bci = 0;\n+      if (vf != NULL) {\n+        Method* method = vf->method();\n+        _method_id = method->jmethod_id();\n+        _bci = vf->bci();\n+      }\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvThreadState.cpp","additions":7,"deletions":10,"binary":false,"changes":17,"status":"modified"}]}