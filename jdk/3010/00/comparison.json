{"files":[{"patch":"@@ -261,1 +261,1 @@\n-    \/\/ There can be a race condition between a VM_Operation reaching a safepoint\n+    \/\/ There can be a race condition between a handshake\n@@ -266,8 +266,5 @@\n-      assert(vf != NULL, \"must have last java frame\");\n-      Method* method = vf->method();\n-      _method_id = method->jmethod_id();\n-      _bci = vf->bci();\n-    } else {\n-      \/\/ Clear current location as the target thread has no Java frames anymore.\n-      _method_id = (jmethodID)NULL;\n-      _bci = 0;\n+      if (vf != NULL) {\n+        Method* method = vf->method();\n+        _method_id = method->jmethod_id();\n+        _bci = vf->bci();\n+      }\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvThreadState.cpp","additions":6,"deletions":9,"binary":false,"changes":15,"status":"modified"}]}