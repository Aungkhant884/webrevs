{"files":[{"patch":"@@ -4404,1 +4404,1 @@\n-  decorators = AccessInternal::decorator_fixup(decorators);\n+  decorators = AccessInternal::decorator_fixup(decorators, type);\n@@ -4417,1 +4417,1 @@\n-  decorators = AccessInternal::decorator_fixup(decorators);\n+  decorators = AccessInternal::decorator_fixup(decorators, type);\n","filename":"src\/hotspot\/cpu\/aarch64\/macroAssembler_aarch64.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1646,1 +1646,1 @@\n-  decorators = AccessInternal::decorator_fixup(decorators);\n+  decorators = AccessInternal::decorator_fixup(decorators, type);\n@@ -1658,1 +1658,1 @@\n-  decorators = AccessInternal::decorator_fixup(decorators);\n+  decorators = AccessInternal::decorator_fixup(decorators, type);\n","filename":"src\/hotspot\/cpu\/arm\/macroAssembler_arm.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -360,1 +360,1 @@\n-  decorators = AccessInternal::decorator_fixup(decorators);\n+  decorators = AccessInternal::decorator_fixup(decorators, type);\n@@ -380,1 +380,1 @@\n-  decorators = AccessInternal::decorator_fixup(decorators);\n+  decorators = AccessInternal::decorator_fixup(decorators, type);\n","filename":"src\/hotspot\/cpu\/ppc\/macroAssembler_ppc.inline.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1744,1 +1744,1 @@\n-  decorators = AccessInternal::decorator_fixup(decorators);\n+  decorators = AccessInternal::decorator_fixup(decorators, type);\n@@ -1769,1 +1769,1 @@\n-  decorators = AccessInternal::decorator_fixup(decorators);\n+  decorators = AccessInternal::decorator_fixup(decorators, type);\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -3861,1 +3861,1 @@\n-  decorators = AccessInternal::decorator_fixup(decorators);\n+  decorators = AccessInternal::decorator_fixup(decorators, type);\n@@ -3880,1 +3880,1 @@\n-  decorators = AccessInternal::decorator_fixup(decorators);\n+  decorators = AccessInternal::decorator_fixup(decorators, type);\n","filename":"src\/hotspot\/cpu\/s390\/macroAssembler_s390.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -5098,1 +5098,1 @@\n-  decorators = AccessInternal::decorator_fixup(decorators);\n+  decorators = AccessInternal::decorator_fixup(decorators, type);\n@@ -5110,1 +5110,1 @@\n-  decorators = AccessInternal::decorator_fixup(decorators);\n+  decorators = AccessInternal::decorator_fixup(decorators, type);\n","filename":"src\/hotspot\/cpu\/x86\/macroAssembler_x86.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -79,1 +79,1 @@\n-    _decorators(AccessInternal::decorator_fixup(decorators)),\n+    _decorators(AccessInternal::decorator_fixup(decorators, type)),\n","filename":"src\/hotspot\/share\/gc\/shared\/c1\/barrierSetC1.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -361,1 +361,1 @@\n-  _decorators = AccessInternal::decorator_fixup(_decorators);\n+  _decorators = AccessInternal::decorator_fixup(_decorators, _type);\n","filename":"src\/hotspot\/share\/gc\/shared\/c2\/barrierSetC2.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -239,1 +239,3 @@\n-  inline DecoratorSet decorator_fixup(DecoratorSet input_decorators) {\n+  inline DecoratorSet decorator_fixup(DecoratorSet input_decorators, BasicType type) {\n+    \/\/ Some call-sites don't specify that the access is performed on oops\n+    DecoratorSet with_oop_decorators = input_decorators |= (is_reference_type(type) ? INTERNAL_VALUE_IS_OOP : 0);\n@@ -241,2 +243,2 @@\n-    DecoratorSet ref_strength_default = input_decorators |\n-      (((ON_DECORATOR_MASK & input_decorators) == 0 && (INTERNAL_VALUE_IS_OOP & input_decorators) != 0) ?\n+    DecoratorSet ref_strength_default = with_oop_decorators |\n+      (((ON_DECORATOR_MASK & with_oop_decorators) == 0 && (INTERNAL_VALUE_IS_OOP & input_decorators) != 0) ?\n","filename":"src\/hotspot\/share\/oops\/accessDecorators.hpp","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"}]}