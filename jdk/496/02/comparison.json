{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -258,1 +258,6 @@\n-  return __sync_val_compare_and_swap(dest, compare_value, exchange_value);\n+  T value = compare_value;\n+  FULL_MEM_BARRIER;\n+  __atomic_compare_exchange(dest, &value, &exchange_value, \/*weak*\/false,\n+                            __ATOMIC_RELAXED, __ATOMIC_RELAXED);\n+  FULL_MEM_BARRIER;\n+  return value;\n@@ -270,1 +275,7 @@\n-  return __sync_val_compare_and_swap(dest, compare_value, exchange_value);\n+\n+  T value = compare_value;\n+  FULL_MEM_BARRIER;\n+  __atomic_compare_exchange(dest, &value, &exchange_value, \/*weak*\/false,\n+                            __ATOMIC_RELAXED, __ATOMIC_RELAXED);\n+  FULL_MEM_BARRIER;\n+  return value;\n","filename":"src\/hotspot\/os_cpu\/bsd_zero\/atomic_bsd_zero.hpp","additions":14,"deletions":3,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -106,1 +106,7 @@\n-  return __sync_val_compare_and_swap(dest, compare_value, exchange_value);\n+\n+  T value = compare_value;\n+  FULL_MEM_BARRIER;\n+  __atomic_compare_exchange(dest, &value, &exchange_value, \/*weak*\/false,\n+                            __ATOMIC_RELAXED, __ATOMIC_RELAXED);\n+  FULL_MEM_BARRIER;\n+  return value;\n@@ -116,1 +122,7 @@\n-  return __sync_val_compare_and_swap(dest, compare_value, exchange_value);\n+\n+  FULL_MEM_BARRIER;\n+  T value = compare_value;\n+  __atomic_compare_exchange(dest, &value, &exchange_value, \/*weak*\/false,\n+                            __ATOMIC_RELAXED, __ATOMIC_RELAXED);\n+  FULL_MEM_BARRIER;\n+  return value;\n","filename":"src\/hotspot\/os_cpu\/linux_zero\/atomic_linux_zero.hpp","additions":15,"deletions":3,"binary":false,"changes":18,"status":"modified"}]}