{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -93,3 +93,5 @@\n-                    GSSUtil.debug(\"Ignore \" + e + \" while acquring cred for \"\n-                        + mechs[i]);\n-                    \/\/e.printStackTrace();\n+                    if (GSSUtil.DEBUG) {\n+                        GSSUtil.debug(\"Ignore \" + e + \" while acquiring cred for \"\n+                                + mechs[i]);\n+                        \/\/ e.printStackTrace();\n+                    }\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/GSSCredentialImpl.java","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -91,2 +91,4 @@\n-                GSSUtil.debug(\"Skip \" + mech +\n-                              \": error retrieving supported name types\");\n+                if (GSSUtil.DEBUG) {\n+                    GSSUtil.debug(\"Skip \" + mech +\n+                            \": error retrieving supported name types\");\n+                }\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/GSSManagerImpl.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -206,4 +206,0 @@\n-    public static final void debug(String str) {\n-        System.err.print(str);\n-    }\n-\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/GSSToken.java","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -74,4 +74,2 @@\n-        if (DEBUG) {\n-            assert(message != null);\n-            System.out.println(message);\n-        }\n+        assert(message != null);\n+        System.out.println(message);\n@@ -87,1 +85,3 @@\n-            debug(\"Ignored invalid OID: \" + oidStr);\n+            if (DEBUG) {\n+                debug(\"Ignored invalid OID: \" + oidStr);\n+            }\n@@ -141,1 +141,3 @@\n-                debug(\"Skipped name \" + name + \" due to \" + ge);\n+                if (DEBUG) {\n+                    debug(\"Skipped name \" + name + \" due to \" + ge);\n+                }\n@@ -152,4 +154,6 @@\n-        debug(\"Created Subject with the following\");\n-        debug(\"principals=\" + krb5Principals);\n-        debug(\"public creds=\" + pubCredentials);\n-        debug(\"private creds=\" + privCredentials);\n+        if (DEBUG) {\n+            debug(\"Created Subject with the following\");\n+            debug(\"principals=\" + krb5Principals);\n+            debug(\"public creds=\" + pubCredentials);\n+            debug(\"private creds=\" + privCredentials);\n+        }\n@@ -215,1 +219,3 @@\n-                debug(\"Skipped cred element: \" + cred);\n+                if (DEBUG) {\n+                    debug(\"Skipped cred element: \" + cred);\n+                }\n@@ -311,4 +317,6 @@\n-        debug(\"Search Subject for \" + getMechStr(mech) +\n-              (initiate? \" INIT\" : \" ACCEPT\") + \" cred (\" +\n-              (name == null? \"<<DEF>>\" : name.toString()) + \", \" +\n-              credCls.getName() + \")\");\n+        if (DEBUG) {\n+            debug(\"Search Subject for \" + getMechStr(mech) +\n+                    (initiate ? \" INIT\" : \" ACCEPT\") + \" cred (\" +\n+                    (name == null ? \"<<DEF>>\" : name.toString()) + \", \" +\n+                    credCls.getName() + \")\");\n+        }\n@@ -330,1 +338,3 @@\n-                                debug(\"...Found cred\" + cred);\n+                                if (DEBUG) {\n+                                    debug(\"...Found cred\" + cred);\n+                                }\n@@ -334,1 +344,3 @@\n-                                    debug(\"......Found element: \" + ce);\n+                                    if (DEBUG) {\n+                                        debug(\"......Found element: \" + ce);\n+                                    }\n@@ -340,1 +352,3 @@\n-                                        debug(\"......Discard element\");\n+                                        if (DEBUG) {\n+                                            debug(\"......Discard element\");\n+                                        }\n@@ -343,1 +357,3 @@\n-                                    debug(\"...Discard cred (\" + ge + \")\");\n+                                    if (DEBUG) {\n+                                        debug(\"...Discard cred (\" + ge + \")\");\n+                                    }\n@@ -346,1 +362,3 @@\n-                        } else debug(\"No Subject\");\n+                        } else if (DEBUG) {\n+                            debug(\"No Subject\");\n+                        }\n@@ -352,2 +370,4 @@\n-            debug(\"Unexpected exception when searching Subject:\");\n-            if (DEBUG) pae.printStackTrace();\n+            if (DEBUG) {\n+                debug(\"Unexpected exception when searching Subject:\");\n+                pae.printStackTrace();\n+            }\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/GSSUtil.java","additions":43,"deletions":23,"binary":false,"changes":66,"status":"modified"},{"patch":"@@ -137,2 +137,4 @@\n-                GSSUtil.debug(\"Error in adding provider \" +\n-                              prov.getName() + \": \" + ge);\n+                if (GSSUtil.DEBUG) {\n+                    GSSUtil.debug(\"Error in adding provider \" +\n+                            prov.getName() + \": \" + ge);\n+                }\n@@ -424,2 +426,4 @@\n-                    GSSUtil.debug(\"Ignore the invalid property \" +\n-                                  prop + \" from provider \" + p.getName());\n+                    if (GSSUtil.DEBUG) {\n+                        GSSUtil.debug(\"Ignore the invalid property \" +\n+                                prop + \" from provider \" + p.getName());\n+                    }\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/ProviderList.java","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,1 @@\n+import sun.security.action.GetBooleanAction;\n@@ -54,1 +55,3 @@\n-    static boolean DEBUG;\n+    private static final boolean DEBUG =\n+        GetBooleanAction.privilegedGetProperty(\"sun.security.nativegss.debug\");\n+\n@@ -56,5 +59,2 @@\n-        if (DEBUG) {\n-            if (message == null) {\n-                throw new NullPointerException();\n-            }\n-            System.out.println(NAME + \": \" + message);\n+        if (message == null) {\n+            throw new NullPointerException();\n@@ -62,0 +62,1 @@\n+        System.out.println(NAME + \": \" + message);\n@@ -69,2 +70,0 @@\n-                        DEBUG = Boolean.parseBoolean(\n-                            System.getProperty(\"sun.security.nativegss.debug\"));\n@@ -78,2 +77,4 @@\n-                            debug(\"No j2gss library found!\");\n-                            if (DEBUG) err.printStackTrace();\n+                            if (DEBUG) {\n+                                debug(\"No j2gss library found!\");\n+                                err.printStackTrace();\n+                            }\n@@ -110,1 +111,3 @@\n-                                debug(\"Loaded GSS library: \" + libName);\n+                                if (DEBUG) {\n+                                    debug(\"Loaded GSS library: \" + libName);\n+                                }\n@@ -114,1 +117,3 @@\n-                                    debug(\"Native MF for \" + mechs[i]);\n+                                    if (DEBUG) {\n+                                        debug(\"Native MF for \" + mechs[i]);\n+                                    }\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/jgss\/wrapper\/SunNativeProvider.java","additions":18,"deletions":13,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -343,4 +343,0 @@\n-    private static void debug(String message) {\n-        \/\/      System.err.println(\">>> KrbTgsReq: \" + message);\n-    }\n-\n@@ -350,1 +346,0 @@\n-\n","filename":"src\/java.security.jgss\/share\/classes\/sun\/security\/krb5\/KrbTgsReq.java","additions":1,"deletions":6,"binary":false,"changes":7,"status":"modified"}]}