{"files":[{"patch":"@@ -1196,1 +1196,1 @@\n-    if (!JvmtiVTSuspender::is_vthread_suspended(thread_oop)) {\n+    if (!is_vthread_suspended(thread_oop, java_thread)) {\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnv.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1322,0 +1322,13 @@\n+\/\/ Check if VirtualThread or BoundVirtualThread is suspended.\n+bool\n+JvmtiEnvBase::is_vthread_suspended(oop vt_oop, JavaThread* jt) {\n+  bool suspended = false;\n+  if (java_lang_VirtualThread::is_instance(vt_oop)) {\n+    suspended = JvmtiVTSuspender::is_vthread_suspended(vt_oop);\n+  }\n+  if (vt_oop->is_a(vmClasses::BoundVirtualThread_klass())) {\n+    suspended = jt->is_suspended();\n+  }\n+  return suspended;\n+}\n+\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvBase.cpp","additions":13,"deletions":0,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -224,0 +224,3 @@\n+  \/\/ Check if VirtualThread or BoundVirtualThread is suspended.\n+  static bool is_vthread_suspended(oop vt_oop, JavaThread* jt);\n+\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvBase.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n- *      - method B() that is stopped at a brakepoint\n+ *      - method B() that is stopped at a breakpoint\n@@ -62,1 +62,1 @@\n-        log(\"\\nFAILED: \" + msg); \n+        log(\"\\nFAILED: \" + msg);\n@@ -67,1 +67,1 @@\n-        log(\"\\nFAILED: \" + msg); \n+        log(\"\\nFAILED: \" + msg);\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/vthread\/StopThreadTest\/StopThreadTest.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}