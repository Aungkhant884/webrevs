{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -48,0 +48,3 @@\n+#define AS_REGISTER(type,name)         ((type)name##_##type##EnumValue)\n+\n+#ifndef USE_EXTERN_CONST_FOR_REGISTER_DEFINITIONS\n@@ -49,0 +52,2 @@\n+\/\/ JDK-8269122: The use of \"extern const\" for Register definitions\n+\/\/ generates poor code.\n@@ -50,0 +55,16 @@\n+\/\/ The use of \"extern const\" for Register definitions is a historical\n+\/\/ artefact that leads to excessive code size for class Assembler. The\n+\/\/ old definitions for CONSTANT_REGISTER_DECLARATION et al are left\n+\/\/ here in case some platform needs them.\n+\n+#define CONSTANT_REGISTER_DECLARATION(type, name, value)        \\\n+const type name = ((type)value);                                \\\n+enum { name##_##type##EnumValue = (value) }\n+\n+#define REGISTER_DECLARATION(type, name, value)                 \\\n+const type name = ((type)value)\n+\n+#define REGISTER_DEFINITION(type, name)\n+\n+#else\n+\n@@ -85,2 +106,0 @@\n-#define AS_REGISTER(type,name)         ((type)name##_##type##EnumValue)\n-\n@@ -98,0 +117,2 @@\n+#endif \/\/ USE_EXTERN_CONST_FOR_REGISTER_DEFINITIONS\n+\n","filename":"src\/hotspot\/share\/asm\/register.hpp","additions":24,"deletions":3,"binary":false,"changes":27,"status":"modified"}]}