{"files":[{"patch":"@@ -50,10 +50,0 @@\n-#ifndef USE_EXTERN_CONST_FOR_REGISTER_DEFINITIONS\n-\n-\/\/ JDK-8269122: The use of \"extern const\" for Register definitions\n-\/\/ generates poor code.\n-\/\/\n-\/\/ The use of \"extern const\" for Register definitions is a historical\n-\/\/ artefact that leads to excessive code size for class Assembler. The\n-\/\/ old definitions for CONSTANT_REGISTER_DECLARATION et al are left\n-\/\/ here in case some platform needs them.\n-\n@@ -69,50 +59,0 @@\n-#else\n-\n-\/\/ Macros for use in defining Register instances.  We'd like to be\n-\/\/ able to simply define const instances of the RegisterImpl* for each\n-\/\/ of the registers needed on a system in a header file.  However many\n-\/\/ compilers don't handle this very well and end up producing a\n-\/\/ private definition in every file which includes the header file.\n-\/\/ Along with the static constructors necessary for initialization it\n-\/\/ can consume a significant amount of space in the result library.\n-\/\/\n-\/\/ The following macros allow us to declare the instance in a .hpp and\n-\/\/ produce an enumeration value which has the same number.  Then in a\n-\/\/ .cpp the the register instance can be defined using the enumeration\n-\/\/ value.  This avoids the use of static constructors and multiple\n-\/\/ definitions per .cpp.  In addition #defines for the register can be\n-\/\/ produced so that the constant registers can be inlined.  These\n-\/\/ macros should not be used inside other macros, because you may get\n-\/\/ multiple evaluations of the macros which can give bad results.\n-\/\/\n-\/\/ Here are some example uses and expansions.  Note that the macro\n-\/\/ invocation is terminated with a ;.\n-\/\/\n-\/\/ CONSTANT_REGISTER_DECLARATION(Register, G0, 0);\n-\/\/\n-\/\/ extern const Register G0 ;\n-\/\/ enum { G0_RegisterEnumValue = 0 } ;\n-\/\/\n-\/\/ REGISTER_DECLARATION(Register, Gmethod, G5);\n-\/\/\n-\/\/ extern const Register Gmethod ;\n-\/\/ enum { Gmethod_RegisterEnumValue = G5_RegisterEnumValue } ;\n-\/\/\n-\/\/ REGISTER_DEFINITION(Register, G0);\n-\/\/\n-\/\/ const Register G0 = ( ( Register ) G0_RegisterEnumValue ) ;\n-\/\/\n-\n-#define CONSTANT_REGISTER_DECLARATION(type, name, value) \\\n-extern const type name;                                  \\\n-enum { name##_##type##EnumValue = (value) }\n-\n-#define REGISTER_DECLARATION(type, name, value) \\\n-extern const type name;                         \\\n-enum { name##_##type##EnumValue = value##_##type##EnumValue }\n-\n-#define REGISTER_DEFINITION(type, name) \\\n-const type name = ((type)name##_##type##EnumValue)\n-\n-#endif \/\/ USE_EXTERN_CONST_FOR_REGISTER_DEFINITIONS\n-\n","filename":"src\/hotspot\/share\/asm\/register.hpp","additions":0,"deletions":60,"binary":false,"changes":60,"status":"modified"}]}