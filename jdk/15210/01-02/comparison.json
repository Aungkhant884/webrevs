{"files":[{"patch":"@@ -3900,0 +3900,2 @@\n+  \/\/ Round to zero, 64-bit mode, exceptions masked\n+  StubRoutines::x86::_mxcsr_rz = 0x7F80;\n","filename":"src\/hotspot\/cpu\/x86\/stubGenerator_x86_64.cpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+#include \"runtime\/stubRoutines.hpp\"\n@@ -75,0 +76,1 @@\n+  __ align(CodeEntryAlignment);\n@@ -290,5 +292,0 @@\n-    \/\/ unsigned mxcsr, mxcsr_rz;\n-\n-    \/\/   __asm { stmxcsr DWORD PTR[mxcsr] }\n-    \/\/   mxcsr_rz = 0x7f80 | mxcsr;\n-    __ push(rax);\n@@ -299,1 +296,1 @@\n-    __ vmovdqu(xmm3, ExternalAddress((address)CONST_NaN), rcx);\n+    __ movdqu(xmm3, ExternalAddress((address)CONST_NaN), rcx);\n@@ -311,1 +308,1 @@\n-    __ jcc(Assembler::belowEqual, L_104a);\n+    __ jccb(Assembler::belowEqual, L_104a);\n@@ -315,1 +312,1 @@\n-    \/\/   if (((mxcsr & 0x6000)!=0x2000) && (a < b * 0x1p+260))\n+    \/\/   if (a < b * 0x1p+260)\n@@ -317,9 +314,1 @@\n-    __ stmxcsr(Address(rsp, 0));\n-    __ movl(rax, Address(rsp, 0));\n-    __ movl(rcx, rax);\n-    __ orl(rcx, 0x7f80);\n-    __ movl(Address(rsp, 0x04), rcx);\n-\n-    __ andl(rax, 0x6000);\n-    __ cmpl(rax, 0x2000);\n-    __ jcc(Assembler::equal, L_10c1);\n+\n@@ -328,1 +317,1 @@\n-    __ jcc(Assembler::belowEqual, L_10c1);\n+    __ jccb(Assembler::belowEqual, L_10c1);\n@@ -344,1 +333,1 @@\n-    __ align32();\n+    __ align(16);\n@@ -363,1 +352,1 @@\n-    __ jmp(L_1090);\n+    __ jmpb(L_1090);\n@@ -370,1 +359,1 @@\n-    __ ldmxcsr(Address(rsp, 0x04));\n+    __ ldmxcsr(ExternalAddress(StubRoutines::x86::addr_mxcsr_rz()), rax \/*rscratch*\/);\n@@ -382,1 +371,1 @@\n-    __ jcc(Assembler::above, L_10e7);\n+    __ jccb(Assembler::above, L_10e7);\n@@ -395,2 +384,2 @@\n-    __ jcc(Assembler::notEqual, L_10f3);\n-    __ jcc(Assembler::noParity, L_111c);\n+    __ jccb(Assembler::notEqual, L_10f3);\n+    __ jccb(Assembler::noParity, L_111c);\n@@ -401,1 +390,1 @@\n-    __ jcc(Assembler::below, L_111c);\n+    __ jccb(Assembler::below, L_111c);\n@@ -408,1 +397,1 @@\n-    __ jcc(Assembler::aboveEqual, L_112a);\n+    __ jccb(Assembler::aboveEqual, L_112a);\n@@ -412,1 +401,1 @@\n-    __ ldmxcsr(Address(rsp, 0));\n+    __ ldmxcsr(ExternalAddress(StubRoutines::x86::addr_mxcsr_std()), rax \/*rscratch*\/);\n@@ -419,1 +408,1 @@\n-    __ ldmxcsr(Address(rsp, 0));\n+    __ ldmxcsr(ExternalAddress(StubRoutines::x86::addr_mxcsr_std()), rax \/*rscratch*\/);\n@@ -439,1 +428,1 @@\n-    __ jcc(Assembler::below, L_116e);\n+    __ jccb(Assembler::below, L_116e);\n@@ -446,1 +435,1 @@\n-    __ jcc(Assembler::below, L_1173);\n+    __ jccb(Assembler::below, L_1173);\n@@ -457,2 +446,2 @@\n-    __ jcc(Assembler::aboveEqual, L_1157);\n-    __ jmp(L_1173);\n+    __ jccb(Assembler::aboveEqual, L_1157);\n+    __ jmpb(L_1173);\n@@ -469,1 +458,1 @@\n-    __ jcc(Assembler::aboveEqual, L_117f);\n+    __ jccb(Assembler::aboveEqual, L_117f);\n@@ -471,1 +460,1 @@\n-    __ jmp(L_11af);\n+    __ jmpb(L_11af);\n@@ -484,3 +473,3 @@\n-    __ jcc(Assembler::aboveEqual, L_117f);\n-    __ jmp(L_11af);\n-    __ align32();\n+    __ jccb(Assembler::aboveEqual, L_117f);\n+    __ jmpb(L_11af);\n+    __ align(16);\n@@ -500,1 +489,1 @@\n-    __ jcc(Assembler::aboveEqual, L_11a0);\n+    __ jccb(Assembler::aboveEqual, L_11a0);\n@@ -504,1 +493,1 @@\n-    __ ldmxcsr(Address(rsp, 0));\n+    __ ldmxcsr(ExternalAddress(StubRoutines::x86::addr_mxcsr_std()), rax \/*rscratch*\/);\n@@ -513,1 +502,0 @@\n-    __ pop(rax);\n","filename":"src\/hotspot\/cpu\/x86\/stubGenerator_x86_64_fmod.cpp","additions":28,"deletions":40,"binary":false,"changes":68,"status":"modified"},{"patch":"@@ -129,0 +129,3 @@\n+#ifdef _LP64\n+  static jint    _mxcsr_rz;\n+#endif \/\/ _LP64\n@@ -210,0 +213,3 @@\n+#ifdef _LP64\n+  static address addr_mxcsr_rz()        { return (address)&_mxcsr_rz; }\n+#endif \/\/ _LP64\n","filename":"src\/hotspot\/cpu\/x86\/stubRoutines_x86.hpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -35,0 +35,1 @@\n+jint    StubRoutines::x86::_mxcsr_rz = 0;\n","filename":"src\/hotspot\/cpu\/x86\/stubRoutines_x86_64.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}