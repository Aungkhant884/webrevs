{"files":[{"patch":"@@ -572,0 +572,1 @@\n+     * Nested tags are not permitted.\n@@ -573,1 +574,0 @@\n-    @SuppressWarnings(\"fallthrough\")\n@@ -575,0 +575,12 @@\n+        return inlineContent(false);\n+    }\n+\n+    \/**\n+     * Read general text content of an inline tag, including HTML entities and elements.\n+     * Matching pairs of { } are skipped; the text is terminated by the first\n+     * unmatched }. It is an error if the beginning of the next tag is detected.\n+     *\n+     * @param allowNestedTags whether or not to allow nested tags\n+     *\/\n+    @SuppressWarnings(\"fallthrough\")\n+    private List<DCTree> inlineContent(boolean allowNestedTags) {\n@@ -602,0 +614,2 @@\n+                    textStart = bp;\n+                    lastNonWhite = -1;\n@@ -608,1 +622,0 @@\n-                    depth++;\n@@ -610,0 +623,8 @@\n+                    if (ch == '@' && allowNestedTags) {\n+                        addPendingText(trees, bp - 2);\n+                        trees.add(inlineTag());\n+                        textStart = bp;\n+                        lastNonWhite = -1;\n+                    } else {\n+                        depth++;\n+                    }\n@@ -1291,1 +1312,1 @@\n-                            description = inlineContent();\n+                            description = inlineContent(true);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/parser\/DocCommentParser.java","additions":24,"deletions":3,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -1387,3 +1387,2 @@\n-                            jdk.javadoc.internal.doclint.HtmlTag htag =\n-                                    jdk.javadoc.internal.doclint.HtmlTag.get(name);\n-                            return htag != null && htag.equals(jdk.javadoc.internal.doclint.HtmlTag.A);\n+                            HtmlTag htag = HtmlTag.get(name);\n+                            return htag != null && htag.equals(HtmlTag.A);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlDocletWriter.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -166,0 +166,59 @@\n+    @Test\n+    public void testInlineMarkup(Path base) throws IOException {\n+        Path src = base.resolve(\"src\");\n+        tb.writeJavaFiles(src,\n+                \"\"\"\n+                    \/** Comment. *\/\n+                    public class C {\n+                        \/**\n+                         * {@return abc {@code def} <b>ghi<\/b> jkl}\n+                         *\/\n+                        public int m() { return 0; }\n+                    }\n+                    \"\"\");\n+\n+        javadoc(\"-Xdoclint:none\",\n+                \"-d\", base.resolve(\"out\").toString(),\n+                \"-sourcepath\", src.toString(),\n+                src.resolve(\"C.java\").toString());\n+        checkExit(Exit.OK);\n+\n+        checkOutput(\"C.html\", true,\n+                \"\"\"\n+                    <div class=\"block\">Returns abc <code>def<\/code> <b>ghi<\/b> jkl.<\/div>\n+                    <dl class=\"notes\">\n+                    <dt>Returns:<\/dt>\n+                    <dd>abc <code>def<\/code> <b>ghi<\/b> jkl<\/dd>\n+                    <\/dl>\n+                    \"\"\");\n+    }\n+\n+    @Test\n+    public void testBlockMarkup(Path base) throws IOException {\n+        Path src = base.resolve(\"src\");\n+        tb.writeJavaFiles(src,\n+                \"\"\"\n+                    \/** Comment. *\/\n+                    public class C {\n+                        \/**\n+                         * @return abc {@code def} <b>ghi<\/b> jkl\n+                         *\/\n+                        public int m() { return 0; }\n+                    }\n+                    \"\"\");\n+\n+        javadoc(\"-Xdoclint:none\",\n+                \"-d\", base.resolve(\"out\").toString(),\n+                \"-sourcepath\", src.toString(),\n+                src.resolve(\"C.java\").toString());\n+        checkExit(Exit.OK);\n+\n+        checkOutput(\"C.html\", true,\n+                \"\"\"\n+                    <dl class=\"notes\">\n+                    <dt>Returns:<\/dt>\n+                    <dd>abc <code>def<\/code> <b>ghi<\/b> jkl<\/dd>\n+                    <\/dl>\n+                    \"\"\");\n+    }\n+\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testReturnTag\/TestReturnTag.java","additions":59,"deletions":0,"binary":false,"changes":59,"status":"modified"}]}