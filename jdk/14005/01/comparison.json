{"files":[{"patch":"@@ -351,3 +351,2 @@\n-            if (getValue(dupString1) == getValue(baseString)) {\n-                throw new RuntimeException(\"Values should not match\");\n-            }\n+\n+            checkNotDeduplicated(getValue(dupString1), getValue(baseString));\n@@ -366,3 +365,2 @@\n-            if (getValue(dupString2) == getValue(baseString)) {\n-                throw new RuntimeException(\"Values should not match\");\n-            }\n+\n+            checkNotDeduplicated(getValue(dupString2), getValue(baseString));\n@@ -387,3 +385,1 @@\n-            if (beforeInternedValue == getValue(baseString)) {\n-                throw new RuntimeException(\"Values should not match\");\n-            }\n+            checkNotDeduplicated(beforeInternedValue, getValue(baseString));\n@@ -394,3 +390,2 @@\n-            if (getValue(dupString3) == getValue(baseString)) {\n-                throw new RuntimeException(\"Values should not match\");\n-            }\n+\n+            checkNotDeduplicated(dupString3, getValue(baseString));\n@@ -413,0 +408,9 @@\n+        private static void checkNotDeduplicated(Object value1, Object value2) {\n+            \/\/ Note that the following check is invalid since a GC\n+            \/\/ can run and actually deduplicate the strings.\n+            \/\/\n+            \/\/ if (value1 == value2) {\n+            \/\/     throw new RuntimeException(\"Values should not match\");\n+            \/\/ }\n+        }\n+\n","filename":"test\/hotspot\/jtreg\/gc\/stringdedup\/TestStringDeduplicationTools.java","additions":16,"deletions":12,"binary":false,"changes":28,"status":"modified"}]}