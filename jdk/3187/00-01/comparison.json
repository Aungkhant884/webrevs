{"files":[{"patch":"@@ -2252,1 +2252,1 @@\n-    _st->print_cr(\"%4d: %s loaded by: %s\", (_index++), record->_klass->external_name(),\n+    _st->print_cr(\"%4d: %s %s\", (_index++), record->_klass->external_name(),\n@@ -2255,0 +2255,1 @@\n+  int index() const { return _index; }\n@@ -2261,1 +2262,1 @@\n-  SharedLambdaDictionaryPrinter(outputStream* st) : _st(st), _index(0) {}\n+  SharedLambdaDictionaryPrinter(outputStream* st, int idx) : _st(st), _index(idx) {}\n@@ -2268,1 +2269,1 @@\n-        _st->print_cr(\"%4d: %s loaded by: %s\", (++_index), k->external_name(),\n+        _st->print_cr(\"%4d: %s %s\", (++_index), k->external_name(),\n@@ -2289,1 +2290,1 @@\n-    SharedLambdaDictionaryPrinter ldp(st);\n+    SharedLambdaDictionaryPrinter ldp(st, p.index());\n@@ -2294,0 +2295,13 @@\n+void SystemDictionaryShared::print_shared_archive(outputStream* st, bool is_static) {\n+  if (UseSharedSpaces) {\n+    if (is_static) {\n+      print_on(\"\", &_builtin_dictionary, &_unregistered_dictionary, &_lambda_proxy_class_dictionary, st);\n+    } else {\n+      if (DynamicArchive::is_mapped()) {\n+        print_on(\"\", &_dynamic_builtin_dictionary, &_dynamic_unregistered_dictionary,\n+               &_dynamic_lambda_proxy_class_dictionary, st);\n+      }\n+    }\n+  }\n+}\n+\n","filename":"src\/hotspot\/share\/classfile\/systemDictionaryShared.cpp","additions":18,"deletions":4,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -319,0 +319,1 @@\n+  static void print_shared_archive(outputStream* st, bool is_static = true) NOT_CDS_RETURN;\n","filename":"src\/hotspot\/share\/classfile\/systemDictionaryShared.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1406,0 +1406,1 @@\n+    SystemDictionaryShared::print_shared_archive(tty);\n@@ -1409,0 +1410,1 @@\n+      SystemDictionaryShared::print_shared_archive(tty, false\/*dynamic*\/);\n@@ -1411,2 +1413,0 @@\n-    SystemDictionaryShared::print_on(tty);\n-\n","filename":"src\/hotspot\/share\/memory\/metaspaceShared.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -79,3 +79,3 @@\n-              .shouldContain(\"java.lang.Object loaded by: boot_loader\")\n-              .shouldContain(\"HelloUnload loaded by: app_loader\")\n-              .shouldContain(\"CustomLoadee loaded by: unregistered_loader\")\n+              .shouldContain(\"java.lang.Object boot_loader\")\n+              .shouldContain(\"HelloUnload app_loader\")\n+              .shouldContain(\"CustomLoadee unregistered_loader\")\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/customLoader\/PrintSharedArchiveAndExit.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -89,3 +89,3 @@\n-                      .shouldContain(\"java.lang.Object loaded by: boot_loader\")\n-                      .shouldContain(\"HelloUnload loaded by: app_loader\")\n-                      .shouldContain(\"CustomLoadee loaded by: unregistered_loader\")\n+                      .shouldContain(\"java.lang.Object boot_loader\")\n+                      .shouldContain(\"HelloUnload app_loader\")\n+                      .shouldContain(\"CustomLoadee unregistered_loader\")\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/dynamicArchive\/PrintSharedArchiveAndExit.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}