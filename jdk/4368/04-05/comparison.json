{"files":[{"patch":"@@ -5930,3 +5930,0 @@\n-    const XMMRegister tmp16_op1 = xmm16;\n-    const XMMRegister tmp16_op2 = xmm17;\n-    const XMMRegister tmp16_op3 = xmm18;\n@@ -5934,3 +5931,0 @@\n-    const XMMRegister tmp32_op1 = xmm13;\n-    const XMMRegister tmp32_op2 = xmm14;\n-    const XMMRegister tmp32_op3 = xmm15;\n@@ -5949,3 +5943,0 @@\n-    const XMMRegister t0 = xmm3;\n-    const XMMRegister t1 = xmm19;\n-    const XMMRegister t2 = xmm20;\n@@ -5963,4 +5954,0 @@\n-    const XMMRegister arr01 = xmm2;\n-    const XMMRegister arr12 = xmm1;\n-    const XMMRegister arr23 = xmm0;\n-\n@@ -6004,2 +5991,0 @@\n-      __ vpxor(errorvec, errorvec, errorvec, Assembler::AVX_512bit);\n-\n@@ -6021,7 +6006,0 @@\n-      __ evmovdquq(tmp16_op3, pack16_op, Assembler::AVX_512bit);\n-      __ evmovdquq(tmp16_op2, pack16_op, Assembler::AVX_512bit);\n-      __ evmovdquq(tmp16_op1, pack16_op, Assembler::AVX_512bit);\n-      __ evmovdquq(tmp32_op3, pack32_op, Assembler::AVX_512bit);\n-      __ evmovdquq(tmp32_op2, pack32_op, Assembler::AVX_512bit);\n-      __ evmovdquq(tmp32_op1, pack32_op, Assembler::AVX_512bit);\n-\n@@ -6049,1 +6027,1 @@\n-      __ vpternlogd(t0, 0xfe, input1, input2, Assembler::AVX_512bit);\n+      __ vpternlogd(input0, 0xfe, input1, input2, Assembler::AVX_512bit);\n@@ -6051,5 +6029,3 @@\n-      __ vpternlogd(t1, 0xfe, translated0, translated1, Assembler::AVX_512bit);\n-      __ evmovdquq(t2, translated2, Assembler::AVX_512bit);\n-      __ vpternlogd(t2, 0xfe, translated3, t0, Assembler::AVX_512bit);\n-      __ evmovdquq(errorvec, t0, Assembler::AVX_512bit);\n-      __ vpternlogd(errorvec, 0xfe, t1, t2, Assembler::AVX_512bit);\n+      __ vpternlogd(input3, 0xfe, translated0, translated1, Assembler::AVX_512bit);\n+      __ vpternlogd(input0, 0xfe, translated1, translated2, Assembler::AVX_512bit);\n+      __ vpor(errorvec, input3, input0, Assembler::AVX_512bit);\n@@ -6060,1 +6036,0 @@\n-      __ vpxor(errorvec, errorvec, errorvec, Assembler::AVX_512bit);\n@@ -6067,3 +6042,3 @@\n-      __ vpmaddubsw(merge_ab_bc0, translated0, tmp16_op3, Assembler::AVX_512bit);\n-      __ vpmaddubsw(merge_ab_bc1, translated1, tmp16_op2, Assembler::AVX_512bit);\n-      __ vpmaddubsw(merge_ab_bc2, translated2, tmp16_op1, Assembler::AVX_512bit);\n+      __ vpmaddubsw(merge_ab_bc0, translated0, pack16_op, Assembler::AVX_512bit);\n+      __ vpmaddubsw(merge_ab_bc1, translated1, pack16_op, Assembler::AVX_512bit);\n+      __ vpmaddubsw(merge_ab_bc2, translated2, pack16_op, Assembler::AVX_512bit);\n@@ -6076,3 +6051,3 @@\n-      __ vpmaddwd(merged0, merge_ab_bc0, tmp32_op2, Assembler::AVX_512bit);\n-      __ vpmaddwd(merged1, merge_ab_bc1, tmp32_op1, Assembler::AVX_512bit);\n-      __ vpmaddwd(merged2, merge_ab_bc2, tmp32_op3, Assembler::AVX_512bit);\n+      __ vpmaddwd(merged0, merge_ab_bc0, pack32_op, Assembler::AVX_512bit);\n+      __ vpmaddwd(merged1, merge_ab_bc1, pack32_op, Assembler::AVX_512bit);\n+      __ vpmaddwd(merged2, merge_ab_bc2, pack32_op, Assembler::AVX_512bit);\n@@ -6084,3 +6059,3 @@\n-      __ evpermt2b(arr01, join01, merged1, Assembler::AVX_512bit);\n-      __ evpermt2b(arr12, join12, merged2, Assembler::AVX_512bit);\n-      __ evpermt2b(arr23, join23, merged3, Assembler::AVX_512bit);\n+      __ evpermt2b(merged0, join01, merged1, Assembler::AVX_512bit);\n+      __ evpermt2b(merged1, join12, merged2, Assembler::AVX_512bit);\n+      __ evpermt2b(merged2, join23, merged3, Assembler::AVX_512bit);\n@@ -6089,3 +6064,3 @@\n-      __ evmovdquq(Address(dest, dp, Address::times_1, 0x00), arr01, Assembler::AVX_512bit);\n-      __ evmovdquq(Address(dest, dp, Address::times_1, 0x40), arr12, Assembler::AVX_512bit);\n-      __ evmovdquq(Address(dest, dp, Address::times_1, 0x80), arr23, Assembler::AVX_512bit);\n+      __ evmovdquq(Address(dest, dp, Address::times_1, 0x00), merged0, Assembler::AVX_512bit);\n+      __ evmovdquq(Address(dest, dp, Address::times_1, 0x40), merged1, Assembler::AVX_512bit);\n+      __ evmovdquq(Address(dest, dp, Address::times_1, 0x80), merged2, Assembler::AVX_512bit);\n@@ -6122,1 +6097,1 @@\n-      __ vpternlogd(errorvec, 0xfe, translated0, input0, Assembler::AVX_512bit);\n+      __ vpor(errorvec, translated0, input0, Assembler::AVX_512bit);\n@@ -6152,2 +6127,0 @@\n-      __ movl(output_size, 0x40);\n-      __ subl(output_size, length);\n@@ -6155,1 +6128,1 @@\n-      __ shrxq(rax, rax, output_size);    \/\/ Input mask in rax\n+      __ bzhiq(rax, rax, length);    \/\/ Input mask in rax\n@@ -6169,1 +6142,0 @@\n-      __ movq(output_mask, -1);\n@@ -6171,3 +6143,2 @@\n-      __ movq(rax, 64);\n-      __ subq(rax, output_size);\n-      __ shrxq(output_mask, output_mask, rax);\n+      __ movq(output_mask, -1);\n+      __ bzhiq(output_mask, output_mask, output_size);\n@@ -6243,1 +6214,1 @@\n-      __ decrementq(r13, 1);\n+      __ decrementq(output_size, 1);\n@@ -6249,1 +6220,1 @@\n-      __ decrementq(r13, 1);\n+      __ decrementq(output_size, 1);\n@@ -6319,2 +6290,2 @@\n-    __ load_signed_byte(byte1, Address(source, start_offset, Address::times_1, 0x00));\n-    __ load_signed_byte(byte2, Address(source, start_offset, Address::times_1, 0x01));\n+    __ load_unsigned_byte(byte1, Address(source, start_offset, Address::times_1, 0x00));\n+    __ load_unsigned_byte(byte2, Address(source, start_offset, Address::times_1, 0x01));\n@@ -6323,2 +6294,2 @@\n-    __ load_signed_byte(byte3, Address(source, start_offset, Address::times_1, 0x02));\n-    __ load_signed_byte(byte4, Address(source, start_offset, Address::times_1, 0x03));\n+    __ load_unsigned_byte(byte3, Address(source, start_offset, Address::times_1, 0x02));\n+    __ load_unsigned_byte(byte4, Address(source, start_offset, Address::times_1, 0x03));\n","filename":"src\/hotspot\/cpu\/x86\/stubGenerator_x86_64.cpp","additions":26,"deletions":55,"binary":false,"changes":81,"status":"modified"}]}