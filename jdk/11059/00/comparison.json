{"files":[{"patch":"@@ -513,0 +513,19 @@\n+#ifdef AMD64\n+  unsigned char code_buffer[8];\n+\n+  assert(sizeof(code_buffer)==sizeof(jlong), \"sanity check\");\n+\n+  intptr_t disp = (intptr_t)dest - ((intptr_t)verified_entry + 1 + 4);\n+  guarantee(disp == (intptr_t)(int32_t)disp, \"must be 32-bit offset\");\n+\n+  \/\/ save extra 3 bytes\n+  *(jlong *) code_buffer = *(jlong *) verified_entry;\n+  code_buffer[0] = instruction_code;\n+  *(int32_t*)(code_buffer + 1) = (int32_t)disp;\n+\n+  check_verified_entry_alignment(entry, verified_entry);\n+\n+  Atomic::store((jlong *) verified_entry, *(jlong *) code_buffer);\n+  ICache::invalidate_range(verified_entry, 8);\n+\n+#else\n@@ -516,3 +535,0 @@\n-#ifdef AMD64\n-  guarantee(disp == (intptr_t)(int32_t)disp, \"must be 32-bit offset\");\n-#endif \/\/ AMD64\n@@ -549,0 +565,1 @@\n+#endif \/\/ AMD64\n","filename":"src\/hotspot\/cpu\/x86\/nativeInst_x86.cpp","additions":20,"deletions":3,"binary":false,"changes":23,"status":"modified"}]}