{"files":[{"patch":"@@ -64,5 +64,4 @@\n-  enum {\n-    _WordBits    = BitsPerWord,\n-    _LogWordBits = LogBitsPerWord,\n-    _RM_SIZE     = LP64_ONLY(RM_SIZE >> 1) NOT_LP64(RM_SIZE)\n-  };\n+  static const unsigned int _WordBitMask = BitsPerWord - 1U;\n+  static const unsigned int _LogWordBits = LogBitsPerWord;\n+  static const unsigned int _RM_SIZE     = LP64_ONLY(RM_SIZE >> 1) NOT_LP64(RM_SIZE);\n+  static const unsigned int _RM_MAX      = _RM_SIZE - 1U;\n@@ -127,1 +126,1 @@\n-    _hwm = _RM_SIZE - 1;\n+    _hwm = _RM_MAX;\n@@ -144,1 +143,1 @@\n-  RegMask() : _RM_UP(), _lwm(_RM_SIZE - 1), _hwm(0) {\n+  RegMask() : _RM_UP(), _lwm(_RM_MAX), _hwm(0) {\n@@ -158,1 +157,1 @@\n-    return _RM_UP[r >> _LogWordBits] & (uintptr_t(1) <<(r & (_WordBits - 1U)));\n+    return _RM_UP[r >> _LogWordBits] & (uintptr_t(1) << (r & _WordBitMask));\n@@ -165,1 +164,1 @@\n-    return (_RM_UP[_RM_SIZE - 1U] & (uintptr_t(1) << (_WordBits - 1U))) != 0;\n+    return (_RM_UP[_RM_MAX] & (uintptr_t(1) << _WordBitMask)) != 0;\n@@ -169,1 +168,1 @@\n-    _RM_UP[_RM_SIZE - 1U] |= (uintptr_t(1) << (_WordBits - 1U));\n+    _RM_UP[_RM_MAX] |= (uintptr_t(1) << _WordBitMask);\n@@ -188,1 +187,1 @@\n-        return OptoReg::Name((i<<_LogWordBits) + find_lowest_bit(bits));\n+        return OptoReg::Name((i << _LogWordBits) + find_lowest_bit(bits));\n@@ -202,1 +201,1 @@\n-        return OptoReg::Name((i<<_LogWordBits) + find_highest_bit(bits));\n+        return OptoReg::Name((i << _LogWordBits) + find_highest_bit(bits));\n@@ -280,1 +279,1 @@\n-    _lwm = _RM_SIZE - 1;\n+    _lwm = _RM_MAX;\n@@ -282,1 +281,1 @@\n-    memset(_RM_UP, 0, sizeof(uintptr_t)*_RM_SIZE);\n+    memset(_RM_UP, 0, sizeof(uintptr_t) * _RM_SIZE);\n@@ -289,2 +288,2 @@\n-    _hwm = _RM_SIZE - 1;\n-    memset(_RM_UP, 0xFF, sizeof(uintptr_t)*_RM_SIZE);\n+    _hwm = _RM_MAX;\n+    memset(_RM_UP, 0xFF, sizeof(uintptr_t) * _RM_SIZE);\n@@ -304,1 +303,1 @@\n-    _RM_UP[index] |= (uintptr_t(1) << (r & (_WordBits - 1U)));\n+    _RM_UP[index] |= (uintptr_t(1) << (r & _WordBitMask));\n@@ -312,1 +311,1 @@\n-    _RM_UP[r >> _LogWordBits] &= ~(uintptr_t(1) << (r & (_WordBits-1U)));\n+    _RM_UP[r >> _LogWordBits] &= ~(uintptr_t(1) << (r & _WordBitMask));\n@@ -365,1 +364,1 @@\n-    return (int)reg < (int)(CHUNK_SIZE-1);\n+    return (int)reg < (int)(CHUNK_SIZE - 1);\n@@ -370,1 +369,1 @@\n-    return (int)reg < (int)(CHUNK_SIZE-SlotsPerVecZ);\n+    return (int)reg < (int)(CHUNK_SIZE - SlotsPerVecZ);\n@@ -379,1 +378,1 @@\n-  const RegMask&  _rm;\n+  const RegMask& _rm;\n","filename":"src\/hotspot\/share\/opto\/regmask.hpp","additions":20,"deletions":21,"binary":false,"changes":41,"status":"modified"}]}