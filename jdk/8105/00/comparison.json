{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,1 @@\n+ * @library \/test\/lib\n@@ -39,0 +40,2 @@\n+\n+import jdk.test.lib.net.HttpHeaderParser;\n@@ -103,2 +106,3 @@\n-                MessageHeader header = new MessageHeader (is);\n-                String raw = header.findValue (\"Proxy-Authorization\");\n+                HttpHeaderParser header = new HttpHeaderParser (is);\n+                String raw = header.getHeaderValue(\"Proxy-Authorization\") != null ?\n+                        header.getHeaderValue(\"Proxy-Authorization\").get(0) : null;\n","filename":"test\/jdk\/java\/net\/Authenticator\/B6870935.java","additions":7,"deletions":3,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,0 @@\n- * @modules java.base\/sun.net.www\n@@ -41,1 +40,0 @@\n-import static java.lang.System.out;\n@@ -50,0 +48,3 @@\n+\n+import static java.lang.System.out;\n+import jdk.test.lib.net.HttpHeaderParser;\n@@ -51,1 +52,0 @@\n-import sun.net.www.MessageHeader;\n@@ -247,2 +247,2 @@\n-            MessageHeader mheader = new MessageHeader(clientSocket.getInputStream());\n-            String statusLine = mheader.getValue(0);\n+            HttpHeaderParser mheader = new HttpHeaderParser(clientSocket.getInputStream());\n+            String statusLine = mheader.getRequestDetails();\n","filename":"test\/jdk\/java\/net\/Socket\/HttpProxy.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,2 +27,1 @@\n- * @modules java.base\/sun.net.www\n- *          java.net.http\n+ * @library \/test\/lib\n@@ -55,1 +54,2 @@\n-import sun.net.www.MessageHeader;\n+\n+import jdk.test.lib.net.HttpHeaderParser;\n@@ -159,1 +159,1 @@\n-                    MessageHeader headers = new MessageHeader(in);\n+                    HttpHeaderParser headers = new HttpHeaderParser(in);\n@@ -162,1 +162,2 @@\n-                    String authInfo = headers.findValue(\"Proxy-Authorization\");\n+                    String authInfo = headers.getHeaderValue(\"Proxy-Authorization\") != null ?\n+                            headers.getHeaderValue(\"Proxy-Authorization\").get(0) : null;\n","filename":"test\/jdk\/java\/net\/httpclient\/ProxyAuthTest.java","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,1 @@\n+ * @library \/test\/lib\n@@ -47,1 +48,3 @@\n-import sun.net.www.*;\n+import sun.net.www.HeaderParser;\n+\n+import jdk.test.lib.net.HttpHeaderParser;\n@@ -102,2 +105,3 @@\n-                MessageHeader header = new MessageHeader (is);\n-                String raw = header.findValue (\"Authorization\");\n+                HttpHeaderParser header = new HttpHeaderParser (is);\n+                String raw = header.getHeaderValue(\"Authorization\") != null ?\n+                        header.getHeaderValue(\"Authorization\").get(0) : null;\n","filename":"test\/jdk\/sun\/net\/www\/protocol\/http\/DigestTest.java","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,0 @@\n- * @modules java.base\/sun.net.www\n@@ -55,1 +54,2 @@\n-import sun.net.www.MessageHeader;\n+\n+import jdk.test.lib.net.HttpHeaderParser;\n@@ -267,1 +267,1 @@\n-            new MessageHeader(is);\n+            new HttpHeaderParser(is);\n@@ -270,1 +270,1 @@\n-            new MessageHeader(is);\n+            new HttpHeaderParser(is);\n@@ -272,1 +272,1 @@\n-            new MessageHeader(is);\n+            new HttpHeaderParser(is);\n@@ -279,1 +279,1 @@\n-            new MessageHeader(is);\n+            new HttpHeaderParser(is);\n@@ -282,1 +282,1 @@\n-            new MessageHeader(is);\n+            new HttpHeaderParser(is);\n@@ -284,1 +284,1 @@\n-            new MessageHeader(is);\n+            new HttpHeaderParser(is);\n@@ -291,1 +291,1 @@\n-            new MessageHeader(is);\n+            new HttpHeaderParser(is);\n@@ -294,1 +294,1 @@\n-            new MessageHeader(is);\n+            new HttpHeaderParser(is);\n@@ -296,1 +296,1 @@\n-            new MessageHeader(is);\n+            new HttpHeaderParser(is);\n","filename":"test\/jdk\/sun\/net\/www\/protocol\/http\/NTLMHeadTest.java","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,2 +32,8 @@\n-import java.io.*;\n-import java.net.*;\n+import java.io.Closeable;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.io.PrintWriter;\n+import java.net.InetAddress;\n+import java.net.ServerSocket;\n+import java.net.Socket;\n@@ -35,3 +41,2 @@\n-import javax.net.ssl.*;\n-import javax.net.ServerSocketFactory;\n-import sun.net.www.*;\n+\n+import jdk.test.lib.net.HttpHeaderParser;\n@@ -132,2 +137,2 @@\n-        MessageHeader mheader = new MessageHeader(in);\n-        String statusLine = mheader.getValue(0);\n+        HttpHeaderParser mheader = new HttpHeaderParser(in);\n+        String statusLine = mheader.getRequestDetails();\n@@ -142,2 +147,3 @@\n-                if ((authInfo = mheader.findValue(\"Proxy-Authorization\"))\n-                                         != null) {\n+                if ((authInfo = (mheader.getHeaderValue(\"Proxy-Authorization\") != null ?\n+                        mheader.getHeaderValue(\"Proxy-Authorization\").get(0) : null))\n+                        != null) {\n","filename":"test\/jdk\/sun\/net\/www\/protocol\/http\/ProxyTunnelServer.java","additions":16,"deletions":10,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @library \/test\/lib\n","filename":"test\/jdk\/sun\/net\/www\/protocol\/http\/TunnelThroughProxy.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -36,1 +36,1 @@\n- * @library \/javax\/net\/ssl\/templates\n+ * @library \/test\/lib \/javax\/net\/ssl\/templates\n","filename":"test\/jdk\/sun\/net\/www\/protocol\/https\/HttpsClient\/ProxyAuthTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,5 +31,8 @@\n-import java.io.*;\n-import java.net.*;\n-import javax.net.ssl.*;\n-import javax.net.ServerSocketFactory;\n-import sun.net.www.*;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.io.PrintWriter;\n+import java.net.InetAddress;\n+import java.net.InetSocketAddress;\n+import java.net.ServerSocket;\n+import java.net.Socket;\n@@ -38,0 +41,4 @@\n+import javax.net.ServerSocketFactory;\n+\n+import jdk.test.lib.net.HttpHeaderParser;\n+\n@@ -116,2 +123,2 @@\n-        MessageHeader mheader = new MessageHeader(in);\n-        String statusLine = mheader.getValue(0);\n+        HttpHeaderParser mheader = new HttpHeaderParser(in);\n+        String statusLine = mheader.getRequestDetails();\n@@ -124,1 +131,2 @@\n-                if ((authInfo = mheader.findValue(\"Proxy-Authorization\"))\n+                if ((authInfo = (mheader.getHeaderValue(\"Proxy-Authorization\") != null) ?\n+                        mheader.getHeaderValue(\"Proxy-Authorization\").get(0) : null)\n","filename":"test\/jdk\/sun\/net\/www\/protocol\/https\/HttpsClient\/ProxyTunnelServer.java","additions":17,"deletions":9,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,4 +33,8 @@\n-import java.io.*;\n-import java.net.*;\n-import javax.net.ServerSocketFactory;\n-import sun.net.www.*;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.io.PrintWriter;\n+import java.net.InetAddress;\n+import java.net.ServerSocket;\n+import java.net.Socket;\n+import java.net.SocketTimeoutException;\n@@ -39,0 +43,4 @@\n+import javax.net.ServerSocketFactory;\n+\n+import jdk.test.lib.net.HttpHeaderParser;\n+\n@@ -133,2 +141,2 @@\n-        MessageHeader mheader = new MessageHeader(in);\n-        String statusLine = mheader.getValue(0);\n+        HttpHeaderParser mheader = new HttpHeaderParser(in);\n+        String statusLine = mheader.getRequestDetails();\n@@ -142,2 +150,3 @@\n-                if ((authInfo = mheader.findValue(\"Proxy-Authorization\"))\n-                                         != null) {\n+                if ((authInfo = (mheader.getHeaderValue(\"Proxy-Authorization\") != null ?\n+                        mheader.getHeaderValue(\"Proxy-Authorization\").get(0) : null))\n+                        != null) {\n","filename":"test\/jdk\/sun\/net\/www\/protocol\/https\/HttpsURLConnection\/ProxyTunnelServer.java","additions":18,"deletions":9,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+ * @library \/test\/lib\n","filename":"test\/jdk\/sun\/security\/ssl\/InputRecord\/ClientHelloRead.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -39,1 +39,1 @@\n-import sun.net.www.MessageHeader;\n+import jdk.test.lib.net.HttpHeaderParser;\n@@ -85,2 +85,2 @@\n-        MessageHeader response = new MessageHeader(in);\n-        String statusLine = response.getValue(0);\n+        HttpHeaderParser response = new HttpHeaderParser(in);\n+        String statusLine = response.getRequestDetails();\n","filename":"test\/jdk\/sun\/security\/ssl\/InputRecord\/ProxyTunnelServer.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}