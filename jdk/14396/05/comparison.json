{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -55,1 +55,1 @@\n-    constexpr int raw_encoding() const { return this - first(); }\n+    constexpr int raw_encoding() const { return checked_cast<int>(this - first()); }\n@@ -178,1 +178,1 @@\n-    constexpr int raw_encoding() const { return this - first(); }\n+    constexpr int raw_encoding() const { return checked_cast<int>(this - first()); }\n@@ -311,1 +311,1 @@\n-    int raw_encoding() const  { return this - first(); }\n+    int raw_encoding() const  { return checked_cast<int>(this - first()); }\n","filename":"src\/hotspot\/cpu\/aarch64\/register_aarch64.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -73,1 +73,1 @@\n-    constexpr int raw_encoding() const { return this - first(); }\n+    constexpr int raw_encoding() const { return checked_cast<int>(this - first()); }\n@@ -190,1 +190,1 @@\n-    constexpr int raw_encoding() const { return this - first(); }\n+    constexpr int raw_encoding() const { return checked_cast<int>(this - first()); }\n@@ -300,1 +300,1 @@\n-    constexpr int raw_encoding() const { return this - first(); }\n+    constexpr int raw_encoding() const { return checked_cast<int>(this - first()); }\n","filename":"src\/hotspot\/cpu\/riscv\/register_riscv.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -1910,1 +1910,1 @@\n-  emit_int8((int8_t)0xF2);\n+  emit_int8((uint8_t)0xF2);\n@@ -2431,1 +2431,1 @@\n-      emit_int32(offs - long_size);\n+      emit_int32((int)(offs - long_size));\n@@ -2485,1 +2485,1 @@\n-      emit_int32(offs - long_size);\n+      emit_int32((int)(offs - long_size));\n@@ -2510,1 +2510,1 @@\n-  emit_data(disp, rspec, call32_operand);\n+  emit_data(checked_cast<int32_t>(disp), rspec, call32_operand);\n@@ -6361,1 +6361,1 @@\n-    emit_int32(offset - 6); \/\/ 2 opcode + 4 address\n+    emit_int32((int)(offset - 6)); \/\/ 2 opcode + 4 address\n","filename":"src\/hotspot\/cpu\/x86\/assembler_x86.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -241,1 +241,1 @@\n-      _disp (disp + (index.constant_or_zero() * scale_size(scale))),\n+      _disp (disp + checked_cast<int>(index.constant_or_zero() * scale_size(scale))),\n@@ -279,1 +279,1 @@\n-    a._disp += disp.constant_or_zero() * scale_size(scale);\n+    a._disp += checked_cast<int>(disp.constant_or_zero() * scale_size(scale));\n@@ -458,1 +458,1 @@\n-  enum Condition {                     \/\/ The x86 condition codes used for conditional jumps\/moves.\n+  enum Condition : uint8_t {                     \/\/ The x86 condition codes used for conditional jumps\/moves.\n@@ -481,1 +481,1 @@\n-  enum Prefix {\n+  enum Prefix : uint8_t {\n@@ -516,1 +516,1 @@\n-  enum VexPrefix {\n+  enum VexPrefix : uint8_t {\n@@ -523,1 +523,1 @@\n-  enum ExexPrefix {\n+  enum ExexPrefix : uint8_t {\n@@ -531,1 +531,1 @@\n-  enum VexSimdPrefix {\n+  enum VexSimdPrefix : uint8_t {\n@@ -538,1 +538,1 @@\n-  enum VexOpcode {\n+  enum VexOpcode : uint8_t {\n@@ -546,1 +546,1 @@\n-  enum AvxVectorLen {\n+  enum AvxVectorLen : uint8_t {\n@@ -553,1 +553,1 @@\n-  enum EvexTupleType {\n+  enum EvexTupleType : uint8_t {\n@@ -570,1 +570,1 @@\n-  enum EvexInputSizeInBits {\n+  enum EvexInputSizeInBits : uint8_t {\n@@ -606,1 +606,1 @@\n-  enum ComparisonPredicateFP {\n+  enum ComparisonPredicateFP : uint8_t {\n","filename":"src\/hotspot\/cpu\/x86\/assembler_x86.hpp","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -2038,4 +2038,4 @@\n-  emit_int8((int8_t)0x0f);\n-  emit_int8((int8_t)0x1f);\n-  emit_int8((int8_t)0x84);\n-  emit_int8((int8_t)0x00);\n+  emit_int8((uint8_t)0x0f);\n+  emit_int8((uint8_t)0x1f);\n+  emit_int8((uint8_t)0x84);\n+  emit_int8((uint8_t)0x00);\n@@ -2050,5 +2050,5 @@\n-    emit_int8((int8_t)0x26); \/\/ es:\n-    emit_int8((int8_t)0x2e); \/\/ cs:\n-    emit_int8((int8_t)0x64); \/\/ fs:\n-    emit_int8((int8_t)0x65); \/\/ gs:\n-    emit_int8((int8_t)0x90);\n+    emit_int8((uint8_t)0x26); \/\/ es:\n+    emit_int8((uint8_t)0x2e); \/\/ cs:\n+    emit_int8((uint8_t)0x64); \/\/ fs:\n+    emit_int8((uint8_t)0x65); \/\/ gs:\n+    emit_int8((uint8_t)0x90);\n","filename":"src\/hotspot\/cpu\/x86\/macroAssembler_x86.cpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -120,1 +120,1 @@\n-      int imm8 = target - (address) &disp[1];\n+      int imm8 = checked_cast<int>(target - (address) &disp[1]);\n@@ -123,1 +123,1 @@\n-      *disp = imm8;\n+      *disp = (char)imm8;\n@@ -126,1 +126,1 @@\n-      int imm32 = target - (address) &disp[1];\n+      int imm32 = checked_cast<int>(target - (address) &disp[1]);\n@@ -752,1 +752,1 @@\n-    if (src.is_constant()) addptr(dst, src.as_constant());\n+    if (src.is_constant()) addptr(dst, checked_cast<int>(src.as_constant()));\n","filename":"src\/hotspot\/cpu\/x86\/macroAssembler_x86.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -59,1 +59,1 @@\n-    constexpr int   raw_encoding() const { return this - first(); }\n+    constexpr int   raw_encoding() const { return checked_cast<int>(this - first()); }\n@@ -142,1 +142,1 @@\n-    int   raw_encoding() const { return this - first(); }\n+    int   raw_encoding() const { return checked_cast<int>(this - first()); }\n@@ -205,1 +205,1 @@\n-    constexpr int raw_encoding() const { return this - first(); }\n+    constexpr int raw_encoding() const { return checked_cast<int>(this - first()); }\n@@ -316,1 +316,1 @@\n-    int   raw_encoding() const { return this - first(); }\n+    int   raw_encoding() const { return checked_cast<int>(this - first()); }\n","filename":"src\/hotspot\/cpu\/x86\/register_x86.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -3140,2 +3140,2 @@\n-intx VM_Version::L1_line_size() {\n-  intx result = 0;\n+uint VM_Version::L1_line_size() {\n+  uint result = 0;\n","filename":"src\/hotspot\/cpu\/x86\/vm_version_x86.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -636,1 +636,1 @@\n-  static intx L1_line_size();\n+  static uint L1_line_size();\n@@ -638,1 +638,1 @@\n-  static intx prefetch_data_size()  {\n+  static uint prefetch_data_size()  {\n","filename":"src\/hotspot\/cpu\/x86\/vm_version_x86.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -89,1 +89,1 @@\n-  int pad = -(intptr_t)end & (required_align-1);\n+  int pad = checked_cast<int>(-(intptr_t)end & (required_align-1));\n","filename":"src\/hotspot\/share\/asm\/assembler.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -37,0 +37,2 @@\n+#include <limits>\n+\n@@ -225,1 +227,1 @@\n-  bool is8bit(int x) const             { return -0x80 <= x && x < 0x80; }\n+  bool is8bit(intptr_t x) const        { return -0x80 <= x && x < 0x80; }\n@@ -255,1 +257,1 @@\n-      _assm->register_skipped(_assm->pc() - _start);\n+      _assm->register_skipped(checked_cast<int>(_assm->pc() - _start));\n@@ -293,0 +295,9 @@\n+  \/\/ -1 tolerant cast needed by callers of emit_int8 and emit_int16\n+  template <typename T>\n+  constexpr T cast(int x) const {\n+   if (x == -1) {\n+    return std::numeric_limits<T>::max();\n+   } else {\n+     return checked_cast<T>(x); }\n+  }\n+\n@@ -301,1 +312,2 @@\n-  void emit_int8(   uint8_t x1)                                     { code_section()->emit_int8(x1); }\n+  void emit_int8(uint8_t v) { code_section()->emit_int8(v); }\n+  void emit_int8(int v)     { emit_int8(cast<uint8_t>(v)); }\n@@ -303,2 +315,2 @@\n-  void emit_int16(  uint16_t x)                                     { code_section()->emit_int16(x); }\n-  void emit_int16(  uint8_t x1, uint8_t x2)                         { code_section()->emit_int16(x1, x2); }\n+  void emit_int16(uint16_t x)   { code_section()->emit_int16(x); }\n+  void emit_int16(int x)        { emit_int16(cast<uint16_t>(x)); }\n@@ -306,1 +318,3 @@\n-  void emit_int24(  uint8_t x1, uint8_t x2, uint8_t x3)             { code_section()->emit_int24(x1, x2, x3); }\n+  void emit_int16(int x1, int x2)                 { code_section()->emit_int16(cast<uint8_t>(x1), cast<uint8_t>(x2)); }\n+  void emit_int24(int x1, int x2, int x3)         { code_section()->emit_int24(cast<uint8_t>(x1), cast<uint8_t>(x2),\n+                                                                               cast<uint8_t>(x3)); }\n@@ -308,2 +322,3 @@\n-  void emit_int32(  uint32_t x)                                     { code_section()->emit_int32(x); }\n-  void emit_int32(  uint8_t x1, uint8_t x2, uint8_t x3, uint8_t x4) { code_section()->emit_int32(x1, x2, x3, x4); }\n+  void emit_int32(uint32_t x)                     { code_section()->emit_int32(x); }\n+  void emit_int32(int x1, int x2, int x3, int x4) { code_section()->emit_int32(cast<uint8_t>(x1), cast<uint8_t>(x2),\n+                                                                               cast<uint8_t>(x3), cast<uint8_t>(x4)); }\n@@ -311,1 +326,1 @@\n-  void emit_int64(  uint64_t x)                                     { code_section()->emit_int64(x); }\n+  void emit_int64(  uint64_t x)                   { code_section()->emit_int64(x); }\n@@ -313,3 +328,3 @@\n-  void emit_float(  jfloat  x)                                      { code_section()->emit_float(x); }\n-  void emit_double( jdouble x)                                      { code_section()->emit_double(x); }\n-  void emit_address(address x)                                      { code_section()->emit_address(x); }\n+  void emit_float(  jfloat  x)                    { code_section()->emit_float(x); }\n+  void emit_double( jdouble x)                    { code_section()->emit_double(x); }\n+  void emit_address(address x)                    { code_section()->emit_address(x); }\n","filename":"src\/hotspot\/share\/asm\/assembler.hpp","additions":27,"deletions":12,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-VMReg VMRegImpl::stack0 = (VMReg)VMRegImpl::stack_0()->value();\n+VMReg VMRegImpl::stack0 = (VMReg)(intptr_t)VMRegImpl::stack_0()->value();\n@@ -45,1 +45,1 @@\n-    assert(VMRegImpl::regName[value()], \"VMRegImpl::regName[\" INTPTR_FORMAT \"] returns nullptr\", value());\n+    assert(VMRegImpl::regName[value()], \"VMRegImpl::regName[%d] returns nullptr\", value());\n","filename":"src\/hotspot\/share\/code\/vmreg.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -91,1 +91,1 @@\n-  intptr_t value() const { return this - first(); }\n+  int value() const { return checked_cast<int>(this - first()); }\n@@ -146,1 +146,1 @@\n-  uintptr_t reg2stack() const {\n+  int reg2stack() const {\n@@ -148,1 +148,1 @@\n-    return this - stack_0();\n+    return checked_cast<int>(this - stack_0());\n","filename":"src\/hotspot\/share\/code\/vmreg.hpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -284,1 +284,1 @@\n-        tty->print_cr(\"[%c][%d] -> reg (\" INTPTR_FORMAT \")\", omv.type() == OopMapValue::narrowoop_value ? 'n' : 'o', i, omv.reg()->value());\n+        tty->print_cr(\"[%c][%d] -> reg (%d)\", omv.type() == OopMapValue::narrowoop_value ? 'n' : 'o', i, omv.reg()->value());\n@@ -286,1 +286,1 @@\n-        tty->print_cr(\"[%c][%d] -> stack (\"  INTPTR_FORMAT \")\", omv.type() == OopMapValue::narrowoop_value ? 'n' : 'o', i, omv.reg()->reg2stack() * VMRegImpl::stack_slot_size);\n+        tty->print_cr(\"[%c][%d] -> stack (%d)\", omv.type() == OopMapValue::narrowoop_value ? 'n' : 'o', i, omv.reg()->reg2stack() * VMRegImpl::stack_slot_size);\n@@ -290,1 +290,1 @@\n-        tty->print_cr(\"[d][%d] -> reg (\" INTPTR_FORMAT \") stack (\" INTPTR_FORMAT \")\", i, omv.content_reg()->value(), omv.reg()->reg2stack() * VMRegImpl::stack_slot_size);\n+        tty->print_cr(\"[d][%d] -> reg (%d) stack (%d)\", i, omv.content_reg()->value(), omv.reg()->reg2stack() * VMRegImpl::stack_slot_size);\n@@ -292,1 +292,1 @@\n-        tty->print_cr(\"[d][%d] -> stack (\" INTPTR_FORMAT \") reg (\" INTPTR_FORMAT \")\", i, omv.content_reg()->reg2stack() * VMRegImpl::stack_slot_size, omv.reg()->value());\n+        tty->print_cr(\"[d][%d] -> stack (%d) reg (%d)\", i, omv.content_reg()->reg2stack() * VMRegImpl::stack_slot_size, omv.reg()->value());\n","filename":"src\/hotspot\/share\/compiler\/oopMap.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -57,3 +57,3 @@\n-  short _value;\n-  int value() const                                 { return _value; }\n-  void set_value(int value)                         { _value = value; }\n+  unsigned short _value;\n+  unsigned short value() const                      { return _value; }\n+  void set_value(unsigned short value)              { _value = value; }\n@@ -91,2 +91,2 @@\n-    void set_reg_type(VMReg p, oop_types t) {\n-    set_value((p->value() << register_shift) | t);\n+  void set_reg_type(VMReg p, oop_types t) {\n+    set_value(checked_cast<unsigned short>((p->value() << register_shift) | t));\n@@ -106,1 +106,1 @@\n-    _content_reg = r->value();\n+    _content_reg = checked_cast<short>(r->value());\n@@ -114,1 +114,1 @@\n-      stream->write_int(content_reg()->value());\n+      stream->write_int(checked_cast<int>(content_reg()->value()));\n@@ -119,1 +119,1 @@\n-    set_value(stream->read_int());\n+    set_value(checked_cast<unsigned short>(stream->read_int()));\n@@ -131,1 +131,1 @@\n-  VMReg reg() const { return VMRegImpl::as_VMReg(mask_bits(value(), register_mask_in_place) >> register_shift); }\n+  VMReg reg() const { return VMRegImpl::as_VMReg(checked_cast<int>(mask_bits(value(), register_mask_in_place) >> register_shift)); }\n","filename":"src\/hotspot\/share\/compiler\/oopMap.hpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -116,1 +116,1 @@\n-        tty->print_cr(\"missing saved register: reg: \" INTPTR_FORMAT \" %s loc: %p\", reg->value(), reg->name(), loc);\n+        tty->print_cr(\"missing saved register: reg: %d %s loc: %p\", reg->value(), reg->name(), loc);\n","filename":"src\/hotspot\/share\/compiler\/oopMap.inline.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1015,1 +1015,1 @@\n-      assert(loc != nullptr, \"missing register map entry reg: \" INTPTR_FORMAT \" %s loc: \" INTPTR_FORMAT, reg->value(), reg->name(), p2i(loc));\n+      assert(loc != nullptr, \"missing register map entry reg: %d %s loc: \" INTPTR_FORMAT, reg->value(), reg->name(), p2i(loc));\n@@ -1444,1 +1444,1 @@\n-          assert(((int)fst->reg2stack()) >= 0, \"reg2stack: \" INTPTR_FORMAT, fst->reg2stack());\n+          assert(((int)fst->reg2stack()) >= 0, \"reg2stack: %d\", fst->reg2stack());\n","filename":"src\/hotspot\/share\/runtime\/frame.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -517,1 +517,1 @@\n-    return a->location - b->location;\n+    return checked_cast<int>(a->location - b->location);\n","filename":"src\/hotspot\/share\/runtime\/frame.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1998,1 +1998,1 @@\n-    assert(a->value() == b->value(), \"register allocation mismatch: a=\" INTX_FORMAT \", b=\" INTX_FORMAT, a->value(), b->value());\n+    assert(a->value() == b->value(), \"register allocation mismatch: a= %d, b= %d\", a->value(), b->value());\n","filename":"src\/hotspot\/share\/runtime\/sharedRuntime.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -520,1 +520,1 @@\n-T2 checked_cast(T1 thing) {\n+constexpr T2 checked_cast(T1 thing) {\n","filename":"src\/hotspot\/share\/utilities\/globalDefinitions.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}