{"files":[{"patch":"@@ -78,1 +78,0 @@\n-FileChooser.customApproveButton.textAndMnemonic=Open\n@@ -99,1 +98,0 @@\n-FileChooser.customApproveButtonToolTip.textAndMnemonic=Open selected file\n","filename":"src\/java.desktop\/share\/classes\/com\/sun\/swing\/internal\/plaf\/basic\/resources\/basic.properties","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -124,2 +124,0 @@\n-    \/** Custom button Fallback mnemonic *\/\n-    protected int customApproveButtonMnemonic = 0;\n@@ -145,2 +143,0 @@\n-    \/** Custom button Fallback text *\/\n-    protected String customApproveButtonText = null;\n@@ -171,2 +167,0 @@\n-    \/** Custom button tool tip text *\/\n-    protected String customApproveButtonToolTipText = null;\n@@ -413,1 +407,0 @@\n-        customApproveButtonText = UIManager.getString(\"FileChooser.customApproveButtonText\",l);\n@@ -421,1 +414,0 @@\n-        customApproveButtonMnemonic = getMnemonic(\"FileChooser.customApproveButtonMnemonic\", l);\n@@ -429,1 +421,0 @@\n-        customApproveButtonToolTipText = UIManager.getString(\"FileChooser.customApproveButtonToolTipText\",l);\n@@ -474,1 +465,0 @@\n-        customApproveButtonText = null;\n@@ -482,1 +472,0 @@\n-        customApproveButtonToolTipText = null;\n@@ -597,1 +586,2 @@\n-        if(fc.getDialogType() == JFileChooser.OPEN_DIALOG) {\n+        if(fc.getDialogType() == JFileChooser.OPEN_DIALOG ||\n+                fc.getDialogType() == JFileChooser.CUSTOM_DIALOG) {\n@@ -601,2 +591,0 @@\n-        } else if(fc.getDialogType() == JFileChooser.CUSTOM_DIALOG) {\n-            return customApproveButtonToolTipText;\n@@ -924,1 +912,2 @@\n-        } else if (fc.getDialogType() == JFileChooser.OPEN_DIALOG) {\n+        } else if (fc.getDialogType() == JFileChooser.OPEN_DIALOG ||\n+                fc.getDialogType() == JFileChooser.CUSTOM_DIALOG) {\n@@ -928,2 +917,0 @@\n-        } else if (fc.getDialogType() == JFileChooser.CUSTOM_DIALOG) {\n-            return customApproveButtonMnemonic;\n@@ -940,1 +927,2 @@\n-        } else if (fc.getDialogType() == JFileChooser.OPEN_DIALOG) {\n+        } else if (fc.getDialogType() == JFileChooser.OPEN_DIALOG ||\n+                fc.getDialogType() == JFileChooser.CUSTOM_DIALOG) {\n@@ -944,2 +932,0 @@\n-        } else if (fc.getDialogType() == JFileChooser.CUSTOM_DIALOG) {\n-            return customApproveButtonText;\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicFileChooserUI.java","additions":6,"deletions":20,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -42,2 +42,0 @@\n-    private final String customApproveText;\n-    private final String lookAndFeel;\n@@ -64,1 +62,0 @@\n-        this.lookAndFeel = lookAndFeel;\n@@ -69,1 +66,2 @@\n-            fail(\"Failed to set \", e);\n+            throw new RuntimeException(\"Failed to set \" + lookAndFeel +\n+                    \" LookAndFeel. Error : \" + e);\n@@ -78,8 +76,1 @@\n-        customApproveText = UIManager.getString(\"FileChooser.customApproveButtonText\", fileChooser.getLocale());\n-\n-        if (customApproveText == null || customApproveText.length() == 0) {\n-            fail(\"Cannot find Custom Approve Button text From UIManager Property!\");\n-            return;\n-        }\n-\n-        JButton customApproveButton = findCustomApproveButton(fileChooser);\n+        JButton customApproveButton = fileChooser.getUI().getDefaultButton(fileChooser);\n@@ -91,0 +82,4 @@\n+        if (customApproveButton.getText() == null) {\n+            fail(\"Custom Approve Button Text is null in FileChooser!\");\n+            return;\n+        }\n@@ -95,24 +90,0 @@\n-\n-    }\n-\n-    private JButton findCustomApproveButton(Container container) {\n-        JButton result = null;\n-\n-        for (int i = 0; i < container.getComponentCount(); i++) {\n-            Component c = container.getComponent(i);\n-\n-            if (c instanceof JButton && customApproveText.equals(((JButton) c).getText())) {\n-                result = (JButton) c;\n-                break;\n-            }\n-\n-            if (c instanceof Container) {\n-                JButton button = findCustomApproveButton((Container) c);\n-\n-                if (button != null && result == null) {\n-                    result = button;\n-                    break;\n-                }\n-            }\n-        }\n-        return result;\n@@ -127,4 +98,0 @@\n-\n-    private void fail(String s, Throwable e) {\n-        throw new RuntimeException(s + lookAndFeel + \" LookAndFeel. Error : \" + s, e);\n-    }\n","filename":"test\/jdk\/javax\/swing\/JFileChooser\/CustomApproveButtonTest.java","additions":7,"deletions":40,"binary":false,"changes":47,"status":"modified"}]}