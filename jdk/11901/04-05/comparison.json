{"files":[{"patch":"@@ -582,1 +582,1 @@\n-        if(tooltipText != null) {\n+        if (tooltipText != null) {\n@@ -586,2 +586,2 @@\n-        if (fc.getDialogType() == JFileChooser.OPEN_DIALOG ||\n-                fc.getDialogType() == JFileChooser.CUSTOM_DIALOG) {\n+        if (fc.getDialogType() == JFileChooser.OPEN_DIALOG\n+                || fc.getDialogType() == JFileChooser.CUSTOM_DIALOG) {\n@@ -912,2 +912,2 @@\n-        } else if (fc.getDialogType() == JFileChooser.OPEN_DIALOG ||\n-                fc.getDialogType() == JFileChooser.CUSTOM_DIALOG) {\n+        } else if (fc.getDialogType() == JFileChooser.OPEN_DIALOG\n+                || fc.getDialogType() == JFileChooser.CUSTOM_DIALOG) {\n@@ -927,2 +927,2 @@\n-        } else if (fc.getDialogType() == JFileChooser.OPEN_DIALOG ||\n-                fc.getDialogType() == JFileChooser.CUSTOM_DIALOG) {\n+        } else if (fc.getDialogType() == JFileChooser.OPEN_DIALOG\n+                || fc.getDialogType() == JFileChooser.CUSTOM_DIALOG) {\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicFileChooserUI.java","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+import javax.swing.UnsupportedLookAndFeelException;\n@@ -62,1 +63,2 @@\n-        frame = new JFrame(\"CustomApproveButtonTest\");\n+\n+        setLookAndFeel(lookAndFeel);\n@@ -65,5 +67,1 @@\n-            UIManager.setLookAndFeel(lookAndFeel);\n-        } catch (Exception e) {\n-            throw new RuntimeException(\"Failed to set \" + lookAndFeel +\n-                    \" LookAndFeel. Error : \" + e);\n-        }\n+            frame = new JFrame(\"CustomApproveButtonTest\");\n@@ -71,5 +69,5 @@\n-        JFileChooser fileChooser = new JFileChooser();\n-        fileChooser.setDialogType(JFileChooser.CUSTOM_DIALOG);\n-        frame.add(fileChooser);\n-        frame.setVisible(true);\n-        frame.pack();\n+            JFileChooser fileChooser = new JFileChooser();\n+            fileChooser.setDialogType(JFileChooser.CUSTOM_DIALOG);\n+            frame.add(fileChooser);\n+            frame.pack();\n+            frame.setVisible(true);\n@@ -77,1 +75,0 @@\n-        JButton customApproveButton = fileChooser.getUI().getDefaultButton(fileChooser);\n@@ -79,8 +76,1 @@\n-        if (customApproveButton == null) {\n-            fail(\"Cannot find Custom Approve Button in FileChooser!\");\n-            return;\n-        }\n-        if (customApproveButton.getText() == null) {\n-            fail(\"Custom Approve Button Text is null in FileChooser!\");\n-            return;\n-        }\n+            JButton customApproveButton = fileChooser.getUI().getDefaultButton(fileChooser);\n@@ -88,2 +78,12 @@\n-        if (frame != null) {\n-            frame.dispose();\n+            if (customApproveButton == null) {\n+                fail(\"Cannot find Custom Approve Button in FileChooser!\");\n+                return;\n+            }\n+            if (customApproveButton.getText() == null) {\n+                fail(\"Custom Approve Button Text is null in FileChooser!\");\n+                return;\n+            }\n+        } finally {\n+            if (frame != null) {\n+                frame.dispose();\n+            }\n@@ -94,3 +94,0 @@\n-        if (frame != null) {\n-            frame.dispose();\n-        }\n@@ -99,0 +96,11 @@\n+\n+    private void setLookAndFeel(String laf) {\n+        try {\n+            UIManager.setLookAndFeel(laf);\n+        } catch (UnsupportedLookAndFeelException ignored) {\n+            System.out.println(\"Unsupported L&F: \" + laf);\n+        } catch (ClassNotFoundException | InstantiationException\n+                 | IllegalAccessException e) {\n+            throw new RuntimeException(e);\n+        }\n+    }\n","filename":"test\/jdk\/javax\/swing\/JFileChooser\/CustomApproveButtonTest.java","additions":33,"deletions":25,"binary":false,"changes":58,"status":"modified"}]}