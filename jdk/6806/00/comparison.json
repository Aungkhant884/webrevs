{"files":[{"patch":"@@ -486,1 +486,1 @@\n-    _phase_times->add_ref_cleared(ref_type, removed);\n+    _phase_times->add_ref_dropped(ref_type, removed);\n","filename":"src\/hotspot\/share\/gc\/shared\/referenceProcessor.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -210,1 +210,1 @@\n-    _ref_cleared[i] = 0;\n+    _ref_dropped[i] = 0;\n@@ -226,1 +226,1 @@\n-void ReferenceProcessorPhaseTimes::add_ref_cleared(ReferenceType ref_type, size_t count) {\n+void ReferenceProcessorPhaseTimes::add_ref_dropped(ReferenceType ref_type, size_t count) {\n@@ -228,1 +228,1 @@\n-  Atomic::add(&_ref_cleared[ref_type_2_index(ref_type)], count, memory_order_relaxed);\n+  Atomic::add(&_ref_dropped[ref_type_2_index(ref_type)], count, memory_order_relaxed);\n@@ -283,3 +283,0 @@\n-    ls.print_cr(\"%s%s:\", Indents[base_indent], ref_type_2_string(ref_type));\n-\n-    uint const next_indent = base_indent + 1;\n@@ -288,2 +285,8 @@\n-    ls.print_cr(\"%sDiscovered: \" SIZE_FORMAT, Indents[next_indent], _ref_discovered[ref_type_index]);\n-    ls.print_cr(\"%sCleared: \" SIZE_FORMAT, Indents[next_indent], _ref_cleared[ref_type_index]);\n+    size_t discovered = _ref_discovered[ref_type_index];\n+    size_t dropped = _ref_dropped[ref_type_index];\n+    assert(discovered >= dropped, \"invariant\");\n+    size_t processed = discovered - dropped;\n+\n+    ls.print_cr(\"%s%s Discovered: %zu, Dropped: %zu, Processed: %zu\",\n+                Indents[base_indent], ref_type_2_string(ref_type),\n+                discovered, dropped, processed);\n","filename":"src\/hotspot\/share\/gc\/shared\/referenceProcessorPhaseTimes.cpp","additions":11,"deletions":8,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -55,1 +55,1 @@\n-  size_t                   _ref_cleared[number_of_subclasses_of_ref];\n+  size_t                   _ref_dropped[number_of_subclasses_of_ref];\n@@ -86,1 +86,1 @@\n-  void add_ref_cleared(ReferenceType ref_type, size_t count);\n+  void add_ref_dropped(ReferenceType ref_type, size_t count);\n","filename":"src\/hotspot\/share\/gc\/shared\/referenceProcessorPhaseTimes.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -83,3 +83,5 @@\n-        return gcLogTimeRegex + indent(6) + reftype + \":\\n\" +\n-               gcLogTimeRegex + indent(8) + \"Discovered: \" + countRegex + \"\\n\" +\n-               gcLogTimeRegex + indent(8) + \"Cleared: \" + countRegex + \"\\n\";\n+        return gcLogTimeRegex + indent(6) + reftype + \" \" +\n+               \"Discovered: \" + countRegex + \", \" +\n+               \"Dropped: \"    + countRegex + \", \" +\n+               \"Processed: \"  + countRegex + \"\\n\"\n+               ;\n","filename":"test\/hotspot\/jtreg\/gc\/logging\/TestPrintReferences.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"}]}