{"files":[{"patch":"@@ -64,0 +64,1 @@\n+import static java.time.LocalTime.MICROS_PER_SECOND;\n@@ -1148,1 +1149,1 @@\n-                case MICROS    -> nanosUntil(end) \/ 1000;\n+                case MICROS    -> microsUntil(end);\n@@ -1167,0 +1168,6 @@\n+    private long microsUntil(Instant end) {\n+        long secsDiff = Math.subtractExact(end.seconds, seconds);\n+        long totalMicros = Math.multiplyExact(secsDiff, MICROS_PER_SECOND);\n+        return Math.addExact(totalMicros, (end.nanos - nanos) \/ 1000);\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/java\/time\/Instant.java","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -189,0 +189,4 @@\n+    \/**\n+     * Microseconds per second.\n+     *\/\n+    static final long MICROS_PER_SECOND = 1000_000L;\n@@ -192,1 +196,1 @@\n-    static final long MICROS_PER_DAY = SECONDS_PER_DAY * 1000_000L;\n+    static final long MICROS_PER_DAY = MICROS_PER_SECOND * SECONDS_PER_DAY;\n","filename":"src\/java.base\/share\/classes\/java\/time\/LocalTime.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -63,0 +63,1 @@\n+import java.time.temporal.ChronoUnit;\n@@ -70,0 +71,1 @@\n+ * @bug 8273369\n@@ -99,0 +101,12 @@\n+    \/**\n+     * Checks whether Instant.until() returning microseconds does not throw\n+     * an ArithmeticException for Instants apart for more than Long.MAX_VALUE\n+     * nanoseconds.\n+     *\/\n+    @Test\n+    public void test_microsUntil() {\n+        var nanoMax = Instant.EPOCH.plusNanos(Long.MAX_VALUE);\n+        var totalMicros = Instant.EPOCH.until(nanoMax, ChronoUnit.MICROS);\n+        var plusOneMicro = Instant.EPOCH.until(nanoMax.plusNanos(1000), ChronoUnit.MICROS);\n+        assertEquals(plusOneMicro - totalMicros, 1L);\n+    }\n","filename":"test\/jdk\/java\/time\/test\/java\/time\/TestInstant.java","additions":15,"deletions":1,"binary":false,"changes":16,"status":"modified"}]}