{"files":[{"patch":"@@ -2608,0 +2608,4 @@\n+    while (!tk.IsDisposed()) {\n+        Sleep(100);\n+    }\n+\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/awt_Toolkit.cpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -478,1 +478,1 @@\n-    volatile BOOL  m_breakMessageLoop;\n+    BOOL  m_breakMessageLoop;\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/awt_Toolkit.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -42,0 +42,1 @@\n+    private static JFrame frame;\n@@ -45,1 +46,2 @@\n-        UIManager.setLookAndFeel(new NimbusLookAndFeel());\n+        try {\n+            UIManager.setLookAndFeel(new NimbusLookAndFeel());\n@@ -47,2 +49,2 @@\n-        Robot robot = new Robot();\n-        robot.setAutoDelay(50);\n+            Robot robot = new Robot();\n+            robot.setAutoDelay(100);\n@@ -50,5 +52,5 @@\n-        SwingUtilities.invokeAndWait(new Runnable() {\n-            public void run() {\n-                createAndShowGUI();\n-            }\n-        });\n+            SwingUtilities.invokeAndWait(new Runnable() {\n+                public void run() {\n+                    createAndShowGUI();\n+                }\n+            });\n@@ -56,1 +58,2 @@\n-        robot.waitForIdle();\n+            robot.waitForIdle();\n+            robot.delay(1000);\n@@ -58,6 +61,6 @@\n-        SwingUtilities.invokeAndWait(new Runnable() {\n-            public void run() {\n-                Component previewPanel = Util.findSubComponent(cc, \"javax.swing.colorchooser.DefaultPreviewPanel\");\n-                point = previewPanel.getLocationOnScreen();\n-            }\n-        });\n+            SwingUtilities.invokeAndWait(new Runnable() {\n+                public void run() {\n+                    Component previewPanel = Util.findSubComponent(cc, \"javax.swing.colorchooser.DefaultPreviewPanel\");\n+                    point = previewPanel.getLocationOnScreen();\n+                }\n+            });\n@@ -65,1 +68,1 @@\n-        point.translate(5, 5);\n+            point.translate(5, 5);\n@@ -67,3 +70,11 @@\n-        robot.mouseMove(point.x, point.y);\n-        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n-        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseMove(point.x, point.y);\n+            robot.waitForIdle();\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.waitForIdle();\n+            robot.delay(1000);\n+        } finally {\n+            if (frame != null) {\n+                SwingUtilities.invokeAndWait(() -> frame.dispose());\n+            }\n+        }\n@@ -74,1 +85,1 @@\n-        JFrame frame = new JFrame(Test6827032.class.getName());\n+        frame = new JFrame(Test6827032.class.getName());\n@@ -80,0 +91,1 @@\n+        frame.setLocationRelativeTo(null);\n","filename":"test\/jdk\/javax\/swing\/JColorChooser\/Test6827032.java","additions":32,"deletions":20,"binary":false,"changes":52,"status":"modified"}]}