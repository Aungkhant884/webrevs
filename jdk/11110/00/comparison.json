{"files":[{"patch":"@@ -211,0 +211,5 @@\n+        @Override\n+        public void onSubscribed() {\n+            exchange.registerResponseSubscriber(this);\n+        }\n+\n@@ -462,1 +467,0 @@\n-        registerResponseSubscriber(bs);\n","filename":"src\/java.net.http\/share\/classes\/jdk\/internal\/net\/http\/Http1Exchange.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -347,1 +347,0 @@\n-        registerResponseSubscriber(subscriber);\n@@ -1546,0 +1545,5 @@\n+        @Override\n+        public void onSubscribed() {\n+            registerResponseSubscriber(this);\n+        }\n+\n@@ -1549,1 +1553,1 @@\n-                Stream.this.unregisterResponseSubscriber(this);\n+                unregisterResponseSubscriber(this);\n@@ -1556,1 +1560,1 @@\n-            Stream.this.unregisterResponseSubscriber(this);\n+            unregisterResponseSubscriber(this);\n","filename":"src\/java.net.http\/share\/classes\/jdk\/internal\/net\/http\/Stream.java","additions":7,"deletions":3,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -130,0 +130,9 @@\n+    \/**\n+     * Called right after the userSubscriber::onSubscribe is called.\n+     * @apiNote\n+     * This method may be used by subclasses to perform cleanup\n+     * related actions after a subscription has been succesfully\n+     * accepted.\n+     *\/\n+    protected void onSubscribed() { }\n+\n@@ -172,0 +181,1 @@\n+        boolean onSubscribed;\n@@ -173,1 +183,1 @@\n-            if (subscribed.compareAndSet(false, true)) {\n+            if ((onSubscribed = subscribed.compareAndSet(false, true))) {\n@@ -184,0 +194,1 @@\n+        if (onSubscribed) onSubscribed();\n","filename":"src\/java.net.http\/share\/classes\/jdk\/internal\/net\/http\/common\/HttpBodySubscriberWrapper.java","additions":12,"deletions":1,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8245462 8229822 8254786\n+ * @bug 8245462 8229822 8254786 8296889\n","filename":"test\/jdk\/java\/net\/httpclient\/CancelRequestTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}