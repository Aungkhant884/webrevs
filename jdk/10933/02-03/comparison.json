{"files":[{"patch":"@@ -478,1 +478,3 @@\n-    nm = new (native_nmethod_size, method->is_method_handle_intrinsic())\n+    \/\/ MH intrinsics are dispatch stubs which are compatible with NonNMethod space.\n+    bool allow_NonNMethod_space = method->is_method_handle_intrinsic();\n+    nm = new (native_nmethod_size, allow_NonNMethod_space)\n@@ -486,1 +488,2 @@\n-    \/\/ Method handle instrinsics may get allocated in NonNMethod space.\n+    \/\/ Allocating in NonNMethod space is only for special nmethods which don't\n+    \/\/ need to be findable by nmethod iterators.\n@@ -488,1 +491,1 @@\n-    if (method->is_method_handle_intrinsic()) {\n+    if (allow_NonNMethod_space) {\n","filename":"src\/hotspot\/share\/code\/nmethod.cpp","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -302,0 +302,2 @@\n+  \/\/ Attention: Only allow NonNMethod space for special nmethods which don't need to be\n+  \/\/ findable by nmethod iterators! In particular, they must not contain oops!\n","filename":"src\/hotspot\/share\/code\/nmethod.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"}]}