{"files":[{"patch":"@@ -302,8 +302,3 @@\n-      if (segcmd.filesize != 0) {\n-        if (add_map_info(ph, fd, segcmd.fileoff, segcmd.vmaddr, segcmd.vmsize, segcmd.flags) == NULL) {\n-          print_debug(\"Failed to add map_info at i = %d\\n\", i);\n-          goto err;\n-        }\n-        print_debug(\"LC_SEGMENT_64 added: nsects=%d fileoff=0x%llx vmaddr=0x%llx vmsize=0x%llx filesize=0x%llx %s\\n\",\n-                    segcmd.nsects, segcmd.fileoff, segcmd.vmaddr, segcmd.vmsize,\n-                    segcmd.filesize, &segcmd.segname[0]);\n+      if (segcmd.filesize != 0 && add_map_info(ph, fd, segcmd.fileoff, segcmd.vmaddr, segcmd.vmsize, segcmd.flags) == NULL) {\n+        print_debug(\"Failed to add map_info at i = %d\\n\", i);\n+        goto err;\n@@ -311,0 +306,4 @@\n+      print_debug(\"LC_SEGMENT_64 %s: nsects=%d fileoff=0x%llx vmaddr=0x%llx vmsize=0x%llx filesize=0x%llx %s\\n\",\n+                  segcmd.filesize == 0 ? \"with filesize == 0 ignored\" : \"added\",\n+                  segcmd.nsects, segcmd.fileoff, segcmd.vmaddr, segcmd.vmsize,\n+                  segcmd.filesize, &segcmd.segname[0]);\n","filename":"src\/jdk.hotspot.agent\/macosx\/native\/libsaproc\/ps_core.c","additions":7,"deletions":8,"binary":false,"changes":15,"status":"modified"}]}