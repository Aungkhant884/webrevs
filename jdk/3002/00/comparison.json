{"files":[{"patch":"@@ -1881,0 +1881,4 @@\n+\/\/ Also note we can abort while other threads continue to run, so we can\n+\/\/ easily trigger secondary faults in those threads. To reduce the likelihood\n+\/\/ of that we use _exit rather than exit, so that no atexit hooks get run.\n+\/\/ But note that os::shutdown() could also trigger secondary faults.\n@@ -1887,1 +1891,1 @@\n-  ::exit(1);\n+  ::_exit(1);\n","filename":"src\/hotspot\/os\/posix\/os_posix.cpp","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1375,3 +1375,0 @@\n-  if (SuppressFatalErrorMessage) {\n-      os::abort(CreateCoredumpOnCrash);\n-  }\n@@ -1382,0 +1379,4 @@\n+    if (SuppressFatalErrorMessage) {\n+      os::abort(CreateCoredumpOnCrash);\n+    }\n+\n@@ -1431,5 +1432,7 @@\n-      char msgbuf[64];\n-      jio_snprintf(msgbuf, sizeof(msgbuf),\n-                   \"[thread \" INTX_FORMAT \" also had an error]\",\n-                   mytid);\n-      out.print_raw_cr(msgbuf);\n+      if (!SuppressFatalErrorMessage) {\n+        char msgbuf[64];\n+        jio_snprintf(msgbuf, sizeof(msgbuf),\n+                     \"[thread \" INTX_FORMAT \" also had an error]\",\n+                     mytid);\n+        out.print_raw_cr(msgbuf);\n+      }\n@@ -1437,1 +1440,2 @@\n-      \/\/ error reporting is not MT-safe, block current thread\n+      \/\/ Error reporting is not MT-safe, nor can we let the current thread\n+      \/\/ proceed, so we block it.\n@@ -1442,1 +1446,3 @@\n-        out.print_raw_cr(\"[Too many errors, abort]\");\n+        if (!SuppressFatalErrorMessage) {\n+          out.print_raw_cr(\"[Too many errors, abort]\");\n+        }\n@@ -1446,0 +1452,7 @@\n+      if (SuppressFatalErrorMessage) {\n+        \/\/ If we already hit a secondary error during abort, then calling\n+        \/\/ it again is likely to hit another one. But eventually, if we\n+        \/\/ don't deadlock somewhere, we will call os::die() above.\n+        os::abort(CreateCoredumpOnCrash);\n+      }\n+\n","filename":"src\/hotspot\/share\/utilities\/vmError.cpp","additions":23,"deletions":10,"binary":false,"changes":33,"status":"modified"}]}