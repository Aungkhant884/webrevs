{"files":[{"patch":"@@ -712,2 +712,3 @@\n-                            && (useSetDirectory || (!fsv.isFileSystem(((File)objects[0]))\n-                            && !Files.isSymbolicLink(Paths.get(((File)objects[0]).getPath()))))) {\n+                            && (useSetDirectory\n+                                || (!fsv.isFileSystem(((File)objects[0]))\n+                                    && !Files.isSymbolicLink(((File)objects[0]).toPath())))) {\n@@ -721,1 +722,1 @@\n-                                Path path = Paths.get(f.getPath());\n+                                Path path = f.toPath();\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/basic\/BasicFileChooserUI.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+import java.io.File;\n@@ -31,0 +32,1 @@\n+import java.util.Arrays;\n@@ -37,0 +39,1 @@\n+import javax.swing.JScrollPane;\n@@ -41,1 +44,1 @@\n- *@test\n+ * @test\n@@ -52,7 +55,6 @@\n-    static JFrame frame = null;\n-    static Boolean bMultiSel_Enabled = false;\n-    static JFileChooser jfc = null;\n-    static JPanel panel = null;\n-    static JTextArea textArea = null;\n-    static JCheckBox checkMSelection = null;\n-    static PassFailJFrame passFailJFrame = null;\n+    static JFrame frame;\n+    static JFileChooser jfc;\n+    static JPanel panel;\n+    static JTextArea pathList;\n+    static JCheckBox multiSelection;\n+    static PassFailJFrame passFailJFrame;\n@@ -79,1 +81,1 @@\n-                cd \/d C:\\\n+                cd \/d C:\\\\\n@@ -83,1 +85,1 @@\n-                mklink \/d link FileChooserTest\n+                mklink \/d link target\n@@ -88,10 +90,21 @@\n-                5. MultiSelection Mode disabled - On click of the \"link\"\n-                   directory, if the Absolute path of Symbolic Link is\n-                   valid then Click PASS, else if it is null then Click FAIL.\n-                   MultiSelection Mode Enabled - If Multi selection of\n-                   directories including Symbolic Link is possible along\n-                   with valid Absolute path then Click PASS, else either\n-                   of them failed click FAIL.\n-                6. When done with testing, paste the following commands to remove the 'filechooser' directory\n-                cd \\\n-                rmdir \/s \/q filechooser\n+                5. Single-selection:\n+                   Click \"link\" directory, the absolute path of the symbolic\n+                   link should be displayed. If it's null, click FAIL.\n+                   Click \"target\" directory, its absolute path should be\n+                   displayed.\n+\n+                   Enable multiple selection by clicking the checkbox.\n+                   Multi-selection:\n+                   Click \"link\", press Ctrl and then click \"target\".\n+                   Both should be selected and their absolute paths should be\n+                   displayed.\n+\n+                   If \"link\" can't be selected or if its absolute path is null,\n+                   click FAIL.\n+\n+                   If \"link\" can be selected in both single- and multi-selection modes,\n+                   click PASS.\n+                6. When done with testing, paste the following commands to\n+                   remove the 'FileChooserTest' directory:\n+                cd \\\\\n+                rmdir \/s \/q C:\\\\FileChooserTest\n@@ -103,4 +116,4 @@\n-        checkMSelection = new JCheckBox(\"Enable Multi-Selection\");\n-        textArea = new JTextArea();\n-        jfc = new JFileChooser();\n-        passFailJFrame = new PassFailJFrame(INSTRUCTIONS);\n+        multiSelection = new JCheckBox(\"Enable Multi-Selection\");\n+        pathList = new JTextArea(10,50);\n+        jfc = new JFileChooser(new File(\"C:\\\\\"));\n+        passFailJFrame = new PassFailJFrame(\"Test Instructions\",INSTRUCTIONS,5L,35,40);\n@@ -111,2 +124,2 @@\n-        panel.add(checkMSelection,BorderLayout.EAST);\n-        panel.add(textArea,BorderLayout.WEST);\n+        panel.add(multiSelection,BorderLayout.EAST);\n+        panel.add(new JScrollPane(pathList),BorderLayout.WEST);\n@@ -116,3 +129,2 @@\n-        jfc.setMultiSelectionEnabled(bMultiSel_Enabled);\n-        textArea.setPreferredSize(new Dimension(600,300));\n-        textArea.append(\"Path List\");\n+        jfc.setMultiSelectionEnabled(multiSelection.isSelected());\n+        pathList.append(\"Path List\\n\");\n@@ -120,1 +132,1 @@\n-        checkMSelection.addActionListener(new ActionListener() {\n+        multiSelection.addActionListener(new ActionListener() {\n@@ -124,6 +136,1 @@\n-                if (((JCheckBox)source).isSelected()) {\n-                    bMultiSel_Enabled = true;\n-                } else {\n-                    bMultiSel_Enabled = false;\n-                }\n-                jfc.setMultiSelectionEnabled(bMultiSel_Enabled);\n+                jfc.setMultiSelectionEnabled(((JCheckBox)source).isSelected());\n@@ -134,0 +141,1 @@\n+                String msg = null;\n@@ -135,2 +143,8 @@\n-                    System.out.println(\"Absolute Path : \"+evt.getNewValue());\n-                    textArea.append(\"\\nAbsolute Path : \"+evt.getNewValue());\n+                    msg = \"Absolute Path : \" + evt.getNewValue();\n+                } else if (JFileChooser.SELECTED_FILES_CHANGED_PROPERTY.equals(evt.getPropertyName())) {\n+                    msg = \"Selected Files : \" + Arrays.toString((File[]) evt.getNewValue());\n+                }\n+\n+                if (msg != null) {\n+                    System.out.println(msg);\n+                    pathList.append(msg + \"\\n\");\n@@ -140,2 +154,2 @@\n-        frame.add(panel,BorderLayout.NORTH);\n-        frame.add(jfc,BorderLayout.CENTER);\n+        frame.add(panel, BorderLayout.NORTH);\n+        frame.add(jfc, BorderLayout.CENTER);\n","filename":"test\/jdk\/javax\/swing\/JFileChooser\/FileChooserSymLinkTest.java","additions":54,"deletions":40,"binary":false,"changes":94,"status":"modified"}]}