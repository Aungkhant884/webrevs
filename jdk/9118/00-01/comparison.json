{"files":[{"patch":"@@ -1399,8 +1399,2 @@\n-    OSVERSIONINFOEX info;\n-    ZeroMemory(&info, sizeof(OSVERSIONINFOEX));\n-    info.dwOSVersionInfoSize = sizeof(OSVERSIONINFOEX);\n-    GetVersionEx((LPOSVERSIONINFO) &info);\n-\n-    \/\/ add extra padded border only when Win OS version is 6+\n-    int extraPaddedBorderInsets = info.dwMajorVersion >= 6 ?\n-     ::GetSystemMetrics(SM_CXPADDEDBORDER) : 0;\n+    \/\/ extra padded border for captioned windows\n+    int extraPaddedBorderInsets = ::GetSystemMetrics(SM_CXPADDEDBORDER);\n@@ -1438,1 +1432,2 @@\n-                    ::GetSystemMetrics(SM_CXDLGFRAME);\n+                    ::GetSystemMetrics(SM_CXDLGFRAME) +\n+                    extraPaddedBorderInsets;\n@@ -1440,1 +1435,2 @@\n-                    ::GetSystemMetrics(SM_CYDLGFRAME);\n+                    ::GetSystemMetrics(SM_CYDLGFRAME) +\n+                    extraPaddedBorderInsets;\n","filename":"src\/java.desktop\/windows\/native\/libawt\/windows\/awt_Window.cpp","additions":6,"deletions":10,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -24,9 +24,0 @@\n-\/*\n- * @test\n- * @bug 8265586\n- * @key headful\n- * @summary Tests the functionality of AWT frame.pack() on Windows.\n- * @run main AwtFramePackTest\n- * @requires (os.family == \"windows\")\n- *\/\n-\n@@ -41,1 +32,0 @@\n-import java.awt.Rectangle;\n@@ -48,0 +38,10 @@\n+\/*\n+ * @test\n+ * @bug 8265586\n+ * @key headful\n+ * @requires (os.family == \"windows\")\n+ * @summary Tests whether insets are calculated correctly on Windows\n+ * for AWT Frame by checking the actual and expected\/preferred frame sizes.\n+ * @run main\/othervm -Dsun.java2d.uiScale=1 AwtFramePackTest\n+ *\/\n+\n@@ -57,1 +57,0 @@\n-            robot.waitForIdle();\n@@ -75,0 +74,3 @@\n+            robot.delay(500);\n+            robot.waitForIdle();\n+\n@@ -84,1 +86,1 @@\n-           }\n+            }\n@@ -90,1 +92,1 @@\n-    \/\/ debugging purpose, saves screen capture when test fails\n+    \/\/ for debugging purpose, saves screen capture when test fails.\n@@ -92,4 +94,1 @@\n-        robot.delay(500);\n-        robot.waitForIdle();\n-        BufferedImage image = robot.createScreenCapture(\n-                new Rectangle(0, 0, 500, 500));\n+        BufferedImage image = robot.createScreenCapture(frame.getBounds());\n@@ -97,1 +96,1 @@\n-            ImageIO.write(image, \"png\", new File(\"Frame\"));\n+            ImageIO.write(image,\"png\", new File(\"Frame.png\"));\n","filename":"test\/jdk\/java\/awt\/Frame\/AwtFramePackTest.java","additions":17,"deletions":18,"binary":false,"changes":35,"status":"modified"}]}