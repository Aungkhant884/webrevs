{"files":[{"patch":"@@ -134,0 +134,10 @@\n+        List<String> launcherPaths = null;\n+        Path appImage = PREDEFINED_APP_IMAGE.fetchFrom(params);\n+        String appName = LinuxAppImageBuilder.getLauncherName(params);\n+        if (appImage != null) {\n+            launcherPaths = AppImageFile.getLauncherNames(appImage, params);\n+            if (!launcherPaths.isEmpty()) {\n+                appName = launcherPaths.get(0); \/\/ main app launcher is first\n+            }\n+        }\n+\n@@ -135,1 +145,1 @@\n-                createDataForDesktopFile(params));\n+                createDataForDesktopFile(appName, params));\n@@ -139,4 +149,1 @@\n-        if (launchers.isEmpty() &&\n-                PREDEFINED_APP_IMAGE.fetchFrom(params) != null) {\n-            List<String> launcherPaths = AppImageFile.getLauncherNames(\n-                    PREDEFINED_APP_IMAGE.fetchFrom(params), params);\n+        if (launchers.isEmpty() && launcherPaths != null) {\n@@ -268,1 +275,1 @@\n-    private Map<String, String> createDataForDesktopFile(\n+    private Map<String, String> createDataForDesktopFile(String appName,\n@@ -277,2 +284,2 @@\n-        String appLauncher = thePackage.installedApplicationLayout().launchersDirectory().resolve(\n-                LinuxAppImageBuilder.getLauncherName(params)).toString();\n+        String appLauncher = thePackage.installedApplicationLayout().\n+                launchersDirectory().resolve(appName).toString();\n","filename":"src\/jdk.jpackage\/linux\/classes\/jdk\/jpackage\/internal\/DesktopIntegration.java","additions":15,"deletions":8,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -465,1 +465,1 @@\n-            launcherName = name();\n+            launcherName = getApplicationName();\n@@ -475,0 +475,10 @@\n+    String getApplicationName() {\n+        if (!hasArgument(\"--app-image\")) {\n+            return name();\n+        }\n+        \/\/ if this is an installer built from an app image, it would more\n+        \/\/ accurate to extract the application name from the app-image, but in\n+        \/\/ all cases where we use --app-image the application name is default name\n+        return TKit.getCurrentDefaultAppName();\n+    }\n+\n@@ -503,1 +513,1 @@\n-            launcherName = name();\n+            launcherName = getApplicationName();\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/JPackageCommand.java","additions":12,"deletions":2,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -65,1 +65,1 @@\n-                        () -> cmd.name()).replaceAll(\"\\\\s+\", \"_\"));\n+                        () -> cmd.getApplicationName()).replaceAll(\"\\\\s+\", \"_\"));\n@@ -214,1 +214,1 @@\n-        final String launcherName = cmd.name();\n+        final String launcherName = cmd.getApplicationName();\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/LinuxHelper.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -64,1 +64,1 @@\n-            Path dmgImage = mountPoint.resolve(cmd.name() + \".app\");\n+            Path dmgImage = mountPoint.resolve(cmd.getApplicationName() + \".app\");\n@@ -192,1 +192,1 @@\n-                .resolve(cmd.name() + \".app\");\n+                .resolve(cmd.getApplicationName() + \".app\");\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/MacHelper.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -142,1 +142,1 @@\n-            this.name = (name == null ? cmd.name() : name);\n+            this.name = (name == null ? cmd.getApplicationName() : name);\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/WindowsHelper.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -79,0 +79,2 @@\n+                    cmd.removeArgumentWithValue(\"--name\");\n+                    cmd.addArguments(\"--name\", appImageCmd.name() + \"-I\");\n","filename":"test\/jdk\/tools\/jpackage\/share\/MultiLauncherTwoPhaseTest.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"}]}