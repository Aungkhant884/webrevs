{"files":[{"patch":"@@ -56,5 +56,3 @@\n-static int32_t order_oop(G1EvacuationFailureObjsInHR::Elem a,\n-                         G1EvacuationFailureObjsInHR::Elem b) {\n-  \/\/ assert(a != b, \"must be\");\n-  int r = a-b;\n-  return r;\n+static int order_oop(G1EvacuationFailureObjsInHR::Elem a,\n+                     G1EvacuationFailureObjsInHR::Elem b) {\n+  return static_cast<int>(a-b);\n@@ -83,1 +81,0 @@\n-  offset_mask((1l << HeapRegion::LogOfHRGrainBytes) - 1),\n@@ -89,0 +86,1 @@\n+  assert(HeapRegion::LogOfHRGrainBytes < 32, \"must be\");\n","filename":"src\/hotspot\/share\/gc\/g1\/g1EvacuationFailureObjsInHR.cpp","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -71,3 +71,2 @@\n-    static const uint64_t TMP = 1l << 32;\n-    static const uint64_t LOW_MASK = TMP - 1;\n-    static const uint64_t HIGH_MASK = LOW_MASK << 32;\n+    const uint64_t low_mask;\n+    const uint64_t high_mask;\n@@ -82,1 +81,1 @@\n-      return (n & LOW_MASK);\n+      return (n & low_mask);\n@@ -85,1 +84,1 @@\n-      return (n & HIGH_MASK);\n+      return (n & high_mask);\n@@ -98,2 +97,2 @@\n-      assert((lo < NODE_XXX::LENGTH) && (NODE_XXX::LENGTH <= LOW_MASK), \"must be\");\n-      assert(hi < HIGH_MASK, \"must be\");\n+      assert((lo < NODE_XXX::LENGTH) && (NODE_XXX::LENGTH <= low_mask), \"must be\");\n+      assert(hi < high_mask, \"must be\");\n@@ -102,1 +101,1 @@\n-        hi += (1l << 32);\n+        hi += ((uint64_t)1 << 32);\n@@ -106,1 +105,1 @@\n-      assert(hi <= HIGH_MASK, \"must be\");\n+      assert(hi <= high_mask, \"must be\");\n@@ -111,1 +110,5 @@\n-    Array(uint32_t max_nodes_length) : _max_nodes_length(max_nodes_length) {\n+    Array(uint32_t max_nodes_length) :\n+      low_mask(((uint64_t)1 << 32) - 1),\n+      high_mask(low_mask << 32),\n+      _max_nodes_length(max_nodes_length) {\n+\n@@ -196,1 +199,0 @@\n-  const uint64_t offset_mask;\n@@ -205,1 +207,1 @@\n-    return oop(_bottom + offset);\n+    return cast_to_oop(_bottom + offset);\n@@ -210,2 +212,1 @@\n-    assert(offset_mask >= offset, \"must be\");\n-    return offset & offset_mask;\n+    return static_cast<Elem>(offset);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1EvacuationFailureObjsInHR.hpp","additions":15,"deletions":14,"binary":false,"changes":29,"status":"modified"}]}