{"files":[{"patch":"@@ -417,2 +417,1 @@\n-        IOException ioe = null;\n-        try {\n+        try (ch; out) {\n@@ -434,6 +433,0 @@\n-        } catch (IOException x) {\n-            encoder.reset();\n-            ioe = x;\n-        }\n-\n-        try {\n@@ -449,5 +442,3 @@\n-        } catch (IOException e) {\n-            if (ioe != null)\n-                ioe.addSuppressed(e);\n-            else\n-                ioe = e;\n+        } catch (IOException x) {\n+            encoder.reset();\n+            throw x;\n@@ -455,3 +446,0 @@\n-\n-        if (ioe != null)\n-            throw ioe;\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/cs\/StreamEncoder.java","additions":4,"deletions":16,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,9 @@\n+    private static void ck(String s, int actual, int expected)\n+        throws IOException {\n+        if (actual != expected) {\n+            String msg = String.format(\"%s: actual (%d) != expected (%d)%n\",\n+                                       s, actual, expected);\n+            throw new IOException(msg);\n+        }\n+    }\n+\n@@ -49,3 +58,1 @@\n-        if (out.length != expected.length) {\n-            throw new IOException(\"Failed\");\n-        }\n+        ck(\"Lengths are unequal\", out.length, expected.length);\n@@ -54,2 +61,1 @@\n-            if (out[i] != expected[i])\n-                throw new IOException(\"Failed\");\n+            ck(\"Values are unequal\", out[i], expected[i]);\n","filename":"test\/jdk\/sun\/nio\/cs\/StreamEncoderClose.java","additions":12,"deletions":6,"binary":false,"changes":18,"status":"modified"}]}