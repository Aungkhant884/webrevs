{"files":[{"patch":"@@ -123,1 +123,1 @@\n-                                .addStyle(HtmlStyle.copyUrl)\n+                                .addStyle(HtmlStyle.copy)\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/SearchWriter.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -462,0 +462,1 @@\n+                        .addStyle(HtmlStyle.copy)\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/TagletWriterImpl.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -658,5 +658,0 @@\n-    \/**\n-     * The class for a {@code button} in the search page to copy the search URL to the clipboard.\n-     *\/\n-    copyUrl,\n-\n@@ -918,0 +913,5 @@\n+    \/**\n+     * The class for a {@code button} element to copy some page content to the clipboard.\n+     *\/\n+    copy,\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/HtmlStyle.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -34,0 +34,2 @@\n+    copyUrl: \"##REPLACE:doclet.Copy_url_to_clipboard##\",\n+    urlCopied: \"##REPLACE:doclet.Copied_url_to_clipboard##\"\n@@ -415,0 +417,10 @@\n+    $(\"section[id] > :header, :header[id], :header:has(a[id])\").hover(\n+        function () {\n+            $(this).append($(\"<button class='copy copy-header' onclick='copyUrl(this)'> \" +\n+                \"<img src='\" + pathtoroot + \"copy.svg' alt='\" + messages.copyUrl + \"'> \" +\n+                \"<span data-copied='\" + messages.urlCopied + \"'><\/span><\/button>\"));\n+        },\n+        function () {\n+            $(this).find(\"button:last\").remove();\n+        }\n+    );\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/search.js.template","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -108,1 +108,1 @@\n-\n+\/\/ Copy the contents of the local snippet to the clipboard\n@@ -110,0 +110,23 @@\n+    copyToClipboard(button.nextElementSibling.innerText);\n+    switchCopyLabel(button.firstElementChild, button.parentElement);\n+}\n+\/\/ Copy the link to the adjacent header to the clipboard\n+function copyUrl(button) {\n+    var id;\n+    var header = button.parentElement;\n+    if (header.hasAttribute(\"id\")) {\n+        id = header.getAttribute(\"id\");\n+    } else if (header.parentElement.tagName === 'SECTION' && header.parentElement.hasAttribute(\"id\")) {\n+        id = header.parentElement.getAttribute(\"id\");\n+    } else if (header.firstElementChild && header.firstElementChild.tagName === \"A\"\n+                                        && header.firstElementChild.hasAttribute(\"id\")) {\n+        id = header.firstElementChild.getAttribute(\"id\");\n+    }\n+    var url = document.location.href;\n+    if (url.indexOf(\"#\") > -1) {\n+        url = url.substring(0, url.indexOf(\"#\"));\n+    }\n+    copyToClipboard(url + \"#\" + id);\n+    switchCopyLabel(button.lastElementChild, button.parentElement);\n+}\n+function copyToClipboard(content) {\n@@ -113,1 +136,1 @@\n-    textarea.value = button.nextElementSibling.innerText;\n+    textarea.value = content;\n@@ -117,1 +140,2 @@\n-    var span = button.firstElementChild;\n+}\n+function switchCopyLabel(span, parent) {\n@@ -122,1 +146,0 @@\n-        var parent = button.parentElement;\n@@ -128,1 +151,0 @@\n-\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/script.js","additions":27,"deletions":5,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -65,0 +65,4 @@\n+\/* Disable font boosting *\/\n+h1, h2, h3, h4, h5, h6 {\n+    max-height: 2em;\n+}\n@@ -720,46 +724,0 @@\n-button.copy-url {\n-    opacity: 80%;\n-    transition: opacity 0.2s;\n-    margin-left: 0.4em;\n-    border: none;\n-    border-radius: 3px;\n-    cursor: pointer;\n-    background: none;\n-    padding:0.3em;\n-    position: relative;\n-    top:0.13em\n-}\n-button.copy-url img {\n-    width: 1.2em;\n-    height: 1.2em;\n-    padding: 0.01em 0;\n-    background: none;\n-    position:relative;\n-    top: 0.15em;\n-}\n-div.page-search-info:hover button.copy-url {\n-    opacity: 90%;\n-}\n-div.page-search-info button.copy-url:hover {\n-    background-color: #dfe6f1;\n-    opacity: 100%;\n-}\n-button.copy-url span {\n-    color: #000000;\n-    content: attr(aria-label);\n-    font-family:'DejaVu Sans', Arial, Helvetica, sans-serif;\n-    font-size: 85%;\n-    line-height: 1.2em;\n-    padding: 0.2em;\n-    position: relative;\n-    top: -0.18em;\n-    transition: opacity 0.1s;\n-    opacity: 0;\n-}\n-div.page-search-info:hover button.copy-url span {\n-    opacity: 90%;\n-}\n-div.page-search-info button.copy-url:active {\n-    background-color: #cfdbee;\n-    opacity: 100%;\n-}\n@@ -835,1 +793,105 @@\n-\n+\/*\n+ * Styles for copy-to-clipboard buttons\n+ *\/\n+button.copy {\n+    opacity: 80%;\n+    border: none;\n+    border-radius: 3px;\n+    position: relative;\n+    background:none;\n+    transition: opacity 0.2s;\n+    cursor: pointer;\n+}\n+button.copy:hover,\n+button.copy:active {\n+    opacity: 100%;\n+}\n+button.copy img {\n+    position: relative;\n+    background: none;\n+}\n+button.copy span {\n+    color: #303030;\n+    position: relative;\n+    top: -0.1em;\n+    transition: all 0.1s;\n+    font-size: 85%;\n+    line-height: 1.2em;\n+}\n+\/* header\/section copy button *\/\n+button.copy-header {\n+    margin: 0 0.2em;\n+    padding: 0 4px;\n+    height: 1.35em;\n+}\n+button.copy-header img {\n+    height: 1em;\n+    top: 0.1em;\n+}\n+button.copy-header:active {\n+    background-color: rgba(128, 128, 160, 0.2);\n+}\n+\/* search page copy button *\/\n+button#page-search-copy {\n+    margin-left: 0.4em;\n+    padding:0.3em;\n+    top:0.13em;\n+}\n+button#page-search-copy img {\n+    width: 1.2em;\n+    height: 1.2em;\n+    padding: 0.01em 0;\n+    top: 0.15em;\n+}\n+button#page-search-copy span {\n+    color: #000000;\n+    content: attr(aria-label);\n+    line-height: 1.2em;\n+    padding: 0.2em;\n+    top: -0.18em;\n+    opacity: 0;\n+}\n+div.page-search-info:hover button#page-search-copy,\n+div.page-search-info:hover button#page-search-copy span {\n+    opacity: 90%;\n+}\n+div.page-search-info button#page-search-copy:hover {\n+    background-color: #dfe6f1;\n+}\n+div.page-search-info button#page-search-copy:active {\n+    background-color: #cfdbee;\n+}\n+\/* snippet copy button *\/\n+button.snippet-copy {\n+    position: absolute;\n+    top: 6px;\n+    right: 6px;\n+    height: 1.7em;\n+    opacity: 50%;\n+    padding: 2px;\n+}\n+button.snippet-copy img {\n+    width: 18px;\n+    height: 18px;\n+    padding: 0.05em 0;\n+}\n+button.snippet-copy span {\n+    content: attr(aria-label);\n+    line-height: 1.2em;\n+    padding: 0.2em;\n+    position: relative;\n+    top: -0.5em;\n+    display: none;\n+}\n+div.snippet-container:hover button.snippet-copy span {\n+    display: inline;\n+}\n+div.snippet-container:hover button.snippet-copy {\n+    opacity: 80%;\n+}\n+div.snippet-container button.snippet-copy:hover {\n+    opacity: 100%;\n+}\n+button.snippet-copy:active {\n+    background: #d3d3d3;\n+}\n@@ -1070,43 +1132,0 @@\n-button.snippet-copy {\n-    position: absolute;\n-    top: 6px;\n-    right: 6px;\n-    height: 1.7em;\n-    opacity: 50%;\n-    transition: opacity 0.2s;\n-    padding: 2px;\n-    border: none;\n-    cursor: pointer;\n-    background: none;\n-}\n-button.snippet-copy img {\n-    width: 18px;\n-    height: 18px;\n-    padding: 0.05em 0;\n-    background: none;\n-}\n-div.snippet-container:hover button.snippet-copy {\n-    opacity: 80%;\n-}\n-div.snippet-container button.snippet-copy:hover {\n-    opacity: 100%;\n-}\n-button.snippet-copy span {\n-    color: #3d3d3d;\n-    content: attr(aria-label);\n-    font-family:'DejaVu Sans', Arial, Helvetica, sans-serif;\n-    font-size: 85%;\n-    line-height: 1.2em;\n-    padding: 0.2em;\n-    position: relative;\n-    white-space: nowrap;\n-    top: -0.5em;\n-    display: none;\n-}\n-div.snippet-container:hover button.snippet-copy span {\n-    display: inline;\n-}\n-button.snippet-copy:active {\n-    background: #d3d3d3;\n-    opacity: 100%;\n-}\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/stylesheet.css","additions":109,"deletions":90,"binary":false,"changes":199,"status":"modified"},{"patch":"@@ -138,1 +138,1 @@\n-        removeAll(styleSheetNames, \"result-highlight\", \"result-item\",\n+        removeAll(styleSheetNames, \"result-highlight\", \"result-item\", \"copy-header\",\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/checkStylesheetClasses\/CheckStylesheetClasses.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -122,1 +122,1 @@\n-                <div class=\"snippet-container\"><button class=\"snippet-copy\" onclick=\"copySnippet(this)\">\\\n+                <div class=\"snippet-container\"><button class=\"copy snippet-copy\" onclick=\"copySnippet(this)\">\\\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSnippetTag\/SnippetTester.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -90,1 +90,2 @@\n-                        <div class=\"snippet-container\"><button class=\"snippet-copy\" onclick=\"copySnippet(this)\"><span data-copied=\"Copied!\">Copy<\/span><img src=\"copy.svg\" alt=\"Copy\"><\/button>\n+                        <div class=\"snippet-container\"><button class=\"copy snippet-copy\" onclick=\"copySnippet\\\n+                        (this)\"><span data-copied=\"Copied!\">Copy<\/span><img src=\"copy.svg\" alt=\"Copy\"><\/button>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSnippetTag\/TestSnippetUnnamedPackage.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}