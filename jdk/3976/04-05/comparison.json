{"files":[{"patch":"@@ -478,1 +478,2 @@\n-            if (++counter < 0) \/\/ overflow\n+            if (counter == Integer.MAX_VALUE) {\n+                \/\/ prevent overflow\n@@ -480,0 +481,2 @@\n+            }\n+            ++counter;\n@@ -483,2 +486,1 @@\n-            if (--counter < 0) \/\/ underflow\n-                throw new Error(\"Lock count is below zero\");\n+            --counter;\n@@ -497,3 +499,3 @@\n-        nativeLibraryLockMap.compute(libraryName, (name, lock) -> {\n-            if (lock == null) {\n-                lock = new CountedLock();\n+        nativeLibraryLockMap.compute(libraryName, (name, currentLock) -> {\n+            if (currentLock == null) {\n+                currentLock = new CountedLock();\n@@ -502,2 +504,2 @@\n-            lock.increment();\n-            return lock;\n+            currentLock.increment();\n+            return currentLock;\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/loader\/NativeLibraries.java","additions":10,"deletions":8,"binary":false,"changes":18,"status":"modified"}]}