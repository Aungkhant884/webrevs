{"files":[{"patch":"@@ -8071,3 +8071,0 @@\n-    const MachNode* mask_node = static_cast<const MachNode*>(this->in(this->operand_index($mask)));\n-    assert(mask_node->bottom_type()->isa_vect(), \"\");\n-    int vector_len = vector_length_encoding(mask_node);\n@@ -8075,1 +8072,2 @@\n-    int mask_len = mask_node->bottom_type()->is_vect()->length();\n+    int vlen_enc = vector_length_encoding(this, $mask);\n+    int mask_len = vector_length(this, $mask);\n@@ -8077,1 +8075,1 @@\n-                             $tmp$$Register, $ktmp$$KRegister, mask_len, vector_len);\n+                             $tmp$$Register, $ktmp$$KRegister, mask_len, vlen_enc);\n@@ -8089,3 +8087,0 @@\n-    const MachNode* mask_node = static_cast<const MachNode*>(this->in(this->operand_index($mask)));\n-    assert(mask_node->bottom_type()->isa_vect(), \"\");\n-    int vector_len = vector_length_encoding(mask_node);\n@@ -8093,1 +8088,2 @@\n-    int mask_len = mask_node->bottom_type()->is_vect()->length();\n+    int vlen_enc = vector_length_encoding(this, $mask);\n+    int mask_len = vector_length(this, $mask);\n@@ -8095,1 +8091,1 @@\n-                             $tmp$$Register, $ktmp$$KRegister, mask_len, vector_len);\n+                             $tmp$$Register, $ktmp$$KRegister, mask_len, vlen_enc);\n@@ -8106,3 +8102,0 @@\n-    const MachNode* mask_node = static_cast<const MachNode*>(this->in(this->operand_index($mask)));\n-    assert(mask_node->bottom_type()->isa_vect(), \"\");\n-    int vector_len = vector_length_encoding(mask_node);\n@@ -8110,1 +8103,2 @@\n-    int mask_len = mask_node->bottom_type()->is_vect()->length();\n+    int vlen_enc = vector_length_encoding(this, $mask);\n+    int mask_len = vector_length(this, $mask);\n@@ -8112,1 +8106,1 @@\n-                             $xtmp1$$XMMRegister, $tmp$$Register, mask_len, vector_len);\n+                             $xtmp1$$XMMRegister, $tmp$$Register, mask_len, vlen_enc);\n@@ -8124,3 +8118,0 @@\n-    const MachNode* mask_node = static_cast<const MachNode*>(this->in(this->operand_index($mask)));\n-    assert(mask_node->bottom_type()->isa_vect(), \"\");\n-    int vector_len = vector_length_encoding(mask_node);\n@@ -8128,1 +8119,2 @@\n-    int mask_len = mask_node->bottom_type()->is_vect()->length();\n+    int vlen_enc = vector_length_encoding(this, $mask);\n+    int mask_len = vector_length(this, $mask);\n@@ -8130,1 +8122,1 @@\n-                             $xtmp1$$XMMRegister, $tmp$$Register, mask_len, vector_len);\n+                             $xtmp1$$XMMRegister, $tmp$$Register, mask_len, vlen_enc);\n","filename":"src\/hotspot\/cpu\/x86\/x86.ad","additions":12,"deletions":20,"binary":false,"changes":32,"status":"modified"}]}