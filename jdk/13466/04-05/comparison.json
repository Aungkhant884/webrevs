{"files":[{"patch":"@@ -126,1 +126,1 @@\n-        X500Principal[] getAuthorities() {\n+        X500Principal[] getAuthorities() throws SSLException{\n@@ -128,3 +128,9 @@\n-            int i = 0;\n-            for (byte[] encoded : authorities) {\n-                principals[i++] = new X500Principal(encoded);\n+\n+            try {\n+                int i = 0;\n+                for (byte[] encoded : authorities) {\n+                    principals[i++] = new X500Principal(encoded);\n+                }\n+            } catch (IllegalArgumentException iae) {\n+                throw new SSLException(\"X500Principal could not be parsed \" +\n+                        \"successfully\", iae);\n@@ -142,2 +148,6 @@\n-                X500Principal principal = new X500Principal(encoded);\n-                builder.append(principal.toString());\n+                try {\n+                    X500Principal principal = new X500Principal(encoded);\n+                    builder.append(principal.toString());\n+                } catch (IllegalArgumentException iae) {\n+                    builder.append(\"unparseable X500Principal\");\n+                }\n@@ -281,6 +291,1 @@\n-            try {\n-                shc.peerSupportedAuthorities = spec.getAuthorities();\n-            } catch (IllegalArgumentException iae) {\n-                throw shc.conContext.fatal(Alert.ILLEGAL_PARAMETER,\n-                        \"Certificate authority distinguished name is not valid\");\n-            }\n+            shc.peerSupportedAuthorities = spec.getAuthorities();\n","filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/CertificateAuthoritiesExtension.java","additions":17,"deletions":12,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,0 +35,1 @@\n+import javax.net.ssl.SSLException;\n@@ -201,1 +202,1 @@\n-        X500Principal[] getAuthorities() {\n+        X500Principal[] getAuthorities() throws SSLException {\n@@ -204,2 +205,8 @@\n-            for (byte[] encoded : authorities) {\n-                principals[i++] = new X500Principal(encoded);\n+\n+            try {\n+                for (byte[] encoded : authorities) {\n+                    principals[i++] = new X500Principal(encoded);\n+                }\n+            } catch (IllegalArgumentException iae) {\n+                throw new SSLException(\"X500Principal could not be parsed \" +\n+                        \"successfully\", iae);\n@@ -257,2 +264,6 @@\n-                X500Principal principal = new X500Principal(encoded);\n-                authorityNames.add(principal.toString());\n+                try {\n+                    X500Principal principal = new X500Principal(encoded);\n+                    authorityNames.add(principal.toString());\n+                } catch (IllegalArgumentException iae) {\n+                    authorityNames.add(\"unparseable X500Principal\");\n+                }\n@@ -515,1 +526,1 @@\n-        X500Principal[] getAuthorities() {\n+        X500Principal[] getAuthorities() throws SSLException {\n@@ -518,2 +529,8 @@\n-            for (byte[] encoded : authorities) {\n-                principals[i++] = new X500Principal(encoded);\n+\n+            try {\n+                for (byte[] encoded : authorities) {\n+                    principals[i++] = new X500Principal(encoded);\n+                }\n+            } catch (IllegalArgumentException iae) {\n+                throw new SSLException(\"X500Principal could not be parsed \" +\n+                        \"successfully\", iae);\n@@ -582,2 +599,6 @@\n-                X500Principal principal = new X500Principal(encoded);\n-                authorityNames.add(principal.toString());\n+                try {\n+                    X500Principal principal = new X500Principal(encoded);\n+                    authorityNames.add(principal.toString());\n+                } catch (IllegalArgumentException iae) {\n+                    authorityNames.add(\"unparseable X500Principal\");\n+                }\n","filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/CertificateRequest.java","additions":32,"deletions":11,"binary":false,"changes":43,"status":"modified"}]}