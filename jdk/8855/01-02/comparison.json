{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,2 @@\n+import org.openjdk.jmh.annotations.Fork;\n+import org.openjdk.jmh.annotations.Measurement;\n@@ -32,0 +34,2 @@\n+import org.openjdk.jmh.annotations.Warmup;\n+import org.openjdk.jmh.infra.Blackhole;\n@@ -33,1 +37,0 @@\n-import java.lang.invoke.CallSite;\n@@ -43,0 +46,2 @@\n+@Warmup(iterations = 10, time = 2000, timeUnit = TimeUnit.MILLISECONDS)\n+@Measurement(iterations = 10, time = 2000, timeUnit = TimeUnit.MILLISECONDS)\n@@ -45,0 +50,1 @@\n+@Fork(3)\n@@ -47,1 +53,1 @@\n-    public MethodType mt =\n+    public MethodType mt1 =\n@@ -50,1 +56,11 @@\n-    public String recipe = \"test\\u0001foo\\u0001\\u0002bar\\u0001\\u0002baz\\u0001\";\n+    public String recipe1 = \"test\\u0001foo\\u0001bar\\u0001baz\\u0001\";\n+\n+    public MethodType mt2 =\n+            MethodType.methodType(String.class, String.class, String.class);\n+    public String recipe2 = \"test\\u0001foo\\u0001\";\n+\n+    public MethodType mt3 =\n+            MethodType.methodType(String.class, String.class, String.class, String.class,\n+                                  String.class, String.class, String.class);\n+    public String recipe3 = \"\\u0001test\\u0001foo\\u0001bar\\u0001baz\\u0001\\u0001\";\n+\n@@ -61,2 +77,4 @@\n-    public CallSite makeConcatWithConstants() throws Throwable {\n-        return StringConcatFactory.makeConcatWithConstants(lookup, \"dummy\", mt, recipe, \"const1\", \"const2\");\n+    public void makeConcatWithConstants(Blackhole bh) throws Throwable {\n+        bh.consume(StringConcatFactory.makeConcatWithConstants(lookup, \"dummy\", mt1, recipe1));\n+        bh.consume(StringConcatFactory.makeConcatWithConstants(lookup, \"dummy\", mt2, recipe2));\n+        bh.consume(StringConcatFactory.makeConcatWithConstants(lookup, \"dummy\", mt3, recipe3));\n","filename":"test\/micro\/org\/openjdk\/bench\/java\/lang\/invoke\/StringConcatFactoryBootstraps.java","additions":24,"deletions":6,"binary":false,"changes":30,"status":"modified"}]}