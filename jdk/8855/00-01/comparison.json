{"files":[{"patch":"@@ -650,3 +650,9 @@\n-        if (count == 4) {\n-            MethodHandle mix = mixer(ptypes[pos], ptypes[pos + 1], ptypes[pos + 2], ptypes[pos + 3]);\n-            mix = MethodHandles.insertArguments(mix,0, initialLengthCoder);\n+        MethodHandle mix = switch (count) {\n+            case 1 -> mixer(ptypes[pos]);\n+            case 2 -> mixer(ptypes[pos], ptypes[pos + 1]);\n+            case 3 -> mixer(ptypes[pos], ptypes[pos + 1], ptypes[pos + 2]);\n+            case 4 -> mixer(ptypes[pos], ptypes[pos + 1], ptypes[pos + 2], ptypes[pos + 3]);\n+            default -> throw new IllegalArgumentException(\"Unexpected count: \" + count);\n+        };\n+        mix = MethodHandles.insertArguments(mix,0, initialLengthCoder);\n+        if (count == 1) {\n@@ -654,1 +660,1 @@\n-                    1 + pos, 2 + pos, 3 + pos, 4 + pos \/\/ selected arguments\n+                    1 + pos \/\/ selected arguments\n@@ -656,4 +662,1 @@\n-        }\n-        if (count == 3) {\n-            MethodHandle mix = mixer(ptypes[pos], ptypes[pos + 1], ptypes[pos + 2]);\n-            mix = MethodHandles.insertArguments(mix,0, initialLengthCoder);\n+        } else if (count == 2) {\n@@ -661,1 +664,1 @@\n-                1 + pos, 2 + pos, 3 + pos \/\/ selected arguments\n+                    1 + pos, 2 + pos \/\/ selected arguments\n@@ -663,4 +666,1 @@\n-        }\n-        if (count == 2) {\n-            MethodHandle mix = mixer(ptypes[pos], ptypes[pos + 1]);\n-            mix = MethodHandles.insertArguments(mix,0, initialLengthCoder);\n+        } else if (count == 3) {\n@@ -668,1 +668,1 @@\n-                    1 + pos, 2 + pos \/\/ selected arguments\n+                    1 + pos, 2 + pos, 3 + pos \/\/ selected arguments\n@@ -670,4 +670,1 @@\n-        }\n-        if (count == 1) {\n-            MethodHandle mix = mixer(ptypes[pos]);\n-            mix = MethodHandles.insertArguments(mix,0, initialLengthCoder);\n+        } else {\n@@ -675,1 +672,1 @@\n-                    1 + pos \/\/ selected arguments\n+                    1 + pos, 2 + pos, 3 + pos, 4 + pos \/\/ selected arguments\n@@ -678,1 +675,0 @@\n-        throw new IllegalArgumentException(\"Unexpected count: \" + count);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/StringConcatFactory.java","additions":16,"deletions":20,"binary":false,"changes":36,"status":"modified"}]}