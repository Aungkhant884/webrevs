{"files":[{"patch":"@@ -3478,0 +3478,1 @@\n+  \/\/ Include the page size flag to ensure we sanity check the correct page size.\n@@ -3496,2 +3497,1 @@\n-   bool large_page_found = false;\n-  \/\/ Include the page size flag to ensure we sanity check the correct page size.\n+\n@@ -3499,1 +3499,1 @@\n-    if (os::Linux::try_commit_using_large_page(local_page_size) && !large_page_found) {\n+    if (os::Linux::try_commit_using_large_page(local_page_size)) {\n@@ -3501,1 +3501,1 @@\n-      large_page_found = true;\n+      return true;\n@@ -3509,1 +3509,1 @@\n-  return large_page_found;\n+  return false;\n@@ -4028,2 +4028,3 @@\n-    \/\/ Failed to commit large pages, so we need to unmap the whole reservation.\n-    ::munmap(aligned_start, bytes);\n+    \/\/ Failed to commit large pages, so we need to unmap the\n+    \/\/ reminder of the orinal reservation.\n+    ::munmap(small_start, small_size);\n@@ -4036,2 +4037,3 @@\n-    \/\/ Failed to commit the remaining size, need to unmap the whole reservation\n-    ::munmap(aligned_start, bytes);\n+    \/\/ Failed to commit the remaining size, need to unmap\n+    \/\/ the large pages part of the reservation.\n+    ::munmap(aligned_start, large_bytes);\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":11,"deletions":9,"binary":false,"changes":20,"status":"modified"}]}