{"files":[{"patch":"@@ -4558,0 +4558,1 @@\n+            origEndPos = getEndPos(mostInnerType);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/parser\/JavacParser.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8080357 8167643 8187359 8199762 8080353 8246353 8247456\n+ * @bug 8080357 8167643 8187359 8199762 8080353 8246353 8247456 8267221\n@@ -377,0 +377,10 @@\n+\n+    \/\/JDK-8267221:\n+    public void testMethodArrayParameters() {\n+        MethodSnippet m1 = methodKey(assertEval(\"void m1(int... p) { }\", added(VALID)));\n+        assertEquals(m1.parameterTypes(), \"int...\");\n+        MethodSnippet m2 = methodKey(assertEval(\"void m2(int[]... p) { }\", added(VALID)));\n+        assertEquals(m2.parameterTypes(), \"int[]...\");\n+        MethodSnippet m3 = methodKey(assertEval(\"void m3(int[][] p) { }\", added(VALID)));\n+        assertEquals(m3.parameterTypes(), \"int[][]\");\n+    }\n","filename":"test\/langtools\/jdk\/jshell\/MethodsTest.java","additions":11,"deletions":1,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 7073631 7159445 7156633 8028235 8065753 8205418 8205913 8228451 8237041 8253584 8246774 8256411 8256149 8259050 8266436\n+ * @bug 7073631 7159445 7156633 8028235 8065753 8205418 8205913 8228451 8237041 8253584 8246774 8256411 8256149 8259050 8266436 8267221\n@@ -1778,0 +1778,21 @@\n+    @Test \/\/JDK-8267221\n+    void testVarArgArrayParameter() throws IOException {\n+        String code = \"\"\"\n+                      package test;\n+                      public class Test {\n+                           private void test(int[]... p) {}\n+                      }\n+                      \"\"\";\n+\n+        JavacTaskImpl ct = (JavacTaskImpl) tool.getTask(null, fm, null,\n+                null, null, Arrays.asList(new MyFileObject(code)));\n+        CompilationUnitTree cut = ct.parse().iterator().next();\n+        ClassTree clazz = (ClassTree) cut.getTypeDecls().get(0);\n+        MethodTree constr = (MethodTree) clazz.getMembers().get(0);\n+        VariableTree param = constr.getParameters().get(0);\n+        SourcePositions sp = Trees.instance(ct).getSourcePositions();\n+        int typeStart = (int) sp.getStartPosition(cut, param.getType());\n+        int typeEnd   = (int) sp.getEndPosition(cut, param.getType());\n+        assertEquals(\"correct parameter type span\", code.substring(typeStart, typeEnd), \"int[]...\");\n+    }\n+\n","filename":"test\/langtools\/tools\/javac\/parser\/JavacParserTest.java","additions":22,"deletions":1,"binary":false,"changes":23,"status":"modified"}]}