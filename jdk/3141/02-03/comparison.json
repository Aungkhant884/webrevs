{"files":[{"patch":"@@ -211,1 +211,1 @@\n-  _res = load_new_class_versions(Thread::current());\n+  _res = load_new_class_versions();\n@@ -1344,1 +1344,1 @@\n-jvmtiError VM_RedefineClasses::load_new_class_versions(TRAPS) {\n+jvmtiError VM_RedefineClasses::load_new_class_versions() {\n@@ -1357,1 +1357,2 @@\n-  ResourceMark rm(THREAD);\n+  JavaThread* current = JavaThread::current();\n+  ResourceMark rm(current);\n@@ -1359,1 +1360,1 @@\n-  JvmtiThreadState *state = JvmtiThreadState::state_for(JavaThread::current());\n+  JvmtiThreadState *state = JvmtiThreadState::state_for(current);\n@@ -1367,1 +1368,1 @@\n-    HandleMark hm(THREAD);\n+    HandleMark hm(current);\n@@ -1381,2 +1382,2 @@\n-    Handle the_class_loader(THREAD, the_class->class_loader());\n-    Handle protection_domain(THREAD, the_class->protection_domain());\n+    Handle the_class_loader(current, the_class->class_loader());\n+    Handle protection_domain(current, the_class->protection_domain());\n@@ -1388,0 +1389,1 @@\n+    Thread* THREAD = current;  \/\/ for exception processing\n@@ -1913,1 +1915,1 @@\n-    if (!rewrite_cp_refs(scratch_class, THREAD)) {\n+    if (!rewrite_cp_refs(scratch_class)) {\n@@ -1933,2 +1935,1 @@\n-bool VM_RedefineClasses::rewrite_cp_refs(InstanceKlass* scratch_class,\n-       TRAPS) {\n+bool VM_RedefineClasses::rewrite_cp_refs(InstanceKlass* scratch_class) {\n@@ -1955,1 +1956,1 @@\n-  if (!rewrite_cp_refs_in_methods(scratch_class, THREAD)) {\n+  if (!rewrite_cp_refs_in_methods(scratch_class)) {\n@@ -2103,2 +2104,1 @@\n-bool VM_RedefineClasses::rewrite_cp_refs_in_methods(\n-       InstanceKlass* scratch_class, TRAPS) {\n+bool VM_RedefineClasses::rewrite_cp_refs_in_methods(InstanceKlass* scratch_class) {\n@@ -2113,0 +2113,1 @@\n+  JavaThread* current = JavaThread::current();\n@@ -2115,1 +2116,1 @@\n-    methodHandle method(THREAD, methods->at(i));\n+    methodHandle method(current, methods->at(i));\n@@ -2117,0 +2118,1 @@\n+    Thread* THREAD = current; \/\/ For exception handling\n","filename":"src\/hotspot\/share\/prims\/jvmtiRedefineClasses.cpp","additions":16,"deletions":14,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -403,1 +403,1 @@\n-  jvmtiError load_new_class_versions(TRAPS);\n+  jvmtiError load_new_class_versions();\n@@ -458,1 +458,1 @@\n-  bool rewrite_cp_refs(InstanceKlass* scratch_class, TRAPS);\n+  bool rewrite_cp_refs(InstanceKlass* scratch_class);\n@@ -484,1 +484,1 @@\n-  bool rewrite_cp_refs_in_methods(InstanceKlass* scratch_class, TRAPS);\n+  bool rewrite_cp_refs_in_methods(InstanceKlass* scratch_class);\n","filename":"src\/hotspot\/share\/prims\/jvmtiRedefineClasses.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}