{"files":[{"patch":"@@ -122,0 +122,17 @@\n+    private void setProgress(int nr) throws IOException {\n+        if (nr > 0) {\n+            if (nread + nr > nread) {\n+                monitor.setProgress(nread += nr);\n+            } else {\n+                monitor.setProgress(monitor.getMaximum() - 1);\n+            }\n+        } else { \/\/ if EOF reached\n+            monitor.setProgress(monitor.getMaximum());\n+        }\n+        if (monitor.isCanceled()) {\n+            InterruptedIOException exc =\n+                    new InterruptedIOException(\"progress\");\n+            exc.bytesTransferred = nread;\n+            throw exc;\n+        }\n+    }\n@@ -129,7 +146,1 @@\n-        if (nr > 0) monitor.setProgress(nread += nr);\n-        if (monitor.isCanceled()) {\n-            InterruptedIOException exc =\n-                                    new InterruptedIOException(\"progress\");\n-            exc.bytesTransferred = nread;\n-            throw exc;\n-        }\n+        setProgress(nr);\n@@ -148,7 +159,1 @@\n-        if (nr > 0) monitor.setProgress(nread += nr);\n-        if (monitor.isCanceled()) {\n-            InterruptedIOException exc =\n-                                    new InterruptedIOException(\"progress\");\n-            exc.bytesTransferred = nread;\n-            throw exc;\n-        }\n+        setProgress(nr);\n@@ -165,1 +170,7 @@\n-        if (nr > 0) monitor.setProgress(nread += nr);\n+        if (nr > 0) {\n+            if ((int)(nread + nr) > nread) {\n+                monitor.setProgress(nread += nr);\n+            } else {\n+                monitor.setProgress(monitor.getMaximum());\n+            }\n+        }\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/ProgressMonitorInputStream.java","additions":26,"deletions":15,"binary":false,"changes":41,"status":"modified"}]}