{"files":[{"patch":"@@ -38,0 +38,1 @@\n+import java.util.concurrent.CyclicBarrier;\n@@ -44,1 +45,1 @@\n-    private static volatile boolean lock2Held;\n+    private static final CyclicBarrier barrier = new CyclicBarrier(2);\n@@ -59,3 +60,1 @@\n-                while (!lock2Held) {\n-                    try { Thread.sleep(10); } catch (Exception e) { }\n-                }\n+                try { barrier.await(); } catch (Exception ie) {}\n@@ -73,1 +72,1 @@\n-                lock2Held = true;\n+                try { barrier.await(); } catch (Exception ie) {}\n@@ -101,0 +100,3 @@\n+            if (thread.getState() == Thread.State.TERMINATED) {\n+                throw new RuntimeException(\"Thread \" + thread + \" is terminated.\");\n+            }\n","filename":"test\/jdk\/java\/lang\/management\/ThreadMXBean\/VirtualThreadDeadlocks.java","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"}]}