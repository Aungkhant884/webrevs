{"files":[{"patch":"@@ -154,1 +154,0 @@\n-        Point viewPosition = getScrollPane().getViewport().getViewPosition();\n@@ -157,3 +156,1 @@\n-            setZoomFactor(newZoom);\n-            validate();\n-            getScrollPane().getViewport().setViewPosition(new Point((int) (viewPosition.x \/ DiagramScene.ZOOM_INCREMENT), (int) (viewPosition.y \/ DiagramScene.ZOOM_INCREMENT)));\n+            zoom(newZoom);\n@@ -167,1 +164,0 @@\n-        Point viewPosition = getScrollPane().getViewport().getViewPosition();\n@@ -170,3 +166,1 @@\n-            setZoomFactor(newZoom);\n-            validate();\n-            getScrollPane().getViewport().setViewPosition(new Point((int) (viewPosition.x * DiagramScene.ZOOM_INCREMENT), (int) (viewPosition.y * DiagramScene.ZOOM_INCREMENT)));\n+            zoom(newZoom);\n@@ -176,0 +170,9 @@\n+    private void zoom(double newZoom) {\n+        double currentZoom = getZoomFactor();\n+        Point viewPosition = getScrollPane().getViewport().getViewPosition();\n+        Rectangle viewRect = getScrollPane().getViewport().getViewRect();\n+        setZoomFactor(newZoom);\n+        validate();\n+        getScrollPane().getViewport().validate();\n+        getScrollPane().getViewport().setViewPosition(new Point((int) ((viewPosition.x + viewRect.width \/ 2) * newZoom \/ currentZoom - viewRect.width \/ 2), (int) ((viewPosition.y + viewRect.height \/ 2) * newZoom \/ currentZoom - viewRect.height \/ 2)));\n+    }\n","filename":"src\/utils\/IdealGraphVisualizer\/View\/src\/main\/java\/com\/sun\/hotspot\/igv\/view\/DiagramScene.java","additions":11,"deletions":8,"binary":false,"changes":19,"status":"modified"}]}