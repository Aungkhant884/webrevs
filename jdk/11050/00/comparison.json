{"files":[{"patch":"@@ -1087,1 +1087,1 @@\n-  ReservedSpace total_space_rs, archive_space_rs, class_space_rs;\n+  ReservedSpace archive_space_rs, class_space_rs;\n@@ -1092,1 +1092,0 @@\n-                                                                 total_space_rs,\n@@ -1143,1 +1142,0 @@\n-        assert(!total_space_rs.is_reserved(), \"Should not be reserved for Windows\");\n@@ -1212,1 +1210,1 @@\n-    release_reserved_spaces(total_space_rs, archive_space_rs, class_space_rs);\n+    release_reserved_spaces(archive_space_rs, class_space_rs);\n@@ -1261,4 +1259,0 @@\n-\/\/    - total_space_rs will be reserved as whole for archive_space_rs and\n-\/\/      class_space_rs if UseCompressedClassPointers is true.\n-\/\/      On Windows, try reserve archive_space_rs and class_space_rs\n-\/\/      separately first if use_archive_base_addr is true.\n@@ -1279,1 +1273,0 @@\n-                                                          ReservedSpace& total_space_rs,\n@@ -1359,1 +1352,1 @@\n-      release_reserved_spaces(total_space_rs, archive_space_rs, class_space_rs);\n+      release_reserved_spaces(archive_space_rs, class_space_rs);\n@@ -1363,0 +1356,1 @@\n+    ReservedSpace total_space_rs;\n@@ -1408,2 +1402,1 @@\n-void MetaspaceShared::release_reserved_spaces(ReservedSpace& total_space_rs,\n-                                              ReservedSpace& archive_space_rs,\n+void MetaspaceShared::release_reserved_spaces(ReservedSpace& archive_space_rs,\n@@ -1411,12 +1404,7 @@\n-  if (total_space_rs.is_reserved()) {\n-    log_debug(cds)(\"Released shared space (archive + class) \" INTPTR_FORMAT, p2i(total_space_rs.base()));\n-    total_space_rs.release();\n-  } else {\n-    if (archive_space_rs.is_reserved()) {\n-      log_debug(cds)(\"Released shared space (archive) \" INTPTR_FORMAT, p2i(archive_space_rs.base()));\n-      archive_space_rs.release();\n-    }\n-    if (class_space_rs.is_reserved()) {\n-      log_debug(cds)(\"Released shared space (classes) \" INTPTR_FORMAT, p2i(class_space_rs.base()));\n-      class_space_rs.release();\n-    }\n+  if (archive_space_rs.is_reserved()) {\n+    log_debug(cds)(\"Released shared space (archive) \" INTPTR_FORMAT, p2i(archive_space_rs.base()));\n+    archive_space_rs.release();\n+  }\n+  if (class_space_rs.is_reserved()) {\n+    log_debug(cds)(\"Released shared space (classes) \" INTPTR_FORMAT, p2i(class_space_rs.base()));\n+    class_space_rs.release();\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.cpp","additions":12,"deletions":24,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -194,1 +194,0 @@\n-                                                  ReservedSpace& total_space_rs,\n@@ -197,2 +196,1 @@\n- static void release_reserved_spaces(ReservedSpace& total_space_rs,\n-                                     ReservedSpace& archive_space_rs,\n+ static void release_reserved_spaces(ReservedSpace& archive_space_rs,\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.hpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"}]}