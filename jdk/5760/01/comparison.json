{"files":[{"patch":"@@ -1413,6 +1413,16 @@\n-        while (!conContext.isInboundClosed()) {\n-            try {\n-                Plaintext plainText = decode(null);\n-                if ((plainText.contentType == ContentType.HANDSHAKE.id) &&\n-                        conContext.isNegotiated) {\n-                    return 0;\n+        appInput.readLock.lock();\n+        try {\n+            while (!conContext.isInboundClosed()) {\n+                try {\n+                    Plaintext plainText = decode(null);\n+                    if ((plainText.contentType == ContentType.HANDSHAKE.id) &&\n+                            conContext.isNegotiated) {\n+                        return 0;\n+                    }\n+                } catch (SSLException |\n+                        InterruptedIOException | SocketException se) {\n+                    \/\/ Don't change exception in case of timeouts or interrupts\n+                    \/\/ or SocketException.\n+                    throw se;\n+                } catch (IOException ioe) {\n+                    throw new SSLException(\"readHandshakeRecord\", ioe);\n@@ -1420,7 +1430,0 @@\n-            } catch (SSLException |\n-                    InterruptedIOException | SocketException se) {\n-                \/\/ Don't change exception in case of timeouts or interrupts\n-                \/\/ or SocketException.\n-                throw se;\n-            } catch (IOException ioe) {\n-                throw new SSLException(\"readHandshakeRecord\", ioe);\n@@ -1428,0 +1431,2 @@\n+        } finally {\n+            appInput.readLock.unlock();\n","filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/SSLSocketImpl.java","additions":18,"deletions":13,"binary":false,"changes":31,"status":"modified"}]}