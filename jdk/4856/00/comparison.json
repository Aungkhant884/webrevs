{"files":[{"patch":"@@ -1031,0 +1031,3 @@\n+  if (!VerifyBeforeGC) {\n+    return;\n+  }\n@@ -1076,0 +1079,3 @@\n+  if (!VerifyAfterGC) {\n+    return;\n+  }\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectedHeap.cpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,2 @@\n+ * @build sun.hotspot.WhiteBox\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller sun.hotspot.WhiteBox\n@@ -47,0 +49,2 @@\n+import sun.hotspot.WhiteBox;\n+\n@@ -66,4 +70,10 @@\n-        testVerifyFlags(false, false, filteredOpts);\n-        testVerifyFlags(true,  true,  filteredOpts);\n-        testVerifyFlags(true,  false, filteredOpts);\n-        testVerifyFlags(false, true,  filteredOpts);\n+        \/\/ Young GC\n+        testVerifyFlags(false, false, false, filteredOpts);\n+        testVerifyFlags(true,  true,  false, filteredOpts);\n+        testVerifyFlags(true,  false, false, filteredOpts);\n+        testVerifyFlags(false, true,  false, filteredOpts);\n+        \/\/ Full GC\n+        testVerifyFlags(false, false, true, filteredOpts);\n+        testVerifyFlags(true,  true,  true, filteredOpts);\n+        testVerifyFlags(true,  false, true, filteredOpts);\n+        testVerifyFlags(false, true,  true, filteredOpts);\n@@ -74,0 +84,1 @@\n+                                       boolean doFullGC,\n@@ -80,0 +91,3 @@\n+                                       \"-Xbootclasspath\/a:.\",\n+                                       \"-XX:+UnlockDiagnosticVMOptions\",\n+                                       \"-XX:+WhiteBoxAPI\",\n@@ -84,1 +98,0 @@\n-                                       \"-XX:+UnlockDiagnosticVMOptions\",\n@@ -89,1 +102,2 @@\n-                                       GarbageProducer.class.getName() });\n+                                       GarbageProducer.class.getName(),\n+                                       doFullGC ? \"t\" : \"f\" });\n@@ -114,4 +128,6 @@\n-            int j = 0;\n-            for(int i = 0; i<1000; i++) {\n-                garbage[j] = new long[10000];\n-                j = (j+1)%garbage.length;\n+            WhiteBox wb = WhiteBox.getWhiteBox();\n+\n+            if (args[0].equals(\"t\")) {\n+                wb.fullGC();\n+            } else {\n+                wb.youngGC();\n","filename":"test\/hotspot\/jtreg\/gc\/arguments\/TestVerifyBeforeAndAfterGCFlags.java","additions":27,"deletions":11,"binary":false,"changes":38,"status":"modified"}]}