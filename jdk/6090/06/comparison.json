{"files":[{"patch":"@@ -179,0 +179,2 @@\n+    *netifPP = NULL;\n+\n@@ -216,3 +218,1 @@\n-        \/\/ this different error code is to handle the case when we call\n-        \/\/ GetIpAddrTable in pure IPv6 environment\n-        return -2;\n+        return -1;\n@@ -376,0 +376,3 @@\n+\n+    *tablePP = NULL;\n+\n@@ -437,0 +440,2 @@\n+    *netaddrPP = NULL;\n+\n@@ -441,1 +446,1 @@\n-    if (tableP == NULL)\n+    if (tableP == NULL) {\n@@ -443,0 +448,1 @@\n+    }\n@@ -455,1 +461,0 @@\n-                free(tableP);\n@@ -521,0 +526,3 @@\n+\n+    *netaddrPP = NULL;\n+\n@@ -523,1 +531,1 @@\n-      return NULL;\n+      return ret;\n@@ -853,3 +861,1 @@\n-        }\n-        if (tableP != NULL) {\n-          free(tableP);\n+            free(tableP);\n@@ -925,0 +931,2 @@\n+            } else {\n+                free_netaddr(addrList);\n@@ -930,4 +938,1 @@\n-    }\n-\n-    \/* release the IP address table *\/\n-    if (tableP != NULL)\n+        \/* release the IP address table *\/\n@@ -935,0 +940,1 @@\n+    }\n@@ -951,1 +957,1 @@\n-    netif *ifList = NULL, *curr;\n+    netif *ifList, *curr;\n","filename":"src\/java.base\/windows\/native\/libnet\/NetworkInterface.c","additions":20,"deletions":14,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -82,0 +82,2 @@\n+    *adapters = NULL;\n+\n@@ -236,2 +238,0 @@\n-static int ipinflen = 2048;\n-\n@@ -245,1 +245,1 @@\n-    ULONG len=ipinflen, count=0;\n+    ULONG count=0;\n@@ -249,1 +249,0 @@\n-    *netifPP = NULL;\n@@ -256,1 +255,1 @@\n-    if (ret == -1) {\n+    if (ret < 0) {\n@@ -258,4 +257,0 @@\n-    } else if( ret == -2){\n-        if ((*env)->ExceptionCheck(env)) {\n-            (*env)->ExceptionClear(env);\n-        }\n@@ -277,1 +272,2 @@\n-    if (ret < 0) {\n+    if (ret == -1) {\n+      free_netif(*netifPP);\n@@ -279,0 +275,6 @@\n+    } else if (ret == -2) {\n+        \/\/ Clear the exception and continue.\n+        if ((*env)->ExceptionCheck(env)) {\n+            (*env)->ExceptionClear(env);\n+        }\n+        tableP = NULL;\n@@ -283,1 +285,2 @@\n-        if (ret == -1) {\n+        if (ret < 0) {\n+            free_netif(*netifPP);\n@@ -286,5 +289,0 @@\n-        } else if (ret == -2) {\n-            if ((*env)->ExceptionCheck(env)) {\n-                (*env)->ExceptionClear(env);\n-            }\n-            break;\n@@ -304,1 +302,2 @@\n-        goto err;\n+        free_netif(*netifPP);\n+        return -1;\n@@ -343,0 +342,3 @@\n+                        if (c == -1) {\n+                            goto err;\n+                        }\n@@ -381,0 +383,1 @@\n+                                free(nif);\n@@ -393,1 +396,5 @@\n-                        last->next = nif;\n+                        if (last) {\n+                                last->next = nif;\n+                        } else {\n+                                *netifPP = nif;\n+                        }\n@@ -588,0 +595,2 @@\n+            netaddrCount = 0;\n+            netaddrPToFree = NULL;\n@@ -829,1 +838,1 @@\n-    netif *ifList = NULL, *curr;\n+    netif *ifList, *curr;\n","filename":"src\/java.base\/windows\/native\/libnet\/NetworkInterface_winXP.c","additions":28,"deletions":19,"binary":false,"changes":47,"status":"modified"}]}