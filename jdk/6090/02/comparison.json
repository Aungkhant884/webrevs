{"files":[{"patch":"@@ -164,1 +164,1 @@\n- * Returns the number of interfaces found or -1 if error. If no error\n+ * Returns the number of interfaces found or -1\/-2 if error. If no error\n@@ -441,1 +441,2 @@\n-    if (tableP == NULL)\n+    if (tableP == NULL) {\n+        *netaddrPP = NULL;\n@@ -443,0 +444,1 @@\n+    }\n@@ -455,1 +457,0 @@\n-                free(tableP);\n@@ -523,1 +524,1 @@\n-      return NULL;\n+      return ret;\n@@ -925,0 +926,2 @@\n+            } else {\n+                free_netaddr(addrList);\n","filename":"src\/java.base\/windows\/native\/libnet\/NetworkInterface.c","additions":7,"deletions":4,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -236,2 +236,0 @@\n-static int ipinflen = 2048;\n-\n@@ -245,1 +243,1 @@\n-    ULONG len=ipinflen, count=0;\n+    ULONG count=0;\n@@ -256,1 +254,1 @@\n-    if (ret == -1) {\n+    if (ret < 0) {\n@@ -258,4 +256,0 @@\n-    } else if( ret == -2){\n-        if ((*env)->ExceptionCheck(env)) {\n-            (*env)->ExceptionClear(env);\n-        }\n@@ -277,1 +271,2 @@\n-    if (ret < 0) {\n+    if (ret == -1) {\n+      free_netif(*netifPP);\n@@ -279,0 +274,6 @@\n+    } else if (ret == -2) {\n+        \/\/ Clear the exception and continue.\n+        if ((*env)->ExceptionCheck(env)) {\n+            (*env)->ExceptionClear(env);\n+        }\n+        tableP = NULL;\n@@ -283,1 +284,2 @@\n-        if (ret == -1) {\n+        if (ret < 0) {\n+            free_netif(*netifPP);\n@@ -286,5 +288,0 @@\n-        } else if (ret == -2) {\n-            if ((*env)->ExceptionCheck(env)) {\n-                (*env)->ExceptionClear(env);\n-            }\n-            break;\n@@ -343,0 +340,3 @@\n+                        if (c == -1) {\n+                            goto err;\n+                        }\n@@ -381,0 +381,1 @@\n+                                free(nif);\n@@ -393,1 +394,5 @@\n-                        last->next = nif;\n+                        if (last) {\n+                                last->next = nif;\n+                        } else {\n+                                *netifPP = nif;\n+                        }\n@@ -588,0 +593,2 @@\n+            netaddrCount = 0;\n+            netaddrPToFree = NULL;\n","filename":"src\/java.base\/windows\/native\/libnet\/NetworkInterface_winXP.c","additions":23,"deletions":16,"binary":false,"changes":39,"status":"modified"}]}