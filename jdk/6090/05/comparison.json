{"files":[{"patch":"@@ -216,3 +216,1 @@\n-        \/\/ this different error code is to handle the case when we call\n-        \/\/ GetIpAddrTable in pure IPv6 environment\n-        return -2;\n+        return -1;\n@@ -441,1 +439,2 @@\n-    if (tableP == NULL)\n+    if (tableP == NULL) {\n+        *netaddrPP = NULL;\n@@ -443,0 +442,1 @@\n+    }\n@@ -455,1 +455,0 @@\n-                free(tableP);\n@@ -523,1 +522,1 @@\n-      return NULL;\n+      return ret;\n@@ -853,3 +852,1 @@\n-        }\n-        if (tableP != NULL) {\n-          free(tableP);\n+            free(tableP);\n@@ -925,0 +922,2 @@\n+            } else {\n+                free_netaddr(addrList);\n@@ -930,4 +929,1 @@\n-    }\n-\n-    \/* release the IP address table *\/\n-    if (tableP != NULL)\n+        \/* release the IP address table *\/\n@@ -935,0 +931,1 @@\n+    }\n@@ -951,1 +948,1 @@\n-    netif *ifList = NULL, *curr;\n+    netif *ifList, *curr;\n","filename":"src\/java.base\/windows\/native\/libnet\/NetworkInterface.c","additions":11,"deletions":14,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -236,2 +236,0 @@\n-static int ipinflen = 2048;\n-\n@@ -245,1 +243,1 @@\n-    ULONG len=ipinflen, count=0;\n+    ULONG count=0;\n@@ -249,1 +247,0 @@\n-    *netifPP = NULL;\n@@ -256,1 +253,1 @@\n-    if (ret == -1) {\n+    if (ret < 0) {\n@@ -258,4 +255,0 @@\n-    } else if( ret == -2){\n-        if ((*env)->ExceptionCheck(env)) {\n-            (*env)->ExceptionClear(env);\n-        }\n@@ -277,1 +270,2 @@\n-    if (ret < 0) {\n+    if (ret == -1) {\n+      free_netif(*netifPP);\n@@ -279,0 +273,6 @@\n+    } else if (ret == -2) {\n+        \/\/ Clear the exception and continue.\n+        if ((*env)->ExceptionCheck(env)) {\n+            (*env)->ExceptionClear(env);\n+        }\n+        tableP = NULL;\n@@ -283,1 +283,2 @@\n-        if (ret == -1) {\n+        if (ret < 0) {\n+            free_netif(*netifPP);\n@@ -286,5 +287,0 @@\n-        } else if (ret == -2) {\n-            if ((*env)->ExceptionCheck(env)) {\n-                (*env)->ExceptionClear(env);\n-            }\n-            break;\n@@ -304,1 +300,2 @@\n-        goto err;\n+        free_netif(*netifPP);\n+        return -1;\n@@ -343,0 +340,3 @@\n+                        if (c == -1) {\n+                            goto err;\n+                        }\n@@ -381,0 +381,1 @@\n+                                free(nif);\n@@ -393,1 +394,5 @@\n-                        last->next = nif;\n+                        if (last) {\n+                                last->next = nif;\n+                        } else {\n+                                *netifPP = nif;\n+                        }\n@@ -588,0 +593,2 @@\n+            netaddrCount = 0;\n+            netaddrPToFree = NULL;\n@@ -829,1 +836,1 @@\n-    netif *ifList = NULL, *curr;\n+    netif *ifList, *curr;\n","filename":"src\/java.base\/windows\/native\/libnet\/NetworkInterface_winXP.c","additions":26,"deletions":19,"binary":false,"changes":45,"status":"modified"}]}