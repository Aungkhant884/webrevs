{"files":[{"patch":"@@ -654,1 +654,1 @@\n-         \"call by myself or at direct handshake\");\n+         \"call by myself or at handshake\");\n@@ -697,1 +697,1 @@\n-         \"call by myself or at direct handshake\");\n+         \"call by myself or at handshake\");\n@@ -908,3 +908,2 @@\n-  assert(current_thread == java_thread ||\n-         java_thread->is_handshake_safe_for(current_thread),\n-         \"call by myself or at direct handshake\");\n+  assert(java_thread->is_handshake_safe_for(current_thread),\n+         \"call by myself or at handshake\");\n@@ -1164,2 +1163,1 @@\n-  assert(current_thread == thr ||\n-         SafepointSynchronize::is_at_safepoint() ||\n+  assert(SafepointSynchronize::is_at_safepoint() ||\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvBase.cpp","additions":5,"deletions":7,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -463,10 +463,0 @@\n-const char* executioner_name(Thread* current_thread, Thread* handshakee, bool current_is_requester) {\n-  if (current_thread == handshakee) return \"self(JavaThread)\";\n-  if (current_is_requester) {\n-    if (current_thread->is_VM_thread()) return \"handshaker(VM Thread)\";\n-    else return \"handshaker(JavaThread)\";\n-  }\n-  if (current_thread->is_VM_thread()) return \"cooperative(VM Thread)\";\n-  else return \"cooperative(JavaThread)\";\n-}\n-\n@@ -507,2 +497,3 @@\n-      log_trace(handshake)(\"Processing handshake \" INTPTR_FORMAT \" by %s\", p2i(op),\n-                           executioner_name(current_thread, _handshakee, op == match_op));\n+      log_trace(handshake)(\"Processing handshake \" INTPTR_FORMAT \" by %s(%s)\", p2i(op),\n+                           op == match_op ? \"handshaker\" : \"cooperative\",\n+                           current_thread->is_VM_thread() ? \"VM Thread\" : \"JavaThread\");\n@@ -524,2 +515,2 @@\n-  log_trace(handshake)(\"Thread %s(\" INTPTR_FORMAT \") executed %d ops for JavaThread: \" INTPTR_FORMAT \" %s target op: \" INTPTR_FORMAT,\n-                       executioner_name(current_thread, _handshakee, pr_ret == HandshakeState::_succeed),\n+  log_trace(handshake)(\"%s(\" INTPTR_FORMAT \") executed %d ops for JavaThread: \" INTPTR_FORMAT \" %s target op: \" INTPTR_FORMAT,\n+                       current_thread->is_VM_thread() ? \"VM Thread\" : \"JavaThread\",\n","filename":"src\/hotspot\/share\/runtime\/handshake.cpp","additions":5,"deletions":14,"binary":false,"changes":19,"status":"modified"}]}