{"files":[{"patch":"@@ -37,1 +37,1 @@\n- * @run main\/othervm jdk.jfr.jcmd.TestFilenameExpansion\n+ * @run main\/othervm -XX:StartFlightRecording=name=test,filename=output_%p.jfr jdk.jfr.jcmd.TestFilenameExpansion\n@@ -43,6 +43,0 @@\n-        test(\"output.jfr\", \"output.jfr\");\n-        test(\"output_%p.jfr\", \"output_\" + pid + \".jfr\");\n-        test(\"%p_output_%p.jfr\", pid + \"_output_\" + pid + \".jfr\");\n-        test(\"%%_output_%p.jfr\", \"%_output_\" + pid + \".jfr\");\n-        test(\"%a_output_%%\", \"%a_output_%\");\n-    }\n@@ -50,2 +44,9 @@\n-    private static void test(String name, String finalName) throws Exception {\n-        File file = new File(finalName);\n+        JcmdHelper.jcmd(\"JFR.stop name=test\");\n+        checkFileAndDelete(\"output_\" + pid + \".jfr\");\n+\n+        testJcmd(\"output.jfr\", \"output.jfr\");\n+        testJcmd(\"output_%p.jfr\", \"output_\" + pid + \".jfr\");\n+        testJcmd(\"%p_output_%p.jfr\", pid + \"_output_\" + pid + \".jfr\");\n+        testJcmd(\"%%_output_%p.jfr\", \"%_output_\" + pid + \".jfr\");\n+        testJcmd(\"%a_output_%%\", \"%a_output_%\");\n+    }\n@@ -53,0 +54,1 @@\n+    private static void testJcmd(String name, String finalName) throws Exception {\n@@ -56,1 +58,2 @@\n-        checkFileAndDelete(file);\n+        checkFileAndDelete(finalName);\n+        JcmdHelper.jcmd(\"JFR.stop name=test\");\n@@ -61,1 +64,2 @@\n-        checkFileAndDelete(file);\n+        checkFileAndDelete(finalName);\n+        JcmdHelper.jcmd(\"JFR.stop name=test\");\n@@ -66,1 +70,1 @@\n-        checkFileAndDelete(file);\n+        checkFileAndDelete(finalName);\n@@ -69,1 +73,2 @@\n-    private static void checkFileAndDelete(File file) {\n+    private static void checkFileAndDelete(String filename) {\n+        File file = new File(filename);\n","filename":"test\/jdk\/jdk\/jfr\/jcmd\/TestFilenameExpansion.java","additions":18,"deletions":13,"binary":false,"changes":31,"status":"modified"}]}