{"files":[{"patch":"@@ -809,0 +809,1 @@\n+                        return;\n@@ -811,1 +812,0 @@\n-                    \/\/ TODO: Maybe say what kind of frame was received instead\n@@ -814,0 +814,1 @@\n+                    return;\n@@ -879,1 +880,2 @@\n-        decodeHeaders(cf, pushContinuationState.pushContDecoder);\n+        var pcs = pushContinuationState;\n+        decodeHeaders(cf, pcs.pushContDecoder);\n@@ -882,2 +884,2 @@\n-            completePushPromise(pushContinuationState.pushContFrame.getPromisedStream(), parent,\n-                    pushContinuationState.pushContDecoder.headers());\n+            completePushPromise(pcs.pushContFrame.getPromisedStream(), parent,\n+                    pcs.pushContDecoder.headers());\n","filename":"src\/java.net.http\/share\/classes\/jdk\/internal\/net\/http\/Http2Connection.java","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -73,3 +73,3 @@\n-    static HttpHeaders testHeaders;\n-    static HttpHeadersBuilder testHeadersBuilder;\n-    static int continuationCount;\n+    static volatile HttpHeaders testHeaders;\n+    static volatile HttpHeadersBuilder testHeadersBuilder;\n+    static volatile int continuationCount;\n@@ -149,0 +149,15 @@\n+    @Test\n+    public void testThreeContinuations() {\n+        continuationCount = 3;\n+        HttpClient client = HttpClient.newHttpClient();\n+\n+        \/\/ Carry out request\n+        HttpRequest hreq = HttpRequest.newBuilder(uri).version(HttpClient.Version.HTTP_2).GET().build();\n+        CompletableFuture<HttpResponse<String>> cf =\n+                client.sendAsync(hreq, HttpResponse.BodyHandlers.ofString(UTF_8), pph);\n+        cf.join();\n+\n+        \/\/ Verify results\n+        verify();\n+    }\n+\n@@ -232,1 +247,1 @@\n-                System.err.println(\"Server: Scheduled a Continuation to Send\");\n+                System.err.println(\"Server: Scheduled a Push Promise to Send\");\n@@ -285,1 +300,1 @@\n-            System.err.println(\"Server: Push sent\");\n+            System.err.println(\"Server: Push Promise complete\");\n","filename":"test\/jdk\/java\/net\/httpclient\/http2\/PushPromiseContinuation.java","additions":20,"deletions":5,"binary":false,"changes":25,"status":"modified"}]}