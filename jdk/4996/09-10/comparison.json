{"files":[{"patch":"@@ -1021,2 +1021,1 @@\n-void InstanceKlass::add_initialization_error(Handle exception, TRAPS) {\n-  bool created = false;\n+void InstanceKlass::add_initialization_error(JavaThread* current, Handle exception) {\n@@ -1027,0 +1026,1 @@\n+  JavaThread* THREAD = current;\n@@ -1028,1 +1028,4 @@\n-  CLEAR_PENDING_EXCEPTION;\n+  if (HAS_PENDING_EXCEPTION || cause.is_null()) {\n+    CLEAR_PENDING_EXCEPTION;\n+    return;\n+  }\n@@ -1032,0 +1035,1 @@\n+  bool created = false;\n@@ -1109,1 +1113,0 @@\n-      CLEAR_PENDING_EXCEPTION; \/\/ ignore any OOM here.\n@@ -1148,1 +1151,1 @@\n-        add_initialization_error(e, THREAD);\n+        add_initialization_error(THREAD, e);\n@@ -1195,1 +1198,1 @@\n-      add_initialization_error(e, THREAD);\n+      add_initialization_error(THREAD, e);\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":9,"deletions":6,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -1211,1 +1211,1 @@\n-  void add_initialization_error(Handle exception, TRAPS);\n+  void add_initialization_error(JavaThread* current, Handle exception);\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -81,1 +81,1 @@\n-        \"java.lang.NoClassDefFoundError: Cound not initialize class InitExceptionUnloadTest$ThrowsRuntimeException\",\n+        \"java.lang.NoClassDefFoundError: Could not initialize class InitExceptionUnloadTest$ThrowsRuntimeException\",\n@@ -85,1 +85,1 @@\n-        \"java.lang.NoClassDefFoundError: Cound not initialize class InitExceptionUnloadTest$ThrowsError\",\n+        \"java.lang.NoClassDefFoundError: Could not initialize class InitExceptionUnloadTest$ThrowsError\",\n@@ -89,1 +89,1 @@\n-        \"java.lang.NoClassDefFoundError: Cound not initialize class InitExceptionUnloadTest$ThrowsSpecialException\",\n+        \"java.lang.NoClassDefFoundError: Could not initialize class InitExceptionUnloadTest$ThrowsSpecialException\",\n@@ -93,1 +93,1 @@\n-        \"java.lang.NoClassDefFoundError: Cound not initialize class InitExceptionUnloadTest$ThrowsOOM\",\n+        \"java.lang.NoClassDefFoundError: Could not initialize class InitExceptionUnloadTest$ThrowsOOM\",\n","filename":"test\/hotspot\/jtreg\/runtime\/ClassInitErrors\/InitExceptionUnloadTest.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}