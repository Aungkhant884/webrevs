{"files":[{"patch":"@@ -269,1 +269,1 @@\n-             method->method_holder()->is_reentrant_initialization(Thread::current()),\n+             method->method_holder()->is_init_thread(Thread::current()),\n","filename":"src\/hotspot\/share\/oops\/cpCache.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -763,1 +763,1 @@\n-  while (is_being_linked() && !is_reentrant_linking(current)) {\n+  while (is_being_linked() && !is_init_thread(current)) {\n@@ -768,1 +768,1 @@\n-  if (is_being_linked() && is_reentrant_linking(current)) {\n+  if (is_being_linked() && is_init_thread(current)) {\n@@ -1039,1 +1039,1 @@\n-    while (is_being_initialized() && !is_reentrant_initialization(jt)) {\n+    while (is_being_initialized() && !is_init_thread(jt)) {\n@@ -1047,1 +1047,1 @@\n-    if (is_being_initialized() && is_reentrant_initialization(jt)) {\n+    if (is_being_initialized() && is_init_thread(jt)) {\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -546,2 +546,1 @@\n-  bool is_reentrant_initialization(Thread *thread) { return thread == _init_thread; }\n-  bool is_reentrant_linking(Thread *thread)        { return thread == _init_thread; }\n+  bool is_init_thread(Thread *thread)      { return thread == _init_thread; }\n@@ -1158,1 +1157,1 @@\n-private:\n+ private:\n@@ -1162,1 +1161,4 @@\n-  void set_init_thread(Thread *thread)  { _init_thread = thread; }\n+  void set_init_thread(Thread *thread)  {\n+    assert(thread == nullptr || _init_thread == nullptr, \"Only one thread is allowed to own initialization\");\n+    _init_thread = thread;\n+  }\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.hpp","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -1408,1 +1408,1 @@\n-           callee_method->method_holder()->is_reentrant_initialization(current),\n+           callee_method->method_holder()->is_init_thread(current),\n","filename":"src\/hotspot\/share\/runtime\/sharedRuntime.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}