{"files":[{"patch":"@@ -325,0 +325,1 @@\n+        boolean hasSuperPackage = !packages.isEmpty();\n@@ -334,2 +335,3 @@\n-        \/\/ only add sibling packages if we are beneath threshold, and number of siblings is beneath threshold as well\n-        if (pkgPrefix != null && packages.size() <= MAX_SIBLING_PACKAGES) {\n+        \/\/ only add sibling packages if there is a non-empty super package, we are beneath threshold,\n+        \/\/ and number of siblings is beneath threshold as well\n+        if (hasSuperPackage && pkgPrefix != null && packages.size() <= MAX_SIBLING_PACKAGES) {\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/builders\/PackageSummaryBuilder.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8260388\n+ * @bug 8260388 8265613\n@@ -55,6 +55,7 @@\n-        tb.writeFile(src.resolve(\"p1\/package-info.java\"), \"package p1;\\n\");\n-        tb.writeFile(src.resolve(\"p1\/s1\/A.java\"), \"package p1.s1; public class A {}\\n\");\n-        tb.writeFile(src.resolve(\"p1\/s2\/package-info.java\"), \"package p1.s1;\\n\");\n-        tb.writeFile(src.resolve(\"p1\/s3\/B.java\"), \"package p1.s3; public class B {}\\n\");\n-        tb.writeFile(src.resolve(\"p1\/s3\/t1\/package-info.java\"), \"package p1.s3.t1;\\n\");\n-        tb.writeFile(src.resolve(\"p1\/s3\/t2\/C.java\"), \"package p1.s3.t2; public class C {}\\n\");\n+        tb.writeFile(src.resolve(\"t\/p1\/package-info.java\"), \"package t.p1;\\n\");\n+        tb.writeFile(src.resolve(\"t\/p1\/s1\/A.java\"), \"package t.p1.s1; public class A {}\\n\");\n+        tb.writeFile(src.resolve(\"t\/p1\/s2\/package-info.java\"), \"package t.p1.s1;\\n\");\n+        tb.writeFile(src.resolve(\"t\/p1\/s3\/B.java\"), \"package t.p1.s3; public class B {}\\n\");\n+        tb.writeFile(src.resolve(\"t\/p1\/s3\/t1\/package-info.java\"), \"package t.p1.s3.t1;\\n\");\n+        tb.writeFile(src.resolve(\"t\/p1\/s3\/t2\/C.java\"), \"package t.p1.s3.t2; public class C {}\\n\");\n+        tb.writeFile(src.resolve(\"t\/p2\/X.java\"), \"package t.p2; public class X {}\\n\");\n@@ -64,1 +65,1 @@\n-                \"-subpackages\", \"p1\");\n+                \"-subpackages\", \"t.p1:t.p2\");\n@@ -66,1 +67,1 @@\n-        checkOutput(\"p1\/package-summary.html\", true,\n+        checkOutput(\"t\/p1\/package-summary.html\", true,\n@@ -72,1 +73,1 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"s1\/package-summary.html\">p1.s1<\/a><\/div>\n+                    <div class=\"col-first even-row-color\"><a href=\"s1\/package-summary.html\">t.p1.s1<\/a><\/div>\n@@ -74,1 +75,1 @@\n-                    <div class=\"col-first odd-row-color\"><a href=\"s2\/package-summary.html\">p1.s2<\/a><\/div>\n+                    <div class=\"col-first odd-row-color\"><a href=\"s2\/package-summary.html\">t.p1.s2<\/a><\/div>\n@@ -76,1 +77,1 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"s3\/package-summary.html\">p1.s3<\/a><\/div>\n+                    <div class=\"col-first even-row-color\"><a href=\"s3\/package-summary.html\">t.p1.s3<\/a><\/div>\n@@ -79,1 +80,1 @@\n-        checkOutput(\"p1\/s1\/package-summary.html\", true,\n+        checkOutput(\"t\/p1\/s1\/package-summary.html\", true,\n@@ -85,1 +86,1 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"..\/package-summary.html\">p1<\/a><\/div>\n+                    <div class=\"col-first even-row-color\"><a href=\"..\/package-summary.html\">t.p1<\/a><\/div>\n@@ -87,1 +88,1 @@\n-                    <div class=\"col-first odd-row-color\"><a href=\"..\/s2\/package-summary.html\">p1.s2<\/a><\/div>\n+                    <div class=\"col-first odd-row-color\"><a href=\"..\/s2\/package-summary.html\">t.p1.s2<\/a><\/div>\n@@ -89,1 +90,1 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"..\/s3\/package-summary.html\">p1.s3<\/a><\/div>\n+                    <div class=\"col-first even-row-color\"><a href=\"..\/s3\/package-summary.html\">t.p1.s3<\/a><\/div>\n@@ -92,1 +93,1 @@\n-        checkOutput(\"p1\/s2\/package-summary.html\", true,\n+        checkOutput(\"t\/p1\/s2\/package-summary.html\", true,\n@@ -98,1 +99,1 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"..\/package-summary.html\">p1<\/a><\/div>\n+                    <div class=\"col-first even-row-color\"><a href=\"..\/package-summary.html\">t.p1<\/a><\/div>\n@@ -100,1 +101,1 @@\n-                    <div class=\"col-first odd-row-color\"><a href=\"..\/s1\/package-summary.html\">p1.s1<\/a><\/div>\n+                    <div class=\"col-first odd-row-color\"><a href=\"..\/s1\/package-summary.html\">t.p1.s1<\/a><\/div>\n@@ -102,1 +103,1 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"..\/s3\/package-summary.html\">p1.s3<\/a><\/div>\n+                    <div class=\"col-first even-row-color\"><a href=\"..\/s3\/package-summary.html\">t.p1.s3<\/a><\/div>\n@@ -105,1 +106,1 @@\n-        checkOutput(\"p1\/s3\/package-summary.html\", true,\n+        checkOutput(\"t\/p1\/s3\/package-summary.html\", true,\n@@ -111,1 +112,1 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"..\/package-summary.html\">p1<\/a><\/div>\n+                    <div class=\"col-first even-row-color\"><a href=\"..\/package-summary.html\">t.p1<\/a><\/div>\n@@ -113,1 +114,1 @@\n-                    <div class=\"col-first odd-row-color\"><a href=\"t1\/package-summary.html\">p1.s3.t1<\/a><\/div>\n+                    <div class=\"col-first odd-row-color\"><a href=\"t1\/package-summary.html\">t.p1.s3.t1<\/a><\/div>\n@@ -115,1 +116,1 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"t2\/package-summary.html\">p1.s3.t2<\/a><\/div>\n+                    <div class=\"col-first even-row-color\"><a href=\"t2\/package-summary.html\">t.p1.s3.t2<\/a><\/div>\n@@ -117,1 +118,1 @@\n-                    <div class=\"col-first odd-row-color\"><a href=\"..\/s1\/package-summary.html\">p1.s1<\/a><\/div>\n+                    <div class=\"col-first odd-row-color\"><a href=\"..\/s1\/package-summary.html\">t.p1.s1<\/a><\/div>\n@@ -119,1 +120,1 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"..\/s2\/package-summary.html\">p1.s2<\/a><\/div>\n+                    <div class=\"col-first even-row-color\"><a href=\"..\/s2\/package-summary.html\">t.p1.s2<\/a><\/div>\n@@ -122,1 +123,1 @@\n-        checkOutput(\"p1\/s3\/t1\/package-summary.html\", true,\n+        checkOutput(\"t\/p1\/s3\/t1\/package-summary.html\", true,\n@@ -128,1 +129,1 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"..\/package-summary.html\">p1.s3<\/a><\/div>\n+                    <div class=\"col-first even-row-color\"><a href=\"..\/package-summary.html\">t.p1.s3<\/a><\/div>\n@@ -130,1 +131,1 @@\n-                    <div class=\"col-first odd-row-color\"><a href=\"..\/t2\/package-summary.html\">p1.s3.t2<\/a><\/div>\n+                    <div class=\"col-first odd-row-color\"><a href=\"..\/t2\/package-summary.html\">t.p1.s3.t2<\/a><\/div>\n@@ -133,1 +134,1 @@\n-        checkOutput(\"p1\/s3\/t2\/package-summary.html\", true,\n+        checkOutput(\"t\/p1\/s3\/t2\/package-summary.html\", true,\n@@ -139,1 +140,1 @@\n-                    <div class=\"col-first even-row-color\"><a href=\"..\/package-summary.html\">p1.s3<\/a><\/div>\n+                    <div class=\"col-first even-row-color\"><a href=\"..\/package-summary.html\">t.p1.s3<\/a><\/div>\n@@ -141,1 +142,1 @@\n-                    <div class=\"col-first odd-row-color\"><a href=\"..\/t1\/package-summary.html\">p1.s3.t1<\/a><\/div>\n+                    <div class=\"col-first odd-row-color\"><a href=\"..\/t1\/package-summary.html\">t.p1.s3.t1<\/a><\/div>\n@@ -144,0 +145,1 @@\n+        checkOutput(\"t\/p2\/package-summary.html\", false, \"Related Packages\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testRelatedPackages\/TestRelatedPackages.java","additions":34,"deletions":32,"binary":false,"changes":66,"status":"modified"}]}