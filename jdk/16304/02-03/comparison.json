{"files":[{"patch":"@@ -36,6 +36,2 @@\n-\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n-\/\/ BlockOffsetSharedArray\n-\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n-\n-BlockOffsetSharedArray::BlockOffsetSharedArray(MemRegion reserved,\n-                                               size_t init_word_size):\n+SerialBlockOffsetSharedArray::SerialBlockOffsetSharedArray(MemRegion reserved,\n+                                                           size_t init_word_size):\n@@ -54,1 +50,1 @@\n-  _offset_array = (u_char*)_vs.low_boundary();\n+  _offset_array = (uint8_t*)_vs.low_boundary();\n@@ -56,1 +52,1 @@\n-  log_trace(gc, bot)(\"BlockOffsetSharedArray::BlockOffsetSharedArray: \");\n+  log_trace(gc, bot)(\"SerialBlockOffsetSharedArray::SerialBlockOffsetSharedArray: \");\n@@ -63,1 +59,1 @@\n-void BlockOffsetSharedArray::resize(size_t new_word_size) {\n+void SerialBlockOffsetSharedArray::resize(size_t new_word_size) {\n@@ -117,2 +113,2 @@\n-void BlockOffsetTable::update_for_block_work(HeapWord* blk_start,\n-                                             HeapWord* blk_end) {\n+void SerialBlockOffsetTable::update_for_block_work(HeapWord* blk_start,\n+                                                   HeapWord* blk_end) {\n@@ -136,1 +132,1 @@\n-      u_char value = checked_cast<u_char>(BOTConstants::card_size_in_words() + i);\n+      uint8_t value = checked_cast<uint8_t>(BOTConstants::card_size_in_words() + i);\n@@ -151,1 +147,1 @@\n-HeapWord* BlockOffsetTable::block_start_reaching_into_card(const void* addr) const {\n+HeapWord* SerialBlockOffsetTable::block_start_reaching_into_card(const void* addr) const {\n@@ -154,1 +150,1 @@\n-  u_char offset;\n+  uint8_t offset;\n@@ -172,1 +168,1 @@\n-void BlockOffsetTable::verify_for_block(HeapWord* blk_start, HeapWord* blk_end) const {\n+void SerialBlockOffsetTable::verify_for_block(HeapWord* blk_start, HeapWord* blk_end) const {\n@@ -181,2 +177,2 @@\n-    const u_char prev  = _array->offset_array(i-1);\n-    const u_char value = _array->offset_array(i);\n+    const uint8_t prev  = _array->offset_array(i-1);\n+    const uint8_t value = _array->offset_array(i);\n","filename":"src\/hotspot\/share\/gc\/serial\/serialBlockOffsetTable.cpp","additions":13,"deletions":17,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -39,1 +39,1 @@\n-class BlockOffsetSharedArray: public CHeapObj<mtGC> {\n+class SerialBlockOffsetSharedArray: public CHeapObj<mtGC> {\n@@ -41,1 +41,1 @@\n-  friend class BlockOffsetTable;\n+  friend class SerialBlockOffsetTable;\n@@ -49,1 +49,1 @@\n-  u_char* _offset_array;          \/\/ byte array keeping backwards offsets\n+  uint8_t* _offset_array;          \/\/ byte array keeping backwards offsets\n@@ -51,1 +51,1 @@\n-  void fill_range(size_t start, size_t num_cards, u_char offset) {\n+  void fill_range(size_t start, size_t num_cards, uint8_t offset) {\n@@ -56,1 +56,1 @@\n-  u_char offset_array(size_t index) const {\n+  uint8_t offset_array(size_t index) const {\n@@ -76,2 +76,2 @@\n-  \/\/ BlockOffsetTable(s) to initialize cards.\n-  BlockOffsetSharedArray(MemRegion reserved, size_t init_word_size);\n+  \/\/ SerialBlockOffsetTable(s) to initialize cards.\n+  SerialBlockOffsetSharedArray(MemRegion reserved, size_t init_word_size);\n@@ -95,1 +95,1 @@\n-    _offset_array[index] = checked_cast<u_char>(pointer_delta(high, low));\n+    _offset_array[index] = checked_cast<uint8_t>(pointer_delta(high, low));\n@@ -98,1 +98,1 @@\n-  void set_offset_array(size_t left, size_t right, u_char offset) {\n+  void set_offset_array(size_t left, size_t right, uint8_t offset) {\n@@ -107,1 +107,1 @@\n-\/\/ BlockOffsetTable divides the covered region into \"N\"-word subregions (where\n+\/\/ SerialBlockOffsetTable divides the covered region into \"N\"-word subregions (where\n@@ -111,1 +111,1 @@\n-class BlockOffsetTable {\n+class SerialBlockOffsetTable {\n@@ -115,1 +115,1 @@\n-  BlockOffsetSharedArray* _array;\n+  SerialBlockOffsetSharedArray* _array;\n@@ -128,1 +128,1 @@\n-  BlockOffsetTable(BlockOffsetSharedArray* array) : _array(array) {\n+  SerialBlockOffsetTable(SerialBlockOffsetSharedArray* array) : _array(array) {\n","filename":"src\/hotspot\/share\/gc\/serial\/serialBlockOffsetTable.hpp","additions":13,"deletions":13,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-inline size_t BlockOffsetSharedArray::index_for(const void* p) const {\n+inline size_t SerialBlockOffsetSharedArray::index_for(const void* p) const {\n@@ -41,1 +41,1 @@\n-inline HeapWord* BlockOffsetSharedArray::address_for_index(size_t index) const {\n+inline HeapWord* SerialBlockOffsetSharedArray::address_for_index(size_t index) const {\n","filename":"src\/hotspot\/share\/gc\/serial\/serialBlockOffsetTable.inline.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -298,2 +298,2 @@\n-  _bts = new BlockOffsetSharedArray(reserved_mr,\n-                                    heap_word_size(initial_byte_size));\n+  _bts = new SerialBlockOffsetSharedArray(reserved_mr,\n+                                          heap_word_size(initial_byte_size));\n","filename":"src\/hotspot\/share\/gc\/serial\/tenuredGeneration.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n-class BlockOffsetSharedArray;\n+class SerialBlockOffsetSharedArray;\n@@ -53,1 +53,1 @@\n-  BlockOffsetSharedArray* _bts;\n+  SerialBlockOffsetSharedArray* _bts;\n","filename":"src\/hotspot\/share\/gc\/serial\/tenuredGeneration.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -32,25 +32,25 @@\n-#define VM_STRUCTS_SERIALGC(nonstatic_field,                                                    \\\n-                            volatile_nonstatic_field,                                           \\\n-                            static_field)                                                       \\\n-  nonstatic_field(TenuredGeneration,           _rs,                    CardTableRS*)            \\\n-  nonstatic_field(TenuredGeneration,           _bts,                   BlockOffsetSharedArray*) \\\n-  nonstatic_field(TenuredGeneration,           _shrink_factor,         size_t)                  \\\n-  nonstatic_field(TenuredGeneration,           _capacity_at_prologue,  size_t)                  \\\n-  nonstatic_field(TenuredGeneration,           _used_at_prologue,      size_t)                  \\\n-  nonstatic_field(TenuredGeneration,           _min_heap_delta_bytes,  size_t)                  \\\n-  nonstatic_field(TenuredGeneration,           _the_space,             TenuredSpace*)           \\\n-                                                                                                \\\n-  nonstatic_field(DefNewGeneration,            _old_gen,               Generation*)             \\\n-  nonstatic_field(DefNewGeneration,            _tenuring_threshold,    uint)                    \\\n-  nonstatic_field(DefNewGeneration,            _age_table,             AgeTable)                \\\n-  nonstatic_field(DefNewGeneration,            _eden_space,            ContiguousSpace*)        \\\n-  nonstatic_field(DefNewGeneration,            _from_space,            ContiguousSpace*)        \\\n-  nonstatic_field(DefNewGeneration,            _to_space,              ContiguousSpace*)        \\\n-                                                                                                \\\n-  nonstatic_field(BlockOffsetTable,            _array,                 BlockOffsetSharedArray*) \\\n-                                                                                                \\\n-  nonstatic_field(BlockOffsetSharedArray,      _reserved,              MemRegion)               \\\n-  nonstatic_field(BlockOffsetSharedArray,      _vs,                    VirtualSpace)            \\\n-  nonstatic_field(BlockOffsetSharedArray,      _offset_array,          u_char*)                 \\\n-                                                                                                \\\n-  nonstatic_field(TenuredSpace,                _offsets,               BlockOffsetTable)\n+#define VM_STRUCTS_SERIALGC(nonstatic_field,                                                                \\\n+                            volatile_nonstatic_field,                                                       \\\n+                            static_field)                                                                   \\\n+  nonstatic_field(TenuredGeneration,                 _rs,                    CardTableRS*)                  \\\n+  nonstatic_field(TenuredGeneration,                 _bts,                   SerialBlockOffsetSharedArray*) \\\n+  nonstatic_field(TenuredGeneration,                 _shrink_factor,         size_t)                        \\\n+  nonstatic_field(TenuredGeneration,                 _capacity_at_prologue,  size_t)                        \\\n+  nonstatic_field(TenuredGeneration,                 _used_at_prologue,      size_t)                        \\\n+  nonstatic_field(TenuredGeneration,                 _min_heap_delta_bytes,  size_t)                        \\\n+  nonstatic_field(TenuredGeneration,                 _the_space,             TenuredSpace*)                 \\\n+                                                                                                            \\\n+  nonstatic_field(DefNewGeneration,                  _old_gen,               Generation*)                   \\\n+  nonstatic_field(DefNewGeneration,                  _tenuring_threshold,    uint)                          \\\n+  nonstatic_field(DefNewGeneration,                  _age_table,             AgeTable)                      \\\n+  nonstatic_field(DefNewGeneration,                  _eden_space,            ContiguousSpace*)              \\\n+  nonstatic_field(DefNewGeneration,                  _from_space,            ContiguousSpace*)              \\\n+  nonstatic_field(DefNewGeneration,                  _to_space,              ContiguousSpace*)              \\\n+                                                                                                            \\\n+  nonstatic_field(SerialBlockOffsetTable,            _array,                 SerialBlockOffsetSharedArray*) \\\n+                                                                                                            \\\n+  nonstatic_field(SerialBlockOffsetSharedArray,      _reserved,              MemRegion)                     \\\n+  nonstatic_field(SerialBlockOffsetSharedArray,      _vs,                    VirtualSpace)                  \\\n+  nonstatic_field(SerialBlockOffsetSharedArray,      _offset_array,          u_char*)                       \\\n+                                                                                                            \\\n+  nonstatic_field(TenuredSpace,                      _offsets,               SerialBlockOffsetTable)\n@@ -69,3 +69,2 @@\n-  declare_toplevel_type(BlockOffsetSharedArray)                               \\\n-  declare_toplevel_type(BlockOffsetTable)                                     \\\n-  declare_toplevel_type(BlockOffsetSharedArray*)\n+  declare_toplevel_type(SerialBlockOffsetSharedArray)                         \\\n+  declare_toplevel_type(SerialBlockOffsetTable)\n","filename":"src\/hotspot\/share\/gc\/serial\/vmStructs_serial.hpp","additions":27,"deletions":28,"binary":false,"changes":55,"status":"modified"},{"patch":"@@ -507,1 +507,1 @@\n-    assert(!BlockOffsetTable::is_crossing_card_boundary(cur_block, (HeapWord*)addr), \"must be\");\n+    assert(!SerialBlockOffsetTable::is_crossing_card_boundary(cur_block, (HeapWord*)addr), \"must be\");\n@@ -511,1 +511,1 @@\n-TenuredSpace::TenuredSpace(BlockOffsetSharedArray* sharedOffsetArray,\n+TenuredSpace::TenuredSpace(SerialBlockOffsetSharedArray* sharedOffsetArray,\n","filename":"src\/hotspot\/share\/gc\/shared\/space.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -405,1 +405,1 @@\n-\/\/ \"block_start\" operation via a BlockOffsetTable.\n+\/\/ \"block_start\" operation via a SerialBlockOffsetTable.\n@@ -410,1 +410,1 @@\n-  BlockOffsetTable _offsets;\n+  SerialBlockOffsetTable _offsets;\n@@ -416,1 +416,1 @@\n-  TenuredSpace(BlockOffsetSharedArray* sharedOffsetArray,\n+  TenuredSpace(SerialBlockOffsetSharedArray* sharedOffsetArray,\n","filename":"src\/hotspot\/share\/gc\/shared\/space.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}