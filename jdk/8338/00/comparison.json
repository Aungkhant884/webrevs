{"files":[{"patch":"@@ -2837,20 +2837,0 @@\n-void os::pause() {\n-  char filename[MAX_PATH];\n-  if (PauseAtStartupFile && PauseAtStartupFile[0]) {\n-    jio_snprintf(filename, MAX_PATH, \"%s\", PauseAtStartupFile);\n-  } else {\n-    jio_snprintf(filename, MAX_PATH, \".\/vm.paused.%d\", current_process_id());\n-  }\n-\n-  int fd = ::open(filename, O_WRONLY | O_CREAT | O_TRUNC, 0666);\n-  if (fd != -1) {\n-    struct stat buf;\n-    ::close(fd);\n-    while (::stat(filename, &buf) == 0) {\n-      (void)::poll(NULL, 0, 100);\n-    }\n-  } else {\n-    trcVerbose(\"Could not open pause file '%s', continuing immediately.\", filename);\n-  }\n-}\n-\n","filename":"src\/hotspot\/os\/aix\/os_aix.cpp","additions":0,"deletions":20,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2478,21 +2478,0 @@\n-void os::pause() {\n-  char filename[MAX_PATH];\n-  if (PauseAtStartupFile && PauseAtStartupFile[0]) {\n-    jio_snprintf(filename, MAX_PATH, \"%s\", PauseAtStartupFile);\n-  } else {\n-    jio_snprintf(filename, MAX_PATH, \".\/vm.paused.%d\", current_process_id());\n-  }\n-\n-  int fd = ::open(filename, O_WRONLY | O_CREAT | O_TRUNC, 0666);\n-  if (fd != -1) {\n-    struct stat buf;\n-    ::close(fd);\n-    while (::stat(filename, &buf) == 0) {\n-      (void)::poll(NULL, 0, 100);\n-    }\n-  } else {\n-    jio_fprintf(stderr,\n-                \"Could not open pause file '%s', continuing immediately.\\n\", filename);\n-  }\n-}\n-\n","filename":"src\/hotspot\/os\/bsd\/os_bsd.cpp","additions":0,"deletions":21,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -5148,21 +5148,0 @@\n-void os::pause() {\n-  char filename[MAX_PATH];\n-  if (PauseAtStartupFile && PauseAtStartupFile[0]) {\n-    jio_snprintf(filename, MAX_PATH, \"%s\", PauseAtStartupFile);\n-  } else {\n-    jio_snprintf(filename, MAX_PATH, \".\/vm.paused.%d\", current_process_id());\n-  }\n-\n-  int fd = ::open(filename, O_WRONLY | O_CREAT | O_TRUNC, 0666);\n-  if (fd != -1) {\n-    struct stat buf;\n-    ::close(fd);\n-    while (::stat(filename, &buf) == 0) {\n-      (void)::poll(NULL, 0, 100);\n-    }\n-  } else {\n-    jio_fprintf(stderr,\n-                \"Could not open pause file '%s', continuing immediately.\\n\", filename);\n-  }\n-}\n-\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":0,"deletions":21,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -5284,21 +5284,0 @@\n-void os::pause() {\n-  char filename[MAX_PATH];\n-  if (PauseAtStartupFile && PauseAtStartupFile[0]) {\n-    jio_snprintf(filename, MAX_PATH, \"%s\", PauseAtStartupFile);\n-  } else {\n-    jio_snprintf(filename, MAX_PATH, \".\/vm.paused.%d\", current_process_id());\n-  }\n-\n-  int fd = ::open(filename, O_WRONLY | O_CREAT | O_TRUNC, 0666);\n-  if (fd != -1) {\n-    struct stat buf;\n-    ::close(fd);\n-    while (::stat(filename, &buf) == 0) {\n-      Sleep(100);\n-    }\n-  } else {\n-    jio_fprintf(stderr,\n-                \"Could not open pause file '%s', continuing immediately.\\n\", filename);\n-  }\n-}\n-\n","filename":"src\/hotspot\/os\/windows\/os_windows.cpp","additions":0,"deletions":21,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -75,0 +75,4 @@\n+#ifndef _WINDOWS\n+# include <poll.h>\n+#endif\n+\n@@ -1419,0 +1423,29 @@\n+#ifndef MAX_PATH\n+#define MAX_PATH    (2 * K)\n+#endif\n+\n+void os::pause() {\n+  char filename[MAX_PATH];\n+  if (PauseAtStartupFile && PauseAtStartupFile[0]) {\n+    jio_snprintf(filename, MAX_PATH, \"%s\", PauseAtStartupFile);\n+  } else {\n+    jio_snprintf(filename, MAX_PATH, \".\/vm.paused.%d\", current_process_id());\n+  }\n+\n+  int fd = ::open(filename, O_WRONLY | O_CREAT | O_TRUNC, 0666);\n+  if (fd != -1) {\n+    struct stat buf;\n+    ::close(fd);\n+    while (::stat(filename, &buf) == 0) {\n+#if defined(_WINDOWS)\n+      Sleep(100);\n+#else\n+      (void)::poll(NULL, 0, 100);\n+#endif\n+    }\n+  } else {\n+    jio_fprintf(stderr,\n+                \"Could not open pause file '%s', continuing immediately.\\n\", filename);\n+  }\n+}\n+\n","filename":"src\/hotspot\/share\/runtime\/os.cpp","additions":33,"deletions":0,"binary":false,"changes":33,"status":"modified"}]}