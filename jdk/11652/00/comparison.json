{"files":[{"patch":"@@ -44,1 +44,1 @@\n-    _mark_closure(worker_id, this, G1CollectedHeap::heap()->ref_processor_stw()),\n+    _mark_closure(worker_id, this, ClassLoaderData::_claim_stw_fullgc_mark, G1CollectedHeap::heap()->ref_processor_stw()),\n","filename":"src\/hotspot\/share\/gc\/g1\/g1FullGCMarker.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -103,2 +103,0 @@\n-  inline void follow_klass(Klass* k);\n-  inline void follow_cld(ClassLoaderData* cld);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1FullGCMarker.hpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -104,1 +104,1 @@\n-  follow_klass(array->klass());\n+  mark_closure()->do_klass(array->klass());\n@@ -196,9 +196,0 @@\n-inline void G1FullGCMarker::follow_klass(Klass* k) {\n-  oop op = k->class_loader_data()->holder_no_keepalive();\n-  mark_and_push(&op);\n-}\n-\n-inline void G1FullGCMarker::follow_cld(ClassLoaderData* cld) {\n-  _cld_closure.do_cld(cld);\n-}\n-\n","filename":"src\/hotspot\/share\/gc\/g1\/g1FullGCMarker.inline.hpp","additions":1,"deletions":10,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -61,1 +61,1 @@\n-class G1MarkAndPushClosure : public OopIterateClosure {\n+class G1MarkAndPushClosure : public ClaimMetadataVisitingOopIterateClosure {\n@@ -66,2 +66,2 @@\n-  G1MarkAndPushClosure(uint worker, G1FullGCMarker* marker, ReferenceDiscoverer* ref) :\n-    OopIterateClosure(ref),\n+  G1MarkAndPushClosure(uint worker_id, G1FullGCMarker* marker, int claim, ReferenceDiscoverer* ref) :\n+    ClaimMetadataVisitingOopIterateClosure(claim, ref),\n@@ -69,1 +69,1 @@\n-    _worker_id(worker) { }\n+    _worker_id(worker_id) { }\n@@ -74,6 +74,0 @@\n-\n-  virtual bool do_metadata();\n-  virtual void do_klass(Klass* k);\n-  virtual void do_cld(ClassLoaderData* cld);\n-  virtual void do_method(Method* m);\n-  virtual void do_nmethod(nmethod* nm);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1FullGCOopClosures.hpp","additions":4,"deletions":10,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -54,20 +54,0 @@\n-inline bool G1MarkAndPushClosure::do_metadata() {\n-  return true;\n-}\n-\n-inline void G1MarkAndPushClosure::do_klass(Klass* k) {\n-  _marker->follow_klass(k);\n-}\n-\n-inline void G1MarkAndPushClosure::do_cld(ClassLoaderData* cld) {\n-  _marker->follow_cld(cld);\n-}\n-\n-inline void G1MarkAndPushClosure::do_method(Method* m) {\n-  m->record_gc_epoch();\n-}\n-\n-inline void G1MarkAndPushClosure::do_nmethod(nmethod* nm) {\n-  nm->follow_nmethod(this);\n-}\n-\n","filename":"src\/hotspot\/share\/gc\/g1\/g1FullGCOopClosures.inline.hpp","additions":0,"deletions":20,"binary":false,"changes":20,"status":"modified"}]}