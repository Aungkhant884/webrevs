{"files":[{"patch":"@@ -494,1 +494,1 @@\n-  ld(ch2, Address(result)); \/\/ load 8 bytes from source string\n+  load_long_misaligned(ch2, Address(result), ch1); \/\/ can use ch1 as tmpreg here as it will be trashed on next mv command anyway\n@@ -706,1 +706,8 @@\n-    (this->*load_2chr)(ch2, Address(tmp3), noreg);\n+    if (AvoidUnalignedAccesses) {\n+      (this->*haystack_load_1chr)(ch2, Address(tmp3), noreg);\n+      (this->*haystack_load_1chr)(tmp3, Address(tmp3, isLL ? 1 : 2), noreg);\n+      slli(tmp3, tmp3, isLL ? 8 : 16);\n+      add(ch2, ch2, tmp3);\n+    } else {\n+      (this->*load_2chr)(ch2, Address(tmp3), noreg);\n+    }\n@@ -730,1 +737,8 @@\n-    (this->*load_2chr)(ch2, Address(ch2), noreg);\n+    if (AvoidUnalignedAccesses) {\n+      (this->*haystack_load_1chr)(tmp2, Address(ch2, isLL ? 1 : 2), noreg); \/\/ we need a temp register, we can safely use hlen_tmp here, which is a synonym for tmp2\n+      (this->*haystack_load_1chr)(ch2, Address(ch2), noreg);\n+      slli(tmp2, tmp2, isLL ? 8 : 16);\n+      add(ch2, ch2, tmp2);\n+    } else {\n+      (this->*load_2chr)(ch2, Address(ch2), noreg);\n+    }\n@@ -1921,1 +1935,1 @@\n-}\n\\ No newline at end of file\n+}\n","filename":"src\/hotspot\/cpu\/riscv\/c2_MacroAssembler_riscv.cpp","additions":18,"deletions":4,"binary":false,"changes":22,"status":"modified"}]}