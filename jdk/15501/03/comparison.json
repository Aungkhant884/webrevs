{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -134,0 +134,3 @@\n+            \/\/ first ensure source can be read\n+            source.getFileSystem().provider().checkAccess(source, AccessMode.READ);\n+\n","filename":"src\/java.base\/share\/classes\/java\/nio\/file\/CopyMoveHelper.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+import java.nio.file.AccessMode;\n@@ -916,0 +917,7 @@\n+            } else if (!sourceAttrs.isSymbolicLink() || flags.followLinks) {\n+                \/\/ ensure source can be moved\n+                try {\n+                    access(source, R_OK);\n+                } catch (UnixException exc) {\n+                    exc.rethrowAsIOException(source);\n+                }\n@@ -1040,0 +1048,9 @@\n+            else if (!sourceAttrs.isSymbolicLink() || flags.followLinks) {\n+                \/\/ ensure source can be moved\n+                try {\n+                    access(source, R_OK);\n+                } catch (UnixException exc) {\n+                    exc.rethrowAsIOException(source);\n+                }\n+            }\n+\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixFileSystem.java","additions":17,"deletions":0,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -498,1 +498,1 @@\n-                \"not supported when creating symbolic link\");\n+                \" not supported when creating symbolic link\");\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixFileSystemProvider.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -25,1 +25,2 @@\n- * @bug 4313887 6838333 6917021 7006126 6950237 8006645 8201407 8264744 8267820\n+ * @bug 4313887 6838333 6917021 7006126 6950237 8006645 8073061 8201407 8264744\n+ *      8267820\n@@ -38,1 +39,0 @@\n-import static java.nio.file.StandardCopyOption.*;\n@@ -40,0 +40,1 @@\n+import static java.nio.file.StandardCopyOption.*;\n@@ -393,0 +394,21 @@\n+        \/**\n+         * Test: ensure target not deleted if source permissions are zero\n+         *\/\n+        source = createSourceFile(dir1);\n+        if (getFileStore(source).supportsFileAttributeView(\"posix\")) {\n+            Files.setPosixFilePermissions(source, Set.of());\n+            target = getTargetFile(dir2);\n+            createFile(target);\n+            try {\n+                Files.move(source, target, REPLACE_EXISTING);\n+                throw new RuntimeException(\"AccessDeniedException not thrown\");\n+            } catch (AccessDeniedException expected) {\n+                if (!Files.exists(source))\n+                    throw new RuntimeException(\"source deleted\");\n+            }\n+            if (!Files.exists(target))\n+                throw new RuntimeException(\"target deleted\");\n+            delete(target);\n+        }\n+        delete(source);\n+\n@@ -817,0 +839,19 @@\n+        \/**\n+         * Test: ensure target not deleted if source permissions are zero\n+         *\/\n+        source = createSourceFile(dir1);\n+        if (getFileStore(source).supportsFileAttributeView(\"posix\")) {\n+            Files.setPosixFilePermissions(source, Set.of());\n+            target = getTargetFile(dir2);\n+            createFile(target);\n+            try {\n+                Files.copy(source, target, REPLACE_EXISTING);\n+                throw new RuntimeException(\"AccessDeniedException not thrown\");\n+            } catch (AccessDeniedException expected) {\n+            }\n+            if (!Files.exists(target))\n+                throw new RuntimeException(\"target deleted\");\n+            delete(target);\n+        }\n+        delete(source);\n+\n","filename":"test\/jdk\/java\/nio\/file\/Files\/CopyAndMove.java","additions":43,"deletions":2,"binary":false,"changes":45,"status":"modified"}]}