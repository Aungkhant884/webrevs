{"files":[{"patch":"@@ -72,0 +72,8 @@\n+\n+        CopyOption[] replaceExistingOrEmpty() {\n+            if (replaceExisting) {\n+                return new CopyOption[] { StandardCopyOption.REPLACE_EXISTING };\n+            } else {\n+                return new CopyOption[0];\n+            }\n+        }\n@@ -132,9 +140,0 @@\n-        \/\/ delete target if it exists and REPLACE_EXISTING is specified\n-        if (opts.replaceExisting) {\n-            \/\/ first ensure source can be read\n-            source.getFileSystem().provider().checkAccess(source, AccessMode.READ);\n-\n-            Files.deleteIfExists(target);\n-        } else if (Files.exists(target))\n-            throw new FileAlreadyExistsException(target.toString());\n-\n@@ -143,0 +142,2 @@\n+            if (opts.replaceExisting)\n+                Files.deleteIfExists(target);\n@@ -146,1 +147,1 @@\n-                Files.copy(in, target);\n+                Files.copy(in, target, opts.replaceExistingOrEmpty());\n","filename":"src\/java.base\/share\/classes\/java\/nio\/file\/CopyMoveHelper.java","additions":11,"deletions":10,"binary":false,"changes":21,"status":"modified"}]}