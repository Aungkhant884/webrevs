{"files":[{"patch":"@@ -3972,1 +3972,1 @@\n-  if (idom(region)->is_Catch()) {\n+  if (idom(region)->is_Catch() || region == head) {\n","filename":"src\/hotspot\/share\/opto\/loopopts.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -0,0 +1,75 @@\n+\/*\n+  * Copyright (c) 2022 THL A29 Limited, a Tencent company. All rights reserved.\n+  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+  *\n+  * This code is free software; you can redistribute it and\/or modify it\n+  * under the terms of the GNU General Public License version 2 only, as\n+  * published by the Free Software Foundation.\n+  *\n+  * This code is distributed in the hope that it will be useful, but WITHOUT\n+  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+  * version 2 for more details (a copy is included in the LICENSE file that\n+  * accompanied this code).\n+  *\n+  * You should have received a copy of the GNU General Public License version\n+  * 2 along with this work; if not, write to the Free Software Foundation,\n+  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+  *\n+  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+  * or visit www.oracle.com if you need additional information or have any\n+  * questions.\n+  *\/\n+\n+ \/**\n+  * @test\n+  * @bug 8293978\n+  * @library \/test\/lib\n+  * @summary Crash in PhaseIdealLoop::verify_strip_mined_scheduling\n+  *\n+  * @run main TestDuplicateSimpleLoopBackedge\n+  *\n+  *\/\n+\n+import jdk.test.lib.Utils;\n+\n+class Foo {\n+    static void c(Byte[] a, Byte d) {\n+        for (int e = 0; e < a.length; e++)\n+            a[e] = 0;\n+    }\n+}\n+\n+public class TestDuplicateSimpleLoopBackedge {\n+    int f(int g) {\n+        Byte h[] = new Byte[500];\n+        Foo.c(h, (byte)4);\n+        short i = 7;\n+        while (i != 1)\n+            i = (short)(i - 3);\n+        return 0;\n+    }\n+\n+    void j(String[] k) {\n+        try {\n+            int l = 5;\n+            if (l < f(l));\n+        } catch (Exception m) {\n+        }\n+    }\n+\n+    public static void main(String[] args) throws Exception{\n+        Thread thread = new Thread() {\n+                public void run() {\n+                    TestDuplicateSimpleLoopBackedge n = new TestDuplicateSimpleLoopBackedge();\n+                    for (int i = 0; i < 10000; ++i) {\n+                        n.j(args);\n+                    }\n+                }\n+            };\n+        \/\/ Give thread some time to trigger compilation\n+        thread.setDaemon(true);\n+        thread.start();\n+        Thread.sleep(Utils.adjustTimeout(4000));\n+    }\n+}\n","filename":"test\/hotspot\/jtreg\/compiler\/c2\/TestDuplicateSimpleLoopBackedge.java","additions":75,"deletions":0,"binary":false,"changes":75,"status":"added"}]}