{"files":[{"patch":"@@ -14357,0 +14357,4 @@\n+    int inst_count = VM_Version::pause_impl_desc().inst_count();\n+    #define PRINT_N_INST(inst) \\\n+      st->print(\"%s\\t! membar_onspinwait\\n\", #inst); \\\n+      for (int i = 1; i < inst_count; ++i) st->print(\"\\t%s\\n\", #inst);\n@@ -14359,4 +14363,1 @@\n-        $$emit$$\"nop\\t! membar_onspinwait\\n\"\n-        for (unsigned int i = 1; i < VM_Version::pause_impl_desc().inst_count(); ++i) {\n-          $$emit$$\"\\tnop\\n\"\n-        }\n+        PRINT_N_INST(nop)\n@@ -14365,4 +14366,1 @@\n-        $$emit$$\"isb\\t! membar_onspinwait\\n\"\n-        for (unsigned int i = 1; i < VM_Version::pause_impl_desc().inst_count(); ++i) {\n-          $$emit$$\"\\tisb\\n\"\n-        }\n+        PRINT_N_INST(isb)\n@@ -14371,4 +14369,1 @@\n-        $$emit$$\"yield\\t! membar_onspinwait\\n\"\n-        for (unsigned int i = 1; i < VM_Version::pause_impl_desc().inst_count(); ++i) {\n-          $$emit$$\"\\tyield\\n\"\n-        }\n+        PRINT_N_INST(yield)\n@@ -14379,0 +14374,1 @@\n+    #undef EMIT_N_ASM_STRINGS\n@@ -14382,0 +14378,1 @@\n+    int inst_count = VM_Version::pause_impl_desc().inst_count();\n@@ -14384,3 +14381,1 @@\n-        for (unsigned int i = 0; i < VM_Version::pause_impl_desc().inst_count(); ++i) {\n-          __ nop();\n-        }\n+        EMIT_N_INST(inst_count, nop);\n@@ -14389,3 +14384,1 @@\n-        for (unsigned int i = 0; i < VM_Version::pause_impl_desc().inst_count(); ++i) {\n-          __ isb();\n-        }\n+        EMIT_N_INST(inst_count, isb);\n@@ -14394,3 +14387,1 @@\n-        for (unsigned int i = 0; i < VM_Version::pause_impl_desc().inst_count(); ++i) {\n-          __ yield();\n-        }\n+        EMIT_N_INST(inst_count, yield);\n","filename":"src\/hotspot\/cpu\/aarch64\/aarch64.ad","additions":12,"deletions":21,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -2987,0 +2987,1 @@\n+  int inst_count = VM_Version::pause_impl_desc().inst_count();\n@@ -2989,3 +2990,1 @@\n-      for (unsigned int i = 1; i < VM_Version::pause_impl_desc().inst_count(); ++i) {\n-        __ nop();\n-      }\n+      EMIT_N_INST(inst_count, nop);\n@@ -2994,3 +2993,1 @@\n-      for (unsigned int i = 1; i < VM_Version::pause_impl_desc().inst_count(); ++i) {\n-        __ isb();\n-      }\n+      EMIT_N_INST(inst_count, isb);\n@@ -2999,3 +2996,1 @@\n-      for (unsigned int i = 1; i < VM_Version::pause_impl_desc().inst_count(); ++i) {\n-        __ yield();\n-      }\n+      EMIT_N_INST(inst_count, yield);\n","filename":"src\/hotspot\/cpu\/aarch64\/c1_LIRAssembler_aarch64.cpp","additions":4,"deletions":9,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -1418,0 +1418,3 @@\n+#define EMIT_N_INST(n, inst) \\\n+  for (int i = 0; i < (n); ++i) __ inst()\n+\n","filename":"src\/hotspot\/cpu\/aarch64\/macroAssembler_aarch64.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -38,1 +38,1 @@\n-  unsigned int _count;\n+  int _count;\n@@ -44,1 +44,1 @@\n-  unsigned int inst_count() const { return _count; }\n+  int inst_count() const { return _count; }\n","filename":"src\/hotspot\/cpu\/aarch64\/pause_aarch64.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}