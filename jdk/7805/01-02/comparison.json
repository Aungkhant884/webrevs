{"files":[{"patch":"@@ -442,2 +442,1 @@\n-        Object oldHint = null;\n-        boolean hintChanged = false;\n+        boolean iconDrawn = false;\n@@ -446,11 +445,13 @@\n-            Image variant = ((MultiResolutionImage) image).getResolutionVariant(this.width, this.height);\n-            if (variant.getHeight(observer) != height || variant.getWidth(observer) != width) {\n-                if (g instanceof Graphics2D) {\n-                    Graphics2D g2d = (Graphics2D) g;\n-                    RenderingHints rh = g2d.getRenderingHints();\n-                    oldHint = rh.get(RenderingHints.KEY_INTERPOLATION);\n-                    if (!RenderingHints.VALUE_INTERPOLATION_BICUBIC.equals(oldHint)) {\n-                        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION,\n-                                RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n-                        hintChanged = true;\n-                    }\n+            if (g instanceof Graphics2D) {\n+                int scaledWidth = (int) (width * ((Graphics2D)g).getTransform().getScaleX());\n+                int scaledHeight = (int) (height * ((Graphics2D)g).getTransform().getScaleY());\n+                Image variant = ((MultiResolutionImage) image).getResolutionVariant(scaledWidth,\n+                        scaledHeight);\n+                if (variant.getHeight(observer) != scaledHeight ||\n+                        variant.getWidth(observer) != scaledWidth) {\n+                    Graphics2D g2d = (Graphics2D) g.create(x, y, width, height);\n+                    g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION,\n+                            RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n+                    g2d.drawImage(image, 0, 0, observer);\n+                    g2d.dispose();\n+                    iconDrawn = true;\n@@ -460,4 +461,3 @@\n-        g.drawImage(image, x, y, observer);\n-        if (hintChanged) {\n-            ((Graphics2D) g).setRenderingHint(RenderingHints.KEY_INTERPOLATION,\n-                    oldHint == null ? RenderingHints.VALUE_INTERPOLATION_NEAREST_NEIGHBOR : oldHint);\n+\n+        if (!iconDrawn){\n+            g.drawImage(image, x, y, observer);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/ImageIcon.java","additions":17,"deletions":17,"binary":false,"changes":34,"status":"modified"}]}