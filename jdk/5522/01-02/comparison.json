{"files":[{"patch":"@@ -33,0 +33,1 @@\n+import java.util.zip.ZipOutputStream;\n@@ -55,1 +56,1 @@\n-    public void testZipClose() throws IOException {\n+    public void testGZipClose() throws IOException {\n@@ -77,1 +78,1 @@\n-    public void testZipFinish() throws IOException {\n+    public void testGZipFinish() throws IOException {\n@@ -98,0 +99,43 @@\n+    @Test\n+    public void testZipClose() throws IOException {\n+        rand.nextBytes(b);\n+        ZipOutputStream zip = new ZipOutputStream(outStream);\n+        try {\n+            zip.write(b, 1, FINISH_NUM-1);\n+            \/\/close zip\n+            zip.close();\n+        } catch (IOException e) {\n+            \/\/expected\n+        }\n+        for (int i = 0; i < 3; i++) {\n+            try {\n+                zip.write(b, 1, FINISH_NUM-1);\n+                fail(\"Deflater closed exception not thrown\");\n+            } catch (NullPointerException | IOException e) {\n+                \/\/for the first write operation IOException will be thrown\n+                \/\/second write operation should throw NPE with deflator closed error instead of infinite loop\n+            }\n+        }\n+    }\n+\n+    @Test\n+    public void testZipFinish() throws IOException {\n+        rand.nextBytes(b);\n+        ZipOutputStream zip = new ZipOutputStream(outStream);\n+        try {\n+            zip.write(b, 0, FINISH_NUM);\n+            \/\/close zip using finish()\n+            zip.finish();\n+        } catch (IOException e) {\n+            \/\/expected\n+        }\n+        for (int i = 0; i < 3; i++) {\n+            try {\n+                zip.write(b, 1, FINISH_NUM-1);\n+                fail(\"Deflater closed exception not thrown\");\n+            } catch (NullPointerException | IOException e) {\n+                \/\/for the first write operation IOException will be thrown\n+                \/\/second write operation should throw NPE with deflator closed error instead of infinite loop\n+            }\n+        }\n+    }\n","filename":"test\/jdk\/java\/util\/zip\/GZIP\/GZipLoopTest.java","additions":46,"deletions":2,"binary":false,"changes":48,"status":"modified"}]}