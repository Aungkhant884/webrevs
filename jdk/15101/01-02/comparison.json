{"files":[{"patch":"@@ -30,2 +30,0 @@\n-import jdk.internal.classfile.AttributeMapper;\n-import jdk.internal.classfile.Classfile;\n@@ -57,3 +55,1 @@\n-        if (a instanceof UnboundAttribute ||\n-            5 - a.attributeMapper().attributeStability().ordinal()\n-                    > context.attributesProcessingOption().ordinal()) {\n+        if (Util.isAttributeAllowed(a, context.attributesProcessingOption())) {\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/classfile\/impl\/AbstractDirectBuilder.java","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -30,1 +30,0 @@\n-import java.util.BitSet;\n@@ -32,1 +31,0 @@\n-import java.util.Iterator;\n@@ -41,1 +39,0 @@\n-import jdk.internal.classfile.impl.TemporaryConstantPool;\n@@ -46,0 +43,3 @@\n+import jdk.internal.classfile.Attribute;\n+import jdk.internal.classfile.AttributeMapper;\n+import jdk.internal.classfile.Classfile;\n@@ -57,0 +57,9 @@\n+    private static final int ATTRIBUTE_STABILITY_COUNT = AttributeMapper.AttributeStability.values().length;\n+\n+    public static boolean isAttributeAllowed(final Attribute<?> attr,\n+                                             final Classfile.AttributesProcessingOption processingOption) {\n+        return attr instanceof BoundAttribute\n+                ? ATTRIBUTE_STABILITY_COUNT - attr.attributeMapper().attributeStability().ordinal() > processingOption.ordinal()\n+                : true;\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/classfile\/impl\/Util.java","additions":12,"deletions":3,"binary":false,"changes":15,"status":"modified"}]}