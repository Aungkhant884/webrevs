{"files":[{"patch":"@@ -0,0 +1,81 @@\n+\/*\n+ * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\n+ *\/\n+package com.sun.hotspot.igv.view.actions;\n+\n+import com.sun.hotspot.igv.graph.Figure;\n+import com.sun.hotspot.igv.view.EditorTopComponent;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+import org.openide.util.HelpCtx;\n+import org.openide.util.actions.CallableSystemAction;\n+\n+\n+abstract public class ExpandAdjacentAction extends CallableSystemAction {\n+\n+    protected interface AdjacentOperator {\n+        List<Figure> get(Figure f);\n+    }\n+\n+    protected void expandFigures(AdjacentOperator adjacentOp) {\n+        EditorTopComponent editor = EditorTopComponent.getActive();\n+        if (editor != null) {\n+            Set<Figure> oldSelection = editor.getModel().getSelectedFigures();\n+            Set<Figure> figures = new HashSet<>(oldSelection);\n+            for (Figure f : editor.getModel().getDiagramToView().getFigures()) {\n+                if (oldSelection.contains(f)) {\n+                    continue;\n+                }\n+\n+                boolean ok = false;\n+                for (Figure adjFig : adjacentOp.get(f)) {\n+                    if (oldSelection.contains(adjFig)) {\n+                        ok = true;\n+                        break;\n+                    }\n+                }\n+\n+                if (ok) {\n+                    figures.add(f);\n+                }\n+            }\n+\n+            editor.getModel().showAll(figures);\n+        }\n+    }\n+\n+    abstract public void performAction();\n+\n+    abstract public String getName();\n+\n+    @Override\n+    public HelpCtx getHelpCtx() {\n+        return HelpCtx.DEFAULT_HELP;\n+    }\n+\n+    @Override\n+    protected boolean asynchronous() {\n+        return false;\n+    }\n+}\n","filename":"src\/utils\/IdealGraphVisualizer\/View\/src\/main\/java\/com\/sun\/hotspot\/igv\/view\/actions\/ExpandAdjacentAction.java","additions":81,"deletions":0,"binary":false,"changes":81,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,6 +27,0 @@\n-import com.sun.hotspot.igv.view.EditorTopComponent;\n-import org.openide.util.HelpCtx;\n-import org.openide.util.actions.CallableSystemAction;\n-\n-import java.util.HashSet;\n-import java.util.Set;\n@@ -38,1 +32,1 @@\n-public final class ExpandPredecessorsAction extends CallableSystemAction {\n+public final class ExpandPredecessorsAction extends ExpandAdjacentAction {\n@@ -42,25 +36,1 @@\n-        EditorTopComponent editor = EditorTopComponent.getActive();\n-        if (editor != null) {\n-            Set<Figure> oldSelection = editor.getModel().getSelectedFigures();\n-            Set<Figure> figures = new HashSet<>();\n-\n-            for (Figure f : editor.getModel().getDiagramToView().getFigures()) {\n-                boolean ok = false;\n-                if (oldSelection.contains(f)) {\n-                    ok = true;\n-                } else {\n-                    for (Figure pred : f.getSuccessors()) {\n-                        if (oldSelection.contains(pred)) {\n-                            ok = true;\n-                            break;\n-                        }\n-                    }\n-                }\n-\n-                if (ok) {\n-                    figures.add(f);\n-                }\n-            }\n-\n-            editor.getModel().showAll(figures);\n-        }\n+        expandFigures(Figure::getSuccessors);\n@@ -73,10 +43,0 @@\n-\n-    @Override\n-    public HelpCtx getHelpCtx() {\n-        return HelpCtx.DEFAULT_HELP;\n-    }\n-\n-    @Override\n-    protected boolean asynchronous() {\n-        return false;\n-    }\n","filename":"src\/utils\/IdealGraphVisualizer\/View\/src\/main\/java\/com\/sun\/hotspot\/igv\/view\/actions\/ExpandPredecessorsAction.java","additions":3,"deletions":43,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,6 +27,0 @@\n-import com.sun.hotspot.igv.view.EditorTopComponent;\n-import org.openide.util.HelpCtx;\n-import org.openide.util.actions.CallableSystemAction;\n-\n-import java.util.HashSet;\n-import java.util.Set;\n@@ -38,1 +32,1 @@\n-public final class ExpandSuccessorsAction extends CallableSystemAction {\n+public final class ExpandSuccessorsAction extends ExpandAdjacentAction {\n@@ -42,25 +36,1 @@\n-        EditorTopComponent editor = EditorTopComponent.getActive();\n-        if (editor != null) {\n-            Set<Figure> oldSelection = editor.getModel().getSelectedFigures();\n-            Set<Figure> figures = new HashSet<>();\n-\n-            for (Figure f : editor.getModel().getDiagramToView().getFigures()) {\n-                boolean ok = false;\n-                if (oldSelection.contains(f)) {\n-                    ok = true;\n-                } else {\n-                    for (Figure succ : f.getPredecessors()) {\n-                        if (oldSelection.contains(succ)) {\n-                            ok = true;\n-                            break;\n-                        }\n-                    }\n-                }\n-\n-                if (ok) {\n-                    figures.add(f);\n-                }\n-            }\n-\n-            editor.getModel().showAll(figures);\n-        }\n+        expandFigures(Figure::getPredecessors);\n@@ -73,10 +43,0 @@\n-\n-    @Override\n-    public HelpCtx getHelpCtx() {\n-        return HelpCtx.DEFAULT_HELP;\n-    }\n-\n-    @Override\n-    protected boolean asynchronous() {\n-        return false;\n-    }\n","filename":"src\/utils\/IdealGraphVisualizer\/View\/src\/main\/java\/com\/sun\/hotspot\/igv\/view\/actions\/ExpandSuccessorsAction.java","additions":3,"deletions":43,"binary":false,"changes":46,"status":"modified"}]}