{"files":[{"patch":"@@ -32,0 +32,4 @@\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.List;\n+import java.util.Optional;\n@@ -48,0 +52,11 @@\n+        List<String> lsofDirs = List.of(\"\/usr\/bin\", \"\/usr\/sbin\");\n+        Optional<Path> lsof = lsofDirs.stream()\n+                .map(s -> Path.of(s, \"lsof\"))\n+                .filter(f -> Files.isExecutable(f))\n+                .findFirst();\n+        if (!lsof.isPresent()) {\n+            System.out.println(\"Cannot locate lsof in \" + lsofDirs);\n+            System.out.println(\"Test cannot be run\");\n+            return;\n+        }\n+\n@@ -68,1 +83,1 @@\n-        long myPid = ProcessHandle.current().pid();\n+        long pid = ProcessHandle.current().pid();\n@@ -70,1 +85,1 @@\n-                \"lsof\", \"-U\", \"-a\", \"-p\", Long.toString(myPid));\n+                lsof.get().toString(), \"-U\", \"-a\", \"-p\", Long.toString(pid));\n","filename":"test\/jdk\/com\/sun\/nio\/sctp\/SctpMultiChannel\/CloseDescriptors.java","additions":17,"deletions":2,"binary":false,"changes":19,"status":"modified"}]}