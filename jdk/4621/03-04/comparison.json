{"files":[{"patch":"@@ -28,0 +28,1 @@\n+ * @run main\/othervm CloseDescriptors\n@@ -31,0 +32,1 @@\n+import java.net.ServerSocket;\n@@ -63,7 +65,2 @@\n-        int port = 12345;\n-        if (args.length == 1) {\n-            try {\n-                port = Integer.parseInt(args[0]);\n-            } catch (Exception e) {\n-            }\n-        }\n+        try (ServerSocket ss = new ServerSocket(0)) {\n+            int port = ss.getLocalPort();\n@@ -71,3 +68,3 @@\n-        Thread server = new Server(port);\n-        server.start();\n-        Thread.sleep(100); \/\/ wait for server to be ready\n+            Thread server = new Server(port);\n+            server.start();\n+            Thread.sleep(100); \/\/ wait for server to be ready\n@@ -75,5 +72,8 @@\n-        System.out.println(\"begin\");\n-        for (int i = 0; i < 5; ++i) {\n-            System.out.println(i);\n-            doIt(port);\n-            Thread.sleep(100);\n+            System.out.println(\"begin\");\n+            for (int i = 0; i < 5; ++i) {\n+                System.out.println(i);\n+                doIt(port);\n+                Thread.sleep(100);\n+            }\n+            System.out.println(\"end\");\n+            server.join();\n@@ -81,1 +81,0 @@\n-        System.out.println(\"end\");\n@@ -90,2 +89,0 @@\n-        server.join();\n-\n","filename":"test\/jdk\/com\/sun\/nio\/sctp\/SctpMultiChannel\/CloseDescriptors.java","additions":15,"deletions":18,"binary":false,"changes":33,"status":"modified"}]}