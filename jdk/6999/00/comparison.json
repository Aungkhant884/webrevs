{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -270,8 +270,5 @@\n-        try {\n-            Iterator<Path> pathIterator = doPrivilegedIOWithReturn(() -> {\n-                return Files.newDirectoryStream(JFC_DIRECTORY.toPath(), \"*\").iterator();\n-            });\n-            while (pathIterator.hasNext()) {\n-                Path path = pathIterator.next();\n-                if (path.toString().endsWith(\".jfc\")) {\n-                    list.add(new SafePath(path));\n+        try (var ds = doPrivilegedIOWithReturn(() -> Files.newDirectoryStream(JFC_DIRECTORY.toPath(), \"*.jfc\"))) {\n+            for (Path path : ds) {\n+                SafePath s = new SafePath(path);\n+                if (!SecuritySupport.isDirectory(s)) {\n+                    list.add(s);\n","filename":"src\/jdk.jfr\/share\/classes\/jdk\/jfr\/internal\/SecuritySupport.java","additions":6,"deletions":9,"binary":false,"changes":15,"status":"modified"}]}