{"files":[{"patch":"@@ -48,0 +48,2 @@\n+ * Second parameter is a hint about the type of a file. JNI_TRUE is for\n+ * shared libraries and JNI_FALSE is for executables.\n@@ -52,1 +54,1 @@\n-TruncatePath(char *buf)\n+TruncatePath(char *buf, jboolean pathisdll)\n@@ -54,2 +56,8 @@\n-    \/\/ try bin directory, maybe an executable\n-    char *p = findLastPathComponent(buf, \"\/bin\/\");\n+    \/*\n+     * If the file is a library, try lib directory first and then bin\n+     * directory.\n+     * If the file is an executable, try bin directory first and then lib\n+     * directory.\n+     *\/\n+\n+    char *p = findLastPathComponent(buf, pathisdll ? \"\/lib\/\" : \"\/bin\/\");\n@@ -60,2 +68,1 @@\n-    \/\/ try lib directory, maybe a library\n-    p = findLastPathComponent(buf, \"\/lib\/\");\n+    p = findLastPathComponent(buf, pathisdll ? \"\/bin\/\" : \"\/lib\/\");\n@@ -83,1 +90,1 @@\n-    return TruncatePath(buf);\n+    return TruncatePath(buf, JNI_FALSE);\n@@ -98,1 +105,1 @@\n-            return TruncatePath(buf);\n+            return TruncatePath(buf, JNI_TRUE);\n","filename":"src\/java.base\/unix\/native\/libjli\/java_md_common.c","additions":14,"deletions":7,"binary":false,"changes":21,"status":"modified"}]}