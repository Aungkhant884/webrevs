{"files":[{"patch":"@@ -1003,0 +1003,3 @@\n+                if (style == null) {\n+                    return;\n+                }\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/plaf\/synth\/SynthLookAndFeel.java","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -0,0 +1,123 @@\n+\/*\n+ * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\/*\n+ * @test\n+ * @bug 6529151\n+ * @summary  Verifies no NPE is thrown in SynthLookAndFeel$Handler\n+ * @run main RepaintNPE\n+ *\/\n+import java.awt.Container;\n+import java.awt.Component;\n+import java.awt.Robot;\n+import java.awt.Point;\n+import java.awt.event.InputEvent;\n+\n+import javax.swing.JButton;\n+import javax.swing.JComponent;\n+import javax.swing.JDialog;\n+import javax.swing.JEditorPane;\n+import javax.swing.JFrame;\n+import javax.swing.JScrollPane;\n+import javax.swing.plaf.ComponentUI;\n+import javax.swing.SwingUtilities;\n+import javax.swing.UIManager;\n+\n+public class RepaintNPE\n+{\n+    private static JFrame frame;\n+    private static JButton showDialogButton = null;\n+\n+    private static class DumbDialog extends JDialog {\n+\n+        public DumbDialog ( JFrame parent )\n+        {\n+            super ( parent, \"DumbDialog\", true );\n+\n+            setDefaultCloseOperation ( DISPOSE_ON_CLOSE );\n+\n+            JEditorPane editorPane = new JEditorPane();\n+            editorPane.setContentType ( \"text\/html\" );\n+            editorPane.setEditable ( false );\n+\n+            JScrollPane scrollPane = new JScrollPane ( editorPane );\n+            add( scrollPane );\n+            setSize( 400, 400 );\n+            setVisible( true );\n+        }\n+\n+        public void dispose() {\n+            super.dispose();\n+            myDispose( this );\n+        }\n+\n+        private void myDispose( Container container ) {\n+            Component[] components = container.getComponents ();\n+\n+            for ( Component comp : components ) {\n+                \/\/ Special dispose for JComponent's remove UI\n+                if (comp instanceof JComponent) {\n+                    JComponent jComp = (JComponent)comp;\n+\n+                    try\n+                    {\n+                        ComponentUI compUI = jComp.getUI();\n+                        compUI.uninstallUI ( jComp );\n+                    } catch ( Throwable t ) {}\n+\n+                    \/\/ Recurse children\n+                    myDispose( jComp );\n+                }\n+            }\n+        }\n+\n+    }\n+\n+    public static void main ( String args [] ) throws Exception\n+    {\n+        Robot robot = new Robot();\n+        UIManager.setLookAndFeel(\"javax.swing.plaf.nimbus.NimbusLookAndFeel\");\n+        SwingUtilities.invokeAndWait ( () -> {\n+            frame = new JFrame();\n+\n+            showDialogButton = new JButton( \"Show Dialog\" );\n+            showDialogButton.addActionListener((e) -> {\n+                if ( e.getSource() == showDialogButton ) {\n+                    new DumbDialog ( frame );\n+                }\n+            });\n+            frame.add ( showDialogButton );\n+            frame.setSize( 100, 100 );\n+            frame.setLocationRelativeTo(null);\n+            frame.setUndecorated(true);\n+            frame.setVisible( true );\n+        });\n+        robot.waitForIdle();\n+        robot.delay(1000);\n+        Point loc = frame.getLocationOnScreen();\n+        robot.mouseMove(loc.x+10, loc.y+10);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.delay(1000);\n+        SwingUtilities.invokeAndWait(() -> frame.dispose());\n+    }\n+}\n","filename":"test\/jdk\/javax\/swing\/plaf\/synth\/RepaintNPE.java","additions":123,"deletions":0,"binary":false,"changes":123,"status":"added"}]}