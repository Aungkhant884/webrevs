{"files":[{"patch":"@@ -362,1 +362,1 @@\n-class CheckInsertionPoint: public ValueVisitor {\n+class CheckInsertionPoint : public ValueVisitor {\n@@ -375,1 +375,1 @@\n-  bool is_valid() {return _valid; }\n+  bool is_valid() { return _valid; }\n@@ -378,3 +378,1 @@\n-#ifdef ASSERT\n-      assert(insert != nullptr, \"insertion point should not be null\");\n-#endif\n+    assert(insert != nullptr, \"insertion point should not be null\");\n@@ -384,0 +382,7 @@\n+\/\/ Check that insertion point has higher dom depth than all inputs to cur\n+static bool is_dominated_by_inputs(Instruction* insertion_point, Instruction* cur) {\n+  CheckInsertionPoint v(insertion_point);\n+  cur->input_values_do(&v);\n+  return v.is_valid();\n+}\n+\n@@ -419,5 +424,1 @@\n-    \/\/ Check that insertion point has higher dom depth than all inputs to cur\n-    CheckInsertionPoint v(_insertion_point);\n-    cur->input_values_do(&v);\n-\n-    if (cur_invariant && v.is_valid()) {\n+    if (cur_invariant && is_dominated_by_inputs(_insertion_point, cur)) {\n","filename":"src\/hotspot\/share\/c1\/c1_ValueMap.cpp","additions":11,"deletions":10,"binary":false,"changes":21,"status":"modified"}]}