{"files":[{"patch":"@@ -2168,1 +2168,1 @@\n-        if (in(i)->in(AddPNode::Offset) != base) {\n+        if (in(i)->in(AddPNode::Base) != base) {\n","filename":"src\/hotspot\/share\/opto\/cfgnode.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -336,3 +336,5 @@\n-          get_ctrl(m->in(2)) != n_ctrl &&\n-          get_ctrl(m->in(3)) != n_ctrl) {\n-        \/\/ Move the AddP up to dominating point\n+          get_ctrl(m->in(AddPNode::Base)) != n_ctrl &&\n+          get_ctrl(m->in(AddPNode::Address)) != n_ctrl &&\n+          get_ctrl(m->in(AddPNode::Offset)) != n_ctrl) {\n+        \/\/ Move the AddP up to the dominating point. That's fine because control of m's inputs\n+        \/\/ must dominate get_ctrl(m) == n_ctrl and we just checked that the input controls are != n_ctrl.\n@@ -1706,0 +1708,2 @@\n+\/\/ Compute the early control of a node by following its inputs until we reach\n+\/\/ nodes that are pinned. Then compute the LCA of the control of all pinned nodes.\n@@ -1721,2 +1725,2 @@\n-        if (in == NULL) {\n-          continue;\n+        if (in != NULL) {\n+          wq.push(in);\n@@ -1724,1 +1728,0 @@\n-        wq.push(in);\n@@ -1728,4 +1731,2 @@\n-      assert(is_dominator(c, n_ctrl), \"\");\n-      if (early_ctrl == NULL) {\n-        early_ctrl = c;\n-      } else if (is_dominator(early_ctrl, c)) {\n+      assert(is_dominator(c, n_ctrl), \"control input must dominate current control\");\n+      if (early_ctrl == NULL || is_dominator(early_ctrl, c)) {\n","filename":"src\/hotspot\/share\/opto\/loopopts.cpp","additions":11,"deletions":10,"binary":false,"changes":21,"status":"modified"}]}