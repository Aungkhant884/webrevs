{"files":[{"patch":"@@ -567,1 +567,1 @@\n-    \/\/ we will block here forever.\n+    \/\/ so we will block here forever.\n@@ -569,1 +569,2 @@\n-    \/\/ proper transition, but it happens after the final safepoint has begun.\n+    \/\/ proper transition, but it happens after the final safepoint has begun so\n+    \/\/ this jump won't cause any safepoint problems.\n","filename":"src\/hotspot\/share\/runtime\/javaThread.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -570,3 +570,2 @@\n-  \/\/ thread is terminated (no longer on the threads list); we compare\n-  \/\/ against the three non-terminated values so that a freed JavaThread\n-  \/\/ will also be considered terminated.\n+  \/\/ thread is terminated (no longer on the threads list); the thread must\n+  \/\/ protected by a ThreadsListHandle to avoid potential crashes.\n@@ -574,2 +573,1 @@\n-    return l_terminated != _not_terminated && l_terminated != _thread_exiting &&\n-           l_terminated != _thread_gc_barrier_detached;\n+    return l_terminated == _thread_terminated || l_terminated == _vm_exited;\n","filename":"src\/hotspot\/share\/runtime\/javaThread.hpp","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -370,1 +370,1 @@\n-    if (thr!=thr_cur && thr->thread_state() == _thread_in_native) {\n+    if (thr != thr_cur && thr->thread_state() == _thread_in_native) {\n@@ -498,1 +498,1 @@\n-    \/\/ we will block here until the process dies\n+    \/\/ so we will block here until the process dies.\n","filename":"src\/hotspot\/share\/runtime\/vmOperations.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}