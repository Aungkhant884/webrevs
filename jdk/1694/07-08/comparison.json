{"files":[{"patch":"@@ -30,0 +30,1 @@\n+import java.lang.reflect.Modifier;\n@@ -475,1 +476,1 @@\n-        if ((m.getModifiers() & java.lang.reflect.Modifier.PUBLIC) == 0) {\n+        if (!Modifier.isPublic(m.getModifiers())) {\n@@ -480,3 +481,4 @@\n-        if ((javaAgentClass.getModifiers() & java.lang.reflect.Modifier.PUBLIC) == 0) {\n-            \/\/ If the java agent class is not public, make the premain\/agentmain\n-            \/\/ accessible, so we can call it.\n+        if (!Modifier.isPublic(javaAgentClass.getModifiers()) &&\n+            !javaAgentClass.getModule().isNamed()) {\n+            \/\/ If the java agent class is in an unnamed module, the java agent class can be non-public.\n+            \/\/ Suppress access check upon the invocation of the premain\/agentmain method.\n","filename":"src\/java.instrument\/share\/classes\/sun\/instrument\/InstrumentationImpl.java","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n- * @library \/test\n","filename":"test\/jdk\/java\/lang\/instrument\/PremainClass\/InheritAgent0001.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n- * @library \/test\n","filename":"test\/jdk\/java\/lang\/instrument\/PremainClass\/InheritAgent0010.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n- * @library \/test\n","filename":"test\/jdk\/java\/lang\/instrument\/PremainClass\/InheritAgent0011.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -32,1 +32,0 @@\n- * @library \/test\n","filename":"test\/jdk\/java\/lang\/instrument\/PremainClass\/InheritAgent0101.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n- * @library \/test\n","filename":"test\/jdk\/java\/lang\/instrument\/PremainClass\/InheritAgent0110.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n- * @library \/test\n","filename":"test\/jdk\/java\/lang\/instrument\/PremainClass\/InheritAgent0111.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n- * @library \/test\n","filename":"test\/jdk\/java\/lang\/instrument\/PremainClass\/InheritAgent1001.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n- * @library \/test\n","filename":"test\/jdk\/java\/lang\/instrument\/PremainClass\/InheritAgent1010.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n- * @library \/test\n","filename":"test\/jdk\/java\/lang\/instrument\/PremainClass\/InheritAgent1011.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n- * @library \/test\n","filename":"test\/jdk\/java\/lang\/instrument\/PremainClass\/InheritAgent1101.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n- * @library \/test\n","filename":"test\/jdk\/java\/lang\/instrument\/PremainClass\/InheritAgent1110.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -31,1 +31,0 @@\n- * @library \/test\n","filename":"test\/jdk\/java\/lang\/instrument\/PremainClass\/InheritAgent1111.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -29,1 +29,0 @@\n- * @library \/test\n","filename":"test\/jdk\/java\/lang\/instrument\/PremainClass\/NonPublicAgent.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}