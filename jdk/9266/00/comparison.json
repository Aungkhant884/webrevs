{"files":[{"patch":"@@ -412,0 +412,1 @@\n+  unsigned int size = CodeBlob::allocation_size(cb, sizeof(RuntimeStub));\n@@ -415,1 +416,0 @@\n-    unsigned int size = CodeBlob::allocation_size(cb, sizeof(RuntimeStub));\n@@ -471,0 +471,1 @@\n+  unsigned int size = CodeBlob::allocation_size(cb, sizeof(DeoptimizationBlob));\n@@ -474,1 +475,0 @@\n-    unsigned int size = CodeBlob::allocation_size(cb, sizeof(DeoptimizationBlob));\n@@ -510,0 +510,1 @@\n+  unsigned int size = CodeBlob::allocation_size(cb, sizeof(UncommonTrapBlob));\n@@ -513,1 +514,0 @@\n-    unsigned int size = CodeBlob::allocation_size(cb, sizeof(UncommonTrapBlob));\n@@ -546,0 +546,1 @@\n+  unsigned int size = CodeBlob::allocation_size(cb, sizeof(ExceptionBlob));\n@@ -549,1 +550,0 @@\n-    unsigned int size = CodeBlob::allocation_size(cb, sizeof(ExceptionBlob));\n@@ -581,0 +581,1 @@\n+  unsigned int size = CodeBlob::allocation_size(cb, sizeof(SafepointBlob));\n@@ -584,1 +585,0 @@\n-    unsigned int size = CodeBlob::allocation_size(cb, sizeof(SafepointBlob));\n","filename":"src\/hotspot\/share\/code\/codeBlob.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -473,0 +473,1 @@\n+  int native_nmethod_size = CodeBlob::allocation_size(code_buffer, sizeof(nmethod));\n@@ -475,1 +476,0 @@\n-    int native_nmethod_size = CodeBlob::allocation_size(code_buffer, sizeof(nmethod));\n@@ -528,1 +528,0 @@\n-  { MutexLocker mu(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n@@ -530,1 +529,1 @@\n-    int jvmci_data_size = !compiler->is_jvmci() ? 0 : JVMCINMethodData::compute_size(nmethod_mirror_name);\n+  int jvmci_data_size = !compiler->is_jvmci() ? 0 : JVMCINMethodData::compute_size(nmethod_mirror_name);\n@@ -532,6 +531,6 @@\n-    int nmethod_size =\n-      CodeBlob::allocation_size(code_buffer, sizeof(nmethod))\n-      + adjust_pcs_size(debug_info->pcs_size())\n-      + align_up((int)dependencies->size_in_bytes(), oopSize)\n-      + align_up(handler_table->size_in_bytes()    , oopSize)\n-      + align_up(nul_chk_table->size_in_bytes()    , oopSize)\n+  int nmethod_size =\n+    CodeBlob::allocation_size(code_buffer, sizeof(nmethod))\n+    + adjust_pcs_size(debug_info->pcs_size())\n+    + align_up((int)dependencies->size_in_bytes(), oopSize)\n+    + align_up(handler_table->size_in_bytes()    , oopSize)\n+    + align_up(nul_chk_table->size_in_bytes()    , oopSize)\n@@ -539,2 +538,2 @@\n-      + align_up(speculations_len                  , oopSize)\n-      + align_up(jvmci_data_size                   , oopSize)\n+    + align_up(speculations_len                  , oopSize)\n+    + align_up(jvmci_data_size                   , oopSize)\n@@ -542,1 +541,3 @@\n-      + align_up(debug_info->data_size()           , oopSize);\n+    + align_up(debug_info->data_size()           , oopSize);\n+  {\n+    MutexLocker mu(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n","filename":"src\/hotspot\/share\/code\/nmethod.cpp","additions":13,"deletions":12,"binary":false,"changes":25,"status":"modified"}]}