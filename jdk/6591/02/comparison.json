{"files":[{"patch":"@@ -602,0 +602,18 @@\n+  <Event name=\"UnsafeAllocation\" category=\"Java Application\" label=\"Unsafe Allocation\" description=\"Allocation memory when using unsafe\"\n+    thread=\"true\" stackTrace=\"true\" startTime=\"false\">\n+    <Field type=\"ulong\" name=\"addr\" label=\"addr\" \/>\n+    <Field type=\"ulong\" contentType=\"bytes\" name=\"allocationSize\" label=\"Allocation Size\" \/>\n+  <\/Event>\n+\n+  <Event name=\"UnsafeReallocate\" category=\"Java Application\" label=\"Unsafe Reallocate\" description=\"Reallocate memory when using unsafe\"\n+    thread=\"true\" stackTrace=\"true\" startTime=\"false\">\n+    <Field type=\"ulong\" name=\"freeAddr\" label=\"addr\" \/>\n+    <Field type=\"ulong\" name=\"allocAddr\" label=\"addr\" \/>\n+    <Field type=\"ulong\" contentType=\"bytes\" name=\"allocationSize\" label=\"Allocation Size\" \/>\n+  <\/Event>\n+\n+  <Event name=\"UnsafeFreeMemory\" category=\"Java Application\" label=\"Unsafe FreeMemory\" description=\"Free memory when using unsafe\"\n+    thread=\"true\" stackTrace=\"true\" startTime=\"false\">\n+    <Field type=\"ulong\" name=\"addr\" label=\"addr\" \/>\n+  <\/Event>\n+\n","filename":"src\/hotspot\/share\/jfr\/metadata\/metadata.xml","additions":18,"deletions":0,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -344,2 +344,8 @@\n-\n-  return addr_to_java(x);\n+  jlong addr = addr_to_java(x);\n+\n+  EventUnsafeAllocation event;\n+  event.set_allocationSize(sz);\n+  event.set_addr(addr);\n+  event.commit();\n+  \n+  return addr;\n@@ -355,0 +361,7 @@\n+  jlong reallocAddr = addr_to_java(x);\n+\n+  EventUnsafeReallocate event;\n+  event.set_allocationSize(sz);\n+  event.set_freeAddr(addr);\n+  event.set_allocAddr(reallocAddr);\n+  event.commit();\n@@ -356,1 +369,1 @@\n-  return addr_to_java(x);\n+  return reallocAddr;\n@@ -363,0 +376,4 @@\n+\n+  EventUnsafeFreeMemory event;\n+  event.set_addr(addr);\n+  event.commit();\n","filename":"src\/hotspot\/share\/prims\/unsafe.cpp","additions":20,"deletions":3,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -630,0 +630,15 @@\n+    <event name=\"jdk.UnsafeAllocation\">\n+      <setting name=\"enabled\">false<\/setting>\n+      <setting name=\"stackTrace\">true<\/setting>\n+    <\/event>\n+\n+    <event name=\"jdk.UnsafeReallocate\">\n+      <setting name=\"enabled\">false<\/setting>\n+      <setting name=\"stackTrace\">true<\/setting>\n+    <\/event>\n+\n+    <event name=\"jdk.UnsafeFreeMemory\">\n+      <setting name=\"enabled\">false<\/setting>\n+      <setting name=\"stackTrace\">true<\/setting>\n+    <\/event>\n+\n","filename":"src\/jdk.jfr\/share\/conf\/jfr\/default.jfc","additions":15,"deletions":0,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -630,0 +630,15 @@\n+    <event name=\"jdk.UnsafeAllocation\">\n+      <setting name=\"enabled\">false<\/setting>\n+      <setting name=\"stackTrace\">true<\/setting>\n+    <\/event>\n+\n+    <event name=\"jdk.UnsafeReallocate\">\n+      <setting name=\"enabled\">false<\/setting>\n+      <setting name=\"stackTrace\">true<\/setting>\n+    <\/event>\n+\n+    <event name=\"jdk.UnsafeFreeMemory\">\n+      <setting name=\"enabled\">false<\/setting>\n+      <setting name=\"stackTrace\">true<\/setting>\n+    <\/event>\n+\n","filename":"src\/jdk.jfr\/share\/conf\/jfr\/profile.jfc","additions":15,"deletions":0,"binary":false,"changes":15,"status":"modified"}]}