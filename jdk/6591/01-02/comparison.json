{"files":[{"patch":"@@ -602,1 +602,1 @@\n-  <Event name=\"UnsafeAllocation\" category=\"Java Application\" label=\"Allocation on Unsafe\" description=\"Allocation memory when using unsafe\"\n+  <Event name=\"UnsafeAllocation\" category=\"Java Application\" label=\"Unsafe Allocation\" description=\"Allocation memory when using unsafe\"\n@@ -604,0 +604,1 @@\n+    <Field type=\"ulong\" name=\"addr\" label=\"addr\" \/>\n@@ -607,0 +608,12 @@\n+  <Event name=\"UnsafeReallocate\" category=\"Java Application\" label=\"Unsafe Reallocate\" description=\"Reallocate memory when using unsafe\"\n+    thread=\"true\" stackTrace=\"true\" startTime=\"false\">\n+    <Field type=\"ulong\" name=\"freeAddr\" label=\"addr\" \/>\n+    <Field type=\"ulong\" name=\"allocAddr\" label=\"addr\" \/>\n+    <Field type=\"ulong\" contentType=\"bytes\" name=\"allocationSize\" label=\"Allocation Size\" \/>\n+  <\/Event>\n+\n+  <Event name=\"UnsafeFreeMemory\" category=\"Java Application\" label=\"Unsafe FreeMemory\" description=\"Free memory when using unsafe\"\n+    thread=\"true\" stackTrace=\"true\" startTime=\"false\">\n+    <Field type=\"ulong\" name=\"addr\" label=\"addr\" \/>\n+  <\/Event>\n+\n","filename":"src\/hotspot\/share\/jfr\/metadata\/metadata.xml","additions":14,"deletions":1,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -342,1 +342,1 @@\n-  EventUnsafeAllocation event;\n+\n@@ -344,0 +344,3 @@\n+  jlong addr = addr_to_java(x);\n+\n+  EventUnsafeAllocation event;\n@@ -345,0 +348,1 @@\n+  event.set_addr(addr);\n@@ -346,1 +350,2 @@\n-  return addr_to_java(x);\n+  \n+  return addr;\n@@ -356,0 +361,1 @@\n+  jlong reallocAddr = addr_to_java(x);\n@@ -357,1 +363,7 @@\n-  return addr_to_java(x);\n+  EventUnsafeReallocate event;\n+  event.set_allocationSize(sz);\n+  event.set_freeAddr(addr);\n+  event.set_allocAddr(reallocAddr);\n+  event.commit();\n+\n+  return reallocAddr;\n@@ -364,0 +376,4 @@\n+\n+  EventUnsafeFreeMemory event;\n+  event.set_addr(addr);\n+  event.commit();\n","filename":"src\/hotspot\/share\/prims\/unsafe.cpp","additions":19,"deletions":3,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -635,0 +635,10 @@\n+    <event name=\"jdk.UnsafeReallocate\">\n+      <setting name=\"enabled\">false<\/setting>\n+      <setting name=\"stackTrace\">true<\/setting>\n+    <\/event>\n+\n+    <event name=\"jdk.UnsafeFreeMemory\">\n+      <setting name=\"enabled\">false<\/setting>\n+      <setting name=\"stackTrace\">true<\/setting>\n+    <\/event>\n+\n","filename":"src\/jdk.jfr\/share\/conf\/jfr\/default.jfc","additions":10,"deletions":0,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -635,0 +635,10 @@\n+    <event name=\"jdk.UnsafeReallocate\">\n+      <setting name=\"enabled\">false<\/setting>\n+      <setting name=\"stackTrace\">true<\/setting>\n+    <\/event>\n+\n+    <event name=\"jdk.UnsafeFreeMemory\">\n+      <setting name=\"enabled\">false<\/setting>\n+      <setting name=\"stackTrace\">true<\/setting>\n+    <\/event>\n+\n","filename":"src\/jdk.jfr\/share\/conf\/jfr\/profile.jfc","additions":10,"deletions":0,"binary":false,"changes":10,"status":"modified"}]}