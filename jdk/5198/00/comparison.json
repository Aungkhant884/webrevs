{"files":[{"patch":"@@ -1703,5 +1703,1 @@\n-        String lower = Utils.toLowerCase(text);\n-        if (lower.startsWith(\"mailto:\")\n-                || lower.startsWith(\"http:\")\n-                || lower.startsWith(\"https:\")\n-                || lower.startsWith(\"file:\")) {\n+        if (text.matches(\"^[^:\/?#]+:.+$\")) {\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlDocletWriter.java","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -0,0 +1,72 @@\n+\/*\n+ * Copyright (c) 2016, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8248001\n+ * @library  \/tools\/lib ..\/..\/lib\n+ * @modules jdk.javadoc\/jdk.javadoc.internal.tool\n+ * @build    javadoc.tester.*\n+ * @run main TestHtmlDocletWriter\n+ *\/\n+\n+import javadoc.tester.JavadocTester;\n+\n+public class TestHtmlDocletWriter extends JavadocTester {\n+\n+    public static void main(String args[]) throws Exception {\n+        TestHtmlDocletWriter tester = new TestHtmlDocletWriter();\n+        tester.runTests();\n+    }\n+\n+    private void checkHtml(String html) {\n+        checkOutput(html, true,\n+                    \"<a href=\\\"ftp:\/\/www.domain.com\/\\\">FTP Site<\/a>\");\n+        checkOutput(html, true,\n+                    \"<a href=\\\"http:\/\/www.domain.com\/\\\">HTTP Site<\/a>\");\n+        checkOutput(html, true,\n+                    \"<a href=\\\"https:\/\/www.domain.com\/\\\">HTTPS Site<\/a>\");\n+        checkOutput(html, true,\n+                    \"<a href=\\\"file:\/\/\/path\/to\/somefile\\\">file service<\/a>\");\n+        checkOutput(html, true,\n+                    \"<a href=\\\"javascript:void(0)\\\">Click here<\/a>\");\n+        checkOutput(html, true,\n+                    \"<a href=\\\"mailto:username@hogehoge.com\\\">mail service<\/a>\");\n+    }\n+\n+    @Test\n+    public void test() {\n+        javadoc(\"-d\", \"out\",\n+                \"--allow-script-in-comments\",\n+                \"-notimestamp\",\n+                \"-sourcepath\", testSrc,\n+                \"-use\",\n+                \"pkg\");\n+        checkExit(Exit.OK);\n+\n+        checkHtml(\"pkg\/A1.html\");\n+        checkHtml(\"pkg\/package-use.html\");\n+        checkHtml(\"pkg\/class-use\/B1.StaticInnerB1.html\");\n+        checkHtml(\"index-all.html\");\n+    }\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testHtmlDocletWriter\/TestHtmlDocletWriter.java","additions":72,"deletions":0,"binary":false,"changes":72,"status":"added"},{"patch":"@@ -0,0 +1,109 @@\n+\/*\n+ * Copyright (c) 2016, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package pkg;\n+\n+\/**\n+ *This class has <a href=\"{@docRoot}\/pkg\/A1.html#functions\">various functions<\/a>,\n+ * see <a href=\"ftp:\/\/www.domain.com\/\">FTP Site<\/a>, <a href=\"http:\/\/www.domain.com\/\">HTTP Site<\/a>, <a href=\"https:\/\/www.domain.com\/\">HTTPS Site<\/a>,\n+ *  <a href=\"file:\/\/\/path\/to\/somefile\">file service<\/a>, and <a href=\"javascript:void(0)\">Click here<\/a>, also contact to <a href=\"mailto:username@hogehoge.com\">mail service<\/a> for further infomation.\n+ *<a id=\"functions\">various functions<\/a>\n+ *<ul>\n+ *<li>function1<\/li>\n+ *<li>function2<\/li>\n+ *<li>function3<\/li>\n+ *<\/ul>\n+ *<a id=\"methods\">special methods<\/a>\n+ *<ul>\n+ *<li>method1<\/li>\n+ *<li>method2<\/li>\n+ *<li>method3<\/li>\n+ *<\/ul>\n+ *\/\n+public class A1 implements java.io.Serializable {\n+    \/**\n+     *fields.\n+     *\/\n+    protected Object field1;\n+\n+    \/**\n+     *<a href=\"{@docRoot}\/pkg\/A1.html#functions\">Creates an instance which has various functions.<\/a>\n+     *\/\n+    public A1(){\n+    }\n+\n+    \/**\n+     *This is a<a href=\"#methods\">special method<\/a>.\n+     *@param p1 arg1\n+     *\/\n+    public void method1(B1.StaticInnerB1 p1){\n+    }\n+\n+    \/**\n+     *See <a href=\"ftp:\/\/www.domain.com\/\">FTP Site<\/a> for more infomation.\n+     *@param p1 arg1\n+     *\/\n+    public void method2(B1.StaticInnerB1 p1){\n+    }\n+\n+    \/**\n+     *See <a href=\"http:\/\/www.domain.com\/\">HTTP Site<\/a> for more infomation.\n+     *@param p1 arg1\n+     *\/\n+    public void method3(B1.StaticInnerB1 p1){\n+    }\n+\n+    \/**\n+     *See <a href=\"https:\/\/www.domain.com\/\">HTTPS Site<\/a> for more infomation.\n+     *@param p1 arg1\n+     *\/\n+    public void method4(B1.StaticInnerB1 p1){\n+    }\n+\n+    \/**\n+     *See <a href=\"file:\/\/\/path\/to\/somefile\">file service<\/a> for more infomation.\n+     *@param p1 arg1\n+     *\/\n+    public void method5(B1.StaticInnerB1 p1){\n+    }\n+\n+    \/**\n+     *Contact to <a href=\"mailto:username@hogehoge.com\">mail service<\/a> for more infomation.\n+     *@param p1 arg1\n+     *\/\n+    public void method6(B1.StaticInnerB1 p1){\n+    }\n+\n+    \/**\n+     *<a href=\"javascript:void(0)\">Click here<\/a> for more infomation.\n+     *@param p1 arg1\n+     *\/\n+    public void method7(B1.StaticInnerB1 p1){\n+    }\n+\n+    \/**\n+     *Innerclass of class A1.\n+     *\/\n+    public class InnerA1 {\n+    }\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testHtmlDocletWriter\/pkg\/A1.java","additions":109,"deletions":0,"binary":false,"changes":109,"status":"added"},{"patch":"@@ -0,0 +1,105 @@\n+\/*\n+ * Copyright (c) 2016, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package pkg;\n+\n+\/**\n+ *<a href=\"{@docRoot}\/pkg\/A1.html#functions\">Various functions<\/a>in this Class.\n+ *<a id=\"functions\">various functions<\/a>\n+ *<ul>\n+ *<li>function1<\/li>\n+ *<li>function2<\/li>\n+ *<li>function3<\/li>\n+ *<\/ul>\n+ *<a id=\"methods\">special methods<\/a>\n+ *<ul>\n+ *<li>method1<\/li>\n+ *<li>method2<\/li>\n+ *<li>method3<\/li>\n+ *<\/ul>\n+ *\/\n+public class B1 implements java.io.Serializable {\n+    \/**\n+     *fields.\n+     *\/\n+    protected StaticInnerB1 field2;\n+\n+    \/**\n+     *<a href=\"{@docRoot}\/pkg\/B1.html#functions\">Creates an instance which has various functions.<\/a>\n+     *\/\n+    public B1(){\n+    }\n+\n+    \/**\n+     *This is a<a href=\"#methods\">special methods<\/a>.\n+     *@param p1 arg1\n+     *\/\n+    public void method1(A1 p1){\n+    }\n+\n+    \/**\n+     *Use the InnerA1 class for the first parameter.\n+     *@param p1 class InnerA1\n+     *\/\n+    public void method2(A1.InnerA1 p1){\n+    }\n+\n+    \/**\n+     *Use the InnerB1 class for the first parameter.\n+     *@param p1 class InnerB1\n+     *\/\n+    public void method3(InnerB1 p1){\n+    }\n+\n+    \/**\n+     *Use the InnerB2 class for the first parameter.\n+     *@param p1 class InnerB2\n+     *\/\n+    public void method4(InnerB2 p1){\n+    }\n+\n+    \/**\n+     *Use the InnerB1 class for the first parameter.\n+     *@param p1 class InnerB1\n+     *\/\n+    public void method5(StaticInnerB1 p1){\n+    }\n+\n+    \/**\n+     *Innerclass of class B1.\n+     *\/\n+    public class InnerB1 extends Object {\n+    }\n+\n+    \/**\n+     *Innerclass of class B1.\n+     *\/\n+    class InnerB2 extends Object {\n+    }\n+\n+    \/**\n+     * static Innerclass of class B1.\n+     *\/\n+    public static class StaticInnerB1 extends Object {\n+    }\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testHtmlDocletWriter\/pkg\/B1.java","additions":105,"deletions":0,"binary":false,"changes":105,"status":"added"},{"patch":"@@ -0,0 +1,33 @@\n+\/*\n+ * Copyright (c) 2016, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+<!DOCTYPE HTML PUBLIC \"-\/\/W3C\/\/DTD HTML 3.2 Final\/\/EN\">\n+<html>\n+<head>\n+<\/head>\n+<body bgcolor=\"white\">\n+<p>Differences between the <a href=\"{@docRoot}\/pkg\/package-summary.html#xsd-version\">current version<\/a> of the APIs<\/p>\n+<p>The description of package a<\/p>\n+<p><a id=\"xsd-version\"><\/a>foobar<\/p>\n+<\/body>\n+<\/html>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testHtmlDocletWriter\/pkg\/package.html","additions":33,"deletions":0,"binary":false,"changes":33,"status":"added"}]}