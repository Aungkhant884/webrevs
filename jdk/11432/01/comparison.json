{"files":[{"patch":"@@ -245,1 +245,2 @@\n-        \"linux-aarch64\", \"linux-arm32\", \"linux-ppc64le\", \"linux-s390x\"\n+        \"linux-aarch64\", \"linux-arm32\", \"linux-ppc64le\", \"linux-s390x\",\n+        \"linux-riscv64\"\n@@ -522,0 +523,11 @@\n+\n+        \"linux-riscv64\": {\n+            target_os: \"linux\",\n+            target_cpu: \"riscv64\",\n+            build_cpu: \"x64\",\n+            dependencies: [\"devkit\", \"gtest\", \"build_devkit\"],\n+            configure_args: [\n+                \"--openjdk-target=riscv64-linux-gnu\", \"--with-freetype=bundled\",\n+                \"--disable-warnings-as-errors\"\n+            ],\n+        },\n@@ -717,1 +729,4 @@\n-        }\n+        },\n+        \"linux-riscv64\": {\n+            platform: \"linux-riscv64\",\n+        },\n@@ -1043,1 +1058,2 @@\n-        linux_s390x: \"gcc8.2.0-Fedora27+1.0\"\n+        linux_s390x: \"gcc8.2.0-Fedora27+1.0\",\n+        linux_riscv64: \"gcc11.3.0-Fedora_rawhide_68692+1.0\"\n","filename":"make\/conf\/jib-profiles.js","additions":19,"deletions":3,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2013, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2013, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -66,12 +66,6 @@\n-  DEFAULT_OS_VERSION := 27\n-  ifeq ($(BASE_OS_VERSION), )\n-    BASE_OS_VERSION := $(DEFAULT_OS_VERSION)\n-  endif\n-  ifeq ($(filter x86_64 armhfp, $(ARCH)), )\n-    FEDORA_TYPE := fedora-secondary\n-  else\n-    FEDORA_TYPE := fedora\/linux\n-  endif\n-  ARCHIVED := $(shell [ $(BASE_OS_VERSION) -lt $(DEFAULT_OS_VERSION) ] && echo true)\n-  ifeq ($(ARCHIVED),true)\n-    BASE_URL := https:\/\/archives.fedoraproject.org\/pub\/archive\/$(FEDORA_TYPE)\/releases\/$(BASE_OS_VERSION)\/Everything\/$(ARCH)\/os\/Packages\/\n+  ifeq ($(ARCH), riscv64)\n+    DEFAULT_OS_VERSION := rawhide\/68692\n+    ifeq ($(BASE_OS_VERSION), )\n+      BASE_OS_VERSION := $(DEFAULT_OS_VERSION)\n+    endif\n+    BASE_URL := http:\/\/fedora.riscv.rocks\/repos-dist\/$(BASE_OS_VERSION)\/$(ARCH)\/Packages\/\n@@ -79,1 +73,15 @@\n-    BASE_URL := https:\/\/dl.fedoraproject.org\/pub\/$(FEDORA_TYPE)\/releases\/$(BASE_OS_VERSION)\/Everything\/$(ARCH)\/os\/Packages\/\n+    DEFAULT_OS_VERSION := 27\n+    ifeq ($(BASE_OS_VERSION), )\n+      BASE_OS_VERSION := $(DEFAULT_OS_VERSION)\n+    endif\n+    ifeq ($(filter x86_64 armhfp, $(ARCH)), )\n+      FEDORA_TYPE := fedora-secondary\n+    else\n+      FEDORA_TYPE := fedora\/linux\n+    endif\n+    ARCHIVED := $(shell [ $(BASE_OS_VERSION) -lt $(DEFAULT_OS_VERSION) ] && echo true)\n+    ifeq ($(ARCHIVED),true)\n+      BASE_URL := https:\/\/archives.fedoraproject.org\/pub\/archive\/$(FEDORA_TYPE)\/releases\/$(BASE_OS_VERSION)\/Everything\/$(ARCH)\/os\/Packages\/\n+    else\n+      BASE_URL := https:\/\/dl.fedoraproject.org\/pub\/$(FEDORA_TYPE)\/releases\/$(BASE_OS_VERSION)\/Everything\/$(ARCH)\/os\/Packages\/\n+    endif\n@@ -90,2 +98,11 @@\n-GCC_VER := 11.2.0\n-ifeq ($(GCC_VER), 11.2.0)\n+GCC_VER := 11.3.0\n+ifeq ($(GCC_VER), 11.3.0)\n+  gcc_ver := gcc-11.3.0\n+  binutils_ver := binutils-2.39\n+  ccache_ver := ccache-3.7.12\n+  mpfr_ver := mpfr-4.1.1\n+  gmp_ver := gmp-6.2.1\n+  mpc_ver := mpc-1.2.1\n+  gdb_ver := gdb-11.2\n+  REQUIRED_MIN_MAKE_MAJOR_VERSION := 4\n+else ifeq ($(GCC_VER), 11.2.0)\n@@ -192,1 +209,1 @@\n-    libgcc \\\n+    libgcc libxcrypt \\\n@@ -248,1 +265,1 @@\n-\t$$(foreach p,$$(abspath $$(wildcard patches\/$$(notdir $$($(1)_DIR)).patch)), \\\n+\t$$(foreach p,$$(abspath $$(wildcard patches\/$$(ARCH)-$$(notdir $$($(1)_DIR)).patch)), \\\n@@ -417,0 +434,6 @@\n+ifneq ($(ARCH), riscv64)\n+  # gold is not available for riscv64 for some reason,\n+  # and subsequent linking will fail if we try to enable it.\n+  LINKER_CONFIG := --enable-gold=default\n+endif\n+\n@@ -429,0 +452,1 @@\n+        $(LINKER_CONFIG) \\\n@@ -433,1 +457,0 @@\n-\t      --enable-gold=default \\\n@@ -497,1 +520,1 @@\n-ifneq ($(filter ppc64 ppc64le s390x, $(ARCH)), )\n+ifneq ($(filter riscv64 ppc64 ppc64le s390x, $(ARCH)), )\n","filename":"make\/devkit\/Tools.gmk","additions":43,"deletions":20,"binary":false,"changes":63,"status":"modified"},{"patch":"@@ -0,0 +1,14 @@\n+diff -ur a\/libsanitizer\/sanitizer_common\/sanitizer_platform_limits_posix.cpp b\/libsanitizer\/sanitizer_common\/sanitizer_platform_limits_posix.cpp\n+--- a\/libsanitizer\/sanitizer_common\/sanitizer_platform_limits_posix.cpp\t2022-11-30 12:25:37.363419659 +0100\n++++ b\/libsanitizer\/sanitizer_common\/sanitizer_platform_limits_posix.cpp\t2022-11-30 12:42:48.135412054 +0100\n+@@ -59,7 +59,9 @@\n+ \n+ #if !SANITIZER_ANDROID\n+ #include <fstab.h>\n+-#include <sys\/mount.h>\n++\/\/ sys\/mount.h conflicts with linux\/fs.h in glibc 2.36+\n++\/\/ See https:\/\/sourceware.org\/glibc\/wiki\/Release\/2.36#Usage_of_.3Clinux.2Fmount.h.3E_and_.3Csys.2Fmount.h.3E\n++\/\/ This has been fixed elsewhere, but apparently not in Fedora riscv.\n+ #include <sys\/timeb.h>\n+ #include <utmpx.h>\n+ #endif\n","filename":"make\/devkit\/patches\/riscv64-gcc-11.3.0.patch","additions":14,"deletions":0,"binary":false,"changes":14,"status":"added"}]}