{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -189,1 +189,5 @@\n-                    close(sfd);\n+                    try {\n+                        close(sfd);\n+                    } catch (UnixException e) {\n+                        e.rethrowAsIOException(source);\n+                    }\n@@ -213,1 +217,5 @@\n-                close(dfd);\n+                try {\n+                    close(dfd);\n+                } catch (UnixException e) {\n+                    e.rethrowAsIOException(target);\n+                }\n@@ -291,1 +299,5 @@\n-                close(fo);\n+                try {\n+                    close(fo);\n+                } catch (UnixException e) {\n+                    e.rethrowAsIOException(target);\n+                }\n@@ -301,1 +313,5 @@\n-            close(fi);\n+            try {\n+                close(fi);\n+            } catch (UnixException e) {\n+                e.rethrowAsIOException(source);\n+            }\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixCopyFile.java","additions":21,"deletions":5,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -70,1 +70,1 @@\n-    protected final UnixPath directory() {\n+    final UnixPath directory() {\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixDirectoryStream.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -163,1 +163,5 @@\n-                close(fd);\n+                try {\n+                    close(fd);\n+                } catch (UnixException e) {\n+                    e.rethrowAsIOException(file);\n+                }\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixFileAttributeViews.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -200,1 +200,4 @@\n-            UnixNativeDispatcher.close(fd);\n+            try {\n+                UnixNativeDispatcher.close(fd);\n+            } catch (UnixException ignored) {\n+            }\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixFileStore.java","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -434,4 +434,14 @@\n-            if (dfd1 != -1)\n-                UnixNativeDispatcher.close(dfd1);\n-            if (dfd2 != -1)\n-                UnixNativeDispatcher.close(dfd2);\n+            if (dfd1 != -1) {\n+                try {\n+                    UnixNativeDispatcher.close(dfd1);\n+                } catch (UnixException y) {\n+                    x.addSuppressed(y);\n+                }\n+            }\n+            if (dfd2 != -1) {\n+                try {\n+                    UnixNativeDispatcher.close(dfd2);\n+                } catch (UnixException z) {\n+                    x.addSuppressed(z);\n+                }\n+            }\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixFileSystemProvider.java","additions":15,"deletions":5,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -93,1 +93,1 @@\n-    static void close(int fd) {\n+    static void close(int fd) throws UnixException {\n@@ -98,1 +98,1 @@\n-    private static native void close0(int fd);\n+    private static native void close0(int fd) throws UnixException;\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixNativeDispatcher.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -64,1 +64,5 @@\n-                UnixNativeDispatcher.close(dfd);\n+                try {\n+                    UnixNativeDispatcher.close(dfd);\n+                } catch (UnixException e) {\n+                    e.rethrowAsIOException(ds.directory());\n+                }\n@@ -121,1 +125,5 @@\n-                    UnixNativeDispatcher.close(newdfd1);\n+                    try {\n+                        UnixNativeDispatcher.close(newdfd1);\n+                    } catch (UnixException e) {\n+                        x.addSuppressed(e);\n+                    }\n@@ -123,1 +131,5 @@\n-                    UnixNativeDispatcher.close(newdfd2);\n+                    try {\n+                        UnixNativeDispatcher.close(newdfd2);\n+                    } catch (UnixException e) {\n+                        x.addSuppressed(e);\n+                    }\n@@ -424,2 +436,7 @@\n-                    if (file != null)\n-                        UnixNativeDispatcher.close(fd);\n+                    if (file != null) {\n+                        try {\n+                            UnixNativeDispatcher.close(fd);\n+                        } catch (UnixException x) {\n+                            x.rethrowAsIOException(file);\n+                        }\n+                    }\n@@ -507,1 +524,5 @@\n-                        UnixNativeDispatcher.close(fd);\n+                        try {\n+                            UnixNativeDispatcher.close(fd);\n+                        } catch (UnixException e) {\n+                            e.rethrowAsIOException(file);\n+                        }\n@@ -530,1 +551,5 @@\n-                        UnixNativeDispatcher.close(fd);\n+                        try {\n+                            UnixNativeDispatcher.close(fd);\n+                        } catch (UnixException e) {\n+                            e.rethrowAsIOException(file);\n+                        }\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixSecureDirectoryStream.java","additions":33,"deletions":8,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -136,1 +136,5 @@\n-            close(fd);\n+            try {\n+                close(fd);\n+            } catch (UnixException y) {\n+                y.rethrowAsIOException(file);\n+            }\n@@ -160,1 +164,5 @@\n-            close(fd);\n+            try {\n+                close(fd);\n+            } catch (UnixException y) {\n+                y.rethrowAsIOException(file);\n+            }\n@@ -224,1 +232,5 @@\n-            close(fd);\n+            try {\n+                close(fd);\n+            } catch (UnixException y) {\n+                y.rethrowAsIOException(file);\n+            }\n@@ -286,1 +298,5 @@\n-            close(fd);\n+            try {\n+                close(fd);\n+            } catch (UnixException y) {\n+                y.rethrowAsIOException(file);\n+            }\n@@ -308,1 +324,5 @@\n-            close(fd);\n+            try {\n+                close(fd);\n+            } catch (UnixException y) {\n+                y.rethrowAsIOException(file);\n+            }\n@@ -349,1 +369,1 @@\n-}\n\\ No newline at end of file\n+}\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixUserDefinedFileAttributeView.java","additions":27,"deletions":7,"binary":false,"changes":34,"status":"modified"}]}