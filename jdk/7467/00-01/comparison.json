{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -185,1 +185,4 @@\n-            close(fd);\n+            try {\n+                close(fd);\n+            } catch (UnixException ignore) {\n+            }\n@@ -280,1 +283,4 @@\n-            close(fd);\n+            try {\n+                close(fd);\n+            } catch (UnixException ignore) {\n+            }\n","filename":"src\/java.base\/linux\/classes\/sun\/nio\/fs\/LinuxDosFileAttributeView.java","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -73,2 +73,7 @@\n-            UnixNativeDispatcher.close(ifd);\n-            throw new IOException(x.errorString());\n+            IOException ioe = new IOException(x.errorString());\n+            try {\n+                UnixNativeDispatcher.close(ifd);\n+            } catch (UnixException e) {\n+                ioe.addSuppressed(e);\n+            }\n+            throw ioe;\n@@ -299,3 +304,6 @@\n-            UnixNativeDispatcher.close(socketpair[0]);\n-            UnixNativeDispatcher.close(socketpair[1]);\n-            UnixNativeDispatcher.close(ifd);\n+            try {\n+                UnixNativeDispatcher.close(socketpair[0]);\n+                UnixNativeDispatcher.close(socketpair[1]);\n+                UnixNativeDispatcher.close(ifd);\n+            } catch (UnixException ignore) {\n+            }\n","filename":"src\/java.base\/linux\/classes\/sun\/nio\/fs\/LinuxWatchService.java","additions":14,"deletions":6,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -216,1 +216,1 @@\n-            if (dfd >= 0)\n+            if (dfd >= 0) {\n@@ -220,1 +220,2 @@\n-                    e.rethrowAsIOException(target);\n+                    if (done)\n+                        e.rethrowAsIOException(target);\n@@ -222,0 +223,1 @@\n+            }\n@@ -244,0 +246,2 @@\n+        \/\/ set to true when file and attributes copied\n+        boolean complete = false;\n@@ -257,2 +261,0 @@\n-            \/\/ set to true when file and attributes copied\n-            boolean complete = false;\n@@ -302,1 +304,2 @@\n-                    e.rethrowAsIOException(target);\n+                    if (complete)\n+                        e.rethrowAsIOException(target);\n@@ -316,1 +319,2 @@\n-                e.rethrowAsIOException(source);\n+                if (complete)\n+                    e.rethrowAsIOException(source);\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixCopyFile.java","additions":10,"deletions":6,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -165,2 +165,1 @@\n-                } catch (UnixException e) {\n-                    e.rethrowAsIOException(file);\n+                } catch (UnixException ignore) {\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixFileAttributeViews.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -202,1 +202,1 @@\n-            } catch (UnixException ignored) {\n+            } catch (UnixException ignore) {\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixFileStore.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -434,0 +434,3 @@\n+            IOException ioe = x.errno() == UnixConstants.ENOTDIR ?\n+                new NotDirectoryException(dir.getPathForExceptionMessage()) :\n+                x.asIOException(dir);\n@@ -438,1 +441,1 @@\n-                    x.addSuppressed(y);\n+                    ioe.addSuppressed(y);\n@@ -445,1 +448,1 @@\n-                    x.addSuppressed(z);\n+                    ioe.addSuppressed(z);\n@@ -448,3 +451,1 @@\n-            if (x.errno() == UnixConstants.ENOTDIR)\n-                throw new NotDirectoryException(dir.getPathForExceptionMessage());\n-            x.rethrowAsIOException(dir);\n+            throw ioe;\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixFileSystemProvider.java","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -124,1 +124,4 @@\n-                if (newdfd1 != -1)\n+                IOException ioe = x.errno() == UnixConstants.ENOTDIR ?\n+                    new NotDirectoryException(file.toString()) :\n+                    x.asIOException(file);\n+                if (newdfd1 != -1) {\n@@ -128,1 +131,1 @@\n-                        x.addSuppressed(e);\n+                        ioe.addSuppressed(e);\n@@ -130,1 +133,2 @@\n-                if (newdfd2 != -1)\n+                }\n+                if (newdfd2 != -1) {\n@@ -134,1 +138,1 @@\n-                        x.addSuppressed(e);\n+                        ioe.addSuppressed(e);\n@@ -136,3 +140,2 @@\n-                if (x.errno() == UnixConstants.ENOTDIR)\n-                    throw new NotDirectoryException(file.toString());\n-                x.rethrowAsIOException(file);\n+                }\n+                throw ioe;\n@@ -439,2 +442,1 @@\n-                        } catch (UnixException x) {\n-                            x.rethrowAsIOException(file);\n+                        } catch (UnixException ignore) {\n@@ -523,1 +525,1 @@\n-                    if (file != null && fd >= 0)\n+                    if (file != null && fd >= 0) {\n@@ -526,2 +528,1 @@\n-                        } catch (UnixException e) {\n-                            e.rethrowAsIOException(file);\n+                        } catch (UnixException ignore) {\n@@ -529,0 +530,1 @@\n+                    }\n@@ -550,1 +552,1 @@\n-                    if (file != null && fd >= 0)\n+                    if (file != null && fd >= 0) {\n@@ -553,2 +555,1 @@\n-                        } catch (UnixException e) {\n-                            e.rethrowAsIOException(file);\n+                        } catch (UnixException ignore) {\n@@ -556,0 +557,1 @@\n+                    }\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixSecureDirectoryStream.java","additions":17,"deletions":15,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -138,2 +138,1 @@\n-            } catch (UnixException y) {\n-                y.rethrowAsIOException(file);\n+            } catch (UnixException ignore) {\n@@ -166,2 +165,1 @@\n-            } catch (UnixException y) {\n-                y.rethrowAsIOException(file);\n+            } catch (UnixException ignore) {\n@@ -234,2 +232,1 @@\n-            } catch (UnixException y) {\n-                y.rethrowAsIOException(file);\n+            } catch (UnixException ignore) {\n@@ -300,2 +297,1 @@\n-            } catch (UnixException y) {\n-                y.rethrowAsIOException(file);\n+            } catch (UnixException ignore) {\n@@ -326,2 +322,1 @@\n-            } catch (UnixException y) {\n-                y.rethrowAsIOException(file);\n+            } catch (UnixException ignore) {\n","filename":"src\/java.base\/unix\/classes\/sun\/nio\/fs\/UnixUserDefinedFileAttributeView.java","additions":5,"deletions":10,"binary":false,"changes":15,"status":"modified"}]}