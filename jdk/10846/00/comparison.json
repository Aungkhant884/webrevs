{"files":[{"patch":"@@ -46,3 +46,6 @@\n-    frame last_frame = pd_last_frame();\n-    if (last_frame.pc() == nullptr) return false;\n-    *fr_addr = last_frame;\n+    intptr_t* sp = Atomic::load_acquire(&_anchor._last_Java_sp);\n+    address pc = _anchor.last_Java_pc();\n+    \/\/ pc can be seen as null because not all writers use store pc + release store sp.\n+    \/\/ Simply discard the sample in this rare case.\n+    if (pc == nullptr) return false;\n+    *fr_addr = frame(sp, pc);\n","filename":"src\/hotspot\/os_cpu\/aix_ppc\/javaThread_aix_ppc.cpp","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -45,3 +45,6 @@\n-    frame last_frame = pd_last_frame();\n-    if (last_frame.pc() == nullptr) return false;\n-    *fr_addr = last_frame;\n+    intptr_t* sp = Atomic::load_acquire(&_anchor._last_Java_sp);\n+    address pc = _anchor.last_Java_pc();\n+    \/\/ pc can be seen as null because not all writers use store pc + release store sp.\n+    \/\/ Simply discard the sample in this rare case.\n+    if (pc == nullptr) return false;\n+    *fr_addr = frame(sp, pc);\n","filename":"src\/hotspot\/os_cpu\/linux_ppc\/javaThread_linux_ppc.cpp","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"}]}