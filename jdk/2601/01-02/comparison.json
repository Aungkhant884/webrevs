{"files":[{"patch":"@@ -28,0 +28,1 @@\n+import java.util.concurrent.CountDownLatch;\n@@ -56,2 +57,3 @@\n-        final Callable<Class<?>> task1 = new Task(\"jdk.net.ExtendedSocketOptions\");\n-        final Callable<Class<?>> task2 = new Task(\"sun.net.ext.ExtendedSocketOptions\");\n+        final CountDownLatch classLoadingTriggerLatch = new CountDownLatch(2);\n+        final Callable<Class<?>> task1 = new Task(\"jdk.net.ExtendedSocketOptions\", classLoadingTriggerLatch);\n+        final Callable<Class<?>> task2 = new Task(\"sun.net.ext.ExtendedSocketOptions\", classLoadingTriggerLatch);\n@@ -83,0 +85,1 @@\n+        private final CountDownLatch classLoadingTriggerLatch;\n@@ -84,1 +87,1 @@\n-        private Task(final String className) {\n+        private Task(final String className, final CountDownLatch classLoadingTriggerLatch) {\n@@ -86,0 +89,1 @@\n+            this.classLoadingTriggerLatch = classLoadingTriggerLatch;\n@@ -91,0 +95,4 @@\n+                \/\/ let the other task know we are ready to load the class\n+                classLoadingTriggerLatch.countDown();\n+                \/\/ wait for the other task to let us know it's ready too, to load the class\n+                classLoadingTriggerLatch.await();\n","filename":"test\/jdk\/sun\/net\/ext\/ExtendedSocketOptionsTest.java","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"}]}