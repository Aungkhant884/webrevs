{"files":[{"patch":"@@ -1829,1 +1829,0 @@\n-  assert_different_registers(dst, tmp);\n@@ -1831,1 +1830,1 @@\n-  mv(t0, length_in_bytes);\n+  mv(t0, (length_in_bytes \/ type2aelembytes(dst_bt)));\n","filename":"src\/hotspot\/cpu\/riscv\/c2_MacroAssembler_riscv.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2774,1 +2774,1 @@\n-  effect(TEMP_DEF dst,TEMP tmp);\n+  effect(TEMP_DEF dst, TEMP tmp);\n@@ -2787,1 +2787,1 @@\n-  effect(TEMP_DEF dst,TEMP tmp);\n+  effect(TEMP_DEF dst, TEMP tmp);\n@@ -2814,1 +2814,1 @@\n-  effect(TEMP_DEF dst,TEMP tmp);\n+  effect(TEMP_DEF dst, TEMP tmp);\n@@ -2830,0 +2830,1 @@\n+  effect(TEMP_DEF dst);\n@@ -2832,2 +2833,0 @@\n-    __ rvv_vsetvli(T_FLOAT, Matcher::vector_length_in_bytes(this, $src));\n-    __ vfcvt_x_f_v(as_VectorRegister($dst$$reg), as_VectorRegister($src$$reg));\n@@ -2835,3 +2834,6 @@\n-    if (bt == T_LONG) {\n-      __ vector_integer_extend(as_VectorRegister($dst$$reg), T_LONG,\n-                               Matcher::vector_length_in_bytes(this), as_VectorRegister($dst$$reg), T_INT);\n+    if (bt == T_INT) {\n+      __ rvv_vsetvli(T_FLOAT, Matcher::vector_length_in_bytes(this, $src));\n+      __ vfcvt_x_f_v(as_VectorRegister($dst$$reg), as_VectorRegister($src$$reg));\n+    } else {\n+      __ rvv_vsetvli(T_FLOAT, Matcher::vector_length_in_bytes(this, $src), Assembler::mf2);\n+      __ vfwcvt_x_f_v(as_VectorRegister($dst$$reg), as_VectorRegister($src$$reg));\n@@ -2862,1 +2864,1 @@\n-  effect(TEMP_DEF dst,TEMP tmp);\n+  effect(TEMP_DEF dst, TEMP tmp);\n@@ -2885,1 +2887,1 @@\n-instruct vcvtDtoF(vReg dst_src1, vReg tmp) %{\n+instruct vcvtDtoF(vReg dst, vReg src) %{\n@@ -2887,3 +2889,2 @@\n-  match(Set dst_src1 (VectorCastD2X dst_src1));\n-  effect(TEMP tmp);\n-  format %{ \"vcvtDtoF $dst_src1\" %}\n+  match(Set dst (VectorCastD2X src));\n+  format %{ \"vcvtDtoF $dst, $src\" %}\n@@ -2892,2 +2893,1 @@\n-    __ vfncvt_f_f_w(as_VectorRegister($tmp$$reg), as_VectorRegister($dst_src1$$reg));\n-    __ vmv1r_v(as_VectorRegister($dst_src1$$reg), as_VectorRegister($tmp$$reg));\n+    __ vfncvt_f_f_w(as_VectorRegister($dst$$reg), as_VectorRegister($src$$reg));\n","filename":"src\/hotspot\/cpu\/riscv\/riscv_v.ad","additions":15,"deletions":15,"binary":false,"changes":30,"status":"modified"}]}