{"files":[{"patch":"@@ -1237,1 +1237,0 @@\n-  INSN(vfcvt_rtz_xu_f_v, 0b1010111, 0b001, 0b00110, 0b010010);\n@@ -1246,1 +1245,0 @@\n-  INSN(vfwcvt_rtz_xu_f_v, 0b1010111, 0b001, 0b01110, 0b010010);\n@@ -1256,1 +1254,0 @@\n-  INSN(vfncvt_rtz_xu_f_w, 0b1010111, 0b001, 0b10110, 0b010010);\n","filename":"src\/hotspot\/cpu\/riscv\/assembler_riscv.hpp","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1823,1 +1823,1 @@\n-                                         VectorRegister src, BasicType src_bt, VectorRegister tmp) {\n+                                         VectorRegister src, BasicType src_bt) {\n@@ -1826,1 +1826,0 @@\n-  vmv1r_v(tmp, src);\n@@ -1833,1 +1832,1 @@\n-    vncvt_x_x_w(tmp, tmp);\n+    vncvt_x_x_w(dst, src);\n@@ -1836,1 +1835,1 @@\n-      vncvt_x_x_w(tmp, tmp);\n+      vncvt_x_x_w(dst, dst);\n@@ -1839,1 +1838,1 @@\n-        vncvt_x_x_w(tmp, tmp);\n+        vncvt_x_x_w(dst, dst);\n@@ -1845,1 +1844,1 @@\n-      vncvt_x_x_w(tmp, tmp);\n+      vncvt_x_x_w(dst, src);\n@@ -1848,1 +1847,1 @@\n-        vncvt_x_x_w(tmp, tmp);\n+        vncvt_x_x_w(dst, dst);\n@@ -1852,1 +1851,1 @@\n-    vncvt_x_x_w(tmp, tmp);\n+    vncvt_x_x_w(dst, src);\n@@ -1854,1 +1853,0 @@\n-  vmv_v_v(dst, tmp);\n@@ -1867,1 +1865,0 @@\n-VFCVT_SAFE(vfcvt_rtz_xu_f_v);\n@@ -1869,1 +1866,0 @@\n-VFCVT_SAFE(vfwcvt_rtz_xu_f_v);\n@@ -1871,1 +1867,0 @@\n-VFCVT_SAFE(vfncvt_rtz_xu_f_w);\n","filename":"src\/hotspot\/cpu\/riscv\/c2_MacroAssembler_riscv.cpp","additions":7,"deletions":12,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -237,1 +237,1 @@\n-                        VectorRegister src, BasicType src_bt, VectorRegister tmp);\n+                        VectorRegister src, BasicType src_bt);\n@@ -239,1 +239,0 @@\n-  void vfcvt_rtz_xu_f_v_safe(VectorRegister dst, VectorRegister src);\n@@ -241,1 +240,0 @@\n-  void vfwcvt_rtz_xu_f_v_safe(VectorRegister dst, VectorRegister src);\n@@ -243,1 +241,0 @@\n-  void vfncvt_rtz_xu_f_w_safe(VectorRegister dst, VectorRegister src);\n","filename":"src\/hotspot\/cpu\/riscv\/c2_MacroAssembler_riscv.hpp","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2645,1 +2645,1 @@\n-instruct vcvtStoB(vReg dst, vReg src, vReg tmp) %{\n+instruct vcvtStoB(vReg dst, vReg src) %{\n@@ -2648,2 +2648,1 @@\n-  effect(TEMP tmp);\n-  format %{ \"vcvtStoB $dst, $src\\t# KILL $tmp\" %}\n+  format %{ \"vcvtStoB $dst, $src\" %}\n@@ -2652,1 +2651,1 @@\n-                        as_VectorRegister($src$$reg), T_SHORT, as_VectorRegister($tmp$$reg));\n+                        as_VectorRegister($src$$reg), T_SHORT);\n@@ -2690,1 +2689,1 @@\n-instruct vcvtItoX_narrow(vReg dst, vReg src, vReg tmp) %{\n+instruct vcvtItoX_narrow(vReg dst, vReg src) %{\n@@ -2694,2 +2693,1 @@\n-  effect(TEMP tmp);\n-  format %{ \"vcvtItoX_narrow $dst, $src\\t# KILL $tmp\" %}\n+  format %{ \"vcvtItoX_narrow $dst, $src\" %}\n@@ -2699,1 +2697,1 @@\n-                        as_VectorRegister($src$$reg), T_INT, as_VectorRegister($tmp$$reg));\n+                        as_VectorRegister($src$$reg), T_INT);\n@@ -2743,1 +2741,1 @@\n-instruct vcvtLtoI(vReg dst, vReg src, vReg tmp) %{\n+instruct vcvtLtoI(vReg dst, vReg src) %{\n@@ -2748,2 +2746,1 @@\n-  effect(TEMP tmp);\n-  format %{ \"vcvtLtoI $dst, $src\\t# KILL $tmp\" %}\n+  format %{ \"vcvtLtoI $dst, $src\" %}\n@@ -2753,1 +2750,1 @@\n-                        as_VectorRegister($src$$reg), T_LONG, as_VectorRegister($tmp$$reg));\n+                        as_VectorRegister($src$$reg), T_LONG);\n@@ -2840,1 +2837,1 @@\n-instruct vcvtDtoX_narrow(vReg dst, vReg src, vReg tmp, vRegMask_V0 v0) %{\n+instruct vcvtDtoX_narrow(vReg dst, vReg src, vRegMask_V0 v0) %{\n@@ -2845,2 +2842,2 @@\n-  effect(TEMP_DEF dst, TEMP tmp, TEMP v0);\n-  format %{ \"vcvtDtoX_narrow $dst, $src\\t# KILL $tmp\" %}\n+  effect(TEMP_DEF dst, TEMP v0);\n+  format %{ \"vcvtDtoX_narrow $dst, $src\" %}\n@@ -2853,1 +2850,1 @@\n-                          as_VectorRegister($dst$$reg), T_INT, as_VectorRegister($tmp$$reg));\n+                          as_VectorRegister($dst$$reg), T_INT);\n@@ -2885,4 +2882,3 @@\n-instruct reinterpret(vReg dst) %{\n-  predicate(n->as_Vector()->length_in_bytes() ==\n-            n->in(1)->bottom_type()->is_vect()->length_in_bytes());  \/\/ src == dst\n-  match(Set dst (VectorReinterpret dst));\n+instruct reinterpret(vReg dst_src) %{\n+  predicate(Matcher::vector_length_in_bytes(n) == Matcher::vector_length_in_bytes(n->in(1)));\n+  match(Set dst_src (VectorReinterpret dst_src));\n@@ -2890,1 +2886,1 @@\n-  format %{ \"# reinterpret $dst\\t# do nothing\" %}\n+  format %{ \"# reinterpret $dst_src\\t# do nothing\" %}\n@@ -2898,2 +2894,1 @@\n-  predicate(n->as_Vector()->length_in_bytes() !=\n-            n->in(1)->bottom_type()->is_vect()->length_in_bytes());  \/\/ src != dst\n+  predicate(Matcher::vector_length_in_bytes(n) != Matcher::vector_length_in_bytes(n->in(1)));\n@@ -2910,1 +2905,0 @@\n-    \/\/ clear the dst register\n","filename":"src\/hotspot\/cpu\/riscv\/riscv_v.ad","additions":18,"deletions":24,"binary":false,"changes":42,"status":"modified"}]}