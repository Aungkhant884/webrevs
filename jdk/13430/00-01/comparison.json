{"files":[{"patch":"@@ -3157,7 +3157,0 @@\n-        \/\/ parse as a Registry-based authority if not insisting\n-        \/\/ upon a server-based authority\n-        private boolean parseRegistryChars()\n-        {\n-            return requireServerAuthority?false:true;\n-        }\n-\n@@ -3286,0 +3279,1 @@\n+            boolean skipParseException;\n@@ -3301,0 +3295,4 @@\n+            \/\/ When parsing a URI, skip creating exception objects if the server-based\n+            \/\/ authority is not required and the registry parse is successful.\n+            \/\/\n+            skipParseException = (!requireServerAuthority && regChars);\n@@ -3306,4 +3304,12 @@\n-                    q = parseServer(p, n);\n-                    if (q < n)\n-                        failExpecting(\"end of authority\", q);\n-                    authority = input.substring(p, n);\n+                    q = parseServer(p, n, skipParseException);\n+                    if (q < n) {\n+                        if(skipParseException) {\n+                            userInfo = null;\n+                            host = null;\n+                            port = -1;\n+                            q = p;\n+                        } else\n+                            failExpecting(\"end of authority\", q);\n+                    } else\n+                        authority = input.substring(p, n);\n+\n@@ -3347,1 +3353,1 @@\n-        private int parseServer(int start, int n)\n+        private int parseServer(int start, int n, boolean skipParseException)\n@@ -3387,1 +3393,1 @@\n-                    q = parseHostname(p, n);\n+                    q = parseHostname(p, n, skipParseException);\n@@ -3404,0 +3410,2 @@\n+            } else if(skipParseException) {\n+                    return p;\n@@ -3405,0 +3413,1 @@\n+\n@@ -3507,1 +3516,1 @@\n-        private int parseHostname(int start, int n)\n+        private int parseHostname(int start, int n, boolean skipParseException)\n@@ -3533,1 +3542,1 @@\n-            if(parseRegistryChars())\n+            if ((p < n) && !at(p, n, ':'))\n@@ -3535,1 +3544,1 @@\n-                while(p < n &&  !at(p, n, ':'))\n+                if(skipParseException)\n@@ -3537,2 +3546,1 @@\n-                    q = scan(p, p+1, L_REG_NAME, H_REG_NAME);\n-                    p = q;\n+                    return p;\n@@ -3540,3 +3548,0 @@\n-            }\n-\n-            if ((p < n) && !at(p, n, ':'))\n@@ -3544,1 +3549,1 @@\n-\n+            }\n","filename":"src\/java.base\/share\/classes\/java\/net\/URI.java","additions":27,"deletions":22,"binary":false,"changes":49,"status":"modified"}]}