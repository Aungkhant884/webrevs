{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -165,1 +165,7 @@\n-    while (pop_object(obj)) {\n+    while (_oop_stack.pop_overflow(obj)) {\n+      if (!_oop_stack.try_push_to_taskqueue(obj)) {\n+        assert(_bitmap->is_marked(obj), \"must be marked\");\n+        follow_object(obj);\n+      }\n+    }\n+    while (_oop_stack.pop_local(obj)) {\n@@ -169,1 +175,3 @@\n-    \/\/ Process ObjArrays one at a time to avoid marking stack bloat.\n+    \/\/ Process ObjArrays one at a time to avoid marking stack bloat, but it is\n+    \/\/ fine to try to move work from the overflow queue to the shared queue as\n+    \/\/ quickly as possible.\n@@ -171,1 +179,7 @@\n-    if (pop_objarray(task)) {\n+    while (_objarray_stack.pop_overflow(task)) {\n+      if (!_objarray_stack.try_push_to_taskqueue(task)) {\n+        follow_array_chunk(objArrayOop(task.obj()), task.index());\n+        break;\n+      }\n+    }\n+    if (_objarray_stack.pop_local(task)) {\n@@ -175,0 +189,1 @@\n+  return;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1FullGCMarker.inline.hpp","additions":19,"deletions":4,"binary":false,"changes":23,"status":"modified"}]}