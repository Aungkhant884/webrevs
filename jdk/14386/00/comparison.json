{"files":[{"patch":"@@ -32,0 +32,1 @@\n+import java.util.concurrent.atomic.AtomicReference;\n@@ -42,1 +43,1 @@\n-        private T strongReferent;\n+        private final AtomicReference<T> strongReferent;\n@@ -47,1 +48,1 @@\n-            this.strongReferent = referent;\n+            this.strongReferent = new AtomicReference<T>(referent);\n@@ -54,6 +55,2 @@\n-        T getStrong() {\n-            return strongReferent;\n-        }\n-\n-        void clearStrong() {\n-            strongReferent = null;\n+        T getAndClearStrong() {\n+            return strongReferent.getAndSet(null);\n@@ -90,1 +87,1 @@\n-            T strongVal = ref.getStrong();\n+            T strongVal = ref.getAndClearStrong();\n@@ -92,1 +89,0 @@\n-                ref.clearStrong();\n","filename":"src\/java.base\/share\/classes\/java\/io\/ClassCache.java","additions":6,"deletions":10,"binary":false,"changes":16,"status":"modified"}]}