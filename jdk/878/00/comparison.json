{"files":[{"patch":"@@ -4742,13 +4742,10 @@\n-        if (reorder.length == oldType.parameterCount()) {\n-            int limit = newType.parameterCount();\n-            boolean bad = false;\n-            for (int j = 0; j < reorder.length; j++) {\n-                int i = reorder[j];\n-                if (i < 0 || i >= limit) {\n-                    bad = true; break;\n-                }\n-                Class<?> src = newType.parameterType(i);\n-                Class<?> dst = oldType.parameterType(j);\n-                if (src != dst)\n-                    throw newIllegalArgumentException(\"parameter types do not match after reorder\",\n-                            oldType, newType);\n+        if (reorder.length != oldType.parameterCount())\n+            throw newIllegalArgumentException(\"old type parameter count and reorder array length do not match\",\n+                    oldType, Arrays.toString(reorder));\n+\n+        int limit = newType.parameterCount();\n+        for (int j = 0; j < reorder.length; j++) {\n+            int i = reorder[j];\n+            if (i < 0 || i >= limit) {\n+                throw newIllegalArgumentException(\"index is out of bounds for new type\",\n+                        i, newType);\n@@ -4756,1 +4753,5 @@\n-            if (!bad)  return true;\n+            Class<?> src = newType.parameterType(i);\n+            Class<?> dst = oldType.parameterType(j);\n+            if (src != dst)\n+                throw newIllegalArgumentException(\"parameter types do not match after reorder\",\n+                        oldType, newType);\n@@ -4758,1 +4759,1 @@\n-        throw newIllegalArgumentException(\"bad reorder array: \"+Arrays.toString(reorder));\n+        return true;\n","filename":"src\/java.base\/share\/classes\/java\/lang\/invoke\/MethodHandles.java","additions":16,"deletions":15,"binary":false,"changes":31,"status":"modified"}]}