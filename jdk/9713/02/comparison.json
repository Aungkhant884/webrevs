{"files":[{"patch":"@@ -208,0 +208,6 @@\n+nmethodBucket* DependencyContext::release_and_get_next_not_unloading(nmethodBucket* b) {\n+  nmethodBucket* next = b->next_not_unloading();\n+  release(b);\n+  return next;\n+ }\n+\n@@ -210,1 +216,7 @@\n-int DependencyContext::remove_all_dependents() {\n+void DependencyContext::remove_all_dependents() {\n+  nmethodBucket* b = dependencies_not_unloading();\n+  set_dependencies(NULL);\n+  assert(b == nullptr, \"All dependents should be unloading\");\n+}\n+\n+int DependencyContext::remove_and_mark_for_deoptimization_all_dependents() {\n@@ -221,1 +233,1 @@\n-    nmethodBucket* next = b->next_not_unloading();\n+    b = release_and_get_next_not_unloading(b);\n@@ -223,2 +235,0 @@\n-    release(b);\n-    b = next;\n@@ -230,1 +240,1 @@\n-}\n+ }\n","filename":"src\/hotspot\/share\/code\/dependencyContext.cpp","additions":15,"deletions":5,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -123,1 +123,2 @@\n-  int  remove_all_dependents();\n+  void remove_all_dependents();\n+  int  remove_and_mark_for_deoptimization_all_dependents();\n@@ -125,0 +126,1 @@\n+  static nmethodBucket* release_and_get_next_not_unloading(nmethodBucket* b);\n","filename":"src\/hotspot\/share\/code\/dependencyContext.hpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1498,1 +1498,1 @@\n-      marked = deps.remove_all_dependents();\n+      marked = deps.remove_and_mark_for_deoptimization_all_dependents();\n","filename":"src\/hotspot\/share\/prims\/methodHandles.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}