{"files":[{"patch":"@@ -281,0 +281,19 @@\n+    \/\/\n+    \/\/ Use getChars() to load chars directly into the heap buffer array.\n+    \/\/ This improves performance versus converting the StringBuilder to a\n+    \/\/ String and then appending the String as StringBuilder::toString\n+    \/\/ allocates memory for and copies all the contained chars\n+    \/\/\n+    private $Type$Buffer append(StringBuilder strbld, int start, int end) {\n+        checkSession();\n+\n+        int length = end - start;\n+        int pos = position();\n+        if (length > limit() - pos)\n+            throw new BufferOverflowException();\n+\n+        strbld.getChars(start, end, hb, ix(pos));\n+        position(pos + length);\n+        return this;\n+    }\n+\n@@ -283,1 +302,4 @@\n-        return append(csq, 0, csq.length());\n+        if (csq instanceof StringBuilder strbld)\n+            return append(strbld, 0, strbld.length());\n+\n+        return super.append(csq);\n@@ -291,23 +313,2 @@\n-        checkSession();\n-\n-        if (csq == null)\n-            csq = \"null\";\n-\n-        int length = end - start;\n-        int pos = position();\n-        if (length > limit() - pos)\n-            throw new BufferOverflowException();\n-\n-        if (csq instanceof String str) {\n-            str.getChars(start, end, hb, ix(pos));\n-            position(pos + length);\n-            return this;\n-        } else if (csq instanceof StringBuffer strbuf) {\n-            strbuf.getChars(start, end, hb, ix(pos));\n-            position(pos + length);\n-            return this;\n-        } else if (csq instanceof StringBuilder strbld) {\n-            strbld.getChars(start, end, hb, ix(pos));\n-            position(pos + length);\n-            return this;\n-        }\n+        if (csq instanceof StringBuilder strbld)\n+            return append(strbld, start, end);\n","filename":"src\/java.base\/share\/classes\/java\/nio\/Heap-X-Buffer.java.template","additions":25,"deletions":24,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -2008,0 +2008,2 @@\n+        else if (csq instanceof CharBuffer cb)\n+            return put(cb);\n@@ -2046,0 +2048,7 @@\n+        if (csq instanceof CharBuffer cb) {\n+            int pos = position();\n+            int length = end - start;\n+            put(pos, cb, start, length);\n+            position(pos + length);\n+            return this;\n+        }\n","filename":"src\/java.base\/share\/classes\/java\/nio\/X-Buffer.java.template","additions":9,"deletions":0,"binary":false,"changes":9,"status":"modified"}]}