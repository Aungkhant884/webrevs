{"files":[{"patch":"@@ -472,1 +472,1 @@\n-  _rewrite(\"-rewrite\", \"If specified and the dump file exists, the file will be rewritten\",\n+  _rewrite(\"-rewrite\", \"If specified, the dump file will be rewritten if it exists\",\n","filename":"src\/hotspot\/share\/services\/diagnosticCommand.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -53,1 +53,1 @@\n-    public void run(CommandExecutor executor) throws IOException {\n+    public void run(CommandExecutor executor, boolean rewrite) throws IOException {\n@@ -55,1 +55,1 @@\n-        if (dump.exists()) {\n+        if (!rewrite && dump.exists()) {\n@@ -57,0 +57,2 @@\n+        } else if (rewrite) {\n+            dump.createNewFile();\n@@ -59,1 +61,1 @@\n-        String cmd = \"GC.heap_dump \" + heapDumpArgs + \" \" + dump.getAbsolutePath();\n+        String cmd = \"GC.heap_dump \" + (rewrite ? \"-rewrite \" : \"\") + heapDumpArgs + \" \" + dump.getAbsolutePath();\n@@ -88,1 +90,6 @@\n-        run(new PidJcmdExecutor());\n+        run(new PidJcmdExecutor(), false);\n+    }\n+\n+    @Test\n+    public void pidRewrite() throws IOException {\n+        run(new PidJcmdExecutor(), true);\n","filename":"test\/hotspot\/jtreg\/serviceability\/dcmd\/gc\/HeapDumpTest.java","additions":11,"deletions":4,"binary":false,"changes":15,"status":"modified"}]}