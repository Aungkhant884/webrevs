{"files":[{"patch":"@@ -242,0 +242,24 @@\n+        static Map<String, Integer> maxSizeMap = new LinkedHashMap<>();\n+\n+        static {\n+            maxSizeMap.put(\"const PackageEntry*\", 9);\n+            maxSizeMap.put(\"const Klass*\", 9);\n+            maxSizeMap.put(\"const ModuleEntry*\", 9);\n+            maxSizeMap.put(\"const ClassLoaderData*\", 9);\n+            maxSizeMap.put(\"const Method*\", 9);\n+            maxSizeMap.put(\"u8\", 9);\n+            maxSizeMap.put(\"Tickspan\", 9);\n+            maxSizeMap.put(\"Ticks\", 9);\n+            maxSizeMap.put(\"unsigned\", 5);\n+            maxSizeMap.put(\"u2\", 3);\n+            maxSizeMap.put(\"u1\", 2);\n+            maxSizeMap.put(\"s8\", 9);\n+            maxSizeMap.put(\"s4\", 5);\n+            maxSizeMap.put(\"s2\", 3);\n+            maxSizeMap.put(\"s1\", 2);\n+            maxSizeMap.put(\"double\", 9);\n+            maxSizeMap.put(\"float\", 5);\n+            maxSizeMap.put(\"bool\", 1);\n+            maxSizeMap.put(\"char\", 2);\n+        }\n+\n@@ -412,11 +436,3 @@\n-                    if (type.equals(\"u8\") || type.equals(\"double\") || type.equals(\"s8\") || type.equals(\"Ticks\")\n-                        || type.equals(\"Tickspan\") || type.endsWith(\"*\")) {\n-                        te.maxSize += 9;\n-                    } else if (type.equals(\"float\") || type.equals(\"s4\") || type.equals(\"unsigned\")) {\n-                        te.maxSize += 5;\n-                    } else if (type.equals(\"char\") || type.equals(\"s1\") || type.equals(\"u1\")) {\n-                        te.maxSize += 2;\n-                    } else if (type.equals(\"bool\")) {\n-                        te.maxSize += 1;\n-                    } else {\n-                        te.maxSize += 9;\n+                    Integer maxSize = maxSizeMap.get(type);\n+                    if (maxSize == null) {\n+                        throw new RuntimeException(\"Unknown max size for type: \" + type);\n@@ -424,0 +440,1 @@\n+                    te.maxSize += maxSize;\n","filename":"make\/src\/classes\/build\/tools\/jfr\/GenerateJfrFiles.java","additions":28,"deletions":11,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -65,0 +65,1 @@\n+\n","filename":"src\/hotspot\/share\/jfr\/utilities\/jfrTypes.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}