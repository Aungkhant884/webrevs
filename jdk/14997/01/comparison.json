{"files":[{"patch":"@@ -93,1 +93,1 @@\n-     * @implSpec the default implementation for this method copies the contents of the provided Java string\n+     * @implSpec The default implementation for this method copies the contents of the provided Java string\n@@ -96,1 +96,1 @@\n-     * @return a new native segment containing the converted C string.\n+     * @return a new segment containing the converted C string.\n@@ -104,2 +104,7 @@\n-     * Allocates a memory segment with the given layout and initializes it with the given byte value.\n-     * @implSpec the default implementation for this method calls {@code this.allocate(layout)}.\n+     * {@return a newly allocated memory segment with a {@linkplain MemorySegment#byteSize() byteSize()} of 1\n+     * initialized with the provided byte {@code value}}.\n+     *\n+     * @implSpec The default implementation of this method first calls {@code this.allocate(layout)} to\n+     * allocate a segment after which the provided {@code value} is written into the segment using the\n+     * byte ordering specified by the provided {@code layout}.\n+     *\n@@ -107,2 +112,1 @@\n-     * @param value the value to be set on the newly allocated memory block.\n-     * @return a segment for the newly allocated memory block.\n+     * @param value  the value to be set in the newly allocated memory segment.\n@@ -113,3 +117,3 @@\n-        MemorySegment addr = allocate(layout);\n-        handle.set(addr, value);\n-        return addr;\n+        MemorySegment seg = allocate(layout);\n+        handle.set(seg, value);\n+        return seg;\n@@ -119,2 +123,8 @@\n-     * Allocates a memory segment with the given layout and initializes it with the given char value.\n-     * @implSpec the default implementation for this method calls {@code this.allocate(layout)}.\n+     * {@return a newly allocated memory segment with a {@linkplain MemorySegment#byteSize() byteSize()} of 2\n+     * initialized with the provided char {@code value} using the byte order of the provided\n+     * {@linkplain ValueLayout#order() layout.order()}}\n+     *\n+     * @implSpec The default implementation of this method first calls {@code this.allocate(layout)} to\n+     * allocate a segment after which the provided {@code value} is written into the segment using the\n+     * byte ordering specified by the provided {@code layout}.\n+     *\n@@ -122,2 +132,1 @@\n-     * @param value the value to be set on the newly allocated memory block.\n-     * @return a segment for the newly allocated memory block.\n+     * @param value  the value to be set in the newly allocated memory segment.\n@@ -128,3 +137,3 @@\n-        MemorySegment addr = allocate(layout);\n-        handle.set(addr, value);\n-        return addr;\n+        MemorySegment seg = allocate(layout);\n+        handle.set(seg, value);\n+        return seg;\n@@ -134,2 +143,8 @@\n-     * Allocates a memory segment with the given layout and initializes it with the given short value.\n-     * @implSpec the default implementation for this method calls {@code this.allocate(layout)}.\n+     * {@return a newly allocated memory segment with a {@linkplain MemorySegment#byteSize() byteSize()} of 2\n+     * initialized with the provided short {@code value} using the byte order of the provided\n+     * {@linkplain ValueLayout#order() layout.order()}}\n+     *\n+     * @implSpec The default implementation of this method first calls {@code this.allocate(layout)} to\n+     * allocate a segment after which the provided {@code value} is written into the segment using the\n+     * byte ordering specified by the provided {@code layout}.\n+     *\n@@ -137,2 +152,1 @@\n-     * @param value the value to be set on the newly allocated memory block.\n-     * @return a segment for the newly allocated memory block.\n+     * @param value  the value to be set in the newly allocated memory segment.\n@@ -143,3 +157,3 @@\n-        MemorySegment addr = allocate(layout);\n-        handle.set(addr, value);\n-        return addr;\n+        MemorySegment seg = allocate(layout);\n+        handle.set(seg, value);\n+        return seg;\n@@ -149,2 +163,8 @@\n-     * Allocates a memory segment with the given layout and initializes it with the given int value.\n-     * @implSpec the default implementation for this method calls {@code this.allocate(layout)}.\n+     * {@return a newly allocated memory segment with a {@linkplain MemorySegment#byteSize() byteSize()} of 4\n+     * initialized with the provided int {@code value} using the byte order of the provided\n+     * {@linkplain ValueLayout#order() layout.order()}}\n+     *\n+     * @implSpec The default implementation of this method first calls {@code this.allocate(layout)} to\n+     * allocate a segment after which the provided {@code value} is written into the segment using the\n+     * byte ordering specified by the provided {@code layout}.\n+     *\n@@ -152,2 +172,1 @@\n-     * @param value the value to be set on the newly allocated memory block.\n-     * @return a segment for the newly allocated memory block.\n+     * @param value  the value to be set in the newly allocated memory segment.\n@@ -158,3 +177,3 @@\n-        MemorySegment addr = allocate(layout);\n-        handle.set(addr, value);\n-        return addr;\n+        MemorySegment seg = allocate(layout);\n+        handle.set(seg, value);\n+        return seg;\n@@ -164,2 +183,8 @@\n-     * Allocates a memory segment with the given layout and initializes it with the given float value.\n-     * @implSpec the default implementation for this method calls {@code this.allocate(layout)}.\n+     * {@return a newly allocated memory segment with a {@linkplain MemorySegment#byteSize() byteSize()} of 4\n+     * initialized with the provided float {@code value} using the byte order of the provided\n+     * {@linkplain ValueLayout#order() layout.order()}}\n+     *\n+     * @implSpec The default implementation of this method first calls {@code this.allocate(layout)} to\n+     * allocate a segment after which the provided {@code value} is written into the segment using the\n+     * byte ordering specified by the provided {@code layout}.\n+     *\n@@ -167,2 +192,1 @@\n-     * @param value the value to be set on the newly allocated memory block.\n-     * @return a segment for the newly allocated memory block.\n+     * @param value  the value to be set in the newly allocated memory segment.\n@@ -173,3 +197,3 @@\n-        MemorySegment addr = allocate(layout);\n-        handle.set(addr, value);\n-        return addr;\n+        MemorySegment seg = allocate(layout);\n+        handle.set(seg, value);\n+        return seg;\n@@ -179,2 +203,8 @@\n-     * Allocates a memory segment with the given layout and initializes it with the given long value.\n-     * @implSpec the default implementation for this method calls {@code this.allocate(layout)}.\n+     * {@return a newly allocated memory segment with a {@linkplain MemorySegment#byteSize() byteSize()} of 8\n+     * initialized with the provided long {@code value} using the byte order of the provided\n+     * {@linkplain ValueLayout#order() layout.order()}}\n+     *\n+     * @implSpec The default implementation of this method first calls {@code this.allocate(layout)} to\n+     * allocate a segment after which the provided {@code value} is written into the segment using the\n+     * byte ordering specified by the provided {@code layout}.\n+     *\n@@ -182,2 +212,1 @@\n-     * @param value the value to be set on the newly allocated memory block.\n-     * @return a segment for the newly allocated memory block.\n+     * @param value  the value to be set in the newly allocated memory segment.\n@@ -188,3 +217,3 @@\n-        MemorySegment addr = allocate(layout);\n-        handle.set(addr, value);\n-        return addr;\n+        MemorySegment seg = allocate(layout);\n+        handle.set(seg, value);\n+        return seg;\n@@ -194,2 +223,8 @@\n-     * Allocates a memory segment with the given layout and initializes it with the given double value.\n-     * @implSpec the default implementation for this method calls {@code this.allocate(layout)}.\n+     * {@return a newly allocated memory segment with a {@linkplain MemorySegment#byteSize() byteSize()} of 4\n+     * initialized with the provided double {@code value} using the byte order of the provided\n+     * {@linkplain ValueLayout#order() layout.order()}}\n+     *\n+     * @implSpec The default implementation of this method first calls {@code this.allocate(layout)} to\n+     * allocate a segment after which the provided {@code value} is written into the segment using the\n+     * byte ordering specified by the provided {@code layout}.\n+     *\n@@ -197,2 +232,1 @@\n-     * @param value the value to be set on the newly allocated memory block.\n-     * @return a segment for the newly allocated memory block.\n+     * @param value  the value to be set in the newly allocated memory segment.\n@@ -203,3 +237,3 @@\n-        MemorySegment addr = allocate(layout);\n-        handle.set(addr, value);\n-        return addr;\n+        MemorySegment seg = allocate(layout);\n+        handle.set(seg, value);\n+        return seg;\n@@ -209,1 +243,4 @@\n-     * Allocates a memory segment with the given layout and initializes it with the given address value.\n+     * {@return a newly allocated memory segment with a {@linkplain MemorySegment#byteSize() byteSize()} as specified by the\n+     * provided {@linkplain AddressLayout#byteSize() layout.byteSize()} initialized with the provided address {@code value}\n+     * using the byte order of the provided {@link ValueLayout#order() layout.order()}}\n+     * <p>\n@@ -211,1 +248,5 @@\n-     * @implSpec the default implementation for this method calls {@code this.allocate(layout)}.\n+     *\n+     * @implSpec The default implementation of this method first calls {@code this.allocate(layout)} to\n+     * allocate a segment after which the provided {@code value} is written into the segment using the\n+     * byte ordering specified by the provided {@code layout}.\n+     *\n@@ -213,2 +254,1 @@\n-     * @param value the value to be set on the newly allocated memory block.\n-     * @return a segment for the newly allocated memory block.\n+     * @param value  the value to be set in the newly allocated memory segment.\n@@ -219,3 +259,3 @@\n-        MemorySegment segment = allocate(layout);\n-        layout.varHandle().set(segment, value);\n-        return segment;\n+        MemorySegment seg = allocate(layout);\n+        layout.varHandle().set(seg, value);\n+        return seg;\n@@ -225,2 +265,7 @@\n-     * Allocates a memory segment with the given layout and initializes it with the given byte elements.\n-     * @implSpec the default implementation for this method calls {@code this.allocateArray(layout, array.length)}.\n+     * {@return a newly allocated memory segment with a {@linkplain MemorySegment#byteSize() byteSize()} of\n+     * {@code E} initialized with the provided {@code E} byte {@code elements}}\n+     *\n+     * @implSpec The default implementation of this method first calls {@code this.allocateArray(layout, array.length)}\n+     * to allocate a segment after which the provided {@code elements} are written into the segment using the\n+     * byte ordering specified by the provided {@code layout}.\n+     *\n@@ -228,2 +273,1 @@\n-     * @param elements the byte elements to be copied to the newly allocated memory block.\n-     * @return a segment for the newly allocated memory block.\n+     * @param elements      the short elements to be copied to the newly allocated memory block.\n@@ -236,2 +280,8 @@\n-     * Allocates a memory segment with the given layout and initializes it with the given short elements.\n-     * @implSpec the default implementation for this method calls {@code this.allocateArray(layout, array.length)}.\n+     * {@return a newly allocated memory segment with a {@linkplain MemorySegment#byteSize() byteSize()} of\n+     * {@code E*2} initialized with the provided {@code E} short {@code elements} using the byte order of\n+     * the provided {@linkplain ValueLayout#order() layout.order()}}\n+     *\n+     * @implSpec The default implementation of this method first calls {@code this.allocateArray(layout, array.length)}\n+     * to allocate a segment after which the provided {@code elements} are written into the segment using the\n+     * byte ordering specified by the provided {@code layout}.\n+     *\n@@ -239,2 +289,1 @@\n-     * @param elements the short elements to be copied to the newly allocated memory block.\n-     * @return a segment for the newly allocated memory block.\n+     * @param elements      the short elements to be copied to the newly allocated memory block.\n@@ -247,2 +296,8 @@\n-     * Allocates a memory segment with the given layout and initializes it with the given char elements.\n-     * @implSpec the default implementation for this method calls {@code this.allocateArray(layout, array.length)}.\n+     * {@return a newly allocated memory segment with a {@linkplain MemorySegment#byteSize() byteSize()} of\n+     * {@code E*2} initialized with the provided {@code E} char {@code elements} using the byte order of\n+     * the provided {@linkplain ValueLayout#order() layout.order()}}\n+     *\n+     * @implSpec The default implementation of this method first calls {@code this.allocateArray(layout, array.length)}\n+     * to allocate a segment after which the provided {@code elements} are written into the segment using the\n+     * byte ordering specified by the provided {@code layout}.\n+     *\n@@ -250,2 +305,1 @@\n-     * @param elements the char elements to be copied to the newly allocated memory block.\n-     * @return a segment for the newly allocated memory block.\n+     * @param elements      the short elements to be copied to the newly allocated memory block.\n@@ -258,2 +312,8 @@\n-     * Allocates a memory segment with the given layout and initializes it with the given int elements.\n-     * @implSpec the default implementation for this method calls {@code this.allocateArray(layout, array.length)}.\n+     * {@return a newly allocated memory segment with a {@linkplain MemorySegment#byteSize() byteSize()} of\n+     * {@code E*4} initialized with the provided {@code E} int {@code elements} using the byte order of\n+     * the provided {@linkplain ValueLayout#order() layout.order()}}\n+     *\n+     * @implSpec The default implementation of this method first calls {@code this.allocateArray(layout, array.length)}\n+     * to allocate a segment after which the provided {@code elements} are written into the segment using the\n+     * byte ordering specified by the provided {@code layout}.\n+     *\n@@ -261,2 +321,1 @@\n-     * @param elements the int elements to be copied to the newly allocated memory block.\n-     * @return a segment for the newly allocated memory block.\n+     * @param elements      the short elements to be copied to the newly allocated memory block.\n@@ -269,2 +328,8 @@\n-     * Allocates a memory segment with the given layout and initializes it with the given float elements.\n-     * @implSpec the default implementation for this method calls {@code this.allocateArray(layout, array.length)}.\n+     * {@return a newly allocated memory segment with a {@linkplain MemorySegment#byteSize() byteSize()} of\n+     * {@code E*4} initialized with the provided {@code E} float {@code elements} using the byte order of\n+     * the provided {@linkplain ValueLayout#order() layout.order()}}\n+     *\n+     * @implSpec The default implementation of this method first calls {@code this.allocateArray(layout, array.length)}\n+     * to allocate a segment after which the provided {@code elements} are written into the segment using the\n+     * byte ordering specified by the provided {@code layout}.\n+     *\n@@ -272,2 +337,1 @@\n-     * @param elements the float elements to be copied to the newly allocated memory block.\n-     * @return a segment for the newly allocated memory block.\n+     * @param elements      the short elements to be copied to the newly allocated memory block.\n@@ -280,2 +344,8 @@\n-     * Allocates a memory segment with the given layout and initializes it with the given long elements.\n-     * @implSpec the default implementation for this method calls {@code this.allocateArray(layout, array.length)}.\n+     * {@return a newly allocated memory segment with a {@linkplain MemorySegment#byteSize() byteSize()} of\n+     * {@code E*8} initialized with the provided {@code E} long {@code elements} using the byte order of\n+     * the provided {@linkplain ValueLayout#order() layout.order()}}\n+     *\n+     * @implSpec The default implementation of this method first calls {@code this.allocateArray(layout, array.length)}\n+     * to allocate a segment after which the provided {@code elements} are written into the segment using the\n+     * byte ordering specified by the provided {@code layout}.\n+     *\n@@ -283,2 +353,1 @@\n-     * @param elements the long elements to be copied to the newly allocated memory block.\n-     * @return a segment for the newly allocated memory block.\n+     * @param elements      the short elements to be copied to the newly allocated memory block.\n@@ -291,2 +360,8 @@\n-     * Allocates a memory segment with the given layout and initializes it with the given double elements.\n-     * @implSpec the default implementation for this method calls {@code this.allocateArray(layout, array.length)}.\n+     * {@return a newly allocated memory segment with a {@linkplain MemorySegment#byteSize() byteSize()} of\n+     * {@code E*8} initialized with the provided {@code E} short {@code elements} using the byte order of\n+     * the provided {@linkplain ValueLayout#order() layout.order()}}\n+     *\n+     * @implSpec The default implementation of this method first calls {@code this.allocateArray(layout, array.length)}\n+     * to allocate a segment after which the provided {@code elements} are written into the segment using the\n+     * byte ordering specified by the provided {@code layout}.\n+     *\n@@ -294,2 +369,1 @@\n-     * @param elements the double elements to be copied to the newly allocated memory block.\n-     * @return a segment for the newly allocated memory block.\n+     * @param elements      the short elements to be copied to the newly allocated memory block.\n@@ -304,1 +378,1 @@\n-        MemorySegment addr = allocateArray(Objects.requireNonNull(elementLayout), size);\n+        MemorySegment seg = allocateArray(Objects.requireNonNull(elementLayout), size);\n@@ -307,1 +381,1 @@\n-                    addr, elementLayout.withOrder(ByteOrder.nativeOrder()), 0, size);\n+                    seg, elementLayout.withOrder(ByteOrder.nativeOrder()), 0, size);\n@@ -309,1 +383,1 @@\n-        return addr;\n+        return seg;\n@@ -314,1 +388,3 @@\n-     * @implSpec the default implementation for this method calls {@code this.allocate(layout.byteSize(), layout.byteAlignment())}.\n+     *\n+     * @implSpec The default implementation for this method calls {@code this.allocate(layout.byteSize(), layout.byteAlignment())}.\n+     *\n@@ -325,1 +401,3 @@\n-     * @implSpec the default implementation for this method calls {@code this.allocate(MemoryLayout.sequenceLayout(count, elementLayout))}.\n+     *\n+     * @implSpec The default implementation for this method calls {@code this.allocate(MemoryLayout.sequenceLayout(count, elementLayout))}.\n+     *\n@@ -342,1 +420,3 @@\n-     * @implSpec the default implementation for this method calls {@code this.allocate(byteSize, 1)}.\n+     *\n+     * @implSpec The default implementation for this method calls {@code this.allocate(byteSize, 1)}.\n+     *\n@@ -353,0 +433,1 @@\n+     *\n@@ -368,0 +449,1 @@\n+     *\n","filename":"src\/java.base\/share\/classes\/java\/lang\/foreign\/SegmentAllocator.java","additions":174,"deletions":92,"binary":false,"changes":266,"status":"modified"}]}