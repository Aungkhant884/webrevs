{"files":[{"patch":"@@ -263,6 +263,6 @@\n-    BasicType bt = src->get_ptr_type()->isa_aryptr()->elem()->array_element_basic_type();\n-    if (is_reference_type(bt)) {\n-      \/\/ Clone object array\n-      bt = T_OBJECT;\n-    } else {\n-      \/\/ Clone primitive array\n+    const TypeAryPtr* ary_ptr = src->get_ptr_type()->isa_aryptr();\n+    BasicType bt;\n+    if (ary_ptr == NULL) {\n+      \/\/ ary_ptr can be null iff we are running with StressReflectiveCode\n+      \/\/ This code will be unreachable\n+      assert(StressReflectiveCode, \"Guard against surprises\");\n@@ -270,0 +270,9 @@\n+    } else {\n+      bt = ary_ptr->elem()->array_element_basic_type();\n+      if (is_reference_type(bt)) {\n+        \/\/ Clone object array\n+        bt = T_OBJECT;\n+      } else {\n+        \/\/ Clone primitive array\n+        bt = T_LONG;\n+      }\n@@ -271,0 +280,1 @@\n+\n@@ -294,2 +304,1 @@\n-\n-\n+  \n","filename":"src\/hotspot\/share\/gc\/z\/c2\/zBarrierSetC2.cpp","additions":17,"deletions":8,"binary":false,"changes":25,"status":"modified"}]}