{"files":[{"patch":"@@ -582,1 +582,1 @@\n-        putStringAt(count, str);\n+        putStringAt(count, str, len);\n@@ -606,3 +606,1 @@\n-        if (getCoder() != asb.getCoder()) {\n-            inflate();\n-        }\n+        inflateIfNeededFor(asb);\n@@ -1005,1 +1003,1 @@\n-        putStringAt(start, str);\n+        putStringAt(start, str, len);\n@@ -1177,1 +1175,1 @@\n-        putStringAt(offset, str);\n+        putStringAt(offset, str, len);\n@@ -1715,2 +1713,8 @@\n-    private void putStringAt(int index, String str, int off, int end) {\n-        if (getCoder() != str.coder()) {\n+    private void inflateIfNeededFor(String input) {\n+        if (COMPACT_STRINGS && (coder != input.coder())) {\n+            inflate();\n+        }\n+    }\n+\n+    private void inflateIfNeededFor(AbstractStringBuilder input) {\n+        if (COMPACT_STRINGS && (coder != input.getCoder())) {\n@@ -1719,0 +1723,4 @@\n+    }\n+\n+    private void putStringAt(int index, String str, int off, int end) {\n+        inflateIfNeededFor(str);\n@@ -1722,2 +1730,3 @@\n-    private void putStringAt(int index, String str) {\n-        putStringAt(index, str, 0, str.length());\n+    private void putStringAt(int index, String str, int len) {\n+        inflateIfNeededFor(str);\n+        str.getBytes(value, 0, index, coder, len);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/AbstractStringBuilder.java","additions":19,"deletions":10,"binary":false,"changes":29,"status":"modified"}]}