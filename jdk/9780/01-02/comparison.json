{"files":[{"patch":"@@ -2,1 +2,1 @@\n-<WixLocalization Culture=\"de\" xmlns=\"http:\/\/schemas.microsoft.com\/wix\/2006\/localization\" Codepage=\"1252\">\r\n+<WixLocalization Culture=\"de-de\" xmlns=\"http:\/\/schemas.microsoft.com\/wix\/2006\/localization\" Codepage=\"1252\">\r\n","filename":"src\/jdk.jpackage\/windows\/classes\/jdk\/jpackage\/internal\/resources\/MsiInstallerStrings_de.wxl","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-<WixLocalization Culture=\"ja\" xmlns=\"http:\/\/schemas.microsoft.com\/wix\/2006\/localization\" Codepage=\"932\">\r\n+<WixLocalization Culture=\"ja-jp\" xmlns=\"http:\/\/schemas.microsoft.com\/wix\/2006\/localization\" Codepage=\"932\">\r\n","filename":"src\/jdk.jpackage\/windows\/classes\/jdk\/jpackage\/internal\/resources\/MsiInstallerStrings_ja.wxl","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-<WixLocalization Culture=\"zh-CN\" xmlns=\"http:\/\/schemas.microsoft.com\/wix\/2006\/localization\" Codepage=\"936\">\r\n+<WixLocalization Culture=\"zh-cn\" xmlns=\"http:\/\/schemas.microsoft.com\/wix\/2006\/localization\" Codepage=\"936\">\r\n","filename":"src\/jdk.jpackage\/windows\/classes\/jdk\/jpackage\/internal\/resources\/MsiInstallerStrings_zh_CN.wxl","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -37,2 +37,1 @@\n-resource.wxl-file=WiX localization file\n-resource.wxl-file-name=MsiInstallerStrings_en.wxl\n+resource.wxl-file-name=MsiInstallerStrings_de.wxl\n","filename":"src\/jdk.jpackage\/windows\/classes\/jdk\/jpackage\/internal\/resources\/WinResources_de.properties","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -37,2 +37,1 @@\n-resource.wxl-file=WiX localization file\n-resource.wxl-file-name=MsiInstallerStrings_en.wxl\n+resource.wxl-file-name=MsiInstallerStrings_ja.wxl\n","filename":"src\/jdk.jpackage\/windows\/classes\/jdk\/jpackage\/internal\/resources\/WinResources_ja.properties","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -37,2 +37,1 @@\n-resource.wxl-file=WiX localization file\n-resource.wxl-file-name=MsiInstallerStrings_en.wxl\n+resource.wxl-file-name=MsiInstallerStrings_zh_CN.wxl\n","filename":"src\/jdk.jpackage\/windows\/classes\/jdk\/jpackage\/internal\/resources\/WinResources_zh_CN.properties","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -58,1 +58,3 @@\n-            String expectedCulture, String expectedErrorMessage) {\n+            String expectedCulture, String expectedErrorMessage,\n+            String userLanguage, String userCountry,\n+            boolean enableWixUIExtension) {\n@@ -62,0 +64,3 @@\n+        this.userLanguage = userLanguage;\n+        this.userCountry = userCountry;\n+        this.enableWixUIExtension = enableWixUIExtension;\n@@ -67,1 +72,9 @@\n-            {null, \"en-us\", null},\n+            {null, \"en-us\", null, null, null, false},\n+            {null, \"en-us\", null, \"en\", \"US\", false},\n+            {null, \"en-us\", null, \"en\", \"US\", true},\n+            {null, \"de-de\", null, \"de\", \"DE\", false},\n+            {null, \"de-de\", null, \"de\", \"DE\", true},\n+            {null, \"ja-jp\", null, \"ja\", \"JP\", false},\n+            {null, \"ja-jp\", null, \"ja\", \"JP\", true},\n+            {null, \"zh-cn\", null, \"zh\", \"CN\", false},\n+            {null, \"zh-cn\", null, \"zh\", \"CN\", true},\n@@ -70,1 +83,1 @@\n-            }, \"en-us\", null},\n+            }, \"en-us\", null, null, null, false},\n@@ -73,1 +86,1 @@\n-            }, \"fr;en-us\", null},\n+            }, \"fr;en-us\", null, null, null, false},\n@@ -77,1 +90,1 @@\n-            }, \"fr;en-us\", null},\n+            }, \"fr;en-us\", null, null, null, false},\n@@ -81,1 +94,1 @@\n-            }, \"it;fr;en-us\", null},\n+            }, \"it;fr;en-us\", null, null, null, false},\n@@ -85,1 +98,1 @@\n-            }, \"fr;it;en-us\", null},\n+            }, \"fr;it;en-us\", null, null, null, false},\n@@ -91,1 +104,1 @@\n-            }, \"fr;it;en-us\", null},\n+            }, \"fr;it;en-us\", null, null, null, false},\n@@ -95,1 +108,1 @@\n-            }, null, null},\n+            }, null, null, null, null, false},\n@@ -98,1 +111,1 @@\n-            }, \"en-us\", null},\n+            }, \"en-us\", null, null, null, false}\n@@ -137,0 +150,17 @@\n+\n+            \/\/ Set JVM default locale that is used to select primary l10n file.\n+            if (userLanguage != null) {\n+                cmd.addArguments(\"-J-Duser.language=\" + userLanguage);\n+            }\n+            if (userCountry != null) {\n+                cmd.addArguments(\"-J-Duser.country=\" + userCountry);\n+            }\n+\n+            \/\/ Cultures handling is affected by the WiX extensions used.\n+            \/\/ By default only WixUtilExtension is used, this flag\n+            \/\/ additionally enables WixUIExtension.\n+            if (enableWixUIExtension) {\n+                cmd.addArgument(\"--win-dir-chooser\");\n+            }\n+\n+            \/\/ Preserve config dir to check the set of copied l10n files.\n@@ -198,0 +228,3 @@\n+    final private String userLanguage;\n+    final private String userCountry;\n+    final private boolean enableWixUIExtension;\n","filename":"test\/jdk\/tools\/jpackage\/windows\/WinL10nTest.java","additions":43,"deletions":10,"binary":false,"changes":53,"status":"modified"}]}