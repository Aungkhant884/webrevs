{"files":[{"patch":"@@ -1897,2 +1897,7 @@\n-    assert(_num_writer_threads >= 1, \"Must be at least one writers\");\n-    \/\/ worker id of dumper starts from 0, include VMDumper\n+    assert(_num_writer_threads >= 1, \"Must be at least one writer\");\n+    \/\/ worker id of VMDumper that dump heap and non-heap data\n+    if (worker_id == VMDumperWorkerId) {\n+      return VMDumperType;\n+    }\n+\n+    \/\/ worker id of dumper starts from 1, which only dump heap datar\n@@ -1900,3 +1905,0 @@\n-      if (worker_id == VMDumperWorkerId) {\n-        return VMDumperType;\n-      }\n@@ -2343,1 +2345,1 @@\n-  if (_num_dumper_threads == 1) {\n+  if (_num_dumper_threads <= 1) {\n@@ -2361,2 +2363,1 @@\n-         uint dumper_id = worker_id - _num_writer_threads;\n-         _poi->object_iterate(&obj_dumper, dumper_id);\n+         _poi->object_iterate(&obj_dumper, worker_id);\n@@ -2381,1 +2382,1 @@\n-  assert(worker_id == 0, \"Heap dumper must be worker 0.\");\n+  assert(get_worker_type(worker_id) == VMDumperType, \"Heap dumper must be VMDumper\");\n","filename":"src\/hotspot\/share\/services\/heapDumper.cpp","additions":10,"deletions":9,"binary":false,"changes":19,"status":"modified"}]}