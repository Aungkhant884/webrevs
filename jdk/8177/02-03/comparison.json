{"files":[{"patch":"@@ -359,7 +359,0 @@\n-      # If no absolute paths allowed, work out relative source file path\n-      # for assembly .file substitution, otherwise use full file path\n-      ifeq ($(ALLOW_ABSOLUTE_PATHS_IN_OUTPUT), false)\n-        $1_REL_ASM_SRC := $$(call RelativePath, $$($1_FILE), $(WORKSPACE_ROOT))\n-      else\n-        $1_REL_ASM_SRC := $$($1_FILE)\n-      endif\n@@ -368,0 +361,14 @@\n+\n+      # gcc assembly files must contain an appropriate relative .file\n+      # path for reproducible builds.\n+      ifeq ($(TOOLCHAIN_TYPE), gcc)\n+        # If no absolute paths allowed, work out relative source file path\n+        # for assembly .file substitution, otherwise use full file path\n+        ifeq ($(ALLOW_ABSOLUTE_PATHS_IN_OUTPUT), false)\n+          $1_REL_ASM_SRC := $$(call RelativePath, $$($1_FILE), $(WORKSPACE_ROOT))\n+        else\n+          $1_REL_ASM_SRC := $$($1_FILE)\n+        endif\n+        $1_FLAGS := $$($1_FLAGS) -DASSEMBLY_SRC_FILE='\"$$($1_REL_ASM_SRC)\"' \\\n+            -include $(TOPDIR)\/make\/data\/autoheaders\/assemblyprefix.h\n+      endif\n","filename":"make\/common\/NativeCompilation.gmk","additions":14,"deletions":7,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -0,0 +1,27 @@\n+# \n+# Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+        \/\/ ASSEMBLY_SRC_FILE gets replaced by relative or absolute file path\n+        \/\/ in NativeCompilation.gmk, this ensures reproducible .debuginfo\n+        .file ASSEMBLY_SRC_FILE\n+\n","filename":"make\/data\/autoheaders\/assemblyprefix.h","additions":27,"deletions":0,"binary":false,"changes":27,"status":"added"},{"patch":"@@ -1,1 +1,1 @@\n-\/\/ Copyright (c) 2021, 2022, Red Hat Inc. All rights reserved.\n+\/\/ Copyright (c) 2021, Red Hat Inc. All rights reserved.\n@@ -23,3 +23,0 @@\n-        \/\/ ASSEMBLY_SRC_FILE gets replaced by relative or absolute file path\n-        \/\/ in NativeCompilation.gmk, this ensures reproducible .debuginfo\n-        .file ASSEMBLY_SRC_FILE\n","filename":"src\/hotspot\/os_cpu\/linux_aarch64\/atomic_linux_aarch64.S","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2022, Linaro Ltd. All rights reserved.\n+ * Copyright (c) 2016, Linaro Ltd. All rights reserved.\n@@ -24,4 +24,0 @@\n-        \/\/ ASSEMBLY_SRC_FILE gets replaced by relative or absolute file path\n-        \/\/ in NativeCompilation.gmk, this ensures reproducible .debuginfo\n-        .file ASSEMBLY_SRC_FILE\n-\n","filename":"src\/hotspot\/os_cpu\/linux_aarch64\/copy_linux_aarch64.S","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -22,4 +22,0 @@\n-        \/\/ ASSEMBLY_SRC_FILE gets replaced by relative or absolute file path\n-        \/\/ in NativeCompilation.gmk, this ensures reproducible .debuginfo\n-        .file ASSEMBLY_SRC_FILE\n-\n","filename":"src\/hotspot\/os_cpu\/linux_aarch64\/threadLS_linux_aarch64.S","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -24,3 +24,0 @@\n-        \/\/ ASSEMBLY_SRC_FILE gets replaced by relative or absolute file path\n-        \/\/ in NativeCompilation.gmk, this ensures reproducible .debuginfo\n-        .file ASSEMBLY_SRC_FILE\n","filename":"src\/hotspot\/os_cpu\/linux_arm\/linux_arm_32.S","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -24,3 +24,0 @@\n-        \/\/ ASSEMBLY_SRC_FILE gets replaced by relative or absolute file path\n-        \/\/ in NativeCompilation.gmk, this ensures reproducible .debuginfo\n-        .file ASSEMBLY_SRC_FILE\n","filename":"src\/hotspot\/os_cpu\/linux_x86\/linux_x86_32.S","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2004, 2022, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2004, 2013, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,3 +24,0 @@\n-        \/\/ ASSEMBLY_SRC_FILE gets replaced by relative or absolute file path\n-        \/\/ in NativeCompilation.gmk, this ensures reproducible .debuginfo\n-        .file ASSEMBLY_SRC_FILE\n","filename":"src\/hotspot\/os_cpu\/linux_x86\/linux_x86_64.S","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"}]}