{"files":[{"patch":"@@ -1601,0 +1601,1 @@\n+    field->set_stable_for_enum_switch_map(name, sig, access_flags);\n","filename":"src\/hotspot\/share\/classfile\/classFileParser.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -167,0 +167,14 @@\n+  void set_stable_for_enum_switch_map(const Symbol *field_name,\n+                                      const Symbol *field_sig,\n+                                      AccessFlags field_access_flags) {\n+    static const char *enum_switch_map_prefix = \"$SwitchMap$\";\n+    static const char *enum_switch_map_sig = \"[I\";\n+    static const jint required = JVM_ACC_SYNTHETIC | JVM_ACC_FINAL | JVM_ACC_STATIC;\n+\n+    if (field_access_flags.as_int() == required &&\n+        field_name->starts_with(enum_switch_map_prefix) &&\n+        field_sig->equals(enum_switch_map_sig)) {\n+      \/\/ For enum switches, set mapping arrays stable so that constant folding works.\n+      set_stable(true);\n+    }\n+  }\n","filename":"src\/hotspot\/share\/oops\/fieldInfo.hpp","additions":14,"deletions":0,"binary":false,"changes":14,"status":"modified"}]}