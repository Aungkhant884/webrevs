[{"commit":{"message":"8266609: AArch64: include FP\/LR space in LIR_Assembler::initial_frame_size_in_bytes()\n\nLIR_Assembler::initial_frame_size_in_bytes() returns the frame size\nwithout the additional 2*wordSize needed to store FP\/LR (i.e. just the\nspace required for the C1 locals).  When we pass this value to\nMacroAssembler build_frame and remove_frame we need to remember to add\nback the 2*wordSize.  This patch changes initial_frame_size_in_bytes()\nto return the full frame size including the space for FP\/LR.  The PPC\nand S390 ports already do this, and it also matches the behaviour of\nC->output()->frame_size_in_bytes() in C2.\n\nThis change may seem a bit trivial in mainline but the Valhalla lworld\nbranch makes more calls to build_frame\/remove_frame in C1 and keeping\ntrack of whether \"framesize\" is with or without FP\/LR quickly becomes\nconfusing.\n\nTested tier1 on AArch64.  The only use of this function is as input to\nC1_MacroAssembler build_frame() and remove_frame() so seems safe."},"files":[{"filename":"src\/hotspot\/cpu\/aarch64\/aarch64.ad"},{"filename":"src\/hotspot\/cpu\/aarch64\/c1_LIRAssembler_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/c1_MacroAssembler_aarch64.cpp"},{"filename":"src\/hotspot\/cpu\/aarch64\/macroAssembler_aarch64.cpp"}],"sha":"912ea36474727c25cc0feb46eb92c77f59536bb1"}]