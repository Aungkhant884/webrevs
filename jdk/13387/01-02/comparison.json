{"files":[{"patch":"@@ -254,1 +254,1 @@\n-        if (out instanceof ChannelOutputStream cos && cos.channel() instanceof FileChannel fc) {\n+        if (out instanceof ChannelOutputStream cos) {\n@@ -256,0 +256,1 @@\n+            WritableByteChannel wbc = cos.channel();\n@@ -257,5 +258,8 @@\n-            if (rbc instanceof SelectableChannel sc) {\n-                synchronized (sc.blockingLock()) {\n-                    if (!sc.isBlocking())\n-                        throw new IllegalBlockingModeException();\n-                    return transfer(rbc, fc);\n+            \/\/ ReadableByteChannel -> FileChannel\n+            if (wbc instanceof FileChannel fc) {\n+                if (rbc instanceof SelectableChannel sc) {\n+                    synchronized (sc.blockingLock()) {\n+                        if (!sc.isBlocking())\n+                            throw new IllegalBlockingModeException();\n+                        return transfer(rbc, fc);\n+                    }\n@@ -263,4 +267,0 @@\n-            }\n-\n-            return transfer(rbc, fc);\n-        }\n@@ -268,4 +268,2 @@\n-        \/\/ ReadableByteChannel -> WritableByteChannel\n-        if (out instanceof ChannelOutputStream cos) {\n-            ReadableByteChannel rbc = ch;\n-            WritableByteChannel wbc = cos.channel();\n+                return transfer(rbc, fc);\n+            }\n@@ -273,0 +271,1 @@\n+            \/\/ ReadableByteChannel -> WritableByteChannel\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/ch\/ChannelInputStream.java","additions":13,"deletions":14,"binary":false,"changes":27,"status":"modified"}]}