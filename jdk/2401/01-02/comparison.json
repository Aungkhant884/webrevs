{"files":[{"patch":"@@ -558,1 +558,1 @@\n-  if (resproj != NULL && call->is_CallStaticJava() &&\n+  if (resproj != nullptr && call->is_CallStaticJava() &&\n@@ -560,4 +560,1 @@\n-    GraphKit kit(call->jvms());\n-    PhaseGVN& gvn = kit.gvn();\n-\n-    Node_List delay_boxes;\n+    Unique_Node_List uncommon_trap_list;\n@@ -569,1 +566,1 @@\n-        delay_boxes.push(m);\n+        uncommon_trap_list.push(m);\n@@ -577,0 +574,3 @@\n+      GraphKit kit(call->jvms());\n+      PhaseGVN& gvn = kit.gvn();\n+\n@@ -578,1 +578,1 @@\n-      while (delay_boxes.size() > 0) {\n+      while (uncommon_trap_list.size() > 0) {\n@@ -580,3 +580,1 @@\n-        Node* uncommon_trap_node = delay_boxes.pop();\n-        int in_edge = uncommon_trap_node->find_edge(res);\n-        assert(in_edge > 0, \"sanity\");\n+        Node* uncommon_trap_node = uncommon_trap_list.pop();\n@@ -586,1 +584,1 @@\n-        assert(n_fields == 1, \"sanity\");\n+        assert(n_fields == 1, \"the klass must be an auto-boxing klass\");\n@@ -591,1 +589,1 @@\n-                                                  NULL,\n+                                                  (AllocateNode*)call,\n@@ -597,2 +595,5 @@\n-        uncommon_trap_node->jvms()->set_endoff(uncommon_trap_node->req());\n-        uncommon_trap_node->set_req(in_edge, sobj);\n+        JVMState* jvms = uncommon_trap_node->jvms();\n+        jvms->set_endoff(uncommon_trap_node->req());\n+        int start = jvms->debug_start();\n+        int end   = jvms->debug_end();\n+        uncommon_trap_node->replace_edges_in_range(res, sobj, start, end);\n","filename":"src\/hotspot\/share\/opto\/callGenerator.cpp","additions":15,"deletions":14,"binary":false,"changes":29,"status":"modified"}]}