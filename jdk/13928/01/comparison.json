{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -38,0 +38,1 @@\n+import java.nio.BufferUnderflowException;\n@@ -502,6 +503,11 @@\n-            Map<String,String> remoteProps = ConnectorAddressLink.importRemoteFrom(0);\n-            String jmxUrlStr = remoteProps.get(\"sun.management.JMXConnectorServer.0.remoteAddress\");\n-\n-            String instanceName = props.getProperty(\"com.sun.management.jdp.name\");\n-\n-            JdpController.startDiscoveryService(address, port, instanceName, jmxUrlStr);\n+            Map<String,String> remoteProps = null;\n+            try {\n+                remoteProps = ConnectorAddressLink.importRemoteFrom(0);\n+            } catch (BufferUnderflowException bue) {\n+                warning(AGENT_EXCEPTION, \"JDP not starting, PerfData not available\");\n+            }\n+            if (remoteProps != null) {\n+                String jmxUrlStr = remoteProps.get(\"sun.management.JMXConnectorServer.0.remoteAddress\");\n+                String instanceName = props.getProperty(\"com.sun.management.jdp.name\");\n+                JdpController.startDiscoveryService(address, port, instanceName, jmxUrlStr);\n+            }\n","filename":"src\/jdk.management.agent\/share\/classes\/jdk\/internal\/agent\/Agent.java","additions":13,"deletions":7,"binary":false,"changes":20,"status":"modified"}]}