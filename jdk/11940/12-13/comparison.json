{"files":[{"patch":"@@ -35,1 +35,0 @@\n-import java.util.concurrent.atomic.AtomicBoolean;\n@@ -39,1 +38,1 @@\n-    private static boolean doInBackground = false;\n+    private static volatile boolean doInBackground = false;\n@@ -70,1 +69,2 @@\n-                    throw new RuntimeException(\"done called before doInBackground\");\n+                    throw new RuntimeException(\"done called before \" +\n+                                             \" doInBackground is finished\");\n@@ -91,0 +91,8 @@\n+                    \/\/ Ensure the STARTED state is notified\n+                    \/\/ before doInBackground started running\n+                    if (!doInBackground &&\n+                         worker.getState() == SwingWorker.StateValue.STARTED) {\n+                        throw new RuntimeException(\n+                               \"PropertyChangeListeners called with \" +\n+                               \"state STARTED before doInBackground is finished\");\n+                    }\n@@ -92,1 +100,1 @@\n-                    \/\/ SwingWorker} notifies PropertyChangeListeners\n+                    \/\/ SwingWorker notifies PropertyChangeListeners\n@@ -97,2 +105,2 @@\n-                            \"listener called after doInBackground is finised\" +\n-                            \" but before State changed to DONE\");\n+                            \"PropertyChangeListeners called after \" +\n+                            \" doInBackground is finised but before State changed to DONE\");\n","filename":"test\/jdk\/javax\/swing\/SwingWorker\/TestDoneBeforeDoInBackground.java","additions":14,"deletions":6,"binary":false,"changes":20,"status":"modified"}]}