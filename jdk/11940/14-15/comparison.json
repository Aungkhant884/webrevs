{"files":[{"patch":"@@ -39,2 +39,0 @@\n-    private static AtomicBoolean doInBackgroundStarted = new AtomicBoolean(false);\n-    private static AtomicBoolean doInBackgroundFinished = new AtomicBoolean(false);\n@@ -43,0 +41,3 @@\n+\n+    private static final AtomicBoolean doInBackgroundStarted = new AtomicBoolean(false);\n+    private static final AtomicBoolean doInBackgroundFinished = new AtomicBoolean(false);\n@@ -57,0 +58,1 @@\n+\n@@ -66,0 +68,1 @@\n+\n@@ -73,1 +76,1 @@\n-                                             \" doInBackground is finished\");\n+                                               \"doInBackground is finished\");\n@@ -86,2 +89,2 @@\n-                    if (doInBackgroundFinished.get() &&\n-                         worker.getState() == SwingWorker.StateValue.STARTED) {\n+                    if (doInBackgroundFinished.get()\n+                        && worker.getState() == SwingWorker.StateValue.STARTED) {\n@@ -92,0 +95,1 @@\n+\n@@ -94,2 +98,2 @@\n-                    if (doInBackgroundStarted.get() &&\n-                         worker.getState() == SwingWorker.StateValue.STARTED) {\n+                    if (doInBackgroundStarted.get()\n+                        && worker.getState() == SwingWorker.StateValue.STARTED) {\n@@ -100,0 +104,1 @@\n+\n@@ -103,2 +108,2 @@\n-                    if (doInBackgroundFinished.get() &&\n-                            worker.getState() != SwingWorker.StateValue.DONE) {\n+                    if (worker.getState() != SwingWorker.StateValue.DONE\n+                          && doInBackgroundFinished.get()) {\n@@ -127,4 +132,4 @@\n-        if (doInBackgroundFinished.get() &&\n-              worker.getState() != SwingWorker.StateValue.DONE) {\n-            throw new RuntimeException(\"doInBackground is finished \" +\n-                                       \" but State is not DONE\");\n+        if (worker.getState() != SwingWorker.StateValue.DONE\n+            && doInBackgroundFinished.get()) {\n+              throw new RuntimeException(\"doInBackground is finished \" +\n+                                         \"but State is not DONE\");\n","filename":"test\/jdk\/javax\/swing\/SwingWorker\/TestDoneBeforeDoInBackground.java","additions":18,"deletions":13,"binary":false,"changes":31,"status":"modified"}]}