{"files":[{"patch":"@@ -31,0 +31,2 @@\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n@@ -35,1 +37,2 @@\n-    static final int WAIT_TIME = 2000;\n+    static final int WAIT_TIME = 200;\n+    private static final long CLEANUP_TIME = 3000;\n@@ -52,1 +55,1 @@\n-                    Thread.sleep(WAIT_TIME);\n+                    Thread.sleep(CLEANUP_TIME);\n@@ -71,1 +74,1 @@\n-        Thread.sleep(WAIT_TIME);\n+        Thread.sleep(WAIT_TIME * 3);\n@@ -73,0 +76,1 @@\n+        final long start = System.currentTimeMillis();\n@@ -74,1 +78,10 @@\n-        Thread.sleep(WAIT_TIME);\n+        final long end = System.currentTimeMillis();\n+\n+        if ((end - start) > 100) {\n+            throw new RuntimeException(\"Cancel took too long: \"\n+                                       + ((end - start) \/ 1000.0d) + \" s\");\n+        }\n+        if (doInBackground && worker.getState() != SwingWorker.StateValue.DONE) {\n+            throw new RuntimeException(\"doInBackground is finished \" +\n+                                       \" but State is not DONE\");\n+        }\n","filename":"test\/jdk\/javax\/swing\/SwingWorker\/TestDoneBeforeDoInBackground.java","additions":17,"deletions":4,"binary":false,"changes":21,"status":"modified"}]}