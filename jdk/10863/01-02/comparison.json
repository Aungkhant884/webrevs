{"files":[{"patch":"@@ -80,1 +80,1 @@\n-void ArchiveHeapLoader::init_narrow_oop_decoding(address dumptime_base, int shift) {\n+void ArchiveHeapLoader::init_narrow_oop_decoding(address base, int shift) {\n@@ -83,1 +83,1 @@\n-  _narrow_oop_base = dumptime_base;\n+  _narrow_oop_base = base;\n@@ -133,2 +133,1 @@\n-    narrowOop new_v;\n-    new_v = static_cast<narrowOop>(static_cast<uint32_t>(v) + _delta);\n+    narrowOop new_v = CompressedOops::narrow_oop_cast(CompressedOops::narrow_oop_value(v) + _delta);\n@@ -166,0 +165,5 @@\n+  narrowOop dt_encoded_bottom = info->encoded_heap_region_dumptime_address(map_region);\n+  narrowOop rt_encoded_bottom = CompressedOops::encode_not_null(cast_to_oop(region.start()));\n+  log_info(cds)(\"patching heap embedded pointers: narrowOop 0x%8x -> 0x%8x\",\n+                  (uint)dt_encoded_bottom, (uint)rt_encoded_bottom);\n+\n@@ -169,2 +173,0 @@\n-    narrowOop dt_encoded_bottom = info->encoded_heap_region_dumptime_address(map_region);\n-    narrowOop rt_encoded_bottom = CompressedOops::encode_not_null(cast_to_oop(region.start()));\n@@ -172,3 +174,0 @@\n-\n-    log_info(cds)(\"patching heap embedded pointers: narrowOop 0x%8x -> 0x%8x\",\n-                  (uint)dt_encoded_bottom, (uint)rt_encoded_bottom);\n@@ -176,1 +175,0 @@\n-\n@@ -184,1 +182,1 @@\n-    log_info(cds)(\"CDS heap data relocation not possible\");\n+    log_info(cds)(\"CDS heap data quick relocation not possible\");\n","filename":"src\/hotspot\/share\/cds\/archiveHeapLoader.cpp","additions":9,"deletions":11,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -35,0 +35,1 @@\n+#include \"utilities\/bitMap.hpp\"\n","filename":"src\/hotspot\/share\/cds\/archiveHeapLoader.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}