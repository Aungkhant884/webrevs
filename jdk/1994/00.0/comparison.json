{"files":[{"patch":"@@ -1,1 +1,1 @@\n-# Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -477,1 +477,1 @@\n-    JAVADOC_CMD := $(JAVADOC), \\\n+    JAVADOC_CMD := $(DOCS_REFERENCE_JAVADOC), \\\n","filename":"make\/Docs.gmk","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1480,1 +1480,5 @@\n-      if( !s->depends_only_on_test() ) {\n+      if (s->depends_only_on_test() && igvn->no_dependent_zero_check(s)) {\n+        \/\/ For control producers.\n+        \/\/ Do not rewire Div and Mod nodes which could have a zero divisor to avoid skipping their zero check.\n+        igvn->replace_input_of(s, 0, data_target); \/\/ Move child to data-target\n+      } else {\n@@ -1484,1 +1488,1 @@\n-        for( l = 0; s->in(l) != ifp; l++ ) { }\n+        for (l = 0; s->in(l) != ifp; l++) { }\n@@ -1486,2 +1490,0 @@\n-      } else {                      \/\/ Else, for control producers,\n-        igvn->replace_input_of(s, 0, data_target); \/\/ Move child to data-target\n","filename":"src\/hotspot\/share\/opto\/ifnode.cpp","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -1662,0 +1662,19 @@\n+\/\/ Check if the type of a divisor of a Div or Mod node includes zero.\n+bool PhaseIterGVN::no_dependent_zero_check(Node* n) const {\n+  switch (n->Opcode()) {\n+    case Op_DivI:\n+    case Op_ModI: {\n+      \/\/ Type of divisor includes 0?\n+      const TypeInt* type_divisor = type(n->in(2))->is_int();\n+      return (type_divisor->_hi < 0 || type_divisor->_lo > 0);\n+    }\n+    case Op_DivL:\n+    case Op_ModL: {\n+      \/\/ Type of divisor includes 0?\n+      const TypeLong* type_divisor = type(n->in(2))->is_long();\n+      return (type_divisor->_hi < 0 || type_divisor->_lo > 0);\n+    }\n+  }\n+  return true;\n+}\n+\n","filename":"src\/hotspot\/share\/opto\/phaseX.cpp","additions":19,"deletions":0,"binary":false,"changes":19,"status":"modified"}]}