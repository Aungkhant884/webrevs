{"files":[{"patch":"@@ -2303,1 +2303,1 @@\n-    addi(result, zr, 1);\n+    li(result, 1);\n@@ -2338,1 +2338,1 @@\n-  Label succ, fail, done;\n+  Label fail, done;\n@@ -2347,1 +2347,1 @@\n-  beqz(tmp, succ);\n+  bnez(tmp, fail);\n@@ -2349,2 +2349,2 @@\n-  bind(fail);\n-  addi(result, zr, 1);\n+  \/\/ Success\n+  li(result, 1);\n@@ -2353,1 +2353,2 @@\n-  bind(succ);\n+  \/\/ Fail\n+  bind(fail);\n@@ -2397,1 +2398,1 @@\n-  Label fail, done, sc_done;\n+  Label fail, done;\n@@ -2401,1 +2402,1 @@\n-  beqz(t0, sc_done);\n+  bnez(t0, fail);\n@@ -2403,2 +2404,1 @@\n-  \/\/ fail\n-  bind(fail);\n+  \/\/ Success\n@@ -2408,3 +2408,4 @@\n-  \/\/ sc_done\n-  bind(sc_done);\n-  mv(result, 0);\n+  \/\/ Fail\n+  bind(fail);\n+  mv(result, zr);\n+\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.cpp","additions":14,"deletions":13,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -5653,1 +5653,1 @@\n-    \"xori $res, $res, 1\\t# $res == 1 when success, #@weakCompareAndSwapB\"\n+    \"# $res == 1 when success, #@weakCompareAndSwapB\"\n@@ -5660,1 +5660,0 @@\n-    __ xori($res$$Register, $res$$Register, 1);\n@@ -5677,1 +5676,1 @@\n-    \"xori $res, $res, 1\\t# $res == 1 when success, #@weakCompareAndSwapS\"\n+    \"# $res == 1 when success, #@weakCompareAndSwapS\"\n@@ -5684,1 +5683,0 @@\n-    __ xori($res$$Register, $res$$Register, 1);\n@@ -5698,1 +5696,1 @@\n-    \"xori $res, $res, 1\\t# $res == 1 when success, #@weakCompareAndSwapI\"\n+    \"# $res == 1 when success, #@weakCompareAndSwapI\"\n@@ -5704,1 +5702,0 @@\n-    __ xori($res$$Register, $res$$Register, 1);\n@@ -5718,1 +5715,1 @@\n-    \"xori $res, $res, 1\\t# $res == 1 when success, #@weakCompareAndSwapL\"\n+    \"# $res == 1 when success, #@weakCompareAndSwapL\"\n@@ -5724,1 +5721,0 @@\n-    __ xori($res$$Register, $res$$Register, 1);\n@@ -5738,1 +5734,1 @@\n-    \"xori $res, $res, 1\\t# $res == 1 when success, #@weakCompareAndSwapN\"\n+    \"# $res == 1 when success, #@weakCompareAndSwapN\"\n@@ -5744,1 +5740,0 @@\n-    __ xori($res$$Register, $res$$Register, 1);\n@@ -5759,1 +5754,1 @@\n-    \"xori $res, $res, 1\\t# $res == 1 when success, #@weakCompareAndSwapP\"\n+    \"# $res == 1 when success, #@weakCompareAndSwapP\"\n@@ -5765,1 +5760,0 @@\n-    __ xori($res$$Register, $res$$Register, 1);\n@@ -5784,1 +5778,1 @@\n-    \"xori $res, $res, 1\\t# $res == 1 when success, #@weakCompareAndSwapBAcq\"\n+    \"# $res == 1 when success, #@weakCompareAndSwapBAcq\"\n@@ -5791,1 +5785,0 @@\n-    __ xori($res$$Register, $res$$Register, 1);\n@@ -5810,1 +5803,1 @@\n-    \"xori $res, $res, 1\\t# $res == 1 when success, #@weakCompareAndSwapSAcq\"\n+    \"# $res == 1 when success, #@weakCompareAndSwapSAcq\"\n@@ -5817,1 +5810,0 @@\n-    __ xori($res$$Register, $res$$Register, 1);\n@@ -5833,1 +5825,1 @@\n-    \"xori $res, $res, 1\\t# $res == 1 when success, #@weakCompareAndSwapIAcq\"\n+    \"# $res == 1 when success, #@weakCompareAndSwapIAcq\"\n@@ -5839,1 +5831,0 @@\n-    __ xori($res$$Register, $res$$Register, 1);\n@@ -5855,1 +5846,1 @@\n-    \"xori $res, $res, 1\\t# $res == 1 when success, #@weakCompareAndSwapLAcq\"\n+    \"# $res == 1 when success, #@weakCompareAndSwapLAcq\"\n@@ -5861,1 +5852,0 @@\n-    __ xori($res$$Register, $res$$Register, 1);\n@@ -5877,1 +5867,1 @@\n-    \"xori $res, $res, 1\\t# $res == 1 when success, #@weakCompareAndSwapNAcq\"\n+    \"# $res == 1 when success, #@weakCompareAndSwapNAcq\"\n@@ -5883,1 +5873,0 @@\n-    __ xori($res$$Register, $res$$Register, 1);\n@@ -5899,1 +5888,1 @@\n-    \"xori $res, $res, 1\\t# $res == 1 when success, #@weakCompareAndSwapPAcq\"\n+    \"\\t# $res == 1 when success, #@weakCompareAndSwapPAcq\"\n@@ -5905,1 +5894,0 @@\n-    __ xori($res$$Register, $res$$Register, 1);\n","filename":"src\/hotspot\/cpu\/riscv\/riscv.ad","additions":12,"deletions":24,"binary":false,"changes":36,"status":"modified"}]}