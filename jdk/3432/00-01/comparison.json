{"files":[{"patch":"@@ -29,0 +29,1 @@\n+import sun.hotspot.WhiteBox;\n@@ -40,1 +41,3 @@\n- * @run main jdk.jfr.startupargs.TestBadOptionValues\n+ * @build sun.hotspot.WhiteBox\n+ * @run driver jdk.test.lib.helpers.ClassFileInstaller sun.hotspot.WhiteBox\n+ * @run main\/othervm -Xbootclasspath\/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI jdk.jfr.startupargs.TestBadOptionValues\n@@ -139,2 +142,7 @@\n-        test(FLIGHT_RECORDER_OPTIONS, \"Decrease globalbuffersize or increase memorysize or adjust global\/threadbuffersize\",\n-            \"memorysize=1m,numglobalbuffers=256\");\n+        \/\/ test is on when vm page isn't larger than 4K, avoiding both buffer sizes align to vm page size\n+        WhiteBox wb = WhiteBox.getWhiteBox();\n+        long smallPageSize = wb.getVMPageSize();\n+        if (smallPageSize <= 4096) {\n+            test(FLIGHT_RECORDER_OPTIONS, \"Decrease globalbuffersize or increase memorysize or adjust global\/threadbuffersize\",\n+                \"memorysize=1m,numglobalbuffers=256\");\n+        }\n","filename":"test\/jdk\/jdk\/jfr\/startupargs\/TestBadOptionValues.java","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"}]}