{"files":[{"patch":"@@ -410,1 +410,1 @@\n-    if (thread_state_in_java(thread) && !is_vthread_in_transition(thread)) {\n+    if (thread_state_in_java(thread)) {\n","filename":"src\/hotspot\/share\/jfr\/periodic\/sampling\/jfrThreadSampler.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -144,0 +144,1 @@\n+  bool _aborted;\n@@ -149,0 +150,1 @@\n+  bool aborted() const { return _aborted; }\n@@ -169,2 +171,1 @@\n-    _async_mode(async_mode), _vthread(JfrThreadLocal::is_vthread(jt)) {\n-  assert(!_vthread || _cont_entry != nullptr, \"invariant\");\n+    _async_mode(async_mode), _vthread(JfrThreadLocal::is_vthread(jt)), _aborted(false) {\n@@ -193,0 +194,5 @@\n+      if (_cont_entry == nullptr) {\n+        _mode = at_end_mode;\n+        _aborted = true;\n+        return;\n+      }\n@@ -282,1 +288,1 @@\n-  return count > 0;\n+  return count > 0 && !vfs.aborted();\n@@ -332,1 +338,1 @@\n-  return count > 0;\n+  return count > 0 && !vfs.aborted();\n","filename":"src\/hotspot\/share\/jfr\/recorder\/stacktrace\/jfrStackTrace.cpp","additions":10,"deletions":4,"binary":false,"changes":14,"status":"modified"}]}