{"files":[{"patch":"@@ -302,10 +302,0 @@\n-        if (level == IPPROTO_IPV6) {\n-            if ((setsockopt(fd, level, IPV6_MULTICAST_ALL, (char*)&arg, sizeof(arg)) < 0) &&\n-                (errno != ENOPROTOOPT)) {\n-                JNU_ThrowByNameWithLastError(env,\n-                                         JNU_JAVANETPKG \"SocketException\",\n-                                         \"Unable to set IPV6_MULTICAST_ALL\");\n-                close(fd);\n-                return -1;\n-            }\n-        }\n@@ -314,1 +304,0 @@\n-    \/* By default, Linux uses the route default *\/\n@@ -316,0 +305,1 @@\n+        \/* By default, Linux uses the route default *\/\n@@ -325,0 +315,11 @@\n+\n+        \/* Disable IPV6_MULTICAST_ALL if option supported *\/\n+        arg = 0;\n+        if ((setsockopt(fd, IPPROTO_IPV6, IPV6_MULTICAST_ALL, (char*)&arg, sizeof(arg)) < 0) &&\n+            (errno != ENOPROTOOPT)) {\n+            JNU_ThrowByNameWithLastError(env,\n+                                     JNU_JAVANETPKG \"SocketException\",\n+                                     \"Unable to set IPV6_MULTICAST_ALL\");\n+            close(fd);\n+            return -1;\n+        }\n","filename":"src\/java.base\/unix\/native\/libnio\/ch\/Net.c","additions":12,"deletions":11,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -134,0 +134,6 @@\n+            \/* Just check that attempting to create a socket\n+             * does not throw an exception. The setsockopt()\n+             * should fail silently\n+             *\/\n+            var ch1 = getChannel(0);\n+            ch1.close();\n","filename":"test\/jdk\/java\/nio\/channels\/DatagramChannel\/DisableMulticastAllOpt.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"}]}