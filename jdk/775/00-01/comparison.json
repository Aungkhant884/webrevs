{"files":[{"patch":"@@ -1079,1 +1079,6 @@\n-        LinkedList l;\n+        public LinkedList l;\n+        public LinkedList(LinkedList l) {\n+            this.l = l;\n+        }\n+    }\n+    static class LinkedListOfLongArrays extends LinkedList {\n@@ -1081,1 +1086,2 @@\n-        public LinkedList(LinkedList l, int size) {\n+        public LinkedListOfLongArrays(LinkedList l, int size) {\n+            super(l);\n@@ -1083,1 +1089,0 @@\n-            this.l = l;\n@@ -1095,1 +1100,2 @@\n-                    consumedMemory = new LinkedList(consumedMemory, size);\n+                    consumedMemory =\n+                            size == 1 ? new LinkedList(consumedMemory) : new LinkedListOfLongArrays(consumedMemory, size);\n@@ -2607,1 +2613,1 @@\n-                env.targetVMOptions.EliminateAllocations && coughtOom ? \"dontinline_consume_all_memory_brkpt\" : \"dontinline_testMethod\";\n+                coughtOom ? \"dontinline_consume_all_memory_brkpt\" : \"dontinline_testMethod\";\n@@ -2616,1 +2622,4 @@\n-        return super.shouldSkip() || env.targetVMOptions.DeoptimizeObjectsALot || env.targetVMOptions.UseJVMCICompiler;\n+        return super.shouldSkip() ||\n+                !env.targetVMOptions.EliminateAllocations ||\n+                env.targetVMOptions.DeoptimizeObjectsALot ||\n+                env.targetVMOptions.UseJVMCICompiler;\n@@ -2656,1 +2665,4 @@\n-        return super.shouldSkip() || DeoptimizeObjectsALot || UseJVMCICompiler;\n+        return super.shouldSkip() ||\n+                !EliminateAllocations ||\n+                DeoptimizeObjectsALot ||\n+                UseJVMCICompiler;\n@@ -2696,1 +2708,1 @@\n-                env.targetVMOptions.EliminateAllocations && coughtOom ? \"inlinedCallForcedToReturn\" : \"dontinline_testMethod\";\n+                coughtOom ? \"inlinedCallForcedToReturn\" : \"dontinline_testMethod\";\n@@ -2704,1 +2716,4 @@\n-        return super.shouldSkip() || env.targetVMOptions.DeoptimizeObjectsALot || env.targetVMOptions.UseJVMCICompiler;\n+        return super.shouldSkip() ||\n+                !env.targetVMOptions.EliminateAllocations ||\n+                env.targetVMOptions.DeoptimizeObjectsALot ||\n+                env.targetVMOptions.UseJVMCICompiler;\n@@ -2760,1 +2775,4 @@\n-        return super.shouldSkip() || DeoptimizeObjectsALot || UseJVMCICompiler;\n+        return super.shouldSkip() ||\n+                !EliminateAllocations ||\n+                DeoptimizeObjectsALot ||\n+                UseJVMCICompiler;\n@@ -2962,1 +2980,4 @@\n-        return super.shouldSkip() || env.targetVMOptions.DeoptimizeObjectsALot || env.targetVMOptions.UseJVMCICompiler;\n+        return super.shouldSkip() ||\n+                !env.targetVMOptions.EliminateAllocations ||\n+                env.targetVMOptions.DeoptimizeObjectsALot ||\n+                env.targetVMOptions.UseJVMCICompiler;\n@@ -3019,1 +3040,4 @@\n-        return super.shouldSkip() || DeoptimizeObjectsALot || UseJVMCICompiler;\n+        return super.shouldSkip() ||\n+                !EliminateAllocations ||\n+                DeoptimizeObjectsALot ||\n+                UseJVMCICompiler;\n","filename":"test\/jdk\/com\/sun\/jdi\/EATests.java","additions":36,"deletions":12,"binary":false,"changes":48,"status":"modified"}]}