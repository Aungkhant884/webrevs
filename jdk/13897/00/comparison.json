{"files":[{"patch":"@@ -1218,0 +1218,11 @@\n+class G1ObjectCountIsAliveClosure: public BoolObjectClosure {\n+  G1CollectedHeap* _g1h;\n+public:\n+  G1ObjectCountIsAliveClosure(G1CollectedHeap* g1h) : _g1h(g1h) { }\n+\n+  bool do_object_b(oop obj) {\n+    return obj != nullptr &&\n+           (!_g1h->is_in_reserved(obj) || !_g1h->is_obj_dead(obj));\n+  }\n+};\n+\n@@ -1300,0 +1311,6 @@\n+\n+    {\n+      GCTraceTime(Debug, gc, phases) debug(\"Report Object Count\", _gc_timer_cm);\n+      G1ObjectCountIsAliveClosure is_alive(_g1h);\n+      _gc_tracer_cm->report_object_count_after_gc(&is_alive, _g1h->workers());\n+    }\n@@ -1311,5 +1328,0 @@\n-  {\n-    GCTraceTime(Debug, gc, phases) debug(\"Report Object Count\", _gc_timer_cm);\n-    report_object_count(mark_finished);\n-  }\n-\n@@ -1718,23 +1730,0 @@\n-class G1ObjectCountIsAliveClosure: public BoolObjectClosure {\n-  G1CollectedHeap* _g1h;\n-public:\n-  G1ObjectCountIsAliveClosure(G1CollectedHeap* g1h) : _g1h(g1h) { }\n-\n-  bool do_object_b(oop obj) {\n-    return obj != nullptr &&\n-           (!_g1h->is_in_reserved(obj) || !_g1h->is_obj_dead(obj));\n-  }\n-};\n-\n-void G1ConcurrentMark::report_object_count(bool mark_completed) {\n-  \/\/ Depending on the completion of the marking liveness needs to be determined\n-  \/\/ using either the bitmap or after the cycle using the scrubbing information.\n-  if (mark_completed) {\n-    G1ObjectCountIsAliveClosure is_alive(_g1h);\n-    _gc_tracer_cm->report_object_count_after_gc(&is_alive, _g1h->workers());\n-  } else {\n-    G1CMIsAliveClosure is_alive(_g1h);\n-    _gc_tracer_cm->report_object_count_after_gc(&is_alive, _g1h->workers());\n-  }\n-}\n-\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMark.cpp","additions":17,"deletions":28,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -378,2 +378,0 @@\n-  void report_object_count(bool mark_completed);\n-\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentMark.hpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"}]}