{"files":[{"patch":"@@ -33,1 +33,7 @@\n-import java.awt.*;\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.Color;\n+import java.awt.FlowLayout;\n+import java.awt.Dimension;\n+import java.awt.Rectangle;\n+import java.awt.Graphics2D;\n@@ -50,0 +56,1 @@\n+    private static Robot robot;\n@@ -58,1 +65,1 @@\n-        Robot robot = new Robot();\n+        robot = new Robot();\n@@ -86,7 +93,0 @@\n-        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException e) {\n-            throw new RuntimeException(\"Unsupported LookAndFeel: \" + e);\n-        } catch (IOException e) {\n-            \/\/save image for troubleshooting\n-            BufferedImage failImg = robot.createScreenCapture(new Rectangle(point.x - BUTTON_WIDTH \/ 2, point.y - BUTTON_HEIGHT \/ 2, BUTTON_WIDTH, BUTTON_HEIGHT));\n-            ImageIO.write(failImg, \"png\", new File(testDir + \"\/fail_square.png\"));\n-            throw new RuntimeException(\"Failed image generation: \" + e);\n@@ -94,2 +94,5 @@\n-            \/\/ dispose frame when done testing for a LAF before continuing\n-            SwingUtilities.invokeAndWait(() -> frame.dispose());\n+            SwingUtilities.invokeAndWait(() -> {\n+                if(frame != null) {\n+                    frame.dispose();\n+                }\n+            });\n@@ -133,1 +136,1 @@\n-    private static void testImageCentering(Color... colors) {\n+    private static void testImageCentering(Color... colors) throws IOException {\n@@ -137,0 +140,4 @@\n+                \/\/ capture image of button when test fails for troubleshooting\n+                BufferedImage failImg = robot.createScreenCapture(new Rectangle(point.x - BUTTON_WIDTH \/ 2,\n+                        point.y - BUTTON_HEIGHT \/ 2, BUTTON_WIDTH, BUTTON_HEIGHT));\n+                ImageIO.write(failImg, \"png\", new File(testDir + \"\/fail_square.png\"));\n@@ -139,3 +146,0 @@\n-            else {\n-                System.out.println(\"-- Passed\");\n-            }\n@@ -143,0 +147,1 @@\n+        System.out.println(\"-- Passed\");\n","filename":"test\/jdk\/javax\/swing\/JButton\/HtmlButtonImageTest\/HtmlButtonImageTest.java","additions":20,"deletions":15,"binary":false,"changes":35,"status":"modified"}]}