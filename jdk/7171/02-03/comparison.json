{"files":[{"patch":"@@ -173,1 +173,1 @@\n-    private Date buildDate;\n+    private ZonedDateTime buildDate;\n@@ -270,1 +270,1 @@\n-        buildDate = zdt != null ? new Date(zdt.toEpochSecond() * 1000) : new Date();\n+        buildDate = zdt != null ? zdt : ZonedDateTime.now();\n@@ -295,1 +295,1 @@\n-    public Date getBuildDate() {\n+    public ZonedDateTime getBuildDate() {\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlConfiguration.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -30,1 +30,2 @@\n-import java.text.SimpleDateFormat;\n+import java.time.ZonedDateTime;\n+import java.time.format.DateTimeFormatter;\n@@ -36,0 +37,1 @@\n+import java.util.Locale;\n@@ -53,1 +55,1 @@\n-    private final Date generatedDate;\n+    private final ZonedDateTime generatedDate;\n@@ -81,1 +83,1 @@\n-    public Head(DocPath path, Runtime.Version docletVersion, Date generatedDate) {\n+    public Head(DocPath path, Runtime.Version docletVersion, ZonedDateTime generatedDate) {\n@@ -282,2 +284,2 @@\n-            SimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\n-            tree.add(HtmlTree.META(\"dc.created\", dateFormat.format(generatedDate)));\n+            DateTimeFormatter dateFormat = DateTimeFormatter.ofPattern(\"yyyy-MM-dd\");\n+            tree.add(HtmlTree.META(\"dc.created\", generatedDate.format(dateFormat)));\n@@ -312,1 +314,2 @@\n-    private Comment getGeneratedBy(boolean timestamp, Date now) {\n+\n+    private Comment getGeneratedBy(boolean timestamp, ZonedDateTime buildDate) {\n@@ -316,1 +319,3 @@\n-            text += \" on \" + now;\n+            DateTimeFormatter fmt =\n+                    DateTimeFormatter.ofPattern(\"EEE MMM dd HH:mm:ss zzz yyyy\").withLocale(Locale.US);\n+            text += \" on \" + buildDate.format(fmt);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/Head.java","additions":12,"deletions":7,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -369,2 +369,1 @@\n-                            date = ZonedDateTime.parse(arg, DateTimeFormatter.ISO_ZONED_DATE_TIME)\n-                                    .withZoneSameInstant(ZoneOffset.UTC);\n+                            date = ZonedDateTime.parse(arg, DateTimeFormatter.ISO_ZONED_DATE_TIME);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/BaseOptions.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -35,2 +35,2 @@\n-import java.text.SimpleDateFormat;\n-import java.util.Calendar;\n+import java.time.ZonedDateTime;\n+import java.time.format.DateTimeFormatter;\n@@ -38,0 +38,1 @@\n+import java.util.Locale;\n@@ -59,3 +60,3 @@\n-        Calendar c = Calendar.getInstance(); \/\/ uses current date, time, timezone etc\n-        \/\/ adjust the calendar to some date before the default used by javadoc (i.e. today)\n-        c.add(Calendar.DAY_OF_MONTH, -100);\n+\n+        ZonedDateTime zdt = ZonedDateTime.now(); \/\/ uses current date, time, timezone etc\n+        \/\/ adjust the calendar to some date before the default used by javadoc (i.e. today\/now)\n@@ -63,5 +64,5 @@\n-        c.set(Calendar.HOUR, 2);\n-        c.set(Calendar.MINUTE, 50);\n-        c.set(Calendar.SECOND, 0);\n-        c.set(Calendar.AM_PM, Calendar.PM);\n-        Date testDate = c.getTime();\n+        ZonedDateTime testDate = zdt.minusDays(100)\n+                        .withHour(14)\n+                        .withMinute(50)\n+                        .withSecond(0);\n+\n@@ -80,1 +81,1 @@\n-                \"--date\", testDate.toInstant().toString(),\n+                \"--date\", testDate.toString(),\n@@ -85,1 +86,5 @@\n-        String generatedByStamp = testDate.toString(); \/\/ matches what javadoc will use internally\n+\n+        \/\/ The following format is as used by javadoc; it is the historical format used by Date.toString()\n+        DateTimeFormatter fmt =\n+                DateTimeFormatter.ofPattern(\"EEE MMM dd HH:mm:ss zzz yyyy\").withLocale(Locale.US);\n+        String generatedByStamp = testDate.format(fmt);\n@@ -89,2 +94,2 @@\n-        SimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\n-        String dcCreatedStamp = dateFormat.format(testDate);\n+        DateTimeFormatter dateFormat = DateTimeFormatter.ofPattern(\"yyyy-MM-dd\");\n+        String dcCreatedStamp = testDate.format(dateFormat);\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testDateOption\/TestDateOption.java","additions":19,"deletions":14,"binary":false,"changes":33,"status":"modified"}]}