{"files":[{"patch":"@@ -381,1 +381,1 @@\n-        int h = inH;\n+        final int h = inH;\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaInternalFrameBorder.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -53,0 +53,3 @@\n+    private static Point pos;\n+    private static Rectangle rect;\n+    private static Insets insets;\n@@ -56,6 +59,0 @@\n-        try {\n-            UIManager.setLookAndFeel(\"com.apple.laf.AquaLookAndFeel\");\n-        } catch (Exception e) {\n-            throw new RuntimeException(\"Cannot initialize Aqua L&F\");\n-        }\n-\n@@ -66,3 +63,6 @@\n-        Point p = internalFrame.getLocationOnScreen();\n-        Rectangle rect = internalFrame.getBounds();\n-        Insets insets = internalFrame.getInsets();\n+        SwingUtilities.invokeAndWait(() -> {\n+            pos = internalFrame.getLocationOnScreen();\n+            rect = internalFrame.getBounds();\n+            insets = internalFrame.getInsets();\n+        });\n+        robot.waitForIdle();\n@@ -71,2 +71,2 @@\n-        int x = p.x + rect.x + rect.width\/2;\n-        int y = p.y + rect.y + rect.height - insets.bottom + 1;\n+        int x = pos.x + rect.x + rect.width\/2;\n+        int y = pos.y + rect.y + rect.height - insets.bottom + 1;\n@@ -76,2 +76,2 @@\n-        x = p.x + rect.x + insets.left - 1;\n-        y = p.y + rect.y + rect.height\/2;\n+        x = pos.x + rect.x + insets.left - 1;\n+        y = pos.y + rect.y + rect.height\/2;\n@@ -81,2 +81,2 @@\n-        x = p.x + rect.x + rect.width - insets.left + 1;\n-        y = p.y + rect.y + rect.height\/2;\n+        x = pos.x + rect.x + rect.width - insets.left + 1;\n+        y = pos.y + rect.y + rect.height\/2;\n@@ -102,0 +102,5 @@\n+            try {\n+                UIManager.setLookAndFeel(\"com.apple.laf.AquaLookAndFeel\");\n+            } catch (Exception e) {\n+                throw new RuntimeException(\"Cannot initialize Aqua L&F\");\n+            }\n","filename":"test\/jdk\/javax\/swing\/plaf\/aqua\/JInternalFrameBorderTest.java","additions":20,"deletions":15,"binary":false,"changes":35,"status":"modified"}]}