{"files":[{"patch":"@@ -297,1 +297,10 @@\n-  return thr_info.name == NULL ? (char*)\"<Unnamed thread>\" : thr_info.name;\n+  static const char* UNNAMED_STR = \"<Unnamed thread>\";\n+  static size_t UNNAMED_LEN = strlen(UNNAMED_STR);\n+  char* tname = thr_info.name;\n+  if (tname == NULL) {\n+    err = jvmti->Allocate((jlong)(UNNAMED_LEN + 1), (unsigned char**)&tname);\n+    check_jvmti_status(jni, err, \"get_method_class_name: error in JVMTI Allocate\");\n+    strncpy(tname, UNNAMED_STR, UNNAMED_LEN);\n+    tname[UNNAMED_LEN] = '\\0';\n+  }\n+  return tname;\n","filename":"test\/lib\/jdk\/test\/lib\/jvmti\/jvmti_common.h","additions":10,"deletions":1,"binary":false,"changes":11,"status":"modified"}]}