{"files":[{"patch":"@@ -979,1 +979,1 @@\n-      __ addw(dest->as_register_lo(), src->as_register(), zr); break;\n+      __ sign_extend(dest->as_register_lo(), src->as_register(), 32); break;\n@@ -985,2 +985,1 @@\n-      _masm->block_comment(\"FIXME: This coulde be no-op\");\n-      __ addw(dest->as_register(), src->as_register_lo(), zr); break;\n+      __ sign_extend(dest->as_register(), src->as_register_lo(), 32); break;\n@@ -1307,1 +1306,1 @@\n-        __ addw(Rdst, Rdst, zr);\n+        __ sign_extend(Rdst, Rdst, 32);\n","filename":"src\/hotspot\/cpu\/riscv\/c1_LIRAssembler_riscv.cpp","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -82,1 +82,0 @@\n-  \/\/ Nothing to do for T_INT\n@@ -84,1 +83,1 @@\n-  addw(result, result, zr);\n+  sign_extend(result, result, 32);\n@@ -223,1 +222,1 @@\n-    addw(index, index, zr);\n+    sign_extend(index, index, 32);\n@@ -382,1 +381,1 @@\n-  addw(r, r, zr); \/\/ signed extended\n+  sign_extend(r, r, 32);\n","filename":"src\/hotspot\/cpu\/riscv\/interp_masm_riscv.cpp","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -175,1 +175,1 @@\n-  \/\/ Load float value from 'address'. The value is loaded onto the FPU register v0.\n+  \/\/ Load float value from 'address'. The value is loaded onto the fp register f10.\n","filename":"src\/hotspot\/cpu\/riscv\/interp_masm_riscv.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1645,3 +1645,1 @@\n-  \/\/ addw: The result is clipped to 32 bits, then the sign bit is extended,\n-  \/\/ and the result is stored in Rd\n-  addw(Rd, Rd, zr);\n+  sign_extend(Rd, Rd, 32);\n@@ -1652,3 +1650,1 @@\n-  \/\/ addw: The result is clipped to 32 bits, then the sign bit is extended,\n-  \/\/ and the result is stored in Rd\n-  addw(Rd, Rd, zr);\n+  sign_extend(Rd, Rd, 32);\n@@ -1659,3 +1655,1 @@\n-  \/\/ addw: The result is clipped to 32 bits, then the sign bit is extended,\n-  \/\/ and the result is stored in Rd\n-  addw(Rd, Rd, zr);\n+  sign_extend(Rd, Rd, 32);\n@@ -4422,2 +4416,1 @@\n-      \/\/ 32bits extend sign\n-      addw(dst.first()->as_Register(), src.first()->as_Register(), zr);\n+      sign_extend(dst.first()->as_Register(), src.first()->as_Register(), 32);\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.cpp","additions":4,"deletions":11,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -1340,1 +1340,1 @@\n-        addw(Rt, Rt, zr);\n+        sign_extend(Rt, Rt, 32);\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8222,1 +8222,1 @@\n-    __ addw(as_Register($dst$$reg), as_Register($src$$reg), zr);\n+    __ sign_extend(as_Register($dst$$reg), as_Register($src$$reg), 32);\n@@ -8234,1 +8234,1 @@\n-    __ addw(as_Register($dst$$reg), as_Register($src$$reg), zr);\n+    __ sign_extend(as_Register($dst$$reg), as_Register($src$$reg), 32);\n","filename":"src\/hotspot\/cpu\/riscv\/riscv.ad","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -155,1 +155,0 @@\n-  format %{ \"vstoremask $dst, V0\" %}\n","filename":"src\/hotspot\/cpu\/riscv\/riscv_v.ad","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1630,1 +1630,0 @@\n-    __ addw(t0, t0, zr);\n@@ -2482,1 +2481,1 @@\n-  __ addiw(c_rarg1, j_rarg0, 0);\n+  __ sign_extend(c_rarg1, j_rarg0, 32);\n","filename":"src\/hotspot\/cpu\/riscv\/sharedRuntime_riscv.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1780,3 +1780,2 @@\n-    \/\/ i.e. sign bit set\n-    __ test_bit(t0, src_pos, 31);\n-    __ bnez(t0, L_failed);\n+    __ sign_extend(t0, src_pos, 32);\n+    __ bltz(t0, L_failed);\n@@ -1788,3 +1787,2 @@\n-    \/\/ i.e. sign bit set\n-    __ test_bit(t0, dst_pos, 31);\n-    __ bnez(t0, L_failed);\n+    __ sign_extend(t0, dst_pos, 32);\n+    __ bltz(t0, L_failed);\n@@ -1798,4 +1796,2 @@\n-    __ addw(scratch_length, length, zr);    \/\/ length (elements count, 32-bits value)\n-    \/\/ i.e. sign bit set\n-    __ test_bit(t0, scratch_length, 31);\n-    __ bnez(t0, L_failed);\n+    __ sign_extend(scratch_length, length, 32);    \/\/ length (elements count, 32-bits value)\n+    __ bltz(scratch_length, L_failed);\n@@ -1840,2 +1836,1 @@\n-    __ test_bit(t0, lh, 31);\n-    __ beqz(t0, L_failed);\n+    __ bgez(lh, L_failed);\n@@ -1866,1 +1861,1 @@\n-    const Register x22_elsize = lh;   \/\/ element size\n+    const Register x30_elsize = lh;   \/\/ element size\n@@ -1891,1 +1886,1 @@\n-    __ test_bit(t0, x22_elsize, 1);\n+    __ test_bit(t0, x30_elsize, 1);\n@@ -1893,1 +1888,1 @@\n-    __ test_bit(t0, x22_elsize, 0);\n+    __ test_bit(t0, x30_elsize, 0);\n@@ -1897,1 +1892,1 @@\n-    __ addw(count, scratch_length, zr); \/\/ length\n+    __ sign_extend(count, scratch_length, 32); \/\/ length\n@@ -1903,1 +1898,1 @@\n-    __ addw(count, scratch_length, zr); \/\/ length\n+    __ sign_extend(count, scratch_length, 32); \/\/ length\n@@ -1907,1 +1902,1 @@\n-    __ test_bit(t0, x22_elsize, 0);\n+    __ test_bit(t0, x30_elsize, 0);\n@@ -1911,1 +1906,1 @@\n-    __ addw(count, scratch_length, zr); \/\/ length\n+    __ sign_extend(count, scratch_length, 32); \/\/ length\n@@ -1919,2 +1914,2 @@\n-      __ andi(lh, lh, Klass::_lh_log2_element_size_mask); \/\/ lh -> x22_elsize\n-      __ addw(lh, lh, zr);\n+      __ andi(lh, lh, Klass::_lh_log2_element_size_mask); \/\/ lh -> x30_elsize\n+      __ sign_extend(lh, lh, 32);\n@@ -1922,1 +1917,1 @@\n-      __ beq(x22_elsize, t0, L);\n+      __ beq(x30_elsize, t0, L);\n@@ -1930,1 +1925,1 @@\n-    __ addw(count, scratch_length, zr); \/\/ length\n+    __ sign_extend(count, scratch_length, 32); \/\/ length\n@@ -1950,1 +1945,1 @@\n-    __ addw(count, scratch_length, zr); \/\/ length\n+    __ sign_extend(count, scratch_length, 32); \/\/ length\n@@ -1973,1 +1968,1 @@\n-      __ addw(count, length, zr);           \/\/ length (reloaded)\n+      __ sign_extend(count, length, 32);      \/\/ length (reloaded)\n@@ -2806,1 +2801,1 @@\n-    __ addw(haystack_len, haystack_len, zr);\n+    __ sign_extend(haystack_len, haystack_len, 32);\n","filename":"src\/hotspot\/cpu\/riscv\/stubGenerator_riscv.cpp","additions":21,"deletions":26,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -707,1 +707,1 @@\n-  __ addw(index, index, zr);\n+  __ sign_extend(index, index, 32);\n@@ -725,1 +725,1 @@\n-  __ addw(x10, x10, zr); \/\/ signed extended\n+  __ sign_extend(x10, x10, 32);\n@@ -1546,1 +1546,1 @@\n-      __ addw(x10, x10, zr);\n+      __ sign_extend(x10, x10, 32);\n@@ -1770,1 +1770,1 @@\n-  __ addw(x10, x10, zr);\n+  __ sign_extend(x10, x10, 32);\n@@ -1804,1 +1804,1 @@\n-  __ addw(x10, x10, zr);\n+  __ sign_extend(x10, x10, 32);\n@@ -2446,1 +2446,1 @@\n-  __ addw(x10, x10, zr); \/\/ signed extended\n+  __ sign_extend(x10, x10, 32);\n@@ -3046,1 +3046,1 @@\n-      __ addw(x10, x10, zr); \/\/ signed extended\n+      __ sign_extend(x10, x10, 32);\n@@ -3093,1 +3093,1 @@\n-      __ addw(x10, x10, zr); \/\/ signed extended\n+      __ sign_extend(x10, x10, 32);\n","filename":"src\/hotspot\/cpu\/riscv\/templateTable_riscv.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"}]}