{"files":[{"patch":"@@ -392,2 +392,0 @@\n-                } else if (printError instanceof RuntimeException) {\n-                    throw (RuntimeException) printError;\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CPrinterJob.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,4 +29,4 @@\n-   @run main\/manual ExceptionFromPrintableIsIgnoredTest MAIN PE\n-   @run main\/manual ExceptionFromPrintableIsIgnoredTest MAIN RE\n-   @run main\/manual ExceptionFromPrintableIsIgnoredTest EDT PE\n-   @run main\/manual ExceptionFromPrintableIsIgnoredTest EDT RE\n+   @run main ExceptionFromPrintableIsIgnoredTest MAIN PE\n+   @run main ExceptionFromPrintableIsIgnoredTest MAIN RE\n+   @run main ExceptionFromPrintableIsIgnoredTest EDT PE\n+   @run main ExceptionFromPrintableIsIgnoredTest EDT RE\n@@ -47,0 +47,2 @@\n+    private volatile Throwable printError;\n+\n@@ -65,0 +67,10 @@\n+        String osName = System.getProperty(\"os.name\");\n+        boolean isOSX = osName.toLowerCase().startsWith(\"mac\");\n+        if ((exceptionType == TestExceptionType.RE) && !isOSX) {\n+            System.out.println(\n+                \"Currently this test scenario can be verified only on macOS.\");\n+            return;\n+        }\n+\n+        printError = null;\n+\n@@ -79,0 +91,6 @@\n+\n+        if (printError == null) {\n+            throw new RuntimeException(\"No exception was thrown.\");\n+        } else if (!(printError instanceof PrinterException)) {\n+            throw new RuntimeException(\"Unexpected exception was thrown.\");\n+        }\n@@ -85,1 +103,2 @@\n-            throw new RuntimeException(\"No printers are available.\");\n+            System.out.println(\"No printers are available.\");\n+            return;\n@@ -106,1 +125,0 @@\n-        Throwable printEx = null;\n@@ -110,2 +128,1 @@\n-            printEx = t;\n-        }\n+            printError = t;\n@@ -113,1 +130,0 @@\n-        if (printEx != null) {\n@@ -115,12 +131,1 @@\n-            printEx.printStackTrace(System.out);\n-\n-            if (((printEx instanceof PrinterException) &&\n-                    (exceptionType == TestExceptionType.PE)) ||\n-                ((printEx instanceof RuntimeException) &&\n-                    (exceptionType == TestExceptionType.RE))) {\n-                return;\/\/ Test passed.\n-            }\n-            throw new RuntimeException(\"Unexpected exception was thrown.\");\n-        } else {\n-            throw new RuntimeException(\n-                \"'PrinterJob.print' did not throw any exception.\");\n+            t.printStackTrace(System.out);\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/ExceptionFromPrintableIsIgnoredTest.java","additions":26,"deletions":21,"binary":false,"changes":47,"status":"modified"}]}