{"files":[{"patch":"@@ -40,0 +40,1 @@\n+#include \"runtime\/safefetch.hpp\"\n@@ -135,0 +136,5 @@\n+      \/\/ check that the accessed stack slots are safe too\n+      if (SafeFetchN(this->fp() + return_addr_offset, 0) == 0 ||\n+          SafeFetchN(this->fp() + interpreter_frame_sender_sp_offset, 0) == 0 ||\n+          SafeFetchN(this->fp() + link_offset, 0) == 0\n+         ) return false;\n@@ -265,3 +271,1 @@\n-  \/\/ Will the pc we fetch be non-zero (which we'll find at the oldest frame)\n-\n-  if ( (address) this->fp()[return_addr_offset] == NULL) return false;\n+  \/\/ Will the pc we fetch be non-zero (which we'll find at the oldest frame) and readable\n@@ -269,0 +273,1 @@\n+  if (SafeFetchN(this->fp() + return_addr_offset, 0) == 0) return false;\n","filename":"src\/hotspot\/cpu\/aarch64\/frame_aarch64.cpp","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -39,0 +39,1 @@\n+#include \"runtime\/safefetch.hpp\"\n@@ -107,0 +108,5 @@\n+      \/\/ check that the accessed stack slots are safe too\n+      if (SafeFetchN(this->fp() + return_addr_offset, 0) == 0 ||\n+          SafeFetchN(this->fp() + interpreter_frame_sender_sp_offset, 0) == 0 ||\n+          SafeFetchN(this->fp() + link_offset, 0) == 0\n+         ) return false;\n@@ -211,3 +217,1 @@\n-  \/\/ Will the pc we fetch be non-zero (which we'll find at the oldest frame)\n-\n-  if ((address) this->fp()[return_addr_offset] == NULL) return false;\n+  \/\/ Will the pc we fetch be non-zero (which we'll find at the oldest frame) and readable\n@@ -215,0 +219,1 @@\n+  if (SafeFetchN(this->fp() + return_addr_offset, 0) == 0) return false;\n","filename":"src\/hotspot\/cpu\/arm\/frame_arm.cpp","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -41,0 +41,1 @@\n+#include \"runtime\/safefetch.hpp\"\n@@ -132,0 +133,5 @@\n+      \/\/ check that the accessed stack slots are safe too\n+      if (SafeFetchN(this->fp() + return_addr_offset, 0) == 0 ||\n+          SafeFetchN(this->fp() + interpreter_frame_sender_sp_offset, 0) == 0 ||\n+          SafeFetchN(this->fp() + link_offset, 0) == 0\n+         ) return false;\n@@ -252,2 +258,3 @@\n-  \/\/ Will the pc we fetch be non-zero (which we'll find at the oldest frame)\n-  if ((address)this->fp()[return_addr_offset] == NULL) { return false; }\n+  \/\/ Will the pc we fetch be non-zero (which we'll find at the oldest frame) and readable\n+\n+  if (SafeFetchN(this->fp() + return_addr_offset, 0) == 0) return false;\n","filename":"src\/hotspot\/cpu\/riscv\/frame_riscv.cpp","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -39,0 +39,1 @@\n+#include \"runtime\/safefetch.hpp\"\n@@ -123,0 +124,5 @@\n+      \/\/ check that the accessed stack slots are safe too\n+      if (SafeFetchN(this->fp() + return_addr_offset, 0) == 0 ||\n+          SafeFetchN(this->fp() + interpreter_frame_sender_sp_offset, 0) == 0 ||\n+          SafeFetchN(this->fp() + link_offset, 0) == 0\n+         ) return false;\n@@ -254,1 +260,1 @@\n-  \/\/ Will the pc we fetch be non-zero (which we'll find at the oldest frame)\n+  \/\/ Will the pc we fetch be non-zero (which we'll find at the oldest frame) and readable\n@@ -256,1 +262,1 @@\n-  if ( (address) this->fp()[return_addr_offset] == NULL) return false;\n+  if (SafeFetchN(this->fp() + return_addr_offset, 0) == 0) return false;\n","filename":"src\/hotspot\/cpu\/x86\/frame_x86.cpp","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"}]}