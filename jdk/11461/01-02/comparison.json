{"files":[{"patch":"@@ -40,0 +40,1 @@\n+#include \"runtime\/safefetch.hpp\"\n@@ -45,1 +46,0 @@\n-#include \"runtime\/os.hpp\"\n@@ -268,6 +268,1 @@\n-  if (!thread->is_in_usable_stack((address)this->fp())) {\n-    return false;\n-  }\n-\n-  if ((address) this->fp()[return_addr_offset] == NULL) return false;\n-\n+  if (SafeFetchN(this->fp() + return_addr_offset, 0) == 0) return false;\n","filename":"src\/hotspot\/cpu\/aarch64\/frame_aarch64.cpp","additions":2,"deletions":7,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -39,0 +39,1 @@\n+#include \"runtime\/safefetch.hpp\"\n@@ -43,1 +44,0 @@\n-#include \"runtime\/os.hpp\"\n@@ -214,6 +214,1 @@\n-  if (!thread->is_in_usable_stack((address)this->fp())) {\n-    return false;\n-  }\n-\n-  if ((address) this->fp()[return_addr_offset] == NULL) return false;\n-\n+  if (SafeFetchN(this->fp() + return_addr_offset, 0) == 0) return false;\n","filename":"src\/hotspot\/cpu\/arm\/frame_arm.cpp","additions":2,"deletions":7,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -41,0 +41,1 @@\n+#include \"runtime\/safefetch.hpp\"\n@@ -252,2 +253,3 @@\n-  \/\/ Will the pc we fetch be non-zero (which we'll find at the oldest frame)\n-  if ((address)this->fp()[return_addr_offset] == NULL) { return false; }\n+  \/\/ Will the pc we fetch be non-zero (which we'll find at the oldest frame) and readable\n+\n+  if (SafeFetchN(this->fp() + return_addr_offset, 0) == 0) return false;\n","filename":"src\/hotspot\/cpu\/riscv\/frame_riscv.cpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -39,0 +39,1 @@\n+#include \"runtime\/safefetch.hpp\"\n@@ -254,2 +255,0 @@\n-  \/\/ Will the pc we fetch be non-zero (which we'll find at the oldest frame)\n-\n@@ -258,3 +257,1 @@\n-  if (!thread->is_in_usable_stack((address)this->fp())) {\n-    return false;\n-  }\n+  if (SafeFetchN(this->fp() + return_addr_offset, 0) == 0) return false;\n","filename":"src\/hotspot\/cpu\/x86\/frame_x86.cpp","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"}]}