{"files":[{"patch":"@@ -802,6 +802,8 @@\n-  if (ext_suspended && ((state & JVMTI_THREAD_STATE_ALIVE) != 0)) {\n-    state &= ~java_lang_VirtualThread::RUNNING;\n-    state |= JVMTI_THREAD_STATE_ALIVE | JVMTI_THREAD_STATE_RUNNABLE | JVMTI_THREAD_STATE_SUSPENDED;\n-  }\n-  if (interrupted) {\n-    state |= JVMTI_THREAD_STATE_INTERRUPTED;\n+  \/\/ Ensure the thread has not exited after retrieving suspended\/interrupted values.\n+  if ((state & JVMTI_THREAD_STATE_ALIVE) != 0) {\n+    if (ext_suspended) {\n+      state |= JVMTI_THREAD_STATE_SUSPENDED;\n+    }\n+    if (interrupted) {\n+      state |= JVMTI_THREAD_STATE_INTERRUPTED;\n+    }\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvBase.cpp","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -241,1 +241,0 @@\n-        \/* \"waiting\" test cases fail due JDK-8310584\n@@ -247,1 +246,0 @@\n-        *\/\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/vthread\/GetThreadStateMountedTest\/GetThreadStateMountedTest.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"}]}