{"files":[{"patch":"@@ -3462,1 +3462,1 @@\n-  predicate(n->as_Vector()->length() == 8);\n+  predicate(n->as_Vector()->length() == 4 || n->as_Vector()->length() == 8);\n","filename":"src\/hotspot\/cpu\/aarch64\/aarch64_neon.ad","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1424,2 +1424,0 @@\n-dnl\n-dnl\n@@ -1428,12 +1426,0 @@\n-define(`VABS', `\n-instruct vabs$1$2`'(vec$3 dst, vec$3 src)\n-%{\n-  predicate(n->as_Vector()->length() == $1);\n-  match(Set dst (AbsV$2 src));\n-  ins_cost(INSN_COST);\n-  format %{ \"abs  $dst, $src\\t# vector ($1$4)\" %}\n-  ins_encode %{\n-    __ absr(as_FloatRegister($dst$$reg), __ T$1$4, as_FloatRegister($src$$reg));\n-  %}\n-  ins_pipe(vlogical$5);\n-%}')dnl\n@@ -1441,11 +1427,2 @@\n-dnl $1   $2 $3 $4 $5\n-VABS(8,  B, D, B, 64)\n-VABS(16, B, X, B, 128)\n-VABS(4,  S, D, H, 64)\n-VABS(8,  S, X, H, 128)\n-VABS(2,  I, D, S, 64)\n-VABS(4,  I, X, S, 128)\n-VABS(2,  L, X, D, 128)\n-dnl\n-define(`VFABS', `\n-instruct vabs$1$2`'(vec$3 dst, vec$3 src)\n+define(`VABS', `\n+instruct vabs$3$4`'(vec$5 dst, vec$5 src)\n@@ -1453,4 +1430,4 @@\n-  predicate(n->as_Vector()->length() == $1);\n-  match(Set dst (AbsV$2 src));\n-  ins_cost(INSN_COST * 3);\n-  format %{ \"fabs  $dst, $src\\t# vector ($1$4)\" %}\n+  predicate(ifelse($3$4, 8B, n->as_Vector()->length() == 4 || )n->as_Vector()->length() == $3);\n+  match(Set dst (AbsV$4 src));\n+  ins_cost(ifelse($4, F, INSN_COST * 3, $4, D, INSN_COST * 3, INSN_COST));\n+  format %{ \"$1  $dst, $src\\t# vector ($3$6)\" %}\n@@ -1458,1 +1435,1 @@\n-    __ fabs(as_FloatRegister($dst$$reg), __ T$1$4, as_FloatRegister($src$$reg));\n+    __ $2(as_FloatRegister($dst$$reg), __ T$3$6, as_FloatRegister($src$$reg));\n@@ -1460,1 +1437,1 @@\n-  ins_pipe(vunop_fp$5);\n+  ins_pipe(ifelse($4, F, vunop_fp$7, $4, D, vunop_fp$7, vlogical$7));\n@@ -1462,6 +1439,11 @@\n-dnl\n-dnl   $1 $2 $3 $4 $5\n-VFABS(2, F, D, S, 64)\n-VFABS(4, F, X, S, 128)\n-VFABS(2, D, X, D, 128)\n-dnl\n+dnl  $1    $2    $3  $4 $5 $6 $7\n+VABS(abs,  absr, 8,  B, D, B, 64)\n+VABS(abs,  absr, 16, B, X, B, 128)\n+VABS(abs,  absr, 4,  S, D, H, 64)\n+VABS(abs,  absr, 8,  S, X, H, 128)\n+VABS(abs,  absr, 2,  I, D, S, 64)\n+VABS(abs,  absr, 4,  I, X, S, 128)\n+VABS(abs,  absr, 2,  L, X, D, 128)\n+VABS(fabs, fabs, 2,  F, D, S, 64)\n+VABS(fabs, fabs, 4,  F, X, S, 128)\n+VABS(fabs, fabs, 2,  D, X, D, 128)\n@@ -1470,0 +1452,1 @@\n+dnl\n@@ -1471,1 +1454,1 @@\n-instruct vabd$1$2`'(vec$3 dst, vec$3 src1, vec$3 src2)\n+instruct vabd$3$4`'(vec$5 dst, vec$5 src1, vec$5 src2)\n@@ -1473,2 +1456,2 @@\n-  predicate(n->as_Vector()->length() == $1);\n-  match(Set dst (AbsV$2 (SubV$2 src1 src2)));\n+  predicate(n->as_Vector()->length() == $3);\n+  match(Set dst (AbsV$4 (SubV$4 src1 src2)));\n@@ -1476,1 +1459,1 @@\n-  format %{ \"fabd  $dst, $src1, $src2\\t# vector ($1$4)\" %}\n+  format %{ \"$1  $dst, $src1, $src2\\t# vector ($3$6)\" %}\n@@ -1478,1 +1461,1 @@\n-    __ fabd(as_FloatRegister($dst$$reg), __ T$1$4,\n+    __ $2(as_FloatRegister($dst$$reg), __ T$3$6,\n@@ -1481,1 +1464,1 @@\n-  ins_pipe(vunop_fp$5);\n+  ins_pipe(vunop_fp$7);\n@@ -1483,5 +1466,4 @@\n-dnl\n-dnl   $1 $2 $3 $4 $5\n-VFABD(2, F, D, S, 64)\n-VFABD(4, F, X, S, 128)\n-VFABD(2, D, X, D, 128)\n+dnl   $1    $2    $3 $4 $5 $6 $7\n+VFABD(fabd, fabd, 2, F, D, S, 64)\n+VFABD(fabd, fabd, 4, F, X, S, 128)\n+VFABD(fabd, fabd, 2, D, X, D, 128)\n","filename":"src\/hotspot\/cpu\/aarch64\/aarch64_neon_ad.m4","additions":30,"deletions":48,"binary":false,"changes":78,"status":"modified"}]}