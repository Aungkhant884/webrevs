{"files":[{"patch":"@@ -176,2 +176,4 @@\n-  size_t used_c, comm_c, cap_c;\n-  usage_numbers(Metaspace::MetadataType::ClassType, &used_c, &comm_c, &cap_c);\n+  size_t used_c = 0, comm_c = 0, cap_c = 0;\n+  if (Metaspace::using_class_space()) {\n+    usage_numbers(Metaspace::MetadataType::ClassType, &used_c, &comm_c, &cap_c);\n+  }\n","filename":"src\/hotspot\/share\/memory\/classLoaderMetaspace.cpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -35,0 +35,11 @@\n+\/*\n+ * @test\n+ * @summary Test of diagnostic command VM.classloader_stats (-UseCCP)\n+ * @library \/test\/lib\n+ * @modules java.base\/jdk.internal.misc\n+ *          java.compiler\n+ *          java.management\n+ *          jdk.internal.jvmstat\/sun.jvmstat.monitor\n+ * @run testng\/othervm -XX:-UseCompressedClassPointers --add-exports=java.base\/jdk.internal.misc=ALL-UNNAMED --add-exports=jdk.internal.jvmstat\/sun.jvmstat.monitor=ALL-UNNAMED ClassLoaderStatsTest\n+ *\/\n+\n","filename":"test\/hotspot\/jtreg\/serviceability\/dcmd\/vm\/ClassLoaderStatsTest.java","additions":11,"deletions":0,"binary":false,"changes":11,"status":"modified"}]}