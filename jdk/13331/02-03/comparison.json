{"files":[{"patch":"@@ -3483,3 +3483,11 @@\n-            Type[] componentTypes = ((ClassSymbol) record.type.tsym).getRecordComponents()\n-                    .map(r -> types.memberType(record.type, r))\n-                    .toArray(s -> new Type[s]);\n+            Type[] componentTypes;\n+\n+            if (!record.type.isErroneous()) {\n+                componentTypes = ((ClassSymbol) record.type.tsym).getRecordComponents()\n+                        .map(r -> types.memberType(record.type, r))\n+                        .toArray(s -> new Type[s]);\n+            }\n+            else {\n+                componentTypes = record.nested.map(t -> types.createErrorType(t.type)).toArray(s -> new Type[s]);;\n+            }\n+\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Flow.java","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -28,2 +28,1 @@\n- * @enablePreview\n- * @compile\/fail\/ref=T8305582.out -XDrawDiagnostics --enable-preview -source ${jdk.version} -XDshould-stop.at=FLOW T8305582.java\n+ * @compile\/fail\/ref=T8305582.out -XDrawDiagnostics -XDshould-stop.at=FLOW T8305582.java\n","filename":"test\/langtools\/tools\/javac\/T8305582.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1,3 +1,4 @@\n-T8305582.java:48:26: compiler.err.restricted.type.not.allowed.here: var\n-T8305582.java:38:39: compiler.err.deconstruction.pattern.var.not.allowed\n-T8305582.java:41:31: compiler.err.deconstruction.pattern.var.not.allowed\n+T8305582.java:47:26: compiler.err.restricted.type.not.allowed.here: var\n+T8305582.java:37:39: compiler.err.deconstruction.pattern.var.not.allowed\n+T8305582.java:40:31: compiler.err.deconstruction.pattern.var.not.allowed\n+T8305582.java:45:39: compiler.err.deconstruction.pattern.var.not.allowed\n@@ -5,3 +6,0 @@\n-T8305582.java:47:39: compiler.err.deconstruction.pattern.var.not.allowed\n-- compiler.note.preview.filename: T8305582.java, DEFAULT\n-- compiler.note.preview.recompile\n","filename":"test\/langtools\/tools\/javac\/T8305582.out","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -25,3 +25,0 @@\n-\/\/ key: compiler.warn.preview.feature.use.plural\n-\/\/ key: compiler.misc.feature.deconstruction.patterns\n-\/\/ options: --enable-preview -source ${jdk.version} -Xlint:preview\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/DeconstructionpatternsNonVar.java","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"}]}