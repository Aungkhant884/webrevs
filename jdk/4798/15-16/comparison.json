{"files":[{"patch":"@@ -26,0 +26,1 @@\n+ * @bug 8269806\n@@ -122,1 +123,2 @@\n-            throw new Error(\"Required font not found: \" + font);\n+            System.err.println(\"Required font not found: \" + font);\n+            System.exit(0);\n","filename":"test\/jdk\/java\/awt\/font\/ComplexEmoji.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -30,2 +30,1 @@\n- *          including an accelerated (OpenGL or Metal) surface.\n- * @requires (os.family == \"mac\" | os.family == \"linux\")\n+ *          including an accelerated surface.\n@@ -39,0 +38,1 @@\n+import java.util.stream.Stream;\n@@ -48,0 +48,2 @@\n+        requireFont(\"Apple Color Emoji\", \"Segoe UI Emoji\", \"Noto Color Emoji\");\n+\n@@ -111,0 +113,14 @@\n+\n+    private static void requireFont(String macOS, String windows, String linux) {\n+        String os = System.getProperty(\"os.name\").toLowerCase();\n+        String font;\n+        if (os.contains(\"mac\")) font = macOS;\n+        else if (os.contains(\"windows\")) font = windows;\n+        else if (os.contains(\"linux\")) font = linux;\n+        else return;\n+        String[] fs = GraphicsEnvironment.getLocalGraphicsEnvironment().getAvailableFontFamilyNames();\n+        if (Stream.of(fs).noneMatch(s -> s.equals(font))) {\n+            System.err.println(\"Required font not found: \" + font);\n+            System.exit(0);\n+        }\n+    }\n","filename":"test\/jdk\/java\/awt\/font\/Emoji.java","additions":18,"deletions":2,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @bug 8269806\n@@ -188,1 +189,2 @@\n-            throw new Error(\"Required font not found: \" + font);\n+            System.err.println(\"Required font not found: \" + font);\n+            System.exit(0);\n","filename":"test\/jdk\/java\/awt\/font\/EmojiVariation.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+ * @bug 8269806\n@@ -183,1 +184,2 @@\n-            throw new Error(\"Required font not found: \" + font);\n+            System.err.println(\"Required font not found: \" + font);\n+            System.exit(0);\n","filename":"test\/jdk\/java\/awt\/font\/OutlineTextRendererEmoji.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"}]}