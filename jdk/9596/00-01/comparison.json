{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2019, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,0 +29,1 @@\n+import java.io.ByteArrayOutputStream;\n@@ -128,1 +129,1 @@\n-                new ArrayList<>((List<X509Certificate>)certs));\n+                new ArrayList<X509Certificate>((List<X509Certificate>)certs));\n@@ -187,1 +188,1 @@\n-            DerInputStream dis = new DerInputStream(is.readAllBytes());\n+            DerInputStream dis = new DerInputStream(readAllBytes(is));\n@@ -190,1 +191,1 @@\n-                return Collections.emptyList();\n+                return Collections.<X509Certificate>emptyList();\n@@ -194,1 +195,1 @@\n-            certList = new ArrayList<>(seq.length);\n+            certList = new ArrayList<X509Certificate>(seq.length);\n@@ -230,1 +231,1 @@\n-                is = new ByteArrayInputStream(is.readAllBytes());\n+                is = new ByteArrayInputStream(readAllBytes(is));\n@@ -240,1 +241,1 @@\n-                certList = new ArrayList<>(0);\n+                certList = new ArrayList<X509Certificate>(0);\n@@ -253,0 +254,16 @@\n+    \/*\n+     * Reads the entire contents of an InputStream into a byte array.\n+     *\n+     * @param is the InputStream to read from\n+     * @return the bytes read from the InputStream\n+     *\/\n+    private static byte[] readAllBytes(InputStream is) throws IOException {\n+        byte[] buffer = new byte[8192];\n+        ByteArrayOutputStream baos = new ByteArrayOutputStream(2048);\n+        int n;\n+        while ((n = is.read(buffer)) != -1) {\n+            baos.write(buffer, 0, n);\n+        }\n+        return baos.toByteArray();\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/sun\/security\/provider\/certpath\/X509CertPath.java","additions":24,"deletions":7,"binary":false,"changes":31,"status":"modified"}]}