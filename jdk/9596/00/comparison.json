{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -118,1 +118,0 @@\n-        byte[] buf = new byte[32*1024];\n@@ -123,4 +122,1 @@\n-                    int n;\n-                    while ((n = in.read(buf)) > 0) {\n-                        md.update(buf, 0, n);\n-                    }\n+                    md.update(in.readAllBytes());\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/module\/ModuleHashes.java","additions":2,"deletions":6,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,0 @@\n-import java.io.ByteArrayOutputStream;\n@@ -129,1 +128,1 @@\n-                new ArrayList<X509Certificate>((List<X509Certificate>)certs));\n+                new ArrayList<>((List<X509Certificate>)certs));\n@@ -188,1 +187,1 @@\n-            DerInputStream dis = new DerInputStream(readAllBytes(is));\n+            DerInputStream dis = new DerInputStream(is.readAllBytes());\n@@ -191,1 +190,1 @@\n-                return Collections.<X509Certificate>emptyList();\n+                return Collections.emptyList();\n@@ -195,1 +194,1 @@\n-            certList = new ArrayList<X509Certificate>(seq.length);\n+            certList = new ArrayList<>(seq.length);\n@@ -231,1 +230,1 @@\n-                is = new ByteArrayInputStream(readAllBytes(is));\n+                is = new ByteArrayInputStream(is.readAllBytes());\n@@ -241,1 +240,1 @@\n-                certList = new ArrayList<X509Certificate>(0);\n+                certList = new ArrayList<>(0);\n@@ -254,16 +253,0 @@\n-    \/*\n-     * Reads the entire contents of an InputStream into a byte array.\n-     *\n-     * @param is the InputStream to read from\n-     * @return the bytes read from the InputStream\n-     *\/\n-    private static byte[] readAllBytes(InputStream is) throws IOException {\n-        byte[] buffer = new byte[8192];\n-        ByteArrayOutputStream baos = new ByteArrayOutputStream(2048);\n-        int n;\n-        while ((n = is.read(buffer)) != -1) {\n-            baos.write(buffer, 0, n);\n-        }\n-        return baos.toByteArray();\n-    }\n-\n","filename":"src\/java.base\/share\/classes\/sun\/security\/provider\/certpath\/X509CertPath.java","additions":7,"deletions":24,"binary":false,"changes":31,"status":"modified"}]}