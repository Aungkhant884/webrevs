{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -234,2 +234,2 @@\n-    target = _MAGIC_ + *_lock;\n-  } while (Atomic::cmpxchg(_lock, val, target) != val);\n+    target = _MAGIC_ + val;\n+  } while (Atomic::cmpxchg(_lock, val, target, memory_order_relaxed) != val);\n","filename":"src\/hotspot\/share\/services\/mallocSiteTable.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -122,0 +122,1 @@\n+   private:\n@@ -128,1 +129,0 @@\n-   private:\n@@ -134,2 +134,2 @@\n-    LockState      _lock_state;\n-    volatile int*  _lock;\n+    LockState           _lock_state;\n+    volatile int* const _lock;\n@@ -143,1 +143,1 @@\n-        Atomic::dec(_lock);\n+        Atomic::dec(_lock, memory_order_relaxed);\n@@ -149,1 +149,1 @@\n-      jint res = Atomic::add(_lock, 1);\n+      jint res = Atomic::add(_lock, 1, memory_order_relaxed);\n@@ -151,1 +151,1 @@\n-        Atomic::dec(_lock);\n+        Atomic::dec(_lock, memory_order_relaxed);\n","filename":"src\/hotspot\/share\/services\/mallocSiteTable.hpp","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"}]}