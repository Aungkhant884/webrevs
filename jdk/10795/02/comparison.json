{"files":[{"patch":"@@ -72,4 +72,4 @@\n-    _recent_gc_times_ms(new TruncatedSeq(NumPrevPausesForHeuristics)),\n-    _concurrent_mark_remark_times_ms(new TruncatedSeq(NumPrevPausesForHeuristics)),\n-    _concurrent_mark_cleanup_times_ms(new TruncatedSeq(NumPrevPausesForHeuristics)),\n-    _alloc_rate_ms_seq(new TruncatedSeq(TruncatedSeqLength)),\n+    _recent_gc_times_ms(NumPrevPausesForHeuristics),\n+    _concurrent_mark_remark_times_ms(NumPrevPausesForHeuristics),\n+    _concurrent_mark_cleanup_times_ms(NumPrevPausesForHeuristics),\n+    _alloc_rate_ms_seq(TruncatedSeqLength),\n@@ -77,3 +77,3 @@\n-    _concurrent_refine_rate_ms_seq(new TruncatedSeq(TruncatedSeqLength)),\n-    _dirtied_cards_rate_ms_seq(new TruncatedSeq(TruncatedSeqLength)),\n-    _dirtied_cards_in_thread_buffers_seq(new TruncatedSeq(TruncatedSeqLength)),\n+    _concurrent_refine_rate_ms_seq(TruncatedSeqLength),\n+    _dirtied_cards_rate_ms_seq(TruncatedSeqLength),\n+    _dirtied_cards_in_thread_buffers_seq(TruncatedSeqLength),\n@@ -90,2 +90,2 @@\n-    _cost_per_byte_ms_during_cm_seq(new TruncatedSeq(TruncatedSeqLength)),\n-    _recent_prev_end_times_for_all_gcs_sec(new TruncatedSeq(NumPrevPausesForHeuristics)),\n+    _cost_per_byte_ms_during_cm_seq(TruncatedSeqLength),\n+    _recent_prev_end_times_for_all_gcs_sec(NumPrevPausesForHeuristics),\n@@ -96,1 +96,1 @@\n-  _recent_prev_end_times_for_all_gcs_sec->add(os::elapsedTime());\n+  _recent_prev_end_times_for_all_gcs_sec.add(os::elapsedTime());\n@@ -102,1 +102,1 @@\n-  _concurrent_refine_rate_ms_seq->add(1\/cost_per_logged_card_ms_defaults[0]);\n+  _concurrent_refine_rate_ms_seq.add(1\/cost_per_logged_card_ms_defaults[0]);\n@@ -104,1 +104,1 @@\n-  _dirtied_cards_rate_ms_seq->add(0.0);\n+  _dirtied_cards_rate_ms_seq.add(0.0);\n@@ -117,2 +117,2 @@\n-  _concurrent_mark_remark_times_ms->add(0.05);\n-  _concurrent_mark_cleanup_times_ms->add(0.20);\n+  _concurrent_mark_remark_times_ms.add(0.05);\n+  _concurrent_mark_cleanup_times_ms.add(0.20);\n@@ -150,1 +150,1 @@\n-  return _alloc_rate_ms_seq->num();\n+  return _alloc_rate_ms_seq.num();\n@@ -154,1 +154,1 @@\n-  _concurrent_mark_remark_times_ms->add(ms);\n+  _concurrent_mark_remark_times_ms.add(ms);\n@@ -158,1 +158,1 @@\n-  _alloc_rate_ms_seq->add(alloc_rate);\n+  _alloc_rate_ms_seq.add(alloc_rate);\n@@ -163,1 +163,1 @@\n-  double gc_pause_time_ms = _recent_gc_times_ms->sum() - _recent_gc_times_ms->oldest() + pause_time_ms;\n+  double gc_pause_time_ms = _recent_gc_times_ms.sum() - _recent_gc_times_ms.oldest() + pause_time_ms;\n@@ -173,1 +173,1 @@\n-  _concurrent_refine_rate_ms_seq->add(cards_per_ms);\n+  _concurrent_refine_rate_ms_seq.add(cards_per_ms);\n@@ -177,1 +177,1 @@\n-  _dirtied_cards_rate_ms_seq->add(cards_per_ms);\n+  _dirtied_cards_rate_ms_seq.add(cards_per_ms);\n@@ -181,1 +181,1 @@\n-  _dirtied_cards_in_thread_buffers_seq->add(double(cards));\n+  _dirtied_cards_in_thread_buffers_seq.add(double(cards));\n@@ -202,1 +202,1 @@\n-    _cost_per_byte_ms_during_cm_seq->add(cost_per_byte_ms);\n+    _cost_per_byte_ms_during_cm_seq.add(cost_per_byte_ms);\n@@ -229,2 +229,2 @@\n-  if (enough_samples_available(_alloc_rate_ms_seq)) {\n-    return predict_zero_bounded(_alloc_rate_ms_seq);\n+  if (enough_samples_available(&_alloc_rate_ms_seq)) {\n+    return predict_zero_bounded(&_alloc_rate_ms_seq);\n@@ -237,1 +237,1 @@\n-  return predict_zero_bounded(_concurrent_refine_rate_ms_seq);\n+  return predict_zero_bounded(&_concurrent_refine_rate_ms_seq);\n@@ -241,1 +241,1 @@\n-  return predict_zero_bounded(_dirtied_cards_rate_ms_seq);\n+  return predict_zero_bounded(&_dirtied_cards_rate_ms_seq);\n@@ -245,1 +245,1 @@\n-  return predict_size(_dirtied_cards_in_thread_buffers_seq);\n+  return predict_size(&_dirtied_cards_in_thread_buffers_seq);\n@@ -261,1 +261,1 @@\n-  if (!enough_samples_available(_cost_per_byte_ms_during_cm_seq)) {\n+  if (!enough_samples_available(&_cost_per_byte_ms_during_cm_seq)) {\n@@ -264,1 +264,1 @@\n-    return bytes_to_copy * predict_zero_bounded(_cost_per_byte_ms_during_cm_seq);\n+    return bytes_to_copy * predict_zero_bounded(&_cost_per_byte_ms_during_cm_seq);\n@@ -289,1 +289,1 @@\n-  return predict_zero_bounded(_concurrent_mark_remark_times_ms);\n+  return predict_zero_bounded(&_concurrent_mark_remark_times_ms);\n@@ -293,1 +293,1 @@\n-  return predict_zero_bounded(_concurrent_mark_cleanup_times_ms);\n+  return predict_zero_bounded(&_concurrent_mark_cleanup_times_ms);\n@@ -306,1 +306,1 @@\n-  return _recent_prev_end_times_for_all_gcs_sec->oldest();\n+  return _recent_prev_end_times_for_all_gcs_sec.oldest();\n@@ -310,1 +310,1 @@\n-  return _recent_prev_end_times_for_all_gcs_sec->last();\n+  return _recent_prev_end_times_for_all_gcs_sec.last();\n@@ -315,2 +315,2 @@\n-  _recent_gc_times_ms->add(pause_time_ms);\n-  _recent_prev_end_times_for_all_gcs_sec->add(end_time_sec);\n+  _recent_gc_times_ms.add(pause_time_ms);\n+  _recent_prev_end_times_for_all_gcs_sec.add(end_time_sec);\n@@ -320,1 +320,1 @@\n-  _concurrent_mark_cleanup_times_ms->add(ms);\n+  _concurrent_mark_cleanup_times_ms.add(ms);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1Analytics.cpp","additions":36,"deletions":36,"binary":false,"changes":72,"status":"modified"},{"patch":"@@ -41,1 +41,1 @@\n-  TruncatedSeq* _recent_gc_times_ms;\n+  TruncatedSeq _recent_gc_times_ms;\n@@ -43,2 +43,2 @@\n-  TruncatedSeq* _concurrent_mark_remark_times_ms;\n-  TruncatedSeq* _concurrent_mark_cleanup_times_ms;\n+  TruncatedSeq _concurrent_mark_remark_times_ms;\n+  TruncatedSeq _concurrent_mark_cleanup_times_ms;\n@@ -46,1 +46,1 @@\n-  TruncatedSeq* _alloc_rate_ms_seq;\n+  TruncatedSeq _alloc_rate_ms_seq;\n@@ -49,3 +49,3 @@\n-  TruncatedSeq* _concurrent_refine_rate_ms_seq;\n-  TruncatedSeq* _dirtied_cards_rate_ms_seq;\n-  TruncatedSeq* _dirtied_cards_in_thread_buffers_seq;\n+  TruncatedSeq _concurrent_refine_rate_ms_seq;\n+  TruncatedSeq _dirtied_cards_rate_ms_seq;\n+  TruncatedSeq _dirtied_cards_in_thread_buffers_seq;\n@@ -72,1 +72,1 @@\n-  TruncatedSeq* _cost_per_byte_ms_during_cm_seq;\n+  TruncatedSeq _cost_per_byte_ms_during_cm_seq;\n@@ -75,1 +75,1 @@\n-  TruncatedSeq* _recent_prev_end_times_for_all_gcs_sec;\n+  TruncatedSeq _recent_prev_end_times_for_all_gcs_sec;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1Analytics.hpp","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"}]}