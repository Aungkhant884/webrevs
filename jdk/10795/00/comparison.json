{"files":[{"patch":"@@ -72,4 +72,4 @@\n-    _recent_gc_times_ms(new TruncatedSeq(NumPrevPausesForHeuristics)),\n-    _concurrent_mark_remark_times_ms(new TruncatedSeq(NumPrevPausesForHeuristics)),\n-    _concurrent_mark_cleanup_times_ms(new TruncatedSeq(NumPrevPausesForHeuristics)),\n-    _alloc_rate_ms_seq(new TruncatedSeq(TruncatedSeqLength)),\n+    _recent_gc_times_ms(NumPrevPausesForHeuristics),\n+    _concurrent_mark_remark_times_ms(NumPrevPausesForHeuristics),\n+    _concurrent_mark_cleanup_times_ms(NumPrevPausesForHeuristics),\n+    _alloc_rate_ms_seq(TruncatedSeqLength),\n@@ -77,2 +77,2 @@\n-    _concurrent_refine_rate_ms_seq(new TruncatedSeq(TruncatedSeqLength)),\n-    _dirtied_cards_rate_ms_seq(new TruncatedSeq(TruncatedSeqLength)),\n+    _concurrent_refine_rate_ms_seq(TruncatedSeqLength),\n+    _dirtied_cards_rate_ms_seq(TruncatedSeqLength),\n@@ -89,2 +89,2 @@\n-    _cost_per_byte_ms_during_cm_seq(new TruncatedSeq(TruncatedSeqLength)),\n-    _recent_prev_end_times_for_all_gcs_sec(new TruncatedSeq(NumPrevPausesForHeuristics)),\n+    _cost_per_byte_ms_during_cm_seq(TruncatedSeqLength),\n+    _recent_prev_end_times_for_all_gcs_sec(NumPrevPausesForHeuristics),\n@@ -95,1 +95,1 @@\n-  _recent_prev_end_times_for_all_gcs_sec->add(os::elapsedTime());\n+  _recent_prev_end_times_for_all_gcs_sec.add(os::elapsedTime());\n@@ -101,1 +101,1 @@\n-  _concurrent_refine_rate_ms_seq->add(1\/cost_per_logged_card_ms_defaults[0]);\n+  _concurrent_refine_rate_ms_seq.add(1\/cost_per_logged_card_ms_defaults[0]);\n@@ -103,1 +103,1 @@\n-  _dirtied_cards_rate_ms_seq->add(0.0);\n+  _dirtied_cards_rate_ms_seq.add(0.0);\n@@ -116,2 +116,2 @@\n-  _concurrent_mark_remark_times_ms->add(0.05);\n-  _concurrent_mark_cleanup_times_ms->add(0.20);\n+  _concurrent_mark_remark_times_ms.add(0.05);\n+  _concurrent_mark_cleanup_times_ms.add(0.20);\n@@ -145,1 +145,1 @@\n-  return _alloc_rate_ms_seq->num();\n+  return _alloc_rate_ms_seq.num();\n@@ -149,1 +149,1 @@\n-  _concurrent_mark_remark_times_ms->add(ms);\n+  _concurrent_mark_remark_times_ms.add(ms);\n@@ -153,1 +153,1 @@\n-  _alloc_rate_ms_seq->add(alloc_rate);\n+  _alloc_rate_ms_seq.add(alloc_rate);\n@@ -158,1 +158,1 @@\n-  double gc_pause_time_ms = _recent_gc_times_ms->sum() - _recent_gc_times_ms->oldest() + pause_time_ms;\n+  double gc_pause_time_ms = _recent_gc_times_ms.sum() - _recent_gc_times_ms.oldest() + pause_time_ms;\n@@ -168,1 +168,1 @@\n-  _concurrent_refine_rate_ms_seq->add(cards_per_ms);\n+  _concurrent_refine_rate_ms_seq.add(cards_per_ms);\n@@ -172,1 +172,1 @@\n-  _dirtied_cards_rate_ms_seq->add(cards_per_ms);\n+  _dirtied_cards_rate_ms_seq.add(cards_per_ms);\n@@ -193,1 +193,1 @@\n-    _cost_per_byte_ms_during_cm_seq->add(cost_per_byte_ms);\n+    _cost_per_byte_ms_during_cm_seq.add(cost_per_byte_ms);\n@@ -220,2 +220,2 @@\n-  if (enough_samples_available(_alloc_rate_ms_seq)) {\n-    return predict_zero_bounded(_alloc_rate_ms_seq);\n+  if (enough_samples_available(&_alloc_rate_ms_seq)) {\n+    return predict_zero_bounded(&_alloc_rate_ms_seq);\n@@ -228,1 +228,1 @@\n-  return predict_zero_bounded(_concurrent_refine_rate_ms_seq);\n+  return predict_zero_bounded(&_concurrent_refine_rate_ms_seq);\n@@ -232,1 +232,1 @@\n-  return predict_zero_bounded(_dirtied_cards_rate_ms_seq);\n+  return predict_zero_bounded(&_dirtied_cards_rate_ms_seq);\n@@ -248,1 +248,1 @@\n-  if (!enough_samples_available(_cost_per_byte_ms_during_cm_seq)) {\n+  if (!enough_samples_available(&_cost_per_byte_ms_during_cm_seq)) {\n@@ -251,1 +251,1 @@\n-    return bytes_to_copy * predict_zero_bounded(_cost_per_byte_ms_during_cm_seq);\n+    return bytes_to_copy * predict_zero_bounded(&_cost_per_byte_ms_during_cm_seq);\n@@ -276,1 +276,1 @@\n-  return predict_zero_bounded(_concurrent_mark_remark_times_ms);\n+  return predict_zero_bounded(&_concurrent_mark_remark_times_ms);\n@@ -280,1 +280,1 @@\n-  return predict_zero_bounded(_concurrent_mark_cleanup_times_ms);\n+  return predict_zero_bounded(&_concurrent_mark_cleanup_times_ms);\n@@ -293,1 +293,1 @@\n-  return _recent_prev_end_times_for_all_gcs_sec->oldest();\n+  return _recent_prev_end_times_for_all_gcs_sec.oldest();\n@@ -297,1 +297,1 @@\n-  return _recent_prev_end_times_for_all_gcs_sec->last();\n+  return _recent_prev_end_times_for_all_gcs_sec.last();\n@@ -302,2 +302,2 @@\n-  _recent_gc_times_ms->add(pause_time_ms);\n-  _recent_prev_end_times_for_all_gcs_sec->add(end_time_sec);\n+  _recent_gc_times_ms.add(pause_time_ms);\n+  _recent_prev_end_times_for_all_gcs_sec.add(end_time_sec);\n@@ -307,1 +307,1 @@\n-  _concurrent_mark_cleanup_times_ms->add(ms);\n+  _concurrent_mark_cleanup_times_ms.add(ms);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1Analytics.cpp","additions":33,"deletions":33,"binary":false,"changes":66,"status":"modified"},{"patch":"@@ -41,1 +41,1 @@\n-  TruncatedSeq* _recent_gc_times_ms;\n+  TruncatedSeq _recent_gc_times_ms;\n@@ -43,2 +43,2 @@\n-  TruncatedSeq* _concurrent_mark_remark_times_ms;\n-  TruncatedSeq* _concurrent_mark_cleanup_times_ms;\n+  TruncatedSeq _concurrent_mark_remark_times_ms;\n+  TruncatedSeq _concurrent_mark_cleanup_times_ms;\n@@ -46,1 +46,1 @@\n-  TruncatedSeq* _alloc_rate_ms_seq;\n+  TruncatedSeq _alloc_rate_ms_seq;\n@@ -49,2 +49,2 @@\n-  TruncatedSeq* _concurrent_refine_rate_ms_seq;\n-  TruncatedSeq* _dirtied_cards_rate_ms_seq;\n+  TruncatedSeq _concurrent_refine_rate_ms_seq;\n+  TruncatedSeq _dirtied_cards_rate_ms_seq;\n@@ -71,1 +71,1 @@\n-  TruncatedSeq* _cost_per_byte_ms_during_cm_seq;\n+  TruncatedSeq _cost_per_byte_ms_during_cm_seq;\n@@ -74,1 +74,1 @@\n-  TruncatedSeq* _recent_prev_end_times_for_all_gcs_sec;\n+  TruncatedSeq _recent_prev_end_times_for_all_gcs_sec;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1Analytics.hpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"}]}