{"files":[{"patch":"@@ -117,3 +117,3 @@\n-    _no_escape_counter = C->congraph()->_prev_no_escape;\n-    _arg_escape_counter = C->congraph()->_prev_arg_escape;\n-    _global_escape_counter = C->congraph()->_prev_global_escape;\n+    Atomic::store(&_no_escape_counter, C->congraph()->_prev_no_escape);\n+    Atomic::store(&_arg_escape_counter, C->congraph()->_prev_arg_escape);\n+    Atomic::store(&_global_escape_counter, C->congraph()->_prev_global_escape);\n@@ -125,3 +125,3 @@\n-  congraph->_prev_no_escape = _no_escape_counter;\n-  congraph->_prev_arg_escape = _arg_escape_counter;\n-  congraph->_prev_global_escape = _global_escape_counter;\n+  congraph->_prev_no_escape = Atomic::load(&_no_escape_counter);\n+  congraph->_prev_arg_escape = Atomic::load(&_arg_escape_counter);\n+  congraph->_prev_global_escape = Atomic::load(&_global_escape_counter);\n@@ -144,1 +144,1 @@\n-  ConnectionGraph::_time_elapsed += et.seconds();\n+  Atomic::add(&ConnectionGraph::_time_elapsed, et.milliseconds());\n@@ -3683,1 +3683,1 @@\n-double ConnectionGraph::_time_elapsed = 0;\n+long ConnectionGraph::_time_elapsed = 0;\n@@ -3794,5 +3794,5 @@\n-  tty->print_cr(\"No escape: %d\", _no_escape_counter);\n-  tty->print_cr(\"Arg escape: %d\", _arg_escape_counter);\n-  tty->print_cr(\"Global escape: %d\", _global_escape_counter);\n-  tty->print_cr(\"Total java objects in escape analysis: %d\", _global_escape_counter +_arg_escape_counter + _no_escape_counter);\n-  tty->print_cr(\"Total time in escape analysis: %7.5f seconds\", _time_elapsed);\n+  tty->print_cr(\"No escape: %d\", Atomic::load(&_no_escape_counter));\n+  tty->print_cr(\"Arg escape: %d\", Atomic::load(&_arg_escape_counter));\n+  tty->print_cr(\"Global escape: %d\", Atomic::load(&_global_escape_counter));\n+  tty->print_cr(\"Total java objects in escape analysis: %d\", Atomic::load(&_global_escape_counter) + Atomic::load(&_arg_escape_counter) + Atomic::load(&_no_escape_counter));\n+  tty->print_cr(\"Total time in escape analysis: %7.2f seconds\", Atomic::load(&_time_elapsed) * 0.001);\n","filename":"src\/hotspot\/share\/opto\/escape.cpp","additions":13,"deletions":13,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -645,1 +645,1 @@\n-  static double _time_elapsed;\n+  static long _time_elapsed;\n","filename":"src\/hotspot\/share\/opto\/escape.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2601,4 +2601,4 @@\n-  tty->print_cr(\"Objects scalar replaced: %d\", _objs_scalar_replaced_counter);\n-  tty->print_cr(\"Monitor objects removed: %d\", _monitor_objects_removed_counter);\n-  tty->print_cr(\"GC barriers removed: %d\", _GC_barriers_removed_counter);\n-  tty->print_cr(\"Memory barriers removed: %d\", _memory_barriers_removed_counter);\n+  tty->print_cr(\"Objects scalar replaced: %d\", Atomic::load(&_objs_scalar_replaced_counter));\n+  tty->print_cr(\"Monitor objects removed: %d\", Atomic::load(&_monitor_objects_removed_counter));\n+  tty->print_cr(\"GC barriers removed: %d\", Atomic::load(&_GC_barriers_removed_counter));\n+  tty->print_cr(\"Memory barriers removed: %d\", Atomic::load(&_memory_barriers_removed_counter));\n","filename":"src\/hotspot\/share\/opto\/macro.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}