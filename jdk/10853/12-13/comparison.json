{"files":[{"patch":"@@ -64,1 +64,1 @@\n-# Cache a 10 digit number as the configuration id for the workspace where needed\n+# Cache a 10 digit number as the workspace id where needed\n@@ -67,1 +67,1 @@\n-RANDOM := $(call RandomDigits, 10)\n+WORKSPACE_ID := $(call RandomDigits, 10)\n@@ -236,1 +236,1 @@\n-    $$(call AppendFile,        <cconfiguration id=\"cdt.managedbuild.toolchain.gnu.cross.base.$(RANDOM)\">, $(NATIVE_FILE))\n+    $$(call AppendFile,        <cconfiguration id=\"cdt.managedbuild.toolchain.gnu.cross.base.$(WORKSPACE_ID)\">, $(NATIVE_FILE))\n@@ -239,1 +239,1 @@\n-    $$(call AppendFile,            <storageModule buildSystemId=\"org.eclipse.cdt.managedbuilder.core.configurationDataProvider\" id=\"cdt.managedbuild.toolchain.gnu.cross.base.$(RANDOM)\" moduleId=\"org.eclipse.cdt.core.settings\" name=\"Java SE\">, $(NATIVE_FILE))\n+    $$(call AppendFile,            <storageModule buildSystemId=\"org.eclipse.cdt.managedbuilder.core.configurationDataProvider\" id=\"cdt.managedbuild.toolchain.gnu.cross.base.$(WORKSPACE_ID)\" moduleId=\"org.eclipse.cdt.core.settings\" name=\"Java SE\">, $(NATIVE_FILE))\n@@ -254,2 +254,2 @@\n-    $$(call AppendFile,                <configuration buildProperties=\"\" description=\"\" id=\"cdt.managedbuild.toolchain.gnu.cross.base.$(RANDOM)\" name=\"Java SE\" parent=\"org.eclipse.cdt.build.core.emptycfg\">, $(NATIVE_FILE))\n-    $$(call AppendFile,                    <folderInfo id=\"cdt.managedbuild.toolchain.gnu.cross.base.$(RANDOM).$(call RandomDigits, 9)\" name=\"\/\" resourcePath=\"\">, $(NATIVE_FILE))\n+    $$(call AppendFile,                <configuration buildProperties=\"\" description=\"\" id=\"cdt.managedbuild.toolchain.gnu.cross.base.$(WORKSPACE_ID)\" name=\"Java SE\" parent=\"org.eclipse.cdt.build.core.emptycfg\">, $(NATIVE_FILE))\n+    $$(call AppendFile,                    <folderInfo id=\"cdt.managedbuild.toolchain.gnu.cross.base.$(WORKSPACE_ID).$(call RandomDigits, 9)\" name=\"\/\" resourcePath=\"\">, $(NATIVE_FILE))\n@@ -258,1 +258,1 @@\n-    $$(call AppendFile,                            <targetPlatform archList=\"all\" binaryParser=\"\" id=\"cdt.managedbuild.targetPlatform.gnu.cross.$(RANDOM)\" isAbstract=\"false\" osList=\"all\" superClass=\"cdt.managedbuild.targetPlatform.gnu.cross\"\/>, $(NATIVE_FILE))\n+    $$(call AppendFile,                            <targetPlatform archList=\"all\" binaryParser=\"\" id=\"cdt.managedbuild.targetPlatform.gnu.cross.$(WORKSPACE_ID)\" isAbstract=\"false\" osList=\"all\" superClass=\"cdt.managedbuild.targetPlatform.gnu.cross\"\/>, $(NATIVE_FILE))\n@@ -311,1 +311,1 @@\n-    $$(call AppendFile,    <configuration id=\"cdt.managedbuild.toolchain.gnu.cross.base.$(RANDOM)\" name=\"Java SE\">, $(LANGUAGE_SETTINGS))\n+    $$(call AppendFile,    <configuration id=\"cdt.managedbuild.toolchain.gnu.cross.base.$(WORKSPACE_ID)\" name=\"Java SE\">, $(LANGUAGE_SETTINGS))\n@@ -362,0 +362,8 @@\n+  ifeq ($$($1_NATURE), HOTSPOT)\n+    # Workspace support for only the Java Virtual Machine was requested\n+    # However, some headers from java.base are still needed by it, so if only the VM\n+    # was requested, add a special case here to pull in all those headers\n+    $$(foreach src,$$(strip $$(patsubst $(TOPDIR)\/%,%\/include,$$(call FindModuleNativeDirs, java.base))),$$(call EmitLinkedDirectory, $$(src),$(TOPDIR)\/$$(src)))\n+    $$(call EmitLinkedDirectory, src\/java.base\/share\/native\/libjimage,$(TOPDIR)\/src\/java.base\/share\/native\/libjimage)\n+  endif\n+\n@@ -372,6 +380,0 @@\n-  ifeq ($$($1_NATURE), HOTSPOT)\n-    # HotSpot still needs these source directories even if indexing for only it is requested\n-    $$(foreach src,$$(strip $$(patsubst $(TOPDIR)\/%,%\/include,$$(call FindModuleNativeDirs, java.base))),$$(call EmitLinkedDirectory, $$(src),$(TOPDIR)\/$$(src)))\n-    $$(call EmitLinkedDirectory, src\/java.base\/share\/native\/libjimage,$(TOPDIR)\/src\/java.base\/share\/native\/libjimage)\n-  endif\n-\n","filename":"make\/ide\/eclipse\/CreateWorkspace.gmk","additions":16,"deletions":14,"binary":false,"changes":30,"status":"modified"}]}