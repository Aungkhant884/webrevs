{"files":[{"patch":"@@ -35,1 +35,0 @@\n-import java.io.BufferedInputStream;\n@@ -38,0 +37,4 @@\n+\n+import java.util.*;\n+import java.util.function.*;\n+import java.io.BufferedInputStream;\n@@ -47,7 +50,0 @@\n-    String[] typeAnnosInfo = new String[] {\n-        \"@AnnosNotCopiedToAnonymousCtrTest$TypeAnnoForTypeParams; pos: [METHOD_TYPE_PARAMETER, param_index = 0, pos = -1]\",\n-        \"@AnnosNotCopiedToAnonymousCtrTest$TypeAnnoForTypeParams2; pos: [METHOD_TYPE_PARAMETER, param_index = 1, pos = -1]\",\n-        \"@AnnosNotCopiedToAnonymousCtrTest$TypeAnno; pos: [METHOD_RETURN, location = ([INNER_TYPE, INNER_TYPE]), pos = -1]\",\n-        \"@AnnosNotCopiedToAnonymousCtrTest$TypeAnno; pos: [METHOD_FORMAL_PARAMETER, param_index = 1, pos = -1]\"\n-    };\n-\n@@ -60,1 +56,7 @@\n-                this.getClass().getSimpleName() + \"$Test$1.class\"));\n+                this.getClass().getSimpleName() + \"$Test1$1.class\"), 2, typeAnnosInfoTest1);\n+\n+        checkClassFile(Paths.get(System.getProperty(\"test.classes\"),\n+                this.getClass().getSimpleName() + \"$Test2$1.class\"), 0, typeAnnosInfoTest2);\n+\n+        checkClassFile(Paths.get(System.getProperty(\"test.classes\"),\n+                this.getClass().getSimpleName() + \"$Test3$1.class\"), 0, typeAnnosInfoTest3);\n@@ -65,1 +67,1 @@\n-    void checkClassFile(final Path cfilePath) throws Throwable {\n+    void checkClassFile(final Path cfilePath, int paramAnnoPos, String... expectedTypeAnnosInfo) throws Throwable {\n@@ -74,1 +76,1 @@\n-                        new DeclAnnoData(Attribute.RuntimeInvisibleParameterAnnotations, \"LAnnosNotCopiedToAnonymousCtrTest$ParamAnnotation;\", 2) );\n+                        new DeclAnnoData(Attribute.RuntimeInvisibleParameterAnnotations, \"LAnnosNotCopiedToAnonymousCtrTest$ParamAnnotation;\", paramAnnoPos) );\n@@ -76,1 +78,1 @@\n-                checkForTypeAnnos(method.attributes, typeAnnosInfo);\n+                checkForTypeAnnos(method.attributes, expectedTypeAnnosInfo);\n@@ -117,0 +119,19 @@\n+    String[] typeAnnosInfoTest1 = new String[] {\n+            \"@AnnosNotCopiedToAnonymousCtrTest$TypeAnnoForTypeParams; pos: [METHOD_TYPE_PARAMETER, param_index = 0, pos = -1]\",\n+            \"@AnnosNotCopiedToAnonymousCtrTest$TypeAnnoForTypeParams2; pos: [METHOD_TYPE_PARAMETER, param_index = 1, pos = -1]\",\n+            \"@AnnosNotCopiedToAnonymousCtrTest$TypeAnno; pos: [METHOD_RETURN, location = ([INNER_TYPE, INNER_TYPE]), pos = -1]\",\n+            \"@AnnosNotCopiedToAnonymousCtrTest$TypeAnno; pos: [METHOD_FORMAL_PARAMETER, param_index = 1, pos = -1]\"\n+    };\n+\n+    String[] typeAnnosInfoTest2 = new String[] {\n+            \"@AnnosNotCopiedToAnonymousCtrTest$TypeAnnoForTypeParams; pos: [METHOD_TYPE_PARAMETER, param_index = 0, pos = -1]\",\n+            \"@AnnosNotCopiedToAnonymousCtrTest$TypeAnno; pos: [METHOD_RETURN, location = ([INNER_TYPE, INNER_TYPE]), pos = -1]\",\n+            \"@AnnosNotCopiedToAnonymousCtrTest$TypeAnno; pos: [METHOD_FORMAL_PARAMETER, param_index = 1, pos = -1]\"\n+    };\n+\n+    String[] typeAnnosInfoTest3 = new String[] {\n+            \"@AnnosNotCopiedToAnonymousCtrTest$TypeAnnoForTypeParams; pos: [METHOD_TYPE_PARAMETER, param_index = 0, pos = -1]\",\n+            \"@AnnosNotCopiedToAnonymousCtrTest$TypeAnno; pos: [METHOD_RETURN, location = ([INNER_TYPE, INNER_TYPE]), pos = -1]\",\n+            \"@AnnosNotCopiedToAnonymousCtrTest$TypeAnno; pos: [METHOD_FORMAL_PARAMETER, param_index = 1, pos = -1]\"\n+    };\n+\n@@ -132,1 +153,1 @@\n-    class Test {\n+    class Test1 {\n@@ -135,1 +156,1 @@\n-        <@TypeAnnoForTypeParams T, @TypeAnnoForTypeParams2 X> Test(String firstParam, @TypeAnno String secondParam, @ParamAnnotation String thirdParam) {}\n+        <@TypeAnnoForTypeParams T, @TypeAnnoForTypeParams2 X> Test1(String firstParam, @TypeAnno String secondParam, @ParamAnnotation String thirdParam) {}\n@@ -139,1 +160,24 @@\n-            new Test(\"\", \"\", \"\") {};\n+            new Test1(\"\", \"\", \"\") {};\n+        }\n+    }\n+\n+    \/\/ ----\n+    class Test2 {\n+        @TypeAnno\n+        @CtrAnnotation\n+        <@TypeAnnoForTypeParams T>\n+        Test2(@ParamAnnotation Collection<? extends T> collection, @TypeAnno int characteristics) {}\n+\n+        void m() {\n+            new Test2(null, 1) {};\n+        }\n+    }\n+\n+    class Test3 {\n+        @TypeAnno\n+        @CtrAnnotation\n+        <@TypeAnnoForTypeParams T>\n+        Test3(@ParamAnnotation Collection<? extends T>[] collection, @TypeAnno int characteristics) {}\n+\n+        void m() {\n+            new Test3(null, 1) {};\n","filename":"test\/langtools\/tools\/javac\/annos_not_copied_anonymous_ctr\/AnnosNotCopiedToAnonymousCtrTest.java","additions":59,"deletions":15,"binary":false,"changes":74,"status":"modified"}]}