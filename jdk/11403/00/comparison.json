{"files":[{"patch":"@@ -772,0 +772,6 @@\n+     * At most {@linkplain Long#MAX_VALUE} bytes may be transferred by a\n+     * single invocation of this method. If this input stream has more than\n+     * {@code Long.MAX_VALUE} bytes available to transfer, then to transfer\n+     * all bytes it should be invoked repeatedly with the same output stream\n+     * parameter until it returns zero.\n+     * <p>\n@@ -787,1 +793,0 @@\n-        long transferred = 0;\n@@ -789,0 +794,4 @@\n+        long transferred = 0;\n+        final long threshold = Long.MAX_VALUE - DEFAULT_BUFFER_SIZE;\n+\n+        \/\/ Read to EOF or until transferred count would overflow\n@@ -793,0 +802,11 @@\n+            if (transferred > threshold) {\n+                \/\/ Read any remaining bytes then exit the loop\n+                int remaining = (int)(Long.MAX_VALUE - transferred);\n+                while (remaining > 0 &&\n+                    (read = this.read(buffer, 0, remaining)) >= 0) {\n+                    out.write(buffer, 0, read);\n+                    transferred += read;\n+                    remaining -= read;\n+                }\n+                break;\n+            }\n@@ -794,0 +814,1 @@\n+\n","filename":"src\/java.base\/share\/classes\/java\/io\/InputStream.java","additions":22,"deletions":1,"binary":false,"changes":23,"status":"modified"}]}