{"files":[{"patch":"@@ -138,1 +138,1 @@\n-    protected void setEncoding() {\n+    private void setEncoding() {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/FontConfiguration.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -105,10 +105,0 @@\n-    @Override\n-    protected void setEncoding() {\n-        String nativeEncoding = System.getProperty(\"native.encoding\");\n-        Charset cs = (nativeEncoding != null) ?\n-                     Charset.forName(nativeEncoding) :\n-                     Charset.defaultCharset();\n-        encoding = cs.name();\n-        startupLocale = sun.awt.SunToolkit.getStartupLocale();\n-    }\n-\n@@ -221,1 +211,2 @@\n-        if (\"x-MS950-HKSCS\".equals(defaultEncoding)) {\n+        if (\"x-MS950-HKSCS\".equals(defaultEncoding) ||\n+            \"HK\".equals(startupLocale.getCountry())) {\n@@ -238,27 +229,18 @@\n-        if (\"windows-1256\".equals(defaultEncoding)) {\n-            textInputCharset = \"ARABIC_CHARSET\";\n-        } else if (\"GBK\".equals(defaultEncoding)) {\n-            textInputCharset = \"GB2312_CHARSET\";\n-        } else if (\"GB18030\".equals(defaultEncoding)) {\n-            textInputCharset = \"GB2312_CHARSET\";\n-        } else if (\"x-windows-950\".equals(defaultEncoding)) {\n-            textInputCharset = \"CHINESEBIG5_CHARSET\";\n-        } else if (\"x-MS950-HKSCS\".equals(defaultEncoding)) {\n-            textInputCharset = \"CHINESEBIG5_CHARSET\";\n-        } else if (\"windows-1251\".equals(defaultEncoding)) {\n-            textInputCharset = \"RUSSIAN_CHARSET\";\n-        } else if (\"UTF-8\".equals(defaultEncoding)) {\n-            textInputCharset = \"DEFAULT_CHARSET\";\n-        } else if (\"windows-1253\".equals(defaultEncoding)) {\n-            textInputCharset = \"GREEK_CHARSET\";\n-        } else if (\"windows-1255\".equals(defaultEncoding)) {\n-            textInputCharset = \"HEBREW_CHARSET\";\n-        } else if (\"windows-31j\".equals(defaultEncoding)) {\n-            textInputCharset = \"SHIFTJIS_CHARSET\";\n-        } else if (\"x-windows-949\".equals(defaultEncoding)) {\n-            textInputCharset = \"HANGEUL_CHARSET\";\n-        } else if (\"x-windows-874\".equals(defaultEncoding)) {\n-            textInputCharset = \"THAI_CHARSET\";\n-        } else {\n-            textInputCharset = \"DEFAULT_CHARSET\";\n-        }\n+        textInputCharset = switch(startupLocale.getLanguage()) {\n+            case \"ar\" -> \"ARABIC_CHARSET\";\n+            case \"zh\" -> {\n+                String country = startupLocale.getCountry();\n+                if (country.equals(\"TW\") || country.equals(\"HK\")) {\n+                    yield \"CHINESEBIG5_CHARSET\";\n+                } else {\n+                    yield \"GB2312_CHARSET\";\n+                }\n+            }\n+            case \"ru\" -> \"RUSSIAN_CHARSET\";\n+            case \"el\" -> \"GREEK_CHARSET\";\n+            case \"iw\" -> \"HEBREW_CHARSET\";\n+            case \"ja\" -> \"SHIFTJIS_CHARSET\";\n+            case \"ko\" -> \"HANGEUL_CHARSET\";\n+            case \"th\" -> \"THAI_CHARSET\";\n+            default -> \"DEFAULT_CHARSET\";\n+        };\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/WFontConfiguration.java","additions":20,"deletions":38,"binary":false,"changes":58,"status":"modified"}]}