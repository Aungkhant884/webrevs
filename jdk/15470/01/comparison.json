{"files":[{"patch":"@@ -431,3 +431,0 @@\n-        boolean useStringTable = options.isSet(\"useStringTable\");\n-        if (useStringTable)\n-            return newStringNameTable();\n@@ -437,1 +434,5 @@\n-        return newSharedNameTable();\n+        boolean useSharedTable = options.isSet(\"useSharedTable\");\n+        if (useSharedTable)\n+            return newSharedNameTable();\n+        boolean internStringTable = options.isSet(\"internStringTable\");\n+        return newStringNameTable(internStringTable);\n@@ -440,2 +441,2 @@\n-    public StringNameTable newStringNameTable() {\n-        return StringNameTable.create(this);\n+    public StringNameTable newStringNameTable(boolean intern) {\n+        return StringNameTable.create(this, intern);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/util\/Names.java","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -41,0 +41,1 @@\n+    private final boolean intern;\n@@ -44,2 +45,2 @@\n-    public static StringNameTable create(Names names) {\n-        return new StringNameTable(names);\n+    public static StringNameTable create(Names names, boolean intern) {\n+        return new StringNameTable(names, intern);\n@@ -50,2 +51,2 @@\n-    public StringNameTable(Names names) {\n-        this(names, 0x8000);\n+    public StringNameTable(Names names, boolean intern) {\n+        this(names, 0x8000, intern);\n@@ -54,1 +55,1 @@\n-    public StringNameTable(Names names, int initialCapacity) {\n+    public StringNameTable(Names names, int initialCapacity, boolean intern) {\n@@ -57,0 +58,1 @@\n+        this.intern = intern;\n@@ -63,1 +65,1 @@\n-        return this.nameMap.computeIfAbsent(string, s -> new NameImpl(this, s));\n+        return this.nameMap.computeIfAbsent(string, s -> new NameImpl(this, intern ? s.intern() : s));\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/util\/StringNameTable.java","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"}]}