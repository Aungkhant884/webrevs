{"files":[{"patch":"@@ -186,1 +186,2 @@\n-static size_t buffers_to_cards(size_t value) {\n+\/\/ Convert configuration values in units of buffers to number of cards.\n+static size_t configuration_buffers_to_cards(size_t value, const char* value_name) {\n@@ -190,2 +191,3 @@\n-  if (res < value || res < G1UpdateBufferSize) { \/\/ Check overflow\n-    vm_exit_during_initialization(\"buffers_to_cards overflow!\");\n+  if (res \/ value != G1UpdateBufferSize) { \/\/ Check overflow\n+    vm_exit_during_initialization(err_msg(\"configuration_buffers_to_cards: \"\n+      \"(%s = \" SIZE_FORMAT \") * (G1UpdateBufferSize = \" SIZE_FORMAT \") overflow!\", value_name, value, G1UpdateBufferSize));\n@@ -215,1 +217,1 @@\n-    step = MIN2(step, buffers_to_cards(ParallelGCThreads) \/ 2.0);\n+    step = MIN2(step, configuration_buffers_to_cards(ParallelGCThreads, \"ParallelGCThreads\") \/ 2.0);\n@@ -241,1 +243,1 @@\n-  size_t step = buffers_to_cards(G1ConcRefinementThresholdStep);\n+  size_t step = configuration_buffers_to_cards(G1ConcRefinementThresholdStep, \"G1ConcRefinementThresholdStep\");\n@@ -252,0 +254,1 @@\n+  char* name = (char*) \"G1ConcRefinementGreenZone\";\n@@ -254,0 +257,1 @@\n+    name = (char*) \"ParallelGCThreads\";\n@@ -255,1 +259,1 @@\n-  green = buffers_to_cards(green);\n+  green = configuration_buffers_to_cards(green, name);\n@@ -260,1 +264,1 @@\n-  size_t config = buffers_to_cards(G1ConcRefinementYellowZone);\n+  size_t config = configuration_buffers_to_cards(G1ConcRefinementYellowZone, \"G1ConcRefinementYellowZone\");\n@@ -275,1 +279,1 @@\n-    size_t config = buffers_to_cards(G1ConcRefinementRedZone);\n+    size_t config = configuration_buffers_to_cards(G1ConcRefinementRedZone, \"G1ConcRefinementRedZone\");\n","filename":"src\/hotspot\/share\/gc\/g1\/g1ConcurrentRefine.cpp","additions":12,"deletions":8,"binary":false,"changes":20,"status":"modified"}]}