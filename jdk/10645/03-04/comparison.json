{"files":[{"patch":"@@ -135,0 +135,3 @@\n+  print_on(tty);\n+}\n+void StackValueCollection::print_on(outputStream* st) const {\n@@ -136,2 +139,2 @@\n-    tty->print(\"\\t  %2d \", index);\n-    at(index)->print_on(tty);\n+    st->print(\"\\t  %2d \", index);\n+    at(index)->print_on(st);\n@@ -141,4 +144,4 @@\n-      tty->print(\"  \" INT64_FORMAT \" (long)\", (int64_t)long_at(index));\n-      tty->cr();\n-      tty->print(\"\\t     %.15e (double)\", double_at(index));\n-      tty->print(\"  \" INT64_FORMAT_X_0 \" (longhex)\", (int64_t)long_at(index));\n+      st->print(\"  \" INT64_FORMAT \" (long)\", (int64_t)long_at(index));\n+      st->cr();\n+      st->print(\"\\t     %.15e (double)\", double_at(index));\n+      st->print(\"  \" INT64_FORMAT_X_0 \" (longhex)\", (int64_t)long_at(index));\n@@ -146,1 +149,1 @@\n-    tty->cr();\n+    st->cr();\n@@ -149,1 +152,1 @@\n-#endif\n+#endif \/\/ !PRODUCT\n","filename":"src\/hotspot\/share\/runtime\/stackValueCollection.cpp","additions":11,"deletions":8,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -59,0 +59,1 @@\n+#ifndef PRODUCT\n@@ -60,0 +61,2 @@\n+  void print_on(outputStream* st) const override;\n+#endif \/\/ !PRODUCT\n","filename":"src\/hotspot\/share\/runtime\/stackValueCollection.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -54,0 +54,1 @@\n+#include \"runtime\/vframe.hpp\"\n@@ -696,0 +697,6 @@\n+void entryVFrame::print_on(outputStream *st) const {\n+  vframe::print_on(st);\n+  st->print_cr(\"C Chunk in between Java\");\n+  st->print_cr(\"C     link \" INTPTR_FORMAT, p2i(_fr.link()));\n+}\n+\n@@ -697,3 +704,1 @@\n-  vframe::print();\n-  tty->print_cr(\"C Chunk in between Java\");\n-  tty->print_cr(\"C     link \" INTPTR_FORMAT, p2i(_fr.link()));\n+  print_on(tty);\n@@ -705,1 +710,2 @@\n-static void print_stack_values(const char* title, StackValueCollection* values) {\n+static void print_stack_values_on(const char* title, StackValueCollection* values,\n+                                  outputStream* st) {\n@@ -707,2 +713,2 @@\n-  tty->print_cr(\"\\t%s:\", title);\n-  values->print();\n+  st->print_cr(\"\\t%s:\", title);\n+  values->print_on(st);\n@@ -711,1 +717,0 @@\n-\n@@ -713,0 +718,4 @@\n+  print_on(tty);\n+}\n+\n+void javaVFrame::print_on(outputStream* st) const {\n@@ -717,5 +726,5 @@\n-  vframe::print();\n-  tty->print(\"\\t\");\n-  method()->print_value();\n-  tty->cr();\n-  tty->print_cr(\"\\tbci:    %d\", bci());\n+  vframe::print_on(st);\n+  st->print(\"\\t\");\n+  method()->print_value_on(st);\n+  st->cr();\n+  st->print_cr(\"\\tbci:    %d\", bci());\n@@ -723,2 +732,2 @@\n-  print_stack_values(\"locals\",      locals());\n-  print_stack_values(\"expressions\", expressions());\n+  print_stack_values_on(\"locals\",      locals(), st);\n+  print_stack_values_on(\"expressions\", expressions(), st);\n@@ -728,1 +737,1 @@\n-  tty->print_cr(\"\\tmonitor list:\");\n+  st->print_cr(\"\\tmonitor list:\");\n@@ -731,1 +740,1 @@\n-    tty->print(\"\\t  obj\\t\");\n+    st->print(\"\\t  obj\\t\");\n@@ -734,1 +743,1 @@\n-      tty->print(\"( is scalar replaced %s)\", k->external_name());\n+      st->print(\"( is scalar replaced %s)\", k->external_name());\n@@ -736,1 +745,1 @@\n-      tty->print(\"( null )\");\n+      st->print(\"( null )\");\n@@ -739,1 +748,1 @@\n-      tty->print(\"(owner=\" INTPTR_FORMAT \")\", p2i(monitor->owner()));\n+      st->print(\"(owner=\" INTPTR_FORMAT \")\", p2i(monitor->owner()));\n@@ -743,1 +752,1 @@\n-        tty->print(\" ( lock is eliminated in compiled frame )\");\n+        st->print(\" ( lock is eliminated in compiled frame )\");\n@@ -745,1 +754,1 @@\n-        tty->print(\" ( lock is eliminated, frame not compiled )\");\n+        st->print(\" ( lock is eliminated, frame not compiled )\");\n@@ -748,4 +757,4 @@\n-    tty->cr();\n-    tty->print(\"\\t  \");\n-    monitor->lock()->print_on(tty, monitor->owner());\n-    tty->cr();\n+    st->cr();\n+    st->print(\"\\t  \");\n+    monitor->lock()->print_on(st, monitor->owner());\n+    st->cr();\n@@ -841,0 +850,4 @@\n+void externalVFrame::print_on(outputStream *st) const {\n+  _fr.print_value_on(st,NULL);\n+}\n+\n@@ -842,1 +855,1 @@\n-  _fr.print_value_on(tty,NULL);\n+  print_on(tty);\n","filename":"src\/hotspot\/share\/runtime\/vframe.cpp","additions":39,"deletions":26,"binary":false,"changes":65,"status":"modified"},{"patch":"@@ -159,2 +159,3 @@\n-  void print();\n-  void print_value() const;\n+  void print() override;\n+  void print_on(outputStream* st) const override;\n+  void print_value() const override;\n@@ -224,1 +225,2 @@\n-  void print();\n+  void print_on(outputStream* st) const override;\n+  void print() override;\n@@ -247,1 +249,2 @@\n-  void print();\n+  void print_on(outputStream* st) const override;\n+  void print() override;\n","filename":"src\/hotspot\/share\/runtime\/vframe.hpp","additions":7,"deletions":4,"binary":false,"changes":11,"status":"modified"}]}