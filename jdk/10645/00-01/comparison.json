{"files":[{"patch":"@@ -441,1 +441,4 @@\n-    log_debug(deoptimization)(\"Exception to be rethrown in the interpreter for method %s::%s at bci %d\", trap_scope->method()->method_holder()->name()->as_C_string(), trap_scope->method()->name()->as_C_string(), trap_scope->bci());\n+    log_debug(deoptimization)(\n+        \"Exception to be rethrown in the interpreter for method %s::%s at bci %d\",\n+        trap_scope->method()->method_holder()->name()->as_C_string(),\n+        trap_scope->method()->name()->as_C_string(), trap_scope->bci());\n@@ -1472,1 +1475,1 @@\n-          if (lm.is_debug()) {\n+          if (lm.is_trace()) {\n","filename":"src\/hotspot\/share\/runtime\/deoptimization.cpp","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -681,1 +681,1 @@\n-  if (WizardMode) print_on(tty);\n+  print_on(tty);\n@@ -684,1 +684,1 @@\n-  if (WizardMode) _fr.print_value_on(st,NULL);\n+  _fr.print_value_on(st,NULL);\n","filename":"src\/hotspot\/share\/runtime\/vframe.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -337,16 +337,0 @@\n-#ifndef PRODUCT\n-  auto log_deopt = [](int i, intptr_t* addr) {\n-    LogTarget(Debug, deoptimization) lt;\n-    if (lt.is_enabled()) {\n-      LogStream ls(lt);\n-      ls.print(\" - Reconstructed expression %d (OBJECT): \", i);\n-      oop o = cast_to_oop((address)(*addr));\n-      if (o == NULL) {\n-        ls.print_cr(\"NULL\");\n-      } else {\n-        ResourceMark rm;\n-        ls.print_raw_cr(o->klass()->name()->as_C_string());\n-      }\n-    }\n-  };\n-#endif \/\/ !PRODUCT\n@@ -367,1 +351,14 @@\n-        log_deopt(i, addr);\n+        {\n+          LogTarget(Debug, deoptimization) lt;\n+          if (lt.is_enabled()) {\n+            LogStream ls(lt);\n+            ls.print(\" - Reconstructed expression %d (OBJECT): \", i);\n+            oop o = cast_to_oop((address)(*addr));\n+            if (o == NULL) {\n+              ls.print_cr(\"NULL\");\n+            } else {\n+              ResourceMark rm;\n+              ls.print_raw_cr(o->klass()->name()->as_C_string());\n+            }\n+          }\n+        }\n@@ -380,14 +377,0 @@\n-  auto log_it = [](int i, intptr_t* addr) {\n-    LogTarget(Debug, deoptimization) lt;\n-    if (lt.is_enabled()) {\n-      LogStream ls(lt);\n-      ls.print(\" - Reconstructed local %d (OBJECT): \", i);\n-      oop o = cast_to_oop((address)(*addr));\n-      if (o == NULL) {\n-        ls.print_cr(\"NULL\");\n-      } else {\n-        ResourceMark rm;\n-        ls.print_raw_cr(o->klass()->name()->as_C_string());\n-      }\n-    }\n-  };\n@@ -410,1 +393,14 @@\n-        log_it(i, addr);\n+        {\n+          LogTarget(Debug, deoptimization) lt;\n+          if (lt.is_enabled()) {\n+            LogStream ls(lt);\n+            ls.print(\" - Reconstructed local %d (OBJECT): \", i);\n+            oop o = cast_to_oop((address)(*addr));\n+            if (o == NULL) {\n+              ls.print_cr(\"NULL\");\n+            } else {\n+              ResourceMark rm;\n+              ls.print_raw_cr(o->klass()->name()->as_C_string());\n+            }\n+          }\n+        }\n","filename":"src\/hotspot\/share\/runtime\/vframeArray.cpp","additions":28,"deletions":32,"binary":false,"changes":60,"status":"modified"},{"patch":"@@ -45,1 +45,1 @@\n- *      -XX:+UseZGC -XX:+LogCompilation -XX:+TraceDeoptimization -XX:+Verbose\n+ *      -XX:+UseZGC -XX:+LogCompilation -Xlog:disable -Xlog:deoptimization=trace -XX:+TraceDeoptimization -XX:+Verbose\n","filename":"test\/hotspot\/jtreg\/compiler\/uncommontrap\/TestDeoptOOM.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}