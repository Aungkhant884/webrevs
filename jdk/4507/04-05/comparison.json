{"files":[{"patch":"@@ -35,0 +35,1 @@\n+import jdk.internal.util.Preconditions;\n@@ -412,3 +413,1 @@\n-        if (i < 0 || i >= count) {\n-            throw new StringIndexOutOfBoundsException(index);\n-        }\n+        checkIndex(i, count);\n@@ -508,1 +507,1 @@\n-        checkRangeSIOOBE(srcBegin, srcEnd, count);  \/\/ compatible to old version\n+        Preconditions.checkFromToIndex(srcBegin, srcEnd, count, Preconditions.SIOOBE_FORMATTER);  \/\/ compatible to old version\n@@ -510,1 +509,1 @@\n-        checkRange(dstBegin, dstBegin + n, dst.length);\n+        Preconditions.checkFromToIndex(dstBegin, dstBegin + n, dst.length, Preconditions.IOOBE_FORMATTER);\n@@ -680,1 +679,1 @@\n-        checkRange(start, end, s.length());\n+        Preconditions.checkFromToIndex(start, end, s.length(), Preconditions.IOOBE_FORMATTER);\n@@ -739,1 +738,1 @@\n-        checkRange(offset, end, str.length);\n+        Preconditions.checkFromToIndex(offset, end, str.length, Preconditions.IOOBE_FORMATTER);\n@@ -917,1 +916,1 @@\n-        checkRangeSIOOBE(start, end, count);\n+        Preconditions.checkFromToIndex(start, end, count, Preconditions.SIOOBE_FORMATTER);\n@@ -1000,1 +999,1 @@\n-        checkRangeSIOOBE(start, end, count);\n+        Preconditions.checkFromToIndex(start, end, count, Preconditions.SIOOBE_FORMATTER);\n@@ -1070,1 +1069,1 @@\n-        checkRangeSIOOBE(start, end, count);\n+        Preconditions.checkFromToIndex(start, end, count, Preconditions.SIOOBE_FORMATTER);\n@@ -1107,1 +1106,1 @@\n-        checkRangeSIOOBE(offset, offset + len, str.length);\n+        Preconditions.checkFromToIndex(offset, offset + len, str.length, Preconditions.SIOOBE_FORMATTER);\n@@ -1295,1 +1294,1 @@\n-        checkRange(start, end, s.length());\n+        Preconditions.checkFromToIndex(start, end, s.length(), Preconditions.IOOBE_FORMATTER);\n@@ -1798,16 +1797,0 @@\n-\n-    \/* IndexOutOfBoundsException, if out of bounds *\/\n-    private static void checkRange(int start, int end, int len) {\n-        if (start < 0 || start > end || end > len) {\n-            throw new IndexOutOfBoundsException(\n-                \"start \" + start + \", end \" + end + \", length \" + len);\n-        }\n-    }\n-\n-    \/* StringIndexOutOfBoundsException, if out of bounds *\/\n-    private static void checkRangeSIOOBE(int start, int end, int len) {\n-        if (start < 0 || start > end || end > len) {\n-            throw new StringIndexOutOfBoundsException(\n-                \"start \" + start + \", end \" + end + \", length \" + len);\n-        }\n-    }\n","filename":"src\/java.base\/share\/classes\/java\/lang\/AbstractStringBuilder.java","additions":11,"deletions":28,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -1575,3 +1575,1 @@\n-        if (i < 0 || i >= length()) {\n-            throw new StringIndexOutOfBoundsException(index);\n-        }\n+        checkIndex(i, length());\n","filename":"src\/java.base\/share\/classes\/java\/lang\/String.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"}]}