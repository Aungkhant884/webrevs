{"files":[{"patch":"@@ -216,1 +216,1 @@\n-     * <p> The returned stream contains references to one or more open directories\n+     * <p> The returned stream may contain references to one or more open directories\n@@ -223,3 +223,3 @@\n-     * This method must be used within a try-with-resources statement or similar\n-     * control structure to ensure that the stream's open directories are closed\n-     * promptly after the stream's operations have completed.\n+     * This method should be used within a try-with-resources statement or similar\n+     * control structure to ensure that any open directories referenced by the\n+     * stream are closed promptly after the stream's operations have completed.\n","filename":"src\/java.base\/share\/classes\/java\/lang\/module\/ModuleReader.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -44,0 +44,1 @@\n+import java.util.stream.Stream;\n@@ -117,1 +118,1 @@\n-        try {\n+        try (Stream<String> stream = reader.list()){\n@@ -119,1 +120,1 @@\n-            reader.list().sorted().forEach(rn -> {\n+            stream.sorted().forEach(rn -> {\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/module\/ModuleHashes.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -31,0 +31,1 @@\n+import java.util.stream.Stream;\n@@ -82,2 +83,3 @@\n-        try (ModuleReader reader = mref.open()) {\n-            reader.list().forEach(name -> {\n+        try (ModuleReader reader = mref.open();\n+             Stream<String> stream = reader.list()) {\n+            stream.forEach(name -> {\n","filename":"test\/jdk\/java\/lang\/ClassLoader\/getResource\/automaticmodules\/Main.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -409,2 +409,3 @@\n-        try (ModuleReader reader = mref.open()) {\n-            return reader.list()\n+        try (ModuleReader reader = mref.open();\n+             Stream<String> stream = reader.list()) {\n+            return stream\n","filename":"test\/jdk\/java\/lang\/invoke\/callerSensitive\/CallerSensitiveAccess.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -57,0 +57,1 @@\n+import java.util.stream.Stream;\n@@ -416,1 +417,4 @@\n-        List<String> list = reader.list().collect(Collectors.toList());\n+        final List<String> list;\n+        try (Stream<String> stream = reader.list()) {\n+            list = stream.toList();\n+        }\n","filename":"test\/jdk\/java\/lang\/module\/ModuleReader\/ModuleReaderTest.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -47,0 +47,1 @@\n+import java.util.stream.Stream;\n@@ -111,2 +112,3 @@\n-            try (ModuleReader reader = mref.open()) {\n-                reader.list().forEach(name -> System.out.format(\"  %s%n\", name));\n+            try (ModuleReader reader = mref.open();\n+                 Stream<String> stream = reader.list()) {\n+                stream.forEach(name -> System.out.format(\"  %s%n\", name));\n","filename":"test\/jdk\/java\/lang\/module\/customfs\/ModulesInCustomFileSystem.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"}]}