{"files":[{"patch":"@@ -112,19 +112,0 @@\n-    @Override\n-    public void addMemberHeader(TypeElement fieldType, String fieldTypeStr,\n-            String fieldDimensions, String fieldName, Content contentTree) {\n-        Content nameContent = Text.of(fieldName);\n-        Content heading = HtmlTree.HEADING(Headings.SerializedForm.MEMBER_HEADING, nameContent);\n-        contentTree.add(heading);\n-        Content pre = new HtmlTree(TagName.PRE);\n-        if (fieldType == null) {\n-            pre.add(fieldTypeStr);\n-        } else {\n-            Content fieldContent = writer.getLink(new HtmlLinkInfo(\n-                    configuration, HtmlLinkInfo.Kind.SERIAL_MEMBER, fieldType));\n-            pre.add(fieldContent);\n-        }\n-        pre.add(fieldDimensions + \" \");\n-        pre.add(fieldName);\n-        contentTree.add(pre);\n-    }\n-\n@@ -134,1 +115,1 @@\n-        Content heading = HtmlTree.HEADING(TagName.H5, nameContent);\n+        Content heading = HtmlTree.HEADING(Headings.SerializedForm.MEMBER_HEADING, nameContent);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlSerialFieldWriter.java","additions":1,"deletions":20,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -230,13 +230,0 @@\n-        \/**\n-         * Adds the member header.\n-         *\n-         * @param fieldType the type of the field\n-         * @param fieldTypeStr the type of the field in string format, used\n-         *                     only if the type cannot be linked\n-         * @param fieldDimensions the dimensions of the field\n-         * @param fieldName the name of the field\n-         * @param contentTree content tree to which the member header will be added\n-         *\/\n-        void addMemberHeader(TypeElement fieldType, String fieldTypeStr, String fieldDimensions,\n-                             String fieldName, Content contentTree);\n-\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/SerializedFormWriter.java","additions":0,"deletions":13,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -38,0 +38,1 @@\n+import javax.lang.model.type.TypeMirror;\n@@ -481,16 +482,2 @@\n-            TypeElement te = ch.getReferencedClass(tag);\n-            String fieldType = ch.getReferencedMemberName(tag);\n-            if (te != null && utils.isPrimitive(te.asType())) {\n-                fieldType = utils.getTypeName(te.asType(), false);\n-                te = null;\n-            }\n-            String refSignature = ch.getReferencedSignature(tag);\n-            \/\/ TODO: Print the signature directly, if it is an array, the\n-            \/\/ current DocTree APIs makes it very hard to distinguish\n-            \/\/ an as these are returned back as \"Array\" a DeclaredType.\n-            if (refSignature != null && refSignature.endsWith(\"[]\")) {\n-                te = null;\n-                fieldType = refSignature;\n-            }\n-            fieldWriter.addMemberHeader(te, fieldType, \"\",\n-                    tag.getName().getName().toString(), fieldsContentTree);\n+            TypeMirror type = ch.getReferencedType(tag);\n+            fieldWriter.addMemberHeader(type, tag.getName().getName().toString(), fieldsContentTree);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/builders\/SerializedFormBuilder.java","additions":3,"deletions":16,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2021 Oracle and\/or its affiliates. All rights reserved.\n@@ -35,0 +35,3 @@\n+     * @serialField i int an int\n+     * @serialField  m double[][] the doubles\n+     * @serialField next SerializedForm a linked reference\n@@ -40,0 +43,1 @@\n+        new ObjectStreamField(\"m\", double[][].class),\n@@ -42,1 +46,2 @@\n-        new ObjectStreamField(\"longs\", Long[].class)\n+        new ObjectStreamField(\"longs\", Long[].class),\n+        new ObjectStreamField(\"next\", SerializedForm.class)\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSerializedForm\/SerializedForm.java","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -111,0 +111,5 @@\n+                    <h5>i<\/h5>\n+                    <pre>int i<\/pre>\n+                    <div class=\"block\">an int<\/div>\n+                    <\/li>\n+                    <li class=\"block-list\">\n@@ -112,1 +117,1 @@\n-                    <pre>Long[] longs<\/pre>\n+                    <pre>java.lang.Long[] longs<\/pre>\n@@ -116,0 +121,5 @@\n+                    <h5>m<\/h5>\n+                    <pre>double[][] m<\/pre>\n+                    <div class=\"block\">the doubles<\/div>\n+                    <\/li>\n+                    <li class=\"block-list\">\n@@ -118,1 +128,6 @@\n-                    <div class=\"block\">a test<\/div>\"\"\");\n+                    <div class=\"block\">a test<\/div>\n+                    <\/li>\n+                    <li class=\"block-list\">\n+                    <h5>next<\/h5>\n+                    <pre><a href=\"SerializedForm.html\" title=\"class in Unnamed Package\">SerializedForm<\/a> next<\/pre>\n+                    <div class=\"block\">a linked reference<\/div>\"\"\");\n@@ -163,0 +178,5 @@\n+                    <h5>i<\/h5>\n+                    <pre>int i<\/pre>\n+                    <div class=\"block\">an int<\/div>\n+                    <\/li>\n+                    <li class=\"block-list\">\n@@ -164,1 +184,1 @@\n-                    <pre>Long[] longs<\/pre>\n+                    <pre>java.lang.Long[] longs<\/pre>\n@@ -168,0 +188,5 @@\n+                    <h5>m<\/h5>\n+                    <pre>double[][] m<\/pre>\n+                    <div class=\"block\">the doubles<\/div>\n+                    <\/li>\n+                    <li class=\"block-list\">\n@@ -170,1 +195,6 @@\n-                    <div class=\"block\">a test<\/div>\"\"\");\n+                    <div class=\"block\">a test<\/div>\n+                    <\/li>\n+                    <li class=\"block-list\">\n+                    <h5>next<\/h5>\n+                    <pre><a href=\"SerializedForm.html\" title=\"class in Unnamed Package\">SerializedForm<\/a> next<\/pre>\n+                    <div class=\"block\">a linked reference<\/div>\"\"\");\n@@ -183,2 +213,4 @@\n-                \"int[] a1\",\n-                \"int[][] a2\",\n+                \"\"\"\n+                    int[] a1\"\"\",\n+                \"\"\"\n+                    int[][] a2\"\"\",\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testSerializedForm\/TestSerializedForm.java","additions":38,"deletions":6,"binary":false,"changes":44,"status":"modified"}]}