{"files":[{"patch":"@@ -174,0 +174,2 @@\n+  \/\/ Return true if the thread identified with a pair <jt,thr_obj> is current.\n+  \/\/ A passive carrier thread is not treated as current.\n@@ -175,3 +177,0 @@\n-    if (jt == NULL) {\n-      return false; \/\/ jt can be NULL in case of a virtual thread\n-    }\n@@ -179,0 +178,4 @@\n+    \/\/ jt can be NULL in case of a virtual thread\n+    if (jt == NULL || jt != current) {\n+      return false;\n+    }\n@@ -180,1 +183,0 @@\n-    bool is_current = jt == current && (cur_obj == NULL || cur_obj == thr_obj);\n@@ -182,1 +184,3 @@\n-    return is_current;\n+    \/\/ cur_obj == NULL is true for normal platform threads only\n+    \/\/ otherwise it can be virtual or carrier thread.\n+    return cur_obj == NULL || cur_obj == thr_obj;\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnvBase.hpp","additions":9,"deletions":5,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+ * @enablePreview\n@@ -29,2 +30,1 @@\n- * @compile --enable-preview -source ${jdk.version} GetSetLocalUnsuspended.java\n- * @run main\/othervm\/native --enable-preview -agentlib:GetSetLocalUnsuspended GetSetLocalUnsuspended\n+ * @run main\/othervm\/native -agentlib:GetSetLocalUnsuspended GetSetLocalUnsuspended\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/GetLocalVariable\/GetSetLocalUnsuspended.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}