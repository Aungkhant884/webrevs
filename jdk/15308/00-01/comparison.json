{"files":[{"patch":"@@ -36,0 +36,1 @@\n+\n@@ -704,0 +705,20 @@\n+    private static String getErrorString(int errCode) {\n+        String os = System.getProperty(\"os.name\");\n+        if (errCode == 35 && (os.contains(\"Mac\") || os.contains(\"Darwin\"))) return \"EAGAIN\";\n+        switch (errCode) {\n+            case 13: return \"EACCES\";\n+            case 11: return \"EAGAIN\"; \/\/ macOS has for this 35\n+            case 9:  return \"EBADF\";\n+            case 16: return \"EBUSY\";\n+            case 17: return \"EEXIST\";\n+            case 14: return \"EFAULT\";\n+            case 4:  return \"EINTR\";\n+            case 22: return \"EINVAL\";\n+            case 24: return \"EMFILE\";\n+            case 19: return \"ENODEV\";\n+            case 2:  return \"ENOENT\";\n+            case 1:  return \"EPERM\";\n+        }\n+        return \"\";\n+    }\n+\n@@ -708,3 +729,6 @@\n-            if (errCode != 0)\n-                throw(new BackingStoreException(\"Couldn't get file lock. errno is \" + errCode));\n-           try {\n+            if (errCode != 0) {\n+                String errStr = getErrorString(errCode);\n+                if (! errStr.equals(\"\")) errStr = \" (\" + errStr + \")\";\n+                throw(new BackingStoreException(\"Couldn't get file lock. errno is \" + errCode + errStr));\n+            }\n+            try {\n@@ -712,1 +736,1 @@\n-           } finally {\n+            } finally {\n@@ -714,1 +738,1 @@\n-           }\n+            }\n@@ -773,1 +797,3 @@\n-               throw(new BackingStoreException(\"Couldn't get file lock. errno is \" + errCode + \" mode is \" + sharingMode));\n+               String errStr = getErrorString(errCode);\n+               if (! errStr.equals(\"\")) errStr = \" (\" + errStr + \")\";\n+               throw(new BackingStoreException(\"Couldn't get file lock. errno is \" + errCode + errStr + \" mode is \" + sharingMode));\n","filename":"src\/java.prefs\/unix\/classes\/java\/util\/prefs\/FileSystemPreferences.java","additions":32,"deletions":6,"binary":false,"changes":38,"status":"modified"}]}