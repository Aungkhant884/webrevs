{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -707,2 +707,3 @@\n-            if (!lockFile(false))\n-                throw(new BackingStoreException(\"Couldn't get file lock.\"));\n+            int errCode = lockFile(false);\n+            if (errCode != 0)\n+                throw(new BackingStoreException(\"Couldn't get file lock. errno is \" + errCode));\n@@ -768,2 +769,6 @@\n-           if (!lockFile(shared))\n-               throw(new BackingStoreException(\"Couldn't get file lock.\"));\n+           int errCode = lockFile(shared);\n+           if (errCode != 0) {\n+               String sharingMode = \"shared\";\n+               if (!shared) sharingMode = \"nonshared\";\n+               throw(new BackingStoreException(\"Couldn't get file lock. errno is \" + errCode + \" mode is \" + sharingMode));\n+           }\n@@ -930,1 +935,1 @@\n-     * returns false.\n+     * returns the error code.\n@@ -933,1 +938,1 @@\n-    private boolean lockFile(boolean shared) throws SecurityException{\n+    private int lockFile(boolean shared) throws SecurityException{\n@@ -951,1 +956,1 @@\n-                     return true;\n+                     return 0;\n@@ -961,1 +966,1 @@\n-                return false;\n+                return errorCode;\n@@ -966,1 +971,1 @@\n-        return false;\n+        return errorCode;\n","filename":"src\/java.prefs\/unix\/classes\/java\/util\/prefs\/FileSystemPreferences.java","additions":15,"deletions":10,"binary":false,"changes":25,"status":"modified"}]}