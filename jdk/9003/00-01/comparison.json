{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,1 @@\n-\/**\n+\/*\n@@ -29,1 +29,0 @@\n- * @author vera.akulova@oracle.com\n@@ -31,3 +30,0 @@\n- * @modules java.desktop\/java.awt:open\n- * @library \/test\/lib\n- * @build jdk.test.lib.Platform\n@@ -37,4 +33,10 @@\n-import jdk.test.lib.Platform;\n-import java.awt.*;\n-import java.awt.event.*;\n-import javax.swing.*;\n+import java.awt.Desktop;\n+import java.awt.Robot;\n+import java.awt.event.InputEvent;\n+import java.awt.event.KeyEvent;\n+import javax.swing.JFrame;\n+import javax.swing.JMenu;\n+import javax.swing.JMenuBar;\n+import javax.swing.JMenuItem;\n+import javax.swing.KeyStroke;\n+import javax.swing.SwingUtilities;\n@@ -44,4 +46,4 @@\n-    static String menuItems[] = {\"Item1\", \"Item2\", \"Item3\",\n-                                    \"Item4\", \"Item5\", \"Item6\"};\n-    static KeyStroke keyStrokes[] = {\n-        KeyStroke.getKeyStroke(KeyEvent.VK_E, InputEvent.META_MASK),\n+    static final String[] menuItems = { \"Item1\", \"Item2\", \"Item3\",\n+                                        \"Item4\", \"Item5\", \"Item6\" };\n+    static final KeyStroke[] keyStrokes = {\n+        KeyStroke.getKeyStroke(KeyEvent.VK_E, InputEvent.META_DOWN_MASK),\n@@ -49,4 +51,4 @@\n-        KeyStroke.getKeyStroke(KeyEvent.VK_UP, InputEvent.SHIFT_MASK),\n-        KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, InputEvent.META_MASK),\n-        KeyStroke.getKeyStroke(KeyEvent.VK_E, InputEvent.CTRL_MASK),\n-        KeyStroke.getKeyStroke(KeyEvent.VK_EQUALS, InputEvent.META_MASK)\n+        KeyStroke.getKeyStroke(KeyEvent.VK_UP, InputEvent.SHIFT_DOWN_MASK),\n+        KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, InputEvent.META_DOWN_MASK),\n+        KeyStroke.getKeyStroke(KeyEvent.VK_E, InputEvent.CTRL_DOWN_MASK),\n+        KeyStroke.getKeyStroke(KeyEvent.VK_EQUALS, InputEvent.META_DOWN_MASK)\n@@ -60,1 +62,1 @@\n-        if (!Platform.isOSX()) {\n+        if (!System.getProperty(\"os.name\").toLowerCase().startsWith(\"mac\")) {\n@@ -85,1 +87,4 @@\n-            SwingUtilities.invokeAndWait(() -> frame.dispose());\n+            SwingUtilities.invokeAndWait(() -> {\n+                frame.dispose();\n+                Desktop.getDesktop().setDefaultMenuBar(null);\n+            });\n","filename":"test\/jdk\/javax\/swing\/JMenuItem\/ActionListenerCalledTwice\/ActionListenerCalledTwiceTest.java","additions":25,"deletions":20,"binary":false,"changes":45,"status":"modified"}]}