{"files":[{"patch":"@@ -766,3 +766,5 @@\n-                desc.add((description != null && !description.isEmpty())\n-                        ? HtmlTree.DIV(HtmlStyle.block, description)\n-                        : Entity.NO_BREAK_SPACE);\n+                if (description != null && !description.isEmpty()) {\n+                    desc.add(HtmlTree.DIV(HtmlStyle.block, description));\n+                } else {\n+                    addSummaryComment(srv, desc);\n+                }\n@@ -771,1 +773,1 @@\n-                }\n+            }\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/ModuleWriterImpl.java","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 8178067 8192007 8182765 8184205\n+ * @bug 8178067 8192007 8182765 8184205 8277028\n@@ -96,0 +96,20 @@\n+        mb = new ModuleBuilder(tb, \"moduleServiceProviderNoDescription\")\n+                .comment(\"\"\"\n+                    This is another module that provides an implementation of a service.\n+                    @provides pkgService.Service\"\"\")\n+                .requires(\"moduleService\")\n+                .provides(\"pkgService.Service\", \"pkgServiceProviderNoDesc.ServiceProviderNoDescription\")\n+                .classes(\"\/**A Package that has a service provider.*\/ package pkgServiceProviderNoDesc;\")\n+                .classes(\"\"\"\n+                    package pkgServiceProviderNoDesc;\n+                    public class ServiceProviderNoDescription implements pkgService.Service {\n+                        \/**\n+                         * {@inheritDoc}\n+                         *\/\n+                        public void testMethod1() {}\n+                        \/**\n+                         * This is an internal implementation so the documentation will not be seen.\n+                         *\/\n+                        public void testMethod2() {}\n+                    }\"\"\");\n+        mb.write(src);\n@@ -131,1 +151,2 @@\n-                \"--module\", \"moduleService,moduleServiceProvider,moduleServiceUser,moduleServiceUserNoDescription\",\n+                \"--module\", \"moduleService,moduleServiceProvider,moduleServiceProviderNoDescription\",\n+                \"--module\", \"moduleServiceUser,moduleServiceUserNoDescription\",\n@@ -142,0 +163,6 @@\n+        checkOutput(\"moduleServiceProviderNoDescription\/module-summary.html\", true,\n+                \"\"\"\n+                    <div class=\"col-first even-row-color\"><a href=\"..\/moduleService\/pkgService\/Service.ht\\\n+                    ml\" title=\"interface in pkgService\">Service<\/a><\/div>\n+                    <div class=\"col-last even-row-color\">\n+                    <div class=\"block\">A service Interface for service providers.<\/div>\"\"\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testModules\/TestModuleServices.java","additions":30,"deletions":3,"binary":false,"changes":33,"status":"modified"}]}