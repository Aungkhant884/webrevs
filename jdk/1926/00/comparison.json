{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,1 +35,1 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n+\n@@ -117,3 +117,3 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype)\n+    protected GraphicsPrimitive makePrimitive(SurfaceType srctype,\n+                                              CompositeType comptype,\n+                                              SurfaceType dsttype)\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/Blit.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2008, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,1 @@\n-import java.awt.Font;\n+import java.awt.AlphaComposite;\n@@ -31,2 +31,2 @@\n-import java.awt.AlphaComposite;\n-import java.awt.Transparency;\n+import java.awt.Font;\n+import java.awt.image.BufferedImage;\n@@ -35,1 +35,1 @@\n-import java.awt.image.BufferedImage;\n+\n@@ -37,2 +37,0 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n-import sun.java2d.SurfaceData;\n@@ -40,0 +38,1 @@\n+import sun.java2d.SurfaceData;\n@@ -121,3 +120,3 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype)\n+    protected GraphicsPrimitive makePrimitive(SurfaceType srctype,\n+                                              CompositeType comptype,\n+                                              SurfaceType dsttype)\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/BlitBg.java","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,2 +28,1 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n-import sun.java2d.pipe.Region;\n+import sun.font.GlyphList;\n@@ -32,1 +31,1 @@\n-import sun.font.GlyphList;\n+import sun.java2d.pipe.Region;\n@@ -80,3 +79,3 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype) {\n+    protected GraphicsPrimitive makePrimitive(SurfaceType srctype,\n+                                              CompositeType comptype,\n+                                              SurfaceType dsttype) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/DrawGlyphList.java","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,2 +28,1 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n-import sun.java2d.pipe.Region;\n+import sun.font.GlyphList;\n@@ -32,1 +31,1 @@\n-import sun.font.GlyphList;\n+import sun.java2d.pipe.Region;\n@@ -78,3 +77,3 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype) {\n+    protected GraphicsPrimitive makePrimitive(SurfaceType srctype,\n+                                              CompositeType comptype,\n+                                              SurfaceType dsttype) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/DrawGlyphListAA.java","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,1 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n+import sun.font.GlyphList;\n@@ -31,1 +31,0 @@\n-import sun.font.GlyphList;\n@@ -74,17 +73,0 @@\n-    static {\n-        GraphicsPrimitiveMgr.registerGeneral(\n-                                   new DrawGlyphListLCD(null, null, null));\n-    }\n-\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype) {\n-        \/* Do not return a General loop. SunGraphics2D determines whether\n-         * to use LCD or standard AA text based on whether there is an\n-         * installed loop.\n-         * This can be uncommented once there is a General loop which can\n-         * handle one byte per colour component masks properly.\n-         *\/\n-        return null;\n-    }\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/DrawGlyphListLCD.java","additions":2,"deletions":20,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,0 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n@@ -77,9 +76,0 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype)\n-    {\n-        \/\/ REMIND: use FillSpans or converter object?\n-        throw new InternalError(\"DrawLine not implemented for \"+\n-                                srctype+\" with \"+comptype);\n-    }\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/DrawLine.java","additions":1,"deletions":11,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,0 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n@@ -85,9 +84,0 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype)\n-    {\n-        \/\/ REMIND: iterate with a FillRect primitive?\n-        throw new InternalError(\"DrawParallelogram not implemented for \"+\n-                                srctype+\" with \"+comptype);\n-    }\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/DrawParallelogram.java","additions":1,"deletions":11,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2006, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,2 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n+import java.awt.geom.Path2D;\n+\n@@ -31,1 +32,0 @@\n-import java.awt.geom.Path2D;\n@@ -80,8 +80,0 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype)\n-    {\n-        throw new InternalError(\"DrawPath not implemented for \"+\n-                                srctype+\" with \"+comptype);\n-    }\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/DrawPath.java","additions":3,"deletions":11,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,0 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n@@ -81,9 +80,0 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype)\n-    {\n-        \/\/ REMIND: use FillSpans or converter object?\n-        throw new InternalError(\"DrawPolygons not implemented for \"+\n-                                srctype+\" with \"+comptype);\n-    }\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/DrawPolygons.java","additions":1,"deletions":11,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,0 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n@@ -78,9 +77,0 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype)\n-    {\n-        \/\/ REMIND: use FillSpans or converter object?\n-        throw new InternalError(\"DrawRect not implemented for \"+\n-                                srctype+\" with \"+comptype);\n-    }\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/DrawRect.java","additions":1,"deletions":11,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,0 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n@@ -82,9 +81,0 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype)\n-    {\n-        \/\/ REMIND: iterate with a FillRect primitive?\n-        throw new InternalError(\"FillParallelogram not implemented for \"+\n-                                srctype+\" with \"+comptype);\n-    }\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/FillParallelogram.java","additions":1,"deletions":11,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2006, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,2 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n+import java.awt.geom.Path2D;\n+\n@@ -31,1 +32,0 @@\n-import java.awt.geom.Path2D;\n@@ -80,8 +80,0 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype)\n-    {\n-        throw new InternalError(\"FillPath not implemented for \"+\n-                                srctype+\" with \"+comptype);\n-    }\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/FillPath.java","additions":3,"deletions":11,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,0 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n@@ -82,3 +81,3 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype)\n+    protected GraphicsPrimitive makePrimitive(SurfaceType srctype,\n+                                              CompositeType comptype,\n+                                              SurfaceType dsttype)\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/FillRect.java","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,2 +33,0 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n-import sun.java2d.pipe.SpanIterator;\n@@ -37,0 +35,1 @@\n+import sun.java2d.pipe.SpanIterator;\n@@ -85,9 +84,0 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype)\n-    {\n-        \/\/ REMIND: iterate with a FillRect primitive?\n-        throw new InternalError(\"FillSpans not implemented for \"+\n-                                srctype+\" with \"+comptype);\n-    }\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/FillSpans.java","additions":2,"deletions":12,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,0 @@\n-import java.awt.image.BufferedImage;\n@@ -35,12 +34,1 @@\n-import sun.awt.image.BufImgSurfaceData;\n-import sun.awt.util.ThreadGroupUtils;\n-import sun.java2d.SurfaceData;\n-import sun.java2d.pipe.Region;\n-import java.lang.reflect.Field;\n-import java.util.StringTokenizer;\n-import java.util.Iterator;\n-import java.util.HashMap;\n-import java.util.Map;\n-import java.io.PrintStream;\n-import java.io.OutputStream;\n-import java.io.FileOutputStream;\n+import java.awt.image.BufferedImage;\n@@ -48,0 +36,3 @@\n+import java.io.FileOutputStream;\n+import java.io.PrintStream;\n+import java.lang.reflect.Field;\n@@ -50,0 +41,4 @@\n+import java.util.HashMap;\n+import java.util.Iterator;\n+import java.util.Map;\n+import java.util.StringTokenizer;\n@@ -51,0 +46,4 @@\n+import sun.awt.image.BufImgSurfaceData;\n+import sun.awt.util.ThreadGroupUtils;\n+import sun.java2d.SurfaceData;\n+import sun.java2d.pipe.Region;\n@@ -315,3 +314,12 @@\n-    public abstract GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                                    CompositeType comptype,\n-                                                    SurfaceType dsttype);\n+    \/**\n+     * Produces specific primitive loop if the current object is registered as a\n+     * general loop, otherwise the {@code InternalError} is thrown.\n+     *\n+     * @see GraphicsPrimitiveMgr#registerGeneral\n+     *\/\n+    protected GraphicsPrimitive makePrimitive(SurfaceType srctype,\n+                                              CompositeType comptype,\n+                                              SurfaceType dsttype) {\n+        throw new InternalError(\"%s not implemented for %s, comp: %s, dst: %s\".\n+                formatted(getClass().getName(), srctype, comptype, dsttype));\n+    }\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/GraphicsPrimitive.java","additions":25,"deletions":17,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -124,0 +124,6 @@\n+    \/**\n+     * Registers the general loop which will be used to produce specific\n+     * primitives by the {@link GraphicsPrimitive#makePrimitive} function.\n+     *\n+     * @param gen the graphics primitive to be registered as the general loop\n+     *\/\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/GraphicsPrimitiveMgr.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2003, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -68,7 +68,0 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype) {\n-        \/\/ This should never happen.\n-        throw new InternalError(\"makePrimitive called on a Proxy!\");\n-    }\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/GraphicsPrimitiveProxy.java","additions":1,"deletions":8,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,1 +30,1 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n+\n@@ -115,3 +115,3 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype)\n+    protected GraphicsPrimitive makePrimitive(SurfaceType srctype,\n+                                              CompositeType comptype,\n+                                              SurfaceType dsttype)\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/MaskBlit.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,0 +30,1 @@\n+\n@@ -31,1 +32,0 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n@@ -147,3 +147,3 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype)\n+    protected GraphicsPrimitive makePrimitive(SurfaceType srctype,\n+                                              CompositeType comptype,\n+                                              SurfaceType dsttype)\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/MaskFill.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,1 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n+\n@@ -107,17 +107,0 @@\n-    static {\n-        GraphicsPrimitiveMgr.registerGeneral(new ScaledBlit(null, null, null));\n-    }\n-\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype)\n-    {\n-        \/*\n-        System.out.println(\"Constructing general blit for:\");\n-        System.out.println(\"src:  \"+srctype);\n-        System.out.println(\"comp: \"+comptype);\n-        System.out.println(\"dst:  \"+dsttype);\n-        *\/\n-        return null;\n-    }\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/ScaledBlit.java","additions":2,"deletions":19,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,0 +30,1 @@\n+\n@@ -31,1 +32,0 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n@@ -108,19 +108,0 @@\n-    \/\/ REMIND: do we have a general loop?\n-    static {\n-        GraphicsPrimitiveMgr.registerGeneral(new TransformBlit(null, null,\n-                                                               null));\n-    }\n-\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype)\n-    {\n-        \/*\n-        System.out.println(\"Constructing general blit for:\");\n-        System.out.println(\"src:  \"+srctype);\n-        System.out.println(\"comp: \"+comptype);\n-        System.out.println(\"dst:  \"+dsttype);\n-        *\/\n-        return null;\n-    }\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/TransformBlit.java","additions":2,"deletions":21,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2004, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2004, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,0 +30,1 @@\n+\n@@ -31,1 +32,0 @@\n-import sun.java2d.loops.GraphicsPrimitive;\n@@ -101,7 +101,0 @@\n-    public GraphicsPrimitive makePrimitive(SurfaceType srctype,\n-                                           CompositeType comptype,\n-                                           SurfaceType dsttype)\n-    {\n-        return null;\n-    }\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/TransformHelper.java","additions":2,"deletions":9,"binary":false,"changes":11,"status":"modified"}]}