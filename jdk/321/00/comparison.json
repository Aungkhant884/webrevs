{"files":[{"patch":"@@ -2176,2 +2176,2 @@\n-    if (CompiledMethod::nmethod_access_is_safe(nm)) {\n-      Method* method = nm->method();\n+    Method* method = (nm == NULL) ? NULL : nm->method();\n+    if ((method != NULL) && nm->is_alive()) {\n@@ -2218,1 +2218,4 @@\n-    MutexLocker mu(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n+    \/\/ Take the Compile_lock to protect against changes in the CodeBlob structures\n+    MutexLocker mu1(Compile_lock, Mutex::_safepoint_check_flag);\n+    \/\/ Take the CodeCache_lock to protect against changes in the CodeHeap structure\n+    MutexLocker mu2(CodeCache_lock, Mutex::_no_safepoint_check_flag);\n","filename":"src\/hotspot\/share\/runtime\/sharedRuntime.cpp","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"}]}