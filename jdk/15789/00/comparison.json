{"files":[{"patch":"@@ -67,1 +67,0 @@\n-    LDFLAGS_windows := -delayload:shell32.dll, \\\n@@ -75,1 +74,1 @@\n-        shell32.lib delayimp.lib \\\n+        shell32.lib ole32.lib \\\n","filename":"make\/modules\/java.base\/lib\/CoreLibraries.gmk","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -217,16 +217,2 @@\n-\n-        \/*\n-         * SHELL32 DLL is delay load DLL and we can use the trick with\n-         * __try\/__except block.\n-         *\/\n-        __try {\n-            \/*\n-             * For Windows Vista and later (or patched MS OS) we need to use\n-             * [SHGetKnownFolderPath] call to avoid MAX_PATH length limitation.\n-             * Shell32.dll (version 6.0.6000 or later)\n-             *\/\n-            hr = SHGetKnownFolderPath(&FOLDERID_Profile, KF_FLAG_DONT_VERIFY, NULL, &u_path);\n-        } __except(EXCEPTION_EXECUTE_HANDLER) {\n-            \/* Exception: no [SHGetKnownFolderPath] entry *\/\n-            hr = E_FAIL;\n-        }\n+        WCHAR *tmpPath = NULL;\n+        hr = SHGetKnownFolderPath(&FOLDERID_Profile, KF_FLAG_DONT_VERIFY, NULL, &tmpPath);\n@@ -235,14 +221,3 @@\n-            WCHAR path[MAX_PATH+1];\n-\n-            \/* fallback solution for WinXP and Windows 2000 *\/\n-            hr = SHGetFolderPathW(NULL, CSIDL_FLAG_DONT_VERIFY | CSIDL_PROFILE, NULL, SHGFP_TYPE_CURRENT, path);\n-            if (FAILED(hr)) {\n-                \/* we can't find the shell folder. *\/\n-                u_path = NULL;\n-            } else {\n-                \/* Just to be sure about the path length until Windows Vista approach.\n-                 * [S_FALSE] could not be returned due to [CSIDL_FLAG_DONT_VERIFY] flag and UNICODE version.\n-                 *\/\n-                path[MAX_PATH] = 0;\n-                u_path = _wcsdup(path);\n-            }\n+            CoTaskMemFree(tmpPath);\n+        } else {\n+            u_path = tmpPath;\n","filename":"src\/java.base\/windows\/native\/libjava\/java_props_md.c","additions":5,"deletions":30,"binary":false,"changes":35,"status":"modified"}]}