{"files":[{"patch":"@@ -167,2 +167,12 @@\n-                } else if (finished) {\n-                    throw new IOException(\"No metadata event found in finished chunk.\");\n+                } else {\n+                    if (finished) {\n+                        throw new IOException(\"No metadata event found in finished chunk.\");\n+                    }\n+                    if (chunkSize == HEADER_SIZE) {\n+                        \/\/ This ensures that a non-streaming parser is able\n+                        \/\/ to break out of the loop in case the file is\n+                        \/\/ ended before the first metadata event has\n+                        \/\/ been written. This can happen during a failed crash\n+                        \/\/ dump.\n+                        input.pollWait();\n+                    }\n","filename":"src\/jdk.jfr\/share\/classes\/jdk\/jfr\/internal\/consumer\/ChunkHeader.java","additions":12,"deletions":2,"binary":false,"changes":14,"status":"modified"}]}