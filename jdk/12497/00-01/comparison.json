{"files":[{"patch":"@@ -72,3 +72,1 @@\n-  Thread* thread = Thread::current();\n-  assert(thread->is_Java_thread(), \"must be\");\n-  invalidate((JavaThread*)thread, mr);\n+  invalidate(JavaThread::current(), mr);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1BarrierSet.inline.hpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -81,0 +81,1 @@\n+    STATIC_ASSERT(std::is_trivially_destructible<G1ConcurrentRefineStats>::value);\n@@ -82,0 +83,2 @@\n+\n+    STATIC_ASSERT(std::is_trivially_destructible<ThreadLocalAllocStats>::value);\n@@ -103,2 +106,2 @@\n-      _local_tlab_stats[i].reset();\n-      _local_refinement_stats[i].reset();\n+      ::new (&_local_tlab_stats[i]) ThreadLocalAllocStats();\n+      ::new (&_local_refinement_stats[i]) G1ConcurrentRefineStats();\n@@ -118,1 +121,1 @@\n-        for (uint i = 0; i < _num_workers; i++) {\n+    for (uint i = 0; i < _num_workers; i++) {\n@@ -146,2 +149,2 @@\n-  _java_stats(new JavaThreadRetireTLABAndFlushLogs()),\n-  _non_java_stats(new NonJavaThreadFlushLogs()) {\n+  _java_retire_task(new JavaThreadRetireTLABAndFlushLogs()),\n+  _non_java_retire_task(new NonJavaThreadFlushLogs()) {\n@@ -152,2 +155,2 @@\n-  add_serial_task(_non_java_stats);\n-  add_parallel_task(_java_stats);\n+  add_serial_task(_non_java_retire_task);\n+  add_parallel_task(_java_retire_task);\n@@ -175,2 +178,2 @@\n-  total_tlab_stats.update(_java_stats->tlab_stats());\n-  total_tlab_stats.update(_non_java_stats->tlab_stats());\n+  total_tlab_stats.update(_java_retire_task->tlab_stats());\n+  total_tlab_stats.update(_non_java_retire_task->tlab_stats());\n@@ -182,2 +185,2 @@\n-  total_refinement_stats += _java_stats->refinement_stats();\n-  total_refinement_stats += _non_java_stats->refinement_stats();\n+  total_refinement_stats += _java_retire_task->refinement_stats();\n+  total_refinement_stats += _non_java_retire_task->refinement_stats();\n","filename":"src\/hotspot\/share\/gc\/g1\/g1YoungGCPreEvacuateTasks.cpp","additions":14,"deletions":11,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -40,2 +40,2 @@\n-  JavaThreadRetireTLABAndFlushLogs* _java_stats;\n-  NonJavaThreadFlushLogs* _non_java_stats;\n+  JavaThreadRetireTLABAndFlushLogs* _java_retire_task;\n+  NonJavaThreadFlushLogs* _non_java_retire_task;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1YoungGCPreEvacuateTasks.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}