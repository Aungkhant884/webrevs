{"files":[{"patch":"@@ -247,2 +247,1 @@\n-        int attempts = 0;\n-        do {\n+        for (int attempts = 0; ; attempts++) {\n@@ -252,1 +251,0 @@\n-        } while ((!snap1.equals(snap2)) && (++attempts < MaxAttempts));\n@@ -254,2 +252,6 @@\n-        if (attempts == MaxAttempts) {\n-            throw new Exception(\"Failed to get stable reading of metaspace performance counters after \" + MaxAttempts + \" tries\");\n+            if (snap1.equals(snap2)) {\n+              \/\/ Got a consistent snapshot for examination.\n+              break;\n+            } else if (attempts == MaxAttempts) {\n+              throw new Exception(\"Failed to get stable reading of metaspace performance counters after \" + attempts + \" tries\");\n+            }\n","filename":"test\/hotspot\/jtreg\/gc\/metaspace\/TestMetaspacePerfCounters.java","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"}]}