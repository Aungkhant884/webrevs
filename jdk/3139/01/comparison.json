{"files":[{"patch":"@@ -40,1 +40,0 @@\n-#include \"prims\/nativeLookup.hpp\"\n","filename":"src\/hotspot\/share\/c1\/c1_Compiler.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -48,1 +48,0 @@\n-#include \"prims\/nativeLookup.hpp\"\n","filename":"src\/hotspot\/share\/ci\/ciMethod.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -35,1 +35,0 @@\n-#include \"prims\/nativeLookup.hpp\"\n","filename":"src\/hotspot\/share\/compiler\/compilationPolicy.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1435,2 +1435,1 @@\n-    bool in_base_library;\n-    address adr = NativeLookup::lookup(method, in_base_library, THREAD);\n+    address adr = NativeLookup::lookup(method, THREAD);\n","filename":"src\/hotspot\/share\/compiler\/compileBroker.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1453,1 +1453,0 @@\n-  bool in_base_library;\n@@ -1455,1 +1454,1 @@\n-    NativeLookup::lookup(m, in_base_library, CHECK);\n+    NativeLookup::lookup(m, CHECK);\n","filename":"src\/hotspot\/share\/interpreter\/interpreterRuntime.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -54,1 +54,0 @@\n-#include \"prims\/nativeLookup.hpp\"\n","filename":"src\/hotspot\/share\/interpreter\/linkResolver.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -62,1 +62,0 @@\n-#include \"prims\/nativeLookup.hpp\"\n","filename":"src\/hotspot\/share\/oops\/method.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -43,1 +43,0 @@\n-#include \"prims\/nativeLookup.hpp\"\n","filename":"src\/hotspot\/share\/opto\/doCall.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -53,1 +53,0 @@\n-#include \"prims\/nativeLookup.hpp\"\n","filename":"src\/hotspot\/share\/opto\/library_call.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -68,1 +68,0 @@\n-#include \"prims\/nativeLookup.hpp\"\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -269,1 +269,1 @@\n-address NativeLookup::lookup_style(const methodHandle& method, char* pure_name, const char* long_name, int args_size, bool os_style, bool& in_base_library, TRAPS) {\n+address NativeLookup::lookup_style(const methodHandle& method, char* pure_name, const char* long_name, int args_size, bool os_style, TRAPS) {\n@@ -286,1 +286,0 @@\n-      in_base_library = true;\n@@ -343,1 +342,1 @@\n-address NativeLookup::lookup_entry(const methodHandle& method, bool& in_base_library, TRAPS) {\n+address NativeLookup::lookup_entry(const methodHandle& method, TRAPS) {\n@@ -345,1 +344,0 @@\n-  in_base_library = false;\n@@ -360,1 +358,1 @@\n-  entry = lookup_style(method, pure_name, \"\",        args_size, true,  in_base_library, CHECK_NULL);\n+  entry = lookup_style(method, pure_name, \"\",        args_size, true,  CHECK_NULL);\n@@ -372,1 +370,1 @@\n-  entry = lookup_style(method, pure_name, long_name, args_size, true,  in_base_library, CHECK_NULL);\n+  entry = lookup_style(method, pure_name, long_name, args_size, true,  CHECK_NULL);\n@@ -376,1 +374,1 @@\n-  entry = lookup_style(method, pure_name, \"\",        args_size, false, in_base_library, CHECK_NULL);\n+  entry = lookup_style(method, pure_name, \"\",        args_size, false, CHECK_NULL);\n@@ -380,1 +378,1 @@\n-  entry = lookup_style(method, pure_name, long_name, args_size, false, in_base_library, CHECK_NULL);\n+  entry = lookup_style(method, pure_name, long_name, args_size, false, CHECK_NULL);\n@@ -492,1 +490,1 @@\n-address NativeLookup::lookup_entry_prefixed(const methodHandle& method, bool& in_base_library, TRAPS) {\n+address NativeLookup::lookup_entry_prefixed(const methodHandle& method, TRAPS) {\n@@ -519,1 +517,1 @@\n-        return lookup_entry(methodHandle(THREAD, wrapper_method), in_base_library, THREAD);\n+        return lookup_entry(methodHandle(THREAD, wrapper_method), THREAD);\n@@ -527,1 +525,1 @@\n-address NativeLookup::lookup_base(const methodHandle& method, bool& in_base_library, TRAPS) {\n+address NativeLookup::lookup_base(const methodHandle& method, TRAPS) {\n@@ -531,1 +529,1 @@\n-  entry = lookup_entry(method, in_base_library, THREAD);\n+  entry = lookup_entry(method, THREAD);\n@@ -536,1 +534,1 @@\n-  entry = lookup_entry_prefixed(method, in_base_library, THREAD);\n+  entry = lookup_entry_prefixed(method, THREAD);\n@@ -548,1 +546,1 @@\n-address NativeLookup::lookup(const methodHandle& method, bool& in_base_library, TRAPS) {\n+address NativeLookup::lookup(const methodHandle& method, TRAPS) {\n@@ -550,1 +548,1 @@\n-    address entry = lookup_base(method, in_base_library, CHECK_NULL);\n+    address entry = lookup_base(method, CHECK_NULL);\n@@ -563,20 +561,0 @@\n-\n-address NativeLookup::base_library_lookup(const char* class_name, const char* method_name, const char* signature) {\n-  EXCEPTION_MARK;\n-  bool in_base_library = true;  \/\/ SharedRuntime inits some math methods.\n-  TempNewSymbol c_name = SymbolTable::new_symbol(class_name);\n-  TempNewSymbol m_name = SymbolTable::new_symbol(method_name);\n-  TempNewSymbol s_name = SymbolTable::new_symbol(signature);\n-\n-  \/\/ Find the class\n-  Klass* k = SystemDictionary::resolve_or_fail(c_name, true, CATCH);\n-  InstanceKlass* klass  = InstanceKlass::cast(k);\n-\n-  \/\/ Find method and invoke standard lookup\n-  methodHandle method (THREAD,\n-                       klass->uncached_lookup_method(m_name, s_name, Klass::OverpassLookupMode::find));\n-  address result = lookup(method, in_base_library, CATCH);\n-  assert(in_base_library, \"must be in basic library\");\n-  guarantee(result != NULL, \"must be non NULL\");\n-  return result;\n-}\n","filename":"src\/hotspot\/share\/prims\/nativeLookup.cpp","additions":13,"deletions":35,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,1 +37,1 @@\n-  static address lookup_style(const methodHandle& method, char* pure_name, const char* long_name, int args_size, bool os_style, bool& in_base_library, TRAPS);\n+  static address lookup_style(const methodHandle& method, char* pure_name, const char* long_name, int args_size, bool os_style, TRAPS);\n@@ -40,3 +40,3 @@\n-  static address lookup_base (const methodHandle& method, bool& in_base_library, TRAPS);\n-  static address lookup_entry(const methodHandle& method, bool& in_base_library, TRAPS);\n-  static address lookup_entry_prefixed(const methodHandle& method, bool& in_base_library, TRAPS);\n+  static address lookup_base (const methodHandle& method, TRAPS);\n+  static address lookup_entry(const methodHandle& method, TRAPS);\n+  static address lookup_entry_prefixed(const methodHandle& method, TRAPS);\n@@ -53,1 +53,1 @@\n-  static address lookup(const methodHandle& method, bool& in_base_library, TRAPS);\n+  static address lookup(const methodHandle& method, TRAPS);\n@@ -55,3 +55,0 @@\n-\n-  \/\/ Lookup native functions in base library.\n-  static address base_library_lookup(const char* class_name, const char* method_name, const char* signature);\n","filename":"src\/hotspot\/share\/prims\/nativeLookup.hpp","additions":6,"deletions":9,"binary":false,"changes":15,"status":"modified"}]}