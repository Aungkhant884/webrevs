{"files":[{"patch":"@@ -48,4 +48,2 @@\n- * bytes using the given encoding or charset. If it is not given,\n- * it is the <a id=\"default_charset\">default charset<\/a>, which is\n- * {@link Console#charset()} if the {@code Console} exists, or defaults to\n- * {@link Charset#defaultCharset()}.\n+ * bytes using the given encoding or charset, or the platform's default\n+ * character encoding if not specified.\n@@ -128,1 +126,1 @@\n-     * to bytes using the <a href=\"#default_charset\">default charset<\/a>.\n+     * to bytes using the platform's default character encoding.\n@@ -142,1 +140,1 @@\n-     * the <a href=\"#default_charset\">default charset<\/a>.\n+     * the platform's default character encoding.\n@@ -524,2 +522,2 @@\n-     * will be translated according to the <a href=\"#default_charset\">\n-     * default charset<\/a>, use the {@code print(char)} or {@code println(char)}\n+     * will be translated according to the platform's default character\n+     * encoding, use the {@code print(char)} or {@code println(char)}\n@@ -557,2 +555,2 @@\n-     * that will be translated according to the <a href=\"#default_charset\">\n-     * default charset<\/a>, use the {@code print(char)} or {@code println(char)}\n+     * that will be translated according to the platform's default character\n+     * encoding, use the {@code print(char)} or {@code println(char)}\n@@ -589,2 +587,2 @@\n-     * that will be translated according to the <a href=\"#default_charset\">\n-     * default charset<\/a>, use the {@code print(char[])} or {@code println(char[])}\n+     * that will be translated according to the platform's default character\n+     * encoding, use the {@code print(char[])} or {@code println(char[])}\n@@ -627,2 +625,2 @@\n-     * that will be translated according to the <a href=\"#default_charset\">\n-     * default charset<\/a>, use the {@code print(char[])} or {@code println(char[])}\n+     * that will be translated according to the platform's default character\n+     * encoding, use the {@code print(char[])} or {@code println(char[])}\n@@ -762,2 +760,2 @@\n-     * according to the <a href=\"#default_charset\">default charset<\/a>,\n-     * and these bytes are written in exactly the manner of the\n+     * according to the platform's default character encoding, and these bytes\n+     * are written in exactly the manner of the\n@@ -775,3 +773,2 @@\n-     * <a href=\"#default_charset\">default charset<\/a> if none specified.\n-     * These bytes are written in exactly the manner of the\n-     * {@link #write(int)} method.\n+     * platform's default character encoding if none specified. These bytes\n+     * are written in exactly the manner of the {@link #write(int)} method.\n@@ -788,2 +785,2 @@\n-     * according to the <a href=\"#default_charset\">default charset<\/a>, and\n-     * these bytes are written in exactly the manner of the\n+     * according to the platform's default character encoding, and these bytes\n+     * are written in exactly the manner of the\n@@ -802,2 +799,2 @@\n-     * according to the <a href=\"#default_charset\">default charset<\/a>,\n-     * and these bytes are written in exactly the manner of the\n+     * according to the platform's default character encoding, and these bytes\n+     * are written in exactly the manner of the\n@@ -816,2 +813,2 @@\n-     * according to the <a href=\"#default_charset\">default charset<\/a>,\n-     * and these bytes are written in exactly the manner of the\n+     * according to the platform's default character encoding, and these bytes\n+     * are written in exactly the manner of the\n@@ -830,2 +827,2 @@\n-     * bytes according to the <a href=\"#default_charset\">default charset<\/a>,\n-     * and these bytes are written in exactly the manner of the {@link\n+     * bytes according to the platform's default character encoding, and these\n+     * bytes are written in exactly the manner of the {@link\n@@ -844,1 +841,1 @@\n-     * <a href=\"#default_charset\">default charset<\/a> if none specified. These bytes\n+     * platform's default character encoding if none specified. These bytes\n@@ -859,1 +856,1 @@\n-     * constructor, or the <a href=\"#default_charset\">default charset<\/a> if none\n+     * constructor, or the platform's default character encoding if none\n@@ -872,2 +869,2 @@\n-     * according to the <a href=\"#default_charset\">default charset<\/a>, and\n-     * these bytes are written in exactly the manner of the\n+     * according to the platform's default character encoding, and these bytes\n+     * are written in exactly the manner of the\n","filename":"src\/java.base\/share\/classes\/java\/io\/PrintStream.java","additions":28,"deletions":31,"binary":false,"changes":59,"status":"modified"},{"patch":"@@ -36,1 +36,0 @@\n-import java.io.UnsupportedEncodingException;\n@@ -125,1 +124,4 @@\n-     * specified by the host environment or user.\n+     * specified by the host environment or user. The encoding used\n+     * in the conversion from characters to bytes is determined by\n+     * {@link Console#charset()} if the {@code Console} exists,\n+     * {@link Charset#defaultCharset()} otherwise.\n@@ -159,0 +161,3 @@\n+     * The encoding used in the conversion from characters to bytes is\n+     * determined by {@link Console#charset()} if the {@code Console}\n+     * exists, {@link Charset#defaultCharset()} otherwise.\n@@ -1912,7 +1917,2 @@\n-    private static PrintStream newPrintStream(FileOutputStream fos, String enc) {\n-       if (enc != null) {\n-            try {\n-                return new PrintStream(new BufferedOutputStream(fos, 128), true, enc);\n-            } catch (UnsupportedEncodingException uee) {}\n-        }\n-        return new PrintStream(new BufferedOutputStream(fos, 128), true);\n+    private static PrintStream newPrintStream(FileOutputStream fos, Charset cs) {\n+        return new PrintStream(new BufferedOutputStream(fos, 128), true, cs);\n@@ -2013,0 +2013,2 @@\n+        Console con = System.console();\n+        Charset cs = con != null ? con.charset() : Charset.defaultCharset();\n@@ -2017,2 +2019,2 @@\n-        setOut0(newPrintStream(fdOut, props.getProperty(\"sun.stdout.encoding\")));\n-        setErr0(newPrintStream(fdErr, props.getProperty(\"sun.stderr.encoding\")));\n+        setOut0(newPrintStream(fdOut, cs));\n+        setErr0(newPrintStream(fdErr, cs));\n","filename":"src\/java.base\/share\/classes\/java\/lang\/System.java","additions":13,"deletions":11,"binary":false,"changes":24,"status":"modified"}]}