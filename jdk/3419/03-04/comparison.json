{"files":[{"patch":"@@ -36,0 +36,1 @@\n+import java.io.UnsupportedEncodingException;\n@@ -125,1 +126,1 @@\n-     * in the conversion from characters to bytes is determined by\n+     * in the conversion from characters to bytes is equivalent to\n@@ -162,1 +163,1 @@\n-     * determined by {@link Console#charset()} if the {@code Console}\n+     * equivalent to {@link Console#charset()} if the {@code Console}\n@@ -1917,2 +1918,7 @@\n-    private static PrintStream newPrintStream(FileOutputStream fos, Charset cs) {\n-        return new PrintStream(new BufferedOutputStream(fos, 128), true, cs);\n+    private static PrintStream newPrintStream(FileOutputStream fos, String enc) {\n+       if (enc != null) {\n+            try {\n+                return new PrintStream(new BufferedOutputStream(fos, 128), true, enc);\n+            } catch (UnsupportedEncodingException uee) {}\n+        }\n+        return new PrintStream(new BufferedOutputStream(fos, 128), true);\n@@ -2013,2 +2019,0 @@\n-        Console con = System.console();\n-        Charset cs = con != null ? con.charset() : Charset.defaultCharset();\n@@ -2019,2 +2023,2 @@\n-        setOut0(newPrintStream(fdOut, cs));\n-        setErr0(newPrintStream(fdErr, cs));\n+        setOut0(newPrintStream(fdOut, props.getProperty(\"sun.stdout.encoding\")));\n+        setErr0(newPrintStream(fdErr, props.getProperty(\"sun.stderr.encoding\")));\n","filename":"src\/java.base\/share\/classes\/java\/lang\/System.java","additions":12,"deletions":8,"binary":false,"changes":20,"status":"modified"}]}