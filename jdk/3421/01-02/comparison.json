{"files":[{"patch":"@@ -63,1 +63,8 @@\n-     * @return false because Graal is removed from JDK.\n+     * Graal is enabled if following conditions are true:\n+     * - we are not in Interpreter mode\n+     * - UseJVMCICompiler flag is true\n+     * - jvmci.Compiler variable is equal to 'graal'\n+     * - TieredCompilation is not used or TieredStopAtLevel is greater than 3\n+     * No need to check client mode because it set UseJVMCICompiler to false.\n+     *\n+     * @return true if Graal is used as JIT compiler.\n@@ -66,1 +73,17 @@\n-        return false;\n+        Boolean useCompiler = WB.getBooleanVMFlag(\"UseCompiler\");\n+        if (useCompiler == null || !useCompiler) {\n+            return false;\n+        }\n+        Boolean useJvmciComp = WB.getBooleanVMFlag(\"UseJVMCICompiler\");\n+        if (useJvmciComp == null || !useJvmciComp) {\n+            return false;\n+        }\n+\n+        Boolean tieredCompilation = WB.getBooleanVMFlag(\"TieredCompilation\");\n+        Long compLevel = WB.getIntxVMFlag(\"TieredStopAtLevel\");\n+        \/\/ if TieredCompilation is enabled and compilation level is <= 3 then no Graal is used\n+        if (tieredCompilation != null && tieredCompilation &&\n+            compLevel != null && compLevel <= 3) {\n+            return false;\n+        }\n+        return true;\n","filename":"test\/lib\/sun\/hotspot\/code\/Compiler.java","additions":25,"deletions":2,"binary":false,"changes":27,"status":"modified"}]}