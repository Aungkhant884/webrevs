{"files":[{"patch":"@@ -227,1 +227,1 @@\n-LIR_Opr LIRGenerator::load_immediate(int x, BasicType type) {\n+LIR_Opr LIRGenerator::load_immediate(jlong x, BasicType type) {\n@@ -237,1 +237,1 @@\n-    r = LIR_OprFact::intConst(x);\n+    r = LIR_OprFact::intConst(checked_cast<jint>(x));\n","filename":"src\/hotspot\/cpu\/aarch64\/c1_LIRGenerator_aarch64.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -288,1 +288,1 @@\n-LIR_Opr LIRGenerator::load_immediate(int x, BasicType type) {\n+LIR_Opr LIRGenerator::load_immediate(jlong x, BasicType type) {\n@@ -291,1 +291,2 @@\n-  bool imm_in_range = AsmOperand::is_rotated_imm(x);\n+  bool imm_in_range = (x >= 0) && (x <= UINT_MAX) &&\n+          AsmOperand::is_rotated_imm(checked_cast<unsigned int>(x));\n","filename":"src\/hotspot\/cpu\/arm\/c1_LIRGenerator_arm.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -245,1 +245,1 @@\n-LIR_Opr LIRGenerator::load_immediate(int x, BasicType type) {\n+LIR_Opr LIRGenerator::load_immediate(jlong x, BasicType type) {\n@@ -250,1 +250,1 @@\n-    r = LIR_OprFact::intConst(x);\n+    r = LIR_OprFact::intConst(checked_cast<jint>(x));\n","filename":"src\/hotspot\/cpu\/ppc\/c1_LIRGenerator_ppc.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -194,1 +194,1 @@\n-LIR_Opr LIRGenerator::load_immediate(int x, BasicType type) {\n+LIR_Opr LIRGenerator::load_immediate(jlong x, BasicType type) {\n@@ -199,1 +199,1 @@\n-    r = LIR_OprFact::intConst(x);\n+    r = LIR_OprFact::intConst(checked_cast<jint>(x));\n","filename":"src\/hotspot\/cpu\/s390\/c1_LIRGenerator_s390.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -214,1 +214,1 @@\n-LIR_Opr LIRGenerator::load_immediate(int x, BasicType type) {\n+LIR_Opr LIRGenerator::load_immediate(jlong x, BasicType type) {\n@@ -219,1 +219,1 @@\n-    r = LIR_OprFact::intConst(x);\n+    r = LIR_OprFact::intConst(checked_cast<jint>(x));\n","filename":"src\/hotspot\/cpu\/x86\/c1_LIRGenerator_x86.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1348,1 +1348,0 @@\n-  __ convert(Bytecodes::_i2l, layout, result_reg);\n@@ -1351,2 +1350,4 @@\n-  jlong mask = ~(jlong) right_n_bits(LogBytesPerLong);\n-  __ logical_and(result_reg, LIR_OprFact::longConst(mask), result_reg);\n+\n+  LIR_Opr mask = load_immediate(~(jint) right_n_bits(LogBytesPerLong), T_INT);\n+  __ logical_and(layout, mask, layout);\n+  __ convert(Bytecodes::_i2l, layout, result_reg);\n@@ -1365,2 +1366,2 @@\n-  LIR_Opr hss = LIR_OprFact::intConst(Klass::_lh_header_size_shift);\n-  LIR_Opr hsm = LIR_OprFact::intConst(Klass::_lh_header_size_mask);\n+  LIR_Opr hss = load_immediate(Klass::_lh_header_size_shift, T_INT);\n+  LIR_Opr hsm = load_immediate(Klass::_lh_header_size_mask, T_INT);\n@@ -1377,1 +1378,1 @@\n-  LIR_Opr l2esm = LIR_OprFact::intConst(Klass::_lh_log2_element_size_mask);\n+  LIR_Opr l2esm = load_immediate(Klass::_lh_log2_element_size_mask, T_INT);\n@@ -1417,1 +1418,2 @@\n-    __ logical_and(length, LIR_OprFact::longConst(~round_mask), length);\n+    LIR_Opr round_mask_opr = load_immediate(~(jlong)round_mask, T_LONG);\n+    __ logical_and(length, round_mask_opr, length);\n@@ -1423,1 +1425,2 @@\n-    __ logical_and(length_int, LIR_OprFact::intConst(~round_mask), length_int);\n+    LIR_Opr round_mask_opr = load_immediate(~round_mask, T_INT);\n+    __ logical_and(length_int, round_mask_opr, length_int);\n","filename":"src\/hotspot\/share\/c1\/c1_LIRGenerator.cpp","additions":11,"deletions":8,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -218,1 +218,1 @@\n-  LIR_Opr load_immediate(int x, BasicType type);\n+  LIR_Opr load_immediate(jlong x, BasicType type);\n","filename":"src\/hotspot\/share\/c1\/c1_LIRGenerator.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}