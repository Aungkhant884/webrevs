{"files":[{"patch":"@@ -57,0 +57,16 @@\n+    public static final class KeyStoreLocation {\n+\n+        public static final KeyStoreLocation CURRENTUSER = new KeyStoreLocation(0);\n+        public static final KeyStoreLocation LOCALMACHINE = new KeyStoreLocation(1);\n+    \n+        private int value;\n+    \n+        private KeyStoreLocation(int intValue) {\n+            this.value = intValue;\n+        }\n+    \n+        public int getIntValue() {\n+            return value;\n+        }\n+    }    \n+\n@@ -59,1 +75,1 @@\n-            super(\"MY\", \"CURRENTUSER\");\n+            super(\"MY\", KeyStoreLocation.CURRENTUSER);\n@@ -65,1 +81,1 @@\n-            super(\"ROOT\", \"CURRENTUSER\");\n+            super(\"ROOT\", KeyStoreLocation.CURRENTUSER);\n@@ -71,1 +87,1 @@\n-            super(\"MY\", \"LOCALMACHINE\");\n+            super(\"MY\", KeyStoreLocation.LOCALMACHINE);\n@@ -77,1 +93,1 @@\n-            super(\"ROOT\", \"LOCALMACHINE\");\n+            super(\"ROOT\", KeyStoreLocation.LOCALMACHINE);\n@@ -237,1 +253,0 @@\n-     * Case is not significant.\n@@ -239,1 +254,1 @@\n-    private final String storeLocation;\n+    private final KeyStoreLocation storeLocation;\n@@ -241,1 +256,1 @@\n-    CKeyStore(String storeName, String storeLocation) {\n+    CKeyStore(String storeName, KeyStoreLocation storeLocation) {\n@@ -727,1 +742,1 @@\n-            loadKeysOrCertificateChains(getName(), getLocation());\n+            loadKeysOrCertificateChains(getName(), getLocationValue());\n@@ -853,2 +868,2 @@\n-    private String getLocation() {\n-        return storeLocation;\n+    private int getLocationValue() {\n+        return storeLocation.getIntValue();\n@@ -864,1 +879,1 @@\n-        String location) throws KeyStoreException;\n+        int location) throws KeyStoreException;\n","filename":"src\/jdk.crypto.mscapi\/windows\/classes\/sun\/security\/mscapi\/CKeyStore.java","additions":26,"deletions":11,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -62,0 +62,3 @@\n+#define KEYSTORE_LOCATION_CURRENTUSER  0\n+#define KEYSTORE_LOCATION_LOCALMACHINE 1\n+\n@@ -389,1 +392,1 @@\n- * Signature: (Ljava\/lang\/String;Ljava\/lang\/String;)V\n+ * Signature: (Ljava\/lang\/String;I)V\n@@ -392,1 +395,1 @@\n-  (JNIEnv *env, jobject obj, jstring jCertStoreName, jstring jCertStoreLocation)\n+  (JNIEnv *env, jobject obj, jstring jCertStoreName, jint jCertStoreLocation)\n@@ -405,1 +408,0 @@\n-    const char* pszCertStoreLocation = NULL;\n@@ -411,1 +413,0 @@\n-\n@@ -419,4 +420,0 @@\n-        if ((pszCertStoreLocation = env->GetStringUTFChars(jCertStoreLocation, NULL))\n-            == NULL) {\n-            __leave;\n-        }\n@@ -424,2 +421,4 @@\n-        if (strcmp(pszCertStoreLocation, \"LOCALMACHINE\") == 0)\n-        {\n+        if (jCertStoreLocation == KEYSTORE_LOCATION_CURRENTUSER) {\n+            hCertStore = ::CertOpenSystemStore(NULL, pszCertStoreName);\n+        }\n+        else if (jCertStoreLocation == KEYSTORE_LOCATION_LOCALMACHINE) {\n@@ -429,3 +428,3 @@\n-        else\n-        {\n-            hCertStore = ::CertOpenSystemStore(NULL, pszCertStoreName);\n+        else {\n+            PP(\"jCertStoreLocation is not a valid value\");\n+            __leave;\n","filename":"src\/jdk.crypto.mscapi\/windows\/native\/libsunmscapi\/security.cpp","additions":12,"deletions":13,"binary":false,"changes":25,"status":"modified"}]}