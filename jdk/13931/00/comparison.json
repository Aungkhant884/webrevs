{"files":[{"patch":"@@ -1485,3 +1485,0 @@\n-\n-\/\/ NOTE: set_use_compressed_klass_ptrs() must be called after calling\n-\/\/ set_use_compressed_oops().\n@@ -1490,18 +1487,2 @@\n-  \/\/ On some architectures, the use of UseCompressedClassPointers implies the use of\n-  \/\/ UseCompressedOops. The reason is that the rheap_base register of said platforms\n-  \/\/ is reused to perform some optimized spilling, in order to use rheap_base as a\n-  \/\/ temp register. But by treating it as any other temp register, spilling can typically\n-  \/\/ be completely avoided instead. So it is better not to perform this trick. And by\n-  \/\/ not having that reliance, large heaps, or heaps not supporting compressed oops,\n-  \/\/ can still use compressed class pointers.\n-  \/\/ Turn on UseCompressedClassPointers too\n-  if (FLAG_IS_DEFAULT(UseCompressedClassPointers)) {\n-    FLAG_SET_ERGO(UseCompressedClassPointers, true);\n-  }\n-  \/\/ Check the CompressedClassSpaceSize to make sure we use compressed klass ptrs.\n-  if (UseCompressedClassPointers) {\n-    if (CompressedClassSpaceSize > KlassEncodingMetaspaceMax) {\n-      warning(\"CompressedClassSpaceSize is too large for UseCompressedClassPointers\");\n-      FLAG_SET_DEFAULT(UseCompressedClassPointers, false);\n-    }\n-  }\n+  assert(!UseCompressedClassPointers || CompressedClassSpaceSize <= KlassEncodingMetaspaceMax,\n+         \"CompressedClassSpaceSize is too large for UseCompressedClassPointers\");\n@@ -1529,3 +1510,0 @@\n-\n-  \/\/ set_use_compressed_klass_ptrs() must be called after calling\n-  \/\/ set_use_compressed_oops().\n","filename":"src\/hotspot\/share\/runtime\/arguments.cpp","additions":2,"deletions":24,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -128,1 +128,1 @@\n-  product(bool, UseCompressedClassPointers, false,                          \\\n+  product(bool, UseCompressedClassPointers, true,                           \\\n","filename":"src\/hotspot\/share\/runtime\/globals.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}