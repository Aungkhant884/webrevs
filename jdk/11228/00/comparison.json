{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,2 @@\n+import java.util.ArrayList;\n+import java.util.List;\n@@ -41,1 +43,1 @@\n-    public static void main(String[] args) {\n+    public static void main(String[] args) throws Exception {\n@@ -44,1 +46,1 @@\n-        Thread t = new Thread(() -> {\n+        Thread threadChangeENM = new Thread(() -> {\n@@ -47,2 +49,2 @@\n-        t.setDaemon(true);\n-        t.start();\n+        threadChangeENM.setDaemon(true);\n+        threadChangeENM.start();\n@@ -50,5 +52,13 @@\n-        for (int i = 0; i < 2000; i++) {\n-            new Thread(() -> {\n-                String result = \"string\" + System.currentTimeMillis();\n-                Reference.reachabilityFence(result);\n-            }).start();\n+        for (int i = 0; i < 10; i++) {\n+            List<Thread> threads = new ArrayList();\n+            for (int j = 0; j < 200; j++) {\n+                Thread t = new Thread(() -> {\n+                        String result = \"string\" + System.currentTimeMillis();\n+                        Reference.reachabilityFence(result);\n+                });\n+                threads.add(t);\n+                t.start();\n+            }\n+            for (Thread t: threads) {\n+                t.join();\n+            }\n","filename":"test\/hotspot\/jtreg\/serviceability\/jvmti\/DynamicCodeGenerated\/DynamicCodeGeneratedTest.java","additions":20,"deletions":10,"binary":false,"changes":30,"status":"modified"}]}