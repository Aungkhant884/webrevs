{"files":[{"patch":"@@ -411,1 +411,0 @@\n-  if (_features & CPU_PACA) {\n@@ -413,1 +412,10 @@\n-    FLAG_SET_DEFAULT(UseROPProtection, true);\n+  if (_features & CPU_PACA) {\n+    if (FLAG_IS_DEFAULT(UseROPProtection)) {\n+      FLAG_SET_DEFAULT(UseROPProtection, true);\n+    }\n+  } else {\n+    if (UseROPProtection) {\n+      warning(\"UseROPProtection specified, but not supported on this CPU.\");\n+      FLAG_SET_DEFAULT(UseROPProtection, false);\n+    }\n+  }\n@@ -415,2 +423,2 @@\n-    \/\/ The VM has not been built with the branch protection flag.\n-    \/\/ Therefore there's no benefit in protecting generated code.\n+  \/\/ The VM has not been built with the branch protection flag.\n+  if (UseROPProtection) {\n@@ -419,4 +427,0 @@\n-#endif\n-  } else if (UseROPProtection) {\n-    warning(\"UseROPProtection specified, but not supported on this CPU\");\n-    FLAG_SET_DEFAULT(UseROPProtection, false);\n@@ -424,0 +428,1 @@\n+#endif\n","filename":"src\/hotspot\/cpu\/aarch64\/vm_version_aarch64.cpp","additions":13,"deletions":8,"binary":false,"changes":21,"status":"modified"}]}