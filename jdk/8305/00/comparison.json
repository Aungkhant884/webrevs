{"files":[{"patch":"@@ -467,1 +467,0 @@\n-java\/awt\/Robot\/RobotWheelTest\/RobotWheelTest.java 8129827 generic-all\n","filename":"test\/jdk\/ProblemList.txt","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -23,0 +23,1 @@\n+\n@@ -27,0 +28,1 @@\n+import java.util.concurrent.atomic.AtomicInteger;\n@@ -43,1 +45,26 @@\n-    private static volatile int wheelRotation;\n+\n+    private static AtomicInteger wheelRotation = new AtomicInteger();\n+    private static int wheelSign = Platform.isOSX() ? -1 : 1;\n+\n+    static Robot robot;\n+\n+    static void waitTillSuccess(int i) {\n+        boolean success = false;\n+\n+        for (int t = 0; t < 5; t++) {\n+            if (i == wheelSign * wheelRotation.get()) {\n+                success = true;\n+                break;\n+            }\n+            System.out.printf(\n+                    \"attempt #%d failed. wheelRotation = %d, expected value = %d\\n\",\n+                    t, wheelRotation.get(), i\n+            );\n+            robot.delay(100);\n+        }\n+\n+        if (!success) {\n+            throw new RuntimeException(\"wheelRotation = \" + wheelRotation.get()\n+                    + \", expected value = \" + i);\n+        }\n+    }\n@@ -46,0 +73,1 @@\n+        robot = new Robot();\n@@ -49,2 +77,0 @@\n-            int wheelSign = Platform.isOSX() ? -1 : 1;\n-\n@@ -54,1 +80,1 @@\n-            button.addMouseWheelListener(e -> wheelRotation = e.getWheelRotation());\n+            button.addMouseWheelListener(e -> wheelRotation.addAndGet(e.getWheelRotation()));\n@@ -56,0 +82,1 @@\n+            frame.setLocationRelativeTo(null);\n@@ -58,1 +85,0 @@\n-            Robot robot = new Robot();\n@@ -72,0 +98,3 @@\n+\n+                wheelRotation.set(0);\n+\n@@ -74,4 +103,2 @@\n-                if (i != wheelSign * wheelRotation) {\n-                    throw new RuntimeException(\"wheelRotation = \" + wheelRotation\n-                            + \", expected value = \" + i);\n-                }\n+\n+                waitTillSuccess(i);\n","filename":"test\/jdk\/java\/awt\/Robot\/RobotWheelTest\/RobotWheelTest.java","additions":37,"deletions":10,"binary":false,"changes":47,"status":"modified"}]}