{"files":[{"patch":"@@ -267,1 +267,1 @@\n-  if (UsePerfData) {\n+  if (UsePerfData && os::is_thread_cpu_time_supported()) {\n","filename":"src\/hotspot\/share\/gc\/shared\/collectedHeap.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -49,0 +49,1 @@\n+PerfVariable* StringDedup::Processor::_g1_concurrent_dedup_thread_cpu_time = NULL;\n@@ -190,0 +191,4 @@\n+    if (UsePerfData && os::is_thread_cpu_time_supported()) {\n+      ThreadTotalCPUTimeClosure tttc(_g1_concurrent_dedup_thread_cpu_time);\n+      tttc.do_thread(thread);\n+    }\n","filename":"src\/hotspot\/share\/gc\/shared\/stringdedup\/stringDedupProcessor.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -50,0 +50,3 @@\n+  \/\/ Perf data for CPU time consumed by the string dedup thread.\n+  static PerfVariable* _g1_concurrent_dedup_thread_cpu_time;\n+\n","filename":"src\/hotspot\/share\/gc\/shared\/stringdedup\/stringDedupProcessor.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -34,1 +34,0 @@\n-PerfVariable* StringDedupThread::_g1_concurrent_dedup_thread_cpu_time = NULL;\n","filename":"src\/hotspot\/share\/gc\/shared\/stringdedup\/stringDedupThread.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -43,3 +43,0 @@\n-  \/\/ Perf data for CPU time consumed by the string dedup thread.\n-  static PerfVariable* _g1_concurrent_dedup_thread_cpu_time;\n-\n","filename":"src\/hotspot\/share\/gc\/shared\/stringdedup\/stringDedupThread.hpp","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -134,1 +134,1 @@\n-  if (UsePerfData) {\n+  if (UsePerfData && os::is_thread_cpu_time_supported()) {\n@@ -299,2 +299,2 @@\n-    \/\/ perf_vm_thread_cpu_time()->set_value(os::current_thread_cpu_time());\n-    ThreadTotalCPUTimeClosure tttc(perf_vm_thread_cpu_time());\n+    \/\/ _perf_vm_thread_cpu_time->set_value(os::current_thread_cpu_time());\n+    ThreadTotalCPUTimeClosure tttc(_perf_vm_thread_cpu_time);\n","filename":"src\/hotspot\/share\/runtime\/vmThread.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -127,3 +127,0 @@\n-  static PerfVariable* perf_vm_thread_cpu_time() {\n-    return _perf_vm_thread_cpu_time;\n-  }\n","filename":"src\/hotspot\/share\/runtime\/vmThread.hpp","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"}]}