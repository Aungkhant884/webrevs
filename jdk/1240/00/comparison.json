{"files":[{"patch":"@@ -73,1 +73,1 @@\n-        vm_exit_during_initialization(\"Unable to locate JVMCI shared library in path specified by -XX:JVMCILibPath value\", JVMCILibPath);\n+        fatal(\"Unable to create path to JVMCI shared library based on value of JVMCILibPath (%s)\", JVMCILibPath);\n@@ -77,1 +77,1 @@\n-        vm_exit_during_initialization(\"Unable to create path to JVMCI shared library\");\n+        fatal(\"Unable to create path to JVMCI shared library\");\n@@ -83,1 +83,1 @@\n-      vm_exit_during_initialization(\"Unable to load JVMCI shared library\", ebuf);\n+      fatal(\"Unable to load JVMCI shared library from %s: %s\", path, ebuf);\n","filename":"src\/hotspot\/share\/jvmci\/jvmci.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -103,1 +103,1 @@\n-    JVMCIRuntime::exit_on_pending_exception(NULL, \"Error initializing jdk.vm.ci.services.Services\");\n+    JVMCIRuntime::fatal_exception(NULL, \"Error initializing jdk.vm.ci.services.Services\");\n@@ -109,1 +109,1 @@\n-      JVMCIRuntime::exit_on_pending_exception(NULL, \"Error initializing jdk.vm.ci.services.Services\");\n+      JVMCIRuntime::fatal_exception(NULL, \"Error initializing jdk.vm.ci.services.Services\");\n@@ -119,1 +119,1 @@\n-    JVMCIRuntime::exit_on_pending_exception(NULL, \"Error calling jdk.vm.ci.services.Services.serializeSavedProperties\");\n+    JVMCIRuntime::fatal_exception(NULL, \"Error calling jdk.vm.ci.services.Services.serializeSavedProperties\");\n@@ -221,1 +221,1 @@\n-    JVMCIRuntime::exit_on_pending_exception(this, message);\n+    JVMCIRuntime::fatal_exception(this, message);\n@@ -290,1 +290,1 @@\n-    JVMCIRuntime::exit_on_pending_exception(this, \"HotSpotJVMCIRuntime.encodeThrowable should not throw an exception\");\n+    JVMCIRuntime::fatal_exception(this, \"HotSpotJVMCIRuntime.encodeThrowable should not throw an exception\");\n@@ -331,1 +331,1 @@\n-      JVMCIRuntime::exit_on_pending_exception(this, message);\n+      JVMCIRuntime::fatal_exception(this, message);\n","filename":"src\/hotspot\/share\/jvmci\/jvmciEnv.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -1085,1 +1085,1 @@\n-void JVMCIRuntime::exit_on_pending_exception(JVMCIEnv* JVMCIENV, const char* message) {\n+void JVMCIRuntime::fatal_exception(JVMCIEnv* JVMCIENV, const char* message) {\n@@ -1101,3 +1101,1 @@\n-\n-  before_exit(THREAD);\n-  vm_exit(-1);\n+  fatal(\"Fatal exception in JVMCI: %s\", message);\n@@ -1457,13 +1455,0 @@\n-\/\/ Reports a pending exception and exits the VM.\n-static void fatal_exception_in_compile(JVMCIEnv* JVMCIENV, JavaThread* thread, const char* msg) {\n-  \/\/ Only report a fatal JVMCI compilation exception once\n-  static volatile int report_init_failure = 0;\n-  if (!report_init_failure && Atomic::cmpxchg(&report_init_failure, 0, 1) == 0) {\n-      tty->print_cr(\"%s:\", msg);\n-      JVMCIENV->describe_pending_exception(true);\n-  }\n-  JVMCIENV->clear_pending_exception();\n-  before_exit(thread);\n-  vm_exit(-1);\n-}\n-\n@@ -1490,1 +1475,1 @@\n-    fatal_exception_in_compile(JVMCIENV, thread, \"Exception during HotSpotJVMCIRuntime initialization\");\n+    fatal_exception(JVMCIENV, \"Exception during HotSpotJVMCIRuntime initialization\");\n@@ -1525,1 +1510,1 @@\n-    fatal_exception_in_compile(JVMCIENV, thread, \"Exception during JVMCI compiler initialization\");\n+    fatal_exception(JVMCIENV, \"Exception during JVMCI compiler initialization\");\n","filename":"src\/hotspot\/share\/jvmci\/jvmciRuntime.cpp","additions":4,"deletions":19,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -306,2 +306,2 @@\n-  \/\/ Exits the VM due to an unexpected exception.\n-  static void exit_on_pending_exception(JVMCIEnv* JVMCIENV, const char* message);\n+  \/\/ Reports an unexpected exception and exits the VM with a fatal error.\n+  static void fatal_exception(JVMCIEnv* JVMCIENV, const char* message);\n@@ -315,1 +315,1 @@\n-    JVMCIRuntime::exit_on_pending_exception(NULL, buf); \\\n+    JVMCIRuntime::fatal_exception(NULL, buf); \\\n@@ -324,1 +324,1 @@\n-    JVMCIRuntime::exit_on_pending_exception(NULL, buf); \\\n+    JVMCIRuntime::fatal_exception(NULL, buf); \\\n@@ -333,1 +333,1 @@\n-    JVMCIRuntime::exit_on_pending_exception(JVMCIENV, buf); \\\n+    JVMCIRuntime::fatal_exception(JVMCIENV, buf); \\\n@@ -342,1 +342,1 @@\n-    JVMCIRuntime::exit_on_pending_exception(JVMCIENV, buf); \\\n+    JVMCIRuntime::fatal_exception(JVMCIENV, buf); \\\n","filename":"src\/hotspot\/share\/jvmci\/jvmciRuntime.hpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"}]}