{"files":[{"patch":"@@ -38,0 +38,2 @@\n+    static int MAX_TRIES = 3;\n+    static String GREETINGS_MESSAGE = \"Greetings from SelectWhenRefused!\";\n@@ -58,1 +60,1 @@\n-            for (int i = 0; i < 3; i++) {\n+            for (int i = 0; i < MAX_TRIES; i++) {\n@@ -66,1 +68,1 @@\n-                        continue;\n+                        if (i < MAX_TRIES - 1) continue;\n@@ -72,0 +74,2 @@\n+                } else {\n+                    break;\n@@ -74,4 +78,4 @@\n-            for (int i = 0; i < 3; i++) {\n-                \/* Test 2: connected so ICMP port unreachable may be received *\/\n-                dc.connect(refuser);\n-                try {\n+            \/* Test 2: connected so ICMP port unreachable may be received *\/\n+            dc.connect(refuser);\n+            try {\n+                for (int i = 0; i < MAX_TRIES; i++) {\n@@ -88,1 +92,1 @@\n-                            if (message.contains(\"Greetings from SelectWhenRefused!\")) {\n+                            if (message.contains(GREETINGS_MESSAGE)) {\n@@ -99,2 +103,1 @@\n-                } finally {\n-                    dc.disconnect();\n+                    break;\n@@ -102,0 +105,2 @@\n+            } finally {\n+                dc.disconnect();\n@@ -103,1 +108,1 @@\n-            for (int i = 0; i < 3; i++) {\n+            for (int i = 0; i < MAX_TRIES; i++) {\n@@ -111,1 +116,1 @@\n-                        continue;\n+                        if (i < MAX_TRIES - 1) continue;\n@@ -126,3 +131,2 @@\n-        throws IOException\n-    {\n-        ByteBuffer bb = ByteBuffer.wrap(\"Greetings from SelectWhenRefused!\".getBytes());\n+            throws IOException {\n+        ByteBuffer bb = ByteBuffer.wrap(GREETINGS_MESSAGE.getBytes());\n@@ -146,1 +150,1 @@\n-                if (message.contains(\"Greetings from SelectWhenRefused!\")) {\n+                if (message.contains(GREETINGS_MESSAGE)) {\n","filename":"test\/jdk\/java\/nio\/channels\/DatagramChannel\/SelectWhenRefused.java","additions":19,"deletions":15,"binary":false,"changes":34,"status":"modified"}]}