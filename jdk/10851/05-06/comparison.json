{"files":[{"patch":"@@ -60,0 +60,1 @@\n+            \/* Test 1: not connected so ICMP port unreachable should not be received *\/\n@@ -61,1 +62,0 @@\n-                \/* Test 1: not connected so ICMP port unreachable should not be received *\/\n@@ -77,0 +77,1 @@\n+\n@@ -88,8 +89,10 @@\n-                            buf.flip();\n-                            byte[] bytes = new byte[buf.remaining()];\n-                            buf.get(bytes);\n-                            String message = new String(bytes);\n-                            System.out.format(\"received %s at %s from %s%n\", message, dc.getLocalAddress(), sa);\n-                            \/\/If any received data contains the message from sendDatagram then return true\n-                            if (message.contains(GREETINGS_MESSAGE)) {\n-                                throw new RuntimeException(\"Unexpected datagram received\");\n+                            if (sa != null) {\n+                                buf.flip();\n+                                byte[] bytes = new byte[buf.remaining()];\n+                                buf.get(bytes);\n+                                String message = new String(bytes);\n+                                System.out.format(\"received %s at %s from %s%n\", message, dc.getLocalAddress(), sa);\n+                                \/\/ If any received data contains the message from sendDatagram then throw exception\n+                                if (message.contains(GREETINGS_MESSAGE)) {\n+                                    throw new RuntimeException(\"Unexpected datagram received\");\n+                                }\n@@ -111,0 +114,2 @@\n+\n+            \/* Test 3: not connected so ICMP port unreachable should not be received *\/\n@@ -112,1 +117,0 @@\n-                \/* Test 3: not connected so ICMP port unreachable should not be received *\/\n@@ -151,4 +155,0 @@\n-                buf.flip();\n-                byte[] bytes = new byte[buf.remaining()];\n-                buf.get(bytes);\n-                String message = new String(bytes);\n@@ -156,0 +156,4 @@\n+                    buf.flip();\n+                    byte[] bytes = new byte[buf.remaining()];\n+                    buf.get(bytes);\n+                    String message = new String(bytes);\n@@ -157,4 +161,4 @@\n-                }\n-                \/\/If any received data contains the message from sendDatagram then return false\n-                if (message.contains(GREETINGS_MESSAGE)) {\n-                    return false;\n+                    \/\/ If any received data contains the message from sendDatagram then return false\n+                    if (message.contains(GREETINGS_MESSAGE)) {\n+                        return false;\n+                    }\n","filename":"test\/jdk\/java\/nio\/channels\/DatagramChannel\/SelectWhenRefused.java","additions":22,"deletions":18,"binary":false,"changes":40,"status":"modified"}]}