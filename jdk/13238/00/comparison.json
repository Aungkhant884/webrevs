{"files":[{"patch":"@@ -571,18 +571,9 @@\n-      uint max = outcnt();\n-      DUIterator j;\n-      bool progress = true;\n-      while(progress) {         \/\/ Need to establish property over all users\n-        progress = false;\n-        for (j = outs(); has_out(j); j++) {\n-          Node *n = out(j);\n-          if( n->req() != req() && n->is_Phi() ) {\n-            assert( n->in(0) == this, \"\" );\n-            igvn->hash_delete(n); \/\/ Yank from hash before hacking edges\n-            n->set_req_X(i,nullptr,igvn);\/\/ Correct DU info\n-            n->del_req(i);        \/\/ Yank path from Phis\n-            if( max != outcnt() ) {\n-              progress = true;\n-              j = refresh_out_pos(j);\n-              max = outcnt();\n-            }\n-          }\n+\n+      for (DUIterator_Fast jmax, j = fast_outs(jmax); j < jmax; j++) {\n+        Node* use = fast_out(j);\n+\n+        if(use->req() != req() && use->is_Phi()) {\n+          assert(use->in(0) == this, \"\");\n+          igvn->hash_delete(use);          \/\/ Yank from hash before hacking edges\n+          use->set_req_X(i, nullptr, igvn);\/\/ Correct DU info\n+          use->del_req(i);                 \/\/ Yank path from Phis\n@@ -591,2 +582,6 @@\n-      add_to_worklist = false;\n-      phase->is_IterGVN()->add_users_to_worklist(this);\n+\n+      if (add_to_worklist) {\n+        igvn->add_users_to_worklist0(this);\n+        add_to_worklist = false;\n+      }\n+\n","filename":"src\/hotspot\/share\/opto\/cfgnode.cpp","additions":15,"deletions":20,"binary":false,"changes":35,"status":"modified"}]}