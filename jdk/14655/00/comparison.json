{"files":[{"patch":"@@ -770,0 +770,7 @@\n+    @ForceInline\n+    static String newStringLatin1NoRepl(byte[] src) {\n+        if (COMPACT_STRINGS)\n+            return new String(src, LATIN1);\n+        return new String(StringLatin1.inflate(src, 0, src.length), UTF16);\n+    }\n+\n@@ -793,3 +800,1 @@\n-            if (COMPACT_STRINGS)\n-                return new String(src, LATIN1);\n-            return new String(StringLatin1.inflate(src, 0, src.length), UTF16);\n+            return newStringLatin1NoRepl(src);\n@@ -799,3 +804,1 @@\n-                if (COMPACT_STRINGS)\n-                    return new String(src, LATIN1);\n-                return new String(StringLatin1.inflate(src, 0, src.length), UTF16);\n+                return newStringLatin1NoRepl(src);\n@@ -812,3 +815,1 @@\n-            if (COMPACT_STRINGS)\n-                return new String(src, LATIN1);\n-            return new String(src, 0, src.length, ISO_8859_1.INSTANCE);\n+            return newStringLatin1NoRepl(src);\n","filename":"src\/java.base\/share\/classes\/java\/lang\/String.java","additions":10,"deletions":9,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -2485,0 +2485,4 @@\n+            public String newStringLatin1NoRepl(byte[] bytes) {\n+                return String.newStringLatin1NoRepl(bytes);\n+            }\n+\n","filename":"src\/java.base\/share\/classes\/java\/lang\/System.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,2 +34,0 @@\n-import java.nio.charset.CharacterCodingException;\n-import java.nio.charset.StandardCharsets;\n@@ -141,1 +139,1 @@\n-    private static final JavaLangAccess jla = SharedSecrets.getJavaLangAccess();\n+    private static final JavaLangAccess JLA = SharedSecrets.getJavaLangAccess();\n@@ -466,6 +464,3 @@\n-        try {\n-            \/\/ Return a new string using the bytes without making a copy\n-            return jla.newStringNoRepl(rep, StandardCharsets.ISO_8859_1);\n-        } catch (CharacterCodingException cce) {\n-            throw new AssertionError(cce);\n-        }\n+\n+        \/\/ Return a new string using the bytes without making a copy\n+        return JLA.newStringLatin1NoRepl(rep);\n@@ -688,5 +683,2 @@\n-        try {\n-            return jla.newStringNoRepl(rep, StandardCharsets.ISO_8859_1);\n-        } catch (CharacterCodingException cce) {\n-            throw new AssertionError(cce);\n-        }\n+\n+        return JLA.newStringLatin1NoRepl(rep);\n@@ -724,5 +716,1 @@\n-        try {\n-            return jla.newStringNoRepl(rep, StandardCharsets.ISO_8859_1);\n-        } catch (CharacterCodingException cce) {\n-            throw new AssertionError(cce);\n-        }\n+        return JLA.newStringLatin1NoRepl(rep);\n@@ -752,5 +740,1 @@\n-        try {\n-            return jla.newStringNoRepl(rep, StandardCharsets.ISO_8859_1);\n-        } catch (CharacterCodingException cce) {\n-            throw new AssertionError(cce);\n-        }\n+        return JLA.newStringLatin1NoRepl(rep);\n@@ -788,5 +772,1 @@\n-        try {\n-            return jla.newStringNoRepl(rep, StandardCharsets.ISO_8859_1);\n-        } catch (CharacterCodingException cce) {\n-            throw new AssertionError(cce);\n-        }\n+        return JLA.newStringLatin1NoRepl(rep);\n@@ -816,5 +796,2 @@\n-        try {\n-            return jla.newStringNoRepl(rep, StandardCharsets.ISO_8859_1);\n-        } catch (CharacterCodingException cce) {\n-            throw new AssertionError(cce);\n-        }\n+\n+        return JLA.newStringLatin1NoRepl(rep);\n","filename":"src\/java.base\/share\/classes\/java\/util\/HexFormat.java","additions":12,"deletions":35,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -341,0 +341,11 @@\n+    \/**\n+     * Constructs a new {@code String} from the given Latin-1 bytes array.\n+     *\n+     * The caller of this method shall relinquish and transfer the ownership of\n+     * the byte array to the callee since the later will not make a copy.\n+     *\n+     * @param bytes the byte array source\n+     * @return the newly created string\n+     *\/\n+    String newStringLatin1NoRepl(byte[] bytes);\n+\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/access\/JavaLangAccess.java","additions":11,"deletions":0,"binary":false,"changes":11,"status":"modified"}]}