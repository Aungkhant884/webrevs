{"files":[{"patch":"@@ -307,1 +307,3 @@\n-                           true \/* is_closed_archive *\/, THREAD);\n+                           true \/* is_closed_archive *\/,\n+                           false \/* is_full_module_graph *\/,\n+                           THREAD);\n@@ -327,0 +329,1 @@\n+                           false \/* is_full_module_graph *\/,\n@@ -332,0 +335,1 @@\n+                             true \/* is_full_module_graph *\/,\n@@ -356,0 +360,1 @@\n+  Klass* relocated_k = MetaspaceShared::get_relocated_klass(k);\n@@ -357,1 +362,1 @@\n-    _dump_time_subgraph_info_table->put_if_absent(k, KlassSubGraphInfo(k, is_full_module_graph),\n+    _dump_time_subgraph_info_table->put_if_absent(relocated_k, KlassSubGraphInfo(relocated_k, is_full_module_graph),\n@@ -365,1 +370,2 @@\n-  KlassSubGraphInfo* info = _dump_time_subgraph_info_table->get(k);\n+  Klass* relocated_k = MetaspaceShared::get_relocated_klass(k);\n+  KlassSubGraphInfo* info = _dump_time_subgraph_info_table->get(relocated_k);\n@@ -443,1 +449,1 @@\n-  _k = MetaspaceShared::get_relocated_klass(info->klass());\n+  _k = info->klass();\n@@ -494,1 +500,1 @@\n-      unsigned int hash = SystemDictionaryShared::hash_for_shared_dictionary(MetaspaceShared::get_relocated_klass(klass));\n+      unsigned int hash = SystemDictionaryShared::hash_for_shared_dictionary(klass);\n@@ -977,1 +983,1 @@\n-void HeapShared::start_recording_subgraph(InstanceKlass *k, const char* class_name) {\n+void HeapShared::start_recording_subgraph(InstanceKlass *k, const char* class_name, bool is_full_module_graph) {\n@@ -979,0 +985,1 @@\n+  init_subgraph_info(k, is_full_module_graph);\n@@ -1023,2 +1030,1 @@\n-                                            int num, bool is_full_module_graph,\n-                                            Thread* THREAD) {\n+                                            int num, Thread* THREAD) {\n@@ -1044,1 +1050,0 @@\n-    init_subgraph_info(ik, is_full_module_graph);\n@@ -1053,1 +1058,1 @@\n-                             false, THREAD);\n+                             THREAD);\n@@ -1056,1 +1061,1 @@\n-                             false, THREAD);\n+                             THREAD);\n@@ -1060,1 +1065,1 @@\n-                               true, THREAD);\n+                               THREAD);\n@@ -1071,0 +1076,1 @@\n+                                          bool is_full_module_graph,\n@@ -1088,1 +1094,1 @@\n-    start_recording_subgraph(info->klass, klass_name);\n+    start_recording_subgraph(info->klass, klass_name, is_full_module_graph);\n@@ -1102,2 +1108,1 @@\n-                                                  is_closed_archive,\n-                                                  CHECK);\n+                                                  is_closed_archive, CHECK);\n","filename":"src\/hotspot\/share\/memory\/heapShared.cpp","additions":20,"deletions":15,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -194,0 +194,1 @@\n+                                       bool is_full_module_graph,\n@@ -212,1 +213,1 @@\n-                                         int num, bool is_full_module_graph, Thread* THREAD);\n+                                         int num, Thread* THREAD);\n@@ -248,1 +249,2 @@\n-  static void start_recording_subgraph(InstanceKlass *k, const char* klass_name);\n+  static void start_recording_subgraph(InstanceKlass *k, const char* klass_name,\n+                                       bool is_full_module_graph);\n","filename":"src\/hotspot\/share\/memory\/heapShared.hpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"}]}