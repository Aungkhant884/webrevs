{"files":[{"patch":"@@ -55,4 +55,7 @@\n-    if (cb->stubs()->maybe_expand_to_ensure_remaining(NativeInstruction::instruction_size) && cb->blob() == NULL) {\n-      ciEnv::current()->record_failure(\"CodeCache is full\");\n-      p_succeeded = false;\n-      return p_succeeded;\n+    if (!is_aligned(masm.offset(), wordSize)) {\n+      if (cb->stubs()->maybe_expand_to_ensure_remaining(NativeInstruction::instruction_size) && cb->blob() == NULL) {\n+        ciEnv::current()->record_failure(\"CodeCache is full\");\n+        p_succeeded = false;\n+        return p_succeeded;\n+      }\n+      masm.align(wordSize);\n@@ -60,1 +63,0 @@\n-    masm.align(wordSize);\n","filename":"src\/hotspot\/cpu\/aarch64\/codeBuffer_aarch64.cpp","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -56,4 +56,7 @@\n-    if (cb->stubs()->maybe_expand_to_ensure_remaining(NativeInstruction::instruction_size) && cb->blob() == NULL) {\n-      ciEnv::current()->record_failure(\"CodeCache is full\");\n-      p_succeeded = false;\n-      return p_succeeded;\n+    if (!is_aligned(masm.offset() + NativeCallTrampolineStub::data_offset, wordSize)) {\n+      if (cb->stubs()->maybe_expand_to_ensure_remaining(NativeInstruction::instruction_size) && cb->blob() == NULL) {\n+        ciEnv::current()->record_failure(\"CodeCache is full\");\n+        p_succeeded = false;\n+        return p_succeeded;\n+      }\n+      masm.align(wordSize, NativeCallTrampolineStub::data_offset);\n@@ -61,1 +64,0 @@\n-    masm.align(wordSize, NativeCallTrampolineStub::data_offset);\n","filename":"src\/hotspot\/cpu\/riscv\/codeBuffer_riscv.cpp","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"}]}