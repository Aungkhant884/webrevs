{"files":[{"patch":"@@ -33,0 +33,1 @@\n+import javax.swing.UnsupportedLookAndFeelException;\n@@ -35,0 +36,11 @@\n+    private static void setLookAndFeel(UIManager.LookAndFeelInfo laf) {\n+        try {\n+            UIManager.setLookAndFeel(laf.getClassName());\n+        } catch (UnsupportedLookAndFeelException ignored) {\n+            System.out.println(\"Unsupported L&F: \" + laf.getClassName());\n+        } catch (ClassNotFoundException | InstantiationException\n+                | IllegalAccessException e) {\n+            throw new RuntimeException(e);\n+        }\n+    }\n+\n@@ -36,14 +48,18 @@\n-        UIManager.setLookAndFeel(\"javax.swing.plaf.metal.MetalLookAndFeel\");\n-        JFileChooser fc = new JFileChooser();\n-        Font origFont = fc.getFont();\n-        System.out.println(\"orig font \" + origFont);\n-        UIManager.setLookAndFeel(\"javax.swing.plaf.nimbus.NimbusLookAndFeel\");\n-        SwingUtilities.updateComponentTreeUI(fc);\n-        System.out.println(\"Nimbus font \" + fc.getFont());\n-        UIManager.setLookAndFeel(\"javax.swing.plaf.metal.MetalLookAndFeel\");\n-        SwingUtilities.updateComponentTreeUI(fc);\n-        Font curFont = fc.getFont();\n-        System.out.println(\"current font \" + curFont);\n-        if (curFont != null && !curFont.equals(origFont)) {\n-            throw new RuntimeException(\n-                 \"JFileChooser font did not reset after Look & Feel change\");\n+        for (UIManager.LookAndFeelInfo laf :\n+                 UIManager.getInstalledLookAndFeels()) {\n+            System.out.println(\"Testing L&F: \" + laf.getClassName());\n+            SwingUtilities.invokeAndWait(() -> setLookAndFeel(laf));\n+            JFileChooser fc = new JFileChooser();\n+            Font origFont = fc.getFont();\n+            System.out.println(\"orig font \" + origFont);\n+            UIManager.setLookAndFeel(\"javax.swing.plaf.nimbus.NimbusLookAndFeel\");\n+            SwingUtilities.updateComponentTreeUI(fc);\n+            System.out.println(\"Nimbus font \" + fc.getFont());\n+            SwingUtilities.invokeAndWait(() -> setLookAndFeel(laf));\n+            SwingUtilities.updateComponentTreeUI(fc);\n+            Font curFont = fc.getFont();\n+            System.out.println(\"current font \" + curFont);\n+            if (curFont != null && !curFont.equals(origFont)) {\n+                throw new RuntimeException(\n+                     \"JFileChooser font did not reset after Look & Feel change\");\n+            }\n","filename":"test\/jdk\/javax\/swing\/JFileChooser\/JFileChooserFontReset.java","additions":30,"deletions":14,"binary":false,"changes":44,"status":"modified"}]}