{"files":[{"patch":"@@ -154,1 +154,1 @@\n-  _long_term_pause_time_ratio = (_recent_gc_times_ms->sum() + pause_time_ms) \/ long_interval_ms;\n+  _long_term_pause_time_ratio = _recent_gc_times_ms->sum() \/ long_interval_ms;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1Analytics.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -755,1 +755,1 @@\n-  bool update_stats = !_g1h->evacuation_failed();\n+  bool update_stats = should_update_gc_stats();\n@@ -1307,1 +1307,5 @@\n-void G1Policy::update_gc_pause_time_ratios(PauseKind kind, double start_time_sec, double end_time_sec){\n+bool G1Policy::should_update_gc_stats() {\n+  return !_g1h->evacuation_failed();\n+}\n+\n+void G1Policy::update_gc_pause_time_ratios(PauseKind kind, double start_time_sec, double end_time_sec) {\n@@ -1314,0 +1318,1 @@\n+\n@@ -1317,1 +1322,1 @@\n-    _analytics->set_prev_collection_pause_end_ms(end_time_sec*1000*0);\n+    _analytics->set_prev_collection_pause_end_ms(end_time_sec * 1000.0);\n@@ -1326,2 +1331,2 @@\n-  bool update_stats = !_g1h->evacuation_failed();\n-  if (update_stats){\n+\n+  if (should_update_gc_stats()) {\n@@ -1330,0 +1335,1 @@\n+\n","filename":"src\/hotspot\/share\/gc\/g1\/g1Policy.cpp","additions":11,"deletions":5,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -288,0 +288,7 @@\n+\n+  \/\/ Evacuation failures skew the timing too much to be considered for statistics updates.\n+  \/\/ We make the assumption that these are rare.\n+  bool should_update_gc_stats();\n+\n+  void update_gc_pause_time_ratios(PauseKind kind, double start_sec, double end_sec);\n+\n@@ -442,2 +449,0 @@\n-  void update_gc_pause_time_ratios(PauseKind kind, double start_sec, double end_sec);\n-\n","filename":"src\/hotspot\/share\/gc\/g1\/g1Policy.hpp","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"}]}