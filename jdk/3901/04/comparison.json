{"files":[{"patch":"@@ -59,1 +59,1 @@\n-  return hash;\n+  return hash ^ (unsigned)((uintptr_t)method >> (LogMinObjAlignmentInBytes + 3));\n","filename":"src\/hotspot\/share\/prims\/resolvedMethodTable.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -51,0 +51,8 @@\n+    private MethodHandle generateWithSameName() throws ReflectiveOperationException {\n+        byte[] buf = new byte[100];\n+        int size = writeClass(buf, \"MH$$\");\n+        \/\/ use different classloader instances to load the classes with the same name\n+        Class<?> cls = new ResolvedMethodTableHash().defineClass(null, buf, 0, size);\n+        return MethodHandles.publicLookup().findStatic(cls, \"m\", MethodType.methodType(void.class));\n+    }\n+\n@@ -85,1 +93,6 @@\n-            handles.add(generator.generate(\"MH$\" + i));\n+            \/\/ prevents metaspace oom\n+            if (i % 20 != 0) {\n+                handles.add(generator.generate(\"MH$\" + i));\n+            } else {\n+                handles.add(generator.generateWithSameName());\n+            }\n","filename":"test\/hotspot\/jtreg\/runtime\/MemberName\/ResolvedMethodTableHash.java","additions":14,"deletions":1,"binary":false,"changes":15,"status":"modified"}]}