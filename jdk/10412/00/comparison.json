{"files":[{"patch":"@@ -68,1 +68,1 @@\n-  _output = new(ResourceObj::C_HEAP, mtCompiler) fileStream(file_name, \"at\");\n+  _output = new(mtCompiler) fileStream(file_name, \"at\");\n","filename":"src\/hotspot\/share\/c1\/c1_CFGPrinter.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -43,1 +43,1 @@\n-    _classlist_file = new(ResourceObj::C_HEAP, mtInternal)\n+    _classlist_file = new(mtInternal)\n","filename":"src\/hotspot\/share\/cds\/classListWriter.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1963,1 +1963,1 @@\n-        CompileLog* log = new(ResourceObj::C_HEAP, mtCompiler) CompileLog(file_name, fp, thread_id);\n+        CompileLog* log = new(mtCompiler) CompileLog(file_name, fp, thread_id);\n","filename":"src\/hotspot\/share\/compiler\/compileBroker.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -42,1 +42,1 @@\n-  initialize(new(ResourceObj::C_HEAP, mtCompiler) fileStream(fp, true));\n+  initialize(new(mtCompiler) fileStream(fp, true));\n","filename":"src\/hotspot\/share\/compiler\/compileLog.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -36,2 +36,2 @@\n-  _lines = new (ResourceObj::C_HEAP, mtGC) stringStream();\n-  _temp = new (ResourceObj::C_HEAP, mtGC) stringStream();\n+  _lines = new (mtGC) stringStream();\n+  _temp = new (mtGC) stringStream();\n","filename":"src\/hotspot\/share\/gc\/shared\/gcLogPrecious.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -155,1 +155,1 @@\n-    _jni_config_file = new(ResourceObj::C_HEAP, mtJVMCI) fileStream(JVMCILibDumpJNIConfig);\n+    _jni_config_file = new(mtJVMCI) fileStream(JVMCILibDumpJNIConfig);\n","filename":"src\/hotspot\/share\/jvmci\/jvmci_globals.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -219,0 +219,42 @@\n+class DynCHeapObj {\n+ public:\n+  ALWAYSINLINE void* operator new(size_t size, MEMFLAGS F) throw() {\n+    return (void*)AllocateHeap(size, F);\n+  }\n+\n+  ALWAYSINLINE void* operator new(size_t size,\n+                                  const NativeCallStack& stack, MEMFLAGS F) throw() {\n+    return (void*)AllocateHeap(size, F, stack);\n+  }\n+\n+  ALWAYSINLINE void* operator new(size_t size, const std::nothrow_t&,\n+                                  const NativeCallStack& stack, MEMFLAGS F) throw() {\n+    return (void*)AllocateHeap(size, F, stack, AllocFailStrategy::RETURN_NULL);\n+  }\n+\n+  ALWAYSINLINE void* operator new(size_t size, const std::nothrow_t&, MEMFLAGS F) throw() {\n+    return (void*)AllocateHeap(size, F, AllocFailStrategy::RETURN_NULL);\n+  }\n+\n+  ALWAYSINLINE void* operator new[](size_t size, MEMFLAGS F) throw() {\n+    return (void*)AllocateHeap(size, F);\n+  }\n+\n+  ALWAYSINLINE void* operator new[](size_t size,\n+                                    const NativeCallStack& stack, MEMFLAGS F) throw() {\n+    return (void*)AllocateHeap(size, F, stack);\n+  }\n+\n+  ALWAYSINLINE void* operator new[](size_t size, const std::nothrow_t&,\n+                                    const NativeCallStack& stack, MEMFLAGS F) throw() {\n+    return (void*)AllocateHeap(size, F, stack, AllocFailStrategy::RETURN_NULL);\n+  }\n+\n+  ALWAYSINLINE void* operator new[](size_t size, const std::nothrow_t&, MEMFLAGS F) throw() {\n+    return (void*)AllocateHeap(size, F, AllocFailStrategy::RETURN_NULL);\n+  }\n+\n+  void  operator delete(void* p)     { FreeHeap(p); }\n+  void  operator delete [] (void* p) { FreeHeap(p); }\n+};\n+\n","filename":"src\/hotspot\/share\/memory\/allocation.hpp","additions":42,"deletions":0,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -39,0 +39,1 @@\n+#include \"memory\/allocation.hpp\"\n@@ -4412,1 +4413,1 @@\n-    _print_inlining_stream = new stringStream();\n+    _print_inlining_stream = new (mtCompiler) stringStream();\n@@ -4421,1 +4422,1 @@\n-    _print_inlining_stream = new stringStream();\n+    _print_inlining_stream = new (mtCompiler) stringStream();\n","filename":"src\/hotspot\/share\/opto\/compile.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -152,1 +152,1 @@\n-  _xml = new (ResourceObj::C_HEAP, mtCompiler) xmlStream(_output);\n+  _xml = new (mtCompiler) xmlStream(_output);\n@@ -848,1 +848,1 @@\n-    _output = new (ResourceObj::C_HEAP, mtCompiler) fileStream(st.as_string(), \"w\");\n+    _output = new (mtCompiler) fileStream(st.as_string(), \"w\");\n@@ -850,1 +850,1 @@\n-    _output = new (ResourceObj::C_HEAP, mtCompiler) fileStream(file_name, append ? \"a\" : \"w\");\n+    _output = new (mtCompiler) fileStream(file_name, append ? \"a\" : \"w\");\n@@ -859,1 +859,1 @@\n-  _network_stream = new (ResourceObj::C_HEAP, mtCompiler) networkStream();\n+  _network_stream = new (mtCompiler) networkStream();\n","filename":"src\/hotspot\/share\/opto\/idealGraphPrinter.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+#include \"memory\/allocation.hpp\"\n@@ -862,1 +863,1 @@\n-    predString = new stringStream();\n+    predString = new (mtCompiler) stringStream();\n","filename":"src\/hotspot\/share\/opto\/loopPredicate.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -283,1 +283,1 @@\n-    fs = new (ResourceObj::C_HEAP, mtInternal) fileStream(path);\n+    fs = new (mtInternal) fileStream(path);\n","filename":"src\/hotspot\/share\/services\/attachListener.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -674,1 +674,1 @@\n-  fileStream* file = new(ResourceObj::C_HEAP, mtInternal) fileStream(try_name);\n+  fileStream* file = new (mtInternal) fileStream(try_name);\n@@ -692,1 +692,1 @@\n-  file = new(ResourceObj::C_HEAP, mtInternal) fileStream(try_name);\n+  file = new (mtInternal) fileStream(try_name);\n@@ -709,1 +709,1 @@\n-    _outer_xmlStream = new(ResourceObj::C_HEAP, mtInternal) xmlStream(file);\n+    _outer_xmlStream = new(mtInternal) xmlStream(file);\n@@ -951,1 +951,1 @@\n-    defaultStream::instance = new(ResourceObj::C_HEAP, mtInternal) defaultStream();\n+    defaultStream::instance = new(mtInternal) defaultStream();\n","filename":"src\/hotspot\/share\/utilities\/ostream.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -45,1 +45,1 @@\n-class outputStream : public ResourceObj {\n+class outputStream : public DynCHeapObj {\n","filename":"src\/hotspot\/share\/utilities\/ostream.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}