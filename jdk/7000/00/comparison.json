{"files":[{"patch":"@@ -110,1 +110,1 @@\n-            return (obj instanceof DoubleValue) && (((DoubleValue)obj).doubleValue == doubleValue);\n+            return obj instanceof DoubleValue doubleVal && doubleVal.doubleValue == doubleValue;\n","filename":"src\/java.desktop\/macosx\/classes\/apple\/laf\/JRSUIConstants.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -335,6 +335,4 @@\n-        if (!(obj instanceof JRSUIControl)) return false;\n-        final JRSUIControl other = (JRSUIControl)obj;\n-        if (currentEncodedProperties != other.currentEncodedProperties) return false;\n-        if (!nativeMap.equals(other.nativeMap)) return false;\n-        if (!changes.equals(other.changes)) return false;\n-        return true;\n+        return obj instanceof JRSUIControl other &&\n+                currentEncodedProperties == other.currentEncodedProperties &&\n+                nativeMap.equals(other.nativeMap) &&\n+                changes.equals(other.changes);\n","filename":"src\/java.desktop\/macosx\/classes\/apple\/laf\/JRSUIControl.java","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -83,2 +83,3 @@\n-        if (!(obj instanceof JRSUIState)) return false;\n-        return encodedState == ((JRSUIState)obj).encodedState && getClass().equals(obj.getClass());\n+        return obj instanceof JRSUIState state &&\n+                encodedState == state.encodedState &&\n+                getClass().equals(obj.getClass());\n@@ -133,2 +134,3 @@\n-            if (!(obj instanceof AnimationFrameState)) return false;\n-            return animationFrame == ((AnimationFrameState)obj).animationFrame && super.equals(obj);\n+            return obj instanceof AnimationFrameState state &&\n+                    animationFrame == state.animationFrame &&\n+                    super.equals(obj);\n@@ -180,2 +182,3 @@\n-            if (!(obj instanceof ValueState)) return false;\n-            return value == ((ValueState)obj).value && super.equals(obj);\n+            return obj instanceof ValueState valueState &&\n+                    value == valueState.value &&\n+                    super.equals(obj);\n@@ -254,2 +257,4 @@\n-            if (!(obj instanceof ScrollBarState)) return false;\n-            return (thumbProportion == ((ScrollBarState)obj).thumbProportion) && (thumbStart == ((ScrollBarState)obj).thumbStart) && super.equals(obj);\n+            return obj instanceof ScrollBarState state &&\n+                    thumbProportion == state.thumbProportion &&\n+                    thumbStart == state.thumbStart &&\n+                    super.equals(obj);\n","filename":"src\/java.desktop\/macosx\/classes\/apple\/laf\/JRSUIState.java","additions":13,"deletions":8,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -421,5 +421,8 @@\n-        final Object peer = AWTAccessor.getComponentAccessor().getPeer(window);\n-        if (!(peer instanceof LWWindowPeer)) return;\n-        Object platformWindow = ((LWWindowPeer) peer).getPlatformWindow();\n-        if (!(platformWindow instanceof CPlatformWindow)) return;\n-        ((CPlatformWindow)platformWindow).toggleFullScreen();\n+        Object peer = AWTAccessor\n+                .getComponentAccessor()\n+                .getPeer(window);\n+\n+        if (peer instanceof LWWindowPeer windowPeer &&\n+                windowPeer.getPlatformWindow() instanceof CPlatformWindow cPlatformWindow) {\n+            cPlatformWindow.toggleFullScreen();\n+        }\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/eawt\/Application.java","additions":8,"deletions":5,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -50,2 +50,2 @@\n-        if (value instanceof FullScreenHandler) {\n-            ((FullScreenHandler)value).addListener(listener);\n+        if (value instanceof FullScreenHandler fsh) {\n+            fsh.addListener(listener);\n@@ -64,3 +64,3 @@\n-        final Object value = window.getRootPane().getClientProperty(CLIENT_PROPERTY);\n-        if (!(value instanceof FullScreenHandler)) return;\n-        ((FullScreenHandler)value).removeListener(listener);\n+        if (window.getRootPane().getClientProperty(CLIENT_PROPERTY) instanceof FullScreenHandler fsh) {\n+            fsh.removeListener(listener);\n+        }\n@@ -70,3 +70,5 @@\n-        final Object value = window.getRootPane().getClientProperty(CLIENT_PROPERTY);\n-        if (value instanceof FullScreenHandler) return (FullScreenHandler)value;\n-        return null;\n+        if (window.getRootPane().getClientProperty(CLIENT_PROPERTY) instanceof FullScreenHandler fsh) {\n+            return fsh;\n+        } else {\n+            return null;\n+        }\n@@ -77,8 +79,11 @@\n-        if (!(window instanceof RootPaneContainer)) return; \/\/ handles null\n-\n-        SunToolkit.executeOnEventHandlerThread(window, new Runnable() {\n-            public void run() {\n-                final FullScreenHandler handler = getHandlerFor((RootPaneContainer)window);\n-                if (handler != null) handler.notifyListener(new FullScreenEvent(window), type);\n-            }\n-        });\n+        if (window instanceof RootPaneContainer handler) {\n+            SunToolkit.executeOnEventHandlerThread(window, new Runnable() {\n+                @Override\n+                public void run() {\n+                    final FullScreenHandler fsh = getHandlerFor(handler);\n+                    if (fsh != null) {\n+                        fsh.notifyListener(new FullScreenEvent(window), type);\n+                    }\n+                }\n+            });\n+        } \/\/ handles null\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/eawt\/FullScreenHandler.java","additions":21,"deletions":16,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -66,3 +66,5 @@\n-        if (!(window instanceof RootPaneContainer)) throw new IllegalArgumentException(\"Can't mark a non-RootPaneContainer as full screen-able\");\n-        final RootPaneContainer rpc = (RootPaneContainer)window;\n-        rpc.getRootPane().putClientProperty(CPlatformWindow.WINDOW_FULLSCREENABLE, Boolean.valueOf(canFullScreen));\n+        if (window instanceof final RootPaneContainer rpc) {\n+            rpc.getRootPane().putClientProperty(CPlatformWindow.WINDOW_FULLSCREENABLE, canFullScreen);\n+        } else {\n+            throw new IllegalArgumentException(\"Can't mark a non-RootPaneContainer as full screen-able\");\n+        }\n@@ -78,3 +80,9 @@\n-        if (!(window instanceof RootPaneContainer)) throw new IllegalArgumentException(\"Can't attach FullScreenListener to a non-RootPaneContainer\");\n-        if (listener == null) throw new NullPointerException();\n-        FullScreenHandler.addFullScreenListenerTo((RootPaneContainer)window, listener);\n+        if (window instanceof RootPaneContainer rpc) {\n+            if (listener == null) {\n+                throw new NullPointerException();\n+            }\n+\n+            FullScreenHandler.addFullScreenListenerTo(rpc, listener);\n+        } else {\n+            throw new IllegalArgumentException(\"Can't attach FullScreenListener to a non-RootPaneContainer\");\n+        }\n@@ -90,3 +98,9 @@\n-        if (!(window instanceof RootPaneContainer)) throw new IllegalArgumentException(\"Can't remove FullScreenListener from non-RootPaneContainer\");\n-        if (listener == null) throw new NullPointerException();\n-        FullScreenHandler.removeFullScreenListenerFrom((RootPaneContainer)window, listener);\n+        if (window instanceof RootPaneContainer rpc) {\n+            if (listener == null) {\n+                throw new NullPointerException();\n+            }\n+\n+            FullScreenHandler.removeFullScreenListenerFrom(rpc, listener);\n+        } else {\n+            throw new IllegalArgumentException(\"Can't remove FullScreenListener from non-RootPaneContainer\");\n+        }\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/eawt\/FullScreenUtilities.java","additions":23,"deletions":9,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -134,6 +134,6 @@\n-        if (listener instanceof AppReopenedListener) reOpenAppDispatcher.addListener((AppReopenedListener)listener);\n-        if (listener instanceof AppForegroundListener) foregroundAppDispatcher.addListener((AppForegroundListener)listener);\n-        if (listener instanceof AppHiddenListener) hiddenAppDispatcher.addListener((AppHiddenListener)listener);\n-        if (listener instanceof UserSessionListener) userSessionDispatcher.addListener((UserSessionListener)listener);\n-        if (listener instanceof ScreenSleepListener) screenSleepDispatcher.addListener((ScreenSleepListener)listener);\n-        if (listener instanceof SystemSleepListener) systemSleepDispatcher.addListener((SystemSleepListener)listener);\n+        if (listener instanceof AppReopenedListener apl) reOpenAppDispatcher.addListener(apl);\n+        if (listener instanceof AppForegroundListener afl) foregroundAppDispatcher.addListener(afl);\n+        if (listener instanceof AppHiddenListener ahl) hiddenAppDispatcher.addListener(ahl);\n+        if (listener instanceof UserSessionListener usl) userSessionDispatcher.addListener(usl);\n+        if (listener instanceof ScreenSleepListener ssl) screenSleepDispatcher.addListener(ssl);\n+        if (listener instanceof SystemSleepListener ssl) systemSleepDispatcher.addListener(ssl);\n@@ -143,6 +143,6 @@\n-        if (listener instanceof AppReopenedListener) reOpenAppDispatcher.removeListener((AppReopenedListener)listener);\n-        if (listener instanceof AppForegroundListener) foregroundAppDispatcher.removeListener((AppForegroundListener)listener);\n-        if (listener instanceof AppHiddenListener) hiddenAppDispatcher.removeListener((AppHiddenListener)listener);\n-        if (listener instanceof UserSessionListener) userSessionDispatcher.removeListener((UserSessionListener)listener);\n-        if (listener instanceof ScreenSleepListener) screenSleepDispatcher.removeListener((ScreenSleepListener)listener);\n-        if (listener instanceof SystemSleepListener) systemSleepDispatcher.removeListener((SystemSleepListener)listener);\n+        if (listener instanceof AppReopenedListener apl) reOpenAppDispatcher.removeListener(apl);\n+        if (listener instanceof AppForegroundListener afl) foregroundAppDispatcher.removeListener(afl);\n+        if (listener instanceof AppHiddenListener ahl) hiddenAppDispatcher.removeListener(ahl);\n+        if (listener instanceof UserSessionListener usl) userSessionDispatcher.removeListener(usl);\n+        if (listener instanceof ScreenSleepListener ssl) screenSleepDispatcher.removeListener(ssl);\n+        if (listener instanceof SystemSleepListener ssl) systemSleepDispatcher.removeListener(ssl);\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/eawt\/_AppEventHandler.java","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -138,5 +138,3 @@\n-        final Object peer = AWTAccessor.getMenuComponentAccessor().getPeer(screenMenuBar);\n-        if (!(peer instanceof CMenuBar)) {\n-            \/\/ such a thing should not be possible\n-            throw new IllegalStateException(\"Unable to determine native menu bar from provided JMenuBar\");\n-        }\n+        Object peer = AWTAccessor\n+                .getMenuComponentAccessor()\n+                .getPeer(screenMenuBar);\n@@ -144,2 +142,3 @@\n-        \/\/ grab the pointer to the CMenuBar, and retain it in native\n-        ((CMenuBar) peer).execute(_AppMenuBarHandler::nativeSetDefaultMenuBar);\n+        if (peer instanceof CMenuBar cMenuBar) {\n+            \/\/ grab the pointer to the CMenuBar, and retain it in native\n+            cMenuBar.execute(_AppMenuBarHandler::nativeSetDefaultMenuBar);\n@@ -147,3 +146,7 @@\n-        \/\/ if there is no currently active frame, install the default menu bar in the application main menu\n-        if (isMenuBarActivationNeeded()) {\n-            ((CMenuBar) peer).execute(_AppMenuBarHandler::nativeActivateDefaultMenuBar);\n+            \/\/ if there is no currently active frame, install the default menu bar in the application main menu\n+            if (isMenuBarActivationNeeded()) {\n+                cMenuBar.execute(_AppMenuBarHandler::nativeActivateDefaultMenuBar);\n+            }\n+        } else {\n+            \/\/ such a thing should not be possible\n+            throw new IllegalStateException(\"Unable to determine native menu bar from provided JMenuBar\");\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/eawt\/_AppMenuBarHandler.java","additions":13,"deletions":10,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -50,2 +50,2 @@\n-        if (value instanceof GestureHandler) {\n-            ((GestureHandler)value).addListener(listener);\n+        if (value instanceof GestureHandler handler) {\n+            handler.addListener(listener);\n@@ -64,3 +64,3 @@\n-        final Object value = component.getClientProperty(CLIENT_PROPERTY);\n-        if (!(value instanceof GestureHandler)) return;\n-        ((GestureHandler)value).removeListener(listener);\n+        if (component.getClientProperty(CLIENT_PROPERTY) instanceof GestureHandler handler) {\n+            handler.removeListener(listener);\n+        }\n@@ -79,6 +79,3 @@\n-                final PerComponentNotifier firstNotifier;\n-                if (component instanceof RootPaneContainer) {\n-                    firstNotifier = getNextNotifierForComponent(((RootPaneContainer)component).getRootPane());\n-                } else {\n-                    firstNotifier = getNextNotifierForComponent(component);\n-                }\n+                Component c = component instanceof RootPaneContainer root ? root.getContentPane() : component;\n+                PerComponentNotifier firstNotifier = getNextNotifierForComponent(c);\n+\n@@ -114,4 +111,4 @@\n-        if (listener instanceof GesturePhaseListener) phasers.add((GesturePhaseListener)listener);\n-        if (listener instanceof RotationListener) rotaters.add((RotationListener)listener);\n-        if (listener instanceof MagnificationListener) magnifiers.add((MagnificationListener)listener);\n-        if (listener instanceof SwipeListener) swipers.add((SwipeListener)listener);\n+        if (listener instanceof GesturePhaseListener gpl) phasers.add(gpl);\n+        if (listener instanceof RotationListener rotationListener) rotaters.add(rotationListener);\n+        if (listener instanceof MagnificationListener magnificationListener) magnifiers.add(magnificationListener);\n+        if (listener instanceof SwipeListener swipeListener) swipers.add(swipeListener);\n@@ -188,4 +185,6 @@\n-        if (!(c instanceof JComponent)) return null;\n-        final Object value = ((JComponent)c).getClientProperty(CLIENT_PROPERTY);\n-        if (!(value instanceof GestureHandler)) return null;\n-        return (GestureHandler)value;\n+        if (c instanceof JComponent component &&\n+                component.getClientProperty(CLIENT_PROPERTY) instanceof GestureHandler gestureHandler) {\n+            return gestureHandler;\n+        } else {\n+            return null;\n+        }\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/eawt\/event\/GestureHandler.java","additions":18,"deletions":19,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -119,2 +119,2 @@\n-        if (c instanceof JScrollPane) {\n-            final JViewport vp = ((JScrollPane)c).getViewport();\n+        if (c instanceof JScrollPane pane) {\n+            JViewport vp = pane.getViewport();\n@@ -124,1 +124,3 @@\n-                if (focusable instanceof JTextComponent) return false;\n+                if (focusable instanceof JTextComponent) {\n+                    return false;\n+                }\n@@ -126,1 +128,1 @@\n-        } else if (focusable instanceof JTextComponent) {\n+        } else if (focusable instanceof JTextComponent textComponent) {\n@@ -128,1 +130,3 @@\n-            if (!((javax.swing.text.JTextComponent)focusable).isEditable()) return false;\n+            if (!textComponent.isEditable()) {\n+                return false;\n+            }\n@@ -131,1 +135,1 @@\n-        return (focusable instanceof JComponent jComponent) && jComponent.hasFocus();\n+        return focusable instanceof JComponent jComponent && jComponent.hasFocus();\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaBorder.java","additions":10,"deletions":6,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -120,1 +120,1 @@\n-        if ((b instanceof JButton) && ((JButton)b).isDefaultButton()) return State.PULSED;\n+        if (b instanceof JButton button && button.isDefaultButton()) return State.PULSED;\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaButtonBorder.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -52,4 +52,6 @@\n-        final Border border = specifier.getBorder();\n-        if (!(border instanceof AquaBorder)) return border;\n-\n-        return ((AquaBorder)border).deriveBorderForSize(AquaUtilControlSize.getUserSizeFrom(c));\n+        Border border = specifier.getBorder();\n+        if (border instanceof AquaBorder aquaBorder) {\n+            return aquaBorder.deriveBorderForSize(AquaUtilControlSize.getUserSizeFrom(c));\n+        } else {\n+            return border;\n+        }\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaButtonExtendedTypes.java","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -117,5 +117,3 @@\n-        if (((AbstractButton)c).isBorderPainted() && !isCellEditor) {\n-            final Border border = c.getBorder();\n-            if (border instanceof AquaButtonBorder) {\n-                ((AquaButtonBorder)border).paintButton(c, g, viewRect.x, viewRect.y, viewRect.width, viewRect.height);\n-            }\n+        if (((AbstractButton) c).isBorderPainted() && !isCellEditor &&\n+                c.getBorder() instanceof AquaButtonBorder aquaButtonBorder) {\n+            aquaButtonBorder.paintButton(c, g, viewRect.x, viewRect.y, viewRect.width, viewRect.height);\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaButtonLabeledUI.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -98,12 +98,18 @@\n-        final ButtonUI genericUI = b.getUI();\n-        if (!(genericUI instanceof AquaButtonUI)) return;\n-        final AquaButtonUI ui = (AquaButtonUI)genericUI;\n-\n-        Border border = b.getBorder();\n-        if (!ui.isBorderFromProperty(b) && (border == null || border instanceof UIResource || border instanceof AquaButtonBorder)) {\n-            \/\/ See BasicGraphicsUtils.getPreferredButtonSize - it returns null for preferred size,\n-            \/\/ causing it to use the subcomponent's size, which doesn't allow space for Aqua pushbuttons\n-            boolean iconFont = true;\n-            if (isOnToolbar(b)) {\n-                if (b instanceof JToggleButton) {\n-                    border = AquaButtonBorder.getToolBarButtonBorder();\n+        if (b.getUI() instanceof AquaButtonUI ui) {\n+            Border border = b.getBorder();\n+            if (!ui.isBorderFromProperty(b) && (border == null || border instanceof UIResource || border instanceof AquaButtonBorder)) {\n+                \/\/ See BasicGraphicsUtils.getPreferredButtonSize - it returns null for preferred size,\n+                \/\/ causing it to use the subcomponent's size, which doesn't allow space for Aqua pushbuttons\n+                boolean iconFont = true;\n+                if (isOnToolbar(b)) {\n+                    if (b instanceof JToggleButton) {\n+                        border = AquaButtonBorder.getToolBarButtonBorder();\n+                    } else {\n+                        border = AquaButtonBorder.getBevelButtonBorder();\n+                    }\n+                } else if (b.getIcon() != null || b.getComponentCount() > 0) {\n+                    \/\/ radar 3308129 && (b.getText() == null || b.getText().equals(\"\")))\n+                    \/\/ we used to only do this for buttons that had images and no text\n+                    \/\/ now we do it for all buttons that have any images - they cannot\n+                    \/\/ be a default button.\n+                    border = AquaButtonBorder.getToggleButtonBorder();\n@@ -111,1 +117,2 @@\n-                    border = AquaButtonBorder.getBevelButtonBorder();\n+                    border = UIManager.getBorder(getPropertyPrefix() + \"border\");\n+                    iconFont = false;\n@@ -113,10 +120,0 @@\n-            } else if (b.getIcon() != null || b.getComponentCount() > 0) {\n-                \/\/ radar 3308129 && (b.getText() == null || b.getText().equals(\"\")))\n-                \/\/ we used to only do this for buttons that had images and no text\n-                \/\/ now we do it for all buttons that have any images - they cannot\n-                \/\/ be a default button.\n-                border = AquaButtonBorder.getToggleButtonBorder();\n-            } else {\n-                border = UIManager.getBorder(getPropertyPrefix() + \"border\");\n-                iconFont = false;\n-            }\n@@ -124,1 +121,1 @@\n-            b.setBorder(border);\n+                b.setBorder(border);\n@@ -126,3 +123,4 @@\n-            final Font currentFont = b.getFont();\n-            if (iconFont && (currentFont == null || currentFont instanceof UIResource)) {\n-                b.setFont(UIManager.getFont(\"IconButton.font\"));\n+                final Font currentFont = b.getFont();\n+                if (iconFont && (currentFont == null || currentFont instanceof UIResource)) {\n+                    b.setFont(UIManager.getFont(\"IconButton.font\"));\n+                }\n@@ -145,6 +143,5 @@\n-        final Object prop = b.getClientProperty(BUTTON_TYPE);\n-        if (prop != null) return;\n-\n-        final ButtonUI ui = b.getUI();\n-        if (!(ui instanceof AquaButtonUI)) return;\n-        if (b.getBorder() != null) ((AquaButtonUI)ui).setThemeBorder(b);\n+        if (b.getClientProperty(BUTTON_TYPE) == null &&\n+                b.getUI() instanceof AquaButtonUI aquaButton &&\n+                b.getBorder() != null) {\n+            aquaButton.setThemeBorder(b);\n+        }\n@@ -165,4 +162,2 @@\n-        if (!(prop instanceof String)) {\n-            b.putClientProperty(BUTTON_TYPE, null); \/\/ so we know to use the automatic button type\n-            return false;\n-        }\n+        if (prop instanceof String buttonType) {\n+            boolean iconFont = true;\n@@ -170,2 +165,5 @@\n-        final String buttonType = (String)prop;\n-        boolean iconFont = true;\n+            final TypeSpecifier specifier = AquaButtonExtendedTypes.getSpecifierByName(buttonType);\n+            if (specifier != null) {\n+                b.setBorder(specifier.getBorder());\n+                iconFont = specifier.setIconFont;\n+            }\n@@ -173,5 +171,4 @@\n-        final TypeSpecifier specifier = AquaButtonExtendedTypes.getSpecifierByName(buttonType);\n-        if (specifier != null) {\n-            b.setBorder(specifier.getBorder());\n-            iconFont = specifier.setIconFont;\n-        }\n+            final Font currentFont = b.getFont();\n+            if (currentFont == null || currentFont instanceof UIResource) {\n+                b.setFont(UIManager.getFont(iconFont ? \"IconButton.font\" : \"Button.font\"));\n+            }\n@@ -179,3 +176,4 @@\n-        final Font currentFont = b.getFont();\n-        if (currentFont == null || currentFont instanceof UIResource) {\n-            b.setFont(UIManager.getFont(iconFont ? \"IconButton.font\" : \"Button.font\"));\n+            return true;\n+        } else {\n+            b.putClientProperty(BUTTON_TYPE, null); \/\/ so we know to use the automatic button type\n+            return false;\n@@ -183,2 +181,0 @@\n-\n-        return true;\n@@ -249,2 +245,2 @@\n-                if (listener instanceof AquaButtonListener) {\n-                    return (AquaButtonListener) listener;\n+                if (listener instanceof AquaButtonListener abl) {\n+                    return abl;\n@@ -279,1 +275,1 @@\n-            if (border instanceof AquaButtonBorder) {\n+            if (border instanceof AquaButtonBorder aquaButtonBorder) {\n@@ -282,1 +278,1 @@\n-                aquaBorder = (AquaButtonBorder)border;\n+                aquaBorder = aquaButtonBorder;\n@@ -342,2 +338,2 @@\n-        if (g instanceof Graphics2D) {\n-            g2d = (Graphics2D)g;\n+        if (g instanceof Graphics2D graphics2D) {\n+            g2d = graphics2D;\n@@ -411,4 +407,2 @@\n-            if (tmpIcon == null) {\n-                if (icon instanceof ImageIcon) {\n-                    tmpIcon = new ImageIcon(AquaUtils.generateSelectedDarkImage(((ImageIcon)icon).getImage()));\n-                }\n+            if (tmpIcon == null && icon instanceof ImageIcon imageIcon) {\n+                tmpIcon = new ImageIcon(AquaUtils.generateSelectedDarkImage(imageIcon.getImage()));\n@@ -491,2 +485,2 @@\n-        if (border instanceof AquaButtonBorder) {\n-            ((AquaButtonBorder)border).alterPreferredSize(d);\n+        if (border instanceof AquaButtonBorder aquaButtonBorder) {\n+            aquaButtonBorder.alterPreferredSize(d);\n@@ -540,9 +534,5 @@\n-            final Object o = e.getSource();\n-            if (!(o instanceof AbstractButton)) return;\n-\n-            final AbstractButton b = (AbstractButton)o;\n-            final ButtonUI ui = b.getUI();\n-            if (!(ui instanceof AquaButtonUI)) return;\n-\n-            if (!(b.getBorder() instanceof UIResource)) return; \/\/ if the border is not one of ours, or null\n-            ((AquaButtonUI)ui).setThemeBorder(b);\n+            if (e.getSource() instanceof AbstractButton b &&\n+                    b.getUI() instanceof AquaButtonUI aquaButton &&\n+                    b.getBorder() instanceof UIResource) {\n+                aquaButton.setThemeBorder(b);\n+            }\n@@ -602,4 +592,3 @@\n-                final Border border = b.getBorder();\n-                if (!(border instanceof AquaBorder)) return;\n-\n-                b.setBorder(AquaButtonExtendedTypes.getBorderForPosition(b, b.getClientProperty(BUTTON_TYPE), e.getNewValue()));\n+                if (b.getBorder() instanceof AquaBorder) {\n+                    b.setBorder(AquaButtonExtendedTypes.getBorderForPosition(b, b.getClientProperty(BUTTON_TYPE), e.getNewValue()));\n+                }\n@@ -608,3 +597,2 @@\n-            if (\"componentOrientation\".equals(propertyName)) {\n-                final Border border = b.getBorder();\n-                if (!(border instanceof AquaBorder)) return;\n+            if (\"componentOrientation\".equals(propertyName) &&\n+                    b.getBorder() instanceof AquaBorder) {\n@@ -631,9 +619,6 @@\n-            if (!(b instanceof JButton)) return;\n-            if (!((JButton)b).isDefaultButton()) return;\n-\n-            final JRootPane rootPane = b.getRootPane();\n-            if (rootPane == null) return;\n-\n-            final RootPaneUI ui = rootPane.getUI();\n-            if (!(ui instanceof AquaRootPaneUI)) return;\n-            ((AquaRootPaneUI)ui).updateDefaultButton(rootPane);\n+            if (b instanceof JButton button && button.isDefaultButton()) {\n+                final JRootPane rootPane = button.getRootPane();\n+                if (rootPane != null && rootPane.getUI() instanceof AquaRootPaneUI root) {\n+                    root.updateDefaultButton(rootPane);\n+                }\n+            }\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaButtonUI.java","additions":71,"deletions":86,"binary":false,"changes":157,"status":"modified"},{"patch":"@@ -122,2 +122,2 @@\n-        if (value instanceof Icon) {\n-            setIcon((Icon)value);\n+        if (value instanceof Icon icon) {\n+            setIcon(icon);\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaComboBoxRendererInternal.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -146,14 +146,12 @@\n-                final ListUI listUI = itemList.getUI();\n-                if (!(listUI instanceof AquaListUI)) return;\n-                final AquaListUI aquaListUI = (AquaListUI)listUI;\n-\n-                final int selectedIndex = comboBox.getSelectedIndex();\n-                final ListModel<Object> dataModel = itemList.getModel();\n-                if (dataModel == null) return;\n-\n-                final Object value = dataModel.getElementAt(selectedIndex);\n-                AquaUtils.blinkMenu(new AquaUtils.Selectable() {\n-                    public void paintSelected(final boolean selected) {\n-                        aquaListUI.repaintCell(value, selectedIndex, selected);\n-                    }\n-                });\n+                if (itemList.getUI() instanceof AquaListUI aquaListUI) {\n+                    final int selectedIndex = comboBox.getSelectedIndex();\n+                    final ListModel<Object> dataModel = itemList.getModel();\n+                    if (dataModel == null) return;\n+\n+                    final Object value = dataModel.getElementAt(selectedIndex);\n+                    AquaUtils.blinkMenu(new AquaUtils.Selectable() {\n+                        public void paintSelected(final boolean selected) {\n+                            aquaListUI.repaintCell(value, selectedIndex, selected);\n+                        }\n+                    });\n+                }\n@@ -252,2 +250,2 @@\n-                        if (editor instanceof AquaCustomComboTextField) {\n-                            ((AquaCustomComboTextField)editor).selectAll();\n+                        if (editor instanceof AquaCustomComboTextField textField) {\n+                            textField.selectAll();\n@@ -586,5 +584,3 @@\n-        if (arrowButton == null) return;\n-        final Border border = arrowButton.getBorder();\n-        if (!(border instanceof AquaButtonBorder)) return;\n-        final AquaButtonBorder aquaBorder = (AquaButtonBorder)border;\n-        arrowButton.setBorder(aquaBorder.deriveBorderForSize(size));\n+        if (arrowButton != null && arrowButton.getBorder() instanceof AquaButtonBorder aquaBorder) {\n+            arrowButton.setBorder(aquaBorder.deriveBorderForSize(size));\n+        }\n@@ -664,2 +660,3 @@\n-                        if (!(target.arrowButton instanceof AquaComboBoxButton)) return;\n-                        ((AquaComboBoxButton)target.arrowButton).setIsPopDown(Boolean.TRUE.equals(value));\n+                        if (target.arrowButton instanceof AquaComboBoxButton aquaComboBoxButton) {\n+                            aquaComboBoxButton.setIsPopDown(Boolean.TRUE.equals(value));\n+                        }\n@@ -670,2 +667,3 @@\n-                        if (!(target.arrowButton instanceof AquaComboBoxButton)) return;\n-                        ((AquaComboBoxButton)target.arrowButton).setIsSquare(Boolean.TRUE.equals(value));\n+                        if (target.arrowButton instanceof AquaComboBoxButton aquaComboBoxButton) {\n+                            aquaComboBoxButton.setIsSquare(Boolean.TRUE.equals(value));\n+                        }\n@@ -676,3 +674,5 @@\n-                    final ComboBoxUI comboUI = combo.getUI();\n-                    if (comboUI instanceof AquaComboBoxUI) return (AquaComboBoxUI)comboUI;\n-                    return null;\n+                    if (combo.getUI() instanceof AquaComboBoxUI aqua) {\n+                        return aqua;\n+                    } else {\n+                        return null;\n+                    }\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaComboBoxUI.java","additions":28,"deletions":28,"binary":false,"changes":56,"status":"modified"},{"patch":"@@ -91,3 +91,2 @@\n-            final Object source = evt.getSource();\n-            if (source instanceof JComponent) {\n-                ((JComponent)source).repaint();\n+            if (evt.getSource() instanceof JComponent component) {\n+                component.repaint();\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaFocusHandler.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -58,1 +58,3 @@\n-        if (i instanceof ImageIcon) return ((ImageIcon)i).getImage();\n+        if (i instanceof ImageIcon imageIcon) {\n+            return imageIcon.getImage();\n+        }\n@@ -106,1 +108,1 @@\n-            final Size size = c instanceof JComponent ? AquaUtilControlSize.getUserSizeFrom((JComponent)c) : Size.REGULAR;\n+            Size size = c instanceof JComponent component ? AquaUtilControlSize.getUserSizeFrom(component) : Size.REGULAR;\n@@ -148,1 +150,1 @@\n-            if (g instanceof Graphics2D) {\n+            if (g instanceof Graphics2D g2d) {\n@@ -150,1 +152,1 @@\n-                ((Graphics2D)g).setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n+                g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n@@ -189,1 +191,1 @@\n-            if (g instanceof Graphics2D) {\n+            if (g instanceof Graphics2D g2d) {\n@@ -191,1 +193,1 @@\n-                ((Graphics2D) g).setRenderingHint(RenderingHints.KEY_RENDERING,\n+                g2d.setRenderingHint(RenderingHints.KEY_RENDERING,\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaIcon.java","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -111,1 +111,1 @@\n-        if (background instanceof MultiResolutionCachedImage) {\n+        if (background instanceof MultiResolutionCachedImage mrci) {\n@@ -113,1 +113,1 @@\n-            Image mrIconImage = ((MultiResolutionCachedImage) background).map(\n+            Image mrIconImage = mrci.map(\n@@ -139,1 +139,1 @@\n-        if (g instanceof Graphics2D) {\n+        if (g instanceof Graphics2D g2d) {\n@@ -141,1 +141,1 @@\n-            ((Graphics2D) g).setRenderingHint(RenderingHints.KEY_RENDERING,\n+            g2d.setRenderingHint(RenderingHints.KEY_RENDERING,\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaImageFactory.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -419,1 +419,3 @@\n-        if (!(c instanceof JInternalFrame)) return fBorderInsets;\n+        if (c instanceof final JInternalFrame frame) {\n+            \/\/ Set the contentRect to an arbitrary value (in case the current real one is too small)\n+            setInBounds(0, 0, kContentTester, kContentTester);\n@@ -421,1 +423,2 @@\n-        final JInternalFrame frame = (JInternalFrame)c;\n+            \/\/ Set parameters\n+            setMetrics(frame, c);\n@@ -423,10 +426,5 @@\n-        \/\/ Set the contentRect to an arbitrary value (in case the current real one is too small)\n-        setInBounds(0, 0, kContentTester, kContentTester);\n-\n-        \/\/ Set parameters\n-        setMetrics(frame, c);\n-\n-        fBorderInsets.left = 0;\n-        fBorderInsets.top = metrics.titleBarHeight;\n-        fBorderInsets.right = 0;\n-        fBorderInsets.bottom = 0;\n+            fBorderInsets.left = 0;\n+            fBorderInsets.top = metrics.titleBarHeight;\n+            fBorderInsets.right = 0;\n+            fBorderInsets.bottom = 0;\n+        }\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaInternalFrameBorder.java","additions":10,"deletions":12,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -251,2 +251,1 @@\n-            final Graphics2D g2d = g instanceof Graphics2D ? (Graphics2D)g : null;\n-            if (g2d != null) {\n+            if (g instanceof Graphics2D g2d) {\n@@ -280,1 +279,1 @@\n-                if (p instanceof JRootPane) {\n+                if (p instanceof JRootPane rootPane) {\n@@ -282,1 +281,1 @@\n-                    parent = ((JRootPane)p).getLayeredPane();\n+                    parent = rootPane.getLayeredPane();\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaInternalFrameDockIconUI.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -169,2 +169,3 @@\n-            if (!(g instanceof Graphics2D)) return;\n-            final Graphics2D g2d = (Graphics2D)g;\n+            if (g instanceof Graphics2D g2d) {\n+                final int height = getHeight();\n+                final int width = getWidth();\n@@ -172,2 +173,2 @@\n-            final int height = getHeight();\n-            final int width = getWidth();\n+                final Object priorAA = g2d.getRenderingHint(RenderingHints.KEY_ANTIALIASING);\n+                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n@@ -175,2 +176,2 @@\n-            final Object priorAA = g2d.getRenderingHint(RenderingHints.KEY_ANTIALIASING);\n-            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n+                g2d.setColor(UIManager.getColor(\"DesktopIcon.borderColor\"));\n+                g2d.fillRoundRect(4, 4, width - 9, height + DOCK_EDGE_SLACK, DOCK_EDGE_SLACK, DOCK_EDGE_SLACK);\n@@ -178,2 +179,3 @@\n-            g2d.setColor(UIManager.getColor(\"DesktopIcon.borderColor\"));\n-            g2d.fillRoundRect(4, 4, width - 9, height + DOCK_EDGE_SLACK, DOCK_EDGE_SLACK, DOCK_EDGE_SLACK);\n+                g2d.setColor(UIManager.getColor(\"DesktopIcon.borderRimColor\"));\n+                g2d.setStroke(new BasicStroke(2.0f));\n+                g2d.drawRoundRect(4, 4, width - 9, height + DOCK_EDGE_SLACK, DOCK_EDGE_SLACK, DOCK_EDGE_SLACK);\n@@ -181,5 +183,2 @@\n-            g2d.setColor(UIManager.getColor(\"DesktopIcon.borderRimColor\"));\n-            g2d.setStroke(new BasicStroke(2.0f));\n-            g2d.drawRoundRect(4, 4, width - 9, height + DOCK_EDGE_SLACK, DOCK_EDGE_SLACK, DOCK_EDGE_SLACK);\n-\n-            if (priorAA != null) g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, priorAA);\n+                if (priorAA != null) g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, priorAA);\n+            }\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaInternalFramePaneUI.java","additions":12,"deletions":13,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -466,13 +466,12 @@\n-                if (c instanceof JFrame) {\n-                    ((JFrame)frame.getTopLevelAncestor()).getGlassPane().setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));\n-\n-                    ((JFrame)frame.getTopLevelAncestor()).getGlassPane().setVisible(false);\n-                } else if (c instanceof JApplet) {\n-                    ((JApplet)c).getGlassPane().setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));\n-                    ((JApplet)c).getGlassPane().setVisible(false);\n-                } else if (c instanceof JWindow) {\n-                    ((JWindow)c).getGlassPane().setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));\n-                    ((JWindow)c).getGlassPane().setVisible(false);\n-                } else if (c instanceof JDialog) {\n-                    ((JDialog)c).getGlassPane().setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));\n-                    ((JDialog)c).getGlassPane().setVisible(false);\n+                if (c instanceof JFrame jFrame) {\n+                    jFrame.getGlassPane().setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));\n+                    jFrame.getGlassPane().setVisible(false);\n+                } else if (c instanceof JApplet applet) {\n+                    applet.getGlassPane().setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));\n+                    applet.getGlassPane().setVisible(false);\n+                } else if (c instanceof JWindow window) {\n+                    window.getGlassPane().setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));\n+                    window.getGlassPane().setVisible(false);\n+                } else if (c instanceof JDialog dialog) {\n+                    dialog.getGlassPane().setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));\n+                    dialog.getGlassPane().setVisible(false);\n@@ -633,3 +632,2 @@\n-            if (!(parent instanceof JDesktopPane)) return false;\n-            final JDesktopPane pane = (JDesktopPane)parent;\n-            final Point parentPoint = SwingUtilities.convertPoint(frame, originalPoint, parent);\n+            if (parent instanceof JDesktopPane pane) {\n+                final Point parentPoint = SwingUtilities.convertPoint(frame, originalPoint, parent);\n@@ -643,2 +641,2 @@\n-            final Component hitComponent = findComponentToHitBehindMe(pane, parentPoint);\n-            if (hitComponent == null || hitComponent == frame) return false;\n+                final Component hitComponent = findComponentToHitBehindMe(pane, parentPoint);\n+                if (hitComponent == null || hitComponent == frame) return false;\n@@ -646,7 +644,10 @@\n-            final Point hitComponentPoint = SwingUtilities.convertPoint(pane, parentPoint, hitComponent);\n-            hitComponent.dispatchEvent(\n-                    new MouseEvent(hitComponent, e.getID(), e.getWhen(),\n-                                   e.getModifiers(), hitComponentPoint.x,\n-                                   hitComponentPoint.y, e.getClickCount(),\n-                                   e.isPopupTrigger(), e.getButton()));\n-            return true;\n+                final Point hitComponentPoint = SwingUtilities.convertPoint(pane, parentPoint, hitComponent);\n+                hitComponent.dispatchEvent(\n+                        new MouseEvent(hitComponent, e.getID(), e.getWhen(),\n+                                e.getModifiers(), hitComponentPoint.x,\n+                                hitComponentPoint.y, e.getClickCount(),\n+                                e.isPopupTrigger(), e.getButton()));\n+                return true;\n+            } else {\n+                return false;\n+            }\n@@ -685,2 +686,2 @@\n-        if (c instanceof javax.swing.JComponent) {\n-            ((javax.swing.JComponent)c).putClientProperty(AquaFocusHandler.FRAME_ACTIVE_PROPERTY, active);\n+        if (c instanceof JComponent component) {\n+            component.putClientProperty(AquaFocusHandler.FRAME_ACTIVE_PROPERTY, active);\n@@ -691,4 +692,4 @@\n-        if (c instanceof javax.swing.JMenu) {\n-            children = ((javax.swing.JMenu)c).getMenuComponents();\n-        } else if (c instanceof Container) {\n-            children = ((Container)c).getComponents();\n+        if (c instanceof JMenu menu) {\n+            children = menu.getMenuComponents();\n+        } else if (c instanceof Container container) {\n+            children = container.getComponents();\n@@ -709,2 +710,2 @@\n-                if (e.getNewValue() instanceof String) {\n-                    setFrameType((String)e.getNewValue());\n+                if (e.getNewValue() instanceof String s) {\n+                    setFrameType(s);\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaInternalFrameUI.java","additions":34,"deletions":33,"binary":false,"changes":67,"status":"modified"},{"patch":"@@ -94,4 +94,3 @@\n-        final Object colorProperty = label.getClientProperty(DISABLED_COLOR_KEY);\n-        if (colorProperty instanceof Color) {\n-            final Color disabledColor = (Color)colorProperty;\n-            if ((fg.getRGB() << 8) == (disabledColor.getRGB() << 8)) return disabledColor;\n+        if (label.getClientProperty(DISABLED_COLOR_KEY) instanceof Color disabledColor &&\n+                (fg.getRGB() << 8) == (disabledColor.getRGB() << 8)) {\n+            return disabledColor;\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaLabelUI.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -153,1 +153,1 @@\n-        final AquaComboBoxRenderer aquaRenderer = renderer instanceof AquaComboBoxRenderer ? (AquaComboBoxRenderer)renderer : null;\n+        AquaComboBoxRenderer aquaRenderer = renderer instanceof AquaComboBoxRenderer acbr ? acbr : null;\n@@ -199,3 +199,3 @@\n-            final JComponent jc = c instanceof JComponent ? (JComponent)c : null;\n-            if (jc != null && !AquaFocusHandler.isActive(jc)) {\n-                painter.state.set(State.INACTIVE);\n+            State state;\n+            if (c instanceof JComponent component &&!AquaFocusHandler.isActive(component)) {\n+                state = State.INACTIVE;\n@@ -203,1 +203,1 @@\n-                painter.state.set(State.ACTIVE);\n+                state = State.ACTIVE;\n@@ -205,0 +205,3 @@\n+\n+            painter.state.set(state);\n+\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaListUI.java","additions":8,"deletions":5,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -133,13 +133,6 @@\n-        final javax.swing.plaf.ComponentUI ui = c.getUI();\n-        if (ui instanceof AquaMenuBarUI) {\n-            if (!((AquaMenuBarUI)ui).useScreenMenuBar) return false;\n-\n-            final Component parent = c.getTopLevelAncestor();\n-            if (parent instanceof JFrame) {\n-                final MenuBar mb = ((JFrame)parent).getMenuBar();\n-                final boolean thisIsTheJMenuBar = (((JFrame)parent).getJMenuBar() == c);\n-                if (mb == null) return thisIsTheJMenuBar;\n-                return (mb instanceof ScreenMenuBar && thisIsTheJMenuBar);\n-            }\n-        }\n-        return false;\n+        return c.getUI() instanceof AquaMenuBarUI menuBar &&\n+                menuBar.useScreenMenuBar &&\n+                c.getTopLevelAncestor() instanceof JFrame frame &&\n+                frame.getJMenuBar() == c &&\n+                (frame.getMenuBar() == null || frame.getMenuBar() instanceof ScreenMenuBar);\n+\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaMenuBarUI.java","additions":6,"deletions":13,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -83,3 +83,7 @@\n-        if (!(c instanceof JPopupMenu)) {\n-            return getItemInsets();\n-        }\n+        if (c instanceof final JPopupMenu menu) {\/\/ for more info on this issue, see AquaComboBoxPopup.updateContents()\n+            if (menu.getComponentCount() > 0) {\n+                Component firstChild = menu.getComponent(0);\n+                if (firstChild instanceof Box.Filler || firstChild instanceof JScrollPane) {\n+                    return getEmptyInsets();\n+                }\n+            }\n@@ -87,7 +91,5 @@\n-        \/\/ for more info on this issue, see AquaComboBoxPopup.updateContents()\n-        final JPopupMenu menu = (JPopupMenu)c;\n-        final int nChildren = menu.getComponentCount();\n-        if (nChildren > 0) {\n-            final Component firstChild = menu.getComponent(0);\n-            if (firstChild instanceof Box.Filler) return getEmptyInsets();\n-            if (firstChild instanceof JScrollPane) return getEmptyInsets();\n+            \/\/ just need top and bottom, and not right and left.\n+            \/\/ but only for non-list popups.\n+            return getPopupInsets();\n+        } else {\n+            return getItemInsets();\n@@ -95,4 +97,0 @@\n-\n-        \/\/ just need top and bottom, and not right and left.\n-        \/\/ but only for non-list popups.\n-        return getPopupInsets();\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaMenuBorder.java","additions":12,"deletions":14,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -174,8 +174,3 @@\n-            final String key = evt.getPropertyName();\n-            if (!CLIENT_PROPERTY_KEY.equalsIgnoreCase(key)) return;\n-\n-            final Object source = evt.getSource();\n-            if (!(source instanceof JMenuItem)) return;\n-\n-            final JMenuItem c = (JMenuItem)source;\n-            apply(c, evt.getNewValue());\n+            if (CLIENT_PROPERTY_KEY.equalsIgnoreCase(evt.getPropertyName()) && evt.getSource() instanceof JMenuItem c) {\n+                apply(c, evt.getNewValue());\n+            }\n@@ -185,2 +180,2 @@\n-            final ButtonUI ui = menuItem.getUI();\n-            if (!(ui instanceof AquaMenuItemUI)) return;\n+            if (menuItem.getUI() instanceof AquaMenuItemUI aquaUI) {\n+                aquaUI.fIsIndeterminate = \"indeterminate\".equals(value);\n@@ -188,1 +183,1 @@\n-            final AquaMenuItemUI aquaUI = (AquaMenuItemUI)ui;\n+                String postFix = aquaUI.fIsIndeterminate ? \".dashIcon\" : \".checkIcon\";\n@@ -190,4 +185,1 @@\n-            if (aquaUI.fIsIndeterminate = \"indeterminate\".equals(value)) {\n-                aquaUI.checkIcon = UIManager.getIcon(aquaUI.getPropertyPrefix() + \".dashIcon\");\n-            } else {\n-                aquaUI.checkIcon = UIManager.getIcon(aquaUI.getPropertyPrefix() + \".checkIcon\");\n+                aquaUI.checkIcon = UIManager.getIcon(aquaUI.getPropertyPrefix() + postFix);\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaMenuItemUI.java","additions":7,"deletions":15,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -377,2 +377,2 @@\n-        if (item.isArmed() && checkIcon instanceof InvertableIcon) {\n-            ((InvertableIcon)checkIcon).getInvertedIcon().paintIcon(item, g, checkIconRect.x, checkIconRect.y);\n+        if (item.isArmed() && checkIcon instanceof InvertableIcon invertable) {\n+            invertable.getInvertedIcon().paintIcon(item, g, checkIconRect.x, checkIconRect.y);\n@@ -405,2 +405,2 @@\n-        if (c instanceof JMenu && (model.isArmed() || model.isSelected()) && arrowIcon instanceof InvertableIcon) {\n-            ((InvertableIcon)arrowIcon).getInvertedIcon().paintIcon(c, g, arrowIconRect.x, arrowIconRect.y);\n+        if (c instanceof JMenu && (model.isArmed() || model.isSelected()) && arrowIcon instanceof InvertableIcon invertable) {\n+            invertable.getInvertedIcon().paintIcon(c, g, arrowIconRect.x, arrowIconRect.y);\n@@ -440,1 +440,1 @@\n-        return (menuItem instanceof JMenu) && (((JMenu)menuItem).isTopLevelMenu());\n+        return menuItem instanceof JMenu menu && menu.isTopLevelMenu();\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaMenuPainter.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -119,1 +119,1 @@\n-            if (c instanceof AbstractButton && ((AbstractButton)c).getMnemonic() != '\\0') {\n+            if (c instanceof AbstractButton button && button.getMnemonic() != '\\0') {\n@@ -124,1 +124,1 @@\n-            if (c instanceof JLabel && ((JLabel)c).getDisplayedMnemonic() != '\\0') {\n+            if (c instanceof JLabel label && label.getDisplayedMnemonic() != '\\0') {\n@@ -129,2 +129,2 @@\n-            if (c instanceof Container) {\n-                repaintMnemonicsInContainer((Container)c);\n+            if (c instanceof Container container) {\n+                repaintMnemonicsInContainer(container);\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaMnemonicHandler.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -253,6 +253,6 @@\n-            if (obj instanceof AquaPixelsKey) {\n-                AquaPixelsKey key = (AquaPixelsKey) obj;\n-                return config == key.config && w == key.w && h == key.h\n-                        && bounds.equals(key.bounds) && state.equals(key.state);\n-            }\n-            return false;\n+            return obj instanceof AquaPixelsKey key &&\n+                    config == key.config &&\n+                    w == key.w &&\n+                    h == key.h\n+                    && bounds.equals(key.bounds) &&\n+                    state.equals(key.state);\n@@ -291,14 +291,8 @@\n-        try {\n-            return (SunGraphics2D)g; \/\/ doing a blind try is faster than checking instanceof\n-        } catch (Exception ignored) {\n-            if (g instanceof PeekGraphics) {\n-                \/\/ if it is a peek just dirty the region\n-                g.fillRect(boundsRect.x, boundsRect.y, boundsRect.width, boundsRect.height);\n-            } else if (g instanceof ProxyGraphics2D) {\n-                final ProxyGraphics2D pg = (ProxyGraphics2D)g;\n-                final Graphics2D g2d = pg.getDelegate();\n-                if (g2d instanceof SunGraphics2D) {\n-                    return g2d;\n-                }\n-            } else if (g instanceof Graphics2D) {\n-                return (Graphics2D) g;\n+        if (g instanceof SunGraphics2D sunGraphics2D) {\n+            return sunGraphics2D;\n+        } else if (g instanceof PeekGraphics) {\n+            \/\/ if it is a peek just dirty the region\n+            g.fillRect(boundsRect.x, boundsRect.y, boundsRect.width, boundsRect.height);\n+        } else if (g instanceof ProxyGraphics2D pg) {\n+            if (pg.getDelegate() instanceof SunGraphics2D sg2d) {\n+                return sg2d;\n@@ -306,0 +300,2 @@\n+        } else if (g instanceof Graphics2D g2d) {\n+            return g2d;\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaPainter.java","additions":16,"deletions":20,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -210,24 +210,22 @@\n-        if (!(g instanceof Graphics2D)) return;\n-\n-        final Graphics2D g2 = (Graphics2D)g;\n-        final String progressString = progressBar.getString();\n-        g2.setFont(progressBar.getFont());\n-        final Point renderLocation = getStringPlacement(g2, progressString, x, y, width, height);\n-        final Rectangle oldClip = g2.getClipBounds();\n-\n-        if (isHorizontal()) {\n-            g2.setColor(selectionForeground);\n-            SwingUtilities2.drawString(progressBar, g2, progressString, renderLocation.x, renderLocation.y);\n-        } else { \/\/ VERTICAL\n-            \/\/ We rotate it -90 degrees, then translate it down since we are going to be bottom up.\n-            final AffineTransform savedAT = g2.getTransform();\n-            g2.transform(AffineTransform.getRotateInstance(0.0f - (Math.PI \/ 2.0f), 0, 0));\n-            g2.translate(-progressBar.getHeight(), 0);\n-\n-            \/\/ 0,0 is now the bottom left of the viewable area, so we just draw our image at\n-            \/\/ the render location since that calculation knows about rotation.\n-            g2.setColor(selectionForeground);\n-            SwingUtilities2.drawString(progressBar, g2, progressString, renderLocation.x, renderLocation.y);\n-\n-            g2.setTransform(savedAT);\n-        }\n+        if (g instanceof Graphics2D g2) {\n+            final String progressString = progressBar.getString();\n+            g2.setFont(progressBar.getFont());\n+            final Point renderLocation = getStringPlacement(g2, progressString, x, y, width, height);\n+            final Rectangle oldClip = g2.getClipBounds();\n+\n+            if (isHorizontal()) {\n+                g2.setColor(selectionForeground);\n+                SwingUtilities2.drawString(progressBar, g2, progressString, renderLocation.x, renderLocation.y);\n+            } else { \/\/ VERTICAL\n+                \/\/ We rotate it -90 degrees, then translate it down since we are going to be bottom up.\n+                final AffineTransform savedAT = g2.getTransform();\n+                g2.transform(AffineTransform.getRotateInstance(0.0f - (Math.PI \/ 2.0f), 0, 0));\n+                g2.translate(-progressBar.getHeight(), 0);\n+\n+                \/\/ 0,0 is now the bottom left of the viewable area, so we just draw our image at\n+                \/\/ the render location since that calculation knows about rotation.\n+                g2.setColor(selectionForeground);\n+                SwingUtilities2.drawString(progressBar, g2, progressString, renderLocation.x, renderLocation.y);\n+\n+                g2.setTransform(savedAT);\n+            }\n@@ -235,1 +233,2 @@\n-        g2.setClip(oldClip);\n+            g2.setClip(oldClip);\n+        }\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaProgressBarUI.java","additions":24,"deletions":25,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -113,2 +113,1 @@\n-        if (e.getContainer() instanceof JRootPane) {\n-            final JRootPane root = (JRootPane)e.getContainer();\n+        if (e.getContainer() instanceof JRootPane root) {\n@@ -116,16 +115,1 @@\n-                final JLayeredPane layered = root.getLayeredPane();\n-                layered.addContainerListener(this);\n-            }\n-        } else {\n-            if (e.getChild() instanceof JMenuBar) {\n-                final JMenuBar jmb = (JMenuBar)e.getChild();\n-                final MenuBarUI mbui = jmb.getUI();\n-\n-                if (mbui instanceof AquaMenuBarUI) {\n-                    final Window owningWindow = SwingUtilities.getWindowAncestor(jmb);\n-\n-                    \/\/ Could be a JDialog, and may have been added to a JRootPane not yet in a window.\n-                    if (owningWindow instanceof JFrame frame) {\n-                        ((AquaMenuBarUI)mbui).setScreenMenuBar(frame);\n-                    }\n-                }\n+                root.getLayeredPane().addContainerListener(this);\n@@ -133,0 +117,5 @@\n+        } else if (e.getChild() instanceof JMenuBar jmb &&\n+                jmb.getUI() instanceof AquaMenuBarUI aquaMenuBar &&\n+                \/\/ Could be a JDialog, and may have been added to a JRootPane not yet in a window.\n+                SwingUtilities.getWindowAncestor(jmb) instanceof JFrame frame) {\n+            aquaMenuBar.setScreenMenuBar(frame);\n@@ -141,2 +130,1 @@\n-        if (e.getContainer() instanceof JRootPane) {\n-            final JRootPane root = (JRootPane)e.getContainer();\n+        if (e.getContainer() instanceof JRootPane root) {\n@@ -144,2 +132,1 @@\n-                final JLayeredPane layered = root.getLayeredPane();\n-                layered.removeContainerListener(this);\n+                root.getLayeredPane().removeContainerListener(this);\n@@ -148,7 +135,2 @@\n-            if (e.getChild() instanceof JMenuBar) {\n-                final JMenuBar jmb = (JMenuBar)e.getChild();\n-                final MenuBarUI mbui = jmb.getUI();\n-\n-                if (mbui instanceof AquaMenuBarUI) {\n-                    final Window owningWindow = SwingUtilities.getWindowAncestor(jmb);\n-\n+            if (e.getChild() instanceof JMenuBar jmb &&\n+                    jmb.getUI() instanceof AquaMenuBarUI menuBar &&\n@@ -156,4 +138,2 @@\n-                    if (owningWindow instanceof JFrame frame) {\n-                        ((AquaMenuBarUI)mbui).clearScreenMenuBar(frame);\n-                    }\n-                }\n+                    SwingUtilities.getWindowAncestor(jmb) instanceof JFrame frame) {\n+                menuBar.clearScreenMenuBar(frame);\n@@ -257,6 +237,4 @@\n-        final JComponent comp = event.getComponent();\n-        if (comp instanceof JRootPane) {\n-            final JRootPane rp = (JRootPane)comp;\n-            if (rp.isEnabled() && rp.getDefaultButton() != null) {\n-                updateDefaultButton((JRootPane)comp);\n-            }\n+        if (event.getComponent() instanceof JRootPane rp\n+                && rp.isEnabled() &&\n+                rp.getDefaultButton() != null) {\n+            updateDefaultButton(rp);\n@@ -299,2 +277,2 @@\n-        if (c instanceof javax.swing.JInternalFrame) {\n-            active = (((JInternalFrame)c).isSelected() ? Boolean.TRUE : Boolean.FALSE);\n+        if (c instanceof JInternalFrame frame) {\n+            active = frame.isSelected();\n@@ -303,2 +281,2 @@\n-        if (c instanceof javax.swing.JComponent) {\n-            ((javax.swing.JComponent)c).putClientProperty(AquaFocusHandler.FRAME_ACTIVE_PROPERTY, active);\n+        if (c instanceof JComponent component) {\n+            component.putClientProperty(AquaFocusHandler.FRAME_ACTIVE_PROPERTY, active);\n@@ -309,4 +287,4 @@\n-        if (c instanceof javax.swing.JMenu) {\n-            children = ((javax.swing.JMenu)c).getMenuComponents();\n-        } else if (c instanceof Container) {\n-            children = ((Container)c).getComponents();\n+        if (c instanceof JMenu menu) {\n+            children = menu.getMenuComponents();\n+        } else if (c instanceof Container container) {\n+            children = container.getComponents();\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaRootPaneUI.java","additions":25,"deletions":47,"binary":false,"changes":72,"status":"modified"},{"patch":"@@ -186,3 +186,2 @@\n-        JComponent editor = spinner.getEditor();\n-        if (editor instanceof DefaultEditor) {\n-            JTextField tf = ((JSpinner.DefaultEditor)editor).getTextField();\n+        if (spinner.getEditor() instanceof DefaultEditor defaultEditor) {\n+            JTextField tf = defaultEditor.getTextField();\n@@ -197,3 +196,2 @@\n-        JComponent editor = spinner.getEditor();\n-        if (editor instanceof DefaultEditor) {\n-            JTextField tf = ((JSpinner.DefaultEditor) editor).getTextField();\n+        if (spinner.getEditor() instanceof DefaultEditor defaultEditor) {\n+            JTextField tf = defaultEditor.getTextField();\n@@ -350,2 +348,2 @@\n-            if (child instanceof Container) {\n-                updateEnabledState((Container) child, enabled);\n+            if (child instanceof Container container) {\n+                updateEnabledState(container, enabled);\n@@ -406,2 +404,2 @@\n-            while ((src instanceof Component) && !(src instanceof JSpinner)) {\n-                src = ((Component) src).getParent();\n+            while (src instanceof Component component && !(src instanceof JSpinner)) {\n+                src = component.getParent();\n@@ -409,1 +407,1 @@\n-            return (src instanceof JSpinner) ? (JSpinner) src : null;\n+            return src instanceof JSpinner spinner ? spinner : null;\n@@ -417,2 +415,2 @@\n-                if (e.getSource() instanceof JButton) {\n-                    arrowButton = (JButton)e.getSource();\n+                if (e.getSource() instanceof JButton button) {\n+                    arrowButton = button;\n@@ -458,4 +456,0 @@\n-            final JComponent editor = spinnerComponent.getEditor();\n-            if (!(editor instanceof JSpinner.DateEditor)) {\n-                return;\n-            }\n@@ -463,7 +457,7 @@\n-            final JSpinner.DateEditor dateEditor = (JSpinner.DateEditor) editor;\n-            final JFormattedTextField ftf = dateEditor.getTextField();\n-            final Format format = dateEditor.getFormat();\n-            Object value;\n-            if (format == null || (value = spinnerComponent.getValue()) == null) {\n-                return;\n-            }\n+            if (spinnerComponent.getEditor() instanceof JSpinner.DateEditor dateEditor) {\n+                final JFormattedTextField ftf = dateEditor.getTextField();\n+                final Format format = dateEditor.getFormat();\n+                Object value;\n+                if (format == null || (value = spinnerComponent.getValue()) == null) {\n+                    return;\n+                }\n@@ -471,5 +465,5 @@\n-            final SpinnerDateModel model = dateEditor.getModel();\n-            final DateFormat.Field field = DateFormat.Field.ofCalendarField(model.getCalendarField());\n-            if (field == null) {\n-                return;\n-            }\n+                final SpinnerDateModel model = dateEditor.getModel();\n+                final DateFormat.Field field = DateFormat.Field.ofCalendarField(model.getCalendarField());\n+                if (field == null) {\n+                    return;\n+                }\n@@ -477,4 +471,6 @@\n-            try {\n-                final AttributedCharacterIterator iterator = format.formatToCharacterIterator(value);\n-                if (!select(ftf, iterator, field) && field == DateFormat.Field.HOUR0) {\n-                    select(ftf, iterator, DateFormat.Field.HOUR1);\n+                try {\n+                    final AttributedCharacterIterator iterator = format.formatToCharacterIterator(value);\n+                    if (!select(ftf, iterator, field) && field == DateFormat.Field.HOUR0) {\n+                        select(ftf, iterator, DateFormat.Field.HOUR1);\n+                    }\n+                } catch (final IllegalArgumentException iae) {\n@@ -482,1 +478,0 @@\n-            } catch (final IllegalArgumentException iae) {\n@@ -517,19 +512,8 @@\n-            final JComponent editor = spinnerComponent.getEditor();\n-            if (!(editor instanceof JSpinner.DateEditor)) {\n-                return -1;\n-            }\n-\n-            final JSpinner.DateEditor dateEditor = (JSpinner.DateEditor) editor;\n-            final JFormattedTextField ftf = dateEditor.getTextField();\n-            final int start = ftf.getSelectionStart();\n-            final JFormattedTextField.AbstractFormatter formatter = ftf.getFormatter();\n-            if (!(formatter instanceof InternationalFormatter)) {\n-                return -1;\n-            }\n-\n-            final Format.Field[] fields = ((InternationalFormatter) formatter).getFields(start);\n-            for (final Field element : fields) {\n-                if (!(element instanceof DateFormat.Field)) {\n-                    continue;\n-                }\n-                int calendarField;\n+            if (spinnerComponent.getEditor() instanceof JSpinner.DateEditor dateEditor) {\n+                JFormattedTextField ftf = dateEditor.getTextField();\n+                if (ftf.getFormatter() instanceof InternationalFormatter iFormatter) {\n+                    for (Field element : iFormatter.getFields(ftf.getSelectionStart())) {\n+                        if (element instanceof DateFormat.Field field) {\n+                            if (field == DateFormat.Field.HOUR1) {\n+                                return Calendar.HOUR;\n+                            }\n@@ -537,5 +521,1 @@\n-                if (element == DateFormat.Field.HOUR1) {\n-                    calendarField = Calendar.HOUR;\n-                } else {\n-                    calendarField = ((DateFormat.Field) element).getCalendarField();\n-                }\n+                            int calendarField = field.getCalendarField();\n@@ -543,2 +523,5 @@\n-                if (calendarField != -1) {\n-                    return calendarField;\n+                            if (calendarField != -1) {\n+                                return calendarField;\n+                            }\n+                        }\n+                    }\n@@ -547,0 +530,1 @@\n+\n@@ -811,4 +795,0 @@\n-            final SpinnerUI spinnerUI = spinner.getUI();\n-\n-            if (spinnerUI instanceof AquaSpinnerUI) {\n-                final AquaSpinnerUI ui = (AquaSpinnerUI) spinnerUI;\n@@ -816,0 +796,1 @@\n+            if (spinner.getUI() instanceof AquaSpinnerUI ui) {\n@@ -821,2 +802,2 @@\n-                    if (oldEditor instanceof JSpinner.DefaultEditor) {\n-                        JTextField tf = ((JSpinner.DefaultEditor)oldEditor).getTextField();\n+                    if (oldEditor instanceof DefaultEditor defaultEditor) {\n+                        JTextField tf = defaultEditor.getTextField();\n@@ -828,2 +809,2 @@\n-                    if (newEditor instanceof JSpinner.DefaultEditor) {\n-                        JTextField tf = ((JSpinner.DefaultEditor)newEditor).getTextField();\n+                    if (newEditor instanceof DefaultEditor defaultEditor) {\n+                        JTextField tf = defaultEditor.getTextField();\n@@ -855,4 +836,2 @@\n-                    JComponent editor = spinner.getEditor();\n-                    if (editor instanceof JSpinner.DefaultEditor) {\n-                        JTextField tf\n-                                = ((JSpinner.DefaultEditor) editor).getTextField();\n+                    if (spinner.getEditor() instanceof DefaultEditor defaultEditor) {\n+                        JTextField tf = defaultEditor.getTextField();\n@@ -874,5 +853,4 @@\n-        final String toolTipText = spinnerComponent.getToolTipText();\n-        final Component[] children = spinnerComponent.getComponents();\n-        for (final Component element : children) {\n-            if (element instanceof JSpinner.DefaultEditor) {\n-                final JTextField tf = ((JSpinner.DefaultEditor) element).getTextField();\n+        String toolTipText = spinnerComponent.getToolTipText();\n+        for (Component component : spinnerComponent.getComponents()) {\n+            if (component instanceof DefaultEditor defaultEditor) {\n+                JTextField tf = defaultEditor.getTextField();\n@@ -882,2 +860,2 @@\n-            } else if (element instanceof JComponent) {\n-                ((JComponent) element).setToolTipText(toolTipText);\n+            } else if (component instanceof JComponent jComponent) {\n+                jComponent.setToolTipText(toolTipText);\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaSpinnerUI.java","additions":57,"deletions":79,"binary":false,"changes":136,"status":"modified"},{"patch":"@@ -226,1 +226,2 @@\n-            if (!(g instanceof Graphics2D)) return;\n+            if (g instanceof Graphics2D g2d) {\n+                final Color oldColor = g2d.getColor();\n@@ -228,2 +229,5 @@\n-            final Graphics2D g2d = (Graphics2D)g;\n-            final Color oldColor = g2d.getColor();\n+                g2d.setPaint(new GradientPaint(0, 0, startColor, 0, height, endColor));\n+                g2d.fillRect(x, y, width, height);\n+                g2d.setColor(borderLines);\n+                g2d.drawLine(x, y, x + width, y);\n+                g2d.drawLine(x, y + height - 1, x + width, y + height - 1);\n@@ -231,7 +235,2 @@\n-            g2d.setPaint(new GradientPaint(0, 0, startColor, 0, height, endColor));\n-            g2d.fillRect(x, y, width, height);\n-            g2d.setColor(borderLines);\n-            g2d.drawLine(x, y, x + width, y);\n-            g2d.drawLine(x, y + height - 1, x + width, y + height - 1);\n-\n-            g2d.setColor(oldColor);\n+                g2d.setColor(oldColor);\n+            }\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaSplitPaneDividerUI.java","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -99,7 +99,2 @@\n-        if (!DIVIDER_PAINTER_KEY.equals(evt.getPropertyName())) return;\n-\n-        final Object value = evt.getNewValue();\n-        if (value instanceof Border) {\n-            divider.setBorder((Border)value);\n-        } else {\n-            divider.setBorder(null);\n+        if (DIVIDER_PAINTER_KEY.equals(evt.getPropertyName())) {\n+            divider.setBorder(evt.getNewValue() instanceof Border border ? border : null);\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaSplitPaneUI.java","additions":2,"deletions":7,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -3681,2 +3681,1 @@\n-            if (isParamsSet() && g instanceof Graphics2D) {\n-                final Graphics2D g2 = (Graphics2D)g;\n+            if (isParamsSet() && g instanceof Graphics2D g2) {\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaTabbedPaneCopyFromBasicUI.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -101,2 +101,1 @@\n-        if (mouseListener instanceof  MouseHandler) {\n-            final MouseHandler mh = (MouseHandler) mouseListener;\n+        if (mouseListener instanceof MouseHandler mh) {\n@@ -319,11 +318,6 @@\n-        if (!(g instanceof Graphics2D)) {\n-            g.setClip(temp);\n-            return;\n-        }\n-        final Graphics2D g2d = (Graphics2D) g;\n-\n-        AffineTransform savedAT = null;\n-        if (isVertical) {\n-            savedAT = g2d.getTransform();\n-            rotateGraphics(g2d, tabRect, textRect, iconRect, tabPlacement);\n-        }\n+        if (g instanceof Graphics2D g2d) {\n+            AffineTransform savedAT = null;\n+            if (isVertical) {\n+                savedAT = g2d.getTransform();\n+                rotateGraphics(g2d, tabRect, textRect, iconRect, tabPlacement);\n+            }\n@@ -331,6 +325,6 @@\n-        \/\/ not for the scrolling tabs\n-        if (component == null && tabIndex >= 0) {\n-            String clippedTitle = SwingUtilities2.clipStringIfNecessary(tabPane, metrics,\n-                    title, textRect.width);\n-            paintTitle(g2d, font, metrics, textRect, tabIndex, clippedTitle);\n-        }\n+            \/\/ not for the scrolling tabs\n+            if (component == null && tabIndex >= 0) {\n+                String clippedTitle = SwingUtilities2.clipStringIfNecessary(tabPane, metrics,\n+                        title, textRect.width);\n+                paintTitle(g2d, font, metrics, textRect, tabIndex, clippedTitle);\n+            }\n@@ -338,3 +332,3 @@\n-        if (icon != null) {\n-            paintIcon(g, tabPlacement, tabIndex, icon, iconRect, isSelected);\n-        }\n+            if (icon != null) {\n+                paintIcon(g, tabPlacement, tabIndex, icon, iconRect, isSelected);\n+            }\n@@ -342,2 +336,3 @@\n-        if (savedAT != null) {\n-            g2d.setTransform(savedAT);\n+            if (savedAT != null) {\n+                g2d.setTransform(savedAT);\n+            }\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaTabbedPaneUI.java","additions":19,"deletions":24,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -52,3 +52,2 @@\n-        final TableCellRenderer renderer = header.getDefaultRenderer();\n-        if (renderer instanceof UIResource && renderer instanceof DefaultTableCellRenderer) {\n-            final DefaultTableCellRenderer defaultRenderer = (DefaultTableCellRenderer)renderer;\n+        if (header.getDefaultRenderer() instanceof UIResource resource &&\n+                resource instanceof DefaultTableCellRenderer defaultRenderer) {\n@@ -61,3 +60,2 @@\n-        final TableCellRenderer renderer = header.getDefaultRenderer();\n-        if (renderer instanceof UIResource && renderer instanceof DefaultTableCellRenderer) {\n-            final DefaultTableCellRenderer defaultRenderer = (DefaultTableCellRenderer)renderer;\n+        if (header.getDefaultRenderer() instanceof UIResource resource &&\n+                resource instanceof DefaultTableCellRenderer defaultRenderer) {\n@@ -160,6 +158,5 @@\n-        if (!(c instanceof JComponent)) return null;\n-\n-        final Border border = ((JComponent)c).getBorder();\n-        if (!(border instanceof AquaTableHeaderBorder)) return null;\n-\n-        return (AquaTableHeaderBorder)border;\n+        if (c instanceof JComponent component && component.getBorder() instanceof AquaTableHeaderBorder border) {\n+            return border;\n+        } else {\n+            return null;\n+        }\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaTableHeaderUI.java","additions":9,"deletions":12,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -68,6 +68,23 @@\n-        if (!(c instanceof JTextComponent)) {\n-            painter.state.set(State.ACTIVE);\n-            painter.state.set(Focused.NO);\n-            painter.paint(g, c, x, y, width, height);\n-            return;\n-        }\n+        if (c instanceof JTextComponent jc) {\n+            final State state = getStateFor(jc);\n+            painter.state.set(state);\n+            painter.state.set(State.ACTIVE == state && jc.hasFocus() ? Focused.YES : Focused.NO);\n+\n+            if (jc.isOpaque()) {\n+                painter.paint(g, c, x, y, width, height);\n+                return;\n+            }\n+\n+            final int shrinkage = getShrinkageFor(jc, height);\n+            final Insets subInsets = getSubInsets(shrinkage);\n+            x += subInsets.left;\n+            y += subInsets.top;\n+            width -= (subInsets.left + subInsets.right);\n+            height -= (subInsets.top + subInsets.bottom);\n+\n+            if (shrinkage > 0) {\n+                final Rectangle clipBounds = g.getClipBounds();\n+                clipBounds.x += shrinkage;\n+                clipBounds.width -= shrinkage * 2;\n+                g.setClip(clipBounds);\n+            }\n@@ -75,6 +92,0 @@\n-        final JTextComponent jc = (JTextComponent)c;\n-        final State state = getStateFor(jc);\n-        painter.state.set(state);\n-        painter.state.set(State.ACTIVE == state && jc.hasFocus() ? Focused.YES : Focused.NO);\n-\n-        if (jc.isOpaque()) {\n@@ -82,18 +93,0 @@\n-            return;\n-        }\n-\n-        final int shrinkage = getShrinkageFor(jc, height);\n-        final Insets subInsets = getSubInsets(shrinkage);\n-        x += subInsets.left;\n-        y += subInsets.top;\n-        width -= (subInsets.left + subInsets.right);\n-        height -= (subInsets.top + subInsets.bottom);\n-\n-        if (shrinkage > 0) {\n-            final Rectangle clipBounds = g.getClipBounds();\n-            clipBounds.x += shrinkage;\n-            clipBounds.width -= shrinkage * 2;\n-            g.setClip(clipBounds);\n-        }\n-\n-        painter.paint(g, c, x, y, width, height);\n@@ -102,0 +95,5 @@\n+        } else {\n+            painter.state.set(State.ACTIVE);\n+            painter.state.set(Focused.NO);\n+            painter.paint(g, c, x, y, width, height);\n+        }\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaTextFieldBorder.java","additions":28,"deletions":30,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -63,11 +63,9 @@\n-            final Object source = evt.getSource();\n-            if (!(source instanceof JTextComponent)) return;\n-\n-            final String propertyName = evt.getPropertyName();\n-            if (!VARIANT_KEY.equals(propertyName) &&\n-                !FIND_POPUP_KEY.equals(propertyName) &&\n-                !FIND_ACTION_KEY.equals(propertyName) &&\n-                !CANCEL_ACTION_KEY.equals(propertyName) &&\n-                !PROMPT_KEY.equals(propertyName)) {\n-                return;\n-            }\n+            if (evt.getSource() instanceof JTextComponent c) {\n+                final String propertyName = evt.getPropertyName();\n+                if (!VARIANT_KEY.equals(propertyName) &&\n+                    !FIND_POPUP_KEY.equals(propertyName) &&\n+                    !FIND_ACTION_KEY.equals(propertyName) &&\n+                    !CANCEL_ACTION_KEY.equals(propertyName) &&\n+                    !PROMPT_KEY.equals(propertyName)) {\n+                    return;\n+                }\n@@ -75,6 +73,6 @@\n-            final JTextComponent c = (JTextComponent)source;\n-            if (wantsToBeASearchField(c)) {\n-                uninstallSearchField(c);\n-                installSearchField(c);\n-            } else {\n-                uninstallSearchField(c);\n+                if (wantsToBeASearchField(c)) {\n+                    uninstallSearchField(c);\n+                    installSearchField(c);\n+                } else {\n+                    uninstallSearchField(c);\n+                }\n@@ -82,0 +80,1 @@\n+\n@@ -106,3 +105,2 @@\n-        final TextUI ui = c.getUI();\n-        if (ui instanceof AquaTextFieldUI) {\n-            ((AquaTextFieldUI)ui).setPaintingDelegate(border);\n+        if (c.getUI() instanceof AquaTextFieldUI textField) {\n+            textField.setPaintingDelegate(border);\n@@ -116,3 +114,2 @@\n-        final TextUI ui = c.getUI();\n-        if (ui instanceof AquaTextFieldUI) {\n-            ((AquaTextFieldUI)ui).setPaintingDelegate(null);\n+        if (c.getUI() instanceof AquaTextFieldUI textField) {\n+            textField.setPaintingDelegate(null);\n@@ -193,2 +190,1 @@\n-        final Object findPopup = c.getClientProperty(FIND_POPUP_KEY);\n-        if (findPopup instanceof JPopupMenu) {\n+        if (c.getClientProperty(FIND_POPUP_KEY) instanceof JPopupMenu popup) {\n@@ -200,1 +196,1 @@\n-                    ((JPopupMenu)findPopup).show(b, 8, b.getHeight() - 2);\n+                    popup.show(b, 8, b.getHeight() - 2);\n@@ -207,3 +203,2 @@\n-        final Object findAction = c.getClientProperty(FIND_ACTION_KEY);\n-        if (findAction instanceof ActionListener) {\n-            b.addActionListener((ActionListener)findAction);\n+        if (c.getClientProperty(FIND_ACTION_KEY) instanceof ActionListener listener) {\n+            b.addActionListener(listener);\n@@ -257,3 +252,2 @@\n-        final Object cancelAction = c.getClientProperty(CANCEL_ACTION_KEY);\n-        if (cancelAction instanceof ActionListener) {\n-            b.addActionListener((ActionListener)cancelAction);\n+        if (c.getClientProperty(CANCEL_ACTION_KEY) instanceof ActionListener listener) {\n+            b.addActionListener(listener);\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaTextFieldSearch.java","additions":26,"deletions":32,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -123,9 +123,6 @@\n-        final Border border = c.getBorder();\n-        if (!(border instanceof AquaBorder)) return;\n-        final AquaBorder aquaBorder = (AquaBorder)border;\n-\n-        if (aquaBorder.sizeVariant.size == size) return;\n-        final AquaBorder derivedBorder = aquaBorder.deriveBorderForSize(size);\n-        if (derivedBorder == null) return;\n-\n-        c.setBorder(derivedBorder);\n+        if (c.getBorder() instanceof AquaBorder aquaBorder && aquaBorder.sizeVariant.size != size) {\n+            AquaBorder derivedBorder = aquaBorder.deriveBorderForSize(size);\n+            if (derivedBorder != null) {\n+                c.setBorder(derivedBorder);\n+            }\n+        }\n@@ -137,8 +134,4 @@\n-            final String key = evt.getPropertyName();\n-            if (!CLIENT_PROPERTY_KEY.equalsIgnoreCase(key)) return;\n-\n-            final Object source = evt.getSource();\n-            if (!(source instanceof JComponent)) return;\n-\n-            final JComponent c = (JComponent)source;\n-            applyComponentSize(c, evt.getNewValue());\n+            if (CLIENT_PROPERTY_KEY.equalsIgnoreCase(evt.getPropertyName()) &&\n+                    evt.getSource() instanceof JComponent c) {\n+                applyComponentSize(c, evt.getNewValue());\n+            }\n@@ -156,3 +149,2 @@\n-            final Object ui = c.getUI();\n-            if (ui instanceof Sizeable) {\n-                ((Sizeable) ui).applySizeFor(c, size);\n+            if (c.getUI() instanceof Sizeable sizable) {\n+                sizable.applySizeFor(c, size);\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaUtilControlSize.java","additions":12,"deletions":20,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -71,2 +71,2 @@\n-        if (c instanceof Container) {\n-            for (final Component child : ((Container)c).getComponents()) {\n+        if (c instanceof Container container) {\n+            for (Component child : container.getComponents()) {\n@@ -109,1 +109,1 @@\n-        if (image instanceof MultiResolutionImage) {\n+        if (image instanceof MultiResolutionImage mri) {\n@@ -111,2 +111,1 @@\n-                    .map((MultiResolutionImage) image,\n-                         (img) -> generateFilteredImage(img, filter));\n+                    .map(mri, img -> generateFilteredImage(img, filter));\n@@ -363,5 +362,13 @@\n-        if (!(c instanceof JComponent)) {\n-            return false;\n-        }\n-        final JRootPane pane = ((JComponent) c).getRootPane();\n-        if (pane == null) {\n+        if (c instanceof JComponent component) {\n+            final JRootPane pane = component.getRootPane();\n+            if (pane == null) {\n+                return false;\n+            }\n+            Object prop = pane.getClientProperty(\n+                    CPlatformWindow.WINDOW_BRUSH_METAL_LOOK);\n+            if (prop != null) {\n+                return Boolean.parseBoolean(prop.toString());\n+            }\n+            prop = pane.getClientProperty(CPlatformWindow.WINDOW_STYLE);\n+            return prop != null && \"textured\".equals(prop);\n+        } else {\n@@ -370,7 +377,0 @@\n-        Object prop = pane.getClientProperty(\n-                CPlatformWindow.WINDOW_BRUSH_METAL_LOOK);\n-        if (prop != null) {\n-            return Boolean.parseBoolean(prop.toString());\n-        }\n-        prop = pane.getClientProperty(CPlatformWindow.WINDOW_STYLE);\n-        return prop != null && \"textured\".equals(prop);\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/AquaUtils.java","additions":17,"deletions":17,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -269,6 +269,5 @@\n-                final Object peer = AWTAccessor.getMenuComponentAccessor()\n-                                               .getPeer(this);\n-                if (peer instanceof CMenu) {\n-                    final CMenu menu = (CMenu) peer;\n-                    final long nativeMenu = menu.getNativeMenu();\n-                    fModelPtr = addMenuListeners(this, nativeMenu);\n+                Object peer = AWTAccessor\n+                        .getMenuComponentAccessor()\n+                        .getPeer(this);\n+                if (peer instanceof CMenu menu) {\n+                    fModelPtr = addMenuListeners(this, menu.getNativeMenu());\n@@ -374,2 +373,3 @@\n-        Object peer = AWTAccessor.getMenuComponentAccessor().getPeer(this);\n-        if (!(peer instanceof CMenuItem)) return;\n+        Object peer = AWTAccessor\n+                .getMenuComponentAccessor()\n+                .getPeer(this);\n@@ -377,2 +377,3 @@\n-        final CMenuItem cmi = (CMenuItem)peer;\n-        cmi.setToolTipText(text);\n+        if (peer instanceof CMenuItem cmi) {\n+            cmi.setToolTipText(text);\n+        }\n@@ -383,9 +384,9 @@\n-        Object peer = AWTAccessor.getMenuComponentAccessor().getPeer(this);\n-        if (!(peer instanceof CMenuItem)) return;\n-\n-        final CMenuItem cmi = (CMenuItem)peer;\n-        Image img = null;\n-\n-        if (i != null) {\n-            if (i.getIconWidth() > 0 && i.getIconHeight() > 0) {\n-                img = AquaIcon.getImageForIcon(i);\n+        Object peer = AWTAccessor\n+                .getMenuComponentAccessor()\n+                .getPeer(this);\n+\n+        if (peer instanceof final CMenuItem cmi) {\n+            if (i != null && i.getIconWidth() > 0 && i.getIconHeight() > 0) {\n+                cmi.setImage(AquaIcon.getImageForIcon(i));\n+            } else {\n+                cmi.setImage(null);\n@@ -394,1 +395,0 @@\n-        cmi.setImage(img);\n@@ -405,2 +405,1 @@\n-        if (m instanceof JMenuItem) {\n-            final JMenuItem mi = (JMenuItem) m;\n+        if (m instanceof JMenuItem mi) {\n@@ -439,8 +438,8 @@\n-            if (m instanceof JMenu) {\n-                sm = new ScreenMenu((JMenu)m);\n-            } else if (m instanceof JCheckBoxMenuItem) {\n-                sm = new ScreenMenuItemCheckbox((JCheckBoxMenuItem)m);\n-            } else if (m instanceof JRadioButtonMenuItem) {\n-                sm = new ScreenMenuItemCheckbox((JRadioButtonMenuItem)m);\n-            } else if (m instanceof JMenuItem) {\n-                sm = new ScreenMenuItem((JMenuItem)m);\n+            if (m instanceof JMenu menu) {\n+                sm = new ScreenMenu(menu);\n+            } else if (m instanceof JCheckBoxMenuItem checkBox) {\n+                sm = new ScreenMenuItemCheckbox(checkBox);\n+            } else if (m instanceof JRadioButtonMenuItem radioButton) {\n+                sm = new ScreenMenuItemCheckbox(radioButton);\n+            } else if (m instanceof JMenuItem menuItem) {\n+                sm = new ScreenMenuItem(menuItem);\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/ScreenMenu.java","additions":29,"deletions":30,"binary":false,"changes":59,"status":"modified"},{"patch":"@@ -114,4 +114,4 @@\n-        final Component child = e.getChild();\n-        if (!(child instanceof JMenu)) return;\n-            addSubmenu((JMenu)child);\n-     }\n+        if (e.getChild() instanceof JMenu menu) {\n+            addSubmenu(menu);\n+        }\n+    }\n@@ -123,3 +123,2 @@\n-          final Component child = e.getChild();\n-          if (!(child instanceof JMenu)) return;\n-            removeSubmenu((JMenu)child);\n+        if (e.getChild() instanceof JMenu menu) {\n+            removeSubmenu(menu);\n@@ -127,0 +126,1 @@\n+    }\n@@ -144,3 +144,3 @@\n-        final Object source = e.getSource();\n-        if (!(source instanceof JMenuItem)) return;\n-        setChildVisible((JMenuItem)source, true);\n+        if (e.getSource() instanceof JMenuItem menuItem) {\n+            setChildVisible(menuItem, true);\n+        }\n@@ -156,3 +156,3 @@\n-        final Object source = e.getSource();\n-        if (!(source instanceof JMenuItem)) return;\n-        setChildVisible((JMenuItem)source, false);\n+        if (e.getSource() instanceof JMenuItem menuItem) {\n+            setChildVisible(menuItem, false);\n+        }\n@@ -167,1 +167,1 @@\n-        if (child instanceof JMenu) {\n+        if (child instanceof JMenu menu) {\n@@ -169,1 +169,1 @@\n-                addSubmenu((JMenu)child);\n+                addSubmenu(menu);\n@@ -172,1 +172,1 @@\n-                if (sm != null)\n+                if (sm != null) {\n@@ -174,0 +174,1 @@\n+                }\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/ScreenMenuBar.java","additions":17,"deletions":16,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -49,1 +49,0 @@\n-        final ComponentUI ui = fMenuItem.getUI();\n@@ -51,2 +50,2 @@\n-        if (ui instanceof ScreenMenuItemUI) {\n-            ((ScreenMenuItemUI)ui).updateListenersForScreenMenuItem();\n+        if (fMenuItem.getUI() instanceof ScreenMenuItemUI menuItem) {\n+            menuItem.updateListenersForScreenMenuItem();\n@@ -55,1 +54,1 @@\n-    }\n+        }\n@@ -86,6 +85,3 @@\n-        if (fMenuItem instanceof JRadioButtonMenuItem) {\n-            final ComponentUI ui = fMenuItem.getUI();\n-\n-            if (ui instanceof ScreenMenuItemUI) {\n-                ((ScreenMenuItemUI)ui).updateListenersForScreenMenuItem();\n-            }\n+        if (fMenuItem instanceof JRadioButtonMenuItem &&\n+                fMenuItem.getUI() instanceof ScreenMenuItemUI menuItem) {\n+            menuItem.updateListenersForScreenMenuItem();\n@@ -104,11 +100,11 @@\n-        Object peer = AWTAccessor.getMenuComponentAccessor().getPeer(menuItem);\n-        if (!(peer instanceof CMenuItem)) {\n-            \/\/Is it possible?\n-            return;\n-        }\n-        final CMenuItem cmi = (CMenuItem) peer;\n-        if (ks == null) {\n-            cmi.setLabel(label);\n-        } else {\n-            cmi.setLabel(label, ks.getKeyChar(), ks.getKeyCode(),\n-                         ks.getModifiers());\n+        Object peer = AWTAccessor\n+                .getMenuComponentAccessor()\n+                .getPeer(menuItem);\n+\n+        if (peer instanceof CMenuItem cmi) {\n+            if (ks == null) {\n+                cmi.setLabel(label);\n+            } else {\n+                cmi.setLabel(label, ks.getKeyChar(), ks.getKeyCode(),\n+                        ks.getModifiers());\n+            }\n@@ -172,2 +168,3 @@\n-        Object peer = AWTAccessor.getMenuComponentAccessor().getPeer(this);\n-        if (!(peer instanceof CMenuItem)) return;\n+        Object peer = AWTAccessor\n+                .getMenuComponentAccessor()\n+                .getPeer(this);\n@@ -175,2 +172,3 @@\n-        final CMenuItem cmi = (CMenuItem)peer;\n-        cmi.setToolTipText(text);\n+        if (peer instanceof CMenuItem cmi) {\n+            cmi.setToolTipText(text);\n+        }\n@@ -180,12 +178,10 @@\n-        Object peer = AWTAccessor.getMenuComponentAccessor().getPeer(this);\n-        if (!(peer instanceof CMenuItem)) return;\n-\n-        final CMenuItem cmi = (CMenuItem)peer;\n-            Image img = null;\n-\n-        if (i != null) {\n-            if (i.getIconWidth() > 0 && i.getIconHeight() > 0) {\n-                    img = AquaIcon.getImageForIcon(i);\n-                }\n-        }\n-            cmi.setImage(img);\n+        Object peer = AWTAccessor\n+                .getMenuComponentAccessor()\n+                .getPeer(this);\n+\n+        if (peer instanceof CMenuItem cmi) {\n+            if (i != null && i.getIconWidth() > 0 && i.getIconHeight() > 0) {\n+                cmi.setImage(AquaIcon.getImageForIcon(i));\n+            } else {\n+                cmi.setImage(null);\n+            }\n@@ -193,0 +189,1 @@\n+    }\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/ScreenMenuItem.java","additions":34,"deletions":37,"binary":false,"changes":71,"status":"modified"},{"patch":"@@ -95,3 +95,2 @@\n-        final ButtonUI ui = fMenuItem.getUI();\n-        if (ui instanceof ScreenMenuItemUI) {\n-            ((ScreenMenuItemUI)ui).updateListenersForScreenMenuItem();\n+        if (fMenuItem.getUI() instanceof ScreenMenuItemUI menuItem) {\n+            menuItem.updateListenersForScreenMenuItem();\n@@ -162,2 +161,3 @@\n-        Object peer = AWTAccessor.getMenuComponentAccessor().getPeer(this);\n-        if (!(peer instanceof CMenuItem)) return;\n+        Object peer = AWTAccessor\n+                .getMenuComponentAccessor()\n+                .getPeer(this);\n@@ -165,1 +165,3 @@\n-        ((CMenuItem)peer).setToolTipText(text);\n+        if (peer instanceof CMenuItem menuItem) {\n+            menuItem.setToolTipText(text);\n+        }\n@@ -169,9 +171,9 @@\n-        Object peer = AWTAccessor.getMenuComponentAccessor().getPeer(this);\n-        if (!(peer instanceof CMenuItem)) return;\n-\n-        final CMenuItem cmi = (CMenuItem)peer;\n-        Image img = null;\n-\n-        if (i != null) {\n-            if (i.getIconWidth() > 0 && i.getIconHeight() > 0) {\n-                img = AquaIcon.getImageForIcon(i);\n+        Object peer = AWTAccessor\n+                .getMenuComponentAccessor()\n+                .getPeer(this);\n+\n+        if (peer instanceof CMenuItem cmi) {\n+            if (i != null && i.getIconWidth() > 0 && i.getIconHeight() > 0) {\n+                cmi.setImage(AquaIcon.getImageForIcon(i));\n+            } else {\n+                cmi.setImage(null);\n@@ -180,1 +182,0 @@\n-        cmi.setImage(img);\n@@ -213,3 +214,6 @@\n-        Object peer = AWTAccessor.getMenuComponentAccessor().getPeer(this);\n-        if (peer instanceof CCheckboxMenuItem) {\n-            ((CCheckboxMenuItem)peer).setIsIndeterminate(indeterminate);\n+        Object peer = AWTAccessor\n+                .getMenuComponentAccessor()\n+                .getPeer(this);\n+\n+        if (peer instanceof CCheckboxMenuItem menuItem) {\n+            menuItem.setIsIndeterminate(indeterminate);\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/ScreenMenuItemCheckbox.java","additions":23,"deletions":19,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -67,1 +67,2 @@\n-        if (w == null) return popup;\n+        if (w instanceof RootPaneContainer rootPane) {\n+            JRootPane popupRootPane = rootPane.getRootPane();\n@@ -69,2 +70,6 @@\n-        if (!(w instanceof RootPaneContainer)) return popup;\n-        final JRootPane popupRootPane = ((RootPaneContainer)w).getRootPane();\n+            \/\/ we need to set every time, because PopupFactory caches the heavy weight\n+            \/\/ TODO: CPlatformWindow constants?\n+            if (fIsActive) {\n+                popupRootPane.putClientProperty(CPlatformWindow.WINDOW_ALPHA, TRANSLUCENT);\n+                popupRootPane.putClientProperty(CPlatformWindow.WINDOW_SHADOW, Boolean.TRUE);\n+                popupRootPane.putClientProperty(CPlatformWindow.WINDOW_FADE_DELEGATE, invoker);\n@@ -72,17 +77,11 @@\n-        \/\/ we need to set every time, because PopupFactory caches the heavy weight\n-        \/\/ TODO: CPlatformWindow constants?\n-        if (fIsActive) {\n-            popupRootPane.putClientProperty(CPlatformWindow.WINDOW_ALPHA, TRANSLUCENT);\n-            popupRootPane.putClientProperty(CPlatformWindow.WINDOW_SHADOW, Boolean.TRUE);\n-            popupRootPane.putClientProperty(CPlatformWindow.WINDOW_FADE_DELEGATE, invoker);\n-\n-            w.setBackground(UIManager.getColor(\"PopupMenu.translucentBackground\"));\n-            popupRootPane.putClientProperty(CPlatformWindow.WINDOW_DRAGGABLE_BACKGROUND, Boolean.FALSE);\n-            SwingUtilities.invokeLater(new Runnable() {\n-                public void run() {\n-                    popupRootPane.putClientProperty(CPlatformWindow.WINDOW_SHADOW_REVALIDATE_NOW, Double.valueOf(Math.random()));\n-                }\n-            });\n-        } else {\n-            popupRootPane.putClientProperty(CPlatformWindow.WINDOW_ALPHA, OPAQUE);\n-            popupRootPane.putClientProperty(CPlatformWindow.WINDOW_SHADOW, Boolean.FALSE);\n+                w.setBackground(UIManager.getColor(\"PopupMenu.translucentBackground\"));\n+                popupRootPane.putClientProperty(CPlatformWindow.WINDOW_DRAGGABLE_BACKGROUND, Boolean.FALSE);\n+                SwingUtilities.invokeLater(new Runnable() {\n+                    public void run() {\n+                        popupRootPane.putClientProperty(CPlatformWindow.WINDOW_SHADOW_REVALIDATE_NOW, Double.valueOf(Math.random()));\n+                    }\n+                });\n+            } else {\n+                popupRootPane.putClientProperty(CPlatformWindow.WINDOW_ALPHA, OPAQUE);\n+                popupRootPane.putClientProperty(CPlatformWindow.WINDOW_SHADOW, Boolean.FALSE);\n+            }\n","filename":"src\/java.desktop\/macosx\/classes\/com\/apple\/laf\/ScreenPopupFactory.java","additions":19,"deletions":20,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -301,2 +301,2 @@\n-        if (tk instanceof HeadlessToolkit) {\n-            tk = ((HeadlessToolkit)tk).getUnderlyingToolkit();\n+        if (tk instanceof HeadlessToolkit htk) {\n+            tk = htk.getUnderlyingToolkit();\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/font\/CFontManager.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -176,5 +176,4 @@\n-        GeneralPath gp = getGlyphOutline(glyphCode, 0f, 0f);\n-        Rectangle2D r2d = gp.getBounds2D();\n-        Rectangle2D.Float r2df;\n-        if (r2d instanceof Rectangle2D.Float) {\n-            r2df = (Rectangle2D.Float)r2d;\n+        Rectangle2D r2d = getGlyphOutline(glyphCode, 0f, 0f).getBounds2D();\n+\n+        if (r2d instanceof Rectangle2D.Float r2df) {\n+            return r2df;\n@@ -186,1 +185,1 @@\n-            r2df = new Rectangle2D.Float(x, y, w, h);\n+            return new Rectangle2D.Float(x, y, w, h);\n@@ -188,1 +187,0 @@\n-        return r2df;\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/font\/CStrike.java","additions":5,"deletions":7,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -276,3 +276,1 @@\n-            if (s instanceof Rectangle2D) {\n-                Rectangle2D rectangle = (Rectangle2D) s;\n-\n+            if (s instanceof Rectangle2D rectangle) {\n@@ -288,3 +286,1 @@\n-            } else if (s instanceof Ellipse2D) {\n-                Ellipse2D ellipse = (Ellipse2D) s;\n-\n+            } else if (s instanceof Ellipse2D ellipse) {\n@@ -301,3 +297,1 @@\n-            } else if (s instanceof Arc2D) {\n-                Arc2D arc = (Arc2D) s;\n-\n+            } else if (s instanceof Arc2D arc) {\n@@ -316,3 +310,1 @@\n-            } else if (s instanceof RoundRectangle2D) {\n-                RoundRectangle2D roundrect = (RoundRectangle2D) s;\n-\n+            } else if (s instanceof RoundRectangle2D roundrect) {\n@@ -331,3 +323,1 @@\n-            } else if (s instanceof Line2D) {\n-                Line2D line = (Line2D) s;\n-\n+            } else if (s instanceof Line2D line) {\n@@ -340,3 +330,1 @@\n-            } else if (s instanceof Point2D) {\n-                Point2D point = (Point2D) s;\n-\n+            } else if (s instanceof Point2D point) {\n@@ -348,7 +336,1 @@\n-                GeneralPath gp;\n-\n-                if (s instanceof GeneralPath) {\n-                    gp = (GeneralPath) s;\n-                } else {\n-                    gp = new GeneralPath(s);\n-                }\n+                GeneralPath gp = s instanceof GeneralPath path ? path : new GeneralPath(s);\n@@ -362,7 +344,1 @@\n-            GeneralPath gp;\n-\n-            if (s instanceof GeneralPath) {\n-                gp = (GeneralPath) s;\n-            } else {\n-                gp = new GeneralPath(s);\n-            }\n+            GeneralPath gp = s instanceof GeneralPath path ? path : new GeneralPath(s);\n@@ -487,2 +463,2 @@\n-            if ((op != null) && (img instanceof BufferedImage)) {\n-                if (((BufferedImage) img).getType() == BufferedImage.TYPE_CUSTOM) {\n+            if (op != null && img instanceof BufferedImage bufferedImage) {\n+                if (bufferedImage.getType() == BufferedImage.TYPE_CUSTOM) {\n@@ -498,1 +474,1 @@\n-                    img = op.filter((BufferedImage) img, null);\n+                    img = op.filter(bufferedImage, null);\n@@ -533,6 +509,7 @@\n-        if (!(img instanceof sun.awt.image.ToolkitImage)) { return copyImage(sg2d, img, x, y, bgColor); }\n-\n-        sun.awt.image.ToolkitImage sunimg = (sun.awt.image.ToolkitImage) img;\n-        if (!imageReady(sunimg, observer)) { return false; }\n-        ImageRepresentation ir = sunimg.getImageRep();\n-        return ir.drawToBufImage(sg2d, sunimg, x, y, bgColor, observer);\n+        if (img instanceof ToolkitImage tki) {\n+            return imageReady(tki, observer) &&\n+                    tki.getImageRep().drawToBufImage(sg2d, tki,\n+                            x, y, bgColor, observer);\n+        } else {\n+            return copyImage(sg2d, img, x, y, bgColor);\n+        }\n@@ -545,6 +522,9 @@\n-        if (!(img instanceof sun.awt.image.ToolkitImage)) { return copyImage(sg2d, img, dx, dy, sx, sy, width, height, bgColor); }\n-\n-        sun.awt.image.ToolkitImage sunimg = (sun.awt.image.ToolkitImage) img;\n-        if (!imageReady(sunimg, observer)) { return false; }\n-        ImageRepresentation ir = sunimg.getImageRep();\n-        return ir.drawToBufImage(sg2d, sunimg, dx, dy, (dx + width), (dy + height), sx, sy, (sx + width), (sy + height), null, observer);\n+        if (img instanceof ToolkitImage tki) {\n+            return imageReady(tki, observer) &&\n+                    tki.getImageRep().drawToBufImage(sg2d, tki, dx, dy,\n+                                    (dx + width), (dy + height),\n+                                    sx, sy, (sx + width), (sy + height),\n+                                    null, observer);\n+        } else {\n+            return copyImage(sg2d, img, dx, dy, sx, sy, width, height, bgColor);\n+        }\n@@ -557,1 +537,7 @@\n-        if (!(img instanceof sun.awt.image.ToolkitImage)) { return scaleImage(sg2d, img, x, y, width, height, bgColor); }\n+        if (img instanceof ToolkitImage tki) {\n+            return imageReady(tki, observer) &&\n+                    tki.getImageRep().drawToBufImage(sg2d, tki, x, y,\n+                            width, height, bgColor, observer);\n+        } else {\n+            return scaleImage(sg2d, img, x, y, width, height, bgColor);\n+        }\n@@ -559,4 +545,0 @@\n-        sun.awt.image.ToolkitImage sunimg = (sun.awt.image.ToolkitImage) img;\n-        if (!imageReady(sunimg, observer)) { return false; }\n-        ImageRepresentation ir = sunimg.getImageRep();\n-        return ir.drawToBufImage(sg2d, sunimg, x, y, width, height, bgColor, observer);\n@@ -569,6 +551,8 @@\n-        if (!(img instanceof sun.awt.image.ToolkitImage)) { return scaleImage(sg2d, img, dx1, dy1, dx2, dy2, sx1, sy1, sx2, sy2, bgColor); }\n-\n-        sun.awt.image.ToolkitImage sunimg = (sun.awt.image.ToolkitImage) img;\n-        if (!imageReady(sunimg, observer)) { return false; }\n-        ImageRepresentation ir = sunimg.getImageRep();\n-        return ir.drawToBufImage(sg2d, sunimg, dx1, dy1, dx2, dy2, sx1, sy1, sx2, sy2, bgColor, observer);\n+        if (img instanceof ToolkitImage tki) {\n+            return imageReady(tki, observer) &&\n+                    tki.getImageRep().drawToBufImage(sg2d, tki,\n+                            dx1, dy1, dx2, dy2, sx1, sy1,\n+                            sx2, sy2, bgColor, observer);\n+        } else {\n+            return scaleImage(sg2d, img, dx1, dy1, dx2, dy2, sx1, sy1, sx2, sy2, bgColor);\n+        }\n@@ -581,1 +565,4 @@\n-        if (!(img instanceof sun.awt.image.ToolkitImage)) {\n+        if (img instanceof ToolkitImage sunimg) {\n+            return imageReady(sunimg, observer) &&\n+                    sunimg.getImageRep().drawToBufImage(sg2d, sunimg, atfm, observer);\n+        } else {\n@@ -585,5 +572,0 @@\n-\n-        sun.awt.image.ToolkitImage sunimg = (sun.awt.image.ToolkitImage) img;\n-        if (!imageReady(sunimg, observer)) { return false; }\n-        ImageRepresentation ir = sunimg.getImageRep();\n-        return ir.drawToBufImage(sg2d, sunimg, atfm, observer);\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/java2d\/CRenderer.java","additions":46,"deletions":64,"binary":false,"changes":110,"status":"modified"},{"patch":"@@ -308,2 +308,2 @@\n-            if (sg2d.stroke instanceof BasicStroke) {\n-                int width = (int) (((BasicStroke) sg2d.stroke).getLineWidth() + 0.5f);\n+            if (sg2d.stroke instanceof BasicStroke basicStroke) {\n+                int width = (int) (basicStroke.getLineWidth() + 0.5f);\n@@ -368,1 +368,1 @@\n-        if (composite instanceof XORComposite) {\n+        if (composite instanceof XORComposite xor) {\n@@ -372,1 +372,1 @@\n-                succeded = surfaceData.xorSurfacePixels(sg2d, srcPixels, x, y, w, h, ((XORComposite) composite).getXorColor().getRGB());\n+                succeded = surfaceData.xorSurfacePixels(sg2d, srcPixels, x, y, w, h, xor.getXorColor().getRGB());\n@@ -383,1 +383,1 @@\n-            if (composite instanceof XORComposite) {\n+            if (composite instanceof XORComposite xor) {\n@@ -388,1 +388,1 @@\n-                    succeded = osxsd.xorSurfacePixels(sg2d, srcPixels, 0, 0, w, h, ((XORComposite) composite).getXorColor().getRGB());\n+                    succeded = osxsd.xorSurfacePixels(sg2d, srcPixels, 0, 0, w, h, xor.getXorColor().getRGB());\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/java2d\/CompositeCRenderer.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -401,2 +401,0 @@\n-        ColorModel cm = bImg.getColorModel();\n-        IndexColorModel icm = ((cm instanceof IndexColorModel) ? (IndexColorModel) cm : null);\n@@ -409,1 +407,1 @@\n-                            icm,\n+                            bImg.getColorModel() instanceof IndexColorModel icm ? icm : null,\n@@ -428,2 +426,0 @@\n-        ColorModel cm = bImg.getColorModel();\n-        IndexColorModel icm = ((cm instanceof IndexColorModel) ? (IndexColorModel) cm : null);\n@@ -437,1 +433,1 @@\n-                            icm,\n+                            bImg.getColorModel() instanceof IndexColorModel icm ? icm : null,\n@@ -639,2 +635,2 @@\n-        if (this.bufImgRaster instanceof SunWritableRaster) {\n-            this.bufImgSunRaster = (SunWritableRaster) this.bufImgRaster;\n+        if (this.bufImgRaster instanceof SunWritableRaster writableRaster) {\n+            this.bufImgSunRaster = writableRaster;\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/java2d\/OSXOffScreenSurfaceData.java","additions":4,"deletions":8,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -450,7 +450,1 @@\n-                GeneralPath gp = null;\n-\n-                if (sg2d.usrClip instanceof GeneralPath) {\n-                    gp = (GeneralPath) sg2d.usrClip;\n-                } else {\n-                    gp = new GeneralPath(sg2d.usrClip);\n-                }\n+                GeneralPath gp = sg2d.usrClip instanceof GeneralPath path ? path : new GeneralPath(sg2d.usrClip);\n@@ -557,2 +551,1 @@\n-        if (sg2d.paint instanceof SystemColor) {\n-            SystemColor color = (SystemColor) sg2d.paint;\n+        if (sg2d.paint instanceof SystemColor color) {\n@@ -570,2 +563,1 @@\n-        } else if (sg2d.paint instanceof Color) {\n-            Color color = (Color) sg2d.paint;\n+        } else if (sg2d.paint instanceof Color color) {\n@@ -583,1 +575,1 @@\n-        } else if (sg2d.paint instanceof GradientPaint) {\n+        } else if (sg2d.paint instanceof GradientPaint color) {\n@@ -585,1 +577,0 @@\n-                GradientPaint color = (GradientPaint) sg2d.paint;\n@@ -601,2 +592,1 @@\n-        } else if (sg2d.paint instanceof LinearGradientPaint) {\n-            LinearGradientPaint color = (LinearGradientPaint) sg2d.paint;\n+        } else if (sg2d.paint instanceof LinearGradientPaint color) {\n@@ -635,2 +625,1 @@\n-        } else if (sg2d.paint instanceof RadialGradientPaint) {\n-            RadialGradientPaint color = (RadialGradientPaint) sg2d.paint;\n+        } else if (sg2d.paint instanceof RadialGradientPaint color) {\n@@ -670,1 +659,1 @@\n-        } else if (sg2d.paint instanceof TexturePaint) {\n+        } else if (sg2d.paint instanceof TexturePaint color) {\n@@ -672,1 +661,0 @@\n-                TexturePaint color = (TexturePaint) sg2d.paint;\n@@ -741,5 +729,1 @@\n-        BasicStroke stroke = defaultBasicStroke;\n-\n-        if (sg2d.stroke instanceof BasicStroke) {\n-            stroke = (BasicStroke) sg2d.stroke;\n-        }\n+        BasicStroke stroke = sg2d.stroke instanceof BasicStroke basicStroke ? basicStroke : defaultBasicStroke;\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/java2d\/OSXSurfaceData.java","additions":8,"deletions":24,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -57,2 +57,2 @@\n-        if (biop instanceof ConvolveOp) {\n-            if (!isConvolveOpValid((ConvolveOp)biop)) {\n+        if (biop instanceof ConvolveOp op) {\n+            if (!isConvolveOpValid(op)) {\n@@ -61,2 +61,2 @@\n-        } else if (biop instanceof RescaleOp) {\n-            if (!isRescaleOpValid((RescaleOp)biop, img)) {\n+        } else if (biop instanceof RescaleOp op) {\n+            if (!isRescaleOpValid(op, img)) {\n@@ -65,2 +65,2 @@\n-        } else if (biop instanceof LookupOp) {\n-            if (!isLookupOpValid((LookupOp)biop, img)) {\n+        } else if (biop instanceof LookupOp op) {\n+            if (!isLookupOpValid(op, img)) {\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/java2d\/metal\/MTLBufImgOps.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -99,2 +99,1 @@\n-            if (op instanceof AffineTransformOp) {\n-                AffineTransformOp atop = (AffineTransformOp) op;\n+            if (op instanceof AffineTransformOp atop) {\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/java2d\/metal\/MTLDrawImage.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -366,6 +366,3 @@\n-        Surface sd = vi.getDestSurface();\n-        if (!(sd instanceof AccelSurface) ||\n-                ((AccelSurface)sd).getType() != type)\n-        {\n-            vi.flush();\n-            vi = null;\n+        if (vi.getDestSurface() instanceof AccelSurface accelSurface &&\n+                accelSurface.getType() == type) {\n+            return vi;\n@@ -374,1 +371,3 @@\n-        return vi;\n+        vi.flush();\n+\n+        return null;\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/java2d\/metal\/MTLGraphicsConfig.java","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -72,2 +72,2 @@\n-        if (surfaceData instanceof MTLSurfaceData) {\n-            validate((MTLSurfaceData)surfaceData);\n+        if (surfaceData instanceof MTLSurfaceData metalSurface) {\n+            validate(metalSurface);\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/java2d\/metal\/MTLLayer.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -332,6 +332,3 @@\n-        if (c instanceof AlphaComposite) {\n-            AlphaComposite ac = (AlphaComposite)c;\n-\n-            return ac.getRule() == AlphaComposite.SRC_OVER && ac.getAlpha() >= 1f;\n-        }\n-        return false;\n+        return c instanceof AlphaComposite ac &&\n+                ac.getRule() == AlphaComposite.SRC_OVER &&\n+                ac.getAlpha() >= 1f;\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/java2d\/metal\/MTLSurfaceData.java","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -367,6 +367,3 @@\n-        Surface sd = vi.getDestSurface();\n-        if (!(sd instanceof AccelSurface) ||\n-            ((AccelSurface)sd).getType() != type)\n-        {\n-            vi.flush();\n-            vi = null;\n+        if (vi.getDestSurface() instanceof AccelSurface accelSurface &&\n+                accelSurface.getType() == type) {\n+            return vi;\n@@ -375,1 +372,3 @@\n-        return vi;\n+        vi.flush();\n+\n+        return null;\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/java2d\/opengl\/CGLGraphicsConfig.java","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -64,2 +64,2 @@\n-        if (surfaceData instanceof CGLSurfaceData) {\n-            validate((CGLSurfaceData)surfaceData);\n+        if (surfaceData instanceof CGLSurfaceData surfaceData) {\n+            validate(surfaceData);\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/java2d\/opengl\/CGLLayer.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n-import javax.accessibility.Accessible;\n+import javax.accessibility.AccessibleContext;\n@@ -172,4 +172,4 @@\n-            for (int i = 0; i < getAccessibleContext().getAccessibleChildrenCount(); i++) {\n-                Accessible child = getAccessibleContext().getAccessibleChild(i);\n-                if (child instanceof JPopupMenu) {\n-                    return  (JPopupMenu) child;\n+            AccessibleContext accessibleContext = getAccessibleContext();\n+            for (int i = 0; i < accessibleContext.getAccessibleChildrenCount(); i++) {\n+                if (accessibleContext.getAccessibleChild(i) instanceof JPopupMenu popupMenu) {\n+                    return popupMenu;\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/LWChoicePeer.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -1178,18 +1178,16 @@\n-        if ((e instanceof InputEvent) && ((InputEvent) e).isConsumed()) {\n-            return;\n-        }\n-        switch (e.getID()) {\n-            case FocusEvent.FOCUS_GAINED:\n-            case FocusEvent.FOCUS_LOST:\n-                handleJavaFocusEvent((FocusEvent) e);\n-                break;\n-            case PaintEvent.PAINT:\n-                \/\/ Got a native paint event\n-\/\/                paintPending = false;\n-                \/\/ fall through to the next statement\n-            case PaintEvent.UPDATE:\n-                handleJavaPaintEvent();\n-                break;\n-            case MouseEvent.MOUSE_PRESSED:\n-                handleJavaMouseEvent((MouseEvent)e);\n-        }\n+        if (!(e instanceof InputEvent inputEvent && inputEvent.isConsumed())) {\n+            switch (e.getID()) {\n+                case FocusEvent.FOCUS_GAINED:\n+                case FocusEvent.FOCUS_LOST:\n+                    handleJavaFocusEvent((FocusEvent) e);\n+                    break;\n+                case PaintEvent.PAINT:\n+                    \/\/ Got a native paint event\n+    \/\/                paintPending = false;\n+                    \/\/ fall through to the next statement\n+                case PaintEvent.UPDATE:\n+                    handleJavaPaintEvent();\n+                    break;\n+                case MouseEvent.MOUSE_PRESSED:\n+                    handleJavaMouseEvent((MouseEvent) e);\n+            }\n@@ -1197,1 +1195,2 @@\n-        sendEventToDelegate(e);\n+            sendEventToDelegate(e);\n+        }\n@@ -1210,2 +1209,1 @@\n-                if (delegateEvent instanceof KeyEvent) {\n-                    KeyEvent ke = (KeyEvent) delegateEvent;\n+                if (delegateEvent instanceof KeyEvent ke) {\n@@ -1225,4 +1223,2 @@\n-        AWTEvent delegateEvent = null;\n-        if (e instanceof MouseWheelEvent) {\n-            MouseWheelEvent me = (MouseWheelEvent) e;\n-            delegateEvent = new MouseWheelEvent(\n+        if (e instanceof MouseWheelEvent me) {\n+            return new MouseWheelEvent(\n@@ -1239,3 +1235,1 @@\n-        } else if (e instanceof MouseEvent) {\n-            MouseEvent me = (MouseEvent) e;\n-\n+        } else if (e instanceof MouseEvent me) {\n@@ -1258,4 +1252,3 @@\n-            delegateEvent = SwingUtilities.convertMouseEvent(getTarget(), me, eventTarget);\n-        } else if (e instanceof KeyEvent) {\n-            KeyEvent ke = (KeyEvent) e;\n-            delegateEvent = new KeyEvent(getDelegateFocusOwner(), ke.getID(), ke.getWhen(),\n+            return SwingUtilities.convertMouseEvent(getTarget(), me, eventTarget);\n+        } else if (e instanceof KeyEvent ke) {\n+            KeyEvent delegateEvent = new KeyEvent(getDelegateFocusOwner(), ke.getID(), ke.getWhen(),\n@@ -1263,1 +1256,1 @@\n-            AWTAccessor.getKeyEventAccessor().setExtendedKeyCode((KeyEvent) delegateEvent,\n+            AWTAccessor.getKeyEventAccessor().setExtendedKeyCode(delegateEvent,\n@@ -1265,3 +1258,6 @@\n-        } else if (e instanceof FocusEvent) {\n-            FocusEvent fe = (FocusEvent) e;\n-            delegateEvent = new FocusEvent(getDelegateFocusOwner(), fe.getID(), fe.isTemporary());\n+\n+            return delegateEvent;\n+        } else if (e instanceof FocusEvent fe) {\n+            return new FocusEvent(getDelegateFocusOwner(), fe.getID(), fe.isTemporary());\n+        } else {\n+            return null;\n@@ -1269,1 +1265,0 @@\n-        return delegateEvent;\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/LWComponentPeer.java","additions":32,"deletions":37,"binary":false,"changes":69,"status":"modified"},{"patch":"@@ -82,4 +82,1 @@\n-        final Cursor cursor;\n-        final Object peer = LWToolkit.targetToPeer(c);\n-        if (peer instanceof LWComponentPeer) {\n-            final LWComponentPeer<?, ?> lwpeer = (LWComponentPeer<?, ?>) peer;\n+        if (LWToolkit.targetToPeer(c) instanceof LWComponentPeer<?, ?> lwpeer) {\n@@ -87,2 +84,2 @@\n-            cursor = lwpeer.getCursor(new Point(cursorPos.x - p.x,\n-                                                cursorPos.y - p.y));\n+            setCursor(lwpeer.getCursor(new Point(cursorPos.x - p.x,\n+                                                cursorPos.y - p.y)));\n@@ -90,1 +87,1 @@\n-            cursor = (c != null) ? c.getCursor() : null;\n+            setCursor(c != null ? c.getCursor() : null);\n@@ -92,1 +89,0 @@\n-        setCursor(cursor);\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/LWCursorManager.java","additions":4,"deletions":8,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -62,2 +62,1 @@\n-        if (e instanceof MouseWheelEvent) {\n-            MouseWheelEvent wheelEvent = (MouseWheelEvent) e;\n+        if (e instanceof MouseWheelEvent wheelEvent) {\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/LWScrollPanePeer.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -219,2 +219,1 @@\n-        if (getTarget() instanceof Frame) {\n-            Frame frame = (Frame) getTarget();\n+        if (getTarget() instanceof Frame frame) {\n@@ -224,2 +223,2 @@\n-        } else if (getTarget() instanceof Dialog) {\n-            setTitle(((Dialog) getTarget()).getTitle());\n+        } else if (getTarget() instanceof Dialog dialog) {\n+            setTitle(dialog.getTitle());\n@@ -464,3 +463,5 @@\n-            ComponentPeer peer =  AWTAccessor.getComponentAccessor().getPeer(blocker);\n-            if (blocked && (peer instanceof LWWindowPeer)) {\n-                this.blocker = (LWWindowPeer) peer;\n+            ComponentPeer peer = AWTAccessor\n+                    .getComponentAccessor()\n+                    .getPeer(blocker);\n+            if (blocked && peer instanceof LWWindowPeer windowPeer) {\n+                this.blocker = windowPeer;\n@@ -764,2 +765,2 @@\n-                if (g instanceof Graphics2D) {\n-                    ((Graphics2D) g).setComposite(AlphaComposite.Src);\n+                if (g instanceof Graphics2D g2d) {\n+                    g2d.setComposite(AlphaComposite.Src);\n@@ -772,2 +773,2 @@\n-                    if (g instanceof SunGraphics2D) {\n-                        ((SunGraphics2D) g).constrain(0, 0, w, h, getRegion());\n+                    if (g instanceof SunGraphics2D sg2d) {\n+                        sg2d.constrain(0, 0, w, h, getRegion());\n@@ -1082,3 +1083,2 @@\n-        if (getTarget() instanceof Frame) {\n-            AWTAccessor.getFrameAccessor().setExtendedState(\n-                    (Frame)getTarget(), newWindowState);\n+        if (getTarget() instanceof Frame frame) {\n+            AWTAccessor.getFrameAccessor().setExtendedState(frame, newWindowState);\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/LWWindowPeer.java","additions":14,"deletions":14,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -117,6 +117,3 @@\n-        if (newValue instanceof Accessible) {\n-            AccessibleContext nvAC = ((Accessible) newValue).getAccessibleContext();\n-            AccessibleRole nvRole = nvAC.getAccessibleRole();\n-            if (!ignoredRoles.contains(roleKey(nvRole))) {\n-                focusChanged();\n-            }\n+        if (newValue instanceof Accessible accessible &&\n+                !ignoredRoles.contains(roleKey(accessible.getAccessibleContext().getAccessibleRole()))) {\n+            focusChanged();\n@@ -411,2 +408,1 @@\n-            if (child instanceof JMenuItem) {\n-                JMenuItem menuItem = (JMenuItem) child;\n+            if (child instanceof JMenuItem menuItem) {\n@@ -441,2 +437,2 @@\n-                    if (c instanceof JComponent) {\n-                        String toolTipText = ((JComponent)c).getToolTipText();\n+                    if (c instanceof JComponent component) {\n+                        String toolTipText = component.getToolTipText();\n@@ -504,2 +500,5 @@\n-                if (!(component instanceof Accessible)) return null;\n-                return CAccessible.getCAccessible((Accessible)component);\n+                if (component instanceof Accessible accessible) {\n+                    return CAccessible.getCAccessible(accessible);\n+                } else {\n+                    return null;\n+                }\n@@ -568,2 +567,2 @@\n-                if (parent instanceof JList) {\n-                    ((JList) parent).setSelectedIndex(i);\n+                if (parent instanceof JList<?> list) {\n+                    list.setSelectedIndex(i);\n@@ -639,3 +638,8 @@\n-                Component c = KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner();\n-                if (!(c instanceof Accessible accessible)) return null;\n-                return CAccessible.getCAccessible(accessible);\n+                Component c = KeyboardFocusManager\n+                        .getCurrentKeyboardFocusManager()\n+                        .getFocusOwner();\n+                if (c instanceof Accessible accessible) {\n+                    return CAccessible.getCAccessible(accessible);\n+                } else {\n+                    return null;\n+                }\n@@ -775,7 +779,2 @@\n-                        continue;\n-                    }\n-\n-                    Accessible ca = null;\n-                    Object obj = currentLevelChildren.get(index);\n-                    if (!(obj instanceof Accessible)) {\n-                        index += 2;\n+                    } else if (currentLevelChildren.get(index) instanceof Accessible ca) {\n+                        Object role = currentLevelChildren.get(index + 1);\n@@ -783,5 +782,0 @@\n-                        continue;\n-                    }\n-                    ca = (Accessible) obj;\n-                    Object role = currentLevelChildren.get(index + 1);\n-                    currentLevelChildren.clear();\n@@ -789,5 +783,5 @@\n-                    AccessibleContext cac = ca.getAccessibleContext();\n-                    if (cac == null) {\n-                        index += 2;\n-                        continue;\n-                    }\n+                        AccessibleContext cac = ca.getAccessibleContext();\n+                        if (cac == null) {\n+                            index += 2;\n+                            continue;\n+                        }\n@@ -795,7 +789,7 @@\n-                    if ((cac.getAccessibleStateSet().contains(AccessibleState.SELECTED) && (whichChildren == JAVA_AX_SELECTED_CHILDREN)) ||\n-                            (cac.getAccessibleStateSet().contains(AccessibleState.VISIBLE) && (whichChildren == JAVA_AX_VISIBLE_CHILDREN)) ||\n-                            (whichChildren == JAVA_AX_ALL_CHILDREN)) {\n-                        allChildren.add(ca);\n-                        allChildren.add(role);\n-                        allChildren.add(String.valueOf(currentLevel));\n-                    }\n+                        if ((cac.getAccessibleStateSet().contains(AccessibleState.SELECTED) && (whichChildren == JAVA_AX_SELECTED_CHILDREN)) ||\n+                                (cac.getAccessibleStateSet().contains(AccessibleState.VISIBLE) && (whichChildren == JAVA_AX_VISIBLE_CHILDREN)) ||\n+                                (whichChildren == JAVA_AX_ALL_CHILDREN)) {\n+                            allChildren.add(ca);\n+                            allChildren.add(role);\n+                            allChildren.add(String.valueOf(currentLevel));\n+                        }\n@@ -803,1 +797,1 @@\n-                    index += 2;\n+                        index += 2;\n@@ -805,6 +799,9 @@\n-                    if (cac.getAccessibleStateSet().contains(AccessibleState.EXPANDED)) {\n-                        parentStack.add(ca);\n-                        indexses.add(index);\n-                        index = 0;\n-                        currentLevel += 1;\n-                        continue;\n+                        if (cac.getAccessibleStateSet().contains(AccessibleState.EXPANDED)) {\n+                            parentStack.add(ca);\n+                            indexses.add(index);\n+                            index = 0;\n+                            currentLevel += 1;\n+                        }\n+                    } else {\n+                        index += 2;\n+                        currentLevelChildren.clear();\n@@ -812,1 +809,0 @@\n-\n@@ -872,1 +868,0 @@\n-        Object component = CAccessible.getSwingAccessible(a);\n@@ -874,3 +869,5 @@\n-        String roleString = role.toString();\n-        if (\"label\".equals(roleString) && component instanceof JLabel) {\n-            return getAccessibleRoleForLabel((JLabel) component, role);\n+        if (\"label\".equals(role.toString()) &&\n+                CAccessible.getSwingAccessible(a) instanceof JLabel label) {\n+            return getAccessibleRoleForLabel(label, role);\n+        } else {\n+            return role;\n@@ -878,1 +875,0 @@\n-        return role;\n@@ -1006,13 +1002,12 @@\n-        Accessible ax = CAccessible.getSwingAccessible(a);\n-        if (!(ax instanceof Component)) return 0;\n-\n-        return invokeAndWait(new Callable<Long>() {\n-            public Long call() throws Exception {\n-                Component cont = (Component) ax;\n-                while (cont != null && !(cont instanceof Window)) {\n-                    cont = cont.getParent();\n-                }\n-                if (cont != null) {\n-                    LWWindowPeer peer = (LWWindowPeer) AWTAccessor.getComponentAccessor().getPeer(cont);\n-                    if (peer != null) {\n-                        return ((CPlatformWindow) peer.getPlatformWindow()).getContentView().getAWTView();\n+        if (CAccessible.getSwingAccessible(a) instanceof Component component) {\n+            return invokeAndWait(new Callable<Long>() {\n+                public Long call() throws Exception {\n+                    Component cont = component;\n+                    while (cont != null && !(cont instanceof Window)) {\n+                        cont = cont.getParent();\n+                    }\n+                    if (cont != null) {\n+                        LWWindowPeer peer = (LWWindowPeer) AWTAccessor.getComponentAccessor().getPeer(cont);\n+                        if (peer != null) {\n+                            return ((CPlatformWindow) peer.getPlatformWindow()).getContentView().getAWTView();\n+                        }\n@@ -1020,0 +1015,1 @@\n+                    return 0L;\n@@ -1021,3 +1017,3 @@\n-                return 0L;\n-            }\n-        }, (Component)ax);\n+            }, component);\n+        }\n+        return 0;\n@@ -1031,5 +1027,1 @@\n-                Accessible sa = CAccessible.getSwingAccessible(a);\n-                if (sa instanceof JTree) {\n-                    return ((JTree) sa).isRootVisible();\n-                }\n-                return false;\n+                return CAccessible.getSwingAccessible(a) instanceof JTree tree && tree.isRootVisible();\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CAccessibility.java","additions":67,"deletions":75,"binary":false,"changes":142,"status":"modified"},{"patch":"@@ -89,2 +89,2 @@\n-        if (accessible instanceof Component) {\n-            addNotificationListeners((Component)accessible);\n+        if (accessible instanceof Component component) {\n+            addNotificationListeners(component);\n@@ -106,3 +106,4 @@\n-        if (c instanceof Accessible) {\n-            AccessibleContext ac = ((Accessible)c).getAccessibleContext();\n-            ac.addPropertyChangeListener(new AXChangeNotifier());\n+        if (c instanceof Accessible accessible) {\n+            accessible\n+                    .getAccessibleContext()\n+                    .addPropertyChangeListener(new AXChangeNotifier());\n@@ -136,4 +137,3 @@\n-                    if (newValue instanceof AccessibleContext) {\n-                        activeDescendant = (AccessibleContext)newValue;\n-                        if (newValue instanceof Accessible) {\n-                            Accessible a = (Accessible)newValue;\n+                    if (newValue instanceof AccessibleContext accessibleContext) {\n+                        activeDescendant = accessibleContext;\n+                        if (accessibleContext instanceof Accessible a) {\n@@ -205,1 +205,1 @@\n-        return (a instanceof CAccessible) ? ((CAccessible)a).accessible : a;\n+        return a instanceof CAccessible accessible ? accessible.accessible : a;\n@@ -209,1 +209,1 @@\n-        return (a instanceof CAccessible) ? ((CAccessible)a).activeDescendant : null;\n+        return a instanceof CAccessible accessible ? accessible.activeDescendant : null;\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CAccessible.java","additions":11,"deletions":11,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -298,15 +298,16 @@\n-        final Accessible sa = CAccessible.getSwingAccessible(a);\n-        if (!(sa instanceof JTextComponent)) return null;\n-\n-        final JTextComponent jc = (JTextComponent) sa;\n-        final Rectangle rect = jc.getVisibleRect();\n-        final Point topLeft = new Point(rect.x, rect.y);\n-        final Point topRight = new Point(rect.x + rect.width, rect.y);\n-        final Point bottomLeft = new Point(rect.x, rect.y + rect.height);\n-        final Point bottomRight = new Point(rect.x + rect.width, rect.y + rect.height);\n-\n-        int start = Math.min(jc.viewToModel(topLeft), jc.viewToModel(topRight));\n-        int end = Math.max(jc.viewToModel(bottomLeft), jc.viewToModel(bottomRight));\n-        if (start < 0) start = 0;\n-        if (end < 0) end = 0;\n-        return new int[] { start, end };\n+        if (CAccessible.getSwingAccessible(a) instanceof JTextComponent jc) {\n+            final Rectangle rect = jc.getVisibleRect();\n+            final Point topLeft = new Point(rect.x, rect.y);\n+            final Point topRight = new Point(rect.x + rect.width, rect.y);\n+            final Point bottomLeft = new Point(rect.x, rect.y + rect.height);\n+            final Point bottomRight = new Point(rect.x + rect.width, rect.y + rect.height);\n+\n+            int start = Math.min(jc.viewToModel(topLeft), jc.viewToModel(topRight));\n+            int end = Math.max(jc.viewToModel(bottomLeft), jc.viewToModel(bottomRight));\n+            if (start < 0) start = 0;\n+            if (end < 0) end = 0;\n+\n+            return new int[]{start, end};\n+        } else {\n+            return null;\n+        }\n@@ -316,2 +317,2 @@\n-        final Accessible sa = CAccessible.getSwingAccessible(a);\n-        if (!(sa instanceof JTextComponent)) return -1;\n+        if (CAccessible.getSwingAccessible(a) instanceof JTextComponent jc) {\n+            final Element root = jc.getDocument().getDefaultRootElement();\n@@ -319,2 +320,2 @@\n-        final JTextComponent jc = (JTextComponent) sa;\n-        final Element root = jc.getDocument().getDefaultRootElement();\n+            \/\/ treat -1 special, returns the current caret position\n+            if (index == -1) index = jc.getCaretPosition();\n@@ -322,5 +323,5 @@\n-        \/\/ treat -1 special, returns the current caret position\n-        if (index == -1) index = jc.getCaretPosition();\n-\n-        \/\/ Determine line number (can be -1)\n-        return root.getElementIndex(index);\n+            \/\/ Determine line number (can be -1)\n+            return root.getElementIndex(index);\n+        } else {\n+            return -1;\n+        }\n@@ -334,9 +335,6 @@\n-        Accessible sa = CAccessible.getSwingAccessible(a);\n-        if (!(sa instanceof JTextComponent)) return null;\n-\n-        final JTextComponent jc = (JTextComponent) sa;\n-        final Element root = jc.getDocument().getDefaultRootElement();\n-        final Element line = root.getElement(lineIndex);\n-        if (line == null) return null;\n-\n-        return new int[] { line.getStartOffset(), line.getEndOffset() };\n+        if (CAccessible.getSwingAccessible(a) instanceof JTextComponent jc) {\n+            Element line = jc.getDocument().getDefaultRootElement().getElement(lineIndex);\n+            return line == null ? null : new int[]{line.getStartOffset(), line.getEndOffset()};\n+        } else {\n+            return null;\n+        }\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CAccessibleText.java","additions":31,"deletions":33,"binary":false,"changes":64,"status":"modified"},{"patch":"@@ -70,2 +70,1 @@\n-        if (cursor instanceof CCustomCursor) {\n-            final CCustomCursor customCursor = (CCustomCursor) cursor;\n+        if (cursor instanceof CCustomCursor customCursor) {\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CCursorManager.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -100,1 +100,1 @@\n-        int clickCount   = ((triggerEvent instanceof MouseEvent) ? (((MouseEvent) triggerEvent).getClickCount()) : 1);\n+        int clickCount   = triggerEvent instanceof MouseEvent mouseEvent ? mouseEvent.getClickCount() : 1;\n@@ -196,2 +196,0 @@\n-        boolean handled = false;\n-\n@@ -200,16 +198,12 @@\n-            if (component instanceof JTextComponent) {\n-                this.setDefaultDragImage((JTextComponent) component);\n-                handled = true;\n-            } else if (component instanceof JTree) {\n-                            this.setDefaultDragImage((JTree) component);\n-                            handled = true;\n-                        } else if (component instanceof JTable) {\n-                            this.setDefaultDragImage((JTable) component);\n-                            handled = true;\n-                        } else if (component instanceof JList) {\n-                            this.setDefaultDragImage((JList) component);\n-                            handled = true;\n-                        }\n-        }\n-\n-        if (handled == false)\n+            if (component instanceof JTextComponent textComponent) {\n+                this.setDefaultDragImage(textComponent);\n+            } else if (component instanceof JTree tree) {\n+                this.setDefaultDragImage(tree);\n+            } else if (component instanceof JTable table) {\n+                this.setDefaultDragImage(table);\n+            } else if (component instanceof JList<?> list) {\n+                this.setDefaultDragImage(list);\n+            } else {\n+                this.setDefaultDragImage();\n+            }\n+        } else {\n@@ -217,0 +211,1 @@\n+        }\n@@ -365,1 +360,1 @@\n-        if (comp instanceof JComponent) {\n+        if (comp instanceof JComponent component) {\n@@ -367,2 +362,1 @@\n-            Rectangle visibleBounds = ((JComponent) comp).getVisibleRect();\n-            Rectangle clipedOutline = outline.intersection(visibleBounds);\n+            Rectangle clipedOutline = outline.intersection(component.getVisibleRect());\n@@ -459,2 +453,2 @@\n-        if (root instanceof Container) {\n-            for (Component comp : ((Container) root).getComponents()) {\n+        if (root instanceof Container container) {\n+            for (Component comp : container.getComponents()) {\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CDragSourceContextPeer.java","additions":18,"deletions":24,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -202,4 +202,2 @@\n-            if (image instanceof MultiResolutionImage) {\n-                List<Image> resolutionVariants\n-                        = ((MultiResolutionImage) image).getResolutionVariants();\n-                return createFromImages(resolutionVariants, prepareImage);\n+            if (image instanceof MultiResolutionImage mri) {\n+                return createFromImages(mri.getResolutionVariants(), prepareImage);\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CImage.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -250,4 +250,2 @@\n-        if (peer.getPlatformWindow() instanceof CPlatformWindow) {\n-            CPlatformWindow platformWindow = (CPlatformWindow) peer.getPlatformWindow();\n-            CPlatformView platformView = platformWindow.getContentView();\n-            return platformView.getAWTView();\n+        if (peer.getPlatformWindow() instanceof CPlatformWindow platformWindow) {\n+            return platformWindow.getContentView().getAWTView();\n@@ -408,2 +406,3 @@\n-        if (peer instanceof LWComponentPeer)\n-            return (LWComponentPeer)peer;\n+        if (peer instanceof LWComponentPeer<?, ?> componentPeer) {\n+            return componentPeer;\n+        }\n@@ -504,2 +503,2 @@\n-                    if (fAwtFocussedComponent instanceof JTextComponent) {\n-                        ((JTextComponent) fAwtFocussedComponent).select(offset - 1, offset);\n+                    if (fAwtFocussedComponent instanceof JTextComponent textComponent) {\n+                        textComponent.select(offset - 1, offset);\n@@ -509,2 +508,2 @@\n-                    if (fAwtFocussedComponent instanceof TextComponent) {\n-                        ((TextComponent) fAwtFocussedComponent).select(offset - 1, offset);\n+                    if (fAwtFocussedComponent instanceof TextComponent textComponent) {\n+                        textComponent.select(offset - 1, offset);\n@@ -653,2 +652,1 @@\n-                    if (fAwtFocussedComponent instanceof JTextComponent) {\n-                        JTextComponent theComponent = (JTextComponent)fAwtFocussedComponent;\n+                    if (fAwtFocussedComponent instanceof JTextComponent theComponent) {\n@@ -656,2 +654,1 @@\n-                    } else if (fAwtFocussedComponent instanceof TextComponent) {\n-                        TextComponent theComponent = (TextComponent)fAwtFocussedComponent;\n+                    } else if (fAwtFocussedComponent instanceof TextComponent theComponent) {\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CInputMethod.java","additions":11,"deletions":14,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -69,4 +69,3 @@\n-        if (parent instanceof CMenuBar) {\n-            MenuBar parentContainer = (MenuBar)getTarget().getParent();\n-            boolean isHelpMenu = parentContainer.getHelpMenu() == getTarget();\n-            int insertionLocation = ((CMenuBar)parent).getNextInsertionIndex();\n+        if (parent instanceof CMenuBar menuBar) {\n+            boolean isHelpMenu = ((MenuBar)getTarget().getParent()).getHelpMenu() == getTarget();\n+            int insertionLocation = menuBar.getNextInsertionIndex();\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CMenu.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -138,3 +138,2 @@\n-        final Object parent = LWToolkit.targetToPeer(getTarget().getParent());\n-        if (parent instanceof CMenuItem) {\n-            b &= ((CMenuItem) parent).isEnabled();\n+        if (LWToolkit.targetToPeer(getTarget().getParent()) instanceof CMenuItem menuItem) {\n+            b &= menuItem.isEnabled();\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CMenuItem.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -286,5 +286,6 @@\n-        Object p1 = componentAccessor.getPeer(w1);\n-        Object p2 = componentAccessor.getPeer(w2);\n-        long time1 = 0;\n-        if (p1 instanceof LWWindowPeer) {\n-            time1 = ((CPlatformWindow) (((LWWindowPeer) p1).getPlatformWindow())).lastBecomeMainTime;\n+\n+        long time1;\n+        if (componentAccessor.getPeer(w1) instanceof LWWindowPeer windowPeer) {\n+            time1 = ((CPlatformWindow) (windowPeer.getPlatformWindow())).lastBecomeMainTime;\n+        } else {\n+            time1 = 0;\n@@ -292,3 +293,6 @@\n-        long time2 = 0;\n-        if (p2 instanceof LWWindowPeer) {\n-            time2 = ((CPlatformWindow) (((LWWindowPeer) p2).getPlatformWindow())).lastBecomeMainTime;\n+\n+        long time2;\n+        if (componentAccessor.getPeer(w2) instanceof LWWindowPeer windowPeer) {\n+            time2 = ((CPlatformWindow) (windowPeer.getPlatformWindow())).lastBecomeMainTime;\n+        } else {\n+            time2 = 0;\n@@ -296,0 +300,1 @@\n+\n@@ -369,2 +374,2 @@\n-        if (target instanceof javax.swing.RootPaneContainer) {\n-            final javax.swing.JRootPane rootpane = ((javax.swing.RootPaneContainer)target).getRootPane();\n+        if (target instanceof RootPaneContainer container) {\n+            JRootPane rootpane = container.getRootPane();\n@@ -383,2 +388,2 @@\n-        if (owner instanceof CPlatformWindow) {\n-            this.owner = (CPlatformWindow)owner;\n+        if (owner instanceof CPlatformWindow window) {\n+            this.owner = window;\n@@ -448,2 +453,2 @@\n-        if (target instanceof javax.swing.RootPaneContainer) {\n-            javax.swing.JRootPane rootpane = ((javax.swing.RootPaneContainer)target).getRootPane();\n+        if (target instanceof RootPaneContainer container) {\n+            JRootPane rootpane = container.getRootPane();\n@@ -694,3 +699,1 @@\n-                            && owner.getPeer() instanceof LWLightweightFramePeer) {\n-                        LWLightweightFramePeer peer =\n-                                (LWLightweightFramePeer) owner.getPeer();\n+                            && owner.getPeer() instanceof LWLightweightFramePeer peer) {\n@@ -734,5 +737,7 @@\n-            final boolean resizable = (target instanceof Frame) ? ((Frame)target).isResizable() :\n-            ((target instanceof Dialog) ? ((Dialog)target).isResizable() : false);\n-            if (resizable) {\n-                setCanFullscreen(true);\n-            }\n+            if (target instanceof Frame frame) {\n+                if (frame.isResizable() ||\n+                        !(target instanceof Frame) &&\n+                        target instanceof Dialog dialog &&\n+                        dialog.isResizable()) {\n+                    setCanFullscreen(true);\n+                }\n@@ -740,2 +745,1 @@\n-            \/\/ Apply the extended state as expected in shared code\n-            if (target instanceof Frame) {\n+                \/\/ Apply the extended state as expected in shared code\n@@ -746,1 +750,1 @@\n-                    int frameState = ((Frame)target).getExtendedState();\n+                    int frameState = frame.getExtendedState();\n@@ -789,3 +793,2 @@\n-                final Object p = acc.getPeer(w);\n-                if (p instanceof LWWindowPeer) {\n-                    CPlatformWindow pw = (CPlatformWindow)((LWWindowPeer)p).getPlatformWindow();\n+                if (acc.getPeer(w) instanceof LWWindowPeer peer) {\n+                    CPlatformWindow pw = (CPlatformWindow) peer.getPlatformWindow();\n@@ -856,1 +859,1 @@\n-        if (target instanceof RootPaneContainer\n+        if (target instanceof RootPaneContainer rpc\n@@ -863,1 +866,0 @@\n-            final RootPaneContainer rpc = (RootPaneContainer) target;\n@@ -1096,5 +1098,6 @@\n-        long nativePeer = 0L;\n-        if (platformWindow instanceof CPlatformWindow) {\n-            nativePeer = ((CPlatformWindow) platformWindow).getContentView().getAWTView();\n-        } else if (platformWindow instanceof CViewPlatformEmbeddedFrame){\n-            nativePeer = ((CViewPlatformEmbeddedFrame) platformWindow).getNSViewPtr();\n+        if (platformWindow instanceof CPlatformWindow cpw) {\n+            return cpw.getContentView().getAWTView();\n+        } else if (platformWindow instanceof CViewPlatformEmbeddedFrame cvpef){\n+            return cvpef.getNSViewPtr();\n+        } else {\n+            return 0L;\n@@ -1102,1 +1105,0 @@\n-        return nativePeer;\n@@ -1228,8 +1230,3 @@\n-        boolean isIconified = false;\n-        if (target instanceof Frame) {\n-            int state = ((Frame)target).getExtendedState();\n-            if ((state & Frame.ICONIFIED) != 0) {\n-                isIconified = true;\n-            }\n-        }\n-        return isIconifyAnimationActive || isIconified;\n+        return isIconifyAnimationActive ||\n+                target instanceof Frame frame &&\n+                (frame.getExtendedState() & Frame.ICONIFIED) != 0;\n@@ -1282,3 +1279,2 @@\n-            final Object p = componentAccessor.getPeer(w);\n-            if (p instanceof LWWindowPeer) {\n-                CPlatformWindow pw = (CPlatformWindow)((LWWindowPeer)p).getPlatformWindow();\n+            if (componentAccessor.getPeer(w) instanceof LWWindowPeer peer) {\n+                CPlatformWindow pw = (CPlatformWindow) peer.getPlatformWindow();\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CPlatformWindow.java","additions":43,"deletions":47,"binary":false,"changes":90,"status":"modified"},{"patch":"@@ -187,3 +187,1 @@\n-        Attribute attr = attributes.get(Media.class);\n-        if (attr instanceof CustomMediaTray) {\n-            CustomMediaTray customTray = (CustomMediaTray) attr;\n+        if (attributes.get(Media.class) instanceof CustomMediaTray customTray) {\n@@ -744,2 +742,5 @@\n-                if (te instanceof PrinterException) throw (PrinterException)te;\n-                else te.printStackTrace();\n+                if (te instanceof PrinterException printerException) {\n+                    throw printerException;\n+                } else {\n+                    te.printStackTrace();\n+                }\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CPrinterJob.java","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -45,3 +45,5 @@\n-        final FontStrike fontStrike = sg2d.getFontInfo().fontStrike;\n-        if (!(fontStrike instanceof CStrike)) return 0;\n-        return ((CStrike)fontStrike).getNativeStrikePtr();\n+        if (sg2d.getFontInfo().fontStrike instanceof CStrike cStrike) {\n+            return cStrike.getNativeStrikePtr();\n+        } else {\n+            return 0;\n+        }\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/CTextPipe.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -306,2 +306,4 @@\n-        if (target instanceof CPrinterDialog) {\n-            return createCPrinterDialog((CPrinterDialog)target);\n+        if (target instanceof CPrinterDialog printerDialog) {\n+            return createCPrinterDialog(printerDialog);\n+        } else {\n+            return super.createDialog(target);\n@@ -309,1 +311,0 @@\n-        return super.createDialog(target);\n@@ -499,2 +500,3 @@\n-        GraphicsDevice gd = gc.getDevice();\n-        if (!(gd instanceof CGraphicsDevice)) {\n+        if (gc.getDevice() instanceof CGraphicsDevice cgd) {\n+            return cgd.getScreenInsets();\n+        } else {\n@@ -503,1 +505,0 @@\n-        return ((CGraphicsDevice)gd).getScreenInsets();\n@@ -521,2 +522,4 @@\n-        if (screen instanceof CGraphicsDevice) {\n-            return new CRobot((CGraphicsDevice) screen);\n+        if (screen instanceof CGraphicsDevice device) {\n+            return new CRobot(device);\n+        } else {\n+            return super.createRobot(screen);\n@@ -524,1 +527,0 @@\n-        return super.createRobot(screen);\n@@ -767,2 +769,2 @@\n-        if (eventException instanceof UndeclaredThrowableException) {\n-            eventException = ((UndeclaredThrowableException)eventException).getUndeclaredThrowable();\n+        if (eventException instanceof UndeclaredThrowableException e) {\n+            eventException = e.getUndeclaredThrowable();\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/LWCToolkit.java","additions":13,"deletions":11,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -390,4 +390,4 @@\n-        if (source instanceof Component) {\n-            srcName = ((Component)source).getName();\n-        } else if (source instanceof MenuComponent) {\n-            srcName = ((MenuComponent)source).getName();\n+        if (source instanceof Component component) {\n+            srcName = component.getName();\n+        } else if (source instanceof MenuComponent menuComponent) {\n+            srcName = menuComponent.getName();\n@@ -583,2 +583,1 @@\n-        if (this instanceof InputEvent && that instanceof InputEvent) {\n-\n+        if (this instanceof InputEvent thisEvent && that instanceof InputEvent thatEvent) {\n@@ -588,2 +587,2 @@\n-            boolean b = accessor.canAccessSystemClipboard((InputEvent) this);\n-            accessor.setCanAccessSystemClipboard((InputEvent) that, b);\n+            boolean b = accessor.canAccessSystemClipboard(thisEvent);\n+            accessor.setCanAccessSystemClipboard(thatEvent, b);\n@@ -595,1 +594,1 @@\n-        if (this instanceof InputEvent) {\n+        if (this instanceof InputEvent inputEvent) {\n@@ -597,1 +596,1 @@\n-                    setCanAccessSystemClipboard((InputEvent) this, false);\n+                    setCanAccessSystemClipboard(inputEvent, false);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/AWTEvent.java","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -982,2 +982,2 @@\n-        } else if (l instanceof AWTEventMulticaster) {\n-            return ((AWTEventMulticaster)l).remove(oldl);\n+        } else if (l instanceof AWTEventMulticaster multicaster) {\n+            return multicaster.remove(oldl);\n@@ -999,2 +999,2 @@\n-        if (a instanceof AWTEventMulticaster) {\n-            ((AWTEventMulticaster)a).saveInternal(s, k);\n+        if (a instanceof AWTEventMulticaster multicaster) {\n+            multicaster.saveInternal(s, k);\n@@ -1007,2 +1007,2 @@\n-        if (b instanceof AWTEventMulticaster) {\n-            ((AWTEventMulticaster)b).saveInternal(s, k);\n+        if (b instanceof AWTEventMulticaster multicaster) {\n+            multicaster.saveInternal(s, k);\n@@ -1027,5 +1027,3 @@\n-      }\n-      else if (l instanceof AWTEventMulticaster) {\n-          ((AWTEventMulticaster)l).saveInternal(s, k);\n-      }\n-      else if (l instanceof Serializable) {\n+      } else if (l instanceof AWTEventMulticaster multicaster) {\n+          multicaster.saveInternal(s, k);\n+      } else if (l instanceof Serializable) {\n@@ -1044,6 +1042,4 @@\n-        if (l instanceof AWTEventMulticaster) {\n-            AWTEventMulticaster mc = (AWTEventMulticaster)l;\n-            return getListenerCount(mc.a, listenerType) +\n-             getListenerCount(mc.b, listenerType);\n-        }\n-        else {\n+        if (l instanceof AWTEventMulticaster multicaster) {\n+            return getListenerCount(multicaster.a, listenerType) +\n+             getListenerCount(multicaster.b, listenerType);\n+        } else {\n@@ -1063,6 +1059,4 @@\n-        if (l instanceof AWTEventMulticaster) {\n-            AWTEventMulticaster mc = (AWTEventMulticaster)l;\n-            int lhs = populateListenerArray(a, mc.a, index);\n-            return populateListenerArray(a, mc.b, lhs);\n-        }\n-        else if (a.getClass().getComponentType().isInstance(l)) {\n+        if (l instanceof AWTEventMulticaster multicaster) {\n+            int lhs = populateListenerArray(a, multicaster.a, index);\n+            return populateListenerArray(a, multicaster.b, lhs);\n+        } else if (a.getClass().getComponentType().isInstance(l)) {\n@@ -1071,3 +1065,2 @@\n-        }\n-        \/\/ Skip nulls, instances of wrong class\n-        else {\n+        } else {\n+            \/\/ Skip nulls, instances of wrong class\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/AWTEventMulticaster.java","additions":19,"deletions":26,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -639,2 +639,1 @@\n-        if (anObject instanceof AWTKeyStroke) {\n-            AWTKeyStroke ks = (AWTKeyStroke)anObject;\n+        if (anObject instanceof AWTKeyStroke ks) {\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/AWTKeyStroke.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -824,15 +824,1 @@\n-        if (!(obj instanceof AlphaComposite)) {\n-            return false;\n-        }\n-\n-        AlphaComposite ac = (AlphaComposite) obj;\n-\n-        if (rule != ac.rule) {\n-            return false;\n-        }\n-\n-        if (extraAlpha != ac.extraAlpha) {\n-            return false;\n-        }\n-\n-        return true;\n+        return obj instanceof AlphaComposite ac && ac.rule == rule && ac.extraAlpha == extraAlpha;\n@@ -840,1 +826,0 @@\n-\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/AlphaComposite.java","additions":1,"deletions":16,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -412,12 +412,4 @@\n-        if (!(obj instanceof BasicStroke)) {\n-            return false;\n-        }\n-\n-        BasicStroke bs = (BasicStroke) obj;\n-        if (width != bs.width) {\n-            return false;\n-        }\n-\n-        if (join != bs.join) {\n-            return false;\n-        }\n+        if (obj instanceof BasicStroke bs) {\n+            if (width != bs.width) {\n+                return false;\n+            }\n@@ -425,3 +417,3 @@\n-        if (cap != bs.cap) {\n-            return false;\n-        }\n+            if (join != bs.join) {\n+                return false;\n+            }\n@@ -429,3 +421,3 @@\n-        if (miterlimit != bs.miterlimit) {\n-            return false;\n-        }\n+            if (cap != bs.cap) {\n+                return false;\n+            }\n@@ -433,2 +425,1 @@\n-        if (dash != null) {\n-            if (dash_phase != bs.dash_phase) {\n+            if (miterlimit != bs.miterlimit) {\n@@ -438,1 +429,10 @@\n-            if (!java.util.Arrays.equals(dash, bs.dash)) {\n+            if (dash != null) {\n+                if (dash_phase != bs.dash_phase) {\n+                    return false;\n+                }\n+\n+                if (!java.util.Arrays.equals(dash, bs.dash)) {\n+                    return false;\n+                }\n+            }\n+            else if (bs.dash != null) {\n@@ -441,2 +441,3 @@\n-        }\n-        else if (bs.dash != null) {\n+\n+            return true;\n+        } else {\n@@ -445,2 +446,0 @@\n-\n-        return true;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/BasicStroke.java","additions":24,"deletions":25,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -386,3 +386,4 @@\n-        if (e instanceof ActionEvent) {\n-            processActionEvent((ActionEvent)e);\n-            return;\n+        if (e instanceof ActionEvent actionEvent) {\n+            processActionEvent(actionEvent);\n+        } else {\n+            super.processEvent(e);\n@@ -390,1 +391,0 @@\n-        super.processEvent(e);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Button.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -216,2 +216,2 @@\n-        if (constraints instanceof String) {\n-            addLayoutComponent((String)constraints, comp);\n+        if (constraints instanceof String c) {\n+            addLayoutComponent(c, comp);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/CardLayout.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -555,3 +555,4 @@\n-        if (e instanceof ItemEvent) {\n-            processItemEvent((ItemEvent)e);\n-            return;\n+        if (e instanceof ItemEvent itemEvent) {\n+            processItemEvent(itemEvent);\n+        } else {\n+            super.processEvent(e);\n@@ -559,1 +560,0 @@\n-        super.processEvent(e);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Checkbox.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -366,3 +366,4 @@\n-        if (e instanceof ItemEvent) {\n-            processItemEvent((ItemEvent)e);\n-            return;\n+        if (e instanceof ItemEvent itemEvent) {\n+            processItemEvent(itemEvent);\n+        } else {\n+            super.processEvent(e);\n@@ -370,1 +371,0 @@\n-        super.processEvent(e);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/CheckboxMenuItem.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -608,3 +608,4 @@\n-        if (e instanceof ItemEvent) {\n-            processItemEvent((ItemEvent)e);\n-            return;\n+        if (e instanceof ItemEvent itemEvent) {\n+            processItemEvent(itemEvent);\n+        } else {\n+            super.processEvent(e);\n@@ -612,1 +613,0 @@\n-        super.processEvent(e);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Choice.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -701,1 +701,1 @@\n-        return obj instanceof Color && ((Color)obj).getRGB() == this.getRGB();\n+        return obj instanceof Color color && color.getRGB() == getRGB();\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Color.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1265,2 +1265,2 @@\n-        if (toolkit instanceof ComponentFactory) {\n-            return (ComponentFactory) toolkit;\n+        if (toolkit instanceof ComponentFactory factory) {\n+            return factory;\n@@ -1386,1 +1386,0 @@\n-        Window win = getContainingWindow();\n@@ -1388,4 +1387,13 @@\n-        if (!(toolkit instanceof ComponentFactory)) {\n-            return null;\n-        }\n-        if (!((ComponentFactory) toolkit).getMouseInfoPeer().isWindowUnderMouse(win)) {\n+        if (toolkit instanceof ComponentFactory componentFactory) {\n+            Window win = getContainingWindow();\n+            if (!componentFactory.getMouseInfoPeer().isWindowUnderMouse(win)) {\n+                return null;\n+            }\n+\n+            final boolean INCLUDE_DISABLED = true;\n+            Point relativeToWindow = win.pointRelativeToComponent(pi.getLocation());\n+            Component inTheSameWindow = win.findComponentAt(relativeToWindow.x,\n+                    relativeToWindow.y,\n+                    INCLUDE_DISABLED);\n+            return inTheSameWindow;\n+        } else {\n@@ -1394,6 +1402,0 @@\n-        final boolean INCLUDE_DISABLED = true;\n-        Point relativeToWindow = win.pointRelativeToComponent(pi.getLocation());\n-        Component inTheSameWindow = win.findComponentAt(relativeToWindow.x,\n-                                                        relativeToWindow.y,\n-                                                        INCLUDE_DISABLED);\n-        return inTheSameWindow;\n@@ -2452,1 +2454,1 @@\n-                if (this instanceof Container && ((Container)this).countComponents() > 0) {\n+                if (this instanceof Container container && container.countComponents() > 0) {\n@@ -2456,3 +2458,2 @@\n-\n-                        ((Container)this).createChildHierarchyEvents(\n-                                                                     HierarchyEvent.ANCESTOR_RESIZED, 0, enabledOnToolkit);\n+                        container.createChildHierarchyEvents(\n+                                                             HierarchyEvent.ANCESTOR_RESIZED, 0, enabledOnToolkit);\n@@ -2461,2 +2462,2 @@\n-                        ((Container)this).createChildHierarchyEvents(\n-                                                                     HierarchyEvent.ANCESTOR_MOVED, 0, enabledOnToolkit);\n+                        container.createChildHierarchyEvents(\n+                                                             HierarchyEvent.ANCESTOR_MOVED, 0, enabledOnToolkit);\n@@ -3124,2 +3125,2 @@\n-            if (g instanceof ConstrainableGraphics) {\n-                ((ConstrainableGraphics) g).constrain(x, y, width, height);\n+            if (g instanceof ConstrainableGraphics constrainableGraphics) {\n+                constrainableGraphics.constrain(x, y, width, height);\n@@ -3148,2 +3149,2 @@\n-            if (g instanceof ConstrainableGraphics) {\n-                ((ConstrainableGraphics) g).constrain(x, y, width, height);\n+            if (g instanceof ConstrainableGraphics constrainableGraphics) {\n+                constrainableGraphics.constrain(x, y, width, height);\n@@ -3557,3 +3558,2 @@\n-        ComponentPeer peer = this.peer;\n-        if (peer instanceof ContainerPeer) {\n-            return (Insets)((ContainerPeer)peer).getInsets().clone();\n+        if (peer instanceof ContainerPeer containerPeer) {\n+            return (Insets) containerPeer.getInsets().clone();\n@@ -3653,1 +3653,0 @@\n-        ComponentPeer peer = this.peer;\n@@ -3655,2 +3654,1 @@\n-            if (parent != null) { return parent.createImage(width, height); }\n-            else { return null;}\n+            return parent == null ? null : parent.createImage(width, height);\n@@ -3658,1 +3656,1 @@\n-            return (peer != null) ? peer.createImage(width, height) : null;\n+            return peer == null ? null : peer.createImage(width, height);\n@@ -3678,1 +3676,0 @@\n-        ComponentPeer peer = this.peer;\n@@ -3680,4 +3677,1 @@\n-            if (parent != null) {\n-                return parent.createVolatileImage(width, height);\n-            }\n-            else { return null;}\n+            return parent == null ? null : parent.createVolatileImage(width, height);\n@@ -3685,2 +3679,1 @@\n-            return (peer != null) ?\n-                peer.createVolatileImage(width, height) : null;\n+            return peer == null ? null : peer.createVolatileImage(width, height);\n@@ -3964,2 +3957,1 @@\n-            if (bufferStrategy instanceof BltBufferStrategy) {\n-                BltBufferStrategy bltBS = (BltBufferStrategy)bufferStrategy;\n+            if (bufferStrategy instanceof BltBufferStrategy bltBS) {\n@@ -3967,2 +3959,1 @@\n-            } else if (bufferStrategy instanceof FlipBufferStrategy) {\n-                FlipBufferStrategy flipBS = (FlipBufferStrategy)bufferStrategy;\n+            } else if (bufferStrategy instanceof FlipBufferStrategy flipBS) {\n@@ -4101,3 +4092,1 @@\n-            if (caps instanceof ExtendedBufferCapabilities) {\n-                ExtendedBufferCapabilities ebc =\n-                    (ExtendedBufferCapabilities)caps;\n+            if (caps instanceof ExtendedBufferCapabilities ebc) {\n@@ -4127,2 +4116,2 @@\n-            if (drawBuffer instanceof VolatileImage) {\n-                drawVBuffer = (VolatileImage)drawBuffer;\n+            if (drawBuffer instanceof VolatileImage volatileImage) {\n+                drawVBuffer = volatileImage;\n@@ -4212,2 +4201,2 @@\n-            if (caps instanceof ProxyCapabilities) {\n-                return ((ProxyCapabilities)caps).orig;\n+            if (caps instanceof ProxyCapabilities proxyCaps) {\n+                return proxyCaps.orig;\n@@ -4859,2 +4848,2 @@\n-        if (e instanceof SunDropTargetEvent) {\n-            ((SunDropTargetEvent)e).dispatch();\n+        if (e instanceof SunDropTargetEvent dropTargetEvent) {\n+            dropTargetEvent.dispatch();\n@@ -4909,1 +4898,1 @@\n-            if (e instanceof java.awt.event.KeyEvent) {\n+            if (e instanceof KeyEvent keyEvent) {\n@@ -4911,2 +4900,2 @@\n-                    processKeyEvent(this, (KeyEvent)e);\n-                if (e.isConsumed()) {\n+                    processKeyEvent(this, keyEvent);\n+                if (keyEvent.isConsumed()) {\n@@ -5061,1 +5050,1 @@\n-            (toolkit instanceof SunToolkit) &&\n+            (toolkit instanceof SunToolkit stk) &&\n@@ -5063,1 +5052,1 @@\n-            ((SunToolkit)toolkit).showOrHideTouchKeyboard(this, e);\n+            (stk).showOrHideTouchKeyboard(this, e);\n@@ -5104,4 +5093,1 @@\n-                if (!(anc instanceof Window)) {\n-                    anc = anc.getParent();\n-                }\n-                else {\n+                if (anc instanceof Window) {\n@@ -5109,0 +5095,2 @@\n+                } else {\n+                    anc = anc.getParent();\n@@ -6375,5 +6363,4 @@\n-        if (e instanceof FocusEvent) {\n-            processFocusEvent((FocusEvent)e);\n-\n-        } else if (e instanceof MouseEvent) {\n-            switch(e.getID()) {\n+        if (e instanceof FocusEvent focusEvent) {\n+            processFocusEvent(focusEvent);\n+        } else if (e instanceof MouseEvent mouseEvent) {\n+            switch (mouseEvent.getID()) {\n@@ -6385,1 +6372,1 @@\n-                  processMouseEvent((MouseEvent)e);\n+                  processMouseEvent(mouseEvent);\n@@ -6389,1 +6376,1 @@\n-                  processMouseMotionEvent((MouseEvent)e);\n+                  processMouseMotionEvent(mouseEvent);\n@@ -6396,2 +6383,2 @@\n-        } else if (e instanceof KeyEvent) {\n-            processKeyEvent((KeyEvent)e);\n+        } else if (e instanceof KeyEvent keyEvent) {\n+            processKeyEvent(keyEvent);\n@@ -6399,5 +6386,5 @@\n-        } else if (e instanceof ComponentEvent) {\n-            processComponentEvent((ComponentEvent)e);\n-        } else if (e instanceof InputMethodEvent) {\n-            processInputMethodEvent((InputMethodEvent)e);\n-        } else if (e instanceof HierarchyEvent) {\n+        } else if (e instanceof ComponentEvent componentEvent) {\n+            processComponentEvent(componentEvent);\n+        } else if (e instanceof InputMethodEvent inputMethodEvent) {\n+            processInputMethodEvent(inputMethodEvent);\n+        } else if (e instanceof HierarchyEvent hierarchyEvent) {\n@@ -6406,1 +6393,1 @@\n-                  processHierarchyEvent((HierarchyEvent)e);\n+                  processHierarchyEvent(hierarchyEvent);\n@@ -6410,1 +6397,1 @@\n-                  processHierarchyBoundsEvent((HierarchyEvent)e);\n+                  processHierarchyBoundsEvent(hierarchyEvent);\n@@ -7146,2 +7133,2 @@\n-                if (bufferStrategy instanceof FlipBufferStrategy) {\n-                    ((FlipBufferStrategy)bufferStrategy).invalidate();\n+                if (bufferStrategy instanceof FlipBufferStrategy flipBufferStrategy) {\n+                    flipBufferStrategy.invalidate();\n@@ -7922,1 +7909,1 @@\n-        if (currentEvent instanceof MouseEvent &&\n+        if (currentEvent instanceof MouseEvent mouseEvent &&\n@@ -7926,1 +7913,1 @@\n-            Component source = ((MouseEvent)currentEvent).getComponent();\n+            Component source = mouseEvent.getComponent();\n@@ -8883,19 +8870,18 @@\n-        if (!(this instanceof JComponent)) {\n-            return;\n-        }\n-        @SuppressWarnings(\"deprecation\")\n-        Package swingPackage = Package.getPackage(\"javax.swing\");\n-        \/\/ For Swing serialization to correctly work Swing needs to\n-        \/\/ be notified before Component does it's serialization.  This\n-        \/\/ hack accommodates this.\n-        \/\/\n-        \/\/ Swing classes MUST be loaded by the bootstrap class loader,\n-        \/\/ otherwise we don't consider them.\n-        for (Class<?> klass = Component.this.getClass(); klass != null;\n-                   klass = klass.getSuperclass()) {\n-            if (klass.getPackage() == swingPackage &&\n-                      klass.getClassLoader() == null) {\n-\n-                SwingAccessor.getJComponentAccessor()\n-                        .compWriteObjectNotify((JComponent) this);\n-                return;\n+        if (this instanceof JComponent component) {\n+            @SuppressWarnings(\"deprecation\")\n+            Package swingPackage = Package.getPackage(\"javax.swing\");\n+            \/\/ For Swing serialization to correctly work Swing needs to\n+            \/\/ be notified before Component does it's serialization.  This\n+            \/\/ hack accommodates this.\n+            \/\/\n+            \/\/ Swing classes MUST be loaded by the bootstrap class loader,\n+            \/\/ otherwise we don't consider them.\n+            for (Class<?> klass = Component.this.getClass(); klass != null;\n+                 klass = klass.getSuperclass()) {\n+                if (klass.getPackage() == swingPackage &&\n+                        klass.getClassLoader() == null) {\n+\n+                    SwingAccessor.getJComponentAccessor()\n+                            .compWriteObjectNotify(component);\n+                    return;\n+                }\n@@ -9539,3 +9525,2 @@\n-                Container parent = getParent();\n-                if (parent instanceof Accessible) {\n-                    return (Accessible) parent;\n+                if (getParent() instanceof Accessible parent) {\n+                    return parent;\n@@ -9990,1 +9975,1 @@\n-                AccessibleContext ac = ((Accessible) this).getAccessibleContext();\n+                AccessibleContext ac = this.getAccessibleContext();\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Component.java","additions":87,"deletions":102,"binary":false,"changes":189,"status":"modified"},{"patch":"@@ -415,3 +415,2 @@\n-        if (peer instanceof ContainerPeer) {\n-            ContainerPeer cpeer = (ContainerPeer)peer;\n-            return (Insets)cpeer.getInsets().clone();\n+        if (peer instanceof ContainerPeer cpeer) {\n+            return (Insets) cpeer.getInsets().clone();\n@@ -635,2 +634,2 @@\n-            if (policy instanceof DefaultFocusTraversalPolicy) {\n-                if (!((DefaultFocusTraversalPolicy)policy).accept(focusOwnerCandidate)) {\n+            if (policy instanceof DefaultFocusTraversalPolicy focusTraversalPolicy) {\n+                if (!focusTraversalPolicy.accept(focusOwnerCandidate)) {\n@@ -826,2 +825,2 @@\n-                if (comp instanceof Container) {\n-                    reparentTraverse(parentPeer, (Container)comp);\n+                if (comp instanceof Container container) {\n+                    reparentTraverse(parentPeer, container);\n@@ -849,1 +848,1 @@\n-            if (comp instanceof Container) {\n+            if (comp instanceof Container container) {\n@@ -851,1 +850,1 @@\n-                reparentTraverse((ContainerPeer)peer, (Container)comp);\n+                reparentTraverse((ContainerPeer)peer, container);\n@@ -912,2 +911,2 @@\n-                if (layoutMgr instanceof LayoutManager2) {\n-                    ((LayoutManager2)layoutMgr).addLayoutComponent(comp, null);\n+                if (layoutMgr instanceof LayoutManager2 lm) {\n+                    lm.addLayoutComponent(comp, null);\n@@ -1155,4 +1154,4 @@\n-                if (layoutMgr instanceof LayoutManager2) {\n-                    ((LayoutManager2)layoutMgr).addLayoutComponent(comp, constraints);\n-                } else if (constraints instanceof String) {\n-                    layoutMgr.addLayoutComponent((String)constraints, comp);\n+                if (layoutMgr instanceof LayoutManager2 lm) {\n+                    lm.addLayoutComponent(comp, constraints);\n+                } else if (constraints instanceof String c) {\n+                    layoutMgr.addLayoutComponent(c, comp);\n@@ -1613,2 +1612,1 @@\n-        if (layoutMgr instanceof LayoutManager2) {\n-            LayoutManager2 lm = (LayoutManager2) layoutMgr;\n+        if (layoutMgr instanceof LayoutManager2 lm) {\n@@ -1654,2 +1652,2 @@\n-                if (peer instanceof ContainerPeer) {\n-                    p = (ContainerPeer) peer;\n+                if (peer instanceof ContainerPeer containerPeer) {\n+                    p = containerPeer;\n@@ -1721,2 +1719,2 @@\n-            if (peer instanceof ContainerPeer) {\n-                ((ContainerPeer)peer).beginLayout();\n+            if (peer instanceof ContainerPeer containerPeer) {\n+                containerPeer.beginLayout();\n@@ -1739,2 +1737,2 @@\n-            if (peer instanceof ContainerPeer) {\n-                ((ContainerPeer)peer).endLayout();\n+            if (peer instanceof ContainerPeer containerPeer) {\n+                containerPeer.endLayout();\n@@ -1754,2 +1752,2 @@\n-                if (comp instanceof Container) {\n-                    ((Container)comp).invalidateTree();\n+                if (comp instanceof Container container) {\n+                    container.invalidateTree();\n@@ -1920,3 +1918,2 @@\n-               if (layoutMgr instanceof LayoutManager2) {\n-                    LayoutManager2 lm = (LayoutManager2) layoutMgr;\n-                    maxSize = lm.maximumLayoutSize(this);\n+               if (layoutMgr instanceof LayoutManager2 lm) {\n+                   maxSize = lm.maximumLayoutSize(this);\n@@ -1946,1 +1943,1 @@\n-        if (layoutMgr instanceof LayoutManager2) {\n+        if (layoutMgr instanceof LayoutManager2 lm) {\n@@ -1948,1 +1945,0 @@\n-                LayoutManager2 lm = (LayoutManager2) layoutMgr;\n@@ -1966,1 +1962,1 @@\n-        if (layoutMgr instanceof LayoutManager2) {\n+        if (layoutMgr instanceof LayoutManager2 lm) {\n@@ -1968,1 +1964,0 @@\n-                LayoutManager2 lm = (LayoutManager2) layoutMgr;\n@@ -2262,3 +2257,4 @@\n-        if (e instanceof ContainerEvent) {\n-            processContainerEvent((ContainerEvent)e);\n-            return;\n+        if (e instanceof ContainerEvent containerEvent) {\n+            processContainerEvent(containerEvent);\n+        } else {\n+            super.processEvent(e);\n@@ -2266,1 +2262,0 @@\n-        super.processEvent(e);\n@@ -2440,2 +2435,1 @@\n-                    if (comp instanceof Container) {\n-                        Container child = (Container) comp;\n+                    if (comp instanceof Container child) {\n@@ -2738,3 +2732,2 @@\n-        if (comp instanceof Container) {\n-            comp = ((Container) comp).findComponentAtImpl(x, y,\n-                                                          ignoreEnabled);\n+        if (comp instanceof Container container) {\n+            comp = container.findComponentAtImpl(x, y, ignoreEnabled);\n@@ -3781,2 +3774,2 @@\n-            if (policy instanceof FocusTraversalPolicy) {\n-                focusTraversalPolicy = (FocusTraversalPolicy)policy;\n+            if (policy instanceof FocusTraversalPolicy ftp) {\n+                focusTraversalPolicy = ftp;\n@@ -3954,2 +3947,1 @@\n-            if (this instanceof Accessible) {\n-                Accessible a = (Accessible)this;\n+            if (this instanceof Accessible a) {\n@@ -3996,2 +3988,2 @@\n-                if (ret instanceof Accessible) {\n-                    return (Accessible) ret;\n+                if (ret instanceof Accessible a) {\n+                    return a;\n@@ -4035,1 +4027,1 @@\n-                if (children[j] instanceof Accessible) {\n+                if (children[j] instanceof Accessible child) {\n@@ -4037,1 +4029,1 @@\n-                        return (Accessible) children[j];\n+                        return child;\n@@ -4060,3 +4052,3 @@\n-            if (c instanceof Container) {\n-                addLW = ((Container)c).numOfLWComponents;\n-                addHW = ((Container)c).numOfHWComponents;\n+            if (c instanceof Container container) {\n+                addLW = container.numOfLWComponents;\n+                addHW = container.numOfHWComponents;\n@@ -4088,3 +4080,3 @@\n-            if (c instanceof Container) {\n-                subLW = ((Container)c).numOfLWComponents;\n-                subHW = ((Container)c).numOfHWComponents;\n+            if (c instanceof Container container) {\n+                subLW = container.numOfLWComponents;\n+                subHW = container.numOfHWComponents;\n@@ -4173,3 +4165,3 @@\n-            } else if (comp instanceof Container &&\n-                    ((Container)comp).hasHeavyweightDescendants() && comp.isShowing()) {\n-                ((Container)comp).recursiveSubtractAndApplyShape(shape);\n+            } else if (comp instanceof Container container &&\n+                    container.hasHeavyweightDescendants() && comp.isShowing()) {\n+                container.recursiveSubtractAndApplyShape(shape);\n@@ -4208,3 +4200,3 @@\n-            if (comp instanceof Container &&\n-                    ((Container)comp).hasHeavyweightDescendants()) {\n-                ((Container)comp).recursiveApplyCurrentShape();\n+            if (comp instanceof Container container &&\n+                    container.hasHeavyweightDescendants()) {\n+                container.recursiveApplyCurrentShape();\n@@ -4223,2 +4215,2 @@\n-                if  (comp instanceof Container) {\n-                    ((Container)comp).recursiveShowHeavyweightChildren();\n+                if  (comp instanceof Container container) {\n+                    container.recursiveShowHeavyweightChildren();\n@@ -4245,2 +4237,2 @@\n-                if  (comp instanceof Container) {\n-                    ((Container)comp).recursiveHideHeavyweightChildren();\n+                if  (comp instanceof Container container) {\n+                    container.recursiveHideHeavyweightChildren();\n@@ -4264,2 +4256,2 @@\n-                if  (comp instanceof Container &&\n-                        ((Container)comp).hasHeavyweightDescendants())\n+                if  (comp instanceof Container container &&\n+                        container.hasHeavyweightDescendants())\n@@ -4508,3 +4500,1 @@\n-        if (e instanceof SunDropTargetEvent) {\n-\n-            SunDropTargetEvent sdde = (SunDropTargetEvent) e;\n+        if (e instanceof SunDropTargetEvent sdde) {\n@@ -4512,1 +4502,0 @@\n-\n@@ -4514,2 +4503,1 @@\n-            if (e instanceof MouseEvent && (eventMask & MOUSE_MASK) != 0) {\n-                MouseEvent me = (MouseEvent) e;\n+            if (e instanceof MouseEvent me && (eventMask & MOUSE_MASK) != 0) {\n@@ -4894,1 +4882,1 @@\n-            if (e instanceof SunDropTargetEvent) {\n+            if (e instanceof SunDropTargetEvent sunDropTargetEvent) {\n@@ -4899,1 +4887,1 @@\n-                                                    ((SunDropTargetEvent)e).getDispatcher());\n+                                                    sunDropTargetEvent.getDispatcher());\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Container.java","additions":63,"deletions":75,"binary":false,"changes":138,"status":"modified"},{"patch":"@@ -144,3 +144,1 @@\n-            if (comp instanceof Container) {\n-                Container cont = (Container)comp;\n-\n+            if (comp instanceof Container cont) {\n@@ -181,3 +179,1 @@\n-        if (comp instanceof Container) {\n-            Container cont = (Container)comp;\n-\n+        if (comp instanceof Container cont) {\n@@ -526,2 +522,1 @@\n-                } else if (comp instanceof Container && comp != aContainer) {\n-                    Container cont = (Container)comp;\n+                } else if (comp instanceof Container cont && comp != aContainer) {\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/ContainerOrderFocusTraversalPolicy.java","additions":3,"deletions":8,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -251,2 +251,2 @@\n-                (manager instanceof DefaultKeyboardFocusManager)\n-                ? (DefaultKeyboardFocusManager)manager\n+                (manager instanceof DefaultKeyboardFocusManager focusManager)\n+                ? focusManager\n@@ -295,3 +295,1 @@\n-                if (Thread.currentThread() instanceof EventDispatchThread) {\n-                    EventDispatchThread edt = (EventDispatchThread)\n-                            Thread.currentThread();\n+                if (Thread.currentThread() instanceof EventDispatchThread edt) {\n@@ -354,16 +352,14 @@\n-        if (!(e instanceof TimedWindowEvent)) {\n-            return false;\n-        }\n-        TimedWindowEvent we = (TimedWindowEvent)e;\n-        long time = we.getWhen();\n-        synchronized (this) {\n-            KeyEvent ke = enqueuedKeyEvents.isEmpty() ? null : enqueuedKeyEvents.getFirst();\n-            if (ke != null && time >= ke.getWhen()) {\n-                TypeAheadMarker marker = typeAheadMarkers.isEmpty() ? null : typeAheadMarkers.getFirst();\n-                if (marker != null) {\n-                    Window toplevel = marker.untilFocused.getContainingWindow();\n-                    \/\/ Check that the component awaiting focus belongs to\n-                    \/\/ the current focused window. See 8015454.\n-                    if (toplevel != null && toplevel.isFocused()) {\n-                        SunToolkit.postEvent(AppContext.getAppContext(), new SequencedEvent(e));\n-                        return true;\n+        if (e instanceof TimedWindowEvent we) {\n+            long time = we.getWhen();\n+            synchronized (this) {\n+                KeyEvent ke = enqueuedKeyEvents.isEmpty() ? null : enqueuedKeyEvents.getFirst();\n+                if (ke != null && time >= ke.getWhen()) {\n+                    TypeAheadMarker marker = typeAheadMarkers.isEmpty() ? null : typeAheadMarkers.getFirst();\n+                    if (marker != null) {\n+                        Window toplevel = marker.untilFocused.getContainingWindow();\n+                        \/\/ Check that the component awaiting focus belongs to\n+                        \/\/ the current focused window. See 8015454.\n+                        if (toplevel != null && toplevel.isFocused()) {\n+                            SunToolkit.postEvent(AppContext.getAppContext(), new SequencedEvent(e));\n+                            return true;\n+                        }\n@@ -374,0 +370,1 @@\n+\n@@ -1251,2 +1248,2 @@\n-            if (!((focusedComponent instanceof Container) &&\n-                  ((Container)focusedComponent).isFocusCycleRoot())) {\n+            if (!((focusedComponent instanceof Container container) &&\n+                  container.isFocusCycleRoot())) {\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/DefaultKeyboardFocusManager.java","additions":20,"deletions":23,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -272,4 +272,2 @@\n-        Toolkit defaultToolkit = Toolkit.getDefaultToolkit();\n-        \/\/ same cast as in isDesktopSupported()\n-        if (defaultToolkit instanceof SunToolkit) {\n-            peer = ((SunToolkit) defaultToolkit).createDesktopPeer(this);\n+        if (Toolkit.getDefaultToolkit() instanceof SunToolkit stk) {\n+            peer = stk.createDesktopPeer(this);\n@@ -329,5 +327,1 @@\n-        Toolkit defaultToolkit = Toolkit.getDefaultToolkit();\n-        if (defaultToolkit instanceof SunToolkit) {\n-            return ((SunToolkit)defaultToolkit).isDesktopSupported();\n-        }\n-        return false;\n+        return Toolkit.getDefaultToolkit() instanceof SunToolkit stk && stk.isDesktopSupported();\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Desktop.java","additions":3,"deletions":9,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -1111,3 +1111,1 @@\n-        Toolkit tk = Toolkit.getDefaultToolkit();\n-        if (tk instanceof SunToolkit) {\n-            SunToolkit stk = (SunToolkit)tk;\n+        if (Toolkit.getDefaultToolkit() instanceof SunToolkit stk) {\n@@ -1119,3 +1117,1 @@\n-        Toolkit tk = Toolkit.getDefaultToolkit();\n-        if (tk instanceof SunToolkit) {\n-            SunToolkit stk = (SunToolkit)tk;\n+        if (Toolkit.getDefaultToolkit() instanceof SunToolkit stk) {\n@@ -1425,2 +1421,1 @@\n-                if ((w instanceof Dialog) && ((Dialog)w).isModal_NoClientCode()) {\n-                    Dialog wd = (Dialog)w;\n+                if ((w instanceof Dialog wd) && wd.isModal_NoClientCode()) {\n@@ -1461,3 +1456,2 @@\n-            if ((w instanceof Dialog) && ((Dialog)w).isModal_NoClientCode()) {\n-                Dialog d = (Dialog)w;\n-                d.modalShow();\n+            if ((w instanceof Dialog wd) && wd.isModal_NoClientCode()) {\n+                wd.modalShow();\n@@ -1488,1 +1482,1 @@\n-        if ((w instanceof Dialog) && ((Dialog)w).isInHide) {\n+        if ((w instanceof Dialog wd) && wd.isInHide) {\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Dialog.java","additions":6,"deletions":12,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -210,5 +210,1 @@\n-        if (obj instanceof Dimension) {\n-            Dimension d = (Dimension)obj;\n-            return (width == d.width) && (height == d.height);\n-        }\n-        return false;\n+        return obj instanceof Dimension d && (width == d.width) && (height == d.height);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Dimension.java","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -147,5 +147,1 @@\n-        if (dm instanceof DisplayMode) {\n-            return equals((DisplayMode)dm);\n-        } else {\n-            return false;\n-        }\n+        return dm instanceof DisplayMode displayMode && equals(displayMode);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/DisplayMode.java","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -135,2 +135,1 @@\n-                if (filter instanceof ModalEventFilter) {\n-                    ModalEventFilter newFilter = (ModalEventFilter)filter;\n+                if (filter instanceof ModalEventFilter newFilter) {\n@@ -140,2 +139,1 @@\n-                        if (f instanceof ModalEventFilter) {\n-                            ModalEventFilter cf = (ModalEventFilter)f;\n+                        if (f instanceof ModalEventFilter cf) {\n@@ -266,2 +264,1 @@\n-                    } else if (o instanceof Component) {\n-                        Component c = (Component) o;\n+                    } else if (o instanceof Component c) {\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/EventDispatchThread.java","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -308,2 +308,1 @@\n-        if (theEvent instanceof PeerEvent) {\n-            PeerEvent peerEvent = (PeerEvent)theEvent;\n+        if (theEvent instanceof PeerEvent peerEvent) {\n@@ -463,2 +462,2 @@\n-        if (e instanceof PeerEvent) {\n-            return coalescePeerEvent((PeerEvent)e);\n+        if (e instanceof PeerEvent peerEvent) {\n+            return coalescePeerEvent(peerEvent);\n@@ -472,2 +471,2 @@\n-        if (e instanceof PaintEvent) {\n-            return coalescePaintEvent((PaintEvent)e);\n+        if (e instanceof PaintEvent paintEvent) {\n+            return coalescePaintEvent(paintEvent);\n@@ -475,2 +474,2 @@\n-        if (e instanceof MouseEvent) {\n-            return coalesceMouseEvent((MouseEvent)e);\n+        if (e instanceof MouseEvent mouseEvent) {\n+            return coalesceMouseEvent(mouseEvent);\n@@ -483,2 +482,1 @@\n-        if (index != -1 && entry.event.getSource() instanceof Component) {\n-            Component source = (Component)entry.event.getSource();\n+        if (index != -1 && entry.event.getSource() instanceof Component source) {\n@@ -494,2 +492,1 @@\n-        if (index != -1 && entry.event.getSource() instanceof Component) {\n-            Component source = (Component)entry.event.getSource();\n+        if (index != -1 && entry.event.getSource() instanceof Component source) {\n@@ -756,7 +753,8 @@\n-        return src instanceof Component ?\n-            ((Component)src).getAccessControlContext() :\n-            src instanceof MenuComponent ?\n-                ((MenuComponent)src).getAccessControlContext() :\n-                src instanceof TrayIcon ?\n-                    ((TrayIcon)src).getAccessControlContext() :\n-                    null;\n+        if (src instanceof Component component) {\n+            return component.getAccessControlContext();\n+        } else if (src instanceof MenuComponent menuComponent) {\n+            return menuComponent.getAccessControlContext();\n+        } else if (src instanceof TrayIcon trayIcon) {\n+            return trayIcon.getAccessControlContext();\n+        }\n+        return null;\n@@ -770,1 +768,1 @@\n-        if (event instanceof ActiveEvent) {\n+        if (event instanceof ActiveEvent activeEvent) {\n@@ -773,3 +771,3 @@\n-            ((ActiveEvent)event).dispatch();\n-        } else if (src instanceof Component) {\n-            ((Component)src).dispatchEvent(event);\n+            activeEvent.dispatch();\n+        } else if (src instanceof Component component) {\n+            component.dispatchEvent(event);\n@@ -777,4 +775,4 @@\n-        } else if (src instanceof MenuComponent) {\n-            ((MenuComponent)src).dispatchEvent(event);\n-        } else if (src instanceof TrayIcon) {\n-            ((TrayIcon)src).dispatchEvent(event);\n+        } else if (src instanceof MenuComponent menuComponent) {\n+            menuComponent.dispatchEvent(event);\n+        } else if (src instanceof TrayIcon trayIcon) {\n+            trayIcon.dispatchEvent(event);\n@@ -1216,2 +1214,2 @@\n-                        if (entry.event instanceof SequencedEvent) {\n-                            ((SequencedEvent)entry.event).dispose();\n+                        if (entry.event instanceof SequencedEvent sequencedEvent) {\n+                            sequencedEvent.dispose();\n@@ -1219,2 +1217,2 @@\n-                        if (entry.event instanceof SentEvent) {\n-                            ((SentEvent)entry.event).dispose();\n+                        if (entry.event instanceof SentEvent sentEvent) {\n+                            sentEvent.dispose();\n@@ -1222,1 +1220,1 @@\n-                        if (entry.event instanceof InvocationEvent) {\n+                        if (entry.event instanceof InvocationEvent invocationEvent) {\n@@ -1224,1 +1222,1 @@\n-                                    .dispose((InvocationEvent)entry.event);\n+                                    .dispose(invocationEvent);\n@@ -1226,2 +1224,2 @@\n-                        if (entry.event instanceof SunDropTargetEvent) {\n-                            ((SunDropTargetEvent)entry.event).dispose();\n+                        if (entry.event instanceof SunDropTargetEvent targetEvent) {\n+                            targetEvent.dispose();\n@@ -1277,2 +1275,1 @@\n-            if (e instanceof InputEvent) {\n-                InputEvent ie = (InputEvent)e;\n+            if (e instanceof InputEvent ie) {\n@@ -1283,2 +1280,1 @@\n-            } else if (e instanceof InputMethodEvent) {\n-                InputMethodEvent ime = (InputMethodEvent)e;\n+            } else if (e instanceof InputMethodEvent ime) {\n@@ -1286,2 +1282,1 @@\n-            } else if (e instanceof ActionEvent) {\n-                ActionEvent ae = (ActionEvent)e;\n+            } else if (e instanceof ActionEvent ae) {\n@@ -1289,2 +1284,1 @@\n-            } else if (e instanceof InvocationEvent) {\n-                InvocationEvent ie = (InvocationEvent)e;\n+            } else if (e instanceof InvocationEvent ie) {\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/EventQueue.java","additions":37,"deletions":43,"binary":false,"changes":80,"status":"modified"},{"patch":"@@ -487,2 +487,2 @@\n-            if (tk instanceof ComponentFactory) {\n-                peer = ((ComponentFactory) tk).getFontPeer(name, style);\n+            if (tk instanceof ComponentFactory componentFactory) {\n+                peer = componentFactory.getFontPeer(name, style);\n@@ -862,3 +862,3 @@\n-        if (attributes instanceof AttributeMap &&\n-            ((AttributeMap)attributes).getValues() != null) {\n-            AttributeValues values = ((AttributeMap)attributes).getValues();\n+        if (attributes instanceof AttributeMap attributeMap &&\n+            attributeMap.getValues() != null) {\n+            AttributeValues values = attributeMap.getValues();\n@@ -1195,2 +1195,2 @@\n-            if (t instanceof FontFormatException) {\n-                throw (FontFormatException)t;\n+            if (t instanceof FontFormatException e) {\n+                throw e;\n@@ -1198,2 +1198,2 @@\n-            if (t instanceof IOException) {\n-                throw (IOException)t;\n+            if (t instanceof IOException e) {\n+                throw e;\n@@ -1201,3 +1201,2 @@\n-            Throwable cause = t.getCause();\n-            if (cause instanceof FontFormatException) {\n-                throw (FontFormatException)cause;\n+            if (t.getCause() instanceof FontFormatException e) {\n+                throw e;\n@@ -1844,2 +1843,1 @@\n-        if (obj instanceof Font) {\n-            Font font = (Font)obj;\n+        if (obj instanceof Font font) {\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Font.java","additions":12,"deletions":14,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -666,2 +666,2 @@\n-        if (context instanceof Graphics2D) {\n-            return ((Graphics2D)context).getFontRenderContext();\n+        if (context instanceof Graphics2D g) {\n+            return g.getFontRenderContext();\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/FontMetrics.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1159,2 +1159,2 @@\n-            if (w instanceof Frame) {\n-                frames[c++] = (Frame)w;\n+            if (w instanceof Frame f) {\n+                frames[c++] = f;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Frame.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -172,2 +172,1 @@\n-            if (cm instanceof DirectColorModel) {\n-                DirectColorModel dcm = (DirectColorModel) cm;\n+            if (cm instanceof DirectColorModel dcm) {\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/GradientPaintContext.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -530,5 +530,1 @@\n-        Toolkit curToolkit = Toolkit.getDefaultToolkit();\n-        if (!(curToolkit instanceof SunToolkit)) {\n-            return false;\n-        }\n-        return ((SunToolkit)curToolkit).isWindowShapingSupported();\n+        return Toolkit.getDefaultToolkit() instanceof SunToolkit stk && stk.isWindowShapingSupported();\n@@ -545,5 +541,1 @@\n-        Toolkit curToolkit = Toolkit.getDefaultToolkit();\n-        if (!(curToolkit instanceof SunToolkit)) {\n-            return false;\n-        }\n-        return ((SunToolkit)curToolkit).isWindowOpacitySupported();\n+        return Toolkit.getDefaultToolkit() instanceof SunToolkit stk && stk.isWindowOpacitySupported();\n@@ -562,4 +554,8 @@\n-        if (!(curToolkit instanceof SunToolkit)) {\n-            return false;\n-        }\n-        if (!((SunToolkit)curToolkit).isWindowTranslucencySupported()) {\n+        if (curToolkit instanceof SunToolkit sunToolkit) {\n+            if (!sunToolkit.isWindowTranslucencySupported()) {\n+                return false;\n+            }\n+\n+            \/\/ TODO: cache translucency capable GC\n+            return getTranslucencyCapableGC() != null;\n+        } else {\n@@ -568,3 +564,0 @@\n-\n-        \/\/ TODO: cache translucency capable GC\n-        return getTranslucencyCapableGC() != null;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/GraphicsDevice.java","additions":10,"deletions":17,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -695,2 +695,2 @@\n-        if (constraints instanceof GridBagConstraints) {\n-            setConstraints(comp, (GridBagConstraints)constraints);\n+        if (constraints instanceof GridBagConstraints gbc) {\n+            setConstraints(comp, gbc);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/GridBagLayout.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -139,2 +139,1 @@\n-        if (obj instanceof Insets) {\n-            Insets insets = (Insets)obj;\n+        if (obj instanceof Insets insets) {\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Insets.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -952,4 +952,1 @@\n-        if (!(obj instanceof JobAttributes)) {\n-            return false;\n-        }\n-        JobAttributes rhs = (JobAttributes)obj;\n+        if (obj instanceof JobAttributes rhs) {\n@@ -957,7 +954,8 @@\n-        if (fileName == null) {\n-            if (rhs.fileName != null) {\n-                return false;\n-            }\n-        } else {\n-            if (!fileName.equals(rhs.fileName)) {\n-                return false;\n+            if (fileName == null) {\n+                if (rhs.fileName != null) {\n+                    return false;\n+                }\n+            } else {\n+                if (!fileName.equals(rhs.fileName)) {\n+                    return false;\n+                }\n@@ -965,1 +963,0 @@\n-        }\n@@ -967,12 +964,7 @@\n-        if (pageRanges == null) {\n-            if (rhs.pageRanges != null) {\n-                return false;\n-            }\n-        } else {\n-            if (rhs.pageRanges == null ||\n-                    pageRanges.length != rhs.pageRanges.length) {\n-                return false;\n-            }\n-            for (int i = 0; i < pageRanges.length; i++) {\n-                if (pageRanges[i][0] != rhs.pageRanges[i][0] ||\n-                    pageRanges[i][1] != rhs.pageRanges[i][1]) {\n+            if (pageRanges == null) {\n+                if (rhs.pageRanges != null) {\n+                    return false;\n+                }\n+            } else {\n+                if (rhs.pageRanges == null ||\n+                        pageRanges.length != rhs.pageRanges.length) {\n@@ -981,0 +973,6 @@\n+                for (int i = 0; i < pageRanges.length; i++) {\n+                    if (pageRanges[i][0] != rhs.pageRanges[i][0] ||\n+                            pageRanges[i][1] != rhs.pageRanges[i][1]) {\n+                        return false;\n+                    }\n+                }\n@@ -982,1 +980,0 @@\n-        }\n@@ -984,3 +981,8 @@\n-        if (printer == null) {\n-            if (rhs.printer != null) {\n-                return false;\n+            if (printer == null) {\n+                if (rhs.printer != null) {\n+                    return false;\n+                }\n+            } else {\n+                if (!printer.equals(rhs.printer)) {\n+                    return false;\n+                }\n@@ -988,0 +990,13 @@\n+\n+            return (copies == rhs.copies &&\n+                    defaultSelection == rhs.defaultSelection &&\n+                    destination == rhs.destination &&\n+                    dialog == rhs.dialog &&\n+                    fromPage == rhs.fromPage &&\n+                    maxPage == rhs.maxPage &&\n+                    minPage == rhs.minPage &&\n+                    multipleDocumentHandling == rhs.multipleDocumentHandling &&\n+                    prFirst == rhs.prFirst &&\n+                    prLast == rhs.prLast &&\n+                    sides == rhs.sides &&\n+                    toPage == rhs.toPage);\n@@ -989,3 +1004,1 @@\n-            if (!printer.equals(rhs.printer)) {\n-                return false;\n-            }\n+            return false;\n@@ -993,13 +1006,0 @@\n-\n-        return (copies == rhs.copies &&\n-                defaultSelection == rhs.defaultSelection &&\n-                destination == rhs.destination &&\n-                dialog == rhs.dialog &&\n-                fromPage == rhs.fromPage &&\n-                maxPage == rhs.maxPage &&\n-                minPage == rhs.minPage &&\n-                multipleDocumentHandling == rhs.multipleDocumentHandling &&\n-                prFirst == rhs.prFirst &&\n-                prLast == rhs.prLast &&\n-                sides == rhs.sides &&\n-                toPage == rhs.toPage);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/JobAttributes.java","additions":44,"deletions":44,"binary":false,"changes":88,"status":"modified"},{"patch":"@@ -2150,2 +2150,2 @@\n-        if (focusOwner instanceof Container) {\n-            downFocusCycle((Container)focusOwner);\n+        if (focusOwner instanceof Container container) {\n+            downFocusCycle(container);\n@@ -2358,4 +2358,4 @@\n-        if (caughtEx instanceof RuntimeException) {\n-            throw (RuntimeException)caughtEx;\n-        } else if (caughtEx instanceof Error) {\n-            throw (Error)caughtEx;\n+        if (caughtEx instanceof RuntimeException e) {\n+            throw e;\n+        } else if (caughtEx instanceof Error e) {\n+            throw e;\n@@ -2708,4 +2708,4 @@\n-        if (caughtEx instanceof RuntimeException) {\n-            throw (RuntimeException)caughtEx;\n-        } else if (caughtEx instanceof Error) {\n-            throw (Error)caughtEx;\n+        if (caughtEx instanceof RuntimeException e) {\n+            throw e;\n+        } else if (caughtEx instanceof Error e) {\n+            throw e;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/KeyboardFocusManager.java","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -1116,6 +1116,6 @@\n-        if (e instanceof ItemEvent) {\n-            processItemEvent((ItemEvent)e);\n-            return;\n-        } else if (e instanceof ActionEvent) {\n-            processActionEvent((ActionEvent)e);\n-            return;\n+        if (e instanceof ItemEvent itemEvent) {\n+            processItemEvent(itemEvent);\n+        } else if (e instanceof ActionEvent actionEvent) {\n+            processActionEvent(actionEvent);\n+        } else {\n+            super.processEvent(e);\n@@ -1123,1 +1123,0 @@\n-        super.processEvent(e);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/List.java","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -831,2 +831,2 @@\n-            if (cur.getID() == id && cur instanceof ImageMediaEntry\n-                && ((ImageMediaEntry) cur).matches(image, width, height))\n+            if (cur.getID() == id && cur instanceof ImageMediaEntry ime\n+                && ime.matches(image, width, height))\n@@ -852,4 +852,1 @@\n-        if (image instanceof MultiResolutionToolkitImage) {\n-            return ((MultiResolutionToolkitImage) image).getResolutionVariant();\n-        }\n-        return null;\n+        return image instanceof MultiResolutionToolkitImage tki ? tki.getResolutionVariant() : null;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/MediaTracker.java","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -495,2 +495,2 @@\n-            if (mi instanceof Menu) {\n-                Enumeration<MenuShortcut> e = ((Menu)mi).shortcuts();\n+            if (mi instanceof Menu menu) {\n+                Enumeration<MenuShortcut> e = menu.shortcuts();\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Menu.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -201,3 +201,3 @@\n-        final Toolkit toolkit = Toolkit.getDefaultToolkit();\n-        if (toolkit instanceof ComponentFactory) {\n-            return (ComponentFactory) toolkit;\n+        Toolkit toolkit = Toolkit.getDefaultToolkit();\n+        if (toolkit instanceof ComponentFactory componentFactory) {\n+            return componentFactory;\n@@ -288,4 +288,4 @@\n-            if (parent instanceof Component) {\n-                font = ((Component)parent).getFont_NoClientCode();\n-            } else if (parent instanceof MenuComponent) {\n-                font = ((MenuComponent)parent).getFont_NoClientCode();\n+            if (parent instanceof Component component) {\n+                font = component.getFont_NoClientCode();\n+            } else if (parent instanceof MenuComponent menuComponent) {\n+                font = menuComponent.getFont_NoClientCode();\n@@ -615,2 +615,2 @@\n-                if (parent instanceof Accessible) {\n-                    return (Accessible) parent;\n+                if (parent instanceof Accessible accessibleParent) {\n+                    return accessibleParent;\n@@ -661,2 +661,2 @@\n-            if (parent instanceof Component)\n-                return ((Component)parent).getLocale();\n+            if (parent instanceof Component component)\n+                return component.getLocale();\n@@ -1066,1 +1066,3 @@\n-        if (!(localParent instanceof MenuComponent)) {\n+        if (localParent instanceof MenuComponent lpm) {\n+            return lpm.getAccessibleChildIndex(this);\n+        } else {\n@@ -1070,2 +1072,0 @@\n-        MenuComponent localParentMenu = (MenuComponent)localParent;\n-        return localParentMenu.getAccessibleChildIndex(this);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/MenuComponent.java","additions":14,"deletions":14,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -423,1 +423,6 @@\n-            if (!(container instanceof Menu)) {\n+            if (container instanceof Menu menu) {\n+                if (!menu.isEnabled()) {\n+                    return false;\n+                }\n+                container = menu.getParent_NoClientCode();\n+            } else {\n@@ -426,5 +431,0 @@\n-            Menu menu = (Menu)container;\n-            if (!menu.isEnabled()) {\n-                return false;\n-            }\n-            container = menu.getParent_NoClientCode();\n@@ -650,2 +650,2 @@\n-        if (e instanceof ActionEvent) {\n-            processActionEvent((ActionEvent)e);\n+        if (e instanceof ActionEvent actionEvent) {\n+            processActionEvent(actionEvent);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/MenuItem.java","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -167,4 +167,1 @@\n-        if (obj instanceof MenuShortcut) {\n-            return equals( (MenuShortcut) obj );\n-        }\n-        return false;\n+        return obj instanceof MenuShortcut shortcut && equals(shortcut);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/MenuShortcut.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -60,2 +60,1 @@\n-            } else if (o instanceof Component) {\n-                Component c = (Component)o;\n+            } else if (o instanceof Component c) {\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/ModalEventFilter.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -88,2 +88,2 @@\n-        if (toolkit instanceof ComponentFactory) {\n-            deviceNum = ((ComponentFactory) toolkit).getMouseInfoPeer().fillPointWithCoords(point);\n+        if (toolkit instanceof ComponentFactory componentFactory) {\n+            deviceNum = componentFactory.getMouseInfoPeer().fillPointWithCoords(point);\n@@ -138,2 +138,2 @@\n-        if (prop instanceof Integer) {\n-            return ((Integer)prop).intValue();\n+        if (prop instanceof Integer i) {\n+            return i;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/MouseInfo.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -1333,1 +1333,10 @@\n-        if (!(obj instanceof PageAttributes)) {\n+        if (obj instanceof PageAttributes rhs) {\n+            return (color == rhs.color &&\n+                    media == rhs.media &&\n+                    orientationRequested == rhs.orientationRequested &&\n+                    origin == rhs.origin &&\n+                    printQuality == rhs.printQuality &&\n+                    printerResolution[0] == rhs.printerResolution[0] &&\n+                    printerResolution[1] == rhs.printerResolution[1] &&\n+                    printerResolution[2] == rhs.printerResolution[2]);\n+        } else {\n@@ -1336,11 +1345,0 @@\n-\n-        PageAttributes rhs = (PageAttributes)obj;\n-\n-        return (color == rhs.color &&\n-                media == rhs.media &&\n-                orientationRequested == rhs.orientationRequested &&\n-                origin == rhs.origin &&\n-                printQuality == rhs.printQuality &&\n-                printerResolution[0] == rhs.printerResolution[0] &&\n-                printerResolution[1] == rhs.printerResolution[1] &&\n-                printerResolution[2] == rhs.printerResolution[2]);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/PageAttributes.java","additions":10,"deletions":12,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -217,2 +217,1 @@\n-        if (obj instanceof Point) {\n-            Point pt = (Point)obj;\n+        if (obj instanceof Point pt) {\n@@ -220,0 +219,2 @@\n+        } else {\n+            return super.equals(obj);\n@@ -221,1 +222,0 @@\n-        return super.equals(obj);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Point.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -166,11 +166,11 @@\n-        if (!(localParent instanceof Component)) {\n-            throw new IllegalArgumentException(\n-                \"PopupMenus with non-Component parents cannot be shown\");\n-        }\n-        Component compParent = (Component)localParent;\n-        \/\/Fixed 6278745: Incorrect exception throwing in PopupMenu.show() method\n-        \/\/Exception was not thrown if compParent was not equal to origin and\n-        \/\/was not Container\n-        if (compParent != origin) {\n-            if (compParent instanceof Container) {\n-                if (!((Container)compParent).isAncestorOf(origin)) {\n+\n+        if (localParent instanceof Component compParent) {\n+            \/\/Fixed 6278745: Incorrect exception throwing in PopupMenu.show() method\n+            \/\/Exception was not thrown if compParent was not equal to origin and\n+            \/\/was not Container\n+            if (compParent != origin) {\n+                if (compParent instanceof Container container) {\n+                    if (!container.isAncestorOf(origin)) {\n+                        throw new IllegalArgumentException(\"origin not in parent's hierarchy\");\n+                    }\n+                } else {\n@@ -179,2 +179,0 @@\n-            } else {\n-                throw new IllegalArgumentException(\"origin not in parent's hierarchy\");\n@@ -182,11 +180,5 @@\n-        }\n-        if (compParent.peer == null || !compParent.isShowing()) {\n-            throw new RuntimeException(\"parent not showing on screen\");\n-        }\n-        if (peer == null) {\n-            addNotify();\n-        }\n-        synchronized (getTreeLock()) {\n-            if (peer != null) {\n-                ((PopupMenuPeer)peer).show(\n-                    new Event(origin, 0, Event.MOUSE_DOWN, x, y, 0, 0));\n+            if (compParent.peer == null || !compParent.isShowing()) {\n+                throw new RuntimeException(\"parent not showing on screen\");\n+            }\n+            if (peer == null) {\n+                addNotify();\n@@ -194,0 +186,9 @@\n+            synchronized (getTreeLock()) {\n+                if (peer != null) {\n+                    ((PopupMenuPeer) peer).show(\n+                            new Event(origin, 0, Event.MOUSE_DOWN, x, y, 0, 0));\n+                }\n+            }\n+        } else {\n+            throw new IllegalArgumentException(\n+                    \"PopupMenus with non-Component parents cannot be shown\");\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/PopupMenu.java","additions":25,"deletions":24,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -1164,2 +1164,2 @@\n-        if (r instanceof Rectangle) {\n-            return intersection((Rectangle) r);\n+        if (r instanceof Rectangle rect) {\n+            return intersection(rect);\n@@ -1177,2 +1177,2 @@\n-        if (r instanceof Rectangle) {\n-            return union((Rectangle) r);\n+        if (r instanceof Rectangle rect) {\n+            return union(rect);\n@@ -1198,2 +1198,1 @@\n-        if (obj instanceof Rectangle) {\n-            Rectangle r = (Rectangle)obj;\n+        if (obj instanceof Rectangle r) {\n@@ -1204,0 +1203,2 @@\n+        } else {\n+            return super.equals(obj);\n@@ -1205,1 +1206,0 @@\n-        return super.equals(obj);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Rectangle.java","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -1293,2 +1293,2 @@\n-        if (o instanceof RenderingHints) {\n-            return hintmap.equals(((RenderingHints) o).hintmap);\n+        if (o instanceof RenderingHints hints) {\n+            return hintmap.equals(hints.hintmap);\n@@ -1297,0 +1297,2 @@\n+        } else {\n+            return false;\n@@ -1298,1 +1300,0 @@\n-        return false;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/RenderingHints.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -136,3 +136,2 @@\n-        Toolkit toolkit = Toolkit.getDefaultToolkit();\n-        if (toolkit instanceof ComponentFactory) {\n-            peer = ((ComponentFactory)toolkit).createRobot(screen);\n+        if (Toolkit.getDefaultToolkit() instanceof ComponentFactory componentFactory) {\n+            peer = componentFactory.createRobot(screen);\n@@ -148,3 +147,4 @@\n-        if (Toolkit.getDefaultToolkit().areExtraMouseButtonsEnabled()){\n-            if (Toolkit.getDefaultToolkit() instanceof SunToolkit) {\n-                final int buttonsNumber = ((SunToolkit)(Toolkit.getDefaultToolkit())).getNumberOfButtons();\n+        Toolkit defaultToolkit = Toolkit.getDefaultToolkit();\n+        if (defaultToolkit.areExtraMouseButtonsEnabled()){\n+            if (defaultToolkit instanceof SunToolkit stk) {\n+                final int buttonsNumber = stk.getNumberOfButtons();\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Robot.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -1109,3 +1109,4 @@\n-        if (e instanceof AdjustmentEvent) {\n-            processAdjustmentEvent((AdjustmentEvent)e);\n-            return;\n+        if (e instanceof AdjustmentEvent adjustmentEvent) {\n+            processAdjustmentEvent(adjustmentEvent);\n+        } else {\n+            super.processEvent(e);\n@@ -1113,1 +1114,0 @@\n-        super.processEvent(e);\n@@ -1343,2 +1343,2 @@\n-            if (n instanceof Integer) {\n-                setValue(n.intValue());\n+            if (n instanceof Integer i) {\n+                setValue(i);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Scrollbar.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -170,3 +170,1 @@\n-                    if (Thread.currentThread() instanceof EventDispatchThread) {\n-                        EventDispatchThread edt = (EventDispatchThread)\n-                                Thread.currentThread();\n+                    if (Thread.currentThread() instanceof EventDispatchThread edt) {\n@@ -216,1 +214,1 @@\n-    private static final boolean isOwnerAppContextDisposed(SequencedEvent se) {\n+    private static boolean isOwnerAppContextDisposed(SequencedEvent se) {\n@@ -219,2 +217,2 @@\n-            if (target instanceof Component) {\n-                return ((Component)target).appContext.isDisposed();\n+            if (target instanceof Component component) {\n+                return component.appContext.isDisposed();\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/SequencedEvent.java","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -342,0 +342,1 @@\n+\n@@ -343,19 +344,20 @@\n-        if (!(buf instanceof DataBufferInt)) {\n-            throw new AssertionError(\"Overlay image DataBuffer is of invalid type == \"+buf.getClass().getName());\n-        }\n-        int numBanks = buf.getNumBanks();\n-        if (numBanks!=1) {\n-            throw new AssertionError(\"Invalid number of banks ==\"+numBanks+\" in overlay image DataBuffer\");\n-        }\n-        if (!(image.getSampleModel() instanceof SinglePixelPackedSampleModel)) {\n-            throw new AssertionError(\"Overlay image has invalid sample model == \"+image.getSampleModel().getClass().getName());\n-        }\n-        SinglePixelPackedSampleModel sm = (SinglePixelPackedSampleModel)image.getSampleModel();\n-        int scanlineStride = sm.getScanlineStride();\n-        Rectangle rect = image.getRaster().getBounds();\n-        \/\/ Note that we steal the data array here, but just for reading\n-        \/\/ so we do not need to mark the DataBuffer dirty...\n-        int[] data = SunWritableRaster.stealData((DataBufferInt)buf, 0);\n-        synchronized(SplashScreen.class) {\n-            checkVisible();\n-            _update(splashPtr, data, rect.x, rect.y, rect.width, rect.height, scanlineStride);\n+        if (buf instanceof DataBufferInt dbi) {\n+            int numBanks = buf.getNumBanks();\n+            if (numBanks != 1) {\n+                throw new AssertionError(\"Invalid number of banks ==\" + numBanks + \" in overlay image DataBuffer\");\n+            }\n+\n+            if (image.getSampleModel() instanceof SinglePixelPackedSampleModel sm) {\n+                Rectangle rect = image.getRaster().getBounds();\n+                \/\/ Note that we steal the data array here, but just for reading\n+                \/\/ so we do not need to mark the DataBuffer dirty...\n+                int[] data = SunWritableRaster.stealData(dbi, 0);\n+                synchronized (SplashScreen.class) {\n+                    checkVisible();\n+                    _update(splashPtr, data, rect.x, rect.y, rect.width, rect.height, sm.getScanlineStride());\n+                }\n+            } else {\n+                throw new AssertionError(\"Overlay image has invalid sample model == \" + image.getSampleModel().getClass().getName());\n+            }\n+        } else {\n+            throw new AssertionError(\"Overlay image DataBuffer is of invalid type == \" + buf.getClass().getName());\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/SplashScreen.java","additions":21,"deletions":19,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -222,1 +222,1 @@\n-        if (toolkit instanceof SunToolkit) {\n+        if (toolkit instanceof SunToolkit stk) {\n@@ -225,2 +225,2 @@\n-            return ((SunToolkit)toolkit).isTraySupported();\n-        } else if (toolkit instanceof HeadlessToolkit) {\n+            return (stk.isTraySupported());\n+        } else if (toolkit instanceof HeadlessToolkit htk) {\n@@ -229,1 +229,1 @@\n-            return ((HeadlessToolkit)toolkit).isTraySupported();\n+            return htk.isTraySupported();\n@@ -504,4 +504,4 @@\n-            if (toolkit instanceof SunToolkit) {\n-                peer = ((SunToolkit)Toolkit.getDefaultToolkit()).createSystemTray(this);\n-            } else if (toolkit instanceof HeadlessToolkit) {\n-                peer = ((HeadlessToolkit)Toolkit.getDefaultToolkit()).createSystemTray(this);\n+            if (toolkit instanceof SunToolkit stk) {\n+                peer = stk.createSystemTray(this);\n+            } else if (toolkit instanceof HeadlessToolkit htk) {\n+                peer = htk.createSystemTray(this);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/SystemTray.java","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -194,3 +194,2 @@\n-        Toolkit defaultToolkit = Toolkit.getDefaultToolkit();\n-        if (defaultToolkit instanceof SunToolkit) {\n-            peer = ((SunToolkit) defaultToolkit).createTaskbarPeer(this);\n+        if (Toolkit.getDefaultToolkit() instanceof SunToolkit stk) {\n+            peer = stk.createTaskbarPeer(this);\n@@ -242,3 +241,4 @@\n-        Toolkit defaultToolkit = Toolkit.getDefaultToolkit();\n-        if (defaultToolkit instanceof SunToolkit) {\n-            return ((SunToolkit)defaultToolkit).isTaskbarSupported();\n+        if (Toolkit.getDefaultToolkit() instanceof SunToolkit stk) {\n+            return stk.isTaskbarSupported();\n+        } else {\n+            return false;\n@@ -246,1 +246,0 @@\n-        return false;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Taskbar.java","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -158,1 +158,0 @@\n-                Toolkit toolkit = Toolkit.getDefaultToolkit();\n@@ -160,3 +159,2 @@\n-                if (toolkit instanceof InputMethodSupport) {\n-                    shouldEnable = ((InputMethodSupport)toolkit)\n-                      .enableInputMethodsForTextComponent();\n+                if (Toolkit.getDefaultToolkit() instanceof InputMethodSupport ims) {\n+                    shouldEnable = ims.enableInputMethodsForTextComponent();\n@@ -690,3 +688,4 @@\n-        if (e instanceof TextEvent) {\n-            processTextEvent((TextEvent)e);\n-            return;\n+        if (e instanceof TextEvent textEvent) {\n+            processTextEvent(textEvent);\n+        } else {\n+            super.processEvent(e);\n@@ -694,1 +693,0 @@\n-        super.processEvent(e);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/TextComponent.java","additions":6,"deletions":8,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -633,3 +633,4 @@\n-        if (e instanceof ActionEvent) {\n-            processActionEvent((ActionEvent)e);\n-            return;\n+        if (e instanceof ActionEvent actionEvent) {\n+            processActionEvent(actionEvent);\n+        } else {\n+            super.processEvent(e);\n@@ -637,1 +638,0 @@\n-        super.processEvent(e);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/TextField.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -81,1 +81,1 @@\n-        if (raster instanceof IntegerInterleavedRaster &&\n+        if (raster instanceof IntegerInterleavedRaster iir &&\n@@ -84,1 +84,0 @@\n-            IntegerInterleavedRaster iir = (IntegerInterleavedRaster) raster;\n@@ -88,2 +87,1 @@\n-        } else if (raster instanceof ByteInterleavedRaster) {\n-            ByteInterleavedRaster bir = (ByteInterleavedRaster) raster;\n+        } else if (raster instanceof ByteInterleavedRaster bir) {\n@@ -104,7 +102,1 @@\n-        if (cm instanceof IndexColorModel) {\n-            IndexColorModel icm = (IndexColorModel) cm;\n-            if (icm.getMapSize() <= 256) {\n-                return true;\n-            }\n-        }\n-        return false;\n+        return cm instanceof IndexColorModel icm && icm.getMapSize() <= 256;\n@@ -114,2 +106,1 @@\n-        if (cm instanceof DirectColorModel) {\n-            DirectColorModel dcm = (DirectColorModel) cm;\n+        if (cm instanceof DirectColorModel dcm) {\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/TexturePaintContext.java","additions":4,"deletions":13,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -1535,3 +1535,2 @@\n-        if (this instanceof HeadlessToolkit) {\n-            return ((HeadlessToolkit)this).getUnderlyingToolkit()\n-                .getDesktopProperty(propertyName);\n+        if (this instanceof HeadlessToolkit htk) {\n+            return htk.getUnderlyingToolkit().getDesktopProperty(propertyName);\n@@ -1562,2 +1561,2 @@\n-        if (value instanceof RenderingHints) {\n-            value = ((RenderingHints)value).clone();\n+        if (value instanceof RenderingHints hints) {\n+            value = hints.clone();\n@@ -1581,3 +1580,2 @@\n-        if (this instanceof HeadlessToolkit) {\n-            ((HeadlessToolkit)this).getUnderlyingToolkit()\n-                .setDesktopProperty(name, newValue);\n+        if (this instanceof HeadlessToolkit htk) {\n+            htk.getUnderlyingToolkit().setDesktopProperty(name, newValue);\n@@ -1765,2 +1763,2 @@\n-        if (l instanceof AWTEventListenerProxy) {\n-            localL = ((AWTEventListenerProxy)l).getListener();\n+        if (l instanceof AWTEventListenerProxy proxy) {\n+            localL = proxy.getListener();\n@@ -2033,3 +2031,2 @@\n-        if (this instanceof HeadlessToolkit) {\n-            ((HeadlessToolkit)this).getUnderlyingToolkit()\n-                .notifyAWTEventListeners(theEvent);\n+        if (this instanceof HeadlessToolkit htk) {\n+            htk.getUnderlyingToolkit().notifyAWTEventListeners(theEvent);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Toolkit.java","additions":10,"deletions":13,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -701,4 +701,4 @@\n-                if (toolkit instanceof SunToolkit) {\n-                    peer = ((SunToolkit)Toolkit.getDefaultToolkit()).createTrayIcon(this);\n-                } else if (toolkit instanceof HeadlessToolkit) {\n-                    peer = ((HeadlessToolkit)Toolkit.getDefaultToolkit()).createTrayIcon(this);\n+                if (toolkit instanceof SunToolkit stk) {\n+                    peer = stk.createTrayIcon(this);\n+                } else if (toolkit instanceof HeadlessToolkit htk) {\n+                    peer = htk.createTrayIcon(this);\n@@ -740,1 +740,1 @@\n-        if (e instanceof MouseEvent) {\n+        if (e instanceof MouseEvent mouseEvent) {\n@@ -745,1 +745,1 @@\n-                processMouseEvent((MouseEvent)e);\n+                processMouseEvent(mouseEvent);\n@@ -748,1 +748,1 @@\n-                processMouseMotionEvent((MouseEvent)e);\n+                processMouseMotionEvent(mouseEvent);\n@@ -753,2 +753,2 @@\n-        } else if (e instanceof ActionEvent) {\n-            processActionEvent((ActionEvent)e);\n+        } else if (e instanceof ActionEvent actionEvent) {\n+            processActionEvent(actionEvent);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/TrayIcon.java","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -66,0 +66,1 @@\n+import javax.swing.*;\n@@ -2035,1 +2036,1 @@\n-        if (e instanceof WindowEvent) {\n+        if (e instanceof WindowEvent windowEvent) {\n@@ -2044,1 +2045,1 @@\n-                    processWindowEvent((WindowEvent)e);\n+                    processWindowEvent(windowEvent);\n@@ -2048,1 +2049,1 @@\n-                    processWindowFocusEvent((WindowEvent)e);\n+                    processWindowFocusEvent(windowEvent);\n@@ -2051,1 +2052,1 @@\n-                    processWindowStateEvent((WindowEvent)e);\n+                    processWindowStateEvent(windowEvent);\n@@ -3087,2 +3088,2 @@\n-                if (obj instanceof Image) {\n-                    icons.add((Image)obj);\n+                if (obj instanceof Image image) {\n+                    icons.add(image);\n@@ -3950,4 +3951,4 @@\n-                if (gg instanceof Graphics2D) {\n-                    gg.setColor(getBackground());\n-                    ((Graphics2D)gg).setComposite(AlphaComposite.getInstance(AlphaComposite.SRC));\n-                    gg.fillRect(0, 0, getWidth(), getHeight());\n+                if (gg instanceof Graphics2D g2d) {\n+                    g2d.setColor(getBackground());\n+                    g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC));\n+                    g2d.fillRect(0, 0, getWidth(), getHeight());\n@@ -3970,2 +3971,1 @@\n-            javax.swing.JComponent content =\n-                (c instanceof javax.swing.JComponent) ? (javax.swing.JComponent)c : null;\n+            JComponent content = c instanceof JComponent jComponent ? jComponent : null;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/Window.java","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -222,2 +222,2 @@\n-        } else if (l instanceof DnDEventMulticaster) {\n-            return ((DnDEventMulticaster)l).remove(oldl);\n+        } else if (l instanceof DnDEventMulticaster multicaster) {\n+            return multicaster.remove(oldl);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/dnd\/DnDEventMulticaster.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -195,1 +195,1 @@\n-        if (!(toolkit instanceof ComponentFactory)) {\n+        if (!(toolkit instanceof ComponentFactory componentFactory)) {\n@@ -198,2 +198,1 @@\n-        DragSourceContextPeer dscp = ((ComponentFactory) toolkit).\n-                createDragSourceContextPeer(trigger);\n+        DragSourceContextPeer dscp = componentFactory.createDragSourceContextPeer(trigger);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/dnd\/DragSourceContext.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -513,3 +513,3 @@\n-        if (peer instanceof DropTargetPeer) {\n-            nativePeer = (DropTargetPeer) peer;\n-            ((DropTargetPeer)peer).addDropTarget(this);\n+        if (peer instanceof DropTargetPeer dropTargetPeer) {\n+            nativePeer = dropTargetPeer;\n+            dropTargetPeer.addDropTarget(this);\n@@ -796,3 +796,3 @@\n-        if (!(component instanceof Autoscroll)) return;\n-\n-        autoScroller = createDropTargetAutoScroller(component, p);\n+        if (component instanceof Autoscroll) {\n+            autoScroller = createDropTargetAutoScroller(component, p);\n+        }\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/dnd\/DropTarget.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -133,1 +133,1 @@\n-        return (source instanceof Component) ? (Component)source : null;\n+        return source instanceof Component component ? component : null;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/event\/ComponentEvent.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -129,1 +129,1 @@\n-        return (source instanceof Container) ? (Container)source : null;\n+        return source instanceof Container container ? container : null;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/event\/ContainerEvent.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -263,1 +263,1 @@\n-        return (source instanceof Component) ? (Component)source : null;\n+        return source instanceof Component component ? component : null;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/event\/HierarchyEvent.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -311,2 +311,2 @@\n-                    if (t instanceof Exception) {\n-                        exception = (Exception) t;\n+                    if (t instanceof Exception e) {\n+                        exception = e;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/event\/InvocationEvent.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -402,3 +402,2 @@\n-        final Toolkit tk = Toolkit.getDefaultToolkit();\n-        if (tk instanceof SunToolkit) {\n-            cachedNumberOfButtons = ((SunToolkit)tk).getNumberOfButtons();\n+        if (Toolkit.getDefaultToolkit() instanceof SunToolkit stk) {\n+            cachedNumberOfButtons = stk.getNumberOfButtons();\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/event\/MouseEvent.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -317,1 +317,1 @@\n-        return (source instanceof Window) ? (Window)source : null;\n+        return source instanceof Window window ? window : null;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/event\/WindowEvent.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -440,2 +440,2 @@\n-                if (value instanceof Annotation) {\n-                    value = ((Annotation)value).getValue();\n+                if (value instanceof Annotation annotation) {\n+                    value = annotation.getValue();\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/font\/StyledParagraph.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -148,1 +148,1 @@\n-        return (obj instanceof TextHitInfo) && equals((TextHitInfo)obj);\n+        return obj instanceof TextHitInfo textHitInfo && equals(textHitInfo);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/font\/TextHitInfo.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1067,1 +1067,1 @@\n-            if (graphicOrFont instanceof GraphicAttribute) {\n+            if (graphicOrFont instanceof GraphicAttribute graphicAttribute) {\n@@ -1073,1 +1073,0 @@\n-                GraphicAttribute graphicAttribute = (GraphicAttribute) graphicOrFont;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/font\/TextLine.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -3925,1 +3925,4 @@\n-        if (!(obj instanceof AffineTransform)) {\n+        if (obj instanceof AffineTransform a) {\n+            return ((m00 == a.m00) && (m01 == a.m01) && (m02 == a.m02) &&\n+                    (m10 == a.m10) && (m11 == a.m11) && (m12 == a.m12));\n+        } else {\n@@ -3928,5 +3931,0 @@\n-\n-        AffineTransform a = (AffineTransform)obj;\n-\n-        return ((m00 == a.m00) && (m01 == a.m01) && (m02 == a.m02) &&\n-                (m10 == a.m10) && (m11 == a.m11) && (m12 == a.m12));\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/geom\/AffineTransform.java","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -1481,3 +1481,1 @@\n-        }\n-        if (obj instanceof Arc2D) {\n-            Arc2D a2d = (Arc2D) obj;\n+        } else if (obj instanceof Arc2D a2d) {\n@@ -1491,0 +1489,2 @@\n+        } else {\n+            return false;\n@@ -1492,1 +1492,0 @@\n-        return false;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/geom\/Arc2D.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -123,2 +123,2 @@\n-        if (s instanceof Area) {\n-            curves = ((Area) s).curves;\n+        if (s instanceof Area area) {\n+            curves = area.curves;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/geom\/Area.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -457,3 +457,1 @@\n-        }\n-        if (obj instanceof Ellipse2D) {\n-            Ellipse2D e2d = (Ellipse2D) obj;\n+        } else if (obj instanceof Ellipse2D e2d) {\n@@ -464,0 +462,2 @@\n+        } else {\n+            return false;\n@@ -465,1 +465,0 @@\n-        return false;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/geom\/Ellipse2D.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -277,2 +277,1 @@\n-            if (s instanceof Path2D) {\n-                Path2D p2d = (Path2D) s;\n+            if (s instanceof Path2D p2d) {\n@@ -1163,2 +1162,1 @@\n-            if (s instanceof Path2D) {\n-                Path2D p2d = (Path2D) s;\n+            if (s instanceof Path2D p2d) {\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/geom\/Path2D.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -425,2 +425,1 @@\n-        if (obj instanceof Point2D) {\n-            Point2D p2d = (Point2D) obj;\n+        if (obj instanceof Point2D p2d) {\n@@ -428,0 +427,2 @@\n+        } else {\n+            return super.equals(obj);\n@@ -429,1 +430,0 @@\n-        return super.equals(obj);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/geom\/Point2D.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -923,3 +923,1 @@\n-        }\n-        if (obj instanceof Rectangle2D) {\n-            Rectangle2D r2d = (Rectangle2D) obj;\n+        } else if (obj instanceof Rectangle2D r2d) {\n@@ -930,0 +928,2 @@\n+        } else {\n+            return false;\n@@ -931,1 +931,0 @@\n-        return false;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/geom\/Rectangle2D.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -672,3 +672,1 @@\n-        }\n-        if (obj instanceof RoundRectangle2D) {\n-            RoundRectangle2D rr2d = (RoundRectangle2D) obj;\n+        } else if (obj instanceof RoundRectangle2D rr2d) {\n@@ -681,0 +679,2 @@\n+        } else {\n+            return false;\n@@ -682,1 +682,0 @@\n-        return false;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/geom\/RoundRectangle2D.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -108,2 +108,5 @@\n-        if (!(outpixbuf instanceof int[])) {\n-            outpixbuf = new int[destWidth];\n+        int[] outpix;\n+        if (outpixbuf instanceof int[] ints) {\n+            outpix = ints;\n+        } else {\n+            outpix = new int[destWidth];\n@@ -111,1 +114,0 @@\n-        int[] outpix = (int[]) outpixbuf;\n@@ -174,2 +176,2 @@\n-                    if (pixels instanceof byte[]) {\n-                        rgb = ((byte[]) pixels)[off + sx] & 0xff;\n+                    if (pixels instanceof byte[] bytes) {\n+                        rgb = bytes[off + sx] & 0xff;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/AreaAveragingScaleFilter.java","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -640,2 +640,2 @@\n-                if (key instanceof String) {\n-                    this.properties.put((String) key, properties.get(key));\n+                if (key instanceof String s) {\n+                    this.properties.put(s, properties.get(key));\n@@ -662,2 +662,1 @@\n-                if (sm instanceof ComponentSampleModel &&\n-                    ((ComponentSampleModel)sm).getPixelStride() != numBands) {\n+                if (sm instanceof ComponentSampleModel csm && csm.getPixelStride() != numBands) {\n@@ -665,2 +664,2 @@\n-                } else if (raster instanceof ByteComponentRaster &&\n-                       raster.getNumBands() == 1 &&\n+                } else if (raster instanceof ByteComponentRaster bcr &&\n+                       bcr.getNumBands() == 1 &&\n@@ -668,1 +667,1 @@\n-                       ((ByteComponentRaster)raster).getPixelStride() == 1) {\n+                       bcr.getPixelStride() == 1) {\n@@ -670,2 +669,2 @@\n-                } else if (raster instanceof ShortComponentRaster &&\n-                       raster.getNumBands() == 1 &&\n+                } else if (raster instanceof ShortComponentRaster scr &&\n+                       scr.getNumBands() == 1 &&\n@@ -673,1 +672,1 @@\n-                       ((ShortComponentRaster)raster).getPixelStride() == 1) {\n+                       scr.getPixelStride() == 1) {\n@@ -682,1 +681,1 @@\n-        if ((raster instanceof IntegerComponentRaster) &&\n+        if ((raster instanceof IntegerComponentRaster iraster) &&\n@@ -684,2 +683,0 @@\n-            IntegerComponentRaster iraster =\n-                (IntegerComponentRaster) raster;\n@@ -691,1 +688,1 @@\n-                cm instanceof DirectColorModel  &&\n+                cm instanceof DirectColorModel dcm &&\n@@ -695,1 +692,0 @@\n-                DirectColorModel dcm = (DirectColorModel) cm;\n@@ -722,1 +718,1 @@\n-        else if ((cm instanceof IndexColorModel) && (numBands == 1) &&\n+        else if ((cm instanceof IndexColorModel icm) && (numBands == 1) &&\n@@ -726,1 +722,0 @@\n-            IndexColorModel icm = (IndexColorModel) cm;\n@@ -732,2 +727,1 @@\n-            else if (raster instanceof ByteComponentRaster) {\n-                ByteComponentRaster braster = (ByteComponentRaster) raster;\n+            else if (raster instanceof ByteComponentRaster braster) {\n@@ -740,1 +734,1 @@\n-                 && (cm instanceof DirectColorModel)\n+                 && (cm instanceof DirectColorModel dcm)\n@@ -745,1 +739,0 @@\n-            DirectColorModel dcm = (DirectColorModel) cm;\n@@ -759,2 +752,2 @@\n-        else if ((raster instanceof ByteComponentRaster)\n-                 && (cm instanceof ComponentColorModel)\n+        else if ((raster instanceof ByteComponentRaster braster)\n+                 && (cm instanceof ComponentColorModel ccm)\n@@ -762,1 +755,1 @@\n-                 && (raster.getSampleModel() instanceof PixelInterleavedSampleModel)\n+                 && (raster.getSampleModel() instanceof PixelInterleavedSampleModel csm)\n@@ -765,4 +758,0 @@\n-            ComponentColorModel ccm = (ComponentColorModel) cm;\n-            PixelInterleavedSampleModel csm =\n-                (PixelInterleavedSampleModel)raster.getSampleModel();\n-            ByteComponentRaster braster = (ByteComponentRaster) raster;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/BufferedImage.java","additions":17,"deletions":28,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -115,2 +115,1 @@\n-    public ColorConvertOp (ColorSpace cspace, RenderingHints hints)\n-    {\n+    public ColorConvertOp (ColorSpace cspace, RenderingHints hints) {\n@@ -120,2 +119,0 @@\n-        if (cspace instanceof ICC_ColorSpace) {\n-            profileList = new ICC_Profile [1];    \/* 1 profile in the list *\/\n@@ -123,5 +120,5 @@\n-            profileList [0] = ((ICC_ColorSpace) cspace).getProfile();\n-        }\n-        else {\n-            CSList = new ColorSpace[1]; \/* non-ICC case: 1 ColorSpace in list *\/\n-            CSList[0] = cspace;\n+        if (cspace instanceof ICC_ColorSpace icc) {\n+            \/* 1 profile in the list *\/\n+            profileList = new ICC_Profile[]{ icc.getProfile() };\n+        } else {\n+            CSList = new ColorSpace[]{ cspace }; \/* non-ICC case: 1 ColorSpace in list *\/\n@@ -129,0 +126,1 @@\n+\n@@ -156,3 +154,0 @@\n-        if ((srcCspace instanceof ICC_ColorSpace) &&\n-            (dstCspace instanceof ICC_ColorSpace)) {\n-            profileList = new ICC_Profile [2];    \/* 2 profiles in the list *\/\n@@ -160,2 +155,4 @@\n-            profileList [0] = ((ICC_ColorSpace) srcCspace).getProfile();\n-            profileList [1] = ((ICC_ColorSpace) dstCspace).getProfile();\n+        if ((srcCspace instanceof ICC_ColorSpace srcICC) &&\n+            (dstCspace instanceof ICC_ColorSpace dstICC)) {\n+            \/* 2 profiles in the list *\/\n+            profileList = new ICC_Profile[]{ srcICC.getProfile(), dstICC.getProfile() };\n@@ -166,3 +163,1 @@\n-            CSList = new ColorSpace[2];\n-            CSList[0] = srcCspace;\n-            CSList[1] = dstCspace;\n+            CSList = new ColorSpace[]{ srcCspace, dstCspace };\n@@ -170,0 +165,1 @@\n+\n@@ -253,2 +249,1 @@\n-        if (src.getColorModel() instanceof IndexColorModel) {\n-            IndexColorModel icm = (IndexColorModel) src.getColorModel();\n+        if (src.getColorModel() instanceof IndexColorModel icm) {\n@@ -782,1 +777,4 @@\n-            if (!(srcColorSpace instanceof ICC_ColorSpace)) {\n+            if (srcColorSpace instanceof ICC_ColorSpace icc) {\n+                nonICCSrc = false;\n+                srcProfile = icc.getProfile();\n+            } else {\n@@ -785,3 +783,0 @@\n-            } else {\n-                nonICCSrc = false;\n-                srcProfile = ((ICC_ColorSpace) srcColorSpace).getProfile();\n@@ -789,1 +784,4 @@\n-            if (!(dstColorSpace instanceof ICC_ColorSpace)) {\n+            if (dstColorSpace instanceof ICC_ColorSpace icc) {\n+                nonICCDst = false;\n+                dstProfile = icc.getProfile();\n+            } else {\n@@ -792,3 +790,0 @@\n-            } else {\n-                nonICCDst = false;\n-                dstProfile = ((ICC_ColorSpace) dstColorSpace).getProfile();\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/ColorConvertOp.java","additions":22,"deletions":27,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -430,1 +430,1 @@\n-                   (colorSpace instanceof ICC_ColorSpace) &&\n+                   (colorSpace instanceof ICC_ColorSpace ics) &&\n@@ -436,1 +436,0 @@\n-            ICC_ColorSpace ics = (ICC_ColorSpace) colorSpace;\n@@ -1753,2 +1752,2 @@\n-        if (pixel instanceof int[]) {\n-            intpixel = (int[])pixel;\n+        if (pixel instanceof int[] ints) {\n+            intpixel = ints;\n@@ -2942,3 +2941,10 @@\n-        if (!(obj instanceof ComponentColorModel)) {\n-            return false;\n-        }\n+        if (obj instanceof ComponentColorModel cm) {\n+            if (supportsAlpha != cm.hasAlpha() ||\n+                    isAlphaPremultiplied != cm.isAlphaPremultiplied() ||\n+                    pixel_bits != cm.getPixelSize() ||\n+                    transparency != cm.getTransparency() ||\n+                    numComponents != cm.getNumComponents() ||\n+                    (!(colorSpace.equals(cm.colorSpace))) ||\n+                    transferType != cm.transferType) {\n+                return false;\n+            }\n@@ -2946,11 +2952,3 @@\n-        ComponentColorModel cm = (ComponentColorModel) obj;\n-        if (supportsAlpha != cm.hasAlpha() ||\n-            isAlphaPremultiplied != cm.isAlphaPremultiplied() ||\n-            pixel_bits != cm.getPixelSize() ||\n-            transparency != cm.getTransparency() ||\n-            numComponents != cm.getNumComponents() ||\n-            (!(colorSpace.equals(cm.colorSpace))) ||\n-            transferType != cm.transferType)\n-        {\n-            return false;\n-        }\n+            if (!(Arrays.equals(nBits, cm.getComponentSize()))) {\n+                return false;\n+            }\n@@ -2958,1 +2956,2 @@\n-        if (!(Arrays.equals(nBits, cm.getComponentSize()))) {\n+            return true;\n+        } else {\n@@ -2961,2 +2960,0 @@\n-\n-        return true;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/ComponentColorModel.java","additions":18,"deletions":21,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -1188,1 +1188,11 @@\n-        if (!(o instanceof ComponentSampleModel that)) {\n+        if (o instanceof ComponentSampleModel that) {\n+            return this.width == that.width &&\n+                this.height == that.height &&\n+                this.numBands == that.numBands &&\n+                this.dataType == that.dataType &&\n+                Arrays.equals(this.bandOffsets, that.bandOffsets) &&\n+                Arrays.equals(this.bankIndices, that.bankIndices) &&\n+                this.numBanks == that.numBanks &&\n+                this.scanlineStride == that.scanlineStride &&\n+                this.pixelStride == that.pixelStride;\n+        } else {\n@@ -1191,10 +1201,0 @@\n-\n-        return this.width == that.width &&\n-            this.height == that.height &&\n-            this.numBands == that.numBands &&\n-            this.dataType == that.dataType &&\n-            Arrays.equals(this.bandOffsets, that.bandOffsets) &&\n-            Arrays.equals(this.bankIndices, that.bankIndices) &&\n-            this.numBanks == that.numBanks &&\n-            this.scanlineStride == that.scanlineStride &&\n-            this.pixelStride == that.pixelStride;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/ComponentSampleModel.java","additions":11,"deletions":11,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -171,2 +171,1 @@\n-        if (srcCM instanceof IndexColorModel) {\n-            IndexColorModel icm = (IndexColorModel) srcCM;\n+        if (srcCM instanceof IndexColorModel icm) {\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/ConvolveOp.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -496,2 +496,2 @@\n-        if (obj instanceof int[]) {\n-            return (int[])obj;\n+        if (obj instanceof int[] ints) {\n+            return ints;\n@@ -500,5 +500,4 @@\n-        } else if (obj instanceof short[]) {\n-            short[] sdata = (short[])obj;\n-            int[] idata = new int[sdata.length];\n-            for (int i = 0; i < sdata.length; i++) {\n-                idata[i] = (int)sdata[i] & 0xffff;\n+        } else if (obj instanceof short[] shorts) {\n+            int[] idata = new int[shorts.length];\n+            for (int i = 0; i < shorts.length; i++) {\n+                idata[i] = (int)shorts[i] & 0xffff;\n@@ -507,5 +506,4 @@\n-        } else if (obj instanceof byte[]) {\n-            byte[] bdata = (byte[])obj;\n-            int[] idata = new int[bdata.length];\n-            for (int i = 0; i < bdata.length; i++) {\n-                idata[i] = 0xff & (int)bdata[i];\n+        } else if (obj instanceof byte[] bytes) {\n+            int[] idata = new int[bytes.length];\n+            for (int i = 0; i < bytes.length; i++) {\n+                idata[i] = 0xff & (int)bytes[i];\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/DataBuffer.java","additions":10,"deletions":12,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -1120,4 +1120,3 @@\n-               if (obj instanceof byte[]) {\n-                   byte[] bdata = (byte[])obj;\n-                   bdata[0] = (byte)(pixel&0xff);\n-                   return bdata;\n+               if (obj instanceof byte[] bytes) {\n+                   bytes[0] = (byte) (pixel&0xff);\n+                   return bytes;\n@@ -1125,2 +1124,1 @@\n-                   byte[] bdata = {(byte)(pixel&0xff)};\n-                   return bdata;\n+                   return new byte[]{ (byte) (pixel&0xff) };\n@@ -1129,4 +1127,3 @@\n-               if (obj instanceof short[]) {\n-                   short[] sdata = (short[])obj;\n-                   sdata[0] = (short)(pixel&0xffff);\n-                   return sdata;\n+               if (obj instanceof short[] shorts) {\n+                   shorts[0] = (short) (pixel&0xffff);\n+                   return shorts;\n@@ -1134,2 +1131,1 @@\n-                   short[] sdata = {(short)(pixel&0xffff)};\n-                   return sdata;\n+                   return new short[]{ (short) (pixel&0xffff) };\n@@ -1138,4 +1134,3 @@\n-               if (obj instanceof int[]) {\n-                   int[] idata = (int[])obj;\n-                   idata[0] = pixel;\n-                   return idata;\n+               if (obj instanceof int[] ints) {\n+                   ints[0] = pixel;\n+                   return ints;\n@@ -1143,2 +1138,1 @@\n-                   int[] idata = {pixel};\n-                   return idata;\n+                   return new int[]{ pixel };\n@@ -1354,15 +1348,2 @@\n-        SampleModel sm = raster.getSampleModel();\n-        SinglePixelPackedSampleModel spsm;\n-        if (sm instanceof SinglePixelPackedSampleModel) {\n-            spsm = (SinglePixelPackedSampleModel) sm;\n-        }\n-        else {\n-            return false;\n-        }\n-        if (spsm.getNumBands() != getNumComponents()) {\n-            return false;\n-        }\n-\n-        int[] bitMasks = spsm.getBitMasks();\n-        for (int i=0; i<numComponents; i++) {\n-            if (bitMasks[i] != maskArray[i]) {\n+        if (raster.getSampleModel() instanceof SinglePixelPackedSampleModel spsm) {\n+            if (spsm.getNumBands() != getNumComponents()) {\n@@ -1371,1 +1352,0 @@\n-        }\n@@ -1373,1 +1353,11 @@\n-        return (raster.getTransferType() == transferType);\n+            int[] bitMasks = spsm.getBitMasks();\n+            for (int i=0; i<numComponents; i++) {\n+                if (bitMasks[i] != maskArray[i]) {\n+                    return false;\n+                }\n+            }\n+\n+            return (raster.getTransferType() == transferType);\n+        } else {\n+            return false;\n+        }\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/DirectColorModel.java","additions":25,"deletions":35,"binary":false,"changes":60,"status":"modified"},{"patch":"@@ -118,2 +118,2 @@\n-        } else if (o instanceof String) {\n-            p.put(\"filters\", ((String) o)+toString());\n+        } else if (o instanceof String s) {\n+            p.put(\"filters\", s + this);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/ImageFilter.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1458,2 +1458,2 @@\n-            if (obj instanceof int[]) {\n-                data = (int[])obj;\n+            if (obj instanceof int[] ints) {\n+                data = ints;\n@@ -1539,2 +1539,1 @@\n-\n-        if (!(obj instanceof IndexColorModel)) {\n+        if (!(obj instanceof IndexColorModel cm)) {\n@@ -1544,1 +1543,0 @@\n-        IndexColorModel cm = (IndexColorModel) obj;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/IndexColorModel.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -295,9 +295,5 @@\n-        if (ltable instanceof ByteLookupTable) {\n-            byteFilter ((ByteLookupTable) ltable, src, dst,\n-                        width, height, numBands);\n-        }\n-        else if (ltable instanceof ShortLookupTable) {\n-            shortFilter ((ShortLookupTable) ltable, src, dst, width,\n-                         height, numBands);\n-        }\n-        else {\n+        if (ltable instanceof ByteLookupTable blt) {\n+            byteFilter(blt, src, dst, width, height, numBands);\n+        } else if (ltable instanceof ShortLookupTable slt) {\n+            shortFilter(slt, src, dst, width, height, numBands);\n+        } else {\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/LookupOp.java","additions":5,"deletions":9,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -562,3 +562,2 @@\n-            if (pixels instanceof byte[]) {\n-                ic.setPixels(x, y, w, h, model,\n-                             ((byte[]) pixels), off, pixelscan);\n+            if (pixels instanceof byte[] bytes) {\n+                ic.setPixels(x, y, w, h, model, bytes, off, pixelscan);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/MemoryImageSource.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -658,1 +658,12 @@\n-        if (!(o instanceof MultiPixelPackedSampleModel that)) {\n+        if (o instanceof MultiPixelPackedSampleModel that) {\n+            return this.width == that.width &&\n+                this.height == that.height &&\n+                this.numBands == that.numBands &&\n+                this.dataType == that.dataType &&\n+                this.pixelBitStride == that.pixelBitStride &&\n+                this.bitMask == that.bitMask &&\n+                this.pixelsPerDataElement == that.pixelsPerDataElement &&\n+                this.dataElementSize == that.dataElementSize &&\n+                this.dataBitOffset == that.dataBitOffset &&\n+                this.scanlineStride == that.scanlineStride;\n+        } else {\n@@ -661,11 +672,0 @@\n-\n-        return this.width == that.width &&\n-            this.height == that.height &&\n-            this.numBands == that.numBands &&\n-            this.dataType == that.dataType &&\n-            this.pixelBitStride == that.pixelBitStride &&\n-            this.bitMask == that.bitMask &&\n-            this.pixelsPerDataElement == that.pixelsPerDataElement &&\n-            this.dataElementSize == that.dataElementSize &&\n-            this.dataBitOffset == that.dataBitOffset &&\n-            this.scanlineStride == that.scanlineStride;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/MultiPixelPackedSampleModel.java","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -328,1 +328,1 @@\n-        if (! (sm instanceof SinglePixelPackedSampleModel)) {\n+        if (!(sm instanceof SinglePixelPackedSampleModel sppsm)) {\n@@ -342,1 +342,0 @@\n-        SinglePixelPackedSampleModel sppsm = (SinglePixelPackedSampleModel) sm;\n@@ -400,1 +399,1 @@\n-        if (!(obj instanceof PackedColorModel)) {\n+        if (!(obj instanceof PackedColorModel cm)) {\n@@ -404,2 +403,0 @@\n-        PackedColorModel cm = (PackedColorModel) obj;\n-\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/PackedColorModel.java","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -120,2 +120,2 @@\n-        if (canFilterIndexColorModel && (model instanceof IndexColorModel)) {\n-            ColorModel newcm = filterIndexColorModel((IndexColorModel)model);\n+        if (canFilterIndexColorModel && model instanceof IndexColorModel icm) {\n+            ColorModel newcm = filterIndexColorModel(icm);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/RGBImageFilter.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -741,3 +741,2 @@\n-            if (dataBuffer instanceof DataBufferByte) {\n-                return new ByteInterleavedRaster(csm,\n-                        (DataBufferByte) dataBuffer, location);\n+            if (dataBuffer instanceof DataBufferByte dbb) {\n+                return new ByteInterleavedRaster(csm, dbb, location);\n@@ -748,3 +747,2 @@\n-            if (dataBuffer instanceof DataBufferUShort) {\n-                return new ShortInterleavedRaster(csm,\n-                        (DataBufferUShort) dataBuffer, location);\n+            if (dataBuffer instanceof DataBufferUShort dbus) {\n+                return new ShortInterleavedRaster(csm, dbus, location);\n@@ -846,3 +844,2 @@\n-            if (dataBuffer instanceof DataBufferByte) {\n-                return new ByteBandedRaster(bsm,\n-                        (DataBufferByte) dataBuffer, location);\n+            if (dataBuffer instanceof DataBufferByte dbb) {\n+                return new ByteBandedRaster(bsm, dbb, location);\n@@ -853,3 +850,2 @@\n-            if (dataBuffer instanceof DataBufferUShort) {\n-                return new ShortBandedRaster(bsm,\n-                        (DataBufferUShort) dataBuffer, location);\n+            if (dataBuffer instanceof DataBufferUShort dbus) {\n+                return new ShortBandedRaster(bsm, dbus, location);\n@@ -921,3 +917,2 @@\n-            if (dataBuffer instanceof DataBufferByte) {\n-                return new ByteInterleavedRaster(sppsm,\n-                        (DataBufferByte) dataBuffer, location);\n+            if (dataBuffer instanceof DataBufferByte dbb) {\n+                return new ByteInterleavedRaster(sppsm, dbb, location);\n@@ -928,3 +923,2 @@\n-            if (dataBuffer instanceof DataBufferUShort) {\n-                return new ShortInterleavedRaster(sppsm,\n-                        (DataBufferUShort) dataBuffer, location);\n+            if (dataBuffer instanceof DataBufferUShort dbus) {\n+                return new ShortInterleavedRaster(sppsm, dbus, location);\n@@ -935,3 +929,2 @@\n-            if (dataBuffer instanceof DataBufferInt) {\n-                return new IntegerInterleavedRaster(sppsm,\n-                        (DataBufferInt) dataBuffer, location);\n+            if (dataBuffer instanceof DataBufferInt dbi) {\n+                return new IntegerInterleavedRaster(sppsm, dbi, location);\n@@ -1007,1 +1000,1 @@\n-        if (dataBuffer instanceof DataBufferByte &&\n+        if (dataBuffer instanceof DataBufferByte dbb &&\n@@ -1010,1 +1003,1 @@\n-            return new BytePackedRaster(mppsm, (DataBufferByte) dataBuffer, location);\n+            return new BytePackedRaster(mppsm, dbb, location);\n@@ -1054,3 +1047,2 @@\n-                if (db instanceof DataBufferByte) {\n-                    return new ByteInterleavedRaster(sm,\n-                            (DataBufferByte) db, location);\n+                if (db instanceof DataBufferByte dbb) {\n+                    return new ByteInterleavedRaster(sm, dbb, location);\n@@ -1061,3 +1053,2 @@\n-                if (db instanceof DataBufferUShort) {\n-                    return new ShortInterleavedRaster(sm,\n-                            (DataBufferUShort) db, location);\n+                if (db instanceof DataBufferUShort dbus) {\n+                    return new ShortInterleavedRaster(sm, dbus, location);\n@@ -1070,3 +1061,2 @@\n-                if (db instanceof DataBufferByte) {\n-                    return new ByteInterleavedRaster(sm,\n-                            (DataBufferByte) db, location);\n+                if (db instanceof DataBufferByte dbb) {\n+                    return new ByteInterleavedRaster(sm, dbb, location);\n@@ -1077,3 +1067,2 @@\n-                if (db instanceof DataBufferUShort) {\n-                    return new ShortInterleavedRaster(sm,\n-                            (DataBufferUShort) db, location);\n+                if (db instanceof DataBufferUShort dbus) {\n+                    return new ShortInterleavedRaster(sm, dbus, location);\n@@ -1084,3 +1073,2 @@\n-                if (db instanceof DataBufferInt) {\n-                    return new IntegerInterleavedRaster(sm,\n-                            (DataBufferInt) db, location);\n+                if (db instanceof DataBufferInt dbi) {\n+                    return new IntegerInterleavedRaster(sm, dbi, location);\n@@ -1092,1 +1080,1 @@\n-                   db instanceof DataBufferByte &&\n+                   db instanceof DataBufferByte dbb &&\n@@ -1095,1 +1083,1 @@\n-            return new BytePackedRaster(sm, (DataBufferByte) db, location);\n+            return new BytePackedRaster(sm, dbb, location);\n@@ -1162,3 +1150,2 @@\n-                if (db instanceof DataBufferByte) {\n-                    return new ByteInterleavedRaster(sm,\n-                            (DataBufferByte) db, location);\n+                if (db instanceof DataBufferByte dbb) {\n+                    return new ByteInterleavedRaster(sm, dbb, location);\n@@ -1169,3 +1156,2 @@\n-                if (db instanceof DataBufferUShort) {\n-                    return new ShortInterleavedRaster(sm,\n-                            (DataBufferUShort) db, location);\n+                if (db instanceof DataBufferUShort dbus) {\n+                    return new ShortInterleavedRaster(sm, dbus, location);\n@@ -1178,3 +1164,2 @@\n-                if (db instanceof DataBufferByte) {\n-                    return new ByteInterleavedRaster(sm,\n-                            (DataBufferByte) db, location);\n+                if (db instanceof DataBufferByte dbb) {\n+                    return new ByteInterleavedRaster(sm, dbb, location);\n@@ -1185,3 +1170,2 @@\n-                if (db instanceof DataBufferUShort) {\n-                    return new ShortInterleavedRaster(sm,\n-                            (DataBufferUShort) db, location);\n+                if (db instanceof DataBufferUShort dbus) {\n+                    return new ShortInterleavedRaster(sm, dbus, location);\n@@ -1192,3 +1176,2 @@\n-                if (db instanceof DataBufferInt) {\n-                    return new IntegerInterleavedRaster(sm,\n-                            (DataBufferInt) db, location);\n+                if (db instanceof DataBufferInt dbi) {\n+                    return new IntegerInterleavedRaster(sm, dbi, location);\n@@ -1200,1 +1183,1 @@\n-                   db instanceof DataBufferByte &&\n+                   db instanceof DataBufferByte dbb &&\n@@ -1203,1 +1186,1 @@\n-            return new BytePackedRaster(sm, (DataBufferByte) db, location);\n+            return new BytePackedRaster(sm, dbb, location);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/Raster.java","additions":40,"deletions":57,"binary":false,"changes":97,"status":"modified"},{"patch":"@@ -327,3 +327,2 @@\n-      if (dstSM instanceof ComponentSampleModel) {\n-           ComponentSampleModel dsm = (ComponentSampleModel)dstSM;\n-           if (dsm.getPixelStride() != dst.getNumBands()) {\n+      if (dstSM instanceof ComponentSampleModel dsm) {\n+          if (dsm.getPixelStride() != dst.getNumBands()) {\n@@ -333,3 +332,2 @@\n-        if (srcSM instanceof ComponentSampleModel) {\n-           ComponentSampleModel csm = (ComponentSampleModel)srcSM;\n-           if (csm.getPixelStride() != src.getNumBands()) {\n+        if (srcSM instanceof ComponentSampleModel csm) {\n+            if (csm.getPixelStride() != src.getNumBands()) {\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/RescaleOp.java","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -757,1 +757,11 @@\n-        if (!(o instanceof SinglePixelPackedSampleModel that)) {\n+        if (o instanceof SinglePixelPackedSampleModel that) {\n+            return this.width == that.width &&\n+                this.height == that.height &&\n+                this.numBands == that.numBands &&\n+                this.dataType == that.dataType &&\n+                Arrays.equals(this.bitMasks, that.bitMasks) &&\n+                Arrays.equals(this.bitOffsets, that.bitOffsets) &&\n+                Arrays.equals(this.bitSizes, that.bitSizes) &&\n+                this.maxBitSize == that.maxBitSize &&\n+                this.scanlineStride == that.scanlineStride;\n+        } else {\n@@ -760,10 +770,0 @@\n-\n-        return this.width == that.width &&\n-            this.height == that.height &&\n-            this.numBands == that.numBands &&\n-            this.dataType == that.dataType &&\n-            Arrays.equals(this.bitMasks, that.bitMasks) &&\n-            Arrays.equals(this.bitOffsets, that.bitOffsets) &&\n-            Arrays.equals(this.bitSizes, that.bitSizes) &&\n-            this.maxBitSize == that.maxBitSize &&\n-            this.scanlineStride == that.scanlineStride;\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/SinglePixelPackedSampleModel.java","additions":11,"deletions":11,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -98,2 +98,2 @@\n-                if (o instanceof RenderableImage) {\n-                    sources.add((RenderableImage)o);\n+                if (o instanceof RenderableImage renderableImage) {\n+                    sources.add(renderableImage);\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/image\/renderable\/RenderableImageOp.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -426,3 +426,2 @@\n-            if (mpaVals instanceof MediaPrintableArea[] &&\n-                ((MediaPrintableArea[])mpaVals).length > 0) {\n-                mpa = ((MediaPrintableArea[])mpaVals)[0];\n+            if (mpaVals instanceof MediaPrintableArea[] mpas && mpas.length > 0) {\n+                mpa = mpas[0];\n@@ -434,2 +433,1 @@\n-            if (media instanceof MediaSizeName) {\n-                MediaSizeName msn = (MediaSizeName)media;\n+            if (media instanceof MediaSizeName msn) {\n","filename":"src\/java.desktop\/share\/classes\/java\/awt\/print\/PrinterJob.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -200,2 +200,1 @@\n-                if (e instanceof Object[] && Array.getLength(e) % 3 == 0) {\n-                    Object[] a = (Object[])e;\n+                if (e instanceof Object[] a && Array.getLength(e) % 3 == 0) {\n","filename":"src\/java.desktop\/share\/classes\/java\/beans\/DefaultPersistenceDelegate.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -491,3 +491,1 @@\n-                throw (th instanceof RuntimeException)\n-                        ? (RuntimeException) th\n-                        : new RuntimeException(th);\n+                throw th instanceof RuntimeException e ? e : new RuntimeException(th);\n","filename":"src\/java.desktop\/share\/classes\/java\/beans\/EventHandler.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -316,4 +316,1 @@\n-        Object value = getValue(TRANSIENT);\n-        return (value instanceof Boolean)\n-                ? (Boolean) value\n-                : false;\n+        return getValue(TRANSIENT) instanceof Boolean b ? b : false;\n","filename":"src\/java.desktop\/share\/classes\/java\/beans\/FeatureDescriptor.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -444,2 +444,1 @@\n-        if (x instanceof IndexedPropertyDescriptor) {\n-            IndexedPropertyDescriptor ix = (IndexedPropertyDescriptor) x;\n+        if (x instanceof IndexedPropertyDescriptor ix) {\n@@ -449,2 +448,1 @@\n-        if (y instanceof IndexedPropertyDescriptor) {\n-            IndexedPropertyDescriptor iy = (IndexedPropertyDescriptor) y;\n+        if (y instanceof IndexedPropertyDescriptor iy) {\n","filename":"src\/java.desktop\/share\/classes\/java\/beans\/IndexedPropertyDescriptor.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -548,2 +548,1 @@\n-            if (pd instanceof IndexedPropertyDescriptor) {\n-                IndexedPropertyDescriptor ipd = (IndexedPropertyDescriptor) pd;\n+            if (pd instanceof IndexedPropertyDescriptor ipd) {\n@@ -1332,3 +1331,2 @@\n-                if (oldp instanceof IndexedPropertyDescriptor) {\n-                    properties[i] = new IndexedPropertyDescriptor(\n-                                        (IndexedPropertyDescriptor) oldp);\n+                if (oldp instanceof IndexedPropertyDescriptor ipd) {\n+                    properties[i] = new IndexedPropertyDescriptor(ipd);\n","filename":"src\/java.desktop\/share\/classes\/java\/beans\/Introspector.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -158,2 +158,1 @@\n-        if (ih instanceof EventHandler) {\n-            EventHandler eh = (EventHandler)ih;\n+        if (ih instanceof EventHandler handler) {\n@@ -162,4 +161,4 @@\n-            args.add(eh.getTarget());\n-            args.add(eh.getAction());\n-            if (eh.getEventPropertyName() != null) {\n-                args.add(eh.getEventPropertyName());\n+            args.add(handler.getTarget());\n+            args.add(handler.getAction());\n+            if (handler.getEventPropertyName() != null) {\n+                args.add(handler.getEventPropertyName());\n@@ -167,1 +166,1 @@\n-            if (eh.getListenerMethodName() != null) {\n+            if (handler.getListenerMethodName() != null) {\n@@ -169,1 +168,1 @@\n-                args.add(eh.getListenerMethodName());\n+                args.add(handler.getListenerMethodName());\n@@ -315,4 +314,6 @@\n-            if (cause instanceof RuntimeException)\n-                throw (RuntimeException)cause;\n-            if (cause instanceof Error)\n-                throw (Error)cause;\n+            if (cause instanceof RuntimeException ex) {\n+                throw ex;\n+            }\n+            if (cause instanceof Error ex) {\n+                throw ex;\n+            }\n@@ -684,2 +685,1 @@\n-                if (value instanceof Number) {\n-                    Number number = (Number) value;\n+                if (value instanceof Number number) {\n@@ -860,3 +860,1 @@\n-        BorderLayout layout = ( oldC.getLayout() instanceof BorderLayout )\n-                ? ( BorderLayout )oldC.getLayout()\n-                : null;\n+        BorderLayout layout = oldC.getLayout() instanceof BorderLayout borderLayout ? borderLayout : null;\n@@ -864,3 +862,1 @@\n-        JLayeredPane oldLayeredPane = (oldInstance instanceof JLayeredPane)\n-                ? (JLayeredPane) oldInstance\n-                : null;\n+        JLayeredPane oldLayeredPane = (oldInstance instanceof JLayeredPane layeredPane) ? layeredPane : null;\n","filename":"src\/java.desktop\/share\/classes\/java\/beans\/MetaData.java","additions":16,"deletions":20,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -96,5 +96,3 @@\n-        }\n-        if (instance instanceof Class) {\n-            return unqualifiedClassName((Class)instance);\n-        }\n-        else {\n+        } else if (instance instanceof Class<?> c) {\n+            return unqualifiedClassName(c);\n+        } else {\n","filename":"src\/java.desktop\/share\/classes\/java\/beans\/NameGenerator.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -113,3 +113,1 @@\n-        if (listener instanceof PropertyChangeListenerProxy) {\n-            PropertyChangeListenerProxy proxy =\n-                   (PropertyChangeListenerProxy)listener;\n+        if (listener instanceof PropertyChangeListenerProxy proxy) {\n@@ -117,2 +115,1 @@\n-            addPropertyChangeListener(proxy.getPropertyName(),\n-                                      proxy.getListener());\n+            addPropertyChangeListener(proxy.getPropertyName(), proxy.getListener());\n@@ -139,3 +136,1 @@\n-        if (listener instanceof PropertyChangeListenerProxy) {\n-            PropertyChangeListenerProxy proxy =\n-                    (PropertyChangeListenerProxy)listener;\n+        if (listener instanceof PropertyChangeListenerProxy proxy) {\n@@ -143,2 +138,1 @@\n-            removePropertyChangeListener(proxy.getPropertyName(),\n-                                         proxy.getListener());\n+            removePropertyChangeListener(proxy.getPropertyName(), proxy.getListener());\n@@ -570,2 +564,2 @@\n-            while (listener instanceof PropertyChangeListenerProxy) {\n-                listener = ((PropertyChangeListenerProxy) listener).getListener();\n+            while (listener instanceof PropertyChangeListenerProxy pclp) {\n+                listener = pclp.getListener();\n","filename":"src\/java.desktop\/share\/classes\/java\/beans\/PropertyChangeSupport.java","additions":6,"deletions":12,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -235,1 +235,1 @@\n-        if (target instanceof Class) {\n+        if (target instanceof Class<?> c) {\n@@ -250,2 +250,2 @@\n-            if (methodName.equals(\"newInstance\") && ((Class)target).isArray()) {\n-                Object result = Array.newInstance(((Class)target).getComponentType(), arguments.length);\n+            if (methodName.equals(\"newInstance\") && c.isArray()) {\n+                Object result = Array.newInstance(c.getComponentType(), arguments.length);\n@@ -268,1 +268,1 @@\n-                    m = ConstructorFinder.findConstructor((Class)target, argClasses);\n+                    m = ConstructorFinder.findConstructor(c, argClasses);\n@@ -275,1 +275,1 @@\n-                m = getMethod((Class)target, methodName, argClasses);\n+                m = getMethod(c, methodName, argClasses);\n@@ -305,5 +305,4 @@\n-                if (m instanceof Method) {\n-                    return MethodUtil.invoke((Method)m, target, arguments);\n-                }\n-                else {\n-                    return ((Constructor)m).newInstance(arguments);\n+                if (m instanceof Method method) {\n+                    return MethodUtil.invoke(method, target, arguments);\n+                } else {\n+                    return ((Constructor<?>)m).newInstance(arguments);\n@@ -318,5 +317,3 @@\n-                Throwable te = ite.getCause();\n-                if (te instanceof Exception) {\n-                    throw (Exception)te;\n-                }\n-                else {\n+                if (ite.getCause() instanceof Exception e) {\n+                    throw e;\n+                } else {\n","filename":"src\/java.desktop\/share\/classes\/java\/beans\/Statement.java","additions":12,"deletions":15,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -113,3 +113,1 @@\n-        if (listener instanceof VetoableChangeListenerProxy) {\n-            VetoableChangeListenerProxy proxy =\n-                    (VetoableChangeListenerProxy)listener;\n+        if (listener instanceof VetoableChangeListenerProxy proxy) {\n@@ -117,2 +115,1 @@\n-            addVetoableChangeListener(proxy.getPropertyName(),\n-                                      proxy.getListener());\n+            addVetoableChangeListener(proxy.getPropertyName(), proxy.getListener());\n@@ -139,3 +136,1 @@\n-        if (listener instanceof VetoableChangeListenerProxy) {\n-            VetoableChangeListenerProxy proxy =\n-                    (VetoableChangeListenerProxy)listener;\n+        if (listener instanceof VetoableChangeListenerProxy proxy) {\n@@ -143,2 +138,1 @@\n-            removeVetoableChangeListener(proxy.getPropertyName(),\n-                                         proxy.getListener());\n+            removeVetoableChangeListener(proxy.getPropertyName(), proxy.getListener());\n@@ -559,2 +553,2 @@\n-            while (listener instanceof VetoableChangeListenerProxy) {\n-                listener = ((VetoableChangeListenerProxy) listener).getListener();\n+            while (listener instanceof VetoableChangeListenerProxy vclp) {\n+                listener = vclp.getListener();\n","filename":"src\/java.desktop\/share\/classes\/java\/beans\/VetoableChangeSupport.java","additions":6,"deletions":12,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -602,2 +602,2 @@\n-        if (value instanceof Class) {\n-            writeln(\"<class>\" + ((Class)value).getName() + \"<\/class>\");\n+        if (value instanceof Class<?> c) {\n+            writeln(\"<class>\" + c.getName() + \"<\/class>\");\n@@ -617,2 +617,1 @@\n-            if (isArgument && target instanceof Field && methodName.equals(\"get\")) {\n-                Field f = (Field) target;\n+            if (isArgument && target instanceof Field f && methodName.equals(\"get\")) {\n@@ -647,2 +646,2 @@\n-        } else if (value instanceof String) {\n-            writeln(createString((String) value));\n+        } else if (value instanceof String s) {\n+            writeln(createString(s));\n","filename":"src\/java.desktop\/share\/classes\/java\/beans\/XMLEncoder.java","additions":5,"deletions":6,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -828,2 +828,1 @@\n-        } else if (val instanceof String[]) {\n-            String[] fontLangs = (String[])val;\n+        } else if (val instanceof String[] fontLangs) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/FontConfiguration.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -70,2 +70,2 @@\n-        if (tk instanceof ComponentFactory) {\n-            componentFactory = (ComponentFactory)tk;\n+        if (tk instanceof ComponentFactory cf) {\n+            componentFactory = cf;\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/HeadlessToolkit.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -95,2 +95,2 @@\n-        if (image instanceof ToolkitImage) {\n-            ImageRepresentation ir = ((ToolkitImage)image).getImageRep();\n+        if (image instanceof ToolkitImage tki) {\n+            ImageRepresentation ir = tki.getImageRep();\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/IconInfo.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -92,2 +92,2 @@\n-        } else if (component instanceof Panel) {\n-            acceptFocusOnClick = (((Panel)component).getComponentCount() == 0);\n+        } else if (component instanceof Panel panel) {\n+            acceptFocusOnClick = panel.getComponentCount() == 0;\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/KeyboardFocusManagerPeerImpl.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -180,1 +180,1 @@\n-            return obj instanceof WindowsVersion && compareTo((WindowsVersion) obj) == 0;\n+            return obj instanceof WindowsVersion w && compareTo(w) == 0;\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/OSInfo.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -59,1 +59,1 @@\n-    public PlatformFont(String name, int style){\n+    public PlatformFont(String name, int style) {\n@@ -61,2 +61,2 @@\n-        if (sfm instanceof FontSupport) {\n-            fontConfig = ((FontSupport)sfm).getFontConfiguration();\n+        if (sfm != null) {\n+            fontConfig = sfm.getFontConfiguration();\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/PlatformFont.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -42,2 +42,2 @@\n-        if (g instanceof ConstrainableGraphics) {\n-            ((ConstrainableGraphics)g).constrain(bounds.x, bounds.y, bounds.width, bounds.height);\n+        if (g instanceof ConstrainableGraphics cg) {\n+            cg.constrain(bounds.x, bounds.y, bounds.width, bounds.height);\n@@ -72,2 +72,2 @@\n-                if (cg instanceof Graphics2D) {\n-                    ((Graphics2D)cg).setBackground(comp.getBackground());\n+                if (cg instanceof Graphics2D g2d) {\n+                    g2d.setBackground(comp.getBackground());\n@@ -127,3 +127,2 @@\n-            } else if (comp instanceof Container) {\n-                runComponents(((Container)comp).getComponents(), cg,\n-                              LIGHTWEIGHTS | HEAVYWEIGHTS);\n+            } else if (comp instanceof Container container) {\n+                runComponents(container.getComponents(), cg,LIGHTWEIGHTS | HEAVYWEIGHTS);\n@@ -146,3 +145,2 @@\n-            } else if (comp instanceof Container) {\n-                runComponents(((Container)comp).getComponents(), cg,\n-                              LIGHTWEIGHTS | HEAVYWEIGHTS);\n+            } else if (comp instanceof Container container) {\n+                runComponents(container.getComponents(), cg, LIGHTWEIGHTS | HEAVYWEIGHTS);\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/SunGraphicsCallback.java","additions":8,"deletions":10,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -83,4 +83,1 @@\n-            if (val instanceof Value) {\n-                return ((Value)val).isCompatibleKey(this);\n-            }\n-            return false;\n+            return val instanceof Value value && value.isCompatibleKey(this);\n@@ -500,5 +497,1 @@\n-            if (val instanceof Integer) {\n-                int ival = ((Integer)val).intValue();\n-                return ival >= 100 && ival <= 250;\n-            }\n-            return false;\n+            return val instanceof Integer i && i >= 100 && i <= 250;\n@@ -506,1 +499,0 @@\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/SunHints.java","additions":2,"deletions":10,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -339,6 +339,4 @@\n-        if (target instanceof Component) {\n-            AWTAccessor.getComponentAccessor().\n-                setAppContext((Component)target, context);\n-        } else if (target instanceof MenuComponent) {\n-            AWTAccessor.getMenuComponentAccessor().\n-                setAppContext((MenuComponent)target, context);\n+        if (target instanceof Component component) {\n+            AWTAccessor.getComponentAccessor().setAppContext(component, context);\n+        } else if (target instanceof MenuComponent menuComponent) {\n+            AWTAccessor.getMenuComponentAccessor().setAppContext(menuComponent, context);\n@@ -356,6 +354,4 @@\n-        if (target instanceof Component) {\n-            return AWTAccessor.getComponentAccessor().\n-                       getAppContext((Component)target);\n-        } else if (target instanceof MenuComponent) {\n-            return AWTAccessor.getMenuComponentAccessor().\n-                       getAppContext((MenuComponent)target);\n+        if (target instanceof Component component) {\n+            return AWTAccessor.getComponentAccessor().getAppContext(component);\n+        } else if (target instanceof MenuComponent menuComponent) {\n+            return AWTAccessor.getMenuComponentAccessor().getAppContext(menuComponent);\n@@ -451,1 +447,1 @@\n-                nested instanceof TimedWindowEvent)\n+                nested instanceof TimedWindowEvent twe)\n@@ -453,1 +449,0 @@\n-                TimedWindowEvent twe = (TimedWindowEvent)nested;\n@@ -455,1 +450,1 @@\n-                    setWindowDeactivationTime((Window)twe.getSource(), twe.getWhen());\n+                    setWindowDeactivationTime((Window) twe.getSource(), twe.getWhen());\n@@ -796,8 +791,8 @@\n-        if (!(img instanceof ToolkitImage)) {\n-            return ImageObserver.ALLBITS;\n-        }\n-\n-        ToolkitImage tkimg = (ToolkitImage)img;\n-        int repbits;\n-        if (w == 0 || h == 0) {\n-            repbits = ImageObserver.ALLBITS;\n+        if (img instanceof ToolkitImage tki) {\n+            int repbits;\n+            if (w == 0 || h == 0) {\n+                repbits = ImageObserver.ALLBITS;\n+            } else {\n+                repbits = tki.getImageRep().check(o);\n+            }\n+            return (tki.check(o) | repbits) & checkResolutionVariant(img, w, h, o);\n@@ -805,1 +800,1 @@\n-            repbits = tkimg.getImageRep().check(o);\n+            return ImageObserver.ALLBITS;\n@@ -807,1 +802,0 @@\n-        return (tkimg.check(o) | repbits) & checkResolutionVariant(img, w, h, o);\n@@ -817,1 +811,1 @@\n-        if (!(img instanceof ToolkitImage)) {\n+        if (!(img instanceof ToolkitImage tkimg)) {\n@@ -821,1 +815,0 @@\n-        ToolkitImage tkimg = (ToolkitImage)img;\n@@ -829,2 +822,2 @@\n-        ImageRepresentation ir = tkimg.getImageRep();\n-        return ir.prepare(o) & prepareResolutionVariant(img, w, h, o);\n+\n+        return tkimg.getImageRep().prepare(o) & prepareResolutionVariant(img, w, h, o);\n@@ -862,5 +855,3 @@\n-        if (image instanceof MultiResolutionToolkitImage) {\n-            Image resolutionVariant = ((MultiResolutionToolkitImage) image).\n-                    getResolutionVariant();\n-            if (resolutionVariant instanceof ToolkitImage) {\n-                return (ToolkitImage) resolutionVariant;\n+        if (image instanceof MultiResolutionToolkitImage mtki) {\n+            if (mtki.getResolutionVariant() instanceof ToolkitImage tki) {\n+                return tki;\n@@ -936,2 +927,2 @@\n-            if ((image instanceof MultiResolutionImage)) {\n-                Image im = ((MultiResolutionImage) image).getResolutionVariant(width, height);\n+            if (image instanceof MultiResolutionImage mri) {\n+                Image im = mri.getResolutionVariant(width, height);\n@@ -957,3 +948,2 @@\n-            if (im instanceof ToolkitImage) {\n-                ImageRepresentation ir = ((ToolkitImage)im).getImageRep();\n-                ir.reconstruct(ImageObserver.ALLBITS);\n+            if (im instanceof ToolkitImage tki) {\n+                tki.getImageRep().reconstruct(ImageObserver.ALLBITS);\n@@ -1211,1 +1201,1 @@\n-        if (tk instanceof SunToolkit) {\n+        if (tk instanceof SunToolkit stk) {\n@@ -1214,1 +1204,1 @@\n-            return ((SunToolkit)tk).needsXEmbedImpl();\n+            return stk.needsXEmbedImpl();\n@@ -1713,3 +1703,2 @@\n-                Toolkit tk = Toolkit.getDefaultToolkit();\n-                if (tk instanceof SunToolkit) {\n-                     ((SunToolkit)tk).fireDesktopFontPropertyChanges();\n+                if (Toolkit.getDefaultToolkit() instanceof SunToolkit stk) {\n+                     stk.fireDesktopFontPropertyChanges();\n@@ -1804,3 +1793,2 @@\n-             if (tk instanceof SunToolkit) {\n-                 RenderingHints map = ((SunToolkit)tk).getDesktopAAHints();\n-                 return map;\n+             if (tk instanceof SunToolkit stk) {\n+                 return stk.getDesktopAAHints();\n@@ -2030,2 +2018,2 @@\n-            if (c instanceof LightweightFrame) {\n-                return (LightweightFrame)c;\n+            if (c instanceof LightweightFrame frame) {\n+                return frame;\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/SunToolkit.java","additions":37,"deletions":49,"binary":false,"changes":86,"status":"modified"},{"patch":"@@ -204,1 +204,1 @@\n-            if(this == o) {\n+            if (this == o) {\n@@ -206,2 +206,2 @@\n-            } else if( o instanceof WeakKey ) {\n-                return get() == ((WeakKey)o).get();\n+            } else if (o instanceof WeakKey<?> key) {\n+                return get() == key.get();\n@@ -218,2 +218,0 @@\n-\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/WeakIdentityHashMap.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -154,1 +154,1 @@\n-        if (ret instanceof IOException) {\n+        if (ret instanceof IOException e) {\n@@ -156,2 +156,2 @@\n-            throw new IOException(\"Exception fetching data: \", (IOException)ret);\n-        } else if (ret instanceof DataFactory) {\n+            throw new IOException(\"Exception fetching data: \", e);\n+        } else if (ret instanceof DataFactory factory) {\n@@ -159,1 +159,0 @@\n-            DataFactory factory = (DataFactory)ret;\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/datatransfer\/ClipboardTransferable.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -189,2 +189,2 @@\n-        if (map instanceof FlavorTable) {\n-            return (FlavorTable)map;\n+        if (map instanceof FlavorTable flavorTable) {\n+            return flavorTable;\n@@ -936,1 +936,1 @@\n-            if (!(obj instanceof InputStream)) {\n+            if (!(obj instanceof InputStream is)) {\n@@ -941,5 +941,3 @@\n-                try (InputStream is = (InputStream)obj) {\n-                    is.mark(Integer.MAX_VALUE);\n-                    is.transferTo(bos);\n-                    is.reset();\n-                }\n+                is.mark(Integer.MAX_VALUE);\n+                is.transferTo(bos);\n+                is.reset();\n@@ -1074,5 +1072,4 @@\n-        String filePath = null;\n-        if (fileObject instanceof File) {\n-            filePath = ((File)fileObject).getCanonicalPath();\n-        } else if (fileObject instanceof String) {\n-           filePath = (String) fileObject;\n+        if (fileObject instanceof File file) {\n+            return new File(file.getCanonicalPath());\n+        } else if (fileObject instanceof String s) {\n+           return new File(s);\n@@ -1082,1 +1079,0 @@\n-        return new File(filePath);\n@@ -1713,1 +1709,1 @@\n-        if (image instanceof RenderedImage) {\n+        if (image instanceof RenderedImage renderedImage) {\n@@ -1716,1 +1712,1 @@\n-                return imageToStandardBytesImpl((RenderedImage)image, mimeType);\n+                return imageToStandardBytesImpl(renderedImage, mimeType);\n@@ -1725,2 +1721,2 @@\n-        if (image instanceof ToolkitImage) {\n-            ImageRepresentation ir = ((ToolkitImage)image).getImageRep();\n+        if (image instanceof ToolkitImage tki) {\n+            ImageRepresentation ir = tki.getImageRep();\n@@ -1831,4 +1827,2 @@\n-        if (obj1 instanceof byte[]) {\n-            byte[] arr1 = (byte[])obj1;\n-            if (obj2 instanceof byte[]) {\n-                byte[] arr2 = (byte[])obj2;\n+        if (obj1 instanceof byte[] arr1) {\n+            if (obj2 instanceof byte[] arr2) {\n@@ -1845,2 +1839,2 @@\n-            if (obj2 instanceof byte[]) {\n-                str2 = new ByteArrayInputStream((byte[])obj2);\n+            if (obj2 instanceof byte[] arr2) {\n+                str2 = new ByteArrayInputStream(arr2);\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/datatransfer\/DataTransferer.java","additions":18,"deletions":24,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -368,5 +368,2 @@\n-        if (discardingMouseEvents && event instanceof MouseEvent) {\n-            MouseEvent mouseEvent = (MouseEvent)event;\n-            if (!(mouseEvent instanceof SunDropTargetEvent)) {\n-                return false;\n-            }\n+        if (discardingMouseEvents && event instanceof MouseEvent mouseEvent) {\n+            return mouseEvent instanceof SunDropTargetEvent;\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/dnd\/SunDragSourceContextPeer.java","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -269,1 +269,1 @@\n-        if (ret instanceof byte[]) {\n+        if (ret instanceof byte[] bytes) {\n@@ -272,1 +272,1 @@\n-                    translateBytes((byte[])ret, df, format, this);\n+                    translateBytes(bytes, df, format, this);\n@@ -276,1 +276,1 @@\n-        } else if (ret instanceof InputStream) {\n+        } else if (ret instanceof InputStream stream) {\n@@ -279,1 +279,1 @@\n-                    translateStream((InputStream)ret, df, format, this);\n+                    translateStream(stream, df, format, this);\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/dnd\/SunDropTargetContextPeer.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -220,1 +220,1 @@\n-        if (!(other instanceof Order1)) {\n+        if (!(other instanceof Order1 c1)) {\n@@ -223,1 +223,0 @@\n-        Order1 c1 = (Order1) other;\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/geom\/Order1.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -105,1 +105,0 @@\n-        Toolkit toolkit = Toolkit.getDefaultToolkit();\n@@ -107,4 +106,2 @@\n-            if (toolkit instanceof InputMethodSupport) {\n-                InputMethodDescriptor hostAdapterDescriptor =\n-                    ((InputMethodSupport)toolkit)\n-                    .getInputMethodAdapterDescriptor();\n+            if (Toolkit.getDefaultToolkit() instanceof InputMethodSupport ims) {\n+                InputMethodDescriptor hostAdapterDescriptor = ims.getInputMethodAdapterDescriptor();\n@@ -419,3 +416,2 @@\n-        Toolkit toolkit = Toolkit.getDefaultToolkit();\n-        if (toolkit instanceof InputMethodSupport) {\n-            return ((InputMethodSupport)toolkit).getDefaultKeyboardLocale();\n+        if (Toolkit.getDefaultToolkit() instanceof InputMethodSupport ims) {\n+            return ims.getDefaultKeyboardLocale();\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/im\/ExecutableInputMethodManager.java","additions":4,"deletions":8,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -231,2 +231,2 @@\n-        if (event instanceof FocusEvent) {\n-            Component opposite = ((FocusEvent)event).getOppositeComponent();\n+        if (event instanceof FocusEvent focusEvent) {\n+            Component opposite = focusEvent.getOppositeComponent();\n@@ -330,2 +330,2 @@\n-                if (inputMethod instanceof InputMethodAdapter) {\n-                    ((InputMethodAdapter) inputMethod).setAWTFocussedComponent(source);\n+                if (inputMethod instanceof InputMethodAdapter ima) {\n+                    ima.setAWTFocussedComponent(source);\n@@ -383,1 +383,1 @@\n-                    previousInputMethod instanceof InputMethodAdapter) {\n+                    previousInputMethod instanceof InputMethodAdapter ima) {\n@@ -386,1 +386,1 @@\n-                ((InputMethodAdapter) previousInputMethod).stopListening();\n+                ima.stopListening();\n@@ -393,2 +393,2 @@\n-            if (inputMethod instanceof InputMethodAdapter) {\n-                ((InputMethodAdapter) inputMethod).setClientComponent(currentClientComponent);\n+            if (inputMethod instanceof InputMethodAdapter ima) {\n+                ima.setClientComponent(currentClientComponent);\n@@ -429,2 +429,2 @@\n-            } else if (component instanceof Window) {\n-                return (Window) component;\n+            } else if (component instanceof Window window) {\n+                return window;\n@@ -462,2 +462,2 @@\n-                if (inputMethod instanceof InputMethodAdapter) {\n-                    ((InputMethodAdapter) inputMethod).setAWTFocussedComponent(null);\n+                if (inputMethod instanceof InputMethodAdapter ima) {\n+                    ima.setAWTFocussedComponent(null);\n@@ -547,2 +547,2 @@\n-                if (inputMethod instanceof InputMethodAdapter) {\n-                    ((InputMethodAdapter) inputMethod).setClientComponent(null);\n+                if (inputMethod instanceof InputMethodAdapter ima) {\n+                    ima.setClientComponent(null);\n@@ -587,2 +587,2 @@\n-            if (inputMethod instanceof InputMethodAdapter) {\n-                ((InputMethodAdapter) inputMethod).setAWTFocussedComponent(awtFocussedComponent);\n+            if (inputMethod instanceof InputMethodAdapter ima) {\n+                ima.setAWTFocussedComponent(awtFocussedComponent);\n@@ -643,2 +643,2 @@\n-            if (inputMethod instanceof InputMethodAdapter) {\n-                ((InputMethodAdapter) inputMethod).setClientComponent(null);\n+            if (inputMethod instanceof InputMethodAdapter ima) {\n+                ima.setClientComponent(null);\n@@ -762,1 +762,1 @@\n-        if (inputMethod instanceof InputMethodAdapter) {\n+        if (inputMethod instanceof InputMethodAdapter ima) {\n@@ -764,2 +764,1 @@\n-            inputMethodInfo = ((InputMethodAdapter)inputMethod).\n-                getNativeInputMethodInfo();\n+            inputMethodInfo = ima.getNativeInputMethodInfo();\n@@ -850,2 +849,2 @@\n-                        (!(inputMethodInstance instanceof InputMethodAdapter)) ||\n-                        ((InputMethodAdapter) inputMethodInstance).supportsBelowTheSpot());\n+                        !(inputMethodInstance instanceof InputMethodAdapter ima) ||\n+                        ima.supportsBelowTheSpot());\n@@ -886,2 +885,2 @@\n-                (!(inputMethodInstance instanceof InputMethodAdapter)) ||\n-                ((InputMethodAdapter) inputMethodInstance).supportsBelowTheSpot());\n+                !(inputMethodInstance instanceof InputMethodAdapter ima) ||\n+                ima.supportsBelowTheSpot());\n@@ -962,1 +961,1 @@\n-            ((window instanceof Frame) && ((Frame)window).getState() == Frame.ICONIFIED)) {\n+            ((window instanceof Frame frame) && frame.getState() == Frame.ICONIFIED)) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/im\/InputContext.java","additions":25,"deletions":26,"binary":false,"changes":51,"status":"modified"},{"patch":"@@ -189,1 +189,1 @@\n-        if (event instanceof InputMethodEvent) {\n+        if (event instanceof InputMethodEvent ime) {\n@@ -192,1 +192,1 @@\n-                getCompositionAreaHandler(true).processInputMethodEvent((InputMethodEvent) event);\n+                getCompositionAreaHandler(true).processInputMethodEvent(ime);\n@@ -354,4 +354,2 @@\n-            Toolkit toolkit = Toolkit.getDefaultToolkit();\n-            if (toolkit instanceof InputMethodSupport) {\n-                return ((InputMethodSupport)toolkit).createInputMethodWindow(\n-                    title, context);\n+            if (Toolkit.getDefaultToolkit() instanceof InputMethodSupport ims) {\n+                return ims.createInputMethodWindow(title, context);\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/im\/InputMethodContext.java","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -215,2 +215,2 @@\n-        if (targetMenu instanceof JMenu) {\n-            ((JMenu)targetMenu).add(menuItem);\n+        if (targetMenu instanceof JMenu menu) {\n+            menu.add(menuItem);\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/im\/InputMethodPopupMenu.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -176,1 +176,1 @@\n-                if (raster instanceof IntegerComponentRaster &&\n+                if (raster instanceof IntegerComponentRaster icr &&\n@@ -178,1 +178,1 @@\n-                    ((IntegerComponentRaster)raster).getPixelStride() == 1)\n+                    icr.getPixelStride() == 1)\n@@ -181,2 +181,1 @@\n-                    if (cm instanceof DirectColorModel) {\n-                        DirectColorModel dcm = (DirectColorModel) cm;\n+                    if (cm instanceof DirectColorModel dcm) {\n@@ -207,1 +206,1 @@\n-                } else if (raster instanceof ShortComponentRaster &&\n+                } else if (raster instanceof ShortComponentRaster scr &&\n@@ -209,1 +208,1 @@\n-                           ((ShortComponentRaster)raster).getPixelStride() == 1)\n+                           scr.getPixelStride() == 1)\n@@ -213,2 +212,1 @@\n-                    if (cm instanceof DirectColorModel) {\n-                        DirectColorModel dcm = (DirectColorModel) cm;\n+                    if (cm instanceof DirectColorModel dcm) {\n@@ -315,3 +313,1 @@\n-        IndexColorModel icm = ((cm instanceof IndexColorModel)\n-                               ? (IndexColorModel) cm\n-                               : null);\n+        IndexColorModel icm = cm instanceof IndexColorModel colorModel ? colorModel : null;\n@@ -338,3 +334,1 @@\n-        IndexColorModel icm = ((cm instanceof IndexColorModel)\n-                               ? (IndexColorModel) cm\n-                               : null);\n+        IndexColorModel icm = cm instanceof IndexColorModel colorModel ? colorModel : null;\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/BufImgSurfaceData.java","additions":8,"deletions":14,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -137,2 +137,1 @@\n-        if (sampleModel instanceof BandedSampleModel) {\n-            BandedSampleModel bsm = (BandedSampleModel)sampleModel;\n+        if (sampleModel instanceof BandedSampleModel bsm) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/ByteBandedRaster.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -168,2 +168,1 @@\n-        if (sampleModel instanceof ComponentSampleModel) {\n-            ComponentSampleModel ism = (ComponentSampleModel)sampleModel;\n+        if (sampleModel instanceof ComponentSampleModel ism) {\n@@ -180,3 +179,1 @@\n-        } else if (sampleModel instanceof SinglePixelPackedSampleModel) {\n-            SinglePixelPackedSampleModel sppsm =\n-                    (SinglePixelPackedSampleModel)sampleModel;\n+        } else if (sampleModel instanceof SinglePixelPackedSampleModel sppsm) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/ByteComponentRaster.java","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -202,2 +202,2 @@\n-            (sampleModel instanceof ComponentSampleModel &&\n-             isInterleaved((ComponentSampleModel)sampleModel))) {\n+            (sampleModel instanceof ComponentSampleModel csm &&\n+             isInterleaved(csm))) {\n@@ -211,3 +211,1 @@\n-        } else if (sampleModel instanceof SinglePixelPackedSampleModel) {\n-            SinglePixelPackedSampleModel sppsm =\n-                    (SinglePixelPackedSampleModel)sampleModel;\n+        } else if (sampleModel instanceof SinglePixelPackedSampleModel sppsm) {\n@@ -612,2 +610,1 @@\n-        if (inRaster instanceof ByteInterleavedRaster) {\n-            ByteInterleavedRaster bct = (ByteInterleavedRaster) inRaster;\n+        if (inRaster instanceof ByteInterleavedRaster bct) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/ByteInterleavedRaster.java","additions":4,"deletions":7,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -167,3 +167,1 @@\n-        if (sampleModel instanceof MultiPixelPackedSampleModel) {\n-            MultiPixelPackedSampleModel mppsm =\n-                (MultiPixelPackedSampleModel)sampleModel;\n+        if (sampleModel instanceof MultiPixelPackedSampleModel mppsm) {\n@@ -801,2 +799,2 @@\n-        if (!(srcRaster instanceof BytePackedRaster) ||\n-            ((BytePackedRaster)srcRaster).pixelBitStride != pixelBitStride) {\n+        if (!(srcRaster instanceof BytePackedRaster bpr) ||\n+            bpr.pixelBitStride != pixelBitStride) {\n@@ -836,2 +834,1 @@\n-                        width, height,\n-                        (BytePackedRaster)srcRaster);\n+                        width, height, bpr);\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/BytePackedRaster.java","additions":4,"deletions":7,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -72,2 +72,1 @@\n-        if (ic instanceof ImageRepresentation) {\n-            ImageRepresentation ir = (ImageRepresentation) ic;\n+        if (ic instanceof ImageRepresentation ir) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/ImageConsumerQueue.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -97,2 +97,2 @@\n-        if (image.getSource() instanceof InputStreamImageSource) {\n-            src = (InputStreamImageSource) image.getSource();\n+        if (image.getSource() instanceof InputStreamImageSource i) {\n+            src = i;\n@@ -211,1 +211,1 @@\n-        if (model instanceof IndexColorModel) {\n+        if (model instanceof IndexColorModel icm) {\n@@ -217,3 +217,1 @@\n-            }\n-            else {\n-                IndexColorModel icm = (IndexColorModel) model;\n+            } else {\n@@ -231,2 +229,1 @@\n-            }\n-            else if (model instanceof DirectColorModel) {\n+            } else if (model instanceof DirectColorModel dcm) {\n@@ -234,1 +231,0 @@\n-                DirectColorModel dcm = (DirectColorModel) model;\n@@ -269,2 +265,1 @@\n-        else if (cmodel instanceof DirectColorModel) {\n-            DirectColorModel dcm = (DirectColorModel) cmodel;\n+        else if (cmodel instanceof DirectColorModel dcm) {\n@@ -289,1 +284,1 @@\n-            biRaster instanceof ByteComponentRaster &&\n+            biRaster instanceof ByteComponentRaster bct &&\n@@ -292,1 +287,0 @@\n-            ByteComponentRaster bct = (ByteComponentRaster) biRaster;\n@@ -423,2 +417,2 @@\n-                (model instanceof IndexColorModel) &&\n-                (biRaster instanceof ByteComponentRaster))\n+                (model instanceof IndexColorModel icm) &&\n+                (biRaster instanceof ByteComponentRaster bct))\n@@ -426,2 +420,0 @@\n-                IndexColorModel icm = (IndexColorModel) model;\n-                ByteComponentRaster bct = (ByteComponentRaster) biRaster;\n@@ -463,1 +455,1 @@\n-                if (srcLUT != null && model instanceof IndexColorModel) {\n+                if (srcLUT != null && model instanceof IndexColorModel icm) {\n@@ -466,1 +458,1 @@\n-                        ((IndexColorModel)model).getRGBs(srcLUT);\n+                        icm.getRGBs(srcLUT);\n@@ -509,1 +501,1 @@\n-                     (biRaster instanceof ByteComponentRaster) &&\n+                     (biRaster instanceof ByteComponentRaster bt) &&\n@@ -511,1 +503,0 @@\n-                ByteComponentRaster bt = (ByteComponentRaster) biRaster;\n@@ -572,4 +563,1 @@\n-            if ((model == cmodel) &&\n-                (biRaster instanceof IntegerComponentRaster)) {\n-                IntegerComponentRaster iraster =\n-                                         (IntegerComponentRaster) biRaster;\n+            if (model == cmodel && biRaster instanceof IntegerComponentRaster iraster) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/ImageRepresentation.java","additions":13,"deletions":25,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -173,2 +173,1 @@\n-            if (table instanceof ByteLookupTable) {\n-                ByteLookupTable bt = (ByteLookupTable) table;\n+            if (table instanceof ByteLookupTable bt) {\n@@ -238,2 +237,1 @@\n-            if (table instanceof ByteLookupTable) {\n-                ByteLookupTable bt = (ByteLookupTable) table;\n+            if (table instanceof ByteLookupTable bt) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/ImagingLib.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -149,2 +149,2 @@\n-        if ( needReload && cq.consumer instanceof ImageRepresentation) {\n-            ((ImageRepresentation)cq.consumer).image.flush();\n+        if ( needReload && cq.consumer instanceof ImageRepresentation ir) {\n+            ir.image.flush();\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/InputStreamImageSource.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -180,3 +180,1 @@\n-        if (sampleModel instanceof SinglePixelPackedSampleModel) {\n-            SinglePixelPackedSampleModel sppsm =\n-                    (SinglePixelPackedSampleModel)sampleModel;\n+        if (sampleModel instanceof SinglePixelPackedSampleModel sppsm) {\n@@ -325,2 +323,2 @@\n-        if (obj instanceof int[]) {\n-            outData = (int[])obj;\n+        if (obj instanceof int[] ints) {\n+            outData = ints;\n@@ -429,1 +427,1 @@\n-        if (inRaster instanceof IntegerComponentRaster &&\n+        if (inRaster instanceof IntegerComponentRaster ict &&\n@@ -431,1 +429,0 @@\n-            IntegerComponentRaster ict = (IntegerComponentRaster) inRaster;\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/IntegerComponentRaster.java","additions":4,"deletions":7,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -135,3 +135,1 @@\n-        if (sampleModel instanceof SinglePixelPackedSampleModel) {\n-            SinglePixelPackedSampleModel sppsm =\n-                    (SinglePixelPackedSampleModel)sampleModel;\n+        if (sampleModel instanceof SinglePixelPackedSampleModel sppsm) {\n@@ -265,2 +263,2 @@\n-        if (obj instanceof int[]) {\n-            outData = (int[])obj;\n+        if (obj instanceof int[] ints) {\n+            outData = ints;\n@@ -360,3 +358,1 @@\n-        if (inRaster instanceof IntegerInterleavedRaster) {\n-            IntegerInterleavedRaster ict = (IntegerInterleavedRaster) inRaster;\n-\n+        if (inRaster instanceof IntegerInterleavedRaster ict) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/IntegerInterleavedRaster.java","additions":4,"deletions":8,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -119,3 +119,1 @@\n-        if (mrImage instanceof MultiResolutionToolkitImage) {\n-            MultiResolutionToolkitImage mrtImage =\n-                    (MultiResolutionToolkitImage) mrImage;\n+        if (mrImage instanceof MultiResolutionToolkitImage mrtImage) {\n@@ -128,4 +126,1 @@\n-        if (mrImage instanceof MultiResolutionCachedImage) {\n-            MultiResolutionCachedImage mrcImage\n-                    = (MultiResolutionCachedImage) mrImage;\n-\n+        if (mrImage instanceof MultiResolutionCachedImage mrcImage) {\n@@ -178,2 +173,2 @@\n-        if (image instanceof ToolkitImage) {\n-            return ((ToolkitImage) image).getImageRep().check(\n+        if (image instanceof ToolkitImage tki) {\n+            return tki.getImageRep().check(\n@@ -186,2 +181,2 @@\n-        if (availableInfo != 0 && image instanceof ToolkitImage) {\n-            ((ToolkitImage) image).preload(new ImageObserver() {\n+        if (availableInfo != 0 && image instanceof ToolkitImage tki) {\n+            tki.preload(new ImageObserver() {\n@@ -238,2 +233,1 @@\n-            if (obj instanceof ImageCacheKey) {\n-                ImageCacheKey key = (ImageCacheKey) obj;\n+            if (obj instanceof ImageCacheKey key) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/MultiResolutionCachedImage.java","additions":7,"deletions":13,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -135,2 +135,1 @@\n-        if (sampleModel instanceof BandedSampleModel) {\n-            BandedSampleModel bsm = (BandedSampleModel)sampleModel;\n+        if (sampleModel instanceof BandedSampleModel bsm) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/ShortBandedRaster.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -167,2 +167,1 @@\n-        if (sampleModel instanceof ComponentSampleModel) {\n-            ComponentSampleModel csm = (ComponentSampleModel)sampleModel;\n+        if (sampleModel instanceof ComponentSampleModel csm) {\n@@ -179,3 +178,1 @@\n-        } else if (sampleModel instanceof SinglePixelPackedSampleModel) {\n-            SinglePixelPackedSampleModel sppsm =\n-                    (SinglePixelPackedSampleModel)sampleModel;\n+        } else if (sampleModel instanceof SinglePixelPackedSampleModel sppsm) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/ShortComponentRaster.java","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -153,3 +153,1 @@\n-        } else if (sampleModel instanceof SinglePixelPackedSampleModel) {\n-            SinglePixelPackedSampleModel sppsm =\n-                    (SinglePixelPackedSampleModel)sampleModel;\n+        } else if (sampleModel instanceof SinglePixelPackedSampleModel sppsm) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/ShortInterleavedRaster.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -97,2 +97,2 @@\n-        if (wr instanceof SunWritableRaster) {\n-            ((SunWritableRaster) wr).markDirty();\n+        if (wr instanceof SunWritableRaster swr) {\n+            swr.markDirty();\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/SunWritableRaster.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -205,3 +205,2 @@\n-            if (tmpGc instanceof ProxiedGraphicsConfig) {\n-                Object proxyKey =\n-                    ((ProxiedGraphicsConfig) tmpGc).getProxyKey();\n+            if (tmpGc instanceof ProxiedGraphicsConfig pgc) {\n+                Object proxyKey = pgc.getProxyKey();\n@@ -251,3 +250,2 @@\n-                Object o = i.next();\n-                if (o instanceof FlushableCacheData) {\n-                    if (((FlushableCacheData) o).flush(deaccelerate)) {\n+                if (i.next() instanceof FlushableCacheData fcd) {\n+                    if (fcd.flush(deaccelerate)) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/SurfaceManager.java","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -68,2 +68,2 @@\n-        if (is instanceof InputStreamImageSource) {\n-            src = (InputStreamImageSource) is;\n+        if (is instanceof InputStreamImageSource isis) {\n+            src = isis;\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/ToolkitImage.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -138,2 +138,2 @@\n-            } else if (c instanceof HttpURLConnection) {\n-                ((HttpURLConnection)c).disconnect();\n+            } else if (c instanceof HttpURLConnection urlConnection) {\n+                urlConnection.disconnect();\n@@ -156,2 +156,2 @@\n-            } else if (c instanceof HttpURLConnection) {\n-                ((HttpURLConnection)c).disconnect();\n+            } else if (c instanceof HttpURLConnection urlConnection) {\n+                urlConnection.disconnect();\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/URLImageSource.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -111,2 +111,2 @@\n-        if (ge instanceof SunGraphicsEnvironment) {\n-            ((SunGraphicsEnvironment)ge).addDisplayChangedListener(this);\n+        if (ge instanceof SunGraphicsEnvironment sge) {\n+            sge.addDisplayChangedListener(this);\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/image\/VolatileSurfaceManager.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -259,2 +259,2 @@\n-        if (file instanceof ShellFolder) {\n-            return (ShellFolder)file;\n+        if (file instanceof ShellFolder shellFolder) {\n+            return shellFolder;\n@@ -343,2 +343,2 @@\n-                if (commonParent instanceof ShellFolder) {\n-                    ((ShellFolder) commonParent).sortChildren(files);\n+                if (commonParent instanceof ShellFolder shellFolder) {\n+                    shellFolder.sortChildren(files);\n@@ -452,2 +452,2 @@\n-        if (dir instanceof ShellFolder) {\n-            columns = ((ShellFolder) dir).getFolderColumns();\n+        if (dir instanceof ShellFolder shellFolder) {\n+            columns = shellFolder.getFolderColumns();\n@@ -478,2 +478,2 @@\n-        if (file instanceof ShellFolder) {\n-            Object value = ((ShellFolder)file).getFolderColumnValue(column);\n+        if (file instanceof ShellFolder shellFolder) {\n+            Object value = shellFolder.getFolderColumnValue(column);\n@@ -536,1 +536,1 @@\n-            if (e instanceof RuntimeException) {\n+            if (e instanceof RuntimeException ex) {\n@@ -538,1 +538,1 @@\n-                throw (RuntimeException) e;\n+                throw ex;\n@@ -541,1 +541,1 @@\n-            if (e instanceof InterruptedException) {\n+            if (e instanceof InterruptedException ex) {\n@@ -546,1 +546,1 @@\n-                throw (InterruptedException) e;\n+                throw ex;\n@@ -601,2 +601,2 @@\n-            if (f1 instanceof ShellFolder) {\n-                sf1 = (ShellFolder) f1;\n+            if (f1 instanceof ShellFolder sf) {\n+                sf1 = sf;\n@@ -607,2 +607,2 @@\n-            if (f2 instanceof ShellFolder) {\n-                sf2 = (ShellFolder) f2;\n+            if (f2 instanceof ShellFolder sf) {\n+                sf2 = sf;\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/shell\/ShellFolder.java","additions":16,"deletions":16,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -104,2 +104,1 @@\n-            if (f instanceof ShellFolder) {\n-                ShellFolder sf = (ShellFolder)f;\n+            if (f instanceof ShellFolder sf) {\n@@ -136,1 +135,1 @@\n-        if (dir instanceof ShellFolder && !((ShellFolder) dir).isFileSystem()) {\n+        if (dir instanceof ShellFolder shellFolder && !shellFolder.isFileSystem()) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/awt\/shell\/ShellFolderManager.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -314,3 +314,3 @@\n-        if (map instanceof AttributeMap &&\n-            ((AttributeMap) map).getValues() != null) {\n-            merge(((AttributeMap)map).getValues(), mask);\n+        if (map instanceof AttributeMap attributeMap &&\n+            attributeMap.getValues() != null) {\n+            merge(attributeMap.getValues(), mask);\n@@ -637,2 +637,1 @@\n-            if (o instanceof TransformAttribute) {\n-                TransformAttribute ta = (TransformAttribute)o;\n+            if (o instanceof TransformAttribute ta) {\n@@ -666,3 +665,2 @@\n-            if (o instanceof Annotation) {\n-                Annotation at = (Annotation)o;\n-                imHighlight = (InputMethodHighlight)at.getValue();\n+            if (o instanceof Annotation at) {\n+                imHighlight = at.getValue();\n@@ -670,1 +668,1 @@\n-                imHighlight = (InputMethodHighlight)o;\n+                imHighlight = o;\n@@ -762,3 +760,3 @@\n-            if (map instanceof AttributeMap &&\n-                ((AttributeMap) map).getValues() != null) {\n-                return ((AttributeMap)map).getValues().justification;\n+            if (map instanceof AttributeMap attributeMap &&\n+                attributeMap.getValues() != null) {\n+                return attributeMap.getValues().justification;\n@@ -766,2 +764,1 @@\n-            Object obj = map.get(TextAttribute.JUSTIFICATION);\n-            if (obj instanceof Number number) {\n+            if (map.get(TextAttribute.JUSTIFICATION) instanceof Number number) {\n@@ -776,3 +773,3 @@\n-            if (map instanceof AttributeMap &&\n-                ((AttributeMap) map).getValues() != null) {\n-                return ((AttributeMap)map).getValues().numericShaping;\n+            if (map instanceof AttributeMap attributeMap &&\n+                attributeMap.getValues() != null) {\n+                return attributeMap.getValues().numericShaping;\n@@ -780,2 +777,1 @@\n-            Object obj = map.get(TextAttribute.NUMERIC_SHAPING);\n-            if (obj instanceof NumericShaper shaper) {\n+            if (map.get(TextAttribute.NUMERIC_SHAPING) instanceof NumericShaper shaper) {\n@@ -794,3 +790,3 @@\n-            InputMethodHighlight hl = null;\n-            if (imHighlight instanceof InputMethodHighlight) {\n-                hl = (InputMethodHighlight)imHighlight;\n+            InputMethodHighlight hl;\n+            if (imHighlight instanceof InputMethodHighlight highlight) {\n+                hl = highlight;\n@@ -819,3 +815,3 @@\n-            if (map instanceof AttributeMap &&\n-                ((AttributeMap) map).getValues() != null) {\n-                av = ((AttributeMap)map).getValues();\n+            if (map instanceof AttributeMap attributeMap &&\n+                attributeMap.getValues() != null) {\n+                av = attributeMap.getValues();\n@@ -836,3 +832,3 @@\n-            if (map instanceof AttributeMap &&\n-                ((AttributeMap) map).getValues() != null) {\n-                av = ((AttributeMap)map).getValues();\n+            if (map instanceof AttributeMap attributeMap &&\n+                attributeMap.getValues() != null) {\n+                av = attributeMap.getValues();\n","filename":"src\/java.desktop\/share\/classes\/sun\/font\/AttributeValues.java","additions":24,"deletions":28,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -306,2 +306,1 @@\n-                        if (background instanceof Color) {\n-                            Color bg = (Color)background;\n+                        if (background instanceof Color bg) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/font\/Decoration.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -217,2 +217,2 @@\n-            if (!(key instanceof MetricsKey)) {\n-                return false;\n+            if (key instanceof MetricsKey metricsKey) {\n+                return font.equals(metricsKey.font) && frc.equals(metricsKey.frc);\n@@ -220,3 +220,1 @@\n-            return\n-                font.equals(((MetricsKey)key).font) &&\n-                frc.equals(((MetricsKey)key).frc);\n+            return false;\n","filename":"src\/java.desktop\/share\/classes\/sun\/font\/FontDesignMetrics.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -112,1 +112,1 @@\n-        if (!(font instanceof FileFont)) {\n+        if (!(font instanceof FileFont newFont)) {\n@@ -117,8 +117,8 @@\n-        if (plain instanceof FileFont) {\n-            existingFont = (FileFont)plain;\n-        } else if (bold instanceof FileFont) {\n-            existingFont = (FileFont)bold;\n-        } else if (italic instanceof FileFont) {\n-             existingFont = (FileFont)italic;\n-        } else if (bolditalic instanceof FileFont) {\n-             existingFont = (FileFont)bolditalic;\n+        if (plain instanceof FileFont fileFont) {\n+            existingFont = fileFont;\n+        } else if (bold instanceof FileFont fileFont) {\n+            existingFont = fileFont;\n+        } else if (italic instanceof FileFont fileFont) {\n+             existingFont = fileFont;\n+        } else if (bolditalic instanceof FileFont fileFont) {\n+             existingFont = fileFont;\n@@ -134,1 +134,0 @@\n-        FileFont newFont = (FileFont)font;\n","filename":"src\/java.desktop\/share\/classes\/sun\/font\/FontFamily.java","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -401,1 +401,1 @@\n-        if (!(font2D instanceof PhysicalFont)) {\n+        if (!(font2D instanceof PhysicalFont physicalFont)) {\n@@ -419,1 +419,0 @@\n-        PhysicalFont physicalFont = (PhysicalFont)font2D;\n@@ -483,5 +482,2 @@\n-        FontUIResource fuir;\n-        FontManager fm = FontManagerFactory.getInstance();\n-        if (fm instanceof SunFontManager) {\n-            SunFontManager sfm = (SunFontManager) fm;\n-            fuir = sfm.getFontConfigFUIR(mapped, style, size);\n+        if (FontManagerFactory.getInstance() instanceof SunFontManager sfm) {\n+            return sfm.getFontConfigFUIR(mapped, style, size);\n@@ -489,1 +485,1 @@\n-            fuir = new FontUIResource(mapped, style, size);\n+            return new FontUIResource(mapped, style, size);\n@@ -491,1 +487,0 @@\n-        return fuir;\n@@ -503,4 +498,1 @@\n-\n-        Font2D font2D = getFont2D(font);\n-        if (font2D instanceof TrueTypeFont) {\n-            TrueTypeFont ttf = (TrueTypeFont) font2D;\n+        if (getFont2D(font) instanceof TrueTypeFont ttf) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/font\/FontUtilities.java","additions":5,"deletions":13,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -404,2 +404,2 @@\n-        if (font2D instanceof FontSubstitution) {\n-            font2D = ((FontSubstitution)font2D).getCompositeFont2D();\n+        if (font2D instanceof FontSubstitution substitution) {\n+            font2D = substitution.getCompositeFont2D();\n@@ -410,1 +410,1 @@\n-        if (font2D instanceof CompositeFont) {\n+        if (font2D instanceof CompositeFont composite) {\n@@ -412,1 +412,1 @@\n-            _fontRuns.init((CompositeFont)font2D, text, offset, lim);\n+            _fontRuns.init(composite, text, offset, lim);\n@@ -424,2 +424,2 @@\n-                    if (pfont instanceof NativeFont) {\n-                        pfont = ((NativeFont)pfont).getDelegateFont();\n+                    if (pfont instanceof NativeFont nativeFont) {\n+                        pfont = nativeFont.getDelegateFont();\n","filename":"src\/java.desktop\/share\/classes\/sun\/font\/GlyphLayout.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -280,2 +280,2 @@\n-        if (gv instanceof StandardGlyphVector) {\n-            return (StandardGlyphVector)gv;\n+        if (gv instanceof StandardGlyphVector standardVector) {\n+            return standardVector;\n@@ -1110,2 +1110,2 @@\n-        if (font2D instanceof FontSubstitution) {\n-           font2D = ((FontSubstitution)font2D).getCompositeFont2D();\n+        if (font2D instanceof FontSubstitution substitution) {\n+           font2D = substitution.getCompositeFont2D();\n@@ -1733,2 +1733,2 @@\n-        if (f2d instanceof FontSubstitution) {\n-           f2d = ((FontSubstitution)f2d).getCompositeFont2D();\n+        if (f2d instanceof FontSubstitution substitution) {\n+           f2d = substitution.getCompositeFont2D();\n","filename":"src\/java.desktop\/share\/classes\/sun\/font\/StandardGlyphVector.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -291,2 +291,1 @@\n-            if (gc instanceof AccelGraphicsConfig) {\n-                AccelGraphicsConfig agc = (AccelGraphicsConfig)gc;\n+            if (gc instanceof AccelGraphicsConfig agc) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/font\/StrikeCache.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -456,1 +456,1 @@\n-        if (!(handle.font2D instanceof CompositeFont)) {\n+        if (!(handle.font2D instanceof CompositeFont oldComp)) {\n@@ -460,1 +460,0 @@\n-        CompositeFont oldComp = (CompositeFont)handle.font2D;\n@@ -662,4 +661,2 @@\n-                    if (oldFont instanceof TrueTypeFont &&\n-                        newFont instanceof TrueTypeFont) {\n-                        TrueTypeFont oldTTFont = (TrueTypeFont)oldFont;\n-                        TrueTypeFont newTTFont = (TrueTypeFont)newFont;\n+                    if (oldFont instanceof TrueTypeFont oldTTFont &&\n+                        newFont instanceof TrueTypeFont newTTFont) {\n@@ -1017,2 +1014,2 @@\n-                if (font2d instanceof PhysicalFont) {\n-                    defaultPhysicalFont = (PhysicalFont)font2d;\n+                if (font2d instanceof PhysicalFont physicalFont) {\n+                    defaultPhysicalFont = physicalFont;\n@@ -2321,4 +2318,1 @@\n-        if (!(font2D instanceof PhysicalFont)) {\n-            \/* We should never reach here, but just in case *\/\n-            return;\n-        } else {\n+        if (font2D instanceof PhysicalFont physicalFont) {\n@@ -2328,1 +2322,3 @@\n-            replaceFont((PhysicalFont)font2D, getDefaultPhysicalFont());\n+            replaceFont(physicalFont, getDefaultPhysicalFont());\n+        } else {\n+            \/* We should never reach here, but just in case *\/\n@@ -2439,2 +2435,1 @@\n-            if (fonts[i] instanceof TrueTypeFont) {\n-                TrueTypeFont ttf = (TrueTypeFont)fonts[i];\n+            if (fonts[i] instanceof TrueTypeFont ttf) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/font\/SunFontManager.java","additions":10,"deletions":15,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -223,2 +223,2 @@\n-            if (t instanceof FontFormatException) {\n-                throw (FontFormatException)t;\n+            if (t instanceof FontFormatException e) {\n+                throw e;\n@@ -260,3 +260,2 @@\n-                    FontManager fm = FontManagerFactory.getInstance();\n-                    if (fm instanceof SunFontManager) {\n-                        ((SunFontManager) fm).addToPool(this);\n+                    if (FontManagerFactory.getInstance() instanceof SunFontManager sfm) {\n+                        sfm.addToPool(this);\n@@ -532,2 +531,2 @@\n-            if (e instanceof FontFormatException) {\n-                throw (FontFormatException)e;\n+            if (e instanceof FontFormatException ex) {\n+                throw ex;\n","filename":"src\/java.desktop\/share\/classes\/sun\/font\/TrueTypeFont.java","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -179,2 +179,2 @@\n-            if (t instanceof FontFormatException) {\n-                throw (FontFormatException)t;\n+            if (t instanceof FontFormatException e) {\n+                throw e;\n","filename":"src\/java.desktop\/share\/classes\/sun\/font\/Type1Font.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -130,2 +130,2 @@\n-        if (target instanceof DisposerTarget) {\n-            target = ((DisposerTarget)target).getDisposerReferent();\n+        if (target instanceof DisposerTarget disposer) {\n+            target = disposer.getDisposerReferent();\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/Disposer.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -105,2 +105,2 @@\n-        if (src1 instanceof WritableRaster) {\n-            src = (WritableRaster) src1;\n+        if (src1 instanceof WritableRaster raster) {\n+            src = raster;\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/SunCompositeContext.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -456,7 +456,8 @@\n-        if (s1 instanceof Rectangle && s2 instanceof Rectangle) {\n-            return ((Rectangle) s1).intersection((Rectangle) s2);\n-        }\n-        if (s1 instanceof Rectangle2D) {\n-            return intersectRectShape((Rectangle2D) s1, s2, keep1, keep2);\n-        } else if (s2 instanceof Rectangle2D) {\n-            return intersectRectShape((Rectangle2D) s2, s1, keep2, keep1);\n+        if (s1 instanceof Rectangle r1 && s2 instanceof Rectangle r2) {\n+            return r1.intersection(r2);\n+        } else if (s1 instanceof Rectangle2D r2d) {\n+            return intersectRectShape(r2d, s2, keep1, keep2);\n+        } else if (s2 instanceof Rectangle2D r2d) {\n+            return intersectRectShape(r2d, s1, keep2, keep1);\n+        } else {\n+            return intersectByArea(s1, s2, keep1, keep2);\n@@ -464,1 +465,0 @@\n-        return intersectByArea(s1, s2, keep1, keep2);\n@@ -476,2 +476,1 @@\n-        if (s instanceof Rectangle2D) {\n-            Rectangle2D r2 = (Rectangle2D) s;\n+        if (s instanceof Rectangle2D r2) {\n@@ -527,4 +526,4 @@\n-        if (!keep1 && (s1 instanceof Area)) {\n-            a1 = (Area) s1;\n-        } else if (!keep2 && (s2 instanceof Area)) {\n-            a1 = (Area) s2;\n+        if (!keep1 && s1 instanceof Area area) {\n+            a1 = area;\n+        } else if (!keep2 && s2 instanceof Area area) {\n+            a1 = area;\n@@ -536,2 +535,2 @@\n-        if (s2 instanceof Area) {\n-            a2 = (Area) s2;\n+        if (s2 instanceof Area area) {\n+            a2 = area;\n@@ -947,2 +946,1 @@\n-        if (comp instanceof AlphaComposite) {\n-            AlphaComposite alphacomp = (AlphaComposite) comp;\n+        if (comp instanceof AlphaComposite alphacomp) {\n@@ -1004,2 +1002,2 @@\n-        if (paint instanceof Color) {\n-            setColor((Color) paint);\n+        if (paint instanceof Color color) {\n+            setColor(color);\n@@ -1166,2 +1164,2 @@\n-        if (s instanceof BasicStroke) {\n-            validateBasicStroke((BasicStroke) s);\n+        if (s instanceof BasicStroke stroke) {\n+            validateBasicStroke(stroke);\n@@ -1197,1 +1195,1 @@\n-        if (hintKey instanceof SunHints.Key) {\n+        if (hintKey instanceof SunHints.Key sunKey) {\n@@ -1201,1 +1199,0 @@\n-            SunHints.Key sunKey = (SunHints.Key) hintKey;\n@@ -1826,2 +1823,2 @@\n-                if (usrClip instanceof Rectangle) {\n-                    r.setBounds((Rectangle) usrClip);\n+                if (usrClip instanceof Rectangle rect) {\n+                    r.setBounds(rect);\n@@ -1905,1 +1902,1 @@\n-        } else if (usrClip instanceof Rectangle2D) {\n+        } else if (usrClip instanceof Rectangle2D rect) {\n@@ -1907,1 +1904,1 @@\n-            clipRegion = devClip.getIntersection((Rectangle2D) usrClip);\n+            clipRegion = devClip.getIntersection(rect);\n@@ -1972,2 +1969,1 @@\n-        if (s instanceof Rectangle2D) {\n-            Rectangle2D rect = (Rectangle2D) s;\n+        if (s instanceof Rectangle2D rect) {\n@@ -1993,1 +1989,1 @@\n-        if (clip instanceof Rectangle2D &&\n+        if (clip instanceof Rectangle2D rect &&\n@@ -1996,1 +1992,0 @@\n-            Rectangle2D rect = (Rectangle2D) clip;\n@@ -2461,3 +2456,2 @@\n-            if (composite instanceof XORComposite) {\n-                Color c = ((XORComposite) composite).getXorColor();\n-                setComposite(new XORComposite(c, surfaceData));\n+            if (composite instanceof XORComposite xorComposite) {\n+                setComposite(new XORComposite(xorComposite.getXorColor(), surfaceData));\n@@ -2664,3 +2658,2 @@\n-        if (img instanceof BufferedImage) {\n-            BufferedImage bufImg = (BufferedImage)img;\n-            drawImage(bufImg,xform,null);\n+        if (img instanceof BufferedImage bufImg) {\n+            drawImage(bufImg, xform, null);\n@@ -2838,2 +2831,2 @@\n-                if (raster instanceof WritableRaster) {\n-                    wRaster = (WritableRaster)raster;\n+                if (raster instanceof WritableRaster writableRaster) {\n+                    wRaster = writableRaster;\n@@ -3126,1 +3119,1 @@\n-            } else if (img instanceof MultiResolutionImage) {\n+            } else if (img instanceof MultiResolutionImage mrImage) {\n@@ -3132,1 +3125,0 @@\n-                MultiResolutionImage mrImage = (MultiResolutionImage) img;\n@@ -3307,2 +3299,1 @@\n-        if (resolutionVariant instanceof ToolkitImage\n-                && ((ToolkitImage) resolutionVariant).hasError()) {\n+        if (resolutionVariant instanceof ToolkitImage tki && tki.hasError()) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/SunGraphics2D.java","additions":35,"deletions":44,"binary":false,"changes":79,"status":"modified"},{"patch":"@@ -222,2 +222,2 @@\n-            if (gd instanceof DisplayChangedListener) {\n-                ((DisplayChangedListener) gd).displayChanged();\n+            if (gd instanceof DisplayChangedListener dcl) {\n+                dcl.displayChanged();\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/SunGraphicsEnvironment.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -334,2 +334,2 @@\n-        if (ge instanceof SunGraphicsEnvironment) {\n-            ((SunGraphicsEnvironment)ge).addDisplayChangedListener(this);\n+        if (ge instanceof SunGraphicsEnvironment sge) {\n+            sge.addDisplayChangedListener(this);\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/SurfaceDataProxy.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -57,2 +57,4 @@\n-        if (p instanceof LCMSProfile) {\n-            return (LCMSProfile)p;\n+        if (p instanceof LCMSProfile profile) {\n+            return profile;\n+        } else {\n+            throw new CMMException(\"Invalid profile: \" + p);\n@@ -60,1 +62,0 @@\n-        throw new CMMException(\"Invalid profile: \" + p);\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/cmm\/lcms\/LCMS.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -204,3 +204,1 @@\n-                if (!cm.hasAlpha() && cm instanceof ComponentColorModel) {\n-                    ComponentColorModel ccm = (ComponentColorModel) cm;\n-\n+                if (!cm.hasAlpha() && cm instanceof ComponentColorModel ccm) {\n@@ -378,5 +376,2 @@\n-        if (r instanceof ByteComponentRaster &&\n-                r.getSampleModel() instanceof ComponentSampleModel) {\n-            ByteComponentRaster br = (ByteComponentRaster)r;\n-\n-            ComponentSampleModel csm = (ComponentSampleModel)r.getSampleModel();\n+        if (r instanceof ByteComponentRaster br &&\n+                r.getSampleModel() instanceof ComponentSampleModel csm) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/cmm\/lcms\/LCMSImageLayout.java","additions":3,"deletions":8,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -285,2 +285,4 @@\n-        if (o instanceof CompositeType) {\n-            return (((CompositeType) o).uniqueID == this.uniqueID);\n+        if (o instanceof CompositeType compositeType) {\n+            return compositeType.uniqueID == this.uniqueID;\n+        } else {\n+            return false;\n@@ -288,1 +290,0 @@\n-        return false;\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/CompositeType.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -252,2 +252,2 @@\n-            if (prim instanceof GraphicsPrimitiveProxy) {\n-                prim = ((GraphicsPrimitiveProxy) prim).instantiate();\n+            if (prim instanceof GraphicsPrimitiveProxy proxy) {\n+                prim = proxy.instantiate();\n@@ -296,2 +296,2 @@\n-            if (p instanceof GraphicsPrimitiveProxy) {\n-                GraphicsPrimitive r = ((GraphicsPrimitiveProxy) p).instantiate();\n+            if (p instanceof GraphicsPrimitiveProxy proxy) {\n+                GraphicsPrimitive r = proxy.instantiate();\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/GraphicsPrimitiveMgr.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -449,2 +449,4 @@\n-        if (o instanceof SurfaceType) {\n-            return (((SurfaceType) o).uniqueID == this.uniqueID);\n+        if (o instanceof SurfaceType surfaceType) {\n+            return surfaceType.uniqueID == this.uniqueID;\n+        } else {\n+            return false;\n@@ -452,1 +454,0 @@\n-        return false;\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/loops\/SurfaceType.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -55,2 +55,2 @@\n-        if (biop instanceof ConvolveOp) {\n-            if (!isConvolveOpValid((ConvolveOp)biop)) {\n+        if (biop instanceof ConvolveOp convolveOp) {\n+            if (!isConvolveOpValid(convolveOp)) {\n@@ -59,2 +59,2 @@\n-        } else if (biop instanceof RescaleOp) {\n-            if (!isRescaleOpValid((RescaleOp)biop, img)) {\n+        } else if (biop instanceof RescaleOp rescaleOp) {\n+            if (!isRescaleOpValid(rescaleOp, img)) {\n@@ -63,2 +63,2 @@\n-        } else if (biop instanceof LookupOp) {\n-            if (!isLookupOpValid((LookupOp)biop, img)) {\n+        } else if (biop instanceof LookupOp lookupOp) {\n+            if (!isLookupOpValid(lookupOp, img)) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/opengl\/OGLBufImgOps.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -98,2 +98,1 @@\n-            if (op instanceof AffineTransformOp) {\n-                AffineTransformOp atop = (AffineTransformOp) op;\n+            if (op instanceof AffineTransformOp atop) {\n@@ -104,4 +103,2 @@\n-            } else {\n-                if (OGLBufImgOps.renderImageWithOp(sg, img, op, x, y)) {\n-                    return;\n-                }\n+            } else if (OGLBufImgOps.renderImageWithOp(sg, img, op, x, y)) {\n+                return;\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/opengl\/OGLDrawImage.java","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -413,3 +413,1 @@\n-        if (c instanceof AlphaComposite) {\n-            AlphaComposite ac = (AlphaComposite)c;\n-\n+        if (c instanceof AlphaComposite ac) {\n@@ -417,0 +415,2 @@\n+        } else {\n+            return false;\n@@ -418,1 +418,0 @@\n-        return false;\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/opengl\/OGLSurfaceData.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -99,1 +99,9 @@\n-                if (!(g instanceof SunGraphics2D)) {\n+                if (g instanceof SunGraphics2D g2d) {\n+                    SurfaceData sData = g2d.surfaceData;\n+                    if (sData instanceof OGLSurfaceData surfaceData) {\n+                        \/\/ make a context current to the destination surface\n+                        OGLContext.validateContext(surfaceData);\n+                    } else {\n+                        return false;\n+                    }\n+                } else {\n@@ -102,7 +110,0 @@\n-                SurfaceData sData = ((SunGraphics2D)g).surfaceData;\n-                if (!(sData instanceof OGLSurfaceData)) {\n-                    return false;\n-                }\n-\n-                \/\/ make a context current to the destination surface\n-                OGLContext.validateContext((OGLSurfaceData)sData);\n@@ -151,1 +152,1 @@\n-        if (!(config instanceof OGLGraphicsConfig)) {\n+        if (!(config instanceof OGLGraphicsConfig oglConfig)) {\n@@ -159,1 +160,1 @@\n-            OGLContext.setScratchSurface((OGLGraphicsConfig)config);\n+            OGLContext.setScratchSurface(oglConfig);\n@@ -198,1 +199,1 @@\n-        if (!(g instanceof SunGraphics2D)) {\n+        if (!(g instanceof SunGraphics2D sg2d)) {\n@@ -202,1 +203,0 @@\n-        SunGraphics2D sg2d = (SunGraphics2D)g;\n@@ -239,1 +239,1 @@\n-        if (!(g instanceof SunGraphics2D)) {\n+        if (!(g instanceof SunGraphics2D sg2d)) {\n@@ -243,1 +243,0 @@\n-        SunGraphics2D sg2d = (SunGraphics2D)g;\n@@ -284,1 +283,3 @@\n-        if (!(g instanceof SunGraphics2D)) {\n+        if (g instanceof SunGraphics2D g2d) {\n+            return g2d.surfaceData;\n+        } else {\n@@ -287,1 +288,0 @@\n-        return ((SunGraphics2D)g).surfaceData;\n@@ -303,6 +303,2 @@\n-        if (!(g instanceof SunGraphics2D)) {\n-            return UNDEFINED;\n-        }\n-        SurfaceData sData = ((SunGraphics2D)g).surfaceData;\n-        if (!(sData instanceof OGLSurfaceData)) {\n-            return UNDEFINED;\n+        if (g instanceof SunGraphics2D g2d && g2d.surfaceData instanceof OGLSurfaceData ogl) {\n+            return ogl.getType();\n@@ -310,1 +306,2 @@\n-        return ((OGLSurfaceData)sData).getType();\n+\n+        return UNDEFINED;\n@@ -328,6 +325,5 @@\n-        if (!(g instanceof SunGraphics2D)) {\n-            return 0;\n-        }\n-        SurfaceData sData = ((SunGraphics2D)g).surfaceData;\n-        if (!(sData instanceof OGLSurfaceData)) {\n-            return 0;\n+        if (g instanceof SunGraphics2D g2d) {\n+            SurfaceData sData = g2d.surfaceData;\n+            if (sData instanceof OGLSurfaceData ogl) {\n+                return ogl.getTextureTarget();\n+            }\n@@ -335,1 +331,2 @@\n-        return ((OGLSurfaceData)sData).getTextureTarget();\n+\n+        return 0;\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/opengl\/OGLUtilities.java","additions":27,"deletions":30,"binary":false,"changes":57,"status":"modified"},{"patch":"@@ -68,4 +68,2 @@\n-        final BasicStroke bs;\n-\n-        if (sg.stroke instanceof BasicStroke) {\n-            bs = (BasicStroke) sg.stroke;\n+        if (sg.stroke instanceof BasicStroke basicStroke) {\n+            renderPath(sg, s, basicStroke);\n@@ -73,2 +71,1 @@\n-            s = sg.stroke.createStrokedShape(s);\n-            bs = null;\n+            renderPath(sg, sg.stroke.createStrokedShape(s), null);\n@@ -76,2 +73,0 @@\n-\n-        renderPath(sg, s, bs);\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/pipe\/AAShapePipe.java","additions":3,"deletions":8,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -49,6 +49,6 @@\n-        if (biop instanceof ConvolveOp) {\n-            enableConvolveOp(rq, srcData, (ConvolveOp)biop);\n-        } else if (biop instanceof RescaleOp) {\n-            enableRescaleOp(rq, srcData, srcImg, (RescaleOp)biop);\n-        } else if (biop instanceof LookupOp) {\n-            enableLookupOp(rq, srcData, srcImg, (LookupOp)biop);\n+        if (biop instanceof ConvolveOp convolveOp) {\n+            enableConvolveOp(rq, srcData, convolveOp);\n+        } else if (biop instanceof RescaleOp rescaleOp) {\n+            enableRescaleOp(rq, srcData, srcImg, rescaleOp);\n+        } else if (biop instanceof LookupOp lookupOp) {\n+            enableLookupOp(rq, srcData, srcImg, lookupOp);\n@@ -299,2 +299,2 @@\n-        if (table instanceof ByteLookupTable) {\n-            byte[][] data = ((ByteLookupTable)table).getTable();\n+        if (table instanceof ByteLookupTable blt) {\n+            byte[][] data = blt.getTable();\n@@ -308,2 +308,2 @@\n-        } else if (table instanceof ShortLookupTable) {\n-            short[][] data = ((ShortLookupTable)table).getTable();\n+        } else if (table instanceof ShortLookupTable slt) {\n+            short[][] data = slt.getTable();\n@@ -341,2 +341,2 @@\n-        if (table instanceof ShortLookupTable) {\n-            short[][] data = ((ShortLookupTable)table).getTable();\n+        if (table instanceof ShortLookupTable slt) {\n+            short[][] data = slt.getTable();\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/pipe\/BufferedBufImgOps.java","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -203,1 +203,1 @@\n-        if (paint instanceof Color) {\n+        if (paint instanceof Color color) {\n@@ -205,1 +205,1 @@\n-            int newRGB = ((Color)paint).getRGB();\n+            int newRGB = color.getRGB();\n@@ -389,2 +389,1 @@\n-        if (comp instanceof AlphaComposite) {\n-            AlphaComposite ac = (AlphaComposite)comp;\n+        if (comp instanceof AlphaComposite composite) {\n@@ -393,2 +392,2 @@\n-            buf.putInt(ac.getRule());\n-            buf.putFloat(ac.getAlpha());\n+            buf.putInt(composite.getRule());\n+            buf.putFloat(composite.getAlpha());\n@@ -396,2 +395,2 @@\n-        } else if (comp instanceof XORComposite) {\n-            int xorPixel = ((XORComposite)comp).getXorPixel();\n+        } else if (comp instanceof XORComposite composite) {\n+            int xorPixel = composite.getXorPixel();\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/pipe\/BufferedContext.java","additions":7,"deletions":8,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -512,6 +512,3 @@\n-            if (s instanceof Polygon) {\n-                if (sg2d.transformState < SunGraphics2D.TRANSFORM_TRANSLATESCALE) {\n-                    Polygon p = (Polygon)s;\n-                    drawPolygon(sg2d, p.xpoints, p.ypoints, p.npoints);\n-                    return;\n-                }\n+            if (s instanceof Polygon p && sg2d.transformState < SunGraphics2D.TRANSFORM_TRANSLATESCALE) {\n+                drawPolygon(sg2d, p.xpoints, p.ypoints, p.npoints);\n+                return;\n@@ -522,2 +519,2 @@\n-                if (s instanceof Path2D.Float) {\n-                    p2df = (Path2D.Float)s;\n+                if (s instanceof Path2D.Float f) {\n+                    p2df = f;\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/pipe\/BufferedRenderPipe.java","additions":5,"deletions":8,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -833,2 +833,5 @@\n-        if (img instanceof BufferedImage) {\n-            return (BufferedImage)img;\n+        if (img instanceof BufferedImage bufferedImage) {\n+            return bufferedImage;\n+        } else {\n+            \/\/ Must be VolatileImage; get BufferedImage representation\n+            return ((VolatileImage) img).getSnapshot();\n@@ -836,2 +839,0 @@\n-        \/\/ Must be VolatileImage; get BufferedImage representation\n-        return ((VolatileImage)img).getSnapshot();\n@@ -869,1 +870,1 @@\n-            if (cm instanceof IndexColorModel) {\n+            if (cm instanceof IndexColorModel icm) {\n@@ -871,1 +872,0 @@\n-                IndexColorModel icm = (IndexColorModel) cm;\n@@ -1040,5 +1040,2 @@\n-        if (!(img instanceof ToolkitImage)) {\n-            return copyImage(sg, img, x, y, bgColor);\n-        } else {\n-            ToolkitImage sunimg = (ToolkitImage)img;\n-            if (!imageReady(sunimg, observer)) {\n+        if (img instanceof ToolkitImage tki) {\n+            if (!imageReady(tki, observer)) {\n@@ -1047,2 +1044,3 @@\n-            ImageRepresentation ir = sunimg.getImageRep();\n-            return ir.drawToBufImage(sg, sunimg, x, y, bgColor, observer);\n+            return tki.getImageRep().drawToBufImage(sg, tki, x, y, bgColor, observer);\n+        } else {\n+            return copyImage(sg, img, x, y, bgColor);\n@@ -1056,5 +1054,2 @@\n-        if (!(img instanceof ToolkitImage)) {\n-            return copyImage(sg, img, dx, dy, sx, sy, w, h, bgColor);\n-        } else {\n-            ToolkitImage sunimg = (ToolkitImage)img;\n-            if (!imageReady(sunimg, observer)) {\n+        if (img instanceof ToolkitImage tki) {\n+            if (!imageReady(tki, observer)) {\n@@ -1063,2 +1058,1 @@\n-            ImageRepresentation ir = sunimg.getImageRep();\n-            return ir.drawToBufImage(sg, sunimg,\n+            return tki.getImageRep().drawToBufImage(sg, tki,\n@@ -1068,0 +1062,2 @@\n+        } else {\n+            return copyImage(sg, img, dx, dy, sx, sy, w, h, bgColor);\n@@ -1076,5 +1072,2 @@\n-        if (!(img instanceof ToolkitImage)) {\n-            return scaleImage(sg, img, x, y, width, height, bgColor);\n-        } else {\n-            ToolkitImage sunimg = (ToolkitImage)img;\n-            if (!imageReady(sunimg, observer)) {\n+        if (img instanceof ToolkitImage tki) {\n+            if (!imageReady(tki, observer)) {\n@@ -1083,3 +1076,4 @@\n-            ImageRepresentation ir = sunimg.getImageRep();\n-            return ir.drawToBufImage(sg, sunimg, x, y, width, height, bgColor,\n-                                     observer);\n+            return tki.getImageRep().drawToBufImage(sg, tki, x, y,\n+                    width, height, bgColor, observer);\n+        } else {\n+            return scaleImage(sg, img, x, y, width, height, bgColor);\n@@ -1094,6 +1088,2 @@\n-        if (!(img instanceof ToolkitImage)) {\n-            return scaleImage(sg, img, dx1, dy1, dx2, dy2,\n-                              sx1, sy1, sx2, sy2, bgColor);\n-        } else {\n-            ToolkitImage sunimg = (ToolkitImage)img;\n-            if (!imageReady(sunimg, observer)) {\n+        if (img instanceof ToolkitImage tki) {\n+            if (!imageReady(tki, observer)) {\n@@ -1102,2 +1092,1 @@\n-            ImageRepresentation ir = sunimg.getImageRep();\n-            return ir.drawToBufImage(sg, sunimg, dx1, dy1, dx2, dy2,\n+            return tki.getImageRep().drawToBufImage(sg, tki, dx1, dy1, dx2, dy2,\n@@ -1105,0 +1094,3 @@\n+        } else {\n+            return scaleImage(sg, img, dx1, dy1, dx2, dy2,\n+                              sx1, sy1, sx2, sy2, bgColor);\n@@ -1111,6 +1103,2 @@\n-        if (!(img instanceof ToolkitImage)) {\n-            transformImage(sg, img, 0, 0, atfm, sg.interpolationType);\n-            return true;\n-        } else {\n-            ToolkitImage sunimg = (ToolkitImage)img;\n-            if (!imageReady(sunimg, observer)) {\n+        if (img instanceof ToolkitImage tki) {\n+            if (!imageReady(tki, observer)) {\n@@ -1119,2 +1107,4 @@\n-            ImageRepresentation ir = sunimg.getImageRep();\n-            return ir.drawToBufImage(sg, sunimg, atfm, observer);\n+            return tki.getImageRep().drawToBufImage(sg, tki, atfm, observer);\n+        } else {\n+            transformImage(sg, img, 0, 0, atfm, sg.interpolationType);\n+            return true;\n@@ -1128,2 +1118,1 @@\n-            if (op instanceof AffineTransformOp) {\n-                AffineTransformOp atop = (AffineTransformOp) op;\n+            if (op instanceof AffineTransformOp atop) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/pipe\/DrawImage.java","additions":35,"deletions":46,"binary":false,"changes":81,"status":"modified"},{"patch":"@@ -101,2 +101,2 @@\n-        if (dstRaster instanceof WritableRaster && atile == null) {\n-            dstOut = (WritableRaster) dstRaster;\n+        if (dstRaster instanceof WritableRaster writableRaster && atile == null) {\n+            dstOut = writableRaster;\n@@ -113,2 +113,2 @@\n-            if (dstRaster instanceof WritableRaster && atile == null) {\n-                ((WritableRaster) dstRaster).setDataElements(x, y, dstOut);\n+            if (dstRaster instanceof WritableRaster writableRaster && atile == null) {\n+                writableRaster.setDataElements(x, y, dstOut);\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/pipe\/GeneralCompositePipe.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -173,2 +173,2 @@\n-                if (s instanceof Path2D.Float) {\n-                    p2df = (Path2D.Float)s;\n+                if (s instanceof Path2D.Float f) {\n+                    p2df = f;\n@@ -291,2 +291,2 @@\n-                if (s instanceof Path2D.Float) {\n-                    p2df = (Path2D.Float)s;\n+                if (s instanceof Path2D.Float f) {\n+                    p2df = f;\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/pipe\/LoopPipe.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -122,1 +122,1 @@\n-            if (s instanceof Rectangle2D) {\n+            if (s instanceof Rectangle2D r2d) {\n@@ -126,1 +126,0 @@\n-                    Rectangle2D r2d = (Rectangle2D) s;\n@@ -137,2 +136,1 @@\n-            } else if (s instanceof Line2D) {\n-                Line2D l2d = (Line2D) s;\n+            } else if (s instanceof Line2D l2d) {\n@@ -152,2 +150,1 @@\n-        if (s instanceof Rectangle2D) {\n-            Rectangle2D r2d = (Rectangle2D) s;\n+        if (s instanceof Rectangle2D r2d) {\n@@ -161,1 +158,2 @@\n-            return;\n+        } else {\n+            outpipe.fill(sg2d, s);\n@@ -163,2 +161,0 @@\n-\n-        outpipe.fill(sg2d, s);\n@@ -234,1 +230,1 @@\n-                outrenderer instanceof PixelDrawPipe)\n+                outrenderer instanceof PixelDrawPipe drawPipe)\n@@ -242,1 +238,1 @@\n-                ((PixelDrawPipe)outrenderer).drawLine(sg2d, ix1, iy1, ix2, iy2);\n+                drawPipe.drawLine(sg2d, ix1, iy1, ix2, iy2);\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/pipe\/PixelToParallelogramConverter.java","additions":7,"deletions":11,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -264,3 +264,1 @@\n-        if (s instanceof RectangularShape &&\n-                ((RectangularShape)s).isEmpty())\n-        {\n+        if (s instanceof RectangularShape shape && shape.isEmpty()) {\n@@ -597,2 +595,4 @@\n-        if (r instanceof Rectangle) {\n-            return getIntersection((Rectangle) r);\n+        if (r instanceof Rectangle rect) {\n+            return getIntersection(rect);\n+        } else {\n+            return getIntersectionXYXY(r.getMinX(), r.getMinY(), r.getMaxX(), r.getMaxY());\n@@ -600,2 +600,0 @@\n-        return getIntersectionXYXY(r.getMinX(), r.getMinY(), r.getMaxX(),\n-                                   r.getMaxY());\n@@ -1376,1 +1374,1 @@\n-        if (!(o instanceof Region)) {\n+        if (!(o instanceof Region r)) {\n@@ -1379,1 +1377,0 @@\n-        Region r = (Region) o;\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/pipe\/Region.java","additions":6,"deletions":9,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -103,1 +103,1 @@\n-        if (s instanceof Rectangle2D &&\n+        if (s instanceof Rectangle2D rect &&\n@@ -106,12 +106,11 @@\n-            renderRect(sg, (Rectangle2D) s);\n-            return;\n-        }\n-\n-        Region clipRegion = sg.getCompClip();\n-        ShapeSpanIterator sr = LoopPipe.getFillSSI(sg);\n-        try {\n-            sr.setOutputArea(clipRegion);\n-            sr.appendPath(s.getPathIterator(sg.transform));\n-            renderSpans(sg, clipRegion, s, sr);\n-        } finally {\n-            sr.dispose();\n+            renderRect(sg, rect);\n+        } else {\n+            Region clipRegion = sg.getCompClip();\n+            ShapeSpanIterator sr = LoopPipe.getFillSSI(sg);\n+            try {\n+                sr.setOutputArea(clipRegion);\n+                sr.appendPath(s.getPathIterator(sg.transform));\n+                renderSpans(sg, clipRegion, s, sr);\n+            } finally {\n+                sr.dispose();\n+            }\n","filename":"src\/java.desktop\/share\/classes\/sun\/java2d\/pipe\/SpanShapeRenderer.java","additions":12,"deletions":13,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -129,3 +129,3 @@\n-        for (int i=0; i<media.length; i++) {\n-            if (media[i] instanceof MediaSizeName) {\n-                msn[size++] = (MediaSizeName)media[i];\n+        for (Media value : media) {\n+            if (value instanceof MediaSizeName mediaSizeName) {\n+                msn[size++] = mediaSizeName;\n","filename":"src\/java.desktop\/share\/classes\/sun\/print\/CustomMediaSizeName.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -495,3 +495,1 @@\n-        Attribute attr = attributes.get(Media.class);\n-        if (attr instanceof CustomMediaTray) {\n-            CustomMediaTray customTray = (CustomMediaTray)attr;\n+        if (attributes.get(Media.class) instanceof CustomMediaTray customTray) {\n@@ -522,2 +520,1 @@\n-            if (getPrintService() instanceof PSStreamPrintService) {\n-                StreamPrintService sps = (StreamPrintService)getPrintService();\n+            if (getPrintService() instanceof PSStreamPrintService sps) {\n@@ -2287,2 +2284,2 @@\n-                if (t instanceof PrinterException) {\n-                    throw (PrinterException)t;\n+                if (t instanceof PrinterException e) {\n+                    throw e;\n","filename":"src\/java.desktop\/share\/classes\/sun\/print\/PSPrinterJob.java","additions":4,"deletions":7,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -174,1 +174,1 @@\n-        else if (data instanceof InputStream) {\n+        else if (data instanceof InputStream is) {\n@@ -176,1 +176,1 @@\n-                ((InputStream)data).close();\n+                is.close();\n@@ -180,1 +180,1 @@\n-        else if (data instanceof Reader) {\n+        else if (data instanceof Reader reader) {\n@@ -182,1 +182,1 @@\n-                ((Reader)data).close();\n+                reader.close();\n@@ -480,3 +480,2 @@\n-                    Object printData = doc.getPrintData();\n-                    if (printData instanceof URL) {\n-                        str = ((URL)(doc.getPrintData())).toString();\n+                    if (doc.getPrintData() instanceof URL url) {\n+                        str = url.toString();\n@@ -526,1 +525,1 @@\n-                if (attr instanceof MediaSizeName &&\n+                if (attr instanceof MediaSizeName msn &&\n@@ -528,2 +527,1 @@\n-                    mediaSize =\n-                        MediaSize.getMediaSizeForName((MediaSizeName)attr);\n+                    mediaSize = MediaSize.getMediaSizeForName(msn);\n","filename":"src\/java.desktop\/share\/classes\/sun\/print\/PSStreamPrintJob.java","additions":8,"deletions":10,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -424,2 +424,2 @@\n-                   attr instanceof MediaSizeName) {\n-            return isSupportedMedia((MediaSizeName)attr);\n+                   attr instanceof MediaSizeName msn) {\n+            return isSupportedMedia(msn);\n@@ -512,2 +512,2 @@\n-                 (obj instanceof PSStreamPrintService &&\n-                 ((PSStreamPrintService)obj).getName().equals(getName())));\n+                 (obj instanceof PSStreamPrintService service &&\n+                 service.getName().equals(getName())));\n","filename":"src\/java.desktop\/share\/classes\/sun\/print\/PSStreamPrintService.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -719,2 +719,2 @@\n-            if (font2D instanceof CompositeFont) {\n-                cf = (CompositeFont)font2D;\n+            if (font2D instanceof CompositeFont compositeFont) {\n+                cf = compositeFont;\n@@ -1123,1 +1123,1 @@\n-        if (img instanceof BufferedImage) {\n+        if (img instanceof BufferedImage bufferedImage) {\n@@ -1125,2 +1125,2 @@\n-            return (BufferedImage)img;\n-        } else if (img instanceof ToolkitImage) {\n+            return bufferedImage;\n+        } else if (img instanceof ToolkitImage tki) {\n@@ -1130,2 +1130,2 @@\n-            return ((ToolkitImage)img).getBufferedImage();\n-        } else if (img instanceof VolatileImage) {\n+            return tki.getBufferedImage();\n+        } else if (img instanceof VolatileImage volatileImage) {\n@@ -1134,1 +1134,1 @@\n-            return ((VolatileImage)img).getSnapshot();\n+            return volatileImage.getSnapshot();\n@@ -1171,4 +1171,2 @@\n-                if (db instanceof DataBufferInt &&\n-                    sm instanceof SinglePixelPackedSampleModel) {\n-                    SinglePixelPackedSampleModel psm =\n-                        (SinglePixelPackedSampleModel)sm;\n+                if (db instanceof DataBufferInt dbi &&\n+                    sm instanceof SinglePixelPackedSampleModel psm) {\n@@ -1176,2 +1174,1 @@\n-                    int[] int_data =\n-                        SunWritableRaster.stealData((DataBufferInt) db, 0);\n+                    int[] int_data = SunWritableRaster.stealData(dbi, 0);\n@@ -1223,1 +1220,0 @@\n-        IndexColorModel icm;\n@@ -1226,1 +1222,1 @@\n-        if (!(colorModel instanceof IndexColorModel)) {\n+        if (!(colorModel instanceof IndexColorModel icm)) {\n@@ -1228,2 +1224,0 @@\n-        } else {\n-            icm = (IndexColorModel)colorModel;\n@@ -1875,2 +1869,2 @@\n-        if (img instanceof BufferedImage) {\n-            bufferedImage = (BufferedImage) img;\n+        if (img instanceof BufferedImage image) {\n+            bufferedImage = image;\n@@ -1890,6 +1884,1 @@\n-\n-        boolean isCompositing = false;\n-\n-        if (composite instanceof AlphaComposite) {\n-            AlphaComposite alphaComposite = (AlphaComposite) composite;\n-            float alpha = alphaComposite.getAlpha();\n+        if (composite instanceof AlphaComposite alphaComposite) {\n@@ -1897,2 +1886,1 @@\n-\n-            if (alpha != 1.0\n+            return alphaComposite.getAlpha() != 1.0\n@@ -1900,5 +1888,1 @@\n-                        && rule != AlphaComposite.SRC_OVER))\n-            {\n-                isCompositing = true;\n-            }\n-\n+                    && rule != AlphaComposite.SRC_OVER);\n@@ -1906,1 +1890,1 @@\n-            isCompositing = true;\n+            return true;\n@@ -1908,1 +1892,0 @@\n-        return isCompositing;\n","filename":"src\/java.desktop\/share\/classes\/sun\/print\/PathGraphics.java","additions":18,"deletions":35,"binary":false,"changes":53,"status":"modified"},{"patch":"@@ -170,3 +170,2 @@\n-\n-        if (paint instanceof Color) {\n-            if (((Color)paint).getAlpha() < 255) {\n+        if (paint instanceof Color color) {\n+            if (color.getAlpha() < 255) {\n@@ -185,4 +184,1 @@\n-\n-        if (composite instanceof AlphaComposite) {\n-            AlphaComposite alphaComposite = (AlphaComposite) composite;\n-            float alpha = alphaComposite.getAlpha();\n+        if (composite instanceof AlphaComposite alphaComposite) {\n@@ -190,2 +186,1 @@\n-\n-            if (alpha != 1.0\n+            if (alphaComposite.getAlpha() != 1.0\n@@ -194,1 +189,0 @@\n-\n@@ -197,1 +191,0 @@\n-\n@@ -201,1 +194,0 @@\n-\n@@ -203,1 +195,0 @@\n-\n","filename":"src\/java.desktop\/share\/classes\/sun\/print\/PeekMetrics.java","additions":4,"deletions":13,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -815,2 +815,2 @@\n-        if (currentGraphics instanceof PeekGraphics) {\n-            ( (PeekGraphics) currentGraphics).setAWTDrawingOnly();\n+        if (currentGraphics instanceof PeekGraphics peekGraphics) {\n+            peekGraphics.setAWTDrawingOnly();\n","filename":"src\/java.desktop\/share\/classes\/sun\/print\/PrintJob2D.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1152,2 +1152,1 @@\n-            if (img instanceof BufferedImage) {\n-                BufferedImage bufImage = (BufferedImage) img;\n+            if (img instanceof BufferedImage bufImage) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/print\/ProxyGraphics2D.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1371,1 +1371,1 @@\n-            getPageable() instanceof OpenBook) {\n+            getPageable() instanceof OpenBook pageable) {\n@@ -1376,1 +1376,0 @@\n-            Pageable pageable = getPageable();\n@@ -1390,3 +1389,2 @@\n-                if (mpaVals instanceof MediaPrintableArea[] &&\n-                    ((MediaPrintableArea[])mpaVals).length > 0) {\n-                    mpa = ((MediaPrintableArea[])mpaVals)[0];\n+                if (mpaVals instanceof MediaPrintableArea[] mpas && mpas.length > 0) {\n+                    mpa = mpas[0];\n@@ -1411,2 +1409,1 @@\n-                if (media instanceof MediaSizeName) {\n-                    MediaSizeName msn = (MediaSizeName)media;\n+                if (media instanceof MediaSizeName msn) {\n@@ -1552,2 +1549,1 @@\n-        if ((psvc instanceof SunPrinterJobService) &&\n-            ((SunPrinterJobService)psvc).usesClass(getClass())) {\n+        if (psvc instanceof SunPrinterJobService service && service.usesClass(getClass())) {\n@@ -1788,3 +1784,2 @@\n-            if (media instanceof MediaSizeName &&\n-               ((size = MediaSize.getMediaSizeForName((MediaSizeName)media)) !=\n-                null)) {\n+            if (media instanceof MediaSizeName msn &&\n+               ((size = MediaSize.getMediaSizeForName(msn)) != null)) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/print\/RasterPrinterJob.java","additions":7,"deletions":12,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -1513,1 +1513,1 @@\n-            if (!(source instanceof JFormattedTextField)) {\n+            if (!(source instanceof JFormattedTextField tf)) {\n@@ -1516,2 +1516,1 @@\n-                JFormattedTextField tf = (JFormattedTextField)source;\n-                Float val = (Float)tf.getValue();\n+                Float val = (Float) tf.getValue();\n@@ -1635,4 +1634,2 @@\n-                if (values instanceof MediaPrintableArea[] &&\n-                    ((MediaPrintableArea[])values).length > 0) {\n-                    mpaMax = ((MediaPrintableArea[])values)[0];\n-\n+                if (values instanceof MediaPrintableArea[] mpas && mpas.length > 0) {\n+                    mpaMax = mpas[0];\n@@ -1720,6 +1717,4 @@\n-                if (values instanceof MediaPrintableArea[] &&\n-                    ((MediaPrintableArea[])values).length > 0) {\n-                    mpaMax = ((MediaPrintableArea[])values)[0];\n-\n-                } else if (values instanceof MediaPrintableArea) {\n-                    mpaMax = (MediaPrintableArea)values;\n+                if (values instanceof MediaPrintableArea[] mpas && mpas.length > 0) {\n+                    mpaMax = mpas[0];\n+                } else if (values instanceof MediaPrintableArea mpa1) {\n+                    mpaMax = mpa1;\n@@ -1986,3 +1981,2 @@\n-                       } else if (m instanceof MediaSizeName) {\n-                           MediaSizeName msn = (MediaSizeName)m;\n-                           Media def = (Media)psCurrent.getDefaultAttributeValue(Media.class);\n+                       } else if (m instanceof MediaSizeName msn) {\n+                           Media def = (Media) psCurrent.getDefaultAttributeValue(Media.class);\n@@ -2040,12 +2034,8 @@\n-                if (values instanceof Media[]) {\n-                    Media[] media = (Media[])values;\n-\n-                    for (int i = 0; i < media.length; i++) {\n-                        Media medium = media[i];\n-\n-                        if (medium instanceof MediaSizeName) {\n-                            sizes.add((MediaSizeName)medium);\n-                            cbSize.addItem(getMediaName(medium.toString()));\n-                        } else if (medium instanceof MediaTray) {\n-                            sources.add((MediaTray)medium);\n-                            cbSource.addItem(getMediaName(medium.toString()));\n+                if (values instanceof Media[] media) {\n+                    for (Media medium : media) {\n+                        if (medium instanceof MediaSizeName msn) {\n+                            sizes.add(msn);\n+                            cbSize.addItem(getMediaName(msn.toString()));\n+                        } else if (medium instanceof MediaTray msn) {\n+                            sources.add(msn);\n+                            cbSource.addItem(getMediaName(msn.toString()));\n@@ -2094,2 +2084,1 @@\n-                    if (medium instanceof MediaSizeName) {\n-                        MediaSizeName ms = (MediaSizeName)medium;\n+                    if (medium instanceof MediaSizeName ms) {\n@@ -2097,2 +2086,1 @@\n-                    } else if (medium instanceof MediaTray) {\n-                        MediaTray mt = (MediaTray)medium;\n+                    } else if (medium instanceof MediaTray mt) {\n@@ -2107,6 +2095,2 @@\n-                if (alt != null) {\n-                    Media md = alt.getMedia();\n-                    if (md instanceof MediaTray) {\n-                        MediaTray mt = (MediaTray)md;\n-                        cbSource.setSelectedIndex(sources.indexOf(mt) + 1);\n-                    }\n+                if (alt != null && alt.getMedia() instanceof MediaTray mt) {\n+                    cbSource.setSelectedIndex(sources.indexOf(mt) + 1);\n@@ -2223,7 +2207,2 @@\n-                if (values instanceof OrientationRequested[]) {\n-                    OrientationRequested[] ovalues =\n-                        (OrientationRequested[])values;\n-\n-                    for (int i = 0; i < ovalues.length; i++) {\n-                        OrientationRequested value = ovalues[i];\n-\n+                if (values instanceof OrientationRequested[] ovalues) {\n+                    for (OrientationRequested value : ovalues) {\n@@ -2262,3 +2241,1 @@\n-                    if (values instanceof OrientationRequested[]) {\n-                        OrientationRequested[] orValues =\n-                                            (OrientationRequested[])values;\n+                    if (values instanceof OrientationRequested[] orValues) {\n@@ -2399,6 +2376,2 @@\n-                if (values instanceof Chromaticity[]) {\n-                    Chromaticity[] cvalues = (Chromaticity[])values;\n-\n-                    for (int i = 0; i < cvalues.length; i++) {\n-                        Chromaticity value = cvalues[i];\n-\n+                if (values instanceof Chromaticity[] cvalues) {\n+                    for (Chromaticity value : cvalues) {\n@@ -2496,6 +2469,2 @@\n-                if (values instanceof PrintQuality[]) {\n-                    PrintQuality[] qvalues = (PrintQuality[])values;\n-\n-                    for (int i = 0; i < qvalues.length; i++) {\n-                        PrintQuality value = qvalues[i];\n-\n+                if (values instanceof PrintQuality[] qvalues) {\n+                    for (PrintQuality value : qvalues) {\n@@ -2601,6 +2570,2 @@\n-                if (values instanceof Sides[]) {\n-                    Sides[] svalues = (Sides[])values;\n-\n-                    for (int i = 0; i < svalues.length; i++) {\n-                        Sides value = svalues[i];\n-\n+                if (values instanceof Sides[] svalues) {\n+                    for (Sides value : svalues) {\n","filename":"src\/java.desktop\/share\/classes\/sun\/print\/ServiceDialog.java","additions":31,"deletions":66,"binary":false,"changes":97,"status":"modified"},{"patch":"@@ -127,3 +127,2 @@\n-                    if (service instanceof AttributeUpdater) {\n-                       psa =\n-                          ((AttributeUpdater)service).getUpdatedAttributes();\n+                    if (service instanceof AttributeUpdater attributeUpdater) {\n+                       psa = attributeUpdater.getUpdatedAttributes();\n","filename":"src\/java.desktop\/share\/classes\/sun\/print\/ServiceNotifier.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -125,3 +125,1 @@\n-        VolatileImage volatileImage = (image instanceof VolatileImage)\n-                ? (VolatileImage) image\n-                : null;\n+        VolatileImage volatileImage = image instanceof VolatileImage v ? v : null;\n@@ -163,3 +161,1 @@\n-                volatileImage = (image instanceof VolatileImage)\n-                        ? (VolatileImage) image\n-                        : null;\n+                volatileImage = image instanceof VolatileImage v ? v : null;\n@@ -212,2 +208,2 @@\n-        if (image instanceof PainterMultiResolutionCachedImage) {\n-            ((PainterMultiResolutionCachedImage) image).setParams(c, args);\n+        if (image instanceof PainterMultiResolutionCachedImage cachedImage) {\n+            cachedImage.setParams(c, args);\n","filename":"src\/java.desktop\/share\/classes\/sun\/swing\/CachedPainter.java","additions":4,"deletions":8,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -209,2 +209,2 @@\n-            if (oIcon instanceof Icon) {\n-                return (Icon)oIcon;\n+            if (oIcon instanceof Icon i) {\n+                return i;\n","filename":"src\/java.desktop\/share\/classes\/sun\/swing\/DefaultLayoutStyle.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -313,4 +313,4 @@\n-            if (source instanceof JList) {\n-                repaintListSelection((JList)source);\n-            } else if (source instanceof JTable) {\n-                repaintTableSelection((JTable)source);\n+            if (source instanceof JList<?> list) {\n+                repaintListSelection(list);\n+            } else if (source instanceof JTable table) {\n+                repaintTableSelection(table);\n@@ -499,2 +499,2 @@\n-        if (container instanceof JComponent) {\n-            ((JComponent)container).setInheritsPopupMenu(b);\n+        if (container instanceof JComponent component) {\n+            component.setInheritsPopupMenu(b);\n@@ -504,1 +504,1 @@\n-            recursivelySetInheritsPopupMenu((Container)container.getComponent(i), b);\n+            recursivelySetInheritsPopupMenu((Container) container.getComponent(i), b);\n@@ -1114,2 +1114,2 @@\n-            if (value instanceof File) {\n-                tf.setText(getFileChooser().getName((File) value));\n+            if (value instanceof File file) {\n+                tf.setText(getFileChooser().getName(file));\n@@ -1186,2 +1186,1 @@\n-            } else if (value instanceof File) {\n-                File file = (File)value;\n+            } else if (value instanceof File file) {\n@@ -1192,2 +1191,2 @@\n-            } else if (value instanceof Long) {\n-                long len = ((Long) value) \/ 1024L;\n+            } else if (value instanceof Long l) {\n+                long len = l \/ 1024L;\n@@ -1208,2 +1207,2 @@\n-            } else if (value instanceof Date) {\n-                text = df.format((Date)value);\n+            } else if (value instanceof Date date) {\n+                text = df.format(date);\n@@ -1362,2 +1361,2 @@\n-            if (c instanceof JLabel) {\n-                ((JLabel) c).setHorizontalAlignment(alignment);\n+            if (c instanceof JLabel label) {\n+                label.setHorizontalAlignment(alignment);\n@@ -1653,4 +1652,3 @@\n-                if (listSelectionModel instanceof DefaultListSelectionModel) {\n-                    ((DefaultListSelectionModel)listSelectionModel).\n-                        moveLeadSelectionIndex(lead);\n-                    listSelectionModel.setAnchorSelectionIndex(anchor);\n+                if (listSelectionModel instanceof DefaultListSelectionModel lsm) {\n+                    lsm.moveLeadSelectionIndex(lead);\n+                    this.listSelectionModel.setAnchorSelectionIndex(anchor);\n@@ -1827,3 +1825,3 @@\n-            if (listSelectionModel instanceof DefaultListSelectionModel) {\n-                ((DefaultListSelectionModel)listSelectionModel).moveLeadSelectionIndex(-1);\n-                listSelectionModel.setAnchorSelectionIndex(-1);\n+            if (listSelectionModel instanceof DefaultListSelectionModel lsm) {\n+                lsm.moveLeadSelectionIndex(-1);\n+                this.listSelectionModel.setAnchorSelectionIndex(-1);\n@@ -1854,3 +1852,2 @@\n-                if (comp instanceof JRadioButtonMenuItem) {\n-                    JRadioButtonMenuItem mi = (JRadioButtonMenuItem) comp;\n-                    if (((ViewTypeAction)mi.getAction()).viewType == viewType) {\n+                if (comp instanceof JRadioButtonMenuItem mi) {\n+                    if (((ViewTypeAction) mi.getAction()).viewType == viewType) {\n@@ -1918,2 +1915,1 @@\n-            } else if (source instanceof JTable) {\n-                JTable table = (JTable)source;\n+            } else if (source instanceof JTable table) {\n@@ -1985,4 +1981,2 @@\n-            JComponent source = (JComponent)evt.getSource();\n-            if (source instanceof JTable) {\n-                JTable table = (JTable)evt.getSource();\n-\n+            JComponent source = (JComponent) evt.getSource();\n+            if (source instanceof JTable table) {\n@@ -2070,2 +2064,2 @@\n-            } else if (comp instanceof Container) {\n-                T c = findChildComponent((Container)comp, cls);\n+            } else if (comp instanceof Container container1) {\n+                T c = findChildComponent(container1, cls);\n","filename":"src\/java.desktop\/share\/classes\/sun\/swing\/FilePane.java","additions":29,"deletions":35,"binary":false,"changes":64,"status":"modified"},{"patch":"@@ -276,1 +276,1 @@\n-            if(isVisible()) {\n+            if (isVisible()) {\n@@ -279,2 +279,2 @@\n-                if (peer instanceof DisplayChangedListener) {\n-                    ((DisplayChangedListener) peer).displayChanged();\n+                if (peer instanceof DisplayChangedListener listener) {\n+                    listener.displayChanged();\n@@ -291,2 +291,2 @@\n-        if (peer instanceof DisplayChangedListener) {\n-            ((DisplayChangedListener) peer).displayChanged();\n+        if (peer instanceof DisplayChangedListener listener) {\n+            listener.displayChanged();\n@@ -534,2 +534,2 @@\n-        if (peer instanceof OverrideNativeWindowHandle) {\n-            ((OverrideNativeWindowHandle) peer).overrideWindowHandle(handle);\n+        if (peer instanceof OverrideNativeWindowHandle nwh) {\n+            nwh.overrideWindowHandle(handle);\n","filename":"src\/java.desktop\/share\/classes\/sun\/swing\/JLightweightFrame.java","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -217,2 +217,2 @@\n-        if (minimumTextOffsetObject instanceof Integer) {\n-            minimumTextOffset = (Integer) minimumTextOffsetObject;\n+        if (minimumTextOffsetObject instanceof Integer i) {\n+            minimumTextOffset = i;\n@@ -227,2 +227,2 @@\n-        if (afterCheckIconGapObject instanceof Integer) {\n-            afterCheckIconGap = (Integer) afterCheckIconGapObject;\n+        if (afterCheckIconGapObject instanceof Integer i) {\n+            afterCheckIconGap = i;\n@@ -245,2 +245,2 @@\n-        if (checkIconOffsetObject instanceof Integer) {\n-            checkIconOffset = (Integer) checkIconOffsetObject;\n+        if (checkIconOffsetObject instanceof Integer i) {\n+            checkIconOffset = i;\n@@ -805,5 +805,3 @@\n-        Container parent = menuItem.getParent();\n-        if ((parent instanceof JComponent) &&\n-             (!(menuItem instanceof JMenu) ||\n-               !((JMenu)menuItem).isTopLevelMenu())) {\n-            return (JComponent) parent;\n+        if ((menuItem.getParent() instanceof JComponent component) &&\n+             (!(menuItem instanceof JMenu menu) || !menu.isTopLevelMenu())) {\n+            return component;\n@@ -1119,6 +1117,1 @@\n-        boolean b = true;\n-        if ((menuItem instanceof JMenu) &&\n-                (((JMenu) menuItem).isTopLevelMenu())) {\n-            b = false;\n-        }\n-        return b;\n+        return !(menuItem instanceof JMenu menu && menu.isTopLevelMenu());\n","filename":"src\/java.desktop\/share\/classes\/sun\/swing\/MenuItemLayoutHelper.java","additions":10,"deletions":17,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -184,4 +184,4 @@\n-                if (cause instanceof RuntimeException) {\n-                   throw (RuntimeException) cause;\n-                } else if (cause instanceof Error) {\n-                   throw (Error) cause;\n+                if (cause instanceof RuntimeException ex) {\n+                   throw ex;\n+                } else if (cause instanceof Error ex) {\n+                   throw ex;\n@@ -308,2 +308,2 @@\n-        if (value instanceof Integer) {\n-            return ((Integer) value).intValue();\n+        if (value instanceof Integer i) {\n+            return i;\n@@ -311,1 +311,1 @@\n-        if (value instanceof String) {\n+        if (value instanceof String s) {\n@@ -313,1 +313,1 @@\n-                return Integer.parseInt((String) value);\n+                return Integer.parseInt(s);\n","filename":"src\/java.desktop\/share\/classes\/sun\/swing\/PrintingStatus.java","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -170,1 +170,0 @@\n-    @SuppressWarnings(\"unchecked\")\n@@ -174,2 +173,3 @@\n-        Toolkit tk = Toolkit.getDefaultToolkit();\n-        Object desktopHints = tk.getDesktopProperty(SunToolkit.DESKTOPFONTHINTS);\n+        Object desktopHints = Toolkit\n+                .getDefaultToolkit()\n+                .getDesktopProperty(SunToolkit.DESKTOPFONTHINTS);\n@@ -177,2 +177,1 @@\n-        if (desktopHints instanceof Map) {\n-            Map<Object, Object> hints = (Map<Object, Object>) desktopHints;\n+        if (desktopHints instanceof Map<?, ?> hints) {\n@@ -537,2 +536,2 @@\n-                    if (col instanceof PrintColorUIResource) {\n-                        g2d.setColor(((PrintColorUIResource)col).getPrintColor());\n+                    if (col instanceof PrintColorUIResource resource) {\n+                        g2d.setColor(resource.getPrintColor());\n@@ -551,2 +550,1 @@\n-        if (g instanceof Graphics2D) {\n-            Graphics2D g2 = (Graphics2D)g;\n+        if (g instanceof Graphics2D g2) {\n@@ -719,1 +717,1 @@\n-            if (bySize instanceof Boolean && ((Boolean)bySize).booleanValue() &&\n+            if (bySize instanceof Boolean b && b &&\n@@ -881,2 +879,2 @@\n-                        if (col instanceof PrintColorUIResource) {\n-                            g2d.setColor(((PrintColorUIResource)col).getPrintColor());\n+                        if (col instanceof PrintColorUIResource resource) {\n+                            g2d.setColor(resource.getPrintColor());\n@@ -900,1 +898,1 @@\n-        if (!(g instanceof Graphics2D)) {\n+        if (!(g instanceof Graphics2D g2)) {\n@@ -905,1 +903,0 @@\n-        Graphics2D g2 = (Graphics2D) g;\n@@ -1006,2 +1003,2 @@\n-            if (col instanceof PrintColorUIResource) {\n-                g.setColor(((PrintColorUIResource)col).getPrintColor());\n+            if (col instanceof PrintColorUIResource resource) {\n+                g.setColor(resource.getPrintColor());\n@@ -1194,4 +1191,4 @@\n-        if (g instanceof Graphics2D) {\n-            return (Graphics2D) g;\n-        } else if (g instanceof ProxyPrintGraphics) {\n-            return (Graphics2D)(((ProxyPrintGraphics)g).getGraphics());\n+        if (g instanceof Graphics2D g2d) {\n+            return g2d;\n+        } else if (g instanceof ProxyPrintGraphics ppg) {\n+            return (Graphics2D) ppg.getGraphics();\n@@ -1303,1 +1300,3 @@\n-            if (!(obj instanceof KeyPair)) {\n+            if (obj instanceof KeyPair that) {\n+                return this.key1.equals(that.key1) && this.key2.equals(that.key2);\n+            } else {\n@@ -1306,2 +1305,0 @@\n-            KeyPair that = (KeyPair) obj;\n-            return this.key1.equals(that.key1) && this.key2.equals(that.key2);\n@@ -1443,2 +1440,3 @@\n-            if (!(entry instanceof LSBCacheEntry)) {\n-                return false;\n+            if (entry instanceof LSBCacheEntry oEntry) {\n+                return (font.equals(oEntry.font) &&\n+                        frc.equals(oEntry.frc));\n@@ -1446,3 +1444,1 @@\n-            LSBCacheEntry oEntry = (LSBCacheEntry) entry;\n-            return (font.equals(oEntry.font) &&\n-                    frc.equals(oEntry.frc));\n+            return false;\n@@ -1527,2 +1523,1 @@\n-        if (ie instanceof KeyEvent) { \/\/we can validate only keyboard gestures\n-            KeyEvent ke = (KeyEvent)ie;\n+        if (ie instanceof KeyEvent ke) { \/\/we can validate only keyboard gestures\n@@ -1569,2 +1564,2 @@\n-            if (e instanceof InputEvent\n-                && (! checkGesture || isAccessClipboardGesture((InputEvent)e))) {\n+            if (e instanceof InputEvent inputEvent\n+                && (! checkGesture || isAccessClipboardGesture(inputEvent))) {\n@@ -1572,1 +1567,1 @@\n-                        canAccessSystemClipboard((InputEvent) e);\n+                        canAccessSystemClipboard(inputEvent);\n@@ -1770,8 +1765,1 @@\n-        boolean isLocal;\n-        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();\n-        if (ge instanceof SunGraphicsEnvironment) {\n-            isLocal = ((SunGraphicsEnvironment) ge).isDisplayLocal();\n-        } else {\n-            isLocal = true;\n-        }\n-        return isLocal;\n+        return !(GraphicsEnvironment.getLocalGraphicsEnvironment() instanceof SunGraphicsEnvironment sge) || sge.isDisplayLocal();\n@@ -1839,4 +1827,3 @@\n-        if (value instanceof Integer) {\n-            return ((Integer)value).intValue();\n-        }\n-        if (value instanceof String) {\n+        if (value instanceof Integer i) {\n+            return i;\n+        } else if (value instanceof String s) {\n@@ -1844,1 +1831,1 @@\n-                return Integer.parseInt((String)value);\n+                return Integer.parseInt(s);\n@@ -1847,1 +1834,1 @@\n-        return defaultValue;\n+            return defaultValue;\n@@ -1853,2 +1840,1 @@\n-        if (component instanceof Container) {\n-            Container container = (Container)component;\n+        if (component instanceof Container container) {\n@@ -1856,2 +1842,4 @@\n-                FocusTraversalPolicy policy = container.getFocusTraversalPolicy();\n-                Component comp = policy.getDefaultComponent(container);\n+                Component comp = container\n+                        .getFocusTraversalPolicy()\n+                        .getDefaultComponent(container);\n+\n@@ -1865,2 +1853,3 @@\n-                FocusTraversalPolicy policy = rootAncestor.getFocusTraversalPolicy();\n-                Component comp = policy.getComponentAfter(rootAncestor, container);\n+                Component comp = rootAncestor\n+                        .getFocusTraversalPolicy()\n+                        .getComponentAfter(rootAncestor, container);\n@@ -1892,4 +1881,3 @@\n-            } else if (comp instanceof JComponent\n-                       && ((JComponent)comp).requestDefaultFocus()) {\n-\n-                 return true;\n+            } else {\n+                return comp instanceof JComponent component\n+                        && component.requestDefaultFocus();\n@@ -1897,0 +1885,2 @@\n+        } else {\n+            return false;\n@@ -1898,2 +1888,0 @@\n-\n-        return false;\n@@ -1954,4 +1942,3 @@\n-        if (comp instanceof JTextComponent\n-                && ((JTextComponent) comp).getCaret() instanceof DefaultCaret) {\n-\n-            ((JTextComponent) comp).putClientProperty(SKIP_CLICK_COUNT, count);\n+        if (comp instanceof JTextComponent component\n+                && component.getCaret() instanceof DefaultCaret) {\n+            component.putClientProperty(SKIP_CLICK_COUNT, count);\n@@ -2198,3 +2185,2 @@\n-        Toolkit toolkit = Toolkit.getDefaultToolkit();\n-        if (toolkit instanceof SunToolkit) {\n-            return ((SunToolkit) toolkit).getFocusAcceleratorKeyMask();\n+        if (Toolkit.getDefaultToolkit() instanceof SunToolkit stk) {\n+            return stk.getFocusAcceleratorKeyMask();\n@@ -2224,3 +2210,4 @@\n-        if (g instanceof Graphics2D) {\n-            AffineTransform tx = ((Graphics2D) g).getTransform();\n-            return (tx.getType() & ~(TYPE_TRANSLATION | TYPE_FLIP)) != 0;\n+        if (g instanceof Graphics2D g2d) {\n+            return (g2d.getTransform().getType() & ~(TYPE_TRANSLATION | TYPE_FLIP)) != 0;\n+        } else {\n+            return false;\n@@ -2228,1 +2215,0 @@\n-        return false;\n@@ -2289,4 +2275,4 @@\n-        Object clientProperty = component.getClientProperty(key);\n-\n-        if (clientProperty instanceof Boolean) {\n-            return Boolean.TRUE.equals(clientProperty);\n+        if (component.getClientProperty(key) instanceof Boolean b) {\n+            return b;\n+        } else {\n+            return UIManager.getBoolean(key);\n@@ -2294,2 +2280,0 @@\n-\n-        return UIManager.getBoolean(key);\n","filename":"src\/java.desktop\/share\/classes\/sun\/swing\/SwingUtilities2.java","additions":60,"deletions":76,"binary":false,"changes":136,"status":"modified"},{"patch":"@@ -117,1 +117,1 @@\n-            if (files[i] instanceof ShellFolder) {\n+            if (files[i] instanceof ShellFolder sf) {\n@@ -119,1 +119,0 @@\n-                ShellFolder sf = (ShellFolder)files[i];\n","filename":"src\/java.desktop\/share\/classes\/sun\/swing\/WindowsPlacesBar.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -231,11 +231,8 @@\n-            if (value instanceof Color) {\n-                return new ColorUIResource((Color)value);\n-            }\n-            else if (value instanceof Font) {\n-                return new FontUIResource((Font)value);\n-            }\n-            else if (value instanceof UIDefaults.LazyValue) {\n-                value = ((UIDefaults.LazyValue)value).createValue(null);\n-            }\n-            else if (value instanceof UIDefaults.ActiveValue) {\n-                value = ((UIDefaults.ActiveValue)value).createValue(null);\n+            if (value instanceof Color color) {\n+                return new ColorUIResource(color);\n+            } else if (value instanceof Font font) {\n+                return new FontUIResource(font);\n+            } else if (value instanceof UIDefaults.LazyValue lazyValue) {\n+                value = lazyValue.createValue(null);\n+            } else if (value instanceof UIDefaults.ActiveValue activeValue) {\n+                value = activeValue.createValue(null);\n@@ -244,0 +241,1 @@\n+\n","filename":"src\/java.desktop\/share\/classes\/sun\/swing\/plaf\/DesktopProperty.java","additions":9,"deletions":11,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -420,1 +420,1 @@\n-            if (value instanceof UIDefaults.LazyValue) {\n+            if (value instanceof UIDefaults.LazyValue lazyValue) {\n@@ -424,1 +424,1 @@\n-                value = ((UIDefaults.LazyValue)value).createValue(null);\n+                value = lazyValue.createValue(null);\n","filename":"src\/java.desktop\/share\/classes\/sun\/swing\/plaf\/synth\/DefaultSynthStyle.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -557,9 +557,7 @@\n-            if (!(c instanceof JComponent)) {\n-                return;\n-            }\n-            JComponent jc = (JComponent)c;\n-            SynthContext context = getContext(jc);\n-            SynthStyle style = context.getStyle();\n-            if (style != null) {\n-                style.getPainter(context).paintFileChooserBorder(\n-                      context, g, x, y, width, height);\n+            if (c instanceof JComponent component) {\n+                SynthContext context = getContext(component);\n+                SynthStyle style = context.getStyle();\n+                if (style != null) {\n+                    style.getPainter(context).paintFileChooserBorder(\n+                            context, g, x, y, width, height);\n+                }\n","filename":"src\/java.desktop\/share\/classes\/sun\/swing\/plaf\/synth\/SynthFileChooserUI.java","additions":7,"deletions":9,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -560,4 +560,4 @@\n-            if (cb instanceof JComboBox) {\n-                ComboBoxModel<?> model = ((JComboBox)cb).getModel();\n-                if (model instanceof DirectoryComboBoxModel) {\n-                    ((DirectoryComboBoxModel)model).addItem(currentDirectory);\n+            if (cb instanceof JComboBox<?> comboBox) {\n+                ComboBoxModel<?> model = comboBox.getModel();\n+                if (model instanceof DirectoryComboBoxModel dcbm) {\n+                    dcbm.addItem(currentDirectory);\n@@ -864,4 +864,2 @@\n-            JComponent cb = getDirectoryComboBox();\n-            if (cb instanceof JComboBox) {\n-                File f = (File)((JComboBox)cb).getSelectedItem();\n-                getFileChooser().setCurrentDirectory(f);\n+            if (getDirectoryComboBox() instanceof JComboBox<?> comboBox) {\n+                getFileChooser().setCurrentDirectory((File) comboBox.getSelectedItem());\n","filename":"src\/java.desktop\/share\/classes\/sun\/swing\/plaf\/synth\/SynthFileChooserUIImpl.java","additions":6,"deletions":8,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -153,1 +153,1 @@\n-        if (textComponent instanceof JEditorPane\n+        if (textComponent instanceof JEditorPane editorPane\n@@ -157,1 +157,1 @@\n-            List<JEditorPane> frames = getFrames((JEditorPane) textComponent);\n+            List<JEditorPane> frames = getFrames(editorPane);\n@@ -178,9 +178,2 @@\n-    private static boolean isFrameSetDocument(final Document document) {\n-        boolean ret = false;\n-        if (document instanceof HTMLDocument) {\n-            HTMLDocument htmlDocument = (HTMLDocument)document;\n-            if (htmlDocument.getIterator(HTML.Tag.FRAME).isValid()) {\n-                ret = true;\n-            }\n-        }\n-        return ret;\n+    private static boolean isFrameSetDocument(Document document) {\n+        return document instanceof HTMLDocument htmlDocument && htmlDocument.getIterator(HTML.Tag.FRAME).isValid();\n@@ -221,6 +214,4 @@\n-                && c instanceof JEditorPane ) { \/\/it should be always JEditorPane\n-                list.add((JEditorPane) c);\n-            } else {\n-                if (c instanceof Container) {\n-                    getFrames((Container) c, list);\n-                }\n+                && c instanceof JEditorPane editorPane) { \/\/it should be always JEditorPane\n+                list.add(editorPane);\n+            } else if (c instanceof Container container1) {\n+                getFrames(container1, list);\n@@ -255,2 +246,2 @@\n-                if (e instanceof RuntimeException) {\n-                    throw (RuntimeException) e;\n+                if (e instanceof RuntimeException ex) {\n+                    throw ex;\n@@ -317,5 +308,6 @@\n-                if (cause instanceof Error) {\n-                    throw (Error) cause;\n-                }\n-                if (cause instanceof RuntimeException) {\n-                    throw (RuntimeException) cause;\n+                if (cause instanceof Error ex) {\n+                    throw ex;\n+                } else if (cause instanceof RuntimeException ex) {\n+                    throw ex;\n+                } else {\n+                    throw new AssertionError(cause);\n@@ -323,1 +315,0 @@\n-                throw new AssertionError(cause);\n@@ -332,1 +323,1 @@\n-        if (textComponent instanceof JPasswordField) {\n+        if (textComponent instanceof JPasswordField passwordField) {\n@@ -336,3 +327,2 @@\n-                        setEchoChar(((JPasswordField) textComponent).getEchoChar());\n-                        setHorizontalAlignment(\n-                            ((JTextField) textComponent).getHorizontalAlignment());\n+                        setEchoChar(passwordField.getEchoChar());\n+                        setHorizontalAlignment(passwordField.getHorizontalAlignment());\n@@ -347,1 +337,1 @@\n-        } else if (textComponent instanceof JTextField) {\n+        } else if (textComponent instanceof JTextField textField) {\n@@ -351,2 +341,1 @@\n-                        setHorizontalAlignment(\n-                            ((JTextField) textComponent).getHorizontalAlignment());\n+                        setHorizontalAlignment(textField.getHorizontalAlignment());\n@@ -361,1 +350,1 @@\n-        } else if (textComponent instanceof JTextArea) {\n+        } else if (textComponent instanceof JTextArea textArea) {\n@@ -365,1 +354,0 @@\n-                        JTextArea textArea = (JTextArea) textComponent;\n@@ -377,1 +365,1 @@\n-        } else if (textComponent instanceof JTextPane) {\n+        } else if (textComponent instanceof JTextPane textPane) {\n@@ -389,1 +377,1 @@\n-                            return ((JTextPane) textComponent).getEditorKit();\n+                            return textPane.getEditorKit();\n@@ -395,1 +383,1 @@\n-        } else if (textComponent instanceof JEditorPane) {\n+        } else if (textComponent instanceof JEditorPane editorPane) {\n@@ -407,1 +395,1 @@\n-                            return ((JEditorPane) textComponent).getEditorKit();\n+                            return editorPane.getEditorKit();\n@@ -467,2 +455,2 @@\n-            if (graphics instanceof Graphics2D) {\n-                frc.set(((Graphics2D)graphics).getFontRenderContext());\n+            if (graphics instanceof Graphics2D g2d) {\n+                frc.set(g2d.getFontRenderContext());\n@@ -489,6 +477,6 @@\n-                if (cause instanceof PrinterException) {\n-                    throw (PrinterException)cause;\n-                } else if (cause instanceof RuntimeException) {\n-                    throw (RuntimeException) cause;\n-                } else if (cause instanceof Error) {\n-                    throw (Error) cause;\n+                if (cause instanceof PrinterException ex) {\n+                    throw ex;\n+                } else if (cause instanceof RuntimeException ex) {\n+                    throw ex;\n+                } else if (cause instanceof Error ex) {\n+                    throw ex;\n@@ -582,1 +570,1 @@\n-        if (document instanceof AbstractDocument) {\n+        if (document instanceof AbstractDocument abstractDocument) {\n@@ -584,1 +572,1 @@\n-                ((AbstractDocument) document).readUnlock();\n+                abstractDocument.readUnlock();\n@@ -661,4 +649,4 @@\n-                if (cause instanceof RuntimeException) {\n-                    throw (RuntimeException) cause;\n-                } else if (cause instanceof Error) {\n-                    throw (Error) cause;\n+                if (cause instanceof RuntimeException ex) {\n+                    throw ex;\n+                } else if (cause instanceof Error ex) {\n+                    throw ex;\n@@ -827,5 +815,1 @@\n-            if (obj instanceof IntegerSegment) {\n-                return compareTo((IntegerSegment) obj) == 0;\n-            } else {\n-                return false;\n-            }\n+            return obj instanceof IntegerSegment integerSegment && compareTo(integerSegment) == 0;\n","filename":"src\/java.desktop\/share\/classes\/sun\/swing\/text\/TextComponentPrintable.java","additions":41,"deletions":57,"binary":false,"changes":98,"status":"modified"},{"patch":"@@ -351,2 +351,0 @@\n-        boolean aa = ((aaValue instanceof Number)\n-                        && ((Number) aaValue).intValue() != 0);\n@@ -354,1 +352,1 @@\n-        if (aa) {\n+        if (aaValue instanceof Number n && n.intValue() != 0) {\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/UNIXToolkit.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -489,2 +489,2 @@\n-            if (xbasewindow instanceof XWindow) {\n-                xwindow = (XWindow)xbasewindow;\n+            if (xbasewindow instanceof XWindow xWindow) {\n+                xwindow = xWindow;\n@@ -514,2 +514,2 @@\n-                    if (xbasewindow instanceof XWindow) {\n-                        xwindow = (XWindow)xbasewindow;\n+                    if (xbasewindow instanceof XWindow xWindow) {\n+                        xwindow = xWindow;\n@@ -644,2 +644,2 @@\n-            if (xbasewindow instanceof XWindow) {\n-                xwindow = (XWindow)xbasewindow;\n+            if (xbasewindow instanceof XWindow xWindow) {\n+                xwindow = xWindow;\n@@ -656,2 +656,2 @@\n-                if (xbasewindow instanceof XWindow) {\n-                    xwindow = (XWindow)xbasewindow;\n+                if (xbasewindow instanceof XWindow xWindow) {\n+                    xwindow = xWindow;\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/MotifDnDDropTargetProtocol.java","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -168,7 +168,4 @@\n-        if (!(o instanceof WindowDimensions)) {\n-            return false;\n-        }\n-        WindowDimensions dims = (WindowDimensions)o;\n-        return ((dims.insets.equals(insets)))\n-            && (getClientRect().equals(dims.getClientRect()))\n-            && (getBounds().equals(dims.getBounds()));\n+        return o instanceof WindowDimensions dims &&\n+                dims.insets.equals(insets)\n+                && getClientRect().equals(dims.getClientRect())\n+                && getBounds().equals(dims.getBounds());\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/WindowDimensions.java","additions":4,"deletions":7,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -773,5 +773,3 @@\n-        if (!(o instanceof XAtom)) {\n-            return false;\n-        }\n-        XAtom ot = (XAtom)o;\n-        return (atom == ot.atom && display == ot.display);\n+        return o instanceof XAtom ot &&\n+                atom == ot.atom &&\n+                display == ot.display;\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XAtom.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -397,1 +397,1 @@\n-            final XMenuPeer submenuToShow = (showWindowIfMenu && (item instanceof XMenuPeer)) ? (XMenuPeer)item : null;\n+            XMenuPeer submenuToShow = (showWindowIfMenu && item instanceof XMenuPeer xMenuPeer) ? xMenuPeer : null;\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XBaseMenuWindow.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -135,3 +135,2 @@\n-        Object parent = params.get(PARENT);\n-        if (parent instanceof XBaseWindow) {\n-            parentWindow = (XBaseWindow)parent;\n+        if (params.get(PARENT) instanceof XBaseWindow baseWindow) {\n+            parentWindow = baseWindow;\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XBaseWindow.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -342,1 +342,3 @@\n-        if (!(g instanceof Graphics2D)) {\n+        if (g instanceof Graphics2D graphics2D) {\n+            g2 = graphics2D;\n+        } else {\n@@ -353,3 +355,0 @@\n-        else {\n-            g2 = (Graphics2D)g;\n-        }\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XCheckboxPeer.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -1067,1 +1067,1 @@\n-            if (e instanceof KeyEvent){\n+            if (e instanceof KeyEvent keyEvent){\n@@ -1074,1 +1074,1 @@\n-                            handleJavaKeyEvent((KeyEvent)e);\n+                            handleJavaKeyEvent(keyEvent);\n@@ -1082,1 +1082,1 @@\n-                if (e instanceof MouseEvent){\n+                if (e instanceof MouseEvent me){\n@@ -1088,1 +1088,0 @@\n-                    MouseEvent me = (MouseEvent)e;\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XChoicePeer.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -173,2 +173,1 @@\n-        Container container  = (target instanceof Container) ?\n-            (Container)target : target.getParent();\n+        Container container = target instanceof Container c ? c : target.getParent();\n@@ -377,3 +376,2 @@\n-        if (target instanceof Container) {\n-            final Component[] list = ((Container) target).getComponents();\n-            for (final Component child : list) {\n+        if (target instanceof Container container) {\n+            for (Component child : container.getComponents()) {\n@@ -458,1 +456,1 @@\n-        Container parent = (target instanceof Container) ? ((Container)target) : (compAccessor.getParent(target));\n+        Container parent = target instanceof Container container ? container : compAccessor.getParent(target);\n@@ -512,2 +510,2 @@\n-            if (winPeer instanceof XFramePeer) {\n-                XMenuBarPeer mPeer = ((XFramePeer)winPeer).getMenubarPeer();\n+            if (winPeer instanceof XFramePeer xPeer) {\n+                XMenuBarPeer mPeer = xPeer.getMenubarPeer();\n@@ -523,4 +521,6 @@\n-        if ((e instanceof InputEvent) && !((InputEvent)e).isConsumed() && target.isEnabled())  {\n-            if (e instanceof MouseEvent) {\n-                if (e instanceof MouseWheelEvent) {\n-                    handleJavaMouseWheelEvent((MouseWheelEvent) e);\n+        if (e instanceof InputEvent inputEvent && !inputEvent.isConsumed() && target.isEnabled())  {\n+            if (e instanceof MouseEvent mouseEvent) {\n+                if (mouseEvent instanceof MouseWheelEvent mouseWheelEvent) {\n+                    handleJavaMouseWheelEvent(mouseWheelEvent);\n+                } else {\n+                    handleJavaMouseEvent(mouseEvent);\n@@ -528,6 +528,3 @@\n-                else\n-                    handleJavaMouseEvent((MouseEvent) e);\n-            }\n-            else if (e instanceof KeyEvent) {\n-                handleF10JavaKeyEvent((KeyEvent)e);\n-                handleJavaKeyEvent((KeyEvent)e);\n+            } else if (e instanceof KeyEvent keyEvent) {\n+                handleF10JavaKeyEvent(keyEvent);\n+                handleJavaKeyEvent(keyEvent);\n@@ -535,2 +532,1 @@\n-        }\n-        else if (e instanceof KeyEvent && !((InputEvent)e).isConsumed()) {\n+        } else if (e instanceof KeyEvent keyEvent && !keyEvent.isConsumed()) {\n@@ -538,4 +534,3 @@\n-            handleF10JavaKeyEvent((KeyEvent)e);\n-        }\n-        else if (e instanceof InputMethodEvent) {\n-            handleJavaInputMethodEvent((InputMethodEvent) e);\n+            handleF10JavaKeyEvent(keyEvent);\n+        } else if (e instanceof InputMethodEvent inputMethodEvent) {\n+            handleJavaInputMethodEvent(inputMethodEvent);\n@@ -1269,2 +1264,2 @@\n-            if (peer instanceof XComponentPeer) {\n-                Long window = Long.valueOf(((XComponentPeer)peer).getWindow());\n+            if (peer instanceof XComponentPeer xPeer) {\n+                Long window = xPeer.getWindow();\n@@ -1275,1 +1270,1 @@\n-            } else if (comp instanceof Container) {\n+            } else if (comp instanceof Container container) {\n@@ -1278,1 +1273,1 @@\n-                addTree(order, set, (Container)comp);\n+                addTree(order, set, container);\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XComponentPeer.java","additions":23,"deletions":28,"binary":false,"changes":51,"status":"modified"},{"patch":"@@ -27,3 +27,1 @@\n-import java.awt.Component;\n-import java.awt.Rectangle;\n-import java.awt.Insets;\n+import java.awt.*;\n@@ -173,2 +171,2 @@\n-        if (parentFrame instanceof XFramePeer &&\n-                (((XFramePeer)parentFrame).getState() & java.awt.Frame.ICONIFIED) != 0) {\n+        if (parentFrame instanceof XFramePeer framePeer &&\n+                (framePeer.getState() & Frame.ICONIFIED) != 0) {\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XContentWindow.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -600,2 +600,2 @@\n-            if (xbasewindow instanceof XWindow) {\n-                xwindow = (XWindow)xbasewindow;\n+            if (xbasewindow instanceof XWindow xWindow) {\n+                xwindow = xWindow;\n@@ -633,2 +633,2 @@\n-                if (xbasewindow instanceof XWindow) {\n-                    xwindow = (XWindow)xbasewindow;\n+                if (xbasewindow instanceof XWindow xWindow) {\n+                    xwindow = xWindow;\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XDnDDropTargetProtocol.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -195,5 +195,6 @@\n-        if (source instanceof Component) {\n-            Object peer = AWTAccessor.getComponentAccessor()\n-                                     .getPeer((Component) source);\n-            if (peer instanceof XEmbedCanvasPeer) {\n-                XEmbedCanvasPeer xEmbedCanvasPeer = (XEmbedCanvasPeer)peer;\n+        if (source instanceof Component component) {\n+            Object peer = AWTAccessor\n+                    .getComponentAccessor()\n+                    .getPeer(component);\n+\n+            if (peer instanceof XEmbedCanvasPeer xEmbedCanvasPeer) {\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XDropTargetContextPeer.java","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -401,5 +401,0 @@\n-        XBaseWindow xBaseWindow = XToolkit.windowToXWindow(window);\n-        boolean isXEmbedClient =\n-            (xBaseWindow instanceof XEmbeddedFramePeer) &&\n-            ((XEmbeddedFramePeer)xBaseWindow).isXEmbedActive();\n-\n@@ -410,2 +405,2 @@\n-                if (xbaseWindow instanceof XEmbedCanvasPeer) {\n-                    peer = (XEmbedCanvasPeer)xbaseWindow;\n+                if (xbaseWindow instanceof XEmbedCanvasPeer xPeer) {\n+                    peer = xPeer;\n@@ -449,0 +444,3 @@\n+        XBaseWindow xBaseWindow = XToolkit.windowToXWindow(window);\n+        boolean isXEmbedClient = xBaseWindow instanceof XEmbeddedFramePeer xPeer && xPeer.isXEmbedActive();\n+\n@@ -495,2 +493,1 @@\n-                    if (xbaseWindow instanceof XEmbedCanvasPeer) {\n-                        XEmbedCanvasPeer peer = (XEmbedCanvasPeer)xbaseWindow;\n+                    if (xbaseWindow instanceof XEmbedCanvasPeer peer) {\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XDropTargetRegistry.java","additions":6,"deletions":9,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -569,2 +569,1 @@\n-        XWindowPeer parent = getToplevelXWindow();\n-        if (parent instanceof XEmbeddedFramePeer embedded) {\n+        if (getToplevelXWindow() instanceof XEmbeddedFramePeer embedded) {\n@@ -578,2 +577,1 @@\n-        XWindowPeer parent = getToplevelXWindow();\n-        if (parent instanceof XEmbeddedFramePeer embedded) {\n+        if (getToplevelXWindow() instanceof XEmbeddedFramePeer embedded) {\n@@ -879,5 +877,3 @@\n-            if (!(o instanceof GrabbedKey)) {\n-                return false;\n-            }\n-            GrabbedKey key = (GrabbedKey)o;\n-            return (keysym == key.keysym && modifiers == key.modifiers);\n+            return o instanceof GrabbedKey key &&\n+                    keysym == key.keysym &&\n+                    modifiers == key.modifiers;\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XEmbedCanvasPeer.java","additions":5,"deletions":9,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -625,2 +625,2 @@\n-        } else if ( source instanceof TextField ) {\n-            if ( selectionField == ((TextField)source) ) {\n+        } else if (source instanceof TextField textField) {\n+            if (selectionField == textField) {\n@@ -632,1 +632,1 @@\n-            } else if (filterField == ((TextField)source)) {\n+            } else if (filterField == textField) {\n@@ -634,1 +634,1 @@\n-            } else if (pathField == ((TextField)source)) {\n+            } else if (pathField == textField) {\n@@ -637,2 +637,2 @@\n-        } else if (source instanceof List) {\n-            if (directoryList == ((List)source)) {\n+        } else if (source instanceof List list) {\n+            if (directoryList == list) {\n@@ -643,1 +643,1 @@\n-            } else if (fileList == ((List)source)) {\n+            } else if (fileList == source) {\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XFileDialogPeer.java","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -104,3 +104,1 @@\n-        XBaseWindow target = XAwtState.getGrabWindow();\n-        if (target instanceof XWindowPeer) {\n-            XWindowPeer grabber = (XWindowPeer) target;\n+        if (XAwtState.getGrabWindow() instanceof XWindowPeer grabber) {\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XGlobalCursorManager.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -257,2 +257,2 @@\n-                if (g instanceof Graphics2D) {\n-                    ((Graphics2D)g).setComposite(AlphaComposite.Src);\n+                if (g instanceof Graphics2D graphics2D) {\n+                    graphics2D.setComposite(AlphaComposite.Src);\n@@ -292,2 +292,2 @@\n-            if (srcBuf instanceof DataBufferByte) {\n-                byte[] buf = ((DataBufferByte)srcBuf).getData();\n+            if (srcBuf instanceof DataBufferByte dataBufferByte) {\n+                byte[] buf = dataBufferByte.getData();\n@@ -302,4 +302,4 @@\n-            } else if (srcBuf instanceof DataBufferInt) {\n-                bytes = Native.toData(((DataBufferInt)srcBuf).getData());\n-            } else if (srcBuf instanceof DataBufferUShort) {\n-                bytes = Native.toData(((DataBufferUShort)srcBuf).getData());\n+            } else if (srcBuf instanceof DataBufferInt dataBufferInt) {\n+                bytes = Native.toData(dataBufferInt.getData());\n+            } else if (srcBuf instanceof DataBufferUShort dataBufferUShort) {\n+                bytes = Native.toData(dataBufferUShort.getData());\n@@ -460,2 +460,2 @@\n-            if (img instanceof ToolkitImage) {\n-                ImageRepresentation ir = ((ToolkitImage)img).getImageRep();\n+            if (img instanceof ToolkitImage tki) {\n+                ImageRepresentation ir = tki.getImageRep();\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XIconWindow.java","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -1602,2 +1602,4 @@\n-        if (e instanceof MouseEvent) {\n-            return prePostMouseEvent((MouseEvent)e);\n+        if (e instanceof MouseEvent mouseEvent) {\n+            return prePostMouseEvent(mouseEvent);\n+        } else {\n+            return super.prePostEvent(e);\n@@ -1605,1 +1607,0 @@\n-        return super.prePostEvent(e);\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XListPeer.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -491,1 +491,1 @@\n-                } else if (item instanceof XCheckboxMenuItemPeer) {\n+                } else if (item instanceof XCheckboxMenuItemPeer peer) {\n@@ -497,1 +497,1 @@\n-                    boolean checkState = ((XCheckboxMenuItemPeer)item).getTargetState();\n+                    boolean checkState = peer.getTargetState();\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XMenuWindow.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -69,2 +69,2 @@\n-                    if (device instanceof X11GraphicsDevice) {\n-                        int scale = ((X11GraphicsDevice) device).getScaleFactor();\n+                    if (device instanceof X11GraphicsDevice x11) {\n+                        int scale = x11.getScaleFactor();\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XMouseInfoPeer.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -119,4 +119,2 @@\n-                    if (cpeer instanceof LightweightPeer\n-                        && comp instanceof Container)\n-                    {\n-                        setForegroundForHierarchy((Container) comp, c);\n+                    if (cpeer instanceof LightweightPeer && comp instanceof Container container) {\n+                        setForegroundForHierarchy(container, c);\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XPanelPeer.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -60,8 +60,1 @@\n-        boolean isGtkSupported = false;\n-        if (tryGtk) {\n-            if (tk instanceof UNIXToolkit && ((UNIXToolkit) tk).loadGTK()) {\n-                isGtkSupported = true;\n-            }\n-        }\n-\n-        useGtk = (tryGtk && isGtkSupported);\n+        useGtk = tryGtk && tk instanceof UNIXToolkit utk && utk.loadGTK();\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XRobotPeer.java","additions":1,"deletions":8,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -174,1 +174,3 @@\n-        if (!(g instanceof Graphics2D)) {\n+        if (g instanceof Graphics2D graphics2d) {\n+            g2 = graphics2d;\n+        } else {\n@@ -183,2 +185,0 @@\n-        } else {\n-            g2 = (Graphics2D)g;\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XScrollbar.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -447,2 +447,1 @@\n-            JTextComponent comp = getComponent();\n-            if (comp instanceof JPasswordField && ((JPasswordField)comp).echoCharIsSet()) {\n+            if (getComponent() instanceof JPasswordField passwordField && passwordField.echoCharIsSet()) {\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XTextFieldPeer.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -761,3 +761,2 @@\n-        if (ge instanceof SunGraphicsEnvironment) {\n-            ((SunGraphicsEnvironment) ge).addDisplayChangedListener(\n-                    displayChangedHandler);\n+        if (ge instanceof SunGraphicsEnvironment sge) {\n+            sge.addDisplayChangedListener(displayChangedHandler);\n@@ -916,2 +915,4 @@\n-        if (screen instanceof X11GraphicsDevice) {\n-            return new XRobotPeer((X11GraphicsDevice) screen);\n+        if (screen instanceof X11GraphicsDevice x11gd) {\n+            return new XRobotPeer(x11gd);\n+        } else {\n+            return super.createRobot(screen);\n@@ -919,1 +920,0 @@\n-        return super.createRobot(screen);\n@@ -1408,3 +1408,2 @@\n-                if (v instanceof XComponentPeer) {\n-                    Component target = (Component)((XComponentPeer)v).getTarget();\n-                    log.fine(\"\\ttarget: \" + target);\n+                if (v instanceof XComponentPeer peer) {\n+                    log.fine(\"\\ttarget: \" + peer.getTarget());\n@@ -2532,4 +2531,1 @@\n-        if (!(gc instanceof X11GraphicsConfig)) {\n-            return false;\n-        }\n-        return ((X11GraphicsConfig)gc).isTranslucencyCapable();\n+        return gc instanceof X11GraphicsConfig x11gc && x11gc.isTranslucencyCapable();\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XToolkit.java","additions":9,"deletions":13,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -572,3 +572,7 @@\n-        return (baseWindow instanceof XWindowPeer) ? (XWindowPeer)baseWindow :\n-               (baseWindow instanceof XFocusProxyWindow) ?\n-               ((XFocusProxyWindow)baseWindow).getOwner() : null;\n+        if (baseWindow instanceof XWindowPeer peer) {\n+            return peer;\n+        } else if (baseWindow instanceof XFocusProxyWindow proxy) {\n+            return proxy.getOwner();\n+        } else {\n+            return null;\n+        }\n@@ -902,2 +906,2 @@\n-                    if (oppositeTarget instanceof Window) {\n-                        oppositeWindow = (Window) oppositeTarget;\n+                    if (oppositeTarget instanceof Window window) {\n+                        oppositeWindow = window;\n@@ -912,3 +916,3 @@\n-                    } else if (oppositeXWindow instanceof XDecoratedPeer) {\n-                        if (((XDecoratedPeer) oppositeXWindow).actualFocusedWindow != null) {\n-                            oppositeXWindow = ((XDecoratedPeer) oppositeXWindow).actualFocusedWindow;\n+                    } else if (oppositeXWindow instanceof XDecoratedPeer peer) {\n+                        if (peer.actualFocusedWindow != null) {\n+                            oppositeXWindow = peer.actualFocusedWindow;\n@@ -1133,2 +1137,1 @@\n-                        if(childPeer instanceof XWindowPeer) {\n-                            XWindowPeer windowPeer = (XWindowPeer) childPeer;\n+                        if(childPeer instanceof XWindowPeer windowPeer) {\n@@ -1572,2 +1575,1 @@\n-                        if (childWindow instanceof XWindowPeer) {\n-                            XWindowPeer np = (XWindowPeer)childWindow;\n+                        if (childWindow instanceof XWindowPeer np) {\n@@ -1687,2 +1689,1 @@\n-        if (parent instanceof XLightweightFramePeer) {\n-            XLightweightFramePeer peer = (XLightweightFramePeer) parent;\n+        if (parent instanceof XLightweightFramePeer peer) {\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11\/XWindowPeer.java","additions":15,"deletions":14,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -389,2 +389,2 @@\n-        if (client instanceof Container) {\n-            container = (Container) client;\n+        if (client instanceof Container c) {\n+            container = c;\n","filename":"src\/java.desktop\/unix\/classes\/sun\/awt\/X11InputMethodBase.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -270,2 +270,2 @@\n-                if (f2d instanceof PhysicalFont) { \/* paranoia *\/\n-                    return (PhysicalFont)f2d;\n+                if (f2d instanceof PhysicalFont physicalFont) { \/* paranoia *\/\n+                    return physicalFont;\n@@ -298,2 +298,2 @@\n-                    if (f2d instanceof PhysicalFont) { \/* paranoia *\/\n-                        return (PhysicalFont)f2d;\n+                    if (f2d instanceof PhysicalFont physicalFont) { \/* paranoia *\/\n+                        return physicalFont;\n@@ -388,5 +388,2 @@\n-        if (family != null) {\n-            Font2D f2D = family.getFontWithExactStyleMatch(fcInfo.style);\n-            if (f2D instanceof PhysicalFont) {\n-                physFont = (PhysicalFont)f2D;\n-            }\n+        if (family != null && family.getFontWithExactStyleMatch(fcInfo.style) instanceof PhysicalFont physicalFont) {\n+            physFont = physicalFont;\n","filename":"src\/java.desktop\/unix\/classes\/sun\/font\/FontConfigManager.java","additions":6,"deletions":9,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -252,2 +252,2 @@\n-            if (delegateFont instanceof NativeFont) {\n-                return new NativeStrike((NativeFont)delegateFont, desc);\n+            if (delegateFont instanceof NativeFont nativeFont) {\n+                return new NativeStrike(nativeFont, desc);\n","filename":"src\/java.desktop\/unix\/classes\/sun\/font\/NativeFont.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -46,2 +46,1 @@\n-        return (o instanceof MutableInteger) &&\n-               (((MutableInteger) o).getValue() == getValue());\n+        return o instanceof MutableInteger mutable && mutable.getValue() == getValue();\n","filename":"src\/java.desktop\/unix\/classes\/sun\/java2d\/xr\/MutableInteger.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -199,2 +199,2 @@\n-        if (sg2d.composite instanceof AlphaComposite) {\n-            int compRule = ((AlphaComposite) sg2d.composite).getRule();\n+        if (sg2d.composite instanceof AlphaComposite composite) {\n+            int compRule = composite.getRule();\n","filename":"src\/java.desktop\/unix\/classes\/sun\/java2d\/xr\/XRSurfaceData.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -251,11 +251,5 @@\n-        if (!(obj instanceof AttributeClass)) {\n-            return false;\n-        }\n-        if (this == obj) {\n-            return true;\n-        }\n-\n-        AttributeClass acObj = (AttributeClass) obj;\n-        return myType == acObj.getType() &&\n-               Objects.equals(myName, acObj.getName()) &&\n-               Objects.equals(myValue, acObj.getObjectValue());\n+        return this == obj ||\n+                obj instanceof AttributeClass acObj &&\n+                myType == acObj.getType() &&\n+                Objects.equals(myName, acObj.getName()) &&\n+                Objects.equals(myValue, acObj.getObjectValue());\n","filename":"src\/java.desktop\/unix\/classes\/sun\/print\/AttributeClass.java","additions":5,"deletions":11,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -1391,2 +1391,2 @@\n-            if (attr instanceof MediaSizeName) {\n-                return isSupportedMedia((MediaSizeName)attr);\n+            if (attr instanceof MediaSizeName msn) {\n+                return isSupportedMedia(msn);\n@@ -1394,2 +1394,2 @@\n-            if (attr instanceof MediaTray) {\n-                return isSupportedMediaTray((MediaTray)attr);\n+            if (attr instanceof MediaTray tray) {\n+                return isSupportedMediaTray(tray);\n@@ -1439,2 +1439,2 @@\n-            if (attr instanceof PrinterResolution) {\n-                return isSupportedResolution((PrinterResolution)attr);\n+            if (attr instanceof PrinterResolution printerResolution) {\n+                return isSupportedResolution(printerResolution);\n","filename":"src\/java.desktop\/unix\/classes\/sun\/print\/IPPPrintService.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -213,1 +213,1 @@\n-        else if (data instanceof InputStream) {\n+        else if (data instanceof InputStream stream) {\n@@ -215,1 +215,1 @@\n-                ((InputStream)data).close();\n+                stream.close();\n@@ -219,1 +219,1 @@\n-        else if (data instanceof Reader) {\n+        else if (data instanceof Reader reader) {\n@@ -221,1 +221,1 @@\n-                ((Reader)data).close();\n+                reader.close();\n@@ -355,1 +355,1 @@\n-        if ((service instanceof IPPPrintService) &&\n+        if (service instanceof IPPPrintService printService &&\n@@ -363,1 +363,1 @@\n-                     ((IPPPrintService)service).findCustomMedia(mediaName);\n+                     printService.findCustomMedia(mediaName);\n@@ -412,2 +412,2 @@\n-                if (!(service instanceof IPPPrintService &&\n-                    ((IPPPrintService)service).isIPPSupportedImages(\n+                if (!(service instanceof IPPPrintService printService &&\n+                    printService.isIPPSupportedImages(\n@@ -416,2 +416,2 @@\n-                    if (service instanceof IPPPrintService) {\n-                        ((IPPPrintService)service).wakeNotifier();\n+                    if (service instanceof IPPPrintService printService) {\n+                        printService.wakeNotifier();\n@@ -435,2 +435,2 @@\n-                if ((service instanceof IPPPrintService) &&\n-                    ((IPPPrintService)service).isIPPSupportedImages(\n+                if (service instanceof IPPPrintService printService &&\n+                    printService.isIPPSupportedImages(\n@@ -441,2 +441,2 @@\n-                    if (service instanceof IPPPrintService) {\n-                        ((IPPPrintService)service).wakeNotifier();\n+                    if (service instanceof IPPPrintService printService) {\n+                        printService.wakeNotifier();\n@@ -501,2 +501,2 @@\n-                if (service instanceof IPPPrintService) {\n-                    ((IPPPrintService)service).wakeNotifier();\n+                if (service instanceof IPPPrintService printService) {\n+                    printService.wakeNotifier();\n@@ -517,2 +517,2 @@\n-                if (service instanceof IPPPrintService) {\n-                    ((IPPPrintService)service).wakeNotifier();\n+                if (service instanceof IPPPrintService printService) {\n+                    printService.wakeNotifier();\n@@ -618,2 +618,2 @@\n-        if (service instanceof IPPPrintService) {\n-            ((IPPPrintService)service).wakeNotifier();\n+        if (service instanceof IPPPrintService printService) {\n+            printService.wakeNotifier();\n","filename":"src\/java.desktop\/unix\/classes\/sun\/print\/UnixPrintJob.java","additions":20,"deletions":20,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -192,5 +192,4 @@\n-        State rv = null;\n-        Object tmpObject =\n-            component.getClientProperty(PartUIClientPropertyKey.getKey(part));\n-        if (tmpObject instanceof State) {\n-            rv = (State) tmpObject;\n+        if (component.getClientProperty(PartUIClientPropertyKey.getKey(part)) instanceof State state) {\n+            return state;\n+        } else {\n+            return null;\n@@ -198,1 +197,0 @@\n-        return rv;\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/AnimationController.java","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -211,3 +211,2 @@\n-            if (component instanceof JComponent) {\n-                JComponent c = (JComponent)component;\n-                String subAppName = (String)c.getClientProperty(\"XPStyle.subAppName\");\n+            if (component instanceof JComponent c) {\n+                String subAppName = (String) c.getClientProperty(\"XPStyle.subAppName\");\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/TMSchema.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -160,1 +160,1 @@\n-            if (!(c instanceof JToolBar)) {\n+            if (!(c instanceof JToolBar toolBar)) {\n@@ -172,2 +172,2 @@\n-            if (((JToolBar)c).isFloatable()) {\n-                boolean vertical = ((JToolBar)c).getOrientation() == VERTICAL;\n+            if (toolBar.isFloatable()) {\n+                boolean vertical = toolBar.getOrientation() == VERTICAL;\n@@ -229,8 +229,9 @@\n-            if (!(c instanceof JToolBar)) {\n-                return insets;\n-            }\n-            if (((JToolBar)c).isFloatable()) {\n-                int gripInset = (XPStyle.getXP() != null) ? 12 : 9;\n-                if (((JToolBar)c).getOrientation() == HORIZONTAL) {\n-                    if (c.getComponentOrientation().isLeftToRight()) {\n-                        insets.left = gripInset;\n+            if (c instanceof JToolBar toolBar) {\n+                if (toolBar.isFloatable()) {\n+                    int gripInset = (XPStyle.getXP() != null) ? 12 : 9;\n+                    if (toolBar.getOrientation() == HORIZONTAL) {\n+                        if (c.getComponentOrientation().isLeftToRight()) {\n+                            insets.left = gripInset;\n+                        } else {\n+                            insets.right = gripInset;\n+                        }\n@@ -238,1 +239,1 @@\n-                        insets.right = gripInset;\n+                        insets.top = gripInset;\n@@ -240,2 +241,0 @@\n-                } else {\n-                    insets.top = gripInset;\n@@ -244,0 +243,1 @@\n+\n@@ -321,5 +321,5 @@\n-            JInternalFrame jif = null;\n-            if (c instanceof JInternalFrame) {\n-                jif = (JInternalFrame)c;\n-            } else if (c instanceof JInternalFrame.JDesktopIcon) {\n-                jif = ((JInternalFrame.JDesktopIcon)c).getInternalFrame();\n+            JInternalFrame jif;\n+            if (c instanceof JInternalFrame internalFrame) {\n+                jif = internalFrame;\n+            } else if (c instanceof JInternalFrame.JDesktopIcon desktopIcon) {\n+                jif = desktopIcon.getInternalFrame();\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsBorders.java","additions":19,"deletions":19,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -184,2 +184,1 @@\n-        boolean toolbar = (b.getParent() instanceof JToolBar);\n-        return toolbar ? Part.TP_BUTTON : Part.BP_PUSHBUTTON;\n+        return b.getParent() instanceof JToolBar ? Part.TP_BUTTON : Part.BP_PUSHBUTTON;\n@@ -213,2 +212,1 @@\n-            boolean toolbar = (b.getParent() instanceof JToolBar);\n-            if (toolbar) {\n+            if (b.getParent() instanceof JToolBar) {\n@@ -236,2 +234,1 @@\n-                } else if (b instanceof JButton\n-                           && ((JButton)b).isDefaultButton()) {\n+                } else if (b instanceof JButton button && button.isDefaultButton()) {\n@@ -304,2 +301,1 @@\n-        } else if (b instanceof CompoundBorder) {\n-            CompoundBorder cb = (CompoundBorder)b;\n+        } else if (b instanceof CompoundBorder cb) {\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsButtonUI.java","additions":4,"deletions":8,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -113,9 +113,9 @@\n-                JComboBox<?> rv = null;\n-                if (source instanceof JComboBox) {\n-                    rv = (JComboBox) source;\n-                } else if (source instanceof XPComboBoxButton) {\n-                    rv = ((XPComboBoxButton) source)\n-                        .getWindowsComboBoxUI().comboBox;\n-                } else if (source instanceof JTextField &&\n-                        ((JTextField) source).getParent() instanceof JComboBox) {\n-                    rv = (JComboBox) ((JTextField) source).getParent();\n+                if (source instanceof JComboBox<?> comboBox) {\n+                    return comboBox;\n+                } else if (source instanceof XPComboBoxButton comboBox) {\n+                    return comboBox.getWindowsComboBoxUI().comboBox;\n+                } else if (source instanceof JTextField textField &&\n+                        textField.getParent() instanceof JComboBox<?> comboBox) {\n+                    return comboBox;\n+                } else {\n+                    return null;\n@@ -123,1 +123,0 @@\n-                return rv;\n@@ -128,4 +127,4 @@\n-                WindowsComboBoxUI rv = null;\n-                if (comboBox != null\n-                    && comboBox.getUI() instanceof WindowsComboBoxUI) {\n-                    rv = (WindowsComboBoxUI) comboBox.getUI();\n+                if (comboBox != null && comboBox.getUI() instanceof WindowsComboBoxUI box) {\n+                    return box;\n+                } else {\n+                    return null;\n@@ -133,1 +132,0 @@\n-                return rv;\n@@ -142,12 +140,8 @@\n-                String propertyName = e.getPropertyName();\n-                Object source = null;\n-                if (\"componentOrientation\" == propertyName\n-                    && (source = e.getSource()) instanceof JComboBox\n-                    && ((JComboBox) source).getUI() instanceof\n-                      WindowsComboBoxUI) {\n-                    JComboBox<?> comboBox = (JComboBox) source;\n-                    WindowsComboBoxUI comboBoxUI = (WindowsComboBoxUI) comboBox.getUI();\n-                    if (comboBoxUI.arrowButton instanceof XPComboBoxButton) {\n-                        ((XPComboBoxButton) comboBoxUI.arrowButton).setPart(\n-                                    (comboBox.getComponentOrientation() ==\n-                                       ComponentOrientation.RIGHT_TO_LEFT)\n+                if (\"componentOrientation\".equals(e.getPropertyName()) &&\n+                        e.getSource() instanceof JComboBox<?> comboBox &&\n+                        comboBox.getUI() instanceof WindowsComboBoxUI comboBoxUI &&\n+                        comboBoxUI.arrowButton instanceof XPComboBoxButton xpComboBox) {\n+\n+                    xpComboBox.setPart(\n+                            (comboBox.getComponentOrientation() ==\n+                                    ComponentOrientation.RIGHT_TO_LEFT)\n@@ -156,4 +150,3 @@\n-                            }\n-                        }\n-                    }\n-                };\n+                }\n+            }\n+        };\n@@ -361,5 +354,2 @@\n-            boolean isEditable = false;\n-            if (c instanceof JComboBox) {\n-                isEditable = ((JComboBox) c).isEditable();\n-            }\n-            if (((JComboBox)c).getBorder() instanceof EmptyBorder) {\n+            boolean isEditable = c instanceof JComboBox<?> comboBox && comboBox.isEditable();\n+            if (c.getBorder() instanceof EmptyBorder) {\n@@ -632,2 +622,1 @@\n-            if (rv instanceof JComponent) {\n-                JComponent component = (JComponent) rv;\n+            if (rv instanceof JComponent component) {\n@@ -648,4 +637,2 @@\n-                        if (storedBorder instanceof Border) {\n-                            component.setBorder(\n-                                (storedBorder == NULL_BORDER) ? null\n-                                    : (Border) storedBorder);\n+                        if (storedBorder instanceof Border border) {\n+                            component.setBorder(storedBorder == NULL_BORDER ? null : border);\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsComboBoxUI.java","additions":29,"deletions":42,"binary":false,"changes":71,"status":"modified"},{"patch":"@@ -996,2 +996,2 @@\n-                        if (component instanceof JButton && component != result) {\n-                            ((JButton) component).getModel().setRollover(false);\n+                        if (component instanceof JButton button && component != result) {\n+                            button.getModel().setRollover(false);\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsFileChooserUI.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -216,1 +216,0 @@\n-        Component c;\n@@ -218,15 +217,9 @@\n-            c = cont.getComponent(i);\n-            if(c == null || !c.isVisible()) {\n-                continue;\n-            }\n-            if(c instanceof AbstractButton\n-               && ((AbstractButton)c).getMnemonic() != '\\0') {\n-                c.repaint();\n-                continue;\n-            } else if(c instanceof JLabel\n-                      && ((JLabel)c).getDisplayedMnemonic() != '\\0') {\n-                c.repaint();\n-                continue;\n-            }\n-            if(c instanceof Container) {\n-                repaintMnemonicsInContainer((Container)c);\n+            Component c = cont.getComponent(i);\n+            if (c != null && c.isVisible()) {\n+                if (c instanceof AbstractButton button && button.getMnemonic() != '\\0') {\n+                    c.repaint();\n+                } else if (c instanceof JLabel label && label.getDisplayedMnemonic() != '\\0') {\n+                    c.repaint();\n+                } else if (c instanceof Container container) {\n+                    repaintMnemonicsInContainer(container);\n+                }\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsGraphicsUtils.java","additions":9,"deletions":16,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -689,4 +689,5 @@\n-                State state = State.NORMAL;\n-                if (c instanceof JMenuItem) {\n-                    state = ((JMenuItem) c).getModel().isEnabled()\n-                    ? State.NORMAL : State.DISABLED;\n+                State state;\n+                if (c instanceof JMenuItem menuItem && !menuItem.getModel().isEnabled()) {\n+                    state = State.DISABLED;\n+                } else {\n+                    state = State.NORMAL;\n@@ -749,2 +750,1 @@\n-            return icon instanceof VistaMenuItemCheckIcon\n-              && ((VistaMenuItemCheckIcon) icon).type == getType(prefix);\n+            return icon instanceof VistaMenuItemCheckIcon vmic && vmic.type == getType(prefix);\n@@ -898,13 +898,16 @@\n-            private static WindowsMenuItemUIAccessor getAccessor(\n-                    JMenuItem menuItem) {\n-                WindowsMenuItemUIAccessor rv = null;\n-                ButtonUI uiObject = (menuItem != null) ? menuItem.getUI()\n-                        : null;\n-                if (uiObject instanceof WindowsMenuItemUI) {\n-                    rv = ((WindowsMenuItemUI) uiObject).accessor;\n-                } else if (uiObject instanceof WindowsMenuUI) {\n-                    rv = ((WindowsMenuUI) uiObject).accessor;\n-                } else if (uiObject instanceof WindowsCheckBoxMenuItemUI) {\n-                    rv = ((WindowsCheckBoxMenuItemUI) uiObject).accessor;\n-                } else if (uiObject instanceof WindowsRadioButtonMenuItemUI) {\n-                    rv = ((WindowsRadioButtonMenuItemUI) uiObject).accessor;\n+            private static WindowsMenuItemUIAccessor getAccessor(JMenuItem menuItem) {\n+                if (menuItem == null) {\n+                    return null;\n+                }\n+\n+                ButtonUI uiObject = menuItem.getUI();\n+                if (uiObject instanceof WindowsMenuItemUI winMenu) {\n+                    return winMenu.accessor;\n+                } else if (uiObject instanceof WindowsMenuUI winMenu) {\n+                    return winMenu.accessor;\n+                } else if (uiObject instanceof WindowsCheckBoxMenuItemUI winCheck) {\n+                    return winCheck.accessor;\n+                } else if (uiObject instanceof WindowsRadioButtonMenuItemUI winRadio) {\n+                    return winRadio.accessor;\n+                } else {\n+                    return null;\n@@ -912,1 +915,0 @@\n-                return rv;\n@@ -916,3 +918,2 @@\n-                if (state == null && c instanceof JMenuItem) {\n-                    WindowsMenuItemUIAccessor accessor =\n-                        getAccessor((JMenuItem) c);\n+                if (state == null && c instanceof JMenuItem menu) {\n+                    WindowsMenuItemUIAccessor accessor = getAccessor(menu);\n@@ -964,3 +965,4 @@\n-                if (rv instanceof VistaMenuItemCheckIcon\n-                      && ((VistaMenuItemCheckIcon) rv).type == type) {\n-                    rv = null;\n+                if (rv instanceof VistaMenuItemCheckIcon menuItem && menuItem.type == type) {\n+                    return null;\n+                } else {\n+                    return rv;\n@@ -968,1 +970,0 @@\n-                return rv;\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsIconFactory.java","additions":28,"deletions":27,"binary":false,"changes":55,"status":"modified"},{"patch":"@@ -240,2 +240,1 @@\n-            if (gradientsOn.booleanValue() && g instanceof Graphics2D) {\n-                Graphics2D g2 = (Graphics2D)g;\n+            if (gradientsOn.booleanValue() && g instanceof Graphics2D g2) {\n@@ -514,2 +513,2 @@\n-                if (objects[i] instanceof UIDefaults.LazyValue) {\n-                    icons[i] = (Icon)((UIDefaults.LazyValue)objects[i]).createValue(null);\n+                if (objects[i] instanceof UIDefaults.LazyValue lazyValue) {\n+                    icons[i] = (Icon) lazyValue.createValue(null);\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsInternalFrameTitlePane.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2038,2 +2038,2 @@\n-            if (c instanceof JRootPane) {\n-                root = (JRootPane)c;\n+            if (c instanceof JRootPane rootPane) {\n+                root = rootPane;\n@@ -2233,2 +2233,1 @@\n-            if (value instanceof Font) {\n-                Font font = (Font)value;\n+            if (value instanceof Font font) {\n@@ -2346,2 +2345,2 @@\n-            if (value instanceof UIDefaults.LazyValue) {\n-                value = ((UIDefaults.LazyValue)value).createValue(table);\n+            if (value instanceof LazyValue lazyValue) {\n+                value = lazyValue.createValue(table);\n@@ -2349,2 +2348,2 @@\n-            if (value instanceof UIDefaults.ActiveValue) {\n-                return ((UIDefaults.ActiveValue)value).createValue(table);\n+            if (value instanceof UIDefaults.ActiveValue activeValue) {\n+                return activeValue.createValue(table);\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsLookAndFeel.java","additions":7,"deletions":8,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -81,2 +81,3 @@\n-            if (component instanceof Window) {\n-                window = (Window) component;\n+            if (component instanceof Window window) {\n+                this.window = window;\n+\n@@ -93,1 +94,2 @@\n-                ((Window) component).addWindowListener(windowListener);\n+\n+                window.addWindowListener(windowListener);\n@@ -182,7 +184,1 @@\n-        if (rootPane != null) {\n-            Component component = rootPane.getParent();\n-            if (component instanceof Window) {\n-                return ((Window) component).isActive();\n-            }\n-        }\n-        return true;\n+        return rootPane == null || !(rootPane.getParent() instanceof Window window && window.isActive());\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsMenuBarUI.java","additions":6,"deletions":10,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -127,1 +127,1 @@\n-        hotTrackingOn = (obj instanceof Boolean) ? (Boolean)obj : true;\n+        hotTrackingOn = obj instanceof Boolean bool ? bool : true;\n@@ -291,1 +291,1 @@\n-        if (c instanceof JMenu && ((JMenu)c).isTopLevelMenu() &&\n+        if (c instanceof JMenu menu && menu.isTopLevelMenu() &&\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsMenuUI.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -56,4 +56,2 @@\n-            Component parent = c.getParent();\n-            if (parent instanceof JComponent) {\n-                Object gutterOffsetObject =\n-                    ((JComponent) parent).getClientProperty(\n+            if (c.getParent() instanceof JComponent component) {\n+                Object gutterOffsetObject = component.getClientProperty(\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsPopupMenuSeparatorUI.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -114,1 +114,3 @@\n-                if (c instanceof JPopupMenu) c = ((JPopupMenu)c).getInvoker();\n+                if (c instanceof JPopupMenu menu) {\n+                    c = menu.getInvoker();\n+                }\n@@ -127,4 +129,1 @@\n-        int rv = -1;\n-        Object maxTextOffset =\n-            c.getClientProperty(BASICMENUITEMUI_MAX_TEXT_OFFSET);\n-        if (maxTextOffset instanceof Integer) {\n+        if (c.getClientProperty(BASICMENUITEMUI_MAX_TEXT_OFFSET) instanceof Integer i) {\n@@ -135,2 +134,0 @@\n-            rv = (Integer) maxTextOffset;\n-            int menuItemOffset = 0;\n@@ -139,1 +136,1 @@\n-                menuItemOffset = component.getX();\n+                i += component.getX();\n@@ -141,1 +138,4 @@\n-            rv += menuItemOffset;\n+\n+            return i;\n+        } else {\n+            return -1;\n@@ -143,1 +143,0 @@\n-        return rv;\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsPopupMenuUI.java","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -308,10 +308,8 @@\n-                if (!(g instanceof Graphics2D)) {\n-                    return;\n-                }\n-                paintIndeterminateFrame(boxRect, (Graphics2D)g, vertical,\n-                                        barRectWidth, barRectHeight);\n-                if (progressBar.isStringPainted()) {\n-                    if (!vertical) {\n-                        paintString(g, -1, -1, barRectWidth, barRectHeight, 0, null);\n-                    } else {\n-                        paintString(g, 1, 1, barRectWidth, barRectHeight, 0, null);\n+                if (g instanceof Graphics2D g2d) {\n+                    paintIndeterminateFrame(boxRect, g2d, vertical, barRectWidth, barRectHeight);\n+                    if (progressBar.isStringPainted()) {\n+                        if (!vertical) {\n+                            paintString(g, -1, -1, barRectWidth, barRectHeight, 0, null);\n+                        } else {\n+                            paintString(g, 1, 1, barRectWidth, barRectHeight, 0, null);\n+                        }\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsProgressBarUI.java","additions":8,"deletions":10,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -104,2 +104,2 @@\n-                if(mbar == null && winAncestor instanceof JFrame) {\n-                    mbar = ((JFrame)winAncestor).getJMenuBar();\n+                if(mbar == null && winAncestor instanceof JFrame frame) {\n+                    mbar = frame.getJMenuBar();\n@@ -127,2 +127,2 @@\n-                if(mbar == null && winAncestor instanceof JFrame) {\n-                    mbar = ((JFrame)winAncestor).getJMenuBar();\n+                if(mbar == null && winAncestor instanceof JFrame frame) {\n+                    mbar = frame.getJMenuBar();\n@@ -140,8 +140,7 @@\n-                boolean skip = false;\n-                Toolkit tk = Toolkit.getDefaultToolkit();\n-                if (tk instanceof SunToolkit) {\n-                    Component originalSource = AWTAccessor.getKeyEventAccessor()\n-                            .getOriginalSource(ev);\n-                    skip = SunToolkit.getContainingWindow(originalSource) != winAncestor ||\n-                            ev.getWhen() <= ((SunToolkit) tk).getWindowDeactivationTime(winAncestor);\n-                }\n+                Component originalSource = AWTAccessor\n+                        .getKeyEventAccessor()\n+                        .getOriginalSource(ev);\n+\n+                boolean skip = Toolkit.getDefaultToolkit() instanceof SunToolkit stk &&\n+                        (SunToolkit.getContainingWindow(originalSource) != winAncestor ||\n+                        ev.getWhen() <= stk.getWindowDeactivationTime(winAncestor));\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsRootPaneUI.java","additions":11,"deletions":12,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -100,2 +100,2 @@\n-            if (listeners[counter] instanceof UIResource) {\n-                return (UIResource)listeners[counter];\n+            if (listeners[counter] instanceof UIResource resource) {\n+                return resource;\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsSpinnerUI.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -190,7 +190,2 @@\n-                Rectangle alloc;\n-                if (bounds instanceof Rectangle) {\n-                    alloc = (Rectangle)bounds;\n-                }\n-                else {\n-                    alloc = bounds.getBounds();\n-                }\n+                Rectangle alloc = bounds instanceof Rectangle rect ? rect : bounds.getBounds();\n+\n@@ -217,2 +212,2 @@\n-                    Rectangle r = (shape instanceof Rectangle) ?\n-                                  (Rectangle)shape : shape.getBounds();\n+                    Rectangle r = shape instanceof Rectangle rect ? rect : shape.getBounds();\n+\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/WindowsTextUI.java","additions":4,"deletions":9,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -309,1 +309,1 @@\n-        public Insets getBorderInsets(Component c, Insets insets)       {\n+        public Insets getBorderInsets(Component c, Insets insets) {\n@@ -316,13 +316,13 @@\n-           if (c instanceof AbstractButton) {\n-               margin = ((AbstractButton)c).getMargin();\n-           } else if (c instanceof JToolBar) {\n-               margin = ((JToolBar)c).getMargin();\n-           } else if (c instanceof JTextComponent) {\n-               margin = ((JTextComponent)c).getMargin();\n-           }\n-           insets.top    = (margin != null? margin.top : 0)    + thickness;\n-           insets.left   = (margin != null? margin.left : 0)   + thickness;\n-           insets.bottom = (margin != null? margin.bottom : 0) + thickness;\n-           insets.right =  (margin != null? margin.right : 0)  + thickness;\n-\n-           return insets;\n+            if (c instanceof AbstractButton abstractButton) {\n+                margin = abstractButton.getMargin();\n+            } else if (c instanceof JToolBar toolbar) {\n+                margin = toolbar.getMargin();\n+            } else if (c instanceof JTextComponent component) {\n+                margin = component.getMargin();\n+            }\n+            insets.top = (margin != null ? margin.top : 0) + thickness;\n+            insets.left = (margin != null ? margin.left : 0) + thickness;\n+            insets.bottom = (margin != null ? margin.bottom : 0) + thickness;\n+            insets.right = (margin != null ? margin.right : 0) + thickness;\n+\n+            return insets;\n@@ -343,1 +343,0 @@\n-            State state = State.NORMAL;\n@@ -346,8 +345,7 @@\n-            if(c instanceof JComboBox) {\n-                JComboBox<?> cb = (JComboBox)c;\n-                \/\/ note. in the future this should be replaced with a call\n-                \/\/ to BasicLookAndFeel.getUIOfType()\n-                if(cb.getUI() instanceof WindowsComboBoxUI) {\n-                    WindowsComboBoxUI wcb = (WindowsComboBoxUI)cb.getUI();\n-                    state = wcb.getXPComboBoxState(cb);\n-                }\n+            \/\/ note. in the future this should be replaced with a call\n+            \/\/ to BasicLookAndFeel.getUIOfType()\n+            State state;\n+            if (c instanceof JComboBox<?> cb && cb.getUI() instanceof WindowsComboBoxUI wcb) {\n+                state = wcb.getXPComboBoxState(cb);\n+            } else {\n+                state = State.NORMAL;\n@@ -373,1 +371,1 @@\n-        public Insets getBorderInsets(Component c, Insets insets)       {\n+        public Insets getBorderInsets(Component c, Insets insets) {\n@@ -376,1 +374,1 @@\n-            if(borderInsets == null) {\n+            if (borderInsets == null) {\n@@ -384,13 +382,14 @@\n-           if (c instanceof AbstractButton) {\n-               margin = ((AbstractButton)c).getMargin();\n-           } else if (c instanceof JToolBar) {\n-               margin = ((JToolBar)c).getMargin();\n-           } else if (c instanceof JTextComponent) {\n-               margin = ((JTextComponent)c).getMargin();\n-           }\n-           insets.top    = (margin != null? margin.top : 0)    + borderInsets.top;\n-           insets.left   = (margin != null? margin.left : 0)   + borderInsets.left;\n-           insets.bottom = (margin != null? margin.bottom : 0) + borderInsets.bottom;\n-           insets.right  = (margin != null? margin.right : 0)  + borderInsets.right;\n-\n-           return insets;\n+            if (c instanceof AbstractButton button) {\n+                margin = button.getMargin();\n+            } else if (c instanceof JToolBar toolbar) {\n+                margin = toolbar.getMargin();\n+            } else if (c instanceof JTextComponent component) {\n+                margin = component.getMargin();\n+            }\n+\n+            insets.top = (margin != null ? margin.top : 0) + borderInsets.top;\n+            insets.left = (margin != null ? margin.left : 0) + borderInsets.left;\n+            insets.bottom = (margin != null ? margin.bottom : 0) + borderInsets.bottom;\n+            insets.right = (margin != null ? margin.right : 0) + borderInsets.right;\n+\n+            return insets;\n@@ -410,2 +409,2 @@\n-            if (c instanceof AbstractButton) {\n-                Insets m = ((AbstractButton)c).getMargin();\n+            if (c instanceof AbstractButton button) {\n+                Insets m = button.getMargin();\n@@ -425,4 +424,4 @@\n-            } else if (c instanceof JToolBar) {\n-                margin = ((JToolBar)c).getMargin();\n-            } else if (c instanceof JTextComponent) {\n-                margin = ((JTextComponent)c).getMargin();\n+            } else if (c instanceof JToolBar toolBar) {\n+                margin = toolBar.getMargin();\n+            } else if (c instanceof JTextComponent component) {\n+                margin = component.getMargin();\n@@ -549,1 +548,1 @@\n-            return (obj instanceof Skin && ((Skin)obj).string.equals(string));\n+            return obj instanceof Skin skin && skin.string.equals(string);\n@@ -597,1 +596,1 @@\n-            if (component instanceof JComponent\n+            if (component instanceof JComponent jComponent\n@@ -600,1 +599,1 @@\n-                AnimationController.paintSkin((JComponent) component, this,\n+                AnimationController.paintSkin(jComponent, this,\n","filename":"src\/java.desktop\/windows\/classes\/com\/sun\/java\/swing\/plaf\/windows\/XPStyle.java","additions":46,"deletions":47,"binary":false,"changes":93,"status":"modified"},{"patch":"@@ -617,3 +617,2 @@\n-                Window fsw = gd.getFullScreenWindow();\n-                if (fsw instanceof Frame) {\n-                    ((Frame)fsw).setExtendedState(state);\n+                if (gd.getFullScreenWindow() instanceof Frame frame) {\n+                    frame.setExtendedState(state);\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/Win32GraphicsDevice.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -183,2 +183,2 @@\n-            if (gd instanceof DisplayChangedListener) {\n-                ((DisplayChangedListener)gd).displayChanged();\n+            if (gd instanceof DisplayChangedListener displayChangedListener) {\n+                displayChangedListener.displayChanged();\n@@ -234,5 +234,4 @@\n-        GraphicsConfiguration gc;\n-        if (peer != null && (gc = peer.getGraphicsConfiguration()) != null) {\n-            GraphicsDevice gd = gc.getDevice();\n-            if (gd instanceof D3DGraphicsDevice) {\n-                return ((D3DGraphicsDevice)gd).isD3DEnabledOnDevice();\n+        if (peer != null) {\n+            GraphicsConfiguration gc = peer.getGraphicsConfiguration();\n+            if (gc != null && gc.getDevice() instanceof D3DGraphicsDevice device) {\n+                return device.isD3DEnabledOnDevice();\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/Win32GraphicsEnvironment.java","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -400,5 +400,4 @@\n-                                if (driveRoots[i] instanceof Win32ShellFolder2) {\n-                                    Win32ShellFolder2 sf = (Win32ShellFolder2) driveRoots[i];\n-                                    if (sf.isFileSystem() && !sf.hasAttribute(ATTRIB_REMOVABLE)) {\n-                                        return new File(sf.getPath());\n-                                    }\n+                                if (driveRoots[i] instanceof Win32ShellFolder2 sf &&\n+                                        sf.isFileSystem() &&\n+                                        !sf.hasAttribute(ATTRIB_REMOVABLE)) {\n+                                    return new File(sf.getPath());\n@@ -545,1 +544,3 @@\n-            if (!(o instanceof File)) {\n+            if (o instanceof File file) {\n+                return pathsEqual(getPath(), file.getPath());\n+            } else {\n@@ -548,1 +549,0 @@\n-            return pathsEqual(getPath(), ((File) o).getPath());\n@@ -1305,2 +1305,1 @@\n-                if (f instanceof Win32ShellFolder2 &&\n-                                           ((Win32ShellFolder2)f).isLibrary()) {\n+                if (f instanceof Win32ShellFolder2 shell && shell.isLibrary()) {\n@@ -1354,2 +1353,2 @@\n-                    if (o instanceof Win32ShellFolder2\n-                        && o1 instanceof Win32ShellFolder2) {\n+                    if (o instanceof Win32ShellFolder2 w\n+                            && o1 instanceof Win32ShellFolder2 w1) {\n@@ -1358,3 +1357,3 @@\n-                            ((Win32ShellFolder2) o).getRelativePIDL(),\n-                            ((Win32ShellFolder2) o1).getRelativePIDL(),\n-                            columnIdx);\n+                                w.getRelativePIDL(),\n+                                w1.getRelativePIDL(),\n+                                columnIdx);\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/shell\/Win32ShellFolder2.java","additions":13,"deletions":14,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -344,6 +344,4 @@\n-                    if (value instanceof Integer) {\n-                        \/\/ A CSIDL\n-                        folders.add(new Win32ShellFolder2((Integer)value));\n-                    } else if (value instanceof String) {\n-                        \/\/ A path\n-                        folders.add(createShellFolder(new File((String)value)));\n+                    if (value instanceof Integer csidl) {\n+                        folders.add(new Win32ShellFolder2(csidl));\n+                    } else if (value instanceof String path) {\n+                        folders.add(createShellFolder(new File(path)));\n@@ -432,7 +430,4 @@\n-            if (file instanceof Win32ShellFolder2) {\n-                Win32ShellFolder2 f = (Win32ShellFolder2)file;\n-                if (f.isLink()) {\n-                    Win32ShellFolder2 link = (Win32ShellFolder2)f.getLinkLocation();\n-                    if (link != null)\n-                        sm.checkRead(link.getPath());\n-                }\n+            if (file instanceof Win32ShellFolder2 f && f.isLink()) {\n+                Win32ShellFolder2 link = (Win32ShellFolder2) f.getLinkLocation();\n+                if (link != null)\n+                    sm.checkRead(link.getPath());\n@@ -491,4 +486,1 @@\n-\n-            if (dir instanceof Win32ShellFolder2) {\n-                Win32ShellFolder2 sf = (Win32ShellFolder2)dir;\n-\n+            if (dir instanceof Win32ShellFolder2 sf) {\n@@ -651,2 +643,2 @@\n-                    if (cause instanceof Exception) {\n-                        throw (Exception) cause;\n+                    if (cause instanceof Exception ex) {\n+                        throw ex;\n@@ -655,2 +647,2 @@\n-                    if (cause instanceof Error) {\n-                        throw (Error) cause;\n+                    if (cause instanceof Error er) {\n+                        throw er;\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/shell\/Win32ShellFolderManager2.java","additions":13,"deletions":21,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -83,1 +83,1 @@\n-        if (!forceSW && gc instanceof AccelGraphicsConfig) {\n+        if (!forceSW && gc instanceof AccelGraphicsConfig agc) {\n@@ -85,1 +85,0 @@\n-            AccelGraphicsConfig agc = (AccelGraphicsConfig)gc;\n@@ -210,2 +209,1 @@\n-            if (bb instanceof BufferedImage) {\n-                BufferedImage bi = (BufferedImage)bb;\n+            if (bb instanceof BufferedImage bi) {\n@@ -216,12 +214,10 @@\n-            } else if (bb instanceof VolatileImage) {\n-                viBB = (VolatileImage)bb;\n-                if (bb instanceof DestSurfaceProvider) {\n-                    Surface s = ((DestSurfaceProvider)bb).getDestSurface();\n-                    if (s instanceof BufImgSurfaceData) {\n-                        \/\/ the image is probably lost, upload the data from the\n-                        \/\/ backup surface to avoid creating another heap-based\n-                        \/\/ image (the parent's buffer)\n-                        int w = viBB.getWidth();\n-                        int h = viBB.getHeight();\n-                        BufImgSurfaceData bisd = (BufImgSurfaceData)s;\n-                        int[] data = ((DataBufferInt)bisd.getRaster(0,0,w,h).\n+            } else if (bb instanceof VolatileImage vi) {\n+                viBB = vi;\n+                if (bb instanceof DestSurfaceProvider dsp &&\n+                        dsp.getDestSurface() instanceof BufImgSurfaceData bisd) {\n+                    \/\/ the image is probably lost, upload the data from the\n+                    \/\/ backup surface to avoid creating another heap-based\n+                    \/\/ image (the parent's buffer)\n+                    int w = viBB.getWidth();\n+                    int h = viBB.getHeight();\n+                    int[] data = ((DataBufferInt) bisd.getRaster(0, 0, w, h).\n@@ -229,3 +225,2 @@\n-                        peer.updateWindowImpl(data, w, h);\n-                        return true;\n-                    }\n+                    peer.updateWindowImpl(data, w, h);\n+                    return true;\n@@ -290,2 +285,1 @@\n-                if (gc instanceof AccelGraphicsConfig) {\n-                    AccelGraphicsConfig agc = ((AccelGraphicsConfig)gc);\n+                if (gc instanceof AccelGraphicsConfig agc) {\n@@ -334,24 +328,20 @@\n-            if (bb instanceof DestSurfaceProvider) {\n-                Surface s = ((DestSurfaceProvider)bb).getDestSurface();\n-                if (s instanceof AccelSurface) {\n-                    final boolean[] arr = { false };\n-                    final AccelSurface as = (AccelSurface)s;\n-                    final int w = as.getBounds().width;\n-                    final int h = as.getBounds().height;\n-                    RenderQueue rq = as.getContext().getRenderQueue();\n-                    rq.lock();\n-                    try {\n-                        BufferedContext.validateContext(as);\n-                        rq.flushAndInvokeNow(new Runnable() {\n-                            @Override\n-                            public void run() {\n-                                long psdops = as.getNativeOps();\n-                                arr[0] = updateWindowAccel(psdops, w, h);\n-                            }\n-                        });\n-                    } catch (InvalidPipeException e) {\n-                        \/\/ ignore, false will be returned\n-                    } finally {\n-                        rq.unlock();\n-                    }\n-                    return arr[0];\n+            if (bb instanceof DestSurfaceProvider dsp &&\n+                    dsp.getDestSurface() instanceof AccelSurface as) {\n+                final boolean[] arr = {false};\n+                final int w = as.getBounds().width;\n+                final int h = as.getBounds().height;\n+                RenderQueue rq = as.getContext().getRenderQueue();\n+                rq.lock();\n+                try {\n+                    BufferedContext.validateContext(as);\n+                    rq.flushAndInvokeNow(new Runnable() {\n+                        @Override\n+                        public void run() {\n+                            long psdops = as.getNativeOps();\n+                            arr[0] = updateWindowAccel(psdops, w, h);\n+                        }\n+                    });\n+                } catch (InvalidPipeException e) {\n+                    \/\/ ignore, false will be returned\n+                } finally {\n+                    rq.unlock();\n@@ -359,0 +349,1 @@\n+                return arr[0];\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/TranslucentWindowPainter.java","additions":36,"deletions":45,"binary":false,"changes":81,"status":"modified"},{"patch":"@@ -350,1 +350,1 @@\n-        if ((e instanceof InputEvent) && !((InputEvent)e).isConsumed() &&\n+        if (e instanceof InputEvent inputEvent && !inputEvent.isConsumed() &&\n@@ -353,6 +353,4 @@\n-            if (e instanceof MouseEvent && !(e instanceof MouseWheelEvent)) {\n-                handleJavaMouseEvent((MouseEvent) e);\n-            } else if (e instanceof KeyEvent) {\n-                if (handleJavaKeyEvent((KeyEvent)e)) {\n-                    return;\n-                }\n+            if (e instanceof MouseEvent mouseEvent && !(e instanceof MouseWheelEvent)) {\n+                handleJavaMouseEvent(mouseEvent);\n+            } else if (e instanceof KeyEvent keyEvent && handleJavaKeyEvent(keyEvent)) {\n+                return;\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/WComponentPeer.java","additions":5,"deletions":7,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -56,3 +56,2 @@\n-            if (im instanceof ToolkitImage) {\n-                ImageRepresentation ir = ((ToolkitImage)im).getImageRep();\n-                ir.reconstruct(ImageObserver.ALLBITS);\n+            if (im instanceof ToolkitImage tki) {\n+                tki.getImageRep().reconstruct(ImageObserver.ALLBITS);\n@@ -81,3 +80,5 @@\n-            int     ficW = raster.getWidth();\n-            if( raster instanceof IntegerComponentRaster ) {\n-                ficW = ((IntegerComponentRaster)raster).getScanlineStride();\n+            int ficW;\n+            if (raster instanceof IntegerComponentRaster icr) {\n+                ficW = icr.getScanlineStride();\n+            } else {\n+                ficW = raster.getWidth();\n@@ -85,0 +86,1 @@\n+\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/WCustomCursor.java","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -351,2 +351,2 @@\n-        if (image instanceof ToolkitImage) {\n-            ImageRepresentation ir = ((ToolkitImage)image).getImageRep();\n+        if (image instanceof ToolkitImage tki) {\n+            ImageRepresentation ir = tki.getImageRep();\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/WDataTransferer.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -138,2 +138,2 @@\n-        if (listener instanceof UserSessionListener) {\n-            listenerList.add(UserSessionListener.class, (UserSessionListener) listener);\n+        if (listener instanceof UserSessionListener usl) {\n+            listenerList.add(UserSessionListener.class, usl);\n@@ -141,2 +141,2 @@\n-        if (listener instanceof SystemSleepListener) {\n-            listenerList.add(SystemSleepListener.class, (SystemSleepListener) listener);\n+        if (listener instanceof SystemSleepListener ssl) {\n+            listenerList.add(SystemSleepListener.class, ssl);\n@@ -148,2 +148,2 @@\n-        if (listener instanceof UserSessionListener) {\n-            listenerList.remove(UserSessionListener.class, (UserSessionListener) listener);\n+        if (listener instanceof UserSessionListener usl) {\n+            listenerList.remove(UserSessionListener.class, usl);\n@@ -151,2 +151,2 @@\n-        if (listener instanceof SystemSleepListener) {\n-            listenerList.remove(SystemSleepListener.class, (SystemSleepListener) listener);\n+        if (listener instanceof SystemSleepListener ssl) {\n+            listenerList.remove(SystemSleepListener.class, ssl);\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/WDesktopPeer.java","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -288,2 +288,2 @@\n-        if (e instanceof ComponentEvent) {\n-            Component comp = ((ComponentEvent) e).getComponent();\n+        if (e instanceof ComponentEvent event) {\n+            Component comp = event.getComponent();\n@@ -650,3 +650,3 @@\n-        if (peer instanceof WComponentPeer)\n-            return (WComponentPeer)peer;\n-        else\n+        if (peer instanceof WComponentPeer componentPeer) {\n+            return componentPeer;\n+        } else {\n@@ -654,1 +654,1 @@\n-\n+        }\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/WInputMethod.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -163,2 +163,1 @@\n-        if (stroke instanceof BasicStroke) {\n-            BasicStroke lineStroke;\n+        if (stroke instanceof BasicStroke lineStroke) {\n@@ -173,1 +172,0 @@\n-            lineStroke = (BasicStroke) stroke;\n@@ -543,1 +541,1 @@\n-        } else if (font2D instanceof CompositeFont) {\n+        } else if (font2D instanceof CompositeFont compFont) {\n@@ -551,1 +549,0 @@\n-            CompositeFont compFont = (CompositeFont)font2D;\n@@ -776,1 +773,1 @@\n-        } else if (font2D instanceof CompositeFont) {\n+        } else if (font2D instanceof CompositeFont compFont) {\n@@ -784,1 +781,0 @@\n-            CompositeFont compFont = (CompositeFont)font2D;\n@@ -1217,1 +1213,1 @@\n-                    if (cm instanceof IndexColorModel &&\n+                    if (cm instanceof IndexColorModel colorModel &&\n@@ -1221,1 +1217,1 @@\n-                        icm = (IndexColorModel)cm;\n+                        icm = colorModel;\n@@ -1331,4 +1327,4 @@\n-                    if (raster instanceof ByteComponentRaster) {\n-                        data = ((ByteComponentRaster)raster).getDataStorage();\n-                    } else if (raster instanceof BytePackedRaster) {\n-                        data = ((BytePackedRaster)raster).getDataStorage();\n+                    if (raster instanceof ByteComponentRaster bcr) {\n+                        data = bcr.getDataStorage();\n+                    } else if (raster instanceof BytePackedRaster bpr) {\n+                        data = bpr.getDataStorage();\n@@ -1341,2 +1337,1 @@\n-                    if (sm instanceof ComponentSampleModel) {\n-                        ComponentSampleModel csm = (ComponentSampleModel)sm;\n+                    if (sm instanceof ComponentSampleModel csm) {\n@@ -1344,3 +1339,1 @@\n-                    } else if (sm instanceof MultiPixelPackedSampleModel) {\n-                        MultiPixelPackedSampleModel mppsm =\n-                            (MultiPixelPackedSampleModel)sm;\n+                    } else if (sm instanceof MultiPixelPackedSampleModel mppsm) {\n@@ -1535,4 +1528,1 @@\n-        Stroke stroke = getStroke();\n-\n-        if (stroke instanceof BasicStroke) {\n-            BasicStroke lineStroke = (BasicStroke) stroke;\n+         if (getStroke() instanceof BasicStroke lineStroke) {\n@@ -1650,3 +1640,1 @@\n-        if (stroke instanceof BasicStroke) {\n-            BasicStroke lineStroke = (BasicStroke) stroke;\n-\n+        if (stroke instanceof BasicStroke lineStroke) {\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/WPathGraphics.java","additions":13,"deletions":25,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -51,1 +51,1 @@\n-        if (parent instanceof Component) {\n+        if (parent instanceof Component component) {\n@@ -58,1 +58,1 @@\n-                parent = WToolkit.getNativeContainer((Component)parent);\n+                parent = WToolkit.getNativeContainer(component);\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/WPopupMenuPeer.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -486,2 +486,2 @@\n-        WPrintDialog dialog =  (owner instanceof Frame) ?\n-                new WPrintDialog((Frame)owner, this) :\n+        WPrintDialog dialog =  owner instanceof Frame frame ?\n+                new WPrintDialog(frame, this) :\n@@ -507,2 +507,2 @@\n-            FileDialog fileDialog = (owner instanceof Frame) ?\n-                    new FileDialog((Frame)owner, title, FileDialog.SAVE) :\n+            FileDialog fileDialog = owner instanceof Frame frame ?\n+                    new FileDialog(frame, title, FileDialog.SAVE) :\n@@ -541,2 +541,2 @@\n-                if (owner instanceof Frame) {\n-                    (new PrintToFileErrorDialog((Frame)owner,\n+                if (owner instanceof Frame frame) {\n+                    new PrintToFileErrorDialog(frame,\n@@ -545,1 +545,1 @@\n-                                ServiceDialog.getMsg(\"button.ok\"))).setVisible(true);\n+                                ServiceDialog.getMsg(\"button.ok\")).setVisible(true);\n@@ -547,1 +547,1 @@\n-                    (new PrintToFileErrorDialog((Dialog)owner,\n+                    new PrintToFileErrorDialog((Dialog)owner,\n@@ -550,1 +550,1 @@\n-                                ServiceDialog.getMsg(\"button.ok\"))).setVisible(true);\n+                                ServiceDialog.getMsg(\"button.ok\")).setVisible(true);\n@@ -2066,1 +2066,1 @@\n-        if (m instanceof MediaSizeName) {\n+        if (m instanceof MediaSizeName msn) {\n@@ -2068,1 +2068,0 @@\n-            MediaSizeName msn = (MediaSizeName)m;\n@@ -2080,2 +2079,2 @@\n-            if (sam != null && (sam.getMedia() instanceof MediaTray)) {\n-                mt = (MediaTray)sam.getMedia();\n+            if (sam != null && (sam.getMedia() instanceof MediaTray tray)) {\n+                mt = tray;\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/WPrinterJob.java","additions":12,"deletions":13,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -666,2 +666,3 @@\n-        GraphicsDevice gd = gc.getDevice();\n-        if (!(gd instanceof Win32GraphicsDevice)) {\n+        if (gc.getDevice() instanceof Win32GraphicsDevice device) {\n+            return getScreenInsets(device.getScreen());\n+        } else {\n@@ -670,1 +671,0 @@\n-        return getScreenInsets(((Win32GraphicsDevice) gd).getScreen());\n@@ -855,3 +855,2 @@\n-        Object lge = GraphicsEnvironment.getLocalGraphicsEnvironment();\n-        if (lge instanceof DisplayChangedListener) {\n-            ((DisplayChangedListener) lge).paletteChanged();\n+        if (GraphicsEnvironment.getLocalGraphicsEnvironment() instanceof DisplayChangedListener listener) {\n+            listener.paletteChanged();\n@@ -870,3 +869,2 @@\n-            Object lge = GraphicsEnvironment.getLocalGraphicsEnvironment();\n-            if (lge instanceof DisplayChangedListener) {\n-                ((DisplayChangedListener) lge).displayChanged();\n+            if (GraphicsEnvironment.getLocalGraphicsEnvironment() instanceof DisplayChangedListener listener) {\n+                listener.displayChanged();\n@@ -1168,8 +1166,5 @@\n-        if ((comp != null) && comp.isEnabled() && comp.isFocusable() &&\n-            (((comp instanceof TextComponent) &&\n-                    ((TextComponent) comp).isEditable()) ||\n-                ((comp instanceof JTextComponent) &&\n-                    ((JTextComponent) comp).isEditable()))) {\n-            return true;\n-        }\n-        return false;\n+        return (comp != null) &&\n+                comp.isEnabled() &&\n+                comp.isFocusable() &&\n+                ((comp instanceof TextComponent textComponent && textComponent.isEditable()) ||\n+                        (comp instanceof JTextComponent jTextComponent && jTextComponent.isEditable()));\n@@ -1185,2 +1180,1 @@\n-        if ((e instanceof MouseEvent) && isComponentValidForTouchKeyboard(comp)) {\n-            MouseEvent me = (MouseEvent) e;\n+        if (e instanceof MouseEvent me && isComponentValidForTouchKeyboard(comp)) {\n@@ -1206,3 +1200,2 @@\n-        } else if (e instanceof FocusEvent) {\n-            FocusEvent fe = (FocusEvent) e;\n-            if (fe.getID() == FocusEvent.FOCUS_LOST) {\n+        } else if (e instanceof FocusEvent fe &&\n+                fe.getID() == FocusEvent.FOCUS_LOST &&\n@@ -1210,4 +1203,2 @@\n-                if (!isComponentValidForTouchKeyboard(fe.getOppositeComponent())) {\n-                    hideTouchKeyboard();\n-                }\n-            }\n+                !isComponentValidForTouchKeyboard(fe.getOppositeComponent())) {\n+            hideTouchKeyboard();\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/WToolkit.java","additions":17,"deletions":26,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -162,1 +162,0 @@\n-        int ficW = raster.getWidth();\n@@ -176,2 +175,5 @@\n-        if (raster instanceof IntegerComponentRaster) {\n-            ficW = ((IntegerComponentRaster)raster).getScanlineStride();\n+        int ficW;\n+        if (raster instanceof IntegerComponentRaster icr) {\n+            ficW = icr.getScanlineStride();\n+        } else {\n+            ficW = raster.getWidth();\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/WTrayIconPeer.java","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -380,1 +380,1 @@\n-        if (event instanceof WindowEvent) {\n+        if (event instanceof WindowEvent e) {\n@@ -385,1 +385,1 @@\n-                        listener.windowClosing((WindowEvent)event);\n+                        listener.windowClosing(e);\n@@ -388,1 +388,1 @@\n-                        listener.windowIconified((WindowEvent)event);\n+                        listener.windowIconified(e);\n@@ -404,1 +404,1 @@\n-        if (target instanceof Frame) {\n+        if (target instanceof Frame frame) {\n@@ -406,2 +406,1 @@\n-            AWTAccessor.getFrameAccessor().setExtendedState((Frame) target,\n-                newState);\n+            AWTAccessor.getFrameAccessor().setExtendedState(frame, newState);\n@@ -509,4 +508,4 @@\n-                if (blockerPeer instanceof WFileDialogPeer) {\n-                    ((WFileDialogPeer)blockerPeer).blockWindow(this);\n-                } else if (blockerPeer instanceof WPrintDialogPeer) {\n-                    ((WPrintDialogPeer)blockerPeer).blockWindow(this);\n+                if (blockerPeer instanceof WFileDialogPeer peer) {\n+                    peer.blockWindow(this);\n+                } else if (blockerPeer instanceof WPrintDialogPeer peer) {\n+                    peer.blockWindow(this);\n@@ -518,4 +517,4 @@\n-                if (blockerPeer instanceof WFileDialogPeer) {\n-                    ((WFileDialogPeer)blockerPeer).unblockWindow(this);\n-                } else if (blockerPeer instanceof WPrintDialogPeer) {\n-                    ((WPrintDialogPeer)blockerPeer).unblockWindow(this);\n+                if (blockerPeer instanceof WFileDialogPeer peer) {\n+                    peer.unblockWindow(this);\n+                } else if (blockerPeer instanceof WPrintDialogPeer peer) {\n+                    peer.unblockWindow(this);\n@@ -673,2 +672,2 @@\n-        if (c instanceof Container) {\n-            for (Component child : ((Container)c).getComponents()) {\n+        if (c instanceof Container container) {\n+            for (Component child : container.getComponents()) {\n@@ -678,3 +677,2 @@\n-        final Object cp = AWTAccessor.getComponentAccessor().getPeer(c);\n-        if (cp instanceof WComponentPeer) {\n-            ((WComponentPeer)cp).replaceSurfaceDataLater();\n+        if (AWTAccessor.getComponentAccessor().getPeer(c) instanceof WComponentPeer peer) {\n+            peer.replaceSurfaceDataLater();\n","filename":"src\/java.desktop\/windows\/classes\/sun\/awt\/windows\/WWindowPeer.java","additions":17,"deletions":19,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -55,2 +55,2 @@\n-        if (biop instanceof ConvolveOp) {\n-            if (!isConvolveOpValid((ConvolveOp)biop)) {\n+        if (biop instanceof ConvolveOp op) {\n+            if (!isConvolveOpValid(op)) {\n@@ -59,2 +59,2 @@\n-        } else if (biop instanceof RescaleOp) {\n-            if (!isRescaleOpValid((RescaleOp)biop, img)) {\n+        } else if (biop instanceof RescaleOp op) {\n+            if (!isRescaleOpValid(op, img)) {\n@@ -63,2 +63,2 @@\n-        } else if (biop instanceof LookupOp) {\n-            if (!isLookupOpValid((LookupOp)biop, img)) {\n+        } else if (biop instanceof LookupOp op) {\n+            if (!isLookupOpValid(op, img)) {\n","filename":"src\/java.desktop\/windows\/classes\/sun\/java2d\/d3d\/D3DBufImgOps.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -86,2 +86,1 @@\n-            if (op instanceof AffineTransformOp) {\n-                AffineTransformOp atop = (AffineTransformOp) op;\n+            if (op instanceof AffineTransformOp atop) {\n","filename":"src\/java.desktop\/windows\/classes\/sun\/java2d\/d3d\/D3DDrawImage.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -187,2 +187,1 @@\n-        if (sd instanceof D3DSurfaceData) {\n-            D3DSurfaceData d3dsd = (D3DSurfaceData)sd;\n+        if (sd instanceof D3DSurfaceData d3dsd) {\n@@ -295,6 +294,3 @@\n-        Surface sd = vi.getDestSurface();\n-        if (!(sd instanceof AccelSurface) ||\n-            ((AccelSurface)sd).getType() != type)\n-        {\n-            vi.flush();\n-            vi = null;\n+        if (vi.getDestSurface() instanceof AccelSurface surface &&\n+                surface.getType() == type) {\n+            return vi;\n@@ -303,1 +299,3 @@\n-        return vi;\n+        vi.flush();\n+\n+        return null;\n","filename":"src\/java.desktop\/windows\/classes\/sun\/java2d\/d3d\/D3DGraphicsConfig.java","additions":7,"deletions":9,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -163,2 +163,2 @@\n-            if (owner instanceof Frame) {\n-                return (Frame) owner;\n+            if (owner instanceof Frame frame) {\n+                return frame;\n","filename":"src\/java.desktop\/windows\/classes\/sun\/java2d\/d3d\/D3DGraphicsDevice.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -212,1 +212,1 @@\n-        if (!(gc instanceof D3DGraphicsConfig)) {\n+        if (!(gc instanceof D3DGraphicsConfig d3dgc)) {\n@@ -215,1 +215,1 @@\n-        D3DGraphicsConfig d3dgc = (D3DGraphicsConfig)gc;\n+\n@@ -259,2 +259,1 @@\n-        if (!done && sd instanceof D3DWindowSurfaceData) {\n-            D3DWindowSurfaceData d3dw = (D3DWindowSurfaceData)sd;\n+        if (!done && sd instanceof D3DWindowSurfaceData d3dw) {\n@@ -293,1 +292,1 @@\n-        if (!done && sd instanceof D3DWindowSurfaceData) {\n+        if (!done && sd instanceof D3DWindowSurfaceData d3dw) {\n@@ -298,1 +297,0 @@\n-                D3DWindowSurfaceData d3dw = (D3DWindowSurfaceData)sd;\n@@ -309,2 +307,1 @@\n-        if (d3dwSurfaces != null && sd instanceof D3DWindowSurfaceData) {\n-            D3DWindowSurfaceData d3dw = (D3DWindowSurfaceData)sd;\n+        if (d3dwSurfaces != null && sd instanceof D3DWindowSurfaceData d3dw) {\n@@ -532,2 +529,2 @@\n-        if (comp instanceof Container) {\n-            for (Component c : ((Container)comp).getComponents()) {\n+        if (comp instanceof Container container) {\n+            for (Component c : container.getComponents()) {\n","filename":"src\/java.desktop\/windows\/classes\/sun\/java2d\/d3d\/D3DScreenUpdateManager.java","additions":7,"deletions":10,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -235,2 +235,2 @@\n-        } else if (peer instanceof WWindowPeer) {\n-            Dimension scaledSize = ((WWindowPeer) peer).getScaledWindowSize();\n+        } else if (peer instanceof WWindowPeer wPeer) {\n+            Dimension scaledSize = wPeer.getScaledWindowSize();\n@@ -289,4 +289,1 @@\n-        VSyncType vSyncType = VSYNC_DEFAULT;\n-        if (caps instanceof ExtendedBufferCapabilities) {\n-            vSyncType = ((ExtendedBufferCapabilities)caps).getVSync();\n-        }\n+        VSyncType vSyncType = caps instanceof ExtendedBufferCapabilities ebc ? ebc.getVSync() : VSYNC_DEFAULT;\n@@ -558,6 +555,4 @@\n-        if (offscreenImage != null) {\n-            SurfaceManager sm = SurfaceManager.getManager(offscreenImage);\n-            if (sm instanceof D3DVolatileSurfaceManager) {\n-                setSurfaceLost(true);\n-                ((D3DVolatileSurfaceManager)sm).setAccelerationEnabled(false);\n-            }\n+        if (offscreenImage != null &&\n+                SurfaceManager.getManager(offscreenImage) instanceof D3DVolatileSurfaceManager surfaceManager) {\n+            setSurfaceLost(true);\n+            surfaceManager.setAccelerationEnabled(false);\n@@ -857,1 +852,2 @@\n-        return (gc instanceof D3DGraphicsConfig) ? (D3DGraphicsConfig)gc : null;\n+\n+        return gc instanceof D3DGraphicsConfig graphicsConfig ? graphicsConfig : null;\n","filename":"src\/java.desktop\/windows\/classes\/sun\/java2d\/d3d\/D3DSurfaceData.java","additions":9,"deletions":13,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -92,6 +92,1 @@\n-            boolean forceback = false;\n-            if (context instanceof Boolean) {\n-                forceback = ((Boolean)context).booleanValue();\n-            }\n-\n-            if (forceback) {\n+            if (context instanceof Boolean bool && bool) {\n@@ -197,1 +192,1 @@\n-        if (src instanceof D3DSurfaceData &&\n+        if (src instanceof D3DSurfaceData d3dsd &&\n@@ -200,1 +195,0 @@\n-            D3DSurfaceData d3dsd = (D3DSurfaceData)src;\n@@ -203,9 +197,7 @@\n-            if (mgr instanceof D3DVolatileSurfaceManager) {\n-                D3DVolatileSurfaceManager vsm = (D3DVolatileSurfaceManager)mgr;\n-                if (vsm != null) {\n-                    d3dsd.setSurfaceLost(true);\n-\n-                    GDIWindowSurfaceData wsd = (GDIWindowSurfaceData)dst;\n-                    WComponentPeer p = wsd.getPeer();\n-                    if (D3DScreenUpdateManager.canUseD3DOnScreen(p,\n-                            (Win32GraphicsConfig)p.getGraphicsConfiguration(),\n+            if (mgr instanceof D3DVolatileSurfaceManager vsm && vsm != null) {\n+                d3dsd.setSurfaceLost(true);\n+\n+                GDIWindowSurfaceData wsd = (GDIWindowSurfaceData) dst;\n+                WComponentPeer p = wsd.getPeer();\n+                if (D3DScreenUpdateManager.canUseD3DOnScreen(p,\n+                        (Win32GraphicsConfig) p.getGraphicsConfiguration(),\n@@ -214,8 +206,7 @@\n-                        \/\/ 10 is only chosen to be greater than the number of\n-                        \/\/ times a sane person would call validate() inside\n-                        \/\/ a validation loop, and to reduce thrashing between\n-                        \/\/ accelerated and backup surfaces\n-                        vsm.setRestoreCountdown(10);\n-                    } else {\n-                        vsm.setAccelerationEnabled(false);\n-                    }\n+                    \/\/ 10 is only chosen to be greater than the number of\n+                    \/\/ times a sane person would call validate() inside\n+                    \/\/ a validation loop, and to reduce thrashing between\n+                    \/\/ accelerated and backup surfaces\n+                    vsm.setRestoreCountdown(10);\n+                } else {\n+                    vsm.setAccelerationEnabled(false);\n","filename":"src\/java.desktop\/windows\/classes\/sun\/java2d\/d3d\/D3DVolatileSurfaceManager.java","additions":16,"deletions":25,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -333,4 +333,1 @@\n-            if (sd instanceof WGLVSyncOffScreenSurfaceData) {\n-                WGLVSyncOffScreenSurfaceData vsd =\n-                    (WGLVSyncOffScreenSurfaceData)sd;\n-                SurfaceData bbsd = vsd.getFlipSurface();\n+            if (sd instanceof WGLVSyncOffScreenSurfaceData vsd) {\n@@ -338,1 +335,1 @@\n-                    new SunGraphics2D(bbsd, Color.black, Color.white, null);\n+                    new SunGraphics2D(vsd.getFlipSurface(), Color.black, Color.white, null);\n@@ -419,6 +416,2 @@\n-        Surface sd = vi.getDestSurface();\n-        if (!(sd instanceof AccelSurface) ||\n-            ((AccelSurface)sd).getType() != type)\n-        {\n-            vi.flush();\n-            vi = null;\n+        if (vi.getDestSurface() instanceof AccelSurface surface && surface.getType() == type) {\n+            return vi;\n@@ -427,1 +420,3 @@\n-        return vi;\n+        vi.flush();\n+\n+        return null;\n","filename":"src\/java.desktop\/windows\/classes\/sun\/java2d\/opengl\/WGLGraphicsConfig.java","additions":7,"deletions":12,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -82,14 +82,8 @@\n-            if (context instanceof Boolean) {\n-                forceback = ((Boolean)context).booleanValue();\n-                if (forceback) {\n-                    BufferCapabilities caps = peer.getBackBufferCaps();\n-                    if (caps instanceof ExtendedBufferCapabilities) {\n-                        ExtendedBufferCapabilities ebc =\n-                            (ExtendedBufferCapabilities)caps;\n-                        if (ebc.getVSync() == VSYNC_ON &&\n-                            ebc.getFlipContents() == COPIED)\n-                        {\n-                            createVSynced = true;\n-                            forceback = false;\n-                        }\n-                    }\n+            if (context instanceof Boolean bool) {\n+                forceback = bool;\n+                if (forceback &&\n+                        peer.getBackBufferCaps() instanceof ExtendedBufferCapabilities ebc &&\n+                        ebc.getVSync() == VSYNC_ON &&\n+                        ebc.getFlipContents() == COPIED) {\n+                    createVSynced = true;\n+                    forceback = false;\n","filename":"src\/java.desktop\/windows\/classes\/sun\/java2d\/opengl\/WGLVolatileSurfaceManager.java","additions":8,"deletions":14,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -268,2 +268,2 @@\n-            if (s instanceof Path2D.Float) {\n-                p2df = (Path2D.Float)s;\n+            if (s instanceof Path2D.Float f) {\n+                p2df = f;\n","filename":"src\/java.desktop\/windows\/classes\/sun\/java2d\/windows\/GDIRenderer.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -96,2 +96,2 @@\n-            if (cm instanceof DirectColorModel) {\n-                if (((DirectColorModel)cm).getRedMask() == 0xff0000) {\n+            if (cm instanceof DirectColorModel dcm) {\n+                if (dcm.getRedMask() == 0xff0000) {\n@@ -108,3 +108,1 @@\n-            if ((cm instanceof DirectColorModel) &&\n-                (((DirectColorModel)cm).getBlueMask() == 0x3e))\n-            {\n+            if (cm instanceof DirectColorModel dcm && dcm.getBlueMask() == 0x3e) {\n@@ -119,2 +117,1 @@\n-            } else if (cm instanceof IndexColorModel &&\n-                       isOpaqueGray((IndexColorModel)cm)) {\n+            } else if (cm instanceof IndexColorModel icm && isOpaqueGray(icm)) {\n@@ -263,2 +260,1 @@\n-        if (cm instanceof DirectColorModel) {\n-            DirectColorModel dcm = (DirectColorModel)cm;\n+        if (cm instanceof DirectColorModel dcm) {\n","filename":"src\/java.desktop\/windows\/classes\/sun\/java2d\/windows\/GDIWindowSurfaceData.java","additions":5,"deletions":9,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -177,2 +177,2 @@\n-                if ((printServices[j] instanceof Win32PrintService) &&\n-                    (!printServices[j].equals(defaultPrintService))) {\n+                if ((printServices[j] instanceof Win32PrintService printService) &&\n+                    (!printService.equals(defaultPrintService))) {\n@@ -180,1 +180,1 @@\n-                    ((Win32PrintService)printServices[j]).invalidateService();\n+                    printService.invalidateService();\n","filename":"src\/java.desktop\/windows\/classes\/sun\/print\/PrintServiceLookupProvider.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -193,1 +193,1 @@\n-        else if (data instanceof InputStream) {\n+        else if (data instanceof InputStream stream) {\n@@ -195,1 +195,1 @@\n-                ((InputStream)data).close();\n+                stream.close();\n@@ -199,1 +199,1 @@\n-        else if (data instanceof Reader) {\n+        else if (data instanceof Reader reader) {\n@@ -201,1 +201,1 @@\n-                ((Reader)data).close();\n+                reader.close();\n@@ -498,6 +498,4 @@\n-            if (mediaName == null) {\n-                Object media = svc.getDefaultAttributeValue(Media.class);\n-                if (media instanceof MediaSizeName) {\n-                    mediaName = (MediaSizeName) media;\n-                    mediaSize = MediaSize.getMediaSizeForName(mediaName);\n-                }\n+            if (mediaName == null &&\n+                    svc.getDefaultAttributeValue(Media.class) instanceof MediaSizeName msn) {\n+                mediaName = msn;\n+                mediaSize = MediaSize.getMediaSizeForName(mediaName);\n@@ -703,2 +701,2 @@\n-              if (attr instanceof MediaSizeName) {\n-                    mediaName = (MediaSizeName)attr;\n+                if (attr instanceof MediaSizeName msn) {\n+                    mediaName = msn;\n","filename":"src\/java.desktop\/windows\/classes\/sun\/print\/Win32PrintJob.java","additions":10,"deletions":12,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -257,2 +257,1 @@\n-        if (msn instanceof Win32MediaSize) {\n-            Win32MediaSize winMedia = (Win32MediaSize)msn;\n+        if (msn instanceof Win32MediaSize winMedia) {\n@@ -297,2 +296,1 @@\n-        if (tray instanceof Win32MediaTray) {\n-            Win32MediaTray winTray = (Win32MediaTray)tray;\n+        if (tray instanceof Win32MediaTray winTray) {\n@@ -316,5 +314,2 @@\n-                if(trays[i] instanceof Win32MediaTray) {\n-                    Win32MediaTray win32Tray = (Win32MediaTray)trays[i];\n-                    if (win32Tray.winID == dmBin) {\n-                        return win32Tray;\n-                    }\n+                if (trays[i] instanceof Win32MediaTray win32Tray && win32Tray.winID == dmBin) {\n+                    return win32Tray;\n","filename":"src\/java.desktop\/windows\/classes\/sun\/print\/Win32PrintService.java","additions":4,"deletions":9,"binary":false,"changes":13,"status":"modified"}]}