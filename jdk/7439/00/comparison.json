{"files":[{"patch":"@@ -26,1 +26,0 @@\n-import java.awt.Dimension;\n@@ -33,0 +32,2 @@\n+import javax.swing.UIManager;\n+import javax.swing.UnsupportedLookAndFeelException;\n@@ -46,1 +47,21 @@\n-        new ImageCheckboxTest().performTest();\n+        ImageCheckboxTest test = new ImageCheckboxTest();\n+        boolean passed = true;\n+        \/\/ There are bugs found in various LaFs that needs to be fixed\n+        \/\/ to enable testing there\n+        String[] skip = {\n+                \"GTK+\",  \/\/ JDK-8281580\n+                \"Nimbus\" \/\/ JDK-8281581\n+        };\n+        testloop:\n+        for (UIManager.LookAndFeelInfo laf : UIManager.getInstalledLookAndFeels()) {\n+            for (String s : skip) {\n+                if (s.equals(laf.getName())) {\n+                    continue testloop;\n+                }\n+            }\n+            passed = passed && test.performTest(laf);\n+        }\n+\n+        if(!passed) {\n+            throw new RuntimeException(\"Test failed\");\n+        }\n@@ -49,1 +70,1 @@\n-    public void performTest() throws Exception {\n+    public boolean performTest(UIManager.LookAndFeelInfo laf) throws Exception {\n@@ -56,0 +77,1 @@\n+        boolean success = true;\n@@ -57,1 +79,5 @@\n-\n+        try {\n+            UIManager.setLookAndFeel(laf.getClassName());\n+        } catch (UnsupportedLookAndFeelException ulaf) {\n+            return true;\n+        }\n@@ -67,3 +93,8 @@\n-            ImageIO.write(imageFocus, \"png\", new File(\"imageFocus.png\"));\n-            ImageIO.write(imageNoFocus, \"png\", new File(\"imageNoFocus.png\"));\n-            throw new Exception(\"Changing focus is not visualized\");\n+            File folder = new File(laf.getName());\n+            if (!folder.exists()) {\n+                folder.mkdir();\n+            }\n+            ImageIO.write(imageFocus, \"png\", new File(folder, \"\/imageFocus.png\"));\n+            ImageIO.write(imageNoFocus, \"png\", new File(folder, \"\/imageNoFocus.png\"));\n+            System.err.println(laf.getName() + \": Changing of focus is not visualized\");\n+            success = false;\n@@ -76,0 +107,4 @@\n+            File folder = new File(laf.getName());\n+            if (!folder.exists()) {\n+                folder.mkdir();\n+            }\n@@ -77,4 +112,5 @@\n-                    new File(\"imageFocusNotPainted.png\"));\n-            ImageIO.write(imageFocus, \"png\", new File(\"imageFocus.png\"));\n-            ImageIO.write(imageNoFocus, \"png\", new File(\"imageNoFocus.png\"));\n-            throw new Exception(\"setFocusPainted(false) is ignored\");\n+                    new File(folder,\"imageFocusNotPainted.png\"));\n+            ImageIO.write(imageFocus, \"png\", new File(folder, \"imageFocus.png\"));\n+            ImageIO.write(imageNoFocus, \"png\", new File(folder, \"imageNoFocus.png\"));\n+            System.err.println(laf.getName() + \": setFocusPainted(false) is ignored\");\n+            success = false;\n@@ -82,0 +118,1 @@\n+        return success;\n","filename":"test\/jdk\/javax\/swing\/JCheckBox\/ImageCheckboxFocus\/ImageCheckboxTest.java","additions":48,"deletions":11,"binary":false,"changes":59,"status":"modified"}]}