{"files":[{"patch":"@@ -61,18 +61,16 @@\n-        for (int i = 0; i < 3; i++) {\n-            float targetFraction = 0;\n-            \/\/ Read sizes of eden and overall heap.\n-            \/\/ Recognise if heap is changing size, and retry (heap is expected to initially shrink).\n-            for (int j = 0; j < 3; j++) {\n-                long heapSize0 = Pools.getHeapCommittedSize();\n-                long edenSize = Pools.getEdenCommittedSize();\n-                long heapSize = Pools.getHeapCommittedSize();\n-                if (heapSize < heapSize0) {\n-                    System.out.println(\"provokeGc: Heap shrinking, retry. eden: \" + edenSize + \", heap0: \" + heapSize0 + \", heap: \" + heapSize);\n-                    System.gc();\n-                    continue;\n-                }\n-                targetFraction = ((float) edenSize) \/ (heapSize);\n-                if ((targetFraction < 0) || (targetFraction > 1.0)) {\n-                    throw new RuntimeException(\"Error in fraction calculation\" + \" (eden size: \" + edenSize + \", heap size: \" + heapSize\n-                                               + \", calculated eden fraction: \" + targetFraction + \")\");\n-                }\n+        float targetFraction = 0;\n+        \/\/ Read sizes of eden and overall heap.\n+        \/\/ Recognise if heap is changing size, and retry (heap is expected to initially shrink).\n+        for (int j = 0; j < 3; j++) {\n+            long heapSize0 = Pools.getHeapCommittedSize();\n+            long edenSize = Pools.getEdenCommittedSize();\n+            long heapSize = Pools.getHeapCommittedSize();\n+            if (heapSize < heapSize0) {\n+                System.out.println(\"provokeGc: Heap shrinking, retry. eden: \" + edenSize + \", heap0: \" + heapSize0 + \", heap: \" + heapSize);\n+                System.gc();\n+                continue;\n+            }\n+            targetFraction = ((float) edenSize) \/ (heapSize);\n+            if ((targetFraction < 0) || (targetFraction > 1.0)) {\n+                throw new RuntimeException(\"Error in fraction calculation\" + \" (eden size: \" + edenSize + \", heap size: \" + heapSize\n+                                           + \", calculated eden fraction: \" + targetFraction + \")\");\n@@ -80,3 +78,0 @@\n-            allocateHeap(targetFraction);\n-            allocateHeap(targetFraction);\n-            System.gc();\n@@ -84,0 +79,3 @@\n+        allocateHeap(targetFraction);\n+        allocateHeap(targetFraction);\n+        System.gc();\n","filename":"test\/hotspot\/jtreg\/serviceability\/tmtools\/jstat\/utils\/GcProvoker.java","additions":19,"deletions":21,"binary":false,"changes":40,"status":"modified"}]}