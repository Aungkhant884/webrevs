{"files":[{"patch":"@@ -62,1 +62,1 @@\n-        \/\/ Read sizes of eden and overall heap.\n+        \/\/ Read sizes of eden and overall heap, to find eden size as a fraction of heap.\n@@ -64,1 +64,5 @@\n-        for (int j = 0; j < 3; j++) {\n+        for (int i = 0; i < 3; i++) {\n+            \/\/ One retry is expected occasionally.  More \"should not happen\":\n+            if (i == 2) {\n+                throw new RuntimeException(\"Cannot calculate targetFraction.  Heap size not stable.\");\n+            }\n@@ -72,5 +76,7 @@\n-            }\n-            targetFraction = ((float) edenSize) \/ (heapSize);\n-            if ((targetFraction < 0) || (targetFraction > 1.0)) {\n-                throw new RuntimeException(\"Error in fraction calculation\" + \" (eden size: \" + edenSize + \", heap size: \" + heapSize\n-                                           + \", calculated eden fraction: \" + targetFraction + \")\");\n+            } else {\n+                targetFraction = ((float) edenSize) \/ (heapSize);\n+                if ((targetFraction < 0) || (targetFraction > 1.0)) {\n+                    throw new RuntimeException(\"Error in fraction calculation\" + \" (eden size: \" + edenSize + \", heap size: \" + heapSize\n+                                               + \", calculated eden fraction: \" + targetFraction + \")\");\n+                }\n+                break;\n","filename":"test\/hotspot\/jtreg\/serviceability\/tmtools\/jstat\/utils\/GcProvoker.java","additions":13,"deletions":7,"binary":false,"changes":20,"status":"modified"}]}