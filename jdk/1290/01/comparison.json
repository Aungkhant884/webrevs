{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -130,0 +130,17 @@\n+\/\/ In order to use a new NSAccessibility API and since our components\n+\/\/ are represented as a custom UI elements we need to implement a set\n+\/\/ of custom protocols. Definitions of these protocols will start here.\n+\n+\/\/ This is a root interface in the NSAccessibility* protocols hierarchy\n+\/\/ and all the component-specific protocols should be derived from it.\n+\/\/ It is also a place for the functions that might be exposed by all the\n+\/\/ component accessibility peers.\n+\/\/ Please see https:\/\/developer.apple.com\/documentation\/appkit\/nsaccessibilityprotocol\n+\/\/ for more details.\n+@interface CommonComponentAccessibility : JavaComponentAccessibility <NSAccessibilityElement> {\n+\n+}\n+- (NSRect)accessibilityFrame;\n+- (nullable id)accessibilityParent;\n+@end\n+\n@@ -1920,0 +1937,26 @@\n+@implementation CommonComponentAccessibility\n+\/\/ NSAccessibilityElement protocol implementation\n+- (NSRect)accessibilityFrame\n+{\n+    JNIEnv* env = [ThreadUtilities getJNIEnv];\n+    jobject axComponent = JNFCallStaticObjectMethod(env, sjm_getAccessibleComponent,\n+                                                    fAccessible, fComponent);\n+\n+    NSSize size = getAxComponentSize(env, axComponent, fComponent);\n+    NSPoint point = getAxComponentLocationOnScreen(env, axComponent, fComponent);\n+    (*env)->DeleteLocalRef(env, axComponent);\n+    point.y += size.height;\n+\n+    point.y = [[[[self view] window] screen] frame].size.height - point.y;\n+\n+    NSRect retval = NSMakeRect(point.x, point.y, size.width, size.height);\n+    return retval;\n+}\n+\n+- (nullable id)accessibilityParent\n+{\n+    return [self accessibilityParentAttribute];\n+}\n+\n+@end\n+\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/JavaComponentAccessibility.m","additions":44,"deletions":1,"binary":false,"changes":45,"status":"modified"}]}