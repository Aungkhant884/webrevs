{"files":[{"patch":"@@ -27,1 +27,1 @@\n- * @summary Buffer clean in PasswordCallback\n+ * @summary Check that PasswordCallback.clearPassword() clears the password\n@@ -32,1 +32,0 @@\n-import java.util.WeakHashMap;\n@@ -35,3 +34,0 @@\n-    private final static WeakHashMap<PasswordCallback, ?> weakHashMap =\n-            new WeakHashMap<>();\n-\n@@ -54,18 +50,0 @@\n-\n-        \/\/ Check if the PasswordCallback object could be collected.\n-        weakHashMap.put(passwordCallback, null);\n-        passwordCallback = null;\n-\n-        \/\/ Wait to trigger the cleanup.\n-        for (int i = 0; i < 10 && weakHashMap.size() != 0; i++) {\n-            System.gc();\n-            Thread.sleep(100);\n-        }\n-\n-        \/\/ Check if the object has been collected.  The collection will not \n-        \/\/ happen if the cleaner implementation in PasswordCallback is bound \n-        \/\/ to the PasswordCallback object.\n-        if (weakHashMap.size() > 0) {\n-            throw new RuntimeException(\n-                \"PasswordCallback object is not released\");\n-        }\n","filename":"test\/jdk\/javax\/security\/auth\/callback\/PasswordCallback\/PasswordCleanup.java","additions":1,"deletions":23,"binary":false,"changes":24,"status":"modified"}]}