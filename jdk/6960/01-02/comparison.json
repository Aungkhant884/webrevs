{"files":[{"patch":"@@ -354,0 +354,13 @@\n+#ifdef __APPLE__\n+static inline bool can_alloc_executable_memory(void) {\n+  bool executable = true;\n+  size_t len = 128;\n+  char* p = os::reserve_memory(len, executable);\n+  bool exec_supported = (p != NULL);\n+  if (exec_supported) {\n+    os::release_memory(p, len);\n+  }\n+  return exec_supported;\n+}\n+#endif\n+\n@@ -365,9 +378,3 @@\n-  \/\/ Workaround: try reserving memory with executable=true\n-  \/\/ to figure out if that's supported on this macOS version\n-  bool executable = true;\n-  size_t test_len = 128;\n-  address p_test = (address)os::reserve_memory(test_len, executable);\n-  bool exec_supported = (p_test != NULL);\n-  if (exec_supported) {\n-    os::release_memory((char*)p_test, test_len);\n-  }\n+  \/\/ Workaround: try reserving memory with executable flag set to True\n+  \/\/ to figure out if such operation is supported on this macOS version\n+  const bool exec_supported = can_alloc_executable_memory();\n","filename":"test\/hotspot\/gtest\/runtime\/test_os.cpp","additions":16,"deletions":9,"binary":false,"changes":25,"status":"modified"}]}