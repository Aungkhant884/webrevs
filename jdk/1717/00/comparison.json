{"files":[{"patch":"@@ -824,0 +824,2 @@\n+  methodHandle resolved_method;\n+\n@@ -829,13 +831,4 @@\n-    if (JvmtiExport::can_hotswap_or_post_breakpoint()) {\n-      int retry_count = 0;\n-      while (info.resolved_method()->is_old()) {\n-        \/\/ It is very unlikely that method is redefined more than 100 times\n-        \/\/ in the middle of resolve. If it is looping here more than 100 times\n-        \/\/ means then there could be a bug here.\n-        guarantee((retry_count++ < 100),\n-                  \"Could not resolve to latest version of redefined method\");\n-        \/\/ method is redefined in the middle of resolve so re-try.\n-        LinkResolver::resolve_invoke(info, receiver, pool,\n-                                     last_frame.get_index_u2_cpcache(bytecode), bytecode,\n-                                     CHECK);\n-      }\n+    if (JvmtiExport::can_hotswap_or_post_breakpoint() && info.resolved_method()->is_old()) {\n+      resolved_method = methodHandle(THREAD, info.resolved_method()->get_new_method());\n+    } else {\n+      resolved_method = methodHandle(THREAD, info.resolved_method());\n@@ -851,2 +844,1 @@\n-    if (info.resolved_method()->method_holder() ==\n-                                            SystemDictionary::Object_klass()) {\n+    if (resolved_method->method_holder() == SystemDictionary::Object_klass()) {\n@@ -857,2 +849,1 @@\n-      Method* rm = info.resolved_method();\n-      assert(rm->is_final() || info.has_vtable_index(),\n+      assert(resolved_method->is_final() || info.has_vtable_index(),\n@@ -860,1 +851,1 @@\n-    } else if (!info.resolved_method()->has_itable_index()) {\n+    } else if (!resolved_method->has_itable_index()) {\n@@ -866,1 +857,1 @@\n-      int index = info.resolved_method()->itable_index();\n+      int index = resolved_method->itable_index();\n@@ -881,1 +872,0 @@\n-  methodHandle resolved_method(THREAD, info.resolved_method());\n","filename":"src\/hotspot\/share\/interpreter\/interpreterRuntime.cpp","additions":10,"deletions":20,"binary":false,"changes":30,"status":"modified"}]}