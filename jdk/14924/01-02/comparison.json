{"files":[{"patch":"@@ -27,0 +27,1 @@\n+import java.lang.reflect.Field;\n@@ -52,0 +53,2 @@\n+    private static Field responseCacheField;\n+\n@@ -72,0 +75,4 @@\n+        responseCacheField =\n+                StatusResponseManager.class.getDeclaredField(\"responseCache\");\n+        responseCacheField.setAccessible(true);\n+\n@@ -98,0 +105,1 @@\n+\n@@ -121,1 +129,1 @@\n-                } else if (srm.size() != 1) {\n+                } else if (responseCacheSize(srm) != 1) {\n@@ -123,1 +131,1 @@\n-                            \"expected 1, got \" + srm.size();\n+                            \"expected 1, got \" + responseCacheSize(srm);\n@@ -152,1 +160,1 @@\n-                if (srm.size() != 2) {\n+                if (responseCacheSize(srm) != 2) {\n@@ -154,1 +162,1 @@\n-                            + srm.size();\n+                            + responseCacheSize(srm);\n@@ -157,2 +165,2 @@\n-                    srm.clear();\n-                    if (srm.size() != 0) {\n+                    clearResponseCache(srm);\n+                    if (responseCacheSize(srm) != 0) {\n@@ -160,1 +168,1 @@\n-                                \" got \" + srm.size();\n+                                \" got \" + responseCacheSize(srm);\n@@ -200,1 +208,1 @@\n-                } else if (srm.size() != 2) {\n+                } else if (responseCacheSize(srm) != 2) {\n@@ -202,1 +210,1 @@\n-                            \"expected 2, got \" + srm.size();\n+                            \"expected 2, got \" + responseCacheSize(srm);\n@@ -233,1 +241,1 @@\n-                if (srm.size() != 2) {\n+                if (responseCacheSize(srm) != 2) {\n@@ -235,1 +243,1 @@\n-                            + srm.size();\n+                            + responseCacheSize(srm);\n@@ -240,1 +248,1 @@\n-                    if (srm.size() != 0) {\n+                    if (responseCacheSize(srm) != 0) {\n@@ -242,1 +250,1 @@\n-                                \" got \" + srm.size();\n+                                \" got \" + responseCacheSize(srm);\n@@ -429,0 +437,10 @@\n+    private static int responseCacheSize(\n+            StatusResponseManager srm) throws IllegalAccessException {\n+        return ((sun.security.util.Cache)responseCacheField.get(srm)).size();\n+    }\n+\n+    private static void clearResponseCache(\n+            StatusResponseManager srm) throws IllegalAccessException {\n+        ((sun.security.util.Cache)responseCacheField.get(srm)).clear();\n+    }\n+\n","filename":"test\/jdk\/sun\/security\/ssl\/Stapling\/java.base\/sun\/security\/ssl\/StatusResponseManagerTests.java","additions":31,"deletions":13,"binary":false,"changes":44,"status":"modified"}]}