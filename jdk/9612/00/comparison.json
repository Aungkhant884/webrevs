{"files":[{"patch":"@@ -53,1 +53,1 @@\n-        boolean foundJitRestart = false;\n+        boolean checkJitRestartCompilation = false;\n@@ -57,2 +57,2 @@\n-                System.out.println(\"JIT restart event found for BlobType \" + btype);\n-                foundJitRestart = true;\n+                System.out.println(\"JIT restart event \/ Compilation event check for BlobType \" + btype + \" was successful\");\n+                checkJitRestartCompilation = true;\n@@ -61,1 +61,1 @@\n-        Asserts.assertTrue(foundJitRestart, \"No JIT restart event found\");\n+        Asserts.assertTrue(checkJitRestartCompilation, \"No JIT restart event found and unexpected compilation seen\");\n@@ -69,0 +69,1 @@\n+        r.enable(EventNames.Compilation);\n@@ -80,0 +81,1 @@\n+        boolean compilationCanHappen = true;\n@@ -82,0 +84,6 @@\n+            if (evt.getEventType().getName().equals(\"jdk.CodeCacheFull\")) {\n+                compilationCanHappen = false;\n+            }\n+            if (evt.getEventType().getName().equals(\"jdk.Compilation\") && !compilationCanHappen) {\n+                return false;\n+            }\n@@ -85,0 +93,1 @@\n+                System.out.println(\"JIT restart event found for BlobType \" + btype);\n@@ -88,1 +97,3 @@\n-        return false;\n+        \/\/ in some seldom cases we do not see the JitRestart event; but then\n+        \/\/ do not fail (as long as no compilation happened before)\n+        return true;\n","filename":"test\/jdk\/jdk\/jfr\/event\/compiler\/TestJitRestart.java","additions":16,"deletions":5,"binary":false,"changes":21,"status":"modified"}]}