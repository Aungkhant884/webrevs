{"files":[{"patch":"@@ -818,1 +818,1 @@\n-     * If the {@systemProperty java.util.Properties.storeDate} is set on the command line\n+     * If the {@systemProperty java.properties.date} is set on the command line\n@@ -949,1 +949,1 @@\n-        \/\/ value of java.util.Properties.storeDate system property isn't sensitive\n+        \/\/ value of java.properties.date system property isn't sensitive\n@@ -952,3 +952,3 @@\n-        String storeDate = StaticProperty.javaUtilPropertiesStoreDate();\n-        if (storeDate != null && !storeDate.isEmpty()) {\n-            writeComments(bw, storeDate);\n+        String sysPropVal = StaticProperty.javaPropertiesDate();\n+        if (sysPropVal != null && !sysPropVal.isEmpty()) {\n+            writeComments(bw, sysPropVal);\n","filename":"src\/java.base\/share\/classes\/java\/util\/Properties.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -54,1 +54,1 @@\n-    private static final String JAVA_UTIL_PROPERTIES_STOREDATE;\n+    private static final String JAVA_PROPERTIES_DATE;\n@@ -71,1 +71,1 @@\n-        JAVA_UTIL_PROPERTIES_STOREDATE = getProperty(props, \"java.util.Properties.storeDate\", null);\n+        JAVA_PROPERTIES_DATE = getProperty(props, \"java.properties.date\", null);\n@@ -234,1 +234,1 @@\n-     * Return the {@code java.util.Properties.storeDate} system property.\n+     * Return the {@code java.properties.date} system property.\n@@ -239,1 +239,1 @@\n-     * @return the {@code java.util.Properties.storeDate} system property\n+     * @return the {@code java.properties.date} system property\n@@ -241,2 +241,2 @@\n-    public static String javaUtilPropertiesStoreDate() {\n-        return JAVA_UTIL_PROPERTIES_STOREDATE;\n+    public static String javaPropertiesDate() {\n+        return JAVA_PROPERTIES_DATE;\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/util\/StaticProperty.java","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -54,1 +54,1 @@\n-    private static final String SYS_PROP_JAVA_UTIL_PROPERTIES_STOREDATE = \"java.util.Properties.storeDate\";\n+    private static final String SYS_PROP_JAVA_PROPERTIES_DATE = \"java.properties.date\";\n@@ -62,1 +62,1 @@\n-        \/\/ read permissions on java.util.Properties.storeDate system property\n+        \/\/ read permissions on java.properties.date system property\n@@ -64,1 +64,1 @@\n-        \/\/ security manager enabled and no explicit permission on java.util.Properties.storeDate system property\n+        \/\/ security manager enabled and no explicit permission on java.properties.date system property\n@@ -66,10 +66,10 @@\n-        \/\/ free form non-date value for java.util.Properties.storeDate system property\n-        testNonDateStoreDateValue();\n-        \/\/ blank value for java.util.Properties.storeDate system property\n-        testBlankStoreDateValue();\n-        \/\/ empty value for java.util.Properties.storeDate system property\n-        testEmptyStoreDateValue();\n-        \/\/ value for java.util.Properties.storeDate system property contains line terminator characters\n-        testMultiLineStoreDateValue();\n-        \/\/ value for java.util.Properties.storeDate system property contains backslash character\n-        testBackSlashInStoreDateValue();\n+        \/\/ free form non-date value for java.properties.date system property\n+        testNonDateSysPropValue();\n+        \/\/ blank value for java.properties.date system property\n+        testBlankSysPropValue();\n+        \/\/ empty value for java.properties.date system property\n+        testEmptySysPropValue();\n+        \/\/ value for java.properties.date system property contains line terminator characters\n+        testMultiLineSysPropValue();\n+        \/\/ value for java.properties.date system property contains backslash character\n+        testBackSlashInSysPropValue();\n@@ -81,1 +81,1 @@\n-     * {@code java.util.Properties.storeDate} system property and the date comment written out\n+     * {@code java.properties.date} system property and the date comment written out\n@@ -83,1 +83,1 @@\n-     * The program is launched multiple times with the same value for {@code java.util.Properties.storeDate}\n+     * The program is launched multiple times with the same value for {@code java.properties.date}\n@@ -86,1 +86,1 @@\n-     * corresponds to the passed {@code java.util.Properties.storeDate}.\n+     * corresponds to the passed {@code java.properties.date}.\n@@ -91,1 +91,1 @@\n-        final String storeDate = reproducibleDateTimeFormatter.format(Instant.ofEpochSecond(243535322));\n+        final String sysPropVal = reproducibleDateTimeFormatter.format(Instant.ofEpochSecond(243535322));\n@@ -96,1 +96,1 @@\n-                    \"-D\" + SYS_PROP_JAVA_UTIL_PROPERTIES_STOREDATE + \"=\" + storeDate,\n+                    \"-D\" + SYS_PROP_JAVA_PROPERTIES_DATE + \"=\" + sysPropVal,\n@@ -101,1 +101,1 @@\n-            assertExpectedStoreDate(tmpFile, storeDate);\n+            assertExpectedComment(tmpFile, sysPropVal);\n@@ -106,1 +106,1 @@\n-        assertAllFileContentsAreSame(storedFiles, storeDate);\n+        assertAllFileContentsAreSame(storedFiles, sysPropVal);\n@@ -112,1 +112,1 @@\n-     * {@code java.util.Properties.storeDate} system property and the date comment written out to the file\n+     * {@code java.properties.date} system property and the date comment written out to the file\n@@ -115,2 +115,2 @@\n-     * a {@code read} permission on {@code java.util.Properties.storeDate}.\n-     * The program is launched multiple times with the same value for {@code java.util.Properties.storeDate}\n+     * a {@code read} permission on {@code java.properties.date}.\n+     * The program is launched multiple times with the same value for {@code java.properties.date}\n@@ -119,1 +119,1 @@\n-     * corresponds to the passed {@code java.util.Properties.storeDate}.\n+     * corresponds to the passed {@code java.properties.date}.\n@@ -127,1 +127,1 @@\n-                    \/\/ explicitly grant read permission on java.util.Properties.storeDate system property\n+                    \/\/ explicitly grant read permission on java.properties.date system property\n@@ -129,1 +129,1 @@\n-                    permission java.util.PropertyPermission \"java.util.Properties.storeDate\", \"read\";\n+                    permission java.util.PropertyPermission \"java.properties.date\", \"read\";\n@@ -133,1 +133,1 @@\n-        final String storeDate = reproducibleDateTimeFormatter.format(Instant.ofEpochSecond(1234342423));\n+        final String sysPropVal = reproducibleDateTimeFormatter.format(Instant.ofEpochSecond(1234342423));\n@@ -138,1 +138,1 @@\n-                    \"-D\" + SYS_PROP_JAVA_UTIL_PROPERTIES_STOREDATE + \"=\" + storeDate,\n+                    \"-D\" + SYS_PROP_JAVA_PROPERTIES_DATE + \"=\" + sysPropVal,\n@@ -145,1 +145,1 @@\n-            assertExpectedStoreDate(tmpFile, storeDate);\n+            assertExpectedComment(tmpFile, sysPropVal);\n@@ -150,1 +150,1 @@\n-        assertAllFileContentsAreSame(storedFiles, storeDate);\n+        assertAllFileContentsAreSame(storedFiles, sysPropVal);\n@@ -156,1 +156,1 @@\n-     * {@code java.util.Properties.storeDate} system property and the date comment written out to the file\n+     * {@code java.properties.date} system property and the date comment written out to the file\n@@ -159,2 +159,2 @@\n-     * any explicit permission for {@code java.util.Properties.storeDate} system property.\n-     * The program is launched multiple times with the same value for {@code java.util.Properties.storeDate}\n+     * any explicit permission for {@code java.properties.date} system property.\n+     * The program is launched multiple times with the same value for {@code java.properties.date}\n@@ -163,1 +163,1 @@\n-     * corresponds to the passed {@code java.util.Properties.storeDate}.\n+     * corresponds to the passed {@code java.properties.date}.\n@@ -171,1 +171,1 @@\n-                    \/\/ no other grants, not even \"read\" java.util.Properties.storeDate system property.\n+                    \/\/ no other grants, not even \"read\" java.properties.date system property.\n@@ -173,1 +173,1 @@\n-                    \/\/ java.util.Properties.storeDate system property.\n+                    \/\/ java.properties.date system property.\n@@ -177,1 +177,1 @@\n-        final String storeDate = reproducibleDateTimeFormatter.format(Instant.ofEpochSecond(1234342423));\n+        final String sysPropVal = reproducibleDateTimeFormatter.format(Instant.ofEpochSecond(1234342423));\n@@ -182,1 +182,1 @@\n-                    \"-D\" + SYS_PROP_JAVA_UTIL_PROPERTIES_STOREDATE + \"=\" + storeDate,\n+                    \"-D\" + SYS_PROP_JAVA_PROPERTIES_DATE + \"=\" + sysPropVal,\n@@ -189,1 +189,1 @@\n-            assertExpectedStoreDate(tmpFile, storeDate);\n+            assertExpectedComment(tmpFile, sysPropVal);\n@@ -194,1 +194,1 @@\n-        assertAllFileContentsAreSame(storedFiles, storeDate);\n+        assertAllFileContentsAreSame(storedFiles, sysPropVal);\n@@ -200,1 +200,1 @@\n-     * for the {@code java.util.Properties.storeDate} system property.\n+     * for the {@code java.properties.date} system property.\n@@ -205,1 +205,1 @@\n-    private static void testBlankStoreDateValue() throws Exception {\n+    private static void testBlankSysPropValue() throws Exception {\n@@ -207,1 +207,1 @@\n-        final String storeDate = \"      \\t\";\n+        final String sysPropVal = \"      \\t\";\n@@ -212,1 +212,1 @@\n-                    \"-D\" + SYS_PROP_JAVA_UTIL_PROPERTIES_STOREDATE + \"=\" + storeDate,\n+                    \"-D\" + SYS_PROP_JAVA_PROPERTIES_DATE + \"=\" + sysPropVal,\n@@ -223,1 +223,1 @@\n-                        + SYS_PROP_JAVA_UTIL_PROPERTIES_STOREDATE + \" system property is missing in file \" + tmpFile);\n+                        + SYS_PROP_JAVA_PROPERTIES_DATE + \" system property is missing in file \" + tmpFile);\n@@ -229,1 +229,1 @@\n-        assertAllFileContentsAreSame(storedFiles, storeDate);\n+        assertAllFileContentsAreSame(storedFiles, sysPropVal);\n@@ -235,1 +235,1 @@\n-     * for the {@code java.util.Properties.storeDate} system property.\n+     * for the {@code java.properties.date} system property.\n@@ -240,1 +240,1 @@\n-    private static void testEmptyStoreDateValue() throws Exception {\n+    private static void testEmptySysPropValue() throws Exception {\n@@ -244,1 +244,1 @@\n-                    \"-D\" + SYS_PROP_JAVA_UTIL_PROPERTIES_STOREDATE + \"=\" + \"\",\n+                    \"-D\" + SYS_PROP_JAVA_PROPERTIES_DATE + \"=\" + \"\",\n@@ -262,1 +262,1 @@\n-     * properties to a file. The launched Java program is passed the {@code java.util.Properties.storeDate}\n+     * properties to a file. The launched Java program is passed the {@code java.properties.date}\n@@ -268,2 +268,2 @@\n-    private static void testNonDateStoreDateValue() throws Exception {\n-        final String storeDate = \"foo-bar\";\n+    private static void testNonDateSysPropValue() throws Exception {\n+        final String sysPropVal = \"foo-bar\";\n@@ -275,1 +275,1 @@\n-                    \"-D\" + SYS_PROP_JAVA_UTIL_PROPERTIES_STOREDATE + \"=\" + storeDate,\n+                    \"-D\" + SYS_PROP_JAVA_PROPERTIES_DATE + \"=\" + sysPropVal,\n@@ -283,1 +283,1 @@\n-            assertExpectedStoreDate(tmpFile, storeDate);\n+            assertExpectedComment(tmpFile, sysPropVal);\n@@ -285,1 +285,1 @@\n-        assertAllFileContentsAreSame(storedFiles, storeDate);\n+        assertAllFileContentsAreSame(storedFiles, sysPropVal);\n@@ -290,1 +290,1 @@\n-     * properties to a file. The launched Java program is passed the {@code java.util.Properties.storeDate}\n+     * properties to a file. The launched Java program is passed the {@code java.properties.date}\n@@ -296,3 +296,3 @@\n-    private static void testMultiLineStoreDateValue() throws Exception {\n-        final String[] storeDates = {\"hello-world\\nc=d\", \"hello-world\\rc=d\", \"hello-world\\r\\nc=d\"};\n-        for (final String storeDate : storeDates) {\n+    private static void testMultiLineSysPropValue() throws Exception {\n+        final String[] sysPropVals = {\"hello-world\\nc=d\", \"hello-world\\rc=d\", \"hello-world\\r\\nc=d\"};\n+        for (final String sysPropVal : sysPropVals) {\n@@ -304,1 +304,1 @@\n-                        \"-D\" + SYS_PROP_JAVA_UTIL_PROPERTIES_STOREDATE + \"=\" + storeDate,\n+                        \"-D\" + SYS_PROP_JAVA_PROPERTIES_DATE + \"=\" + sysPropVal,\n@@ -325,1 +325,1 @@\n-            assertAllFileContentsAreSame(storedFiles, storeDate);\n+            assertAllFileContentsAreSame(storedFiles, sysPropVal);\n@@ -331,1 +331,1 @@\n-     * properties to a file. The launched Java program is passed the {@code java.util.Properties.storeDate}\n+     * properties to a file. The launched Java program is passed the {@code java.properties.date}\n@@ -337,2 +337,2 @@\n-    private static void testBackSlashInStoreDateValue() throws Exception {\n-        final String[] storeDates = {\"\\\\hello-world\", \"hello-world\\\\\", \"hello-world\\\\c=d\",\n+    private static void testBackSlashInSysPropValue() throws Exception {\n+        final String[] sysPropVals = {\"\\\\hello-world\", \"hello-world\\\\\", \"hello-world\\\\c=d\",\n@@ -340,1 +340,1 @@\n-        for (final String storeDate : storeDates) {\n+        for (final String sysPropVal : sysPropVals) {\n@@ -346,1 +346,1 @@\n-                        \"-D\" + SYS_PROP_JAVA_UTIL_PROPERTIES_STOREDATE + \"=\" + storeDate,\n+                        \"-D\" + SYS_PROP_JAVA_PROPERTIES_DATE + \"=\" + sysPropVal,\n@@ -358,1 +358,1 @@\n-                if (storeDate.contains(\"newline-plus-backslash\")) {\n+                if (sysPropVal.contains(\"newline-plus-backslash\")) {\n@@ -365,1 +365,1 @@\n-                        throw new RuntimeException(storeDate + \" was expected to be split into 2 comment line, \" +\n+                        throw new RuntimeException(sysPropVal + \" was expected to be split into 2 comment line, \" +\n@@ -372,1 +372,1 @@\n-                    if (!commentLine1.equals(storeDate)) {\n+                    if (!commentLine1.equals(sysPropVal)) {\n@@ -377,1 +377,1 @@\n-            assertAllFileContentsAreSame(storedFiles, storeDate);\n+            assertAllFileContentsAreSame(storedFiles, sysPropVal);\n@@ -400,1 +400,2 @@\n-     * Verifies that the date comment in the {@code destFile} is same as {@code storeDate}\n+     * Verifies that the comment in the {@code destFile} is same as {@code expectedComment},\n+     * instead of the default date comment.\n@@ -402,5 +403,5 @@\n-    private static void assertExpectedStoreDate(final Path destFile,\n-                                                final String storeDate) throws Exception {\n-        final String dateComment = findNthComment(destFile, 2);\n-        if (dateComment == null) {\n-            throw new RuntimeException(\"Comment \\\"\" + storeDate + \"\\\" not found in stored properties \" + destFile);\n+    private static void assertExpectedComment(final Path destFile,\n+                                              final String expectedComment) throws Exception {\n+        final String actualComment = findNthComment(destFile, 2);\n+        if (actualComment == null) {\n+            throw new RuntimeException(\"Comment \\\"\" + expectedComment + \"\\\" not found in stored properties \" + destFile);\n@@ -408,2 +409,2 @@\n-        if (!storeDate.equals(dateComment)) {\n-            throw new RuntimeException(\"Expected comment \\\"\" + storeDate + \"\\\" but found \\\"\" + dateComment + \"\\\" \" +\n+        if (!expectedComment.equals(actualComment)) {\n+            throw new RuntimeException(\"Expected comment \\\"\" + expectedComment + \"\\\" but found \\\"\" + actualComment + \"\\\" \" +\n@@ -416,1 +417,1 @@\n-     * \"EEE MMM dd HH:mm:ss zzz yyyy\" format and the time represented by it is {@link Date#after(Date) after}\n+     * \"EEE MMM dd HH:mm:ss zzz uuuu\" format and the time represented by it is {@link Date#after(Date) after}\n@@ -457,1 +458,1 @@\n-                                                     final String storeDate) throws Exception {\n+                                                     final String sysPropVal) throws Exception {\n@@ -463,1 +464,1 @@\n-                        \"storeDate was set to \" + storeDate);\n+                        SYS_PROP_JAVA_PROPERTIES_DATE + \" was set to \" + sysPropVal);\n","filename":"test\/jdk\/java\/util\/Properties\/StoreReproducibilityTest.java","additions":82,"deletions":81,"binary":false,"changes":163,"status":"modified"}]}