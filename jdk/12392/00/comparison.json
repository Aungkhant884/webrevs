{"files":[{"patch":"@@ -225,1 +225,1 @@\n-            return ForceGC.wait(() -> weakRef.refersTo(null));\n+            return ForceGC.wait(() -> weakRef.refersTo(null), 2000L);\n","filename":"test\/jdk\/java\/lang\/invoke\/defineHiddenClass\/UnloadingTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -41,1 +41,1 @@\n-     * returns true, or a specific waiting time elapses.  The waiting time\n+     * returns true, or the waiting time elapses.  The waiting time\n@@ -44,0 +44,6 @@\n+     * @apiNote If the given {@code booleanSupplier} is expected to never\n+     * return true, for example to check if an object that is expected\n+     * to be strongly reachable is still alive,\n+     * {@link #wait(BooleanSupplier, long)} can be used to specify\n+     * the timeout for the wait method to return.\n+     *\n@@ -46,1 +52,2 @@\n-     *     if did not complete after the specific waiting time.\n+     *     if did not complete after the waiting time.\n+\n@@ -49,0 +56,18 @@\n+        return wait(booleanSupplier, Math.round(1000L * TIMEOUT_FACTOR));\n+    }\n+\n+    \/**\n+     * Causes the current thread to wait until the {@code booleanSupplier}\n+     * returns true, or the specified waiting time elapses.\n+     *\n+     * @apiNote If the given {@code booleanSupplier} is expected to never\n+     * return true, for example to check if an object that is expected\n+     * to be strongly reachable is still alive, this method can be used\n+     * to specify the timeout independent of the jtreg timeout factor.\n+     *\n+     * @param booleanSupplier boolean supplier\n+     * @param timeout the maximum time to wait, in milliseconds\n+     * @return true if the {@code booleanSupplier} returns true, or false\n+     *     if did not complete after the specified waiting time.\n+     *\/\n+    public static boolean wait(BooleanSupplier booleanSupplier, long timeout) {\n@@ -56,1 +81,1 @@\n-        int retries = (int)(Math.round(1000L * TIMEOUT_FACTOR) \/ 200);\n+        int retries = (int)(timeout \/ 200);\n","filename":"test\/lib\/jdk\/test\/lib\/util\/ForceGC.java","additions":28,"deletions":3,"binary":false,"changes":31,"status":"modified"}]}