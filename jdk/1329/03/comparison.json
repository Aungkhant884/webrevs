{"files":[{"patch":"@@ -580,7 +580,9 @@\n-     * invokes {@link #skip(long) skip()} with parameter {@code n}.  If the\n-     * return value of {@code skip(n)} is non-negative and less than {@code n},\n-     * then {@link #read()} is invoked repeatedly until the stream is {@code n}\n-     * bytes beyond its position when this method was invoked or end of stream\n-     * is reached.  If the return value of {@code skip(n)} is negative or\n-     * greater than {@code n}, then an {@code IOException} is thrown.  Any\n-     * exception thrown by {@code skip()} or {@code read()} will be propagated.\n+     * invokes {@link #skip(long) skip()} repeatedly with its parameter equal\n+     * to the remaining number of bytes to skip until the requested number\n+     * of bytes has been skipped or an error condition occurs.  If at any\n+     * point the return value of {@code skip()} is negative or greater than the\n+     * remaining number of bytes to be skipped, then an {@code IOException} is\n+     * thrown.  If {@code skip()} ever returns zero, then {@link #read()} is\n+     * invoked to read a single byte, and if it returns {@code -1}, then an\n+     * {@code EOFException} is thrown.  Any exception thrown by {@code skip()}\n+     * or {@code read()} will be propagated.\n@@ -597,1 +599,1 @@\n-        if (n > 0) {\n+        while (n > 0) {\n@@ -599,1 +601,1 @@\n-            if (ns >= 0 && ns < n) { \/\/ skipped too few bytes\n+            if (ns > 0 && ns <= n) {\n@@ -602,6 +604,3 @@\n-                \/\/ read until requested number skipped or EOS reached\n-                while (n > 0 && read() != -1) {\n-                    n--;\n-                }\n-                \/\/ if not enough skipped, then EOFE\n-                if (n != 0) {\n+            } else if (ns == 0) { \/\/ no bytes skipped\n+                \/\/ read one byte to check for EOS\n+                if (read() == -1) {\n@@ -610,1 +609,3 @@\n-            } else if (ns != n) { \/\/ skipped negative or too many bytes\n+                \/\/ one byte read so decrement number to skip\n+                n--;\n+            } else { \/\/ skipped negative or too many bytes\n","filename":"src\/java.base\/share\/classes\/java\/io\/InputStream.java","additions":17,"deletions":16,"binary":false,"changes":33,"status":"modified"}]}