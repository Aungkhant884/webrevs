{"files":[{"patch":"@@ -62,0 +62,4 @@\n+    \/**\n+     * Enum of preview features in the current release.\n+     * Values should be annotated with the feature's {@code JEP}.\n+     *\/\n@@ -63,1 +67,3 @@\n-        SWITCH_PATTERN_MATCHING,\n+        @JEP(number=427, title=\"Pattern Matching for switch\", status=\"Third Preview\")\n+        SWITCH_PATTERN_MATCHING(),\n+        @JEP(number=405, title=\"Record Patterns\")\n@@ -65,0 +71,1 @@\n+        @JEP(number=425, title=\"Virtual Threads\")\n@@ -66,0 +73,1 @@\n+        @JEP(number=424, title=\"Foreign Function & Memory API\")\n@@ -70,0 +78,1 @@\n+        @JEP(number=0, title=\"Test Feature\")\n@@ -73,0 +82,14 @@\n+\n+    \/**\n+     * Annotation identifying the JEP associated with a preview feature.\n+     *\/\n+    @Target(ElementType.FIELD)\n+    @Retention(RetentionPolicy.CLASS)\n+    @interface JEP {\n+        \/** JEP number *\/\n+        int number() default 0;\n+        \/** JEP title *\/\n+        String title();\n+        \/** JEP status such as \"Preview\", \"Second Preview\", etc *\/\n+        String status() default \"Preview\";\n+    }\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/javac\/PreviewFeature.java","additions":24,"deletions":1,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -95,1 +95,1 @@\n-        return new HtmlTree(TagName.UL);\n+        return HtmlTree.UL(HtmlStyle.contentsList);\n@@ -119,0 +119,1 @@\n+        bodyContents.addMainContent(div);\n@@ -124,2 +125,1 @@\n-        div.add(section);\n-        bodyContents.addMainContent(div);\n+        bodyContents.addMainContent(section);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/ConstantsSummaryWriterImpl.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -60,2 +60,1 @@\n-        super(configuration, filename, PageMode.DEPRECATED, \"deprecated elements\",\n-              configuration.contents.deprecatedAPI, \"doclet.Window_Deprecated_List\");\n+        super(configuration, filename, configuration.deprecatedAPIListBuilder);\n@@ -76,1 +75,2 @@\n-            depr.generateSummaryListFile(configuration.deprecatedAPIListBuilder);\n+            depr.generateSummaryListFile(PageMode.DEPRECATED, \"deprecated elements\",\n+                    configuration.contents.deprecatedAPI, \"doclet.Window_Deprecated_List\");\n@@ -81,2 +81,2 @@\n-    protected void addExtraSection(DeprecatedAPIListBuilder list, Content content) {\n-        List<String> releases = configuration.deprecatedAPIListBuilder.releases;\n+    protected void addContentSelectors(Content target) {\n+        List<String> releases = builder.releases;\n@@ -90,1 +90,1 @@\n-            content.add(tabs);\n+            target.add(tabs);\n@@ -92,1 +92,5 @@\n-        addSummaryAPI(list.getForRemoval(), HtmlIds.FOR_REMOVAL,\n+    }\n+\n+    @Override\n+    protected void addExtraSection(Content content) {\n+        addSummaryAPI(builder.getForRemoval(), HtmlIds.FOR_REMOVAL,\n@@ -114,2 +118,2 @@\n-    protected void addExtraIndexLink(DeprecatedAPIListBuilder list, Content target) {\n-        if (!list.getForRemoval().isEmpty()) {\n+    protected void addExtraIndexLink(Content target) {\n+        if (!builder.getForRemoval().isEmpty()) {\n@@ -132,1 +136,1 @@\n-        List<String> releases = configuration.deprecatedAPIListBuilder.releases;\n+        List<String> releases = builder.releases;\n@@ -152,1 +156,1 @@\n-        List<String> releases = configuration.deprecatedAPIListBuilder.releases;\n+        List<String> releases = builder.releases;\n@@ -163,1 +167,1 @@\n-        List<String> releases = configuration.deprecatedAPIListBuilder.releases;\n+        List<String> releases = builder.releases;\n@@ -176,1 +180,1 @@\n-        List<String> releases = configuration.deprecatedAPIListBuilder.releases;\n+        List<String> releases = builder.releases;\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/DeprecatedListWriter.java","additions":17,"deletions":13,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -58,4 +58,2 @@\n-    public NewAPIListWriter(NewAPIBuilder builder, HtmlConfiguration configuration, DocPath filename) {\n-        super(configuration, filename, PageMode.NEW, \"new elements\",\n-                Text.of(getHeading(configuration)),\n-                \"doclet.Window_New_List\");\n+    public NewAPIListWriter(HtmlConfiguration configuration, DocPath filename) {\n+        super(configuration, filename, configuration.newAPIPageBuilder);\n@@ -73,3 +71,3 @@\n-            NewAPIBuilder builder = configuration.newAPIPageBuilder;\n-            NewAPIListWriter writer = new NewAPIListWriter(builder, configuration, DocPaths.NEW_LIST);\n-            writer.generateSummaryListFile(builder);\n+            NewAPIListWriter writer = new NewAPIListWriter(configuration, DocPaths.NEW_LIST);\n+            writer.generateSummaryListFile(PageMode.NEW, \"new elements\",\n+                    Text.of(getHeading(configuration)), \"doclet.Window_New_List\");\n@@ -80,1 +78,1 @@\n-    protected void addExtraSection(NewAPIBuilder list, Content content) {\n+    protected void addContentSelectors(Content content) {\n@@ -96,1 +94,2 @@\n-            content.add(tabs);        }\n+            content.add(tabs);\n+        }\n@@ -102,1 +101,1 @@\n-        List<String> releases = configuration.newAPIPageBuilder.releases;\n+        List<String> releases = builder.releases;\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/NewAPIListWriter.java","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -101,0 +101,1 @@\n+        mainContent.add(div);\n@@ -102,1 +103,1 @@\n-            addLinkToAllPackages(div);\n+            addLinkToAllPackages(mainContent);\n@@ -104,1 +105,0 @@\n-        mainContent.add(div);\n@@ -146,1 +146,1 @@\n-        var ul = HtmlTree.UL(HtmlStyle.horizontal);\n+        var ul = HtmlTree.UL(HtmlStyle.horizontal).addStyle(HtmlStyle.contentsList);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/PackageTreeWriter.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+import java.util.Set;\n@@ -35,0 +36,4 @@\n+import jdk.javadoc.internal.doclets.formats.html.markup.HtmlAttr;\n+import jdk.javadoc.internal.doclets.formats.html.markup.HtmlId;\n+import jdk.javadoc.internal.doclets.formats.html.markup.HtmlStyle;\n+import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTree;\n@@ -54,1 +59,0 @@\n-\n@@ -56,2 +60,1 @@\n-        super(configuration, filename, PageMode.PREVIEW, \"preview elements\",\n-              configuration.contents.previewAPI, \"doclet.Window_Preview_List\");\n+        super(configuration, filename, configuration.previewAPIListBuilder);\n@@ -71,1 +74,25 @@\n-            depr.generateSummaryListFile(configuration.previewAPIListBuilder);\n+            depr.generateSummaryListFile(PageMode.PREVIEW, \"preview elements\",\n+                    configuration.contents.previewAPI, \"doclet.Window_Preview_List\");\n+        }\n+    }\n+\n+    @Override\n+    protected void addContentSelectors(Content target) {\n+        Set<PreviewAPIListBuilder.JEP> jeps = builder.getJEPs();\n+        if (!jeps.isEmpty()) {\n+            int index = 0;\n+            target.add(HtmlTree.P(contents.getContent(\"doclet.Preview_API_Checkbox_Label\")));\n+            Content list = HtmlTree.UL(HtmlStyle.previewFeatureList);\n+            for (var jep : jeps) {\n+                index++;\n+                HtmlId htmlId = HtmlId.of(\"feature-\" + index);\n+                String jepUrl = resources.getText(\"doclet.Preview_JEP_URL\", jep.number());\n+                list.add(HtmlTree.LI(HtmlTree.LABEL(htmlId.name(),\n+                                HtmlTree.INPUT(\"checkbox\", htmlId)\n+                                        .put(HtmlAttr.CHECKED, \"\")\n+                                        .put(HtmlAttr.ONCLICK,\n+                                                \"toggleGlobal(this, '\" + index + \"', 3)\"))\n+                        .add(HtmlTree.SPAN(Text.of(jep.number() + \": \"))\n+                                .add(HtmlTree.A(jepUrl, Text.of(jep.title() + \" (\" + jep.status() + \")\"))))));\n+            }\n+            target.add(list);\n@@ -85,0 +112,30 @@\n+    @Override\n+    protected void addTableTabs(Table table, String headingKey) {\n+        table.setGridStyle(HtmlStyle.threeColumnSummary)\n+                .setDefaultTab(getTableCaption(headingKey))\n+                .setAlwaysShowDefaultTab(true)\n+                .setRenderTabs(false);\n+        for (PreviewAPIListBuilder.JEP jep : builder.getJEPs()) {\n+            table.addTab(Text.EMPTY, element -> jep == builder.getJEP(element));\n+        }\n+    }\n+\n+    @Override\n+    protected Content getExtraContent(Element element) {\n+        PreviewAPIListBuilder.JEP jep = configuration.previewAPIListBuilder.getJEP(element);\n+        return jep == null ? Text.EMPTY : Text.of(jep.title());\n+    }\n+\n+    @Override\n+    protected TableHeader getTableHeader(String headerKey) {\n+        return new TableHeader(\n+                contents.getContent(headerKey),\n+                Text.of(\"Preview Feature\"),\n+                contents.descriptionLabel)\n+                .sortable(true, true, false); \/\/ Allow sorting by element name and feature\n+    }\n+\n+    @Override\n+    protected HtmlStyle[] getColumnStyles() {\n+        return new HtmlStyle[]{ HtmlStyle.colSummaryItemName, HtmlStyle.colSecond, HtmlStyle.colLast };\n+    }\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/PreviewListWriter.java","additions":61,"deletions":4,"binary":false,"changes":65,"status":"modified"},{"patch":"@@ -52,1 +52,1 @@\n-public class SummaryListWriter<L extends SummaryAPIListBuilder> extends SubWriterHolderWriter {\n+public abstract class SummaryListWriter<B extends SummaryAPIListBuilder> extends SubWriterHolderWriter {\n@@ -54,1 +54,1 @@\n-    private String getHeadingKey(SummaryElementKind kind) {\n+    protected String getHeadingKey(SummaryElementKind kind) {\n@@ -90,4 +90,2 @@\n-    private final PageMode pageMode;\n-    private final String description;\n-    private final Content headContent;\n-    private final String titleKey;\n+    \/** The summary list builder *\/\n+    protected final B builder;\n@@ -100,4 +98,1 @@\n-     * @param pageMode page mode to use\n-     * @param description page description\n-     * @param headContent page heading content\n-     * @param titleKey page title resource key\n+     * @param builder the summary list builder\n@@ -105,4 +100,1 @@\n-\n-    public SummaryListWriter(HtmlConfiguration configuration, DocPath filename,\n-                             PageMode pageMode, String description,\n-                             Content headContent, String titleKey) {\n+    public SummaryListWriter(HtmlConfiguration configuration, DocPath filename, B builder) {\n@@ -110,4 +102,1 @@\n-        this.pageMode = pageMode;\n-        this.description = description;\n-        this.headContent = headContent;\n-        this.titleKey = titleKey;\n+        this.builder = builder;\n@@ -119,1 +108,4 @@\n-     * @param summaryapi list of API summary built already.\n+     * @param pageMode page mode to use\n+     * @param description page description\n+     * @param headContent page heading content\n+     * @param titleKey page title resource key\n@@ -122,1 +114,2 @@\n-    protected void generateSummaryListFile(L summaryapi)\n+    protected void generateSummaryListFile(PageMode pageMode, String description,\n+                                           Content headContent, String titleKey)\n@@ -124,2 +117,1 @@\n-        HtmlTree body = getHeader();\n-        bodyContents.addMainContent(getContentsList(summaryapi));\n+        HtmlTree body = getHeader(pageMode, titleKey);\n@@ -127,1 +119,7 @@\n-        addExtraSection(summaryapi, content);\n+        var heading = HtmlTree.HEADING_TITLE(Headings.PAGE_TITLE_HEADING,\n+                HtmlStyle.title, headContent);\n+        content.add(HtmlTree.DIV(HtmlStyle.header, heading));\n+        addContentSelectors(content);\n+        content.add(HtmlTree.HEADING_TITLE(Headings.CONTENT_HEADING, contents.contentsHeading));\n+        content.add(getContentsList());\n+        addExtraSection(content);\n@@ -129,2 +127,2 @@\n-            if (summaryapi.hasDocumentation(kind)) {\n-                addSummaryAPI(summaryapi.getSet(kind), HtmlIds.forSummaryKind(kind),\n+            if (builder.hasDocumentation(kind)) {\n+                addSummaryAPI(builder.getSet(kind), HtmlIds.forSummaryKind(kind),\n@@ -166,1 +164,1 @@\n-                contents.getContent(headingKey)));\n+                contents.getContent(headingKey))).setId(HtmlId.of(\"contents-\" + id.name()));\n@@ -173,1 +171,0 @@\n-     * @param apiSummary the summary list builder\n@@ -176,9 +173,3 @@\n-    public Content getContentsList(L apiSummary) {\n-        var heading = HtmlTree.HEADING_TITLE(Headings.PAGE_TITLE_HEADING,\n-                HtmlStyle.title, headContent);\n-        var div = HtmlTree.DIV(HtmlStyle.header, heading);\n-        Content headingContent = contents.contentsHeading;\n-        div.add(HtmlTree.HEADING_TITLE(Headings.CONTENT_HEADING,\n-                headingContent));\n-        var ul = new HtmlTree(TagName.UL);\n-        addExtraIndexLink(apiSummary, ul);\n+    public Content getContentsList() {\n+        var ul= HtmlTree.UL(HtmlStyle.contentsList);\n+        addExtraIndexLink(ul);\n@@ -186,1 +177,1 @@\n-            if (apiSummary.hasDocumentation(kind)) {\n+            if (builder.hasDocumentation(kind)) {\n@@ -190,2 +181,1 @@\n-        div.add(ul);\n-        return div;\n+        return ul;\n@@ -195,0 +185,2 @@\n+     * @param pageMode page mode to use\n+     * @param titleKey page title resource key\n@@ -197,1 +189,1 @@\n-    public HtmlTree getHeader() {\n+    public HtmlTree getHeader(PageMode pageMode, String titleKey) {\n@@ -280,1 +272,0 @@\n-     * @param list the element list\n@@ -283,1 +274,1 @@\n-    protected void addExtraSection(L list, Content target) {\n+    protected void addExtraSection(Content target) {\n@@ -289,1 +280,0 @@\n-     * @param list the element list\n@@ -292,1 +282,1 @@\n-    protected void addExtraIndexLink(L list, Content target) {\n+    protected void addExtraIndexLink(Content target) {\n@@ -295,0 +285,8 @@\n+    \/**\n+     * Subclasses allow the user to show or hide parts of the content in the page.\n+     * This method should be used to add the UI to select the visible page content.\n+     *\n+     * @param target the content to which the UI should be added\n+     *\/\n+    protected abstract void addContentSelectors(Content target);\n+\n@@ -298,0 +296,1 @@\n+     *\n@@ -301,3 +300,1 @@\n-    protected Content getExtraContent(Element element) {\n-        return null;\n-    }\n+    protected abstract Content getExtraContent(Element element);\n@@ -342,1 +339,1 @@\n-    protected void addTableTabs(Table table, String headingKey) {}\n+    protected abstract void addTableTabs(Table table, String headingKey);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/SummaryListWriter.java","additions":45,"deletions":48,"binary":false,"changes":93,"status":"modified"},{"patch":"@@ -104,1 +104,0 @@\n-        addPackageTreeLinks(div);\n@@ -107,0 +106,1 @@\n+        addPackageTreeLinks(mainContent);\n@@ -132,1 +132,1 @@\n-            var ul = HtmlTree.UL(HtmlStyle.horizontal);\n+            var ul = HtmlTree.UL(HtmlStyle.horizontal).addStyle(HtmlStyle.contentsList);\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/TreeWriter.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -248,0 +248,13 @@\n+\n+    \/**\n+     * The class for a {@code ul} element in various summary pages containing links to the\n+     * contents of the page.\n+     *\/\n+    contentsList,\n+\n+    \/**\n+     * The class for a {@code ul} element in the preview summary page containing information\n+     * about the preview features in the current release.\n+     *\/\n+    previewFeatureList,\n+\n@@ -902,0 +915,2 @@\n+    \/\/<\/editor-fold>\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/markup\/HtmlStyle.java","additions":15,"deletions":0,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -124,0 +124,2 @@\n+doclet.Preview_API_Checkbox_Label=Show preview API for:\n+doclet.Preview_JEP_URL=https:\/\/openjdk.java.net\/jeps\/{0}\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/resources\/standard.properties","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -136,1 +136,3 @@\n-        t.parentElement.style.display = visible === 0 ? 'none' : '';\n+        var displaySection = visible === 0 ? 'none' : '';\n+        t.parentElement.style.display = displaySection;\n+        document.querySelector(\"li#contents-\" + id).style.display = displaySection;\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/script.js","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -237,3 +237,4 @@\n-.header ul {\n-    margin:0 0 15px 0;\n-    padding:0;\n+ul.contents-list {\n+    margin: 0 0 15px 0;\n+    padding: 0;\n+    list-style: none;\n@@ -241,3 +242,2 @@\n-.header ul li {\n-    list-style:none;\n-    font-size:13px;\n+ul.contents-list li {\n+    font-size: 13px;\n@@ -343,0 +343,6 @@\n+ul.preview-feature-list {\n+    list-style: none;\n+    margin:0;\n+    padding:0.1em;\n+    line-height: 1.6em;\n+}\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/resources\/stylesheet.css","additions":12,"deletions":6,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -30,0 +30,9 @@\n+import javax.lang.model.element.AnnotationValue;\n+import javax.lang.model.element.Element;\n+import javax.lang.model.element.ExecutableElement;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Objects;\n+import java.util.Set;\n+import java.util.TreeSet;\n+\n@@ -35,0 +44,13 @@\n+    final private Map<Element, JEP> elementJeps = new HashMap<>();\n+    final private Map<String, JEP> jeps = new HashMap<>();\n+\n+    \/**\n+     * The JEP for a preview feature in this release.\n+     *\/\n+    public record JEP(int number, String title, String status) implements Comparable<JEP> {\n+        @Override\n+        public int compareTo(JEP o) {\n+            return number - o.number;\n+        }\n+    }\n+\n@@ -41,1 +63,1 @@\n-        super(configuration, e -> configuration.utils.isPreviewAPI(e));\n+        super(configuration, configuration.utils::isPreviewAPI);\n@@ -44,0 +66,39 @@\n+\n+    @Override\n+    protected void handleElement(Element e) {\n+        String feature = Objects.requireNonNull(utils.getPreviewFeature(e),\n+                \"Preview feature not specified\").toString();\n+        JEP jep = jeps.computeIfAbsent(feature, (featureName) -> {\n+            Map<? extends ExecutableElement, ? extends AnnotationValue> anno = utils.getJepInfo(featureName);\n+            int number = 0;\n+            String title = \"\";\n+            String status = \"Preview\"; \/\/ Default value is not returned by the method we use above.\n+            for (var entry : anno.entrySet()) {\n+                if (\"number\".equals(entry.getKey().getSimpleName().toString())) {\n+                    number = (int) entry.getValue().getValue();\n+                } else if (\"title\".equals(entry.getKey().getSimpleName().toString())) {\n+                    title = (String) entry.getValue().getValue();\n+                } else if (\"status\".equals(entry.getKey().getSimpleName().toString())) {\n+                    status = (String) entry.getValue().getValue();\n+                } else {\n+                    throw new IllegalArgumentException(entry.getKey().getSimpleName().toString());\n+                }\n+            }\n+            return new JEP(number, title, status);\n+        });\n+        elementJeps.put(e, jep);\n+    }\n+\n+    \/**\n+     * {@return a sorted set of preview feature JEPs in this release}\n+     *\/\n+    public Set<JEP> getJEPs() {\n+        return new TreeSet<>(jeps.values());\n+    }\n+\n+    \/**\n+     * {@return the JEP for a preview element}\n+     *\/\n+    public JEP getJEP(Element e) {\n+        return elementJeps.get(e);\n+    }\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/PreviewAPIListBuilder.java","additions":62,"deletions":1,"binary":false,"changes":63,"status":"modified"},{"patch":"@@ -1294,1 +1294,1 @@\n-        Object forRemoval = getDeprecatedElement(e, \"forRemoval\");\n+        Object forRemoval = getAnnotationElement(e, getDeprecatedType(), \"forRemoval\");\n@@ -1305,1 +1305,11 @@\n-        return (String) getDeprecatedElement(e, \"since\");\n+        return (String) getAnnotationElement(e, getDeprecatedType(), \"since\");\n+    }\n+\n+    \/**\n+     * Returns the value of the internal {@code PreviewFeature.feature} element.\n+     *\n+     * @param e the Element to check\n+     * @return the PreviewFeature.feature for e, or null\n+     *\/\n+    public Object getPreviewFeature(Element e) {\n+        return getAnnotationElement(e, getSymbol(\"jdk.internal.javac.PreviewFeature\"), \"feature\");\n@@ -1311,1 +1321,1 @@\n-    private Object getDeprecatedElement(Element e, String elementName) {\n+    private Object getAnnotationElement(Element e, TypeMirror annotationType, String annotationElementName) {\n@@ -1315,1 +1325,1 @@\n-            if (jctypes.isSameType(anno.getAnnotationType().asElement().asType(), getDeprecatedType())) {\n+            if (jctypes.isSameType(anno.getAnnotationType(), annotationType)) {\n@@ -1319,1 +1329,1 @@\n-                        if (element.getSimpleName().contentEquals(elementName)) {\n+                        if (element.getSimpleName().contentEquals(annotationElementName)) {\n@@ -1329,0 +1339,22 @@\n+    \/**\n+     * Returns a map containing {@code jdk.internal.javac.PreviewFeature.JEP} element values associated with the\n+     * {@code jdk.internal.javac.PreviewFeature.Feature} enum constant identified by {@code feature}.\n+     *\n+     * @param feature the name of the PreviewFeature.Feature enum value\n+     * @return the map of PreviewFeature.JEP annotation element values, or an empty map\n+     *\/\n+    public Map<? extends ExecutableElement, ? extends AnnotationValue> getJepInfo(String feature) {\n+        TypeElement featureType = elementUtils.getTypeElement(\"jdk.internal.javac.PreviewFeature.Feature\");\n+        TypeElement jepType = elementUtils.getTypeElement(\"jdk.internal.javac.PreviewFeature.JEP\");\n+        var featureVar = featureType.getEnclosedElements().stream()\n+                .filter(e -> feature.equals(e.getSimpleName().toString())).findFirst();\n+        if (featureVar.isPresent()) {\n+            for (AnnotationMirror anno : featureVar.get().getAnnotationMirrors()) {\n+                if (anno.getAnnotationType().asElement().equals(jepType)) {\n+                    return anno.getElementValues();\n+                }\n+            }\n+        }\n+        return Map.of();\n+    }\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/Utils.java","additions":37,"deletions":5,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -123,1 +123,1 @@\n-        removeAll(htmlStyleNames, \"col-plain\", \"external-link\",\n+        removeAll(htmlStyleNames, \"col-plain\", \"external-link\", \"header\",\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/checkStylesheetClasses\/CheckStylesheetClasses.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -112,1 +112,1 @@\n-                    <ul>\n+                    <ul class=\"contents-list\">\n@@ -145,1 +145,1 @@\n-                    <ul>\n+                    <ul class=\"contents-list\">\n@@ -184,1 +184,1 @@\n-                    <ul>\n+                    <ul class=\"contents-list\">\n@@ -250,1 +250,1 @@\n-                    <ul>\n+                    <ul class=\"contents-list\">\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testConstantValuesPage\/TestConstantValuesPage.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -269,11 +269,11 @@\n-                    <ul>\n-                    <li><a href=\"#for-removal\">Terminally Deprecated<\/a><\/li>\n-                    <li><a href=\"#class\">Classes<\/a><\/li>\n-                    <li><a href=\"#enum-class\">Enum Classes<\/a><\/li>\n-                    <li><a href=\"#exception-class\">Exception Classes<\/a><\/li>\n-                    <li><a href=\"#annotation-interface\">Annotation Interfaces<\/a><\/li>\n-                    <li><a href=\"#field\">Fields<\/a><\/li>\n-                    <li><a href=\"#method\">Methods<\/a><\/li>\n-                    <li><a href=\"#constructor\">Constructors<\/a><\/li>\n-                    <li><a href=\"#enum-constant\">Enum Constants<\/a><\/li>\n-                    <li><a href=\"#annotation-interface-member\">Annotation Interface Elements<\/a><\/li>\n+                    <ul class=\"contents-list\">\n+                    <li id=\"contents-for-removal\"><a href=\"#for-removal\">Terminally Deprecated<\/a><\/li>\n+                    <li id=\"contents-class\"><a href=\"#class\">Classes<\/a><\/li>\n+                    <li id=\"contents-enum-class\"><a href=\"#enum-class\">Enum Classes<\/a><\/li>\n+                    <li id=\"contents-exception-class\"><a href=\"#exception-class\">Exception Classes<\/a><\/li>\n+                    <li id=\"contents-annotation-interface\"><a href=\"#annotation-interface\">Annotation Interfaces<\/a><\/li>\n+                    <li id=\"contents-field\"><a href=\"#field\">Fields<\/a><\/li>\n+                    <li id=\"contents-method\"><a href=\"#method\">Methods<\/a><\/li>\n+                    <li id=\"contents-constructor\"><a href=\"#constructor\">Constructors<\/a><\/li>\n+                    <li id=\"contents-enum-constant\"><a href=\"#enum-constant\">Enum Constants<\/a><\/li>\n+                    <li id=\"contents-annotation-interface-member\"><a href=\"#annotation-interface-member\">Annotation Interface Elements<\/a><\/li>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testDeprecatedDocs\/TestDeprecatedDocs.java","additions":11,"deletions":11,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -1113,3 +1113,3 @@\n-                    <ul>\n-                    <li><a href=\"#for-removal\">Terminally Deprecated<\/a><\/li>\n-                    <li><a href=\"#module\">Modules<\/a><\/li>\n+                    <ul class=\"contents-list\">\n+                    <li id=\"contents-for-removal\"><a href=\"#for-removal\">Terminally Deprecated<\/a><\/li>\n+                    <li id=\"contents-module\"><a href=\"#module\">Modules<\/a><\/li>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testModules\/TestModules.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -105,16 +105,0 @@\n-                <h2 title=\"Contents\">Contents<\/h2>\n-                <ul>\n-                <li><a href=\"#module\">Modules<\/a><\/li>\n-                <li><a href=\"#package\">Packages<\/a><\/li>\n-                <li><a href=\"#interface\">Interfaces<\/a><\/li>\n-                <li><a href=\"#class\">Classes<\/a><\/li>\n-                <li><a href=\"#enum-class\">Enum Classes<\/a><\/li>\n-                <li><a href=\"#exception-class\">Exception Classes<\/a><\/li>\n-                <li><a href=\"#record-class\">Record Classes<\/a><\/li>\n-                <li><a href=\"#annotation-interface\">Annotation Interfaces<\/a><\/li>\n-                <li><a href=\"#field\">Fields<\/a><\/li>\n-                <li><a href=\"#method\">Methods<\/a><\/li>\n-                <li><a href=\"#constructor\">Constructors<\/a><\/li>\n-                <li><a href=\"#enum-constant\">Enum Constants<\/a><\/li>\n-                <li><a href=\"#annotation-interface-member\">Annotation Interface Elements<\/a><\/li>\n-                <\/ul>\n@@ -134,1 +118,17 @@\n-                <span>5<\/span><\/label><\/div>\"\"\");\n+                <span>5<\/span><\/label><\/div>\n+                <h2 title=\"Contents\">Contents<\/h2>\n+                <ul class=\"contents-list\">\n+                <li id=\"contents-module\"><a href=\"#module\">Modules<\/a><\/li>\n+                <li id=\"contents-package\"><a href=\"#package\">Packages<\/a><\/li>\n+                <li id=\"contents-interface\"><a href=\"#interface\">Interfaces<\/a><\/li>\n+                <li id=\"contents-class\"><a href=\"#class\">Classes<\/a><\/li>\n+                <li id=\"contents-enum-class\"><a href=\"#enum-class\">Enum Classes<\/a><\/li>\n+                <li id=\"contents-exception-class\"><a href=\"#exception-class\">Exception Classes<\/a><\/li>\n+                <li id=\"contents-record-class\"><a href=\"#record-class\">Record Classes<\/a><\/li>\n+                <li id=\"contents-annotation-interface\"><a href=\"#annotation-interface\">Annotation Interfaces<\/a><\/li>\n+                <li id=\"contents-field\"><a href=\"#field\">Fields<\/a><\/li>\n+                <li id=\"contents-method\"><a href=\"#method\">Methods<\/a><\/li>\n+                <li id=\"contents-constructor\"><a href=\"#constructor\">Constructors<\/a><\/li>\n+                <li id=\"contents-enum-constant\"><a href=\"#enum-constant\">Enum Constants<\/a><\/li>\n+                <li id=\"contents-annotation-interface-member\"><a href=\"#annotation-interface-member\">Annotation Interface Elements<\/a><\/li>\n+                <\/ul>\"\"\");\n@@ -550,0 +550,1 @@\n+                <\/div>\n@@ -551,3 +552,3 @@\n-                <ul>\n-                <li><a href=\"#method\">Methods<\/a><\/li>\n-                <li><a href=\"#constructor\">Constructors<\/a><\/li>\n+                <ul class=\"contents-list\">\n+                <li id=\"contents-method\"><a href=\"#method\">Methods<\/a><\/li>\n+                <li id=\"contents-constructor\"><a href=\"#constructor\">Constructors<\/a><\/li>\n@@ -555,1 +556,0 @@\n-                <\/div>\n@@ -604,8 +604,0 @@\n-                <h2 title=\"Contents\">Contents<\/h2>\n-                <ul>\n-                <li><a href=\"#for-removal\">Terminally Deprecated<\/a><\/li>\n-                <li><a href=\"#method\">Methods<\/a><\/li>\n-                <li><a href=\"#constructor\">Constructors<\/a><\/li>\n-                <li><a href=\"#enum-constant\">Enum Constants<\/a><\/li>\n-                <li><a href=\"#annotation-interface-member\">Annotation Interface Elements<\/a><\/li>\n-                <\/ul>\n@@ -613,1 +605,13 @@\n-                <div class=\"checkboxes\">Show API deprecated in: <label for=\"release-1\">\"\"\",\n+                <div class=\"checkboxes\">Show API deprecated in: <label for=\"release-1\">\n+                <input type=\"checkbox\" id=\"release-1\" disabled checked onclick=\"toggleGlobal(this, '1', 3)\">\n+                <span>5<\/span><\/label> <label for=\"release-2\">\n+                <input type=\"checkbox\" id=\"release-2\" disabled checked onclick=\"toggleGlobal(this, '', 3)\">\n+                <span>other<\/span><\/label><\/div>\n+                <h2 title=\"Contents\">Contents<\/h2>\n+                <ul class=\"contents-list\">\n+                <li id=\"contents-for-removal\"><a href=\"#for-removal\">Terminally Deprecated<\/a><\/li>\n+                <li id=\"contents-method\"><a href=\"#method\">Methods<\/a><\/li>\n+                <li id=\"contents-constructor\"><a href=\"#constructor\">Constructors<\/a><\/li>\n+                <li id=\"contents-enum-constant\"><a href=\"#enum-constant\">Enum Constants<\/a><\/li>\n+                <li id=\"contents-annotation-interface-member\"><a href=\"#annotation-interface-member\">Annotation Interface Elements<\/a><\/li>\n+                <\/ul>\"\"\",\n@@ -665,7 +669,0 @@\n-                <h2 title=\"Contents\">Contents<\/h2>\n-                <ul>\n-                <li><a href=\"#class\">Classes<\/a><\/li>\n-                <li><a href=\"#field\">Fields<\/a><\/li>\n-                <li><a href=\"#method\">Methods<\/a><\/li>\n-                <li><a href=\"#constructor\">Constructors<\/a><\/li>\n-                <\/ul>\n@@ -683,1 +680,8 @@\n-                <span>6<\/span><\/label><\/div>\"\"\");\n+                <span>6<\/span><\/label><\/div>\n+                <h2 title=\"Contents\">Contents<\/h2>\n+                <ul class=\"contents-list\">\n+                <li id=\"contents-class\"><a href=\"#class\">Classes<\/a><\/li>\n+                <li id=\"contents-field\"><a href=\"#field\">Fields<\/a><\/li>\n+                <li id=\"contents-method\"><a href=\"#method\">Methods<\/a><\/li>\n+                <li id=\"contents-constructor\"><a href=\"#constructor\">Constructors<\/a><\/li>\n+                <\/ul>\"\"\");\n@@ -777,0 +781,1 @@\n+                <\/div>\n@@ -778,2 +783,2 @@\n-                <ul>\n-                <li><a href=\"#constructor\">Constructors<\/a><\/li>\n+                <ul class=\"contents-list\">\n+                <li id=\"contents-constructor\"><a href=\"#constructor\">Constructors<\/a><\/li>\n@@ -781,1 +786,0 @@\n-                <\/div>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testNewApiList\/TestNewApiList.java","additions":45,"deletions":41,"binary":false,"changes":86,"status":"modified"},{"patch":"@@ -59,1 +59,1 @@\n-                <li><a href=\"#package\">Packages<\/a><\/li>\"\"\"\n+                <li id=\"contents-package\"><a href=\"#package\">Packages<\/a><\/li>\"\"\"\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPackageDeprecation\/TestPackageDeprecation.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug      8250768 8261976 8277300 8282452\n+ * @bug      8250768 8261976 8277300 8282452 8287597\n@@ -80,0 +80,13 @@\n+                    \"\"\"\n+                    <ul class=\"preview-feature-list\">\n+                    <li><label for=\"feature-1\">\n+                    <input type=\"checkbox\" id=\"feature-1\" disabled checked onclick=\"toggleGlobal(this, '1', 3)\">\n+                    <span>0: <a href=\"https:\/\/openjdk.java.net\/jeps\/0\">Test Feature (Preview)<\/a><\/span><\/label><\/li>\n+                    <\/ul>\n+                    <h2 title=\"Contents\">Contents<\/h2>\n+                    <ul class=\"contents-list\">\n+                    <li id=\"contents-class\"><a href=\"#class\">Classes<\/a><\/li>\n+                    <li id=\"contents-record-class\"><a href=\"#record-class\">Record Classes<\/a><\/li>\n+                    <li id=\"contents-method\"><a href=\"#method\">Methods<\/a><\/li>\n+                    <\/ul>\n+                    \"\"\",\n@@ -82,0 +95,1 @@\n+                    <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n@@ -83,2 +97,5 @@\n-                    <div class=\"summary-table two-column-summary\">\n-                    <div class=\"table-header col-first\">Record Class<\/div>\n+                    <\/div>\n+                    <div id=\"record-class.tabpanel\" role=\"tabpanel\">\n+                    <div class=\"summary-table three-column-summary\" aria-labelledby=\"record-class-tab0\">\n+                    <div class=\"table-header col-first sort-asc\" onclick=\"sortTable(this, 0, 3)\">Record Class<\/div>\n+                    <div class=\"table-header col-second\" onclick=\"sortTable(this, 1, 3)\">Preview Feature<\/div>\n@@ -86,2 +103,3 @@\n-                    <div class=\"col-summary-item-name even-row-color\"><a href=\"java.base\/preview\/CoreRecord.html\" title=\"class in preview\">preview.CoreRecord<\/a><sup><a href=\"java.base\/preview\/CoreRecord.html#preview-preview.CoreRecord\">PREVIEW<\/a><\/sup><\/div>\n-                    <div class=\"col-last even-row-color\"><\/div>\n+                    <div class=\"col-summary-item-name even-row-color record-class record-class-tab1\"><a href=\"java.base\/preview\/CoreRecord.html\" title=\"class in preview\">preview.CoreRecord<\/a><sup><a href=\"java.base\/preview\/CoreRecord.html#preview-preview.CoreRecord\">PREVIEW<\/a><\/sup><\/div>\n+                    <div class=\"col-second even-row-color record-class record-class-tab1\">Test Feature<\/div>\n+                    <div class=\"col-last even-row-color record-class record-class-tab1\"><\/div>\n@@ -92,0 +110,1 @@\n+                    <div class=\"table-tabs\" role=\"tablist\" aria-orientation=\"horizontal\">\n@@ -93,2 +112,5 @@\n-                    <div class=\"summary-table two-column-summary\">\n-                    <div class=\"table-header col-first\">Method<\/div>\n+                    <\/div>\n+                    <div id=\"method.tabpanel\" role=\"tabpanel\">\n+                    <div class=\"summary-table three-column-summary\" aria-labelledby=\"method-tab0\">\n+                    <div class=\"table-header col-first sort-asc\" onclick=\"sortTable(this, 0, 3)\">Method<\/div>\n+                    <div class=\"table-header col-second\" onclick=\"sortTable(this, 1, 3)\">Preview Feature<\/div>\n@@ -96,2 +118,3 @@\n-                    <div class=\"col-summary-item-name even-row-color\"><a href=\"java.base\/preview\/CoreRecordComponent.html#i()\">preview.CoreRecordComponent.i()<\/a><sup><a href=\"java.base\/preview\/CoreRecordComponent.html#preview-i()\">PREVIEW<\/a><\/sup><\/div>\n-                    <div class=\"col-last even-row-color\">\n+                    <div class=\"col-summary-item-name even-row-color method method-tab1\"><a href=\"java.base\/preview\/CoreRecordComponent.html#i()\">preview.CoreRecordComponent.i()<\/a><sup><a href=\"java.base\/preview\/CoreRecordComponent.html#preview-i()\">PREVIEW<\/a><\/sup><\/div>\n+                    <div class=\"col-second even-row-color method method-tab1\">Test Feature<\/div>\n+                    <div class=\"col-last even-row-color method method-tab1\">\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testPreview\/TestPreview.java","additions":32,"deletions":9,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -516,2 +516,2 @@\n-                    <ul>\n-                    <li><a href=\"#record-class\">Record Classes<\/a><\/li>\n+                    <ul class=\"contents-list\">\n+                    <li id=\"contents-record-class\"><a href=\"#record-class\">Record Classes<\/a><\/li>\n@@ -548,2 +548,2 @@\n-                    <ul>\n-                    <li><a href=\"#method\">Methods<\/a><\/li>\n+                    <ul class=\"contents-list\">\n+                    <li id=\"contents-method\"><a href=\"#method\">Methods<\/a><\/li>\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testRecordTypes\/TestRecordTypes.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}