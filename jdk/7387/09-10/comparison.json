{"files":[{"patch":"@@ -28,0 +28,1 @@\n+import java.util.Objects;\n@@ -167,4 +168,8 @@\n-        boolean modified = false;\n-        for (E e : c) {\n-            base.add(0, e);\n-            modified = true;\n+\n+        @SuppressWarnings(\"unchecked\")\n+        E[] adds = (E[]) c.toArray();\n+        if (adds.length == 0) {\n+            return false;\n+        } else {\n+            base.addAll(0, Arrays.asList(ArraysSupport.reverse(adds)));\n+            return true;\n@@ -172,1 +177,0 @@\n-        return modified;\n@@ -316,1 +320,3 @@\n-        base.add(base.size() - index, element);\n+        int size = base.size();\n+        checkClosedRange(index, size);\n+        base.add(size - index, element);\n@@ -321,5 +327,9 @@\n-        boolean modified = false;\n-        int i = base.size() - index;\n-        for (E e : c) {\n-            base.add(i, e);\n-            modified = true;\n+        int size = base.size();\n+        checkClosedRange(index, size);\n+        @SuppressWarnings(\"unchecked\")\n+        E[] adds = (E[]) c.toArray();\n+        if (adds.length == 0) {\n+            return false;\n+        } else {\n+            base.addAll(size - index, Arrays.asList(ArraysSupport.reverse(adds)));\n+            return true;\n@@ -327,1 +337,0 @@\n-        return modified;\n@@ -331,1 +340,3 @@\n-        return base.get(base.size() - i - 1);\n+        int size = base.size();\n+        Objects.checkIndex(i, size);\n+        return base.get(size - i - 1);\n@@ -349,1 +360,3 @@\n-        return new DescendingListIterator(base.size(), index);\n+        int size = base.size();\n+        checkClosedRange(index, size);\n+        return new DescendingListIterator(size, index);\n@@ -354,1 +367,3 @@\n-        return base.remove(base.size() - index - 1);\n+        int size = base.size();\n+        Objects.checkIndex(index, size);\n+        return base.remove(size - index - 1);\n@@ -374,1 +389,3 @@\n-        return base.set(base.size() - index - 1, element);\n+        int size = base.size();\n+        Objects.checkIndex(index, size);\n+        return base.set(size - index - 1, element);\n@@ -379,0 +396,1 @@\n+        Objects.checkFromToIndex(fromIndex, toIndex, size);\n@@ -381,0 +399,6 @@\n+\n+    static void checkClosedRange(int index, int size) {\n+        if (index < 0 || index > size) {\n+            throw new IndexOutOfBoundsException(\"Index: \" + index + \", Size: \" + size);\n+        }\n+    }\n","filename":"src\/java.base\/share\/classes\/java\/util\/ReverseOrderListView.java","additions":40,"deletions":16,"binary":false,"changes":56,"status":"modified"}]}