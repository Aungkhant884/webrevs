{"files":[{"patch":"@@ -66,0 +66,3 @@\n+\n+  uint find(uint const card_idx, uint const bits_per_card, uint start_at, uint end_at);\n+\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CardSetContainers.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -50,0 +50,1 @@\n+  uint cur_idx = 0;\n@@ -52,0 +53,3 @@\n+    if (num_elems > 0) {\n+      cur_idx = find(card_idx, bits_per_card, cur_idx, num_elems);\n+    }\n@@ -53,1 +57,1 @@\n-    if (contains(card_idx, bits_per_card)) {\n+    if (cur_idx < num_elems) {\n@@ -75,2 +79,3 @@\n-inline bool G1CardSetInlinePtr::contains(uint card_idx, uint bits_per_card) {\n-  uint num_elems = num_cards_in(_value);\n+inline uint G1CardSetInlinePtr::find(uint card_idx, uint bits_per_card, uint start_at, uint end_at) {\n+  assert(start_at < end_at, \"Precondition!\");\n+\n@@ -78,0 +83,1 @@\n+  uintptr_t value = ((uintptr_t)_value) >> card_pos_for(start_at, bits_per_card);\n@@ -79,1 +85,0 @@\n-  uintptr_t value = ((uintptr_t)_value) >> card_pos_for(0, bits_per_card);\n@@ -81,1 +86,1 @@\n-  for (uint cur_idx = 0; cur_idx < num_elems; cur_idx++) {\n+  for (uint cur_idx = start_at; cur_idx < end_at; cur_idx++) {\n@@ -83,1 +88,1 @@\n-      return true;\n+      return cur_idx;\n@@ -87,1 +92,10 @@\n-  return false;\n+  return end_at;\n+}\n+\n+inline bool G1CardSetInlinePtr::contains(uint card_idx, uint bits_per_card) {\n+  uint num_elems = num_cards_in(_value);\n+  if(num_elems == 0) {\n+    return false;\n+  }\n+  uint cur_idx = find(card_idx, bits_per_card, 0, num_elems);\n+  return cur_idx < num_elems;\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CardSetContainers.inline.hpp","additions":21,"deletions":7,"binary":false,"changes":28,"status":"modified"}]}