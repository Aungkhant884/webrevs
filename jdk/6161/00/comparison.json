{"files":[{"patch":"@@ -199,1 +199,0 @@\n-java\/awt\/event\/KeyEvent\/KeyChar\/KeyCharTest.java 8169474,8224055 macosx-all,windows-all\n","filename":"test\/jdk\/ProblemList.txt","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,0 +24,1 @@\n+import javax.imageio.ImageIO;\n@@ -26,0 +27,3 @@\n+import java.awt.GraphicsDevice;\n+import java.awt.GraphicsEnvironment;\n+import java.awt.Point;\n@@ -30,0 +34,2 @@\n+import java.awt.image.BufferedImage;\n+import java.io.File;\n@@ -37,1 +43,0 @@\n- * @author Alexandr Scherbatiy\n@@ -48,1 +53,0 @@\n-\n@@ -61,2 +65,0 @@\n-\n-\n@@ -65,0 +67,1 @@\n+        frame.setLocationRelativeTo(null);\n@@ -66,0 +69,3 @@\n+        frame.toFront();\n+        frame.requestFocus();\n+\n@@ -67,1 +73,1 @@\n-        robot.setAutoDelay(50);\n+        robot.setAutoDelay(100);\n@@ -69,1 +75,1 @@\n-\n+        robot.delay(1000);\n@@ -74,0 +80,15 @@\n+        robot.delay(1000);\n+\n+        if (eventsCount != 3) {\n+            \/\/ We are going to fail\n+            Point loc = frame.getLocationOnScreen();\n+            GraphicsDevice gds[] = GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices();\n+            for (GraphicsDevice gd : gds) {\n+                if (gd.getDefaultConfiguration().getBounds().contains(loc)) {\n+                    BufferedImage capture = robot.createScreenCapture(gd.getDefaultConfiguration().getBounds());\n+                    File captureFile = new File(\"capture.png\");\n+                    ImageIO.write(capture, \"png\", captureFile);\n+                    break;\n+                }\n+            }\n+        }\n@@ -75,1 +96,1 @@\n-        frame.dispose();\n+        if (frame != null) frame.dispose();\n","filename":"test\/jdk\/java\/awt\/event\/KeyEvent\/KeyChar\/KeyCharTest.java","additions":29,"deletions":8,"binary":false,"changes":37,"status":"modified"}]}