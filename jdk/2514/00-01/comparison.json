{"files":[{"patch":"@@ -2601,1 +2601,1 @@\n-    Label L_doLast;\n+    Label L_doLast, L_error;\n@@ -2746,0 +2746,5 @@\n+#ifdef ASSERT\n+    __ cmpwi           (CCR0, keylen, 60);\n+    __ bne             (CCR0, L_error);\n+#endif\n+\n@@ -2767,1 +2772,0 @@\n-    \/\/ Swap Bytes\n@@ -2769,4 +2773,2 @@\n-    __ li(temp, 0);\n-    __ vspltisb(vTmp1, 0xf);\n-    __ lvsl(vTmp2, temp);\n-    __ vxor(toPerm, vTmp1, vTmp2);\n+    __ lvsl            (toPerm, keypos); \/\/ keypos is a multiple of 16\n+    __ vxor            (toPerm, toPerm, fSplt);\n@@ -2774,1 +2776,2 @@\n-    __ vperm(vRet, vRet, vRet, toPerm);\n+    \/\/ Swap Bytes\n+    __ vperm           (vRet, vRet, vRet, toPerm);\n@@ -2778,0 +2781,1 @@\n+    \/\/ Note: We can't use a read-modify-write sequence which touches additional Bytes.\n@@ -2786,0 +2790,5 @@\n+\n+#ifdef ASSERT\n+    __ bind(L_error);\n+    __ stop(\"aescrypt_encryptBlock: invalid key length\");\n+#endif\n@@ -2799,3 +2808,1 @@\n-    Label L_doLast;\n-    Label L_do44;\n-    Label L_do52;\n+    Label L_doLast, L_do44, L_do52, L_error;\n@@ -2861,0 +2868,5 @@\n+#ifdef ASSERT\n+    __ cmpwi           (CCR0, keylen, 60);\n+    __ bne             (CCR0, L_error);\n+#endif\n+\n@@ -2897,0 +2909,1 @@\n+    __ align(32);\n@@ -2923,0 +2936,1 @@\n+    __ align(32);\n@@ -3001,1 +3015,0 @@\n-    \/\/ Swap Bytes\n@@ -3003,4 +3016,2 @@\n-    __ li(temp, 0);\n-    __ vspltisb(vTmp1, 0xf);\n-    __ lvsl(vTmp2, temp);\n-    __ vxor(toPerm, vTmp1, vTmp2);\n+    __ lvsl            (toPerm, keypos); \/\/ keypos is a multiple of 16\n+    __ vxor            (toPerm, toPerm, fSplt);\n@@ -3008,1 +3019,2 @@\n-    __ vperm(vRet, vRet, vRet, toPerm);\n+    \/\/ Swap Bytes\n+    __ vperm           (vRet, vRet, vRet, toPerm);\n@@ -3012,0 +3024,1 @@\n+    \/\/ Note: We can't use a read-modify-write sequence which touches additional Bytes.\n@@ -3020,0 +3033,5 @@\n+\n+#ifdef ASSERT\n+    __ bind(L_error);\n+    __ stop(\"aescrypt_decryptBlock: invalid key length\");\n+#endif\n","filename":"src\/hotspot\/cpu\/ppc\/stubGenerator_ppc.cpp","additions":34,"deletions":16,"binary":false,"changes":50,"status":"modified"}]}