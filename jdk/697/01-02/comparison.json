{"files":[{"patch":"@@ -69,1 +69,1 @@\n-    ZArrayIteratorImpl<T, Parallel>(array->adr_at(0), (size_t)array->length()) {}\n+    ZArrayIteratorImpl<T, Parallel>(array->is_empty() ? NULL : array->adr_at(0), array->length()) {}\n","filename":"src\/hotspot\/share\/gc\/z\/zArray.inline.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+#include \"gc\/z\/zArray.hpp\"\n@@ -29,3 +30,0 @@\n-template<typename T>\n-class ZGranuleMapIterator;\n-\n@@ -35,1 +33,1 @@\n-  friend class ZGranuleMapIterator<T>;\n+  template <typename> friend class ZGranuleMapIterator;\n@@ -56,5 +54,1 @@\n-class ZGranuleMapIterator : public StackObj {\n-public:\n-  const ZGranuleMap<T>* const _map;\n-  size_t                      _next;\n-\n+class ZGranuleMapIterator : public ZArrayIteratorImpl<T, false \/* Parallel *\/> {\n@@ -62,4 +56,1 @@\n-  ZGranuleMapIterator(const ZGranuleMap<T>* map);\n-\n-  bool next(T* value);\n-  bool next(T** value);\n+  ZGranuleMapIterator(const ZGranuleMap<T>* granule_map);\n","filename":"src\/hotspot\/share\/gc\/z\/zGranuleMap.hpp","additions":4,"deletions":13,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+#include \"gc\/z\/zArray.inline.hpp\"\n@@ -89,25 +90,2 @@\n-inline ZGranuleMapIterator<T>::ZGranuleMapIterator(const ZGranuleMap<T>* map) :\n-    _map(map),\n-    _next(0) {}\n-\n-template <typename T>\n-inline bool ZGranuleMapIterator<T>::next(T* value) {\n-  if (_next < _map->_size) {\n-    *value = _map->_map[_next++];\n-    return true;\n-  }\n-\n-  \/\/ End of map\n-  return false;\n-}\n-\n-template <typename T>\n-inline bool ZGranuleMapIterator<T>::next(T** value) {\n-  if (_next < _map->_size) {\n-    *value = _map->_map + _next++;\n-    return true;\n-  }\n-\n-  \/\/ End of map\n-  return false;\n-}\n+inline ZGranuleMapIterator<T>::ZGranuleMapIterator(const ZGranuleMap<T>* granule_map) :\n+    ZArrayIteratorImpl<T, false \/* Parallel *\/>(granule_map->_map, granule_map->_size) {}\n","filename":"src\/hotspot\/share\/gc\/z\/zGranuleMap.inline.hpp","additions":3,"deletions":25,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -38,1 +38,1 @@\n-  b.transfer(&a);\n+  b.swap(&a);\n","filename":"test\/hotspot\/gtest\/gc\/z\/test_zArray.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}