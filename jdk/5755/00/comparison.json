{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,1 @@\n-class Inet4AddressImpl implements InetAddressImpl {\n+final class Inet4AddressImpl implements InetAddressImpl {\n","filename":"src\/java.base\/share\/classes\/java\/net\/Inet4AddressImpl.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -47,1 +47,1 @@\n-class Inet6AddressImpl implements InetAddressImpl {\n+final class Inet6AddressImpl implements InetAddressImpl {\n","filename":"src\/java.base\/share\/classes\/java\/net\/Inet6AddressImpl.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1671,45 +1671,0 @@\n-    \/*\n-     * Load and instantiate an underlying impl class\n-     *\/\n-    static InetAddressImpl loadImpl(String implName) {\n-        Object impl = null;\n-\n-        \/*\n-         * Property \"impl.prefix\" will be prepended to the classname\n-         * of the implementation object we instantiate, to which we\n-         * delegate the real work (like native methods).  This\n-         * property can vary across implementations of the java.\n-         * classes.  The default is an empty String \"\".\n-         *\/\n-        String prefix = GetPropertyAction.privilegedGetProperty(\"impl.prefix\", \"\");\n-        try {\n-            @SuppressWarnings(\"deprecation\")\n-            Object tmp = Class.forName(\"java.net.\" + prefix + implName).newInstance();\n-            impl = tmp;\n-        } catch (ClassNotFoundException e) {\n-            System.err.println(\"Class not found: java.net.\" + prefix +\n-                               implName + \":\\ncheck impl.prefix property \" +\n-                               \"in your properties file.\");\n-        } catch (InstantiationException e) {\n-            System.err.println(\"Could not instantiate: java.net.\" + prefix +\n-                               implName + \":\\ncheck impl.prefix property \" +\n-                               \"in your properties file.\");\n-        } catch (IllegalAccessException e) {\n-            System.err.println(\"Cannot access class: java.net.\" + prefix +\n-                               implName + \":\\ncheck impl.prefix property \" +\n-                               \"in your properties file.\");\n-        }\n-\n-        if (impl == null) {\n-            try {\n-                @SuppressWarnings(\"deprecation\")\n-                Object tmp = Class.forName(implName).newInstance();\n-                impl = tmp;\n-            } catch (Exception e) {\n-                throw new Error(\"System property impl.prefix incorrect\");\n-            }\n-        }\n-\n-        return (InetAddressImpl) impl;\n-    }\n-\n@@ -1796,2 +1751,2 @@\n-        return InetAddress.loadImpl(isIPv6Supported() ?\n-                                    \"Inet6AddressImpl\" : \"Inet4AddressImpl\");\n+        return isIPv6Supported() ?\n+                new Inet6AddressImpl() : new Inet4AddressImpl();\n","filename":"src\/java.base\/share\/classes\/java\/net\/InetAddress.java","additions":2,"deletions":47,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2005, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,1 +37,1 @@\n-interface InetAddressImpl {\n+sealed interface InetAddressImpl permits Inet4AddressImpl, Inet6AddressImpl {\n","filename":"src\/java.base\/share\/classes\/java\/net\/InetAddressImpl.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}