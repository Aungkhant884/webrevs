{"files":[{"patch":"@@ -359,2 +359,4 @@\n-                if (javaLang.members().isEmpty() && !javaLang.exists())\n-                    throw new FatalError(diags.fragment(Fragments.FatalErrNoJavaLang));\n+                if (javaLang.members().isEmpty() && !javaLang.exists()) {\n+                    log.error(Errors.NoJavaLang);\n+                    throw new Abort();\n+                }\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/TypeEnter.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1531,0 +1531,3 @@\n+compiler.err.no.java.lang=\\\n+    Unable to find package java.lang in platform classes\n+\n@@ -1535,3 +1538,0 @@\n-compiler.misc.fatal.err.no.java.lang=\\\n-    Fatal Error: Unable to find package java.lang in classpath or bootclasspath\n-\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/resources\/compiler.properties","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,3 @@\n-\/\/ key: compiler.misc.fatal.err.no.java.lang\n+\/\/ key: compiler.err.error\n+\/\/ key: compiler.err.no.java.lang\n+\/\/ key: compiler.misc.count.error\n","filename":"test\/langtools\/tools\/javac\/diags\/examples\/NoJavaLang.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 4263768 4785453\n+ * @bug 4263768 4785453 8205187\n@@ -41,1 +41,1 @@\n-public class NoJavaLangTest {\n+public class NoJavaLangTest  {\n@@ -53,1 +53,2 @@\n-        \"Fatal Error: Unable to find package java.lang in classpath or bootclasspath\";\n+        \"error: Unable to find package java.lang in platform classes\\n\" +\n+        \"1 error\";\n@@ -93,1 +94,0 @@\n-        \/\/ ideally we'd have a better message for this case\n@@ -104,1 +104,1 @@\n-                .run(Task.Expect.FAIL, 3)\n+                .run(Task.Expect.FAIL, 1)\n@@ -111,2 +111,0 @@\n-\n-        System.err.println(\"OK\");\n","filename":"test\/langtools\/tools\/javac\/fatalErrors\/NoJavaLangTest.java","additions":6,"deletions":8,"binary":false,"changes":14,"status":"modified"}]}