{"files":[{"patch":"@@ -2478,0 +2478,1 @@\n+            localEnv.info.constructorArgs = true;\n@@ -2479,0 +2480,1 @@\n+            localEnv.info.constructorArgs = false;\n@@ -4349,1 +4351,1 @@\n-                        sym.name == names._super)) {\n+                        sym.name == names._super && env.info.constructorArgs)) {\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Attr.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -56,0 +56,4 @@\n+    \/** are we analyzing the arguments for a constructor invocation?\n+     *\/\n+    boolean constructorArgs = false;\n+\n@@ -132,0 +136,1 @@\n+        info.constructorArgs = constructorArgs;\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/AttrContext.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -0,0 +1,42 @@\n+\/*\n+ * @test \/nodynamiccopyright\/\n+ * @bug 8270835\n+ * @summary regression after JDK-8261006\n+ * @compile\/fail\/ref=CantReferenceBeforeConstructorTest.out -XDrawDiagnostics CantReferenceBeforeConstructorTest.java\n+ *\/\n+\n+public class CantReferenceBeforeConstructorTest {\n+    \/\/ test case I\n+    class A extends B {\n+        A(int i) {}\n+\n+        class C extends B {\n+            class D extends S {\n+                D(float f) {\n+                    C.super.ref.super(); \/\/ ok\n+                }\n+            }\n+        }\n+    }\n+\n+    class B {\n+        B ref;\n+        class S {}\n+    }\n+\n+    \/\/ test case II\n+    class AA extends BB.CC {\n+        AA() {\n+            this.super();    \/\/ error\n+        }\n+    }\n+\n+    class BB {\n+        class CC extends BB {\n+            void m() {\n+                BB.this.f();\n+            }\n+        }\n+        void f() {}\n+    }\n+}\n","filename":"test\/langtools\/tools\/javac\/cantReferenceBeforeCtor\/CantReferenceBeforeConstructorTest.java","additions":42,"deletions":0,"binary":false,"changes":42,"status":"added"},{"patch":"@@ -0,0 +1,2 @@\n+CantReferenceBeforeConstructorTest.java:30:13: compiler.err.cant.ref.before.ctor.called: this\n+1 error\n","filename":"test\/langtools\/tools\/javac\/cantReferenceBeforeCtor\/CantReferenceBeforeConstructorTest.out","additions":2,"deletions":0,"binary":false,"changes":2,"status":"added"}]}