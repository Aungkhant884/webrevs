{"files":[{"patch":"@@ -32,0 +32,5 @@\n+import org.testng.Assert;\n+import org.testng.annotations.AfterTest;\n+import org.testng.annotations.BeforeTest;\n+import org.testng.annotations.DataProvider;\n+import org.testng.annotations.Test;\n@@ -37,0 +42,1 @@\n+ * @run testng ReadIntoZeroLengthArray\n@@ -39,2 +45,1 @@\n-    private static char[] cbuf0 = new char[0];\n-    private static char[] cbuf1 = new char[1];\n+    private File file;\n@@ -42,3 +47,2 @@\n-    public static void main(String[] args) throws Exception {\n-        File file = File.createTempFile(\"foo\", \"bar\", new File(\".\"));\n-        file.deleteOnExit();\n+    private char[] cbuf0;\n+    private char[] cbuf1;\n@@ -46,0 +50,14 @@\n+    @BeforeTest\n+    public void setup() throws IOException {\n+        file = File.createTempFile(\"foo\", \"bar\", new File(\".\"));\n+        cbuf0 = new char[0];\n+        cbuf1 = new char[1];\n+    }\n+\n+    @AfterTest\n+    public void teardown() throws IOException {\n+        file.delete();\n+    }\n+\n+    @DataProvider(name = \"readers\")\n+    public Object[][] getReaders() throws IOException {\n@@ -47,6 +65,6 @@\n-        Reader[] readers = new Reader[] {\n-            new LineNumberReader(fileReader),\n-            new CharArrayReader(new char[] {27}),\n-            new PushbackReader(fileReader),\n-            fileReader,\n-            new StringReader(new String(new byte[] {(byte)42}))\n+        return new Object[][] {\n+            {new LineNumberReader(fileReader)},\n+            {new CharArrayReader(new char[] {27})},\n+            {new PushbackReader(fileReader)},\n+            {fileReader},\n+            {new StringReader(new String(new byte[] {(byte)42}))}\n@@ -54,0 +72,1 @@\n+    }\n@@ -55,5 +74,3 @@\n-        for (Reader reader : readers) {\n-            check(reader);\n-        }\n-\n-        System.out.println(\"Test succeeded\");\n+    @Test(dataProvider = \"readers\")\n+    void test0(Reader r) throws IOException {\n+        Assert.assertEquals(r.read(cbuf0), 0);\n@@ -62,6 +79,3 @@\n-    private static void check(Reader r) throws IOException {\n-        System.out.printf(\"Testing %s%n\", r.getClass().getName());\n-        if (r.read(cbuf0) != 0)\n-            throw new RuntimeException();\n-        if (r.read(cbuf1, 0, 0) !=  0)\n-            throw new RuntimeException();\n+    @Test(dataProvider = \"readers\")\n+    void test1(Reader r) throws IOException {\n+        Assert.assertEquals(r.read(cbuf1, 0, 0), 0);\n","filename":"test\/jdk\/java\/io\/Reader\/ReadIntoZeroLengthArray.java","additions":36,"deletions":22,"binary":false,"changes":58,"status":"modified"}]}