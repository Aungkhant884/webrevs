{"files":[{"patch":"@@ -32,2 +32,4 @@\n-import java.text.ParseException;\n-import java.text.SimpleDateFormat;\n+import java.time.LocalDateTime;\n+import java.time.ZoneOffset;\n+import java.time.format.DateTimeFormatter;\n+import java.time.format.DateTimeParseException;\n@@ -40,1 +42,0 @@\n-import java.util.TimeZone;\n@@ -1742,13 +1743,1 @@\n-    private static final SimpleDateFormat[] dateFormats;\n-\n-    static {\n-        String[] formats = {\n-            \"yyyyMMddHHmmss.SSS\",\n-            \"yyyyMMddHHmmss\"\n-        };\n-        dateFormats = new SimpleDateFormat[formats.length];\n-        for (int i = 0; i < formats.length; ++i) {\n-            dateFormats[i] = new SimpleDateFormat(formats[i]);\n-            dateFormats[i].setTimeZone(TimeZone.getTimeZone(\"GMT\"));\n-        }\n-    }\n+    private static final DateTimeFormatter RFC3659_DATETIME_FORMAT = DateTimeFormatter.ofPattern(\"yyyyMMddHHmmss[.SSS]\");\n@@ -1771,2 +1760,2 @@\n-            String s = getResponseString().substring(4);\n-            return parseRfc3659TimeValue(s);\n+            String s = getResponseString();\n+            return parseRfc3659TimeValue(s.substring(4, s.length() - 1));\n@@ -1777,10 +1766,6 @@\n-    private static synchronized Date parseRfc3659TimeValue(String s) {\n-        Date d = null;\n-        for (SimpleDateFormat dateFormat : dateFormats) {\n-            try {\n-                d = dateFormat.parse(s);\n-            } catch (ParseException ex) {\n-            }\n-            if (d != null) {\n-                return d;\n-            }\n+    private static Date parseRfc3659TimeValue(String s) {\n+        Date result = null;\n+        try {\n+            var d = LocalDateTime.parse(s, RFC3659_DATETIME_FORMAT);\n+            result = Date.from(d.atZone(ZoneOffset.systemDefault()).toInstant());\n+        } catch (DateTimeParseException ex) {\n@@ -1788,1 +1773,1 @@\n-        return d;\n+        return result;\n","filename":"src\/java.base\/share\/classes\/sun\/net\/ftp\/impl\/FtpClient.java","additions":14,"deletions":29,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -64,1 +64,1 @@\n-            var s = String.format(\"%4d%2d%2d%2d%2d%2d\", year, month, day, hrs, min, sec);\n+            var s = String.format(\"%4d%02d%02d%02d%02d%02d\", year, month, day, hrs, min, sec);\n@@ -66,1 +66,1 @@\n-                s += \".\" + String.format(\"%3d\", milliseconds);\n+                s += \".\" + String.format(\"%03d\", milliseconds);\n@@ -72,1 +72,1 @@\n-            s = String.format(\"%4d%2d%2d%2d%2d%2d\", year, month, day, hrs, min, sec + 1);\n+            s = String.format(\"%4d%02d%02d%02d%02d%02d\", year, month, day, hrs, min, sec + 1);\n@@ -74,1 +74,1 @@\n-                s += \".\" + String.format(\"%3d\", milliseconds);\n+                s += \".\" + String.format(\"%03d\", milliseconds);\n","filename":"test\/jdk\/sun\/net\/ftp\/TestFtpTimeValue.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}