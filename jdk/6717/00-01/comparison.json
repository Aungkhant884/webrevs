{"files":[{"patch":"@@ -800,1 +800,1 @@\n-    if (is_reference_type(src_elem) || src_elem == T_NARROWOOP) {\n+    if (is_reference_type(src_elem, true)) {\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/c2\/shenandoahBarrierSetC2.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -276,2 +276,2 @@\n-    if (is_reference_type(src_elem) || src_elem == T_NARROWOOP) src_elem = T_OBJECT;\n-    if (is_reference_type(dest_elem) || dest_elem == T_NARROWOOP) dest_elem = T_OBJECT;\n+    if (is_reference_type(src_elem, true)) src_elem = T_OBJECT;\n+    if (is_reference_type(dest_elem, true)) dest_elem = T_OBJECT;\n@@ -323,1 +323,1 @@\n-    if (is_reference_type(elem) || elem == T_NARROWOOP) {\n+    if (is_reference_type(elem, true)) {\n@@ -725,1 +725,1 @@\n-  if (ary_elem == T_ARRAY || ary_elem == T_NARROWOOP) ary_elem = T_OBJECT;\n+  if (is_reference_type(ary_elem, true)) ary_elem = T_OBJECT;\n","filename":"src\/hotspot\/share\/opto\/arraycopynode.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -3632,1 +3632,1 @@\n-        if (elem == T_ARRAY || elem == T_NARROWOOP) {\n+        if (is_reference_type(elem, true)) {\n@@ -3987,2 +3987,2 @@\n-  if (ary_type->klass()->is_array_klass()) {\n-    BasicType bt = ary_type->klass()->as_array_klass()->element_type()->basic_type();\n+  if (ary_type->isa_aryptr()) {\n+    BasicType bt = ary_type->isa_aryptr()->elem()->array_element_basic_type();\n","filename":"src\/hotspot\/share\/opto\/graphKit.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -494,1 +494,1 @@\n-      if (toop->is_interface() || tkls->is_interface()) {\n+      if ((toop != NULL && toop->is_interface()) || (tkls != NULL && tkls->is_interface())) {\n","filename":"src\/hotspot\/share\/opto\/idealGraphPrinter.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2358,1 +2358,1 @@\n-    if (bt == T_ARRAY || bt == T_NARROWOOP) {\n+    if (is_reference_type(bt, true)) {\n@@ -4700,2 +4700,2 @@\n-    if (is_reference_type(src_elem) || src_elem == T_NARROWOOP) src_elem = T_OBJECT;\n-    if (is_reference_type(dest_elem) || dest_elem == T_NARROWOOP) dest_elem = T_OBJECT;\n+    if (is_reference_type(src_elem, true)) src_elem = T_OBJECT;\n+    if (is_reference_type(dest_elem, true)) dest_elem = T_OBJECT;\n","filename":"src\/hotspot\/share\/opto\/library_call.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -685,1 +685,1 @@\n-  const Type *field_type = NULL;\n+  const Type* field_type = NULL;\n@@ -744,1 +744,0 @@\n-            \/\/ This can happen if the constant oop is non-perm.\n@@ -1689,1 +1688,1 @@\n-      if (elem == T_ARRAY || elem == T_NARROWOOP) {\n+      if (is_reference_type(elem, true)) {\n","filename":"src\/hotspot\/share\/opto\/macro.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -1301,2 +1301,2 @@\n-  if (is_reference_type(src_elem) || src_elem == T_NARROWOOP) src_elem = T_OBJECT;\n-  if (is_reference_type(dest_elem) || dest_elem == T_NARROWOOP) dest_elem = T_OBJECT;\n+  if (is_reference_type(src_elem, true)) src_elem = T_OBJECT;\n+  if (is_reference_type(dest_elem, true)) dest_elem = T_OBJECT;\n","filename":"src\/hotspot\/share\/opto\/macroArrayCopy.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1019,1 +1019,1 @@\n-      if (ary_elem == T_ARRAY || ary_elem == T_NARROWOOP) ary_elem = T_OBJECT;\n+      if (is_reference_type(ary_elem, true)) ary_elem = T_OBJECT;\n","filename":"src\/hotspot\/share\/opto\/memnode.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -716,2 +716,2 @@\n-inline bool is_reference_type(BasicType t) {\n-  return (t == T_OBJECT || t == T_ARRAY);\n+inline bool is_reference_type(BasicType t, bool include_narrow_oop = false) {\n+  return (t == T_OBJECT || t == T_ARRAY || (include_narrow_oop && t == T_NARROWOOP));\n","filename":"src\/hotspot\/share\/utilities\/globalDefinitions.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}