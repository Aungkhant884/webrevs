{"files":[{"patch":"@@ -142,2 +142,4 @@\n-        for (int i = 0; i < 3 * 1024; i++)\n-            Files.write(sourceFile, createRandomBytes(1024 * 1024, 0), StandardOpenOption.APPEND);\n+        int NUM_WRITES = 3 * 1024;\n+        int BYTES_PER_WRITE = 1024 * 1024;\n+        for (int i = 0; i < NUM_WRITES; i++)\n+            Files.write(sourceFile, createRandomBytes(BYTES_PER_WRITE, 0), StandardOpenOption.APPEND);\n@@ -146,3 +148,5 @@\n-        InputStream inputStream = Channels.newInputStream(FileChannel.open(sourceFile));\n-        OutputStream outputStream = Channels.newOutputStream(FileChannel.open(targetFile, StandardOpenOption.WRITE));\n-        long count = inputStream.transferTo(outputStream);\n+        long count;\n+        try (InputStream inputStream = Channels.newInputStream(FileChannel.open(sourceFile));\n+        OutputStream outputStream = Channels.newOutputStream(FileChannel.open(targetFile, StandardOpenOption.WRITE))) {\n+            count = inputStream.transferTo(outputStream);\n+        }\n@@ -151,1 +155,1 @@\n-        assertEquals(count, 3L * 1024 * 1024 * 1024);\n+        assertEquals(count, (long) NUM_WRITES * BYTES_PER_WRITE);\n","filename":"test\/jdk\/java\/nio\/channels\/Channels\/TransferTo.java","additions":10,"deletions":6,"binary":false,"changes":16,"status":"modified"}]}