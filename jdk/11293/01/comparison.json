{"files":[{"patch":"@@ -1500,0 +1500,2 @@\n+  size_t unlinked_count = 0;\n+  size_t deleted_count = 0;\n@@ -1509,2 +1511,1 @@\n-    size_t unlinked_count = _in_use_list.unlink_deflated(current, ls, &timer,\n-                                                         &delete_list);\n+    unlinked_count = _in_use_list.unlink_deflated(current, ls, &timer, &delete_list);\n@@ -1536,1 +1537,0 @@\n-    size_t deleted_count = 0;\n@@ -1547,0 +1547,1 @@\n+    assert(unlinked_count == deleted_count, \"must be\");\n@@ -1551,3 +1552,3 @@\n-    if (deflated_count != 0 || log_is_enabled(Debug, monitorinflation)) {\n-      ls->print_cr(\"deflated \" SIZE_FORMAT \" monitors in %3.7f secs\",\n-                   deflated_count, timer.seconds());\n+    if (deflated_count != 0 || unlinked_count != 0 || log_is_enabled(Debug, monitorinflation)) {\n+      ls->print_cr(\"deflated_count=\" SIZE_FORMAT \", {unlinked,deleted}_count=\" SIZE_FORMAT \" monitors in %3.7f secs\",\n+                   deflated_count, unlinked_count, timer.seconds());\n@@ -1662,0 +1663,1 @@\n+  log_info(monitorinflation)(\"Starting the final audit.\");\n@@ -1664,1 +1666,1 @@\n-    \/\/ Do a deflation in order to reduce the in-use monitor population\n+    \/\/ Do deflations in order to reduce the in-use monitor population\n@@ -1667,1 +1669,1 @@\n-    while (ObjectSynchronizer::deflate_idle_monitors(\/* ObjectMonitorsHashtable is not needed here *\/ nullptr) >= (size_t)MonitorDeflationMax) {\n+    while (deflate_idle_monitors(\/* ObjectMonitorsHashtable is not needed here *\/ nullptr) > 0) {\n@@ -1672,1 +1674,1 @@\n-    ObjectSynchronizer::audit_and_print_stats(true \/* on_exit *\/);\n+    audit_and_print_stats(true \/* on_exit *\/);\n","filename":"src\/hotspot\/share\/runtime\/synchronizer.cpp","additions":11,"deletions":9,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -290,1 +290,1 @@\n-    while (ObjectSynchronizer::deflate_idle_monitors(tablep) >= (size_t)MonitorDeflationMax) {\n+    while (ObjectSynchronizer::deflate_idle_monitors(tablep) > 0) {\n","filename":"src\/hotspot\/share\/runtime\/vmOperations.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}