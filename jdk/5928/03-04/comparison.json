{"files":[{"patch":"@@ -140,8 +140,1 @@\n-            if (anchor.getTrustedCert() != null) {\n-                this.trustedPubKey = anchor.getTrustedCert().getPublicKey();\n-            } else {\n-                this.trustedPubKey = anchor.getCAPublicKey();\n-            }\n-            this.anchor = anchor;\n-        } else {\n-            this.trustedPubKey = null;\n+            setTrustAnchorAndKeys(anchor);\n@@ -150,1 +143,0 @@\n-        this.prevPubKey = this.trustedPubKey;\n@@ -343,0 +335,14 @@\n+    \/**\n+     * Sets the anchor, trustedPubKey and prevPubKey fields based on the\n+     * specified trust anchor.\n+     *\/\n+    private void setTrustAnchorAndKeys(TrustAnchor anchor) {\n+        if (anchor.getTrustedCert() != null) {\n+            this.trustedPubKey = anchor.getTrustedCert().getPublicKey();\n+        } else {\n+            this.trustedPubKey = anchor.getCAPublicKey();\n+        }\n+        this.anchor = anchor;\n+        this.prevPubKey = this.trustedPubKey;\n+    }\n+\n@@ -353,2 +359,1 @@\n-        \/\/ Don't bother if the check has started or trust anchor has already\n-        \/\/ been specified.\n+        \/\/ Only set if trust anchor has not already been set.\n@@ -356,7 +361,1 @@\n-            if (anchor.getTrustedCert() != null) {\n-                this.trustedPubKey = anchor.getTrustedCert().getPublicKey();\n-            } else {\n-                this.trustedPubKey = anchor.getCAPublicKey();\n-            }\n-            this.prevPubKey = this.trustedPubKey;\n-            this.anchor = anchor;\n+            setTrustAnchorAndKeys(anchor);\n","filename":"src\/java.base\/share\/classes\/sun\/security\/provider\/certpath\/AlgorithmChecker.java","additions":17,"deletions":18,"binary":false,"changes":35,"status":"modified"}]}