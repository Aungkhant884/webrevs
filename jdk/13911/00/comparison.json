{"files":[{"patch":"@@ -221,27 +221,0 @@\n-\n-        \/\/ following two tests:\n-        \/\/   -Xshare:auto -XX:SharedArchiveFile=top.jsa, but base does not exist.\n-\n-      if (!isUseSharedSpacesDisabled()) {\n-        new File(baseArchiveName).delete();\n-\n-        startTest(\"11. -XX:+AutoCreateSharedArchive -XX:SharedArchiveFile=\" + topArchiveName);\n-        run(topArchiveName,\n-            \"-Xshare:auto\",\n-            \"-XX:+AutoCreateSharedArchive\",\n-            \"-cp\",\n-            appJar, mainClass)\n-            .assertNormalExit(output -> {\n-                output.shouldContain(\"warning: -XX:+AutoCreateSharedArchive is unsupported when base CDS archive is not loaded\");\n-            });\n-\n-        startTest(\"12. -XX:SharedArchiveFile=\" + topArchiveName + \" -XX:ArchiveClassesAtExit=\" + getNewArchiveName(\"top3\"));\n-        run(topArchiveName,\n-            \"-Xshare:auto\",\n-            \"-XX:ArchiveClassesAtExit=\" + getNewArchiveName(\"top3\"),\n-            \"-cp\",\n-            appJar, mainClass)\n-            .assertNormalExit(output -> {\n-                output.shouldContain(\"-XX:ArchiveClassesAtExit is unsupported when base CDS archive is not loaded\");\n-            });\n-      }\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/dynamicArchive\/ArchiveConsistency.java","additions":0,"deletions":27,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -231,0 +231,24 @@\n+\n+            \/\/ following two tests:\n+            \/\/   -Xshare:auto -XX:SharedArchiveFile=top.jsa, but base does not exist.\n+            if (!isUseSharedSpacesDisabled()) {\n+                new File(baseArchiveName).delete();\n+                testcase(\"Archive not loaded -XX:+AutoCreateSharedArchive -XX:SharedArchiveFile=\" + topArchiveName);\n+                run(topArchiveName,\n+                    \"-Xshare:auto\",\n+                    \"-XX:+AutoCreateSharedArchive\",\n+                    \"-cp\",\n+                    appJar, mainClass)\n+                    .assertNormalExit(output -> {\n+                        output.shouldContain(\"warning: -XX:+AutoCreateSharedArchive is unsupported when base CDS archive is not loaded\");\n+                    });\n+                testcase(\"Archive not loaded -XX:SharedArchiveFile=\" + topArchiveName + \" -XX:ArchiveClassesAtExit=\" + getNewArchiveName(\"top3\"));\n+                run(topArchiveName,\n+                    \"-Xshare:auto\",\n+                    \"-XX:ArchiveClassesAtExit=\" + getNewArchiveName(\"top3\"),\n+                    \"-cp\",\n+                    appJar, mainClass)\n+                    .assertNormalExit(output -> {\n+                        output.shouldContain(ERROR);\n+                    });\n+            }\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/dynamicArchive\/SharedArchiveFileOption.java","additions":24,"deletions":0,"binary":false,"changes":24,"status":"modified"}]}