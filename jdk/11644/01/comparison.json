{"files":[{"patch":"@@ -83,0 +83,7 @@\n+    \/**\n+     * A local buffer that allows reading and writing of\n+     * longer primitive parameters (e.g. long) to be performed\n+     * using bulk operations rather than on a per-byte basis.\n+     *\/\n+    private final byte[] buffer = new byte[Long.BYTES];\n+\n@@ -812,5 +819,1 @@\n-        int ch1 = this.read();\n-        int ch2 = this.read();\n-        if ((ch1 | ch2) < 0)\n-            throw new EOFException();\n-        return (short)((ch1 << 8) + (ch2 << 0));\n+        return (short)readUnsignedShort();\n@@ -840,5 +843,3 @@\n-        int ch1 = this.read();\n-        int ch2 = this.read();\n-        if ((ch1 | ch2) < 0)\n-            throw new EOFException();\n-        return (ch1 << 8) + (ch2 << 0);\n+        readFully(buffer, 0, Short.BYTES);\n+        return  ((buffer[0] & 0xff) <<  8) +\n+                ((buffer[1] & 0xff)      );\n@@ -868,5 +869,1 @@\n-        int ch1 = this.read();\n-        int ch2 = this.read();\n-        if ((ch1 | ch2) < 0)\n-            throw new EOFException();\n-        return (char)((ch1 << 8) + (ch2 << 0));\n+        return (char)readUnsignedShort();\n@@ -896,7 +893,5 @@\n-        int ch1 = this.read();\n-        int ch2 = this.read();\n-        int ch3 = this.read();\n-        int ch4 = this.read();\n-        if ((ch1 | ch2 | ch3 | ch4) < 0)\n-            throw new EOFException();\n-        return ((ch1 << 24) + (ch2 << 16) + (ch3 << 8) + (ch4 << 0));\n+        readFully(buffer, 0, Integer.BYTES);\n+        return (int)(((long)(buffer[0] & 0xff) << 24) +\n+                           ((buffer[1] & 0xff) << 16) +\n+                           ((buffer[2] & 0xff) <<  8) +\n+                           ((buffer[3] & 0xff)      ));\n@@ -934,1 +929,10 @@\n-        return ((long)(readInt()) << 32) + (readInt() & 0xFFFFFFFFL);\n+        readFully(buffer, 0, Long.BYTES);\n+        return (((long)(buffer[0]       ) << 56) +\n+                ((long)(buffer[1] & 0xff) << 48) +\n+                ((long)(buffer[2] & 0xff) << 40) +\n+                ((long)(buffer[3] & 0xff) << 32) +\n+                ((long)(buffer[4] & 0xff) << 24) +\n+                (      (buffer[5] & 0xff) << 16) +\n+                (      (buffer[6] & 0xff) <<  8) +\n+                (      (buffer[7] & 0xff)      ));\n+\n@@ -1096,2 +1100,3 @@\n-        write((v >>> 8) & 0xFF);\n-        write((v >>> 0) & 0xFF);\n+        buffer[0] = (byte)(v >>>  8);\n+        buffer[1] = (byte)(v       );\n+        write(buffer, 0, Short.BYTES);\n@@ -1110,3 +1115,1 @@\n-        write((v >>> 8) & 0xFF);\n-        write((v >>> 0) & 0xFF);\n-        \/\/written += 2;\n+        writeShort(v);\n@@ -1123,4 +1126,5 @@\n-        write((v >>> 24) & 0xFF);\n-        write((v >>> 16) & 0xFF);\n-        write((v >>>  8) & 0xFF);\n-        write((v >>>  0) & 0xFF);\n+        buffer[0] = (byte)(v >>> 24);\n+        buffer[1] = (byte)(v >>> 16);\n+        buffer[2] = (byte)(v >>>  8);\n+        buffer[3] = (byte)(v       );\n+        write(buffer, 0, Integer.BYTES);\n@@ -1138,8 +1142,9 @@\n-        write((int)(v >>> 56) & 0xFF);\n-        write((int)(v >>> 48) & 0xFF);\n-        write((int)(v >>> 40) & 0xFF);\n-        write((int)(v >>> 32) & 0xFF);\n-        write((int)(v >>> 24) & 0xFF);\n-        write((int)(v >>> 16) & 0xFF);\n-        write((int)(v >>>  8) & 0xFF);\n-        write((int)(v >>>  0) & 0xFF);\n+        buffer[0] = (byte)(v >>> 56);\n+        buffer[1] = (byte)(v >>> 48);\n+        buffer[2] = (byte)(v >>> 40);\n+        buffer[3] = (byte)(v >>> 32);\n+        buffer[4] = (byte)(v >>> 24);\n+        buffer[5] = (byte)(v >>> 16);\n+        buffer[6] = (byte)(v >>>  8);\n+        buffer[7] = (byte)(v       );\n+        write(buffer, 0, Long.BYTES);\n","filename":"src\/java.base\/share\/classes\/java\/io\/RandomAccessFile.java","additions":45,"deletions":40,"binary":false,"changes":85,"status":"modified"},{"patch":"@@ -32,1 +32,0 @@\n-import java.io.IOException;\n@@ -35,1 +34,0 @@\n-import java.io.RandomAccessFile;\n","filename":"test\/jdk\/java\/io\/File\/Basic.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"}]}