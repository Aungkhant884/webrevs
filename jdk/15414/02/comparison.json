{"files":[{"patch":"@@ -68,0 +68,2 @@\n+    private static final int MAX_JSTATD_TRIES = 10;\n+\n@@ -285,1 +287,1 @@\n-                JstatdTest::isJstadReady, getJstatdCmd());\n+                JstatdTest::isJstatdReady, getJstatdCmd());\n@@ -305,2 +307,2 @@\n-    private static boolean isJstadReady(String line) {\n-        if (line.contains(\"Port already in use\")) {\n+    private static boolean isJstatdReady(String line) {\n+        if (line.contains(\"Port already in use\") || line.contains(\"Could not bind\")) {\n@@ -325,0 +327,1 @@\n+        int tries = 0;\n@@ -326,1 +329,1 @@\n-            while (jstatdThread == null) {\n+            while (jstatdThread == null && ++tries <= MAX_JSTATD_TRIES) {\n@@ -342,1 +345,0 @@\n-\n@@ -345,1 +347,3 @@\n-\n+            if (jstatdThread == null) {\n+                throw new RuntimeException(\"Cannot start jstatd.\");\n+            }\n","filename":"test\/jdk\/sun\/tools\/jstatd\/JstatdTest.java","additions":10,"deletions":6,"binary":false,"changes":16,"status":"modified"}]}