{"files":[{"patch":"@@ -28,10 +28,0 @@\n-import java.awt.AWTError;\n-import java.awt.Font;\n-import java.awt.GraphicsEnvironment;\n-import java.awt.Toolkit;\n-import java.security.AccessController;\n-import java.security.PrivilegedAction;\n-\n-import sun.security.action.GetPropertyAction;\n-\n-\n@@ -47,1 +37,1 @@\n-    private static FontManager instance = null;\n+    private static volatile FontManager instance = null;\n@@ -54,2 +44,1 @@\n-    @SuppressWarnings(\"removal\")\n-    public static synchronized FontManager getInstance() {\n+    public static FontManager getInstance() {\n@@ -58,1 +47,5 @@\n-            instance = PlatformFontInfo.createFontManager();\n+            synchronized (FontManagerFactory.class) {\n+                if (instance == null) {\n+                    instance = PlatformFontInfo.createFontManager();\n+                }\n+            }\n","filename":"src\/java.desktop\/share\/classes\/sun\/font\/FontManagerFactory.java","additions":7,"deletions":14,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+ * @run main\/othervm -Djava.awt.headless=true CheckFontManagerSystemProperty\n","filename":"test\/jdk\/sun\/awt\/font\/CheckFontManagerSystemProperty.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}