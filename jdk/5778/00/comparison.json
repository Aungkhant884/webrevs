{"files":[{"patch":"@@ -38,1 +38,0 @@\n-import java.security.cert.TrustAnchor;\n@@ -49,1 +48,0 @@\n-import sun.security.validator.Validator;\n@@ -169,0 +167,1 @@\n+        String responder = responderURI.toString();\n@@ -171,1 +170,1 @@\n-            debug.println(\"connecting to OCSP service at: \" + responderURI);\n+            debug.println(\"connecting to OCSP service at: \" + responder);\n@@ -174,1 +173,1 @@\n-                responderURI.toString());\n+                responder);\n@@ -179,3 +178,6 @@\n-            String encodedGetReq = responderURI.toString() + \"\/\" +\n-                    URLEncoder.encode(Base64.getEncoder().encodeToString(bytes),\n-                                      UTF_8);\n+            StringBuilder encodedGetReq = new StringBuilder(responder);\n+            if (!responder.endsWith(\"\/\")) {\n+                encodedGetReq.append(\"\/\");\n+            }\n+            encodedGetReq.append(URLEncoder.encode(\n+                    Base64.getEncoder().encodeToString(bytes), UTF_8));\n@@ -184,1 +186,1 @@\n-                url = new URL(encodedGetReq);\n+                url = new URL(encodedGetReq.toString());\n","filename":"src\/java.base\/share\/classes\/sun\/security\/provider\/certpath\/OCSP.java","additions":10,"deletions":8,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -641,1 +641,4 @@\n-            respSignature.initVerify(cert.getPublicKey());\n+            SignatureUtil.initVerifyWithParam(respSignature,\n+                    cert.getPublicKey(),\n+                    SignatureUtil.getParamSpec(sigAlgId.getName(),\n+                            sigAlgId.getEncodedParams()));\n@@ -657,2 +660,2 @@\n-        } catch (InvalidKeyException | NoSuchAlgorithmException |\n-                 SignatureException e)\n+        } catch (InvalidAlgorithmParameterException | InvalidKeyException\n+                | NoSuchAlgorithmException | SignatureException e)\n","filename":"src\/java.base\/share\/classes\/sun\/security\/provider\/certpath\/OCSPResponse.java","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -173,2 +173,1 @@\n-            throws ProviderException, InvalidAlgorithmParameterException,\n-            InvalidKeyException {\n+            throws InvalidAlgorithmParameterException, InvalidKeyException {\n@@ -183,2 +182,1 @@\n-            throws ProviderException, InvalidAlgorithmParameterException,\n-            InvalidKeyException {\n+            throws InvalidAlgorithmParameterException, InvalidKeyException {\n","filename":"src\/java.base\/share\/classes\/sun\/security\/util\/SignatureUtil.java","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -315,1 +315,1 @@\n-    public byte[] getEncodedParams() throws IOException {\n+    public byte[] getEncodedParams() {\n","filename":"src\/java.base\/share\/classes\/sun\/security\/x509\/AlgorithmId.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -823,7 +823,1 @@\n-        if (sigAlgId == null)\n-            return null;\n-        try {\n-            return sigAlgId.getEncodedParams();\n-        } catch (IOException e) {\n-            return null;\n-        }\n+        return sigAlgId == null ? null : sigAlgId.getEncodedParams();\n","filename":"src\/java.base\/share\/classes\/sun\/security\/x509\/X509CRLImpl.java","additions":2,"deletions":8,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -1033,7 +1033,1 @@\n-        if (algId == null)\n-            return null;\n-        try {\n-            return algId.getEncodedParams();\n-        } catch (IOException e) {\n-            return null;\n-        }\n+        return algId == null ? null : algId.getEncodedParams();\n","filename":"src\/java.base\/share\/classes\/sun\/security\/x509\/X509CertImpl.java","additions":1,"deletions":7,"binary":false,"changes":8,"status":"modified"}]}