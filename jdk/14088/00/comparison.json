{"files":[{"patch":"@@ -27,0 +27,1 @@\n+ * @bug 8307205\n@@ -43,0 +44,1 @@\n+import java.util.Optional;\n@@ -52,0 +54,2 @@\n+import static java.lang.foreign.ValueLayout.ADDRESS;\n+import static java.lang.foreign.ValueLayout.JAVA_INT;\n@@ -137,0 +141,18 @@\n+    \/\/ 8307205\n+    @Test\n+    void testVariadic() throws Throwable {\n+\n+        Optional<MemorySegment> optPrintfMS = abi.defaultLookup().find(\"printf\");\n+        MemorySegment printfMS = optPrintfMS.orElseThrow();\n+        MethodHandle printf = abi.downcallHandle(printfMS,\n+                FunctionDescriptor.of(JAVA_INT, ADDRESS, JAVA_INT),\n+                Linker.Option.firstVariadicArg(1));\n+\n+        int version = Integer.getInteger(\"java.specification.version\");\n+        try(Arena offHeap = Arena.ofConfined()) {\n+            MemorySegment formatStr = offHeap.allocateUtf8String(\"Java FFM call to printf %d\\n\");\n+            int rtn = (int) printf.invoke(formatStr, version);\n+            assertEquals(27, rtn);\n+        }\n+    }\n+\n","filename":"test\/jdk\/java\/foreign\/StdLibTest.java","additions":22,"deletions":0,"binary":false,"changes":22,"status":"modified"}]}