{"files":[{"patch":"@@ -1026,1 +1026,1 @@\n-    \/\/ Collect threads from except_list for which resumed status must be restored.\n+    \/\/ Collect threads from except_list for which resumed status must be restored (only for VirtualThread case)\n@@ -1030,1 +1030,1 @@\n-      if (!JvmtiVTSuspender::is_vthread_suspended(thread_oop)) {\n+      if (java_lang_VirtualThread::is_instance(thread_oop) && !JvmtiVTSuspender::is_vthread_suspended(thread_oop)) {\n@@ -1045,1 +1045,1 @@\n-            java_thread->is_bound_vthread()) &&\n+            (java_thread->is_bound_vthread() && !java_thread->is_suspended())) &&\n@@ -1137,1 +1137,1 @@\n-  \/\/ Collect threads from except_list for which suspended status must be restored.\n+  \/\/ Collect threads from except_list for which suspended status must be restored (only for VirtualThread case)\n@@ -1141,1 +1141,1 @@\n-    if (JvmtiVTSuspender::is_vthread_suspended(thread_oop)) {\n+    if (java_lang_VirtualThread::is_instance(thread_oop) && JvmtiVTSuspender::is_vthread_suspended(thread_oop)) {\n@@ -1156,1 +1156,1 @@\n-          java_thread->is_bound_vthread()) &&\n+          (java_thread->is_bound_vthread() && java_thread->is_suspended())) &&\n","filename":"src\/hotspot\/share\/prims\/jvmtiEnv.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"}]}