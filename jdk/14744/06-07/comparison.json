{"files":[{"patch":"@@ -322,1 +322,1 @@\n-            flags  = (initFlags & allModifiersMask) | (flags & (~allModifiersMask));\n+            flags = (initFlags & allModifiersMask) | (flags & (~allModifiersMask));\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/CRobot.m","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -64,1 +64,0 @@\n-    private static boolean testStarted = false;\n@@ -91,1 +90,0 @@\n-            testStarted = !isManual;\n@@ -99,8 +97,13 @@\n-                countDownLatch = new CountDownLatch(1);\n-                invokeAndWait(RobotModifierMaskTest::createInstructionsUI);\n-                robot.waitForIdle();\n-                countDownLatch.await(2, TimeUnit.MINUTES);\n-            }\n-\n-            if (!testStarted) {\n-                throw new RuntimeException(\"Test Failed: Manual test timed out!!\");\n+                try {\n+                    countDownLatch = new CountDownLatch(1);\n+                    invokeAndWait(RobotModifierMaskTest::createInstructionsUI);\n+                    if (!countDownLatch.await(2, TimeUnit.MINUTES)) {\n+                        throw new RuntimeException(\"Test failed: Manual test timed out!!\");\n+                    }\n+                } finally {\n+                    invokeAndWait(() -> {\n+                        if (jFrame != null) {\n+                            jFrame.dispose();\n+                        }\n+                    });\n+                }\n@@ -231,4 +234,1 @@\n-        jButton.addActionListener(e -> {\n-            testStarted = true;\n-            countDownLatch.countDown();\n-        });\n+        jButton.addActionListener(e -> countDownLatch.countDown());\n@@ -239,1 +239,1 @@\n-        jFrame.addWindowListener(new CustomWindowAdapter());\n+        jFrame.addWindowListener(new CloseWindowHandler());\n@@ -253,1 +253,1 @@\n-        jFrame.addWindowListener(new CustomWindowAdapter());\n+        jFrame.addWindowListener(new CloseWindowHandler());\n@@ -277,1 +277,1 @@\n-    private static class CustomWindowAdapter extends WindowAdapter {\n+    private static class CloseWindowHandler extends WindowAdapter {\n","filename":"test\/jdk\/java\/awt\/Robot\/RobotModifierMaskTest.java","additions":17,"deletions":17,"binary":false,"changes":34,"status":"modified"}]}