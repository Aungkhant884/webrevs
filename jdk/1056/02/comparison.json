{"files":[{"patch":"@@ -134,1 +134,3 @@\n-                sdEvent.setStandalone(streamReader.isStandalone());\n+                if (streamReader.standaloneSet()) {\n+                    sdEvent.setStandalone(streamReader.isStandalone());\n+                }\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/xml\/internal\/stream\/events\/XMLEventAllocatorImpl.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -0,0 +1,44 @@\n+import org.testng.annotations.Test;\n+\n+import javax.xml.stream.XMLStreamException;\n+import javax.xml.stream.XMLInputFactory;\n+import javax.xml.stream.events.StartDocument;\n+\n+import java.io.StringReader;\n+\n+import static org.testng.Assert.assertFalse;\n+import static org.testng.Assert.assertTrue;\n+\n+\/*\n+ * @test\n+ * @modules java.xml\n+ * @run testng\/othervm XmlInputFactoryTest\n+ *\n+ *\/\n+@Test\n+public class XmlInputFactoryTest {\n+\n+    @Test\n+    void startDocumentEvent_standaloneSet() throws XMLStreamException {\n+        var factory = XMLInputFactory.newInstance();\n+        var xml = \"\"\"\n+                <?xml version=\"1.0\"?>\"\"\";\n+        var reader = factory.createXMLEventReader(new StringReader(xml));\n+        var startDocumentEvent = (StartDocument) reader.nextEvent();\n+        assertFalse(startDocumentEvent.standaloneSet());\n+\n+        xml = \"\"\"\n+                <?xml version=\"1.0\" standalone=\"yes\"?>\"\"\";\n+        reader = factory.createXMLEventReader(new StringReader(xml));\n+        startDocumentEvent = (StartDocument) reader.nextEvent();\n+        assertTrue(startDocumentEvent.standaloneSet());\n+        assertTrue(startDocumentEvent.isStandalone());\n+\n+        xml = \"\"\"\n+                <?xml version=\"1.0\" standalone=\"no\"?>\"\"\";\n+        reader = factory.createXMLEventReader(new StringReader(xml));\n+        startDocumentEvent = (StartDocument) reader.nextEvent();\n+        assertTrue(startDocumentEvent.standaloneSet());\n+        assertFalse(startDocumentEvent.isStandalone());\n+    }\n+}\n","filename":"test\/jdk\/javax\/xml\/jaxp\/8256515\/XmlInputFactoryTest.java","additions":44,"deletions":0,"binary":false,"changes":44,"status":"added"}]}