{"files":[{"patch":"@@ -4126,3 +4126,4 @@\n-void Assembler::vpmovmskb(Register dst, XMMRegister src) {\n-  assert(VM_Version::supports_avx2(), \"\");\n-  InstructionAttr attributes(AVX_256bit, \/* rex_w *\/ false, \/* legacy_mode *\/ true, \/* no_mask_reg *\/ true, \/* uses_vl *\/ false);\n+void Assembler::vpmovmskb(Register dst, XMMRegister src, int vec_enc) {\n+  assert((VM_Version::supports_avx() && vec_enc == AVX_128bit) ||\n+         (VM_Version::supports_avx2() && vec_enc  == AVX_256bit), \"\");\n+  InstructionAttr attributes(vec_enc, \/* rex_w *\/ false, \/* legacy_mode *\/ true, \/* no_mask_reg *\/ true, \/* uses_vl *\/ false);\n","filename":"src\/hotspot\/cpu\/x86\/assembler_x86.cpp","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -1749,1 +1749,1 @@\n-  void vpmovmskb(Register dst, XMMRegister src);\n+  void vpmovmskb(Register dst, XMMRegister src, int vec_enc);\n","filename":"src\/hotspot\/cpu\/x86\/assembler_x86.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -3782,1 +3782,1 @@\n-  assert(VM_Version::supports_avx2(), \"\");\n+  assert(VM_Version::supports_avx(), \"\");\n@@ -3785,1 +3785,1 @@\n-  vpmovmskb(tmp, xtmp);\n+  vpmovmskb(tmp, xtmp, vec_enc);\n","filename":"src\/hotspot\/cpu\/x86\/c2_MacroAssembler_x86.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -3219,1 +3219,1 @@\n-void MacroAssembler::vpmovmskb(Register dst, XMMRegister src) {\n+void MacroAssembler::vpmovmskb(Register dst, XMMRegister src, int vector_len) {\n@@ -3221,1 +3221,1 @@\n-  Assembler::vpmovmskb(dst, src);\n+  Assembler::vpmovmskb(dst, src, vector_len);\n","filename":"src\/hotspot\/cpu\/x86\/macroAssembler_x86.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1306,1 +1306,1 @@\n-  void vpmovmskb(Register dst, XMMRegister src);\n+  void vpmovmskb(Register dst, XMMRegister src, int vector_len = Assembler::AVX_256bit);\n","filename":"src\/hotspot\/cpu\/x86\/macroAssembler_x86.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1587,1 +1587,1 @@\n-      if (!is_LP64 || UseAVX < 2) {\n+      if (!is_LP64 || UseAVX < 1) {\n","filename":"src\/hotspot\/cpu\/x86\/x86.ad","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}