{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1995, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1995, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -287,3 +287,2 @@\n-    if (!IsJavaArgs()) {\n-        SetJvmEnvironment(argc,argv);\n-    }\n+    \/* Set env. Must be done before LoadJavaVM. *\/\n+    SetJvmEnvironment(argc, argv);\n@@ -809,0 +808,1 @@\n+    const char* NMT_Arg_Name = IsJavaArgs() ? \"-J-XX:NativeMemoryTracking=\" : \"-XX:NativeMemoryTracking=\";\n@@ -838,1 +838,1 @@\n-        if (JLI_StrCCmp(arg, \"-XX:NativeMemoryTracking=\") == 0) {\n+        if (JLI_StrCCmp(arg, NMT_Arg_Name) == 0) {\n@@ -841,1 +841,1 @@\n-            size_t pnlen = JLI_StrLen(\"-XX:NativeMemoryTracking=\");\n+            size_t pnlen = JLI_StrLen(NMT_Arg_Name);\n","filename":"src\/java.base\/share\/native\/libjli\/java.c","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 7124089 7131021 8042469 8066185 8074373\n+ * @bug 7124089 7131021 8042469 8066185 8074373 8258917\n@@ -255,0 +255,7 @@\n+    @Test\n+    void testNMTTools() throws FileNotFoundException {\n+        \/\/ tools (non-java launchers) should handle NTM (no \"wrong launcher\" warning)\n+        TestResult tr = doExec(jarCmd, \"-J-XX:NativeMemoryTracking=summary\", \"--help\");\n+        ensureNoWarnings(tr);\n+    }\n+\n","filename":"test\/jdk\/tools\/launcher\/TestSpecialArgs.java","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"}]}