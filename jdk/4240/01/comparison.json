{"files":[{"patch":"@@ -942,1 +942,1 @@\n-        new_thread->as_CompilerThread()->set_compiler(comp);\n+        CompilerThread::cast(new_thread)->set_compiler(comp);\n","filename":"src\/hotspot\/share\/compiler\/compileBroker.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+#include \"compiler\/compilerThread.hpp\"\n","filename":"src\/hotspot\/share\/compiler\/compileBroker.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -59,1 +59,8 @@\n-  static CompilerThread* current();\n+  static CompilerThread* current() {\n+    return CompilerThread::cast(JavaThread::current());\n+  }\n+\n+  static CompilerThread* cast(Thread* t) {\n+    assert(t->is_Compiler_thread(), \"incorrect cast to CompilerThread\");\n+    return static_cast<CompilerThread*>(t);\n+  }\n@@ -112,9 +119,0 @@\n-inline CompilerThread* JavaThread::as_CompilerThread() {\n-  assert(is_Compiler_thread(), \"just checking\");\n-  return (CompilerThread*)this;\n-}\n-\n-inline CompilerThread* CompilerThread::current() {\n-  return JavaThread::current()->as_CompilerThread();\n-}\n-\n","filename":"src\/hotspot\/share\/compiler\/compilerThread.hpp","additions":8,"deletions":10,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -159,1 +159,1 @@\n-    CompileTask *task = thread->as_CompilerThread()->task();\n+    CompileTask *task = CompilerThread::cast(thread)->task();\n","filename":"src\/hotspot\/share\/jvmci\/jvmci.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+#include \"compiler\/compilerThread.hpp\"\n@@ -439,1 +440,1 @@\n-  CompilerThread* compilerThread = thread->is_Compiler_thread() ? thread->as_CompilerThread() : NULL;\n+  CompilerThread* compilerThread = thread->is_Compiler_thread() ? CompilerThread::cast(thread) : NULL;\n","filename":"src\/hotspot\/share\/jvmci\/jvmciCodeInstaller.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1427,2 +1427,0 @@\n-  inline CompilerThread* as_CompilerThread();\n-\n","filename":"src\/hotspot\/share\/runtime\/thread.hpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"}]}