{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -64,0 +64,2 @@\n+ * win-shortcut\n+ * win-menu\n@@ -65,0 +67,1 @@\n+ * linux-shortcut\n@@ -114,7 +117,0 @@\n-        Arguments.putUnlessNull(bundleParams, CLIOptions.LINUX_CATEGORY.getId(),\n-                getOptionValue(CLIOptions.LINUX_CATEGORY));\n-\n-        Arguments.putUnlessNull(bundleParams,\n-                CLIOptions.WIN_CONSOLE_HINT.getId(),\n-                getOptionValue(CLIOptions.WIN_CONSOLE_HINT));\n-\n@@ -125,5 +121,9 @@\n-        Arguments.putUnlessNull(bundleParams, SHORTCUT_HINT.getID(),\n-                getOptionValue(CLIOptions.WIN_SHORTCUT_HINT));\n-\n-        Arguments.putUnlessNull(bundleParams, MENU_HINT.getID(),\n-                getOptionValue(CLIOptions.WIN_MENU_HINT));\n+        if (Platform.isWindows())  {\n+            Arguments.putUnlessNull(bundleParams,\n+                    CLIOptions.WIN_CONSOLE_HINT.getId(),\n+                    getOptionValue(CLIOptions.WIN_CONSOLE_HINT));\n+            Arguments.putUnlessNull(bundleParams, SHORTCUT_HINT.getID(),\n+                    getOptionValue(CLIOptions.WIN_SHORTCUT_HINT));\n+            Arguments.putUnlessNull(bundleParams, MENU_HINT.getID(),\n+                    getOptionValue(CLIOptions.WIN_MENU_HINT));\n+        }\n@@ -131,2 +131,6 @@\n-        Arguments.putUnlessNull(bundleParams, SHORTCUT_HINT.getID(),\n-                getOptionValue(CLIOptions.LINUX_SHORTCUT_HINT));\n+        if (Platform.isLinux())  {\n+            Arguments.putUnlessNull(bundleParams, CLIOptions.LINUX_CATEGORY.getId(),\n+                    getOptionValue(CLIOptions.LINUX_CATEGORY));\n+            Arguments.putUnlessNull(bundleParams, SHORTCUT_HINT.getID(),\n+                    getOptionValue(CLIOptions.LINUX_SHORTCUT_HINT));\n+        }\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/AddLauncherArguments.java","additions":19,"deletions":15,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -253,7 +253,2 @@\n-        List<String> names = new ArrayList<>();\n-        names.add(APP_NAME.fetchFrom(params));\n-        ADD_LAUNCHERS.fetchFrom(params).stream().map(APP_NAME::fetchFrom).forEach(\n-                names::add);\n-        for (var name : names) {\n-            launchers.add(new LauncherInfo(name, true, true));\n-        }\n+        ADD_LAUNCHERS.fetchFrom(params).stream().map(APP_NAME::fetchFrom).map(\n+                name -> new LauncherInfo(name, true, true)).forEach(launchers::add);\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/AppImageFile.java","additions":3,"deletions":8,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -139,2 +139,2 @@\n-\\          \"linux-app-release\", \"linux-category\", \"win-console\",\\n\\\n-\\          \"win-shortcut\", \"win-menu\", and \"linux-shortcut\" can be used.\\n\\\n+\\          \"win-console\", \"win-shortcut\", \"win-menu\",\\n\\\n+\\          \"linux-app-category\", and \"linux-shortcut\" can be used.\\n\\\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/resources\/HelpResources.properties","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -139,2 +139,2 @@\n-\\          \"linux-app-release\", \"linux-category\", \"win-console\",\\n\\\n-\\          \"win-shortcut\", \"win-menu\", and \"linux-shortcut\" can be used.\\n\\\n+\\          \"win-console\", \"win-shortcut\", \"win-menu\",\\n\\\n+\\          \"linux-app-category\", and \"linux-shortcut\" can be used.\\n\\\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/resources\/HelpResources_ja.properties","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -139,2 +139,2 @@\n-\\          \"linux-app-release\", \"linux-category\", \"win-console\",\\n\\\n-\\          \"win-shortcut\", \"win-menu\", and \"linux-shortcut\" can be used.\\n\\\n+\\          \"win-console\", \"win-shortcut\", \"win-menu\",\\n\\\n+\\          \"linux-app-category\", and \"linux-shortcut\" can be used.\\n\\\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/resources\/HelpResources_zh_CN.properties","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/AdditionalLauncher.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,2 +31,0 @@\n-import jdk.jpackage.test.JPackageCommand;\n-import jdk.jpackage.test.JavaAppDesc;\n@@ -35,2 +33,0 @@\n-import jdk.jpackage.test.Annotations.Parameter;\n-import jdk.jpackage.test.CfgFile;\n@@ -43,1 +39,2 @@\n- * SimplePackageTest.java) plus install three extra application launchers.\n+ * SimplePackageTest.java) plus install extra application launchers with and\n+ * without various shortcuts to be tested manually.\n@@ -50,14 +47,0 @@\n- * @requires (jpackage.test.SQETest != null)\n- * @library ..\/helpers\n- * @build jdk.jpackage.test.*\n- * @modules jdk.jpackage\/jdk.jpackage.internal\n- * @compile AddLShortcutTest.java\n- * @run main\/othervm\/timeout=360 -Xmx512m jdk.jpackage.test.Main\n- *  --jpt-run=AddLShortcutTest.test\n- *\/\n-\n-\/*\n- * @test\n- * @summary jpackage with --add-launcher\n- * @key jpackagePlatformPackage\n- * @requires (jpackage.test.SQETest == null)\n","filename":"test\/jdk\/tools\/jpackage\/share\/AddLShortcutTest.java","additions":3,"deletions":20,"binary":false,"changes":23,"status":"modified"}]}