{"files":[{"patch":"@@ -317,9 +317,6 @@\n-    \/\/ macosx has a secure per-user temporary directory\n-    static char *temp_path = NULL;\n-    char temp_path_storage[PATH_MAX];\n-    if (temp_path == NULL) {\n-        int pathSize = confstr(_CS_DARWIN_USER_TEMP_DIR, temp_path_storage, PATH_MAX);\n-        if (pathSize == 0 || pathSize > PATH_MAX) {\n-            strlcpy(temp_path_storage, \"\/tmp\", sizeof(temp_path_storage));\n-        }\n-        temp_path = temp_path_storage;\n+    \/\/ macosx has a secure per-user temporary directory.\n+    \/\/ Don't cache the result as this is only called once.\n+    char path[PATH_MAX];\n+    int pathSize = confstr(_CS_DARWIN_USER_TEMP_DIR, path, PATH_MAX);\n+    if (pathSize == 0 || pathSize > PATH_MAX) {\n+        strlcpy(path, \"\/tmp\", sizeof(path));\n@@ -327,1 +324,1 @@\n-    return JNU_NewStringPlatform(env, temp_path);\n+    return JNU_NewStringPlatform(env, path);\n","filename":"src\/jdk.attach\/macosx\/native\/libattach\/VirtualMachineImpl.c","additions":7,"deletions":10,"binary":false,"changes":17,"status":"modified"}]}