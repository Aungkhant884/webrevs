{"files":[{"patch":"@@ -124,61 +124,0 @@\n-size_t\n-PSVirtualSpace::expand_into(PSVirtualSpace* other_space, size_t bytes) {\n-  assert(is_aligned(bytes), \"arg not aligned\");\n-  assert(grows_up(), \"this space must grow up\");\n-  assert(other_space->grows_down(), \"other space must grow down\");\n-  assert(reserved_high_addr() == other_space->reserved_low_addr(),\n-         \"spaces not contiguous\");\n-  assert(special() == other_space->special(), \"one space is special, the other is not\");\n-  DEBUG_ONLY(PSVirtualSpaceVerifier this_verifier(this));\n-  DEBUG_ONLY(PSVirtualSpaceVerifier other_verifier(other_space));\n-\n-  size_t bytes_needed = bytes;\n-\n-  \/\/ First use the uncommitted region in this space.\n-  size_t tmp_bytes = MIN2(uncommitted_size(), bytes_needed);\n-  if (tmp_bytes > 0) {\n-    if (expand_by(tmp_bytes)) {\n-      bytes_needed -= tmp_bytes;\n-    } else {\n-      return 0;\n-    }\n-  }\n-\n-  \/\/ Next take from the uncommitted region in the other space, and commit it.\n-  tmp_bytes = MIN2(other_space->uncommitted_size(), bytes_needed);\n-  if (tmp_bytes > 0) {\n-    char* const commit_base = committed_high_addr();\n-    if (other_space->special() ||\n-        os::commit_memory(commit_base, tmp_bytes, alignment(), !ExecMem)) {\n-      \/\/ Reduce the reserved region in the other space.\n-      other_space->set_reserved(other_space->reserved_low_addr() + tmp_bytes,\n-                                other_space->reserved_high_addr(),\n-                                other_space->special());\n-\n-      \/\/ Grow both reserved and committed in this space.\n-      _reserved_high_addr += tmp_bytes;\n-      _committed_high_addr += tmp_bytes;\n-      bytes_needed -= tmp_bytes;\n-    } else {\n-      return bytes - bytes_needed;\n-    }\n-  }\n-\n-  \/\/ Finally take from the already committed region in the other space.\n-  tmp_bytes = bytes_needed;\n-  if (tmp_bytes > 0) {\n-    \/\/ Reduce both committed and reserved in the other space.\n-    other_space->set_committed(other_space->committed_low_addr() + tmp_bytes,\n-                               other_space->committed_high_addr());\n-    other_space->set_reserved(other_space->reserved_low_addr() + tmp_bytes,\n-                              other_space->reserved_high_addr(),\n-                              other_space->special());\n-\n-    \/\/ Grow both reserved and committed in this space.\n-    _reserved_high_addr += tmp_bytes;\n-    _committed_high_addr += tmp_bytes;\n-  }\n-\n-  return bytes;\n-}\n-\n","filename":"src\/hotspot\/share\/gc\/parallel\/psVirtualspace.cpp","additions":0,"deletions":61,"binary":false,"changes":61,"status":"modified"},{"patch":"@@ -98,1 +98,0 @@\n-  virtual size_t expand_into(PSVirtualSpace* space, size_t bytes);\n","filename":"src\/hotspot\/share\/gc\/parallel\/psVirtualspace.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}