{"files":[{"patch":"@@ -45,1 +45,0 @@\n-  SYSROOT_FLAGS :=\n@@ -47,3 +46,4 @@\n-  $(eval MINGW_VERSION = $(shell $(MINGW_BASE)-gcc -v 2>&1 | grep \"gcc version\" | cut -d\" \" -f 3))\n-  $(eval MINGW_SYSROOT = $(shell $(MINGW_BASE)-gcc -print-sysroot))\n-  ifeq ($(MINGW_SYSROOT), )\n+\n+  MINGW_SYSROOT = $(shell $(MINGW_BASE)-gcc -print-sysroot)\n+  ifeq ($(wildcard $(MINGW_SYSROOT)), )\n+    # Use fallback path\n@@ -51,2 +51,3 @@\n-  else\n-    SYSROOT_FLAGS := --sysroot=$(MINGW_SYSROOT)\n+    ifeq ($(wildcard $(MINGW_SYSROOT)), )\n+      $(error mingw sysroot not found)\n+    endif\n@@ -54,0 +55,1 @@\n+  SYSROOT_FLAGS := --sysroot=$(MINGW_SYSROOT)\n@@ -60,2 +62,2 @@\n-      SYSROOT_CFLAGS := $(SYSROOT_FLAGS), \\\n-      SYSROOT_LDFLAGS := $(SYSROOT_FLAGS), \\\n+      SYSROOT_CFLAGS := --sysroot=$(MINGW_SYSROOT), \\\n+      SYSROOT_LDFLAGS := --sysroot=$(MINGW_SYSROOT), \\\n@@ -64,0 +66,20 @@\n+  MINGW_SYSROOT_LIB_PATH := $(MINGW_SYSROOT)\/mingw\/lib\n+  ifeq ($(wildcard $(MINGW_SYSROOT_LIB_PATH)), )\n+    # Try without mingw\n+    MINGW_SYSROOT_LIB_PATH := $(MINGW_SYSROOT)\/lib\n+    ifeq ($(wildcard $(MINGW_SYSROOT_LIB_PATH)), )\n+      $(error mingw sysroot lib path not found)\n+    endif\n+  endif\n+\n+  MINGW_VERSION = $(shell $(MINGW_BASE)-gcc -v 2>&1 | $(GREP) \"gcc version\" | $(CUT) -d \" \" -f 3)\n+  MINGW_GCC_LIB_PATH := \/usr\/lib\/gcc\/$(MINGW_BASE)\/$(MINGW_VERSION)\n+  ifeq ($(wildcard $(MINGW_GCC_LIB_PATH)), )\n+    # Try using only major version number\n+    MINGW_VERSION_MAJOR := $(firstword $(subst ., , $(MINGW_VERSION)))\n+    MINGW_GCC_LIB_PATH := \/usr\/lib\/gcc\/$(MINGW_BASE)\/$(MINGW_VERSION_MAJOR)\n+    ifeq ($(wildcard $(MINGW_GCC_LIB_PATH)), )\n+      $(error mingw gcc lib path not found)\n+    endif\n+  endif\n+\n@@ -77,3 +99,2 @@\n-  HSDIS_TOOLCHAIN_LDFLAGS := -L\/usr\/lib\/gcc\/$(MINGW_BASE)\/$(MINGW_VERSION) \\\n-      -L$(MINGW_SYSROOT)\/lib\n-  MINGW_DLLCRT := $(MINGW_SYSROOT)\/lib\/dllcrt2.o\n+  HSDIS_TOOLCHAIN_LDFLAGS := -L$(MINGW_GCC_LIB_PATH) -L$(MINGW_SYSROOT_LIB_PATH)\n+  MINGW_DLLCRT := $(MINGW_SYSROOT_LIB_PATH)\/dllcrt2.o\n","filename":"make\/Hsdis.gmk","additions":32,"deletions":11,"binary":false,"changes":43,"status":"modified"}]}