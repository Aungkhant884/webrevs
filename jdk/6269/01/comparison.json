{"files":[{"patch":"@@ -47,0 +47,10 @@\n+  MINGW_SYSROOT = $(shell $(MINGW_BASE)-gcc -print-sysroot)\n+  ifeq ($(wildcard $(MINGW_SYSROOT)), )\n+    # Use fallback path\n+    MINGW_SYSROOT := \/usr\/$(MINGW_BASE)\n+    ifeq ($(wildcard $(MINGW_SYSROOT)), )\n+      $(error mingw sysroot not found)\n+    endif\n+  endif\n+  SYSROOT_FLAGS := --sysroot=$(MINGW_SYSROOT)\n+\n@@ -52,2 +62,2 @@\n-      SYSROOT_CFLAGS := --sysroot=\/usr\/$(MINGW_BASE)\/sys-root, \\\n-      SYSROOT_LDFLAGS := --sysroot=\/usr\/$(MINGW_BASE)\/sys-root, \\\n+      SYSROOT_CFLAGS := --sysroot=$(MINGW_SYSROOT), \\\n+      SYSROOT_LDFLAGS := --sysroot=$(MINGW_SYSROOT), \\\n@@ -56,0 +66,20 @@\n+  MINGW_SYSROOT_LIB_PATH := $(MINGW_SYSROOT)\/mingw\/lib\n+  ifeq ($(wildcard $(MINGW_SYSROOT_LIB_PATH)), )\n+    # Try without mingw\n+    MINGW_SYSROOT_LIB_PATH := $(MINGW_SYSROOT)\/lib\n+    ifeq ($(wildcard $(MINGW_SYSROOT_LIB_PATH)), )\n+      $(error mingw sysroot lib path not found)\n+    endif\n+  endif\n+\n+  MINGW_VERSION = $(shell $(MINGW_BASE)-gcc -v 2>&1 | $(GREP) \"gcc version\" | $(CUT) -d \" \" -f 3)\n+  MINGW_GCC_LIB_PATH := \/usr\/lib\/gcc\/$(MINGW_BASE)\/$(MINGW_VERSION)\n+  ifeq ($(wildcard $(MINGW_GCC_LIB_PATH)), )\n+    # Try using only major version number\n+    MINGW_VERSION_MAJOR := $(firstword $(subst ., , $(MINGW_VERSION)))\n+    MINGW_GCC_LIB_PATH := \/usr\/lib\/gcc\/$(MINGW_BASE)\/$(MINGW_VERSION_MAJOR)\n+    ifeq ($(wildcard $(MINGW_GCC_LIB_PATH)), )\n+      $(error mingw gcc lib path not found)\n+    endif\n+  endif\n+\n@@ -69,3 +99,2 @@\n-  HSDIS_TOOLCHAIN_LDFLAGS := -L\/usr\/lib\/gcc\/$(MINGW_BASE)\/9.2.0 \\\n-      -L\/usr\/$(MINGW_BASE)\/sys-root\/mingw\/lib\n-  MINGW_DLLCRT := \/usr\/$(MINGW_BASE)\/sys-root\/mingw\/lib\/dllcrt2.o\n+  HSDIS_TOOLCHAIN_LDFLAGS := -L$(MINGW_GCC_LIB_PATH) -L$(MINGW_SYSROOT_LIB_PATH)\n+  MINGW_DLLCRT := $(MINGW_SYSROOT_LIB_PATH)\/dllcrt2.o\n","filename":"make\/Hsdis.gmk","additions":34,"deletions":5,"binary":false,"changes":39,"status":"modified"}]}