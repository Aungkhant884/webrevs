{"files":[{"patch":"@@ -480,3 +480,6 @@\n-     * Gets the constant pool index of a static argument of a bootstrap specifier. Used when the list\n-     * of static arguments in the {@link BootstrapMethodInvocation} is an {@code int[]}. The list has\n-     * two elements. The first one is the number of arguments and the second one is the {@code cpi}.\n+     * Gets the constant pool index of a static argument of a bootstrap specifier (a constant pool entry\n+     * containing information about a bootstrap method). Used when the list of static arguments in the\n+     * {@link BootstrapMethodInvocation} is a {@code List<PrimitiveConstant>} of the form\n+     * {{@code arg_count}, {@code pool_index}}, meaning the arguments are not already resolved and that\n+     * the JDK has to lookup the arguments when they are needed. The {@code cpi} corresponds to\n+     * {@code pool_index} and the {@code index} has to be smaller than {@code arg_count}.\n","filename":"src\/jdk.internal.vm.ci\/share\/classes\/jdk\/vm\/ci\/hotspot\/CompilerToVM.java","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -134,1 +134,18 @@\n-     * or {@code CONSTANT_InvokeDynamic_info} pool entry .\n+     * or {@code CONSTANT_InvokeDynamic_info} pool entry.\n+     *\n+     * The procedure to obtain and use a {@link BootstrapMethodInvocation} is the following:\n+     *\n+     * <pre>\n+     * bsmInvocation = lookupBootstrapMethodInvocation(index, opcode);\n+     * staticArguments = bsmInvocation.getStaticArguments();\n+     * if staticArguments are PrimitiveConstant {\n+     *     argCount = staticArguments.get(0).asInt();\n+     *     cpi = staticArguments.get(1).asInt();\n+     *     for (int i = 0; i < argCount; ++i) {\n+     *         arguments[i] = lookupConstant(cpi, i);\n+     *     }\n+     *     call bootstrap method with newly resolved arguments\n+     * } else {\n+     *     call bootstrap method with provided arguments\n+     * }\n+     * <\/pre>\n@@ -174,3 +191,6 @@\n-     * Gets the constant pool index of a static argument of a bootstrap specifier. Used when the list\n-     * of static arguments in the {@link BootstrapMethodInvocation} is an {@code int[]}. The list has\n-     * two elements. The first one is the number of arguments and the second one is the {@code cpi}.\n+     * Gets the constant pool index of a static argument of a bootstrap specifier (a constant pool entry\n+     * containing information about a bootstrap method). Used when the list of static arguments in the\n+     * {@link BootstrapMethodInvocation} is a {@code List<PrimitiveConstant>} of the form\n+     * {{@code arg_count}, {@code pool_index}}, meaning the arguments are not already resolved and that\n+     * the JDK has to lookup the arguments when they are needed. The {@code cpi} corresponds to\n+     * {@code pool_index} and the {@code index} has to be smaller than {@code arg_count}.\n","filename":"src\/jdk.internal.vm.ci\/share\/classes\/jdk\/vm\/ci\/meta\/ConstantPool.java","additions":24,"deletions":4,"binary":false,"changes":28,"status":"modified"}]}