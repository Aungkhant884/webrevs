{"files":[{"patch":"@@ -144,0 +144,8 @@\n+\/\/ Reading the pd_set on each DictionaryEntry is lock free and cannot safepoint.\n+\/\/ Adding and deleting entries is under the SystemDictionary_lock\n+\/\/ Deleting unloaded entries on ClassLoaderData for dictionaries that are not unloaded\n+\/\/ is a three step process:\n+\/\/     moving the entries to a separate list, handshake to wait for\n+\/\/     readers to complete (see NSV here), and then actually deleting the entries.\n+\/\/ Deleting entries is done by the ServiceThread when triggered by class unloading.\n+\n@@ -455,0 +463,2 @@\n+          \/\/ Mark current for deletion but in the meantime it can still be\n+          \/\/ traversed.\n@@ -559,0 +569,1 @@\n+  assert_locked_or_safepoint(SystemDictionary_lock);\n@@ -560,1 +571,1 @@\n-  for (ProtectionDomainEntry* current = pd_set_acquire();  \/\/ accessed inside SD lock\n+  for (ProtectionDomainEntry* current = pd_set_acquire();\n","filename":"src\/hotspot\/share\/classfile\/dictionary.cpp","additions":12,"deletions":1,"binary":false,"changes":13,"status":"modified"}]}