{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -75,0 +75,14 @@\n+class FileLocker : public StackObj {\n+private:\n+  FILE *_file;\n+\n+public:\n+  FileLocker(FILE *file) : _file(file) {\n+    os::flockfile(_file);\n+  }\n+\n+  ~FileLocker() {\n+    os::funlockfile(_file);\n+  }\n+};\n+\n@@ -79,1 +93,1 @@\n-  os::flockfile(_stream);\n+  FileLocker flocker(_stream);\n@@ -86,1 +100,0 @@\n-  os::funlockfile(_stream);\n@@ -95,1 +108,1 @@\n-  os::flockfile(_stream);\n+  FileLocker flocker(_stream);\n@@ -104,1 +117,0 @@\n-  os::funlockfile(_stream);\n","filename":"src\/hotspot\/share\/logging\/logFileStreamOutput.cpp","additions":17,"deletions":5,"binary":false,"changes":22,"status":"modified"}]}