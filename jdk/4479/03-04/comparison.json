{"files":[{"patch":"@@ -31,3 +31,1 @@\n-class AsyncLogLocker : public StackObj {\n-  Semaphore* _sem;\n-\n+class AsyncLogWriter::AsyncLogLocker : public StackObj {\n@@ -35,2 +33,3 @@\n-  AsyncLogLocker(Semaphore* sem): _sem(sem) {\n-    _sem->wait();\n+  AsyncLogLocker() {\n+    assert(_instance != nullptr, \"AsyncLogWriter::_lock is unavailable\");\n+    _instance->_lock.wait();\n@@ -40,1 +39,1 @@\n-    _sem->signal();\n+    _instance->_lock.signal();\n@@ -62,1 +61,1 @@\n-    AsyncLogLocker locker(&_lock);\n+    AsyncLogLocker locker;\n@@ -70,1 +69,1 @@\n-  AsyncLogLocker locker(&_lock);\n+  AsyncLogLocker locker;\n@@ -124,1 +123,1 @@\n-    AsyncLogLocker locker(&_lock);\n+    AsyncLogLocker locker;\n","filename":"src\/hotspot\/share\/logging\/logAsyncWriter.cpp","additions":8,"deletions":9,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -136,0 +136,2 @@\n+  class AsyncLogLocker;\n+\n","filename":"src\/hotspot\/share\/logging\/logAsyncWriter.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"}]}