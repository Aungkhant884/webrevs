{"files":[{"patch":"@@ -31,3 +31,0 @@\n-Semaphore AsyncLogWriter::_sem(0);\n-Semaphore AsyncLogWriter::_io_sem(1);\n-\n@@ -35,2 +32,2 @@\n- private:\n-  static Semaphore _lock;\n+  Semaphore* _sem;\n+\n@@ -38,2 +35,2 @@\n-  AsyncLogLocker() {\n-    _lock.wait();\n+  AsyncLogLocker(Semaphore* sem): _sem(sem) {\n+    _sem->wait();\n@@ -43,1 +40,1 @@\n-    _lock.signal();\n+    _sem->signal();\n@@ -47,2 +44,0 @@\n-Semaphore AsyncLogLocker::_lock(1);\n-\n@@ -67,1 +62,1 @@\n-    AsyncLogLocker lock;\n+    AsyncLogLocker locker(&_lock);\n@@ -75,1 +70,1 @@\n-  AsyncLogLocker lock;\n+  AsyncLogLocker locker(&_lock);\n@@ -84,1 +79,2 @@\n-  : _initialized(false),\n+  : _lock(1), _sem(0), _io_sem(1),\n+    _initialized(false),\n@@ -128,1 +124,1 @@\n-    AsyncLogLocker lock;\n+    AsyncLogLocker locker(&_lock);\n","filename":"src\/hotspot\/share\/logging\/logAsyncWriter.cpp","additions":10,"deletions":14,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -137,0 +137,2 @@\n+  \/\/ _lock(1) denotes a critional region.\n+  Semaphore _lock;\n@@ -139,1 +141,1 @@\n-  static Semaphore _sem;\n+  Semaphore _sem;\n@@ -141,1 +143,1 @@\n-  static Semaphore _io_sem;\n+  Semaphore _io_sem;\n","filename":"src\/hotspot\/share\/logging\/logAsyncWriter.hpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"}]}