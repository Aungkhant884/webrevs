{"files":[{"patch":"@@ -545,2 +545,2 @@\n-        return StreamEncoder.forOutputStreamWriter(newOutputStream(ch),\n-            new Object(), enc.reset());\n+        OutputStream out = newOutputStream(ch);\n+        return StreamEncoder.forOutputStreamWriter(out, enc.reset());\n","filename":"src\/java.base\/share\/classes\/java\/nio\/channels\/Channels.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -81,0 +81,6 @@\n+    public static StreamEncoder forOutputStreamWriter(OutputStream out,\n+                                                      CharsetEncoder enc)\n+    {\n+        return new StreamEncoder(out, enc);\n+    }\n+\n@@ -268,0 +274,10 @@\n+    private StreamEncoder(OutputStream out, CharsetEncoder enc) {\n+        super();\n+        this.out = out;\n+        this.cs = enc.charset();\n+        this.encoder = enc;\n+\n+        this.bb = ByteBuffer.allocate(INITIAL_BYTE_BUFFER_CAPACITY);\n+        this.maxBufferCapacity = MAX_BYTE_BUFFER_CAPACITY;\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/sun\/nio\/cs\/StreamEncoder.java","additions":16,"deletions":0,"binary":false,"changes":16,"status":"modified"}]}