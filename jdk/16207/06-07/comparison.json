{"files":[{"patch":"@@ -85,15 +85,13 @@\n-        () ->\n-        {\n-                InetAddress loopback = InetAddress.getLoopbackAddress();\n-                try (ServerSocket ss = new ServerSocket(0)) {\n-                    InetSocketAddress addr = new InetSocketAddress(loopback,\n-                        ss.getLocalPort());\n-                    try (SocketChannel cs = SocketChannel.open(addr)) {\n-                         cs.configureBlocking(false);\n-                         cs.setOption(StandardSocketOptions.SO_SNDBUF, 8192);\n-                        try (Writer writer = Channels.newWriter(cs,\n-                                StandardCharsets.UTF_8)) {\n-                            for (int i = 1; i < Integer.MAX_VALUE; i++) {\n-                                writer.write(\"test\" + i);\n-                            }\n-                        }\n+        () -> {\n+            try (ServerSocket ss = new ServerSocket();\n+                 SocketChannel sc = SocketChannel.open()) {\n+\n+                InetAddress lb = InetAddress.getLoopbackAddress();\n+                ss.bind(new InetSocketAddress(lb, 0));\n+                sc.connect(ss.getLocalSocketAddress());\n+                sc.configureBlocking(false);\n+                sc.setOption(StandardSocketOptions.SO_SNDBUF, 8192);\n+                try (Writer writer = Channels.newWriter(sc,\n+                    StandardCharsets.UTF_8)) {\n+                    for (int i = 1; i < Integer.MAX_VALUE; i++) {\n+                        writer.write(\"test\" + i);\n@@ -102,0 +100,1 @@\n+            }\n","filename":"test\/jdk\/java\/nio\/channels\/Channels\/NewWriter.java","additions":14,"deletions":15,"binary":false,"changes":29,"status":"modified"}]}