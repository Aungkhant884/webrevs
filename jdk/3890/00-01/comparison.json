{"files":[{"patch":"@@ -58,4 +58,8 @@\n-    if (what == COPYFILE_COPY_DATA && stage == COPYFILE_PROGRESS &&\n-        *((int*)cancel) != 0) {\n-        \/\/ errno will be set to ECANCELED\n-        return COPYFILE_QUIT;\n+    if (what == COPYFILE_COPY_DATA) {\n+        if (stage == COPYFILE_ERR\n+                || (stage == COPYFILE_PROGRESS && *((int*)cancel) != 0)) {\n+            \/\/ errno will be set to ECANCELED if the operation is cancelled,\n+            \/\/ or to the appropriate error number if there is an error,\n+            \/\/ but in either case we need to quit.\n+            return COPYFILE_QUIT;\n+        }\n","filename":"src\/java.base\/unix\/native\/libnio\/fs\/UnixCopyFile.c","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"}]}