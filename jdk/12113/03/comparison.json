{"files":[{"patch":"@@ -62,1 +62,0 @@\n-  _bytes_used_before(0),\n@@ -64,2 +63,1 @@\n-  _inc_part_start(0),\n-  _inc_bytes_used_before(0) {\n+  _inc_part_start(0) {\n@@ -117,1 +115,0 @@\n-  _bytes_used_before += hr->used();\n@@ -136,2 +133,0 @@\n-  _inc_bytes_used_before = 0;\n-\n@@ -203,20 +198,0 @@\n-  \/\/ This routine is used when:\n-  \/\/ * adding survivor regions to the incremental cset at the end of an\n-  \/\/   evacuation pause or\n-  \/\/ * adding the current allocation region to the incremental cset\n-  \/\/   when it is retired.\n-  \/\/ Therefore this routine may be called at a safepoint by the\n-  \/\/ VM thread, or in-between safepoints by mutator threads (when\n-  \/\/ retiring the current allocation region)\n-  \/\/ We need to clear and set the cached recorded\/cached collection set\n-  \/\/ information in the heap region here (before the region gets added\n-  \/\/ to the collection set). An individual heap region's cached values\n-  \/\/ are calculated, aggregated with the policy collection set info,\n-  \/\/ and cached in the heap region here (initially) and (subsequently)\n-  \/\/ by the Young List sampling code.\n-  \/\/ Ignore calls to this due to retirement during full gc.\n-\n-  if (!_g1h->collector_state()->in_full_gc()) {\n-    _inc_bytes_used_before += hr->used();\n-  }\n-\n@@ -337,2 +312,0 @@\n-  _bytes_used_before = _inc_bytes_used_before;\n-\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectionSet.cpp","additions":1,"deletions":28,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -159,5 +159,0 @@\n-  \/\/ The number of bytes in the collection set before the pause. Set from\n-  \/\/ the incrementally built collection set at the start of an evacuation\n-  \/\/ pause, and updated as more regions are added to the collection set.\n-  size_t _bytes_used_before;\n-\n@@ -172,9 +167,0 @@\n-  \/\/ The associated information that is maintained while the incremental\n-  \/\/ collection set is being built with *young* regions. Used to populate\n-  \/\/ the recorded info for the evacuation pause.\n-\n-  \/\/ The number of bytes in the incrementally built collection set.\n-  \/\/ Used to set _collection_set_bytes_used_before at the start of\n-  \/\/ an evacuation pause.\n-  size_t _inc_bytes_used_before;\n-\n@@ -276,8 +262,0 @@\n-  size_t bytes_used_before() const {\n-    return _bytes_used_before;\n-  }\n-\n-  void reset_bytes_used_before() {\n-    _bytes_used_before = 0;\n-  }\n-\n","filename":"src\/hotspot\/share\/gc\/g1\/g1CollectionSet.hpp","additions":0,"deletions":22,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -106,2 +106,3 @@\n-  \/\/ We may immediately start allocating regions and placing them on the\n-  \/\/ collection set list. Initialize the per-collection set info\n+\n+  \/\/ We immediately start allocating regions placing them in the collection set.\n+  \/\/ Initialize the collection set info.\n@@ -641,2 +642,0 @@\n-  _collection_set->reset_bytes_used_before();\n-\n","filename":"src\/hotspot\/share\/gc\/g1\/g1Policy.cpp","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -1023,1 +1023,0 @@\n-  evacuation_info->set_collection_set_used_before(collection_set()->bytes_used_before());\n","filename":"src\/hotspot\/share\/gc\/g1\/g1YoungCollector.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -468,0 +468,1 @@\n+    evacuation_info->set_collection_set_used_before(_before_used_bytes + _after_used_bytes);\n","filename":"src\/hotspot\/share\/gc\/g1\/g1YoungGCPostEvacuateTasks.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}