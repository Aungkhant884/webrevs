{"files":[{"patch":"@@ -1045,1 +1045,1 @@\n-  GenericCDSFileMapHeader* _header;\n+  GenericCDSFileMapHeader _header;\n@@ -1050,1 +1050,0 @@\n-    _header = NULL;\n@@ -1057,3 +1056,0 @@\n-    if (_header != NULL) {\n-      os::free((void*)_header);\n-    }\n@@ -1073,1 +1069,0 @@\n-    assert(_header == NULL, \"_header alredy inited?\");\n@@ -1075,2 +1070,0 @@\n-    _header = (GenericCDSFileMapHeader*)os::malloc(size, mtInternal);\n-    memset(_header, 0, size);\n@@ -1078,1 +1071,1 @@\n-    size_t n = os::read(fd, (void*)_header, (unsigned int)size);\n+    size_t n = os::read(fd, (void*)&_header, (unsigned int)size);\n@@ -1087,1 +1080,1 @@\n-    return _header;\n+    return &_header;\n@@ -1092,2 +1085,1 @@\n-    assert(_header != NULL, \"Sanity check\");\n-    size_t name_size = (size_t)_header->_base_archive_name_size;\n+    size_t name_size = (size_t)_header._base_archive_name_size;\n@@ -1096,1 +1088,1 @@\n-    lseek(_fd, _header->_base_archive_path_offset, SEEK_SET); \/\/ position to correct offset.\n+    lseek(_fd, _header._base_archive_path_offset, SEEK_SET); \/\/ position to correct offset.\n","filename":"src\/hotspot\/share\/cds\/filemap.cpp","additions":5,"deletions":13,"binary":false,"changes":18,"status":"modified"}]}