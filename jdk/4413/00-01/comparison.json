{"files":[{"patch":"@@ -0,0 +1,53 @@\n+#\n+# Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+#\n+# This code is free software; you can redistribute it and\/or modify it\n+# under the terms of the GNU General Public License version 2 only, as\n+# published by the Free Software Foundation.\n+#\n+# This code is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# version 2 for more details (a copy is included in the LICENSE file that\n+# accompanied this code).\n+#\n+# You should have received a copy of the GNU General Public License version\n+# 2 along with this work; if not, write to the Free Software Foundation,\n+# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+#\n+# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+# or visit www.oracle.com if you need additional information or have any\n+# questions.\n+#\n+\n+# Use OpenSSL 1.1.0i or above versions, earlier versions may generate different\n+# info and test fail.\n+openssl pkcs12 -in ksnormal -passin pass:changeit -info -nokeys -nocerts 2> t2 || exit 20\n+grep \"MAC: sha256, Iteration 10000\" t2 || exit 21\n+grep \"Shrouded Keybag: PBES2, PBKDF2, AES-256-CBC, Iteration 10000, PRF hmacWithSHA256\" t2 || exit 23\n+grep \"PKCS7 Encrypted data: PBES2, PBKDF2, AES-256-CBC, Iteration 10000, PRF hmacWithSHA256\" t2 || exit 24\n+\n+openssl pkcs12 -in ksnormaldup -passin pass:changeit -info -nokeys -nocerts 2> t22 || exit 25\n+diff t2 t22 || exit 26\n+\n+openssl pkcs12 -in ksnopass -passin pass:changeit -info -nokeys -nocerts && exit 30\n+\n+openssl pkcs12 -in ksnopass -passin pass:changeit -info -nokeys -nocerts -nomacver 2> t3 || exit 31\n+grep \"PKCS7 Encrypted data:\" t3 && exit 33\n+grep \"Shrouded Keybag: PBES2, PBKDF2, AES-256-CBC, Iteration 10000, PRF hmacWithSHA256\" t3 || exit 34\n+grep \"Shrouded Keybag: pbeWithSHA1And128BitRC4, Iteration 10000\" t3 || exit 35\n+\n+openssl pkcs12 -in ksnopassdup -passin pass:changeit -info -nokeys -nocerts -nomacver 2> t33 || exit 36\n+diff t3 t33 || exit 37\n+\n+openssl pkcs12 -in ksnewic -passin pass:changeit -info -nokeys -nocerts 2> t4 || exit 40\n+grep \"MAC: sha256, Iteration 5555\" t4 || exit 41\n+grep \"Shrouded Keybag: PBES2, PBKDF2, AES-256-CBC, Iteration 7777, PRF hmacWithSHA256\" t4 || exit 43\n+grep \"Shrouded Keybag: pbeWithSHA1And128BitRC4, Iteration 10000\" t4 || exit 44\n+grep \"PKCS7 Encrypted data: PBES2, PBKDF2, AES-256-CBC, Iteration 6666, PRF hmacWithSHA256\" t4 || exit 45\n+\n+openssl pkcs12 -in ksnewicdup -passin pass:changeit -info -nokeys -nocerts 2> t44 || exit 46\n+diff t4 t44 || exit 47\n+\n+echo Succeed\n\\ No newline at end of file\n","filename":"test\/jdk\/sun\/security\/pkcs12\/KeytoolOpensslInterop.sh","additions":53,"deletions":0,"binary":false,"changes":53,"status":"added"},{"patch":"@@ -30,3 +30,9 @@\n- * @summary Keytool <-> openssl interop test. Follow the step 2 descibed in\n-            test\/jdk\/sun\/security\/pkcs12\/params\/README afther running this\n-            test.\n+ * @summary This is java keytool <-> openssl interop test.\n+ *          ParamsTest.java does some operation on pre-generated openssl\n+ *          keystores and generate some new JDK keystores under scratch\n+ *          directory. The KeytoolOpensslInterop.sh perform some openssl\n+ *          command on JDK generated kestores.\n+ *\n+ *          Prerequisite: Install OpenSSL 1.1.0i or above versions, earlier\n+ *          versions may generate different info and test fail.\n+ *\n@@ -34,0 +40,1 @@\n+ * @run shell\/manual KeytoolOpensslInterop.sh\n@@ -36,2 +43,2 @@\n-public class KeytoolOpensslInterop {\n-}\n+public class KeytoolOpensslInteropTest {\n+}\n\\ No newline at end of file\n","filename":"test\/jdk\/sun\/security\/pkcs12\/KeytoolOpensslInteropTest.java","additions":12,"deletions":5,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -1,1 +1,1 @@\n-1. Preparing data in this directory\n+Preparing data in this directory\n@@ -22,36 +22,1 @@\n-)\n-\n-2. After running the test, we can go to the scratch directory and run the\n-following commands to check keytool -> openssl interoperability.\n-OpenSSL 1.1.0i is used here. Earlier versions might generate different info.\n-\n-(\n-openssl pkcs12 -in ksnormal -passin pass:changeit -info -nokeys -nocerts 2> t2 || exit 20\n-grep \"MAC: sha256, Iteration 10000\" t2 || exit 21\n-grep \"Shrouded Keybag: PBES2, PBKDF2, AES-256-CBC, Iteration 10000, PRF hmacWithSHA256\" t2 || exit 23\n-grep \"PKCS7 Encrypted data: PBES2, PBKDF2, AES-256-CBC, Iteration 10000, PRF hmacWithSHA256\" t2 || exit 24\n-\n-openssl pkcs12 -in ksnormaldup -passin pass:changeit -info -nokeys -nocerts 2> t22 || exit 25\n-diff t2 t22 || exit 26\n-\n-openssl pkcs12 -in ksnopass -passin pass:changeit -info -nokeys -nocerts && exit 30\n-\n-openssl pkcs12 -in ksnopass -passin pass:changeit -info -nokeys -nocerts -nomacver 2> t3 || exit 31\n-grep \"PKCS7 Encrypted data:\" t3 && exit 33\n-grep \"Shrouded Keybag: PBES2, PBKDF2, AES-256-CBC, Iteration 10000, PRF hmacWithSHA256\" t3 || exit 34\n-grep \"Shrouded Keybag: pbeWithSHA1And128BitRC4, Iteration 10000\" t3 || exit 35\n-\n-openssl pkcs12 -in ksnopassdup -passin pass:changeit -info -nokeys -nocerts -nomacver 2> t33 || exit 36\n-diff t3 t33 || exit 37\n-\n-openssl pkcs12 -in ksnewic -passin pass:changeit -info -nokeys -nocerts 2> t4 || exit 40\n-grep \"MAC: sha256, Iteration 5555\" t4 || exit 41\n-grep \"Shrouded Keybag: PBES2, PBKDF2, AES-256-CBC, Iteration 7777, PRF hmacWithSHA256\" t4 || exit 43\n-grep \"Shrouded Keybag: pbeWithSHA1And128BitRC4, Iteration 10000\" t4 || exit 44\n-grep \"PKCS7 Encrypted data: PBES2, PBKDF2, AES-256-CBC, Iteration 6666, PRF hmacWithSHA256\" t4 || exit 45\n-\n-openssl pkcs12 -in ksnewicdup -passin pass:changeit -info -nokeys -nocerts 2> t44 || exit 46\n-diff t4 t44 || exit 47\n-\n-echo Succeed\n-)\n+)\n\\ No newline at end of file\n","filename":"test\/jdk\/sun\/security\/pkcs12\/params\/README","additions":2,"deletions":37,"binary":false,"changes":39,"status":"modified"}]}