{"files":[{"patch":"@@ -509,0 +509,2 @@\n+            byte[] buffer = new byte[4 * 1024];\n+            int bytesread = 0;\n@@ -510,1 +512,3 @@\n-                inputOctetStreamProxy.transferTo(diOs);\n+                while ((bytesread = inputOctetStreamProxy.read(buffer)) != -1) {\n+                    diOs.write(buffer, 0, bytesread);\n+                }\n","filename":"src\/java.xml.crypto\/share\/classes\/com\/sun\/org\/apache\/xml\/internal\/security\/signature\/XMLSignatureInput.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -60,1 +60,15 @@\n-        return Files.readAllBytes(Paths.get(fileName));\n+        byte refBytes[] = null;\n+\n+        try (InputStream inputStream = Files.newInputStream(Paths.get(fileName));\n+            UnsyncByteArrayOutputStream baos = new UnsyncByteArrayOutputStream()) {\n+            byte buf[] = new byte[1024];\n+            int len;\n+\n+            while ((len = inputStream.read(buf)) > 0) {\n+                baos.write(buf, 0, len);\n+            }\n+\n+            refBytes = baos.toByteArray();\n+        }\n+\n+        return refBytes;\n@@ -92,1 +106,8 @@\n-        return inputStream.readAllBytes();\n+        try (UnsyncByteArrayOutputStream baos = new UnsyncByteArrayOutputStream()) {\n+            byte buf[] = new byte[4 * 1024];\n+            int len;\n+            while ((len = inputStream.read(buf)) > 0) {\n+                baos.write(buf, 0, len);\n+            }\n+            return baos.toByteArray();\n+        }\n","filename":"src\/java.xml.crypto\/share\/classes\/com\/sun\/org\/apache\/xml\/internal\/security\/utils\/JavaUtils.java","additions":23,"deletions":2,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -25,0 +25,1 @@\n+import java.io.ByteArrayOutputStream;\n@@ -133,1 +134,10 @@\n-            try (InputStream inputStream = urlConnection.getInputStream()) {\n+            try (ByteArrayOutputStream baos = new ByteArrayOutputStream();\n+                InputStream inputStream = urlConnection.getInputStream()) {\n+                byte[] buf = new byte[4096];\n+                int read = 0;\n+                int summarized = 0;\n+\n+                while ((read = inputStream.read(buf)) >= 0) {\n+                    baos.write(buf, 0, read);\n+                    summarized += read;\n+                }\n@@ -135,2 +145,1 @@\n-                byte[] bytes = inputStream.readAllBytes();\n-                LOG.debug(\"Fetched {} bytes from URI {}\", bytes.length, uriNew.toString());\n+                LOG.debug(\"Fetched {} bytes from URI {}\", summarized, uriNew.toString());\n@@ -138,1 +147,1 @@\n-                XMLSignatureInput result = new XMLSignatureInput(bytes);\n+                XMLSignatureInput result = new XMLSignatureInput(baos.toByteArray());\n","filename":"src\/java.xml.crypto\/share\/classes\/com\/sun\/org\/apache\/xml\/internal\/security\/utils\/resolver\/implementations\/ResolverDirectHTTP.java","additions":13,"deletions":4,"binary":false,"changes":17,"status":"modified"}]}