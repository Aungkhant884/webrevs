{"files":[{"patch":"@@ -159,1 +159,1 @@\n-        sum.printG1HeapSummary(this);\n+        sum.printG1HeapSummary(this, tty);\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/gc\/g1\/G1CollectedHeap.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+import java.io.*;\n@@ -242,0 +243,4 @@\n+      printG1HeapSummary(g1h, System.out);\n+   }\n+\n+   public void printG1HeapSummary(G1CollectedHeap g1h, PrintStream tty) {\n@@ -249,1 +254,1 @@\n-      printG1Space(\"G1 Heap:\", g1h.n_regions(),\n+      printG1Space(tty, \"G1 Heap:\", g1h.n_regions(),\n@@ -251,2 +256,2 @@\n-      System.out.println(\"G1 Young Generation:\");\n-      printG1Space(\"Eden Space:\", edenSpaceRegionNum,\n+      tty.println(\"G1 Young Generation:\");\n+      printG1Space(tty, \"Eden Space:\", edenSpaceRegionNum,\n@@ -254,1 +259,1 @@\n-      printG1Space(\"Survivor Space:\", survivorSpaceRegionNum,\n+      printG1Space(tty, \"Survivor Space:\", survivorSpaceRegionNum,\n@@ -256,1 +261,1 @@\n-      printG1Space(\"G1 Old Generation:\", oldGenRegionNum,\n+      printG1Space(tty, \"G1 Old Generation:\", oldGenRegionNum,\n@@ -260,1 +265,1 @@\n-   private void printG1Space(String spaceName, long regionNum,\n+   private void printG1Space(PrintStream tty, String spaceName, long regionNum,\n@@ -263,5 +268,5 @@\n-      System.out.println(spaceName);\n-      printValue(\"regions  = \", regionNum);\n-      printValMB(\"capacity = \", capacity);\n-      printValMB(\"used     = \", used);\n-      printValMB(\"free     = \", free);\n+      tty.println(spaceName);\n+      printValue(tty, \"regions  = \", regionNum);\n+      printValMB(tty, \"capacity = \", capacity);\n+      printValMB(tty, \"used     = \", used);\n+      printValMB(tty, \"free     = \", free);\n@@ -269,1 +274,1 @@\n-      System.out.println(alignment + occPerc + \"% used\");\n+      tty.println(alignment + occPerc + \"% used\");\n@@ -272,1 +277,0 @@\n-   private static final double FACTOR = 1024*1024;\n@@ -274,0 +278,5 @@\n+      printValMB(System.out, title, value);\n+   }\n+\n+   private static final double FACTOR = 1024*1024;\n+   private void printValMB(PrintStream tty, String title, long value) {\n@@ -275,1 +284,1 @@\n-        System.out.println(alignment + title +   (value >>> 20)  + \" MB\");\n+        tty.println(alignment + title +   (value >>> 20)  + \" MB\");\n@@ -278,1 +287,1 @@\n-        System.out.println(alignment + title + value + \" (\" + mb + \"MB)\");\n+        tty.println(alignment + title + value + \" (\" + mb + \"MB)\");\n@@ -283,1 +292,5 @@\n-      System.out.println(alignment + title + value);\n+      printValue(System.out, title, value);\n+   }\n+\n+   private void printValue(PrintStream tty, String title, long value) {\n+      tty.println(alignment + title + value);\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/tools\/HeapSummary.java","additions":29,"deletions":16,"binary":false,"changes":45,"status":"modified"}]}