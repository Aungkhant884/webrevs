{"files":[{"patch":"@@ -62,0 +62,1 @@\n+    private static final String IMPORT_MODULE_DIR = JAVAHOME + \"\/jmods\";\n@@ -82,0 +83,3 @@\n+    \/\/ Check whether or not FX is part of jdk\n+    private static Class<?> fxClass = null;\n+\n@@ -223,1 +227,3 @@\n-        compileFXModule();\n+        if (fxClass == null) {\n+            compileFXModule();\n+        }\n@@ -226,1 +232,5 @@\n-        fxCompilerArgs.add(\"--module-path=\" + MODULE_DIR);\n+        if (fxClass == null) {\n+            fxCompilerArgs.add(\"--module-path=\" + MODULE_DIR);\n+        } else {\n+            fxCompilerArgs.add(\"--upgrade-module-path=\" + IMPORT_MODULE_DIR);\n+        }\n@@ -235,2 +245,7 @@\n-        fxCmds.add(1, \"--module-path=\" + MODULE_DIR);\n-        fxCmds.add(2, \"--add-modules=javafx.graphics\");\n+        if (fxClass == null) {\n+            fxCmds.add(1, \"--module-path=\" + MODULE_DIR);\n+            fxCmds.add(2, \"--add-modules=javafx.graphics\");\n+        } else {\n+            fxCmds.add(1, \"--upgrade-module-path=\" + IMPORT_MODULE_DIR);\n+            fxCmds.add(2, \"--patch-module=javafx.graphics=\" + IMPORT_MODULE_DIR + \"\/javafx.graphics.jmod\");\n+        }\n@@ -443,2 +458,1 @@\n-        \/\/ Ensure that FX is not part of jdk\n-        Class<?> fxClass = null;\n+        \/\/ Check whether or not FX is part of jdk\n@@ -451,2 +465,1 @@\n-            System.out.println(\"JavaFX modules erroneously included in the JDK. Skip the test.\");\n-            return;\n+            System.out.println(\"JavaFX modules included in the JDK\");\n","filename":"test\/jdk\/tools\/launcher\/FXLauncherTest.java","additions":21,"deletions":8,"binary":false,"changes":29,"status":"modified"}]}