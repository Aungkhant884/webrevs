{"files":[{"patch":"@@ -821,0 +821,1 @@\n+  bool is_native  = ShenandoahBarrierSet::is_native_access(decorators);\n@@ -858,1 +859,5 @@\n-    __ call(RuntimeAddress(bs->load_reference_barrier_strong_rt_code_blob()->code_begin()));\n+    if (is_native) {\n+      __ call(RuntimeAddress(bs->load_reference_barrier_strong_native_rt_code_blob()->code_begin()));\n+    } else {\n+      __ call(RuntimeAddress(bs->load_reference_barrier_strong_rt_code_blob()->code_begin()));\n+    }\n@@ -937,0 +942,1 @@\n+  bool is_native  = ShenandoahBarrierSet::is_native_access(decorators);\n@@ -938,1 +944,1 @@\n-#ifdef _LP64\n+  #ifdef _LP64\n@@ -942,3 +948,1 @@\n-    if (UseCompressedOops) {\n-      __ call_VM_leaf(CAST_FROM_FN_PTR(address, ShenandoahRuntime::load_reference_barrier_strong_narrow), c_rarg0, c_rarg1);\n-    } else {\n+    if (is_native) {\n@@ -946,0 +950,6 @@\n+    } else {\n+      if (UseCompressedOops) {\n+        __ call_VM_leaf(CAST_FROM_FN_PTR(address, ShenandoahRuntime::load_reference_barrier_strong_narrow), c_rarg0, c_rarg1);\n+      } else {\n+        __ call_VM_leaf(CAST_FROM_FN_PTR(address, ShenandoahRuntime::load_reference_barrier_strong), c_rarg0, c_rarg1);\n+      }\n","filename":"src\/hotspot\/cpu\/x86\/gc\/shenandoah\/shenandoahBarrierSetAssembler_x86.cpp","additions":15,"deletions":5,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -55,0 +55,1 @@\n+  _load_reference_barrier_strong_native_rt_code_blob(NULL),\n@@ -278,0 +279,5 @@\n+    C1ShenandoahLoadReferenceBarrierCodeGenClosure lrb_strong_native_code_gen_cl(ON_STRONG_OOP_REF | IN_NATIVE);\n+    _load_reference_barrier_strong_native_rt_code_blob = Runtime1::generate_blob(buffer_blob, -1,\n+                                                                          \"shenandoah_load_reference_barrier_strong_native_slow\",\n+                                                                          false, &lrb_strong_native_code_gen_cl);\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/c1\/shenandoahBarrierSetC1.cpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -194,0 +194,1 @@\n+  CodeBlob* _load_reference_barrier_strong_native_rt_code_blob;\n@@ -219,0 +220,5 @@\n+  CodeBlob* load_reference_barrier_strong_native_rt_code_blob() {\n+    assert(_load_reference_barrier_strong_native_rt_code_blob != NULL, \"\");\n+    return _load_reference_barrier_strong_native_rt_code_blob;\n+  }\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/c1\/shenandoahBarrierSetC1.hpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"}]}