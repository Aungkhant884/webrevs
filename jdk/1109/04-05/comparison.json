{"files":[{"patch":"@@ -237,1 +237,1 @@\n-  bool is_narrow  = LP64_ONLY(UseCompressedOops &&) !is_native;\n+  bool is_narrow  = UseCompressedOops && !is_native;\n","filename":"src\/hotspot\/cpu\/aarch64\/gc\/shenandoah\/shenandoahBarrierSetAssembler_aarch64.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -278,1 +278,1 @@\n-  bool is_narrow  = LP64_ONLY(UseCompressedOops &&) !is_native;\n+  bool is_narrow  = UseCompressedOops && is_native;\n@@ -935,3 +935,0 @@\n-#ifdef _LP64\n-  __ load_parameter(0, c_rarg0);\n-  __ load_parameter(1, c_rarg1);\n@@ -941,0 +938,4 @@\n+\n+#ifdef _LP64\n+  __ load_parameter(0, c_rarg0);\n+  __ load_parameter(1, c_rarg1);\n@@ -960,10 +961,7 @@\n-  switch (kind) {\n-    case ShenandoahBarrierSet::AccessKind::NORMAL:\n-      __ call_VM_leaf(CAST_FROM_FN_PTR(address, ShenandoahRuntime::load_reference_barrier), rax, rbx);\n-      break;\n-    case ShenandoahBarrierSet::AccessKind::WEAK:\n-    case ShenandoahBarrierSet::AccessKind::NATIVE:\n-      __ call_VM_leaf(CAST_FROM_FN_PTR(address, ShenandoahRuntime::load_reference_barrier_weak), rax, rbx);\n-      break;\n-    default:\n-      ShouldNotReachHere();\n+  if (is_strong) {\n+    __ call_VM_leaf(CAST_FROM_FN_PTR(address, ShenandoahRuntime::load_reference_barrier_strong), rax, rbx);\n+  } else if (is_weak) {\n+    __ call_VM_leaf(CAST_FROM_FN_PTR(address, ShenandoahRuntime::load_reference_barrier_weak), rax, rbx);\n+  } else {\n+    assert(is_phantom, \"only remaining strength\");\n+    __ call_VM_leaf(CAST_FROM_FN_PTR(address, ShenandoahRuntime::load_reference_barrier_phantom), rax, rbx);\n","filename":"src\/hotspot\/cpu\/x86\/gc\/shenandoah\/shenandoahBarrierSetAssembler_x86.cpp","additions":12,"deletions":14,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -977,1 +977,1 @@\n-  bool is_narrow  = LP64_ONLY(UseCompressedOops &&) !is_native;\n+  bool is_narrow  = UseCompressedOops && !is_native;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/c2\/shenandoahSupport.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}