{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,1 @@\n-  _enabled = false;\n+  _state = Disabled;\n","filename":"src\/hotspot\/os\/bsd\/gc\/z\/zNUMA_bsd.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+#include \"gc\/z\/zNUMA.inline.hpp\"\n@@ -50,1 +51,5 @@\n-  _enabled = UseNUMA && is_numa_supported();\n+  if (!UseNUMA) {\n+    _state = Disabled;\n+  } else {\n+    _state = is_numa_supported() ? Enabled : Unsupported;\n+  }\n@@ -54,1 +59,1 @@\n-  if (!_enabled) {\n+  if (!is_enabled()) {\n@@ -63,1 +68,1 @@\n-  if (!_enabled) {\n+  if (!is_enabled()) {\n@@ -72,1 +77,1 @@\n-  if (!_enabled) {\n+  if (!is_enabled()) {\n","filename":"src\/hotspot\/os\/linux\/gc\/z\/zNUMA_linux.cpp","additions":9,"deletions":4,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,1 @@\n-  _enabled = false;\n+  _state = Disabled;\n","filename":"src\/hotspot\/os\/windows\/gc\/z\/zNUMA_windows.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,1 @@\n+#include \"gc\/z\/zNUMA.inline.hpp\"\n@@ -28,1 +29,1 @@\n-bool ZNUMA::_enabled;\n+ZNUMA::State ZNUMA::_state;\n@@ -34,1 +35,1 @@\n-  if (_enabled) {\n+  if (is_enabled()) {\n@@ -40,1 +41,10 @@\n-  return _enabled ? \"Enabled\" : \"Disabled\";\n+  switch (_state) {\n+  case Enabled:\n+    return \"Enabled\";\n+\n+  case Unsupported:\n+    return \"Unsupported\";\n+\n+  default:\n+    return \"Disabled\";\n+  }\n","filename":"src\/hotspot\/share\/gc\/z\/zNUMA.cpp","additions":14,"deletions":4,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,7 @@\n-  static bool _enabled;\n+  enum State {\n+    Disabled,\n+    Enabled,\n+    Unsupported\n+  };\n+\n+  static State _state;\n","filename":"src\/hotspot\/share\/gc\/z\/zNUMA.hpp","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,1 +30,1 @@\n-  return _enabled;\n+  return _state == Enabled;\n","filename":"src\/hotspot\/share\/gc\/z\/zNUMA.inline.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}