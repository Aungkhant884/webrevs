{"files":[{"patch":"@@ -919,12 +919,0 @@\n-  if (!DisableTHPStackMitigation) {\n-    \/\/ In addition to the glibc guard page that prevents inter-thread-stack hugepage\n-    \/\/ coalescing (see comment in os::Linux::default_guard_size()), we also make\n-    \/\/ sure the stack size itself is not huge-page-size aligned; that makes it much\n-    \/\/ more likely for thread stack boundaries to be unaligned as well and hence\n-    \/\/ protects thread stacks from being targeted by khugepaged.\n-    if (HugePages::thp_pagesize() > 0 &&\n-        is_aligned(stack_size, HugePages::thp_pagesize())) {\n-      stack_size += os::vm_page_size();\n-    }\n-  }\n-\n@@ -951,0 +939,12 @@\n+  if (!DisableTHPStackMitigation) {\n+    \/\/ In addition to the glibc guard page that prevents inter-thread-stack hugepage\n+    \/\/ coalescing (see comment in os::Linux::default_guard_size()), we also make\n+    \/\/ sure the stack size itself is not huge-page-size aligned; that makes it much\n+    \/\/ more likely for thread stack boundaries to be unaligned as well and hence\n+    \/\/ protects thread stacks from being targeted by khugepaged.\n+    if (HugePages::thp_pagesize() > 0 &&\n+        is_aligned(stack_size, HugePages::thp_pagesize())) {\n+      stack_size += os::vm_page_size();\n+    }\n+  }\n+\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"}]}