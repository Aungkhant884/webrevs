{"files":[{"patch":"@@ -594,1 +594,1 @@\n-  ASGCTMark mark;\n+  ASGCTMark mark(thread);\n","filename":"src\/hotspot\/share\/prims\/forte.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -42,7 +42,2 @@\n-  \/\/ NONCOPYABLE(ASGCTMark);\n-  ASGCTMark(JavaThread* thread) {\n-    if (thread != nullptr) {\n-      assert(thread == JavaThread::current(), \"not the current thread\");\n-      thread->set_in_asgct(true);\n-    }\n-  }\n+  JavaThread* _thread;\n+  NONCOPYABLE(ASGCTMark);\n@@ -51,1 +46,6 @@\n-  ASGCTMark() : ASGCTMark(JavaThread::current()) {}\n+  ASGCTMark(JavaThread* thread) : _thread(thread) {\n+    if (_thread != nullptr) {\n+      assert(_thread == Thread::current_or_null_safe(), \"not the current thread\");\n+      _thread->set_in_asgct(true);\n+    }\n+  }\n@@ -53,1 +53,4 @@\n-    JavaThread::current()->set_in_asgct(false);\n+    if (_thread != nullptr) {\n+      assert(_thread == Thread::current_or_null_safe(), \"not the current thread\");\n+      _thread->set_in_asgct(false);\n+    }\n","filename":"src\/hotspot\/share\/prims\/forte.hpp","additions":12,"deletions":9,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -1650,1 +1650,0 @@\n-\n","filename":"src\/hotspot\/share\/runtime\/thread.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}