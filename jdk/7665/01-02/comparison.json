{"files":[{"patch":"@@ -42,2 +42,2 @@\n-        byte[] aliceSecret = new byte[64];\n-        byte[] bobSecret = new byte[64];\n+        byte[] aliceSecret = new byte[80];\n+        byte[] bobSecret = new byte[80];\n@@ -56,2 +56,2 @@\n-            aliceSecret[0] = 0;\n-            bobSecret[0] = 1;\n+            Arrays.fill(aliceSecret, (byte)'a');\n+            Arrays.fill(bobSecret, (byte)'b');\n@@ -61,1 +61,1 @@\n-            alice.generateSecret(aliceSecret, 0);\n+            int aliceLen = alice.generateSecret(aliceSecret, 0);\n@@ -65,1 +65,1 @@\n-            bob.generateSecret(bobSecret, 0);\n+            int bobLen = bob.generateSecret(bobSecret, 0);\n@@ -67,4 +67,4 @@\n-            if (!Arrays.equals(aliceSecret, bobSecret)) {\n-                System.out.println(HexFormat.ofDelimiter(\":\").formatHex(aliceSecret));\n-                System.out.println(HexFormat.ofDelimiter(\":\").formatHex(bobSecret));\n-                throw new RuntimeException();\n+            if (!Arrays.equals(aliceSecret, 0, aliceLen, bobSecret, 0, bobLen)) {\n+                System.out.println(HexFormat.ofDelimiter(\":\").formatHex(aliceSecret, 0, aliceLen));\n+                System.out.println(HexFormat.ofDelimiter(\":\").formatHex(bobSecret, 0, bobLen));\n+                throw new RuntimeException(\"Different secrets observed at runs #\" + i);\n","filename":"test\/jdk\/com\/sun\/crypto\/provider\/KeyAgreement\/DHKeyAgreementPadding.java","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"}]}