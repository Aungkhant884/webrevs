{"files":[{"patch":"@@ -133,0 +133,20 @@\n+    # Check if FFI_GO_CLOSURES is properly defined. On some distributions, notably MacOS AArch64,\n+    # ffitarget.h (included from ffi.h) does not explicitly define FFI_GO_CLOSURES. This makes the\n+    # further include of ffi.h trigger the \"FFI_GO_CLOSURES is undefined\" warning, which fails\n+    # the build when warnings are fatal.\n+    AC_MSG_CHECKING([for FFI_GO_CLOSURES definition])\n+    AC_COMPILE_IFELSE([AC_LANG_PROGRAM([\n+      #include <ffi.h>\n+      #ifndef FFI_GO_CLOSURES\n+      #error \"FFI_GO_CLOSURES is not defined\"\n+      #endif\n+      ][])],\n+      [\n+        AC_MSG_RESULT([yes])\n+      ],\n+      [\n+        AC_MSG_RESULT([no, defining])\n+        LIBFFI_CFLAGS=\"$LIBFFI_CFLAGS -DFFI_GO_CLOSURES=0\"\n+      ]\n+    )\n+\n","filename":"make\/autoconf\/lib-ffi.m4","additions":20,"deletions":0,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -35,4 +35,0 @@\n-#ifdef __APPLE__\n-#define FFI_GO_CLOSURES 0\n-#endif\n-\n","filename":"src\/hotspot\/cpu\/zero\/globalDefinitions_zero.hpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"}]}