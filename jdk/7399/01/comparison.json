{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -57,0 +57,1 @@\n+ * description\n@@ -114,0 +115,3 @@\n+        Arguments.putUnlessNull(bundleParams, CLIOptions.DESCRIPTION.getId(),\n+                getOptionValue(CLIOptions.DESCRIPTION));\n+\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/AddLauncherArguments.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -141,1 +141,1 @@\n-\\          The keys \"module\", \"main-jar\", \"main-class\",\\n\\\n+\\          The keys \"module\", \"main-jar\", \"main-class\", \"description\",\\n\\\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/resources\/HelpResources.properties","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -141,1 +141,1 @@\n-\\          The keys \"module\", \"main-jar\", \"main-class\",\\n\\\n+\\          The keys \"module\", \"main-jar\", \"main-class\", \"description\",\\n\\\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/resources\/HelpResources_ja.properties","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -141,1 +141,1 @@\n-\\          The keys \"module\", \"main-jar\", \"main-class\",\\n\\\n+\\          The keys \"module\", \"main-jar\", \"main-class\", \"description\",\\n\\\n","filename":"src\/jdk.jpackage\/share\/classes\/jdk\/jpackage\/internal\/resources\/HelpResources_zh_CN.properties","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -30,0 +30,1 @@\n+import java.util.Iterator;\n@@ -84,0 +85,8 @@\n+    public String getRawPropertyValue(String key) {\n+        Map.Entry<String, String> entry = rawProperties.stream()\n+                .filter(item -> item.getKey().equals(key))\n+                .findFirst().orElse(null);\n+\n+        return entry == null ? null : entry.getValue();\n+    }\n+\n@@ -245,0 +254,39 @@\n+    private void verifyDescription(JPackageCommand cmd) throws IOException {\n+        if (TKit.isWindows()) {\n+            String expectedDescription = getRawPropertyValue(\"description\");\n+            if (expectedDescription != null) {\n+                Path launcherPath = cmd.appLauncherPath(name);\n+                Executor exec = Executor.of(\"powershell\",\n+                                             \"-NoLogo\",\n+                                             \"-NoProfile\",\n+                                             \"-Command\",\n+                                             \"(Get-Item \\\\\\\"\" +\n+                                             launcherPath.toAbsolutePath() +\n+                                             \"\\\\\\\").VersionInfo | select FileDescription\");\n+                boolean descriptionIsValid = false;\n+                List<String> lines = exec.executeAndGetOutput();\n+                if (lines != null) {\n+                    for (int i = 0; i < lines.size(); i++) {\n+                        if (lines.get(i).trim().equals(\"FileDescription\")) {\n+                            i += 2; \/\/ Skip \"---------------\" and move to description\n+                            descriptionIsValid =\n+                                    expectedDescription.equals(lines.get(i).trim());\n+                        }\n+                    }\n+                }\n+                TKit.assertTrue(descriptionIsValid, \"Invalid file description\");\n+            }\n+        } else if (TKit.isLinux()) {\n+            String expectedDescription = getRawPropertyValue(\"description\");\n+            if (expectedDescription != null) {\n+                Path desktopFile = LinuxHelper.getDesktopFile(cmd, name);\n+                if (Files.exists(desktopFile)) {\n+                    TKit.assertTextStream(\"Comment=\" + expectedDescription)\n+                            .label(String.format(\"[%s] file\", desktopFile))\n+                            .predicate(String::equals)\n+                            .apply(Files.readAllLines(desktopFile).stream());\n+                }\n+            }\n+        }\n+    }\n+\n@@ -248,0 +296,1 @@\n+        verifyDescription(cmd);\n","filename":"test\/jdk\/tools\/jpackage\/helpers\/jdk\/jpackage\/test\/AdditionalLauncher.java","additions":50,"deletions":1,"binary":false,"changes":51,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -43,1 +43,1 @@\n- * launchers.\n+ * launchers with unique description (\"LauncherName Description\").\n@@ -83,1 +83,2 @@\n-                    \"--arguments\", \"the\", \"--arguments\", \"King\");\n+                    \"--arguments\", \"the\", \"--arguments\", \"King\",\n+                    \"--description\", \"AddLauncherTest Description\");\n@@ -92,0 +93,1 @@\n+                .addRawProperties(Map.entry(\"description\", \"Baz2 Description\"))\n@@ -96,0 +98,1 @@\n+                .addRawProperties(Map.entry(\"description\", \"foo Description\"))\n@@ -100,0 +103,1 @@\n+                .addRawProperties(Map.entry(\"description\", \"Bar Description\"))\n","filename":"test\/jdk\/tools\/jpackage\/share\/AddLauncherTest.java","additions":7,"deletions":3,"binary":false,"changes":10,"status":"modified"}]}