{"files":[{"patch":"@@ -6555,2 +6555,3 @@\n-  address generate_cont_thaw(bool return_barrier, bool exception) {\n-    assert(return_barrier || !exception, \"must be\");\n+  address generate_cont_thaw(Continuation::thaw_kind kind) {\n+    bool return_barrier = Continuation::is_thaw_return_barrier(kind);\n+    bool return_barrier_exception = Continuation::is_thaw_return_barrier_exception(kind);\n@@ -6572,1 +6573,1 @@\n-    __ movw(c_rarg1, (return_barrier ? 1 : 0) + (exception ? 1 : 0));\n+    __ movw(c_rarg1, (return_barrier ? 1 : 0));\n@@ -6603,3 +6604,1 @@\n-    if (exception)           __ movw(c_rarg1, (uint32_t)Continuation::thaw_exception);\n-    else if (return_barrier) __ movw(c_rarg1, (uint32_t)Continuation::thaw_return_barrier);\n-    else                     __ movw(c_rarg1, (uint32_t)Continuation::thaw_top);\n+    __ movw(c_rarg1, (uint32_t)kind);\n@@ -6622,1 +6621,1 @@\n-    if (exception) {\n+    if (return_barrier_exception) {\n@@ -6655,1 +6654,1 @@\n-    generate_cont_thaw(false, false);\n+    generate_cont_thaw(Continuation::thaw_top);\n@@ -6666,1 +6665,1 @@\n-    generate_cont_thaw(true, false);\n+    generate_cont_thaw(Continuation::thaw_return_barrier);\n@@ -6677,1 +6676,1 @@\n-    generate_cont_thaw(true, true);\n+    generate_cont_thaw(Continuation::thaw_return_barrier_exception);\n","filename":"src\/hotspot\/cpu\/aarch64\/stubGenerator_aarch64.cpp","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -4510,6 +4510,0 @@\n-  address generate_cont_thaw(bool return_barrier, bool exception) {\n-    if (!Continuations::enabled()) return nullptr;\n-    Unimplemented();\n-    return nullptr;\n-  }\n-\n","filename":"src\/hotspot\/cpu\/ppc\/stubGenerator_ppc.cpp","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -3875,6 +3875,0 @@\n-  address generate_cont_thaw(bool return_barrier, bool exception) {\n-    if (!Continuations::enabled()) return nullptr;\n-    Unimplemented();\n-    return nullptr;\n-  }\n-\n","filename":"src\/hotspot\/cpu\/x86\/stubGenerator_x86_32.cpp","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -7493,2 +7493,3 @@\n-  address generate_cont_thaw(bool return_barrier, bool exception) {\n-    assert(return_barrier || !exception, \"must be\");\n+  address generate_cont_thaw(Continuation::thaw_kind kind) {\n+    bool return_barrier = Continuation::is_thaw_return_barrier(kind);\n+    bool return_barrier_exception = Continuation::is_thaw_return_barrier_exception(kind);\n@@ -7511,1 +7512,1 @@\n-    __ movl(c_rarg1, (return_barrier ? 1 : 0) + (exception ? 1 : 0));\n+    __ movl(c_rarg1, (return_barrier ? 1 : 0));\n@@ -7534,3 +7535,1 @@\n-    if (exception)           __ movl(c_rarg1, (int32_t)Continuation::thaw_exception);\n-    else if (return_barrier) __ movl(c_rarg1, (int32_t)Continuation::thaw_return_barrier);\n-    else                     __ movl(c_rarg1, (int32_t)Continuation::thaw_top);\n+    __ movl(c_rarg1, (int32_t) kind);\n@@ -7550,1 +7549,1 @@\n-    if (exception) {\n+    if (return_barrier_exception) {\n@@ -7573,1 +7572,1 @@\n-    generate_cont_thaw(false, false);\n+    generate_cont_thaw(Continuation::thaw_top);\n@@ -7584,1 +7583,1 @@\n-    generate_cont_thaw(true, false);\n+    generate_cont_thaw(Continuation::thaw_return_barrier);\n@@ -7595,1 +7594,1 @@\n-    generate_cont_thaw(true, true);\n+    generate_cont_thaw(Continuation::thaw_return_barrier_exception);\n","filename":"src\/hotspot\/cpu\/x86\/stubGenerator_x86_64.cpp","additions":9,"deletions":10,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -65,1 +65,1 @@\n-    thaw_exception = 2,\n+    thaw_return_barrier_exception = 2,\n@@ -68,0 +68,10 @@\n+  static bool is_thaw_return_barrier(thaw_kind kind) {\n+    return kind != thaw_top;\n+  }\n+\n+  static bool is_thaw_return_barrier_exception(thaw_kind kind) {\n+    bool r = (kind == thaw_return_barrier_exception);\n+    assert(!r || is_thaw_return_barrier(kind), \"must be\");\n+    return r;\n+  }\n+\n","filename":"src\/hotspot\/share\/runtime\/continuation.hpp","additions":11,"deletions":1,"binary":false,"changes":12,"status":"modified"}]}