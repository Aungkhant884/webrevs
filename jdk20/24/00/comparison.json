{"files":[{"patch":"@@ -2550,1 +2550,2 @@\n-            (ctrl->in(0)->as_If()->proj_out_or_null(1-ctrl->as_Proj()->_con) == NULL ||\n+           !is_zero_trip_guard_if(ctrl->in(0)->as_If()) &&\n+           (ctrl->in(0)->as_If()->proj_out_or_null(1-ctrl->as_Proj()->_con) == NULL ||\n@@ -2559,0 +2560,16 @@\n+bool CountedLoopNode::is_zero_trip_guard_if(const IfNode* iff) {\n+  if (iff->in(1) == NULL || !iff->in(1)->is_Bool()) {\n+    return false;\n+  }\n+  if (iff->in(1)->in(1) == NULL || iff->in(1)->in(1)->Opcode() != Op_CmpI) {\n+    return false;\n+  }\n+  if (iff->in(1)->in(1)->in(1) != NULL && iff->in(1)->in(1)->in(1)->Opcode() == Op_OpaqueZeroTripGuard) {\n+    return true;\n+  }\n+  if (iff->in(1)->in(1)->in(2) != NULL && iff->in(1)->in(1)->in(2)->Opcode() == Op_OpaqueZeroTripGuard) {\n+    return true;\n+  }\n+  return false;\n+}\n+\n@@ -5462,1 +5479,1 @@\n-  if (iffm == NULL || !iffm->is_If()) {\n+  if (iffm == NULL || iffm->Opcode() != Op_If) {\n","filename":"src\/hotspot\/share\/opto\/loopnode.cpp","additions":19,"deletions":2,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -358,0 +358,2 @@\n+\n+  static bool is_zero_trip_guard_if(const IfNode* iff);\n","filename":"src\/hotspot\/share\/opto\/loopnode.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"}]}