{"files":[{"patch":"@@ -43,0 +43,1 @@\n+import static java.util.stream.Collectors.joining;\n@@ -101,1 +102,1 @@\n-        String dotContent = Renderer.graph(typeElement, exports);\n+        String dotContent = new Renderer().graph(typeElement, exports);\n@@ -136,4 +137,1 @@\n-    private static final class Renderer {\n-\n-        private Renderer() {\n-        }\n+    private final class Renderer {\n@@ -142,1 +140,1 @@\n-        static String graph(TypeElement rootClass, Set<String> exports) {\n+        String graph(TypeElement rootClass, Set<String> exports) {\n@@ -158,1 +156,1 @@\n-        private static final class State {\n+        private final class State {\n@@ -162,0 +160,1 @@\n+            private static final String LINK = \"href\";\n@@ -164,0 +163,2 @@\n+            private final TypeElement rootNode;\n+\n@@ -169,0 +170,1 @@\n+                this.rootNode = rootNode;\n@@ -191,0 +193,1 @@\n+                styles.put(LINK, relativeLink(node));\n@@ -197,0 +200,17 @@\n+            \/\/ A permitted class must be in the same package or in the same module.\n+            \/\/ This implies the module is always the same.\n+            private String relativeLink(TypeElement node) {\n+                var util = SealedGraph.this.docletEnvironment.getElementUtils();\n+                var rootPackage = util.getPackageOf(rootNode);\n+                var nodePackage = util.getPackageOf(node);\n+                var backNavigator = rootPackage.getQualifiedName().toString().chars()\n+                        .filter(c -> c == '.')\n+                        .mapToObj(c -> \"..\/\")\n+                        .collect(joining()) +\n+                        \"..\/\";\n+                var forwardNavigator = nodePackage.getQualifiedName().toString()\n+                        .replace(\".\", \"\/\");\n+\n+                return backNavigator + forwardNavigator + \"\/\" + node.getSimpleName() + \".html\";\n+            }\n+\n@@ -212,2 +232,2 @@\n-                                    .collect(Collectors.joining(\" \", \"[\", \"]\")))\n-                            .append(System.lineSeparator());\n+                                    .collect(joining(\" \", \"[\", \"]\")))\n+                            .append(lineSeparator());\n","filename":"make\/jdk\/src\/classes\/build\/tools\/taglet\/SealedGraph.java","additions":29,"deletions":9,"binary":false,"changes":38,"status":"modified"}]}