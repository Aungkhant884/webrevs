{"files":[{"patch":"@@ -305,2 +305,19 @@\n-com.sun.management.jmxremote.serial.filter.pattern=java.lang.*;java.math.BigInteger;java.math.BigDecimal;java.util.*;\\\n-javax.management.*;javax.management.openmbean.*;java.rmi.MarshalledObject;javax.security.auth.Subject;!*\n+com.sun.management.jmxremote.serial.filter.pattern=\\\n+java.lang.*;\\\n+java.lang.reflect.Proxy;\\\n+java.math.BigInteger;\n+java.math.BigDecimal;\n+java.util.*;\\\n+javax.management.*;\\\n+javax.management.modelmbean.*;\\\n+javax.management.monitor.*;\\\n+javax.management.openmbean.*;\\\n+javax.management.relation.*;\\\n+javax.management.remote.*;\\\n+javax.management.remote.rmi.*;\\\n+javax.management.timer.*;\\\n+javax.rmi.ssl.*;\\\n+java.rmi.MarshalledObject;\\\n+java.rmi.dgc.*;\\\n+java.rmi.server.*;\\\n+javax.security.auth.Subject;!*\n","filename":"src\/jdk.management.agent\/share\/conf\/management.properties","additions":19,"deletions":2,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -55,0 +55,1 @@\n+import javax.management.AttributeChangeNotification;\n@@ -58,0 +59,4 @@\n+import javax.management.MBeanNotificationInfo;\n+import javax.management.Notification;\n+import javax.management.NotificationBroadcasterSupport;\n+import javax.management.NotificationListener;\n@@ -92,1 +97,1 @@\n-    public static class Test implements TestMBean {\n+    public static class Test extends NotificationBroadcasterSupport implements TestMBean {\n@@ -97,0 +102,2 @@\n+        private long sequenceNumber = 1;\n+\n@@ -123,0 +130,1 @@\n+            String old = myAttribute2;\n@@ -124,0 +132,4 @@\n+            Notification n = new AttributeChangeNotification(this, sequenceNumber++, System.currentTimeMillis(),\n+                                                             \"String attribute changed\", \"myAttribute2\", \"String\",\n+                                                             old, this.myAttribute2);\n+            sendNotification(n);\n@@ -131,0 +143,9 @@\n+\n+        @Override\n+        public MBeanNotificationInfo[] getNotificationInfo() {\n+            String[] types = new String[] { AttributeChangeNotification.ATTRIBUTE_CHANGE };\n+            String name = AttributeChangeNotification.class.getName();\n+            String description = \"An attribute of this MBean has changed\";\n+            MBeanNotificationInfo info = new MBeanNotificationInfo(types, name, description);\n+            return new MBeanNotificationInfo[] {info};\n+        }\n@@ -439,0 +460,10 @@\n+            \/\/ Notification:\n+            conn.addNotificationListener(name, new NotificationListener() {\n+                public void handleNotification(Notification notification, Object handback) {\n+                    System.out.println(\"Received notification: \" +  notification);\n+                } }, null,  null);\n+            \/\/ Trigger a Notification:\n+            conn.setAttribute(name, new Attribute(\"MyAttribute2\", \"my new string value\"));\n+            \/\/ Receiving the AttributeChangeNotification is not truly important for this test:\n+            try { Thread.sleep(5000); } catch (InterruptedException ie) { }\n+\n","filename":"test\/jdk\/javax\/management\/remote\/mandatory\/connection\/DefaultAgentFilterTest.java","additions":32,"deletions":1,"binary":false,"changes":33,"status":"modified"}]}