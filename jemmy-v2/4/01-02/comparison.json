{"files":[{"patch":"@@ -37,0 +37,2 @@\n+\n+import static org.netbeans.jemmy.drivers.DriverManager.WINDOW_DRIVER_ID;\n@@ -39,0 +41,3 @@\n+\n+import org.netbeans.jemmy.drivers.DriverManager;\n+import org.netbeans.jemmy.drivers.WindowDriver;\n@@ -49,1 +54,0 @@\n-    private UncloseableInternalFrame internalFrame;\n@@ -51,0 +55,1 @@\n+    private WindowDriver oldDriver;\n@@ -60,1 +65,1 @@\n-        internalFrame = new UncloseableInternalFrame(\"JInternalFrameOperatorTest\", true, true, true, true);\n+        JInternalFrame internalFrame = new JInternalFrame(\"JInternalFrameOperatorTest\", true, true, true, true);\n@@ -69,0 +74,33 @@\n+        \/\/override windows driver for the operator to not do anything to close\n+        oldDriver = DriverManager.getWindowDriver(JInternalFrameOperator.class);\n+        DriverManager.setDriver(WINDOW_DRIVER_ID, new WindowDriver() {\n+            @Override\n+            public void activate(ComponentOperator oper) {\n+                oldDriver.activate(oper);\n+            }\n+\n+            @Override\n+            public void requestClose(ComponentOperator oper) {\n+                \/\/do nothing here\n+            }\n+\n+            @Override\n+            public void requestCloseAndThenHide(ComponentOperator oper) {\n+                \/\/do nothing here\n+            }\n+\n+            @Override\n+            public void close(ComponentOperator oper) {\n+                \/\/do nothing here\n+            }\n+\n+            @Override\n+            public void move(ComponentOperator oper, int x, int y) {\n+                oldDriver.move(oper, x, y);\n+            }\n+\n+            @Override\n+            public void resize(ComponentOperator oper, int width, int height) {\n+                oldDriver.resize(oper, width, height);\n+            }\n+        }, JInternalFrameOperator.class);\n@@ -77,0 +115,1 @@\n+        DriverManager.setDriver(WINDOW_DRIVER_ID, oldDriver, JInternalFrameOperator.class);\n@@ -97,13 +136,0 @@\n-\n-    private static class UncloseableInternalFrame extends JInternalFrame {\n-        private boolean done = false;\n-        public UncloseableInternalFrame(String title, boolean resizable, boolean closable, boolean maximizable, boolean iconifiable) {\n-            super(title, resizable, closable, maximizable, iconifiable);\n-        }\n-\n-        @Override\n-        public void setClosed(boolean b) throws PropertyVetoException {\n-            \/\/unless done with the test, we do not want this frame to close ever\n-            super.setClosed(done && b);\n-        }\n-    }\n","filename":"test\/org\/netbeans\/jemmy\/operators\/JInternalFrameOperatorCloseTest.java","additions":41,"deletions":15,"binary":false,"changes":56,"status":"modified"}]}