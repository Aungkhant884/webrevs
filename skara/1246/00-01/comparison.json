{"files":[{"patch":"@@ -205,0 +205,1 @@\n+            \/\/ If the PR have csr label, the CSR request need to be approved.\n@@ -207,1 +208,13 @@\n-            ret.put(\"Change doesn't require a CSR request or the CSR request has been approved\", true);\n+            var csrIssue = Issue.fromStringRelaxed(pr.title()).flatMap(this::getCsrIssue)\n+                    .flatMap(value -> issueProject() != null ? issueProject().issue(value.shortId()) : Optional.empty());\n+            if (csrIssue.isPresent()) {\n+                var resolution = csrIssue.get().properties().get(\"resolution\");\n+                if (resolution != null && !resolution.isNull()\n+                        && resolution.get(\"name\") != null && !resolution.get(\"name\").isNull()\n+                        && csrIssue.get().state() == org.openjdk.skara.issuetracker.Issue.State.CLOSED\n+                        && \"Approved\".equals(resolution.get(\"name\").asString())) {\n+                    \/\/ The PR doesn't have csr label and the csr request has been Approved.\n+                    ret.put(\"Change requires a CSR request to be approved\", true);\n+                }\n+            }\n+            \/\/ At other states, no need to add the csr progress.\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/CheckRun.java","additions":14,"deletions":1,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -75,1 +75,2 @@\n-\n+            \/\/ The PR body should contain the progress about CSR request\n+            assertTrue(pr.body().contains(\"- [ ] Change requires a CSR request to be approved\"));\n@@ -85,0 +86,2 @@\n+            \/\/ The PR body shouldn't contain the progress about CSR request\n+            assertFalse(pr.body().contains(\"Change requires a CSR request to be approved\"));\n@@ -95,0 +98,2 @@\n+            \/\/ The PR body should contain the progress about CSR request\n+            assertTrue(pr.body().contains(\"- [ ] Change requires a CSR request to be approved\"));\n@@ -139,0 +144,2 @@\n+            \/\/ The PR body should contain the progress about CSR request\n+            assertTrue(pr.body().contains(\"- [x] Change requires a CSR request to be approved\"));\n@@ -179,0 +186,2 @@\n+            \/\/ The PR body should contain the progress about CSR request\n+            assertTrue(pr.body().contains(\"- [ ] Change requires a CSR request to be approved\"));\n@@ -216,0 +225,2 @@\n+            \/\/ The PR body shouldn't contain the progress about CSR request\n+            assertFalse(pr.body().contains(\"Change requires a CSR request to be approved\"));\n@@ -223,0 +234,2 @@\n+            \/\/ The PR body shouldn't contain the progress about CSR request\n+            assertFalse(pr.body().contains(\"Change requires a CSR request to be approved\"));\n@@ -233,0 +246,2 @@\n+            \/\/ The PR body should contain the progress about CSR request\n+            assertTrue(pr.body().contains(\"- [ ] Change requires a CSR request to be approved\"));\n@@ -240,0 +255,2 @@\n+            \/\/ The PR body should contain the progress about CSR request\n+            assertTrue(pr.body().contains(\"- [ ] Change requires a CSR request to be approved\"));\n@@ -247,0 +264,2 @@\n+            \/\/ The PR body should contain the progress about CSR request\n+            assertTrue(pr.body().contains(\"- [ ] Change requires a CSR request to be approved\"));\n@@ -284,0 +303,2 @@\n+            \/\/ The PR body shouldn't contain the progress about CSR request\n+            assertFalse(pr.body().contains(\"Change requires a CSR request to be approved\"));\n@@ -325,0 +346,2 @@\n+            \/\/ The PR body should contain the progress about CSR request\n+            assertTrue(pr.body().contains(\"- [ ] Change requires a CSR request to be approved\"));\n@@ -365,0 +388,2 @@\n+            \/\/ The PR body should contain the progress about CSR request\n+            assertTrue(pr.body().contains(\"- [ ] Change requires a CSR request to be approved\"));\n@@ -374,0 +399,2 @@\n+            \/\/ The PR body should contain the progress about CSR request\n+            assertTrue(pr.body().contains(\"- [ ] Change requires a CSR request to be approved\"));\n@@ -418,0 +445,2 @@\n+            \/\/ The PR body should contain the progress about CSR request\n+            assertTrue(pr.body().contains(\"- [ ] Change requires a CSR request to be approved\"));\n@@ -430,0 +459,2 @@\n+            \/\/ The PR body should contain the progress about CSR request\n+            assertTrue(pr.body().contains(\"- [ ] Change requires a CSR request to be approved\"));\n@@ -443,0 +474,2 @@\n+            \/\/ The PR body shouldn't contain the progress about CSR request\n+            assertFalse(pr.body().contains(\"Change requires a CSR request to be approved\"));\n@@ -486,0 +519,2 @@\n+            \/\/ The PR body should contain the progress about CSR request\n+            assertTrue(pr.body().contains(\"- [ ] Change requires a CSR request to be approved\"));\n@@ -498,0 +533,2 @@\n+            \/\/ The PR body should contain the progress about CSR request\n+            assertTrue(pr.body().contains(\"- [ ] Change requires a CSR request to be approved\"));\n@@ -511,0 +548,2 @@\n+            \/\/ The PR body shouldn't contain the progress about CSR request\n+            assertFalse(pr.body().contains(\"Change requires a CSR request to be approved\"));\n@@ -545,0 +584,2 @@\n+            \/\/ The PR body should contain the progress about CSR request\n+            assertTrue(pr.body().contains(\"- [ ] Change requires a CSR request to be approved\"));\n@@ -583,3 +624,2 @@\n-\n-            \/\/ The body should contain the progress about CSR request\n-            assertTrue(pr.body().contains(\"- [x] Change doesn't require a CSR request or the CSR request has been approved\"));\n+            \/\/ The PR body shouldn't contain the progress about CSR request\n+            assertFalse(pr.body().contains(\"Change requires a CSR request to be approved\"));\n@@ -604,1 +644,1 @@\n-            \/\/ The body should contain the progress about CSR request\n+            \/\/ The PR body should contain the progress about CSR request\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/CSRTests.java","additions":45,"deletions":5,"binary":false,"changes":50,"status":"modified"}]}