{"files":[{"patch":"@@ -38,0 +38,2 @@\n+import static org.openjdk.skara.bots.jep.JEPBotFactory.NAME;\n+\n@@ -88,4 +90,1 @@\n-                if (pr.labelNames().contains(JEP_LABEL)) {\n-                    pr.removeLabel(JEP_LABEL);\n-                }\n-                log.info(\"The jep issue doesn't exist.\");\n+                log.severe(\"The issue `\" + issueId + \"` doesn't exist.\");\n@@ -98,4 +97,1 @@\n-                if (pr.labelNames().contains(JEP_LABEL)) {\n-                    pr.removeLabel(JEP_LABEL);\n-                }\n-                log.warning(\"The issue `\" + issue.id() + \"` is not a JEP.\");\n+                log.severe(\"The issue `\" + issue.id() + \"` is not a JEP.\");\n@@ -143,1 +139,1 @@\n-        return JEP_LABEL;\n+        return NAME;\n","filename":"bots\/jep\/src\/main\/java\/org\/openjdk\/skara\/bots\/jep\/JEPBot.java","additions":5,"deletions":9,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -210,1 +210,1 @@\n-            assertFalse(pr.labelNames().contains(JEPBot.JEP_LABEL));\n+            assertTrue(pr.labelNames().contains(JEPBot.JEP_LABEL));\n@@ -241,1 +241,1 @@\n-            \/\/ Add the `jep` label and add the non-existing jep comment\n+            \/\/ Add the `jep` label and add the wrong type issue comment\n@@ -247,1 +247,1 @@\n-            assertFalse(pr.labelNames().contains(JEPBot.JEP_LABEL));\n+            assertTrue(pr.labelNames().contains(JEPBot.JEP_LABEL));\n","filename":"bots\/jep\/src\/test\/java\/org\/openjdk\/skara\/bots\/jep\/JEPBotTests.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -500,2 +500,2 @@\n-            var csrIssueLinks = updatedJepIssue.links();\n-            assertEquals(0, csrIssueLinks.size());\n+            var jepIssueLinks = updatedJepIssue.links();\n+            assertEquals(0, jepIssueLinks.size());\n@@ -503,2 +503,2 @@\n-            var csrIssueComments = updatedJepIssue.comments();\n-            assertEquals(0, csrIssueComments.size());\n+            var jepIssueComments = updatedJepIssue.comments();\n+            assertEquals(0, jepIssueComments.size());\n","filename":"bots\/notify\/src\/test\/java\/org\/openjdk\/skara\/bots\/notify\/issue\/IssueNotifierTests.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -138,2 +138,2 @@\n-        } else if (\"Draft\".equals(issueStatus) || \"Submitted\".equals(issueStatus) || \"Candidate\".equals(issueStatus) ||\n-                \"Proposed to Target\".equals(issueStatus) || \"Proposed to Drop\".equals(issueStatus) || \"Closed\".equals(issueStatus)) {\n+        } else {\n+            \/\/ The current issue status may be \"Draft\", \"Submitted\", \"Candidate\", \"Proposed to Target\", \"Proposed to Drop\" or \"Closed without Delivered\"\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/JEPCommand.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -29,1 +29,0 @@\n-import org.openjdk.skara.issuetracker.jira.JiraProject;\n@@ -43,0 +42,1 @@\n+import static org.openjdk.skara.issuetracker.jira.JiraProject.JEP_NUMBER;\n@@ -1215,1 +1215,1 @@\n-                    Map.of(\"issuetype\", JSON.of(\"JEP\"), \"status\", JSON.object().put(\"name\", \"Submitted\"), JiraProject.JEP_NUMBER, JSON.of(\"123\")));\n+                    Map.of(\"issuetype\", JSON.of(\"JEP\"), \"status\", JSON.object().put(\"name\", \"Submitted\"), JEP_NUMBER, JSON.of(\"123\")));\n@@ -1238,2 +1238,8 @@\n-            \/\/ Set the state of the jep issue to `Targeted`\n-            jepIssue.setProperty(\"status\", JSON.object().put(\"name\", \"Submitted\"));\n+            \/\/ Set the state of the jep issue to `Targeted`.\n+            \/\/ This step is not necessary, because the JEPBot is not actually running\n+            \/\/ in this test case. But it is good to keep it to show the logic.\n+            jepIssue.setProperty(\"status\", JSON.object().put(\"name\", \"Targeted\"));\n+\n+            \/\/ Simulate the JEPBot to remove the `jep` label when the jep issue has been targeted.\n+            jepIssue.removeLabel(\"jep\");\n+\n@@ -1244,1 +1250,1 @@\n-            \/\/ PR should have two issues\n+            \/\/ PR should have two issues even though the jep issue has been targeted\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/CheckTests.java","additions":11,"deletions":5,"binary":false,"changes":16,"status":"modified"}]}