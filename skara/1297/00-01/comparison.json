{"files":[{"patch":"@@ -52,1 +52,1 @@\n-        if (!(other instanceof JEPBot otherBot))\n+        if (!(other instanceof JEPBot otherBot)) {\n@@ -54,0 +54,1 @@\n+        }\n@@ -69,1 +70,1 @@\n-                if (pr.labelNames().contains(JEP_LABEL))\n+                if (pr.labelNames().contains(JEP_LABEL)) {\n@@ -71,0 +72,1 @@\n+                }\n@@ -77,1 +79,1 @@\n-                if (pr.labelNames().contains(JEP_LABEL))\n+                if (pr.labelNames().contains(JEP_LABEL)) {\n@@ -79,0 +81,1 @@\n+                }\n@@ -85,1 +88,1 @@\n-                if (pr.labelNames().contains(JEP_LABEL))\n+                if (pr.labelNames().contains(JEP_LABEL)) {\n@@ -87,0 +90,1 @@\n+                }\n@@ -94,1 +98,1 @@\n-                if (pr.labelNames().contains(JEP_LABEL))\n+                if (pr.labelNames().contains(JEP_LABEL)) {\n@@ -96,0 +100,1 @@\n+                }\n","filename":"bots\/jep\/src\/main\/java\/org\/openjdk\/skara\/bots\/jep\/JEPBot.java","additions":10,"deletions":5,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+import org.openjdk.skara.issuetracker.jira.JiraProject;\n@@ -50,1 +51,0 @@\n-    private static final String JEP_NUMBER = \"customfield_10701\";\n@@ -471,1 +471,1 @@\n-                    Map.of(\"issuetype\", JSON.of(\"JEP\"), \"status\", JSON.object().put(\"name\", \"Submitted\"), JEP_NUMBER, JSON.of(\"123\")));\n+                    Map.of(\"issuetype\", JSON.of(\"JEP\"), \"status\", JSON.object().put(\"name\", \"Submitted\"), JiraProject.JEP_NUMBER, JSON.of(\"123\")));\n","filename":"bots\/notify\/src\/test\/java\/org\/openjdk\/skara\/bots\/notify\/issue\/IssueNotifierTests.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -158,3 +158,3 @@\n-        var issueOpt = getJepIssueFromIssueTracker();\n-        if (issueOpt.isPresent()) {\n-            return Issue.fromStringRelaxed(issueOpt.get().id() + \": \" + issueOpt.get().title());\n+        var comment = getJepComment();\n+        if (comment.isPresent()) {\n+            return Issue.fromStringRelaxed(comment.get().group(2) + \": \" + comment.get().group(3));\n@@ -165,1 +165,1 @@\n-    private Optional<org.openjdk.skara.issuetracker.Issue> getJepIssueFromIssueTracker() {\n+    private Optional<Matcher> getJepComment() {\n@@ -182,11 +182,1 @@\n-        var issueOpt = issueProject().issue(issueId);\n-        if (issueOpt.isEmpty()) {\n-            return Optional.empty();\n-        }\n-        var issue = issueOpt.get();\n-\n-        var issueType = issue.properties().get(\"issuetype\");\n-        if (issueType != null && \"JEP\".equals(issueType.asString())) {\n-            return issueOpt;\n-        }\n-        return Optional.empty();\n+        return Optional.of(jepComment);\n@@ -265,14 +255,3 @@\n-            var issueOpt = getJepIssueFromIssueTracker();\n-            if (issueOpt.isPresent()) {\n-                var issue = issueOpt.get();\n-                var issueStatus = issue.properties().get(\"status\").get(\"name\").asString();\n-                var resolution = issue.properties().get(\"resolution\");\n-                String resolutionName = \"\";\n-                if (resolution != null && !resolution.isNull() &&\n-                        resolution.get(\"name\") != null && !resolution.get(\"name\").isNull()) {\n-                    resolutionName = resolution.get(\"name\").asString();\n-                }\n-                if (\"Targeted\".equals(issueStatus) || \"Integrated\".equals(issueStatus) ||\n-                    \"Completed\".equals(issueStatus) || (\"Closed\".equals(issueStatus) && \"Delivered\".equals(resolutionName))) {\n-                    ret.put(\"Change requires a JEP request to be targeted\", true);\n-                }\n+            var comment = getJepComment();\n+            if (comment.isPresent()) {\n+                ret.put(\"Change requires a JEP request to be targeted\", true);\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/CheckRun.java","additions":8,"deletions":29,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -39,1 +39,0 @@\n-    private static final Pattern issuePattern = Pattern.compile(\"(([A-Za-z]+-)?[0-9]+)(?: |$)\");\n@@ -50,1 +49,1 @@\n-                 * `\/jep [unneeded|uneeded]`\n+                 * `\/jep unneeded`\n@@ -58,1 +57,0 @@\n-                 * `\/jep uneeded`\n@@ -156,1 +154,1 @@\n-        return \"require a JDK enhancement proposal for this pull request\";\n+        return \"require a JDK Enhancement Proposal for this pull request\";\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/JEPCommand.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -29,0 +29,1 @@\n+import org.openjdk.skara.issuetracker.jira.JiraProject;\n@@ -44,2 +45,0 @@\n-    private static final String JEP_NUMBER = \"customfield_10701\";\n-\n@@ -1216,1 +1215,1 @@\n-                    Map.of(\"issuetype\", JSON.of(\"JEP\"), \"status\", JSON.object().put(\"name\", \"Submitted\"), JEP_NUMBER, JSON.of(\"123\")));\n+                    Map.of(\"issuetype\", JSON.of(\"JEP\"), \"status\", JSON.object().put(\"name\", \"Submitted\"), JiraProject.JEP_NUMBER, JSON.of(\"123\")));\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/CheckTests.java","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"}]}