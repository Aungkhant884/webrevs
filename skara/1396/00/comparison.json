{"files":[{"patch":"@@ -661,7 +661,1 @@\n-        \/\/ GitLab does not allow adding\/removing single labels, only setting the full list\n-        \/\/ We retrieve the list again here to try to minimize the race condition window\n-        var currentJson = request.get(\"\").execute().asObject();\n-        var labels = Stream.concat(currentJson.get(\"labels\").stream()\n-                                .map(JSONValue::asString),\n-                        Stream.of(label))\n-                .collect(Collectors.toSet());\n+        labels = null;\n@@ -669,1 +663,1 @@\n-                .body(\"labels\", String.join(\",\", labels))\n+                .body(\"add_labels\", label)\n@@ -679,1 +673,0 @@\n-        this.labels = labels.stream().sorted().toList();\n@@ -684,5 +677,1 @@\n-        var currentJson = request.get(\"\").execute().asObject();\n-        var labels = currentJson.get(\"labels\").stream()\n-                .map(JSONValue::asString)\n-                .filter(l -> !l.equals(label))\n-                .collect(Collectors.toSet());\n+        labels = null;\n@@ -690,1 +679,1 @@\n-                .body(\"labels\", String.join(\",\", labels))\n+                .body(\"remove_labels\", label)\n@@ -700,1 +689,0 @@\n-        this.labels = labels.stream().sorted().toList();\n@@ -713,0 +701,6 @@\n+        if (labels == null) {\n+            labels = request.get(\"\").execute().get(\"labels\").stream()\n+                    .map(JSONValue::asString)\n+                    .sorted()\n+                    .collect(Collectors.toList());\n+        }\n","filename":"forge\/src\/main\/java\/org\/openjdk\/skara\/forge\/gitlab\/GitLabMergeRequest.java","additions":10,"deletions":16,"binary":false,"changes":26,"status":"modified"}]}