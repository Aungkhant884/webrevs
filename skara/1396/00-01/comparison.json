{"files":[{"patch":"@@ -701,7 +701,1 @@\n-        if (labels == null) {\n-            labels = request.get(\"\").execute().get(\"labels\").stream()\n-                    .map(JSONValue::asString)\n-                    .sorted()\n-                    .collect(Collectors.toList());\n-        }\n-        return labels.stream()\n+        return labelNames().stream()\n@@ -716,0 +710,6 @@\n+        if (labels == null) {\n+            labels = request.get(\"\").execute().get(\"labels\").stream()\n+                    .map(JSONValue::asString)\n+                    .sorted()\n+                    .collect(Collectors.toList());\n+        }\n","filename":"forge\/src\/main\/java\/org\/openjdk\/skara\/forge\/gitlab\/GitLabMergeRequest.java","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -78,0 +78,30 @@\n+\n+    @Test\n+    void testLabels() throws IOException {\n+        var settings = ManualTestSettings.loadManualTestSettings();\n+        var username = settings.getProperty(\"gitlab.user\");\n+        var token = settings.getProperty(\"gitlab.pat\");\n+        var credential = new Credential(username, token);\n+        var uri = URIBuilder.base(settings.getProperty(\"gitlab.uri\")).build();\n+        var gitLabHost = new GitLabHost(\"gitlab\", uri, false, credential, Set.of());\n+        var gitLabRepo = gitLabHost.repository(settings.getProperty(\"gitlab.repository\")).orElseThrow();\n+        var gitLabMergeRequest = gitLabRepo.pullRequest(settings.getProperty(\"gitlab.merge.request.id\"));\n+\n+        \/\/ Get the labels\n+        var labels = gitLabMergeRequest.labelNames();\n+        assertEquals(1, labels.size());\n+        assertEquals(\"test\", labels.get(0));\n+\n+        \/\/ Add a label\n+        gitLabMergeRequest.addLabel(\"test1\");\n+        labels = gitLabMergeRequest.labelNames();\n+        assertEquals(2, labels.size());\n+        assertEquals(\"test\", labels.get(0));\n+        assertEquals(\"test1\", labels.get(1));\n+\n+        \/\/ Remove a label\n+        gitLabMergeRequest.removeLabel(\"test1\");\n+        labels = gitLabMergeRequest.labelNames();\n+        assertEquals(1, labels.size());\n+        assertEquals(\"test\", labels.get(0));\n+    }\n","filename":"forge\/src\/test\/java\/org\/openjdk\/skara\/forge\/gitlab\/GitLabRestApiTest.java","additions":30,"deletions":0,"binary":false,"changes":30,"status":"modified"}]}