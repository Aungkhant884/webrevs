{"files":[{"patch":"@@ -26,1 +26,1 @@\n-import org.openjdk.skara.mailinglist.MailingList;\n+import org.openjdk.skara.mailinglist.MailingListReader;\n@@ -34,1 +34,1 @@\n-    private final MailingList list;\n+    private final MailingListReader list;\n@@ -36,1 +36,1 @@\n-    ArchiveReaderWorkItem(MailingListArchiveReaderBot bot, MailingList list) {\n+    ArchiveReaderWorkItem(MailingListArchiveReaderBot bot, MailingListReader list) {\n","filename":"bots\/mlbridge\/src\/main\/java\/org\/openjdk\/skara\/bots\/mlbridge\/ArchiveReaderWorkItem.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -174,1 +174,1 @@\n-    private List<Email> parseArchive(MailingList archive) {\n+    private List<Email> parseArchive(MailingListReader archive) {\n@@ -256,1 +256,1 @@\n-        var reviewArchiveList = mbox.getList(pr.id());\n+        var reviewArchiveList = mbox.getListReader(pr.id());\n","filename":"bots\/mlbridge\/src\/main\/java\/org\/openjdk\/skara\/bots\/mlbridge\/ArchiveWorkItem.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -39,1 +39,1 @@\n-    private final MailingList list;\n+    private final MailingListReader list;\n@@ -48,1 +48,1 @@\n-    MailingListArchiveReaderBot(EmailAddress archivePoster, MailingList list, Set<HostedRepository> repositories) {\n+    MailingListArchiveReaderBot(EmailAddress archivePoster, MailingListReader list, Set<HostedRepository> repositories) {\n","filename":"bots\/mlbridge\/src\/main\/java\/org\/openjdk\/skara\/bots\/mlbridge\/MailingListArchiveReaderBot.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -91,1 +91,0 @@\n-        var listNamesForReading = new HashSet<EmailAddress>();\n@@ -115,6 +114,11 @@\n-            var listsForReading = listNamesForReading.stream()\n-                                                     .map(EmailAddress::localPart)\n-                                                     .collect(Collectors.toList());\n-            var bot = new MailingListArchiveReaderBot(from, mailmanServer.getList(listsForReading.toArray(new String[0])), allRepositories);\n-            ret.add(bot);\n-\n+            if (!repoConfig.contains(\"bidirectional\") || repoConfig.get(\"bidirectional\").asBoolean()) {\n+                var listNamesForReading = new HashSet<EmailAddress>();\n+                for (var list : lists) {\n+                    listNamesForReading.add(list.list());\n+                }\n+                var listsForReading = listNamesForReading.stream()\n+                                                         .map(EmailAddress::localPart)\n+                                                         .collect(Collectors.toList());\n+                var bot = new MailingListArchiveReaderBot(from, mailmanServer.getListReader(listsForReading.toArray(new String[0])), allRepositories);\n+                ret.add(bot);\n+            }\n@@ -168,5 +172,0 @@\n-            if (!repoConfig.contains(\"bidirectional\") || repoConfig.get(\"bidirectional\").asBoolean()) {\n-                for (var list : lists) {\n-                    listNamesForReading.add(list.list());\n-                }\n-            }\n","filename":"bots\/mlbridge\/src\/main\/java\/org\/openjdk\/skara\/bots\/mlbridge\/MailingListBridgeBotFactory.java","additions":11,"deletions":12,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -89,1 +89,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -165,1 +165,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -241,1 +241,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n","filename":"bots\/mlbridge\/src\/test\/java\/org\/openjdk\/skara\/bots\/mlbridge\/MailingListArchiveReaderBotTests.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -218,1 +218,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -800,1 +800,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -888,1 +888,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -1005,1 +1005,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -1608,1 +1608,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -1735,1 +1735,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -2900,1 +2900,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress1.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress1.address());\n@@ -3032,1 +3032,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n","filename":"bots\/mlbridge\/src\/test\/java\/org\/openjdk\/skara\/bots\/mlbridge\/MailingListBridgeBotTests.java","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -55,1 +55,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -127,1 +127,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -199,1 +199,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -277,1 +277,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -341,1 +341,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -439,1 +439,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -525,1 +525,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -616,1 +616,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -713,1 +713,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -809,1 +809,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -928,1 +928,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -1022,1 +1022,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n@@ -1102,1 +1102,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress.address());\n+            var mailmanList = mailmanServer.getListReader(listAddress.address());\n","filename":"bots\/notify\/src\/test\/java\/org\/openjdk\/skara\/bots\/notify\/mailinglist\/MailingListNotifierTests.java","additions":13,"deletions":13,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n-public interface MailingList {\n+public interface MailingListReader {\n","filename":"mailinglist\/src\/main\/java\/org\/openjdk\/skara\/mailinglist\/MailingListReader.java","additions":1,"deletions":1,"binary":false,"changes":2,"previous_filename":"mailinglist\/src\/main\/java\/org\/openjdk\/skara\/mailinglist\/MailingList.java","status":"renamed"},{"patch":"@@ -28,1 +28,1 @@\n-    MailingList getList(String... names);\n+    MailingListReader getListReader(String... listNames);\n","filename":"mailinglist\/src\/main\/java\/org\/openjdk\/skara\/mailinglist\/MailingListServer.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -37,1 +37,1 @@\n-public class MailmanList implements MailingList {\n+public class MailmanListReader implements MailingListReader {\n@@ -47,1 +47,1 @@\n-    MailmanList(MailmanServer server, Collection<String> names) {\n+    MailmanListReader(MailmanServer server, Collection<String> names) {\n","filename":"mailinglist\/src\/main\/java\/org\/openjdk\/skara\/mailinglist\/mailman\/MailmanListReader.java","additions":2,"deletions":2,"binary":false,"changes":4,"previous_filename":"mailinglist\/src\/main\/java\/org\/openjdk\/skara\/mailinglist\/mailman\/MailmanList.java","status":"renamed"},{"patch":"@@ -74,2 +74,2 @@\n-    public MailingList getList(String... names) {\n-        return new MailmanList(this, Arrays.asList(names));\n+    public MailingListReader getListReader(String... listNames) {\n+        return new MailmanListReader(this, Arrays.asList(listNames));\n","filename":"mailinglist\/src\/main\/java\/org\/openjdk\/skara\/mailinglist\/mailman\/MailmanServer.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -36,1 +36,1 @@\n-public class MboxFileList implements MailingList {\n+public class MboxFileListReader implements MailingListReader {\n@@ -41,1 +41,1 @@\n-    MboxFileList(Path base, Collection<String> names) {\n+    MboxFileListReader(Path base, Collection<String> names) {\n","filename":"mailinglist\/src\/main\/java\/org\/openjdk\/skara\/mailinglist\/mboxfile\/MboxFileListReader.java","additions":2,"deletions":2,"binary":false,"changes":4,"previous_filename":"mailinglist\/src\/main\/java\/org\/openjdk\/skara\/mailinglist\/mboxfile\/MboxFileList.java","status":"renamed"},{"patch":"@@ -86,2 +86,2 @@\n-    public MailingList getList(String... names) {\n-        return new MboxFileList(base, Arrays.asList(names));\n+    public MailingListReader getListReader(String... listNames) {\n+        return new MboxFileListReader(base, Arrays.asList(listNames));\n","filename":"mailinglist\/src\/main\/java\/org\/openjdk\/skara\/mailinglist\/mboxfile\/MboxFileListServer.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -41,1 +41,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress);\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -66,1 +66,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress);\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -112,1 +112,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress);\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n@@ -146,1 +146,1 @@\n-            var mailmanList = mailmanServer.getList(listAddress);\n+            var mailmanList = mailmanServer.getListReader(listAddress);\n","filename":"mailinglist\/src\/test\/java\/org\/openjdk\/skara\/mailinglist\/MailmanTests.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -42,1 +42,1 @@\n-            var list = mbox.getList(\"test\");\n+            var list = mbox.getListReader(\"test\");\n@@ -63,1 +63,1 @@\n-            var list = mbox.getList(\"test\");\n+            var list = mbox.getListReader(\"test\");\n@@ -102,1 +102,1 @@\n-            var list = mbox.getList(\"test\");\n+            var list = mbox.getListReader(\"test\");\n@@ -112,1 +112,1 @@\n-            var list = mbox.getList(\"test\");\n+            var list = mbox.getListReader(\"test\");\n@@ -135,1 +135,1 @@\n-            var list = mbox.getList(\"test\");\n+            var list = mbox.getListReader(\"test\");\n@@ -160,1 +160,1 @@\n-            var list = mbox.getList(\"test\");\n+            var list = mbox.getListReader(\"test\");\n@@ -193,1 +193,1 @@\n-            var list = mbox.getList(\"test\");\n+            var list = mbox.getListReader(\"test\");\n@@ -227,1 +227,1 @@\n-            var list = mbox.getList(\"test\");\n+            var list = mbox.getListReader(\"test\");\n@@ -268,1 +268,1 @@\n-            var list = mbox.getList(\"test\");\n+            var list = mbox.getListReader(\"test\");\n@@ -330,1 +330,1 @@\n-            var list = mbox.getList(\"test1\", \"test2\");\n+            var list = mbox.getListReader(\"test1\", \"test2\");\n@@ -374,1 +374,1 @@\n-            var list = mbox.getList(\"test1\", \"test2\");\n+            var list = mbox.getListReader(\"test1\", \"test2\");\n","filename":"mailinglist\/src\/test\/java\/org\/openjdk\/skara\/mailinglist\/MboxTests.java","additions":11,"deletions":11,"binary":false,"changes":22,"status":"modified"}]}