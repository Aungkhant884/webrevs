{"files":[{"patch":"@@ -325,1 +325,0 @@\n-\n@@ -332,3 +331,1 @@\n-    WebrevGenerator generator(PullRequest pr, Repository localRepository, Path scratchPath, HostedRepositoryPool hostedRepositoryPool) throws IOException {\n-        var jsonLocalStorage = jsonStorage == null ? null : hostedRepositoryPool.checkout(jsonStorage, storageRef, scratchPath);\n-        var htmlLocalStorage = htmlStorage == null ? null : hostedRepositoryPool.checkout(htmlStorage, storageRef, scratchPath);\n+    WebrevGenerator generator(PullRequest pr, Repository localRepository, Path scratchPath, HostedRepositoryPool hostedRepositoryPool) {\n@@ -337,0 +334,20 @@\n+            Repository jsonLocalStorage = null;\n+            Repository htmlLocalStorage = null;\n+\n+            private void initializeLocalStorage() {\n+                if (jsonLocalStorage == null && !(jsonStorage == null)) {\n+                    try {\n+                        jsonLocalStorage = hostedRepositoryPool.checkout(jsonStorage, storageRef, scratchPath);\n+                    } catch (IOException e) {\n+                        throw new RuntimeException(e);\n+                    }\n+                }\n+                if (htmlLocalStorage == null && !(htmlStorage == null)) {\n+                    try {\n+                        htmlLocalStorage = hostedRepositoryPool.checkout(htmlStorage, storageRef, scratchPath);\n+                    } catch (IOException e) {\n+                        throw new RuntimeException(e);\n+                    }\n+                }\n+            }\n+\n@@ -339,0 +356,1 @@\n+                initializeLocalStorage();\n@@ -345,0 +363,1 @@\n+                initializeLocalStorage();\n","filename":"bots\/mlbridge\/src\/main\/java\/org\/openjdk\/skara\/bots\/mlbridge\/WebrevStorage.java","additions":23,"deletions":4,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -48,1 +48,1 @@\n-        private static Set<String> healthySet = new HashSet<>();\n+        private static Set<Path> healthySet = new HashSet<>();\n@@ -125,0 +125,1 @@\n+            healthySet.add(path);\n@@ -170,1 +171,1 @@\n-            if (healthySet.contains(path.toString())) {\n+            if (healthySet.contains(path)) {\n@@ -175,1 +176,1 @@\n-                    healthySet.add(path.toString());\n+                    healthySet.add(path);\n","filename":"forge\/src\/main\/java\/org\/openjdk\/skara\/forge\/HostedRepositoryPool.java","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"}]}