{"files":[{"patch":"@@ -152,1 +152,1 @@\n-                           .filter(mr -> !mr.group(2).endsWith(\" (**CSR**)\") && !mr.group(2).endsWith(\" (**JEP**)\"))\n+                           .filter(mr -> !mr.group(2).endsWith(\" (**CSR**)\") && !mr.group(2).endsWith(\" (**CSR**) (Withdrawn)\") && !mr.group(2).endsWith(\" (**JEP**)\"))\n","filename":"bots\/notify\/src\/main\/java\/org\/openjdk\/skara\/bots\/notify\/PullRequestWorkItem.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -410,0 +410,2 @@\n+            var withdrawnCsrIssue = issueProject.createIssue(\"This is a withdrawn csr issue\", List.of(\"Indeed\"), Map.of(\"issuetype\", JSON.of(\"CSR\")));\n+            issue.addLink(Link.create(withdrawnCsrIssue, \"csr for\").build());\n@@ -418,1 +420,3 @@\n-                    \" * [\" + csrIssue.id() + \"](http:\/\/www.test2.test\/): This is a csr issue (**CSR**)\");\n+                    \" * [\" + csrIssue.id() + \"](http:\/\/www.test2.test\/): This is a csr issue (**CSR**)\\n\" +\n+                    \" * [\" + withdrawnCsrIssue.id() + \"](http:\/\/www.test3.test\/): This is a withdrawn csr issue (**CSR**) (Withdrawn)\\n\"\n+            );\n@@ -426,0 +430,1 @@\n+            var updatedWithdrawnCsrIssue = issueProject.issue(withdrawnCsrIssue.id()).orElseThrow();\n@@ -429,1 +434,1 @@\n-            assertEquals(2, issueLinks.size());\n+            assertEquals(3, issueLinks.size());\n@@ -431,1 +436,2 @@\n-            assertEquals(pr.webUrl(), issueLinks.get(1).uri().orElseThrow());\n+            assertEquals(\"csr for\", issueLinks.get(1).relationship().orElseThrow());\n+            assertEquals(pr.webUrl(), issueLinks.get(2).uri().orElseThrow());\n@@ -441,1 +447,1 @@\n-            assertEquals(\"csr for\", issueLinks.get(0).relationship().orElseThrow());\n+            assertEquals(\"csr of\", csrIssueLinks.get(0).relationship().orElseThrow());\n@@ -445,0 +451,8 @@\n+\n+            \/\/ Withdrawn csr issue shouldn't have the PR link or PR comment.\n+            var withdrawnCsrIssueLinks = updatedWithdrawnCsrIssue.links();\n+            assertEquals(1, withdrawnCsrIssueLinks.size());\n+            assertEquals(\"csr of\", withdrawnCsrIssueLinks.get(0).relationship().orElseThrow());\n+\n+            var withdrawnCsrIssueComments = updatedWithdrawnCsrIssue.comments();\n+            assertEquals(0, withdrawnCsrIssueComments.size());\n","filename":"bots\/notify\/src\/test\/java\/org\/openjdk\/skara\/bots\/notify\/issue\/IssueNotifierTests.java","additions":18,"deletions":4,"binary":false,"changes":22,"status":"modified"}]}