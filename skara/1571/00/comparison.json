{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -53,0 +53,1 @@\n+    implementation project(':network')\n","filename":"cli\/build.gradle","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,0 +36,1 @@\n+    requires org.openjdk.skara.network;\n","filename":"cli\/src\/main\/java\/module-info.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,0 +26,1 @@\n+import org.openjdk.skara.network.UncheckedRestException;\n@@ -231,1 +232,11 @@\n-            commands.get(command).main(commandArgs);\n+            try {\n+                commands.get(command).main(commandArgs);\n+            } catch (UncheckedRestException e) {\n+                if (e.getStatusCode() == 401) {\n+                    System.err.println(\"Unauthorized: You do not have access to \" + e.getRequest().uri().toString());\n+                    System.err.println(\"Please see the page below to correctly configure your personal access token.\");\n+                    System.err.println(\"https:\/\/wiki.openjdk.org\/display\/SKARA\/CLI+Tools#CLITools-PersonalAccessToken\");\n+                } else {\n+                    throw e;\n+                }\n+            }\n","filename":"cli\/src\/main\/java\/org\/openjdk\/skara\/cli\/GitSkara.java","additions":13,"deletions":2,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -376,1 +376,1 @@\n-            throw new UncheckedRestException(\"Failed to parse response\", e, response.statusCode());\n+            throw new UncheckedRestException(\"Failed to parse response\", e, response.statusCode(), response.request());\n@@ -391,1 +391,1 @@\n-            throw new UncheckedRestException(response.statusCode());\n+            throw new UncheckedRestException(response.statusCode(), response.request());\n@@ -534,1 +534,1 @@\n-            throw new UncheckedRestException(response.statusCode());\n+            throw new UncheckedRestException(response.statusCode(), response.request());\n","filename":"network\/src\/main\/java\/org\/openjdk\/skara\/network\/RestRequest.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,0 +25,2 @@\n+import java.net.http.HttpRequest;\n+\n@@ -33,2 +35,4 @@\n-    public UncheckedRestException(int statusCode) {\n-        this(\"Request returned bad status\", null, statusCode);\n+    HttpRequest request;\n+\n+    public UncheckedRestException(int statusCode, HttpRequest request) {\n+        this(\"Request returned bad status\", null, statusCode, request);\n@@ -37,2 +41,2 @@\n-    public UncheckedRestException(String message, Throwable cause, int statusCode) {\n-        super(\"[\" +statusCode + \"] \" + message, cause);\n+    public UncheckedRestException(String message, Throwable cause, int statusCode, HttpRequest request) {\n+        super(\"[\" + statusCode + \"] \" + message, cause);\n@@ -40,0 +44,1 @@\n+        this.request = request;\n@@ -45,0 +50,4 @@\n+\n+    public HttpRequest getRequest() {\n+        return request;\n+    }\n","filename":"network\/src\/main\/java\/org\/openjdk\/skara\/network\/UncheckedRestException.java","additions":14,"deletions":5,"binary":false,"changes":19,"status":"modified"}]}