{"files":[{"patch":"@@ -84,1 +84,1 @@\n-        pb.environment().putAll(GitRepository.NO_CONFIG_ENV);\n+        pb.environment().putAll(GitRepository.currentEnv);\n","filename":"vcs\/src\/main\/java\/org\/openjdk\/skara\/vcs\/git\/GitCommits.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -41,1 +41,1 @@\n-    public final static Map<String, String> NO_CONFIG_ENV = Map.of(\n+    private final static Map<String, String> NO_CONFIG_ENV = Map.of(\n@@ -47,0 +47,1 @@\n+    public static Map<String, String> currentEnv = Collections.emptyMap();\n@@ -52,0 +53,4 @@\n+    public static void ignoreUserConfiguration(boolean ignore) {\n+        currentEnv = ignore ? NO_CONFIG_ENV : Collections.emptyMap();\n+    }\n+\n@@ -60,1 +65,1 @@\n-        pb.environment().putAll(NO_CONFIG_ENV);\n+        pb.environment().putAll(currentEnv);\n@@ -94,1 +99,1 @@\n-        return capture(cwd, NO_CONFIG_ENV, cmd);\n+        return capture(cwd, currentEnv, cmd);\n@@ -737,1 +742,1 @@\n-                         .environ(NO_CONFIG_ENV)\n+                         .environ(currentEnv)\n@@ -773,1 +778,1 @@\n-                .environ(NO_CONFIG_ENV)\n+                .environ(currentEnv)\n@@ -826,1 +831,1 @@\n-                         .environ(NO_CONFIG_ENV)\n+                         .environ(currentEnv)\n@@ -841,1 +846,1 @@\n-                         .environ(NO_CONFIG_ENV)\n+                         .environ(currentEnv)\n@@ -901,1 +906,1 @@\n-                            .environ(NO_CONFIG_ENV)\n+                            .environ(currentEnv)\n","filename":"vcs\/src\/main\/java\/org\/openjdk\/skara\/vcs\/git\/GitRepository.java","additions":13,"deletions":8,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -40,1 +40,1 @@\n-    public final static Map<String, String> NO_CONFIG_ENV = Map.of(\n+    private final static Map<String, String> NO_CONFIG_ENV = Map.of(\n@@ -47,0 +47,1 @@\n+    private static Map<String, String> currentEnv = Collections.emptyMap();\n@@ -52,0 +53,4 @@\n+    public static void ignoreUserConfiguration(boolean ignore) {\n+        currentEnv = ignore ? NO_CONFIG_ENV : Collections.emptyMap();\n+    }\n+\n@@ -65,1 +70,1 @@\n-        pb.environment().putAll(NO_CONFIG_ENV);\n+        pb.environment().putAll(currentEnv);\n@@ -98,1 +103,1 @@\n-                      .environ(NO_CONFIG_ENV)\n+                      .environ(currentEnv)\n@@ -598,1 +603,1 @@\n-        pb.environment().putAll(NO_CONFIG_ENV);\n+        pb.environment().putAll(currentEnv);\n","filename":"vcs\/src\/main\/java\/org\/openjdk\/skara\/vcs\/hg\/HgRepository.java","additions":9,"deletions":4,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -26,0 +26,1 @@\n+import org.junit.jupiter.api.BeforeAll;\n@@ -48,0 +49,6 @@\n+    @BeforeAll\n+    static void setup() {\n+        GitRepository.ignoreUserConfiguration(true);\n+        HgRepository.ignoreUserConfiguration(true);\n+    }\n+\n@@ -1658,1 +1665,1 @@\n-            pb.environment().putAll(GitRepository.NO_CONFIG_ENV);\n+            pb.environment().putAll(GitRepository.currentEnv);\n@@ -1692,1 +1699,1 @@\n-            pb.environment().putAll(GitRepository.NO_CONFIG_ENV);\n+            pb.environment().putAll(GitRepository.currentEnv);\n@@ -2491,1 +2498,1 @@\n-            pb.environment().putAll(GitRepository.NO_CONFIG_ENV);\n+            pb.environment().putAll(GitRepository.currentEnv);\n","filename":"vcs\/src\/test\/java\/org\/openjdk\/skara\/vcs\/RepositoryTests.java","additions":10,"deletions":3,"binary":false,"changes":13,"status":"modified"}]}