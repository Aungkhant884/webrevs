{"files":[{"patch":"@@ -199,7 +199,6 @@\n-                }\n-                issue.setState(Issue.State.RESOLVED);\n-                if (issue.assignees().isEmpty()) {\n-                    var username = findIssueUsername(commit, scratchPath);\n-                    if (username.isPresent()) {\n-                        var assignee = issueProject.issueTracker().user(username.get());\n-                        assignee.ifPresent(hostUser -> issue.setAssignees(List.of(hostUser)));\n+                    if (issue.assignees().isEmpty()) {\n+                        var username = findIssueUsername(commit, scratchPath);\n+                        if (username.isPresent()) {\n+                            var assignee = issueProject.issueTracker().user(username.get());\n+                            assignee.ifPresent(hostUser -> issue.setAssignees(List.of(hostUser)));\n+                        }\n@@ -208,0 +207,5 @@\n+                if (!issue.isFixed()) {\n+                    issue.setState(Issue.State.RESOLVED);\n+                } else {\n+                    log.info(\"The issue has been already resolved\");\n+                }\n@@ -320,12 +324,11 @@\n-                }\n-                issue.setState(Issue.State.RESOLVED);\n-                var assignees = issue.assignees();\n-                \/\/ Due to a bug in the backport plugin, certain users can't be assigned directly.\n-                \/\/ Work around this by overwriting the assignee afterwards if the current assignee\n-                \/\/ is the bot user.\n-                if (assignees.isEmpty() || (assignees.size() == 1 && assignees.get(0).equals(issueProject.issueTracker().currentUser()))) {\n-                    if (username.isPresent()) {\n-                        var assignee = issueProject.issueTracker().user(username.get());\n-                        if (assignee.isPresent()) {\n-                            log.info(\"Setting assignee for issue \" + issue.id() + \" to \" + assignee.get());\n-                            issue.setAssignees(List.of(assignee.get()));\n+                    var assignees = issue.assignees();\n+                    \/\/ Due to a bug in the backport plugin, certain users can't be assigned directly.\n+                    \/\/ Work around this by overwriting the assignee afterwards if the current assignee\n+                    \/\/ is the bot user.\n+                    if (assignees.isEmpty() || (assignees.size() == 1 && assignees.get(0).equals(issueProject.issueTracker().currentUser()))) {\n+                        if (username.isPresent()) {\n+                            var assignee = issueProject.issueTracker().user(username.get());\n+                            if (assignee.isPresent()) {\n+                                log.info(\"Setting assignee for issue \" + issue.id() + \" to \" + assignee.get());\n+                                issue.setAssignees(List.of(assignee.get()));\n+                            }\n@@ -335,0 +338,5 @@\n+                if (!issue.isFixed()) {\n+                    issue.setState(Issue.State.RESOLVED);\n+                } else {\n+                    log.info(\"The issue has been already resolved\");\n+                }\n","filename":"bots\/notify\/src\/main\/java\/org\/openjdk\/skara\/bots\/notify\/issue\/IssueNotifier.java","additions":27,"deletions":19,"binary":false,"changes":46,"status":"modified"}]}