{"files":[{"patch":"@@ -195,2 +195,2 @@\n-                if (issue.state() == Issue.State.OPEN) {\n-                    log.info(\"Resolving issue \" + issue.id());\n+                log.info(\"Resolving issue \" + issue.id() + \" from state \" + issue.state());\n+                if (!issue.isFixed()) {\n@@ -198,6 +198,8 @@\n-                    if (issue.assignees().isEmpty()) {\n-                        var username = findIssueUsername(commit, scratchPath);\n-                        if (username.isPresent()) {\n-                            var assignee = issueProject.issueTracker().user(username.get());\n-                            assignee.ifPresent(hostUser -> issue.setAssignees(List.of(hostUser)));\n-                        }\n+                } else {\n+                    log.info(\"The issue was already resolved\");\n+                }\n+                if (issue.assignees().isEmpty()) {\n+                    var username = findIssueUsername(commit, scratchPath);\n+                    if (username.isPresent()) {\n+                        var assignee = issueProject.issueTracker().user(username.get());\n+                        assignee.ifPresent(hostUser -> issue.setAssignees(List.of(hostUser)));\n@@ -314,2 +316,2 @@\n-                if (issue.state() == Issue.State.OPEN) {\n-                    log.info(\"Resolving issue \" + issue.id());\n+                log.info(\"Resolving issue \" + issue.id() + \" from state \" + issue.state());\n+                if (!issue.isFixed()) {\n@@ -317,11 +319,13 @@\n-                    var assignees = issue.assignees();\n-                    \/\/ Due to a bug in the backport plugin, certain users can't be assigned directly.\n-                    \/\/ Work around this by overwriting the assignee afterwards if the current assignee\n-                    \/\/ is the bot user.\n-                    if (assignees.isEmpty() || (assignees.size() == 1 && assignees.get(0).equals(issueProject.issueTracker().currentUser()))) {\n-                        if (username.isPresent()) {\n-                            var assignee = issueProject.issueTracker().user(username.get());\n-                            if (assignee.isPresent()) {\n-                                log.info(\"Setting assignee for issue \" + issue.id() + \" to \" + assignee.get());\n-                                issue.setAssignees(List.of(assignee.get()));\n-                            }\n+                } else {\n+                    log.info(\"The issue was already resolved\");\n+                }\n+                var assignees = issue.assignees();\n+                \/\/ Due to a bug in the backport plugin, certain users can't be assigned directly.\n+                \/\/ Work around this by overwriting the assignee afterwards if the current assignee\n+                \/\/ is the bot user.\n+                if (assignees.isEmpty() || (assignees.size() == 1 && assignees.get(0).equals(issueProject.issueTracker().currentUser()))) {\n+                    if (username.isPresent()) {\n+                        var assignee = issueProject.issueTracker().user(username.get());\n+                        if (assignee.isPresent()) {\n+                            log.info(\"Setting assignee for issue \" + issue.id() + \" to \" + assignee.get());\n+                            issue.setAssignees(List.of(assignee.get()));\n","filename":"bots\/notify\/src\/main\/java\/org\/openjdk\/skara\/bots\/notify\/issue\/IssueNotifier.java","additions":25,"deletions":21,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -1781,1 +1781,1 @@\n-            assertEquals(List.of(), updatedIssue.assignees());\n+            assertEquals(List.of(issueProject.issueTracker().currentUser()), updatedIssue.assignees());\n","filename":"bots\/notify\/src\/test\/java\/org\/openjdk\/skara\/bots\/notify\/issue\/IssueNotifierTests.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}