{"files":[{"patch":"@@ -26,1 +26,1 @@\n-    public ConfigurationError(String message) {\n+    ConfigurationError(String message) {\n","filename":"bot\/src\/main\/java\/org\/openjdk\/skara\/bot\/ConfigurationError.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -184,0 +184,4 @@\n+\n+    public Map<HostedRepository, Duration> getMaxAges() {\n+        return maxAges;\n+    }\n","filename":"bots\/bridgekeeper\/src\/main\/java\/org\/openjdk\/skara\/bots\/bridgekeeper\/PullRequestPrunerBot.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -8,0 +8,2 @@\n+import java.time.Duration;\n+\n@@ -13,10 +15,0 @@\n-        var mirror1 = new TestHostedRepository(null, \"mirror1\");\n-        var mirror2 = new TestHostedRepository(null, \"mirror2\");\n-        var mirror3 = new TestHostedRepository(null, \"mirror3\");\n-        var data1 = new TestHostedRepository(null, \"data1\");\n-        var data2 = new TestHostedRepository(null, \"data2\");\n-        var data3 = new TestHostedRepository(null, \"data3\");\n-        var pruned1 = new TestHostedRepository(null, \"pruned1\");\n-        var pruned2 = new TestHostedRepository(null, \"pruned2\");\n-        var pruned3 = new TestHostedRepository(null, \"pruned3\");\n-\n@@ -40,1 +32,1 @@\n-                      \"maxage\": \"P2D\"\n+                      \"maxage\": \"PT48H\"\n@@ -43,1 +35,1 @@\n-                      \"maxage\": \"P3D\"\n+                      \"maxage\": \"PT4320M\"\n@@ -50,0 +42,3 @@\n+        var pruned1 = new TestHostedRepository(\"pruned1\");\n+        var pruned2 = new TestHostedRepository(\"pruned2\");\n+        var pruned3 = new TestHostedRepository(\"pruned3\");\n@@ -51,6 +46,6 @@\n-                .addHostedRepository(\"mirror1\", mirror1)\n-                .addHostedRepository(\"mirror2\", mirror2)\n-                .addHostedRepository(\"mirror3\", mirror3)\n-                .addHostedRepository(\"data1\", data1)\n-                .addHostedRepository(\"data2\", data2)\n-                .addHostedRepository(\"data3\", data3)\n+                .addHostedRepository(\"mirror1\", new TestHostedRepository(\"mirror1\"))\n+                .addHostedRepository(\"mirror2\", new TestHostedRepository(\"mirror2\"))\n+                .addHostedRepository(\"mirror3\", new TestHostedRepository(\"mirror3\"))\n+                .addHostedRepository(\"data1\", new TestHostedRepository(\"data1\"))\n+                .addHostedRepository(\"data2\", new TestHostedRepository(\"data2\"))\n+                .addHostedRepository(\"data3\", new TestHostedRepository(\"data3\"))\n@@ -91,1 +86,7 @@\n-        assertEquals(\"PullRequestPrunerBot\", pullRequestPrunerBots.get(0).toString());\n+\n+        var pullRequestPrunerBot = (PullRequestPrunerBot) pullRequestPrunerBots.get(0);\n+        assertEquals(\"PullRequestPrunerBot\", pullRequestPrunerBot.toString());\n+        var maxAges = pullRequestPrunerBot.getMaxAges();\n+        assertEquals(Duration.ofDays(1), maxAges.get(pruned1));\n+        assertEquals(Duration.ofDays(2), maxAges.get(pruned2));\n+        assertEquals(Duration.ofDays(3), maxAges.get(pruned3));\n","filename":"bots\/bridgekeeper\/src\/test\/java\/org\/openjdk\/skara\/bots\/bridgekeeper\/BridgekeeperBotFactoryTest.java","additions":20,"deletions":19,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -13,4 +13,0 @@\n-        var from1 = new TestHostedRepository(null, \"from1\");\n-        var to1 = new TestHostedRepository(null, \"to1\");\n-        var to2 = new TestHostedRepository(null, \"to2\");\n-\n@@ -38,3 +34,3 @@\n-                .addHostedRepository(\"from1\", from1)\n-                .addHostedRepository(\"to1\", to1)\n-                .addHostedRepository(\"to2\", to2)\n+                .addHostedRepository(\"from1\", new TestHostedRepository(\"from1\"))\n+                .addHostedRepository(\"to1\", new TestHostedRepository(\"to1\"))\n+                .addHostedRepository(\"to2\", new TestHostedRepository(\"to2\"))\n","filename":"bots\/censussync\/src\/test\/java\/org\/openjdk\/skara\/bots\/censussync\/CensusSyncBotFactoryTest.java","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -13,4 +13,0 @@\n-        var mark = new TestHostedRepository(null, \"mark\");\n-        var from1 = new TestHostedRepository(null, \"from1\");\n-        var from2 = new TestHostedRepository(null, \"from2\");\n-\n@@ -34,1 +30,1 @@\n-                        \"branch\": \"master\"\n+                        \"branch\": \"dev\"\n@@ -44,3 +40,3 @@\n-                .addHostedRepository(\"mark\", mark)\n-                .addHostedRepository(\"from1\", from1)\n-                .addHostedRepository(\"from2\", from2)\n+                .addHostedRepository(\"mark\", new TestHostedRepository(\"mark\"))\n+                .addHostedRepository(\"from1\", new TestHostedRepository(\"from1\"))\n+                .addHostedRepository(\"from2\", new TestHostedRepository(\"from2\"))\n@@ -53,4 +49,2 @@\n-        CheckoutBot checkoutBot1 = (CheckoutBot) bots.get(0);\n-        assertEquals(\"CheckoutBot(from1:master, to1)\", checkoutBot1.toString());\n-        CheckoutBot checkoutBot2 = (CheckoutBot) bots.get(1);\n-        assertEquals(\"CheckoutBot(from2:master, to2)\", checkoutBot2.toString());\n+        assertEquals(\"CheckoutBot(from1:master, to1)\", bots.get(0).toString());\n+        assertEquals(\"CheckoutBot(from2:dev, to2)\", bots.get(1).toString());\n","filename":"bots\/checkout\/src\/test\/java\/org\/openjdk\/skara\/bots\/checkout\/CheckoutBotFactoryTest.java","additions":6,"deletions":12,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -94,0 +94,4 @@\n+\n+    public IssueProject getProject() {\n+        return project;\n+    }\n","filename":"bots\/csr\/src\/main\/java\/org\/openjdk\/skara\/bots\/csr\/CSRPullRequestBot.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -12,6 +12,0 @@\n-        var repo1 = new TestHostedRepository(null, \"repo1\");\n-        var repo2 = new TestHostedRepository(null, \"repo2\");\n-        var repo3 = new TestHostedRepository(null, \"repo3\");\n-        var issueProject1 = new TestIssueProject(null, \"TEST\");\n-        var issueProject2 = new TestIssueProject(null, \"TEST2\");\n-\n@@ -39,5 +33,5 @@\n-                .addHostedRepository(\"repo1\", repo1)\n-                .addHostedRepository(\"repo2\", repo2)\n-                .addHostedRepository(\"repo3\", repo3)\n-                .addIssueProject(\"test_bugs\/TEST\", issueProject1)\n-                .addIssueProject(\"test_bugs\/TEST2\", issueProject2)\n+                .addHostedRepository(\"repo1\", new TestHostedRepository(\"repo1\"))\n+                .addHostedRepository(\"repo2\", new TestHostedRepository(\"repo2\"))\n+                .addHostedRepository(\"repo3\", new TestHostedRepository(\"repo3\"))\n+                .addIssueProject(\"test_bugs\/TEST\", new TestIssueProject(null, \"TEST\"))\n+                .addIssueProject(\"test_bugs\/TEST2\", new TestIssueProject(null, \"TEST2\"))\n@@ -57,3 +51,9 @@\n-        assertEquals(\"CSRPullRequestBot@repo1\", csrPullRequestBots.get(0).toString());\n-        assertEquals(\"CSRPullRequestBot@repo2\", csrPullRequestBots.get(1).toString());\n-        assertEquals(\"CSRPullRequestBot@repo3\", csrPullRequestBots.get(2).toString());\n+        var CSRPullRequestBot1 = (CSRPullRequestBot) csrPullRequestBots.get(0);\n+        var CSRPullRequestBot2 = (CSRPullRequestBot) csrPullRequestBots.get(1);\n+        var CSRPullRequestBot3 = (CSRPullRequestBot) csrPullRequestBots.get(2);\n+        assertEquals(\"CSRPullRequestBot@repo1\", CSRPullRequestBot1.toString());\n+        assertEquals(\"CSRPullRequestBot@repo2\", CSRPullRequestBot2.toString());\n+        assertEquals(\"CSRPullRequestBot@repo3\", CSRPullRequestBot3.toString());\n+        assertEquals(\"TEST\", CSRPullRequestBot1.getProject().name());\n+        assertEquals(\"TEST\", CSRPullRequestBot2.getProject().name());\n+        assertEquals(\"TEST2\", CSRPullRequestBot3.getProject().name());\n","filename":"bots\/csr\/src\/test\/java\/org\/openjdk\/skara\/bots\/csr\/CSRBotFactoryTest.java","additions":14,"deletions":14,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -18,5 +18,0 @@\n-            var from1 = new TestHostedRepository(null, \"from1\");\n-            var from2 = new TestHostedRepository(null, \"from2\");\n-            var to1 = new TestHostedRepository(null, \"to1\");\n-            var to2 = new TestHostedRepository(null, \"to2\");\n-\n@@ -40,4 +35,4 @@\n-                    .addHostedRepository(\"from1\", from1)\n-                    .addHostedRepository(\"from2\", from2)\n-                    .addHostedRepository(\"to1\", to1)\n-                    .addHostedRepository(\"to2\", to2)\n+                    .addHostedRepository(\"from1\", new TestHostedRepository(\"from1\"))\n+                    .addHostedRepository(\"from2\", new TestHostedRepository(\"from2\"))\n+                    .addHostedRepository(\"to1\", new TestHostedRepository(\"to1\"))\n+                    .addHostedRepository(\"to2\", new TestHostedRepository(\"to2\"))\n@@ -52,4 +47,2 @@\n-            ForwardBot forwardBot1 = (ForwardBot) bots.get(0);\n-            assertEquals(\"ForwardBot@(from1:master-> to1:master)\", forwardBot1.toString());\n-            ForwardBot forwardBot2 = (ForwardBot) bots.get(1);\n-            assertEquals(\"ForwardBot@(from2:dev-> to2:test)\", forwardBot2.toString());\n+            assertEquals(\"ForwardBot@(from1:master-> to1:master)\", bots.get(0).toString());\n+            assertEquals(\"ForwardBot@(from2:dev-> to2:test)\", bots.get(1).toString());\n","filename":"bots\/forward\/src\/test\/java\/org\/openjdk\/skara\/bots\/forward\/ForwardBotFactoryTest.java","additions":6,"deletions":13,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -194,0 +194,24 @@\n+\n+    public String getConfigurationRef() {\n+        return configurationRef;\n+    }\n+\n+    public List<String> getReplacementsFile() {\n+        return replacementsFile;\n+    }\n+\n+    public List<String> getCorrectionsFile() {\n+        return correctionsFile;\n+    }\n+\n+    public List<String> getAuthorsFile() {\n+        return authorsFile;\n+    }\n+\n+    public List<String> getContributorsFile() {\n+        return contributorsFile;\n+    }\n+\n+    public List<String> getSponsorsFile() {\n+        return sponsorsFile;\n+    }\n","filename":"bots\/hgbridge\/src\/main\/java\/org\/openjdk\/skara\/bots\/hgbridge\/ExporterConfig.java","additions":24,"deletions":0,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -162,0 +162,4 @@\n+\n+    public ExporterConfig getExporterConfig() {\n+        return exporterConfig;\n+    }\n","filename":"bots\/hgbridge\/src\/main\/java\/org\/openjdk\/skara\/bots\/hgbridge\/JBridgeBot.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -15,5 +15,0 @@\n-            var marks = new TestHostedRepository(null, \"marks\");\n-            var converter = new TestHostedRepository(null, \"converter\");\n-            var des1 = new TestHostedRepository(null, \"des1\");\n-            var des2 = new TestHostedRepository(null, \"des2\");\n-\n@@ -41,1 +36,2 @@\n-                              \"replacements\": \"test_replacements_for_spec_repo.json\",\n+                              \"replacements\": \"test_replacements_for_repo1.json\",\n+                              \"corrections\": \"test_corrections_for_repo1.json\"\n@@ -45,1 +41,4 @@\n-                              \"destinations\": \"https:\/\/test.org\/des2\"\n+                              \"destinations\": \"https:\/\/test.org\/des2\",\n+                              \"sponsors\": \"test_sponsors_for_repo2.json\",\n+                              \"authors\": \"test_authors_for_repo2.json\",\n+                              \"replacements\": \"test_replacements_for_repo2.json\",\n@@ -55,4 +54,4 @@\n-                    .addHostedRepository(\"marks\", marks)\n-                    .addHostedRepository(\"converter\", converter)\n-                    .addHostedRepository(\"https:\/\/test.org\/des1\", des1)\n-                    .addHostedRepository(\"https:\/\/test.org\/des2\", des2)\n+                    .addHostedRepository(\"marks\", new TestHostedRepository(\"marks\"))\n+                    .addHostedRepository(\"converter\", new TestHostedRepository(\"converter\"))\n+                    .addHostedRepository(\"https:\/\/test.org\/des1\", new TestHostedRepository(\"des1\"))\n+                    .addHostedRepository(\"https:\/\/test.org\/des2\", new TestHostedRepository(\"des2\"))\n@@ -68,0 +67,16 @@\n+            var exporterConfig1 = jBridgeBot1.getExporterConfig();\n+            assertEquals(\"marks\", exporterConfig1.marksRepo().name());\n+            assertEquals(\"master\", exporterConfig1.marksRef());\n+            assertEquals(\"test@test.org\", exporterConfig1.marksAuthorEmail());\n+            assertEquals(\"test\", exporterConfig1.marksAuthorName());\n+            assertEquals(\"des1\", exporterConfig1.destinations().get(0).name());\n+            assertEquals(\"https:\/\/test.org\/source1\", exporterConfig1.source().toString());\n+            assertEquals(\"master\", exporterConfig1.getConfigurationRef());\n+            assertEquals(\"test_authors.json\", exporterConfig1.getAuthorsFile().get(0));\n+            assertEquals(\"test_contributors.json\", exporterConfig1.getContributorsFile().get(0));\n+            assertEquals(\"test_sponsors.json\", exporterConfig1.getSponsorsFile().get(0));\n+            assertEquals(\"test_corrections.json\", exporterConfig1.getCorrectionsFile().get(0));\n+            assertEquals(\"test_corrections_for_repo1.json\", exporterConfig1.getCorrectionsFile().get(1));\n+            assertEquals(\"test_replacements.json\", exporterConfig1.getReplacementsFile().get(0));\n+            assertEquals(\"test_replacements_for_repo1.json\", exporterConfig1.getReplacementsFile().get(1));\n+\n@@ -70,0 +85,16 @@\n+            var exporterConfig2 = jBridgeBot2.getExporterConfig();\n+            assertEquals(\"marks\", exporterConfig2.marksRepo().name());\n+            assertEquals(\"master\", exporterConfig2.marksRef());\n+            assertEquals(\"test@test.org\", exporterConfig2.marksAuthorEmail());\n+            assertEquals(\"test\", exporterConfig2.marksAuthorName());\n+            assertEquals(\"des2\", exporterConfig2.destinations().get(0).name());\n+            assertEquals(\"https:\/\/test.org\/source2\", exporterConfig2.source().toString());\n+            assertEquals(\"master\", exporterConfig2.getConfigurationRef());\n+            assertEquals(\"test_authors.json\", exporterConfig2.getAuthorsFile().get(0));\n+            assertEquals(\"test_authors_for_repo2.json\", exporterConfig2.getAuthorsFile().get(1));\n+            assertEquals(\"test_contributors.json\", exporterConfig2.getContributorsFile().get(0));\n+            assertEquals(\"test_sponsors.json\", exporterConfig2.getSponsorsFile().get(0));\n+            assertEquals(\"test_sponsors_for_repo2.json\", exporterConfig2.getSponsorsFile().get(1));\n+            assertEquals(\"test_corrections.json\", exporterConfig2.getCorrectionsFile().get(0));\n+            assertEquals(\"test_replacements.json\", exporterConfig2.getReplacementsFile().get(0));\n+            assertEquals(\"test_replacements_for_repo2.json\", exporterConfig2.getReplacementsFile().get(1));\n","filename":"bots\/hgbridge\/src\/test\/java\/org\/openjdk\/skara\/bots\/hgbridge\/JBridgeBotFactoryTest.java","additions":42,"deletions":11,"binary":false,"changes":53,"status":"modified"},{"patch":"@@ -155,0 +155,4 @@\n+\n+    public IssueProject getIssueProject() {\n+        return issueProject;\n+    }\n","filename":"bots\/jep\/src\/main\/java\/org\/openjdk\/skara\/bots\/jep\/JEPBot.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -14,4 +14,0 @@\n-        var repo1 = new TestHostedRepository(null, \"repo1\");\n-        var repo2 = new TestHostedRepository(null, \"repo2\");\n-        var issueProject1 = new TestIssueProject(null, \"TEST\");\n-\n@@ -35,3 +31,3 @@\n-                .addHostedRepository(\"repo1\", repo1)\n-                .addHostedRepository(\"repo2\", repo2)\n-                .addIssueProject(\"test_bugs\/TEST\", issueProject1)\n+                .addHostedRepository(\"repo1\", new TestHostedRepository(\"repo1\"))\n+                .addHostedRepository(\"repo2\", new TestHostedRepository(\"repo2\"))\n+                .addIssueProject(\"test_bugs\/TEST\", new TestIssueProject(null, \"TEST\"))\n@@ -46,0 +42,2 @@\n+        assertEquals(\"TEST\", jepBot1.getIssueProject().name());\n+\n@@ -48,0 +46,1 @@\n+        assertEquals(\"TEST\", jepBot2.getIssueProject().name());\n","filename":"bots\/jep\/src\/test\/java\/org\/openjdk\/skara\/bots\/jep\/JEPBotFactoryTest.java","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -18,9 +18,0 @@\n-            var target = new TestHostedRepository(null, \"target\");\n-            var fork = new TestHostedRepository(null, \"fork\");\n-            var from1 = new TestHostedRepository(null, \"from1\");\n-            var from2 = new TestHostedRepository(null, \"from2\");\n-            var from3 = new TestHostedRepository(null, \"from3\");\n-            var from4 = new TestHostedRepository(null, \"from4\");\n-            var from5 = new TestHostedRepository(null, \"from5\");\n-            var from6 = new TestHostedRepository(null, \"from6\");\n-\n@@ -91,8 +82,8 @@\n-                    .addHostedRepository(\"target\", target)\n-                    .addHostedRepository(\"fork\", fork)\n-                    .addHostedRepository(\"from1\", from1)\n-                    .addHostedRepository(\"from2\", from2)\n-                    .addHostedRepository(\"from3\", from3)\n-                    .addHostedRepository(\"from4\", from4)\n-                    .addHostedRepository(\"from5\", from5)\n-                    .addHostedRepository(\"from6\", from6)\n+                    .addHostedRepository(\"target\", new TestHostedRepository(\"target\"))\n+                    .addHostedRepository(\"fork\", new TestHostedRepository(\"fork\"))\n+                    .addHostedRepository(\"from1\", new TestHostedRepository(\"from1\"))\n+                    .addHostedRepository(\"from2\", new TestHostedRepository(\"from2\"))\n+                    .addHostedRepository(\"from3\", new TestHostedRepository(\"from3\"))\n+                    .addHostedRepository(\"from4\", new TestHostedRepository(\"from4\"))\n+                    .addHostedRepository(\"from5\", new TestHostedRepository(\"from5\"))\n+                    .addHostedRepository(\"from6\", new TestHostedRepository(\"from6\"))\n","filename":"bots\/merge\/src\/test\/java\/org\/openjdk\/skara\/bots\/merge\/MergeBotFactoryTest.java","additions":8,"deletions":17,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -158,0 +158,12 @@\n+\n+    public List<Pattern> getBranchPatterns() {\n+        return branchPatterns;\n+    }\n+\n+    public boolean isIncludeTags() {\n+        return includeTags;\n+    }\n+\n+    public boolean isShouldMirrorEverything() {\n+        return shouldMirrorEverything;\n+    }\n","filename":"bots\/mirror\/src\/main\/java\/org\/openjdk\/skara\/bots\/mirror\/MirrorBot.java","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -15,5 +15,0 @@\n-            var from1 = new TestHostedRepository(null, \"from1\");\n-            var from2 = new TestHostedRepository(null, \"from2\");\n-            var to1 = new TestHostedRepository(null, \"to1\");\n-            var to2 = new TestHostedRepository(null, \"to2\");\n-\n@@ -36,1 +31,5 @@\n-                        }\n+                        },\n+                        {\n+                          \"from\": \"from3\",\n+                          \"to\": \"to3\"\n+                        },\n@@ -43,4 +42,6 @@\n-                    .addHostedRepository(\"from1\", from1)\n-                    .addHostedRepository(\"from2\", from2)\n-                    .addHostedRepository(\"to1\", to1)\n-                    .addHostedRepository(\"to2\", to2)\n+                    .addHostedRepository(\"from1\", new TestHostedRepository(\"from1\"))\n+                    .addHostedRepository(\"from2\", new TestHostedRepository(\"from2\"))\n+                    .addHostedRepository(\"from3\", new TestHostedRepository(\"from3\"))\n+                    .addHostedRepository(\"to1\", new TestHostedRepository(\"to1\"))\n+                    .addHostedRepository(\"to2\", new TestHostedRepository(\"to2\"))\n+                    .addHostedRepository(\"to3\", new TestHostedRepository(\"to3\"))\n@@ -51,1 +52,1 @@\n-            assertEquals(2, bots.size());\n+            assertEquals(3, bots.size());\n@@ -55,0 +56,4 @@\n+            assertFalse(mirrorBot1.isShouldMirrorEverything());\n+            assertFalse(mirrorBot1.isIncludeTags());\n+            assertEquals(\"master\", mirrorBot1.getBranchPatterns().get(0).toString());\n+\n@@ -57,0 +62,11 @@\n+            assertFalse(mirrorBot2.isShouldMirrorEverything());\n+            assertFalse(mirrorBot2.isIncludeTags());\n+            assertEquals(\"master\", mirrorBot2.getBranchPatterns().get(0).toString());\n+            assertEquals(\"dev\", mirrorBot2.getBranchPatterns().get(1).toString());\n+            assertEquals(\"test\", mirrorBot2.getBranchPatterns().get(2).toString());\n+\n+            MirrorBot mirrorBot3 = (MirrorBot) bots.get(2);\n+            assertEquals(\"MirrorBot@from3->to3\", mirrorBot3.toString());\n+            assertTrue(mirrorBot3.isShouldMirrorEverything());\n+            assertTrue(mirrorBot3.isIncludeTags());\n+            assertEquals(0, mirrorBot3.getBranchPatterns().size());\n","filename":"bots\/mirror\/src\/test\/java\/org\/openjdk\/skara\/bots\/mirror\/MirrorBotFactoryTest.java","additions":27,"deletions":11,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -10,0 +10,1 @@\n+import java.time.Duration;\n@@ -18,8 +19,0 @@\n-            var repo1 = new TestHostedRepository(null, \"repo1\");\n-            var repo2 = new TestHostedRepository(null, \"repo2\");\n-            var repo3 = new TestHostedRepository(null, \"repo3\");\n-            var repo4 = new TestHostedRepository(null, \"repo4\");\n-            var repo5 = new TestHostedRepository(null, \"repo5\");\n-            var archive = new TestHostedRepository(null, \"archive\");\n-            var census = new TestHostedRepository(null, \"census\");\n-\n@@ -81,1 +74,1 @@\n-                              \"email\": \"test_email@test.org\"\n+                              \"email\": \"test_email1@test.org\"\n@@ -83,1 +76,2 @@\n-                          ]\n+                          ],\n+                          \"branchname\":\"dev\"\n@@ -93,1 +87,1 @@\n-                            \"email\": \"test@test.com\"\n+                            \"email\": \"test_email2@test.com\"\n@@ -106,1 +100,1 @@\n-                            \"Approved\": \"test\"\n+                            \"Approved\": \"test5\"\n@@ -112,1 +106,1 @@\n-                              \"email\": \"test@test.org\",\n+                              \"email\": \"test_email3@test.org\",\n@@ -127,7 +121,7 @@\n-                    .addHostedRepository(\"repo1\", repo1)\n-                    .addHostedRepository(\"repo2\", repo2)\n-                    .addHostedRepository(\"repo3\", repo3)\n-                    .addHostedRepository(\"repo4\", repo4)\n-                    .addHostedRepository(\"repo5\", repo5)\n-                    .addHostedRepository(\"archive\", archive)\n-                    .addHostedRepository(\"census\", census)\n+                    .addHostedRepository(\"repo1\", new TestHostedRepository(\"repo1\"))\n+                    .addHostedRepository(\"repo2\", new TestHostedRepository(\"repo2\"))\n+                    .addHostedRepository(\"repo3\", new TestHostedRepository(\"repo3\"))\n+                    .addHostedRepository(\"repo4\", new TestHostedRepository(\"repo4\"))\n+                    .addHostedRepository(\"repo5\", new TestHostedRepository(\"repo5\"))\n+                    .addHostedRepository(\"archive\", new TestHostedRepository(\"archive\"))\n+                    .addHostedRepository(\"census\", new TestHostedRepository(\"census\"))\n@@ -150,3 +144,64 @@\n-            assertEquals(\"MailingListBridgeBot@repo3\", mailingListBridgeBots.get(0).toString());\n-            assertEquals(\"MailingListBridgeBot@repo4\", mailingListBridgeBots.get(1).toString());\n-            assertEquals(\"MailingListBridgeBot@repo5\", mailingListBridgeBots.get(2).toString());\n+\n+            MailingListBridgeBot mailingListBridgeBot1 = (MailingListBridgeBot) mailingListBridgeBots.get(0);\n+            assertEquals(\"MailingListBridgeBot@repo3\", mailingListBridgeBot1.toString());\n+            assertEquals(\"repo3\", mailingListBridgeBot1.codeRepo().name());\n+            assertEquals(\"archive\", mailingListBridgeBot1.archiveRepo().name());\n+            assertEquals(\"master\", mailingListBridgeBot1.archiveRef());\n+            assertEquals(\"https:\/\/mail.test.org\/test\/\", mailingListBridgeBot1.listArchive().toString());\n+            assertEquals(\"master\", mailingListBridgeBot1.censusRef());\n+            assertEquals(\"census\", mailingListBridgeBot1.censusRepo().name());\n+            assertEquals(\"<test_email1@test.org>\", mailingListBridgeBot1.lists().get(0).list().toString());\n+            assertEquals(\"[ignore1[bot], ignore2[bot], ignore4[bot], ignore3[bot]]\", mailingListBridgeBot1.ignoredUsers().toString());\n+            assertEquals(\"[<!-- It's a test comment!-->]\", mailingListBridgeBot1.ignoredComments().toString());\n+            assertEquals(\"0.0.0.0\", mailingListBridgeBot1.smtpServer());\n+            assertEquals(\"[rfr]\", mailingListBridgeBot1.readyLabels().toString());\n+            assertEquals(\"{test_user[bot]=<!-- Welcome message -->}\", mailingListBridgeBot1.readyComments().toString());\n+            assertEquals(\"{Approved=test}\", mailingListBridgeBot1.headers().toString());\n+            assertEquals(\"https:\/\/bugs.test.org\/browse\/\", mailingListBridgeBot1.issueTracker().toString());\n+            assertEquals(Duration.ofSeconds(5), mailingListBridgeBot1.sendInterval());\n+            assertEquals(Duration.ofMinutes(2), mailingListBridgeBot1.cooldown());\n+            assertFalse(mailingListBridgeBot1.repoInSubject());\n+            assertEquals(\"dev\", mailingListBridgeBot1.branchInSubject().toString());\n+\n+\n+            MailingListBridgeBot mailingListBridgeBot2 = (MailingListBridgeBot) mailingListBridgeBots.get(1);\n+            assertEquals(\"MailingListBridgeBot@repo4\", mailingListBridgeBot2.toString());\n+            assertEquals(\"repo4\", mailingListBridgeBot2.codeRepo().name());\n+            assertEquals(\"archive\", mailingListBridgeBot2.archiveRepo().name());\n+            assertEquals(\"master\", mailingListBridgeBot2.archiveRef());\n+            assertEquals(\"https:\/\/mail.test.org\/test\/\", mailingListBridgeBot2.listArchive().toString());\n+            assertEquals(\"master\", mailingListBridgeBot2.censusRef());\n+            assertEquals(\"census\", mailingListBridgeBot2.censusRepo().name());\n+            assertEquals(\"<test_email2@test.com>\", mailingListBridgeBot2.lists().get(0).list().toString());\n+            assertEquals(\"[ignore1[bot], ignore2[bot], ignore4[bot], ignore3[bot]]\", mailingListBridgeBot2.ignoredUsers().toString());\n+            assertEquals(\"[<!-- It's a test comment!-->]\", mailingListBridgeBot2.ignoredComments().toString());\n+            assertEquals(\"0.0.0.0\", mailingListBridgeBot2.smtpServer());\n+            assertEquals(\"[rfr]\", mailingListBridgeBot2.readyLabels().toString());\n+            assertEquals(\"{test_user[bot]=<!-- Welcome message -->}\", mailingListBridgeBot2.readyComments().toString());\n+            assertEquals(0, mailingListBridgeBot2.headers().size());\n+            assertEquals(\"https:\/\/bugs.test.org\/browse\/\", mailingListBridgeBot2.issueTracker().toString());\n+            assertEquals(Duration.ofSeconds(5), mailingListBridgeBot2.sendInterval());\n+            assertEquals(Duration.ofMinutes(2), mailingListBridgeBot2.cooldown());\n+            assertTrue(mailingListBridgeBot2.repoInSubject());\n+\n+            MailingListBridgeBot mailingListBridgeBot3 = (MailingListBridgeBot) mailingListBridgeBots.get(2);\n+            assertEquals(\"MailingListBridgeBot@repo5\", mailingListBridgeBot3.toString());\n+            assertEquals(\"repo5\", mailingListBridgeBot3.codeRepo().name());\n+            assertEquals(\"archive\", mailingListBridgeBot3.archiveRepo().name());\n+            assertEquals(\"master\", mailingListBridgeBot3.archiveRef());\n+            assertEquals(\"https:\/\/mail.test.org\/test\/\", mailingListBridgeBot3.listArchive().toString());\n+            assertEquals(\"master\", mailingListBridgeBot3.censusRef());\n+            assertEquals(\"census\", mailingListBridgeBot3.censusRepo().name());\n+            assertEquals(\"<test_email3@test.org>\", mailingListBridgeBot3.lists().get(0).list().toString());\n+            assertEquals(\"[label1, label2, label3]\", mailingListBridgeBot3.lists().get(0).labels().toString());\n+            assertEquals(\"[ignore1[bot], ignore2[bot], ignore4[bot], ignore3[bot]]\", mailingListBridgeBot3.ignoredUsers().toString());\n+            assertEquals(\"[<!-- It's a test comment!-->]\", mailingListBridgeBot3.ignoredComments().toString());\n+            assertEquals(\"0.0.0.0\", mailingListBridgeBot3.smtpServer());\n+            assertEquals(\"[rfr]\", mailingListBridgeBot3.readyLabels().toString());\n+            assertEquals(\"{test_user[bot]=<!-- Welcome message -->}\", mailingListBridgeBot3.readyComments().toString());\n+            assertEquals(\"{Approved=test5}\", mailingListBridgeBot3.headers().toString());\n+            assertEquals(\"https:\/\/bugs.test.org\/browse\/\", mailingListBridgeBot3.issueTracker().toString());\n+            assertEquals(Duration.ofSeconds(5), mailingListBridgeBot3.sendInterval());\n+            assertEquals(Duration.ofMinutes(2), mailingListBridgeBot3.cooldown());\n+            assertTrue(mailingListBridgeBot3.repoInSubject());\n+            assertEquals(\"master\", mailingListBridgeBot3.branchInSubject().toString());\n","filename":"bots\/mlbridge\/src\/test\/java\/org\/openjdk\/skara\/bots\/mlbridge\/MailingListBridgeBotFactoryTest.java","additions":78,"deletions":23,"binary":false,"changes":101,"status":"modified"},{"patch":"@@ -158,0 +158,10 @@\n+\n+    public Pattern getBranches() {\n+        return branches;\n+    }\n+\n+    public Map<String, Pattern> getReadyComments() {\n+        return readyComments;\n+    }\n+\n+\n","filename":"bots\/notify\/src\/main\/java\/org\/openjdk\/skara\/bots\/notify\/NotifyBot.java","additions":10,"deletions":0,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -17,5 +17,0 @@\n-            var notify = new TestHostedRepository(null, \"notify\");\n-            var repo1 = new TestHostedRepository(null, \"repo1\");\n-            var repo2 = new TestHostedRepository(null, \"repo2\");\n-            var testHost = TestHost.createNew(List.of());\n-            var issueProject1 = new TestIssueProject(testHost, \"TEST\");\n@@ -57,1 +52,1 @@\n-                        \"test@github\/test\/repo1\": {\n+                        \"repo1\": {\n@@ -82,1 +77,1 @@\n-                        \"test@github\/test\/repo2\": {\n+                        \"repo2\": {\n@@ -84,1 +79,1 @@\n-                          \"branches\": \"master\",\n+                          \"branches\": \"dev\",\n@@ -113,4 +108,4 @@\n-                    .addHostedRepository(\"notify\", notify)\n-                    .addHostedRepository(\"test@github\/test\/repo1\", repo1)\n-                    .addHostedRepository(\"test@github\/test\/repo2\", repo2)\n-                    .addIssueProject(\"test_bugs\/TEST\", issueProject1)\n+                    .addHostedRepository(\"notify\", new TestHostedRepository(\"notify\"))\n+                    .addHostedRepository(\"repo1\", new TestHostedRepository(\"repo1\"))\n+                    .addHostedRepository(\"repo2\", new TestHostedRepository(\"repo2\"))\n+                    .addIssueProject(\"test_bugs\/TEST\", new TestIssueProject(TestHost.createNew(List.of()), \"TEST\"))\n@@ -125,2 +120,9 @@\n-            assertEquals(\"NotifyBot@repo1\", bots.get(0).toString());\n-            assertEquals(\"NotifyBot@repo2\", bots.get(1).toString());\n+            NotifyBot notifyBot1 = (NotifyBot) bots.get(0);\n+            assertEquals(\"NotifyBot@repo1\", notifyBot1.toString());\n+            assertEquals(\"master\", notifyBot1.getBranches().toString());\n+            assertEquals(\"{test[bot]=<!-- Welcome message -->}\", notifyBot1.getReadyComments().toString());\n+\n+            NotifyBot notifyBot2 = (NotifyBot) bots.get(1);\n+            assertEquals(\"NotifyBot@repo2\", notifyBot2.toString());\n+            assertEquals(\"dev\", notifyBot2.getBranches().toString());\n+            assertEquals(\"{test[bot]=<!-- Welcome message -->}\", notifyBot2.getReadyComments().toString());\n","filename":"bots\/notify\/src\/test\/java\/org\/openjdk\/skara\/bots\/notify\/NotifyBotFactoryTest.java","additions":16,"deletions":14,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -15,10 +15,0 @@\n-            var repo1 = new TestHostedRepository(null, \"repo1\");\n-            var testHost = TestHost.createNew(List.of());\n-            var repo2 = new TestHostedRepository(testHost, \"repo2\");\n-            var repo3 = new TestHostedRepository(null, \"repo3\");\n-            var repo4 = new TestHostedRepository(null, \"repo4\");\n-            var fork3 = new TestHostedRepository(null, \"fork4\");\n-            var fork4 = new TestHostedRepository(null, \"fork4\");\n-            var census = new TestHostedRepository(null, \"census\");\n-            var issueProject = new TestIssueProject(null, \"TEST\");\n-\n@@ -59,1 +49,1 @@\n-                            \"rfr\"\n+                            \"24h_test\"\n@@ -72,8 +62,8 @@\n-                    .addHostedRepository(\"repo1\", repo1)\n-                    .addHostedRepository(\"repo2\", repo2)\n-                    .addHostedRepository(\"repo3\", repo3)\n-                    .addHostedRepository(\"repo4\", repo4)\n-                    .addHostedRepository(\"fork3\", fork3)\n-                    .addHostedRepository(\"fork4\", fork4)\n-                    .addHostedRepository(\"census\", census)\n-                    .addIssueProject(\"TEST\", issueProject)\n+                    .addHostedRepository(\"repo1\", new TestHostedRepository(\"repo1\"))\n+                    .addHostedRepository(\"repo2\", new TestHostedRepository(TestHost.createNew(List.of()), \"repo2\"))\n+                    .addHostedRepository(\"repo3\", new TestHostedRepository(\"repo3\"))\n+                    .addHostedRepository(\"repo4\", new TestHostedRepository(\"repo4\"))\n+                    .addHostedRepository(\"fork3\", new TestHostedRepository(\"fork3\"))\n+                    .addHostedRepository(\"fork4\", new TestHostedRepository(\"fork4\"))\n+                    .addHostedRepository(\"census\", new TestHostedRepository(\"census\"))\n+                    .addIssueProject(\"TEST\", new TestIssueProject(null, \"TEST\"))\n@@ -89,1 +79,0 @@\n-\n@@ -92,0 +81,8 @@\n+            assertEquals(\"census\",pullRequestBot1.censusRepo().name());\n+            assertEquals(\"master\",pullRequestBot1.censusRef());\n+            assertEquals(\"{test=used to run tests}\",pullRequestBot1.externalPullRequestCommands().toString());\n+            assertEquals(\"{test=Signature needs verify}\",pullRequestBot1.blockingCheckLabels().toString());\n+            assertEquals(\"[rfr]\",pullRequestBot1.twoReviewersLabels().toString());\n+            assertEquals(\"[24h_test]\",pullRequestBot1.twentyFourHoursLabels().toString());\n+            assertFalse(pullRequestBot1.ignoreStaleReviews());\n+            assertEquals(\".*\",pullRequestBot1.allowedTargetBranches().toString());\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/PullRequestBotFactoryTest.java","additions":17,"deletions":20,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -13,2 +13,0 @@\n-        var repo1 = new TestHostedRepository(null, \"repo1\");\n-\n@@ -40,1 +38,1 @@\n-                .addHostedRepository(\"repo1\", repo1)\n+                .addHostedRepository(\"repo1\", new TestHostedRepository(\"repo1\"))\n","filename":"bots\/submit\/src\/test\/java\/org\/openjdk\/skara\/bots\/submit\/SubmitBotFactoryTest.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -13,2 +13,0 @@\n-        var issueProject = new TestIssueProject(null, \"TEST\");\n-\n@@ -29,1 +27,1 @@\n-                .addIssueProject(\"test_bugs\/TEST\", issueProject)\n+                .addIssueProject(\"test_bugs\/TEST\", new TestIssueProject(null, \"TEST\"))\n@@ -35,0 +33,5 @@\n+\n+        SyncLabelBot syncLabelBot1 = (SyncLabelBot) bots.get(0);\n+        assertEquals(\"SyncLabelBot@TEST\", syncLabelBot1.toString());\n+        assertEquals(\".*\", syncLabelBot1.inspect().toString());\n+        assertEquals(\"\\\\b\\\\B\", syncLabelBot1.ignore().toString());\n","filename":"bots\/synclabel\/src\/test\/java\/org\/openjdk\/skara\/bots\/synclabel\/SyncLabelBotFactoryTest.java","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -15,4 +15,0 @@\n-            var repo1 = new TestHostedRepository(null, \"repo1\");\n-            var repo2 = new TestHostedRepository(null, \"repo2\");\n-            var census = new TestHostedRepository(null, \"census\");\n-\n@@ -46,3 +42,3 @@\n-                    .addHostedRepository(\"repo1\", repo1)\n-                    .addHostedRepository(\"repo2\", repo2)\n-                    .addHostedRepository(\"census\", census)\n+                    .addHostedRepository(\"repo1\", new TestHostedRepository(\"repo1\"))\n+                    .addHostedRepository(\"repo2\", new TestHostedRepository(\"repo2\"))\n+                    .addHostedRepository(\"census\", new TestHostedRepository(\"census\"))\n@@ -56,2 +52,2 @@\n-            assertEquals(\"TestBot@repo1\",bots.get(0).toString());\n-            assertEquals(\"TestBot@repo2\",bots.get(1).toString());\n+            assertEquals(\"TestBot@repo1\", bots.get(0).toString());\n+            assertEquals(\"TestBot@repo2\", bots.get(1).toString());\n","filename":"bots\/tester\/src\/test\/java\/org\/openjdk\/skara\/bots\/tester\/TestBotFactoryTest.java","additions":5,"deletions":9,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -13,4 +13,0 @@\n-        var repo1 = new TestHostedRepository(null, \"repo1\");\n-        var repo2 = new TestHostedRepository(null, \"repo2\");\n-        var repo3 = new TestHostedRepository(null, \"repo3\");\n-\n@@ -28,2 +24,2 @@\n-                .addHostedRepository(\"repo1\", repo1)\n-                .addHostedRepository(\"repo2\", repo2)\n+                .addHostedRepository(\"repo1\", new TestHostedRepository(\"repo1\"))\n+                .addHostedRepository(\"repo2\", new TestHostedRepository(\"repo2\"))\n@@ -36,2 +32,2 @@\n-        assertEquals(\"TestInfoBot@repo1\",bots.get(0).toString());\n-        assertEquals(\"TestInfoBot@repo2\",bots.get(1).toString());\n+        assertEquals(\"TestInfoBot@repo1\", bots.get(0).toString());\n+        assertEquals(\"TestInfoBot@repo2\", bots.get(1).toString());\n","filename":"bots\/testinfo\/src\/test\/java\/org\/openjdk\/skara\/bots\/testinfo\/TestInfoBotFactoryTest.java","additions":4,"deletions":8,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -202,0 +202,4 @@\n+\n+    public List<Branch> getBranches() {\n+        return branches;\n+    }\n","filename":"bots\/topological\/src\/main\/java\/org\/openjdk\/skara\/bots\/topological\/TopologicalBot.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -15,2 +15,0 @@\n-            var repo1 = new TestHostedRepository(null, \"repo1\");\n-\n@@ -31,1 +29,1 @@\n-                    .addHostedRepository(\"repo1\", repo1)\n+                    .addHostedRepository(\"repo1\", new TestHostedRepository(\"repo1\"))\n@@ -39,1 +37,5 @@\n-            assertEquals(\"TopologicalBot@repo1\", bots.get(0).toString());\n+            TopologicalBot topologicalBot1 = (TopologicalBot) bots.get(0);\n+            assertEquals(\"TopologicalBot@repo1\", topologicalBot1.toString());\n+            assertEquals(\"master\", topologicalBot1.getBranches().get(0).toString());\n+            assertEquals(\"dev\", topologicalBot1.getBranches().get(1).toString());\n+            assertEquals(\"test\", topologicalBot1.getBranches().get(2).toString());\n","filename":"bots\/topological\/src\/test\/java\/org\/openjdk\/skara\/bots\/topological\/TopologicalBotFactoryTest.java","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -87,69 +87,3 @@\n-        var finalConfiguration = JSON.object();\n-        for (var defaultField : defaultConfiguration.fields()) {\n-            finalConfiguration.put(defaultField.name(), defaultField.value());\n-        }\n-        for (var field : configuration.fields()) {\n-            finalConfiguration.put(field.name(), field.value());\n-        }\n-\n-        var botConfiguration = new BotConfiguration() {\n-            @Override\n-            public Path storageFolder() {\n-                return storagePath;\n-            }\n-\n-            @Override\n-            public HostedRepository repository(String name) {\n-                var repoName = name.split(\":\")[0];\n-                if (!hostedRepositories.containsKey(repoName)) {\n-                    throw new RuntimeException(\"Unknown repository: \" + repoName);\n-                }\n-                return hostedRepositories.get(repoName);\n-            }\n-\n-            @Override\n-            public IssueProject issueProject(String name) {\n-                if (!issueProjects.containsKey(name)) {\n-                    throw new RuntimeException(\"Unknown issue project: \" + name);\n-                }\n-                return issueProjects.get(name);\n-            }\n-\n-            @Override\n-            public ContinuousIntegration continuousIntegration(String name) {\n-                throw new RuntimeException(\"not implemented yet\");\n-            }\n-\n-            @Override\n-            public String repositoryRef(String name) {\n-                return name.split(\":\")[1];\n-            }\n-\n-            @Override\n-            public String repositoryName(String name) {\n-                var refIndex = name.indexOf(':');\n-                if (refIndex >= 0) {\n-                    name = name.substring(0, refIndex);\n-                }\n-                var orgIndex = name.lastIndexOf('\/');\n-                if (orgIndex >= 0) {\n-                    name = name.substring(orgIndex + 1);\n-                }\n-                return name;\n-            }\n-\n-            @Override\n-            public JSONObject specific() {\n-                return finalConfiguration;\n-            }\n-        };\n-\n-        var factories = BotFactory.getBotFactories();\n-        for (var factory : factories) {\n-            if (factory.name().equals(name)) {\n-                var bots = factory.create(botConfiguration);\n-                if (bots.size() != 1) {\n-                    throw new RuntimeException(\"Factory did not create a bot instance\");\n-                }\n-                return bots.get(0);\n-            }\n+        var bots = createBots(name, configuration);\n+        if (bots.size() != 1) {\n+            throw new RuntimeException(\"Factory did not create a bot instance\");\n@@ -157,1 +91,1 @@\n-        throw new RuntimeException(\"Failed to find bot factory with name: \" + name);\n+        return bots.get(0);\n","filename":"test\/src\/main\/java\/org\/openjdk\/skara\/test\/TestBotFactory.java","additions":4,"deletions":70,"binary":false,"changes":74,"status":"modified"},{"patch":"@@ -58,0 +58,15 @@\n+    \/**\n+     * Creates an instance without a backing local repository that will not support any actual repository interaction\n+     *\/\n+    public TestHostedRepository(String projectName) {\n+        super(null, projectName);\n+        this.host = null;\n+        this.projectName = projectName;\n+        this.localRepository = null;\n+        pullRequestPattern = null;\n+        commitComments = new HashMap<>();\n+    }\n+\n+    \/**\n+     * Creates an instance without a backing local repository that will not support any actual repository interaction\n+     *\/\n","filename":"test\/src\/main\/java\/org\/openjdk\/skara\/test\/TestHostedRepository.java","additions":15,"deletions":0,"binary":false,"changes":15,"status":"modified"}]}