{"files":[{"patch":"@@ -27,0 +27,1 @@\n+import org.openjdk.skara.forge.HostedRepository;\n@@ -43,1 +44,1 @@\n-    private final URI from;\n+    private final HostedRepository from;\n@@ -49,1 +50,1 @@\n-    CheckoutBot(URI from, Branch branch, Path to, Path storage, StorageBuilder<Mark> marksStorage) {\n+    CheckoutBot(HostedRepository from, Branch branch, Path to, Path storage, StorageBuilder<Mark> marksStorage) {\n@@ -65,0 +66,18 @@\n+    private URI webURI() {\n+        var webURI = from.webUrl().toString();\n+        if (!webURI.endsWith(\".git\")) {\n+            webURI += \".git\";\n+        }\n+\n+        return URI.create(webURI);\n+    }\n+\n+    private URI uri() {\n+        var uri = from.url().toString();\n+        if (!uri.endsWith(\".git\")) {\n+            uri += \".git\";\n+        }\n+\n+        return URI.create(uri);\n+    }\n+\n@@ -76,1 +95,1 @@\n-        return \"CheckoutBot(\" + from + \":\" + branch.name() + \", \" + to + \")\";\n+        return \"CheckoutBot(\" + from.name() + \":\" + branch.name() + \", \" + to + \")\";\n@@ -87,1 +106,1 @@\n-            var fromDir = storage.resolve(urlEncode(from));\n+            var fromDir = storage.resolve(urlEncode(webURI()));\n@@ -92,1 +111,1 @@\n-                fromRepo = Repository.clone(from, fromDir);\n+                fromRepo = Repository.clone(uri(), fromDir);\n@@ -101,1 +120,1 @@\n-            var repoName = Path.of(from.getPath()).getFileName().toString();\n+            var repoName = Path.of(webURI().getPath()).getFileName().toString();\n","filename":"bots\/checkout\/src\/main\/java\/org\/openjdk\/skara\/bots\/checkout\/CheckoutBot.java","additions":25,"deletions":6,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -52,4 +52,2 @@\n-            var from = repo.get(\"from\").asString();\n-            var lastColon = from.lastIndexOf(\":\");\n-            var fromURI = URI.create(from.substring(0, lastColon));\n-            var fromBranch = new Branch(from.substring(lastColon + 1));\n+            var from = configuration.repository(repo.get(\"from\").get(\"repo\").asString());\n+            var fromBranch = new Branch(repo.get(\"from\").get(\"branch\").asString());\n@@ -58,1 +56,1 @@\n-            var repoName = fromURI.getPath().substring(1); \/\/ Remove leading '\/'\n+            var repoName = from.webUrl().getPath().substring(1) + \".git\"; \/\/ Remove leading '\/'\n@@ -61,1 +59,1 @@\n-            bots.add(new CheckoutBot(fromURI, fromBranch, to, storage, markStorage));\n+            bots.add(new CheckoutBot(from, fromBranch, to, storage, markStorage));\n","filename":"bots\/checkout\/src\/main\/java\/org\/openjdk\/skara\/bots\/checkout\/CheckoutBotFactory.java","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -81,1 +81,1 @@\n-            var bot = new CheckoutBot(gitHostedRepo.url(), gitLocalRepo.defaultBranch(), hgDir, storage, marksStorage);\n+            var bot = new CheckoutBot(gitHostedRepo, gitLocalRepo.defaultBranch(), hgDir, storage, marksStorage);\n@@ -114,1 +114,1 @@\n-            var bot = new CheckoutBot(gitHostedRepo.url(), gitLocalRepo.defaultBranch(), hgDir, storage, marksStorage);\n+            var bot = new CheckoutBot(gitHostedRepo, gitLocalRepo.defaultBranch(), hgDir, storage, marksStorage);\n","filename":"bots\/checkout\/src\/test\/java\/org\/openjdk\/skara\/bots\/checkout\/CheckoutBotTests.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}