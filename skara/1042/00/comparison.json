{"files":[{"patch":"@@ -342,0 +342,45 @@\n+\n+    @Test\n+    void testAddLabelWithBuild(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo);\n+             var tempFolder = new TemporaryDirectory()) {\n+            var storageFolder = tempFolder.path().resolve(\"storage\");\n+            var issueProject = credentials.getIssueProject();\n+            var syncLabelBot = testBotBuilder(issueProject, storageFolder).create(\"synclabel\", JSON.object());\n+\n+            var issue1 = credentials.createIssue(issueProject, \"Issue 1\");\n+            issue1.setProperty(\"fixVersions\", JSON.array().add(JSON.of(\"openjfx17\")));\n+            issue1.setProperty(\"issuetype\", JSON.of(\"Bug\"));\n+            issue1.setState(RESOLVED);\n+            TestBotRunner.runPeriodicItems(syncLabelBot);\n+            assertEquals(List.of(), issue1.labels());\n+\n+            var issue2 = credentials.createIssue(issueProject, \"Issue 2\");\n+            issue2.setProperty(\"fixVersions\", JSON.array().add(JSON.of(\"8u271\")));\n+            issue2.setProperty(\"issuetype\", JSON.of(\"Backport\"));\n+            issue2.setProperty(\"customfield_10006\", JSON.of(\"b33\"));\n+            issue2.setState(RESOLVED);\n+            issue1.addLink(Link.create(issue2, \"backported by\").build());\n+            TestBotRunner.runPeriodicItems(syncLabelBot);\n+            assertEquals(List.of(), issue1.labels());\n+\n+            var issue3 = credentials.createIssue(issueProject, \"Issue 3\");\n+            issue3.setProperty(\"fixVersions\", JSON.array().add(JSON.of(\"8u291\")));\n+            issue3.setProperty(\"issuetype\", JSON.of(\"Backport\"));\n+            issue3.setState(RESOLVED);\n+            issue1.addLink(Link.create(issue3, \"backported by\").build());\n+            TestBotRunner.runPeriodicItems(syncLabelBot);\n+            assertEquals(List.of(), issue3.labels());\n+\n+            var issue4 = credentials.createIssue(issueProject, \"Issue 4\");\n+            issue4.setProperty(\"fixVersions\", JSON.array().add(JSON.of(\"8u301\")));\n+            issue4.setProperty(\"issuetype\", JSON.of(\"Backport\"));\n+            issue4.setState(RESOLVED);\n+            issue1.addLink(Link.create(issue4, \"backported by\").build());\n+            TestBotRunner.runPeriodicItems(syncLabelBot);\n+            assertEquals(List.of(), issue1.labels());\n+            assertEquals(List.of(), issue2.labels());\n+            assertEquals(List.of(), issue3.labels());\n+            assertEquals(List.of(\"hgupdate-sync\"), issue4.labels());\n+        }\n+    }\n","filename":"bots\/synclabel\/src\/test\/java\/org\/openjdk\/skara\/bots\/synclabel\/SyncLabelBotTests.java","additions":45,"deletions":0,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -76,2 +76,2 @@\n-        if (issue.properties().containsKey(\"customfield_10006\") && issue.properties().get(\"customfield_10006\").isObject()) {\n-            return JdkVersion.parse(versionString.get(0), issue.properties().get(\"customfield_10006\").get(\"value\").asString());\n+        if (issue.properties().containsKey(\"customfield_10006\")) {\n+            return JdkVersion.parse(versionString.get(0), issue.properties().get(\"customfield_10006\").asString());\n","filename":"jbs\/src\/main\/java\/org\/openjdk\/skara\/jbs\/Backports.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -199,1 +199,1 @@\n-                issue.setProperty(\"customfield_10006\", JSON.object().put(\"value\", resolvedInBuild));\n+                issue.setProperty(\"customfield_10006\", JSON.of(resolvedInBuild));\n@@ -478,0 +478,16 @@\n+\n+    @Test\n+    void labelTest8261303(TestInfo testInfo) throws IOException\n+    {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"openjfx17\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"8u271\/b33\", \"8u291\", \"8u301\");\n+            backports.assertLabeled(\"8u301\");\n+\n+            backports.addBackports(\"11.0.11-oracle\", \"11.0.11\", \"11.0.10-oracle\", \"11.0.9.0.1-oracle\/b01\",\n+                    \"11.0.9-oracle\", \"11.0.8.0.2-oracle\");\n+            backports.assertLabeled(\"8u301\", \"11.0.9.0.1-oracle\", \"11.0.10-oracle\", \"11.0.11-oracle\");\n+        }\n+    }\n","filename":"jbs\/src\/test\/java\/org\/openjdk\/skara\/jbs\/BackportsTests.java","additions":17,"deletions":1,"binary":false,"changes":18,"status":"modified"}]}