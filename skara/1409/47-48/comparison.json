{"files":[{"patch":"@@ -27,0 +27,1 @@\n+import org.openjdk.skara.vcs.Branch;\n@@ -336,7 +337,7 @@\n-            final List<Commit> commits = repository.commits(hash.hex(), 2, true).asList();\n-            commits.forEach(commit -> log.info(commit.toString()));\n-            if (commits.size() == 2) {\n-                repository.revert(commits.get(1).hash());\n-                final Hash resetHash = repository.commit(\"Integration Merge\", \"duke\", \"duke@openjdk.org\");\n-                repository.push(resetHash, pr.repository().url(), pr.targetRef(), false);\n-            }\n+            repository.checkout(new Branch(pr.targetRef()), false);\n+            final List<Commit> commits = repository.commits(hash.hex(), 2).asList();\n+            commits.forEach(commit -> log.fine(commit.toString()));\n+            \/\/ There is always at least one prior commit before the integrated one\n+            repository.revert(commits.get(1).hash());\n+            final Hash resetHash = repository.commit(\"Post Integration Merging of \" + hash.hex(), \"duke\", \"duke@openjdk.org\");\n+            repository.push(resetHash, pr.repository().url(), pr.targetRef(), false);\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/IntegrateCommand.java","additions":8,"deletions":7,"binary":false,"changes":15,"status":"modified"}]}