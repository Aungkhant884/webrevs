{"files":[{"patch":"@@ -79,1 +79,1 @@\n-            PreIntegrations.retargetDependencies(pr);\n+            var retargetedDependencies = PreIntegrations.retargetDependencies(pr);\n@@ -81,0 +81,18 @@\n+            for (var retargeted : retargetedDependencies) {\n+                retargeted.addComment(\"\"\"\n+                    The dependent pull request has now been integrated, and the target branch of this pull request \\\n+                    has been updated. This means that changes from the dependent pull request can start to show up \\\n+                    as belonging to this pull request, which may be confusing for reviewers. To remedy this situation, \\\n+                    simply merge the latest changes from the new target branch into this pull request by running commands \\\n+                    similar to these in the local repository for your personal fork:\n+\n+                    ```bash\n+                    git checkout %s\n+                    git fetch %s %s\n+                    git merge FETCH_HEAD\n+                    # if there are conflicts, follow the instructions given by git merge\n+                    git commit -m \"Merge %s\"\n+                    git push\n+                    ```\n+                    \"\"\".formatted(pr.sourceRef(), pr.repository().webUrl(), pr.targetRef(), pr.targetRef()));\n+            }\n","filename":"bots\/notify\/src\/main\/java\/org\/openjdk\/skara\/bots\/notify\/prbranch\/PullRequestBranchNotifier.java","additions":19,"deletions":1,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -235,0 +235,6 @@\n+\n+            \/\/ Instructions on how to adapt to the newly integrated changes should have been posted\n+            var lastComment = followUpPr.comments().get(followUpPr.comments().size() - 1);\n+            assertTrue(lastComment.body().contains(\"The dependent pull request has now\"), lastComment.body());\n+            assertTrue(lastComment.body().contains(\"git checkout source\"), lastComment.body());\n+            assertTrue(lastComment.body().contains(\"git commit -m \\\"Merge master\\\"\"), lastComment.body());\n","filename":"bots\/notify\/src\/test\/java\/org\/openjdk\/skara\/bots\/notify\/prbranch\/PullRequestBranchNotifierTests.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -25,1 +25,1 @@\n-import java.util.Optional;\n+import java.util.*;\n@@ -45,1 +45,2 @@\n-    public static void retargetDependencies(PullRequest pr) {\n+    public static Collection<PullRequest> retargetDependencies(PullRequest pr) {\n+        var ret = new ArrayList<PullRequest>();\n@@ -52,0 +53,1 @@\n+                ret.add(candidate);\n@@ -54,0 +56,1 @@\n+        return ret;\n","filename":"forge\/src\/main\/java\/org\/openjdk\/skara\/forge\/PreIntegrations.java","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"}]}