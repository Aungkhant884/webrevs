{"files":[{"patch":"@@ -44,0 +44,6 @@\n+    \/**\n+     * This method will parse issues from Pull Request Body and filters out JEP and CSR issues\n+     *\n+     * @param body The Pull Request Body\n+     * @return Set of issue ids\n+     *\/\n","filename":"bots\/common\/src\/main\/java\/org\/openjdk\/skara\/bots\/common\/BotUtils.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -756,1 +756,0 @@\n-            log.info(\"Map after updated: \" + workItem.bot.issuePRMap());\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/CheckRun.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -324,2 +324,2 @@\n-        var prRecord = new PRRecord(pr.repository().name(), pr.id());\n-        if (!bot.initializedPRs().contains(prId)) {\n+        var prRecord = new PRRecord(pr.repository().name(), prId);\n+        if (!bot.initializedPRs().containsKey(prId)) {\n@@ -330,2 +330,1 @@\n-            bot.initializedPRs().add(prId);\n-            log.info(\"Map after initialization with pr \" + pr.id() + \" : \" + bot.issuePRMap());\n+            bot.initializedPRs().put(prId, true);\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/CheckWorkItem.java","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -25,40 +25,1 @@\n-import java.util.Objects;\n-\n-public class PRRecord {\n-    private String repoName;\n-    private String prId;\n-\n-    public PRRecord(String repoName, String prId) {\n-        this.repoName = repoName;\n-        this.prId = prId;\n-    }\n-\n-    public String repoName() {\n-        return repoName;\n-    }\n-\n-    public String prId() {\n-        return prId;\n-    }\n-\n-    @Override\n-    public boolean equals(Object obj) {\n-        if (this == obj) {\n-            return true;\n-        }\n-        if (obj == null || getClass() != obj.getClass()) {\n-            return false;\n-        }\n-        var other = (PRRecord) obj;\n-        return repoName.equals(other.repoName) && prId.equals(other.prId);\n-    }\n-\n-    @Override\n-    public int hashCode() {\n-        return Objects.hash(repoName, prId);\n-    }\n-\n-    @Override\n-    public String toString() {\n-        return repoName + \"#\" + prId;\n-    }\n+public record PRRecord(String repoName, String prId) {\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/PRRecord.java","additions":1,"deletions":40,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -77,1 +77,1 @@\n-    private final Set<String> initializedPRs = new HashSet<>();\n+    private final Map<String, Boolean> initializedPRs = new ConcurrentHashMap<>();\n@@ -338,2 +338,2 @@\n-        synchronized (issuePRMap.get(issueId)) {\n-            List<PRRecord> prRecords = issuePRMap.get(issueId);\n+        List<PRRecord> prRecords = issuePRMap.get(issueId);\n+        synchronized (prRecords) {\n@@ -347,3 +347,3 @@\n-        if (issuePRMap.get(issueId) != null) {\n-            synchronized (issuePRMap.get(issueId)) {\n-                List<PRRecord> prRecords = issuePRMap.get(issueId);\n+        List<PRRecord> prRecords = issuePRMap.get(issueId);\n+        if (prRecords != null) {\n+            synchronized (prRecords) {\n@@ -355,1 +355,1 @@\n-    public Set<String> initializedPRs() {\n+    public Map<String, Boolean> initializedPRs() {\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/PullRequestBot.java","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"}]}