{"files":[{"patch":"@@ -246,1 +246,1 @@\n-            issue1.setProperty(\"fixVersions\", JSON.array().add(JSON.of(\"8u41\")));\n+            issue1.setProperty(\"fixVersions\", JSON.array().add(JSON.of(\"8u81\")));\n@@ -281,1 +281,1 @@\n-            var syncLabelBotWithIgnore = testBotBuilder(issueProject, storageFolder, null, \"8u4\\\\d\").create(\"synclabel\", JSON.object());\n+            var syncLabelBotWithIgnore = testBotBuilder(issueProject, storageFolder, null, \"8u8\\\\d\").create(\"synclabel\", JSON.object());\n@@ -299,1 +299,1 @@\n-            issue1.setProperty(\"fixVersions\", JSON.array().add(JSON.of(\"8u41\")));\n+            issue1.setProperty(\"fixVersions\", JSON.array().add(JSON.of(\"8u81\")));\n","filename":"bots\/synclabel\/src\/test\/java\/org\/openjdk\/skara\/bots\/synclabel\/SyncLabelBotTests.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -240,1 +240,1 @@\n-                            if (jdkVersion.patch().isPresent()) {\n+                            if (jdkVersion.components().size() > 4) {\n@@ -307,0 +307,33 @@\n+    \/\/ Certain versions \/ build numbers have a special meaning, and should be excluded from stream processing\n+    private static boolean onExcludeList(Issue issue) {\n+        var fixVersion = mainFixVersion(issue);\n+        if (fixVersion.isEmpty()) {\n+            return false;\n+        }\n+\n+        var version = fixVersion.get();\n+\n+        \/\/ 8u260 is a contingency release\n+        if (version.raw().equals(\"8u260\")) {\n+            return true;\n+        }\n+\n+        \/\/ 8u41 to 8u44 are reserved for JSR maintenance releases\n+        if (version.feature().equals(\"8\") && version.interim().isPresent() && Integer.parseInt(version.interim().get()) >= 41 && Integer.parseInt(version.interim().get()) <= 44) {\n+            return true;\n+        }\n+\n+        \/\/ JEP-322 interim releases (second digit > 0) should be excluded from evaluation\n+        var featureFamilyMatcher = featureFamilyPattern.matcher(version.feature());\n+        if (featureFamilyMatcher.matches()) {\n+            var featureVersion = featureFamilyMatcher.group(2);\n+            var numericFeature = Integer.parseInt(featureVersion);\n+\n+            if (numericFeature >= 9 && version.interim().isPresent() && !version.interim().get().equals(\"0\")) {\n+                return true;\n+            }\n+        }\n+\n+        return false;\n+    }\n+\n@@ -317,1 +350,5 @@\n-        for (var streamIssues : groupByReleaseStream(related)) {\n+        var includedOnly = related.stream()\n+                .filter(issue -> !onExcludeList(issue))\n+                .collect(Collectors.toList());\n+\n+        for (var streamIssues : groupByReleaseStream(includedOnly)) {\n","filename":"jbs\/src\/main\/java\/org\/openjdk\/skara\/jbs\/Backports.java","additions":39,"deletions":2,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -378,1 +378,1 @@\n-            backports.assertLabeled(\"8u261\", \"8u271\");\n+            backports.assertLabeled( \"8u271\");\n@@ -480,2 +480,1 @@\n-    void labelTest8261303(TestInfo testInfo) throws IOException\n-    {\n+    void labelTest8261303(TestInfo testInfo) throws IOException {\n@@ -494,0 +493,264 @@\n+\n+    @Test\n+    void sampleTest1(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"16\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"16.0.1\", \"16.0.2\");\n+            backports.assertLabeled(\"16.0.1\", \"16.0.2\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest2(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"17\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"16\", \"16.0.1\");\n+            backports.assertLabeled(\"17\", \"16.0.1\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest3(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"17\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"16u-cpu\", \"16.0.1\", \"16.0.2\");\n+            backports.assertLabeled(\"16.0.2\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest4(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"16\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"16.0.1\", \"16.0.2\", \"17\");\n+            backports.assertLabeled(\"16.0.1\", \"16.0.2\", \"17\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest5(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"18\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"17.0.2\", \"17.0.3-oracle\");\n+            backports.assertLabeled(\"17.0.3-oracle\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest6(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"8u291\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"8u281\", \"8u271\/b34\", \"8u261\/b32\");\n+            backports.assertLabeled(\"8u291\", \"8u271\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest7(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"8u291\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"8u281\/b31\", \"8u271\/b60\", \"7u301\");\n+            backports.assertLabeled();\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest8(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"8u291\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"8u281\/b31\", \"8u271\/b37\", \"openjdk8u292\");\n+            backports.assertLabeled(\"8u281\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest9(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"8u260\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"8u261\", \"8u271\");\n+            backports.assertLabeled(\"8u271\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest10(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"8u261\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"8u271\", \"8u281\", \"emb-8u271\", \"emb-8u281\");\n+            backports.assertLabeled(\"8u271\", \"8u281\", \"emb-8u281\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest11(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"8u271\/b35\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"8u281\/b31\", \"8u291\", \"openjdk8u292\");\n+            backports.assertLabeled(\"8u281\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest12(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"8u261\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"8u271\", \"openjdk8u275\", \"openjdk8u292\", \"emb-8u271\");\n+            backports.assertLabeled(\"8u271\", \"openjdk8u292\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest13(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"8u261\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"8u-tls13-repo\", \"8u271\", \"emb-8u261\");\n+            backports.assertLabeled(\"8u271\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest14(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"8u41\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"8u261\", \"8u251\");\n+            backports.assertLabeled(\"8u261\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest15(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"8u291\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"8u301\", \"8u281-b31\");\n+            backports.assertLabeled(\"8u301\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest16(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"8u301\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"8u293\");\n+            backports.assertLabeled(\"8u301\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest17(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"11.0.11\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"11.0.11-oracle\");\n+            backports.assertLabeled();\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest18(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"11.0.9\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"11.0.10-oracle\");\n+            backports.assertLabeled();\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest19(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"11.0.12-oracle\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"11.0.13-oracle\", \"11.0.11.0.1-oracle\");\n+            backports.assertLabeled(\"11.0.13-oracle\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest20(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"11.0.13-oracle\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"11.0.14-oracle\", \"11.0.12.1-oracle\");\n+            backports.assertLabeled(\"11.0.13-oracle\", \"11.0.14-oracle\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest21(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"11.0.13-oracle\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"11.0.14-oracle\", \"11.1.2\");\n+            backports.assertLabeled(\"11.0.14-oracle\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest22(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"15\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"14.0.1\", \"14\", \"13.0.2\", \"11.0.7\", \"11.0.6-oracle\", \"11.0.6\", \"openjdk8u252\", \"openjdk8u242\", \"8u241\");\n+            backports.assertLabeled(\"15\", \"14.0.1\", \"11.0.7\", \"openjdk8u252\");\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest23(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"17\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"11.0.11-oracle\", \"11.0.11\", \"8u291\", \"8u281\/b31\", \"8u271\/b60\", \"emb-8u291\", \"7u301\");\n+            backports.assertLabeled();\n+        }\n+    }\n+\n+    @Test\n+    void sampleTest24(TestInfo testInfo) throws IOException {\n+        try (var credentials = new HostCredentials(testInfo)) {\n+            var backports = new BackportManager(credentials, \"15\");\n+            backports.assertLabeled();\n+\n+            backports.addBackports(\"14u-cpu\", \"14.0.2\", \"13.0.7\", \"11.0.9-oracle\", \"11.0.9\");\n+            backports.assertLabeled();\n+        }\n+    }\n","filename":"jbs\/src\/test\/java\/org\/openjdk\/skara\/jbs\/BackportsTests.java","additions":266,"deletions":3,"binary":false,"changes":269,"status":"modified"}]}