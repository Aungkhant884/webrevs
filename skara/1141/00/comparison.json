{"files":[{"patch":"@@ -165,1 +165,1 @@\n-            fork.restrictPushAccess(new Branch(backportBranchName), List.of(command.user()));\n+            fork.restrictPushAccess(new Branch(backportBranchName), command.user());\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/BackportCommand.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -219,1 +219,1 @@\n-    public void restrictPushAccess(Branch branch, List<HostUser> users) {\n+    public void restrictPushAccess(Branch branch, HostUser user) {\n","filename":"bots\/tester\/src\/test\/java\/org\/openjdk\/skara\/bots\/tester\/InMemoryHostedRepository.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -91,1 +91,1 @@\n-    void restrictPushAccess(Branch branch, List<HostUser> users);\n+    void restrictPushAccess(Branch branch, HostUser users);\n","filename":"forge\/src\/main\/java\/org\/openjdk\/skara\/forge\/HostedRepository.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -554,7 +554,13 @@\n-    public void restrictPushAccess(Branch branch, List<HostUser> users) {\n-        var usernames = JSON.array();\n-        for (var user : users) {\n-            usernames.add(user.username());\n-        }\n-        var query = JSON.object()\n-                        .put(\"restrictions\", JSON.object().put(\"users\", usernames));\n+    public void restrictPushAccess(Branch branch, HostUser user) {\n+        var restrictions =\n+            JSON.object()\n+                .put(\"users\", JSON.array().add(user.username()))\n+                .put(\"teams\", JSON.array())\n+                .put(\"apps\", JSON.array());\n+        var query =\n+            JSON.object()\n+                .put(\"required_status_checks\", JSON.of())\n+                .put(\"enforce_admins\", JSON.of())\n+                .put(\"required_pull_request_reviews\", JSON.of())\n+                .put(\"restrictions\", restrictions);\n+\n","filename":"forge\/src\/main\/java\/org\/openjdk\/skara\/forge\/github\/GitHubRepository.java","additions":13,"deletions":7,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -592,1 +592,1 @@\n-    public void restrictPushAccess(Branch branch, List<HostUser> users) {\n+    public void restrictPushAccess(Branch branch, HostUser user) {\n","filename":"forge\/src\/main\/java\/org\/openjdk\/skara\/forge\/gitlab\/GitLabRepository.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -307,1 +307,1 @@\n-    public void restrictPushAccess(Branch branch, List<HostUser> users) {\n+    public void restrictPushAccess(Branch branch, HostUser user) {\n","filename":"test\/src\/main\/java\/org\/openjdk\/skara\/test\/TestHostedRepository.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}