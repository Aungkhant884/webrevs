{"files":[{"patch":"@@ -21,0 +21,1 @@\n+    private static final Pattern commandPattern = Pattern.compile(\"^\\\\s*\/([A-Za-z]+).*$\", Pattern.MULTILINE);\n@@ -22,1 +23,1 @@\n-    private static String filterComments(String body) {\n+    private static String filterCommentsAndCommands(String body) {\n@@ -29,0 +30,3 @@\n+        var commandLineMatcher = commandPattern.matcher(body);\n+        body = commandLineMatcher.replaceAll(\"\");\n+\n@@ -169,1 +173,1 @@\n-        var filteredBody = filterComments(pr.body());\n+        var filteredBody = filterCommentsAndCommands(pr.body());\n@@ -326,1 +330,1 @@\n-        return filterComments(comment.body());\n+        return filterCommentsAndCommands(comment.body());\n@@ -345,1 +349,1 @@\n-        body.append(filterComments(reviewComment.body()));\n+        body.append(filterCommentsAndCommands(reviewComment.body()));\n@@ -368,1 +372,1 @@\n-            return filterComments(review.body().get());\n+            return filterCommentsAndCommands(review.body().get());\n","filename":"bots\/mlbridge\/src\/main\/java\/org\/openjdk\/skara\/bots\/mlbridge\/ArchiveMessages.java","additions":9,"deletions":5,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -39,1 +39,1 @@\n-import java.util.regex.Pattern;\n+import java.util.regex.*;\n@@ -107,1 +107,1 @@\n-    private final static Pattern commandPattern = Pattern.compile(\"^\/.*$\");\n+    private final static Pattern commandPattern = Pattern.compile(\"^\\\\s*\/([A-Za-z]+).*$\");\n@@ -116,2 +116,5 @@\n-        var commandMatcher = commandPattern.matcher(body);\n-        if (commandMatcher.matches()) {\n+        \/\/ Check if this comment only contains command lines\n+        var commandOnly = body.strip().lines()\n+                              .map(commandPattern::matcher)\n+                              .allMatch(Matcher::matches);\n+        if (body.strip().lines().count() > 0 && commandOnly) {\n","filename":"bots\/mlbridge\/src\/main\/java\/org\/openjdk\/skara\/bots\/mlbridge\/ArchiveWorkItem.java","additions":7,"deletions":4,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -1469,0 +1469,1 @@\n+            pr.addComment(\"  \/cc others\");\n@@ -1470,0 +1471,2 @@\n+            pr.addComment(\"the command is \/hello there\");\n+            pr.addComment(\"but this will be parsed\\n\/newline command\");\n@@ -1486,0 +1489,4 @@\n+            assertFalse(archiveContains(archiveFolder.path(), \"\/cc\"));\n+            assertTrue(archiveContains(archiveFolder.path(), \"\/hello there\"));\n+            assertTrue(archiveContains(archiveFolder.path(), \"but this will be parsed\"));\n+            assertFalse(archiveContains(archiveFolder.path(), \"\/newline\"));\n","filename":"bots\/mlbridge\/src\/test\/java\/org\/openjdk\/skara\/bots\/mlbridge\/MailingListBridgeBotTests.java","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"}]}