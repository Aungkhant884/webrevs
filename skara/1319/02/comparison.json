{"files":[{"patch":"@@ -33,0 +33,2 @@\n+import static org.openjdk.skara.jcheck.ReviewersConfiguration.BYLAWS_URL;\n+\n@@ -132,0 +134,7 @@\n+        \/\/ The role name of the configuration should be changed to the official role name.\n+        var formatLimits = new LinkedHashMap<String, Integer>();\n+        formatLimits.put(\"[Lead%s](%s#project-lead)\", updatedLimits.get(\"lead\"));\n+        formatLimits.put(\"[Reviewer%s](%s#reviewer)\", updatedLimits.get(\"reviewers\"));\n+        formatLimits.put(\"[Committer%s](%s#committer)\", updatedLimits.get(\"committers\"));\n+        formatLimits.put(\"[Author%s](%s#author)\", updatedLimits.get(\"authors\"));\n+        formatLimits.put(\"[Contributor%s](%s#contributor)\", updatedLimits.get(\"contributors\"));\n@@ -134,1 +143,1 @@\n-        var totalRequired = updatedLimits.values().stream().mapToInt(Integer::intValue).sum();\n+        var totalRequired = formatLimits.values().stream().mapToInt(Integer::intValue).sum();\n@@ -139,1 +148,1 @@\n-        var nonZeroDescriptions = updatedLimits.entrySet().stream()\n+        var nonZeroDescriptions = formatLimits.entrySet().stream()\n@@ -141,1 +150,1 @@\n-                .map(entry -> entry.getValue() + \" of role \" + entry.getKey())\n+                .map(entry -> entry.getValue() + \" \" + String.format(entry.getKey(), entry.getValue() > 1 ? \"s\" : \"\", BYLAWS_URL))\n@@ -144,1 +153,1 @@\n-            reply.print(\" (with \" + String.join(\", \", nonZeroDescriptions) + \")\");\n+            reply.print(\" (with at least \" + String.join(\", \", nonZeroDescriptions) + \")\");\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/ReviewersCommand.java","additions":13,"deletions":4,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -40,0 +40,1 @@\n+import static org.openjdk.skara.jcheck.ReviewersConfiguration.BYLAWS_URL;\n@@ -42,2 +43,4 @@\n-    private static final String reviewersCommandFinallyOutput = \"The total number of required reviews for this PR \" +\n-            \"(including the jcheck configuration and the last \/reviewers command) is now set to \";\n+    private static final String REVIEWERS_COMMENT_TEMPLATE = \"The total number of required reviews for this PR \" +\n+            \"(including the jcheck configuration and the last \/reviewers command) is now set to %d (with at least %s).\";\n+    private static final String ZERO_REVIEWER_COMMENT = \"The total number of required reviews for this PR \" +\n+            \"(including the jcheck configuration and the last \/reviewers command) is now set to 0.\";\n@@ -46,1 +49,1 @@\n-    private static final String ZERO_REVIEW_PROGRESS = \"Change must be properly reviewed (no reviews required)\";\n+    private static final String ZERO_REVIEW_PROGRESS = \"Change must be properly reviewed (no review required)\";\n@@ -81,1 +84,1 @@\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 1, \"\", \"1 reviewer\")));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 0, 0)));\n@@ -89,1 +92,1 @@\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 1, \"\", \"1 reviewer\")));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 0, 0)));\n@@ -95,1 +98,1 @@\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 1, \"\", \"1 reviewer\")));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 0, 0)));\n@@ -101,1 +104,1 @@\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 1, \"\", \"1 reviewer\")));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 0, 0)));\n@@ -107,1 +110,1 @@\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 1, \"\", \"1 reviewer\")));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 0, 0)));\n@@ -114,2 +117,2 @@\n-            assertLastCommentContains(reviewerPr, reviewersCommandFinallyOutput + \"2 (with 1 of role reviewers, 1 of role authors).\");\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 2, \"s\", \"1 reviewer, 1 author\")));\n+            assertLastCommentContains(reviewerPr, getReviewersExpectedComment(0, 1, 0, 1, 0));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 1, 0)));\n@@ -122,2 +125,2 @@\n-            assertLastCommentContains(reviewerPr, reviewersCommandFinallyOutput + \"2 (with 1 of role reviewers, 1 of role committers).\");\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 2, \"s\", \"1 reviewer, 1 committer\")));\n+            assertLastCommentContains(reviewerPr, getReviewersExpectedComment(0, 1, 1, 0, 0));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 1, 0, 0)));\n@@ -130,2 +133,2 @@\n-            assertLastCommentContains(reviewerPr, reviewersCommandFinallyOutput + \"2 (with 2 of role reviewers).\");\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 2, \"s\", \"2 reviewers\")));\n+            assertLastCommentContains(reviewerPr, getReviewersExpectedComment(0, 2, 0, 0, 0));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 2, 0, 0, 0)));\n@@ -141,1 +144,1 @@\n-            assertTrue(updatedPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 2, \"s\", \"2 reviewers\")));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 2, 0, 0, 0)));\n@@ -151,1 +154,1 @@\n-            assertTrue(updatedPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 1, \"\", \"1 reviewer\")));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 0, 0)));\n@@ -157,2 +160,2 @@\n-            assertLastCommentContains(reviewerPr, reviewersCommandFinallyOutput + \"1 (with 1 of role lead).\");\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 1, \"\", \"1 lead\")));\n+            assertLastCommentContains(reviewerPr, getReviewersExpectedComment(1, 0, 0, 0, 0));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(1, 0, 0, 0, 0)));\n@@ -168,2 +171,2 @@\n-            assertLastCommentContains(reviewerPr, reviewersCommandFinallyOutput + \"1 (with 1 of role reviewers).\");\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 1, \"\", \"1 reviewer\")));\n+            assertLastCommentContains(reviewerPr, getReviewersExpectedComment(0, 1, 0, 0, 0));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 0, 0)));\n@@ -209,2 +212,2 @@\n-            assertLastCommentContains(reviewerPr, reviewersCommandFinallyOutput + \"2 (with 1 of role reviewers, 1 of role authors).\");\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 2, \"s\", \"1 reviewer, 1 author\")));\n+            assertLastCommentContains(reviewerPr, getReviewersExpectedComment(0, 1, 0, 1, 0));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 1, 0)));\n@@ -221,1 +224,1 @@\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 2, \"s\", \"1 reviewer, 1 author\")));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 1, 0)));\n@@ -226,1 +229,1 @@\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 1, \"\", \"1 reviewer\")));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 0, 0)));\n@@ -232,1 +235,1 @@\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 1, \"\", \"1 reviewer\")));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 0, 0)));\n@@ -267,1 +270,1 @@\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 1, \"\", \"1 reviewer\")));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 0, 0)));\n@@ -273,1 +276,1 @@\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 1, \"\", \"1 reviewer\")));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 0, 0)));\n@@ -280,2 +283,2 @@\n-            assertLastCommentContains(reviewerPr, reviewersCommandFinallyOutput + \"2 (with 1 of role reviewers, 1 of role authors).\");\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 2, \"s\", \"1 reviewer, 1 author\")));\n+            assertLastCommentContains(reviewerPr, getReviewersExpectedComment(0, 1, 0, 1, 0));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 1, 0)));\n@@ -287,1 +290,1 @@\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 2, \"s\", \"1 reviewer, 1 author\")));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 1, 0)));\n@@ -292,1 +295,1 @@\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 1, \"\", \"1 reviewer\")));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 0, 0)));\n@@ -298,1 +301,1 @@\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 1, \"\", \"1 reviewer\")));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 0, 0)));\n@@ -332,2 +335,2 @@\n-            assertLastCommentContains(authorPR, reviewersCommandFinallyOutput + \"2 (with 1 of role reviewers, 1 of role authors).\");\n-            assertTrue(authorPR.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 2, \"s\", \"1 reviewer, 1 author\")));\n+            assertLastCommentContains(authorPR, getReviewersExpectedComment(0, 1, 0, 1, 0));\n+            assertTrue(authorPR.body().contains(getReviewersExpectedProgress(0, 1, 0, 1, 0)));\n@@ -369,2 +372,2 @@\n-            assertLastCommentContains(authorPR, reviewersCommandFinallyOutput + \"2 (with 1 of role reviewers, 1 of role authors).\");\n-            assertTrue(authorPR.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 2, \"s\", \"1 reviewer, 1 author\")));\n+            assertLastCommentContains(authorPR, getReviewersExpectedComment(0, 1, 0, 1, 0));\n+            assertTrue(authorPR.body().contains(getReviewersExpectedProgress(0, 1, 0, 1, 0)));\n@@ -375,1 +378,1 @@\n-            assertTrue(authorPR.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 2, \"s\", \"1 reviewer, 1 author\")));\n+            assertTrue(authorPR.body().contains(getReviewersExpectedProgress(0, 1, 0, 1, 0)));\n@@ -381,2 +384,2 @@\n-            assertLastCommentContains(reviewerPr, reviewersCommandFinallyOutput + \"1 (with 1 of role reviewers).\");\n-            assertTrue(reviewerPr.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 1, \"\", \"1 reviewer\")));\n+            assertLastCommentContains(reviewerPr, getReviewersExpectedComment(0, 1, 0, 0, 0));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 1, 0, 0, 0)));\n@@ -412,2 +415,2 @@\n-            assertLastCommentContains(authorPR, reviewersCommandFinallyOutput + \"2 (with 1 of role reviewers, 1 of role authors).\");\n-            assertTrue(authorPR.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 2, \"s\", \"1 reviewer, 1 author\")));\n+            assertLastCommentContains(authorPR, getReviewersExpectedComment(0, 1, 0, 1, 0));\n+            assertTrue(authorPR.body().contains(getReviewersExpectedProgress(0, 1, 0, 1, 0)));\n@@ -462,1 +465,0 @@\n-                var totalNum = Math.max(i, 5);\n@@ -465,2 +467,2 @@\n-                        getReviewersExpectedComment(totalNum, 1, 1, 1, 1, contributorNum),\n-                        getReviewersExpectedProgress(totalNum, 1, 1, 1, 1, contributorNum));\n+                        getReviewersExpectedComment(1, 1, 1, 1, contributorNum),\n+                        getReviewersExpectedProgress(1, 1, 1, 1, contributorNum));\n@@ -471,1 +473,0 @@\n-                var totalNum = Math.max(i, 5);\n@@ -475,2 +476,2 @@\n-                        getReviewersExpectedComment(totalNum, 1, 1, 1, authorNum, contributorNum),\n-                        getReviewersExpectedProgress(totalNum, 1, 1, 1, authorNum, contributorNum));\n+                        getReviewersExpectedComment(1, 1, 1, authorNum, contributorNum),\n+                        getReviewersExpectedProgress(1, 1, 1, authorNum, contributorNum));\n@@ -481,1 +482,0 @@\n-                var totalNum = Math.max(i, 5);\n@@ -486,2 +486,2 @@\n-                        getReviewersExpectedComment(totalNum, 1, 1, committerNum, authorNum, contributorNum),\n-                        getReviewersExpectedProgress(totalNum, 1, 1, committerNum, authorNum, contributorNum));\n+                        getReviewersExpectedComment(1, 1, committerNum, authorNum, contributorNum),\n+                        getReviewersExpectedProgress(1, 1, committerNum, authorNum, contributorNum));\n@@ -492,1 +492,0 @@\n-                var totalNum = Math.max(i, 5);\n@@ -498,3 +497,2 @@\n-                        getReviewersExpectedComment(totalNum, 1, reviewerNum, committerNum, authorNum, contributorNum),\n-                        getReviewersExpectedProgress(totalNum, 1, reviewerNum, committerNum, authorNum, contributorNum));\n-\n+                        getReviewersExpectedComment(1, reviewerNum, committerNum, authorNum, contributorNum),\n+                        getReviewersExpectedProgress(1, reviewerNum, committerNum, authorNum, contributorNum));\n@@ -505,2 +503,2 @@\n-                    getReviewersExpectedComment(5, 1, 1, 1, 1, 1),\n-                    getReviewersExpectedProgress(5, 1, 1, 1, 1, 1));\n+                    getReviewersExpectedComment(1, 1, 1, 1, 1),\n+                    getReviewersExpectedProgress(1, 1, 1, 1, 1));\n@@ -517,24 +515,2 @@\n-    private String getReviewersExpectedComment(int totalNum, int leadNum, int reviewerNum, int committerNum, int authorNum, int contributorNum) {\n-        StringBuilder builder = new StringBuilder();\n-        builder.append(reviewersCommandFinallyOutput);\n-        builder.append(totalNum);\n-        if (leadNum == 0 && reviewerNum == 0 && committerNum == 0 && authorNum == 0 && contributorNum == 0) {\n-            builder.append(\".\");\n-            return builder.toString();\n-        }\n-        builder.append(\" (with\");\n-        var list = new ArrayList<String>();\n-        var map = new LinkedHashMap<String, Integer>();\n-        map.put(\"lead\", leadNum);\n-        map.put(\"reviewers\", reviewerNum);\n-        map.put(\"committers\", committerNum);\n-        map.put(\"authors\", authorNum);\n-        map.put(\"contributors\", contributorNum);\n-        for (var entry : map.entrySet()) {\n-            if (entry.getValue() > 0) {\n-                list.add(\" \" + entry.getValue() + \" of role \" + entry.getKey());\n-            }\n-        }\n-        builder.append(String.join(\",\", list));\n-        builder.append(\").\");\n-        return builder.toString();\n+    private String getReviewersExpectedComment(int leadNum, int reviewerNum, int committerNum, int authorNum, int contributorNum) {\n+        return constructFromTemplate(REVIEWERS_COMMENT_TEMPLATE, ZERO_REVIEWER_COMMENT, leadNum, reviewerNum, committerNum, authorNum, contributorNum);\n@@ -543,1 +519,9 @@\n-    private String getReviewersExpectedProgress(int totalNum, int leadNum, int reviewerNum, int committerNum, int authorNum, int contributorNum) {\n+    private String getReviewersExpectedProgress(int leadNum, int reviewerNum, int committerNum, int authorNum, int contributorNum) {\n+        return constructFromTemplate(REVIEW_PROGRESS_TEMPLATE, ZERO_REVIEW_PROGRESS, leadNum, reviewerNum, committerNum, authorNum, contributorNum);\n+    }\n+\n+    private String constructFromTemplate(String template, String zeroTemplate, int leadNum, int reviewerNum, int committerNum, int authorNum, int contributorNum) {\n+        var totalNum = leadNum + reviewerNum + committerNum + authorNum + contributorNum;\n+        if (totalNum == 0) {\n+            return zeroTemplate;\n+        }\n@@ -546,5 +530,5 @@\n-        reviewRequirementMap.put(\"lead\", leadNum);\n-        reviewRequirementMap.put(\"reviewer\", reviewerNum);\n-        reviewRequirementMap.put(\"committer\", committerNum);\n-        reviewRequirementMap.put(\"author\", authorNum);\n-        reviewRequirementMap.put(\"contributor\", contributorNum);\n+        reviewRequirementMap.put(\"[Lead%s](%s#project-lead)\", leadNum);\n+        reviewRequirementMap.put(\"[Reviewer%s](%s#reviewer)\", reviewerNum);\n+        reviewRequirementMap.put(\"[Committer%s](%s#committer)\", committerNum);\n+        reviewRequirementMap.put(\"[Author%s](%s#author)\", authorNum);\n+        reviewRequirementMap.put(\"[Contributor%s](%s#contributor)\", contributorNum);\n@@ -554,1 +538,1 @@\n-                requireList.add(requirementNum+ \" \" + reviewRequirement.getKey() + (requirementNum > 1 ? \"s\" : \"\"));\n+                requireList.add(requirementNum + \" \" + String.format(reviewRequirement.getKey(), requirementNum > 1 ? \"s\" : \"\", BYLAWS_URL));\n@@ -557,2 +541,2 @@\n-        if (totalNum == 0) {\n-            return ZERO_REVIEW_PROGRESS;\n+        if (template.equals(REVIEW_PROGRESS_TEMPLATE)) {\n+            return String.format(template, totalNum, totalNum > 1 ? \"s\" : \"\", String.join(\", \", requireList));\n@@ -560,1 +544,1 @@\n-            return String.format(REVIEW_PROGRESS_TEMPLATE, totalNum, totalNum > 1 ? \"s\" : \"\", String.join(\", \", requireList));\n+            return String.format(template, totalNum, String.join(\", \", requireList));\n@@ -607,1 +591,1 @@\n-            assertTrue(authorPR.body().contains(ZERO_REVIEW_PROGRESS));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 0, 0, 0, 0)));\n@@ -611,1 +595,1 @@\n-            assertTrue(authorPR.body().contains(String.format(REVIEW_PROGRESS_TEMPLATE, 2, \"s\", \"2 reviewers\")));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 2, 0, 0, 0)));\n@@ -615,1 +599,1 @@\n-            assertTrue(reviewerPr.body().contains(ZERO_REVIEW_PROGRESS));\n+            assertTrue(reviewerPr.body().contains(getReviewersExpectedProgress(0, 0, 0, 0, 0)));\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/ReviewersTests.java","additions":77,"deletions":93,"binary":false,"changes":170,"status":"modified"},{"patch":"@@ -33,0 +33,1 @@\n+    public static final String BYLAWS_URL = \"https:\/\/openjdk.java.net\/bylaws\";\n@@ -88,5 +89,5 @@\n-        reviewRequirementMap.put(\"lead\", lead);\n-        reviewRequirementMap.put(\"reviewer\", reviewers);\n-        reviewRequirementMap.put(\"committer\", committers);\n-        reviewRequirementMap.put(\"author\", authors);\n-        reviewRequirementMap.put(\"contributor\", contributors);\n+        reviewRequirementMap.put(\"[Lead%s](%s#project-lead)\", lead);\n+        reviewRequirementMap.put(\"[Reviewer%s](%s#reviewer)\", reviewers);\n+        reviewRequirementMap.put(\"[Committer%s](%s#committer)\", committers);\n+        reviewRequirementMap.put(\"[Author%s](%s#author)\", authors);\n+        reviewRequirementMap.put(\"[Contributor%s](%s#contributor)\", contributors);\n@@ -97,1 +98,1 @@\n-                requireList.add(requirementNum + \" \" + reviewRequirement.getKey() + (requirementNum > 1 ? \"s\" : \"\"));\n+                requireList.add(requirementNum + \" \" + String.format(reviewRequirement.getKey(), requirementNum > 1 ? \"s\" : \"\", BYLAWS_URL));\n@@ -101,1 +102,1 @@\n-            reviewRequirements = \"no reviews required\";\n+            reviewRequirements = \"no review required\";\n","filename":"jcheck\/src\/main\/java\/org\/openjdk\/skara\/jcheck\/ReviewersConfiguration.java","additions":8,"deletions":7,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -38,0 +38,1 @@\n+import java.util.LinkedHashMap;\n@@ -43,0 +44,2 @@\n+import static org.openjdk.skara.jcheck.ReviewersConfiguration.BYLAWS_URL;\n+\n@@ -563,2 +566,0 @@\n-        \/\/ no review required.\n-        var noReview = \"no reviews required\";\n@@ -567,5 +568,1 @@\n-        assertEquals(noReview, JCheckConfiguration.parse(conf).checks().reviewers().getReviewRequirements());\n-\n-        \/\/ review required template.\n-        var hasReview = \"%d review required, with at least %s\";\n-        var hasReviews = \"%d reviews required, with at least %s\";\n+        assertEquals(constructReviewRequirement(0, 0, 0, 0, 0), JCheckConfiguration.parse(conf).checks().reviewers().getReviewRequirements());\n@@ -576,1 +573,1 @@\n-        assertEquals(String.format(hasReview, 1, \"1 reviewer\"),\n+        assertEquals(constructReviewRequirement(0, 1, 0, 0, 0),\n@@ -581,1 +578,1 @@\n-        assertEquals(String.format(hasReview, 1, \"1 committer\"),\n+        assertEquals(constructReviewRequirement(0, 0, 1, 0, 0),\n@@ -588,1 +585,1 @@\n-        assertEquals(String.format(hasReviews, 2, \"1 reviewer, 1 committer\"),\n+        assertEquals(constructReviewRequirement(0, 1, 1, 0, 0),\n@@ -593,1 +590,1 @@\n-        assertEquals(String.format(hasReviews, 2, \"2 reviewers\"),\n+        assertEquals(constructReviewRequirement(0, 2, 0, 0, 0),\n@@ -601,1 +598,1 @@\n-        assertEquals(String.format(hasReviews, 3, \"1 reviewer, 1 committer, 1 author\"),\n+        assertEquals(constructReviewRequirement(0, 1, 1, 1, 0),\n@@ -607,1 +604,1 @@\n-        assertEquals(String.format(hasReviews, 3, \"1 reviewer, 2 committers\"),\n+        assertEquals(constructReviewRequirement(0, 1, 2, 0, 0),\n@@ -612,1 +609,1 @@\n-        assertEquals(String.format(hasReviews, 3, \"3 committers\"),\n+        assertEquals(constructReviewRequirement(0, 0, 3, 0, 0),\n@@ -621,1 +618,1 @@\n-        assertEquals(String.format(hasReviews, 4, \"1 reviewer, 1 committer, 1 author, 1 contributor\"),\n+        assertEquals(constructReviewRequirement(0, 1, 1, 1, 1),\n@@ -628,1 +625,1 @@\n-        assertEquals(String.format(hasReviews, 4, \"1 reviewer, 1 committer, 2 authors\"),\n+        assertEquals(constructReviewRequirement(0, 1, 1, 2, 0),\n@@ -634,1 +631,1 @@\n-        assertEquals(String.format(hasReviews, 4, \"1 reviewer, 3 authors\"),\n+        assertEquals(constructReviewRequirement(0, 1, 0, 3, 0),\n@@ -639,1 +636,1 @@\n-        assertEquals(String.format(hasReviews, 4, \"4 authors\"),\n+        assertEquals(constructReviewRequirement(0, 0, 0, 4, 0),\n@@ -649,1 +646,1 @@\n-        assertEquals(String.format(hasReviews, 5, \"1 lead, 1 reviewer, 1 committer, 1 author, 1 contributor\"),\n+        assertEquals(constructReviewRequirement(1, 1, 1, 1, 1),\n@@ -657,1 +654,1 @@\n-        assertEquals(String.format(hasReviews, 5, \"1 reviewer, 1 committer, 1 author, 2 contributors\"),\n+        assertEquals(constructReviewRequirement(0, 1, 1, 1, 2),\n@@ -664,1 +661,1 @@\n-        assertEquals(String.format(hasReviews, 5, \"1 reviewer, 1 committer, 3 contributors\"),\n+        assertEquals(constructReviewRequirement(0, 1, 1, 0, 3),\n@@ -670,1 +667,1 @@\n-        assertEquals(String.format(hasReviews, 5, \"1 reviewer, 4 contributors\"),\n+        assertEquals(constructReviewRequirement(0, 1, 0, 0, 4),\n@@ -675,1 +672,1 @@\n-        assertEquals(String.format(hasReviews, 5, \"5 contributors\"),\n+        assertEquals(constructReviewRequirement(0, 0, 0, 0, 5),\n@@ -678,0 +675,26 @@\n+\n+    private String constructReviewRequirement(int leadNum, int reviewerNum, int committerNum, int authorNum, int contributorNum) {\n+        \/\/ no review required.\n+        var noReview = \"no review required\";\n+        \/\/ review required template.\n+        var hasReview = \"%d review%s required, with at least %s\";\n+        var totalNum = leadNum + reviewerNum + committerNum + authorNum + contributorNum;\n+        if (totalNum == 0) {\n+            return noReview;\n+        }\n+        var requireList = new ArrayList<String>();\n+        var reviewRequirementMap = new LinkedHashMap<String, Integer>();\n+        reviewRequirementMap.put(\"[Lead%s](%s#project-lead)\", leadNum);\n+        reviewRequirementMap.put(\"[Reviewer%s](%s#reviewer)\", reviewerNum);\n+        reviewRequirementMap.put(\"[Committer%s](%s#committer)\", committerNum);\n+        reviewRequirementMap.put(\"[Author%s](%s#author)\", authorNum);\n+        reviewRequirementMap.put(\"[Contributor%s](%s#contributor)\", contributorNum);\n+        for (var reviewRequirement : reviewRequirementMap.entrySet()) {\n+            var requirementNum = reviewRequirement.getValue();\n+            if (requirementNum > 0) {\n+                requireList.add(requirementNum+ \" \" + String.format(reviewRequirement.getKey(), requirementNum > 1 ? \"s\" : \"\", BYLAWS_URL));\n+            }\n+        }\n+        return String.format(hasReview, totalNum, totalNum > 1 ? \"s\" : \"\", String.join(\", \", requireList));\n+    }\n+\n","filename":"jcheck\/src\/test\/java\/org\/openjdk\/skara\/jcheck\/ReviewersCheckTests.java","additions":46,"deletions":23,"binary":false,"changes":69,"status":"modified"}]}