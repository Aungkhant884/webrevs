{"files":[{"patch":"@@ -141,1 +141,0 @@\n-        boolean isSubsection = false;\n@@ -159,4 +158,0 @@\n-                if (!isSubsection && current != null) {\n-                    sections.put(current.name(), current);\n-                }\n-\n@@ -165,2 +160,6 @@\n-                    current = new Section(name);\n-                    isSubsection = false;\n+                    if (sections.containsKey(name)) {\n+                        current = sections.get(name);\n+                    } else {\n+                        current = new Section(name);\n+                        sections.put(current.name(), current);\n+                    }\n@@ -183,5 +182,6 @@\n-                    var next = new Section(subsectionName);\n-                    section.addSubsection(next);\n-\n-                    isSubsection = true;\n-                    current = next;\n+                    if (section.hasSubsection(subsectionName)) {\n+                        current = section.subsection(subsectionName);\n+                    } else {\n+                        current = new Section(subsectionName);\n+                        section.addSubsection(current);\n+                    }\n@@ -205,4 +205,0 @@\n-        if (!isSubsection && current != null) {\n-            sections.put(current.name(), current);\n-        }\n-\n","filename":"ini\/src\/main\/java\/org\/openjdk\/skara\/ini\/INI.java","additions":12,"deletions":16,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -196,0 +196,39 @@\n+\n+    @Test\n+    void testUpdatingValueInGlobalSection() {\n+        var lines = List.of(\n+            \"foo=bar\",\n+            \"foo=baz\"\n+        );\n+        var ini = INI.parse(lines);\n+        assertEquals(\"baz\", ini.get(\"foo\").asString());\n+    }\n+\n+    @Test\n+    void testUpdatingValueInSection() {\n+        var lines = List.of(\n+            \"[checks]\",\n+            \"    commits = reviews\",\n+            \"\",\n+            \"[checks]\",\n+            \"    commits = none\"\n+        );\n+        var ini = INI.parse(lines);\n+        assertEquals(\"none\", ini.section(\"checks\").get(\"commits\").asString());\n+    }\n+\n+    @Test\n+    void testUpdatingValueInSubsection() {\n+        var lines = List.of(\n+            \"[checks]\",\n+            \"    commits = reviews\",\n+            \"\",\n+            \"[checks \\\"reviews\\\"]\",\n+            \"    merge = ignore\",\n+            \"\",\n+            \"[checks \\\"reviews\\\"]\",\n+            \"    merge = check\"\n+        );\n+        var ini = INI.parse(lines);\n+        assertEquals(\"check\", ini.section(\"checks\").subsection(\"reviews\").get(\"merge\").asString());\n+    }\n","filename":"ini\/src\/test\/java\/org\/openjdk\/skara\/ini\/INITests.java","additions":39,"deletions":0,"binary":false,"changes":39,"status":"modified"}]}