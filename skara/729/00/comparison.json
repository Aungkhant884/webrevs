{"files":[{"patch":"@@ -653,1 +653,3 @@\n-        var user = authorName + \" <\" + authorEmail + \">\";\n+        var user = authorEmail != null ?\n+            authorName + \" <\" + authorEmail + \">\" :\n+            authorName;\n","filename":"vcs\/src\/main\/java\/org\/openjdk\/skara\/vcs\/hg\/HgRepository.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2412,0 +2412,15 @@\n+\n+    @Test\n+    void testMercurialTagWithoutEmail() throws IOException, InterruptedException {\n+        try (var dir = new TemporaryDirectory()) {\n+            var repo = Repository.init(dir.path(), VCS.HG);\n+            var readme = dir.path().resolve(\"README\");\n+            Files.write(readme, List.of(\"Hello, readme!\"));\n+            repo.add(readme);\n+            var head = repo.commit(\"Add README\", \"author\", \"author@openjdk.java.net\");\n+            var tag = repo.tag(head, \"1.0\", \"Add tag 1.0\", \"duke\", null);\n+            var annotated = repo.annotate(tag).orElseThrow();\n+            assertEquals(\"duke\", annotated.author().name());\n+            assertNull(annotated.author().email());\n+        }\n+    }\n","filename":"vcs\/src\/test\/java\/org\/openjdk\/skara\/vcs\/RepositoryTests.java","additions":15,"deletions":0,"binary":false,"changes":15,"status":"modified"}]}