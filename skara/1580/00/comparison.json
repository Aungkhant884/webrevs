{"files":[{"patch":"@@ -36,0 +36,2 @@\n+    private final boolean approvalComment;\n+    private final String approvalTerm;\n@@ -37,1 +39,1 @@\n-    public Approval(String prefix, String request, String approved, String rejected, String documentLink) {\n+    public Approval(String prefix, String request, String approved, String rejected, String documentLink, boolean approvalComment, String approvalTerm) {\n@@ -44,0 +46,2 @@\n+        this.approvalComment = approvalComment;\n+        this.approvalTerm = approvalTerm;\n@@ -88,0 +92,8 @@\n+\n+    public boolean approvalComment() {\n+        return approvalComment;\n+    }\n+\n+    public String approvalTerm() {\n+        return approvalTerm;\n+    }\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/Approval.java","additions":13,"deletions":1,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -282,1 +282,1 @@\n-                        ret.put(\"[\" + issue.id() + \"](\" + issue.webUrl() + \") needs maintainer approval\", true);\n+                        ret.put(\"[\" + issue.id() + \"](\" + issue.webUrl() + \") needs \" + approval.approvalTerm(), true);\n@@ -284,1 +284,1 @@\n-                        ret.put(\"[\" + issue.id() + \"](\" + issue.webUrl() + \") needs maintainer approval\", false);\n+                        ret.put(\"[\" + issue.id() + \"](\" + issue.webUrl() + \") needs \" + approval.approvalTerm(), false);\n@@ -1338,1 +1338,1 @@\n-            if (approvalNeeded() && readyToPostApprovalNeededComment) {\n+            if (approvalNeeded() && approval.approvalComment() && readyToPostApprovalNeededComment) {\n@@ -1340,1 +1340,1 @@\n-                    if (!entry.getKey().endsWith(\"needs maintainer approval\") && !entry.getValue()) {\n+                    if (!entry.getKey().endsWith(\"needs \" + approval.approvalTerm()) && !entry.getValue()) {\n@@ -1537,1 +1537,1 @@\n-                \" This change is now ready for you to apply for maintainer [approval](\" + approval.documentLink() + \"). \" +\n+                \" This change is now ready for you to apply for [\" + approval.approvalTerm() + \"](\" + approval.documentLink() + \"). \" +\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/CheckRun.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -234,1 +234,5 @@\n-                Approval approval = new Approval(prefix, request, approved, rejected, documentLink);\n+                \/\/ default value is true\n+                boolean approvalComment = !approvalJSON.contains(\"approvalComment\") || approvalJSON.get(\"approvalComment\").asBoolean();\n+                \/\/default value is maintainer approval\n+                String approvalTerm = approvalJSON.contains(\"approvalTerm\") ? approvalJSON.get(\"approvalTerm\").asString() : \"maintainer approval\";\n+                Approval approval = new Approval(prefix, request, approved, rejected, documentLink, approvalComment, approvalTerm);\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/PullRequestBotFactory.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -63,1 +63,1 @@\n-                    \"-critical-rejected\", \"https:\/\/example.com\");\n+                    \"-critical-rejected\", \"https:\/\/example.com\", true, \"maintainer approval\");\n@@ -135,1 +135,1 @@\n-            assertLastCommentContains(pr, \" This change is now ready for you to apply for maintainer\");\n+            assertLastCommentContains(pr, \" This change is now ready for you to apply for [maintainer approval]\");\n@@ -177,1 +177,1 @@\n-                    \"-critical-rejected\", \"https:\/\/example.com\");\n+                    \"-critical-rejected\", \"https:\/\/example.com\", true, \"maintainer approval\");\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/ApprovalAndApproveCommandTests.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -35,1 +35,1 @@\n-                \"jdk17u-fix-no\", \"https:\/\/example.com\");\n+                \"jdk17u-fix-no\", \"https:\/\/example.com\", true, \"maintainer approval\");\n@@ -40,0 +40,2 @@\n+        assertTrue(approval.approvalComment());\n+        assertEquals(\"maintainer approval\", approval.approvalTerm());\n@@ -43,1 +45,1 @@\n-                \"https:\/\/example.com\");\n+                \"https:\/\/example.com\", false, \"maintainer approval\");\n@@ -47,0 +49,2 @@\n+        assertFalse(approval.approvalComment());\n+        assertEquals(\"maintainer approval\", approval.approvalTerm());\n@@ -50,1 +54,1 @@\n-                \"-critical-rejected\", \"https:\/\/example.com\");\n+                \"-critical-rejected\", \"https:\/\/example.com\", false, \"critical request\");\n@@ -63,0 +67,2 @@\n+        assertFalse(approval.approvalComment());\n+        assertEquals(\"critical request\", approval.approvalTerm());\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/ApprovalTests.java","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -3081,1 +3081,1 @@\n-                    \"-critical-rejected\", \"https:\/\/example.com\");\n+                    \"-critical-rejected\", \"https:\/\/example.com\", true, \"maintainer approval\");\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/CheckTests.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -321,1 +321,1 @@\n-                            \"jdk17u-fix-no\", \"https:\/\/example.com\"))\n+                            \"jdk17u-fix-no\", \"https:\/\/example.com\", true, \"maintainer approval\"))\n@@ -368,1 +368,1 @@\n-                    \"-critical-rejected\", \"https:\/\/example.com\");\n+                    \"-critical-rejected\", \"https:\/\/example.com\", true, \"critical request\");\n@@ -399,1 +399,1 @@\n-            assertFalse(pr.store().body().contains(\"[TEST-1](http:\/\/localhost\/project\/testTEST-1) needs maintainer approval\"));\n+            assertFalse(pr.store().body().contains(\"[TEST-1](http:\/\/localhost\/project\/testTEST-1) needs critical request\"));\n@@ -410,2 +410,2 @@\n-            assertTrue(pr.store().body().contains(\"[TEST-1](http:\/\/localhost\/project\/testTEST-1) needs maintainer approval\"));\n-            assertEquals(\"⚠️  @user1 This change is now ready for you to apply for maintainer [approval](https:\/\/example.com). \" +\n+            assertTrue(pr.store().body().contains(\"[TEST-1](http:\/\/localhost\/project\/testTEST-1) needs critical request\"));\n+            assertEquals(\"⚠️  @user1 This change is now ready for you to apply for [critical request](https:\/\/example.com). \" +\n@@ -424,2 +424,2 @@\n-            assertTrue(pr.store().body().contains(\"[TEST-1](http:\/\/localhost\/project\/testTEST-1) needs maintainer approval\"));\n-            assertEquals(\"⚠️  @user1 This change is now ready for you to apply for maintainer [approval](https:\/\/example.com). \" +\n+            assertTrue(pr.store().body().contains(\"[TEST-1](http:\/\/localhost\/project\/testTEST-1) needs critical request\"));\n+            assertEquals(\"⚠️  @user1 This change is now ready for you to apply for [critical request](https:\/\/example.com). \" +\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/IssueBotTests.java","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"}]}