{"files":[{"patch":"@@ -28,0 +28,1 @@\n+import java.nio.file.Files;\n@@ -77,1 +78,2 @@\n-            repository.add(repository.root().resolve(fileName));\n+            var filePath = repository.root().resolve(fileName);\n+            repository.add(filePath);\n@@ -79,0 +81,4 @@\n+\n+            if (Files.size(filePath) == 0) {\n+                throw new IllegalStateException(\"Storage file is empty: \" + filePath);\n+            }\n","filename":"storage\/src\/main\/java\/org\/openjdk\/skara\/storage\/RepositoryStorage.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"}]}