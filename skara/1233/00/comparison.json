{"files":[{"patch":"@@ -122,1 +122,3 @@\n-     * Return true if the issue's fixVersionList is a match for fixVersion, using \"-pool\" or \"-open\".\n+     * Return true if the issue's fixVersionList is a match for fixVersion, using \"-pool[-<opt>]\".\n+     * If the fixVersion has an opt string, then the pool record needs to have the same opt\n+     * string suffix.\n@@ -125,1 +127,1 @@\n-     * <N>-pool or <N>-open entry and all other entries are scratch values.\n+     * <N>-pool entry and all other entries are scratch values.\n@@ -129,2 +131,2 @@\n-        var poolVersion = JdkVersion.parse(majorVersion + \"-pool\");\n-        var openVersion = JdkVersion.parse(majorVersion + \"-open\");\n+        var poolSuffix = fixVersion.opt().map((o) -> \"-pool-\" + o).orElse(\"-pool\");\n+        var poolVersion = JdkVersion.parse(majorVersion + poolSuffix);\n@@ -136,1 +138,1 @@\n-        return mainVersion.get().equals(poolVersion.orElseThrow()) || mainVersion.get().equals(openVersion.orElseThrow());\n+        return mainVersion.get().equals(poolVersion.orElseThrow());\n@@ -154,2 +156,2 @@\n-     * If the main issue       has a matching <N>-pool\/open fixVersion, use it.\n-     * If an existing Backport has a matching <N>-pool\/open fixVersion, use it.\n+     * If the main issue       has a matching <N>-pool fixVersion, use it.\n+     * If an existing Backport has a matching <N>-pool fixVersion, use it.\n","filename":"jbs\/src\/main\/java\/org\/openjdk\/skara\/jbs\/Backports.java","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -78,1 +78,3 @@\n-            var optionalStart = raw.lastIndexOf(\"-\");\n+            \/\/ The input strings here never contain a $PRE string, but the $OPT string\n+            \/\/ may contain '-' so matching on first '-' is necessary.\n+            var optionalStart = raw.indexOf(\"-\");\n","filename":"jbs\/src\/main\/java\/org\/openjdk\/skara\/jbs\/JdkVersion.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -157,0 +157,3 @@\n+            var backportFoo = credentials.createIssue(issueProject, \"Backport Foo\");\n+            backportFoo.setProperty(\"issuetype\", JSON.of(\"Backport\"));\n+            issue.addLink(Link.create(backportFoo, \"backported by\").build());\n@@ -160,0 +163,1 @@\n+            backportFoo.setProperty(\"fixVersions\", JSON.array().add(\"12-pool-foo\"));\n@@ -162,0 +166,1 @@\n+            assertEquals(backportFoo, Backports.findIssue(issue, JdkVersion.parse(\"12.2-foo\").orElseThrow()).orElseThrow());\n@@ -163,0 +168,1 @@\n+            assertEquals(Optional.empty(), Backports.findIssue(issue, JdkVersion.parse(\"11.1-foo\").orElseThrow()));\n","filename":"jbs\/src\/test\/java\/org\/openjdk\/skara\/jbs\/BackportsTests.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -52,0 +52,3 @@\n+        var fooVersion = from(\"11.0.12-foo-bar\");\n+        assertEquals(List.of(\"11\", \"0\", \"12\"), fooVersion.components());\n+        assertEquals(\"foo-bar\", fooVersion.opt().orElseThrow());\n","filename":"jbs\/src\/test\/java\/org\/openjdk\/skara\/jbs\/JdkVersionTests.java","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}