{"files":[{"patch":"@@ -188,1 +188,1 @@\n-        if (originalAuthor.username().endsWith(\"[bot]\")) {\n+        if (bot.ignoredUsers().contains(originalAuthor.username())) {\n","filename":"bots\/mlbridge\/src\/main\/java\/org\/openjdk\/skara\/bots\/mlbridge\/ArchiveWorkItem.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -641,2 +641,3 @@\n-            \/\/ Close it\n-            pr.setState(Issue.State.CLOSED);\n+            \/\/ Close it (as a separate user)\n+            var closerPr = ignored.pullRequest(pr.id());\n+            closerPr.setState(Issue.State.CLOSED);\n@@ -658,0 +659,5 @@\n+\n+            \/\/ The closer should be the bot account - not the PR creator nor the closer\n+            assertEquals(2, archiveContainsCount(archiveFolder.path(), Pattern.quote(\"From: test+2+user2 at openjdk.java.net (User Number 2)\")));\n+            assertEquals(1, archiveContainsCount(archiveFolder.path(), Pattern.quote(\"From: test at test.mail (test)\")));\n+            assertEquals(0, archiveContainsCount(archiveFolder.path(), Pattern.quote(\"From: test+3+user3 at openjdk.java.net (User Number 3)\")));\n","filename":"bots\/mlbridge\/src\/test\/java\/org\/openjdk\/skara\/bots\/mlbridge\/MailingListBridgeBotTests.java","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -43,0 +43,1 @@\n+    HostUser closedBy = null;\n","filename":"test\/src\/main\/java\/org\/openjdk\/skara\/test\/IssueData.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -150,0 +150,1 @@\n+        data.closedBy = user;\n@@ -251,1 +252,1 @@\n-        return isClosed() ? Optional.of(author) : Optional.empty();\n+        return isClosed() ? Optional.of(data.closedBy) : Optional.empty();\n","filename":"test\/src\/main\/java\/org\/openjdk\/skara\/test\/TestIssue.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}