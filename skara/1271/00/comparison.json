{"files":[{"patch":"@@ -396,4 +396,9 @@\n-                    var oldBuild = issue.properties().getOrDefault(RESOLVED_IN_BUILD, JSON.of());\n-                    var newBuild = \"b\" + String.format(\"%02d\", tag.buildNum().get());\n-                    if (BuildCompare.shouldReplace(newBuild, oldBuild.asString())) {\n-                        issue.setProperty(RESOLVED_IN_BUILD, JSON.of(newBuild));\n+                    var tagVersion = JdkVersion.parse(tag.version());\n+                    if (tagVersion.isPresent() && fixVersion.equals(tagVersion.get())) {\n+                        var oldBuild = issue.properties().getOrDefault(RESOLVED_IN_BUILD, JSON.of());\n+                        var newBuild = \"b\" + String.format(\"%02d\", tag.buildNum().get());\n+                        if (BuildCompare.shouldReplace(newBuild, oldBuild.asString())) {\n+                            issue.setProperty(RESOLVED_IN_BUILD, JSON.of(newBuild));\n+                        } else {\n+                            log.info(\"Not replacing build \" + oldBuild.asString() + \" with \" + newBuild + \" for issue \" + issue.id());\n+                        }\n@@ -401,1 +406,1 @@\n-                        log.info(\"Not replacing build \" + oldBuild.asString() + \" with \" + newBuild + \" for issue \" + issue.id());\n+                        log.info(\"Not updating build in issue \" + issue.id() + \" with fixVersion \" + fixVersion + \" from tag \" + tag);\n","filename":"bots\/notify\/src\/main\/java\/org\/openjdk\/skara\/bots\/notify\/issue\/IssueNotifier.java","additions":10,"deletions":5,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -61,1 +61,2 @@\n-    private TestBotFactory.TestBotFactoryBuilder testBotBuilderFactory(HostedRepository hostedRepository, IssueProject issueProject, Path storagePath, JSONObject notifierConfig) throws IOException {\n+    private TestBotFactory.TestBotFactoryBuilder testBotBuilderFactory(HostedRepository hostedRepository, IssueProject issueProject,\n+                                                                       Path storagePath, JSONObject notifierConfig) {\n@@ -706,1 +707,1 @@\n-            var jbsNotifierConfig = JSON.object().put(\"fixversions\", JSON.object())\n+            var jbsNotifierConfig = JSON.object().put(\"fixversions\", JSON.object().put(\"master\", \"16\"))\n@@ -732,1 +733,1 @@\n-            assertEquals(Set.of(\"0.1\"), fixVersions(updatedIssue));\n+            assertEquals(Set.of(\"16\"), fixVersions(updatedIssue));\n@@ -839,1 +840,0 @@\n-            assertEquals(\"b110\", updatedIssue.properties().get(RESOLVED_IN_BUILD).asString());\n@@ -841,0 +841,2 @@\n+            \/\/ But not in the update backport\n+            assertEquals(\"team\", updatedIssue.properties().get(RESOLVED_IN_BUILD).asString());\n@@ -850,1 +852,0 @@\n-            assertEquals(\"b10\", updatedIssue.properties().get(RESOLVED_IN_BUILD).asString());\n@@ -852,0 +853,1 @@\n+            assertEquals(\"team\", updatedIssue.properties().get(RESOLVED_IN_BUILD).asString());\n@@ -861,1 +863,0 @@\n-            assertEquals(\"b08\", updatedIssue.properties().get(RESOLVED_IN_BUILD).asString());\n@@ -863,0 +864,1 @@\n+            assertEquals(\"team\", updatedIssue.properties().get(RESOLVED_IN_BUILD).asString());\n@@ -879,1 +881,1 @@\n-            var jbsNotifierConfig = JSON.object().put(\"fixversions\", JSON.object())\n+            var jbsNotifierConfig = JSON.object().put(\"fixversions\", JSON.object().put(\"master\", \"16\"))\n@@ -905,1 +907,1 @@\n-            assertEquals(Set.of(\"0.1\"), fixVersions(updatedIssue));\n+            assertEquals(Set.of(\"16\"), fixVersions(updatedIssue));\n","filename":"bots\/notify\/src\/test\/java\/org\/openjdk\/skara\/bots\/notify\/issue\/IssueNotifierTests.java","additions":10,"deletions":8,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -156,0 +156,5 @@\n+\n+    @Override\n+    public String toString() {\n+        return tag.toString();\n+    }\n","filename":"vcs\/src\/main\/java\/org\/openjdk\/skara\/vcs\/openjdk\/OpenJDKTag.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"}]}