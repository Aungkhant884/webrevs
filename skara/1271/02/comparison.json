{"files":[{"patch":"@@ -396,4 +396,9 @@\n-                    var oldBuild = issue.properties().getOrDefault(RESOLVED_IN_BUILD, JSON.of());\n-                    var newBuild = \"b\" + String.format(\"%02d\", tag.buildNum().get());\n-                    if (BuildCompare.shouldReplace(newBuild, oldBuild.asString())) {\n-                        issue.setProperty(RESOLVED_IN_BUILD, JSON.of(newBuild));\n+                    var tagVersion = JdkVersion.parse(tag.version());\n+                    if (tagVersion.isPresent() && fixVersion.equals(tagVersion.get())) {\n+                        var oldBuild = issue.properties().getOrDefault(RESOLVED_IN_BUILD, JSON.of());\n+                        var newBuild = \"b\" + String.format(\"%02d\", tag.buildNum().get());\n+                        if (BuildCompare.shouldReplace(newBuild, oldBuild.asString())) {\n+                            issue.setProperty(RESOLVED_IN_BUILD, JSON.of(newBuild));\n+                        } else {\n+                            log.info(\"Not replacing build \" + oldBuild.asString() + \" with \" + newBuild + \" for issue \" + issue.id());\n+                        }\n@@ -401,1 +406,1 @@\n-                        log.info(\"Not replacing build \" + oldBuild.asString() + \" with \" + newBuild + \" for issue \" + issue.id());\n+                        log.info(\"Not updating build in issue \" + issue.id() + \" with fixVersion \" + fixVersion + \" from tag \" + tag);\n","filename":"bots\/notify\/src\/main\/java\/org\/openjdk\/skara\/bots\/notify\/issue\/IssueNotifier.java","additions":10,"deletions":5,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -55,0 +55,1 @@\n+        finalProperties.remove(RESOLVED_IN_BUILD);\n","filename":"bots\/notify\/src\/main\/java\/org\/openjdk\/skara\/bots\/notify\/issue\/JbsBackport.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -742,1 +742,1 @@\n-            var jbsNotifierConfig = JSON.object().put(\"fixversions\", JSON.object())\n+            var jbsNotifierConfig = JSON.object().put(\"fixversions\", JSON.object().put(\"master\", \"16\"))\n@@ -768,1 +768,1 @@\n-            assertEquals(Set.of(\"0.1\"), fixVersions(updatedIssue));\n+            assertEquals(Set.of(\"16\"), fixVersions(updatedIssue));\n@@ -875,1 +875,0 @@\n-            assertEquals(\"b110\", updatedIssue.properties().get(RESOLVED_IN_BUILD).asString());\n@@ -877,0 +876,2 @@\n+            \/\/ But not in the update backport\n+            assertEquals(\"team\", updatedIssue.properties().get(RESOLVED_IN_BUILD).asString());\n@@ -886,1 +887,0 @@\n-            assertEquals(\"b10\", updatedIssue.properties().get(RESOLVED_IN_BUILD).asString());\n@@ -888,0 +888,1 @@\n+            assertEquals(\"team\", updatedIssue.properties().get(RESOLVED_IN_BUILD).asString());\n@@ -897,1 +898,0 @@\n-            assertEquals(\"b08\", updatedIssue.properties().get(RESOLVED_IN_BUILD).asString());\n@@ -899,0 +899,1 @@\n+            assertEquals(\"team\", updatedIssue.properties().get(RESOLVED_IN_BUILD).asString());\n@@ -915,1 +916,1 @@\n-            var jbsNotifierConfig = JSON.object().put(\"fixversions\", JSON.object())\n+            var jbsNotifierConfig = JSON.object().put(\"fixversions\", JSON.object().put(\"master\", \"16\"))\n@@ -941,1 +942,1 @@\n-            assertEquals(Set.of(\"0.1\"), fixVersions(updatedIssue));\n+            assertEquals(Set.of(\"16\"), fixVersions(updatedIssue));\n@@ -1315,0 +1316,1 @@\n+            assertFalse(backport.properties().containsKey(RESOLVED_IN_BUILD));\n","filename":"bots\/notify\/src\/test\/java\/org\/openjdk\/skara\/bots\/notify\/issue\/IssueNotifierTests.java","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -156,0 +156,5 @@\n+\n+    @Override\n+    public String toString() {\n+        return tag.toString();\n+    }\n","filename":"vcs\/src\/main\/java\/org\/openjdk\/skara\/vcs\/openjdk\/OpenJDKTag.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"}]}