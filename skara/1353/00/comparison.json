{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -52,0 +52,14 @@\n+    \/**\n+     * This constructor is only used by the manual test code.\n+     *\/\n+    JiraHost(URI uri, String cookie) {\n+        this.uri = uri;\n+        this.visibilityRole = null;\n+        this.securityLevel = null;\n+\n+        var baseApi = URIBuilder.base(uri)\n+                                .appendPath(\"\/rest\/api\/2\/\")\n+                                .build();\n+        request = new RestRequest(baseApi, \"test\", (r) -> Arrays.asList(\"Cookie\", cookie));\n+    }\n+\n","filename":"issuetracker\/src\/main\/java\/org\/openjdk\/skara\/issuetracker\/jira\/JiraHost.java","additions":15,"deletions":1,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -245,1 +245,0 @@\n-                performTransition(availableTransitions.get(\"Closed\"));\n@@ -247,0 +246,1 @@\n+            performTransition(availableTransitions.get(\"Closed\"));\n","filename":"issuetracker\/src\/main\/java\/org\/openjdk\/skara\/issuetracker\/jira\/JiraIssue.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -56,0 +56,8 @@\n+\n+    \/**\n+     * Get the issue tracker according to the cookie which is copied from the browser.\n+     * This method is only used by the manual test code.\n+     *\/\n+    public IssueTracker create(URI uri, String cookie) {\n+        return new JiraHost(uri, cookie);\n+    }\n","filename":"issuetracker\/src\/main\/java\/org\/openjdk\/skara\/issuetracker\/jira\/JiraIssueTrackerFactory.java","additions":9,"deletions":1,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+import org.openjdk.skara.issuetracker.Issue;\n@@ -30,0 +31,1 @@\n+import org.openjdk.skara.test.ManualTestSettings;\n@@ -65,0 +67,18 @@\n+\n+    @Test\n+    void test() throws IOException {\n+        var settings = ManualTestSettings.loadManualTestSettings();\n+        var jiraUri = settings.getProperty(\"jira-uri\");\n+        var cookie = settings.getProperty(\"jira-cookie\");\n+        var projectId = settings.getProperty(\"jira-project-id\");\n+        var issueId = settings.getProperty(\"jira-issue-id\");\n+        var uri = URIBuilder.base(jiraUri).build();\n+        var jiraHost = new JiraIssueTrackerFactory().create(uri, cookie);\n+        var jiraProject = jiraHost.project(projectId);\n+        var jiraIssueOpt = jiraProject.issue(issueId);\n+        var jiraIssue = jiraIssueOpt.get();\n+        assertEquals(Issue.State.RESOLVED, jiraIssue.state());\n+        jiraIssue.setState(Issue.State.CLOSED);\n+        var jiraIssueOpt2 = jiraProject.issue(issueId);\n+        assertEquals(Issue.State.CLOSED, jiraIssueOpt2.get().state());\n+    }\n","filename":"issuetracker\/src\/test\/java\/org\/openjdk\/skara\/issuetracker\/jira\/JiraProjectTests.java","additions":20,"deletions":0,"binary":false,"changes":20,"status":"modified"}]}