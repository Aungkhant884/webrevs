{"files":[{"patch":"@@ -357,1 +357,4 @@\n-            var reviewComments = pr.reviewComments();\n+            var reviewComments = pr.reviewComments().stream()\n+                                   .sorted(Comparator.comparing(ReviewComment::line))\n+                                   .sorted(Comparator.comparing(ReviewComment::path))\n+                                   .collect(Collectors.toList());\n","filename":"bots\/mlbridge\/src\/main\/java\/org\/openjdk\/skara\/bots\/mlbridge\/ArchiveWorkItem.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -1081,3 +1081,6 @@\n-            var reviewFile = Path.of(\"reviewfile.txt\");\n-            var localRepo = CheckableRepository.init(tempFolder.path(), author.repositoryType(), reviewFile);\n-            var masterHash = localRepo.resolve(\"master\").orElseThrow();\n+            var reviewFile1 = Path.of(\"reviewfile.txt\");\n+            var localRepo = CheckableRepository.init(tempFolder.path(), author.repositoryType(), reviewFile1);\n+            var reviewFile2 = Path.of(\"aardvark_reviewfile.txt\");\n+            Files.writeString(localRepo.root().resolve(reviewFile2), \"1\\n2\\n3\\n4\\n5\\n6\\n\", StandardCharsets.UTF_8);\n+            localRepo.add(reviewFile2);\n+            var masterHash = localRepo.commit(\"Another one\", \"duke\", \"duke@openjdk.org\");\n@@ -1095,1 +1098,1 @@\n-            \/\/ Make two file specific comments\n+            \/\/ Make a few file specific comments\n@@ -1097,2 +1100,3 @@\n-            var comment1 = reviewPr.addReviewComment(masterHash, editHash, reviewFile.toString(), 2, \"Review comment\");\n-            var comment2 = reviewPr.addReviewComment(masterHash, editHash, reviewFile.toString(), 2, \"Another review comment\");\n+            var comment1 = reviewPr.addReviewComment(masterHash, editHash, reviewFile1.toString(), 2, \"Review comment\");\n+            var comment2 = reviewPr.addReviewComment(masterHash, editHash, reviewFile1.toString(), 3, \"Another review comment\");\n+            var comment3 = reviewPr.addReviewComment(masterHash, editHash, reviewFile2.toString(), 4, \"Yet another review comment\");\n@@ -1102,1 +1106,1 @@\n-            pr.addReviewCommentReply(comment1, \"I agree\");\n+            pr.addReviewCommentReply(comment3, \"I don't care\");\n@@ -1104,0 +1108,1 @@\n+            pr.addReviewCommentReply(comment1, \"I agree\");\n@@ -1110,0 +1115,4 @@\n+\n+            var archiveText = archiveContents(archiveFolder.path(), \"\").orElseThrow();\n+            assertTrue(archiveText.indexOf(\"I agree\") < archiveText.indexOf(\"I don't agree\"), archiveText);\n+            assertTrue(archiveText.indexOf(\"I don't care\") < archiveText.indexOf(\"I don't agree\"), archiveText);\n","filename":"bots\/mlbridge\/src\/test\/java\/org\/openjdk\/skara\/bots\/mlbridge\/MailingListBridgeBotTests.java","additions":16,"deletions":7,"binary":false,"changes":23,"status":"modified"}]}