{"files":[{"patch":"@@ -77,1 +77,2 @@\n-    private void handleNewRef(Repository localRepo, Reference ref, Collection<Reference> allRefs, RepositoryListener listener, Path scratchPath) throws NonRetriableException {\n+    private void handleNewRef(Repository localRepo, Reference ref, Collection<Reference> candidateRefs,\n+                              RepositoryListener listener, Path scratchPath) throws NonRetriableException {\n@@ -79,1 +80,1 @@\n-        var candidates = new HashSet<>(allRefs);\n+        var candidates = new HashSet<>(candidateRefs);\n@@ -116,1 +117,2 @@\n-    private List<Throwable> handleRef(Repository localRepo, UpdateHistory history, Reference ref, Collection<Reference> allRefs, Path scratchPath) throws IOException {\n+    private List<Throwable> handleRef(Repository localRepo, UpdateHistory history, Reference ref,\n+                                      Collection<Reference> candidateRefs, Path scratchPath) throws IOException {\n@@ -127,1 +129,1 @@\n-                    handleNewRef(localRepo, ref, allRefs, listener, scratchPath.resolve(listener.name()));\n+                    handleNewRef(localRepo, ref, candidateRefs, listener, scratchPath.resolve(listener.name()));\n@@ -352,4 +354,10 @@\n-            var knownRefs = localRepo.remoteBranches(repository.authenticatedUrl().toString())\n-                                     .stream()\n-                                     .filter(ref -> branches.matcher(ref.name()).matches())\n-                                     .collect(Collectors.toList());\n+            var defaultBranchName = localRepo.defaultBranch().name();\n+            \/\/ All the branches can be candidate branches except pr\/X branches\n+            var candidateRefs = localRepo.remoteBranches(repository.authenticatedUrl().toString())\n+                    .stream()\n+                    .filter(ref -> !ref.name().startsWith(\"pr\/\"))\n+                    .toList();\n+            var knownRefs = candidateRefs\n+                    .stream()\n+                    .filter(ref -> branches.matcher(ref.name()).matches())\n+                    .toList();\n@@ -381,1 +389,1 @@\n-                errors.addAll(handleRef(localRepo, history, ref, knownRefs, scratchPath));\n+                errors.addAll(handleRef(localRepo, history, ref, candidateRefs, scratchPath));\n","filename":"bots\/notify\/src\/main\/java\/org\/openjdk\/skara\/bots\/notify\/RepositoryWorkItem.java","additions":17,"deletions":9,"binary":false,"changes":26,"status":"modified"}]}