{"files":[{"patch":"@@ -118,0 +118,11 @@\n+\n+        var comments = pr.comments();\n+        var manuallyAdded = LabelTracker.currentAdded(pr.repository().forge().currentUser(), comments);\n+        var manuallyRemoved = LabelTracker.currentRemoved(pr.repository().forge().currentUser(), comments);\n+\n+        \/\/ If a manual label command has been issued before we have done any labeling,\n+        \/\/ that is considered to be a request to override any automatic labelling\n+        if (manuallyAdded.size() > 0 || manuallyRemoved.size() > 0) {\n+            return List.of();\n+        }\n+\n@@ -128,9 +139,0 @@\n-            var comments = pr.comments();\n-            var manuallyAdded = LabelTracker.currentAdded(pr.repository().forge().currentUser(), comments);\n-            var manuallyRemoved = LabelTracker.currentRemoved(pr.repository().forge().currentUser(), comments);\n-\n-            \/\/ If a manual label command has been issued before we have done any labeling,\n-            \/\/ that is considered to be a request to override any automatic labelling\n-            if (bot.currentLabels().isEmpty() && !(manuallyAdded.isEmpty() && manuallyRemoved.isEmpty())) {\n-                return List.of();\n-            }\n","filename":"bots\/pr\/src\/main\/java\/org\/openjdk\/skara\/bots\/pr\/LabelerWorkItem.java","additions":11,"deletions":9,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -169,1 +169,1 @@\n-            \/\/ It will refuse to remove it\n+            \/\/ The bot will remove the label\n@@ -174,1 +174,1 @@\n-            \/\/ Add another file to trigger a group match\n+            \/\/ Add another file that would have trigger a group match\n@@ -180,1 +180,1 @@\n-            \/\/ The bot should have applied more labels automatically (but not the manually removed)\n+            \/\/ The bot should not apply labels since the user has manually removed labels\n@@ -182,6 +182,0 @@\n-            assertEquals(Set.of(\"group\", \"rfr\"), new HashSet<>(pr.labels()));\n-\n-            \/\/ Remove one of these as well\n-            pr.addComment(\"\/label remove group\");\n-            TestBotRunner.runPeriodicItems(prBot);\n-            assertLastCommentContains(pr, \"The `group` label was successfully removed.\");\n@@ -190,2 +184,2 @@\n-            \/\/ Adding them back again is fine\n-            pr.addComment(\"\/label add group 1\");\n+            \/\/ Adding the label manually is fine\n+            pr.addComment(\"\/label add group\");\n@@ -194,2 +188,1 @@\n-            assertLastCommentContains(pr, \"The `1` label was successfully added.\");\n-            assertEquals(Set.of(\"1\", \"group\", \"rfr\"), new HashSet<>(pr.labels()));\n+            assertEquals(Set.of(\"group\", \"rfr\"), new HashSet<>(pr.labels()));\n","filename":"bots\/pr\/src\/test\/java\/org\/openjdk\/skara\/bots\/pr\/LabelTests.java","additions":6,"deletions":13,"binary":false,"changes":19,"status":"modified"}]}