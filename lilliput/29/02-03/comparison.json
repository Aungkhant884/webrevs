{"files":[{"patch":"@@ -5299,1 +5299,1 @@\n-    assert($mem$$disp == oopDesc::nklass_offset_in_bytes(), \"expect correct offset 4, but got: %d\", $mem$$disp);\n+    assert($mem$$disp == oopDesc::klass_offset_in_bytes(), \"expect correct offset 4, but got: %d\", $mem$$disp);\n","filename":"src\/hotspot\/cpu\/x86\/x86_64.ad","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -310,1 +310,0 @@\n-  static int nklass_offset_in_bytes()    {\n@@ -312,0 +311,1 @@\n+  static int nklass_offset_in_bytes()    {\n@@ -314,3 +314,0 @@\n-#else\n-    return klass_offset_in_bytes();\n-#endif\n@@ -318,0 +315,1 @@\n+#endif\n","filename":"src\/hotspot\/share\/oops\/oop.hpp","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1313,1 +1313,1 @@\n-      } else if( offset == oopDesc::nklass_offset_in_bytes() ) {\n+      } else if( offset == oopDesc::klass_offset_in_bytes() ) {\n@@ -1485,1 +1485,1 @@\n-          (offset == oopDesc::nklass_offset_in_bytes() && tj->base() == Type::AryPtr) ||\n+          (offset == oopDesc::klass_offset_in_bytes() && tj->base() == Type::AryPtr) ||\n","filename":"src\/hotspot\/share\/opto\/compile.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -918,1 +918,1 @@\n-    Node* p = basic_plus_adr( ex_node, ex_node, oopDesc::nklass_offset_in_bytes());\n+    Node* p = basic_plus_adr( ex_node, ex_node, oopDesc::klass_offset_in_bytes());\n@@ -936,1 +936,1 @@\n-        Node* p = basic_plus_adr(ex_in, ex_in, oopDesc::nklass_offset_in_bytes());\n+        Node* p = basic_plus_adr(ex_in, ex_in, oopDesc::klass_offset_in_bytes());\n","filename":"src\/hotspot\/share\/opto\/doCall.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2187,1 +2187,1 @@\n-  } else if (offset != oopDesc::nklass_offset_in_bytes()) {\n+  } else if (offset != oopDesc::klass_offset_in_bytes()) {\n@@ -3170,1 +3170,1 @@\n-      _compile->get_alias_index(tinst->add_offset(oopDesc::nklass_offset_in_bytes()));\n+      _compile->get_alias_index(tinst->add_offset(oopDesc::klass_offset_in_bytes()));\n","filename":"src\/hotspot\/share\/opto\/escape.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1173,1 +1173,1 @@\n-  Node* k_adr = basic_plus_adr(obj, oopDesc::nklass_offset_in_bytes());\n+  Node* k_adr = basic_plus_adr(obj, oopDesc::klass_offset_in_bytes());\n@@ -3701,1 +3701,1 @@\n-    set_memory(minit_out, C->get_alias_index(oop_type->add_offset(oopDesc::nklass_offset_in_bytes())));\n+    set_memory(minit_out, C->get_alias_index(oop_type->add_offset(oopDesc::klass_offset_in_bytes())));\n","filename":"src\/hotspot\/share\/opto\/graphKit.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1675,0 +1675,1 @@\n+\n@@ -2285,1 +2286,1 @@\n-      Node* k_adr = basic_plus_adr(obj_or_subklass, oopDesc::nklass_offset_in_bytes());\n+      Node* k_adr = basic_plus_adr(obj_or_subklass, oopDesc::klass_offset_in_bytes());\n","filename":"src\/hotspot\/share\/opto\/macro.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2980,1 +2980,1 @@\n-  _leaf->dump();\n+  _leaf->dump(3);\n","filename":"src\/hotspot\/share\/opto\/matcher.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -246,1 +246,1 @@\n-          adr_check->offset() == oopDesc::nklass_offset_in_bytes() ||\n+          adr_check->offset() == oopDesc::klass_offset_in_bytes() ||\n@@ -870,1 +870,1 @@\n-           adr_type->offset() == oopDesc::nklass_offset_in_bytes()),\n+           adr_type->offset() == oopDesc::klass_offset_in_bytes()),\n@@ -2323,1 +2323,1 @@\n-    if (offset == oopDesc::nklass_offset_in_bytes()) {\n+    if (offset == oopDesc::klass_offset_in_bytes()) {\n@@ -2349,1 +2349,1 @@\n-        && tary->offset() == oopDesc::nklass_offset_in_bytes()) {\n+        && tary->offset() == oopDesc::klass_offset_in_bytes()) {\n@@ -2437,1 +2437,1 @@\n-  if (offset == oopDesc::nklass_offset_in_bytes()) {\n+  if (offset == oopDesc::klass_offset_in_bytes()) {\n","filename":"src\/hotspot\/share\/opto\/memnode.cpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -2076,1 +2076,1 @@\n-  Node* klass_addr = basic_plus_adr( receiver, receiver, oopDesc::nklass_offset_in_bytes() );\n+  Node* klass_addr = basic_plus_adr( receiver, receiver, oopDesc::klass_offset_in_bytes() );\n","filename":"src\/hotspot\/share\/opto\/parse1.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1642,1 +1642,1 @@\n-  if (obj == NULL || off != oopDesc::nklass_offset_in_bytes()) \/\/ loading oopDesc::_klass?\n+  if (obj == NULL || off != oopDesc::klass_offset_in_bytes()) \/\/ loading oopDesc::_klass?\n","filename":"src\/hotspot\/share\/opto\/parse2.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -156,1 +156,1 @@\n-  int klass_offset = oopDesc::nklass_offset_in_bytes();\n+  int klass_offset = oopDesc::klass_offset_in_bytes();\n","filename":"src\/hotspot\/share\/opto\/parseHelper.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1157,1 +1157,1 @@\n-  if (con2 == oopDesc::nklass_offset_in_bytes()) {\n+  if (con2 == oopDesc::klass_offset_in_bytes()) {\n","filename":"src\/hotspot\/share\/opto\/subnode.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -136,1 +136,1 @@\n-    if (con == oopDesc::nklass_offset_in_bytes() && obj != NULL) {\n+    if (con == oopDesc::klass_offset_in_bytes() && obj != NULL) {\n@@ -212,1 +212,1 @@\n-      Node* adr = phase->transform(new AddPNode(obj_or_subklass, obj_or_subklass, phase->MakeConX(oopDesc::nklass_offset_in_bytes())));\n+      Node* adr = phase->transform(new AddPNode(obj_or_subklass, obj_or_subklass, phase->MakeConX(oopDesc::klass_offset_in_bytes())));\n","filename":"src\/hotspot\/share\/opto\/subtypenode.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -549,1 +549,1 @@\n-                                           false, 0, oopDesc::nklass_offset_in_bytes());\n+                                           false, 0, oopDesc::klass_offset_in_bytes());\n@@ -3160,1 +3160,1 @@\n-    if (_offset == oopDesc::nklass_offset_in_bytes()) {\n+    if (_offset == oopDesc::klass_offset_in_bytes()) {\n","filename":"src\/hotspot\/share\/opto\/type.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -76,4 +76,1 @@\n-    \/\/ TODO: with Lilliput, we cannot safely access the klass* field. The offset is always 4,\n-    \/\/ but it looks like CompilerToVM.getResolvedJavaType0() ignores that offset, and always\n-    \/\/ calls oopDesc::klass(), which is what we want anyway.\n-    final int hubOffset = 4; \/\/getFieldOffset(\"oopDesc::_metadata._klass\", Integer.class, \"Klass*\");\n+    final int hubOffset = getFieldOffset(\"oopDesc::_metadata._klass\", Integer.class, \"Klass*\");\n","filename":"src\/jdk.internal.vm.ci\/share\/classes\/jdk.vm.ci.hotspot\/src\/jdk\/vm\/ci\/hotspot\/HotSpotVMConfig.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"}]}