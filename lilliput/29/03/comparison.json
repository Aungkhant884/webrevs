{"files":[{"patch":"@@ -7603,1 +7603,1 @@\n-instruct loadNKlass(iRegNNoSp dst, memory4 mem)\n+instruct loadNKlass(iRegNNoSp dst, memory4 mem, rFlagsReg cr)\n@@ -7606,0 +7606,1 @@\n+  effect(TEMP_DEF dst, KILL cr);\n@@ -7610,4 +7611,6 @@\n-\n-  ins_encode(aarch64_enc_ldrw(dst, mem));\n-\n-  ins_pipe(iload_reg_mem);\n+  ins_encode %{\n+    assert($mem$$disp == oopDesc::nklass_offset_in_bytes(), \"expect correct offset\");\n+    assert($mem$$index$$Register == noreg, \"expect no index\");\n+    __ load_nklass($dst$$Register, $mem$$base$$Register);\n+  %}\n+  ins_pipe(pipe_slow);\n","filename":"src\/hotspot\/cpu\/aarch64\/aarch64.ad","additions":8,"deletions":5,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -3716,1 +3716,1 @@\n-  enter();\n+  RegSet saved_regs = RegSet::of(lr);\n@@ -3719,1 +3719,1 @@\n-    push(RegSet::of(r0), sp);\n+    saved_regs += RegSet::of(r0);\n@@ -3721,0 +3721,1 @@\n+  push(saved_regs, sp);\n@@ -3726,1 +3727,0 @@\n-    pop(RegSet::of(r0), sp);\n@@ -3728,2 +3728,1 @@\n-  leave();\n-\n+  pop(saved_regs, sp);\n","filename":"src\/hotspot\/cpu\/aarch64\/macroAssembler_aarch64.cpp","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -5292,1 +5292,1 @@\n-instruct loadNKlass(rRegN dst, memory mem)\n+instruct loadNKlass(rRegN dst, indOffset8 mem, rFlagsReg cr)\n@@ -5295,1 +5295,1 @@\n-\n+  effect(TEMP_DEF dst, KILL cr);\n@@ -5299,1 +5299,3 @@\n-    __ movl($dst$$Register, $mem$$Address);\n+    assert($mem$$disp == oopDesc::klass_offset_in_bytes(), \"expect correct offset 4, but got: %d\", $mem$$disp);\n+    assert($mem$$index == 4, \"expect no index register: %d\", $mem$$index);\n+    __ load_nklass($dst$$Register, $mem$$base$$Register);\n@@ -5301,1 +5303,1 @@\n-  ins_pipe(ialu_reg_mem); \/\/ XXX\n+  ins_pipe(pipe_slow); \/\/ XXX\n@@ -12261,0 +12263,3 @@\n+\/\/ Disabled because the compressed Klass* in header cannot be safely\n+\/\/ accessed. TODO: Re-enable it as soon as synchronization does not\n+\/\/ overload the upper header bits anymore.\n@@ -12263,0 +12268,1 @@\n+  predicate(false);\n","filename":"src\/hotspot\/cpu\/x86\/x86_64.ad","additions":10,"deletions":4,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2980,1 +2980,1 @@\n-  _leaf->dump();\n+  _leaf->dump(3);\n","filename":"src\/hotspot\/share\/opto\/matcher.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}