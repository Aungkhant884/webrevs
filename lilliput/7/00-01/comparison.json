{"files":[{"patch":"@@ -160,1 +160,0 @@\n-  assert_different_registers(obj, klass, len);\n","filename":"src\/hotspot\/cpu\/x86\/c1_MacroAssembler_x86.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -737,1 +737,1 @@\n-    k->set_prototype_header(markWord::prototype().set_narrow_klass(nk));\n+    k->set_prototype_header(markWord::prototype() LP64_ONLY(.set_narrow_klass(nk)));\n","filename":"src\/hotspot\/share\/cds\/archiveBuilder.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -544,0 +544,1 @@\n+\n","filename":"src\/hotspot\/share\/oops\/klass.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -117,7 +117,4 @@\n-  if (UseCompressedClassPointers) {\n-    \/\/ TODO: Don't cast to non-const, change CKP::encode() to accept const Klass* instead.\n-    narrowKlass nklass = CompressedKlassPointers::encode(const_cast<Klass*>(klass));\n-    return set_narrow_klass(nklass);\n-  } else {\n-    return markWord(value());\n-  }\n+  assert(UseCompressedClassPointers, \"expect compressed klass pointers\");\n+  \/\/ TODO: Don't cast to non-const, change CKP::encode() to accept const Klass* instead.\n+  narrowKlass nklass = CompressedKlassPointers::encode(const_cast<Klass*>(klass));\n+  return set_narrow_klass(nklass);\n","filename":"src\/hotspot\/share\/oops\/markWord.cpp","additions":4,"deletions":7,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -78,5 +78,6 @@\n-  if (UseCompressedClassPointers) {\n-    narrowKlass nklass = _metadata._compressed_klass;\n-    assert(nklass != 0, \"expect klass\");\n-    header = header.set_narrow_klass(nklass);\n-  }\n+#ifdef _LP64\n+  assert(UseCompressedClassPointers, \"expect compressed klass pointers\");\n+  narrowKlass nklass = _metadata._compressed_klass;\n+  assert(nklass != 0, \"expect klass\");\n+  header = header.set_narrow_klass(nklass);\n+#endif\n","filename":"src\/hotspot\/share\/oops\/oop.inline.hpp","additions":6,"deletions":5,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -151,0 +151,1 @@\n+#ifdef _LP64\n@@ -154,0 +155,1 @@\n+#endif\n","filename":"src\/hotspot\/share\/services\/heapObjectStatistics.cpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"}]}