{"files":[{"patch":"@@ -201,12 +201,12 @@\n-\/\/  Klass* obj_klass = ShenandoahObjectUtils::klass(obj) ; \/\/ obj->klass_or_null();\n-\/\/  if (obj_klass == NULL) {\n-\/\/    print_failure(_safe_unknown, obj, interior_loc, NULL, \"Shenandoah assert_correct failed\",\n-\/\/                  \"Object klass pointer should not be NULL\",\n-\/\/                  file,line);\n-\/\/  }\n-\/\/\n-\/\/  if (!Metaspace::contains(obj_klass)) {\n-\/\/    print_failure(_safe_unknown, obj, interior_loc, NULL, \"Shenandoah assert_correct failed\",\n-\/\/                  \"Object klass pointer must go to metaspace\",\n-\/\/                  file,line);\n-\/\/  }\n+  Klass* obj_klass = ShenandoahObjectUtils::klass(obj) ; \/\/ obj->klass_or_null();\n+  if (obj_klass == NULL) {\n+    print_failure(_safe_unknown, obj, interior_loc, NULL, \"Shenandoah assert_correct failed\",\n+                  \"Object klass pointer should not be NULL\",\n+                  file,line);\n+  }\n+\n+  if (!Metaspace::contains(obj_klass)) {\n+    print_failure(_safe_unknown, obj, interior_loc, NULL, \"Shenandoah assert_correct failed\",\n+                  \"Object klass pointer must go to metaspace\",\n+                  file,line);\n+  }\n@@ -233,5 +233,5 @@\n-\/\/    if (obj_klass != ShenandoahObjectUtils::klass(fwd)) {\n-\/\/      print_failure(_safe_oop, obj, interior_loc, NULL, \"Shenandoah assert_correct failed\",\n-\/\/                    \"Forwardee klass disagrees with object class\",\n-\/\/                    file, line);\n-\/\/    }\n+    if (obj_klass != ShenandoahObjectUtils::klass(fwd)) {\n+      print_failure(_safe_oop, obj, interior_loc, NULL, \"Shenandoah assert_correct failed\",\n+                    \"Forwardee klass disagrees with object class\",\n+                    file, line);\n+    }\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahAsserts.cpp","additions":17,"deletions":17,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -71,3 +71,1 @@\n-  \/\/ Note (Lilliput): We used to assert correct object here, but this attempts to load the\n-  \/\/ object's Klass* which will access the header, which will not work if object is forwarded.\n-  \/\/ shenandoah_assert_correct(NULL, obj);\n+  shenandoah_assert_correct(NULL, obj);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahForwarding.inline.hpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"}]}