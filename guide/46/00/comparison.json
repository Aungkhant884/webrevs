{"files":[{"patch":"@@ -1,2 +1,3 @@\n-ALL_MD=$(wildcard src\/*.md)\n-ALL_HTML=$(ALL_MD:src\/%.md=build\/%.html)\n+default: all\n+ALL_MD := $(wildcard src\/*.md)\n+ALL_HTML := $(patsubst src\/%.md, build\/dist\/%.html, $(ALL_MD))\n@@ -12,12 +13,3 @@\n-.PHONY: all clean\n-\n-all: build build\/guidestyle.css $(ALL_HTML)\n-\n-clean:\n-\trm -rf build\n-\n-build:\n-\tmkdir build\n-\n-build\/%.html: src\/%.md src\/footer.html\n-\tcp src\/footer.html build\/tmp_footer.html\n+build\/support\/footers\/%.html: src\/%.md\n+\tmkdir -p build\/support\/footers\n+\tcp src\/footer.html $@\n@@ -28,3 +20,6 @@\n-\tperl -pi -e 'BEGIN {$$hash=shift} s\/!git-commit-hash!\/$$hash\/' $$CHANGE_HASH build\/tmp_footer.html\n-\tperl -pi -e 's;!source-file-name!;$<;' build\/tmp_footer.html\n-\tpandoc $< $(MERMAID_FILTER) --css guidestyle.css --strip-comments --standalone --toc --ascii --to html4 --title-prefix \"The OpenJDK Developers' Guide\" --include-after-body=build\/tmp_footer.html | iconv -f UTF-8 -t ISO-8859-1 > $@\n+\tperl -pi -e 'BEGIN {$$hash=shift} s\/!git-commit-hash!\/$$hash\/' $$CHANGE_HASH $@\n+\tperl -pi -e 's;!source-file-name!;$<;' $@\n+\n+build\/dist\/%.html: src\/%.md build\/support\/footers\/%.html\n+\tmkdir -p build\/dist\n+\tpandoc $< $(MERMAID_FILTER) --css guidestyle.css --strip-comments --standalone --toc --ascii --to html4 --title-prefix \"The OpenJDK Developers' Guide\" --include-after-body=build\/support\/footers\/$(notdir $@) | iconv -f UTF-8 -t ISO-8859-1 > $@\n@@ -32,1 +27,0 @@\n-\trm build\/tmp_footer.html\n@@ -34,2 +28,8 @@\n-build\/guidestyle.css: build src\/guidestyle.css\n-\tcp src\/guidestyle.css build\/guidestyle.css\n+build\/dist\/guidestyle.css: src\/guidestyle.css\n+\tmkdir -p build\/dist\n+\tcp $< $@\n+\n+all: $(ALL_HTML) build\/dist\/guidestyle.css\n+\n+clean:\n+\trm -rf build\n@@ -39,0 +39,2 @@\n+\n+.PHONY: default all clean validate\n","filename":"Makefile","additions":22,"deletions":20,"binary":false,"changes":42,"status":"modified"}]}