{"files":[{"patch":"@@ -92,1 +92,1 @@\n-  product(bool, DisableTHPStackMitigation, false, DIAGNOSTIC,           \\\n+  product(bool, THPStackMitigation, true, DIAGNOSTIC,                   \\\n@@ -95,1 +95,1 @@\n-          \"thread stacks. This switch disables that mitigation and \"    \\\n+          \"thread stacks. When disabled, the absence of this mitigation\"\\\n","filename":"src\/hotspot\/os\/linux\/globals_linux.hpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -939,1 +939,1 @@\n-  if (!DisableTHPStackMitigation) {\n+  if (THPStackMitigation) {\n@@ -3089,1 +3089,1 @@\n-  if (!DisableTHPStackMitigation) {\n+  if (THPStackMitigation) {\n@@ -3776,1 +3776,1 @@\n-  \/\/ -XX:+DisableTHPStackMitigation.\n+  \/\/ -XX:-THPStackMitigation.\n@@ -3778,3 +3778,1 @@\n-    if (DisableTHPStackMitigation) {\n-      log_info(pagesize)(\"JVM will *not* prevent THPs in thread stacks. This may cause high RSS.\");\n-    } else {\n+    if (THPStackMitigation) {\n@@ -3782,0 +3780,2 @@\n+    } else {\n+      log_info(pagesize)(\"JVM will *not* prevent THPs in thread stacks. This may cause high RSS.\");\n@@ -3784,1 +3784,1 @@\n-    FLAG_SET_ERGO(DisableTHPStackMitigation, true); \/\/ Mitigation not needed\n+    FLAG_SET_ERGO(THPStackMitigation, false); \/\/ Mitigation not needed\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -214,1 +214,1 @@\n-                finalargs.add(\"-XX:+DisableTHPStackMitigation\");\n+                finalargs.add(\"-XX:-THPStackMitigation\");\n","filename":"test\/hotspot\/jtreg\/runtime\/os\/THPsInThreadStackPreventionTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}