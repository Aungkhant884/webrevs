{"files":[{"patch":"@@ -2313,0 +2313,2 @@\n+  declare_constant(InstanceKlass::_misc_has_injected_primitiveObject)     \\\n+  declare_constant(InstanceKlass::_misc_has_injected_identityObject)      \\\n","filename":"src\/hotspot\/share\/runtime\/vmStructs.cpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -81,0 +81,2 @@\n+  private static int MISC_HAS_INJECTED_PRIMITIVEOBJECT;\n+  private static int MISC_HAS_INJECTED_IDENTITYOBJECT;\n@@ -138,0 +140,2 @@\n+    MISC_HAS_INJECTED_PRIMITIVEOBJECT = db.lookupIntConstant(\"InstanceKlass::_misc_has_injected_primitiveObject\").intValue();\n+    MISC_HAS_INJECTED_IDENTITYOBJECT  = db.lookupIntConstant(\"InstanceKlass::_misc_has_injected_identityObject\").intValue();\n@@ -572,0 +576,8 @@\n+  public boolean hasInjectedIdentityObject() {\n+    return (getMiscFlags() & MISC_HAS_INJECTED_IDENTITYOBJECT) != 0;\n+  }\n+\n+  public boolean hasInjectedPrimitiveObject() {\n+    return (getMiscFlags() & MISC_HAS_INJECTED_PRIMITIVEOBJECT) != 0;\n+  }\n+\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/oops\/InstanceKlass.java","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -355,0 +355,4 @@\n+        int nb_interfaces = len;\n+        if (klass.hasInjectedIdentityObject() || klass.hasInjectedPrimitiveObject()) {\n+            nb_interfaces--;\n+        }\n@@ -356,1 +360,1 @@\n-        if (DEBUG) debugMessage(\"number of interfaces = \" + len);\n+        if (DEBUG) debugMessage(\"number of interfaces = \" + nb_interfaces);\n@@ -359,1 +363,1 @@\n-        dos.writeShort((short) len);\n+        dos.writeShort((short) nb_interfaces);\n","filename":"src\/jdk.hotspot.agent\/share\/classes\/sun\/jvm\/hotspot\/tools\/jcore\/ClassWriter.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"}]}