{"files":[{"patch":"@@ -1471,1 +1471,1 @@\n-            if ((flags & (ABSTRACT | INTERFACE | VALUE_CLASS)) == VALUE_CLASS)\n+            if ((flags & (ABSTRACT | INTERFACE | VALUE_CLASS)) == VALUE_CLASS) {\n@@ -1473,0 +1473,6 @@\n+                if ((flags & NON_SEALED) != 0) {\n+                    \/\/ cant declare a final value class non-sealed\n+                    log.error(pos,\n+                            Errors.ModNotAllowedHere(asFlagSet(NON_SEALED)));\n+                }\n+            }\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Check.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @bug 8287136 8292630 8279368 8287136 8287770 8279840 8279672 8292753 8287763 8279901 8287767\n+ * @bug 8287136 8292630 8279368 8287136 8287770 8279840 8279672 8292753 8287763 8279901 8287767 8293183 8293120\n@@ -504,0 +504,42 @@\n+\n+    public void testInteractionWithSealedClasses() {\n+        assertOK(\n+                \"\"\"\n+                abstract sealed value class SC {}\n+                value class VC extends SC {}\n+                \"\"\"\n+        );assertOK(\n+                \"\"\"\n+                abstract sealed value interface SI {}\n+                value class VC implements SI {}\n+                \"\"\"\n+        );\n+        assertOK(\n+                \"\"\"\n+                abstract sealed identity class SC {}\n+                final identity class IC extends SC {}\n+                non-sealed identity class IC2 extends SC {}\n+                final identity class IC3 extends IC2 {}\n+                \"\"\"\n+        );\n+        assertOK(\n+                \"\"\"\n+                abstract sealed identity interface SI {}\n+                final identity class IC implements SI {}\n+                non-sealed identity class IC2 implements SI {}\n+                final identity class IC3 extends IC2 {}\n+                \"\"\"\n+        );\n+        assertFail(\"compiler.err.mod.not.allowed.here\",\n+                \"\"\"\n+                abstract sealed value class SC {}\n+                non-sealed value class VC extends SC {}\n+                \"\"\"\n+        );\n+        assertFail(\"compiler.err.mod.not.allowed.here\",\n+                \"\"\"\n+                sealed value interface SI {}\n+                non-sealed value class VC implements SI {}\n+                \"\"\"\n+        );\n+    }\n","filename":"test\/langtools\/tools\/javac\/valhalla\/value-objects\/ValueObjectCompilationTests.java","additions":43,"deletions":1,"binary":false,"changes":44,"status":"modified"}]}