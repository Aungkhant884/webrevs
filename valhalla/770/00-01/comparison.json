{"files":[{"patch":"@@ -75,0 +75,1 @@\n+import jdk.internal.misc.ValhallaFeatures;\n@@ -645,1 +646,3 @@\n-        return isArray() || (this.getModifiers() & Modifier.IDENTITY) != 0;\n+        return !ValhallaFeatures.isEnabled() ||  \/\/ Before Valhalla all classes are identity classes\n+                isArray() ||\n+                (this.getModifiers() & Modifier.IDENTITY) != 0;\n@@ -654,1 +657,3 @@\n-        return !isArray() && (this.getModifiers() & Modifier.VALUE) != 0;\n+        return ValhallaFeatures.isEnabled() &&  \/\/ Before Valhalla no classes are value classes\n+                !isArray() &&\n+                (this.getModifiers() & Modifier.VALUE) != 0;\n","filename":"src\/java.base\/share\/classes\/java\/lang\/Class.java","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -42,1 +42,1 @@\n- * An Instance can be created with {@code new Object()}, those instances are\n+ * An instance can be created with {@code new Object()}, those instances are\n","filename":"src\/java.base\/share\/classes\/java\/lang\/Object.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -194,3 +194,5 @@\n-     * {@return {@code true} if the object is an identity object, otherwise {@code false}}\n-     * @param o an object\n-     *\/\n+    * {@return {@code true} if the object is an identity object, otherwise {@code false}}\n+    *\n+    * @param obj an object\n+    * @throws NullPointerException if {@code obj} is {@code null}\n+    *\/\n@@ -198,4 +200,4 @@\n-    public static boolean isIdentityObject(Object o) {\n-        return o.getClass().isIdentity() ||\n-                o.getClass() == Object.class ||\n-                !ValhallaFeatures.isEnabled(); \/\/ Before Valhalla all objects are identity objects.\n+    public static boolean isIdentityObject(Object obj) {\n+        requireNonNull(obj);\n+        return obj.getClass().isIdentity() ||  \/\/ Before Valhalla all classes are identity classes\n+                obj.getClass() == Object.class;\n","filename":"src\/java.base\/share\/classes\/java\/util\/Objects.java","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -85,1 +85,1 @@\n-                {new int[0], true},  \/\/ arrays of primitives classes are identity objects\n+                {new int[0], true},  \/\/ arrays of primitive classes are identity objects\n","filename":"test\/jdk\/valhalla\/valuetypes\/ObjectMethods.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}