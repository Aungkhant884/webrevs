{"files":[{"patch":"@@ -1967,1 +1967,8 @@\n-            if (has_pending_load_indexed()) {\n+            if (inline_klass->is_empty()) {\n+              apush(append(new Constant(new InstanceConstant(inline_klass->default_instance()))));\n+              if (has_pending_field_access()) {\n+                set_pending_field_access(NULL);\n+              } else if (has_pending_load_indexed()) {\n+                set_pending_load_indexed(NULL);\n+              }\n+            } else if (has_pending_load_indexed()) {\n@@ -2079,1 +2086,3 @@\n-          copy_inline_content(vk, obj, off, new_instance, vk->first_field_offset(), state_before, needs_patching);\n+          if (!vk->is_empty()) {\n+            copy_inline_content(vk, obj, off, new_instance, vk->first_field_offset(), state_before, needs_patching);\n+          }\n@@ -2098,1 +2107,3 @@\n-    copy_inline_content(vk, val, vk->first_field_offset(), new_instance, field_modify->offset(), state_before, needs_patching);\n+    if (!vk->is_empty()) {\n+      copy_inline_content(vk, val, vk->first_field_offset(), new_instance, field_modify->offset(), state_before, needs_patching);\n+    }\n","filename":"src\/hotspot\/share\/c1\/c1_GraphBuilder.cpp","additions":14,"deletions":3,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -185,0 +185,34 @@\n+\n+    \/\/ static inline class EmptyType { }\n+    \/\/ static inline class EmptyContainer {\n+    \/\/     int i = 0;\n+    \/\/     EmptyType et = new EmptyType();\n+    \/\/ }\n+    \/\/ static inline class Container {\n+    \/\/     EmptyContainer container0 = new EmptyContainer();\n+    \/\/     EmptyContainer container1 = new EmptyContainer();\n+    \/\/ }\n+\n+    \/\/ @Test(compLevel=C1)\n+    \/\/ public EmptyType test6() {\n+    \/\/     Container c = new Container();\n+    \/\/     return c.container1.et;\n+    \/\/ }\n+\n+    \/\/ @DontCompile\n+    \/\/ public void test6_verifier(boolean warmup) {\n+    \/\/     EmptyType et = test6();\n+    \/\/     Asserts.assertEQ(et, EmptyType.default);\n+    \/\/ }\n+\n+    \/\/ @Test(compLevel=C1)\n+    \/\/ public EmptyType test7() {\n+    \/\/     Container[] ca = new Container[10];\n+    \/\/     return ca[3].container0.et;\n+    \/\/ }\n+\n+    \/\/ @DontCompile\n+    \/\/ public void test7_verifier(boolean warmup) {\n+    \/\/     EmptyType et = test7();\n+    \/\/     Asserts.assertEQ(et, EmptyType.default);\n+    \/\/ }\n","filename":"test\/hotspot\/jtreg\/compiler\/valhalla\/inlinetypes\/TestGetfieldChains.java","additions":34,"deletions":0,"binary":false,"changes":34,"status":"modified"}]}