{"files":[{"patch":"@@ -3103,1 +3103,1 @@\n-    res = InlineTypeNode::make_from_oop(this, res, recv_xtype->inline_klass());\n+    res = InlineTypeNode::make_from_oop(this, res, recv_xtype->inline_klass())->as_ptr(&gvn());\n","filename":"src\/hotspot\/share\/opto\/graphKit.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -248,1 +248,1 @@\n-    igvn->remove_dead_node(this);\n+    igvn->_worklist.push(this);\n","filename":"src\/hotspot\/share\/opto\/inlinetypenode.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1012,0 +1012,1 @@\n+  Unique_Node_List worklist;\n@@ -1014,0 +1015,4 @@\n+    worklist.push(res);\n+  }\n+  while (worklist.size() > 0) {\n+    res = worklist.pop();\n@@ -1079,0 +1084,6 @@\n+      } else if (use->is_InlineTypePtr()) {\n+        assert(use->isa_InlineTypePtr()->get_oop() == res, \"unexpected inline type ptr use\");\n+        _igvn.rehash_node_delayed(use);\n+        use->isa_InlineTypePtr()->set_oop(_igvn.zerocon(T_INLINE_TYPE));\n+        \/\/ Process users\n+        worklist.push(use);\n","filename":"src\/hotspot\/share\/opto\/macro.cpp","additions":11,"deletions":0,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -136,1 +136,0 @@\n-    private static final boolean VERIFY_VM = Boolean.parseBoolean(System.getProperty(\"VerifyVM\", \"false\"));\n@@ -161,3 +160,0 @@\n-    private static final String[] verifyFlags = {\n-        \"-XX:+UnlockDiagnosticVMOptions\", \"-XX:+VerifyOops\", \"-XX:+VerifyStack\", \"-XX:+VerifyLastFrame\",\n-        \"-XX:+VerifyBeforeGC\", \"-XX:+VerifyAfterGC\", \"-XX:+VerifyDuringGC\", \"-XX:+VerifyAdapterSharing\"};\n@@ -458,1 +454,1 @@\n-        \/\/     VERIFY_IR\/VERIFY_VM flags specified below\n+        \/\/     VERIFY_IR flags specified below\n@@ -472,3 +468,0 @@\n-        if (VERIFY_VM) {\n-            cmds = concat(cmds, verifyFlags);\n-        }\n","filename":"test\/hotspot\/jtreg\/compiler\/valhalla\/inlinetypes\/InlineTypeTest.java","additions":1,"deletions":8,"binary":false,"changes":9,"status":"modified"}]}