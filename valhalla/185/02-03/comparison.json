{"files":[{"patch":"@@ -397,1 +397,1 @@\n-  virtual bool is_ACmpData()          const { return false; }\n+  virtual bool is_ACmpData()           const { return false; }\n","filename":"src\/hotspot\/share\/oops\/methodData.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -783,1 +783,1 @@\n-  product(bool, UseACmpProfile, false,                                      \\\n+  product(bool, UseACmpProfile, true,                                       \\\n","filename":"src\/hotspot\/share\/opto\/c2_globals.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -552,1 +552,1 @@\n-  void    do_acmp(BoolTest::mask btest, Node* a, Node* b);\n+  void    do_acmp(BoolTest::mask btest, Node* left, Node* right);\n","filename":"src\/hotspot\/share\/opto\/parse.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2180,1 +2180,1 @@\n-void Parse::do_acmp(BoolTest::mask btest, Node* right, Node* left) {\n+void Parse::do_acmp(BoolTest::mask btest, Node* left, Node* right) {\n@@ -2313,1 +2313,1 @@\n-    \/\/ Comparison with an object of known not to be an inline type\n+    \/\/ Comparison with an object known not to be an inline type\n@@ -2318,1 +2318,1 @@\n-    \/\/ Comparison with an object of known not to be an inline type\n+    \/\/ Comparison with an object known not to be an inline type\n@@ -3549,1 +3549,1 @@\n-    do_acmp(btest, a, b);\n+    do_acmp(btest, b, a);\n","filename":"src\/hotspot\/share\/opto\/parse2.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -239,1 +239,1 @@\n-    protected static final String SUBSTITUTABLITY_TEST = START + \"CallStaticJava\" + MID + \"java.lang.invoke.ValueBootstrapMethods::isSubstitutable\" + END;\n+    protected static final String SUBSTITUTABILITY_TEST = START + \"CallStaticJava\" + MID + \"java.lang.invoke.ValueBootstrapMethods::isSubstitutable\" + END;\n@@ -300,1 +300,0 @@\n-                \"-XX:-UseACmpProfile\",\n@@ -309,1 +308,0 @@\n-                \"-XX:-UseACmpProfile\",\n","filename":"test\/hotspot\/jtreg\/compiler\/valhalla\/inlinetypes\/InlineTypeTest.java","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -3388,1 +3388,1 @@\n-    \/\/ acmp doesn't need substitutablity test when one input is known\n+    \/\/ acmp doesn't need substitutability test when one input is known\n@@ -3390,1 +3390,1 @@\n-    @Test(failOn = SUBSTITUTABLITY_TEST)\n+    @Test(failOn = SUBSTITUTABILITY_TEST)\n@@ -3401,2 +3401,2 @@\n-    \/\/ acmp doesn't need substitutablity test when one input null\n-    @Test(failOn = SUBSTITUTABLITY_TEST)\n+    \/\/ acmp doesn't need substitutability test when one input null\n+    @Test(failOn = SUBSTITUTABILITY_TEST)\n","filename":"test\/hotspot\/jtreg\/compiler\/valhalla\/inlinetypes\/TestLWorld.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -494,1 +494,1 @@\n-    @Test(failOn = SUBSTITUTABLITY_TEST)\n+    @Test(failOn = SUBSTITUTABILITY_TEST)\n@@ -507,2 +507,2 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { NULL_ASSERT_TRAP }, matchCount = { 1})\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1})\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { NULL_ASSERT_TRAP }, matchCount = { 1})\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1})\n@@ -527,3 +527,3 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { NULL_ASSERT_TRAP }, matchCount = { 1})\n-    @Test(valid = TypeProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { NULL_ASSERT_TRAP }, matchCount = { 1})\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1})\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { NULL_ASSERT_TRAP }, matchCount = { 1})\n+    @Test(valid = TypeProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { NULL_ASSERT_TRAP }, matchCount = { 1})\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1})\n@@ -548,2 +548,2 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { NULL_ASSERT_TRAP }, matchCount = { 1})\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1})\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { NULL_ASSERT_TRAP }, matchCount = { 1})\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1})\n@@ -568,3 +568,3 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { NULL_ASSERT_TRAP }, matchCount = { 1})\n-    @Test(valid = TypeProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { NULL_ASSERT_TRAP }, matchCount = { 1})\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1})\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { NULL_ASSERT_TRAP }, matchCount = { 1})\n+    @Test(valid = TypeProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { NULL_ASSERT_TRAP }, matchCount = { 1})\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1})\n@@ -590,3 +590,3 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n-    @Test(valid = TypeProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1})\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n+    @Test(valid = TypeProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1})\n@@ -613,2 +613,2 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1})\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1})\n@@ -635,3 +635,3 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n-    @Test(valid = TypeProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1})\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n+    @Test(valid = TypeProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1})\n@@ -658,2 +658,2 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1})\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1})\n@@ -680,3 +680,3 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST + NULL_CHECK_TRAP, match = { CLASS_CHECK_TRAP }, matchCount = { 1})\n-    @Test(valid = TypeProfileOn, failOn = SUBSTITUTABLITY_TEST + NULL_CHECK_TRAP, match = { CLASS_CHECK_TRAP }, matchCount = { 1})\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1})\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST + NULL_CHECK_TRAP, match = { CLASS_CHECK_TRAP }, matchCount = { 1})\n+    @Test(valid = TypeProfileOn, failOn = SUBSTITUTABILITY_TEST + NULL_CHECK_TRAP, match = { CLASS_CHECK_TRAP }, matchCount = { 1})\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1})\n@@ -704,2 +704,2 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST + NULL_CHECK_TRAP)\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1})\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST + NULL_CHECK_TRAP)\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1})\n@@ -728,2 +728,2 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1})\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1})\n@@ -751,2 +751,2 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1})\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1})\n@@ -774,2 +774,2 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1})\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1})\n@@ -797,2 +797,2 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1})\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { NULL_CHECK_TRAP, CLASS_CHECK_TRAP }, matchCount = { 1, 1})\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1})\n@@ -820,2 +820,2 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST + NULL_CHECK_TRAP, match = { CLASS_CHECK_TRAP }, matchCount = { 1})\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1})\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST + NULL_CHECK_TRAP, match = { CLASS_CHECK_TRAP }, matchCount = { 1})\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1})\n@@ -843,2 +843,2 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST + NULL_CHECK_TRAP)\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1})\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST + NULL_CHECK_TRAP)\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1})\n@@ -868,3 +868,3 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { CLASS_CHECK_TRAP }, matchCount = { 1})\n-    @Test(valid = TypeProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { CLASS_CHECK_TRAP }, matchCount = { 1})\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1 })\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { CLASS_CHECK_TRAP }, matchCount = { 1})\n+    @Test(valid = TypeProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { CLASS_CHECK_TRAP }, matchCount = { 1})\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1 })\n@@ -893,3 +893,3 @@\n-    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { CLASS_CHECK_TRAP }, matchCount = { 1})\n-    @Test(valid = TypeProfileOn, failOn = SUBSTITUTABLITY_TEST, match = { CLASS_CHECK_TRAP }, matchCount = { 1})\n-    @Test(match = { SUBSTITUTABLITY_TEST }, matchCount = { 1 })\n+    @Test(valid = ACmpProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { CLASS_CHECK_TRAP }, matchCount = { 1})\n+    @Test(valid = TypeProfileOn, failOn = SUBSTITUTABILITY_TEST, match = { CLASS_CHECK_TRAP }, matchCount = { 1})\n+    @Test(match = { SUBSTITUTABILITY_TEST }, matchCount = { 1 })\n","filename":"test\/hotspot\/jtreg\/compiler\/valhalla\/inlinetypes\/TestLWorldProfiling.java","additions":44,"deletions":44,"binary":false,"changes":88,"status":"modified"}]}