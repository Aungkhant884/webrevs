{"files":[{"patch":"@@ -4393,1 +4393,1 @@\n-        else if (isSubtypeNoCapture(t, s))\n+        else if (isBoundedBy(t, s, (t1, s1, w) -> isSubtypeNoCapture(t1, s1)))\n@@ -4395,1 +4395,1 @@\n-        else if (isSubtypeNoCapture(s, t))\n+        else if (isBoundedBy(s, t, (s1, t1, w) -> isSubtypeNoCapture(s1, t1)))\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/code\/Types.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -221,1 +221,3 @@\n-            if (!allowBoxing && inferenceContext.asUndetVars(inferenceContext.boundedVars())\n+            if (!allowBoxing &&\n+                    resultInfo == null &&\n+                    inferenceContext.asUndetVars(inferenceContext.boundedVars())\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Infer.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -489,2 +489,1 @@\n-        \/\/ primitive classes don't have subtypes\n-        assertFail(\"compiler.err.not.within.bounds\",\n+        assertOK(\n@@ -504,0 +503,29 @@\n+\n+    public void testInferenceAndTypeSystem() {\n+        assertOK(\n+                \"\"\"\n+                primitive class MyValue {\n+                    MyValue m(U u) {\n+                        return u.getValue(MyValue.class.asValueType());\n+                    }\n+                }\n+\n+                class U {\n+                    <V> V getValue(Class<?> pc) { return null; }\n+                }\n+                \"\"\"\n+        );\n+        assertOK(\n+                \"\"\"\n+                primitive class MyValue {\n+                    void m(U u) {\n+                        MyValue vt = u.makePrivateBuffer(this);\n+                    }\n+                }\n+\n+                class U {\n+                    <V> V makePrivateBuffer(V value) { return null; }\n+                }\n+                \"\"\"\n+        );\n+    }\n","filename":"test\/langtools\/tools\/javac\/valhalla\/lworld-values\/universal-type-variables\/UniversalTVarsCompilationTests.java","additions":30,"deletions":2,"binary":false,"changes":32,"status":"modified"}]}