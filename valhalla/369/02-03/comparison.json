{"files":[{"patch":"@@ -5040,2 +5040,1 @@\n-            final TypeSymbol csym = clazztype.tsym;\n-            var clazzTypeArgs = csym.type.getTypeArguments();\n+            var clazzTypeArgs = site.getTypeArguments();\n@@ -5043,1 +5042,1 @@\n-                    new MethodType(List.nil(), csym.type, List.nil(), syms.methodClass));\n+                    new MethodType(List.nil(), site, List.nil(), syms.methodClass));\n@@ -5047,1 +5046,1 @@\n-                    defaultPolyContext(tree, csym, resultInfo.checkContext), CheckMode.NO_TREE_UPDATE);\n+                    defaultPolyContext(tree, clazztype.tsym, resultInfo.checkContext), CheckMode.NO_TREE_UPDATE);\n@@ -5054,1 +5053,1 @@\n-            \ttree.defaultValueConstructor = types.createMethodTypeWithReturn(defaultType, syms.voidType);\n+                tree.defaultValueConstructor = types.createMethodTypeWithReturn(defaultType, syms.voidType);\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Attr.java","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -1410,1 +1410,1 @@\n-\t\tpublic Type defaultValueConstructor; \/\/ Possible parameterized type of \"constructor\" \n+        public Type defaultValueConstructor; \/\/ Possible parameterized type of \"constructor\"\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/tree\/JCTree.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -32,1 +32,0 @@\n-\n@@ -35,1 +34,7 @@\n-    static void m(PolyDefaultArgs<String> ls) { }\n+    static void m(PolyDefaultArgs<String> p) { }\n+\n+    static <T>void check(PolyDefaultArgs.ref<T> rp) {\n+    \tif (rp != null) {\n+    \t\tthrow new RuntimeException(\"reference projection must be null\");\n+    \t}\n+    }\n@@ -38,0 +43,1 @@\n+        \/\/ Ensure that the arguments to m() can be inferred\n@@ -41,0 +47,4 @@\n+\n+        \/\/ Ensure that the default of a reference type is null\n+        check(PolyDefaultArgs.ref<String>.default);\n+        check(PolyDefaultArgs.ref.default);\n","filename":"test\/langtools\/tools\/javac\/valhalla\/lworld-values\/PolyDefaultArgs.java","additions":12,"deletions":2,"binary":false,"changes":14,"status":"modified"}]}