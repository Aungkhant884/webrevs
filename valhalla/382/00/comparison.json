{"files":[{"patch":"@@ -2491,1 +2491,2 @@\n-  if (!stream()->is_unresolved_klass() && klass->is_inlinetype()) {\n+  if (!stream()->is_unresolved_klass() && klass->is_inlinetype() &&\n+      klass->as_inline_klass()->is_initialized()) {\n","filename":"src\/hotspot\/share\/c1\/c1_GraphBuilder.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -60,0 +60,6 @@\n+        \/\/ Make sure Test140Value is loaded but not linked\n+        Class<?> class1 = Test140Value.class;\n+        \/\/ Make sure Test141Value is linked but not initialized\n+        Class<?> class2 = Test141Value.class;\n+        class2.getDeclaredFields();\n+\n@@ -3735,0 +3741,42 @@\n+\n+    \/\/ Test calling a method on a loaded but not linked inline type\n+    final primitive class Test140Value {\n+        final int x = 42;\n+        public int get() {\n+            return x;\n+        }\n+    }\n+\n+    @Test\n+    @Warmup(0)\n+    public int test140() {\n+        Test140Value vt = Test140Value.default;\n+        return vt.get();\n+    }\n+\n+    @DontCompile\n+    public void test140_verifier(boolean warmup) {\n+        int result = test140();\n+        Asserts.assertEquals(result, 0);\n+    }\n+\n+    \/\/ Test calling a method on a linked but not initialized inline type\n+    final primitive class Test141Value {\n+        final int x = 42;\n+        public int get() {\n+            return x;\n+        }\n+    }\n+\n+    @Test\n+    @Warmup(0)\n+    public int test141() {\n+        Test141Value vt = Test141Value.default;\n+        return vt.get();\n+    }\n+\n+    @DontCompile\n+    public void test141_verifier(boolean warmup) {\n+        int result = test141();\n+        Asserts.assertEquals(result, 0);\n+    }\n","filename":"test\/hotspot\/jtreg\/compiler\/valhalla\/inlinetypes\/TestLWorld.java","additions":49,"deletions":1,"binary":false,"changes":50,"status":"modified"}]}