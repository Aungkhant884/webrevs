{"files":[{"patch":"@@ -1173,1 +1173,1 @@\n-    assert(klass->is_objArray_klass() || klass->is_typeArray_klass(), \"Illegal mirror klass\");\n+    assert(klass->is_objArray_klass() || klass->is_typeArray_klass() || klass->is_flatArray_klass(), \"Illegal mirror klass\");\n","filename":"src\/hotspot\/share\/prims\/jvm.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -35,0 +35,1 @@\n+import java.io.Serializable;\n@@ -39,0 +40,1 @@\n+import java.util.Objects;\n@@ -177,0 +179,1 @@\n+\n@@ -193,0 +196,29 @@\n+    class C implements IdentityObject { }\n+    primitive class T implements PrimitiveObject { }\n+\n+    @DataProvider(name=\"intfs\")\n+    Object[][] intfs() {\n+        Point point = new Point(10, 20);\n+        Point[] array = new Point[] { point };\n+        return new Object[][]{\n+                new Object[]{ new BasicTest(), new Class<?>[] { IdentityObject.class }},\n+                new Object[]{ point, new Class<?>[] { PrimitiveObject.class }},\n+                new Object[]{ new T(), new Class<?>[] { PrimitiveObject.class }},\n+                new Object[]{ new C(), new Class<?>[] { IdentityObject.class }},\n+                new Object[]{ Objects.newIdentity(), new Class<?>[] { IdentityObject.class }},\n+                new Object[]{ array, new Class<?>[] { Cloneable.class, Serializable.class, IdentityObject.class }},\n+        };\n+    }\n+\n+    @Test(dataProvider = \"intfs\")\n+    public void testGetInterfaces(Object o, Class<?>[] expectedInterfaces) {\n+        Class<?> type = o.getClass();\n+        assertEquals(type.getInterfaces(), expectedInterfaces);\n+        if (type.isPrimitiveClass()) {\n+            assertTrue(PrimitiveObject.class.isAssignableFrom(type));\n+            assertTrue(o instanceof PrimitiveObject);\n+        } else {\n+            assertTrue(IdentityObject.class.isAssignableFrom(type));\n+            assertTrue(o instanceof IdentityObject);\n+        }\n+    }\n","filename":"test\/jdk\/valhalla\/valuetypes\/BasicTest.java","additions":32,"deletions":0,"binary":false,"changes":32,"status":"modified"}]}