{"files":[{"patch":"@@ -4158,4 +4158,2 @@\n-    check_property(_class_name == vmSymbols::java_lang_Object()\n-                   || (_access_flags.get_flags() & JVM_ACC_INLINE),\n-                   \"Invalid superclass index %u in class file %s\",\n-                   super_class_index,\n+    check_property(_class_name == vmSymbols::java_lang_Object(),\n+                   \"Invalid superclass index 0 in class file %s\",\n","filename":"src\/hotspot\/share\/classfile\/classFileParser.cpp","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,1 @@\n- * @run main\/othervm BadInlineTypes\n+ * @run main\/othervm -Xverify:remote BadInlineTypes\n@@ -91,0 +91,2 @@\n+\n+        runTest(\"SuperIsZero\", \"Invalid superclass index 0 in class file SuperIsZero\");\n","filename":"test\/hotspot\/jtreg\/runtime\/valhalla\/inlinetypes\/classfileparser\/BadInlineTypes.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -2493,0 +2493,78 @@\n+\n+\n+\/\/ This class has a super_cpx of zero.  This should cause a ClassFormatError\n+\/\/ exception when this class is loaded.\n+class SuperIsZero {\n+  0xCAFEBABE;\n+  0; \/\/ minor version\n+  62; \/\/ version\n+  [15] { \/\/ Constant Pool\n+    ; \/\/ first element is empty\n+    class #2; \/\/ #1     at 0x0A\n+    Utf8 \"SuperIsZero\"; \/\/ #2     at 0x0D\n+    Field #1 #4; \/\/ #3     at 0x1A\n+    NameAndType #5 #6; \/\/ #4     at 0x1F\n+    Utf8 \"x\"; \/\/ #5     at 0x24\n+    Utf8 \"I\"; \/\/ #6     at 0x28\n+    class #8; \/\/ #7     at 0x2C\n+    Utf8 \"java\/lang\/Object\"; \/\/ #8     at 0x2F\n+    Utf8 \"<init>\"; \/\/ #9     at 0x42\n+    Utf8 \"()QSuperIsZero;\"; \/\/ #10     at 0x4B\n+    Utf8 \"Code\"; \/\/ #11     at 0x5C\n+    Utf8 \"LineNumberTable\"; \/\/ #12     at 0x63\n+    Utf8 \"SourceFile\"; \/\/ #13     at 0x75\n+    Utf8 \"SuperIsZero.java\"; \/\/ #14     at 0x82\n+  } \/\/ Constant Pool\n+\n+  0x0131; \/\/ access [ ACC_PUBLIC ACC_SUPER ACC_FINAL ]\n+  #1;\/\/ this_cpx\n+  #0;\/\/ super_cpx \/\/ !!! changed 7 to 0\n+\n+  [0] { \/\/ Interfaces\n+  } \/\/ Interfaces\n+\n+  [1] { \/\/ Fields\n+    {  \/\/ field at 0x9E\n+      0x0010; \/\/ access\n+      #5; \/\/ name_index       : x\n+      #6; \/\/ descriptor_index : I\n+      [0] { \/\/ Attributes\n+      } \/\/ Attributes\n+    }\n+  } \/\/ Fields\n+\n+  [1] { \/\/ Methods\n+    {  \/\/ method at 0xA8\n+      0x0009; \/\/ access\n+      #9; \/\/ name_index       : <init>\n+      #10; \/\/ descriptor_index : ()QSuperIsZero;\n+      [1] { \/\/ Attributes\n+        Attr(#11, 45) { \/\/ Code at 0xB0\n+          2; \/\/ max_stack\n+          1; \/\/ max_locals\n+          Bytes[13]{\n+            0xCB00014B082A5FCC;\n+            0x00034B2AB0;\n+          }\n+          [0] { \/\/ Traps\n+          } \/\/ end Traps\n+          [1] { \/\/ Attributes\n+            Attr(#12, 14) { \/\/ LineNumberTable at 0xCF\n+              [3] { \/\/ line_number_table\n+                0  4; \/\/  at 0xDB\n+                4  5; \/\/  at 0xDF\n+                11  6; \/\/  at 0xE3\n+              }\n+            } \/\/ end LineNumberTable\n+          } \/\/ Attributes\n+        } \/\/ end Code\n+      } \/\/ Attributes\n+    }\n+  } \/\/ Methods\n+\n+  [1] { \/\/ Attributes\n+    Attr(#13, 2) { \/\/ SourceFile at 0xE5\n+      #14;\n+    } \/\/ end SourceFile\n+  } \/\/ Attributes\n+} \/\/ end class SuperIsZero\n","filename":"test\/hotspot\/jtreg\/runtime\/valhalla\/inlinetypes\/classfileparser\/cfpTests.jcod","additions":79,"deletions":1,"binary":false,"changes":80,"status":"modified"}]}