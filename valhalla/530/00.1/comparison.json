{"files":[{"patch":"@@ -29,0 +29,1 @@\n+import java.util.function.Function;\n@@ -163,0 +164,1 @@\n+        allowUniversalTVars = Feature.UNIVERSAL_TVARS.allowedInSource(source);\n@@ -206,0 +208,4 @@\n+    \/** Are universal tvars allowed\n+     *\/\n+    private final boolean allowUniversalTVars;\n+\n@@ -271,0 +277,9 @@\n+    \/** Warn about operation with universal type variables.\n+     *  @param pos        Position to be used for error reporting.\n+     *  @param warnKey    A warning key.\n+     *\/\n+    public void warnUniversalTVar(DiagnosticPosition pos, Warning warnKey) {\n+        if (lint.isEnabled(LintCategory.UNIVERSAL))\n+            log.warning(LintCategory.UNIVERSAL, pos, warnKey);\n+    }\n+\n@@ -609,3 +624,5 @@\n-            if (found.hasTag(CLASS)) {\n-                if (inferenceContext != infer.emptyContext)\n-                    checkParameterizationByPrimitiveClass(pos, found);\n+            if (!allowUniversalTVars) {\n+                if (found.hasTag(CLASS)) {\n+                    if (inferenceContext != infer.emptyContext)\n+                        checkParameterizationByPrimitiveClass(pos, found);\n+                }\n@@ -691,1 +708,1 @@\n-             return types.isSubtype(a, bound);\n+             return types.isBoundedBy(a, bound, (t, s, w) -> types.isSubtype(t, s));\n@@ -853,2 +870,2 @@\n-                                diags.fragment(Fragments.TypeReqRef),\n-                                t);\n+                    diags.fragment(Fragments.TypeReqRef),\n+                    t);\n@@ -934,1 +951,3 @@\n-        parameterizationByPrimitiveClassChecker.visit(t, pos);\n+        if (!allowUniversalTVars) {\n+            parameterizationByPrimitiveClassChecker.visit(t, pos);\n+        }\n@@ -1131,1 +1150,1 @@\n-        if (varType.hasTag(CLASS)) {\n+        if (!allowUniversalTVars && varType.hasTag(CLASS)) {\n@@ -4209,0 +4228,3 @@\n+                case UNIVERSAL:\n+                    Check.this.warnUniversalTVar(pos(), Warnings.UniversalVariableCannotBeAssignedNull);\n+                    break;\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Check.java","additions":30,"deletions":8,"binary":false,"changes":38,"status":"modified"}]}