{"files":[{"patch":"@@ -511,1 +511,0 @@\n-  \/\/ TODO: _adr_inlineklass_fixed_block ?\n@@ -537,0 +536,4 @@\n+  \/\/ We are no longer bookkeeping pointer to fixed block during serialization, hence reinitializing\n+  \/\/ fixed block address since its size was already accounted by InstanceKlass::size() and it will\n+  \/\/ anyways be part of shared archive.\n+  _adr_inlineklass_fixed_block = inlineklass_static_block();\n","filename":"src\/hotspot\/share\/oops\/inlineKlass.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -1272,1 +1272,2 @@\n-  if (InlineTypeReturnedAsFields && returns_inline_type(THREAD)) {\n+  if (InlineTypeReturnedAsFields && returns_inline_type(THREAD) && !has_scalarized_return()) {\n+    assert(!constMethod()->is_shared(), \"Cannot update shared const objects\");\n","filename":"src\/hotspot\/share\/oops\/method.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -3176,1 +3176,4 @@\n-    method->set_has_scalarized_args();\n+    if (!method->has_scalarized_args()) {\n+      assert(!method()->constMethod()->is_shared(), \"Cannot update shared const object\");\n+      method->set_has_scalarized_args();\n+    }\n@@ -3180,1 +3183,2 @@\n-    if (ces.c2_needs_stack_repair()) {\n+    if (ces.c2_needs_stack_repair() && !method->c2_needs_stack_repair()) {\n+      assert(!method->constMethod()->is_shared(), \"Cannot update a shared const object\");\n","filename":"src\/hotspot\/share\/runtime\/sharedRuntime.cpp","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -116,2 +116,0 @@\n-runtime\/cds\/appcds\/dynamicArchive\/DynamicArchiveRelocationTest.java 8309357 generic-all\n-runtime\/cds\/appcds\/dynamicArchive\/HelloDynamicInlineClass.java 8309357 generic-all\n","filename":"test\/hotspot\/jtreg\/ProblemList.txt","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"}]}