{"files":[{"patch":"@@ -2103,2 +2103,0 @@\n-  bool patch_mod_javabase = false;\n-\n@@ -2118,1 +2116,1 @@\n-  jint result = parse_each_vm_init_arg(vm_options_args, &patch_mod_javabase, JVMFlagOrigin::JIMAGE_RESOURCE);\n+  jint result = parse_each_vm_init_arg(vm_options_args, JVMFlagOrigin::JIMAGE_RESOURCE);\n@@ -2125,1 +2123,1 @@\n-  result = parse_each_vm_init_arg(java_tool_options_args, &patch_mod_javabase, JVMFlagOrigin::ENVIRON_VAR);\n+  result = parse_each_vm_init_arg(java_tool_options_args, JVMFlagOrigin::ENVIRON_VAR);\n@@ -2131,1 +2129,1 @@\n-  result = parse_each_vm_init_arg(cmd_line_args, &patch_mod_javabase, JVMFlagOrigin::COMMAND_LINE);\n+  result = parse_each_vm_init_arg(cmd_line_args, JVMFlagOrigin::COMMAND_LINE);\n@@ -2138,1 +2136,1 @@\n-  result = parse_each_vm_init_arg(java_options_args, &patch_mod_javabase, JVMFlagOrigin::ENVIRON_VAR);\n+  result = parse_each_vm_init_arg(java_options_args, JVMFlagOrigin::ENVIRON_VAR);\n@@ -2152,1 +2150,1 @@\n-  result = finalize_vm_init_args(patch_mod_javabase);\n+  result = finalize_vm_init_args();\n@@ -2205,1 +2203,1 @@\n-int Arguments::process_patch_mod_option(const char* patch_mod_tail, bool* patch_mod_javabase) {\n+int Arguments::process_patch_mod_option(const char* patch_mod_tail) {\n@@ -2221,1 +2219,1 @@\n-      add_patch_mod_prefix(module_name, module_equal + 1, false);\n+      add_patch_mod_prefix(module_name, module_equal + 1, false \/* no append *\/);\n@@ -2246,1 +2244,1 @@\n-        Arguments::get_java_home(), fileSep, fileSep, fileSep);\n+                 Arguments::get_java_home(), fileSep, fileSep, fileSep);\n@@ -2248,1 +2246,1 @@\n-    if (dir != NULL) {\n+    if (dir != nullptr) {\n@@ -2252,1 +2250,1 @@\n-      for (dirent * entry = os::readdir(dir); entry != NULL; entry = os::readdir(dir)) {\n+      for (dirent * entry = os::readdir(dir); entry != nullptr; entry = os::readdir(dir)) {\n@@ -2263,1 +2261,1 @@\n-        add_patch_mod_prefix(module_name, path, true);\n+        add_patch_mod_prefix(module_name, path, true \/* append *\/);\n@@ -2276,1 +2274,1 @@\n-  if (_patch_mod_prefix != NULL) {\n+  if (_patch_mod_prefix != nullptr) {\n@@ -2348,1 +2346,1 @@\n-jint Arguments::parse_each_vm_init_arg(const JavaVMInitArgs* args, bool* patch_mod_javabase, JVMFlagOrigin origin) {\n+jint Arguments::parse_each_vm_init_arg(const JavaVMInitArgs* args, JVMFlagOrigin origin) {\n@@ -2473,1 +2471,1 @@\n-      int res = process_patch_mod_option(tail, patch_mod_javabase);\n+      int res = process_patch_mod_option(tail);\n@@ -3008,1 +3006,1 @@\n-  if (_patch_mod_prefix == NULL) {\n+  if (_patch_mod_prefix == nullptr) {\n@@ -3070,1 +3068,1 @@\n-jint Arguments::finalize_vm_init_args(bool patch_mod_javabase) {\n+jint Arguments::finalize_vm_init_args() {\n@@ -3194,2 +3192,2 @@\n-  if (UseSharedSpaces && patch_mod_javabase) {\n-    no_shared_spaces(\"CDS is disabled when \" JAVA_BASE_NAME \" module is patched.\");\n+  if (UseSharedSpaces && _patch_mod_prefix != nullptr) {\n+    no_shared_spaces(\"CDS is disabled when any module is patched.\");\n","filename":"src\/hotspot\/share\/runtime\/arguments.cpp","additions":18,"deletions":20,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -399,1 +399,1 @@\n-  static int process_patch_mod_option(const char* patch_mod_tail, bool* patch_mod_javabase);\n+  static int process_patch_mod_option(const char* patch_mod_tail);\n@@ -435,2 +435,2 @@\n-  static jint parse_each_vm_init_arg(const JavaVMInitArgs* args, bool* patch_mod_javabase, JVMFlagOrigin origin);\n-  static jint finalize_vm_init_args(bool patch_mod_javabase);\n+  static jint parse_each_vm_init_arg(const JavaVMInitArgs* args, JVMFlagOrigin origin);\n+  static jint finalize_vm_init_args();\n","filename":"src\/hotspot\/share\/runtime\/arguments.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}