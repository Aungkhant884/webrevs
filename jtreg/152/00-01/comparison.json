{"files":[{"patch":"@@ -2156,1 +2156,1 @@\n-            addEnvVars(envVars, DEFAULT_WINDOWS_ENV_VARS);\n+            addEnvVars(envVars, sysEnv, DEFAULT_WINDOWS_ENV_VARS);\n@@ -2158,1 +2158,1 @@\n-            addEnvVars(envVars, \"PATH\"); \/\/ accept user's path, for now\n+            addEnvVars(envVars, sysEnv, \"PATH\"); \/\/ accept user's path, for now\n@@ -2160,1 +2160,1 @@\n-            addEnvVars(envVars, DEFAULT_UNIX_ENV_VARS);\n+            addEnvVars(envVars, sysEnv, DEFAULT_UNIX_ENV_VARS);\n@@ -2162,1 +2162,1 @@\n-            addEnvVars(envVars, \"PATH=\/bin:\/usr\/bin:\/usr\/sbin\");\n+            addEnvVars(envVars, sysEnv, \"PATH=\/bin:\/usr\/bin:\/usr\/sbin\");\n@@ -2164,1 +2164,1 @@\n-        addEnvVars(envVars, envVarArgs);\n+        addEnvVars(envVars, sysEnv, envVarArgs);\n@@ -2170,2 +2170,2 @@\n-    private void addEnvVars(Map<String, String> table, String list) {\n-        addEnvVars(table, list.split(\",\"));\n+    private void addEnvVars(Map<String, String> table, Map<String, String> sysEnv, String list) {\n+        addEnvVars(table, sysEnv, list.split(\",\"));\n@@ -2174,2 +2174,2 @@\n-    private void addEnvVars(Map<String, String> table, String[] list) {\n-        addEnvVars(table, List.of(list));\n+    private void addEnvVars(Map<String, String> table, Map<String, String> sysEnv, String[] list) {\n+        addEnvVars(table, sysEnv, List.of(list));\n@@ -2178,1 +2178,1 @@\n-    private void addEnvVars(Map<String, String> table, List<String> list) {\n+    private void addEnvVars(Map<String, String> table, Map<String, String> sysEnv, List<String> list) {\n@@ -2188,1 +2188,1 @@\n-                String value = System.getenv(s);\n+                String value = sysEnv.get(s);\n@@ -2200,1 +2200,1 @@\n-        System.getenv().entrySet().stream()\n+        sysEnv.entrySet().stream()\n@@ -2342,2 +2342,2 @@\n-            \"DBUS_SESSION_BUS_ADDRESS\", \"DISPLAY\",\n-            \"GNOME_DESKTOP_SESSION_ID\",\n+            \"DBUS_SESSION_BUS_ADDRESS\", \"DESKTOP_SESSION\", \"DISPLAY\",\n+            \"GDM_SESSION\", \"GNOME_DESKTOP_SESSION_ID\", \"GNOME_SHELL_SESSION_MODE\",\n","filename":"src\/share\/classes\/com\/sun\/javatest\/regtest\/tool\/Tool.java","additions":14,"deletions":14,"binary":false,"changes":28,"status":"modified"}]}