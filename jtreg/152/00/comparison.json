{"files":[{"patch":"@@ -3,1 +3,3 @@\n-_No notewothy changes yet._\n+* Updated set of default environment variables set for tests on Unix-like platforms.\n+  * Includes `DBUS_SESSION_BUS_ADDRESS`, `WAYLAND_DISPLAY`, and `XDG-*` \n+    [CODETOOLS-7903400](https:\/\/bugs.openjdk.org\/browse\/CODETOOLS-7903400)\n","filename":"CHANGELOG.md","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -63,0 +63,1 @@\n+import java.util.function.Predicate;\n@@ -2151,0 +2152,1 @@\n+        Map<String, String> sysEnv = System.getenv();\n@@ -2159,0 +2161,1 @@\n+            addEnvVars(envVars, sysEnv, e -> e.getKey().startsWith(\"XDG_\"));\n@@ -2162,7 +2165,1 @@\n-        for (Map.Entry<String, String> e: System.getenv().entrySet()) {\n-            String k = e.getKey();\n-            String v = e.getValue();\n-            if (k.startsWith(\"JTREG_\")) {\n-                envVars.put(k, v);\n-            }\n-        }\n+        addEnvVars(envVars, sysEnv, e -> e.getKey().startsWith(\"JTREG_\"));\n@@ -2202,0 +2199,6 @@\n+    private void addEnvVars(Map<String, String> table, Map<String, String> sysEnv, Predicate<Map.Entry<String, String>> filter) {\n+        System.getenv().entrySet().stream()\n+                .filter(filter)\n+                .forEach(e -> table.put(e.getKey(), e.getValue()));\n+    }\n+\n@@ -2339,2 +2342,8 @@\n-        \"DISPLAY\", \"GNOME_DESKTOP_SESSION_ID\", \"HOME\", \"LANG\",\n-        \"LC_ALL\", \"LC_CTYPE\", \"LPDEST\", \"PRINTER\", \"TZ\", \"XMODIFIERS\"\n+            \"DBUS_SESSION_BUS_ADDRESS\", \"DISPLAY\",\n+            \"GNOME_DESKTOP_SESSION_ID\",\n+            \"HOME\",\n+            \"LANG\", \"LC_ALL\", \"LC_CTYPE\", \"LPDEST\",\n+            \"PRINTER\",\n+            \"TZ\",\n+            \"WAYLAND_DISPLAY\",\n+            \"XMODIFIERS\"\n@@ -2344,1 +2353,3 @@\n-        \"SystemDrive\", \"SystemRoot\", \"windir\", \"TMP\", \"TEMP\", \"TZ\"\n+            \"SystemDrive\", \"SystemRoot\",\n+            \"TMP\", \"TEMP\", \"TZ\",\n+            \"windir\"\n","filename":"src\/share\/classes\/com\/sun\/javatest\/regtest\/tool\/Tool.java","additions":21,"deletions":10,"binary":false,"changes":31,"status":"modified"}]}