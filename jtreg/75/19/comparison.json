{"files":[{"patch":"@@ -0,0 +1,26 @@\n+name: build\n+description: Set up JDK and run build\n+runs:\n+  using: \"composite\"\n+  steps:\n+    - name: 'Set up JDK'\n+      uses: actions\/setup-java@v3\n+      with:\n+       distribution: 'temurin'\n+       java-version: 11\n+    - name: 'Build JTReg'\n+      shell: bash\n+      run: bash make\/build.sh --jdk ${JAVA_HOME}\n+    - name: 'Run initial self-tests (goal: quick-test)'\n+      env:\n+        MAKE_ARGS: quick-test\n+        HEADLESS: 1\n+      shell: bash\n+      run: bash make\/build.sh --jdk ${JAVA_HOME} --skip-download\n+    - name: 'Run all self-tests (goal: test)'\n+      if: false\n+      env:\n+        MAKE_ARGS: test\n+        HEADLESS: 1\n+      shell: bash\n+      run: bash make\/build.sh --jdk ${JAVA_HOME} --skip-download\n","filename":".github\/actions\/build\/action.yml","additions":26,"deletions":0,"binary":false,"changes":26,"status":"added"},{"patch":"@@ -13,1 +13,1 @@\n-  linux-x64:\n+  linux-test:\n@@ -15,0 +15,5 @@\n+    steps:\n+    - name: 'Check out repository'\n+      uses: actions\/checkout@v3\n+    - name: 'Build'\n+      uses: .\/.github\/actions\/build\n@@ -16,0 +21,2 @@\n+  mac-test:\n+    runs-on: macos-latest\n@@ -18,3 +25,3 @@\n-      uses: actions\/checkout@v2\n-      with:\n-        fetch-depth: 1\n+      uses: actions\/checkout@v3\n+    - name: 'Build'\n+      uses: .\/.github\/actions\/build\n@@ -22,2 +29,12 @@\n-    - name: 'Build JTReg'\n-      shell: bash\n+  windows-test:\n+    runs-on: windows-latest\n+    defaults:\n+      run:\n+        shell: C:\\cygwin\\bin\\bash.exe --noprofile --norc -o igncr -eo pipefail '{0}'\n+    steps:\n+    - name: 'Install Cygwin'\n+      uses: cygwin\/cygwin-install-action@v2\n+      with:\n+        packages: >-\n+          wget\n+    - name: 'Configure Git'\n@@ -25,4 +42,10 @@\n-        java --version\n-        bash make\/build.sh --jdk ${JAVA_HOME_11_X64}\n-\n-    - name: 'Run initial tests (goal: quick-test)'\n+        git config --global core.autocrlf false\n+        git config --global core.eol lf\n+    - name: 'Check out repository'\n+      uses: actions\/checkout@v3\n+    - name: 'Set up JDK'\n+      uses: actions\/setup-java@v3\n+      with:\n+       distribution: 'temurin'\n+       java-version: 11\n+    - name: 'Build JTReg'\n@@ -30,0 +53,2 @@\n+      run: bash make\/build.sh --jdk ${JAVA_HOME}\n+    - name: 'Run initial self-tests (goal: quick-test)'\n@@ -33,4 +58,0 @@\n-      run: |\n-        bash make\/build.sh --jdk ${JAVA_HOME_11_X64} --skip-download\n-\n-    - name: 'Run all tests (goal: test)'\n@@ -38,5 +59,1 @@\n-      env:\n-        MAKE_ARGS: test\n-        HEADLESS: 1\n-      run: |\n-        bash make\/build.sh --jdk ${JAVA_HOME_11_X64} --skip-download\n+      run: bash make\/build.sh --jdk ${JAVA_HOME} --skip-download\n","filename":".github\/workflows\/test.yml","additions":36,"deletions":19,"binary":false,"changes":55,"status":"modified"},{"patch":"@@ -36,0 +36,2 @@\n+        \/\/ The os.version property may be more detailed than the expected value determined in the makefiles.\n+        \/\/ For example, \"11.6.5\" is a valid match for an expected \"11.6\" version.\n@@ -37,1 +39,1 @@\n-        if (!osVersion.equals(expectVersion)) {\n+        if (!osVersion.startsWith(expectVersion)) {\n@@ -46,1 +48,1 @@\n-}\n\\ No newline at end of file\n+}\n","filename":"make\/CheckJavaOSVersion.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"}]}