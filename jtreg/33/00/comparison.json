{"files":[{"patch":"@@ -31,0 +31,1 @@\n+import java.net.URL;\n@@ -970,2 +971,11 @@\n-                \/\/ append jtreg.jar to the path\n-                javaTestClassPath.append(new File(installDir, \"jtreg.jar\"));\n+                \/\/ append jtreg.jar or exploded directory to the search path\n+                File jtreg = new File(installDir, \"jtreg.jar\");\n+                if (jtreg.exists()) {\n+                    javaTestClassPath.append(jtreg);\n+                } else try {\n+                    \/\/ use code source location of this class instead\n+                    URL location = getClass().getProtectionDomain().getCodeSource().getLocation();\n+                    javaTestClassPath.append(new File(location.toURI()));\n+                } catch (Exception e) { \/\/ including NullPointerException and URISyntaxException\n+                    throw new RuntimeException(\"Computation of Java test class-path failed\", e);\n+                }\n","filename":"src\/share\/classes\/com\/sun\/javatest\/regtest\/config\/RegressionParameters.java","additions":12,"deletions":2,"binary":false,"changes":14,"status":"modified"}]}