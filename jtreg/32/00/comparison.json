{"files":[{"patch":"@@ -5,2 +5,5 @@\n-    branches-ignore:\n-        - master\n+    branches:\n+      - master\n+  pull_request:\n+    branches:\n+      - '*'\n@@ -11,1 +14,1 @@\n-    runs-on: ubuntu-20.04\n+    runs-on: ubuntu-latest\n@@ -14,26 +17,34 @@\n-      - name: Checkout the source\n-        uses: actions\/checkout@v2\n-        with:\n-          path: jtreg\n-          fetch-depth: 0\n-\n-      - name: build\n-        working-directory: jtreg\n-        shell: bash\n-        run: bash make\/build.sh --jdk ${JAVA_HOME_8_X64}\n-\n-      - name: upload artifact\n-        uses: actions\/upload-artifact@v2\n-        with:\n-          name: jtreg\n-          path: jtreg\/build\/images\/jtreg\n-\n-      - name: test\n-        working-directory: jtreg\n-        shell: bash\n-        run:\n-             MAKE_ARGS=test\n-             HEADLESS=1\n-             JDK8HOME=${JAVA_HOME_8_X64}\n-             bash make\/build.sh --jdk ${JAVA_HOME_8_X64} --skip-download\n-\n+    - name: 'Check out repository'\n+      uses: actions\/checkout@v2\n+      with:\n+        fetch-depth: 1\n+\n+    - name: 'Build JTReg'\n+      shell: bash\n+      run: |\n+        java --version\n+        bash make\/build.sh --jdk ${JAVA_HOME_11_X64}\n+\n+    - name: 'Run initial tests (goal: quick-test)'\n+      shell: bash\n+      env:\n+        MAKE_ARGS: quick-test\n+        HEADLESS: 1\n+      run: |\n+        bash make\/build.sh --jdk ${JAVA_HOME_11_X64} --skip-download\n+\n+    - name: 'Run all tests (goal: test)'\n+      shell: bash\n+      env:\n+        MAKE_ARGS: test\n+        HEADLESS: 1\n+      run: |\n+        bash make\/build.sh --jdk ${JAVA_HOME_11_X64} --skip-download\n+\n+    - name: 'Upload artifact ${{ github.event.repository.name }}-build-${{ github.sha }}'\n+      if: always()\n+      uses: actions\/upload-artifact@v2\n+      with:\n+        name: ${{ github.event.repository.name }}-build-${{ github.sha }}\n+        path: |\n+          build\/images\/jtreg\n","filename":".github\/workflows\/test.yml","additions":40,"deletions":29,"binary":false,"changes":69,"status":"modified"}]}