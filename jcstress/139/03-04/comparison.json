{"files":[{"patch":"@@ -72,2 +72,2 @@\n-        int msPerIter = (timeLeft > 0 && testsLeft > 0) ?\n-                (int) (timeLeft * testsInflight \/ testsLeft) :\n+        long msPerTest = (timeLeft > 0 && testsLeft > 0) ?\n+                timeLeft \/ testsLeft * testsInflight :\n@@ -76,3 +76,11 @@\n-        \/\/ Never drop below 1ms\n-        msPerIter = Math.max(1, msPerIter);\n-        return msPerIter;\n+        \/\/ Enforce reasonable target brackets and leave some time\n+        \/\/ for test infrastructure to run.\n+        final int MIN_TIME_MS = 30;\n+        final int MAX_TIME_MS = 60_000;\n+        if (msPerTest > MIN_TIME_MS * 2) {\n+            msPerTest -= MIN_TIME_MS;\n+        }\n+        msPerTest = Math.max(MIN_TIME_MS, msPerTest);\n+        msPerTest = Math.min(MAX_TIME_MS, msPerTest);\n+\n+        return (int)msPerTest;\n","filename":"jcstress-core\/src\/main\/java\/org\/openjdk\/jcstress\/TimeBudget.java","additions":13,"deletions":5,"binary":false,"changes":18,"status":"modified"}]}