{"files":[{"patch":"@@ -241,0 +241,4 @@\n+        if (data.contains(\"Option UseBiasedLocking was deprecated\")) {\n+            return true;\n+        }\n+\n","filename":"jcstress-core\/src\/main\/java\/org\/openjdk\/jcstress\/infra\/grading\/ReportUtils.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -58,0 +58,2 @@\n+    private static volatile boolean BIASED_LOCKING_AVAILABLE;\n+\n@@ -109,0 +111,6 @@\n+        BIASED_LOCKING_AVAILABLE = detect(\"Checking for biased locking support\",\n+                SimpleTestMain.class,\n+                null,\n+                \"-XX:+UseBiasedLocking\"\n+        );\n+\n@@ -263,0 +271,11 @@\n+    private static Config prependArgs(Config orig, String... args) {\n+        return prependArgs(orig, Arrays.asList(args));\n+    }\n+\n+    private static Config prependArgs(Config orig, List<String> args) {\n+        List<String> l = new ArrayList<>();\n+        l.addAll(args);\n+        l.addAll(orig.origArgs());\n+        return new Config(l, orig.onlyIfC2(), orig.stress());\n+    }\n+\n@@ -294,0 +313,10 @@\n+        \/\/ Mix in locking arguments, if available\n+        if (BIASED_LOCKING_AVAILABLE) {\n+            LinkedHashSet<Config> newConfigs = new LinkedHashSet<>();\n+            for (Config c : configs) {\n+                newConfigs.add(prependArgs(c, \"-XX:+UseBiasedLocking\"));\n+                newConfigs.add(prependArgs(c, \"-XX:-UseBiasedLocking\"));\n+            }\n+            configs = newConfigs;\n+        }\n+\n@@ -304,6 +333,3 @@\n-            configs = configs.stream().map(c -> {\n-                List<String> l = new ArrayList<>();\n-                l.addAll(inputArgs);\n-                l.addAll(c.origArgs());\n-                return new Config(l, c.onlyIfC2(), c.stress());\n-            }).collect(Collectors.toCollection(LinkedHashSet::new));\n+            configs = configs.stream()\n+                    .map(c -> prependArgs(c, inputArgs))\n+                    .collect(Collectors.toCollection(LinkedHashSet::new));\n@@ -314,6 +340,3 @@\n-            configs = configs.stream().map(c -> {\n-                List<String> l = new ArrayList<>();\n-                l.addAll(jvmArgsPrepend);\n-                l.addAll(c.origArgs());\n-                return new Config(l, c.onlyIfC2(), c.stress());\n-            }).collect(Collectors.toCollection(LinkedHashSet::new));\n+            configs = configs.stream()\n+                    .map(c -> prependArgs(c, jvmArgsPrepend))\n+                    .collect(Collectors.toCollection(LinkedHashSet::new));\n","filename":"jcstress-core\/src\/main\/java\/org\/openjdk\/jcstress\/vm\/VMSupport.java","additions":35,"deletions":12,"binary":false,"changes":47,"status":"modified"}]}