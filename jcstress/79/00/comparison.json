{"files":[{"patch":"@@ -347,2 +347,8 @@\n-                \/\/ If this actor runs in interpreted mode, then actor method should not be compiled.\n-                \/\/ Allow run loop to be compiled with the best compiler available.\n+                pw.println(\"  {\");\n+                pw.println(\"    match: \\\"\" + task.binaryName + \"::\" + an + \"\\\",\");\n+\n+                \/\/ Make sure actor is compiled with the target mode. Note that normally\n+                \/\/ we would wait for run loop to inline the actor, but we don't want\n+                \/\/ the actor thread to escape the compilation mode before that happens.\n+                \/\/ In intepreted mode, the inlining would not happen, so we definitely\n+                \/\/ need to forbid the compilation here.\n@@ -350,2 +356,1 @@\n-                    pw.println(\"  {\");\n-                    pw.println(\"    match: \\\"\" + task.binaryName + \"::\" + an + \"\\\",\");\n+                    \/\/ Should be interpreter? Forbid compilation completely.\n@@ -358,1 +363,10 @@\n-                    pw.println(\"  },\");\n+                } else if (CompileMode.isC2(cm, a)) {\n+                    \/\/ Should be compiled with C2? Forbid C1 compilation then.\n+                    pw.println(\"    c1: {\");\n+                    pw.println(\"      Exclude: true,\");\n+                    pw.println(\"    },\");\n+                } else if (CompileMode.isC1(cm, a)) {\n+                    \/\/ Should be compiled with C1? Forbid C2 compilation then.\n+                    pw.println(\"    c2: {\");\n+                    pw.println(\"      Exclude: true,\");\n+                    pw.println(\"    },\");\n@@ -360,0 +374,1 @@\n+                pw.println(\"  },\");\n","filename":"jcstress-core\/src\/main\/java\/org\/openjdk\/jcstress\/TestExecutor.java","additions":20,"deletions":5,"binary":false,"changes":25,"status":"modified"}]}