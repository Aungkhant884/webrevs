{"files":[{"patch":"@@ -31,1 +31,0 @@\n-import org.openjdk.jcstress.util.StringUtils;\n@@ -144,3 +143,1 @@\n-            output.printf(\"%10s %s%n\", \"[\" + ReportUtils.statusToLabel(r) + \"]\", StringUtils.chunkName(r.getName()));\n-            ReportUtils.printDetails(output, r, true);\n-            ReportUtils.printMessages(output, r);\n+            ReportUtils.printResult(output, r, true);\n","filename":"jcstress-core\/src\/main\/java\/org\/openjdk\/jcstress\/infra\/grading\/ConsoleReportPrinter.java","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -474,1 +474,1 @@\n-        return \"#\" + rgb.substring(2, rgb.length());\n+        return \"#\" + rgb.substring(2);\n","filename":"jcstress-core\/src\/main\/java\/org\/openjdk\/jcstress\/infra\/grading\/HTMLReportPrinter.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -121,3 +121,7 @@\n-    public static void printDetails(PrintWriter pw, TestResult r, boolean inProgress) {\n-        pw.format(\"    (compilation: %s)%n\", CompileMode.description(r.getConfig().getCompileMode(), r.getConfig().actorNames));\n-        pw.format(\"    (JVM args: %s)%n\", r.getConfig().jvmArgs);\n+    public static void printResult(PrintWriter pw, TestResult r, boolean inProgress) {\n+        String label = StringUtils.leftPadDash(\"[\" + ReportUtils.statusToLabel(r) + \"]\", 10);\n+        String testName = StringUtils.chunkName(r.getName());\n+        pw.printf(\"%10s %s%n\", label, testName);\n+        pw.println();\n+        pw.format(\"  Compilation: %s%n\", CompileMode.description(r.getConfig().getCompileMode(), r.getConfig().actorNames));\n+        pw.format(\"  JVM args: %s%n\", r.getConfig().jvmArgs);\n@@ -125,1 +129,1 @@\n-            pw.format(\"    (fork: #%d)%n\", r.getConfig().forkId + 1);\n+            pw.format(\"  Fork: #%d%n\", r.getConfig().forkId + 1);\n@@ -127,0 +131,1 @@\n+        pw.println();\n@@ -165,1 +170,0 @@\n-    }\n@@ -167,1 +171,0 @@\n-    public static void printMessages(PrintWriter pw, TestResult r) {\n@@ -172,1 +175,1 @@\n-                pw.println(\"    Messages: \");\n+                pw.println(\"  Messages: \");\n@@ -175,1 +178,1 @@\n-            pw.println(\"        \" + data);\n+            pw.println(\"    \" + data);\n@@ -185,1 +188,1 @@\n-                pw.println(\"    VM output stream: \");\n+                pw.println(\"  VM output stream: \");\n@@ -188,1 +191,1 @@\n-            pw.println(\"        \" + data);\n+            pw.println(\"    \" + data);\n@@ -198,1 +201,1 @@\n-                pw.println(\"    VM error stream: \");\n+                pw.println(\"  VM error stream: \");\n@@ -201,1 +204,1 @@\n-            pw.println(\"        \" + data);\n+            pw.println(\"    \" + data);\n","filename":"jcstress-core\/src\/main\/java\/org\/openjdk\/jcstress\/infra\/grading\/ReportUtils.java","additions":15,"deletions":12,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -33,1 +33,0 @@\n-import org.openjdk.jcstress.util.StringUtils;\n@@ -52,1 +51,1 @@\n-    public TextReportPrinter(Options opts, InProcessCollector collector) throws FileNotFoundException {\n+    public TextReportPrinter(Options opts, InProcessCollector collector) {\n@@ -59,1 +58,1 @@\n-    public void work() throws FileNotFoundException {\n+    public void work() {\n@@ -65,1 +64,1 @@\n-                .thenComparing(Comparator.comparing(t -> t.getConfig().jvmArgs.toString())));\n+                .thenComparing(t -> t.getConfig().jvmArgs.toString()));\n@@ -111,0 +110,1 @@\n+        pw.println();\n@@ -113,0 +113,1 @@\n+            boolean emitted = false;\n@@ -116,0 +117,1 @@\n+                    emitted = true;\n@@ -118,0 +120,3 @@\n+            if (emitted) {\n+                pw.println();\n+            }\n@@ -119,2 +124,0 @@\n-\n-        pw.println();\n@@ -125,3 +128,1 @@\n-        pw.printf(\"%10s %s%n\", \"[\" + ReportUtils.statusToLabel(result) + \"]\", StringUtils.chunkName(result.getName()));\n-        ReportUtils.printDetails(pw, result, false);\n-        ReportUtils.printMessages(pw, result);\n+        ReportUtils.printResult(pw, result, false);\n","filename":"jcstress-core\/src\/main\/java\/org\/openjdk\/jcstress\/infra\/grading\/TextReportPrinter.java","additions":10,"deletions":9,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -121,0 +121,17 @@\n+\n+    static final String[] PADS;\n+\n+    static {\n+        PADS = new String[10];\n+        String p = \"\";\n+        for (int c = 0; c < PADS.length; c++) {\n+            PADS[c] = p;\n+            p = p + \".\";\n+        }\n+    }\n+\n+    public static String leftPadDash(String src, int count) {\n+        int need = count - src.length() - 1;\n+        if (need <= 0) return src;\n+        return PADS[need] + \" \" + src;\n+    }\n","filename":"jcstress-core\/src\/main\/java\/org\/openjdk\/jcstress\/util\/StringUtils.java","additions":17,"deletions":0,"binary":false,"changes":17,"status":"modified"}]}