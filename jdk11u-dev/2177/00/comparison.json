{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,0 +33,2 @@\n+ * @library \/test\/lib\n+ * @build jdk.test.lib.Asserts\n@@ -95,0 +97,2 @@\n+import jdk.test.lib.Asserts;\n+\n@@ -289,0 +293,1 @@\n+        test_context_iterator();\n@@ -1866,0 +1871,42 @@\n+    static boolean test_context_iterator() throws Exception {\n+        System.out.println(\"Testing context iterator() method.\");\n+\n+        Reference ref = fac.newReference(\"#object\",\n+                fac.newDigestMethod(DigestMethod.SHA512, null));\n+        SignedInfo si = fac.newSignedInfo(withoutComments, rsaSha512,\n+                Collections.singletonList(ref));\n+\n+        Document doc = db.newDocument();\n+        XMLObject obj = fac.newXMLObject(Collections.singletonList(\n+                new DOMStructure(doc.createTextNode(\"test text\"))), \"object\",\n+                null, null);\n+\n+        DOMSignContext dsc = new DOMSignContext(signingKey, doc);\n+        Asserts.assertNotNull(dsc.iterator());\n+        Asserts.assertFalse(dsc.iterator().hasNext());\n+\n+        String namespaceURI = \"https:\/\/example.com\/ns\";\n+        String idAttrValue = \"id1\";\n+        String elementQualifiedName = \"test:data\";\n+\n+        Element elm = doc.createElementNS(namespaceURI, elementQualifiedName);\n+        elm.setAttributeNS(namespaceURI, \"test:id\", idAttrValue);\n+        dsc.setIdAttributeNS(elm, namespaceURI, \"id\");\n+\n+        Iterator<Map.Entry<String, Element>> iter = dsc.iterator();\n+        Asserts.assertTrue(dsc.iterator().hasNext());\n+\n+        Map.Entry<String, Element> element = iter.next();\n+        Asserts.assertEquals(element.getKey(), idAttrValue);\n+        Asserts.assertEquals(element.getValue().getNodeName(), elementQualifiedName);\n+\n+        try {\n+            iter.remove();\n+            throw new RuntimeException(\n+                    \"The expected UnsupportedOperationException was not thrown.\");\n+        } catch (UnsupportedOperationException exc) {\n+            \/\/ this is expected\n+        }\n+        return true;\n+    }\n+\n","filename":"test\/jdk\/javax\/xml\/crypto\/dsig\/GenerationTests.java","additions":48,"deletions":1,"binary":false,"changes":49,"status":"modified"}]}