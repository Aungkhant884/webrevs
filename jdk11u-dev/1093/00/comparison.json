{"files":[{"patch":"@@ -72,1 +72,2 @@\n-      You can enable classes redefinition with \"-redefineClasses\" flag.\n+      You can enable classes redefinition with \"-redefineClasses\" flag. Valid options are \"true\" and\n+\"false\".\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/g1\/unloading\/README","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -51,0 +51,2 @@\n+  env->ReleaseByteArrayElements(bytecode, arrayContent, JNI_ABORT);\n+  env->ReleaseStringUTFChars(className, classNameChar);\n@@ -59,1 +61,1 @@\n-  * Class:     gc_g1_unloading_unloading_loading_ClassLoadingThread\n+  * Class:     gc_g1_unloading_unloading_loading_ClassLoadingHelper\n@@ -63,2 +65,2 @@\n-JNIEXPORT jint JNICALL  Java_gc_g1_unloading_loading_ClassLoadingThread_makeRedefinition0(JNIEnv *env,\n-                jclass cls, jint fl, jclass redefCls, jbyteArray classBytes) {\n+JNIEXPORT jint JNICALL  Java_gc_g1_unloading_loading_ClassLoadingHelper_makeRedefinition0(JNIEnv *env,\n+                jclass clazz, jint fl, jclass redefCls, jbyteArray classBytes) {\n@@ -102,3 +104,2 @@\n-    classDef.class_bytes = (unsigned char *)\n-        env->GetByteArrayElements(classBytes,\n-            NULL);\n+    jbyte * class_bytes = env->GetByteArrayElements(classBytes, NULL);\n+    classDef.class_bytes = (unsigned char *)class_bytes;\n@@ -111,0 +112,1 @@\n+    env->ReleaseByteArrayElements(classBytes, class_bytes, JNI_ABORT);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/g1\/unloading\/libdefine.cpp","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -56,2 +56,2 @@\n- *      -redefineClasses\n- *      -inMemoryCompilation\n+ *      -redefineClasses true\n+ *      -inMemoryCompilation true\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/g1\/unloading\/tests\/unloading_redefinition_inMemoryCompilation_keep_cl\/TestDescription.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -56,2 +56,2 @@\n- *      -redefineClasses\n- *      -inMemoryCompilation\n+ *      -redefineClasses true\n+ *      -inMemoryCompilation true\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/g1\/unloading\/tests\/unloading_redefinition_inMemoryCompilation_keep_class\/TestDescription.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -56,2 +56,2 @@\n- *      -redefineClasses\n- *      -inMemoryCompilation\n+ *      -redefineClasses true\n+ *      -inMemoryCompilation true\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/g1\/unloading\/tests\/unloading_redefinition_inMemoryCompilation_keep_obj\/TestDescription.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -56,1 +56,1 @@\n- *      -redefineClasses\n+ *      -redefineClasses true\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/g1\/unloading\/tests\/unloading_redefinition_keep_cl\/TestDescription.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -56,1 +56,1 @@\n- *      -redefineClasses\n+ *      -redefineClasses true\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/g1\/unloading\/tests\/unloading_redefinition_keep_class\/TestDescription.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -56,1 +56,1 @@\n- *      -redefineClasses\n+ *      -redefineClasses true\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/gc\/g1\/unloading\/tests\/unloading_redefinition_keep_obj\/TestDescription.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}