{"files":[{"patch":"@@ -145,0 +145,2 @@\n+<h4 id=\"retry_count\">RETRY_COUNT<\/h4>\n+<p>Retry failed tests up to a set number of times. Defaults to 0.<\/p>\n","filename":"doc\/testing.html","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -272,0 +272,4 @@\n+#### RETRY_COUNT\n+\n+Retry failed tests up to a set number of times. Defaults to 0.\n+\n","filename":"doc\/testing.md","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -279,1 +279,1 @@\n-        MAX_MEM, \\\n+        MAX_MEM RETRY_COUNT, \\\n@@ -656,0 +656,1 @@\n+  JTREG_RETRY_COUNT ?= 0\n@@ -745,0 +746,30 @@\n+  $1_COMMAND_LINE := \\\n+      $$(JAVA) $$($1_JTREG_LAUNCHER_OPTIONS) \\\n+          -Dprogram=jtreg -jar $$(JT_HOME)\/lib\/jtreg.jar \\\n+          $$($1_JTREG_BASIC_OPTIONS) \\\n+          -testjdk:$$(JDK_IMAGE_DIR) \\\n+          -dir:$$(JTREG_TOPDIR) \\\n+          -reportDir:$$($1_TEST_RESULTS_DIR) \\\n+          -workDir:$$($1_TEST_SUPPORT_DIR) \\\n+          -status:$$$${JTREG_STATUS} \\\n+          $$(JTREG_OPTIONS) \\\n+          $$(JTREG_FAILURE_HANDLER_OPTIONS) \\\n+          $$($1_TEST_NAME) \\\n+      && $$(ECHO) $$$$? > $$($1_EXITCODE) \\\n+      || $$(ECHO) $$$$? > $$($1_EXITCODE)\n+\n+\n+  ifneq ($$(JTREG_RETRY_COUNT), 0)\n+    $1_COMMAND_LINE := \\\n+        for i in {0..$$(JTREG_RETRY_COUNT)}; do \\\n+          if [ \"$$$$i\" != 0 ]; then \\\n+            $$(PRINTF) \"\\nRetrying Jtreg run. Attempt: $$$$i\\n\"; \\\n+          fi; \\\n+          $$($1_COMMAND_LINE); \\\n+          if [ \"`$$(CAT) $$($1_EXITCODE)`\" = \"0\" ]; then \\\n+            break; \\\n+          fi; \\\n+          export JTREG_STATUS=\"-status:error,fail\"; \\\n+        done\n+  endif\n+\n@@ -751,12 +782,1 @@\n-\t    $$(JAVA) $$($1_JTREG_LAUNCHER_OPTIONS) \\\n-\t        -Dprogram=jtreg -jar $$(JT_HOME)\/lib\/jtreg.jar \\\n-\t        $$($1_JTREG_BASIC_OPTIONS) \\\n-\t        -testjdk:$$(JDK_IMAGE_DIR) \\\n-\t        -dir:$$(JTREG_TOPDIR) \\\n-\t        -reportDir:$$($1_TEST_RESULTS_DIR) \\\n-\t        -workDir:$$($1_TEST_SUPPORT_DIR) \\\n-\t        $$(JTREG_OPTIONS) \\\n-\t        $$(JTREG_FAILURE_HANDLER_OPTIONS) \\\n-\t        $$($1_TEST_NAME) \\\n-\t    && $$(ECHO) $$$$? > $$($1_EXITCODE) \\\n-\t    || $$(ECHO) $$$$? > $$($1_EXITCODE) \\\n+\t    $$($1_COMMAND_LINE) \\\n","filename":"make\/RunTests.gmk","additions":33,"deletions":13,"binary":false,"changes":46,"status":"modified"}]}