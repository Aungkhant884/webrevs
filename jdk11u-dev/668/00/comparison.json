{"files":[{"patch":"@@ -76,2 +76,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(SetEnvironmentLocalStorage, jvmti, storage))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEnvironmentLocalStorage(storage))) {\n@@ -92,2 +91,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetEnvironmentLocalStorage, jvmti, (void**)&storage))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetEnvironmentLocalStorage((void**)&storage))) {\n@@ -219,3 +217,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks)))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks)))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/SetEnvironmentLocalStorage\/setenvstor001\/setenvstor001.cpp","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -76,2 +76,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(SetEnvironmentLocalStorage, jvmti, storage))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEnvironmentLocalStorage(storage))) {\n@@ -92,2 +91,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetEnvironmentLocalStorage, jvmti, (void**)&storage))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetEnvironmentLocalStorage((void**)&storage))) {\n@@ -224,3 +222,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks)))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks)))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/SetEnvironmentLocalStorage\/setenvstor002\/setenvstor002.cpp","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -76,2 +76,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(SetEnvironmentLocalStorage, jvmti, storage))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEnvironmentLocalStorage(storage))) {\n@@ -92,2 +91,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetEnvironmentLocalStorage, jvmti, (void**)&storage))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetEnvironmentLocalStorage((void**)&storage))) {\n@@ -227,3 +225,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks)))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks)))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/SetEnvironmentLocalStorage\/setenvstor003\/setenvstor003.cpp","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -146,3 +146,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks)))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks)))) {\n@@ -193,3 +191,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks)))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks)))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/SetEventCallbacks\/setevntcallb001\/setevntcallb001.cpp","additions":2,"deletions":6,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -148,2 +148,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti, NULL, 0))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(NULL, 0))) {\n@@ -196,3 +195,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks)))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks)))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/SetEventCallbacks\/setevntcallb002\/setevntcallb002.cpp","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -154,3 +154,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, size))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, size))) {\n@@ -201,3 +199,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks)))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks)))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/SetEventCallbacks\/setevntcallb003\/setevntcallb003.cpp","additions":2,"deletions":6,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -51,2 +51,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetExtensionEvents, jvmti, &extCount, &extList))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetExtensionEvents(&extCount, &extList))) {\n@@ -75,3 +74,1 @@\n-                    NSK_CPP_STUB3(SetExtensionEventCallback, jvmti,\n-                                        extList[i].extension_event_index,\n-                                        callbackExtensionEvent))) {\n+                    jvmti->SetExtensionEventCallback(extList[i].extension_event_index, callbackExtensionEvent))) {\n@@ -84,3 +81,1 @@\n-                    NSK_CPP_STUB3(SetExtensionEventCallback, jvmti,\n-                                        extList[i].extension_event_index,\n-                                        NULL))) {\n+                    jvmti->SetExtensionEventCallback(extList[i].extension_event_index, NULL))) {\n@@ -94,2 +89,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)extList))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)extList))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/SetExtensionEventCallback\/setextevent001\/setextevent001.cpp","additions":4,"deletions":10,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -126,10 +126,1 @@\n-        if (!NSK_VERIFY(\n-                (str = (char *) NSK_CPP_STUB3(\n-                              GetStringUTFChars\n-                              , jni\n-                              , prefix\n-                              , 0\n-                         )\n-                    ) != NULL\n-                )\n-           )\n+        if (!NSK_VERIFY((str = (char *) jni->GetStringUTFChars(prefix, 0)) != NULL))\n@@ -139,8 +130,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(\n-                    SetNativeMethodPrefix\n-                    , jvmti\n-                    , str\n-                    )\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetNativeMethodPrefix(str)))\n@@ -178,10 +162,1 @@\n-        if (!NSK_VERIFY(\n-                (str = (char *) NSK_CPP_STUB3(\n-                              GetStringUTFChars\n-                              , jni\n-                              , prefix\n-                              , 0\n-                         )\n-                    ) != NULL\n-                )\n-           )\n+        if (!NSK_VERIFY((str = (char *) jni->GetStringUTFChars(prefix, 0)) != NULL))\n@@ -190,9 +165,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(\n-                        SetNativeMethodPrefixes\n-                        , jvmti\n-                        , 1\n-                        , (char **) &str\n-                        )\n-                    )\n-           )\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetNativeMethodPrefixes(1, (char **) &str)))\n@@ -208,9 +175,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(\n-                        SetNativeMethodPrefixes\n-                        , jvmti\n-                        , 0\n-                        , (char **)&prefixes\n-                        )\n-                    )\n-           )\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetNativeMethodPrefixes(0, (char **)&prefixes)))\n@@ -253,12 +212,1 @@\n-    if (!NSK_VERIFY(\n-            (method.name =\n-                (char *) NSK_CPP_STUB3(\n-                     GetStringUTFChars\n-                     , jni\n-                     , method_name_obj\n-                     , 0\n-                    )\n-            ) != NULL\n-            )\n-       )\n-    {\n+    if (!NSK_VERIFY((method.name = (char *) jni->GetStringUTFChars(method_name_obj, 0)) != NULL)) {\n@@ -268,12 +216,1 @@\n-    if (!NSK_VERIFY(\n-            (method.signature =\n-                    (char *) NSK_CPP_STUB3(\n-                         GetStringUTFChars\n-                         , jni\n-                         , method_sig_obj\n-                         , 0\n-                    )\n-            ) != NULL\n-            )\n-       )\n-    {\n+    if (!NSK_VERIFY((method.signature = (char *) jni->GetStringUTFChars(method_sig_obj, 0)) != NULL)) {\n@@ -344,7 +281,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(\n-                    GetCapabilities\n-                    , jvmti\n-                    , &caps)\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -356,7 +287,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(\n-                    AddCapabilities\n-                    , jvmti\n-                    , &caps)\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/SetNativeMethodPrefix\/SetNativeMethodPrefix001\/SetNativeMethodPrefix001.cpp","additions":9,"deletions":84,"binary":false,"changes":93,"status":"modified"},{"patch":"@@ -63,7 +63,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(\n-                    SetNativeMethodPrefix\n-                    , jvmti\n-                    , prefix)\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetNativeMethodPrefix(prefix)))\n@@ -117,7 +111,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(\n-                    GetCapabilities\n-                    , jvmti\n-                    , &caps)\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -129,7 +117,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(\n-                    AddCapabilities\n-                    , jvmti\n-                    , &caps)\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/SetNativeMethodPrefix\/SetNativeMethodPrefix002\/SetNativeMethodPrefix002.cpp","additions":3,"deletions":21,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -79,2 +79,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetSystemProperty, jvmti, name, &value))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetSystemProperty(name, &value))) {\n@@ -96,2 +95,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)value))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)value))) {\n@@ -123,2 +121,1 @@\n-                   NSK_CPP_STUB3(SetSystemProperty, jvmti,\n-                     propDescList[i].name, propDescList[i].values[step]))) {\n+                   jvmti->SetSystemProperty(propDescList[i].name, propDescList[i].values[step]))) {\n@@ -129,2 +126,1 @@\n-                   NSK_CPP_STUB3(SetSystemProperty, jvmti,\n-                     propDescList[i].name, propDescList[i].values[step]))) {\n+                   jvmti->SetSystemProperty(propDescList[i].name, propDescList[i].values[step]))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/SetSystemProperty\/setsysprop002\/setsysprop002.cpp","additions":4,"deletions":8,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -59,2 +59,1 @@\n-                NSK_CPP_STUB3(SetSystemProperty, jvmti,\n-                                propDescList[i].name, propDescList[i].value))) {\n+                jvmti->SetSystemProperty(propDescList[i].name, propDescList[i].value))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/SetSystemProperty\/setsysprop003\/setsysprop003.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -64,1 +64,1 @@\n-                    NSK_CPP_STUB2(FindClass, jni, DEBUGEE_CLASS_NAME)) != NULL)) {\n+                    jni->FindClass(DEBUGEE_CLASS_NAME)) != NULL)) {\n@@ -72,2 +72,1 @@\n-                    NSK_CPP_STUB4(GetStaticFieldID, jni, debugeeClass,\n-                                    OBJECT_FIELD_NAME, OBJECT_CLASS_SIG)) != NULL)) {\n+                    jni->GetStaticFieldID(debugeeClass, OBJECT_FIELD_NAME, OBJECT_CLASS_SIG)) != NULL)) {\n@@ -81,2 +80,1 @@\n-                    NSK_CPP_STUB3(GetStaticObjectField, jni, debugeeClass,\n-                                                            objectField)) != NULL)) {\n+                    jni->GetStaticObjectField(debugeeClass, objectField)) != NULL)) {\n@@ -89,2 +87,1 @@\n-            if (!NSK_JNI_VERIFY(jni, (testedObject =\n-                    NSK_CPP_STUB2(NewGlobalRef, jni, testedObject)) != NULL)) {\n+            if (!NSK_JNI_VERIFY(jni, (testedObject = jni->NewGlobalRef(testedObject)) != NULL)) {\n@@ -100,2 +97,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(SetTag, jvmti, testedObject, objectTag))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->SetTag(testedObject, objectTag))) {\n@@ -113,2 +109,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(GetTag, jvmti, testedObject, &tag))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->GetTag(testedObject, &tag))) {\n@@ -143,2 +138,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(GetTag, jvmti, testedObject, &tag))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->GetTag(testedObject, &tag))) {\n@@ -165,1 +159,1 @@\n-            NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testedObject));\n+            NSK_TRACE(jni->DeleteGlobalRef(testedObject));\n@@ -208,2 +202,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/SetTag\/settag001\/settag001.cpp","additions":9,"deletions":16,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -76,3 +76,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetThreadLocalStorage, jvmti,\n-                                        testedThread, (void*)initialStorage))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetThreadLocalStorage(testedThread, (void*)initialStorage))) {\n@@ -93,2 +91,1 @@\n-                NSK_CPP_STUB3(GetThreadLocalStorage, jvmti,\n-                                        testedThread, (void**)&obtainedStorage))) {\n+                jvmti->GetThreadLocalStorage(testedThread, (void**)&obtainedStorage))) {\n@@ -131,1 +128,1 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testedThread));\n+        NSK_TRACE(jni->DeleteGlobalRef(testedThread));\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/SetThreadLocalStorage\/setthrdstor001\/setthrdstor001.cpp","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -69,3 +69,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetThreadLocalStorage, jvmti,\n-                                        NULL, (void*)initialStorage))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetThreadLocalStorage(NULL, (void*)initialStorage))) {\n@@ -85,3 +83,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadLocalStorage, jvmti,\n-                                        NULL, (void**)&obtainedStorage))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadLocalStorage(NULL, (void**)&obtainedStorage))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/SetThreadLocalStorage\/setthrdstor002\/setthrdstor002.cpp","additions":2,"deletions":6,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -123,2 +123,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, thread, &info))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(thread, &info))) {\n@@ -136,3 +135,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(SetThreadLocalStorage, jvmti,\n-                                        NULL, (void*)initialStorage))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->SetThreadLocalStorage(NULL, (void*)initialStorage))) {\n@@ -154,2 +151,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, thread, &info))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(thread, &info))) {\n@@ -171,2 +167,1 @@\n-                        NSK_CPP_STUB3(GetThreadLocalStorage, jvmti,\n-                                            NULL, (void**)&obtainedStorage))) {\n+                        jvmti->GetThreadLocalStorage(NULL, (void**)&obtainedStorage))) {\n@@ -246,2 +241,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti, &callbacks, sizeof(callbacks))))\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/SetThreadLocalStorage\/setthrdstor003\/setthrdstor003.cpp","additions":5,"deletions":11,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -63,2 +63,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-           NSK_CPP_STUB3(GetAllThreads, jvmti, &threads_count, &threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&threads_count, &threads)))\n@@ -76,2 +75,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, threads[i], &info)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(threads[i], &info)))\n@@ -93,2 +91,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads)))\n@@ -109,2 +106,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (cls =\n-            NSK_CPP_STUB2(FindClass, jni, THREAD_DEATH_CLASS_NAME)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (cls = jni->FindClass(THREAD_DEATH_CLASS_NAME)) != NULL))\n@@ -114,2 +110,1 @@\n-            NSK_CPP_STUB4(GetMethodID, jni, cls,\n-                THREAD_DEATH_CTOR_NAME, THREAD_DEATH_CTOR_SIGNATURE)) != NULL))\n+            jni->GetMethodID(cls, THREAD_DEATH_CTOR_NAME, THREAD_DEATH_CTOR_SIGNATURE)) != NULL))\n@@ -118,2 +113,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (threadDeath =\n-            NSK_CPP_STUB3(NewObject, jni, cls, ctor)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (threadDeath = jni->NewObject(cls, ctor)) != NULL))\n@@ -143,2 +137,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(StopThread, jvmti, threadForStop, threadDeath)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->StopThread(threadForStop, threadDeath)))\n@@ -152,2 +145,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(InterruptThread, jvmti, threadForInterrupt)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->InterruptThread(threadForInterrupt)))\n@@ -202,1 +194,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA08\/ma08t001\/ma08t001.cpp","additions":9,"deletions":17,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -59,2 +59,1 @@\n-    if (!NSK_JNI_VERIFY(jni_env, (klass =\n-            NSK_CPP_STUB2(GetObjectClass, jni_env, exception)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni_env, (klass = jni_env->GetObjectClass(exception)) != NULL)) {\n@@ -65,2 +64,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature, jvmti_env,\n-            klass, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(klass, &signature, NULL))) {\n@@ -78,1 +76,1 @@\n-    if (NSK_CPP_STUB3(IsSameObject, jni_env, threadForInterrupt, thread)) {\n+    if (jni_env->IsSameObject(threadForInterrupt, thread)) {\n@@ -86,1 +84,1 @@\n-    } else if (NSK_CPP_STUB3(IsSameObject, jni_env, threadForStop, thread)) {\n+    } else if (jni_env->IsSameObject(threadForStop, thread)) {\n@@ -96,1 +94,1 @@\n-    NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+    jvmti_env->Deallocate((unsigned char*)signature);\n@@ -112,2 +110,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-           NSK_CPP_STUB3(GetAllThreads, jvmti, &threads_count, &threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&threads_count, &threads)))\n@@ -125,2 +122,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, threads[i], &info)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(threads[i], &info)))\n@@ -142,2 +138,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads)))\n@@ -156,2 +151,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (threadForStop =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, threadForStop)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (threadForStop = jni->NewGlobalRef(threadForStop)) != NULL))\n@@ -160,2 +154,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (threadForInterrupt =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, threadForInterrupt)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (threadForInterrupt = jni->NewGlobalRef(threadForInterrupt)) != NULL))\n@@ -165,2 +158,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_EXCEPTION, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_EXCEPTION, NULL)))\n@@ -202,2 +194,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_DISABLE, JVMTI_EVENT_EXCEPTION, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_EXCEPTION, NULL)))\n@@ -206,2 +197,2 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadForStop));\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadForInterrupt));\n+    NSK_TRACE(jni->DeleteGlobalRef(threadForStop));\n+    NSK_TRACE(jni->DeleteGlobalRef(threadForInterrupt));\n@@ -248,1 +239,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA08\/ma08t001\/ma08t001a.cpp","additions":15,"deletions":24,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -61,2 +61,1 @@\n-    if (!NSK_JNI_VERIFY(jni_env, (klass =\n-            NSK_CPP_STUB2(GetObjectClass, jni_env, exception)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni_env, (klass = jni_env->GetObjectClass(exception)) != NULL)) {\n@@ -66,2 +65,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature, jvmti_env,\n-            klass, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(klass, &signature, NULL))) {\n@@ -73,1 +71,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -88,2 +86,1 @@\n-    if (!NSK_JNI_VERIFY(jni_env, (klass =\n-            NSK_CPP_STUB2(GetObjectClass, jni_env, exception)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni_env, (klass = jni_env->GetObjectClass(exception)) != NULL)) {\n@@ -93,2 +90,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature, jvmti_env,\n-            klass, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(klass, &signature, NULL))) {\n@@ -100,1 +96,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -112,2 +108,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_EXCEPTION, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_EXCEPTION, NULL)))\n@@ -115,2 +110,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_EXCEPTION_CATCH, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_EXCEPTION_CATCH, NULL)))\n@@ -125,2 +119,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_DISABLE, JVMTI_EVENT_EXCEPTION, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_EXCEPTION, NULL)))\n@@ -128,2 +121,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_DISABLE, JVMTI_EVENT_EXCEPTION_CATCH, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_EXCEPTION_CATCH, NULL)))\n@@ -181,1 +173,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA10\/ma10t001\/ma10t001.cpp","additions":11,"deletions":19,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -57,2 +57,1 @@\n-    if (!NSK_JNI_VERIFY(jni_env, (klass =\n-            NSK_CPP_STUB2(GetObjectClass, jni_env, exception)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni_env, (klass = jni_env->GetObjectClass(exception)) != NULL)) {\n@@ -62,2 +61,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature, jvmti_env,\n-            klass, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(klass, &signature, NULL))) {\n@@ -69,1 +67,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -80,2 +78,1 @@\n-    if (!NSK_JNI_VERIFY(jni_env, (klass =\n-            NSK_CPP_STUB2(GetObjectClass, jni_env, exception)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni_env, (klass = jni_env->GetObjectClass(exception)) != NULL)) {\n@@ -85,2 +82,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature, jvmti_env,\n-            klass, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(klass, &signature, NULL))) {\n@@ -92,1 +88,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -159,1 +155,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA10\/ma10t001\/ma10t001a.cpp","additions":7,"deletions":11,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -57,2 +57,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &name, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &signature, NULL))) {\n@@ -64,1 +63,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)name);\n@@ -66,1 +65,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -81,2 +80,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-           NSK_CPP_STUB3(GetAllThreads, jvmti, &threads_count, &threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&threads_count, &threads)))\n@@ -94,2 +92,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, threads[i], &info)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(threads[i], &info)))\n@@ -106,2 +103,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (thread =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (thread = jni->NewGlobalRef(thread)) != NULL))\n@@ -111,2 +107,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads)))\n@@ -132,2 +127,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_METHOD_ENTRY, thread)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_METHOD_ENTRY, thread)))\n@@ -147,1 +141,1 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, thread));\n+    NSK_TRACE(jni->DeleteGlobalRef(thread));\n@@ -188,1 +182,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA10\/ma10t002\/ma10t002.cpp","additions":10,"deletions":16,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -54,2 +54,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &name, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &signature, NULL))) {\n@@ -61,1 +60,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)name);\n@@ -63,1 +62,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -125,1 +124,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA10\/ma10t002\/ma10t002a.cpp","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -58,2 +58,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &name, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &signature, NULL))) {\n@@ -65,1 +64,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)name);\n@@ -67,1 +66,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -82,2 +81,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-           NSK_CPP_STUB3(GetAllThreads, jvmti, &threads_count, &threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&threads_count, &threads)))\n@@ -95,2 +93,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, threads[i], &info)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(threads[i], &info)))\n@@ -107,2 +104,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (thread =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (thread = jni->NewGlobalRef(thread)) != NULL))\n@@ -112,2 +108,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads)))\n@@ -133,2 +128,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_METHOD_EXIT, thread)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_METHOD_EXIT, thread)))\n@@ -148,1 +142,1 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, thread));\n+    NSK_TRACE(jni->DeleteGlobalRef(thread));\n@@ -189,1 +183,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA10\/ma10t003\/ma10t003.cpp","additions":10,"deletions":16,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -55,2 +55,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &name, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &signature, NULL))) {\n@@ -62,1 +61,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)name);\n@@ -64,1 +63,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -126,1 +125,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA10\/ma10t003\/ma10t003a.cpp","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -59,2 +59,1 @@\n-    NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-        jvmti_env, JVMTI_DISABLE, JVMTI_EVENT_SINGLE_STEP, NULL));\n+    NSK_JVMTI_VERIFY(jvmti_env->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_SINGLE_STEP, NULL));\n@@ -62,2 +61,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &name, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &signature, NULL))) {\n@@ -70,1 +68,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)name);\n@@ -72,1 +70,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -87,2 +85,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-           NSK_CPP_STUB3(GetAllThreads, jvmti, &threads_count, &threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&threads_count, &threads)))\n@@ -100,2 +97,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, threads[i], &info)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(threads[i], &info)))\n@@ -112,2 +108,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (thread =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (thread = jni->NewGlobalRef(thread)) != NULL))\n@@ -117,2 +112,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads)))\n@@ -138,2 +132,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_SINGLE_STEP, thread)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_SINGLE_STEP, thread)))\n@@ -153,1 +146,1 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, thread));\n+    NSK_TRACE(jni->DeleteGlobalRef(thread));\n@@ -194,1 +187,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA10\/ma10t004\/ma10t004.cpp","additions":11,"deletions":18,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -56,2 +56,1 @@\n-    NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-        jvmti_env, JVMTI_DISABLE, JVMTI_EVENT_SINGLE_STEP, NULL));\n+    NSK_JVMTI_VERIFY(jvmti_env->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_SINGLE_STEP, NULL));\n@@ -59,2 +58,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &name, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &signature, NULL))) {\n@@ -67,1 +65,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)name);\n@@ -69,1 +67,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -131,1 +129,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA10\/ma10t004\/ma10t004a.cpp","additions":5,"deletions":7,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -55,2 +55,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature, jvmti_env,\n-            object_klass, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(object_klass, &signature, NULL))) {\n@@ -62,1 +61,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -118,1 +117,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n@@ -127,2 +126,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_OBJECT_ALLOC, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_VM_OBJECT_ALLOC, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA10\/ma10t005\/ma10t005.cpp","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -55,2 +55,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature, jvmti_env,\n-            object_klass, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(object_klass, &signature, NULL))) {\n@@ -62,1 +61,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -118,1 +117,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA10\/ma10t005\/ma10t005a.cpp","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -57,2 +57,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &name, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &signature, NULL))) {\n@@ -65,1 +64,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)name);\n@@ -67,1 +66,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -84,2 +83,2 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)sig);\n+        jvmti_env->Deallocate((unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)sig);\n@@ -151,1 +150,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n@@ -161,2 +160,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_COMPILED_METHOD_LOAD, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_COMPILED_METHOD_LOAD, NULL)))\n@@ -164,2 +162,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_COMPILED_METHOD_UNLOAD, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_COMPILED_METHOD_UNLOAD, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA10\/ma10t006\/ma10t006.cpp","additions":8,"deletions":11,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -57,2 +57,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &name, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &signature, NULL))) {\n@@ -65,1 +64,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)name);\n@@ -67,1 +66,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -85,2 +84,2 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)sig);\n+        jvmti_env->Deallocate((unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)sig);\n@@ -148,1 +147,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA10\/ma10t006\/ma10t006a.cpp","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -118,1 +118,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n@@ -128,2 +128,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_GARBAGE_COLLECTION_START, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_GARBAGE_COLLECTION_START, NULL)))\n@@ -131,2 +130,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_GARBAGE_COLLECTION_FINISH, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_GARBAGE_COLLECTION_FINISH, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA10\/ma10t007\/ma10t007.cpp","additions":3,"deletions":5,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -118,1 +118,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA10\/ma10t007\/ma10t007a.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -58,2 +58,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetThreadInfo, jvmti_env,\n-            thread, &info))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetThreadInfo(thread, &info))) {\n@@ -75,2 +74,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetThreadInfo, jvmti_env,\n-            thread, &info))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetThreadInfo(thread, &info))) {\n@@ -92,2 +90,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetThreadInfo, jvmti_env,\n-            thread, &info))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetThreadInfo(thread, &info))) {\n@@ -109,2 +106,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetThreadInfo, jvmti_env,\n-            thread, &info))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetThreadInfo(thread, &info))) {\n@@ -192,1 +188,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n@@ -205,2 +201,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_MONITOR_CONTENDED_ENTER, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_MONITOR_CONTENDED_ENTER, NULL)))\n@@ -208,2 +203,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_MONITOR_CONTENDED_ENTERED, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_MONITOR_CONTENDED_ENTERED, NULL)))\n@@ -211,2 +205,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_MONITOR_WAIT, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_MONITOR_WAIT, NULL)))\n@@ -214,2 +207,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_MONITOR_WAITED, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_MONITOR_WAITED, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA10\/ma10t008\/ma10t008.cpp","additions":9,"deletions":17,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -58,2 +58,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetThreadInfo, jvmti_env,\n-            thread, &info))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetThreadInfo(thread, &info))) {\n@@ -75,2 +74,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetThreadInfo, jvmti_env,\n-            thread, &info))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetThreadInfo(thread, &info))) {\n@@ -92,2 +90,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetThreadInfo, jvmti_env,\n-            thread, &info))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetThreadInfo(thread, &info))) {\n@@ -109,2 +106,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetThreadInfo, jvmti_env,\n-            thread, &info))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetThreadInfo(thread, &info))) {\n@@ -192,1 +188,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA10\/ma10t008\/ma10t008a.cpp","additions":5,"deletions":9,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -124,2 +124,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (debugeeClass =\n-            NSK_CPP_STUB2(FindClass, jni, DEBUGEE_CLASS_NAME)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (debugeeClass = jni->FindClass(DEBUGEE_CLASS_NAME)) != NULL))\n@@ -130,2 +129,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni, debugeeClass,\n-                                    THREADS_FIELD_NAME, THREADS_FIELD_SIG)) != NULL))\n+            jni->GetStaticFieldID(debugeeClass, THREADS_FIELD_NAME, THREADS_FIELD_SIG)) != NULL))\n@@ -136,1 +134,1 @@\n-            NSK_CPP_STUB3(GetStaticObjectField, jni, debugeeClass, threadsFieldID)) != NULL))\n+            jni->GetStaticObjectField(debugeeClass, threadsFieldID)) != NULL))\n@@ -141,1 +139,1 @@\n-            NSK_CPP_STUB2(GetArrayLength, jni, threadsArray)) == THREADS_COUNT))\n+            jni->GetArrayLength(threadsArray)) == THREADS_COUNT))\n@@ -147,1 +145,1 @@\n-                NSK_CPP_STUB3(GetObjectArrayElement, jni, threadsArray, i)) != NULL))\n+                jni->GetObjectArrayElement(threadsArray, i)) != NULL))\n@@ -154,1 +152,1 @@\n-                NSK_CPP_STUB2(NewGlobalRef, jni, threadsList[i])) != NULL))\n+                jni->NewGlobalRef(threadsList[i])) != NULL))\n@@ -177,2 +175,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadState, jvmti, threadsList[i], &state))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadState(threadsList[i], &state))) {\n@@ -236,1 +233,1 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsList[i]));\n+        NSK_TRACE(jni->DeleteGlobalRef(threadsList[i]));\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP01\/sp01t001\/sp01t001.cpp","additions":8,"deletions":11,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -158,2 +158,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetAllThreads, jvmti, &allThreadsCount, &allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&allThreadsCount, &allThreadsList)))\n@@ -173,2 +172,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, allThreadsList[i], &threadInfo)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(allThreadsList[i], &threadInfo)))\n@@ -192,2 +190,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)allThreadsList)))\n@@ -211,2 +208,1 @@\n-        if (!NSK_JNI_VERIFY(jni, (threadsList[i] =\n-                NSK_CPP_STUB2(NewGlobalRef, jni, threadsList[i])) != NULL))\n+        if (!NSK_JNI_VERIFY(jni, (threadsList[i] = jni->NewGlobalRef(threadsList[i])) != NULL))\n@@ -228,2 +224,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(SuspendThread, jvmti, threadsList[i])))\n+            if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(threadsList[i])))\n@@ -233,2 +228,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(ResumeThread, jvmti, threadsList[i])))\n+            if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(threadsList[i])))\n@@ -263,2 +257,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(GetThreadState, jvmti, threadsList[i], &state))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->GetThreadState(threadsList[i], &state))) {\n@@ -374,1 +367,1 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsList[i]));\n+        NSK_TRACE(jni->DeleteGlobalRef(threadsList[i]));\n@@ -452,2 +445,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &suspendCaps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&suspendCaps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP01\/sp01t002\/sp01t002.cpp","additions":9,"deletions":17,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -158,2 +158,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetAllThreads, jvmti, &allThreadsCount, &allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&allThreadsCount, &allThreadsList)))\n@@ -173,2 +172,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, allThreadsList[i], &threadInfo)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(allThreadsList[i], &threadInfo)))\n@@ -192,2 +190,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)allThreadsList)))\n@@ -211,2 +208,1 @@\n-        if (!NSK_JNI_VERIFY(jni, (threadsList[i] =\n-                NSK_CPP_STUB2(NewGlobalRef, jni, threadsList[i])) != NULL))\n+        if (!NSK_JNI_VERIFY(jni, (threadsList[i] = jni->NewGlobalRef(threadsList[i])) != NULL))\n@@ -229,3 +225,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(SuspendThreadList, jvmti, THREADS_COUNT,\n-                                                    threadsList, results)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->SuspendThreadList(THREADS_COUNT, threadsList, results)))\n@@ -234,3 +228,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(ResumeThreadList, jvmti, THREADS_COUNT,\n-                                                    threadsList, results)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->ResumeThreadList(THREADS_COUNT, threadsList, results)))\n@@ -276,2 +268,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(GetThreadState, jvmti, threadsList[i], &state))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->GetThreadState(threadsList[i], &state))) {\n@@ -387,1 +378,1 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsList[i]));\n+        NSK_TRACE(jni->DeleteGlobalRef(threadsList[i]));\n@@ -465,2 +456,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &suspendCaps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&suspendCaps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP01\/sp01t003\/sp01t003.cpp","additions":9,"deletions":19,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -150,2 +150,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetAllThreads, jvmti, &allThreadsCount, &allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&allThreadsCount, &allThreadsList)))\n@@ -165,2 +164,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, allThreadsList[i], &threadInfo)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(allThreadsList[i], &threadInfo)))\n@@ -184,2 +182,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)allThreadsList)))\n@@ -204,1 +201,1 @@\n-                NSK_CPP_STUB2(NewGlobalRef, jni, threadsDesc[i].thread)) != NULL))\n+                jni->NewGlobalRef(threadsDesc[i].thread)) != NULL))\n@@ -220,2 +217,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(SuspendThread, jvmti, threadsDesc[i].thread)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(threadsDesc[i].thread)))\n@@ -225,2 +221,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(ResumeThread, jvmti, threadsDesc[i].thread)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(threadsDesc[i].thread)))\n@@ -256,3 +251,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetFrameCount, jvmti,\n-                                    threadsDesc[i].thread, &frameCount))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetFrameCount(threadsDesc[i].thread, &frameCount))) {\n@@ -267,2 +260,1 @@\n-                NSK_CPP_STUB6(GetStackTrace, jvmti, threadsDesc[i].thread,\n-                                    0, MAX_STACK_SIZE, frameStack, &frameStackSize))) {\n+                jvmti->GetStackTrace(threadsDesc[i].thread, 0, MAX_STACK_SIZE, frameStack, &frameStackSize))) {\n@@ -321,1 +313,1 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsDesc[i].thread));\n+        NSK_TRACE(jni->DeleteGlobalRef(threadsDesc[i].thread));\n@@ -399,2 +391,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &suspendCaps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&suspendCaps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP02\/sp02t001\/sp02t001.cpp","additions":10,"deletions":19,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -161,2 +161,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetAllThreads, jvmti, &allThreadsCount, &allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&allThreadsCount, &allThreadsList)))\n@@ -176,2 +175,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, allThreadsList[i], &threadInfo)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(allThreadsList[i], &threadInfo)))\n@@ -195,2 +193,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)allThreadsList)))\n@@ -217,1 +214,1 @@\n-                NSK_CPP_STUB2(GetObjectClass, jni, threadsDesc[i].thread)) != NULL))\n+                jni->GetObjectClass(threadsDesc[i].thread)) != NULL))\n@@ -221,2 +218,1 @@\n-                NSK_CPP_STUB4(GetMethodID, jni, threadsDesc[i].cls,\n-                            threadsDesc[i].methodName, threadsDesc[i].methodSig)) != NULL))\n+                jni->GetMethodID(threadsDesc[i].cls, threadsDesc[i].methodName, threadsDesc[i].methodSig)) != NULL))\n@@ -234,1 +230,1 @@\n-                NSK_CPP_STUB2(NewGlobalRef, jni, threadsDesc[i].thread)) != NULL))\n+                jni->NewGlobalRef(threadsDesc[i].thread)) != NULL))\n@@ -237,1 +233,1 @@\n-                NSK_CPP_STUB2(NewGlobalRef, jni, threadsDesc[i].cls)) != NULL))\n+                jni->NewGlobalRef(threadsDesc[i].cls)) != NULL))\n@@ -253,2 +249,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(SuspendThread, jvmti, threadsDesc[i].thread)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(threadsDesc[i].thread)))\n@@ -258,2 +253,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(ResumeThread, jvmti, threadsDesc[i].thread)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(threadsDesc[i].thread)))\n@@ -288,3 +282,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetFrameCount, jvmti,\n-                                    threadsDesc[i].thread, &frameCount))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetFrameCount(threadsDesc[i].thread, &frameCount))) {\n@@ -299,2 +291,1 @@\n-                NSK_CPP_STUB6(GetStackTrace, jvmti, threadsDesc[i].thread,\n-                                    0, MAX_STACK_SIZE, frameStack, &frameStackSize))) {\n+                jvmti->GetStackTrace(threadsDesc[i].thread, 0, MAX_STACK_SIZE, frameStack, &frameStackSize))) {\n@@ -359,2 +350,2 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsDesc[i].thread));\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsDesc[i].cls));\n+        NSK_TRACE(jni->DeleteGlobalRef(threadsDesc[i].thread));\n+        NSK_TRACE(jni->DeleteGlobalRef(threadsDesc[i].cls));\n@@ -438,2 +429,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &suspendCaps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&suspendCaps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP02\/sp02t002\/sp02t002.cpp","additions":14,"deletions":24,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -162,2 +162,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetAllThreads, jvmti, &allThreadsCount, &allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&allThreadsCount, &allThreadsList)))\n@@ -177,2 +176,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, allThreadsList[i], &threadInfo)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(allThreadsList[i], &threadInfo)))\n@@ -196,2 +194,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)allThreadsList)))\n@@ -218,1 +215,1 @@\n-                NSK_CPP_STUB2(GetObjectClass, jni, threadsDesc[i].thread)) != NULL))\n+                jni->GetObjectClass(threadsDesc[i].thread)) != NULL))\n@@ -222,2 +219,1 @@\n-                NSK_CPP_STUB4(GetMethodID, jni, threadsDesc[i].cls,\n-                            threadsDesc[i].methodName, threadsDesc[i].methodSig)) != NULL))\n+                jni->GetMethodID(threadsDesc[i].cls, threadsDesc[i].methodName, threadsDesc[i].methodSig)) != NULL))\n@@ -235,1 +231,1 @@\n-                NSK_CPP_STUB2(NewGlobalRef, jni, threadsDesc[i].thread)) != NULL))\n+                jni->NewGlobalRef(threadsDesc[i].thread)) != NULL))\n@@ -238,1 +234,1 @@\n-                NSK_CPP_STUB2(NewGlobalRef, jni, threadsDesc[i].cls)) != NULL))\n+                jni->NewGlobalRef(threadsDesc[i].cls)) != NULL))\n@@ -254,2 +250,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(SuspendThread, jvmti, threadsDesc[i].thread)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(threadsDesc[i].thread)))\n@@ -259,2 +254,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(ResumeThread, jvmti, threadsDesc[i].thread)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(threadsDesc[i].thread)))\n@@ -291,3 +285,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetFrameCount, jvmti,\n-                                    threadsDesc[i].thread, &frameCount))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetFrameCount(threadsDesc[i].thread, &frameCount))) {\n@@ -301,2 +293,1 @@\n-                NSK_CPP_STUB6(GetStackTrace, jvmti, threadsDesc[i].thread,\n-                                    0, MAX_STACK_SIZE, frameStack, &frameStackSize))) {\n+                jvmti->GetStackTrace(threadsDesc[i].thread, 0, MAX_STACK_SIZE, frameStack, &frameStackSize))) {\n@@ -322,2 +313,1 @@\n-                    NSK_CPP_STUB5(GetFrameLocation, jvmti, threadsDesc[i].thread,\n-                                                        j, &qMethod, &qLocation))\n+                    jvmti->GetFrameLocation(threadsDesc[i].thread, j, &qMethod, &qLocation))\n@@ -379,2 +369,2 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsDesc[i].thread));\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsDesc[i].cls));\n+        NSK_TRACE(jni->DeleteGlobalRef(threadsDesc[i].thread));\n+        NSK_TRACE(jni->DeleteGlobalRef(threadsDesc[i].cls));\n@@ -457,2 +447,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &suspendCaps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&suspendCaps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP02\/sp02t003\/sp02t003.cpp","additions":15,"deletions":26,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -161,3 +161,2 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(Allocate, jvmti, (threadsCount * sizeof(jthread)),\n-                                                    (unsigned char**)&threadsList[i])))\n+        if (!NSK_JVMTI_VERIFY(jvmti->Allocate(threadsCount * sizeof(jthread),\n+                                              (unsigned char**)&threadsList[i])))\n@@ -172,2 +171,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetAllThreads, jvmti, &allThreadsCount, &allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&allThreadsCount, &allThreadsList)))\n@@ -187,2 +185,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, allThreadsList[i], &threadInfo)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(allThreadsList[i], &threadInfo)))\n@@ -205,2 +202,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)allThreadsList)))\n@@ -229,1 +225,1 @@\n-                    NSK_CPP_STUB2(NewGlobalRef, jni, threadsList[i][j])) != NULL))\n+                    jni->NewGlobalRef(threadsList[i][j])) != NULL))\n@@ -247,2 +243,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(Allocate, jvmti, resultsSize, (unsigned char**)&results))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Allocate(resultsSize, (unsigned char**)&results))) {\n@@ -256,3 +251,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB4(SuspendThreadList, jvmti, threadsCount,\n-                                                        threadsList[i], results)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->SuspendThreadList(threadsCount, threadsList[i], results)))\n@@ -261,3 +254,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB4(ResumeThreadList, jvmti, threadsCount,\n-                                                        threadsList[i], results)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->ResumeThreadList(threadsCount, threadsList[i], results)))\n@@ -280,2 +271,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)results))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)results))) {\n@@ -298,2 +288,1 @@\n-                if (!NSK_JVMTI_VERIFY(\n-                        NSK_CPP_STUB2(SuspendThread, jvmti, threadsList[i][j])))\n+                if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(threadsList[i][j])))\n@@ -303,2 +292,1 @@\n-                if (!NSK_JVMTI_VERIFY(\n-                        NSK_CPP_STUB2(ResumeThread, jvmti, threadsList[i][j])))\n+                if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(threadsList[i][j])))\n@@ -332,2 +320,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(GetThreadState, jvmti, threadsList[i][j], &state))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->GetThreadState(threadsList[i][j], &state))) {\n@@ -376,1 +363,1 @@\n-            NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsList[i][j]));\n+            NSK_TRACE(jni->DeleteGlobalRef(threadsList[i][j]));\n@@ -382,2 +369,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threadsList[i])))\n+        if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threadsList[i])))\n@@ -468,2 +454,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &suspendCaps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&suspendCaps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP03\/sp03t001\/sp03t001.cpp","additions":16,"deletions":31,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -164,3 +164,2 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(Allocate, jvmti, (threadsCount * sizeof(jthread)),\n-                                                    (unsigned char**)&threadsList[i])))\n+        if (!NSK_JVMTI_VERIFY(jvmti->Allocate(threadsCount * sizeof(jthread),\n+                                              (unsigned char**)&threadsList[i])))\n@@ -175,2 +174,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetAllThreads, jvmti, &allThreadsCount, &allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&allThreadsCount, &allThreadsList)))\n@@ -190,2 +188,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, allThreadsList[i], &threadInfo)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(allThreadsList[i], &threadInfo)))\n@@ -208,2 +205,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)allThreadsList)))\n@@ -232,1 +228,1 @@\n-                    NSK_CPP_STUB2(NewGlobalRef, jni, threadsList[i][j])) != NULL))\n+                    jni->NewGlobalRef(threadsList[i][j])) != NULL))\n@@ -250,2 +246,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(Allocate, jvmti, resultsSize, (unsigned char**)&results))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Allocate(resultsSize, (unsigned char**)&results))) {\n@@ -259,3 +254,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB4(SuspendThreadList, jvmti, threadsCount,\n-                                                        threadsList[i], results)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->SuspendThreadList(threadsCount, threadsList[i], results)))\n@@ -264,3 +257,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB4(ResumeThreadList, jvmti, threadsCount,\n-                                                        threadsList[i], results)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->ResumeThreadList(threadsCount, threadsList[i], results)))\n@@ -283,2 +274,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)results))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)results))) {\n@@ -301,2 +291,1 @@\n-                if (!NSK_JVMTI_VERIFY(\n-                        NSK_CPP_STUB2(SuspendThread, jvmti, threadsList[i][j])))\n+                if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(threadsList[i][j])))\n@@ -306,2 +295,1 @@\n-                if (!NSK_JVMTI_VERIFY(\n-                        NSK_CPP_STUB2(ResumeThread, jvmti, threadsList[i][j])))\n+                if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(threadsList[i][j])))\n@@ -335,2 +323,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(GetThreadState, jvmti, threadsList[i][j], &state))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->GetThreadState(threadsList[i][j], &state))) {\n@@ -379,1 +366,1 @@\n-            NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsList[i][j]));\n+            NSK_TRACE(jni->DeleteGlobalRef(threadsList[i][j]));\n@@ -385,2 +372,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threadsList[i])))\n+        if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threadsList[i])))\n@@ -471,2 +457,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &suspendCaps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&suspendCaps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP03\/sp03t002\/sp03t002.cpp","additions":16,"deletions":31,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -161,3 +161,2 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(Allocate, jvmti, (threadsCount * sizeof(jthread)),\n-                                                    (unsigned char**)&threadsList[i])))\n+        if (!NSK_JVMTI_VERIFY(jvmti->Allocate(threadsCount * sizeof(jthread),\n+                                              (unsigned char**)&threadsList[i])))\n@@ -172,2 +171,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetAllThreads, jvmti, &allThreadsCount, &allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&allThreadsCount, &allThreadsList)))\n@@ -187,2 +185,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, allThreadsList[i], &threadInfo)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(allThreadsList[i], &threadInfo)))\n@@ -205,2 +202,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)allThreadsList)))\n@@ -229,1 +225,1 @@\n-                    NSK_CPP_STUB2(NewGlobalRef, jni, threadsList[i][j])) != NULL))\n+                    jni->NewGlobalRef(threadsList[i][j])) != NULL))\n@@ -247,2 +243,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(Allocate, jvmti, resultsSize, (unsigned char**)&results))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Allocate(resultsSize, (unsigned char**)&results))) {\n@@ -256,3 +251,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB4(SuspendThreadList, jvmti, threadsCount,\n-                                                        threadsList[i], results)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->SuspendThreadList(threadsCount, threadsList[i], results)))\n@@ -261,3 +254,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB4(ResumeThreadList, jvmti, threadsCount,\n-                                                        threadsList[i], results)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->ResumeThreadList(threadsCount, threadsList[i], results)))\n@@ -280,2 +271,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)results))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)results))) {\n@@ -298,2 +288,1 @@\n-                if (!NSK_JVMTI_VERIFY(\n-                        NSK_CPP_STUB2(SuspendThread, jvmti, threadsList[i][j])))\n+                if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(threadsList[i][j])))\n@@ -303,2 +292,1 @@\n-                if (!NSK_JVMTI_VERIFY(\n-                        NSK_CPP_STUB2(ResumeThread, jvmti, threadsList[i][j])))\n+                if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(threadsList[i][j])))\n@@ -332,2 +320,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(GetThreadState, jvmti, threadsList[i][j], &state))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->GetThreadState(threadsList[i][j], &state))) {\n@@ -376,1 +363,1 @@\n-            NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsList[i][j]));\n+            NSK_TRACE(jni->DeleteGlobalRef(threadsList[i][j]));\n@@ -382,2 +369,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threadsList[i])))\n+        if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threadsList[i])))\n@@ -468,2 +454,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &suspendCaps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&suspendCaps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP04\/sp04t001\/sp04t001.cpp","additions":16,"deletions":31,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -161,3 +161,2 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(Allocate, jvmti, (threadsCount * sizeof(jthread)),\n-                                                    (unsigned char**)&threadsList[i])))\n+        if (!NSK_JVMTI_VERIFY(jvmti->Allocate(threadsCount * sizeof(jthread),\n+                                              (unsigned char**)&threadsList[i])))\n@@ -172,2 +171,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetAllThreads, jvmti, &allThreadsCount, &allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&allThreadsCount, &allThreadsList)))\n@@ -187,2 +185,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, allThreadsList[i], &threadInfo)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(allThreadsList[i], &threadInfo)))\n@@ -205,2 +202,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)allThreadsList)))\n@@ -229,1 +225,1 @@\n-                    NSK_CPP_STUB2(NewGlobalRef, jni, threadsList[i][j])) != NULL))\n+                    jni->NewGlobalRef(threadsList[i][j])) != NULL))\n@@ -247,2 +243,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(Allocate, jvmti, resultsSize, (unsigned char**)&results))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Allocate(resultsSize, (unsigned char**)&results))) {\n@@ -256,3 +251,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB4(SuspendThreadList, jvmti, threadsCount,\n-                                                        threadsList[i], results)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->SuspendThreadList(threadsCount, threadsList[i], results)))\n@@ -261,3 +254,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB4(ResumeThreadList, jvmti, threadsCount,\n-                                                        threadsList[i], results)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->ResumeThreadList(threadsCount, threadsList[i], results)))\n@@ -280,2 +271,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)results))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)results))) {\n@@ -298,2 +288,1 @@\n-                if (!NSK_JVMTI_VERIFY(\n-                        NSK_CPP_STUB2(SuspendThread, jvmti, threadsList[i][j])))\n+                if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(threadsList[i][j])))\n@@ -303,2 +292,1 @@\n-                if (!NSK_JVMTI_VERIFY(\n-                        NSK_CPP_STUB2(ResumeThread, jvmti, threadsList[i][j])))\n+                if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(threadsList[i][j])))\n@@ -332,2 +320,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(GetThreadState, jvmti, threadsList[i][j], &state))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->GetThreadState(threadsList[i][j], &state))) {\n@@ -376,1 +363,1 @@\n-            NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsList[i][j]));\n+            NSK_TRACE(jni->DeleteGlobalRef(threadsList[i][j]));\n@@ -382,2 +369,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threadsList[i])))\n+        if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threadsList[i])))\n@@ -468,2 +454,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &suspendCaps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&suspendCaps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP04\/sp04t002\/sp04t002.cpp","additions":16,"deletions":31,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -146,3 +146,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(SetEventNotificationMode, jvmti, enable,\n-                                                eventsList[i], NULL))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(enable, eventsList[i], NULL))) {\n@@ -171,2 +169,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (debugeeClass =\n-            NSK_CPP_STUB2(FindClass, jni, DEBUGEE_CLASS_NAME)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (debugeeClass = jni->FindClass(DEBUGEE_CLASS_NAME)) != NULL))\n@@ -177,2 +174,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni, debugeeClass,\n-                                    THREADS_FIELD_NAME, THREADS_FIELD_SIG)) != NULL))\n+            jni->GetStaticFieldID(debugeeClass, THREADS_FIELD_NAME, THREADS_FIELD_SIG)) != NULL))\n@@ -183,1 +179,1 @@\n-            NSK_CPP_STUB3(GetStaticObjectField, jni, debugeeClass, threadsFieldID)) != NULL))\n+            jni->GetStaticObjectField(debugeeClass, threadsFieldID)) != NULL))\n@@ -188,1 +184,1 @@\n-            NSK_CPP_STUB2(GetArrayLength, jni, threadsArray)) == THREADS_COUNT))\n+            jni->GetArrayLength(threadsArray)) == THREADS_COUNT))\n@@ -194,1 +190,1 @@\n-                NSK_CPP_STUB3(GetObjectArrayElement, jni, threadsArray, i)) != NULL))\n+                jni->GetObjectArrayElement(threadsArray, i)) != NULL))\n@@ -201,1 +197,1 @@\n-                NSK_CPP_STUB2(NewGlobalRef, jni, threadsList[i])) != NULL))\n+                jni->NewGlobalRef(threadsList[i])) != NULL))\n@@ -221,2 +217,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetFrameCount, jvmti, thread, &framesCount))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetFrameCount(thread, &framesCount))) {\n@@ -230,2 +225,1 @@\n-            NSK_CPP_STUB6(GetStackTrace, jvmti, thread, 0, MAX_STACK_DEPTH,\n-                                                    stackFrames, &stackDepth))) {\n+            jvmti->GetStackTrace(thread, 0, MAX_STACK_DEPTH, stackFrames, &stackDepth))) {\n@@ -272,1 +266,1 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsList[i]));\n+        NSK_TRACE(jni->DeleteGlobalRef(threadsList[i]));\n@@ -296,1 +290,1 @@\n-        if (NSK_CPP_STUB3(IsSameObject, jni, threadsList[i], thread)) {\n+        if (jni->IsSameObject(threadsList[i], thread)) {\n@@ -323,1 +317,1 @@\n-        if (NSK_CPP_STUB3(IsSameObject, jni, threadsList[i], thread)) {\n+        if (jni->IsSameObject(threadsList[i], thread)) {\n@@ -406,3 +400,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks))))\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP05\/sp05t002\/sp05t002.cpp","additions":13,"deletions":21,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -103,2 +103,1 @@\n-                    NSK_CPP_STUB4(SetEventNotificationMode, jvmti, JVMTI_ENABLE,\n-                                            JVMTI_EVENT_THREAD_START, NULL))) {\n+                    jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_THREAD_START, NULL))) {\n@@ -125,2 +124,1 @@\n-                    NSK_CPP_STUB4(SetEventNotificationMode, jvmti, JVMTI_DISABLE,\n-                                            JVMTI_EVENT_THREAD_START, NULL))) {\n+                    jvmti->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_THREAD_START, NULL))) {\n@@ -155,2 +153,1 @@\n-                    NSK_CPP_STUB4(SetEventNotificationMode, jvmti, JVMTI_ENABLE,\n-                                            JVMTI_EVENT_THREAD_END, NULL))) {\n+                    jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_THREAD_END, NULL))) {\n@@ -177,2 +174,1 @@\n-                    NSK_CPP_STUB4(SetEventNotificationMode, jvmti, JVMTI_DISABLE,\n-                                            JVMTI_EVENT_THREAD_END, NULL))) {\n+                    jvmti->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_THREAD_END, NULL))) {\n@@ -224,2 +220,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(ResumeThread, jvmti, threadsList[i]))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(threadsList[i]))) {\n@@ -246,2 +241,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (debugeeClass =\n-            NSK_CPP_STUB2(FindClass, jni, DEBUGEE_CLASS_NAME)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (debugeeClass = jni->FindClass(DEBUGEE_CLASS_NAME)) != NULL))\n@@ -252,2 +246,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni, debugeeClass,\n-                                    THREADS_FIELD_NAME, THREADS_FIELD_SIG)) != NULL))\n+            jni->GetStaticFieldID(debugeeClass, THREADS_FIELD_NAME, THREADS_FIELD_SIG)) != NULL))\n@@ -258,1 +251,1 @@\n-            NSK_CPP_STUB3(GetStaticObjectField, jni, debugeeClass, threadsFieldID)) != NULL))\n+            jni->GetStaticObjectField(debugeeClass, threadsFieldID)) != NULL))\n@@ -263,1 +256,1 @@\n-            NSK_CPP_STUB2(GetArrayLength, jni, threadsArray)) == THREADS_COUNT))\n+            jni->GetArrayLength(threadsArray)) == THREADS_COUNT))\n@@ -269,1 +262,1 @@\n-                NSK_CPP_STUB3(GetObjectArrayElement, jni, threadsArray, i)) != NULL))\n+                jni->GetObjectArrayElement(threadsArray, i)) != NULL))\n@@ -276,1 +269,1 @@\n-                NSK_CPP_STUB2(NewGlobalRef, jni, threadsList[i])) != NULL))\n+                jni->NewGlobalRef(threadsList[i])) != NULL))\n@@ -296,2 +289,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetFrameCount, jvmti, thread, &framesCount))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetFrameCount(thread, &framesCount))) {\n@@ -305,2 +297,1 @@\n-            NSK_CPP_STUB6(GetStackTrace, jvmti, thread, 0, MAX_STACK_DEPTH,\n-                                                    stackFrames, &stackDepth))) {\n+            jvmti->GetStackTrace(thread, 0, MAX_STACK_DEPTH, stackFrames, &stackDepth))) {\n@@ -358,1 +349,1 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsList[i]));\n+        NSK_TRACE(jni->DeleteGlobalRef(threadsList[i]));\n@@ -382,1 +373,1 @@\n-        if (NSK_CPP_STUB3(IsSameObject, jni, threadsList[i], thread)) {\n+        if (jni->IsSameObject(threadsList[i], thread)) {\n@@ -389,2 +380,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(SuspendThread, jvmti, thread))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(thread))) {\n@@ -417,1 +407,1 @@\n-        if (NSK_CPP_STUB3(IsSameObject, jni, threadsList[i], thread)) {\n+        if (jni->IsSameObject(threadsList[i], thread)) {\n@@ -424,2 +414,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(SuspendThread, jvmti, thread))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(thread))) {\n@@ -507,2 +496,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &suspendCaps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&suspendCaps)))\n@@ -518,3 +506,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks))))\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP05\/sp05t003\/sp05t003.cpp","additions":20,"deletions":34,"binary":false,"changes":54,"status":"modified"},{"patch":"@@ -146,2 +146,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GenerateEvents, jvmti, JVMTI_EVENT_COMPILED_METHOD_LOAD))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GenerateEvents(JVMTI_EVENT_COMPILED_METHOD_LOAD))) {\n@@ -179,2 +178,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetAllThreads, jvmti, &allThreadsCount, &allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&allThreadsCount, &allThreadsList)))\n@@ -193,2 +191,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, allThreadsList[i], &threadInfo)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(allThreadsList[i], &threadInfo)))\n@@ -211,2 +208,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)allThreadsList)))\n@@ -233,1 +229,1 @@\n-                NSK_CPP_STUB2(GetObjectClass, jni, threadsDesc[i].thread)) != NULL))\n+                jni->GetObjectClass(threadsDesc[i].thread)) != NULL))\n@@ -237,2 +233,1 @@\n-                NSK_CPP_STUB4(GetMethodID, jni, threadsDesc[i].cls,\n-                            threadsDesc[i].methodName, threadsDesc[i].methodSig)) != NULL))\n+                jni->GetMethodID(threadsDesc[i].cls, threadsDesc[i].methodName, threadsDesc[i].methodSig)) != NULL))\n@@ -250,1 +245,1 @@\n-                NSK_CPP_STUB2(NewGlobalRef, jni, threadsDesc[i].thread)) != NULL))\n+                jni->NewGlobalRef(threadsDesc[i].thread)) != NULL))\n@@ -253,1 +248,1 @@\n-                NSK_CPP_STUB2(NewGlobalRef, jni, threadsDesc[i].cls)) != NULL))\n+                jni->NewGlobalRef(threadsDesc[i].cls)) != NULL))\n@@ -273,2 +268,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(SuspendThread, jvmti, threadsDesc[i].thread)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(threadsDesc[i].thread)))\n@@ -278,2 +272,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(ResumeThread, jvmti, threadsDesc[i].thread)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(threadsDesc[i].thread)))\n@@ -313,3 +306,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetFrameCount, jvmti,\n-                                    threadsDesc[i].thread, &frameCount))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetFrameCount(threadsDesc[i].thread, &frameCount))) {\n@@ -324,2 +315,1 @@\n-                NSK_CPP_STUB6(GetStackTrace, jvmti, threadsDesc[i].thread,\n-                                    0, MAX_STACK_SIZE, frameStack, &frameStackSize))) {\n+                jvmti->GetStackTrace(threadsDesc[i].thread, 0, MAX_STACK_SIZE, frameStack, &frameStackSize))) {\n@@ -383,2 +373,2 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsDesc[i].thread));\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsDesc[i].cls));\n+        NSK_TRACE(jni->DeleteGlobalRef(threadsDesc[i].thread));\n+        NSK_TRACE(jni->DeleteGlobalRef(threadsDesc[i].cls));\n@@ -517,2 +507,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -527,3 +516,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks))))\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP06\/sp06t001\/sp06t001.cpp","additions":16,"deletions":29,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -146,2 +146,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GenerateEvents, jvmti, JVMTI_EVENT_COMPILED_METHOD_LOAD))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GenerateEvents(JVMTI_EVENT_COMPILED_METHOD_LOAD))) {\n@@ -180,2 +179,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetAllThreads, jvmti, &allThreadsCount, &allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&allThreadsCount, &allThreadsList)))\n@@ -194,2 +192,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, allThreadsList[i], &threadInfo)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(allThreadsList[i], &threadInfo)))\n@@ -212,2 +209,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)allThreadsList)))\n@@ -234,1 +230,1 @@\n-                NSK_CPP_STUB2(GetObjectClass, jni, threadsDesc[i].thread)) != NULL))\n+                jni->GetObjectClass(threadsDesc[i].thread)) != NULL))\n@@ -238,2 +234,1 @@\n-                NSK_CPP_STUB4(GetMethodID, jni, threadsDesc[i].cls,\n-                            threadsDesc[i].methodName, threadsDesc[i].methodSig)) != NULL))\n+                jni->GetMethodID(threadsDesc[i].cls, threadsDesc[i].methodName, threadsDesc[i].methodSig)) != NULL))\n@@ -251,1 +246,1 @@\n-                NSK_CPP_STUB2(NewGlobalRef, jni, threadsDesc[i].thread)) != NULL))\n+                jni->NewGlobalRef(threadsDesc[i].thread)) != NULL))\n@@ -254,1 +249,1 @@\n-                NSK_CPP_STUB2(NewGlobalRef, jni, threadsDesc[i].cls)) != NULL))\n+                jni->NewGlobalRef(threadsDesc[i].cls)) != NULL))\n@@ -274,2 +269,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(SuspendThread, jvmti, threadsDesc[i].thread)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(threadsDesc[i].thread)))\n@@ -279,2 +273,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(ResumeThread, jvmti, threadsDesc[i].thread)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(threadsDesc[i].thread)))\n@@ -313,3 +306,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetFrameCount, jvmti,\n-                                    threadsDesc[i].thread, &frameCount))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetFrameCount(threadsDesc[i].thread, &frameCount))) {\n@@ -324,2 +315,1 @@\n-                NSK_CPP_STUB6(GetStackTrace, jvmti, threadsDesc[i].thread,\n-                                    0, MAX_STACK_SIZE, frameStack, &frameStackSize))) {\n+                jvmti->GetStackTrace(threadsDesc[i].thread, 0, MAX_STACK_SIZE, frameStack, &frameStackSize))) {\n@@ -389,2 +379,2 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsDesc[i].thread));\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsDesc[i].cls));\n+        NSK_TRACE(jni->DeleteGlobalRef(threadsDesc[i].thread));\n+        NSK_TRACE(jni->DeleteGlobalRef(threadsDesc[i].cls));\n@@ -523,2 +513,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -533,3 +522,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks))))\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP06\/sp06t002\/sp06t002.cpp","additions":16,"deletions":29,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -146,2 +146,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GenerateEvents, jvmti, JVMTI_EVENT_COMPILED_METHOD_LOAD))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GenerateEvents(JVMTI_EVENT_COMPILED_METHOD_LOAD))) {\n@@ -180,2 +179,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetAllThreads, jvmti, &allThreadsCount, &allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&allThreadsCount, &allThreadsList)))\n@@ -194,2 +192,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, allThreadsList[i], &threadInfo)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(allThreadsList[i], &threadInfo)))\n@@ -212,2 +209,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)allThreadsList)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)allThreadsList)))\n@@ -234,1 +230,1 @@\n-                NSK_CPP_STUB2(GetObjectClass, jni, threadsDesc[i].thread)) != NULL))\n+                jni->GetObjectClass(threadsDesc[i].thread)) != NULL))\n@@ -238,2 +234,1 @@\n-                NSK_CPP_STUB4(GetMethodID, jni, threadsDesc[i].cls,\n-                            threadsDesc[i].methodName, threadsDesc[i].methodSig)) != NULL))\n+                jni->GetMethodID(threadsDesc[i].cls, threadsDesc[i].methodName, threadsDesc[i].methodSig)) != NULL))\n@@ -251,1 +246,1 @@\n-                NSK_CPP_STUB2(NewGlobalRef, jni, threadsDesc[i].thread)) != NULL))\n+                jni->NewGlobalRef(threadsDesc[i].thread)) != NULL))\n@@ -254,1 +249,1 @@\n-                NSK_CPP_STUB2(NewGlobalRef, jni, threadsDesc[i].cls)) != NULL))\n+                jni->NewGlobalRef(threadsDesc[i].cls)) != NULL))\n@@ -274,2 +269,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(SuspendThread, jvmti, threadsDesc[i].thread)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(threadsDesc[i].thread)))\n@@ -279,2 +273,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(ResumeThread, jvmti, threadsDesc[i].thread)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(threadsDesc[i].thread)))\n@@ -315,3 +308,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetFrameCount, jvmti,\n-                                    threadsDesc[i].thread, &frameCount))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetFrameCount(threadsDesc[i].thread, &frameCount))) {\n@@ -325,2 +316,1 @@\n-                NSK_CPP_STUB6(GetStackTrace, jvmti, threadsDesc[i].thread,\n-                                    0, MAX_STACK_SIZE, frameStack, &frameStackSize))) {\n+                jvmti->GetStackTrace(threadsDesc[i].thread, 0, MAX_STACK_SIZE, frameStack, &frameStackSize))) {\n@@ -346,2 +336,1 @@\n-                    NSK_CPP_STUB5(GetFrameLocation, jvmti, threadsDesc[i].thread,\n-                                        j, &qMethod, &qLocation))\n+                    jvmti->GetFrameLocation(threadsDesc[i].thread, j, &qMethod, &qLocation))\n@@ -408,2 +397,2 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsDesc[i].thread));\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threadsDesc[i].cls));\n+        NSK_TRACE(jni->DeleteGlobalRef(threadsDesc[i].thread));\n+        NSK_TRACE(jni->DeleteGlobalRef(threadsDesc[i].cls));\n@@ -542,2 +531,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -552,3 +540,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks))))\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP06\/sp06t003\/sp06t003.cpp","additions":17,"deletions":31,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -65,2 +65,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-           NSK_CPP_STUB3(GetAllThreads, jvmti, &threads_count, &threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&threads_count, &threads)))\n@@ -78,2 +77,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, threads[i], &info)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(threads[i], &info)))\n@@ -90,2 +88,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(\n-                    Deallocate, jvmti, (unsigned char*)info.name)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)info.name)))\n@@ -97,2 +94,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads)))\n@@ -106,2 +102,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"waitLock\", &waitLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"waitLock\", &waitLock)))\n@@ -117,1 +112,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter, jvmti, waitLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(waitLock)))\n@@ -120,2 +115,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(RawMonitorWait, jvmti, waitLock, millis)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorWait(waitLock, millis)))\n@@ -124,1 +118,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit, jvmti, waitLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(waitLock)))\n@@ -135,2 +129,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName, jvmti,\n-            frameBuffer[frameCount-1-i].method, &name, &signature, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetMethodName(frameBuffer[frameCount-1-i].method, &name, &signature, NULL)))\n@@ -142,1 +135,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)name);\n+        jvmti->Deallocate((unsigned char*)name);\n@@ -144,1 +137,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)signature);\n+        jvmti->Deallocate((unsigned char*)signature);\n@@ -146,2 +139,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName, jvmti,\n-            sampleStack[i].method, &name, &signature, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetMethodName(sampleStack[i].method, &name, &signature, NULL)))\n@@ -153,1 +145,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)name);\n+        jvmti->Deallocate((unsigned char*)name);\n@@ -155,1 +147,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)signature);\n+        jvmti->Deallocate((unsigned char*)signature);\n@@ -165,2 +157,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName, jvmti,\n-            frameBuffer[frameCount-1-i].method, &name, &signature, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetMethodName(frameBuffer[frameCount-1-i].method, &name, &signature, NULL)))\n@@ -172,1 +163,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)name);\n+        jvmti->Deallocate((unsigned char*)name);\n@@ -174,1 +165,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)signature);\n+        jvmti->Deallocate((unsigned char*)signature);\n@@ -176,2 +167,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName, jvmti,\n-            sampleStack[i].method, &name, &signature, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetMethodName(sampleStack[i].method, &name, &signature, NULL)))\n@@ -183,1 +173,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)name);\n+        jvmti->Deallocate((unsigned char*)name);\n@@ -185,1 +175,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)signature);\n+        jvmti->Deallocate((unsigned char*)signature);\n@@ -196,1 +186,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter, jvmti, frameLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(frameLock)))\n@@ -200,3 +190,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB6(GetStackTrace, jvmti, thread,\n-                0, MAX_DEPTH, frameBuffer, &frameCount))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetStackTrace(thread, 0, MAX_DEPTH, frameBuffer, &frameCount))) {\n@@ -231,1 +219,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit, jvmti, frameLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(frameLock)))\n@@ -281,1 +269,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter, jvmti, frameLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(frameLock)))\n@@ -284,2 +272,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetFrameLocation, jvmti, NULL, 1,\n-            &sampleStack[depth].method, &sampleStack[depth].location))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetFrameLocation(NULL, 1, &sampleStack[depth].method, &sampleStack[depth].location))) {\n@@ -292,2 +279,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetFrameLocation, jvmti, NULL, 0,\n-            &sampleStack[depth].method, &sampleStack[depth].location))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetFrameLocation(NULL, 0, &sampleStack[depth].method, &sampleStack[depth].location))) {\n@@ -300,1 +286,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit, jvmti, frameLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(frameLock)))\n@@ -303,2 +289,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (klass = NSK_CPP_STUB2(GetObjectClass,\n-            jni, obj)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (klass = jni->GetObjectClass(obj)) != NULL)) {\n@@ -309,2 +294,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (method = NSK_CPP_STUB4(GetMethodID,\n-            jni, klass, \"fibonacci\", \"(I)I\")) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (method = jni->GetMethodID(klass, \"fibonacci\", \"(I)I\")) != NULL)) {\n@@ -315,1 +299,1 @@\n-    result = NSK_CPP_STUB4(CallIntMethod, jni, obj, method, i);\n+    result = jni->CallIntMethod(obj, method, i);\n@@ -317,1 +301,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter, jvmti, frameLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(frameLock)))\n@@ -323,1 +307,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit, jvmti, frameLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(frameLock)))\n@@ -358,2 +342,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"frameLock\", &frameLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"frameLock\", &frameLock)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP07\/sp07t001\/sp07t001.cpp","additions":33,"deletions":50,"binary":false,"changes":83,"status":"modified"},{"patch":"@@ -69,2 +69,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-           NSK_CPP_STUB3(GetAllThreads, jvmti, &threads_count, &threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&threads_count, &threads)))\n@@ -82,2 +81,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, threads[i], &info)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(threads[i], &info)))\n@@ -94,2 +92,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(\n-                    Deallocate, jvmti, (unsigned char*)info.name)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)info.name)))\n@@ -101,2 +98,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads)))\n@@ -111,2 +107,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (klass =\n-            NSK_CPP_STUB2(GetObjectClass, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (klass = jni->GetObjectClass(thread)) != NULL))\n@@ -116,3 +111,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (fid =\n-            NSK_CPP_STUB4(GetStaticFieldID, jni, klass,\n-                \"MAX_LADDER\", \"I\")) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (fid = jni->GetStaticFieldID(klass, \"MAX_LADDER\", \"I\")) != NULL))\n@@ -121,1 +114,1 @@\n-    MAX_LADDER = NSK_CPP_STUB3(GetStaticIntField, jni, klass, fid);\n+    MAX_LADDER = jni->GetStaticIntField(klass, fid);\n@@ -125,2 +118,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (field =\n-            NSK_CPP_STUB4(GetFieldID, jni, klass, \"depth\", \"I\")) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (field = jni->GetFieldID(klass, \"depth\", \"I\")) != NULL))\n@@ -130,2 +122,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (methodRun =\n-            NSK_CPP_STUB4(GetMethodID, jni, klass, \"run\", \"()V\")) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (methodRun = jni->GetMethodID(klass, \"run\", \"()V\")) != NULL))\n@@ -136,1 +127,1 @@\n-            NSK_CPP_STUB4(GetMethodID, jni, klass, \"catcher\", \"(II)V\")) != NULL))\n+            jni->GetMethodID(klass, \"catcher\", \"(II)V\")) != NULL))\n@@ -140,2 +131,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (methodThrower=\n-            NSK_CPP_STUB4(GetMethodID, jni, klass, \"thrower\", \"(I)V\")) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (methodThrower= jni->GetMethodID(klass, \"thrower\", \"(I)V\")) != NULL))\n@@ -144,2 +134,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"waitLock\", &waitLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"waitLock\", &waitLock)))\n@@ -155,1 +144,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter, jvmti, waitLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(waitLock)))\n@@ -158,2 +147,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(RawMonitorWait, jvmti, waitLock, millis)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorWait(waitLock, millis)))\n@@ -162,1 +150,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit, jvmti, waitLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(waitLock)))\n@@ -173,2 +161,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName, jvmti,\n-            frameBuffer[frameCount-1-i].method, &name, &signature, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetMethodName(frameBuffer[frameCount-1-i].method, &name, &signature, NULL)))\n@@ -180,1 +167,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)name);\n+        jvmti->Deallocate((unsigned char*)name);\n@@ -182,1 +169,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)signature);\n+        jvmti->Deallocate((unsigned char*)signature);\n@@ -192,2 +179,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName, jvmti,\n-            frameBuffer[frameCount-1-i].method, &name, &signature, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetMethodName(frameBuffer[frameCount-1-i].method, &name, &signature, NULL)))\n@@ -199,1 +185,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)name);\n+        jvmti->Deallocate((unsigned char*)name);\n@@ -201,1 +187,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)signature);\n+        jvmti->Deallocate((unsigned char*)signature);\n@@ -203,2 +189,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName, jvmti,\n-            method, &name, &signature, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetMethodName(method, &name, &signature, NULL)))\n@@ -220,1 +205,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(SuspendThread, jvmti, thread)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(thread)))\n@@ -223,1 +208,1 @@\n-    depth = NSK_CPP_STUB3(GetIntField, jni, thread, field);\n+    depth = jni->GetIntField(thread, field);\n@@ -226,3 +211,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB6(GetStackTrace, jvmti, thread,\n-                0, MAX_DEPTH, frameBuffer, &frameCount))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetStackTrace(thread, 0, MAX_DEPTH, frameBuffer, &frameCount))) {\n@@ -232,1 +215,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(ResumeThread, jvmti, thread)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(thread)))\n@@ -325,1 +308,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/sampling\/SP07\/sp07t002\/sp07t002.cpp","additions":27,"deletions":44,"binary":false,"changes":71,"status":"modified"}]}