{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2018, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,2 @@\n- * @run main ThreadPriorities\n+ * @comment Use othervm mode so that we don't capture unrelated threads created by other tests\n+ * @run main\/othervm ThreadPriorities\n@@ -78,1 +79,1 @@\n-        String[] output = new OutputAnalyzer(pb.start()).getOutput().split(\"\\\\n+\");\n+        String[] output = new OutputAnalyzer(pb.start()).getOutput().split(\"\\\\R\");\n@@ -96,2 +97,14 @@\n-        assertEquals(matches, NUMBER_OF_JAVA_PRIORITIES);\n-        assertTrue(failed.isEmpty(), failed.size() + \":\" + failed);\n+        boolean success = false;\n+        try {\n+            assertEquals(matches, NUMBER_OF_JAVA_PRIORITIES);\n+            assertTrue(failed.isEmpty(), failed.size() + \":\" + failed);\n+            success = true;\n+        }\n+        finally {\n+            if (!success) {\n+                System.out.println(\"Failure detected - dumping jstack output:\");\n+                for (String line : output) {\n+                    System.out.println(line);\n+                }\n+            }\n+        }\n","filename":"test\/hotspot\/jtreg\/runtime\/Thread\/ThreadPriorities.java","additions":18,"deletions":5,"binary":false,"changes":23,"status":"modified"}]}