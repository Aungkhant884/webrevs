{"files":[{"patch":"@@ -2337,1 +2337,1 @@\n-                int rs = resizeStamp(n);\n+                int rs = resizeStamp(n) << RESIZE_STAMP_SHIFT;\n@@ -2339,3 +2339,2 @@\n-                    if ((sc >>> RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 ||\n-                        sc == rs + MAX_RESIZERS || (nt = nextTable) == null ||\n-                        transferIndex <= 0)\n+                    if (sc == rs + MAX_RESIZERS || sc == rs + 1 ||\n+                        (nt = nextTable) == null || transferIndex <= 0)\n@@ -2346,2 +2345,1 @@\n-                else if (U.compareAndSetInt(this, SIZECTL, sc,\n-                                             (rs << RESIZE_STAMP_SHIFT) + 2))\n+                else if (U.compareAndSetInt(this, SIZECTL, sc, rs + 2))\n@@ -2361,1 +2359,1 @@\n-            int rs = resizeStamp(tab.length);\n+            int rs = resizeStamp(tab.length) << RESIZE_STAMP_SHIFT;\n@@ -2364,2 +2362,2 @@\n-                if ((sc >>> RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 ||\n-                    sc == rs + MAX_RESIZERS || transferIndex <= 0)\n+                if (sc == rs + MAX_RESIZERS || sc == rs + 1 ||\n+                    transferIndex <= 0)\n","filename":"src\/java.base\/share\/classes\/java\/util\/concurrent\/ConcurrentHashMap.java","additions":7,"deletions":9,"binary":false,"changes":16,"status":"modified"}]}