{"files":[{"patch":"@@ -218,0 +218,13 @@\n+  # For some big multi-core machines with low ulimit -u setting we hit the max\n+  # threads\/process limit. In such a setup the memory\/cores-only-guided\n+  # TEST_JOBS config is insufficient. From experience a concurrency setting of\n+  # 14 works reasonably well for low ulimit values (<= 4096). Thus, use\n+  # divider 4096\/14. For high ulimit -u values this shouldn't make a difference.\n+  ULIMIT_DIVIDER := (4096\/14)\n+  PROC_ULIMIT := -1\n+  ifneq ($(OPENJDK_TARGET_OS), windows)\n+    PROC_ULIMIT := $(shell $(ULIMIT) -u)\n+    ifeq ($(PROC_ULIMIT), unlimited)\n+      PROC_ULIMIT := -1\n+    endif\n+  endif\n@@ -223,0 +236,5 @@\n+      u = $(PROC_ULIMIT); \\\n+      if (u > -1) { \\\n+        u = u \/ $(ULIMIT_DIVIDER); \\\n+        if (u < c) c = u; \\\n+      } \\\n","filename":"make\/RunTests.gmk","additions":18,"deletions":0,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -178,0 +178,1 @@\n+ULIMIT := ulimit\n","filename":"make\/RunTestsPrebuiltSpec.gmk","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -544,0 +544,20 @@\n+###############################################################################\n+# Like BASIC_REQUIRE_PROGS but also allows for bash built-ins\n+# $1: variable to set\n+# $2: executable name (or list of names) to look for\n+# $3: [path]\n+AC_DEFUN([BASIC_REQUIRE_BUILTIN_PROGS],\n+[\n+  BASIC_SETUP_TOOL($1, [AC_PATH_PROGS($1, $2, , $3)])\n+  if test \"x[$]$1\" = x; then\n+    AC_MSG_NOTICE([Required tool $2 not found in PATH, checking built-in])\n+    if help $2 > \/dev\/null 2>&1; then\n+      AC_MSG_NOTICE([Found $2 as shell built-in. Using it])\n+      $1=\"$2\"\n+    else\n+      AC_MSG_ERROR([Required tool $2 also not found as built-in.])\n+    fi\n+  fi\n+  BASIC_CHECK_NONEMPTY($1)\n+])\n+\n@@ -1279,0 +1299,3 @@\n+  if ! test \"x$OPENJDK_TARGET_OS\" = \"xwindows\"; then\n+    BASIC_REQUIRE_BUILTIN_PROGS(ULIMIT, ulimit)\n+  fi\n","filename":"make\/autoconf\/basics.m4","additions":23,"deletions":0,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -765,0 +765,1 @@\n+ULIMIT:=@ULIMIT@\n","filename":"make\/autoconf\/spec.gmk.in","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}