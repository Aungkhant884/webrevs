{"files":[{"patch":"@@ -131,1 +131,0 @@\n-javax\/swing\/dnd\/7171812\/bug7171812.java 8041447 macosx-all\n","filename":"test\/jdk\/ProblemList.txt","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,0 @@\n- * @author Alexander Zuev\n@@ -33,2 +32,9 @@\n-import java.awt.*;\n-import java.awt.dnd.*;\n+import java.awt.BorderLayout;\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.dnd.DnDConstants;\n+import java.awt.dnd.DropTarget;\n+import java.awt.dnd.DropTargetDragEvent;\n+import java.awt.dnd.DropTargetDropEvent;\n+import java.awt.dnd.DropTargetEvent;\n+import java.awt.dnd.DropTargetListener;\n@@ -36,1 +42,3 @@\n-import javax.swing.*;\n+import javax.swing.JFrame;\n+import javax.swing.JScrollPane;\n+import javax.swing.SwingUtilities;\n@@ -43,0 +51,2 @@\n+    static volatile Point pt;\n+    static volatile int height;\n@@ -49,0 +59,4 @@\n+        Robot robot = new Robot();\n+        robot.setAutoDelay(100);\n+        robot.setAutoWaitForIdle(true);\n+\n@@ -56,2 +70,0 @@\n-        Robot robot = new Robot();\n-        robot.setAutoDelay(10);\n@@ -59,4 +71,9 @@\n-        robot.mouseMove(scrollPane.getLocationOnScreen().x + 5, scrollPane.getLocationOnScreen().y + 5);\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n-        for(int offset = 5; offset < scrollPane.getHeight()-20; offset++) {\n-            robot.mouseMove(scrollPane.getLocationOnScreen().x+5, scrollPane.getLocationOnScreen().y+offset);\n+        robot.delay(1000);\n+        SwingUtilities.invokeAndWait(() -> {\n+            pt = scrollPane.getLocationOnScreen();\n+            height = scrollPane.getHeight();\n+        });\n+        robot.mouseMove(pt.x + 5, pt.y + 5);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+        for(int offset = 5; offset < height - 20; offset++) {\n+            robot.mouseMove(pt.x + 5, pt.y + offset);\n@@ -65,1 +82,1 @@\n-            robot.mouseMove(scrollPane.getLocationOnScreen().x+offset, scrollPane.getLocationOnScreen().y+scrollPane.getHeight()-20);\n+            robot.mouseMove(pt.x + offset, pt.y + height - 20);\n@@ -67,1 +84,1 @@\n-        robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n","filename":"test\/jdk\/javax\/swing\/dnd\/7171812\/bug7171812.java","additions":30,"deletions":13,"binary":false,"changes":43,"status":"modified"}]}