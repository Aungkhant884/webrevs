{"files":[{"patch":"@@ -66,1 +66,1 @@\n-    int codepage;\n+    int codepage = 0;\n@@ -72,1 +72,4 @@\n-    if (GetLocaleInfo(lcid,\n+    if (lcid == 0) { \/\/ for sun.jnu.encoding\n+        codepage = GetACP();\n+        _itoa_s(codepage, ret + 2, 14, 10);\n+    } else if (GetLocaleInfo(lcid,\n@@ -74,4 +77,2 @@\n-                      ret+2, 14) == 0) {\n-        codepage = 1252;\n-    } else {\n-        codepage = atoi(ret+2);\n+                      ret + 2, 14) != 0) {\n+        codepage = atoi(ret + 2);\n@@ -671,1 +672,0 @@\n-        LCID systemDefaultLCID = GetSystemDefaultLCID();\n@@ -710,1 +710,4 @@\n-            sprops.sun_jnu_encoding = getEncodingInternal(systemDefaultLCID);\n+            sprops.sun_jnu_encoding = getEncodingInternal(0);\n+            if (sprops.sun_jnu_encoding == NULL) {\n+                sprops.sun_jnu_encoding = \"UTF-8\";\n+            }\n","filename":"src\/java.base\/windows\/native\/libjava\/java_props_md.c","additions":11,"deletions":8,"binary":false,"changes":19,"status":"modified"}]}