{"files":[{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2014, 2019, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2014, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+$(if $(filter $(TOPDIR)\/%, $(SUPPORT_OUTPUTDIR)), $(eval SRC_ZIP_BASE := $(TOPDIR)), $(eval SRC_ZIP_BASE := $(SUPPORT_OUTPUTDIR)))\n@@ -54,1 +55,1 @@\n-    $(eval $d_TARGET := $(SRC_ZIP_WORK_DIR)\/$(patsubst $(TOPDIR)\/%,%,$d)\/$m) \\\n+    $(eval $d_TARGET := $(SRC_ZIP_WORK_DIR)\/$(patsubst $(TOPDIR)\/%,%,$(patsubst $(SUPPORT_OUTPUTDIR)\/%,%,$d))\/$m) \\\n@@ -57,1 +58,1 @@\n-          $$(if $(filter $(TOPDIR)\/%, $d), $$(link-file-relative), $$(link-file-absolute)) \\\n+          $$(if $(filter $(SRC_ZIP_BASE)\/%, $d), $$(link-file-relative), $$(link-file-absolute)) \\\n","filename":"make\/ZipSource.gmk","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -629,1 +629,11 @@\n-define link-file-relative\n+# In msys2 we use mklink \/J because its ln would perform a deep copy of the target.\n+# This inhibits performance and can lead to issues with long paths. With mklink \/J\n+# relative linking does not work, so we handle the link as absolute path.\n+ifeq ($(OPENJDK_BUILD_OS_ENV), windows.msys2)\n+  define link-file-relative\n+\t$(call MakeTargetDir)\n+\t$(RM) '$(call DecodeSpace, $@)'\n+\tcmd \/\/c \"mklink \/J $(call FixPath, $(call DecodeSpace, $@)) $(call FixPath, $(call DecodeSpace, $<))\"\n+  endef\n+else\n+  define link-file-relative\n@@ -633,1 +643,2 @@\n-endef\n+  endef\n+endif\n@@ -635,1 +646,8 @@\n-define link-file-absolute\n+ifeq ($(OPENJDK_BUILD_OS_ENV), windows.msys2)\n+  define link-file-absolute\n+\t$(call MakeTargetDir)\n+\t$(RM) '$(call DecodeSpace, $@)'\n+\tcmd \/\/c \"mklink \/J $(call FixPath, $(call DecodeSpace, $@)) $(call FixPath, $(call DecodeSpace, $<))\"\n+  endef\n+else\n+  define link-file-absolute\n@@ -639,1 +657,2 @@\n-endef\n+  endef\n+endif\n","filename":"make\/common\/MakeBase.gmk","additions":23,"deletions":4,"binary":false,"changes":27,"status":"modified"}]}