{"files":[{"patch":"@@ -2453,0 +2453,12 @@\n+static void print_container_helper(outputStream* st, jlong j, const char* metrics) {\n+  st->print(\"%s: \", metrics);\n+  if (j > 0) {\n+    if (j >= 1024) {\n+      st->print_cr(UINT64_FORMAT \" k\", uint64_t(j) \/ 1024);\n+    } else {\n+      st->print_cr(UINT64_FORMAT, uint64_t(j));\n+    }\n+  } else {\n+    st->print_cr(\"%s\", j == OSCONTAINER_ERROR ? \"not supported\" : \"unlimited\");\n+  }\n+}\n@@ -2509,39 +2521,5 @@\n-  jlong j = OSContainer::memory_limit_in_bytes();\n-  st->print(\"memory_limit_in_bytes: \");\n-  if (j > 0) {\n-    st->print(JLONG_FORMAT \"\\n\", j);\n-  } else {\n-    st->print(\"%s\\n\", j == OSCONTAINER_ERROR ? \"not supported\" : \"unlimited\");\n-  }\n-\n-  j = OSContainer::memory_and_swap_limit_in_bytes();\n-  st->print(\"memory_and_swap_limit_in_bytes: \");\n-  if (j > 0) {\n-    st->print(JLONG_FORMAT \"\\n\", j);\n-  } else {\n-    st->print(\"%s\\n\", j == OSCONTAINER_ERROR ? \"not supported\" : \"unlimited\");\n-  }\n-\n-  j = OSContainer::memory_soft_limit_in_bytes();\n-  st->print(\"memory_soft_limit_in_bytes: \");\n-  if (j > 0) {\n-    st->print(JLONG_FORMAT \"\\n\", j);\n-  } else {\n-    st->print(\"%s\\n\", j == OSCONTAINER_ERROR ? \"not supported\" : \"unlimited\");\n-  }\n-\n-  j = OSContainer::OSContainer::memory_usage_in_bytes();\n-  st->print(\"memory_usage_in_bytes: \");\n-  if (j > 0) {\n-    st->print(JLONG_FORMAT \"\\n\", j);\n-  } else {\n-    st->print(\"%s\\n\", j == OSCONTAINER_ERROR ? \"not supported\" : \"unlimited\");\n-  }\n-\n-  j = OSContainer::OSContainer::memory_max_usage_in_bytes();\n-  st->print(\"memory_max_usage_in_bytes: \");\n-  if (j > 0) {\n-    st->print(JLONG_FORMAT \"\\n\", j);\n-  } else {\n-    st->print(\"%s\\n\", j == OSCONTAINER_ERROR ? \"not supported\" : \"unlimited\");\n-  }\n+  print_container_helper(st, OSContainer::memory_limit_in_bytes(), \"memory_limit_in_bytes\");\n+  print_container_helper(st, OSContainer::memory_and_swap_limit_in_bytes(), \"memory_and_swap_limit_in_bytes\");\n+  print_container_helper(st, OSContainer::memory_soft_limit_in_bytes(), \"memory_soft_limit_in_bytes\");\n+  print_container_helper(st, OSContainer::memory_usage_in_bytes(), \"memory_usage_in_bytes\");\n+  print_container_helper(st, OSContainer::memory_max_usage_in_bytes(), \"memory_max_usage_in_bytes\");\n@@ -2549,1 +2527,1 @@\n-  j = OSContainer::OSContainer::pids_max();\n+  jlong j = OSContainer::pids_max();\n@@ -2557,1 +2535,1 @@\n-  j = OSContainer::OSContainer::pids_current();\n+  j = OSContainer::pids_current();\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":19,"deletions":41,"binary":false,"changes":60,"status":"modified"}]}