{"files":[{"patch":"@@ -52,2 +52,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, st_jvmti, name, &monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->CreateRawMonitor(name, &monitor_ptr))) {\n@@ -58,2 +57,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorEnter(monitor_ptr))) {\n@@ -65,2 +63,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorEnter(monitor_ptr))) {\n@@ -71,2 +68,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(RawMonitorWait, st_jvmti, monitor_ptr, (jlong)100))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorWait(monitor_ptr, (jlong)100))) {\n@@ -76,2 +72,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorNotify, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorNotify(monitor_ptr))) {\n@@ -81,2 +76,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorNotifyAll, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorNotifyAll(monitor_ptr))) {\n@@ -86,2 +80,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorExit(monitor_ptr))) {\n@@ -93,2 +86,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorExit(monitor_ptr))) {\n@@ -99,2 +91,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(DestroyRawMonitor, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->DestroyRawMonitor(monitor_ptr))) {\n@@ -130,6 +121,4 @@\n-                    NSK_CPP_STUB5(IterateOverInstancesOfClass,\n-                        jvmti,\n-                        debugeeClass,\n-                        JVMTI_HEAP_OBJECT_EITHER,\n-                        heapObjectCallback,\n-                        &fakeUserData))) {\n+                    jvmti->IterateOverInstancesOfClass(debugeeClass,\n+                                                       JVMTI_HEAP_OBJECT_EITHER,\n+                                                       heapObjectCallback,\n+                                                       &fakeUserData))) {\n@@ -185,2 +174,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateOverInstancesOfClass\/iterinstcls005\/iterinstcls005.cpp","additions":14,"deletions":26,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -48,2 +48,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(SetEnvironmentLocalStorage, st_jvmti, storage_data ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->SetEnvironmentLocalStorage(storage_data))) {\n@@ -53,2 +52,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetEnvironmentLocalStorage, st_jvmti, &storage_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetEnvironmentLocalStorage(&storage_ptr))) {\n@@ -85,6 +83,4 @@\n-                    NSK_CPP_STUB5(IterateOverInstancesOfClass,\n-                        jvmti,\n-                        debugeeClass,\n-                        JVMTI_HEAP_OBJECT_EITHER,\n-                        heapObjectCallback,\n-                        (void *)storage_data))) {\n+                    jvmti->IterateOverInstancesOfClass(debugeeClass,\n+                                                       JVMTI_HEAP_OBJECT_EITHER,\n+                                                       heapObjectCallback,\n+                                                       (void *) storage_data))) {\n@@ -147,2 +143,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateOverInstancesOfClass\/iterinstcls006\/iterinstcls006.cpp","additions":7,"deletions":12,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -49,2 +49,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetCurrentThreadCpuTimerInfo, st_jvmti, &timer_info1 ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetCurrentThreadCpuTimerInfo(&timer_info1))) {\n@@ -68,2 +67,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetCurrentThreadCpuTime, st_jvmti, &nanos ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetCurrentThreadCpuTime(&nanos))) {\n@@ -74,2 +72,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetTimerInfo, st_jvmti, &timer_info2 ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetTimerInfo(&timer_info2))) {\n@@ -94,2 +91,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetTime, st_jvmti, &nanos ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetTime(&nanos))) {\n@@ -126,6 +122,4 @@\n-                    NSK_CPP_STUB5(IterateOverInstancesOfClass,\n-                        jvmti,\n-                        debugeeClass,\n-                        JVMTI_HEAP_OBJECT_EITHER,\n-                        heapObjectCallback,\n-                        (void *)user_data))) {\n+                    jvmti->IterateOverInstancesOfClass(debugeeClass,\n+                                                       JVMTI_HEAP_OBJECT_EITHER,\n+                                                       heapObjectCallback,\n+                                                       (void *) user_data))) {\n@@ -177,2 +171,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateOverInstancesOfClass\/iterinstcls007\/iterinstcls007.cpp","additions":9,"deletions":16,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -88,2 +88,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (obj =\n-            NSK_CPP_STUB3(GetObjectField, jni, firstObject, firstField)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (obj = jni->GetObjectField(firstObject, firstField)) != NULL)) {\n@@ -95,2 +94,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetTag, jvmti, obj, objTag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(obj, objTag))) {\n@@ -107,1 +105,1 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteLocalRef, jni, obj));\n+    NSK_TRACE(jni->DeleteLocalRef(obj));\n@@ -130,3 +128,2 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(Allocate, jvmti, (*objectsCount * sizeof(ObjectDesc)),\n-                                                    (unsigned char**)objectDescList))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Allocate((*objectsCount * sizeof(ObjectDesc)),\n+                                          (unsigned char**)objectDescList))) {\n@@ -147,2 +144,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (debugeeClass =\n-            NSK_CPP_STUB2(FindClass, jni, DEBUGEE_CLASS_NAME)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (debugeeClass = jni->FindClass(DEBUGEE_CLASS_NAME)) != NULL)) {\n@@ -155,2 +151,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (rootObjectClass =\n-            NSK_CPP_STUB2(FindClass, jni, ROOT_OBJECT_CLASS_NAME)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (rootObjectClass = jni->FindClass(ROOT_OBJECT_CLASS_NAME)) != NULL)) {\n@@ -164,1 +159,1 @@\n-            NSK_CPP_STUB2(FindClass, jni, CHAIN_OBJECT_CLASS_NAME)) != NULL)) {\n+            jni->FindClass(CHAIN_OBJECT_CLASS_NAME)) != NULL)) {\n@@ -171,3 +166,2 @@\n-    if (!NSK_JNI_VERIFY(jni, (objectField =\n-            NSK_CPP_STUB4(GetStaticFieldID, jni, debugeeClass,\n-                            OBJECT_FIELD_NAME, ROOT_OBJECT_CLASS_SIG)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (objectField = jni->GetStaticFieldID(\n+            debugeeClass, OBJECT_FIELD_NAME, ROOT_OBJECT_CLASS_SIG)) != NULL)) {\n@@ -180,3 +174,2 @@\n-    if (!NSK_JNI_VERIFY(jni, (reachableChainField =\n-            NSK_CPP_STUB4(GetFieldID, jni, rootObjectClass,\n-                        REACHABLE_CHAIN_FIELD_NAME, CHAIN_OBJECT_CLASS_SIG)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (reachableChainField = jni->GetFieldID(\n+            rootObjectClass, REACHABLE_CHAIN_FIELD_NAME, CHAIN_OBJECT_CLASS_SIG)) != NULL)) {\n@@ -189,3 +182,2 @@\n-    if (!NSK_JNI_VERIFY(jni, (unreachableChainField =\n-            NSK_CPP_STUB4(GetFieldID, jni, rootObjectClass,\n-                        UNREACHABLE_CHAIN_FIELD_NAME, CHAIN_OBJECT_CLASS_SIG)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (unreachableChainField = jni->GetFieldID(\n+            rootObjectClass, UNREACHABLE_CHAIN_FIELD_NAME, CHAIN_OBJECT_CLASS_SIG)) != NULL)) {\n@@ -199,2 +191,1 @@\n-            NSK_CPP_STUB4(GetFieldID, jni, chainObjectClass,\n-                            TAIL_FIELD_NAME, CHAIN_OBJECT_CLASS_SIG)) != NULL)) {\n+            jni->GetFieldID(chainObjectClass, TAIL_FIELD_NAME, CHAIN_OBJECT_CLASS_SIG)) != NULL)) {\n@@ -208,2 +199,1 @@\n-            NSK_CPP_STUB3(GetStaticObjectField, jni, debugeeClass,\n-                                                    objectField)) != NULL)) {\n+            jni->GetStaticObjectField(debugeeClass, objectField)) != NULL)) {\n@@ -215,2 +205,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (*rootObject =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, *rootObject)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (*rootObject = jni->NewGlobalRef(*rootObject)) != NULL)) {\n@@ -225,2 +214,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetTag, jvmti, *rootObject, rootObjectTag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(*rootObject, rootObjectTag))) {\n@@ -307,1 +295,1 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, rootObject));\n+        NSK_TRACE(jni->DeleteGlobalRef(rootObject));\n@@ -312,2 +300,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)objectDescList))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)objectDescList))) {\n@@ -448,1 +435,1 @@\n-                    NSK_CPP_STUB4(IterateOverObjectsReachableFromObject, jvmti,\n+                    jvmti->IterateOverObjectsReachableFromObject(\n@@ -532,2 +519,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateOverObjectsReachableFromObject\/iterobjreachobj001\/iterobjreachobj001.cpp","additions":22,"deletions":36,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -69,3 +69,2 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(Allocate, st_jvmti, (sizeof(ObjectDesc)),\n-                             (unsigned char**)&objectDescBuf))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->Allocate((sizeof(ObjectDesc)),\n+                                             (unsigned char**)&objectDescBuf))) {\n@@ -94,2 +93,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, st_jvmti, (unsigned char*)objectDescBuf))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->Deallocate((unsigned char*)objectDescBuf))) {\n@@ -126,3 +124,2 @@\n-            if (!NSK_JNI_VERIFY(jni, (objectField =\n-                    NSK_CPP_STUB4(GetStaticFieldID, jni, debugeeClass,\n-                                     objectFieldName, debugeeClassSignature)) != NULL)) {\n+            if (!NSK_JNI_VERIFY(jni, (objectField = jni->GetStaticFieldID(\n+                    debugeeClass, objectFieldName, debugeeClassSignature)) != NULL)) {\n@@ -135,2 +132,1 @@\n-                    NSK_CPP_STUB3(GetStaticObjectField, jni, debugeeClass,\n-                                     objectField)) != NULL)) {\n+                    jni->GetStaticObjectField(debugeeClass, objectField)) != NULL)) {\n@@ -143,6 +139,2 @@\n-                if (!NSK_JVMTI_VERIFY(\n-                        NSK_CPP_STUB4(IterateOverObjectsReachableFromObject,\n-                            jvmti,\n-                            object,\n-                            objectReferenceCallback1,\n-                            &userData))) {\n+                if (!NSK_JVMTI_VERIFY(jvmti->IterateOverObjectsReachableFromObject(\n+                        object, objectReferenceCallback1, &userData))) {\n@@ -164,6 +156,2 @@\n-                if (!NSK_JVMTI_VERIFY(\n-                        NSK_CPP_STUB4(IterateOverObjectsReachableFromObject,\n-                            jvmti,\n-                            object,\n-                            objectReferenceCallback2,\n-                            &userData))) {\n+                if (!NSK_JVMTI_VERIFY(jvmti->IterateOverObjectsReachableFromObject(\n+                        object, objectReferenceCallback2, &userData))) {\n@@ -224,2 +212,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateOverObjectsReachableFromObject\/iterobjreachobj002\/iterobjreachobj002.cpp","additions":11,"deletions":24,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -56,2 +56,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, st_jvmti, name, &monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->CreateRawMonitor(name, &monitor_ptr))) {\n@@ -62,2 +61,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorEnter(monitor_ptr))) {\n@@ -69,2 +67,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorEnter(monitor_ptr))) {\n@@ -75,2 +72,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(RawMonitorWait, st_jvmti, monitor_ptr, (jlong)100))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorWait(monitor_ptr, (jlong)100))) {\n@@ -80,2 +76,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorNotify, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorNotify(monitor_ptr))) {\n@@ -85,2 +80,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorNotifyAll, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorNotifyAll(monitor_ptr))) {\n@@ -90,2 +84,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorExit(monitor_ptr))) {\n@@ -97,2 +90,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorExit(monitor_ptr))) {\n@@ -103,2 +95,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(DestroyRawMonitor, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->DestroyRawMonitor(monitor_ptr))) {\n@@ -134,3 +125,2 @@\n-        if (!NSK_JNI_VERIFY(jni, (objectField =\n-                NSK_CPP_STUB4(GetStaticFieldID, jni, debugeeClass,\n-                                 objectFieldName, debugeeClassSignature)) != NULL)) {\n+        if (!NSK_JNI_VERIFY(jni, (objectField = jni->GetStaticFieldID(\n+                debugeeClass, objectFieldName, debugeeClassSignature)) != NULL)) {\n@@ -143,2 +133,1 @@\n-                NSK_CPP_STUB3(GetStaticObjectField, jni, debugeeClass,\n-                                 objectField)) != NULL)) {\n+                jni->GetStaticObjectField(debugeeClass, objectField)) != NULL)) {\n@@ -151,6 +140,2 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB4(IterateOverObjectsReachableFromObject,\n-                        jvmti,\n-                        object,\n-                        objectReferenceCallback,\n-                        &fakeUserData))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->IterateOverObjectsReachableFromObject(\n+                    object, objectReferenceCallback, &fakeUserData))) {\n@@ -206,2 +191,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateOverObjectsReachableFromObject\/iterobjreachobj003\/iterobjreachobj003.cpp","additions":15,"deletions":31,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -55,2 +55,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(SetEnvironmentLocalStorage, st_jvmti, storage_data ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->SetEnvironmentLocalStorage(storage_data))) {\n@@ -60,2 +59,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetEnvironmentLocalStorage, st_jvmti, &storage_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetEnvironmentLocalStorage(&storage_ptr))) {\n@@ -92,3 +90,2 @@\n-        if (!NSK_JNI_VERIFY(jni, (objectField =\n-                NSK_CPP_STUB4(GetStaticFieldID, jni, debugeeClass,\n-                                 objectFieldName, debugeeClassSignature)) != NULL)) {\n+        if (!NSK_JNI_VERIFY(jni, (objectField = jni->GetStaticFieldID(\n+                debugeeClass, objectFieldName, debugeeClassSignature)) != NULL)) {\n@@ -101,2 +98,1 @@\n-                NSK_CPP_STUB3(GetStaticObjectField, jni, debugeeClass,\n-                                 objectField)) != NULL)) {\n+                jni->GetStaticObjectField(debugeeClass, objectField)) != NULL)) {\n@@ -109,6 +105,2 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB4(IterateOverObjectsReachableFromObject,\n-                        jvmti,\n-                        object,\n-                        objectReferenceCallback,\n-                        &fakeUserData))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->IterateOverObjectsReachableFromObject(\n+                  object, objectReferenceCallback, &fakeUserData))) {\n@@ -176,2 +168,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateOverObjectsReachableFromObject\/iterobjreachobj004\/iterobjreachobj004.cpp","additions":8,"deletions":17,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -55,2 +55,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetCurrentThreadCpuTimerInfo, st_jvmti, &timer_info1 ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetCurrentThreadCpuTimerInfo(&timer_info1))) {\n@@ -74,2 +73,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetCurrentThreadCpuTime, st_jvmti, &nanos ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetCurrentThreadCpuTime(&nanos))) {\n@@ -80,2 +78,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetTimerInfo, st_jvmti, &timer_info2 ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetTimerInfo(&timer_info2))) {\n@@ -100,2 +97,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetTime, st_jvmti, &nanos ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetTime(&nanos))) {\n@@ -134,3 +130,2 @@\n-            if (!NSK_JNI_VERIFY(jni, (objectField =\n-                    NSK_CPP_STUB4(GetStaticFieldID, jni, debugeeClass,\n-                                     objectFieldName, debugeeClassSignature)) != NULL)) {\n+            if (!NSK_JNI_VERIFY(jni, (objectField = jni->GetStaticFieldID(\n+                    debugeeClass, objectFieldName, debugeeClassSignature)) != NULL)) {\n@@ -143,2 +138,1 @@\n-                    NSK_CPP_STUB3(GetStaticObjectField, jni, debugeeClass,\n-                                     objectField)) != NULL)) {\n+                    jni->GetStaticObjectField(debugeeClass, objectField)) != NULL)) {\n@@ -151,6 +145,2 @@\n-                if (!NSK_JVMTI_VERIFY(\n-                        NSK_CPP_STUB4(IterateOverObjectsReachableFromObject,\n-                            jvmti,\n-                            object,\n-                            objectReferenceCallback,\n-                            &user_data))) {\n+                if (!NSK_JVMTI_VERIFY(jvmti->IterateOverObjectsReachableFromObject(\n+                        object, objectReferenceCallback, &user_data))) {\n@@ -208,2 +198,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateOverObjectsReachableFromObject\/iterobjreachobj005\/iterobjreachobj005.cpp","additions":10,"deletions":21,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -90,2 +90,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (obj =\n-            NSK_CPP_STUB3(GetObjectField, jni, firstObject, firstField)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (obj = jni->GetObjectField(firstObject, firstField)) != NULL)) {\n@@ -97,2 +96,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetTag, jvmti, obj, objTag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(obj, objTag))) {\n@@ -110,1 +108,1 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteLocalRef, jni, obj));\n+    NSK_TRACE(jni->DeleteLocalRef(obj));\n@@ -134,3 +132,2 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(Allocate, jvmti, (*objectsCount * sizeof(ObjectDesc)),\n-                                                    (unsigned char**)objectDescList))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Allocate((*objectsCount * sizeof(ObjectDesc)),\n+                                          (unsigned char**)objectDescList))) {\n@@ -151,2 +148,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (debugeeClass =\n-            NSK_CPP_STUB2(FindClass, jni, DEBUGEE_CLASS_NAME)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (debugeeClass = jni->FindClass(DEBUGEE_CLASS_NAME)) != NULL)) {\n@@ -159,2 +155,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (rootObjectClass =\n-            NSK_CPP_STUB2(FindClass, jni, ROOT_OBJECT_CLASS_NAME)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (rootObjectClass = jni->FindClass(ROOT_OBJECT_CLASS_NAME)) != NULL)) {\n@@ -168,1 +163,1 @@\n-            NSK_CPP_STUB2(FindClass, jni, CHAIN_OBJECT_CLASS_NAME)) != NULL)) {\n+            jni->FindClass(CHAIN_OBJECT_CLASS_NAME)) != NULL)) {\n@@ -175,3 +170,2 @@\n-    if (!NSK_JNI_VERIFY(jni, (objectField =\n-            NSK_CPP_STUB4(GetStaticFieldID, jni, debugeeClass,\n-                            OBJECT_FIELD_NAME, ROOT_OBJECT_CLASS_SIG)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (objectField = jni->GetStaticFieldID(\n+            debugeeClass, OBJECT_FIELD_NAME, ROOT_OBJECT_CLASS_SIG)) != NULL)) {\n@@ -184,3 +178,2 @@\n-    if (!NSK_JNI_VERIFY(jni, (reachableChainField =\n-            NSK_CPP_STUB4(GetFieldID, jni, rootObjectClass,\n-                        REACHABLE_CHAIN_FIELD_NAME, CHAIN_OBJECT_CLASS_SIG)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (reachableChainField = jni->GetFieldID(\n+            rootObjectClass, REACHABLE_CHAIN_FIELD_NAME, CHAIN_OBJECT_CLASS_SIG)) != NULL)) {\n@@ -193,3 +186,2 @@\n-    if (!NSK_JNI_VERIFY(jni, (unreachableChainField =\n-            NSK_CPP_STUB4(GetFieldID, jni, rootObjectClass,\n-                        UNREACHABLE_CHAIN_FIELD_NAME, CHAIN_OBJECT_CLASS_SIG)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (unreachableChainField = jni->GetFieldID(\n+            rootObjectClass, UNREACHABLE_CHAIN_FIELD_NAME, CHAIN_OBJECT_CLASS_SIG)) != NULL)) {\n@@ -203,2 +195,1 @@\n-            NSK_CPP_STUB4(GetFieldID, jni, chainObjectClass,\n-                            TAIL_FIELD_NAME, CHAIN_OBJECT_CLASS_SIG)) != NULL)) {\n+            jni->GetFieldID(chainObjectClass, TAIL_FIELD_NAME, CHAIN_OBJECT_CLASS_SIG)) != NULL)) {\n@@ -212,2 +203,1 @@\n-            NSK_CPP_STUB3(GetStaticObjectField, jni, debugeeClass,\n-                                                    objectField)) != NULL)) {\n+            jni->GetStaticObjectField(debugeeClass, objectField)) != NULL)) {\n@@ -291,2 +281,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)objectDescList))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)objectDescList))) {\n@@ -641,3 +630,4 @@\n-                    NSK_CPP_STUB5(IterateOverReachableObjects, jvmti,\n-                                  heapRootCallback, stackReferenceCallback,\n-                                  objectReferenceCallback, &fakeUserData))) {\n+                    jvmti->IterateOverReachableObjects(heapRootCallback,\n+                                                       stackReferenceCallback,\n+                                                       objectReferenceCallback,\n+                                                       &fakeUserData))) {\n@@ -725,2 +715,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateOverReachableObjects\/iterreachobj001\/iterreachobj001.cpp","additions":22,"deletions":33,"binary":false,"changes":55,"status":"modified"},{"patch":"@@ -78,3 +78,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(Allocate, jvmti, (sizeof(ObjectDesc)),\n-                             (unsigned char**)&objectDescBuf))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Allocate((sizeof(ObjectDesc)), (unsigned char**)&objectDescBuf))) {\n@@ -124,2 +122,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)objectDescArr[ind]))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)objectDescArr[ind]))) {\n@@ -159,3 +156,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(Allocate, jvmti, (sizeof(ObjectDesc)),\n-                             (unsigned char**)&objectDescBuf))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Allocate((sizeof(ObjectDesc)), (unsigned char**)&objectDescBuf))) {\n@@ -209,2 +204,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)objectDescArr[ind]))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)objectDescArr[ind]))) {\n@@ -242,3 +236,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(Allocate, jvmti, (sizeof(ObjectDesc)),\n-                             (unsigned char**)&objectDescBuf))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Allocate((sizeof(ObjectDesc)), (unsigned char**)&objectDescBuf))) {\n@@ -290,2 +282,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)objectDescArr[ind]))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)objectDescArr[ind]))) {\n@@ -323,3 +314,2 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(Allocate, jvmti, (sizeof(ObjectDesc)),\n-                                      (unsigned char**)&objectDescBuf))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->Allocate((sizeof(ObjectDesc)),\n+                                                  (unsigned char**)&objectDescBuf))) {\n@@ -334,7 +324,5 @@\n-                if (!NSK_JVMTI_VERIFY(\n-                        NSK_CPP_STUB5(IterateOverReachableObjects,\n-                                      jvmti,\n-                                      heapRootCallbackForFirstObjectsIteration,\n-                                      stackReferenceCallbackForFirstObjectsIteration,\n-                                      objectReferenceCallbackForFirstObjectsIteration,\n-                                      &userData))) {\n+                if (!NSK_JVMTI_VERIFY(jvmti->IterateOverReachableObjects(\n+                        heapRootCallbackForFirstObjectsIteration,\n+                        stackReferenceCallbackForFirstObjectsIteration,\n+                        objectReferenceCallbackForFirstObjectsIteration,\n+                        &userData))) {\n@@ -360,2 +348,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                   NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)objectDescList))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)objectDescList))) {\n@@ -368,3 +355,2 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(Allocate, jvmti, (objectCount * sizeof(ObjectDesc*)),\n-                                      (unsigned char**)&objectDescArr))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->Allocate((objectCount * sizeof(ObjectDesc*)),\n+                                                  (unsigned char**)&objectDescArr))) {\n@@ -376,3 +362,2 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(Allocate, jvmti, (objectCountMax * sizeof(short)),\n-                                      (unsigned char**)&deallocatedFlagsArr))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->Allocate((objectCountMax * sizeof(short)),\n+                                                  (unsigned char**)&deallocatedFlagsArr))) {\n@@ -398,7 +383,5 @@\n-                if (!NSK_JVMTI_VERIFY(\n-                        NSK_CPP_STUB5(IterateOverReachableObjects,\n-                                      jvmti,\n-                                      heapRootCallbackForSecondObjectsIteration,\n-                                      stackReferenceCallbackForSecondObjectsIteration,\n-                                      objectReferenceCallbackForSecondObjectsIteration,\n-                                      &userData))) {\n+                if (!NSK_JVMTI_VERIFY(jvmti->IterateOverReachableObjects(\n+                    heapRootCallbackForSecondObjectsIteration,\n+                    stackReferenceCallbackForSecondObjectsIteration,\n+                    objectReferenceCallbackForSecondObjectsIteration,\n+                    &userData))) {\n@@ -418,2 +401,1 @@\n-                    if (!NSK_JVMTI_VERIFY(\n-                           NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)objectDescArr[ind]))) {\n+                    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)objectDescArr[ind]))) {\n@@ -427,2 +409,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)objectDescArr))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)objectDescArr))) {\n@@ -432,2 +413,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)deallocatedFlagsArr))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)deallocatedFlagsArr))) {\n@@ -475,2 +455,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n@@ -480,2 +459,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -494,2 +472,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks,\n-            jvmti, &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -501,2 +478,3 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_OBJECT_FREE, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_OBJECT_FREE,\n+                                                          NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateOverReachableObjects\/iterreachobj002\/iterreachobj002.cpp","additions":32,"deletions":54,"binary":false,"changes":86,"status":"modified"},{"patch":"@@ -57,2 +57,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, st_jvmti, \"heapRootMonitor\", &monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->CreateRawMonitor(\"heapRootMonitor\", &monitor_ptr))) {\n@@ -63,2 +62,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorEnter(monitor_ptr))) {\n@@ -70,2 +68,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorEnter(monitor_ptr))) {\n@@ -76,2 +73,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(RawMonitorWait, st_jvmti, monitor_ptr, (jlong)1))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorWait(monitor_ptr, (jlong)1))) {\n@@ -81,2 +77,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorNotify, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorNotify(monitor_ptr))) {\n@@ -86,2 +81,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorNotifyAll, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorNotifyAll(monitor_ptr))) {\n@@ -91,2 +85,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorExit(monitor_ptr))) {\n@@ -98,2 +91,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorExit(monitor_ptr))) {\n@@ -104,2 +96,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(DestroyRawMonitor, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->DestroyRawMonitor(monitor_ptr))) {\n@@ -130,2 +121,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, st_jvmti, \"stackRefMonitor\", &monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->CreateRawMonitor(\"stackRefMonitor\", &monitor_ptr))) {\n@@ -136,2 +126,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorEnter(monitor_ptr))) {\n@@ -143,2 +132,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorEnter(monitor_ptr))) {\n@@ -149,2 +137,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(RawMonitorWait, st_jvmti, monitor_ptr, (jlong)1))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorWait(monitor_ptr, (jlong)1))) {\n@@ -154,2 +141,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorNotify, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorNotify(monitor_ptr))) {\n@@ -159,2 +145,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorNotifyAll, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorNotifyAll(monitor_ptr))) {\n@@ -164,2 +149,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorExit(monitor_ptr))) {\n@@ -171,2 +155,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorExit(monitor_ptr))) {\n@@ -177,2 +160,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(DestroyRawMonitor, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->DestroyRawMonitor(monitor_ptr))) {\n@@ -202,2 +184,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, st_jvmti, \"objRefMonitor\", &monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->CreateRawMonitor(\"objRefMonitor\", &monitor_ptr))) {\n@@ -208,2 +189,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorEnter(monitor_ptr))) {\n@@ -215,2 +195,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorEnter(monitor_ptr))) {\n@@ -221,2 +200,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(RawMonitorWait, st_jvmti, monitor_ptr, (jlong)1))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorWait(monitor_ptr, (jlong)1))) {\n@@ -226,2 +204,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorNotify, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorNotify(monitor_ptr))) {\n@@ -231,2 +208,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorNotifyAll, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorNotifyAll(monitor_ptr))) {\n@@ -236,2 +212,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorExit(monitor_ptr))) {\n@@ -243,2 +218,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->RawMonitorExit(monitor_ptr))) {\n@@ -249,2 +223,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(DestroyRawMonitor, st_jvmti, monitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->DestroyRawMonitor(monitor_ptr))) {\n@@ -273,6 +246,4 @@\n-                        NSK_CPP_STUB5(IterateOverReachableObjects,\n-                                      jvmti,\n-                                      heapRootCallback,\n-                                      stackReferenceCallback,\n-                                      objectReferenceCallback,\n-                                      &userData))) {\n+                        jvmti->IterateOverReachableObjects(heapRootCallback,\n+                                                           stackReferenceCallback,\n+                                                           objectReferenceCallback,\n+                                                           &userData))) {\n@@ -336,2 +307,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateOverReachableObjects\/iterreachobj003\/iterreachobj003.cpp","additions":32,"deletions":62,"binary":false,"changes":94,"status":"modified"},{"patch":"@@ -57,2 +57,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(SetEnvironmentLocalStorage, st_jvmti, storage_data ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->SetEnvironmentLocalStorage(storage_data))) {\n@@ -63,2 +62,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetEnvironmentLocalStorage, st_jvmti, &storage_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetEnvironmentLocalStorage(&storage_ptr))) {\n@@ -103,2 +101,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(SetEnvironmentLocalStorage, st_jvmti, storage_data ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->SetEnvironmentLocalStorage(storage_data))) {\n@@ -109,2 +106,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetEnvironmentLocalStorage, st_jvmti, &storage_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetEnvironmentLocalStorage(&storage_ptr))) {\n@@ -148,2 +144,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(SetEnvironmentLocalStorage, st_jvmti, storage_data ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->SetEnvironmentLocalStorage(storage_data))) {\n@@ -154,2 +149,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetEnvironmentLocalStorage, st_jvmti, &storage_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetEnvironmentLocalStorage(&storage_ptr))) {\n@@ -193,6 +187,4 @@\n-                        NSK_CPP_STUB5(IterateOverReachableObjects,\n-                                      jvmti,\n-                                      heapRootCallback,\n-                                      stackReferenceCallback,\n-                                      objectReferenceCallback,\n-                                      &userData))) {\n+                        jvmti->IterateOverReachableObjects(heapRootCallback,\n+                                                           stackReferenceCallback,\n+                                                           objectReferenceCallback,\n+                                                           &userData))) {\n@@ -256,2 +248,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateOverReachableObjects\/iterreachobj004\/iterreachobj004.cpp","additions":11,"deletions":20,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -56,2 +56,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(GetCurrentThreadCpuTimerInfo, st_jvmti, &timer_info1 ))) {\n+        if (!NSK_JVMTI_VERIFY(st_jvmti->GetCurrentThreadCpuTimerInfo(&timer_info1))) {\n@@ -75,2 +74,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(GetCurrentThreadCpuTime, st_jvmti, &nanos ))) {\n+        if (!NSK_JVMTI_VERIFY(st_jvmti->GetCurrentThreadCpuTime(&nanos))) {\n@@ -81,2 +79,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(GetTimerInfo, st_jvmti, &timer_info2 ))) {\n+        if (!NSK_JVMTI_VERIFY(st_jvmti->GetTimerInfo(&timer_info2))) {\n@@ -101,2 +98,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(GetTime, st_jvmti, &nanos ))) {\n+        if (!NSK_JVMTI_VERIFY(st_jvmti->GetTime(&nanos))) {\n@@ -129,2 +125,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(GetCurrentThreadCpuTimerInfo, st_jvmti, &timer_info1 ))) {\n+        if (!NSK_JVMTI_VERIFY(st_jvmti->GetCurrentThreadCpuTimerInfo(&timer_info1))) {\n@@ -148,2 +143,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(GetCurrentThreadCpuTime, st_jvmti, &nanos ))) {\n+        if (!NSK_JVMTI_VERIFY(st_jvmti->GetCurrentThreadCpuTime(&nanos))) {\n@@ -154,2 +148,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(GetTimerInfo, st_jvmti, &timer_info2 ))) {\n+        if (!NSK_JVMTI_VERIFY(st_jvmti->GetTimerInfo(&timer_info2))) {\n@@ -174,2 +167,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(GetTime, st_jvmti, &nanos ))) {\n+        if (!NSK_JVMTI_VERIFY(st_jvmti->GetTime(&nanos))) {\n@@ -199,2 +191,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetCurrentThreadCpuTimerInfo, st_jvmti, &timer_info1 ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetCurrentThreadCpuTimerInfo(&timer_info1))) {\n@@ -218,2 +209,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetCurrentThreadCpuTime, st_jvmti, &nanos ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetCurrentThreadCpuTime(&nanos))) {\n@@ -225,2 +215,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetTimerInfo, st_jvmti, &timer_info2 ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetTimerInfo(&timer_info2))) {\n@@ -245,2 +234,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetTime, st_jvmti, &nanos ))) {\n+    if (!NSK_JVMTI_VERIFY(st_jvmti->GetTime(&nanos))) {\n@@ -268,7 +256,4 @@\n-                if (!NSK_JVMTI_VERIFY(\n-                        NSK_CPP_STUB5(IterateOverReachableObjects,\n-                                      jvmti,\n-                                      heapRootCallback,\n-                                      stackReferenceCallback,\n-                                      objectReferenceCallback,\n-                                      &userData))) {\n+                if (!NSK_JVMTI_VERIFY(jvmti->IterateOverReachableObjects(heapRootCallback,\n+                                                                         stackReferenceCallback,\n+                                                                         objectReferenceCallback,\n+                                                                         &userData))) {\n@@ -333,2 +318,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateOverReachableObjects\/iterreachobj005\/iterreachobj005.cpp","additions":17,"deletions":33,"binary":false,"changes":50,"status":"modified"},{"patch":"@@ -98,2 +98,1 @@\n-  if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateThroughHeap, jvmti,\n-                                     0, NULL, &primitive_callbacks, &invocations))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->IterateThroughHeap(0, NULL, &primitive_callbacks, &invocations))) {\n@@ -142,1 +141,1 @@\n-  if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n@@ -147,3 +146,1 @@\n-  if(!NSK_JVMTI_VERIFY(\n-                       NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                     &event_callbacks, sizeof(jvmtiEventCallbacks)))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&event_callbacks, sizeof(jvmtiEventCallbacks)))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateThroughHeap\/abort\/Abort.cpp","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -371,2 +371,1 @@\n-  if(!NSK_VERIFY(NULL !=\n-                 (debugee = NSK_CPP_STUB2(FindClass, jni, className))))\n+  if(!NSK_VERIFY(NULL != (debugee = jni->FindClass(className))))\n@@ -375,5 +374,1 @@\n-  if(!NSK_VERIFY(NULL !=\n-                 (testObjectsField = NSK_CPP_STUB4(GetStaticFieldID,\n-                                                   jni, debugee,\n-                                                   fieldName,\n-                                                   fieldSig))))\n+  if(!NSK_VERIFY(NULL != (testObjectsField = jni->GetStaticFieldID(debugee, fieldName, fieldSig))))\n@@ -382,4 +377,2 @@\n-  if(!NSK_VERIFY(NULL !=\n-                 (testObjects = (jobjectArray)(NSK_CPP_STUB3(GetStaticObjectField,\n-                                                             jni, debugee,\n-                                                             testObjectsField)))))\n+  if(!NSK_VERIFY(NULL != (testObjects = (jobjectArray)(jni->GetStaticObjectField(\n+          debugee, testObjectsField)))))\n@@ -396,3 +389,1 @@\n-    if(!NSK_VERIFY(NULL !=\n-                   (target = NSK_CPP_STUB3(GetObjectArrayElement,jni,\n-                                           testObjects,object))))\n+    if(!NSK_VERIFY(NULL != (target = jni->GetObjectArrayElement(testObjects, object))))\n@@ -401,2 +392,1 @@\n-    if(!NSK_VERIFY(NULL !=\n-                   (targetClass = NSK_CPP_STUB2(GetObjectClass, jni, target))))\n+    if(!NSK_VERIFY(NULL != (targetClass = jni->GetObjectClass(target))))\n@@ -405,2 +395,1 @@\n-    if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature, jvmti, targetClass,\n-                                       &(objects_info[object].name), NULL)))\n+    if(!NSK_JVMTI_VERIFY(jvmti->GetClassSignature(targetClass, &(objects_info[object].name), NULL)))\n@@ -409,3 +398,2 @@\n-    if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassFields, jvmti, targetClass,\n-                                       &(objects_info[object].fields_count),\n-                                       &targetFields)))\n+    if(!NSK_JVMTI_VERIFY(jvmti->GetClassFields(\n+            targetClass, &(objects_info[object].fields_count), &targetFields)))\n@@ -418,5 +406,5 @@\n-      if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB6(GetFieldName, jvmti,\n-                                         targetClass, targetFields[field],\n-                                         &objects_info[object].fields[field].name,\n-                                         &objects_info[object].fields[field].signature,\n-                                         NULL)))\n+      if(!NSK_JVMTI_VERIFY(jvmti->GetFieldName(targetClass,\n+                                               targetFields[field],\n+                                               &objects_info[object].fields[field].name,\n+                                               &objects_info[object].fields[field].signature,\n+                                               NULL)))\n@@ -430,3 +418,2 @@\n-        if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetFieldModifiers, jvmti,\n-                                           targetClass, targetFields[field],\n-                                           &modifiers))) {\n+        if(!NSK_JVMTI_VERIFY(jvmti->GetFieldModifiers(\n+                targetClass, targetFields[field], &modifiers))) {\n@@ -436,3 +423,2 @@\n-          if(!NSK_VERIFY(NULL != (value = NSK_CPP_STUB3(GetStaticObjectField, jni,\n-                                                        targetClass,\n-                                                        targetFields[field])))) {\n+          if(!NSK_VERIFY(NULL != (value = jni->GetStaticObjectField(targetClass,\n+                                                                    targetFields[field])))) {\n@@ -442,3 +428,1 @@\n-          if(!NSK_VERIFY(NULL != (value = NSK_CPP_STUB3(GetObjectField, jni,\n-                                                        target,\n-                                                        targetFields[field])))) {\n+          if(!NSK_VERIFY(NULL != (value = jni->GetObjectField(target, targetFields[field])))) {\n@@ -449,2 +433,1 @@\n-        if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, value,\n-                                           ENCODE_TAG(tag_type,object,field)))) {\n+        if(!NSK_JVMTI_VERIFY(jvmti->SetTag(value, ENCODE_TAG(tag_type,object,field)))) {\n@@ -454,1 +437,1 @@\n-        NSK_CPP_STUB2(DeleteLocalRef, jni, (jobject)value);\n+        jni->DeleteLocalRef((jobject)value);\n@@ -459,2 +442,1 @@\n-    if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, target,\n-                                       ENCODE_TAG(TAG_TYPE_PRIMITIVE,object,0))))\n+    if(!NSK_JVMTI_VERIFY(jvmti->SetTag(target, ENCODE_TAG(TAG_TYPE_PRIMITIVE,object,0))))\n@@ -462,2 +444,1 @@\n-    if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, targetClass,\n-                                       ENCODE_TAG(TAG_TYPE_PRIMITIVE,object,0))))\n+    if(!NSK_JVMTI_VERIFY(jvmti->SetTag(targetClass, ENCODE_TAG(TAG_TYPE_PRIMITIVE,object,0))))\n@@ -466,1 +447,1 @@\n-    NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)targetFields));\n+    NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)targetFields));\n@@ -468,2 +449,2 @@\n-    NSK_CPP_STUB2(DeleteLocalRef, jni, (jobject)target);\n-    NSK_CPP_STUB2(DeleteLocalRef, jni, (jobject)targetClass);\n+    jni->DeleteLocalRef((jobject)target);\n+    jni->DeleteLocalRef((jobject)targetClass);\n@@ -472,1 +453,1 @@\n-  NSK_CPP_STUB2(DeleteLocalRef, jni, (jobject)testObjects);\n+  jni->DeleteLocalRef((jobject)testObjects);\n@@ -483,2 +464,2 @@\n-      NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)objects_info[object].fields[field].name);\n-      NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)objects_info[object].fields[field].signature);\n+      jvmti->Deallocate((unsigned char*)objects_info[object].fields[field].name);\n+      jvmti->Deallocate((unsigned char*)objects_info[object].fields[field].signature);\n@@ -486,1 +467,1 @@\n-    NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)objects_info[object].name);\n+    jvmti->Deallocate((unsigned char*)objects_info[object].name);\n@@ -556,2 +537,1 @@\n-  if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateThroughHeap, jvmti,\n-                                     0, NULL, &primitive_callbacks, NULL))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->IterateThroughHeap(0, NULL, &primitive_callbacks, NULL))) {\n@@ -574,2 +554,1 @@\n-  if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateThroughHeap, jvmti,\n-                                     0, NULL, &primitive_callbacks, NULL))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->IterateThroughHeap(0, NULL, &primitive_callbacks, NULL))) {\n@@ -621,1 +600,1 @@\n-  if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n@@ -627,3 +606,1 @@\n-  if(!NSK_JVMTI_VERIFY(\n-                       NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                     &event_callbacks, sizeof(jvmtiEventCallbacks)))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&event_callbacks, sizeof(jvmtiEventCallbacks)))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateThroughHeap\/callbacks\/Callbacks.cpp","additions":34,"deletions":57,"binary":false,"changes":91,"status":"modified"},{"patch":"@@ -155,2 +155,1 @@\n-  if(!NSK_VERIFY(NULL !=\n-                 (debugee = NSK_CPP_STUB2(FindClass, jni, className))))\n+  if(!NSK_VERIFY(NULL != (debugee = jni->FindClass(className))))\n@@ -159,5 +158,1 @@\n-  if(!NSK_VERIFY(NULL !=\n-                 (testObjectField = NSK_CPP_STUB4(GetStaticFieldID,\n-                                                   jni, debugee,\n-                                                   fieldName,\n-                                                   fieldSig))))\n+  if(!NSK_VERIFY(NULL != (testObjectField = jni->GetStaticFieldID(debugee, fieldName, fieldSig))))\n@@ -166,4 +161,1 @@\n-  if(!NSK_VERIFY(NULL !=\n-                 (testObject = (NSK_CPP_STUB3(GetStaticObjectField,\n-                                               jni, debugee,\n-                                               testObjectField)))))\n+  if(!NSK_VERIFY(NULL != (testObject = (jni->GetStaticObjectField(debugee, testObjectField)))))\n@@ -172,3 +164,1 @@\n-  if(!NSK_VERIFY(NULL !=\n-                 (testObjectClass = (NSK_CPP_STUB2(GetObjectClass,\n-                                                   jni, testObject)))))\n+  if(!NSK_VERIFY(NULL != (testObjectClass = (jni->GetObjectClass(testObject)))))\n@@ -178,1 +168,1 @@\n-  if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, testObject, TEST_OBJECT_TAG)))\n+  if(!NSK_JVMTI_VERIFY(jvmti->SetTag(testObject, TEST_OBJECT_TAG)))\n@@ -180,1 +170,1 @@\n-  if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, testObjectClass, TEST_OBJECT_TAG)))\n+  if(!NSK_JVMTI_VERIFY(jvmti->SetTag(testObjectClass, TEST_OBJECT_TAG)))\n@@ -183,2 +173,2 @@\n-  NSK_CPP_STUB2(DeleteLocalRef, jni, testObjectClass);\n-  NSK_CPP_STUB2(DeleteLocalRef, jni, testObject);\n+  jni->DeleteLocalRef(testObjectClass);\n+  jni->DeleteLocalRef(testObject);\n@@ -210,1 +200,1 @@\n-  if(!NSK_VERIFY(NULL != (klass = NSK_CPP_STUB2(FindClass,jni,testClassName)))) {\n+  if(!NSK_VERIFY(NULL != (klass = jni->FindClass(testClassName)))) {\n@@ -236,2 +226,1 @@\n-  if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateThroughHeap, jvmti,\n-                                     0, klass, &primitive_callbacks, NULL))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->IterateThroughHeap(0, klass, &primitive_callbacks, NULL))) {\n@@ -254,2 +243,1 @@\n-  if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateThroughHeap, jvmti,\n-                                     0, klass, &primitive_callbacks, NULL))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->IterateThroughHeap(0, klass, &primitive_callbacks, NULL))) {\n@@ -295,1 +283,1 @@\n-  if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n@@ -301,3 +289,1 @@\n-  if(!NSK_JVMTI_VERIFY(\n-                       NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                     &event_callbacks, sizeof(jvmtiEventCallbacks)))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&event_callbacks, sizeof(jvmtiEventCallbacks)))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateThroughHeap\/concrete-klass-filter\/ConcreteKlassFilter.cpp","additions":13,"deletions":27,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -302,2 +302,1 @@\n-  if(!NSK_VERIFY(NULL !=\n-                 (debugee = NSK_CPP_STUB2(FindClass, jni, className))))\n+  if(!NSK_VERIFY(NULL != (debugee = jni->FindClass(className))))\n@@ -306,5 +305,1 @@\n-  if(!NSK_VERIFY(NULL !=\n-                 (testObjectsField = NSK_CPP_STUB4(GetStaticFieldID,\n-                                                   jni, debugee,\n-                                                   fieldName,\n-                                                   fieldSig))))\n+  if(!NSK_VERIFY(NULL != (testObjectsField = jni->GetStaticFieldID(debugee, fieldName, fieldSig))))\n@@ -313,4 +308,2 @@\n-  if(!NSK_VERIFY(NULL !=\n-                 (testObjects = (jobjectArray)(NSK_CPP_STUB3(GetStaticObjectField,\n-                                                             jni, debugee,\n-                                                             testObjectsField)))))\n+  if(!NSK_VERIFY(NULL != (testObjects = (jobjectArray)(jni->GetStaticObjectField(\n+          debugee, testObjectsField)))))\n@@ -328,3 +321,1 @@\n-    if(!NSK_VERIFY(NULL !=\n-                   (target = NSK_CPP_STUB3(GetObjectArrayElement,jni,\n-                                           testObjects,object))))\n+    if(!NSK_VERIFY(NULL != (target = jni->GetObjectArrayElement(testObjects, object))))\n@@ -333,2 +324,1 @@\n-    if(!NSK_VERIFY(NULL !=\n-                   (targetClass = NSK_CPP_STUB2(GetObjectClass, jni, target))))\n+    if(!NSK_VERIFY(NULL != (targetClass = jni->GetObjectClass(target))))\n@@ -337,2 +327,1 @@\n-    if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature, jvmti, targetClass,\n-                                       &(objects_info[object].name), NULL)))\n+    if(!NSK_JVMTI_VERIFY(jvmti->GetClassSignature(targetClass, &(objects_info[object].name), NULL)))\n@@ -341,3 +330,2 @@\n-    if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassFields, jvmti, targetClass,\n-                                       &(objects_info[object].fields_count),\n-                                       &targetFields)))\n+    if(!NSK_JVMTI_VERIFY(jvmti->GetClassFields(\n+            targetClass, &(objects_info[object].fields_count), &targetFields)))\n@@ -353,5 +341,5 @@\n-      if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB6(GetFieldName, jvmti,\n-                                         targetClass, targetFields[field],\n-                                         &objects_info[object].fields[field].name,\n-                                         &objects_info[object].fields[field].signature,\n-                                         NULL)))\n+      if(!NSK_JVMTI_VERIFY(jvmti->GetFieldName(targetClass,\n+                                               targetFields[field],\n+                                               &objects_info[object].fields[field].name,\n+                                               &objects_info[object].fields[field].signature,\n+                                               NULL)))\n@@ -359,3 +347,2 @@\n-      if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetFieldModifiers, jvmti,\n-                                         targetClass, targetFields[field],\n-                                         &modifiers))) {\n+      if(!NSK_JVMTI_VERIFY(jvmti->GetFieldModifiers(\n+              targetClass, targetFields[field], &modifiers))) {\n@@ -370,3 +357,2 @@\n-        if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetFieldModifiers, jvmti,\n-                                           targetClass, targetFields[field],\n-                                           &modifiers))) {\n+        if(!NSK_JVMTI_VERIFY(jvmti->GetFieldModifiers(\n+                targetClass, targetFields[field], &modifiers))) {\n@@ -376,3 +362,2 @@\n-          if(!NSK_VERIFY(NULL != (value = NSK_CPP_STUB3(GetStaticObjectField, jni,\n-                                                        targetClass,\n-                                                        targetFields[field])))) {\n+          if(!NSK_VERIFY(NULL != (value = jni->GetStaticObjectField(\n+                  targetClass, targetFields[field])))) {\n@@ -382,3 +367,1 @@\n-          if(!NSK_VERIFY(NULL != (value = NSK_CPP_STUB3(GetObjectField, jni,\n-                                                        target,\n-                                                        targetFields[field])))) {\n+          if(!NSK_VERIFY(NULL != (value = jni->GetObjectField(target, targetFields[field])))) {\n@@ -389,2 +372,1 @@\n-          if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, value,\n-                                             ENCODE_TAG(FIELD_TAG,object,field)))) {\n+          if(!NSK_JVMTI_VERIFY(jvmti->SetTag(value, ENCODE_TAG(FIELD_TAG,object,field)))) {\n@@ -394,1 +376,1 @@\n-        NSK_CPP_STUB2(DeleteLocalRef, jni, value);\n+        jni->DeleteLocalRef(value);\n@@ -406,2 +388,1 @@\n-      if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, target,\n-                                         ENCODE_TAG(OBJECT_TAG,object,0))))\n+      if(!NSK_JVMTI_VERIFY(jvmti->SetTag(target, ENCODE_TAG(OBJECT_TAG,object,0))))\n@@ -409,2 +390,1 @@\n-      if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, targetClass,\n-                                         ENCODE_TAG(CLASS_TAG,object,0))))\n+      if(!NSK_JVMTI_VERIFY(jvmti->SetTag(targetClass, ENCODE_TAG(CLASS_TAG,object,0))))\n@@ -414,3 +394,3 @@\n-    NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)targetFields));\n-    NSK_CPP_STUB2(DeleteLocalRef, jni, target);\n-    NSK_CPP_STUB2(DeleteLocalRef, jni, targetClass);\n+    NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)targetFields));\n+    jni->DeleteLocalRef(target);\n+    jni->DeleteLocalRef(targetClass);\n@@ -419,1 +399,1 @@\n-  NSK_CPP_STUB2(DeleteLocalRef, jni, testObjects);\n+  jni->DeleteLocalRef(testObjects);\n@@ -431,4 +411,2 @@\n-      NSK_CPP_STUB2(Deallocate, jvmti,\n-                    (unsigned char*)objects_info[object].fields[field].name);\n-      NSK_CPP_STUB2(Deallocate, jvmti,\n-                    (unsigned char*)objects_info[object].fields[field].signature);\n+      jvmti->Deallocate((unsigned char*)objects_info[object].fields[field].name);\n+      jvmti->Deallocate((unsigned char*)objects_info[object].fields[field].signature);\n@@ -436,1 +414,1 @@\n-    NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)objects_info[object].name);\n+    jvmti->Deallocate((unsigned char*)objects_info[object].name);\n@@ -497,2 +475,1 @@\n-  if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateThroughHeap, jvmti,\n-                                     filter_type, NULL, &primitive_callbacks, NULL))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->IterateThroughHeap(filter_type, NULL, &primitive_callbacks, NULL))) {\n@@ -515,2 +492,1 @@\n-  if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateThroughHeap, jvmti,\n-                                     filter_type, NULL, &primitive_callbacks, NULL))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->IterateThroughHeap(filter_type, NULL, &primitive_callbacks, NULL))) {\n@@ -529,3 +505,1 @@\n-  if(!NSK_JVMTI_VERIFY(\n-                       NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                     &event_callbacks, sizeof(jvmtiEventCallbacks)))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&event_callbacks, sizeof(jvmtiEventCallbacks)))) {\n@@ -589,1 +563,1 @@\n-  if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n@@ -595,3 +569,1 @@\n-  if(!NSK_JVMTI_VERIFY(\n-                       NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                     &event_callbacks, sizeof(jvmtiEventCallbacks)))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&event_callbacks, sizeof(jvmtiEventCallbacks)))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateThroughHeap\/filter-tagged\/HeapFilter.cpp","additions":37,"deletions":65,"binary":false,"changes":102,"status":"modified"},{"patch":"@@ -159,1 +159,1 @@\n-    if(!NSK_VERIFY(NULL != (klass = NSK_CPP_STUB2(FindClass, jni, types[i])))) {\n+    if(!NSK_VERIFY(NULL != (klass = jni->FindClass(types[i])))) {\n@@ -165,2 +165,1 @@\n-    if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateThroughHeap, jvmti,\n-                                       0, klass, &primitive_callbacks, NULL))) {\n+    if(!NSK_JVMTI_VERIFY(jvmti->IterateThroughHeap(0, klass, &primitive_callbacks, NULL))) {\n@@ -174,1 +173,1 @@\n-  if(!NSK_VERIFY(NULL != (klass = NSK_CPP_STUB2(FindClass, jni, \"java\/lang\/Class\")))) {\n+  if(!NSK_VERIFY(NULL != (klass = jni->FindClass(\"java\/lang\/Class\")))) {\n@@ -179,2 +178,1 @@\n-  if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateThroughHeap, jvmti,\n-                                     0, klass, &primitive_callbacks, NULL))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->IterateThroughHeap(0, klass, &primitive_callbacks, NULL))) {\n@@ -225,1 +223,1 @@\n-  if(!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n@@ -230,3 +228,1 @@\n-  if(!NSK_JVMTI_VERIFY(\n-                       NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                     &event_callbacks, sizeof(jvmtiEventCallbacks)))) {\n+  if(!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&event_callbacks, sizeof(jvmtiEventCallbacks)))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/IterateThroughHeap\/non-concrete-klass-filter\/NonConcreteKlassFilter.cpp","additions":6,"deletions":10,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -58,2 +58,2 @@\n-    if (NSK_CPP_STUB3(IsSameObject, jni, thread, thr) &&\n-        NSK_CPP_STUB3(IsSameObject, jni, object, obj))\n+    if (jni->IsSameObject(thread, thr) &&\n+        jni->IsSameObject(object, obj))\n@@ -77,2 +77,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-           NSK_CPP_STUB3(GetAllThreads, jvmti, &threads_count, &threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&threads_count, &threads)))\n@@ -90,2 +89,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, threads[i], &info)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(threads[i], &info)))\n@@ -103,2 +101,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads)))\n@@ -113,2 +110,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (thread =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (thread = jni->NewGlobalRef(thread)) != NULL))\n@@ -118,2 +114,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (klass =\n-            NSK_CPP_STUB2(GetObjectClass, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (klass = jni->GetObjectClass(thread)) != NULL))\n@@ -124,2 +119,1 @@\n-            NSK_CPP_STUB4(GetFieldID, jni, klass,\n-                \"endingMonitor\", \"Ljava\/lang\/Object;\")) != NULL))\n+            jni->GetFieldID(klass, \"endingMonitor\", \"Ljava\/lang\/Object;\")) != NULL))\n@@ -129,2 +123,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (object =\n-            NSK_CPP_STUB3(GetObjectField, jni, thread, field)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (object = jni->GetObjectField(thread, field)) != NULL))\n@@ -134,2 +127,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (object =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, object)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (object = jni->NewGlobalRef(object)) != NULL))\n@@ -139,3 +131,3 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(SetEventNotificationMode, jvmti, JVMTI_ENABLE,\n-                JVMTI_EVENT_MONITOR_CONTENDED_ENTER, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_MONITOR_CONTENDED_ENTER,\n+                                                          NULL)))\n@@ -150,3 +142,3 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(SetEventNotificationMode, jvmti, JVMTI_DISABLE,\n-                JVMTI_EVENT_MONITOR_CONTENDED_ENTER, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_DISABLE,\n+                                                          JVMTI_EVENT_MONITOR_CONTENDED_ENTER,\n+                                                          NULL)))\n@@ -231,2 +223,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetPotentialCapabilities, jvmti,&caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetPotentialCapabilities(&caps)))\n@@ -235,1 +226,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -238,1 +229,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities, jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -246,3 +237,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/MonitorContendedEnter\/mcontenter001\/mcontenter001.cpp","additions":20,"deletions":31,"binary":false,"changes":51,"status":"modified"},{"patch":"@@ -60,2 +60,2 @@\n-    if (NSK_CPP_STUB3(IsSameObject, jni, thread, thr) &&\n-        NSK_CPP_STUB3(IsSameObject, jni, object, obj))\n+    if (jni->IsSameObject(thread, thr) &&\n+        jni->IsSameObject(object, obj))\n@@ -77,2 +77,2 @@\n-    if (NSK_CPP_STUB3(IsSameObject, jni, thread, thr) &&\n-        NSK_CPP_STUB3(IsSameObject, jni, object, obj))\n+    if (jni->IsSameObject(thread, thr) &&\n+        jni->IsSameObject(object, obj))\n@@ -97,2 +97,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-           NSK_CPP_STUB3(GetAllThreads, jvmti, &threads_count, &threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&threads_count, &threads)))\n@@ -110,2 +109,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, threads[i], &info)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(threads[i], &info)))\n@@ -123,2 +121,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads)))\n@@ -133,2 +130,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (thread =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (thread = jni->NewGlobalRef(thread)) != NULL))\n@@ -138,2 +134,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (klass =\n-            NSK_CPP_STUB2(GetObjectClass, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (klass = jni->GetObjectClass(thread)) != NULL))\n@@ -144,2 +139,1 @@\n-            NSK_CPP_STUB4(GetFieldID, jni, klass,\n-                \"endingMonitor\", \"Ljava\/lang\/Object;\")) != NULL))\n+            jni->GetFieldID(klass, \"endingMonitor\", \"Ljava\/lang\/Object;\")) != NULL))\n@@ -149,2 +143,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (object =\n-            NSK_CPP_STUB3(GetObjectField, jni, thread, field)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (object = jni->GetObjectField(thread, field)) != NULL))\n@@ -154,2 +147,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (object =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, object)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (object = jni->NewGlobalRef(object)) != NULL))\n@@ -159,3 +151,3 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(SetEventNotificationMode, jvmti, JVMTI_ENABLE,\n-                JVMTI_EVENT_MONITOR_CONTENDED_ENTERED, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_MONITOR_CONTENDED_ENTERED,\n+                                                          NULL)))\n@@ -165,3 +157,3 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(SetEventNotificationMode, jvmti, JVMTI_ENABLE,\n-                JVMTI_EVENT_MONITOR_CONTENDED_ENTER, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_MONITOR_CONTENDED_ENTER,\n+                                                          NULL)))\n@@ -176,3 +168,3 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(SetEventNotificationMode, jvmti, JVMTI_DISABLE,\n-                JVMTI_EVENT_MONITOR_CONTENDED_ENTERED, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_DISABLE,\n+                                                          JVMTI_EVENT_MONITOR_CONTENDED_ENTERED,\n+                                                          NULL)))\n@@ -257,2 +249,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetPotentialCapabilities, jvmti,&caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetPotentialCapabilities(&caps)))\n@@ -261,1 +252,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -264,1 +255,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities, jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -274,3 +265,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/MonitorContendedEntered\/mcontentered001\/mcontentered001.cpp","additions":25,"deletions":36,"binary":false,"changes":61,"status":"modified"},{"patch":"@@ -58,2 +58,2 @@\n-    if (NSK_CPP_STUB3(IsSameObject, jni, thread, thr) &&\n-            NSK_CPP_STUB3(IsSameObject, jni, object, obj)) {\n+    if (jni->IsSameObject(thread, thr) &&\n+            jni->IsSameObject(object, obj)) {\n@@ -82,2 +82,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-           NSK_CPP_STUB3(GetAllThreads, jvmti, &threads_count, &threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&threads_count, &threads)))\n@@ -95,2 +94,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, threads[i], &info)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(threads[i], &info)))\n@@ -108,2 +106,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads)))\n@@ -118,2 +115,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (thread =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (thread = jni->NewGlobalRef(thread)) != NULL))\n@@ -123,2 +119,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (klass =\n-            NSK_CPP_STUB2(GetObjectClass, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (klass = jni->GetObjectClass(thread)) != NULL))\n@@ -129,2 +124,1 @@\n-            NSK_CPP_STUB4(GetFieldID, jni, klass,\n-                \"waitingMonitor\", \"Ljava\/lang\/Object;\")) != NULL))\n+            jni->GetFieldID(klass, \"waitingMonitor\", \"Ljava\/lang\/Object;\")) != NULL))\n@@ -134,2 +128,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (object =\n-            NSK_CPP_STUB3(GetObjectField, jni, thread, field)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (object = jni->GetObjectField(thread, field)) != NULL))\n@@ -139,2 +132,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (object =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, object)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (object = jni->NewGlobalRef(object)) != NULL))\n@@ -145,2 +137,1 @@\n-            NSK_CPP_STUB4(SetEventNotificationMode, jvmti, JVMTI_ENABLE,\n-                JVMTI_EVENT_MONITOR_WAIT, NULL)))\n+            jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_MONITOR_WAIT, NULL)))\n@@ -156,2 +147,1 @@\n-            NSK_CPP_STUB4(SetEventNotificationMode, jvmti, JVMTI_DISABLE,\n-                JVMTI_EVENT_MONITOR_WAIT, NULL)))\n+            jvmti->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_MONITOR_WAIT, NULL)))\n@@ -236,2 +226,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetPotentialCapabilities, jvmti,&caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetPotentialCapabilities(&caps)))\n@@ -240,1 +229,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -243,1 +232,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities, jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -251,3 +240,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/MonitorWait\/monitorwait001\/monitorwait001.cpp","additions":16,"deletions":29,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -59,2 +59,2 @@\n-    if (NSK_CPP_STUB3(IsSameObject, jni, thread, thr) &&\n-            NSK_CPP_STUB3(IsSameObject, jni, object, obj)) {\n+    if (jni->IsSameObject(thread, thr) &&\n+            jni->IsSameObject(object, obj)) {\n@@ -83,2 +83,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-           NSK_CPP_STUB3(GetAllThreads, jvmti, &threads_count, &threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&threads_count, &threads)))\n@@ -96,2 +95,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, threads[i], &info)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(threads[i], &info)))\n@@ -109,2 +107,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads)))\n@@ -119,2 +116,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (thread =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (thread = jni->NewGlobalRef(thread)) != NULL))\n@@ -124,2 +120,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (klass =\n-            NSK_CPP_STUB2(GetObjectClass, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (klass = jni->GetObjectClass(thread)) != NULL))\n@@ -130,2 +125,1 @@\n-            NSK_CPP_STUB4(GetFieldID, jni, klass,\n-                \"waitingMonitor\", \"Ljava\/lang\/Object;\")) != NULL))\n+            jni->GetFieldID(klass, \"waitingMonitor\", \"Ljava\/lang\/Object;\")) != NULL))\n@@ -135,2 +129,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (object =\n-            NSK_CPP_STUB3(GetObjectField, jni, thread, field)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (object = jni->GetObjectField(thread, field)) != NULL))\n@@ -140,2 +133,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (object =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, object)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (object = jni->NewGlobalRef(object)) != NULL))\n@@ -146,2 +138,1 @@\n-            NSK_CPP_STUB4(SetEventNotificationMode, jvmti, JVMTI_ENABLE,\n-                JVMTI_EVENT_MONITOR_WAITED, NULL)))\n+            jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_MONITOR_WAITED, NULL)))\n@@ -157,2 +148,1 @@\n-            NSK_CPP_STUB4(SetEventNotificationMode, jvmti, JVMTI_DISABLE,\n-                JVMTI_EVENT_MONITOR_WAITED, NULL)))\n+            jvmti->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_MONITOR_WAITED, NULL)))\n@@ -237,2 +227,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetPotentialCapabilities, jvmti,&caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetPotentialCapabilities(&caps)))\n@@ -241,1 +230,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -244,1 +233,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities, jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -252,3 +241,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/MonitorWaited\/monitorwaited001\/monitorwaited001.cpp","additions":16,"deletions":29,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -62,4 +62,2 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter,\n-            jvmti_env, countLock)))\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-            \"failed to enter a raw monitor\\n\");\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorEnter(countLock)))\n+        jni_env->FatalError(\"failed to enter a raw monitor\\n\");\n@@ -69,4 +67,2 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit,\n-            jvmti_env, countLock)))\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-            \"failed to exit a raw monitor\\n\");\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorExit(countLock)))\n+        jni_env->FatalError(\"failed to exit a raw monitor\\n\");\n@@ -87,1 +83,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetPhase, jvmti_env, &phase))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetPhase(&phase))) {\n@@ -98,2 +94,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &methNam, &methSig, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &methNam, &methSig, NULL))) {\n@@ -121,2 +116,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*) methNam))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) methNam))) {\n@@ -126,2 +120,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*) methSig))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) methSig))) {\n@@ -155,2 +148,1 @@\n-        if (!NSK_JNI_VERIFY(env, (testedCls =\n-                NSK_CPP_STUB2(FindClass, env, CLASS_SIG)) != NULL)) {\n+        if (!NSK_JNI_VERIFY(env, (testedCls = env->FindClass(CLASS_SIG)) != NULL)) {\n@@ -170,2 +162,1 @@\n-        if (!NSK_JNI_VERIFY_VOID(env, (NSK_CPP_STUB4(RegisterNatives,\n-                env, testedCls, &meth, 1)) != 0)) {\n+        if (!NSK_JNI_VERIFY_VOID(env, (env->RegisterNatives(testedCls, &meth, 1)) != 0)) {\n@@ -224,2 +215,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(CreateRawMonitor,\n-            jvmti, \"_counter_lock\", &countLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"_counter_lock\", &countLock)))\n@@ -231,2 +221,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -235,2 +224,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -245,2 +233,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks,\n-            jvmti, &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -250,2 +237,3 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_NATIVE_METHOD_BIND, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_NATIVE_METHOD_BIND,\n+                                                          NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/NativeMethodBind\/nativemethbind001\/nativemethbind001.cpp","additions":17,"deletions":29,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -45,4 +45,2 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter,\n-            jvmti_env, countLock)))\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-            \"failed to enter a raw monitor\\n\");\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorEnter(countLock)))\n+        jni_env->FatalError(\"failed to enter a raw monitor\\n\");\n@@ -52,4 +50,2 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit,\n-            jvmti_env, countLock)))\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-            \"failed to exit a raw monitor\\n\");\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorExit(countLock)))\n+        jni_env->FatalError(\"failed to exit a raw monitor\\n\");\n@@ -67,2 +63,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetPhase,\n-            jvmti_env, &phase))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetPhase(&phase))) {\n@@ -82,2 +77,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &methNam, &methSig, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &methNam, &methSig, NULL))) {\n@@ -92,2 +86,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*) methNam)))\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) methNam)))\n@@ -96,2 +89,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*) methSig)))\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) methSig)))\n@@ -152,2 +144,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(CreateRawMonitor,\n-            jvmti, \"_counter_lock\", &countLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"_counter_lock\", &countLock)))\n@@ -159,2 +150,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -163,2 +153,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -174,2 +163,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks,\n-            jvmti, &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -179,2 +167,3 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_NATIVE_METHOD_BIND, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_NATIVE_METHOD_BIND,\n+                                                          NULL)))\n@@ -182,2 +171,3 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_VM_DEATH,\n+                                                          NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/NativeMethodBind\/nativemethbind002\/nativemethbind002.cpp","additions":18,"deletions":28,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -55,4 +55,2 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter,\n-            jvmti_env, countLock)))\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-            \"failed to enter a raw monitor\\n\");\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorEnter(countLock)))\n+        jni_env->FatalError(\"failed to enter a raw monitor\\n\");\n@@ -62,4 +60,2 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit,\n-            jvmti_env, countLock)))\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-            \"failed to exit a raw monitor\\n\");\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorExit(countLock)))\n+        jni_env->FatalError(\"failed to exit a raw monitor\\n\");\n@@ -79,1 +75,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetPhase, jvmti_env, &phase))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetPhase(&phase))) {\n@@ -90,2 +86,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &methNam, &methSig, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &methNam, &methSig, NULL))) {\n@@ -105,2 +100,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*) methNam))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) methNam))) {\n@@ -110,2 +104,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*) methSig))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) methSig))) {\n@@ -161,2 +154,1 @@\n-    if (!NSK_JNI_VERIFY(env, (testedCls =\n-            NSK_CPP_STUB2(FindClass, env, CLASS_SIG)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(env, (testedCls = env->FindClass(CLASS_SIG)) != NULL)) {\n@@ -177,2 +169,1 @@\n-    if (!NSK_JNI_VERIFY_VOID(env, (NSK_CPP_STUB4(RegisterNatives,\n-            env, testedCls, &meth, 1)) != 0)) {\n+    if (!NSK_JNI_VERIFY_VOID(env, (env->RegisterNatives(testedCls, &meth, 1)) != 0)) {\n@@ -186,2 +177,1 @@\n-    if (!NSK_JNI_VERIFY_VOID(env, (NSK_CPP_STUB2(UnregisterNatives,\n-            env, testedCls)) != 0)) {\n+    if (!NSK_JNI_VERIFY_VOID(env, (env->UnregisterNatives(testedCls)) != 0)) {\n@@ -218,2 +208,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(CreateRawMonitor,\n-            jvmti, \"_counter_lock\", &countLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"_counter_lock\", &countLock)))\n@@ -225,2 +214,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -229,2 +217,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -240,2 +227,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks,\n-            jvmti, &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -245,2 +231,3 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_NATIVE_METHOD_BIND, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_NATIVE_METHOD_BIND,\n+                                                          NULL)))\n@@ -248,2 +235,3 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_VM_DEATH,\n+                                                          NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/NativeMethodBind\/nativemethbind003\/nativemethbind003.cpp","additions":21,"deletions":33,"binary":false,"changes":54,"status":"modified"},{"patch":"@@ -70,4 +70,2 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter,\n-            jvmti_env, countLock)))\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-            \"failed to enter a raw monitor\\n\");\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorEnter(countLock)))\n+        jni_env->FatalError(\"failed to enter a raw monitor\\n\");\n@@ -77,4 +75,2 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit,\n-            jvmti_env, countLock)))\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-            \"failed to exit a raw monitor\\n\");\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorExit(countLock)))\n+        jni_env->FatalError(\"failed to exit a raw monitor\\n\");\n@@ -93,1 +89,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetPhase, jvmti_env, &phase))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetPhase(&phase))) {\n@@ -104,2 +100,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &methNam, &methSig, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &methNam, &methSig, NULL))) {\n@@ -120,2 +115,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*) methNam))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) methNam))) {\n@@ -125,2 +119,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*) methSig))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) methSig))) {\n@@ -193,2 +186,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(CreateRawMonitor,\n-            jvmti, \"_counter_lock\", &countLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"_counter_lock\", &countLock)))\n@@ -200,2 +192,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -204,2 +195,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -214,2 +204,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks,\n-            jvmti, &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -219,2 +208,3 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_NATIVE_METHOD_BIND, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_NATIVE_METHOD_BIND,\n+                                                          NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/NativeMethodBind\/nativemethbind004\/nativemethbind004.cpp","additions":15,"deletions":25,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -65,2 +65,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(CreateRawMonitor,\n-            jvmti_env, \"_lock\", &_lock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->CreateRawMonitor(\"_lock\", &_lock))) {\n@@ -77,2 +76,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter,\n-            jvmti_env, _lock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorEnter(_lock))) {\n@@ -89,2 +87,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit,\n-                jvmti_env, _lock))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorExit(_lock))) {\n@@ -101,2 +98,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(DestroyRawMonitor,\n-            jvmti_env, _lock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->DestroyRawMonitor(_lock))) {\n@@ -115,2 +111,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(Allocate,\n-            jvmti_env, MEM_SIZE, &mem))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Allocate(MEM_SIZE, &mem))) {\n@@ -128,2 +123,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, mem))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate(mem))) {\n@@ -145,2 +139,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(SetEnvironmentLocalStorage,\n-            jvmti_env, (const void*) &stor))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->SetEnvironmentLocalStorage((const void*) &stor))) {\n@@ -158,2 +151,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetEnvironmentLocalStorage,\n-            jvmti_env, (void**) &obtainedData))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetEnvironmentLocalStorage((void**) &obtainedData))) {\n@@ -232,2 +224,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag,\n-            jvmti, objToTag, (jlong) 1))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(objToTag, (jlong) 1))) {\n@@ -272,2 +263,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -276,2 +266,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -290,2 +279,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks,\n-            jvmti, &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -295,2 +283,3 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_VM_DEATH,\n+                                                          NULL)))\n@@ -298,2 +287,3 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_OBJECT_FREE, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_OBJECT_FREE,\n+                                                          NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/ObjectFree\/objfree001\/objfree001.cpp","additions":18,"deletions":28,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -62,2 +62,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(CreateRawMonitor,\n-            jvmti_env, \"_lock\", &_lock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->CreateRawMonitor(\"_lock\", &_lock))) {\n@@ -74,2 +73,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter,\n-            jvmti_env, _lock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorEnter(_lock))) {\n@@ -86,2 +84,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(RawMonitorWait,\n-                jvmti_env, _lock, (jlong)10))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorWait(_lock, (jlong)10))) {\n@@ -98,2 +95,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorNotify,\n-                jvmti_env, _lock))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorNotify(_lock))) {\n@@ -110,2 +106,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorNotifyAll,\n-                jvmti_env, _lock))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorNotifyAll(_lock))) {\n@@ -122,2 +117,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit,\n-                jvmti_env, _lock))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorExit(_lock))) {\n@@ -134,2 +128,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(DestroyRawMonitor,\n-            jvmti_env, _lock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->DestroyRawMonitor(_lock))) {\n@@ -148,2 +141,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(Allocate,\n-            jvmti_env, MEM_SIZE, &mem))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Allocate(MEM_SIZE, &mem))) {\n@@ -161,2 +153,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, mem))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate(mem))) {\n@@ -178,2 +169,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(SetEnvironmentLocalStorage,\n-            jvmti_env, (const void*) &stor))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->SetEnvironmentLocalStorage((const void*) &stor))) {\n@@ -191,2 +181,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetEnvironmentLocalStorage,\n-            jvmti_env, (void**) &obtainedData))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetEnvironmentLocalStorage((void**) &obtainedData))) {\n@@ -252,2 +241,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag,\n-                jvmti, objToTag, (jlong) num))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetTag(objToTag, (jlong) num))) {\n@@ -295,2 +283,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -299,2 +286,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -313,2 +299,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks,\n-            jvmti, &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -318,2 +303,3 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_VM_DEATH,\n+                                                          NULL)))\n@@ -321,2 +307,3 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_OBJECT_FREE, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_OBJECT_FREE,\n+                                                          NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/ObjectFree\/objfree002\/objfree002.cpp","additions":21,"deletions":34,"binary":false,"changes":55,"status":"modified"},{"patch":"@@ -36,6 +36,1 @@\n-        if (!NSK_JVMTI_VERIFY(     \\\n-                    NSK_CPP_STUB2( \\\n-                        Deallocate \\\n-                        , jvmti    \\\n-                        , p        \\\n-                        )))        \\\n+        if (!NSK_JVMTI_VERIFY(jvmti->Deallocate(p)))        \\\n@@ -104,7 +99,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(\n-                        GetThreadInfo\n-                        , jvmti\n-                        , thread\n-                        , &thr_info\n-                        )))\n+            if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(thread, &thr_info)))\n@@ -115,7 +104,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(\n-                        GetMethodDeclaringClass\n-                        , jvmti\n-                        , method\n-                        , &klass\n-                        )))\n+            if (!NSK_JVMTI_VERIFY(jvmti->GetMethodDeclaringClass(method, &klass)))\n@@ -126,8 +109,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB4(\n-                        GetClassSignature\n-                        , jvmti\n-                        , klass\n-                        , &class_signature\n-                        , NULL\n-                        )))\n+            if (!NSK_JVMTI_VERIFY(jvmti->GetClassSignature(klass, &class_signature, NULL)))\n@@ -138,9 +114,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB5(\n-                        GetMethodName\n-                        , jvmti\n-                        , method\n-                        , &entry_name\n-                        , &entry_sig\n-                        , NULL\n-                        )))\n+            if (!NSK_JVMTI_VERIFY(jvmti->GetMethodName(method, &entry_name, &entry_sig, NULL)))\n@@ -184,6 +152,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(\n-                SuspendThread\n-                , jvmti\n-                , suspendedThread\n-                )))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(suspendedThread)))\n@@ -206,6 +169,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(\n-                ResumeThread\n-                , jvmti\n-                , suspendedThread\n-                )))\n+    if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(suspendedThread)))\n@@ -237,7 +195,1 @@\n-            NSK_CPP_STUB4(\n-                SetEventNotificationMode\n-                , jvmti\n-                , JVMTI_ENABLE\n-                , JVMTI_EVENT_METHOD_EXIT\n-                , frameThr\n-                )))\n+            jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_METHOD_EXIT, frameThr)))\n@@ -249,7 +201,1 @@\n-            NSK_CPP_STUB4(\n-                SetEventNotificationMode\n-                , jvmti\n-                , JVMTI_ENABLE\n-                , JVMTI_EVENT_FRAME_POP\n-                , frameThr\n-                )))\n+            jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_FRAME_POP, frameThr)))\n@@ -264,6 +210,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(\n-                PopFrame\n-                , jvmti\n-                , frameThr\n-                )))\n+    if (!NSK_JVMTI_VERIFY(jvmti->PopFrame(frameThr)))\n@@ -322,6 +263,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(\n-                GetPotentialCapabilities\n-                , jvmti\n-                , &caps\n-                )))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetPotentialCapabilities(&caps)))\n@@ -332,6 +268,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(\n-                AddCapabilities\n-                , jvmti\n-                , &caps\n-                )))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -342,6 +273,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(\n-                GetCapabilities\n-                , jvmti\n-                , &caps\n-                )))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -368,6 +294,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(\n-                    SetEventCallbacks\n-                    , jvmti\n-                    , &callbacks\n-                    , sizeof(callbacks)\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks)\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/PopFrame\/popframe005\/popframe005.cpp","additions":14,"deletions":93,"binary":false,"changes":107,"status":"modified"},{"patch":"@@ -89,1 +89,1 @@\n-    bytesCount = NSK_CPP_STUB2(GetArrayLength, jni_env, classBytes);\n+    bytesCount = jni_env->GetArrayLength(classBytes);\n@@ -91,1 +91,1 @@\n-        NSK_CPP_STUB3(GetByteArrayElements, jni_env, classBytes, &isCopy);\n+        jni_env->GetByteArrayElements(classBytes, &isCopy);\n@@ -103,2 +103,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &name, &sig, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &sig, NULL))) {\n@@ -141,2 +140,2 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)sig);\n+        jvmti_env->Deallocate((unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)sig);\n@@ -166,2 +165,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GenerateEvents, jvmti, JVMTI_EVENT_COMPILED_METHOD_LOAD))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GenerateEvents(JVMTI_EVENT_COMPILED_METHOD_LOAD))) {\n@@ -188,2 +186,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetMethodDeclaringClass,\n-                                        jvmti_env, hsMethodID, &decl_cls))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodDeclaringClass(hsMethodID, &decl_cls))) {\n@@ -194,2 +191,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature,\n-                                        jvmti_env, decl_cls, &cls_sig, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(decl_cls, &cls_sig, NULL))) {\n@@ -212,2 +208,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(RedefineClasses,\n-                                        jvmti, 1, &classDef))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RedefineClasses(1, &classDef))) {\n@@ -264,2 +259,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -273,2 +267,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks,\n-            jvmti, &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/RedefineClasses\/redefclass028\/redefclass028.cpp","additions":11,"deletions":18,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -88,1 +88,1 @@\n-    bytesCount = NSK_CPP_STUB2(GetArrayLength, jni_env, classBytes);\n+    bytesCount = jni_env->GetArrayLength(classBytes);\n@@ -90,1 +90,1 @@\n-        NSK_CPP_STUB3(GetByteArrayElements, jni_env, classBytes, &isCopy);\n+        jni_env->GetByteArrayElements(classBytes, &isCopy);\n@@ -102,2 +102,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &name, &sig, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &sig, NULL))) {\n@@ -140,2 +139,2 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)sig);\n+        jvmti_env->Deallocate((unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)sig);\n@@ -165,2 +164,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GenerateEvents, jvmti, JVMTI_EVENT_COMPILED_METHOD_LOAD))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GenerateEvents(JVMTI_EVENT_COMPILED_METHOD_LOAD))) {\n@@ -187,2 +185,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetMethodDeclaringClass,\n-                                        jvmti_env, hsMethodID, &decl_cls))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodDeclaringClass(hsMethodID, &decl_cls))) {\n@@ -193,2 +190,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature,\n-                                        jvmti_env, decl_cls, &cls_sig, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(decl_cls, &cls_sig, NULL))) {\n@@ -211,2 +207,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(RedefineClasses,\n-                                        jvmti, 1, &classDef))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RedefineClasses(1, &classDef))) {\n@@ -263,2 +258,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -272,2 +266,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks,\n-            jvmti, &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/RedefineClasses\/redefclass029\/redefclass029.cpp","additions":11,"deletions":18,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -89,1 +89,1 @@\n-    bytesCount = NSK_CPP_STUB2(GetArrayLength, jni_env, classBytes);\n+    bytesCount = jni_env->GetArrayLength(classBytes);\n@@ -91,1 +91,1 @@\n-        NSK_CPP_STUB3(GetByteArrayElements, jni_env, classBytes, &isCopy);\n+        jni_env->GetByteArrayElements(classBytes, &isCopy);\n@@ -103,2 +103,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &name, &sig, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &sig, NULL))) {\n@@ -141,2 +140,2 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)sig);\n+        jvmti_env->Deallocate((unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)sig);\n@@ -166,2 +165,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GenerateEvents, jvmti, JVMTI_EVENT_COMPILED_METHOD_LOAD))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GenerateEvents(JVMTI_EVENT_COMPILED_METHOD_LOAD))) {\n@@ -188,2 +186,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetMethodDeclaringClass,\n-                                        jvmti_env, hsMethodID, &decl_cls))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodDeclaringClass(hsMethodID, &decl_cls))) {\n@@ -194,2 +191,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature,\n-                                        jvmti_env, decl_cls, &cls_sig, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(decl_cls, &cls_sig, NULL))) {\n@@ -212,2 +208,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(RedefineClasses,\n-                                        jvmti, 1, &classDef))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RedefineClasses(1, &classDef))) {\n@@ -264,2 +259,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -273,2 +267,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks,\n-            jvmti, &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/RedefineClasses\/redefclass030\/redefclass030.cpp","additions":11,"deletions":18,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -196,2 +196,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps))) {\n@@ -220,2 +219,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(AddCapabilities, jvmti, caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(caps))) {\n@@ -235,2 +233,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RelinquishCapabilities, jvmti, caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RelinquishCapabilities(caps))) {\n@@ -250,2 +247,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetPotentialCapabilities, jvmti, caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetPotentialCapabilities(caps))) {\n@@ -353,3 +349,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks)))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks)))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/RelinquishCapabilities\/relcaps001\/relcaps001.cpp","additions":5,"deletions":11,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -196,2 +196,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps))) {\n@@ -220,2 +219,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(AddCapabilities, jvmti, caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(caps))) {\n@@ -235,2 +233,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RelinquishCapabilities, jvmti, caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RelinquishCapabilities(caps))) {\n@@ -250,2 +247,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetPotentialCapabilities, jvmti, caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetPotentialCapabilities(caps))) {\n@@ -352,3 +348,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks)))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks)))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/RelinquishCapabilities\/relcaps002\/relcaps002.cpp","additions":5,"deletions":11,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -89,1 +89,1 @@\n-    if ( ! NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, gJvmti, &capabilities)) )\n+    if ( ! NSK_JVMTI_VERIFY(gJvmti->AddCapabilities(&capabilities)) )\n@@ -94,1 +94,1 @@\n-    if ( ! NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks, gJvmti, &callbacks, sizeof(callbacks))) )\n+    if ( ! NSK_JVMTI_VERIFY(gJvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))) )\n@@ -97,1 +97,3 @@\n-    if ( ! NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode, gJvmti, JVMTI_ENABLE, JVMTI_EVENT_RESOURCE_EXHAUSTED, NULL) ) )\n+    if ( ! NSK_JVMTI_VERIFY(gJvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                             JVMTI_EVENT_RESOURCE_EXHAUSTED,\n+                                                             NULL) ) )\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/ResourceExhausted\/resexhausted.cpp","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -61,2 +61,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(SuspendThread, jvmti, testedThread))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(testedThread))) {\n@@ -68,2 +67,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(ResumeThread, jvmti, testedThread))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(testedThread))) {\n@@ -77,2 +75,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(GetThreadState, jvmti, testedThread, &state))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->GetThreadState(testedThread, &state))) {\n@@ -101,1 +98,1 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testedThread));\n+        NSK_TRACE(jni->DeleteGlobalRef(testedThread));\n@@ -142,2 +139,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &suspendCaps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&suspendCaps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/ResumeThread\/resumethrd001\/resumethrd001.cpp","additions":5,"deletions":9,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -75,2 +75,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(SuspendThread, jvmti, testedThread))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(testedThread))) {\n@@ -86,2 +85,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(ResumeThread, jvmti, testedThread))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(testedThread))) {\n@@ -115,1 +113,1 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testedThread));\n+        NSK_TRACE(jni->DeleteGlobalRef(testedThread));\n@@ -130,1 +128,1 @@\n-                NSK_CPP_STUB3(IsSameObject, jni, testedThread, thread)) {\n+                jni->IsSameObject(testedThread, thread)) {\n@@ -171,2 +169,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &suspendCaps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&suspendCaps)))\n@@ -181,2 +178,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti, &callbacks, sizeof(callbacks))))\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/ResumeThread\/resumethrd002\/resumethrd002.cpp","additions":6,"deletions":10,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -65,3 +65,2 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(Allocate, jvmti, (threadsCount * sizeof(jthread)),\n-                                                (unsigned char**)&threads))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->Allocate((threadsCount * sizeof(jthread)),\n+                                              (unsigned char**)&threads))) {\n@@ -74,3 +73,2 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(Allocate, jvmti, (threadsCount * sizeof(jvmtiError)),\n-                                                (unsigned char**)&results))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->Allocate((threadsCount * sizeof(jvmtiError)),\n+                                              (unsigned char**)&results))) {\n@@ -87,2 +85,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(SuspendThreadList, jvmti, threadsCount, threads, results))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SuspendThreadList(threadsCount, threads, results))) {\n@@ -102,2 +99,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(ResumeThreadList, jvmti, threadsCount, threads, results))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->ResumeThreadList(threadsCount, threads, results))) {\n@@ -121,2 +117,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(GetThreadState, jvmti, threads[i], &state))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->GetThreadState(threads[i], &state))) {\n@@ -147,1 +142,1 @@\n-                NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threads[i]));\n+                NSK_TRACE(jni->DeleteGlobalRef(threads[i]));\n@@ -151,2 +146,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads))) {\n@@ -157,2 +151,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)results))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)results))) {\n@@ -184,2 +177,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetAllThreads, jvmti, &count, &threads))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&count, &threads))) {\n@@ -194,2 +186,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, threads[i], &info))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(threads[i], &info))) {\n@@ -210,2 +201,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads))) {\n@@ -229,1 +219,1 @@\n-                    NSK_CPP_STUB2(NewGlobalRef, jni, foundThreads[i])) != NULL)) {\n+                    jni->NewGlobalRef(foundThreads[i])) != NULL)) {\n@@ -277,2 +267,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &suspendCaps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&suspendCaps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/ResumeThreadList\/resumethrdlst001\/resumethrdlst001.cpp","additions":15,"deletions":26,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -74,3 +74,2 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(Allocate, jvmti, (threadsCount * sizeof(jthread)),\n-                                                (unsigned char**)&threads))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->Allocate((threadsCount * sizeof(jthread)),\n+                                              (unsigned char**)&threads))) {\n@@ -83,3 +82,2 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(Allocate, jvmti, (threadsCount * sizeof(jvmtiError)),\n-                                                (unsigned char**)&results))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->Allocate((threadsCount * sizeof(jvmtiError)),\n+                                              (unsigned char**)&results))) {\n@@ -96,2 +94,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(SuspendThreadList, jvmti, threadsCount, threads, results))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SuspendThreadList(threadsCount, threads, results))) {\n@@ -120,2 +117,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(ResumeThreadList, jvmti, threadsCount, threads, results))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->ResumeThreadList(threadsCount, threads, results))) {\n@@ -162,1 +158,1 @@\n-                NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, threads[i]));\n+                NSK_TRACE(jni->DeleteGlobalRef(threads[i]));\n@@ -166,2 +162,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads))) {\n@@ -172,2 +167,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)results))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)results))) {\n@@ -199,2 +193,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetAllThreads, jvmti, &count, &threads))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&count, &threads))) {\n@@ -209,2 +202,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, threads[i], &info))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(threads[i], &info))) {\n@@ -225,2 +217,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads))) {\n@@ -244,1 +235,1 @@\n-                    NSK_CPP_STUB2(NewGlobalRef, jni, foundThreads[i])) != NULL)) {\n+                    jni->NewGlobalRef(foundThreads[i])) != NULL)) {\n@@ -261,1 +252,1 @@\n-    jvmtiError e = NSK_CPP_STUB2(RawMonitorEnter, jvmti, eventsReceivedMtx);\n+    jvmtiError e = jvmti->RawMonitorEnter(eventsReceivedMtx);\n@@ -270,1 +261,1 @@\n-                NSK_CPP_STUB3(IsSameObject, jni, threads[i], thread)) {\n+                jni->IsSameObject(threads[i], thread)) {\n@@ -274,1 +265,1 @@\n-            NSK_CPP_STUB2(RawMonitorExit, jvmti, eventsReceivedMtx);\n+            jvmti->RawMonitorExit(eventsReceivedMtx);\n@@ -278,1 +269,1 @@\n-    NSK_CPP_STUB2(RawMonitorExit, jvmti, eventsReceivedMtx);\n+    jvmti->RawMonitorExit(eventsReceivedMtx);\n@@ -320,2 +311,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &suspendCaps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&suspendCaps)))\n@@ -330,2 +320,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti, &callbacks, sizeof(callbacks))))\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -337,2 +326,1 @@\n-        if ( ! NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"eventsReceived\", &eventsReceivedMtx))) {\n+        if ( ! NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"eventsReceived\", &eventsReceivedMtx))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/ResumeThreadList\/resumethrdlst002\/resumethrdlst002.cpp","additions":20,"deletions":32,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -52,9 +52,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(\n-                    RetransformClasses\n-                    , jvmti\n-                    , 1\n-                    , &class_for_retransformation\n-                    )\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->RetransformClasses(1, &class_for_retransformation)))\n@@ -117,7 +109,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(\n-                    GetCapabilities\n-                    , jvmti\n-                    , &caps)\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -129,7 +115,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(\n-                    AddCapabilities\n-                    , jvmti\n-                    , &caps)\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -142,9 +122,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(\n-                    SetEventCallbacks\n-                    , jvmti\n-                    , &callbacks\n-                    , sizeof(callbacks)\n-                    )\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -154,10 +126,3 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(\n-                    SetEventNotificationMode\n-                    , jvmti\n-                    , JVMTI_ENABLE\n-                    , JVMTI_EVENT_CLASS_FILE_LOAD_HOOK\n-                    , NULL\n-                    )\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_CLASS_FILE_LOAD_HOOK,\n+                                                          NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/RetransformClasses\/retransform002\/retransform002.cpp","additions":7,"deletions":42,"binary":false,"changes":49,"status":"modified"},{"patch":"@@ -66,9 +66,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(\n-                    RetransformClasses\n-                    , jvmti\n-                    , 1\n-                    , &class_for_retransformation\n-                    )\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->RetransformClasses(1, &class_for_retransformation)))\n@@ -110,9 +102,1 @@\n-    if (!NSK_VERIFY(\n-                (loader_class = NSK_CPP_STUB2(\n-                    GetObjectClass\n-                    , jni\n-                    , loader\n-                    )\n-                ) != NULL\n-            )\n-       )\n+    if (!NSK_VERIFY((loader_class = jni->GetObjectClass(loader)) != NULL))\n@@ -121,11 +105,2 @@\n-    if (!NSK_VERIFY(\n-                (method_id = NSK_CPP_STUB4(\n-                    GetMethodID\n-                    , jni\n-                    , loader_class\n-                    , \"loadClass\"\n-                    , \"(Ljava\/lang\/String;)Ljava\/lang\/Class;\"\n-                    )\n-                ) != NULL\n-            )\n-       )\n+    if (!NSK_VERIFY((method_id = jni->GetMethodID(\n+            loader_class, \"loadClass\", \"(Ljava\/lang\/String;)Ljava\/lang\/Class;\")) != NULL))\n@@ -134,10 +109,1 @@\n-    if (!NSK_VERIFY(\n-                (class_name_string =\n-                 NSK_CPP_STUB2(\n-                     NewStringUTF\n-                     , jni\n-                     , CALLBACK_CLASS_NAME\n-                     )\n-                ) != NULL\n-            )\n-       )\n+    if (!NSK_VERIFY((class_name_string = jni->NewStringUTF(CALLBACK_CLASS_NAME)) != NULL))\n@@ -146,11 +112,2 @@\n-    if (!NSK_VERIFY(\n-                (callback_class = (jclass) NSK_CPP_STUB4(\n-                        CallObjectMethod\n-                        , jni\n-                        , loader\n-                        , method_id\n-                        , class_name_string\n-                        )\n-                ) != NULL\n-            )\n-       )\n+    if (!NSK_VERIFY((callback_class = (jclass) jni->CallObjectMethod(\n+            loader, method_id, class_name_string)) != NULL))\n@@ -159,11 +116,2 @@\n-    if (!NSK_VERIFY(\n-                (method_id = NSK_CPP_STUB4(\n-                    GetStaticMethodID\n-                    , jni\n-                    , callback_class\n-                    , \"callback\"\n-                    , \"(Ljava\/lang\/String;I)V\"\n-                    )\n-                ) != NULL\n-            )\n-       )\n+    if (!NSK_VERIFY((method_id = jni->GetStaticMethodID(\n+            callback_class, \"callback\", \"(Ljava\/lang\/String;I)V\")) != NULL))\n@@ -172,10 +120,1 @@\n-    if (!NSK_VERIFY(\n-                (class_name_string =\n-                 NSK_CPP_STUB2(\n-                     NewStringUTF\n-                     , jni\n-                     , name\n-                     )\n-                ) != NULL\n-            )\n-       )\n+    if (!NSK_VERIFY((class_name_string = jni->NewStringUTF(name)) != NULL))\n@@ -184,8 +123,1 @@\n-    NSK_CPP_STUB5(\n-        CallStaticObjectMethod\n-        , jni\n-        , callback_class\n-        , method_id\n-        , class_name_string\n-        , agent_id\n-        );\n+    jni->CallStaticObjectMethod(callback_class, method_id, class_name_string, agent_id);\n@@ -222,4 +154,1 @@\n-    if (!NSK_VERIFY(\n-                (jvmti = nsk_jvmti_createJVMTIEnv(vm, reserved)) != NULL\n-                )\n-       )\n+    if (!NSK_VERIFY((jvmti = nsk_jvmti_createJVMTIEnv(vm, reserved)) != NULL))\n@@ -228,7 +157,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(\n-                    GetCapabilities\n-                    , jvmti\n-                    , &caps)\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -245,7 +168,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(\n-                    AddCapabilities\n-                    , jvmti\n-                    , &caps)\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -258,9 +175,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(\n-                    SetEventCallbacks\n-                    , jvmti\n-                    , &callbacks\n-                    , sizeof(callbacks)\n-                    )\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -271,9 +180,3 @@\n-                NSK_CPP_STUB4(\n-                    SetEventNotificationMode\n-                    , jvmti\n-                    , JVMTI_ENABLE\n-                    , JVMTI_EVENT_CLASS_FILE_LOAD_HOOK\n-                    , NULL\n-                    )\n-                )\n-       )\n+                jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                JVMTI_EVENT_CLASS_FILE_LOAD_HOOK,\n+                                                NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/RetransformClasses\/retransform003\/retransform003.cpp","additions":18,"deletions":115,"binary":false,"changes":133,"status":"modified"},{"patch":"@@ -55,9 +55,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(\n-                    RetransformClasses\n-                    , jvmti\n-                    , 1\n-                    , &class_for_retransformation\n-                    )\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->RetransformClasses(1, &class_for_retransformation)))\n@@ -88,9 +80,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(\n-                    Allocate\n-                    , jvmti\n-                    , class_data_len\n-                    , new_class_data\n-                    )\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->Allocate(class_data_len, new_class_data)))\n@@ -130,7 +114,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(\n-                    GetCapabilities\n-                    , jvmti\n-                    , &caps)\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -142,7 +120,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(\n-                    AddCapabilities\n-                    , jvmti\n-                    , &caps)\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -155,9 +127,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(\n-                    SetEventCallbacks\n-                    , jvmti\n-                    , &callbacks\n-                    , sizeof(callbacks)\n-                    )\n-                )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -168,9 +132,3 @@\n-                NSK_CPP_STUB4(\n-                    SetEventNotificationMode\n-                    , jvmti\n-                    , JVMTI_ENABLE\n-                    , JVMTI_EVENT_CLASS_FILE_LOAD_HOOK\n-                    , NULL\n-                    )\n-                )\n-       )\n+                jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                JVMTI_EVENT_CLASS_FILE_LOAD_HOOK,\n+                                                NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/RetransformClasses\/retransform004\/retransform004.cpp","additions":8,"deletions":50,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -149,5 +149,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (cid =\n-            NSK_CPP_STUB4(GetMethodID, jni,\n-                                       cls,\n-                                       \"<init>\",\n-                                       \"()V\" )) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (cid = jni->GetMethodID(cls, \"<init>\", \"()V\" )) != NULL)) {\n@@ -159,4 +155,1 @@\n-    if (!NSK_JNI_VERIFY(jni, ( result =\n-            NSK_CPP_STUB3(NewObject, jni,\n-                                     cls,\n-                                     cid )) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, ( result = jni->NewObject(cls, cid)) != NULL)) {\n@@ -177,5 +170,1 @@\n-    if (!NSK_JNI_VERIFY(jni, ( cid =\n-            NSK_CPP_STUB4(GetMethodID, jni,\n-                                       cls,\n-                                       \"<init>\",\n-                                       \"()V\" )) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, ( cid = jni->GetMethodID(cls, \"<init>\", \"()V\" )) != NULL)) {\n@@ -188,3 +177,1 @@\n-    if (!NSK_JNI_VERIFY(jni, ( result =\n-            NSK_CPP_STUB2(AllocObject, jni,\n-                                       cls )) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, ( result = jni->AllocObject(cls)) != NULL)) {\n@@ -197,5 +184,1 @@\n-    if (!NSK_JNI_VERIFY_VOID(jni,\n-            NSK_CPP_STUB4(CallNonvirtualVoidMethod, jni,\n-                                                    result,\n-                                                    cls,\n-                                                    cid))) {\n+    if (!NSK_JNI_VERIFY_VOID(jni,jni->CallNonvirtualVoidMethod(result, cls, cid))) {\n@@ -228,4 +211,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetTag, jvmti,\n-                                  debugeeClass,\n-                                  DEBUGEE_CLASS_TAG ))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(debugeeClass, DEBUGEE_CLASS_TAG))) {\n@@ -239,7 +219,4 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB5(IterateOverInstancesOfClass,\n-                              jvmti,\n-                              debugeeClass,\n-                              JVMTI_HEAP_OBJECT_UNTAGGED,\n-                              heapObjectCallback,\n-                              &user_data))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverInstancesOfClass(debugeeClass,\n+                                                             JVMTI_HEAP_OBJECT_UNTAGGED,\n+                                                             heapObjectCallback,\n+                                                             &user_data))) {\n@@ -264,5 +241,1 @@\n-            NSK_CPP_STUB4(IterateOverHeap,\n-                              jvmti,\n-                              JVMTI_HEAP_OBJECT_UNTAGGED,\n-                              heapObjectCallback,\n-                              &user_data))) {\n+            jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_UNTAGGED, heapObjectCallback, &user_data))) {\n@@ -285,6 +258,4 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB5(IterateOverReachableObjects, jvmti,\n-                                                       heapRootCallback,\n-                                                       stackReferenceCallback,\n-                                                       objectReferenceCallback,\n-                                                       &user_data))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverReachableObjects(heapRootCallback,\n+                                                             stackReferenceCallback,\n+                                                             objectReferenceCallback,\n+                                                             &user_data))) {\n@@ -341,2 +312,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -345,2 +315,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -361,2 +330,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks,\n-            jvmti, &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -366,2 +334,3 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_OBJECT_FREE, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_OBJECT_FREE,\n+                                                          NULL)))\n@@ -369,2 +338,3 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_VM_DEATH,\n+                                                          NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/allocation\/AP01\/ap01t001\/ap01t001.cpp","additions":24,"deletions":54,"binary":false,"changes":78,"status":"modified"},{"patch":"@@ -94,3 +94,1 @@\n-    result = NSK_CPP_STUB3(ThrowNew, jni,\n-                                     exception_cls,\n-                                     \"Got expected exception thrown from native code\" );\n+    result = jni->ThrowNew(exception_cls, \"Got expected exception thrown from native code\" );\n@@ -108,7 +106,4 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB5(IterateOverInstancesOfClass,\n-                              jvmti,\n-                              testedClass,\n-                              JVMTI_HEAP_OBJECT_EITHER,\n-                              heapObjectCallback,\n-                              &user_data))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverInstancesOfClass(testedClass,\n+                                                             JVMTI_HEAP_OBJECT_EITHER,\n+                                                             heapObjectCallback,\n+                                                             &user_data))) {\n@@ -133,5 +128,1 @@\n-            NSK_CPP_STUB4(IterateOverHeap,\n-                              jvmti,\n-                              JVMTI_HEAP_OBJECT_EITHER,\n-                              heapObjectCallback,\n-                              &user_data))) {\n+            jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_EITHER, heapObjectCallback, &user_data))) {\n@@ -154,6 +145,4 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB5(IterateOverReachableObjects, jvmti,\n-                                                       NULL \/*heapRootCallback*\/,\n-                                                       stackReferenceCallback,\n-                                                       NULL \/*objectReferenceCallback*\/,\n-                                                       &user_data))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverReachableObjects(NULL \/*heapRootCallback*\/,\n+                                                             stackReferenceCallback,\n+                                                             NULL \/*objectReferenceCallback*\/,\n+                                                             &user_data))) {\n@@ -192,2 +181,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedClass = (jclass)\n-            NSK_CPP_STUB2(NewGlobalRef, jni, testedClass)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedClass = (jclass)jni->NewGlobalRef(testedClass)) != NULL))\n@@ -197,4 +185,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetTag, jvmti,\n-                                  testedClass,\n-                                  TESTED_CLASS_TAG ))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(testedClass, TESTED_CLASS_TAG))) {\n@@ -215,1 +200,1 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testedClass));\n+    NSK_TRACE(jni->DeleteGlobalRef(testedClass));\n@@ -245,2 +230,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -249,2 +233,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/allocation\/AP02\/ap02t001\/ap02t001.cpp","additions":15,"deletions":32,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -93,2 +93,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag,\n-         jvmti, obj, tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(obj, tag))) {\n@@ -120,4 +119,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetTag, jvmti,\n-                                      debugeeClass,\n-                                      DEBUGEE_CLASS_TAG ))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetTag(debugeeClass, DEBUGEE_CLASS_TAG))) {\n@@ -130,7 +126,4 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB5(IterateOverInstancesOfClass,\n-                                  jvmti,\n-                                  debugeeClass,\n-                                  JVMTI_HEAP_OBJECT_TAGGED,\n-                                  heapObjectCallback,\n-                                  &user_data))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->IterateOverInstancesOfClass(debugeeClass,\n+                                                                 JVMTI_HEAP_OBJECT_TAGGED,\n+                                                                 heapObjectCallback,\n+                                                                 &user_data))) {\n@@ -154,5 +147,1 @@\n-                NSK_CPP_STUB4(IterateOverHeap,\n-                                  jvmti,\n-                                  JVMTI_HEAP_OBJECT_TAGGED,\n-                                  heapObjectCallback,\n-                                  &user_data))) {\n+                jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_TAGGED, heapObjectCallback, &user_data))) {\n@@ -174,4 +163,1 @@\n-                NSK_CPP_STUB4(GetStaticFieldID, jni,\n-                                                debugeeClass,\n-                                                \"catcher\",\n-                                                DEBUGEE_SIGNATURE)) != NULL )) {\n+                jni->GetStaticFieldID(debugeeClass, \"catcher\", DEBUGEE_SIGNATURE)) != NULL )) {\n@@ -183,3 +169,1 @@\n-                NSK_CPP_STUB3(GetStaticObjectField, jni,\n-                                                    debugeeClass,\n-                                                    fid )) != NULL )) {\n+                jni->GetStaticObjectField(debugeeClass, fid)) != NULL )) {\n@@ -193,5 +177,3 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(IterateOverObjectsReachableFromObject, jvmti,\n-                                                                     catcher,\n-                                                                     objectReferenceCallback,\n-                                                                     &user_data))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->IterateOverObjectsReachableFromObject(catcher,\n+                                                                           objectReferenceCallback,\n+                                                                           &user_data))) {\n@@ -242,2 +224,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -246,2 +227,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -261,2 +241,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks,\n-            jvmti, &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -266,2 +245,3 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_OBJECT_FREE, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_OBJECT_FREE,\n+                                                          NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/allocation\/AP03\/ap03t001\/ap03t001.cpp","additions":18,"deletions":38,"binary":false,"changes":56,"status":"modified"},{"patch":"@@ -69,2 +69,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(counterMonitor_ptr))) {\n@@ -76,2 +75,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(counterMonitor_ptr))) {\n@@ -84,2 +82,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(counterMonitor_ptr))) {\n@@ -91,2 +88,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(counterMonitor_ptr))) {\n@@ -100,2 +96,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(counterMonitor_ptr))) {\n@@ -107,2 +102,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(counterMonitor_ptr))) {\n@@ -251,1 +245,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, target, tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(target, tag))) {\n@@ -261,1 +255,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB1(ForceGarbageCollection, jvmti))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->ForceGarbageCollection())) {\n@@ -276,5 +270,3 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(IterateOverHeap, jvmti,\n-                                           JVMTI_HEAP_OBJECT_TAGGED,\n-                                           heapObjectCallback,\n-                                           NULL \/*user_data*\/))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_TAGGED,\n+                                                 heapObjectCallback,\n+                                                 NULL \/*user_data*\/))) {\n@@ -306,6 +298,4 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB5(IterateOverReachableObjects, jvmti,\n-                                                       heapRootCallback,\n-                                                       stackReferenceCallback,\n-                                                       objectReferenceCallback,\n-                                                       NULL \/*user_data*\/))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverReachableObjects(heapRootCallback,\n+                                                             stackReferenceCallback,\n+                                                             objectReferenceCallback,\n+                                                             NULL \/*user_data*\/))) {\n@@ -337,6 +327,4 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB5(IterateOverInstancesOfClass, jvmti,\n-                                                       debugeeClass,\n-                                                       JVMTI_HEAP_OBJECT_TAGGED,\n-                                                       heapObjectCallback,\n-                                                       NULL \/*user_data*\/))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverInstancesOfClass(debugeeClass,\n+                                                             JVMTI_HEAP_OBJECT_TAGGED,\n+                                                             heapObjectCallback,\n+                                                             NULL \/*user_data*\/))) {\n@@ -366,3 +354,1 @@\n-            NSK_CPP_STUB3(GetStaticObjectField, jni,\n-                                                debugeeClass,\n-                                                rootFieldID )) != NULL )) {\n+            jni->GetStaticObjectField(debugeeClass, rootFieldID)) != NULL )) {\n@@ -375,1 +361,1 @@\n-    NSK_CPP_STUB3(CallStaticVoidMethod, jni, debugeeClass, unlockSecondaryID);\n+    jni->CallStaticVoidMethod(debugeeClass, unlockSecondaryID);\n@@ -382,5 +368,3 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(IterateOverObjectsReachableFromObject, jvmti,\n-                                                                 root,\n-                                                                 objectReferenceCallback,\n-                                                                 NULL \/*user_data*\/))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverObjectsReachableFromObject(root,\n+                                                                       objectReferenceCallback,\n+                                                                       NULL \/*user_data*\/))) {\n@@ -416,2 +400,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (debugeeClass = (jclass)\n-            NSK_CPP_STUB2(NewGlobalRef, jni, debugeeClass)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (debugeeClass = (jclass)jni->NewGlobalRef(debugeeClass)) != NULL))\n@@ -422,4 +405,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni,\n-                                            debugeeClass,\n-                                            \"root\",\n-                                            ROOT_SIGNATURE)) != NULL )) {\n+            jni->GetStaticFieldID(debugeeClass, \"root\", ROOT_SIGNATURE)) != NULL )) {\n@@ -432,4 +412,1 @@\n-            NSK_CPP_STUB4(GetStaticMethodID, jni,\n-                                            debugeeClass,\n-                                            \"unlockSecondary\",\n-                                            \"()V\")) != NULL )) {\n+            jni->GetStaticMethodID(debugeeClass, \"unlockSecondary\", \"()V\")) != NULL )) {\n@@ -451,2 +428,2 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, debugeeClass));\n-    NSK_TRACE(NSK_CPP_STUB2(DestroyRawMonitor, jvmti, counterMonitor_ptr));\n+    NSK_TRACE(jni->DeleteGlobalRef(debugeeClass));\n+    NSK_TRACE(jvmti->DestroyRawMonitor(counterMonitor_ptr));\n@@ -480,2 +457,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"counterMonitor\", &counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"counterMonitor\", &counterMonitor_ptr))) {\n@@ -490,2 +466,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -494,2 +469,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -512,2 +486,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks,\n-            jvmti, &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/allocation\/AP04\/ap04t001\/ap04t001.cpp","additions":33,"deletions":60,"binary":false,"changes":93,"status":"modified"},{"patch":"@@ -62,2 +62,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(counterMonitor_ptr))) {\n@@ -69,2 +68,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(counterMonitor_ptr))) {\n@@ -77,2 +75,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(counterMonitor_ptr))) {\n@@ -84,2 +81,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(counterMonitor_ptr))) {\n@@ -93,2 +89,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(counterMonitor_ptr))) {\n@@ -100,2 +95,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(counterMonitor_ptr))) {\n@@ -241,1 +235,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, target, tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(target, tag))) {\n@@ -256,5 +250,3 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(IterateOverHeap, jvmti,\n-                                           JVMTI_HEAP_OBJECT_TAGGED,\n-                                           heapObjectCallback,\n-                                           NULL \/*user_data*\/))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_TAGGED,\n+                                                 heapObjectCallback,\n+                                                 NULL \/*user_data*\/))) {\n@@ -287,6 +279,4 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB5(IterateOverReachableObjects, jvmti,\n-                                                       heapRootCallback,\n-                                                       stackReferenceCallback,\n-                                                       objectReferenceCallback,\n-                                                       NULL \/*user_data*\/))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverReachableObjects(heapRootCallback,\n+                                                             stackReferenceCallback,\n+                                                             objectReferenceCallback,\n+                                                             NULL \/*user_data*\/))) {\n@@ -319,6 +309,4 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB5(IterateOverInstancesOfClass, jvmti,\n-                                                       debugeeClass,\n-                                                       JVMTI_HEAP_OBJECT_TAGGED,\n-                                                       heapObjectCallback,\n-                                                       NULL \/*user_data*\/))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverInstancesOfClass(debugeeClass,\n+                                                             JVMTI_HEAP_OBJECT_TAGGED,\n+                                                             heapObjectCallback,\n+                                                             NULL \/*user_data*\/))) {\n@@ -348,3 +336,1 @@\n-                NSK_CPP_STUB3(GetStaticObjectField, jni,\n-                                                    debugeeClass,\n-                                                    rootFieldID )) != NULL )) {\n+                jni->GetStaticObjectField(debugeeClass, rootFieldID)) != NULL )) {\n@@ -361,5 +347,3 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(IterateOverObjectsReachableFromObject, jvmti,\n-                                                                     root,\n-                                                                     objectReferenceCallback,\n-                                                                     NULL \/*user_data*\/))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverObjectsReachableFromObject(root,\n+                                                                       objectReferenceCallback,\n+                                                                       NULL \/*user_data*\/))) {\n@@ -396,2 +380,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (debugeeClass = (jclass)\n-            NSK_CPP_STUB2(NewGlobalRef, jni, debugeeClass)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (debugeeClass = (jclass)jni->NewGlobalRef(debugeeClass)) != NULL))\n@@ -402,4 +385,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni,\n-                                            debugeeClass,\n-                                            \"root\",\n-                                            ROOT_SIGNATURE)) != NULL )) {\n+            jni->GetStaticFieldID(debugeeClass, \"root\", ROOT_SIGNATURE)) != NULL )) {\n@@ -412,4 +392,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni,\n-                                            debugeeClass,\n-                                            \"modified\",\n-                                            \"I\")) != NULL )) {\n+            jni->GetStaticFieldID(debugeeClass, \"modified\", \"I\")) != NULL )) {\n@@ -421,4 +398,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetFieldModificationWatch, jvmti,\n-                                                     debugeeClass,\n-                                                     modifiedFieldID))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetFieldModificationWatch(debugeeClass, modifiedFieldID))) {\n@@ -437,2 +411,2 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, debugeeClass));\n-    NSK_TRACE(NSK_CPP_STUB2(DestroyRawMonitor, jvmti, counterMonitor_ptr));\n+    NSK_TRACE(jni->DeleteGlobalRef(debugeeClass));\n+    NSK_TRACE(jvmti->DestroyRawMonitor(counterMonitor_ptr));\n@@ -466,2 +440,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"counterMonitor\", &counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"counterMonitor\", &counterMonitor_ptr))) {\n@@ -475,2 +448,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -479,2 +451,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n@@ -493,2 +464,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks,\n-            jvmti, &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -500,5 +470,3 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4( SetEventNotificationMode,\n-                                         jvmti,\n-                                         JVMTI_ENABLE,\n-                                         JVMTI_EVENT_FIELD_MODIFICATION,\n-                                         NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE,\n+                                                          JVMTI_EVENT_FIELD_MODIFICATION,\n+                                                          NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/allocation\/AP04\/ap04t002\/ap04t002.cpp","additions":35,"deletions":67,"binary":false,"changes":102,"status":"modified"},{"patch":"@@ -64,2 +64,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(counterMonitor_ptr))) {\n@@ -71,2 +70,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(counterMonitor_ptr))) {\n@@ -79,2 +77,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(counterMonitor_ptr))) {\n@@ -86,2 +83,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(counterMonitor_ptr))) {\n@@ -95,2 +91,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(counterMonitor_ptr))) {\n@@ -102,2 +97,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, jvmti, counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(counterMonitor_ptr))) {\n@@ -116,2 +110,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(RawMonitorEnter, jvmti, runLock))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(runLock))) {\n@@ -120,2 +113,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(RawMonitorNotify, jvmti, runLock))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorNotify(runLock))) {\n@@ -124,2 +116,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(RawMonitorExit, jvmti, runLock))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(runLock))) {\n@@ -230,6 +221,2 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB6(GetObjectsWithTags, jvmti,\n-                                              1, &tag,\n-                                              &taggedObjectsCount,\n-                                              &taggedObjectsList,\n-                                              NULL))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetObjectsWithTags(\n+                1, &tag, &taggedObjectsCount, &taggedObjectsList, NULL))) {\n@@ -249,2 +236,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, jvmti, runLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(runLock))) {\n@@ -256,2 +242,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(RawMonitorEnter, jvmti, startLock))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(startLock))) {\n@@ -260,2 +245,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(RawMonitorNotify, jvmti, startLock))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorNotify(startLock))) {\n@@ -264,2 +248,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(RawMonitorExit, jvmti, startLock))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(startLock))) {\n@@ -274,2 +257,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(RawMonitorWait, jvmti, runLock, timeout))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorWait(runLock, timeout))) {\n@@ -278,2 +260,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(RawMonitorExit, jvmti, runLock))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(runLock))) {\n@@ -291,2 +272,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(SetTag, jvmti, taggedObjectsList[i], 0))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->SetTag(taggedObjectsList[i], 0))) {\n@@ -305,2 +285,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)taggedObjectsList))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)taggedObjectsList))) {\n@@ -313,2 +292,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(RawMonitorEnter, jvmti, endLock))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(endLock))) {\n@@ -317,2 +295,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(RawMonitorNotify, jvmti, endLock))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorNotify(endLock))) {\n@@ -321,2 +298,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(RawMonitorExit, jvmti, endLock))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(endLock))) {\n@@ -336,2 +312,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, jvmti, startLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(startLock))) {\n@@ -343,5 +318,1 @@\n-            NSK_CPP_STUB5(RunAgentThread, jvmti,\n-                                          threadObj,\n-                                          agent_start,\n-                                          NULL,\n-                                          JVMTI_THREAD_NORM_PRIORITY))) {\n+            jvmti->RunAgentThread(threadObj, agent_start, NULL, JVMTI_THREAD_NORM_PRIORITY))) {\n@@ -352,2 +323,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(RawMonitorWait, jvmti, startLock, timeout))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorWait(startLock, timeout))) {\n@@ -359,2 +329,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, jvmti, startLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(startLock))) {\n@@ -373,3 +342,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (thrClass =\n-            NSK_CPP_STUB2(FindClass, jni,\n-                                     \"java\/lang\/Thread\")) != NULL )) {\n+    if (!NSK_JNI_VERIFY(jni, (thrClass = jni->FindClass(\"java\/lang\/Thread\")) != NULL )) {\n@@ -380,5 +347,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (cid =\n-            NSK_CPP_STUB4(GetMethodID, jni,\n-                                       thrClass,\n-                                       \"<init>\",\n-                                       \"()V\")) != NULL )) {\n+    if (!NSK_JNI_VERIFY(jni, (cid = jni->GetMethodID(thrClass, \"<init>\", \"()V\")) != NULL )) {\n@@ -389,4 +352,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (result =\n-            NSK_CPP_STUB3(NewObject, jni,\n-                                     thrClass,\n-                                     cid )) != NULL )) {\n+    if (!NSK_JNI_VERIFY(jni, (result = jni->NewObject(thrClass, cid)) != NULL )) {\n@@ -415,2 +375,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, jvmti, endLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(endLock))) {\n@@ -433,2 +392,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(RawMonitorWait, jvmti, endLock, timeout))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorWait(endLock, timeout))) {\n@@ -439,2 +397,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, jvmti, endLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(endLock))) {\n@@ -453,1 +410,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, target, tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(target, tag))) {\n@@ -468,5 +425,3 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(IterateOverHeap, jvmti,\n-                                           JVMTI_HEAP_OBJECT_TAGGED,\n-                                           heapObjectCallback,\n-                                           NULL \/*user_data*\/))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_TAGGED,\n+                                                 heapObjectCallback,\n+                                                 NULL \/*user_data*\/))) {\n@@ -500,6 +455,4 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB5(IterateOverReachableObjects, jvmti,\n-                                                       heapRootCallback,\n-                                                       stackReferenceCallback,\n-                                                       objectReferenceCallback,\n-                                                       NULL \/*user_data*\/))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverReachableObjects(heapRootCallback,\n+                                                             stackReferenceCallback,\n+                                                             objectReferenceCallback,\n+                                                             NULL \/*user_data*\/))) {\n@@ -533,6 +486,4 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB5(IterateOverInstancesOfClass, jvmti,\n-                                                       debugeeClass,\n-                                                       JVMTI_HEAP_OBJECT_TAGGED,\n-                                                       heapObjectCallback,\n-                                                       NULL \/*user_data*\/))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverInstancesOfClass(debugeeClass,\n+                                                             JVMTI_HEAP_OBJECT_TAGGED,\n+                                                             heapObjectCallback,\n+                                                             NULL \/*user_data*\/))) {\n@@ -564,3 +515,1 @@\n-            NSK_CPP_STUB3(GetStaticObjectField, jni,\n-                                                debugeeClass,\n-                                                rootFieldID )) != NULL )) {\n+            jni->GetStaticObjectField(debugeeClass, rootFieldID)) != NULL )) {\n@@ -576,5 +525,3 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(IterateOverObjectsReachableFromObject, jvmti,\n-                                                                 root,\n-                                                                 objectReferenceCallback,\n-                                                                 NULL \/*user_data*\/))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverObjectsReachableFromObject(root,\n+                                                                       objectReferenceCallback,\n+                                                                       NULL \/*user_data*\/))) {\n@@ -612,2 +559,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (debugeeClass = (jclass)\n-            NSK_CPP_STUB2(NewGlobalRef, jni, debugeeClass)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (debugeeClass = (jclass)jni->NewGlobalRef(debugeeClass)) != NULL))\n@@ -618,4 +564,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni,\n-                                            debugeeClass,\n-                                            \"root\",\n-                                            ROOT_SIGNATURE)) != NULL )) {\n+            jni->GetStaticFieldID(debugeeClass, \"root\", ROOT_SIGNATURE)) != NULL )) {\n@@ -634,5 +577,5 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, debugeeClass));\n-    NSK_TRACE(NSK_CPP_STUB2(DestroyRawMonitor, jvmti, counterMonitor_ptr));\n-    NSK_TRACE(NSK_CPP_STUB2(DestroyRawMonitor, jvmti, startLock));\n-    NSK_TRACE(NSK_CPP_STUB2(DestroyRawMonitor, jvmti, runLock));\n-    NSK_TRACE(NSK_CPP_STUB2(DestroyRawMonitor, jvmti, endLock));\n+    NSK_TRACE(jni->DeleteGlobalRef(debugeeClass));\n+    NSK_TRACE(jvmti->DestroyRawMonitor(counterMonitor_ptr));\n+    NSK_TRACE(jvmti->DestroyRawMonitor(startLock));\n+    NSK_TRACE(jvmti->DestroyRawMonitor(runLock));\n+    NSK_TRACE(jvmti->DestroyRawMonitor(endLock));\n@@ -666,2 +609,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"counterMonitor\", &counterMonitor_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"counterMonitor\", &counterMonitor_ptr))) {\n@@ -671,2 +613,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"startLock\", &startLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"startLock\", &startLock))) {\n@@ -675,2 +616,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"runLock\", &runLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"runLock\", &runLock))) {\n@@ -679,2 +619,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"endLock\", &endLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"endLock\", &endLock))) {\n@@ -687,2 +626,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -691,2 +629,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/allocation\/AP04\/ap04t003\/ap04t003.cpp","additions":61,"deletions":124,"binary":false,"changes":185,"status":"modified"},{"patch":"@@ -108,1 +108,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, target, tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(target, tag))) {\n@@ -115,2 +115,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (referrer =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, ref)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (referrer = jni->NewGlobalRef(ref)) != NULL))\n@@ -133,6 +132,4 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB5(IterateOverReachableObjects, jvmti,\n-                                                           heapRootCallback,\n-                                                           stackReferenceCallback,\n-                                                           objectReferenceCallback,\n-                                                           NULL \/*user_data*\/))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->IterateOverReachableObjects(heapRootCallback,\n+                                                                 stackReferenceCallback,\n+                                                                 objectReferenceCallback,\n+                                                                 NULL \/*user_data*\/))) {\n@@ -159,6 +156,2 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB4(IterateOverObjectsReachableFromObject,\n-                        jvmti,\n-                        referrer,\n-                        objectReferenceCallback,\n-                        NULL \/*user_data*\/))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->IterateOverObjectsReachableFromObject(\n+                    referrer, objectReferenceCallback, NULL \/*user_data*\/))) {\n@@ -183,1 +176,1 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, referrer));\n+        NSK_TRACE(jni->DeleteGlobalRef(referrer));\n@@ -216,2 +209,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -220,2 +212,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/allocation\/AP05\/ap05t001\/ap05t001.cpp","additions":11,"deletions":20,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -106,1 +106,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, target, tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(target, tag))) {\n@@ -114,2 +114,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (referrer =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, ref)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (referrer = jni->NewGlobalRef(ref)) != NULL))\n@@ -123,6 +122,4 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB5(IterateOverReachableObjects, jvmti,\n-                                                       heapRootCallback,\n-                                                       stackReferenceCallback,\n-                                                       objectReferenceCallback,\n-                                                       NULL \/*user_data*\/))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverReachableObjects(heapRootCallback,\n+                                                             stackReferenceCallback,\n+                                                             objectReferenceCallback,\n+                                                             NULL \/*user_data*\/))) {\n@@ -145,6 +142,3 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(IterateOverObjectsReachableFromObject,\n-                jvmti,\n-                referrer,\n-                objectReferenceCallback,\n-                NULL \/*user_data*\/))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverObjectsReachableFromObject(referrer,\n+                                                                       objectReferenceCallback,\n+                                                                       NULL \/*user_data*\/))) {\n@@ -178,1 +172,1 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, referrer));\n+        NSK_TRACE(jni->DeleteGlobalRef(referrer));\n@@ -187,1 +181,1 @@\n-        NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, referrer));\n+        NSK_TRACE(jni->DeleteGlobalRef(referrer));\n@@ -219,2 +213,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -223,2 +216,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(GetCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/allocation\/AP05\/ap05t002\/ap05t002.cpp","additions":13,"deletions":21,"binary":false,"changes":34,"status":"modified"}]}