{"files":[{"patch":"@@ -509,1 +509,1 @@\n-  FLAGS_C_COMPILER_CHECK_ARGUMENTS(ARGUMENT: [ARG_ARGUMENT],\n+  FLAGS_C_COMPILER_CHECK_ARGUMENTS(ARGUMENT: ARG_ARGUMENT,\n@@ -512,2 +512,2 @@\n-      PREFIX: [ARG_PREFIX])\n-  FLAGS_CXX_COMPILER_CHECK_ARGUMENTS(ARGUMENT: [ARG_ARGUMENT],\n+      PREFIX: ARG_PREFIX)\n+  FLAGS_CXX_COMPILER_CHECK_ARGUMENTS(ARGUMENT: ARG_ARGUMENT,\n@@ -516,1 +516,1 @@\n-      PREFIX: [ARG_PREFIX])\n+      PREFIX: ARG_PREFIX)\n","filename":"make\/autoconf\/flags.m4","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -55,1 +55,1 @@\n-    m4_foreach(arg, m4_split(m4_normalize($2)), [\n+    m4_foreach([arg], m4_split(m4_normalize($2)), [\n@@ -67,3 +67,8 @@\n-    m4_foreach([arg], [$3], [\n-      m4_if(m4_bregexp(arg, [: ]), -1, m4_define([arg], m4_bpatsubst(arg, [:], [: ])))\n-      m4_define(arg_name, m4_substr(arg, 0, m4_bregexp(arg, [: ])))\n+    # Delicate quoting and unquoting sequence to ensure the actual value is passed along unchanged\n+    # For details on how this works, see https:\/\/git.openjdk.org\/jdk\/pull\/11458#discussion_r1038173051\n+    # WARNING: Proceed at the risk of your own sanity, getting this to work has made me completely\n+    # incapable of feeling love or any other positive emotion\n+    # ~Julian\n+    m4_foreach([arg], m4_dquote(m4_dquote_elt($3)), [\n+      m4_if(m4_index(arg, [: ]), -1, [m4_define([arg], m4_dquote(m4_bpatsubst(m4_dquote(arg), [:], [: ])))])\n+      m4_define(arg_name, m4_substr(arg, 0, m4_index(arg, [: ])))\n@@ -73,1 +78,1 @@\n-      m4_pushdef([ARG_][]arg_name, m4_bpatsubst(m4_substr(arg, m4_incr(m4_incr(m4_bregexp(arg, [: ])))), [^\\s*], []))\n+      m4_pushdef([ARG_][]arg_name, m4_bpatsubst(m4_bpatsubst(m4_dquote(m4_dquote(arg)), arg_name[: ]), [^\\s*]))\n@@ -383,1 +388,1 @@\n-  m4_define([ARG_DESC], m4_if(ARG_DESC, , [Enable the ARG_NAME feature], m4_normalize(ARG_DESC)))\n+  m4_define([ARG_DESC], m4_if(m4_quote(ARG_DESC), , [[Enable the ARG_NAME feature]], [m4_normalize(ARG_DESC)]))\n@@ -386,1 +391,1 @@\n-  m4_define([ARG_CHECKING_MSG], m4_if(ARG_CHECKING_MSG, , [for --enable-ARG_NAME], m4_normalize(ARG_CHECKING_MSG)))\n+  m4_define([ARG_CHECKING_MSG], m4_if(m4_quote(ARG_CHECKING_MSG), , [[for --enable-ARG_NAME]], [m4_normalize(ARG_CHECKING_MSG)]))\n@@ -390,5 +395,5 @@\n-  m4_define([ARG_CHECK_AVAILABLE], m4_if(ARG_CHECK_AVAILABLE, , :, ARG_CHECK_AVAILABLE))\n-  m4_define([ARG_IF_GIVEN], m4_if(ARG_IF_GIVEN, , :, ARG_IF_GIVEN))\n-  m4_define([ARG_IF_NOT_GIVEN], m4_if(ARG_IF_NOT_GIVEN, , :, ARG_IF_NOT_GIVEN))\n-  m4_define([ARG_IF_ENABLED], m4_if(ARG_IF_ENABLED, , :, ARG_IF_ENABLED))\n-  m4_define([ARG_IF_DISABLED], m4_if(ARG_IF_DISABLED, , :, ARG_IF_DISABLED))\n+  m4_if(ARG_CHECK_AVAILABLE, , [m4_define([ARG_CHECK_AVAILABLE], [:])])\n+  m4_if(ARG_IF_GIVEN, , [m4_define([ARG_IF_GIVEN], [:])])\n+  m4_if(ARG_IF_NOT_GIVEN, , [m4_define([ARG_IF_NOT_GIVEN], [:])])\n+  m4_if(ARG_IF_ENABLED, , [m4_define([ARG_IF_ENABLED], [:])])\n+  m4_if(ARG_IF_DISABLED, , [m4_define([ARG_IF_DISABLED], [:])])\n@@ -657,1 +662,1 @@\n-  m4_define([ARG_DESC], m4_if(ARG_DESC, , [Give a value for the ARG_NAME feature], m4_normalize(ARG_DESC)))\n+  m4_define([ARG_DESC], m4_if(m4_quote(ARG_DESC), , [[Give a value for the ARG_NAME feature]], [m4_normalize(ARG_DESC)]))\n@@ -660,1 +665,1 @@\n-  m4_define([ARG_CHECKING_MSG], m4_if(ARG_CHECKING_MSG, , [for --with-ARG_NAME], m4_normalize(ARG_CHECKING_MSG)))\n+  m4_define([ARG_CHECKING_MSG], m4_if(m4_quote(ARG_CHECKING_MSG), , [[for --with-ARG_NAME]], [m4_normalize(ARG_CHECKING_MSG)]))\n@@ -666,6 +671,6 @@\n-  m4_define([ARG_CHECK_AVAILABLE], m4_if(ARG_CHECK_AVAILABLE, , :, ARG_CHECK_AVAILABLE))\n-  m4_define([ARG_CHECK_VALUE], m4_if(ARG_CHECK_VALUE, , :, ARG_CHECK_VALUE))\n-  m4_define([ARG_CHECK_FOR_FILES], m4_if(ARG_CHECK_FOR_FILES, , :, ARG_CHECK_FOR_FILES))\n-  m4_define([ARG_IF_AUTO], m4_if(ARG_IF_AUTO, , :, ARG_IF_AUTO))\n-  m4_define([ARG_IF_GIVEN], m4_if(ARG_IF_GIVEN, , :, ARG_IF_GIVEN))\n-  m4_define([ARG_IF_NOT_GIVEN], m4_if(ARG_IF_NOT_GIVEN, , :, ARG_IF_NOT_GIVEN))\n+  m4_if(ARG_CHECK_AVAILABLE, , [m4_define([ARG_CHECK_AVAILABLE], [:])])\n+  m4_if(ARG_CHECK_VALUE, , [m4_define([ARG_CHECK_VALUE], [:])])\n+  m4_if(ARG_CHECK_FOR_FILES, , [m4_define([ARG_CHECK_FOR_FILES], [:])])\n+  m4_if(ARG_IF_AUTO, , [m4_define([ARG_IF_AUTO], [:])])\n+  m4_if(ARG_IF_GIVEN, , [m4_define([ARG_IF_GIVEN], [:])])\n+  m4_if(ARG_IF_NOT_GIVEN, , [m4_define([ARG_IF_NOT_GIVEN], [:])])\n","filename":"make\/autoconf\/util.m4","additions":25,"deletions":20,"binary":false,"changes":45,"status":"modified"}]}