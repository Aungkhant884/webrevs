{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2018, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,0 +35,1 @@\n+import java.io.File;\n@@ -36,0 +37,1 @@\n+import java.io.FileOutputStream;\n@@ -110,0 +112,12 @@\n+        PrintWriter pw;\n+        String logName = System.getProperty(\"test.classes\") +\n+            File.separator + \"loadedClasses.log\";\n+        \/\/ Create a log file to capture the names of the classes in the\n+        \/\/ allLoadedClasses array. The log file is for assisting in debugging\n+        \/\/ in case a null class is encountered in the allLoadedClasses array.\n+        try {\n+            pw = new PrintWriter(new FileOutputStream(\n+                new File(logName), true));\n+        } catch (FileNotFoundException e) {\n+            throw new RuntimeException(\"Could not write loaded classes to log\", e);\n+        }\n@@ -112,1 +126,14 @@\n-            for (Class clazz : allLoadedClasses) {\n+            int len = allLoadedClasses.length;\n+            pw.println(\"    allLoadedClasses length: \" + len);\n+            for (int idx = 0; idx < len; idx++) {\n+                Class cls = allLoadedClasses[idx];\n+                pw.println(\"    \" + idx + \" \" +\n+                    ((cls != null) ? cls.getName() : \"null\"));\n+            }\n+            for (int idx = 0; idx < len; idx++) {\n+                Class clazz = allLoadedClasses[idx];\n+                if (clazz == null) {\n+                    pw.flush();\n+                    pw.close();\n+                    throw new RuntimeException(\"null class encountered\");\n+                }\n@@ -116,0 +143,2 @@\n+                        pw.flush();\n+                        pw.close();\n@@ -136,0 +165,2 @@\n+                        pw.flush();\n+                        pw.close();\n@@ -142,0 +173,2 @@\n+        pw.flush();\n+        pw.close();\n","filename":"test\/hotspot\/jtreg\/runtime\/RedefineTests\/ModifyAnonymous.java","additions":35,"deletions":2,"binary":false,"changes":37,"status":"modified"}]}