{"files":[{"patch":"@@ -176,0 +176,5 @@\n+    ifneq ($(VCRUNTIME_1_DLL), )\n+      ifneq ($(wildcard $(LIBS_DIR)\/$(notdir $(VCRUNTIME_1_DLL))), )\n+        JMOD_FLAGS += --exclude '$(notdir $(VCRUNTIME_1_DLL))'\n+      endif\n+    endif\n","filename":"make\/CreateJmods.gmk","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -162,0 +162,2 @@\n+      # Corresponds to --with-vcruntime-1-dll\n+      BASIC_EVAL_DEVKIT_VARIABLE([DEVKIT_VCRUNTIME_1_DLL])\n","filename":"make\/autoconf\/basic.m4","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -783,0 +783,1 @@\n+VCRUNTIME_1_DLL:=@VCRUNTIME_1_DLL@\n","filename":"make\/autoconf\/spec.gmk.in","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -93,1 +93,1 @@\n-VS_VERSION_INTERNAL_2019=141\n+VS_VERSION_INTERNAL_2019=142\n@@ -95,0 +95,1 @@\n+VS_VCRUNTIME_1_2019=vcruntime140_1.dll\n@@ -309,0 +310,1 @@\n+    eval VCRUNTIME_1_NAME=\"\\${VS_VCRUNTIME_1_${VS_VERSION}}\"\n@@ -356,0 +358,1 @@\n+      eval VCRUNTIME_1_NAME=\"\\${VS_VCRUNTIME_1_${VS_VERSION}}\"\n@@ -698,0 +701,25 @@\n+  AC_ARG_WITH(vcruntime-1-dll, [AS_HELP_STRING([--with-vcruntime-1-dll],\n+      [path to microsoft C++ runtime dll (vcruntime*_1.dll) (Windows only) @<:@probed@:>@])])\n+\n+  if test \"x$VCRUNTIME_1_NAME\" != \"x\"; then\n+    if test \"x$with_vcruntime_1_dll\" != x; then\n+      # If given explicitly by user, do not probe. If not present, fail directly.\n+      TOOLCHAIN_CHECK_POSSIBLE_MSVC_DLL($VCRUNTIME_1_NAME, [$with_vcruntime_1_dll],\n+          [--with-vcruntime-1-dll])\n+      if test \"x$MSVC_DLL\" = x; then\n+        AC_MSG_ERROR([Could not find a proper $VCRUNTIME_1_NAME as specified by --with-vcruntime-1-dll])\n+      fi\n+      VCRUNTIME_1_DLL=\"$MSVC_DLL\"\n+    elif test \"x$DEVKIT_VCRUNTIME_1_DLL\" != x; then\n+      TOOLCHAIN_CHECK_POSSIBLE_MSVC_DLL($VCRUNTIME_1_NAME, [$DEVKIT_VCRUNTIME_1_DLL], [devkit])\n+      if test \"x$MSVC_DLL\" = x; then\n+        AC_MSG_ERROR([Could not find a proper $VCRUNTIME_1_NAME as specified by devkit])\n+      fi\n+      VCRUNTIME_1_DLL=\"$MSVC_DLL\"\n+    else\n+      TOOLCHAIN_SETUP_MSVC_DLL([${VCRUNTIME_1_NAME}])\n+      VCRUNTIME_1_DLL=\"$MSVC_DLL\"\n+    fi\n+    AC_SUBST(VCRUNTIME_1_DLL)\n+  fi\n+\n","filename":"make\/autoconf\/toolchain_windows.m4","additions":29,"deletions":1,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -62,0 +62,5 @@\n+  $(eval $(call SetupCopyFiles,COPY_VCRUNTIME_1, \\\n+      DEST := $(LIB_DST_DIR), \\\n+      FILES := $(VCRUNTIME_1_DLL), \\\n+      MACRO := copy-and-chmod))\n+\n@@ -67,1 +72,1 @@\n-  TARGETS += $(COPY_MSVCR) $(COPY_MSVCP)\n+  TARGETS += $(COPY_MSVCR) $(COPY_VCRUNTIME_1) $(COPY_MSVCP)\n","filename":"make\/copy\/Copy-java.base.gmk","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n-# Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2019, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,1 +36,1 @@\n-MSVC_DIR=\"Microsoft.VC141.CRT\"\n+MSVC_DIR=\"Microsoft.VC142.CRT\"\n@@ -105,0 +105,1 @@\n+VCRUNTIME_1_DLL=${MSVC_DIR}\/vcruntime${VS_DLL_VERSION}_1.dll\n@@ -191,0 +192,1 @@\n+echo-info \"DEVKIT_VCRUNTIME_1_DLL_x86_64=\\\"\\$DEVKIT_ROOT\/VC\/redist\/x64\/$VCRUNTIME_1_DLL\\\"\"\n","filename":"make\/devkit\/createWindowsDevkit2019.sh","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -44,1 +44,1 @@\n-        FILES := $(MSVCR_DLL) $(MSVCP_DLL), \\\n+        FILES := $(MSVCR_DLL) $(VCRUNTIME_1_DLL) $(MSVCP_DLL), \\\n","filename":"make\/hotspot\/test\/GtestImage.gmk","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -215,0 +215,3 @@\n+  ifneq ($(VCRUNTIME_1_DLL), )\n+    LIBJLI_CFLAGS += -DVCRUNTIME_1_DLL_NAME='\"$(notdir $(VCRUNTIME_1_DLL))\"'\n+  endif\n","filename":"make\/lib\/CoreLibraries.gmk","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -255,0 +255,17 @@\n+#ifdef VCRUNTIME_1_DLL_NAME\n+        if (GetJREPath(crtpath, MAXPATHLEN)) {\n+            if (JLI_StrLen(crtpath) + JLI_StrLen(\"\\\\bin\\\\\") +\n+                    JLI_StrLen(VCRUNTIME_1_DLL_NAME) >= MAXPATHLEN) {\n+                JLI_ReportErrorMessage(JRE_ERROR11);\n+                return JNI_FALSE;\n+            }\n+            (void)JLI_StrCat(crtpath, \"\\\\bin\\\\\" VCRUNTIME_1_DLL_NAME);   \/* Add crt dll *\/\n+            JLI_TraceLauncher(\"CRT path is %s\\n\", crtpath);\n+            if (_access(crtpath, 0) == 0) {\n+                if (LoadLibrary(crtpath) == 0) {\n+                    JLI_ReportErrorMessage(DLL_ERROR4, crtpath);\n+                    return JNI_FALSE;\n+                }\n+            }\n+        }\n+#endif \/* VCRUNTIME_1_DLL_NAME *\/\n","filename":"src\/java.base\/windows\/native\/libjli\/java_md.c","additions":17,"deletions":0,"binary":false,"changes":17,"status":"modified"}]}