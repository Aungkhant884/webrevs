{"files":[{"patch":"@@ -1300,0 +1300,10 @@\n+inline uint vector_length(const Node* n) {\n+  const TypeVect* vt = n->bottom_type()->is_vect();\n+  return vt->length();\n+}\n+\n+inline uint vector_length_in_bytes(const Node* n) {\n+  const TypeVect* vt = n->bottom_type()->is_vect();\n+  return vt->length_in_bytes();\n+}\n+\n@@ -6037,1 +6047,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 4);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length() == 4) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -6070,1 +6081,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 8);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length() == 8) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -6179,1 +6191,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 2);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length() == 2) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -6211,1 +6224,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 4);\n+  predicate((UseAVX == 0) && (n->as_Vector()->length() == 4) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -6320,1 +6334,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 2);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length() == 2) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -6506,1 +6521,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 2);\n+  predicate((UseAVX == 0) && (n->as_Vector()->length() == 2) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -6694,1 +6710,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 4);\n+  predicate((UseAVX == 0) && (n->as_Vector()->length() == 4) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -6726,1 +6743,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 8);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length() == 8) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -6835,1 +6853,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 2);\n+  predicate((UseAVX == 0) && (n->as_Vector()->length() == 2) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -6867,1 +6886,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 4);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length() == 4) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -6976,1 +6996,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 2);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length() == 2) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -7162,1 +7183,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 2);\n+  predicate((UseAVX == 0) && (n->as_Vector()->length() == 2) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -7530,1 +7552,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 2);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length() == 2) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -7562,1 +7585,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 4);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length() == 4) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -7671,1 +7695,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 2);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length() == 2) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -7846,1 +7871,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 2);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length() == 2) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -8066,1 +8092,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 2);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length() == 2) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -8310,1 +8337,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length() == 2);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length() == 2) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -8895,1 +8923,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length_in_bytes() == 4);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length_in_bytes() == 4) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -8927,1 +8956,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length_in_bytes() == 8);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length_in_bytes() == 8) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -9037,1 +9067,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length_in_bytes() == 4);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length_in_bytes() == 4) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -9069,1 +9100,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length_in_bytes() == 4);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length_in_bytes() == 8) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -9179,1 +9211,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length_in_bytes() == 4);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length_in_bytes() == 4) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n@@ -9211,1 +9244,2 @@\n-  predicate(UseAVX > 0 && n->as_Vector()->length_in_bytes() == 8);\n+  predicate((UseAVX > 0) && (n->as_Vector()->length_in_bytes() == 8) &&\n+    (vector_length_in_bytes(n->in(1)) > 8));\n","filename":"src\/hotspot\/cpu\/x86\/x86.ad","additions":58,"deletions":24,"binary":false,"changes":82,"status":"modified"}]}