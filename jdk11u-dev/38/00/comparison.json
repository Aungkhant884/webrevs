{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -257,2 +257,1 @@\n-void report_fatal(const char* file, int line, const char* detail_fmt, ...)\n-{\n+void report_fatal(VMErrorType error_type, const char* file, int line, const char* detail_fmt, ...) {\n@@ -268,1 +267,3 @@\n-  VMError::report_and_die(Thread::current_or_null(), context, file, line, \"fatal error\", detail_fmt, detail_args);\n+  VMError::report_and_die(error_type, \"fatal error\", detail_fmt, detail_args,\n+                          Thread::current_or_null(), NULL, NULL, context,\n+                          file, line, 0);\n@@ -338,1 +339,1 @@\n-      fatal(\"OutOfMemory encountered: %s\", message);\n+      report_fatal(OOM_JAVA_HEAP_FATAL, __FILE__, __LINE__, \"OutOfMemory encountered: %s\", message);\n@@ -773,1 +774,0 @@\n-\n","filename":"src\/hotspot\/share\/utilities\/debug.cpp","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -112,1 +112,1 @@\n-  report_fatal(__FILE__, __LINE__, __VA_ARGS__);                                  \\\n+  report_fatal(INTERNAL_ERROR, __FILE__, __LINE__, __VA_ARGS__);                  \\\n@@ -155,1 +155,3 @@\n-  OOM_MMAP_ERROR   = 0xe0000002\n+  OOM_MMAP_ERROR   = 0xe0000002,\n+  OOM_MPROTECT_ERROR = 0xe0000003,\n+  OOM_JAVA_HEAP_FATAL = 0xe0000004\n@@ -177,1 +179,1 @@\n-void report_fatal(const char* file, int line, const char* detail_fmt, ...) ATTRIBUTE_PRINTF(3, 4);\n+void report_fatal(VMErrorType error_type, const char* file, int line, const char* detail_fmt, ...) ATTRIBUTE_PRINTF(4, 5);\n","filename":"src\/hotspot\/share\/utilities\/debug.hpp","additions":6,"deletions":4,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -607,1 +607,1 @@\n-     if (should_report_bug(_id) && _verbose) {\n+     if (should_submit_bug_report(_id) && _verbose) {\n@@ -1558,1 +1558,1 @@\n-  static bool skip_bug_url = !should_report_bug(_id);\n+  static bool skip_bug_url = !should_submit_bug_report(_id);\n","filename":"src\/hotspot\/share\/utilities\/vmError.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -117,0 +117,4 @@\n+  static bool should_submit_bug_report(unsigned int id) {\n+    return should_report_bug(id) && (id != OOM_JAVA_HEAP_FATAL);\n+  }\n+\n","filename":"src\/hotspot\/share\/utilities\/vmError.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"}]}