{"files":[{"patch":"@@ -244,0 +244,1 @@\n+        boolean haveSomeVM = false;\n@@ -245,4 +246,2 @@\n-            TestResult tr = doExec(javaCmd, \"-client\", \"-version\");\n-            if (!tr.matches(\".*Client VM.*\")) {\n-                flagError(tr, \"the expected vm -client did not launch\");\n-            }\n+            tryVmOption(\"-client\", \".*Client VM.*\");\n+            haveSomeVM = true;\n@@ -251,4 +250,14 @@\n-            TestResult tr = doExec(javaCmd, \"-server\", \"-version\");\n-            if (!tr.matches(\".*Server VM.*\")) {\n-                flagError(tr, \"the expected vm -server did not launch\");\n-            }\n+            tryVmOption(\"-server\", \".*Server VM.*\");\n+            haveSomeVM = true;\n+        }\n+        if (!haveSomeVM) {\n+            String msg = \"Don't have a known VM\";\n+            System.err.println(msg);\n+            throw new RuntimeException(msg);\n+        }\n+    }\n+\n+    private void tryVmOption(String opt, String expected) {\n+        TestResult tr = doExec(javaCmd, opt, \"-version\");\n+        if (!tr.matches(expected)) {\n+            flagError(tr, \"the expected vm \" + opt + \" did not launch\");\n","filename":"test\/jdk\/tools\/launcher\/ExecutionEnvironment.java","additions":17,"deletions":8,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -62,4 +62,1 @@\n-    private static final File dstLibArchDir =\n-            new File(dstLibDir, getJreArch());\n-\n-    private static final File dstServerDir = new File(dstLibArchDir, \"server\");\n+    private static final File dstServerDir = new File(dstLibDir, \"server\");\n@@ -68,1 +65,1 @@\n-    private static final File dstClientDir = new File(dstLibArchDir, \"client\");\n+    private static final File dstClientDir = new File(dstLibDir, \"client\");\n","filename":"test\/jdk\/tools\/launcher\/Test7029048.java","additions":2,"deletions":5,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -189,2 +189,1 @@\n-            File vmArchDir = new File(vmDir, getJreArch());\n-            File jvmFile = new File(vmArchDir, LIBJVM);\n+            File jvmFile = new File(vmDir, LIBJVM);\n","filename":"test\/jdk\/tools\/launcher\/TestHelper.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"}]}