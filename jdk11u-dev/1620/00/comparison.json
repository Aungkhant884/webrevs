{"files":[{"patch":"@@ -2701,0 +2701,6 @@\n+\n+  if (C->check_node_count(worklist.size() + NodeLimitFudgeFactor,\n+                          \"Too many clones required in clone_for_use_outside_loop in partial peeling\")) {\n+    return -1;\n+  }\n+\n@@ -3254,0 +3260,1 @@\n+  bool too_many_clones = false;\n@@ -3270,1 +3277,6 @@\n-            cloned_for_outside_use += clone_for_use_outside_loop(loop, n, worklist);\n+            int new_clones = clone_for_use_outside_loop(loop, n, worklist);\n+            if (new_clones == -1) {\n+              too_many_clones = true;\n+              break;\n+            }\n+            cloned_for_outside_use += new_clones;\n@@ -3298,1 +3310,1 @@\n-  if (exceed_node_budget || exceed_phi_limit) {\n+  if (too_many_clones || exceed_node_budget || exceed_phi_limit) {\n@@ -3300,1 +3312,1 @@\n-    if (TracePartialPeeling) {\n+    if (TracePartialPeeling && exceed_phi_limit) {\n","filename":"src\/hotspot\/share\/opto\/loopopts.cpp","additions":15,"deletions":3,"binary":false,"changes":18,"status":"modified"}]}