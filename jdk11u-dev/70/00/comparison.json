{"files":[{"patch":"@@ -28,1 +28,1 @@\n- * @summary Epsilon is able to allocate a lot of classes\n+ * @summary Epsilon is able to allocate a lot of classes, resizing Metaspace\n@@ -33,1 +33,1 @@\n- * @run main\/othervm -Xmx128m -XX:MetaspaceSize=1m -XX:MaxMetaspaceSize=64m -XX:+UnlockExperimentalVMOptions -XX:+UseEpsilonGC -Xlog:gc -Xlog:gc+metaspace TestClasses\n+ * @run main\/othervm -Xmx1g -XX:MetaspaceSize=1m -XX:MaxMetaspaceSize=64m -XX:+UnlockExperimentalVMOptions -XX:+UseEpsilonGC -Xlog:gc -Xlog:gc+metaspace TestClasses\n@@ -46,1 +46,2 @@\n-  static final int COUNT = 32*1024;\n+  static final int CLASSES = 1024;\n+  static final int FIELDS = 1024;\n@@ -51,0 +52,8 @@\n+    static final String[] FIELD_NAMES;\n+    static {\n+       FIELD_NAMES = new String[FIELDS];\n+       for (int c = 0; c < FIELDS; c++) {\n+          FIELD_NAMES[c] = \"f\" + c;\n+       }\n+    }\n+\n@@ -54,0 +63,3 @@\n+      for (String fName : FIELD_NAMES) {\n+          cw.visitField(Opcodes.ACC_STATIC | Opcodes.ACC_PRIVATE, fName, \"J\", null, null);\n+      }\n@@ -68,1 +80,1 @@\n-    for (int c = 0; c < COUNT; c++) {\n+    for (int c = 0; c < CLASSES; c++) {\n","filename":"test\/hotspot\/jtreg\/gc\/epsilon\/TestClasses.java","additions":16,"deletions":4,"binary":false,"changes":20,"status":"modified"}]}