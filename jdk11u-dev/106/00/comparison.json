{"files":[{"patch":"@@ -163,1 +163,2 @@\n-    if (FLAG_IS_DEFAULT(UseCBCond)) {\n+    \/\/ cbcond suspected to cause issues on Athena CPUs\n+    if (FLAG_IS_DEFAULT(UseCBCond) && !is_athena()) {\n@@ -221,1 +222,1 @@\n-               \"%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s\"\n+               \"%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s\"\n@@ -231,0 +232,1 @@\n+               (has_athena()      ? \", athena\" : \"\"),\n","filename":"src\/hotspot\/cpu\/sparc\/vm_version_sparc.cpp","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -45,0 +45,1 @@\n+    ISA_FJATHHPC,\n@@ -107,0 +108,1 @@\n+    ISA_fjathhpc_msk    = UINT64_C(1) << ISA_FJATHHPC,\n@@ -256,0 +258,1 @@\n+  static bool has_athena()       { return (_features & ISA_fjathhpc_msk) != 0; }\n@@ -309,0 +312,4 @@\n+  static bool is_athena() {\n+    return has_athena() || has_athena_plus() || has_athena_plus2();\n+  }\n+\n","filename":"src\/hotspot\/cpu\/sparc\/vm_version_sparc.hpp","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -358,0 +358,4 @@\n+#endif\n+\n+#ifndef AV_SPARC_FJATHHPC\n+#define AV_SPARC_FJATHHPC     0x00001000 \/\/ Fujitsu HPC (Athena) instrs\n@@ -364,0 +368,1 @@\n+  if (av & AV_SPARC_FJATHHPC)     features |= ISA_fjathhpc_msk;\n@@ -463,1 +468,1 @@\n-  bool is_sun4v = machine.match(\"sun4v\");   \/\/ All Oracle SPARC + Fujitsu Athena+\/++\n+  bool is_sun4v = machine.match(\"sun4v\");   \/\/ All Oracle SPARC + Fujitsu Athena(+\/++)\n@@ -466,1 +471,1 @@\n-  \/\/ Handle Athena+\/++ conservatively (simply because we are lacking info.).\n+  \/\/ Handle Athena(+\/++) conservatively (simply because we are lacking info.).\n@@ -468,3 +473,2 @@\n-  bool an_athena = has_athena_plus() || has_athena_plus2();\n-  bool do_sun4v  = is_sun4v && !an_athena;\n-  bool do_sun4u  = is_sun4u ||  an_athena;\n+  bool do_sun4v  = is_sun4v && !is_athena();\n+  bool do_sun4u  = is_sun4u ||  is_athena();\n","filename":"src\/hotspot\/os_cpu\/solaris_sparc\/vm_version_solaris_sparc.cpp","additions":9,"deletions":5,"binary":false,"changes":14,"status":"modified"}]}