{"files":[{"patch":"@@ -41,8 +41,0 @@\n-import javax.net.ssl.HostnameVerifier;\n-import javax.net.ssl.HttpsURLConnection;\n-import javax.net.ssl.SSLSession;\n-import javax.net.ssl.SSLSocket;\n-import java.io.BufferedReader;\n-import java.io.DataOutputStream;\n-import java.io.IOException;\n-import java.io.InputStreamReader;\n@@ -50,3 +42,0 @@\n-import java.net.URL;\n-\n-import static java.nio.charset.StandardCharsets.UTF_8;\n@@ -95,0 +84,5 @@\n+                output.asLines()\n+                        .stream()\n+                        .filter(line -> line.startsWith(\"Connecting to\"))\n+                        .forEach(System.out::println); \/\/ prints connection info from test jvm output\n+\n@@ -96,1 +90,2 @@\n-                    throw new RuntimeException(\"Test JVM process failed. JVM stderr= \" + output.getStderr());\n+                    output.asLines().forEach(System.out::println);\n+                    throw new RuntimeException(\"Test JVM process failed\");\n@@ -104,50 +99,0 @@\n-\n-    @Override\n-    protected boolean isCustomizedClientConnection() { return true; }\n-\n-    @Override\n-    protected void runServerApplication(SSLSocket socket) throws Exception {\n-        var response = \"Hello World!\";\n-        var out = new DataOutputStream(socket.getOutputStream());\n-        try {\n-            \/\/ We don't need to process the data from the socket\n-            \/\/ Simply sending a response right away is sufficient\n-            \/\/ to generate the desired debug output\n-            var responseBytes = response.getBytes(UTF_8);\n-\n-            out.writeBytes(\"HTTP\/1.0 200 OK\\r\\n\");\n-            out.writeBytes(\"Content-Length: \" + responseBytes.length + \"\\r\\n\");\n-            out.writeBytes(\"Content-Type: text\/html\\r\\n\\r\\n\");\n-            out.write(responseBytes);\n-            out.flush();\n-        } catch (IOException e) {\n-            out.writeBytes(\"HTTP\/1.0 400 \" + e.getMessage() + \"\\r\\n\");\n-            out.writeBytes(\"Content-Type: text\/html\\r\\n\\r\\n\");\n-            out.flush();\n-        }\n-    }\n-\n-    @Override\n-    protected void runClientApplication(int serverPort) throws Exception {\n-        var context = createClientSSLContext();\n-        HttpsURLConnection.setDefaultSSLSocketFactory(context.getSocketFactory());\n-        HttpsURLConnection.setDefaultHostnameVerifier(new NameVerifier());\n-\n-        var host = serverAddress == null ? \"localhost\" : serverAddress.getHostAddress();\n-        var url = new URL(\"https:\/\/\" + host + \":\" + serverPort + \"\/\");\n-        var httpsConnection = (HttpsURLConnection) url.openConnection();\n-        httpsConnection.disconnect();\n-        try (var in = new BufferedReader(new InputStreamReader(httpsConnection.getInputStream()))) {\n-            \/\/ Getting the input stream from the BufferedReader is sufficient to generate the desired debug output\n-            \/\/ We don't need to process the data\n-        } catch (IOException e) {\n-            throw new RuntimeException(e);\n-        }\n-    }\n-\n-    private static class NameVerifier implements HostnameVerifier {\n-        @Override\n-        public boolean verify(String s, SSLSession sslSession) {\n-            return true;\n-        }\n-    }\n","filename":"test\/jdk\/sun\/security\/ssl\/SSLLogger\/LoggingFormatConsistency.java","additions":7,"deletions":62,"binary":false,"changes":69,"status":"modified"}]}