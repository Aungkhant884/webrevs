{"files":[{"patch":"@@ -526,1 +526,1 @@\n-    private static final ThreadLocal<StringCoding.Result>\n+    private static final ThreadLocal<SoftReference<Result>>\n@@ -528,2 +528,2 @@\n-            protected StringCoding.Result initialValue() {\n-                return new StringCoding.Result();\n+            protected SoftReference<Result> initialValue() {\n+                return new SoftReference<>(new Result());\n@@ -531,0 +531,9 @@\n+    private static Result resultCached() {\n+        SoftReference<Result> sr = resultCached.get();\n+        Result r;\n+        if (sr == null || (r = sr.get()) == null) {\n+            r = new Result();\n+            resultCached.set(new SoftReference<>(r));\n+        }\n+        return r;\n+    }\n@@ -535,1 +544,1 @@\n-        Result result = resultCached.get();\n+        Result result = resultCached();\n@@ -585,1 +594,1 @@\n-       Result result = resultCached.get();\n+       Result result = resultCached();\n@@ -723,1 +732,1 @@\n-            return resultCached.get().with(Arrays.copyOfRange(src, sp, sp + len),\n+            return resultCached().with(Arrays.copyOfRange(src, sp, sp + len),\n@@ -729,1 +738,1 @@\n-        Result ret = resultCached.get();\n+        Result ret = resultCached();\n@@ -1063,1 +1072,1 @@\n-        Result ret = resultCached.get().with(ca, 0, cb.position());\n+        Result ret = resultCached().with(ca, 0, cb.position());\n","filename":"src\/java.base\/share\/classes\/java\/lang\/StringCoding.java","additions":17,"deletions":8,"binary":false,"changes":25,"status":"modified"}]}