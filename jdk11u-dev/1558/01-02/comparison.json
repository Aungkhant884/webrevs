{"files":[{"patch":"@@ -36,1 +36,5 @@\n-import com.sun.net.httpserver.*;\n+import com.sun.net.httpserver.HttpHandler;\n+import com.sun.net.httpserver.HttpServer;\n+import com.sun.net.httpserver.HttpsConfigurator;\n+import com.sun.net.httpserver.HttpsServer;\n+import com.sun.net.httpserver.HttpExchange;\n@@ -59,1 +63,0 @@\n-import static java.lang.System.out;\n@@ -61,1 +64,4 @@\n-import static org.testng.Assert.*;\n+import static org.testng.Assert.assertEquals;\n+import static org.testng.Assert.assertNotNull;\n+import static org.testng.Assert.fail;\n+import static java.lang.System.out;\n@@ -80,4 +86,4 @@\n-                {httpURI, false},\n-                {httpsURI, false},\n-                {httpURI, true},\n-                {httpsURI, true}\n+            { httpURI,   false },\n+            { httpsURI,  false },\n+            { httpURI,   true  },\n+            { httpsURI,  true  }\n@@ -89,4 +95,4 @@\n-                .proxy(NO_PROXY)\n-                .executor(executor)\n-                .sslContext(sslContext)\n-                .build();\n+                         .proxy(NO_PROXY)\n+                         .executor(executor)\n+                         .sslContext(sslContext)\n+                         .build();\n@@ -106,2 +112,2 @@\n-                        .buildAsync(URI.create(uri), new WebSocket.Listener() { })\n-                        .join();\n+                    .buildAsync(URI.create(uri), new WebSocket.Listener() { })\n+                    .join();\n@@ -117,0 +123,1 @@\n+                assertNotNull(wse.getResponse().statusCode());\n@@ -136,1 +143,1 @@\n-        if (sslContext == null) {\n+        if (sslContext == null)\n@@ -138,1 +145,0 @@\n-        }\n@@ -140,1 +146,2 @@\n-        final InetSocketAddress sa = new InetSocketAddress(InetAddress.getLoopbackAddress(), 0);\n+\n+        InetSocketAddress sa = new InetSocketAddress(InetAddress.getLoopbackAddress(), 0);\n@@ -144,6 +151,6 @@\n-                .scheme(\"ws\")\n-                .host(\"localhost\")\n-                .port(httpTestServer.getAddress().getPort())\n-                .path(\"\/\")\n-                .build()\n-                .toString() + queryPart;\n+                            .scheme(\"ws\")\n+                            .host(\"localhost\")\n+                            .port(httpTestServer.getAddress().getPort())\n+                            .path(\"\/\")\n+                            .build()\n+                            .toString() + queryPart;\n@@ -156,6 +163,6 @@\n-                .scheme(\"wss\")\n-                .host(\"localhost\")\n-                .port(httpsTestServer.getAddress().getPort())\n-                .path(\"\/\")\n-                .build()\n-                .toString() + queryPart;\n+                             .scheme(\"wss\")\n+                             .host(\"localhost\")\n+                             .port(httpsTestServer.getAddress().getPort())\n+                             .path(\"\/\")\n+                             .build()\n+                             .toString() + queryPart;\n@@ -177,3 +184,2 @@\n-        if (!(x instanceof CompletionException) && !(x instanceof ExecutionException)) {\n-            return x;\n-        }\n+        if (!(x instanceof CompletionException)\n+            && !(x instanceof ExecutionException)) return x;\n@@ -191,3 +197,4 @@\n-            try (InputStream is = e.getRequestBody(); OutputStream os = e.getResponseBody()) {\n-                final String testUri = \"\/?&raw=abc+def\/ghi=xyz&encoded=abc%2Bdef%2Fghi%3Dxyz\";\n-                final URI uri = e.getRequestURI();\n+            try(InputStream is = e.getRequestBody();\n+                OutputStream os = e.getResponseBody()) {\n+                String testUri = \"\/?&raw=abc+def\/ghi=xyz&encoded=abc%2Bdef%2Fghi%3Dxyz\";\n+                URI uri = e.getRequestURI();\n@@ -200,0 +207,1 @@\n+\n","filename":"test\/jdk\/java\/net\/httpclient\/websocket\/HandshakeUrlEncodingTest.java","additions":42,"deletions":34,"binary":false,"changes":76,"status":"modified"}]}