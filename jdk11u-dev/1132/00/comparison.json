{"files":[{"patch":"@@ -367,0 +367,27 @@\n+void cleanup_graphics_config_data(AwtGraphicsConfigDataPtr awt_data) {\n+    if (awt_data->awtImage != NULL) {\n+        free(awt_data->awtImage);\n+        awt_data->awtImage = NULL;\n+    }\n+\n+    if (awt_data->color_data != NULL) {\n+        if (awt_data->color_data->img_clr_tbl != NULL) {\n+            free(awt_data->color_data->img_clr_tbl);\n+        }\n+        if (awt_data->color_data->awt_icmLUT2Colors != NULL) {\n+            free(awt_data->color_data->awt_icmLUT2Colors);\n+        }\n+        if (awt_data->color_data->awt_icmLUT != NULL) {\n+            free(awt_data->color_data->awt_icmLUT);\n+        }\n+        if (awt_data->color_data->awt_Colors != NULL) {\n+            free(awt_data->color_data->awt_Colors);\n+        }\n+        if (awt_data->color_data->img_grays != NULL) {\n+            free(awt_data->color_data->img_grays);\n+        }\n+        free(awt_data->color_data);\n+        awt_data->color_data = NULL;\n+    }\n+}\n+\n@@ -388,0 +415,3 @@\n+    \/\/ Clean up awt_data for reuse, avoid memory leak\n+    cleanup_graphics_config_data(awt_data);\n+\n@@ -563,1 +593,1 @@\n-        free (awt_data->awtImage);\n+        cleanup_graphics_config_data(awt_data);\n@@ -578,1 +608,1 @@\n-        free(awt_data->awtImage);\n+        cleanup_graphics_config_data(awt_data);\n@@ -585,1 +615,1 @@\n-        free(awt_data->awtImage);\n+        cleanup_graphics_config_data(awt_data);\n@@ -606,2 +636,1 @@\n-        free(awt_data->awtImage);\n-        free(awt_data->color_data);\n+        cleanup_graphics_config_data(awt_data);\n@@ -684,2 +713,1 @@\n-            free(awt_data->awtImage);\n-            free(awt_data->color_data);\n+            cleanup_graphics_config_data(awt_data);\n@@ -832,2 +860,1 @@\n-        free(awt_data->awtImage);\n-        free(awt_data->color_data);\n+        cleanup_graphics_config_data(awt_data);\n@@ -836,0 +863,1 @@\n+\n@@ -885,2 +913,1 @@\n-        free(awt_data->awtImage);\n-        free(awt_data->color_data);\n+        cleanup_graphics_config_data(awt_data);\n","filename":"src\/java.desktop\/unix\/native\/common\/awt\/X11Color.c","additions":38,"deletions":11,"binary":false,"changes":49,"status":"modified"}]}