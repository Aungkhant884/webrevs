{"files":[{"patch":"@@ -24,0 +24,4 @@\n+import java.io.FileInputStream;\n+import java.io.InputStream;\n+import java.security.KeyStore;\n+import java.security.cert.X509Certificate;\n@@ -26,0 +30,1 @@\n+\n@@ -64,4 +69,0 @@\n-        \/\/ calculate certificate expiration date\n-        Date expirationDate = new Date(System.currentTimeMillis() + VALIDITY\n-                * 24 * 60 * 60 * 1000L);\n-\n@@ -74,0 +75,2 @@\n+        Date expirationDate = getCertExpirationDate();\n+\n@@ -117,0 +120,8 @@\n+    private static Date getCertExpirationDate() throws Exception {\n+        KeyStore ks = KeyStore.getInstance(\"JKS\");\n+        try (InputStream in = new FileInputStream(KEYSTORE)) {\n+            ks.load(in, PASSWORD.toCharArray());\n+        }\n+        X509Certificate cert = (X509Certificate) ks.getCertificate(KEY_ALIAS);\n+        return cert.getNotAfter();\n+    }\n","filename":"test\/jdk\/sun\/security\/tools\/jarsigner\/warnings\/NoTimestampTest.java","additions":15,"deletions":4,"binary":false,"changes":19,"status":"modified"}]}