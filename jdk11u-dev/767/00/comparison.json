{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -23,0 +23,1 @@\n+\n@@ -25,1 +26,6 @@\n-import java.io.*;\n+import jdk.test.lib.Utils;\n+\n+import java.io.IOException;\n+import java.nio.charset.StandardCharsets;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n@@ -27,2 +33,1 @@\n-public class GoldChecker extends AbstractGoldChecker\n-{\n+public class GoldChecker extends AbstractGoldChecker {\n@@ -31,2 +36,2 @@\n-    public GoldChecker(String main_class_name) {\n-        goldOutput = readGoldStr(main_class_name + \".gold\");\n+    public GoldChecker(String mainClassName) {\n+        goldOutput = readGoldStr(Path.of(Utils.TEST_SRC, mainClassName + \".gold\"));\n@@ -40,7 +45,3 @@\n-    private String readGoldStr(String gold_file_name) {\n-        RandomAccessFile f;\n-\n-        try {\n-            f = new RandomAccessFile(gold_file_name, \"r\");\n-        } catch (FileNotFoundException e) {\n-            throw new TestBug(\"Unable to open golden file '\" + gold_file_name + \"' for reading\");\n+    private String readGoldStr(Path goldenFile) {\n+        if (Files.notExists(goldenFile)) {\n+            throw new TestBug(\"Unable to open golden file '\" + goldenFile + \"' for reading\");\n@@ -48,1 +49,0 @@\n-\n@@ -50,1 +50,0 @@\n-\n@@ -52,3 +51,1 @@\n-            int len = (int)f.length();\n-            data = new byte[len];\n-            f.read(data);\n+            data = Files.readAllBytes(goldenFile);\n@@ -56,12 +53,1 @@\n-            throw new TestBug(\"Error reading from golden file'\" + gold_file_name + \"'\");\n-        }\n-\n-        try {\n-            f.close();\n-        } catch (IOException e) {\n-        }\n-\n-        try {\n-            return new String(data, \"US-ASCII\");\n-        } catch (UnsupportedEncodingException e) {\n-            throw new TestFailure( e );\n+            throw new TestBug(\"Error reading from golden file '\" + goldenFile + \"'\", e);\n@@ -69,0 +55,1 @@\n+        return new String(data, StandardCharsets.US_ASCII);\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/share\/GoldChecker.java","additions":17,"deletions":30,"binary":false,"changes":47,"status":"modified"}]}