{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2018, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,1 @@\n- * @run main\/othervm\/timeout=200 -Xmx300m FragmentMetaspace\n+ * @run main\/othervm\/timeout=200 -Xmx1g FragmentMetaspace\n@@ -45,2 +45,2 @@\n-        runGrowing(Long.valueOf(System.getProperty(\"time\", \"80000\")),\n-            Integer.valueOf(System.getProperty(\"iterations\", \"200\")));\n+        runGrowing(Long.valueOf(System.getProperty(\"time\", \"40000\")),\n+            Integer.valueOf(System.getProperty(\"iterations\", \"100\")));\n@@ -71,0 +71,3 @@\n+            } catch (OutOfMemoryError oome) {\n+                System.out.println(\"javac failed with OOM; ignored.\");\n+                return;\n","filename":"test\/hotspot\/jtreg\/runtime\/Metaspace\/FragmentMetaspace.java","additions":7,"deletions":4,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2018, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,0 +25,1 @@\n+import java.io.ByteArrayOutputStream;\n@@ -148,1 +149,2 @@\n-        int exitcode = javac.run(null, null, null, file.getCanonicalPath());\n+        ByteArrayOutputStream err = new ByteArrayOutputStream();\n+        int exitcode = javac.run(null, null, err, file.getCanonicalPath());\n@@ -150,2 +152,8 @@\n-            throw new RuntimeException(\"javac failure when compiling: \" +\n-                    file.getCanonicalPath());\n+            \/\/ Print Error\n+            System.err.print(err);\n+            if (err.toString().contains(\"java.lang.OutOfMemoryError: Java heap space\")) {\n+              throw new OutOfMemoryError(\"javac failed with resources exhausted\");\n+            } else {\n+              throw new RuntimeException(\"javac failure when compiling: \" +\n+                      file.getCanonicalPath());\n+            }\n","filename":"test\/hotspot\/jtreg\/runtime\/testlibrary\/GeneratedClassLoader.java","additions":12,"deletions":4,"binary":false,"changes":16,"status":"modified"}]}