{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -290,1 +290,0 @@\n-                    connections.add(clientConnection);\n@@ -293,1 +292,0 @@\n-                    Socket targetConnection = null;\n@@ -297,1 +295,1 @@\n-                            clientConnection.getOutputStream(), \"UTF-8\");\n+                            clientConnection.getOutputStream(), UTF_8);\n@@ -305,2 +303,6 @@\n-                    assert method.equalsIgnoreCase(\"POST\")\n-                            || method.equalsIgnoreCase(\"GET\");\n+                    if (!method.equals(\"GET\") && !method.equals(\"POST\")) {\n+                        System.err.println(now() + getName() + \": Unexpected request method. Method: \" + method);\n+                        clientConnection.close();\n+                        continue;\n+                    }\n+\n@@ -308,0 +310,6 @@\n+                    if (!path.contains(\"\/dummy\/x\")) {\n+                        System.err.println(now() + getName() + \": Unexpected request path. Path: \" + path);\n+                        clientConnection.close();\n+                        continue;\n+                    }\n+\n@@ -311,1 +319,1 @@\n-                        uri = new URI((secure ? \"https\" : \"http\") +\":\/\/\" + hostport + path);\n+                        uri = new URI((secure ? \"https\" : \"http\") + \":\/\/\" + hostport + path);\n@@ -313,1 +321,1 @@\n-                        System.err.printf(\"Bad target address: \\\"%s\\\" in \\\"%s\\\"%n\",\n+                        System.err.printf(now() + getName() + \": Bad target address: \\\"%s\\\" in \\\"%s\\\"%n\",\n@@ -319,0 +327,2 @@\n+                    \/\/ Method, path and URI are valid. Add to connections list\n+                    connections.add(clientConnection);\n","filename":"test\/jdk\/java\/net\/httpclient\/ServerCloseTest.java","additions":18,"deletions":8,"binary":false,"changes":26,"status":"modified"}]}