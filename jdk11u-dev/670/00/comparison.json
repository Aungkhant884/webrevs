{"files":[{"patch":"@@ -60,1 +60,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, object, tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(object, tag))) {\n@@ -151,1 +151,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(syncLock)))\n@@ -156,1 +156,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(syncLock)))\n@@ -176,2 +176,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(DestroyRawMonitor, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->DestroyRawMonitor(syncLock)))\n@@ -332,2 +331,1 @@\n-                NSK_CPP_STUB4(SetEventNotificationMode, jvmti,\n-                    JVMTI_ENABLE, event, NULL))) {\n+                jvmti->SetEventNotificationMode(JVMTI_ENABLE, event, NULL))) {\n@@ -339,3 +337,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(SetEventNotificationMode, jvmti,\n-                    JVMTI_ENABLE, event, NULL))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, event, NULL))) {\n@@ -434,4 +430,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                &eventCallbacks,\n-                                sizeof(eventCallbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n@@ -498,2 +491,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"_syncLock\", &syncLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"_syncLock\", &syncLock))) {\n@@ -510,1 +502,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/events\/EM02\/em02t006\/em02t006.cpp","additions":9,"deletions":17,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -136,1 +136,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(syncLock)))\n@@ -141,1 +141,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(syncLock)))\n@@ -161,2 +161,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(DestroyRawMonitor, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->DestroyRawMonitor(syncLock)))\n@@ -187,3 +186,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB5(\n-                GetMethodName, jvmti_env, method, &name, &sign, &genc))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &sign, &genc))) {\n@@ -200,2 +197,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)name))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)name))) {\n@@ -204,2 +200,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)sign))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)sign))) {\n@@ -209,2 +204,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*)genc))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)genc))) {\n@@ -222,3 +216,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB5(\n-                GetMethodName, jvmti_env, method, &name, &sign, &genc))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &sign, &genc))) {\n@@ -235,2 +227,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)name))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)name))) {\n@@ -239,2 +230,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)sign))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)sign))) {\n@@ -244,2 +234,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*)genc))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)genc))) {\n@@ -371,2 +360,1 @@\n-                NSK_CPP_STUB4(SetEventNotificationMode, jvmti,\n-                    JVMTI_ENABLE, event, NULL))) {\n+                jvmti->SetEventNotificationMode(JVMTI_ENABLE, event, NULL))) {\n@@ -378,3 +366,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(SetEventNotificationMode, jvmti,\n-                    JVMTI_ENABLE, event, NULL))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, event, NULL))) {\n@@ -480,4 +466,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                &eventCallbacks,\n-                                sizeof(eventCallbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n@@ -544,2 +527,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"_syncLock\", &syncLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"_syncLock\", &syncLock))) {\n@@ -555,1 +537,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/events\/EM02\/em02t007\/em02t007.cpp","additions":16,"deletions":34,"binary":false,"changes":50,"status":"modified"},{"patch":"@@ -135,1 +135,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(syncLock)))\n@@ -140,1 +140,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(syncLock)))\n@@ -160,2 +160,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(DestroyRawMonitor, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->DestroyRawMonitor(syncLock)))\n@@ -173,3 +172,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(\n-                GetThreadInfo, jvmti_env, thread, &info_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetThreadInfo(thread, &info_ptr))) {\n@@ -186,2 +183,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)info_ptr.name))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)info_ptr.name))) {\n@@ -199,3 +195,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(\n-                GetThreadInfo, jvmti_env, thread, &info_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetThreadInfo(thread, &info_ptr))) {\n@@ -212,2 +206,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)info_ptr.name))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)info_ptr.name))) {\n@@ -224,3 +217,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(\n-                GetThreadInfo, jvmti_env, thread, &info_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetThreadInfo(thread, &info_ptr))) {\n@@ -237,2 +228,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)info_ptr.name))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)info_ptr.name))) {\n@@ -249,3 +239,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(\n-                GetThreadInfo, jvmti_env, thread, &info_ptr))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetThreadInfo(thread, &info_ptr))) {\n@@ -262,2 +250,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)info_ptr.name))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)info_ptr.name))) {\n@@ -393,2 +380,1 @@\n-                NSK_CPP_STUB4(SetEventNotificationMode, jvmti,\n-                    JVMTI_ENABLE, event, NULL))) {\n+                jvmti->SetEventNotificationMode(JVMTI_ENABLE, event, NULL))) {\n@@ -400,3 +386,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(SetEventNotificationMode, jvmti,\n-                    JVMTI_ENABLE, event, NULL))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, event, NULL))) {\n@@ -496,4 +480,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                &eventCallbacks,\n-                                sizeof(eventCallbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n@@ -558,2 +539,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"_syncLock\", &syncLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"_syncLock\", &syncLock))) {\n@@ -569,1 +549,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/events\/EM02\/em02t008\/em02t008.cpp","additions":16,"deletions":36,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -146,1 +146,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(syncLock)))\n@@ -151,1 +151,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(syncLock)))\n@@ -171,2 +171,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(DestroyRawMonitor, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->DestroyRawMonitor(syncLock)))\n@@ -232,3 +231,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB5(\n-                GetMethodName, jvmti_env, method, &name, &sign, &genc))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &sign, &genc))) {\n@@ -243,2 +240,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)name))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)name))) {\n@@ -247,2 +243,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)sign))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)sign))) {\n@@ -252,2 +247,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*)genc))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)genc))) {\n@@ -279,3 +273,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB5(\n-                GetMethodName, jvmti_env, method, &name, &sign, &genc))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &sign, &genc))) {\n@@ -290,2 +282,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)name))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)name))) {\n@@ -294,2 +285,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)sign))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)sign))) {\n@@ -299,2 +289,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*)genc))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)genc))) {\n@@ -398,2 +387,1 @@\n-                NSK_CPP_STUB4(SetEventNotificationMode, jvmti,\n-                    JVMTI_ENABLE, event, NULL))) {\n+                jvmti->SetEventNotificationMode(JVMTI_ENABLE, event, NULL))) {\n@@ -405,3 +393,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(SetEventNotificationMode, jvmti,\n-                    JVMTI_ENABLE, event, NULL))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, event, NULL))) {\n@@ -501,4 +487,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                &eventCallbacks,\n-                                sizeof(eventCallbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n@@ -563,2 +546,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"_syncLock\", &syncLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"_syncLock\", &syncLock))) {\n@@ -575,1 +557,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/events\/EM02\/em02t009\/em02t009.cpp","additions":16,"deletions":34,"binary":false,"changes":50,"status":"modified"},{"patch":"@@ -151,1 +151,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(syncLock)))\n@@ -156,1 +156,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(syncLock)))\n@@ -176,2 +176,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(DestroyRawMonitor, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->DestroyRawMonitor(syncLock)))\n@@ -343,2 +342,1 @@\n-                NSK_CPP_STUB4(SetEventNotificationMode, jvmti,\n-                    JVMTI_ENABLE, event, NULL))) {\n+                jvmti->SetEventNotificationMode(JVMTI_ENABLE, event, NULL))) {\n@@ -350,3 +348,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(SetEventNotificationMode, jvmti,\n-                    JVMTI_ENABLE, event, NULL))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, event, NULL))) {\n@@ -446,4 +442,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                &eventCallbacks,\n-                                sizeof(eventCallbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n@@ -469,2 +462,1 @@\n-    if (!NSK_JNI_VERIFY(agentJNI, (cls =\n-            NSK_CPP_STUB2(FindClass, agentJNI, CLASS_NAME)) != NULL))\n+    if (!NSK_JNI_VERIFY(agentJNI, (cls = agentJNI->FindClass(CLASS_NAME)) != NULL))\n@@ -474,2 +466,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, agentJNI, cls, FIELD_ACC_NAME,\n-                                \"I\")) != NULL))\n+            agentJNI->GetStaticFieldID(cls, FIELD_ACC_NAME, \"I\")) != NULL))\n@@ -479,2 +470,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, agentJNI, cls, FIELD_MOD_NAME,\n-                                \"I\")) != NULL))\n+            agentJNI->GetStaticFieldID(cls, FIELD_MOD_NAME, \"I\")) != NULL))\n@@ -483,2 +473,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetFieldModificationWatch, jvmti, cls, field_modID)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetFieldModificationWatch(cls, field_modID)))\n@@ -487,2 +476,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetFieldAccessWatch, jvmti, cls, field_accID)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetFieldAccessWatch(cls, field_accID)))\n@@ -539,2 +527,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"_syncLock\", &syncLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"_syncLock\", &syncLock))) {\n@@ -551,1 +538,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/events\/EM02\/em02t010\/em02t010.cpp","additions":13,"deletions":26,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -147,1 +147,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(syncLock)))\n@@ -152,1 +152,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(syncLock)))\n@@ -172,2 +172,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(DestroyRawMonitor, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->DestroyRawMonitor(syncLock)))\n@@ -329,2 +328,1 @@\n-                NSK_CPP_STUB4(SetEventNotificationMode, jvmti,\n-                    JVMTI_ENABLE, event, NULL))) {\n+                jvmti->SetEventNotificationMode(JVMTI_ENABLE, event, NULL))) {\n@@ -336,3 +334,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(SetEventNotificationMode, jvmti,\n-                    JVMTI_ENABLE, event, NULL))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, event, NULL))) {\n@@ -431,4 +427,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                &eventCallbacks,\n-                                sizeof(eventCallbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n@@ -454,2 +447,1 @@\n-    if (!NSK_JNI_VERIFY(agentJNI, (cls =\n-            NSK_CPP_STUB2(FindClass, agentJNI, CLASS_NAME)) != NULL))\n+    if (!NSK_JNI_VERIFY(agentJNI, (cls = agentJNI->FindClass(CLASS_NAME)) != NULL))\n@@ -459,2 +451,1 @@\n-            NSK_CPP_STUB4(GetStaticMethodID, agentJNI, cls, METHOD_NAME,\n-                                \"()I\")) != NULL))\n+            agentJNI->GetStaticMethodID(cls, METHOD_NAME, \"()I\")) != NULL))\n@@ -463,2 +454,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetBreakpoint, jvmti, methodID, 0)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetBreakpoint(methodID, 0)))\n@@ -515,2 +505,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"_syncLock\", &syncLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"_syncLock\", &syncLock))) {\n@@ -526,1 +515,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/events\/EM02\/em02t011\/em02t011.cpp","additions":11,"deletions":22,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -55,2 +55,1 @@\n-    NSK_JNI_VERIFY(jni_env, (testedThread =\n-            NSK_CPP_STUB2(NewGlobalRef, jni_env, thrd)) != NULL);\n+    NSK_JNI_VERIFY(jni_env, (testedThread = jni_env->NewGlobalRef(thrd)) != NULL);\n@@ -154,1 +153,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(syncLock)))\n@@ -159,1 +158,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(syncLock)))\n@@ -179,2 +178,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(DestroyRawMonitor, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->DestroyRawMonitor(syncLock)))\n@@ -334,2 +332,1 @@\n-                NSK_CPP_STUB4(SetEventNotificationMode, jvmti,\n-                    JVMTI_ENABLE, event, NULL))) {\n+                jvmti->SetEventNotificationMode(JVMTI_ENABLE, event, NULL))) {\n@@ -341,3 +338,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(SetEventNotificationMode, jvmti,\n-                    JVMTI_ENABLE, event, NULL))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, event, NULL))) {\n@@ -436,4 +431,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                &eventCallbacks,\n-                                sizeof(eventCallbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n@@ -458,2 +450,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(SuspendThread, jvmti, testedThread)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(testedThread)))\n@@ -463,2 +454,1 @@\n-            if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(NotifyFramePop, jvmti, testedThread, j)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->NotifyFramePop(testedThread, j)))\n@@ -468,2 +458,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(ResumeThread, jvmti, testedThread)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(testedThread)))\n@@ -492,1 +481,1 @@\n-    NSK_CPP_STUB2(DeleteGlobalRef, agentJNI, testedThread);\n+    agentJNI->DeleteGlobalRef(testedThread);\n@@ -519,2 +508,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"_syncLock\", &syncLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"_syncLock\", &syncLock))) {\n@@ -531,1 +519,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/events\/EM02\/em02t012\/em02t012.cpp","additions":13,"deletions":25,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -114,3 +114,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(SetEventNotificationMode, jvmti, enable,\n-                                            event, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(enable, event, NULL))) {\n@@ -132,4 +130,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                &eventCallbacks,\n-                                sizeof(eventCallbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n@@ -156,3 +151,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GenerateEvents, jvmti,\n-                                JVMTI_EVENT_DYNAMIC_CODE_GENERATED)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GenerateEvents(JVMTI_EVENT_DYNAMIC_CODE_GENERATED)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/events\/EM04\/em04t001\/em04t001.cpp","additions":3,"deletions":10,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -130,3 +130,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB4(SetEventNotificationMode, jvmti, enable,\n-                                                eventsList[i], NULL))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(enable, eventsList[i], NULL))) {\n@@ -159,2 +157,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (debugeeClass =\n-            NSK_CPP_STUB2(FindClass, jni, DEBUGEE_CLASS_NAME)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (debugeeClass = jni->FindClass(DEBUGEE_CLASS_NAME)) != NULL))\n@@ -164,2 +161,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni, debugeeClass,\n-                                    THREAD_FIELD_NAME, THREAD_FIELD_SIG)) != NULL))\n+            jni->GetStaticFieldID(debugeeClass, THREAD_FIELD_NAME, THREAD_FIELD_SIG)) != NULL))\n@@ -169,1 +165,1 @@\n-            NSK_CPP_STUB3(GetStaticObjectField, jni, debugeeClass, threadFieldID)) != NULL))\n+            jni->GetStaticObjectField(debugeeClass, threadFieldID)) != NULL))\n@@ -172,2 +168,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (threadClass =\n-            NSK_CPP_STUB2(GetObjectClass, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (threadClass = jni->GetObjectClass(thread)) != NULL))\n@@ -179,2 +174,1 @@\n-                NSK_CPP_STUB4(GetMethodID, jni, threadClass,\n-                            methodsDesc[i].methodName, methodsDesc[i].methodSig)) != NULL))\n+                jni->GetMethodID(threadClass, methodsDesc[i].methodName, methodsDesc[i].methodSig)) != NULL))\n@@ -330,2 +324,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -340,3 +333,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks))))\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/events\/EM05\/em05t001\/em05t001.cpp","additions":8,"deletions":17,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -155,2 +155,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GenerateEvents, jvmti, JVMTI_EVENT_COMPILED_METHOD_LOAD))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GenerateEvents(JVMTI_EVENT_COMPILED_METHOD_LOAD))) {\n@@ -186,2 +185,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (debugeeClass =\n-            NSK_CPP_STUB2(FindClass, jni, DEBUGEE_CLASS_NAME)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (debugeeClass = jni->FindClass(DEBUGEE_CLASS_NAME)) != NULL))\n@@ -191,2 +189,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni, debugeeClass,\n-                                    THREAD_FIELD_NAME, THREAD_FIELD_SIG)) != NULL))\n+            jni->GetStaticFieldID(debugeeClass, THREAD_FIELD_NAME, THREAD_FIELD_SIG)) != NULL))\n@@ -196,1 +193,1 @@\n-            NSK_CPP_STUB3(GetStaticObjectField, jni, debugeeClass, threadFieldID)) != NULL))\n+            jni->GetStaticObjectField(debugeeClass, threadFieldID)) != NULL))\n@@ -199,2 +196,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (threadClass =\n-            NSK_CPP_STUB2(GetObjectClass, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (threadClass = jni->GetObjectClass(thread)) != NULL))\n@@ -206,2 +202,1 @@\n-                NSK_CPP_STUB4(GetMethodID, jni, threadClass,\n-                            methodsDesc[i].methodName, methodsDesc[i].methodSig)) != NULL))\n+                jni->GetMethodID(threadClass, methodsDesc[i].methodName, methodsDesc[i].methodSig)) != NULL))\n@@ -398,2 +393,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -408,3 +402,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks))))\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/events\/EM05\/em05t002\/em05t002.cpp","additions":8,"deletions":16,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -63,2 +63,1 @@\n-    if (!NSK_JNI_VERIFY(jni_env, (classObject =\n-            NSK_CPP_STUB2(GetObjectClass, jni_env, klass)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni_env, (classObject = jni_env->GetObjectClass(klass)) != NULL)) {\n@@ -70,2 +69,1 @@\n-            NSK_CPP_STUB4(GetMethodID, jni_env, classObject,\n-                        \"getName\", \"()Ljava\/lang\/String;\")) != NULL)) {\n+            jni_env->GetMethodID(classObject, \"getName\", \"()Ljava\/lang\/String;\")) != NULL)) {\n@@ -76,1 +74,1 @@\n-    jclassName = (jstring) NSK_CPP_STUB3(CallObjectMethod, jni_env, klass, methodID);\n+    jclassName = (jstring) jni_env->CallObjectMethod(klass, methodID);\n@@ -78,1 +76,1 @@\n-    className = NSK_CPP_STUB3(GetStringUTFChars, jni_env, jclassName, 0);\n+    className = jni_env->GetStringUTFChars(jclassName, 0);\n@@ -82,1 +80,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter, jvmti, syncLock)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(syncLock)))\n@@ -95,1 +93,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit, jvmti, syncLock)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(syncLock)))\n@@ -100,1 +98,1 @@\n-    NSK_CPP_STUB3(ReleaseStringUTFChars, jni_env, jclassName, className);\n+    jni_env->ReleaseStringUTFChars(jclassName, className);\n@@ -119,3 +117,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(SetEventNotificationMode, jvmti, enable,\n-                                            event, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(enable, event, NULL))) {\n@@ -174,4 +170,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                &eventCallbacks,\n-                                sizeof(eventCallbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n@@ -189,2 +182,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"_syncLock\", &syncLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"_syncLock\", &syncLock))) {\n@@ -233,2 +225,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(DestroyRawMonitor, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->DestroyRawMonitor(syncLock)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/events\/EM06\/em06t001\/em06t001.cpp","additions":11,"deletions":20,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -67,1 +67,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(syncLock)))\n@@ -72,1 +72,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(syncLock)))\n@@ -90,2 +90,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(DestroyRawMonitor, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->DestroyRawMonitor(syncLock)))\n@@ -237,2 +236,1 @@\n-                    NSK_CPP_STUB4(SetEventNotificationMode, jvmti,\n-                        JVMTI_ENABLE, event, NULL))) {\n+                    jvmti->SetEventNotificationMode(JVMTI_ENABLE, event, NULL))) {\n@@ -312,4 +310,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                &eventCallbacks,\n-                                sizeof(eventCallbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n@@ -366,2 +361,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"_syncLock\", &syncLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"_syncLock\", &syncLock))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/events\/EM07\/em07t001\/em07t001.cpp","additions":6,"deletions":12,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -66,3 +66,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB5(\n-                GetMethodName, jvmti_env, method, &name, &sign, &genc))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &sign, &genc))) {\n@@ -89,1 +87,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter, jvmti, syncLock)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(syncLock)))\n@@ -94,1 +92,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit, jvmti, syncLock)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(syncLock)))\n@@ -100,2 +98,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)name))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)name))) {\n@@ -104,2 +101,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)sign))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)sign))) {\n@@ -109,2 +105,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*)genc))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)genc))) {\n@@ -130,1 +125,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter, jvmti, syncLock)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(syncLock)))\n@@ -135,1 +130,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit, jvmti, syncLock)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(syncLock)))\n@@ -151,3 +146,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(SetEventNotificationMode, jvmti, enable,\n-                                            event, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(enable, event, NULL))) {\n@@ -194,3 +187,1 @@\n-    return NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                            &eventCallbacks,\n-                                            sizeof(eventCallbacks)));\n+    return NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks)));\n@@ -233,2 +224,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(DestroyRawMonitor, jvmti, syncLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->DestroyRawMonitor(syncLock)))\n@@ -263,2 +253,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"_syncLock\", &syncLock))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"_syncLock\", &syncLock))) {\n@@ -277,1 +266,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/events\/EM07\/em07t002\/em07t002.cpp","additions":13,"deletions":24,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -69,2 +69,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorEnter, jvmti, eventMon))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(eventMon))) {\n@@ -73,2 +72,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorNotify, jvmti, eventMon))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorNotify(eventMon))) {\n@@ -77,2 +75,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(RawMonitorExit, jvmti, eventMon))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(eventMon))) {\n@@ -92,2 +89,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetExtensionFunctions, jvmti, &extCount, &extList))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetExtensionFunctions(&extCount, &extList))) {\n@@ -139,2 +135,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(GetExtensionEvents, jvmti, &extCount, &extList))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetExtensionEvents(&extCount, &extList))) {\n@@ -158,2 +153,2 @@\n-                    NSK_CPP_STUB3(SetExtensionEventCallback, jvmti, extList[i].extension_event_index,\n-                     enable ? (jvmtiExtensionEvent)ClassUnload : NULL ))) {\n+                    jvmti->SetExtensionEventCallback(extList[i].extension_event_index,\n+                                                     enable ? (jvmtiExtensionEvent)ClassUnload : NULL ))) {\n@@ -205,2 +200,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(RawMonitorEnter, jvmti, eventMon))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(eventMon))) {\n@@ -209,2 +203,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(RawMonitorWait, jvmti, eventMon, timeout))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorWait(eventMon, timeout))) {\n@@ -213,2 +206,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(RawMonitorExit, jvmti, eventMon))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(eventMon))) {\n@@ -232,2 +224,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(RawMonitorEnter, jvmti, eventMon))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(eventMon))) {\n@@ -236,2 +227,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(RawMonitorWait, jvmti, eventMon, 10000))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorWait(eventMon, 10000))) {\n@@ -240,2 +230,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(RawMonitorExit, jvmti, eventMon))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(eventMon))) {\n@@ -260,1 +249,1 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DestroyRawMonitor, jvmti, eventMon));\n+    NSK_TRACE(jvmti->DestroyRawMonitor(eventMon));\n@@ -292,2 +281,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(CreateRawMonitor, jvmti, \"eventMon\", &eventMon))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"eventMon\", &eventMon))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/extension\/EX03\/ex03t001\/ex03t001.cpp","additions":15,"deletions":27,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -80,2 +80,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetSystemProperties,\n-            jvmti_env, &count, &propKeys))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetSystemProperties(&count, &propKeys))) {\n@@ -97,2 +96,1 @@\n-       if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetSystemProperty,\n-               jvmti_env, (const char*) propKeys[i], &prop))) {\n+       if (!NSK_JVMTI_VERIFY(jvmti_env->GetSystemProperty((const char*) propKeys[i], &prop))) {\n@@ -108,2 +106,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*) prop))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) prop))) {\n@@ -115,2 +112,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*) propKeys[i]))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) propKeys[i]))) {\n@@ -123,2 +119,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*) &propKeys))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) &propKeys))) {\n@@ -188,2 +183,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks,\n-            jvmti, &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -194,2 +188,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n@@ -197,2 +190,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_INIT, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_VM_INIT, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/general_functions\/GF01\/gf01t001\/gf01t001.cpp","additions":8,"deletions":16,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -55,2 +55,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(AddToBootstrapClassLoaderSearch, jvmti, segment))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddToBootstrapClassLoaderSearch(segment))) {\n@@ -65,4 +64,2 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter,\n-            jvmti_env, countLock)))\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-                \"failed to enter a raw monitor\\n\");\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorEnter(countLock)))\n+        jni_env->FatalError(\"failed to enter a raw monitor\\n\");\n@@ -72,4 +69,2 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit,\n-        jvmti_env, countLock)))\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-                \"failed to exit a raw monitor\\n\");\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->RawMonitorExit(countLock)))\n+        jni_env->FatalError(\"failed to exit a raw monitor\\n\");\n@@ -96,2 +91,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature,\n-            jvmti_env, klass, &sig, &generic))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(klass, &sig, &generic))) {\n@@ -106,2 +100,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-                jvmti_env, JVMTI_DISABLE, JVMTI_EVENT_CLASS_LOAD, NULL))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_CLASS_LOAD, NULL))) {\n@@ -124,2 +117,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature,\n-            jvmti_env, klass, &sig, &generic))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(klass, &sig, &generic))) {\n@@ -134,2 +126,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-                jvmti_env, JVMTI_DISABLE, JVMTI_EVENT_CLASS_PREPARE, NULL))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_CLASS_PREPARE, NULL))) {\n@@ -175,2 +166,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(CreateRawMonitor,\n-            jvmti, \"eventLock\", &countLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"eventLock\", &countLock)))\n@@ -192,2 +182,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti, &callbacks, size))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, size))) {\n@@ -200,2 +189,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_CLASS_LOAD, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_CLASS_LOAD, NULL))) {\n@@ -206,2 +194,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_CLASS_PREPARE, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_CLASS_PREPARE, NULL))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/general_functions\/GF04\/gf04t001\/gf04t001.cpp","additions":13,"deletions":26,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -78,2 +78,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(GetEnvironmentLocalStorage, jvmti, &storage))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetEnvironmentLocalStorage(&storage))) {\n@@ -118,3 +117,3 @@\n-    thrClass = NSK_CPP_STUB2(FindClass, env, \"java\/lang\/Thread\");\n-    cid = NSK_CPP_STUB4(GetMethodID, env, thrClass, \"<init>\", \"()V\");\n-    res = NSK_CPP_STUB3(NewObject, env, thrClass, cid);\n+    thrClass = env->FindClass(\"java\/lang\/Thread\");\n+    cid = env->GetMethodID(thrClass, \"<init>\", \"()V\");\n+    res = env->NewObject(thrClass, cid);\n@@ -196,2 +195,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(SetEnvironmentLocalStorage, jvmti_1, initialStorage))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_1->SetEnvironmentLocalStorage(initialStorage))) {\n@@ -215,2 +213,1 @@\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti_2,\n-                                    &eventCallbacks, sizeof(eventCallbacks)))) {\n+                jvmti_2->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks)))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/general_functions\/GF06\/gf06t001\/gf06t001.cpp","additions":6,"deletions":9,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -73,2 +73,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetVerboseFlag, jvmti, JVMTI_VERBOSE_GC, JNI_TRUE))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetVerboseFlag(JVMTI_VERBOSE_GC, JNI_TRUE))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/general_functions\/GF08\/gf08t001\/gf08t001.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -73,2 +73,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetVerboseFlag, jvmti, JVMTI_VERBOSE_CLASS, JNI_TRUE))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetVerboseFlag(JVMTI_VERBOSE_CLASS, JNI_TRUE))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/general_functions\/GF08\/gf08t002\/gf08t002.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -73,2 +73,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetVerboseFlag, jvmti, JVMTI_VERBOSE_JNI, JNI_TRUE))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetVerboseFlag(JVMTI_VERBOSE_JNI, JNI_TRUE))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/general_functions\/GF08\/gf08t003\/gf08t003.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -60,2 +60,1 @@\n-    setRedefinitionFailed = NSK_CPP_STUB4(GetStaticMethodID, jni,\n-                        testClass, \"setRedefinitionFailed\", \"()V\")) != NULL))\n+    setRedefinitionFailed = jni->GetStaticMethodID(testClass, \"setRedefinitionFailed\", \"()V\")) != NULL))\n@@ -63,2 +62,1 @@\n-    NSK_CPP_STUB2(FatalError, jni,\n-                \"TEST FAILED: while getting setRedefinitionFailed()\\n\");\n+    jni->FatalError(\"TEST FAILED: while getting setRedefinitionFailed()\\n\");\n@@ -68,2 +66,1 @@\n-    setRedefinitionDone = NSK_CPP_STUB4(GetStaticMethodID, jni,\n-                testClass, \"setRedefinitionDone\", \"()V\")) != NULL))\n+    setRedefinitionDone = jni->GetStaticMethodID(testClass, \"setRedefinitionDone\", \"()V\")) != NULL))\n@@ -71,2 +68,1 @@\n-    NSK_CPP_STUB2(FatalError, jni,\n-        \"TEST FAILED: while getting setRedefinitionDone()\\n\");\n+    jni->FatalError(\"TEST FAILED: while getting setRedefinitionDone()\\n\");\n@@ -85,2 +81,1 @@\n-      if (!NSK_JNI_VERIFY_VOID(jni, NSK_CPP_STUB3(CallStaticVoidMethod, jni,\n-                                   testClass, setRedefinitionFailed)))\n+      if (!NSK_JNI_VERIFY_VOID(jni, jni->CallStaticVoidMethod(testClass, setRedefinitionFailed)))\n@@ -88,2 +83,1 @@\n-         NSK_CPP_STUB2(FatalError, jni,\n-                \"TEST FAILED: while calling setRedefinitionFailed()\\n\");\n+         jni->FatalError(\"TEST FAILED: while calling setRedefinitionFailed()\\n\");\n@@ -94,2 +88,1 @@\n-  if (!NSK_JNI_VERIFY_VOID(jni, NSK_CPP_STUB3(CallStaticVoidMethod, jni,\n-                           testClass, setRedefinitionDone)))\n+  if (!NSK_JNI_VERIFY_VOID(jni, jni->CallStaticVoidMethod(testClass, setRedefinitionDone)))\n@@ -97,2 +90,1 @@\n-    NSK_CPP_STUB2(FatalError, jni,\n-        \"TEST FAILED: while calling setRedefinitionDone()\\n\");\n+    jni->FatalError(\"TEST FAILED: while calling setRedefinitionDone()\\n\");\n@@ -153,4 +145,2 @@\n-  if (!NSK_JNI_VERIFY(jni, (method = NSK_CPP_STUB4(GetMethodID,\n-            jni, clas, \"<init>\",\"(Ljava\/lang\/String;)V\")) != NULL)) {\n-    NSK_CPP_STUB2(FatalError, jni,\n-            \"failed to get ID for the java method\\n\");\n+  if (!NSK_JNI_VERIFY(jni, (method = jni->GetMethodID(clas, \"<init>\", \"(Ljava\/lang\/String;)V\")) != NULL)) {\n+    jni->FatalError(\"failed to get ID for the java method\\n\");\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/hotswap\/HS103\/hs103t002\/hs103t002.cpp","additions":10,"deletions":20,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -52,2 +52,1 @@\n-    if ( ! NSK_VERIFY ( JNI_OK == NSK_CPP_STUB3(GetEnv, vm,\n-                    (void **)&jvmti, JVMTI_VERSION_1_1) ) ) {\n+    if ( ! NSK_VERIFY ( JNI_OK == vm->GetEnv((void **)&jvmti, JVMTI_VERSION_1_1) ) ) {\n@@ -64,2 +63,1 @@\n-        if (! NSK_JVMTI_VERIFY ( NSK_CPP_STUB2(AddCapabilities, jvmti,\n-                &caps) )) {\n+        if (! NSK_JVMTI_VERIFY ( jvmti->AddCapabilities(&caps) )) {\n@@ -79,2 +77,1 @@\n-    if ( ! NSK_JNI_VERIFY(jni, ( cla = NSK_CPP_STUB2(FindClass,\n-                                jni, SEARCH_NAME) ) != NULL ) ) {\n+    if ( ! NSK_JNI_VERIFY(jni, ( cla = jni->FindClass(SEARCH_NAME) ) != NULL ) ) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/hotswap\/HS104\/hs104t002\/hs104t002.cpp","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -67,3 +67,2 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni_env, testClass, \"currentStep\", \"I\")) != NULL)) {\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-            \"TEST FAILED: while getting currentStep fieldID\\n\");\n+            jni_env->GetStaticFieldID(testClass, \"currentStep\", \"I\")) != NULL)) {\n+        jni_env->FatalError(\"TEST FAILED: while getting currentStep fieldID\\n\");\n@@ -72,4 +71,2 @@\n-    if (!NSK_JNI_VERIFY_VOID(jni_env,\n-            NSK_CPP_STUB4(SetStaticIntField, jni_env, testClass, fld, value))) {\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-            \"TEST FAILED: while setting  value of currentStep fieldID\\n\");\n+    if (!NSK_JNI_VERIFY_VOID(jni_env, jni_env->SetStaticIntField(testClass, fld, value))) {\n+        jni_env->FatalError(\"TEST FAILED: while setting  value of currentStep fieldID\\n\");\n@@ -84,3 +81,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(SetEventNotificationMode, jvmti_env, JVMTI_ENABLE,\n-                                            event, thread))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->SetEventNotificationMode(JVMTI_ENABLE, event, thread))) {\n@@ -96,3 +91,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(SetEventNotificationMode, jvmti_env, JVMTI_DISABLE,\n-                                            event, thread))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->SetEventNotificationMode(JVMTI_DISABLE, event, thread))) {\n@@ -112,3 +105,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(GetClassSignature, jvmti_env, klass,\n-                                &className, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(klass, &className, NULL))) {\n@@ -130,2 +121,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(RedefineClasses, jvmti_env, 1, &classDef))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->RedefineClasses(1, &classDef))) {\n@@ -137,2 +127,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)className))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)className))) {\n@@ -166,2 +155,2 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testClass));\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testedThread));\n+    NSK_TRACE(jni->DeleteGlobalRef(testClass));\n+    NSK_TRACE(jni->DeleteGlobalRef(testedThread));\n@@ -179,4 +168,2 @@\n-    if (!NSK_JNI_VERIFY(jni_env, (mid = NSK_CPP_STUB4(GetMethodID,\n-            jni_env, klass, METHOD_NAME, METHOD_SIG)) != NULL))\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-            \"[agent] failed to get ID for the java method\\n\");\n+    if (!NSK_JNI_VERIFY(jni_env, (mid = jni_env->GetMethodID(klass, METHOD_NAME, METHOD_SIG)) != NULL))\n+        jni_env->FatalError(\"[agent] failed to get ID for the java method\\n\");\n@@ -184,4 +171,2 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetBreakpoint,\n-            jvmti_env, mid, 1)))\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-            \"[agent] failed to set breakpoint\\n\");\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->SetBreakpoint(mid, 1)))\n+        jni_env->FatalError(\"[agent] failed to set breakpoint\\n\");\n@@ -203,3 +188,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(GetClassSignature, jvmti_env, klass,\n-                                &className, &generic))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(klass, &className, &generic))) {\n@@ -218,2 +201,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)className))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)className))) {\n@@ -224,2 +206,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*)generic))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)generic))) {\n@@ -256,2 +237,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &methodName, NULL, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &methodName, NULL, NULL))) {\n@@ -265,2 +245,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetMethodDeclaringClass,\n-                jvmti_env, method, &declaringClass))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodDeclaringClass(method, &declaringClass))) {\n@@ -270,2 +249,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature,\n-                jvmti_env, declaringClass, &declaringClassName, NULL))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(declaringClass, &declaringClassName, NULL))) {\n@@ -295,2 +273,1 @@\n-                if (!NSK_JVMTI_VERIFY(\n-                            NSK_CPP_STUB3(IsMethodObsolete, jvmti, method, &is_obsolete))) {\n+                if (!NSK_JVMTI_VERIFY(jvmti->IsMethodObsolete(method, &is_obsolete))) {\n@@ -329,2 +306,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*) declaringClassName))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) declaringClassName))) {\n@@ -336,2 +312,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*) methodName))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) methodName))) {\n@@ -365,2 +340,1 @@\n-        if (!NSK_JNI_VERIFY(jni_env, (klass =\n-                NSK_CPP_STUB2(GetObjectClass, jni_env, exception)) != NULL)) {\n+        if (!NSK_JNI_VERIFY(jni_env, (klass = jni_env->GetObjectClass(exception)) != NULL)) {\n@@ -397,2 +371,1 @@\n-        if (!NSK_JNI_VERIFY(jni_env, (klass =\n-                NSK_CPP_STUB2(GetObjectClass, jni_env, exception)) != NULL)) {\n+        if (!NSK_JNI_VERIFY(jni_env, (klass = jni_env->GetObjectClass(exception)) != NULL)) {\n@@ -438,2 +411,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(Allocate, jvmti,\n-                                newClassSize, &newClassBytes))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Allocate(newClassSize, &newClassBytes))) {\n@@ -463,2 +435,1 @@\n-    if (!NSK_JNI_VERIFY(jni_env, (klass =\n-            NSK_CPP_STUB2(GetObjectClass, jni_env, thread)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni_env, (klass = jni_env->GetObjectClass(thread)) != NULL)) {\n@@ -470,2 +441,1 @@\n-            NSK_CPP_STUB4(GetMethodID, jni_env, klass,\n-                        \"getName\", \"()Ljava\/lang\/String;\")) != NULL)) {\n+            jni_env->GetMethodID(klass, \"getName\", \"()Ljava\/lang\/String;\")) != NULL)) {\n@@ -476,2 +446,1 @@\n-    jthreadName = (jstring) NSK_CPP_STUB3(CallObjectMethod, jni_env, thread,\n-                        methodID);\n+    jthreadName = (jstring) jni_env->CallObjectMethod(thread, methodID);\n@@ -479,1 +448,1 @@\n-    threadName = NSK_CPP_STUB3(GetStringUTFChars, jni_env, jthreadName, 0);\n+    threadName = jni_env->GetStringUTFChars(jthreadName, 0);\n@@ -483,1 +452,1 @@\n-    NSK_CPP_STUB3(ReleaseStringUTFChars, jni_env, jthreadName, threadName);\n+    jni_env->ReleaseStringUTFChars(jthreadName, threadName);\n@@ -498,2 +467,1 @@\n-    if (!NSK_JNI_VERIFY(jni_env, (klass =\n-            NSK_CPP_STUB2(GetObjectClass, jni_env, object)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni_env, (klass = jni_env->GetObjectClass(object)) != NULL)) {\n@@ -504,3 +472,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(GetClassSignature, jvmti_env, klass,\n-                                &className, &generic))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(klass, &className, &generic))) {\n@@ -513,2 +479,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)className))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)className))) {\n@@ -519,2 +484,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*)generic))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)generic))) {\n@@ -538,2 +502,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetLocalVariableTable,\n-            jvmti_env, method, &entryCount, &table))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetLocalVariableTable(method, &entryCount, &table))) {\n@@ -548,2 +511,1 @@\n-                error = NSK_CPP_STUB5(GetLocalInt, jvmti_env, thread, 0,\n-                                        table[i].slot, &value);\n+                error = jvmti_env->GetLocalInt(thread, 0, table[i].slot, &value);\n@@ -558,2 +520,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                    jvmti_env, (unsigned char*)table[i].name))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)table[i].name))) {\n@@ -563,2 +524,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                    jvmti_env, (unsigned char*)table[i].signature))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)table[i].signature))) {\n@@ -570,2 +530,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*)table))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)table))) {\n@@ -586,2 +545,1 @@\n-    if (!NSK_JNI_VERIFY(env, (testClass = (jclass)\n-            NSK_CPP_STUB2(NewGlobalRef, env, cls)) != NULL))\n+    if (!NSK_JNI_VERIFY(env, (testClass = (jclass) env->NewGlobalRef(cls)) != NULL))\n@@ -590,2 +548,1 @@\n-    if (!NSK_JNI_VERIFY(env, (testedThread =\n-            NSK_CPP_STUB2(NewGlobalRef, env, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(env, (testedThread = env->NewGlobalRef(thread)) != NULL))\n@@ -605,2 +562,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(ResumeThread, jvmti, thread))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(thread))) {\n@@ -624,2 +580,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(SuspendThread, jvmti, thread))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(thread))) {\n@@ -641,2 +596,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(PopFrame, jvmti, thread))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->PopFrame(thread))) {\n@@ -649,2 +603,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(ResumeThread, jvmti, thread))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(thread))) {\n@@ -699,2 +652,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -712,3 +664,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks))))\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/hotswap\/HS201\/hs201t001\/hs201t001.cpp","additions":49,"deletions":99,"binary":false,"changes":148,"status":"modified"},{"patch":"@@ -67,3 +67,2 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni_env, testClass, \"currentStep\", \"I\")) != NULL)) {\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-            \"TEST FAILED: while getting currentStep fieldID\\n\");\n+            jni_env->GetStaticFieldID(testClass, \"currentStep\", \"I\")) != NULL)) {\n+        jni_env->FatalError(\"TEST FAILED: while getting currentStep fieldID\\n\");\n@@ -72,4 +71,2 @@\n-    if (!NSK_JNI_VERIFY_VOID(jni_env,\n-            NSK_CPP_STUB4(SetStaticIntField, jni_env, testClass, fld, value))) {\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-            \"TEST FAILED: while setting  value of currentStep fieldID\\n\");\n+    if (!NSK_JNI_VERIFY_VOID(jni_env, jni_env->SetStaticIntField(testClass, fld, value))) {\n+        jni_env->FatalError(\"TEST FAILED: while setting  value of currentStep fieldID\\n\");\n@@ -84,3 +81,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(SetEventNotificationMode, jvmti_env, JVMTI_ENABLE,\n-                                            event, thread))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->SetEventNotificationMode(JVMTI_ENABLE, event, thread))) {\n@@ -96,3 +91,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(SetEventNotificationMode, jvmti_env, JVMTI_DISABLE,\n-                                            event, thread))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->SetEventNotificationMode(JVMTI_DISABLE, event, thread))) {\n@@ -112,3 +105,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(GetClassSignature, jvmti_env, klass,\n-                                &className, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(klass, &className, NULL))) {\n@@ -130,2 +121,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(RedefineClasses, jvmti_env, 1, &classDef))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->RedefineClasses(1, &classDef))) {\n@@ -137,2 +127,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)className))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)className))) {\n@@ -166,2 +155,2 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testClass));\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testedThread));\n+    NSK_TRACE(jni->DeleteGlobalRef(testClass));\n+    NSK_TRACE(jni->DeleteGlobalRef(testedThread));\n@@ -179,4 +168,2 @@\n-    if (!NSK_JNI_VERIFY(jni_env, (mid = NSK_CPP_STUB4(GetMethodID,\n-            jni_env, klass, METHOD_NAME, METHOD_SIG)) != NULL))\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-            \"[agent] failed to get ID for the java method\\n\");\n+    if (!NSK_JNI_VERIFY(jni_env, (mid = jni_env->GetMethodID(klass, METHOD_NAME, METHOD_SIG)) != NULL))\n+        jni_env->FatalError(\"[agent] failed to get ID for the java method\\n\");\n@@ -184,4 +171,2 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetBreakpoint,\n-            jvmti_env, mid, 1)))\n-        NSK_CPP_STUB2(FatalError, jni_env,\n-            \"[agent] failed to set breakpoint\\n\");\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->SetBreakpoint(mid, 1)))\n+        jni_env->FatalError(\"[agent] failed to set breakpoint\\n\");\n@@ -203,3 +188,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(GetClassSignature, jvmti_env, klass,\n-                                &className, &generic))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(klass, &className, &generic))) {\n@@ -218,2 +201,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)className))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)className))) {\n@@ -224,2 +206,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*)generic))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)generic))) {\n@@ -256,2 +237,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &methodName, NULL, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &methodName, NULL, NULL))) {\n@@ -265,2 +245,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetMethodDeclaringClass,\n-                jvmti_env, method, &declaringClass))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodDeclaringClass(method, &declaringClass))) {\n@@ -270,2 +249,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature,\n-                jvmti_env, declaringClass, &declaringClassName, NULL))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(declaringClass, &declaringClassName, NULL))) {\n@@ -295,2 +273,1 @@\n-                if (!NSK_JVMTI_VERIFY(\n-                            NSK_CPP_STUB3(IsMethodObsolete, jvmti, method, &is_obsolete))) {\n+                if (!NSK_JVMTI_VERIFY(jvmti->IsMethodObsolete(method, &is_obsolete))) {\n@@ -329,2 +306,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*) declaringClassName))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) declaringClassName))) {\n@@ -336,2 +312,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*) methodName))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) methodName))) {\n@@ -365,2 +340,1 @@\n-        if (!NSK_JNI_VERIFY(jni_env, (klass =\n-                NSK_CPP_STUB2(GetObjectClass, jni_env, exception)) != NULL)) {\n+        if (!NSK_JNI_VERIFY(jni_env, (klass = jni_env->GetObjectClass(exception)) != NULL)) {\n@@ -397,2 +371,1 @@\n-        if (!NSK_JNI_VERIFY(jni_env, (klass =\n-                NSK_CPP_STUB2(GetObjectClass, jni_env, exception)) != NULL)) {\n+        if (!NSK_JNI_VERIFY(jni_env, (klass = jni_env->GetObjectClass(exception)) != NULL)) {\n@@ -438,2 +411,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(Allocate, jvmti,\n-                                newClassSize, &newClassBytes))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->Allocate(newClassSize, &newClassBytes))) {\n@@ -463,2 +435,1 @@\n-    if (!NSK_JNI_VERIFY(jni_env, (klass =\n-            NSK_CPP_STUB2(GetObjectClass, jni_env, thread)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni_env, (klass = jni_env->GetObjectClass(thread)) != NULL)) {\n@@ -470,2 +441,1 @@\n-            NSK_CPP_STUB4(GetMethodID, jni_env, klass,\n-                        \"getName\", \"()Ljava\/lang\/String;\")) != NULL)) {\n+            jni_env->GetMethodID(klass, \"getName\", \"()Ljava\/lang\/String;\")) != NULL)) {\n@@ -476,2 +446,1 @@\n-    jthreadName = (jstring) NSK_CPP_STUB3(CallObjectMethod, jni_env, thread,\n-                        methodID);\n+    jthreadName = (jstring) jni_env->CallObjectMethod(thread, methodID);\n@@ -479,1 +448,1 @@\n-    threadName = NSK_CPP_STUB3(GetStringUTFChars, jni_env, jthreadName, 0);\n+    threadName = jni_env->GetStringUTFChars(jthreadName, 0);\n@@ -483,1 +452,1 @@\n-    NSK_CPP_STUB3(ReleaseStringUTFChars, jni_env, jthreadName, threadName);\n+    jni_env->ReleaseStringUTFChars(jthreadName, threadName);\n@@ -498,2 +467,1 @@\n-    if (!NSK_JNI_VERIFY(jni_env, (klass =\n-            NSK_CPP_STUB2(GetObjectClass, jni_env, object)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni_env, (klass = jni_env->GetObjectClass(object)) != NULL)) {\n@@ -504,3 +472,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(GetClassSignature, jvmti_env, klass,\n-                                &className, &generic))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(klass, &className, &generic))) {\n@@ -513,2 +479,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*)className))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)className))) {\n@@ -519,2 +484,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*)generic))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)generic))) {\n@@ -538,2 +502,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetLocalVariableTable,\n-            jvmti_env, method, &entryCount, &table))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetLocalVariableTable(method, &entryCount, &table))) {\n@@ -548,2 +511,1 @@\n-                error = NSK_CPP_STUB5(GetLocalInt, jvmti_env, thread, 0,\n-                                        table[i].slot, &value);\n+                error = jvmti_env->GetLocalInt(thread, 0, table[i].slot, &value);\n@@ -558,2 +520,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                    jvmti_env, (unsigned char*)table[i].name))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)table[i].name))) {\n@@ -563,2 +524,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                    jvmti_env, (unsigned char*)table[i].signature))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)table[i].signature))) {\n@@ -570,2 +530,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-                jvmti_env, (unsigned char*)table))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*)table))) {\n@@ -586,2 +545,1 @@\n-    if (!NSK_JNI_VERIFY(env, (testClass = (jclass)\n-            NSK_CPP_STUB2(NewGlobalRef, env, cls)) != NULL))\n+    if (!NSK_JNI_VERIFY(env, (testClass = (jclass) env->NewGlobalRef(cls)) != NULL))\n@@ -590,2 +548,1 @@\n-    if (!NSK_JNI_VERIFY(env, (testedThread =\n-            NSK_CPP_STUB2(NewGlobalRef, env, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(env, (testedThread = env->NewGlobalRef(thread)) != NULL))\n@@ -605,2 +562,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(ResumeThread, jvmti, thread))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(thread))) {\n@@ -624,2 +580,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(SuspendThread, jvmti, thread))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(thread))) {\n@@ -641,2 +596,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(PopFrame, jvmti, thread))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->PopFrame(thread))) {\n@@ -649,2 +603,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(ResumeThread, jvmti, thread))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(thread))) {\n@@ -699,2 +652,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -712,3 +664,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks))))\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/hotswap\/HS201\/hs201t002\/hs201t002.cpp","additions":49,"deletions":99,"binary":false,"changes":148,"status":"modified"},{"patch":"@@ -66,1 +66,1 @@\n-    bytesCount = NSK_CPP_STUB2(GetArrayLength, jni_env, classBytes);\n+    bytesCount = jni_env->GetArrayLength(classBytes);\n@@ -68,1 +68,1 @@\n-        NSK_CPP_STUB3(GetByteArrayElements, jni_env, classBytes, &isCopy);\n+        jni_env->GetByteArrayElements(classBytes, &isCopy);\n@@ -77,2 +77,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &name, &sig, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &sig, NULL))) {\n@@ -93,2 +92,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*) name)))\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) name)))\n@@ -96,2 +94,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*) sig)))\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) sig)))\n@@ -109,2 +106,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetMethodDeclaringClass,\n-            jvmti_env, tMethodID, &decl_cls))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodDeclaringClass(tMethodID, &decl_cls))) {\n@@ -114,2 +110,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature,\n-            jvmti_env, decl_cls, &cls_sig, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(decl_cls, &cls_sig, NULL))) {\n@@ -123,2 +118,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-            jvmti_env, (unsigned char*) cls_sig)))\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) cls_sig)))\n@@ -136,2 +130,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(RedefineClasses,\n-            jvmti, 1, &classDef))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->RedefineClasses(1, &classDef))) {\n@@ -153,2 +146,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, tMethodID, &name, &sig, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(tMethodID, &name, &sig, NULL))) {\n@@ -161,2 +153,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetBytecodes,\n-           jvmti_env, tMethodID, &methBytesCount, &methBytes))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetBytecodes(tMethodID, &methBytesCount, &methBytes))) {\n@@ -170,2 +161,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-           jvmti_env, (unsigned char*) methBytes)))\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) methBytes)))\n@@ -174,2 +164,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(IsMethodObsolete,\n-            jvmti_env, tMethodID, &isObsolete))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->IsMethodObsolete(tMethodID, &isObsolete))) {\n@@ -200,2 +189,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetBytecodes,\n-               jvmti_env, method, &redefMethBytesCount, &redefMethBytes)))\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->GetBytecodes(method, &redefMethBytesCount, &redefMethBytes)))\n@@ -207,2 +195,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(NotifyFramePop,\n-                    jvmti_env, thr, 0)))\n+            if (!NSK_JVMTI_VERIFY(jvmti_env->NotifyFramePop(thr, 0)))\n@@ -212,2 +199,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-                jvmti_env, JVMTI_DISABLE, JVMTI_EVENT_METHOD_ENTRY, NULL)))\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_METHOD_ENTRY, NULL)))\n@@ -280,2 +266,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate,\n-           jvmti_env, (unsigned char*) redefMethBytes)))\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char*) redefMethBytes)))\n@@ -327,2 +312,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities,\n-            jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -338,2 +322,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetEventCallbacks,\n-            jvmti, &callbacks, sizeof(callbacks))))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/hotswap\/HS201\/hs201t003\/hs201t003.cpp","additions":19,"deletions":36,"binary":false,"changes":55,"status":"modified"},{"patch":"@@ -63,2 +63,1 @@\n-    if ( ! NSK_JVMTI_VERIFY ( NSK_CPP_STUB4(GetClassSignature,\n-                    jvmti_env, klass, &className, &generic) ) ) {\n+    if ( ! NSK_JVMTI_VERIFY ( jvmti_env->GetClassSignature(klass, &className, &generic) ) ) {\n@@ -71,2 +70,1 @@\n-            if (! NSK_JNI_VERIFY(jni, (field = NSK_CPP_STUB4(GetFieldID,\n-                                jni, klass, FIELDNAME, TYPE)) != NULL) ) {\n+            if (! NSK_JNI_VERIFY(jni, (field = jni->GetFieldID(klass, FIELDNAME, TYPE)) != NULL) ) {\n@@ -75,2 +73,1 @@\n-            } else  if ( ! NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetFieldAccessWatch,\n-                            jvmti_env, klass, field) ) ) {\n+            } else  if ( ! NSK_JVMTI_VERIFY(jvmti_env->SetFieldAccessWatch(klass, field) ) ) {\n@@ -99,1 +96,1 @@\n-    if (! NSK_JNI_VERIFY(jni, (clas = NSK_CPP_STUB2(FindClass, jni, SEARCH_NAME)) != NULL) ) {\n+    if (! NSK_JNI_VERIFY(jni, (clas = jni->FindClass(SEARCH_NAME)) != NULL) ) {\n@@ -112,1 +109,1 @@\n-            if ( ! NSK_JVMTI_VERIFY( NSK_CPP_STUB2(SuspendThread, jvmti_env, thread) ) ) {\n+            if ( ! NSK_JVMTI_VERIFY(jvmti_env->SuspendThread(thread) ) ) {\n@@ -134,2 +131,1 @@\n-    if ( ! NSK_VERIFY ( JNI_OK == NSK_CPP_STUB3(GetEnv, vm,\n-                    (void **)&jvmti, JVMTI_VERSION_1_1) ) ) {\n+    if ( ! NSK_VERIFY ( JNI_OK == vm->GetEnv((void **)&jvmti, JVMTI_VERSION_1_1) ) ) {\n@@ -151,1 +147,1 @@\n-        if (! NSK_JVMTI_VERIFY ( NSK_CPP_STUB2(AddCapabilities, jvmti, &caps) )) {\n+        if (! NSK_JVMTI_VERIFY ( jvmti->AddCapabilities(&caps) ) ) {\n@@ -158,3 +154,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks)))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks)))) {\n@@ -184,1 +178,1 @@\n-    if ( ! NSK_JVMTI_VERIFY( NSK_CPP_STUB3(GetThreadState, jvmti, thread, &state) )  ) {\n+    if ( ! NSK_JVMTI_VERIFY( jvmti->GetThreadState(thread, &state) ) ) {\n@@ -202,1 +196,1 @@\n-    if ( ! NSK_JVMTI_VERIFY( NSK_CPP_STUB3(GetThreadState, jvmti, thread, &state) )  ) {\n+    if ( ! NSK_JVMTI_VERIFY( jvmti->GetThreadState(thread, &state) ) ) {\n@@ -207,1 +201,1 @@\n-            if ( ! NSK_JVMTI_VERIFY ( NSK_CPP_STUB2( PopFrame, jvmti, thread) ) ) {\n+            if ( ! NSK_JVMTI_VERIFY ( jvmti->PopFrame(thread) ) ) {\n@@ -212,2 +206,2 @@\n-                if ( ! NSK_JVMTI_VERIFY ( NSK_CPP_STUB4 (SetEventNotificationMode, jvmti,\n-                                JVMTI_DISABLE, JVMTI_EVENT_FIELD_ACCESS, NULL) ) ) {\n+                if ( ! NSK_JVMTI_VERIFY (\n+                        jvmti->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_FIELD_ACCESS, NULL) ) ) {\n@@ -235,1 +229,1 @@\n-    if ( !NSK_JVMTI_VERIFY( NSK_CPP_STUB2 ( ResumeThread, jvmti, thread)) ) {\n+    if ( !NSK_JVMTI_VERIFY( jvmti->ResumeThread(thread) ) ) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/hotswap\/HS203\/hs203t003\/hs203t003.cpp","additions":14,"deletions":20,"binary":false,"changes":34,"status":"modified"},{"patch":"@@ -48,2 +48,1 @@\n-    if (!NSK_JVMTI_VERIFY (NSK_CPP_STUB4(GetClassSignature,\n-                    jvmti_env, klass, &className, NULL) ) ) {\n+    if (!NSK_JVMTI_VERIFY (jvmti_env->GetClassSignature(klass, &className, NULL) ) ) {\n@@ -54,1 +53,1 @@\n-            if (nsk_jvmti_enableNotification(jvmti_env, JVMTI_EVENT_COMPILED_METHOD_LOAD, NULL) == NSK_TRUE ) {\n+            if (nsk_jvmti_enableNotification(jvmti_env, JVMTI_EVENT_COMPILED_METHOD_LOAD, NULL) == NSK_TRUE) {\n@@ -56,2 +55,1 @@\n-                if ( ! NSK_JVMTI_VERIFY ( NSK_CPP_STUB2(GenerateEvents, jvmti_env,\n-                                JVMTI_EVENT_COMPILED_METHOD_LOAD ) )) {\n+                if ( ! NSK_JVMTI_VERIFY ( jvmti_env->GenerateEvents(JVMTI_EVENT_COMPILED_METHOD_LOAD) ) ) {\n@@ -64,1 +62,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char *)className))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char *)className))) {\n@@ -81,2 +79,1 @@\n-        if ( ! NSK_JVMTI_VERIFY ( NSK_CPP_STUB3(GetMethodDeclaringClass,\n-                        jvmti_env, method, &threadClass) ) ) {\n+        if ( ! NSK_JVMTI_VERIFY ( jvmti_env->GetMethodDeclaringClass(method, &threadClass) ) ) {\n@@ -92,2 +89,1 @@\n-            if ( ! NSK_JVMTI_VERIFY (NSK_CPP_STUB4(GetClassSignature,\n-                            jvmti_env, threadClass, &className, NULL) ) ) {\n+            if ( ! NSK_JVMTI_VERIFY (jvmti_env->GetClassSignature(threadClass, &className, NULL) ) ) {\n@@ -99,2 +95,1 @@\n-            if ( ! NSK_JVMTI_VERIFY (NSK_CPP_STUB5(GetMethodName,\n-                            jvmti_env, method, &methodName, NULL, NULL) ) ) {\n+            if ( ! NSK_JVMTI_VERIFY (jvmti_env->GetMethodName(method, &methodName, NULL, NULL) ) ) {\n@@ -124,1 +119,1 @@\n-                if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char *)className))) {\n+                if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char *)className))) {\n@@ -130,1 +125,1 @@\n-                if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char *)methodName))) {\n+                if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char *)methodName))) {\n@@ -152,2 +147,1 @@\n-    if ( ! NSK_VERIFY ( JNI_OK == NSK_CPP_STUB3(GetEnv, vm,\n-                    (void **)&jvmti, JVMTI_VERSION_1_1) ) ) {\n+    if ( ! NSK_VERIFY ( JNI_OK == vm->GetEnv((void **)&jvmti, JVMTI_VERSION_1_1) ) ) {\n@@ -169,1 +163,1 @@\n-        if (! NSK_JVMTI_VERIFY ( NSK_CPP_STUB2(AddCapabilities, jvmti, &caps) )) {\n+        if (! NSK_JVMTI_VERIFY ( jvmti->AddCapabilities(&caps) ) ) {\n@@ -176,3 +170,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                    NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                        &eventCallbacks, sizeof(eventCallbacks)))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks)))) {\n@@ -197,1 +189,1 @@\n-    if (  NSK_JVMTI_VERIFY( NSK_CPP_STUB2(SuspendThread, jvmti, thread) ) ) {\n+    if (  NSK_JVMTI_VERIFY( jvmti->SuspendThread(thread) ) ) {\n@@ -214,2 +206,1 @@\n-    if ( ! NSK_JVMTI_VERIFY ( NSK_CPP_STUB3(GetThreadState, jvmti,\n-                    thread, &state) ) ) {\n+    if ( ! NSK_JVMTI_VERIFY (jvmti->GetThreadState(thread, &state) ) ) {\n@@ -220,1 +211,1 @@\n-            if ( ! NSK_JVMTI_VERIFY( NSK_CPP_STUB2(PopFrame, jvmti, thread) ) ){\n+            if ( ! NSK_JVMTI_VERIFY( jvmti->PopFrame(thread) ) ) {\n@@ -224,2 +215,3 @@\n-                if ( NSK_JVMTI_VERIFY( NSK_CPP_STUB4(SetEventNotificationMode, jvmti,\n-                                JVMTI_DISABLE, JVMTI_EVENT_COMPILED_METHOD_LOAD, NULL) ) ) {\n+                if ( NSK_JVMTI_VERIFY(\n+                        jvmti->SetEventNotificationMode(JVMTI_DISABLE,\n+                                                        JVMTI_EVENT_COMPILED_METHOD_LOAD, NULL) ) ) {\n@@ -248,1 +240,1 @@\n-    if ( NSK_JVMTI_VERIFY ( NSK_CPP_STUB2(ResumeThread, jvmti, thread))) {\n+    if ( NSK_JVMTI_VERIFY (jvmti->ResumeThread(thread))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/hotswap\/HS203\/hs203t004\/hs203t004.cpp","additions":19,"deletions":27,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -54,1 +54,1 @@\n-    if( !NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature, jvmti, klass, &className, &generic))) {\n+    if( !NSK_JVMTI_VERIFY(jvmti->GetClassSignature(klass, &className, &generic))) {\n@@ -78,1 +78,1 @@\n-        \/* if( (myTestClass =NSK_CPP_STUB2(NewGlobalRef,jni_env, klass)) == NULL) {\n+        \/* if ( (myTestClass = jni_env->NewGlobalRef(klass) ) == NULL) {\n@@ -103,1 +103,1 @@\n-        if( (myTestClass = (jclass) NSK_CPP_STUB2(NewGlobalRef,jni_env, klass)) == NULL) {\n+        if( (myTestClass = (jclass) jni_env->NewGlobalRef(klass)) == NULL) {\n@@ -243,1 +243,1 @@\n-    if (!NSK_JNI_VERIFY(env, (testClass =(jclass) NSK_CPP_STUB2(NewGlobalRef, env, klass)) != NULL))\n+    if (!NSK_JNI_VERIFY(env, (testClass = (jclass) env->NewGlobalRef(klass)) != NULL))\n@@ -245,1 +245,1 @@\n-    if (!NSK_JNI_VERIFY(env, (testedThread =NSK_CPP_STUB2(NewGlobalRef, env, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(env, (testedThread = env->NewGlobalRef(thread)) != NULL))\n@@ -255,1 +255,1 @@\n-    if (NSK_CPP_STUB3(GetThreadState,jvmti,thread, &state) == JVMTI_ERROR_NONE) {\n+    if (jvmti->GetThreadState(thread, &state) == JVMTI_ERROR_NONE) {\n@@ -260,1 +260,1 @@\n-            if (!NSK_JVMTI_VERIFY(  NSK_CPP_STUB2(SuspendThread, jvmti, thread))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->SuspendThread(thread))) {\n@@ -281,1 +281,1 @@\n-    if (NSK_CPP_STUB3(GetThreadState,jvmti,thread, &state) == JVMTI_ERROR_NONE) {\n+    if (jvmti->GetThreadState(thread, &state) == JVMTI_ERROR_NONE) {\n@@ -285,1 +285,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(PopFrame, jvmti, thread))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->PopFrame(thread))) {\n@@ -293,1 +293,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(ResumeThread, jvmti, thread))) {\n+            if (!NSK_JVMTI_VERIFY(jvmti->ResumeThread(thread))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/hotswap\/HS204\/hs204t001\/hs204t001.cpp","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -54,2 +54,1 @@\n-    if ( !NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature, jvmti_env,\n-                    klass, &className, &generic)) ) {\n+    if ( !NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(klass, &className, &generic)) ) {\n@@ -61,2 +60,1 @@\n-            if ( ! NSK_JNI_VERIFY(jni, (fieldId = NSK_CPP_STUB4(GetStaticFieldID,\n-                                jni, klass, FIELDNAME, TYPE) ) != NULL ) ) {\n+            if ( ! NSK_JNI_VERIFY(jni, (fieldId = jni->GetStaticFieldID(klass, FIELDNAME, TYPE) ) != NULL ) ) {\n@@ -66,2 +64,1 @@\n-                if ( ! NSK_JVMTI_VERIFY( NSK_CPP_STUB3(SetFieldAccessWatch,\n-                                jvmti_env, klass, fieldId) )  ) {\n+                if ( ! NSK_JVMTI_VERIFY(jvmti_env->SetFieldAccessWatch(klass, fieldId) )  ) {\n@@ -74,1 +71,1 @@\n-                                  NSK_CPP_STUB2(NewGlobalRef, jni, klass) )\n+                                  jni->NewGlobalRef(klass) )\n@@ -87,1 +84,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char *)className))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char *)className))) {\n@@ -94,1 +91,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char *)generic))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char *)generic))) {\n@@ -119,2 +116,1 @@\n-    if ( ! NSK_JVMTI_VERIFY(NSK_CPP_STUB4(GetClassSignature, jvmti_env,\n-                    field_klass, &className, &generic)) ) {\n+    if ( ! NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(field_klass, &className, &generic)) ) {\n@@ -136,1 +132,1 @@\n-            if ( ! NSK_JVMTI_VERIFY( NSK_CPP_STUB3(GetThreadInfo, jvmti_env, thread , &info)) ) {\n+            if ( ! NSK_JVMTI_VERIFY(jvmti_env->GetThreadInfo(thread, &info))) {\n@@ -142,1 +138,1 @@\n-            if ( ! NSK_JVMTI_VERIFY( NSK_CPP_STUB2(SuspendThread, jvmti_env, thread)) ) {\n+            if ( ! NSK_JVMTI_VERIFY(jvmti_env->SuspendThread(thread))) {\n@@ -150,1 +146,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char *)className))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char *)className))) {\n@@ -157,1 +153,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char *)generic))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Deallocate((unsigned char *)generic))) {\n@@ -176,2 +172,1 @@\n-    if ( ! NSK_VERIFY ( JNI_OK == NSK_CPP_STUB3(GetEnv, vm,\n-                    (void **)&jvmti, JVMTI_VERSION_1_1) ) ) {\n+    if ( ! NSK_VERIFY ( JNI_OK == vm->GetEnv((void **)&jvmti, JVMTI_VERSION_1_1) ) ) {\n@@ -192,1 +187,1 @@\n-        if ( ! NSK_JVMTI_VERIFY(NSK_CPP_STUB2( AddCapabilities, jvmti, &caps)) ) {\n+        if ( ! NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)) ) {\n@@ -199,2 +194,1 @@\n-        if (!NSK_JVMTI_VERIFY( NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                        &eventCallbacks, sizeof(eventCallbacks) ) ) ) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks) ) ) ) {\n@@ -216,1 +210,1 @@\n-    if (! NSK_JVMTI_VERIFY( NSK_CPP_STUB3(GetThreadState, jvmti, thread, &state)) ){\n+    if (! NSK_JVMTI_VERIFY(jvmti->GetThreadState(thread, &state))) {\n@@ -222,1 +216,1 @@\n-            if ( ! NSK_JVMTI_VERIFY ( NSK_CPP_STUB2(PopFrame, jvmti, thread) ) ) {\n+            if ( ! NSK_JVMTI_VERIFY ( jvmti->PopFrame(thread) ) ) {\n@@ -226,1 +220,1 @@\n-                if ( ! NSK_JVMTI_VERIFY ( NSK_CPP_STUB2(ResumeThread, jvmti, thread)) ) {\n+                if ( ! NSK_JVMTI_VERIFY ( jvmti->ResumeThread(thread) ) ) {\n@@ -230,3 +224,2 @@\n-                    jfieldID fieldId;\n-                    if ( ! NSK_JNI_VERIFY(jni, (fieldId = NSK_CPP_STUB4(GetStaticFieldID,\n-                                jni, watchFieldClass, FIELDNAME, TYPE) ) != NULL ) ) {\n+                    jfieldID fieldId = jni->GetStaticFieldID(watchFieldClass, FIELDNAME, TYPE);\n+                    if ( ! NSK_JNI_VERIFY(jni, fieldId != NULL ) ) {\n@@ -236,2 +229,1 @@\n-                        if ( ! NSK_JVMTI_VERIFY ( NSK_CPP_STUB3(ClearFieldAccessWatch,\n-                                        jvmti, watchFieldClass, fieldId)) ) {\n+                        if ( ! NSK_JVMTI_VERIFY ( jvmti->ClearFieldAccessWatch(watchFieldClass, fieldId) ) ) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/hotswap\/HS204\/hs204t003\/hs204t003.cpp","additions":20,"deletions":28,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -52,2 +52,1 @@\n-    if ( ! NSK_VERIFY ( JNI_OK == NSK_CPP_STUB3(GetEnv, vm,\n-                    (void **)&jvmti, JVMTI_VERSION_1_1) ) ) {\n+    if ( ! NSK_VERIFY ( JNI_OK == vm->GetEnv((void **)&jvmti, JVMTI_VERSION_1_1) ) ) {\n@@ -65,1 +64,1 @@\n-        if (! NSK_JVMTI_VERIFY ( NSK_CPP_STUB2(AddCapabilities, jvmti, &caps) )) {\n+        if (! NSK_JVMTI_VERIFY ( jvmti->AddCapabilities(&caps) )) {\n@@ -70,3 +69,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks)))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks)))) {\n@@ -89,2 +86,2 @@\n-    \/\/cls= NSK_CPP_STUB2(FindClass, jni, SEARCH_NAME);\n-    if (! NSK_JNI_VERIFY(jni, (cls = NSK_CPP_STUB2(FindClass, jni, SEARCH_NAME)) != NULL) ) {\n+    cls = jni->FindClass(SEARCH_NAME);\n+    if (! NSK_JNI_VERIFY(jni, cls != NULL) ) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/hotswap\/HS301\/hs301t001\/hs301t001.cpp","additions":5,"deletions":8,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -55,2 +55,1 @@\n-    if ( ! NSK_VERIFY ( JNI_OK == NSK_CPP_STUB3(GetEnv, vm,\n-                    (void **)&jvmti, JVMTI_VERSION_1_1) ) ) {\n+    if ( ! NSK_VERIFY ( JNI_OK == vm->GetEnv((void **)&jvmti, JVMTI_VERSION_1_1) ) ) {\n@@ -67,1 +66,1 @@\n-        if ( ! NSK_JVMTI_VERIFY ( NSK_CPP_STUB2(AddCapabilities, jvmti, &caps) ) ) {\n+        if ( ! NSK_JVMTI_VERIFY ( jvmti->AddCapabilities(&caps) ) ) {\n@@ -88,1 +87,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (cls = NSK_CPP_STUB2(FindClass, jni, SEARCH_NAME)) != NULL)) {\n+    if (!NSK_JNI_VERIFY(jni, (cls = jni->FindClass(SEARCH_NAME)) != NULL)) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/hotswap\/HS301\/hs301t002\/hs301t002.cpp","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -39,2 +39,1 @@\n-  if ( ! NSK_JVMTI_VERIFY ( NSK_CPP_STUB4(GetClassSignature,\n-                  jvmti_env, klass, &className, &generic) ) ) {\n+  if ( ! NSK_JVMTI_VERIFY ( jvmti_env->GetClassSignature(klass, &className, &generic) ) ) {\n@@ -73,2 +72,1 @@\n-    if ( ! NSK_VERIFY ( JNI_OK == NSK_CPP_STUB3(GetEnv, vm,\n-                    (void **)&jvmti, JVMTI_VERSION_1_1) ) ) {\n+    if ( ! NSK_VERIFY ( JNI_OK == vm->GetEnv((void **)&jvmti, JVMTI_VERSION_1_1) ) ) {\n@@ -87,1 +85,1 @@\n-        if (! NSK_JVMTI_VERIFY ( NSK_CPP_STUB2(AddCapabilities, jvmti, &caps) ))  {\n+        if (! NSK_JVMTI_VERIFY ( jvmti->AddCapabilities(&caps) ) )  {\n@@ -93,3 +91,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(SetEventCallbacks, jvmti,\n-                                    &eventCallbacks, sizeof(eventCallbacks)))) {\n+        if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks)))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/hotswap\/HS301\/hs301t003\/hs301t003.cpp","additions":4,"deletions":8,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -40,2 +40,1 @@\n-    if (! NSK_JVMTI_VERIFY( NSK_CPP_STUB4(GetClassSignature,\n-                    jvmti_env, klass, &className, &generic)) ) {\n+    if (! NSK_JVMTI_VERIFY(jvmti_env->GetClassSignature(klass, &className, &generic)) ) {\n@@ -74,2 +73,1 @@\n-    if (! NSK_VERIFY ( JNI_OK == NSK_CPP_STUB3(GetEnv,\n-                    vm, (void **)&jvmti, JVMTI_VERSION_1_1) ) ) {\n+    if (! NSK_VERIFY ( JNI_OK == vm->GetEnv((void **)&jvmti, JVMTI_VERSION_1_1) ) ) {\n@@ -88,2 +86,1 @@\n-        if ( ! NSK_JVMTI_VERIFY ( NSK_CPP_STUB2(AddCapabilities,\n-                        jvmti, &caps) ))  {\n+        if ( ! NSK_JVMTI_VERIFY (jvmti->AddCapabilities(&caps) ))  {\n@@ -95,2 +92,1 @@\n-        if ( ! NSK_JVMTI_VERIFY( NSK_CPP_STUB3(SetEventCallbacks,\n-                        jvmti, &eventCallbacks, sizeof(eventCallbacks)) ) ) {\n+        if ( ! NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&eventCallbacks, sizeof(eventCallbacks)) ) ) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/hotswap\/HS301\/hs301t004\/hs301t004.cpp","additions":4,"deletions":8,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -73,8 +73,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(\n-                GetPhase\n-                , jvmti\n-                , &phase\n-                )\n-            )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetPhase(&phase)))\n@@ -92,8 +85,2 @@\n-    if (!NSK_VERIFY(\n-                (err = NSK_CPP_STUB2(\n-                    GetJNIFunctionTable\n-                    , jvmti\n-                    , &orig_jni_functions\n-                    )) == JVMTI_ERROR_NONE || phase != JVMTI_PHASE_LIVE\n-            )\n-       )\n+    err = jvmti->GetJNIFunctionTable(&orig_jni_functions);\n+    if (!NSK_VERIFY((err == JVMTI_ERROR_NONE || phase != JVMTI_PHASE_LIVE)))\n@@ -119,7 +106,1 @@\n-            (err = NSK_CPP_STUB2(\n-                GetJNIFunctionTable\n-                , jvmti\n-                , &redir_jni_functions\n-                )) == JVMTI_ERROR_NONE || phase != JVMTI_PHASE_LIVE\n-            )\n-       )\n+            (err = jvmti->GetJNIFunctionTable(&redir_jni_functions)) == JVMTI_ERROR_NONE || phase != JVMTI_PHASE_LIVE))\n@@ -151,7 +132,1 @@\n-            (err = NSK_CPP_STUB2(\n-                SetJNIFunctionTable\n-                , jvmti\n-                , redir_jni_functions\n-                )) == JVMTI_ERROR_NONE || phase != JVMTI_PHASE_LIVE\n-            )\n-       )\n+            (err = jvmti->SetJNIFunctionTable(redir_jni_functions)) == JVMTI_ERROR_NONE || phase != JVMTI_PHASE_LIVE))\n@@ -181,8 +156,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(\n-                SetJNIFunctionTable\n-                , jvmti\n-                , orig_jni_functions\n-                )\n-            )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetJNIFunctionTable(orig_jni_functions)))\n@@ -201,8 +169,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(\n-                RawMonitorEnter\n-                , jvmti\n-                , eventLock\n-                )\n-            )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(eventLock)))\n@@ -217,8 +178,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(\n-                RawMonitorExit\n-                , jvmti\n-                , eventLock\n-                )\n-            )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(eventLock)))\n@@ -242,5 +196,1 @@\n-        (cls = NSK_CPP_STUB2(\n-                FindClass\n-                , env\n-                , classSig\n-                ))\n+        (cls = env->FindClass(classSig))\n@@ -250,1 +200,1 @@\n-        NSK_CPP_STUB1(ExceptionClear, env)\n+        env->ExceptionClear()\n@@ -332,9 +282,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(\n-                SetEventCallbacks\n-                , jvmti\n-                , &callbacks\n-                , sizeof(callbacks)\n-                )\n-            )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -376,10 +318,1 @@\n-    if (!NSK_VERIFY(\n-            NSK_CPP_STUB3(\n-                GetEnv\n-                , jvm\n-                , (void **) &jvmti\n-                , JVMTI_VERSION_1_1\n-                ) == JNI_OK\n-            && jvmti != NULL\n-            )\n-       )\n+    if (!NSK_VERIFY(jvm->GetEnv((void **) &jvmti, JVMTI_VERSION_1_1) == JNI_OK && jvmti != NULL))\n@@ -389,9 +322,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(\n-                CreateRawMonitor\n-                , jvmti\n-                , \"_event_lock\"\n-                , &eventLock\n-                )\n-            )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"_event_lock\", &eventLock)))\n@@ -412,9 +337,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(\n-                SetEventCallbacks\n-                , jvmti\n-                , &callbacks\n-                , sizeof(callbacks)\n-                )\n-            )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventCallbacks(&callbacks, sizeof(callbacks))))\n@@ -426,10 +343,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(\n-                SetEventNotificationMode\n-                , jvmti\n-                , JVMTI_ENABLE\n-                , JVMTI_EVENT_VM_INIT\n-                , NULL\n-                )\n-            )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_VM_INIT, NULL)))\n@@ -439,10 +347,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB4(\n-                SetEventNotificationMode\n-                , jvmti\n-                , JVMTI_ENABLE\n-                , JVMTI_EVENT_VM_DEATH\n-                , NULL\n-                )\n-            )\n-       )\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/jni_interception\/JI01\/ji01t001\/ji01t001.cpp","additions":16,"deletions":117,"binary":false,"changes":133,"status":"modified"},{"patch":"@@ -84,2 +84,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorEnter,\n-            jvmti, countLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorEnter(countLock)))\n@@ -90,2 +89,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(RawMonitorExit,\n-            jvmti, countLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RawMonitorExit(countLock)))\n@@ -485,2 +483,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(CreateRawMonitor,\n-            jvmti, \"_counter_lock\", &countLock)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->CreateRawMonitor(\"_counter_lock\", &countLock)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/jni_interception\/JI06\/ji06t001\/ji06t001.cpp","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -117,2 +117,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_INIT, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_VM_INIT, NULL)))\n@@ -121,2 +120,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA02\/ma02t001\/ma02t001.cpp","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -117,2 +117,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_INIT, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_VM_INIT, NULL)))\n@@ -121,2 +120,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA02\/ma02t001\/ma02t001a.cpp","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -129,2 +129,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_INIT, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_VM_INIT, NULL)))\n@@ -133,2 +132,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n@@ -137,2 +135,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_THREAD_START, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_THREAD_START, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA03\/ma03t001\/ma03t001.cpp","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -56,2 +56,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (cls =\n-            NSK_CPP_STUB2(FindClass, jni, CLASS_NAME)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (cls = jni->FindClass(CLASS_NAME)) != NULL))\n@@ -62,2 +61,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni, cls,\n-                FIELD_NAME, FIELD_SIGNATURE)) != NULL))\n+            jni->GetStaticFieldID(cls, FIELD_NAME, FIELD_SIGNATURE)) != NULL))\n@@ -66,2 +64,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedObject =\n-            NSK_CPP_STUB3(GetStaticObjectField, jni, cls, fid)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedObject = jni->GetStaticObjectField(cls, fid)) != NULL))\n@@ -70,2 +67,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedObject =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, testedObject)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedObject = jni->NewGlobalRef(testedObject)) != NULL))\n@@ -94,1 +90,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetTag, jvmti, testedObject, &tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetTag(testedObject, &tag))) {\n@@ -104,2 +100,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, testedObject,\n-            SAMPLE_TAG))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(testedObject, SAMPLE_TAG))) {\n@@ -115,1 +110,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetTag, jvmti, testedObject, &tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetTag(testedObject, &tag))) {\n@@ -136,1 +131,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetTag, jvmti, testedObject, &tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetTag(testedObject, &tag))) {\n@@ -151,1 +146,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, testedObject, (jlong)0))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(testedObject, (jlong)0))) {\n@@ -161,1 +156,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetTag, jvmti, testedObject, &tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetTag(testedObject, &tag))) {\n@@ -177,1 +172,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetTag, jvmti, testedObject, &tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetTag(testedObject, &tag))) {\n@@ -187,1 +182,1 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testedObject));\n+    NSK_TRACE(jni->DeleteGlobalRef(testedObject));\n@@ -225,1 +220,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA04\/ma04t001\/ma04t001.cpp","additions":13,"deletions":18,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -56,2 +56,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (cls =\n-            NSK_CPP_STUB2(FindClass, jni, CLASS_NAME)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (cls = jni->FindClass(CLASS_NAME)) != NULL))\n@@ -62,2 +61,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni, cls,\n-                FIELD_NAME, FIELD_SIGNATURE)) != NULL))\n+            jni->GetStaticFieldID(cls, FIELD_NAME, FIELD_SIGNATURE)) != NULL))\n@@ -66,2 +64,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedObject =\n-            NSK_CPP_STUB3(GetStaticObjectField, jni, cls, fid)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedObject = jni->GetStaticObjectField(cls, fid)) != NULL))\n@@ -70,2 +67,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedObject =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, testedObject)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedObject = jni->NewGlobalRef(testedObject)) != NULL))\n@@ -94,1 +90,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetTag, jvmti, testedObject, &tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetTag(testedObject, &tag))) {\n@@ -110,1 +106,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetTag, jvmti, testedObject, &tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetTag(testedObject, &tag))) {\n@@ -120,2 +116,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, testedObject,\n-            SAMPLE_TAG))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(testedObject, SAMPLE_TAG))) {\n@@ -131,1 +126,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetTag, jvmti, testedObject, &tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetTag(testedObject, &tag))) {\n@@ -152,1 +147,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetTag, jvmti, testedObject, &tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetTag(testedObject, &tag))) {\n@@ -167,1 +162,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, testedObject, (jlong)0))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(testedObject, (jlong)0))) {\n@@ -177,1 +172,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(GetTag, jvmti, testedObject, &tag))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetTag(testedObject, &tag))) {\n@@ -187,1 +182,1 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testedObject));\n+    NSK_TRACE(jni->DeleteGlobalRef(testedObject));\n@@ -225,1 +220,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA04\/ma04t001\/ma04t001a.cpp","additions":13,"deletions":18,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -84,2 +84,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedClass =\n-            NSK_CPP_STUB2(FindClass, jni, CLASS_NAME)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedClass = jni->FindClass(CLASS_NAME)) != NULL))\n@@ -88,2 +87,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedClass = (jclass)\n-            NSK_CPP_STUB2(NewGlobalRef, jni, testedClass)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedClass = (jclass) jni->NewGlobalRef(testedClass)) != NULL))\n@@ -94,2 +92,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni, testedClass,\n-                FIELD_NAME, FIELD_SIGNATURE)) != NULL))\n+            jni->GetStaticFieldID(testedClass, FIELD_NAME, FIELD_SIGNATURE)) != NULL))\n@@ -98,2 +95,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedObject =\n-            NSK_CPP_STUB3(GetStaticObjectField, jni, testedClass, fid)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedObject = jni->GetStaticObjectField(testedClass, fid)) != NULL))\n@@ -105,2 +101,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni, testedClass,\n-                INSTANCE_NAME, INSTANCE_SIGNATURE)) != NULL))\n+            jni->GetStaticFieldID(testedClass, INSTANCE_NAME, INSTANCE_SIGNATURE)) != NULL))\n@@ -110,1 +105,1 @@\n-            NSK_CPP_STUB3(GetStaticObjectField, jni, testedClass, fid)) != NULL))\n+            jni->GetStaticObjectField(testedClass, fid)) != NULL))\n@@ -134,2 +129,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(IterateOverHeap, jvmti,\n-            JVMTI_HEAP_OBJECT_EITHER, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_EITHER, heap_object_callback, &dummy))) {\n@@ -147,2 +141,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(IterateOverHeap, jvmti,\n-            JVMTI_HEAP_OBJECT_TAGGED, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_TAGGED, heap_object_callback, &dummy))) {\n@@ -160,2 +153,4 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateOverInstancesOfClass, jvmti,\n-            testedClass, JVMTI_HEAP_OBJECT_EITHER, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverInstancesOfClass(testedClass,\n+                                                             JVMTI_HEAP_OBJECT_EITHER,\n+                                                             heap_object_callback,\n+                                                             &dummy))) {\n@@ -173,2 +168,4 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateOverInstancesOfClass, jvmti,\n-            testedClass, JVMTI_HEAP_OBJECT_TAGGED, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverInstancesOfClass(testedClass,\n+                                                             JVMTI_HEAP_OBJECT_TAGGED,\n+                                                             heap_object_callback,\n+                                                             &dummy))) {\n@@ -185,2 +182,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, testedObject,\n-            SAMPLE_TAG))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(testedObject, SAMPLE_TAG))) {\n@@ -200,2 +196,2 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(IterateOverHeap, jvmti,\n-            JVMTI_HEAP_OBJECT_EITHER, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(\n+            jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_EITHER, heap_object_callback, &dummy))) {\n@@ -212,2 +208,2 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(IterateOverHeap, jvmti,\n-            JVMTI_HEAP_OBJECT_TAGGED, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(\n+            jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_TAGGED, heap_object_callback, &dummy))) {\n@@ -224,2 +220,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(IterateOverHeap, jvmti,\n-            JVMTI_HEAP_OBJECT_UNTAGGED, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_UNTAGGED, heap_object_callback, &dummy))) {\n@@ -236,2 +231,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, testedInstance,\n-            SAMPLE_TAG))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(testedInstance, SAMPLE_TAG))) {\n@@ -251,2 +245,4 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateOverInstancesOfClass, jvmti,\n-            testedClass, JVMTI_HEAP_OBJECT_EITHER, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverInstancesOfClass(testedClass,\n+                                                             JVMTI_HEAP_OBJECT_EITHER,\n+                                                             heap_object_callback,\n+                                                             &dummy))) {\n@@ -264,2 +260,4 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateOverInstancesOfClass, jvmti,\n-            testedClass, JVMTI_HEAP_OBJECT_EITHER, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverInstancesOfClass(testedClass,\n+                                                             JVMTI_HEAP_OBJECT_EITHER,\n+                                                             heap_object_callback,\n+                                                             &dummy))) {\n@@ -277,2 +275,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(IterateOverHeap, jvmti,\n-            JVMTI_HEAP_OBJECT_UNTAGGED, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_UNTAGGED, heap_object_callback, &dummy))) {\n@@ -290,1 +287,1 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testedClass));\n+    NSK_TRACE(jni->DeleteGlobalRef(testedClass));\n@@ -329,1 +326,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n@@ -340,2 +337,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_OBJECT_FREE, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_OBJECT_FREE, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA04\/ma04t002\/ma04t002.cpp","additions":35,"deletions":39,"binary":false,"changes":74,"status":"modified"},{"patch":"@@ -84,2 +84,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedClass =\n-            NSK_CPP_STUB2(FindClass, jni, CLASS_NAME)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedClass = jni->FindClass(CLASS_NAME)) != NULL))\n@@ -88,2 +87,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedClass = (jclass)\n-            NSK_CPP_STUB2(NewGlobalRef, jni, testedClass)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedClass = (jclass) jni->NewGlobalRef(testedClass)) != NULL))\n@@ -94,2 +92,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni, testedClass,\n-                FIELD_NAME, FIELD_SIGNATURE)) != NULL))\n+            jni->GetStaticFieldID(testedClass, FIELD_NAME, FIELD_SIGNATURE)) != NULL))\n@@ -98,2 +95,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedObject =\n-            NSK_CPP_STUB3(GetStaticObjectField, jni, testedClass, fid)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedObject = jni->GetStaticObjectField(testedClass, fid)) != NULL))\n@@ -105,2 +101,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni, testedClass,\n-                INSTANCE_NAME, INSTANCE_SIGNATURE)) != NULL))\n+            jni->GetStaticFieldID(testedClass, INSTANCE_NAME, INSTANCE_SIGNATURE)) != NULL))\n@@ -110,1 +105,1 @@\n-            NSK_CPP_STUB3(GetStaticObjectField, jni, testedClass, fid)) != NULL))\n+            jni->GetStaticObjectField(testedClass, fid)) != NULL))\n@@ -134,2 +129,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(IterateOverHeap, jvmti,\n-            JVMTI_HEAP_OBJECT_EITHER, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_EITHER, heap_object_callback, &dummy))) {\n@@ -147,2 +141,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(IterateOverHeap, jvmti,\n-            JVMTI_HEAP_OBJECT_TAGGED, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_TAGGED, heap_object_callback, &dummy))) {\n@@ -160,2 +153,4 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateOverInstancesOfClass, jvmti,\n-            testedClass, JVMTI_HEAP_OBJECT_EITHER, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverInstancesOfClass(testedClass,\n+                                                             JVMTI_HEAP_OBJECT_EITHER,\n+                                                             heap_object_callback,\n+                                                             &dummy))) {\n@@ -173,2 +168,4 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateOverInstancesOfClass, jvmti,\n-            testedClass, JVMTI_HEAP_OBJECT_EITHER, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverInstancesOfClass(testedClass,\n+                                                             JVMTI_HEAP_OBJECT_EITHER,\n+                                                             heap_object_callback,\n+                                                             &dummy))) {\n@@ -185,2 +182,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, testedObject,\n-            SAMPLE_TAG))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(testedObject, SAMPLE_TAG))) {\n@@ -200,2 +196,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(IterateOverHeap, jvmti,\n-            JVMTI_HEAP_OBJECT_EITHER, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_EITHER, heap_object_callback, &dummy))) {\n@@ -212,2 +207,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(IterateOverHeap, jvmti,\n-            JVMTI_HEAP_OBJECT_TAGGED, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_TAGGED, heap_object_callback, &dummy))) {\n@@ -224,2 +218,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(IterateOverHeap, jvmti,\n-            JVMTI_HEAP_OBJECT_UNTAGGED, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_UNTAGGED, heap_object_callback, &dummy))) {\n@@ -236,2 +229,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, testedInstance,\n-            SAMPLE_TAG))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(testedInstance, SAMPLE_TAG))) {\n@@ -251,2 +243,4 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateOverInstancesOfClass, jvmti,\n-            testedClass, JVMTI_HEAP_OBJECT_EITHER, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverInstancesOfClass(testedClass,\n+                                                             JVMTI_HEAP_OBJECT_EITHER,\n+                                                             heap_object_callback,\n+                                                             &dummy))) {\n@@ -264,2 +258,4 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(IterateOverInstancesOfClass, jvmti,\n-            testedClass, JVMTI_HEAP_OBJECT_EITHER, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverInstancesOfClass(testedClass,\n+                                                             JVMTI_HEAP_OBJECT_EITHER,\n+                                                             heap_object_callback,\n+                                                             &dummy))) {\n@@ -277,2 +273,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(IterateOverHeap, jvmti,\n-            JVMTI_HEAP_OBJECT_UNTAGGED, heap_object_callback, &dummy))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->IterateOverHeap(JVMTI_HEAP_OBJECT_UNTAGGED, heap_object_callback, &dummy))) {\n@@ -290,1 +285,1 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testedClass));\n+    NSK_TRACE(jni->DeleteGlobalRef(testedClass));\n@@ -329,1 +324,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n@@ -340,2 +335,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_OBJECT_FREE, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_OBJECT_FREE, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA04\/ma04t002\/ma04t002a.cpp","additions":33,"deletions":39,"binary":false,"changes":72,"status":"modified"},{"patch":"@@ -91,2 +91,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (cls =\n-            NSK_CPP_STUB2(FindClass, jni, CLASS_NAME)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (cls = jni->FindClass(CLASS_NAME)) != NULL))\n@@ -97,2 +96,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni, cls,\n-                FIELD_NAME, FIELD_SIGNATURE)) != NULL))\n+            jni->GetStaticFieldID(cls, FIELD_NAME, FIELD_SIGNATURE)) != NULL))\n@@ -101,2 +99,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedObject =\n-            NSK_CPP_STUB3(GetStaticObjectField, jni, cls, fid)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedObject = jni->GetStaticObjectField(cls, fid)) != NULL))\n@@ -105,2 +102,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedObject =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, testedObject)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedObject = jni->NewGlobalRef(testedObject)) != NULL))\n@@ -127,2 +123,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, testedObject,\n-            SAMPLE_TAG))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(testedObject, SAMPLE_TAG))) {\n@@ -133,1 +128,1 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testedObject));\n+    NSK_TRACE(jni->DeleteGlobalRef(testedObject));\n@@ -172,1 +167,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n@@ -185,2 +180,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_OBJECT_FREE, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_OBJECT_FREE, NULL)))\n@@ -189,2 +183,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA04\/ma04t003\/ma04t003.cpp","additions":9,"deletions":16,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -91,2 +91,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (cls =\n-            NSK_CPP_STUB2(FindClass, jni, CLASS_NAME)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (cls = jni->FindClass(CLASS_NAME)) != NULL))\n@@ -97,2 +96,1 @@\n-            NSK_CPP_STUB4(GetStaticFieldID, jni, cls,\n-                FIELD_NAME, FIELD_SIGNATURE)) != NULL))\n+            jni->GetStaticFieldID(cls, FIELD_NAME, FIELD_SIGNATURE)) != NULL))\n@@ -101,2 +99,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedObject =\n-            NSK_CPP_STUB3(GetStaticObjectField, jni, cls, fid)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedObject = jni->GetStaticObjectField(cls, fid)) != NULL))\n@@ -105,2 +102,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedObject =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, testedObject)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedObject = jni->NewGlobalRef(testedObject)) != NULL))\n@@ -127,2 +123,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetTag, jvmti, testedObject,\n-            SAMPLE_TAG))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetTag(testedObject, SAMPLE_TAG))) {\n@@ -133,1 +128,1 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testedObject));\n+    NSK_TRACE(jni->DeleteGlobalRef(testedObject));\n@@ -172,1 +167,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps))) {\n@@ -185,2 +180,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_OBJECT_FREE, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_OBJECT_FREE, NULL)))\n@@ -189,2 +183,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA04\/ma04t003\/ma04t003a.cpp","additions":9,"deletions":16,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -57,2 +57,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &name, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &signature, NULL))) {\n@@ -65,1 +64,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)name);\n@@ -67,1 +66,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -88,2 +87,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-        NSK_CPP_STUB3(NotifyFramePop, jvmti_env, thread, 0))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->NotifyFramePop(thread, 0))) {\n@@ -102,2 +100,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &name, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &signature, NULL))) {\n@@ -111,1 +108,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)name);\n@@ -113,1 +110,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -129,2 +126,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-           NSK_CPP_STUB3(GetAllThreads, jvmti, &threads_count, &threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&threads_count, &threads)))\n@@ -142,2 +138,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, threads[i], &info)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(threads[i], &info)))\n@@ -154,2 +149,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(\n-                    Deallocate, jvmti, (unsigned char*)info.name)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)info.name)))\n@@ -161,2 +155,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads)))\n@@ -170,2 +163,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (thread =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (thread = jni->NewGlobalRef(thread)) != NULL))\n@@ -175,2 +167,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (klass =\n-            NSK_CPP_STUB2(GetObjectClass, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (klass = jni->GetObjectClass(thread)) != NULL))\n@@ -180,2 +171,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (method = NSK_CPP_STUB4(\n-            GetMethodID, jni, klass, \"checkPoint\", \"()V\")) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (method = jni->GetMethodID(klass, \"checkPoint\", \"()V\")) != NULL))\n@@ -184,1 +174,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(SetBreakpoint, jvmti, method, 0)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetBreakpoint(method, 0)))\n@@ -188,2 +178,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_BREAKPOINT, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_BREAKPOINT, NULL)))\n@@ -191,2 +180,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_FRAME_POP, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_FRAME_POP, NULL)))\n@@ -227,2 +215,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_DISABLE, JVMTI_EVENT_FRAME_POP, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_FRAME_POP, NULL)))\n@@ -231,2 +218,2 @@\n-    NSK_TRACE(NSK_CPP_STUB3(ClearBreakpoint, jvmti, method, 0));\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, thread));\n+    NSK_TRACE(jvmti->ClearBreakpoint(method, 0));\n+    NSK_TRACE(jni->DeleteGlobalRef(thread));\n@@ -271,1 +258,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA05\/ma05t001\/ma05t001.cpp","additions":21,"deletions":34,"binary":false,"changes":55,"status":"modified"},{"patch":"@@ -60,2 +60,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &name, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &signature, NULL))) {\n@@ -69,1 +68,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)name);\n@@ -71,1 +70,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -76,2 +75,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(NotifyFramePop, jvmti_env, thread, 0)))\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->NotifyFramePop(thread, 0)))\n@@ -87,2 +85,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-                jvmti_env, JVMTI_DISABLE, JVMTI_EVENT_FRAME_POP, NULL)))\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_FRAME_POP, NULL)))\n@@ -90,2 +87,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB3(NotifyFramePop, jvmti_env, thread, 0)))\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->NotifyFramePop(thread, 0)))\n@@ -110,2 +106,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB5(GetMethodName,\n-            jvmti_env, method, &name, &signature, NULL))) {\n+    if (!NSK_JVMTI_VERIFY(jvmti_env->GetMethodName(method, &name, &signature, NULL))) {\n@@ -119,1 +114,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)name);\n+        jvmti_env->Deallocate((unsigned char*)name);\n@@ -121,1 +116,1 @@\n-        NSK_CPP_STUB2(Deallocate, jvmti_env, (unsigned char*)signature);\n+        jvmti_env->Deallocate((unsigned char*)signature);\n@@ -158,2 +153,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-           NSK_CPP_STUB3(GetAllThreads, jvmti, &threads_count, &threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->GetAllThreads(&threads_count, &threads)))\n@@ -171,2 +165,1 @@\n-        if (!NSK_JVMTI_VERIFY(\n-                NSK_CPP_STUB3(GetThreadInfo, jvmti, threads[i], &info)))\n+        if (!NSK_JVMTI_VERIFY(jvmti->GetThreadInfo(threads[i], &info)))\n@@ -183,2 +176,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(\n-                    Deallocate, jvmti, (unsigned char*)info.name)))\n+            if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)info.name)))\n@@ -190,2 +182,1 @@\n-    if (!NSK_JVMTI_VERIFY(\n-            NSK_CPP_STUB2(Deallocate, jvmti, (unsigned char*)threads)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->Deallocate((unsigned char*)threads)))\n@@ -199,2 +190,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (thread =\n-            NSK_CPP_STUB2(NewGlobalRef, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (thread = jni->NewGlobalRef(thread)) != NULL))\n@@ -204,2 +194,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (klass =\n-            NSK_CPP_STUB2(GetObjectClass, jni, thread)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (klass = jni->GetObjectClass(thread)) != NULL))\n@@ -209,2 +198,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (midCheckPoint = NSK_CPP_STUB4(\n-            GetMethodID, jni, klass, \"checkPoint\", \"()V\")) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (midCheckPoint = jni->GetMethodID(klass, \"checkPoint\", \"()V\")) != NULL))\n@@ -214,2 +202,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_METHOD_ENTRY, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_METHOD_ENTRY, NULL)))\n@@ -217,2 +204,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_FRAME_POP, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_FRAME_POP, NULL)))\n@@ -249,3 +235,2 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, thread));\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_DISABLE, JVMTI_EVENT_METHOD_ENTRY, NULL)))\n+    NSK_TRACE(jni->DeleteGlobalRef(thread));\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_METHOD_ENTRY, NULL)))\n@@ -291,1 +276,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA05\/ma05t001\/ma05t001a.cpp","additions":21,"deletions":36,"binary":false,"changes":57,"status":"modified"},{"patch":"@@ -68,2 +68,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(Allocate,\n-                    jvmti_env, class_data_len, &klass_bytes)))\n+            if (!NSK_JVMTI_VERIFY(jvmti_env->Allocate(class_data_len, &klass_bytes)))\n@@ -97,2 +96,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedClass =\n-            NSK_CPP_STUB2(FindClass, jni, CLASS_NAME)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedClass = jni->FindClass(CLASS_NAME)) != NULL))\n@@ -101,2 +99,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedClass = (jclass)\n-            NSK_CPP_STUB2(NewGlobalRef, jni, testedClass)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedClass = (jclass) jni->NewGlobalRef(testedClass)) != NULL))\n@@ -129,1 +126,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(RedefineClasses, jvmti, 1, &class_def)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RedefineClasses(1, &class_def)))\n@@ -184,2 +181,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_DISABLE, JVMTI_EVENT_CLASS_FILE_LOAD_HOOK, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_CLASS_FILE_LOAD_HOOK, NULL)))\n@@ -188,1 +184,1 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testedClass));\n+    NSK_TRACE(jni->DeleteGlobalRef(testedClass));\n@@ -226,1 +222,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -237,2 +233,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_CLASS_FILE_LOAD_HOOK, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_CLASS_FILE_LOAD_HOOK, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA06\/ma06t001\/ma06t001.cpp","additions":8,"deletions":13,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -68,2 +68,1 @@\n-            if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(Allocate,\n-                    jvmti_env, class_data_len, &klass_bytes)))\n+            if (!NSK_JVMTI_VERIFY(jvmti_env->Allocate(class_data_len, &klass_bytes)))\n@@ -97,2 +96,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedClass =\n-            NSK_CPP_STUB2(FindClass, jni, CLASS_NAME)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedClass = jni->FindClass(CLASS_NAME)) != NULL))\n@@ -101,2 +99,1 @@\n-    if (!NSK_JNI_VERIFY(jni, (testedClass = (jclass)\n-            NSK_CPP_STUB2(NewGlobalRef, jni, testedClass)) != NULL))\n+    if (!NSK_JNI_VERIFY(jni, (testedClass = (jclass) jni->NewGlobalRef(testedClass)) != NULL))\n@@ -129,1 +126,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(RedefineClasses, jvmti, 1, &class_def)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->RedefineClasses(1, &class_def)))\n@@ -184,2 +181,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_DISABLE, JVMTI_EVENT_CLASS_FILE_LOAD_HOOK, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_DISABLE, JVMTI_EVENT_CLASS_FILE_LOAD_HOOK, NULL)))\n@@ -188,1 +184,1 @@\n-    NSK_TRACE(NSK_CPP_STUB2(DeleteGlobalRef, jni, testedClass));\n+    NSK_TRACE(jni->DeleteGlobalRef(testedClass));\n@@ -226,1 +222,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB2(AddCapabilities, jvmti, &caps)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->AddCapabilities(&caps)))\n@@ -237,2 +233,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_CLASS_FILE_LOAD_HOOK, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_CLASS_FILE_LOAD_HOOK, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA06\/ma06t001\/ma06t001a.cpp","additions":8,"deletions":13,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -74,2 +74,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(Allocate,\n-                jvmti_env, class_data_len, &klass_bytes)))\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Allocate(class_data_len, &klass_bytes)))\n@@ -177,2 +176,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_CLASS_FILE_LOAD_HOOK, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_CLASS_FILE_LOAD_HOOK, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA07\/ma07t001\/ma07t001.cpp","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -74,2 +74,1 @@\n-        if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB3(Allocate,\n-                jvmti_env, class_data_len, &klass_bytes)))\n+        if (!NSK_JVMTI_VERIFY(jvmti_env->Allocate(class_data_len, &klass_bytes)))\n@@ -178,2 +177,1 @@\n-    if (!NSK_JVMTI_VERIFY(NSK_CPP_STUB4(SetEventNotificationMode,\n-            jvmti, JVMTI_ENABLE, JVMTI_EVENT_CLASS_FILE_LOAD_HOOK, NULL)))\n+    if (!NSK_JVMTI_VERIFY(jvmti->SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_CLASS_FILE_LOAD_HOOK, NULL)))\n","filename":"test\/hotspot\/jtreg\/vmTestbase\/nsk\/jvmti\/scenarios\/multienv\/MA07\/ma07t001\/ma07t001a.cpp","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"}]}