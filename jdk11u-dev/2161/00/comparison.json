{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,1 +27,1 @@\n- *          if transform includes INIFINITY\n+ *          if transform includes INFINITY\n@@ -30,4 +30,4 @@\n-import java.awt.*;\n-import java.awt.font.*;\n-import java.awt.geom.*;\n-import java.awt.image.*;\n+import java.awt.Font;\n+import java.awt.Graphics2D;\n+import java.awt.geom.AffineTransform;\n+import java.awt.image.BufferedImage;\n@@ -44,3 +44,10 @@\n-            if (!done) {\n-                throw new\n-                RuntimeException(\"drawString with InfiniteXform transform takes long time\");\n+            System.out.println(\"Task running at \" + System.currentTimeMillis());\n+            System.out.flush();\n+            synchronized (DrawStringWithInfiniteXform.class) {\n+               System.out.println(\n+                   \"Checking done at \" + System.currentTimeMillis());\n+               System.out.flush();\n+                if (!done) {\n+                    throw new RuntimeException(\n+                       \"drawString with InfiniteXform transform takes long time\");\n+                }\n@@ -52,1 +59,1 @@\n-        timer.schedule(new ScheduleTask(), 20000);\n+        timer.schedule(new ScheduleTask(), 30000);\n@@ -61,0 +68,2 @@\n+        System.out.println(\"start at \" + System.currentTimeMillis());\n+        System.out.flush();\n@@ -62,1 +71,3 @@\n-        for (int i=0;i<6;i++) vals[i]=Float.POSITIVE_INFINITY;\n+        for (int i=0; i<6; i++) {\n+            vals[i] = Float.POSITIVE_INFINITY;\n+        }\n@@ -65,1 +76,1 @@\n-        BufferedImage bi = new BufferedImage(1,1,BufferedImage.TYPE_INT_RGB);\n+        BufferedImage bi = new BufferedImage(1, 1, BufferedImage.TYPE_INT_RGB);\n@@ -76,2 +87,6 @@\n-        done = true;\n-        timer.cancel();\n+        System.out.println(\"Loop done at \" + System.currentTimeMillis());\n+        System.out.flush();\n+        synchronized (DrawStringWithInfiniteXform.class) {\n+            done = true;\n+            timer.cancel();\n+        }\n","filename":"test\/jdk\/java\/awt\/FontClass\/DrawStringWithInfiniteXform.java","additions":29,"deletions":14,"binary":false,"changes":43,"status":"modified"}]}