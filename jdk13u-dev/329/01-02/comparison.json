{"files":[{"patch":"@@ -309,1 +309,0 @@\n-    @Override\n@@ -326,1 +325,0 @@\n-    @Override\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/xpath\/internal\/jaxp\/XPathFactoryImpl.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -329,3 +329,2 @@\n-     * Sets a feature for this {@code XPathFactory}. The feature applies to\n-     * {@code XPath} objects that the {@code XPathFactory} creates. It has no\n-     * impact on {@code XPath} objects that are already created.\n+     * <p>Set a feature for this {@code XPathFactory} and\n+     * <code>XPath<\/code>s created by this factory.<\/p>\n@@ -424,56 +423,0 @@\n-\n-    \/**\n-     * Sets a property for this {@code XPathFactory}. The property applies to\n-     * {@code XPath} objects that the {@code XPathFactory} creates. It has no\n-     * impact on {@code XPath} objects that are already created.\n-     * <p>\n-     * A property can either be defined in this {@code XPathFactory}, or by the\n-     * underlying implementation.\n-     *\n-     * @implSpec\n-     * The default implementation throws\n-     * {@link java.lang.UnsupportedOperationException}.\n-     *\n-     * @param name the property name\n-     * @param value the value for the property\n-     *\n-     * @throws IllegalArgumentException if the property name is not recognized,\n-     * or the value can not be assigned\n-     * @throws UnsupportedOperationException if the implementation does not\n-     * support the method\n-     * @throws NullPointerException if the {@code name} is {@code null}\n-     *\n-     * @since 18\n-     *\/\n-    public void setProperty(String name, String value) {\n-\n-        if (name == null) {\n-            throw new NullPointerException(\"the name parameter is null\");\n-        }\n-        throw new UnsupportedOperationException(\"not implemented\");\n-    }\n-\n-    \/**\n-     * Returns the value of the specified property.\n-     *\n-     * @implSpec\n-     * The default implementation throws\n-     * {@link java.lang.UnsupportedOperationException}.\n-     *\n-     * @param name the property name\n-     * @return the value of the property.\n-     *\n-     * @throws IllegalArgumentException if the property name is not recognized\n-     * @throws UnsupportedOperationException if the implementation does not\n-     * support the method\n-     * @throws NullPointerException if the {@code name} is {@code null}\n-     *\n-     * @since 18\n-     *\/\n-    public String getProperty(String name) {\n-\n-        if (name == null) {\n-            throw new NullPointerException(\"the name parameter is null\");\n-        }\n-        throw new UnsupportedOperationException(\"not implemented\");\n-    }\n","filename":"src\/java.xml\/share\/classes\/javax\/xml\/xpath\/XPathFactory.java","additions":2,"deletions":59,"binary":false,"changes":61,"status":"modified"},{"patch":"@@ -1,74 +0,0 @@\n-\/*\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-package xpath;\n-\n-import javax.xml.xpath.XPath;\n-import javax.xml.xpath.XPathFactory;\n-import javax.xml.xpath.XPathFactoryConfigurationException;\n-import javax.xml.xpath.XPathFunctionResolver;\n-import javax.xml.xpath.XPathVariableResolver;\n-\n-\/**\n- * A dummy implementation of the XPathFactory without implementing\n- * the setProperty\/getProperty methods\n- *\/\n-public class XPathFactoryDummyImpl extends XPathFactory {\n-\n-    @Override\n-        public boolean isObjectModelSupported(String objectModel) {\n-            \/\/ support the default object model, W3C DOM\n-            if (objectModel.equals(XPathFactory.DEFAULT_OBJECT_MODEL_URI)) {\n-                return true;\n-            }\n-\n-            \/\/ no support\n-            return false;\n-        }\n-\n-\n-    @Override\n-    public void setFeature(String name, boolean value) throws XPathFactoryConfigurationException {\n-        throw new UnsupportedOperationException(\"Not supported yet.\");\n-    }\n-\n-    @Override\n-    public boolean getFeature(String name) throws XPathFactoryConfigurationException {\n-        throw new UnsupportedOperationException(\"Not supported yet.\");\n-    }\n-\n-    @Override\n-    public void setXPathVariableResolver(XPathVariableResolver resolver) {\n-        throw new UnsupportedOperationException(\"Not supported yet.\");\n-    }\n-\n-    @Override\n-    public void setXPathFunctionResolver(XPathFunctionResolver resolver) {\n-        throw new UnsupportedOperationException(\"Not supported yet.\");\n-    }\n-\n-    @Override\n-    public XPath newXPath() {\n-        throw new UnsupportedOperationException(\"Not supported yet.\");\n-    }\n-\n-}\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/xpath\/XPathFactoryDummyImpl.java","additions":0,"deletions":74,"binary":false,"changes":74,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2016, Oracle and\/or its affiliates. All rights reserved.\n@@ -33,1 +33,0 @@\n-import org.testng.Assert;\n@@ -35,0 +34,1 @@\n+import org.testng.annotations.Listeners;\n@@ -41,2 +41,3 @@\n- * @bug 6376058 8276141\n- * @build xpath.XPathTest xpath.XPathFactoryDummyImpl\n+ * @bug 6376058\n+ * @library \/javax\/xml\/jaxp\/libs \/javax\/xml\/jaxp\/unittest\n+ * @run testng\/othervm -DrunSecMngr=true xpath.XPathTest\n@@ -46,0 +47,1 @@\n+@Listeners({jaxp.library.BasePolicy.class})\n@@ -47,57 +49,0 @@\n-    \/*\n-     * DataProvider for testXPathFactory\n-     *\/\n-    @DataProvider(name = \"xpath\")\n-    public Object[][] getXPathFactory() throws Exception {\n-        return new Object[][]{\n-            {null},\n-            {\"xpath.XPathFactoryDummyImpl\"},\n-        };\n-    }\n-\n-    \/*\n-     * @bug 8276141\n-     * Tests the setProperty\/getProperty method for the XPathFactory.\n-    *\/\n-    @Test(dataProvider = \"xpath\")\n-    public void testXPathFactory(String factoryName)\n-            throws Exception {\n-\n-        XPathFactory xpf;\n-        if (factoryName == null) {\n-            xpf = XPathFactory.newInstance();\n-        } else {\n-            xpf = XPathFactory.newInstance(\n-                XPathFactory.DEFAULT_OBJECT_MODEL_URI, factoryName, null);\n-        }\n-\n-        \/\/ NPE\n-        Assert.assertThrows(NullPointerException.class,\n-                () -> setProperty(xpf, null, \"value\"));\n-        Assert.assertThrows(NullPointerException.class,\n-                () -> getProperty(xpf, null));\n-\n-        if (factoryName == null) {\n-            \/\/ default factory impl\n-            Assert.assertThrows(IllegalArgumentException.class,\n-                    () -> setProperty(xpf, \"unknown\", \"value\"));\n-            Assert.assertThrows(IllegalArgumentException.class,\n-                    () -> getProperty(xpf, \"unknown\"));\n-        } else {\n-            \/\/ the DummyImpl does not implement the method\n-            Assert.assertThrows(UnsupportedOperationException.class,\n-                    () -> setProperty(xpf, \"unknown\", \"value\"));\n-            Assert.assertThrows(UnsupportedOperationException.class,\n-                    () -> getProperty(xpf, \"unknown\"));\n-        }\n-    }\n-\n-    private void setProperty(XPathFactory xpf, String name, String value)\n-            throws Exception {\n-        xpf.setProperty(name, value);\n-    }\n-\n-    private void getProperty(XPathFactory xpf, String name)\n-            throws Exception {\n-        xpf.getProperty(name);\n-    }\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/xpath\/XPathTest.java","additions":6,"deletions":61,"binary":false,"changes":67,"status":"modified"}]}