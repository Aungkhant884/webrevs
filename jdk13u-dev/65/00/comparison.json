{"files":[{"patch":"@@ -1,1 +1,1 @@\n-## Little Color Management System (LCMS) v2.9\n+## Little Color Management System (LCMS) v2.11\n@@ -7,1 +7,1 @@\n-Copyright (c) 1998-2011 Marti Maria Saguer\n+Copyright (c) 1998-2020 Marti Maria Saguer\n","filename":"src\/java.desktop\/share\/legal\/lcms.md","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -60,0 +60,4 @@\n+\/\/ This macro return words stored as big endian\n+#define CHANGE_ENDIAN(w)    (cmsUInt16Number) ((cmsUInt16Number) ((w)<<8)|((w)>>8))\n+\n+\n@@ -106,0 +110,7 @@\n+static\n+void from8to16SE(void* dst, const void* src)\n+{\n+    cmsUInt8Number n = *(cmsUInt8Number*)src;\n+    *(cmsUInt16Number*)dst = CHANGE_ENDIAN(FROM_8_TO_16(n));\n+}\n+\n@@ -139,0 +150,7 @@\n+static\n+void from16SEto8(void* dst, const void* src)\n+{\n+    cmsUInt16Number n = *(cmsUInt16Number*)src;\n+    *(cmsUInt8Number*)dst = FROM_16_TO_8(CHANGE_ENDIAN(n));\n+}\n+\n@@ -145,0 +163,8 @@\n+static\n+void from16to16(void* dst, const void* src)\n+{\n+    cmsUInt16Number n = *(cmsUInt16Number*)src;\n+    *(cmsUInt16Number*)dst = CHANGE_ENDIAN(n);\n+}\n+\n+static\n@@ -150,0 +176,7 @@\n+static\n+void from16SEtoFLT(void* dst, const void* src)\n+{\n+    *(cmsFloat32Number*)dst = (CHANGE_ENDIAN(*(cmsUInt16Number*)src)) \/ 65535.0f;\n+}\n+\n+static\n@@ -155,0 +188,6 @@\n+static\n+void from16SEtoDBL(void* dst, const void* src)\n+{\n+    *(cmsFloat64Number*)dst = (CHANGE_ENDIAN(*(cmsUInt16Number*)src)) \/ 65535.0f;\n+}\n+\n@@ -167,0 +206,11 @@\n+static\n+void from16SEtoHLF(void* dst, const void* src)\n+{\n+#ifndef CMS_NO_HALF_SUPPORT\n+    cmsFloat32Number n = (CHANGE_ENDIAN(*(cmsUInt16Number*)src)) \/ 65535.0f;\n+    *(cmsUInt16Number*)dst = _cmsFloat2Half(n);\n+#else\n+    cmsUNUSED_PARAMETER(dst);\n+    cmsUNUSED_PARAMETER(src);\n+#endif\n+}\n@@ -172,2 +222,2 @@\n-       cmsFloat32Number n = *(cmsFloat32Number*)src;\n-       *(cmsUInt8Number*)dst = _cmsQuickSaturateByte(n * 255.0f);\n+    cmsFloat32Number n = *(cmsFloat32Number*)src;\n+    *(cmsUInt8Number*)dst = _cmsQuickSaturateByte(n * 255.0f);\n@@ -179,2 +229,11 @@\n-       cmsFloat32Number n = *(cmsFloat32Number*)src;\n-       *(cmsUInt16Number*)dst = _cmsQuickSaturateWord(n * 65535.0f);\n+    cmsFloat32Number n = *(cmsFloat32Number*)src;\n+    *(cmsUInt16Number*)dst = _cmsQuickSaturateWord(n * 65535.0f);\n+}\n+\n+static\n+void fromFLTto16SE(void* dst, const void* src)\n+{\n+    cmsFloat32Number n = *(cmsFloat32Number*)src;\n+    cmsUInt16Number i = _cmsQuickSaturateWord(n * 65535.0f);\n+\n+    *(cmsUInt16Number*)dst = CHANGE_ENDIAN(i);\n@@ -186,1 +245,1 @@\n-       memmove(dst, src, sizeof(cmsFloat32Number));\n+    memmove(dst, src, sizeof(cmsFloat32Number));\n@@ -192,2 +251,2 @@\n-       cmsFloat32Number n = *(cmsFloat32Number*)src;\n-       *(cmsFloat64Number*)dst = (cmsFloat64Number)n;\n+    cmsFloat32Number n = *(cmsFloat32Number*)src;\n+    *(cmsFloat64Number*)dst = (cmsFloat64Number)n;\n@@ -236,0 +295,13 @@\n+static\n+void fromHLFto16SE(void* dst, const void* src)\n+{\n+#ifndef CMS_NO_HALF_SUPPORT\n+    cmsFloat32Number n = _cmsHalf2Float(*(cmsUInt16Number*)src);\n+    cmsUInt16Number i = _cmsQuickSaturateWord(n * 65535.0f);\n+    *(cmsUInt16Number*)dst = CHANGE_ENDIAN(i);\n+#else\n+    cmsUNUSED_PARAMETER(dst);\n+    cmsUNUSED_PARAMETER(src);\n+#endif\n+}\n+\n@@ -273,0 +345,8 @@\n+static\n+void fromDBLto16SE(void* dst, const void* src)\n+{\n+    cmsFloat64Number n = *(cmsFloat64Number*)src;\n+    cmsUInt16Number  i = _cmsQuickSaturateWord(n * 65535.0f);\n+    *(cmsUInt16Number*)dst = CHANGE_ENDIAN(i);\n+}\n+\n@@ -306,1 +386,1 @@\n-        return 4; \/\/ DBL\n+        return 5; \/\/ DBL\n@@ -309,1 +389,1 @@\n-        return 2; \/\/ HLF\n+        return 3; \/\/ HLF\n@@ -312,1 +392,1 @@\n-        return 3; \/\/ FLT\n+        return 4; \/\/ FLT\n@@ -314,1 +394,6 @@\n-        return 1; \/\/ 16\n+    {\n+        if (T_ENDIAN16(frm))\n+            return 2; \/\/ 16SE\n+        else\n+            return 1; \/\/ 16\n+    }\n@@ -317,1 +402,0 @@\n-\n@@ -321,1 +405,1 @@\n-\/\/ Obtains a alpha-to-alpha funmction formatter\n+\/\/ Obtains an alpha-to-alpha function formatter\n@@ -325,1 +409,1 @@\n-static cmsFormatterAlphaFn FormattersAlpha[5][5] = {\n+static cmsFormatterAlphaFn FormattersAlpha[6][6] = {\n@@ -327,5 +411,6 @@\n-       \/* from 8 *\/  { copy8,      from8to16,   from8toHLF,   from8toFLT,   from8toDBL   },\n-       \/* from 16*\/  { from16to8,  copy16,      from16toHLF,  from16toFLT,  from16toDBL  },\n-       \/* from HLF*\/ { fromHLFto8, fromHLFto16, copy16,       fromHLFtoFLT, fromHLFtoDBL },\n-       \/* from FLT*\/ { fromFLTto8, fromFLTto16, fromFLTtoHLF, copy32,       fromFLTtoDBL },\n-       \/* from DBL*\/ { fromDBLto8, fromDBLto16, fromDBLtoHLF, fromDBLtoFLT, copy64 }};\n+       \/* from 8 *\/  { copy8,       from8to16,   from8to16SE,   from8toHLF,   from8toFLT,    from8toDBL    },\n+       \/* from 16*\/  { from16to8,   copy16,      from16to16,    from16toHLF,  from16toFLT,   from16toDBL   },\n+       \/* from 16SE*\/{ from16SEto8, from16to16,  copy16,        from16SEtoHLF,from16SEtoFLT, from16SEtoDBL },\n+       \/* from HLF*\/ { fromHLFto8,  fromHLFto16, fromHLFto16SE, copy16,       fromHLFtoFLT,  fromHLFtoDBL  },\n+       \/* from FLT*\/ { fromFLTto8,  fromFLTto16, fromFLTto16SE, fromFLTtoHLF, copy32,        fromFLTtoDBL  },\n+       \/* from DBL*\/ { fromDBLto8,  fromDBLto16, fromDBLto16SE, fromDBLtoHLF, fromDBLtoFLT,  copy64 }};\n@@ -336,1 +421,1 @@\n-        if (in_n < 0 || out_n < 0 || in_n > 4 || out_n > 4) {\n+        if (in_n < 0 || out_n < 0 || in_n > 5 || out_n > 5) {\n@@ -518,0 +603,2 @@\n+    if (copyValueFn == NULL)\n+        return;\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmsalpha.c","additions":108,"deletions":21,"binary":false,"changes":129,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmscam02.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -161,1 +161,1 @@\n-        char           FileName[cmsMAX_PATH];    \/\/ File name if being readed from file\n+        char           FileName[cmsMAX_PATH];    \/\/ File name if being read from file\n@@ -288,1 +288,1 @@\n-                                                   \/\/ measurement. Allowed values are �black�, �white�, or {\"na\".\n+                                                   \/\/ measurement. Allowed values are \"black\", \"white\", or {\"na\".\n@@ -303,1 +303,1 @@\n-                                                   \/\/ values are {\"yes�, �white�, �none� or �na�.\n+                                                   \/\/ values are {\"yes\", \"white\", \"none\" or \"na\".\n@@ -715,2 +715,2 @@\n-    register char *idptr;\n-    register int k;\n+    CMSREGISTER char *idptr;\n+    CMSREGISTER int k;\n@@ -2198,18 +2198,0 @@\n-\n-            for (i=0; i < t -> nPatches; i++) {\n-\n-                char *Data = GetData(it8, i, idField);\n-                if (Data) {\n-                    char Buffer[256];\n-\n-                    strncpy(Buffer, Data, 255);\n-                    Buffer[255] = 0;\n-\n-                    if (strlen(Buffer) <= strlen(Data))\n-                        strcpy(Data, Buffer);\n-                    else\n-                        SetData(it8, i, idField, Buffer);\n-\n-                }\n-            }\n-\n@@ -2220,1 +2202,1 @@\n-        if ((cmsstrcasecmp(Fld, \"LABEL\") == 0) || Fld[0] == '$' ) {\n+        if ((cmsstrcasecmp(Fld, \"LABEL\") == 0) || Fld[0] == '$') {\n@@ -2222,2 +2204,2 @@\n-                    \/\/ Search for table references...\n-                    for (i=0; i < t -> nPatches; i++) {\n+            \/\/ Search for table references...\n+            for (i = 0; i < t->nPatches; i++) {\n@@ -2225,1 +2207,1 @@\n-                            char *Label = GetData(it8, i, idField);\n+                char* Label = GetData(it8, i, idField);\n@@ -2227,1 +2209,1 @@\n-                            if (Label) {\n+                if (Label) {\n@@ -2229,1 +2211,1 @@\n-                                cmsUInt32Number k;\n+                    cmsUInt32Number k;\n@@ -2231,2 +2213,2 @@\n-                                \/\/ This is the label, search for a table containing\n-                                \/\/ this property\n+                    \/\/ This is the label, search for a table containing\n+                    \/\/ this property\n@@ -2234,1 +2216,1 @@\n-                                for (k=0; k < it8 ->TablesCount; k++) {\n+                    for (k = 0; k < it8->TablesCount; k++) {\n@@ -2236,2 +2218,2 @@\n-                                    TABLE* Table = it8 ->Tab + k;\n-                                    KEYVALUE* p;\n+                        TABLE* Table = it8->Tab + k;\n+                        KEYVALUE* p;\n@@ -2239,1 +2221,1 @@\n-                                    if (IsAvailableOnList(Table->HeaderList, Label, NULL, &p)) {\n+                        if (IsAvailableOnList(Table->HeaderList, Label, NULL, &p)) {\n@@ -2241,2 +2223,2 @@\n-                                        \/\/ Available, keep type and table\n-                                        char Buffer[256];\n+                            \/\/ Available, keep type and table\n+                            char Buffer[256];\n@@ -2244,2 +2226,2 @@\n-                                        char *Type  = p ->Value;\n-                                        int  nTable = (int) k;\n+                            char* Type = p->Value;\n+                            int  nTable = (int)k;\n@@ -2247,1 +2229,1 @@\n-                                        snprintf(Buffer, 255, \"%s %d %s\", Label, nTable, Type );\n+                            snprintf(Buffer, 255, \"%s %d %s\", Label, nTable, Type);\n@@ -2249,3 +2231,3 @@\n-                                        SetData(it8, i, idField, Buffer);\n-                                    }\n-                                }\n+                            SetData(it8, i, idField, Buffer);\n+                        }\n+                    }\n@@ -2254,1 +2236,1 @@\n-                            }\n+                }\n@@ -2256,1 +2238,1 @@\n-                    }\n+            }\n@@ -2352,0 +2334,5 @@\n+    if (it8->MemoryBlock == NULL)\n+    {\n+        cmsIT8Free(hIT8);\n+        return FALSE;\n+    }\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmscgats.c","additions":33,"deletions":46,"binary":false,"changes":79,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -59,13 +59,0 @@\n-\/\/ Link several profiles to obtain a single LUT modelling the whole color transform. Intents, Black point\n-\/\/ compensation and Adaptation parameters may vary across profiles. BPC and Adaptation refers to the PCS\n-\/\/ after the profile. I.e, BPC[0] refers to connexion between profile(0) and profile(1)\n-cmsPipeline* _cmsLinkProfiles(cmsContext     ContextID,\n-                              cmsUInt32Number nProfiles,\n-                              cmsUInt32Number Intents[],\n-                              cmsHPROFILE     hProfiles[],\n-                              cmsBool         BPC[],\n-                              cmsFloat64Number AdaptationStates[],\n-                              cmsUInt32Number dwFlags);\n-\n-\/\/---------------------------------------------------------------------------------\n-\n@@ -742,1 +729,1 @@\n-int BlackPreservingGrayOnlySampler(register const cmsUInt16Number In[], register cmsUInt16Number Out[], register void* Cargo)\n+int BlackPreservingGrayOnlySampler(CMSREGISTER const cmsUInt16Number In[], CMSREGISTER cmsUInt16Number Out[], CMSREGISTER void* Cargo)\n@@ -869,1 +856,1 @@\n-int BlackPreservingSampler(register const cmsUInt16Number In[], register cmsUInt16Number Out[], register void* Cargo)\n+int BlackPreservingSampler(CMSREGISTER const cmsUInt16Number In[], CMSREGISTER cmsUInt16Number Out[], CMSREGISTER void* Cargo)\n@@ -894,1 +881,1 @@\n-    cmsPipelineEvalFloat( Inf, Outf, bp ->cmyk2cmyk);\n+    cmsPipelineEvalFloat(Inf, Outf, bp ->cmyk2cmyk);\n@@ -901,1 +888,1 @@\n-    if ( fabs(Outf[3] - LabK[3]) < (3.0 \/ 65535.0) ) {\n+    if (fabsf(Outf[3] - LabK[3]) < (3.0 \/ 65535.0)) {\n@@ -905,1 +892,1 @@\n-    \/\/ K differ, mesure and keep Lab measurement for further usage\n+    \/\/ K differ, measure and keep Lab measurement for further usage\n@@ -926,1 +913,1 @@\n-    SumCMY   = Outf[0]  + Outf[1] + Outf[2];\n+    SumCMY   = (cmsFloat64Number) Outf[0]  + Outf[1] + Outf[2];\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmscnvrt.c","additions":7,"deletions":20,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -70,1 +70,1 @@\n-    register const unsigned char *us1 = (const unsigned char *)s1,\n+    CMSREGISTER const unsigned char *us1 = (const unsigned char *)s1,\n@@ -467,1 +467,1 @@\n-\/\/ for that reason, lcms2 does offer a logging function. This function does recive\n+\/\/ for that reason, lcms2 does offer a logging function. This function does receive\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmserr.c","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2013 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -332,1 +332,2 @@\n-    if (p -> Segments) _cmsFree(ContextID, p ->Segments);\n+    if (p -> SegInterp) _cmsFree(ContextID, p -> SegInterp);\n+    if (p -> Segments) _cmsFree(ContextID, p -> Segments);\n@@ -849,1 +850,1 @@\n-\/\/ if type is negative, then the curve is analyticaly inverted\n+\/\/ if type is negative, then the curve is analytically inverted\n@@ -920,1 +921,1 @@\n-    if (Curve) _cmsFree(ContextID, Curve);\n+    _cmsFree(ContextID, Curve);\n@@ -1290,1 +1291,1 @@\n-\/\/ in a linear table. This way assures it is linear in 12 bits, which should be enought in most cases.\n+\/\/ in a linear table. This way assures it is linear in 12 bits, which should be enough in most cases.\n@@ -1463,0 +1464,11 @@\n+\n+\n+\/\/ Retrieve parameters on one-segment tone curves\n+\n+cmsFloat64Number* CMSEXPORT cmsGetToneCurveParams(const cmsToneCurve* t)\n+{\n+    _cmsAssert(t != NULL);\n+\n+    if (t->nSegments != 1) return NULL;\n+    return t->Segments[0].Params;\n+}\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmsgamma.c","additions":17,"deletions":5,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -243,1 +243,1 @@\n-int GamutSampler(register const cmsUInt16Number In[], register cmsUInt16Number Out[], register void* Cargo)\n+int GamutSampler(CMSREGISTER const cmsUInt16Number In[], CMSREGISTER cmsUInt16Number Out[], CMSREGISTER void* Cargo)\n@@ -456,1 +456,1 @@\n-int EstimateTAC(register const cmsUInt16Number In[], register cmsUInt16Number Out[], register void * Cargo)\n+int EstimateTAC(CMSREGISTER const cmsUInt16Number In[], CMSREGISTER cmsUInt16Number Out[], CMSREGISTER void * Cargo)\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmsgmt.c","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -63,1 +63,1 @@\n-static cmsUInt32Number Mantissa[2048] = {\n+static const cmsUInt32Number Mantissa[2048] = {\n@@ -423,1 +423,1 @@\n-static cmsUInt32Number Exponent[64] = {\n+static const cmsUInt32Number Exponent[64] = {\n@@ -437,1 +437,1 @@\n-static cmsUInt16Number Base[512] = {\n+static const cmsUInt16Number Base[512] = {\n@@ -492,1 +492,1 @@\n-static cmsUInt8Number  Shift[512] = {\n+static const cmsUInt8Number Shift[512] = {\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmshalf.c","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -213,1 +213,1 @@\n-cmsINLINE cmsUInt16Number LinearInterp(cmsS15Fixed16Number a, cmsS15Fixed16Number l, cmsS15Fixed16Number h)\n+cmsINLINE CMS_NO_SANITIZE cmsUInt16Number LinearInterp(cmsS15Fixed16Number a, cmsS15Fixed16Number l, cmsS15Fixed16Number h)\n@@ -223,3 +223,3 @@\n-void LinLerp1D(register const cmsUInt16Number Value[],\n-               register cmsUInt16Number Output[],\n-               register const cmsInterpParams* p)\n+void LinLerp1D(CMSREGISTER const cmsUInt16Number Value[],\n+               CMSREGISTER cmsUInt16Number Output[],\n+               CMSREGISTER const cmsInterpParams* p)\n@@ -236,1 +236,0 @@\n-        return;\n@@ -238,0 +237,4 @@\n+    else\n+    {\n+        val3 = p->Domain[0] * Value[0];\n+        val3 = _cmsToFixedDomain(val3);    \/\/ To fixed 15.16\n@@ -239,2 +242,2 @@\n-    val3 = p -> Domain[0] * Value[0];\n-    val3 = _cmsToFixedDomain(val3);    \/\/ To fixed 15.16\n+        cell0 = FIXED_TO_INT(val3);             \/\/ Cell is 16 MSB bits\n+        rest = FIXED_REST_TO_INT(val3);        \/\/ Rest is 16 LSB bits\n@@ -242,2 +245,2 @@\n-    cell0 = FIXED_TO_INT(val3);             \/\/ Cell is 16 MSB bits\n-    rest  = FIXED_REST_TO_INT(val3);        \/\/ Rest is 16 LSB bits\n+        y0 = LutTable[cell0];\n+        y1 = LutTable[cell0 + 1];\n@@ -245,5 +248,2 @@\n-    y0 = LutTable[cell0];\n-    y1 = LutTable[cell0+1];\n-\n-\n-    Output[0] = LinearInterp(rest, y0, y1);\n+        Output[0] = LinearInterp(rest, y0, y1);\n+    }\n@@ -274,1 +274,0 @@\n-           return;\n@@ -276,0 +275,3 @@\n+       else\n+       {\n+           val2 *= p->Domain[0];\n@@ -277,4 +279,2 @@\n-       val2 *= p -> Domain[0];\n-\n-       cell0 = (int) floor(val2);\n-       cell1 = (int) ceil(val2);\n+           cell0 = (int)floor(val2);\n+           cell1 = (int)ceil(val2);\n@@ -282,2 +282,2 @@\n-       \/\/ Rest is 16 LSB bits\n-       rest = val2 - cell0;\n+           \/\/ Rest is 16 LSB bits\n+           rest = val2 - cell0;\n@@ -285,2 +285,2 @@\n-       y0 = LutTable[cell0] ;\n-       y1 = LutTable[cell1] ;\n+           y0 = LutTable[cell0];\n+           y1 = LutTable[cell1];\n@@ -288,1 +288,2 @@\n-       Output[0] = y0 + (y1 - y0) * rest;\n+           Output[0] = y0 + (y1 - y0) * rest;\n+       }\n@@ -294,4 +295,4 @@\n-static\n-void Eval1Input(register const cmsUInt16Number Input[],\n-                register cmsUInt16Number Output[],\n-                register const cmsInterpParams* p16)\n+static CMS_NO_SANITIZE\n+void Eval1Input(CMSREGISTER const cmsUInt16Number Input[],\n+                CMSREGISTER cmsUInt16Number Output[],\n+                CMSREGISTER const cmsInterpParams* p16)\n@@ -338,5 +339,2 @@\n-        \/\/ if last value...\n-       if (val2 == 1.0) {\n-           Output[0] = LutTable[p -> Domain[0]];\n-           return;\n-       }\n+    \/\/ if last value...\n+    if (val2 == 1.0) {\n@@ -344,1 +342,1 @@\n-       val2 *= p -> Domain[0];\n+        y0 = LutTable[p->Domain[0]];\n@@ -346,2 +344,7 @@\n-       cell0 = (int) floor(val2);\n-       cell1 = (int) ceil(val2);\n+        for (OutChan = 0; OutChan < p->nOutputs; OutChan++) {\n+            Output[OutChan] = y0;\n+        }\n+    }\n+    else\n+    {\n+        val2 *= p->Domain[0];\n@@ -349,2 +352,2 @@\n-       \/\/ Rest is 16 LSB bits\n-       rest = val2 - cell0;\n+        cell0 = (int)floor(val2);\n+        cell1 = (int)ceil(val2);\n@@ -352,2 +355,2 @@\n-       cell0 *= p -> opta[0];\n-       cell1 *= p -> opta[0];\n+        \/\/ Rest is 16 LSB bits\n+        rest = val2 - cell0;\n@@ -355,1 +358,2 @@\n-       for (OutChan=0; OutChan < p->nOutputs; OutChan++) {\n+        cell0 *= p->opta[0];\n+        cell1 *= p->opta[0];\n@@ -357,2 +361,4 @@\n-            y0 = LutTable[cell0 + OutChan] ;\n-            y1 = LutTable[cell1 + OutChan] ;\n+        for (OutChan = 0; OutChan < p->nOutputs; OutChan++) {\n+\n+            y0 = LutTable[cell0 + OutChan];\n+            y1 = LutTable[cell1 + OutChan];\n@@ -361,1 +367,2 @@\n-       }\n+        }\n+    }\n@@ -418,4 +425,4 @@\n-static\n-void BilinearInterp16(register const cmsUInt16Number Input[],\n-                      register cmsUInt16Number Output[],\n-                      register const cmsInterpParams* p)\n+static CMS_NO_SANITIZE\n+void BilinearInterp16(CMSREGISTER const cmsUInt16Number Input[],\n+                      CMSREGISTER cmsUInt16Number Output[],\n+                      CMSREGISTER const cmsInterpParams* p)\n@@ -430,1 +437,1 @@\n-  register int        rx, ry;\n+  CMSREGISTER int        rx, ry;\n@@ -432,1 +439,1 @@\n-  register int        X0, X1, Y0, Y1;\n+  CMSREGISTER int        X0, X1, Y0, Y1;\n@@ -549,4 +556,4 @@\n-static\n-void TrilinearInterp16(register const cmsUInt16Number Input[],\n-                       register cmsUInt16Number Output[],\n-                       register const cmsInterpParams* p)\n+static CMS_NO_SANITIZE\n+void TrilinearInterp16(CMSREGISTER const cmsUInt16Number Input[],\n+                       CMSREGISTER cmsUInt16Number Output[],\n+                       CMSREGISTER const cmsInterpParams* p)\n@@ -561,1 +568,1 @@\n-  register int        rx, ry, rz;\n+  CMSREGISTER int        rx, ry, rz;\n@@ -563,1 +570,1 @@\n-  register int        X0, X1, Y0, Y1, Z0, Z1;\n+  CMSREGISTER int        X0, X1, Y0, Y1, Z0, Z1;\n@@ -729,4 +736,4 @@\n-static\n-void TetrahedralInterp16(register const cmsUInt16Number Input[],\n-                         register cmsUInt16Number Output[],\n-                         register const cmsInterpParams* p)\n+static CMS_NO_SANITIZE\n+void TetrahedralInterp16(CMSREGISTER const cmsUInt16Number Input[],\n+                         CMSREGISTER cmsUInt16Number Output[],\n+                         CMSREGISTER const cmsInterpParams* p)\n@@ -863,4 +870,4 @@\n-static\n-void Eval4Inputs(register const cmsUInt16Number Input[],\n-                     register cmsUInt16Number Output[],\n-                     register const cmsInterpParams* p16)\n+static CMS_NO_SANITIZE\n+void Eval4Inputs(CMSREGISTER const cmsUInt16Number Input[],\n+                     CMSREGISTER cmsUInt16Number Output[],\n+                     CMSREGISTER const cmsInterpParams* p16)\n@@ -967,1 +974,1 @@\n-                            Rest = c1 * rx + c2 * ry + c3 * rz;\n+        Rest = c1 * rx + c2 * ry + c3 * rz;\n@@ -969,1 +976,1 @@\n-                            Tmp1[OutChan] = (cmsUInt16Number)(c0 + ROUND_FIXED_TO_INT(_cmsToFixedDomain(Rest)));\n+        Tmp1[OutChan] = (cmsUInt16Number)(c0 + ROUND_FIXED_TO_INT(_cmsToFixedDomain(Rest)));\n@@ -1031,1 +1038,1 @@\n-                            Rest = c1 * rx + c2 * ry + c3 * rz;\n+        Rest = c1 * rx + c2 * ry + c3 * rz;\n@@ -1033,1 +1040,1 @@\n-                            Tmp2[OutChan] = (cmsUInt16Number) (c0 + ROUND_FIXED_TO_INT(_cmsToFixedDomain(Rest)));\n+        Tmp2[OutChan] = (cmsUInt16Number) (c0 + ROUND_FIXED_TO_INT(_cmsToFixedDomain(Rest)));\n@@ -1092,3 +1099,3 @@\n-static\n-void Eval5Inputs(register const cmsUInt16Number Input[],\n-                 register cmsUInt16Number Output[],\n+static CMS_NO_SANITIZE\n+void Eval5Inputs(CMSREGISTER const cmsUInt16Number Input[],\n+                 CMSREGISTER cmsUInt16Number Output[],\n@@ -1096,1 +1103,1 @@\n-                 register const cmsInterpParams* p16)\n+                 CMSREGISTER const cmsInterpParams* p16)\n@@ -1181,4 +1188,4 @@\n-static\n-void Eval6Inputs(register const cmsUInt16Number Input[],\n-                 register cmsUInt16Number Output[],\n-                 register const cmsInterpParams* p16)\n+static CMS_NO_SANITIZE\n+void Eval6Inputs(CMSREGISTER const cmsUInt16Number Input[],\n+                 CMSREGISTER cmsUInt16Number Output[],\n+                 CMSREGISTER const cmsInterpParams* p16)\n@@ -1267,4 +1274,4 @@\n-static\n-void Eval7Inputs(register const cmsUInt16Number Input[],\n-                 register cmsUInt16Number Output[],\n-                 register const cmsInterpParams* p16)\n+static CMS_NO_SANITIZE\n+void Eval7Inputs(CMSREGISTER const cmsUInt16Number Input[],\n+                 CMSREGISTER cmsUInt16Number Output[],\n+                 CMSREGISTER const cmsInterpParams* p16)\n@@ -1353,4 +1360,4 @@\n-static\n-void Eval8Inputs(register const cmsUInt16Number Input[],\n-                 register cmsUInt16Number Output[],\n-                 register const cmsInterpParams* p16)\n+static CMS_NO_SANITIZE\n+void Eval8Inputs(CMSREGISTER const cmsUInt16Number Input[],\n+                 CMSREGISTER cmsUInt16Number Output[],\n+                 CMSREGISTER const cmsInterpParams* p16)\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmsintrp.c","additions":92,"deletions":85,"binary":false,"changes":177,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -266,1 +266,1 @@\n-\/\/ mode (\"w\"), Buffere points to the begin of memory block to be written.\n+\/\/ mode (\"w\"), Buffer points to the begin of memory block to be written.\n@@ -665,1 +665,0 @@\n-\n@@ -686,2 +685,0 @@\n-\n-\n@@ -1599,1 +1596,1 @@\n-    TagSize  -= 8;       \/\/ Alredy read by the type base logic\n+    TagSize  -= 8;       \/\/ Already read by the type base logic\n@@ -1634,0 +1631,1 @@\n+        goto Error;\n@@ -1830,1 +1828,1 @@\n-    \/\/ The data has been already read, or written. But wait!, maybe the user choosed to save as\n+    \/\/ The data has been already read, or written. But wait!, maybe the user chose to save as\n@@ -1850,1 +1848,1 @@\n-    \/\/ Already readed, or previously set by cmsWriteTag(). We need to serialize that\n+    \/\/ Already read, or previously set by cmsWriteTag(). We need to serialize that\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmsio0.c","additions":6,"deletions":8,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -233,1 +233,0 @@\n-    cmsFreeToneCurve(GrayTRC);\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmsio1.c","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -429,2 +429,2 @@\n-    if (NewElem == NULL) return NULL;\n-\n+    if (NewElem == NULL) goto Error;\n+    NewMPE->Data = (void*)NewElem;\n@@ -433,5 +433,1 @@\n-\n-    if (NewElem->Double == NULL) {\n-        MatrixElemTypeFree(NewMPE);\n-        return NULL;\n-    }\n+    if (NewElem->Double == NULL) goto Error;\n@@ -443,1 +439,0 @@\n-\n@@ -447,4 +442,1 @@\n-        if (NewElem->Offset == NULL) {\n-           MatrixElemTypeFree(NewMPE);\n-           return NULL;\n-        }\n+        if (NewElem->Offset == NULL) goto Error;\n@@ -455,1 +447,0 @@\n-\n@@ -458,1 +449,0 @@\n-    NewMPE ->Data  = (void*) NewElem;\n@@ -460,0 +450,4 @@\n+\n+Error:\n+    cmsStageFree(NewMPE);\n+    return NULL;\n@@ -732,1 +726,1 @@\n-int IdentitySampler(register const cmsUInt16Number In[], register cmsUInt16Number Out[], register void * Cargo)\n+int IdentitySampler(CMSREGISTER const cmsUInt16Number In[], CMSREGISTER cmsUInt16Number Out[], CMSREGISTER void * Cargo)\n@@ -1349,1 +1343,1 @@\n-void _LUTeval16(register const cmsUInt16Number In[], register cmsUInt16Number Out[],  register const void* D)\n+void _LUTeval16(CMSREGISTER const cmsUInt16Number In[], CMSREGISTER cmsUInt16Number Out[],  CMSREGISTER const void* D)\n@@ -1375,1 +1369,1 @@\n-void _LUTevalFloat(register const cmsFloat32Number In[], register cmsFloat32Number Out[], const void* D)\n+void _LUTevalFloat(CMSREGISTER const cmsFloat32Number In[], CMSREGISTER cmsFloat32Number Out[], const void* D)\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmslut.c","additions":12,"deletions":18,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -97,2 +97,1 @@\n-void MD5_Transform(cmsUInt32Number buf[4], cmsUInt32Number in[16])\n-\n+void cmsMD5_Transform(cmsUInt32Number buf[4], cmsUInt32Number in[16])\n@@ -100,1 +99,1 @@\n-    register cmsUInt32Number a, b, c, d;\n+    CMSREGISTER cmsUInt32Number a, b, c, d;\n@@ -183,2 +182,2 @@\n-static\n-cmsHANDLE  MD5alloc(cmsContext ContextID)\n+\n+cmsHANDLE CMSEXPORT cmsMD5alloc(cmsContext ContextID)\n@@ -202,3 +201,1 @@\n-\n-static\n-void MD5add(cmsHANDLE Handle, cmsUInt8Number* buf, cmsUInt32Number len)\n+void CMSEXPORT cmsMD5add(cmsHANDLE Handle, const cmsUInt8Number* buf, cmsUInt32Number len)\n@@ -230,1 +227,1 @@\n-        MD5_Transform(ctx->buf, (cmsUInt32Number *) ctx->in);\n+        cmsMD5_Transform(ctx->buf, (cmsUInt32Number *) ctx->in);\n@@ -238,1 +235,1 @@\n-        MD5_Transform(ctx->buf, (cmsUInt32Number *) ctx->in);\n+        cmsMD5_Transform(ctx->buf, (cmsUInt32Number *) ctx->in);\n@@ -247,2 +244,1 @@\n-static\n-void MD5finish(cmsProfileID* ProfileID,  cmsHANDLE Handle)\n+void CMSEXPORT cmsMD5finish(cmsProfileID* ProfileID,  cmsHANDLE Handle)\n@@ -265,1 +261,1 @@\n-        MD5_Transform(ctx->buf, (cmsUInt32Number *) ctx->in);\n+        cmsMD5_Transform(ctx->buf, (cmsUInt32Number *) ctx->in);\n@@ -276,1 +272,1 @@\n-    MD5_Transform(ctx->buf, (cmsUInt32Number *) ctx->in);\n+    cmsMD5_Transform(ctx->buf, (cmsUInt32Number *) ctx->in);\n@@ -322,1 +318,1 @@\n-    MD5 = MD5alloc(ContextID);\n+    MD5 = cmsMD5alloc(ContextID);\n@@ -326,1 +322,1 @@\n-    MD5add(MD5, Mem, BytesNeeded);\n+    cmsMD5add(MD5, Mem, BytesNeeded);\n@@ -335,1 +331,1 @@\n-    MD5finish(&Icc ->ProfileID,  MD5);\n+    cmsMD5finish(&Icc ->ProfileID,  MD5);\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmsmd5.c","additions":14,"deletions":18,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmsmtrx.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -570,1 +570,1 @@\n-            _cmsFree(ContextID, (void*) v);\n+            cmsFreeNamedColorList(v);\n@@ -603,1 +603,5 @@\n-        if (!GrowNamedColorList(NewNC)) return NULL;\n+        if (!GrowNamedColorList(NewNC))\n+        {\n+            cmsFreeNamedColorList(NewNC);\n+            return NULL;\n+        }\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmsnamed.c","additions":7,"deletions":3,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -320,3 +320,3 @@\n-void Eval16nop1D(register const cmsUInt16Number Input[],\n-                 register cmsUInt16Number Output[],\n-                 register const struct _cms_interp_struc* p)\n+void Eval16nop1D(CMSREGISTER const cmsUInt16Number Input[],\n+                 CMSREGISTER cmsUInt16Number Output[],\n+                 CMSREGISTER const struct _cms_interp_struc* p)\n@@ -330,3 +330,3 @@\n-void PrelinEval16(register const cmsUInt16Number Input[],\n-                  register cmsUInt16Number Output[],\n-                  register const void* D)\n+void PrelinEval16(CMSREGISTER const cmsUInt16Number Input[],\n+                  CMSREGISTER cmsUInt16Number Output[],\n+                  CMSREGISTER const void* D)\n@@ -438,1 +438,1 @@\n-cmsInt32Number XFormSampler16(register const cmsUInt16Number In[], register cmsUInt16Number Out[], register void* Cargo)\n+cmsInt32Number XFormSampler16(CMSREGISTER const cmsUInt16Number In[], CMSREGISTER cmsUInt16Number Out[], CMSREGISTER void* Cargo)\n@@ -555,2 +555,2 @@\n-            for (i = 0; i < (int) nChannelsOut; i++)\n-                Grid->Tab.T[index + i] = Value[i];\n+    for (i = 0; i < (int) nChannelsOut; i++)\n+        Grid->Tab.T[index + i] = Value[i];\n@@ -558,1 +558,1 @@\n-            return TRUE;\n+    return TRUE;\n@@ -676,1 +676,1 @@\n-    \/\/ This is a loosy optimization! does not apply in floating-point cases\n+    \/\/ This is a lossy optimization! does not apply in floating-point cases\n@@ -940,4 +940,4 @@\n-static\n-void PrelinEval8(register const cmsUInt16Number Input[],\n-                  register cmsUInt16Number Output[],\n-                  register const void* D)\n+static CMS_NO_SANITIZE\n+void PrelinEval8(CMSREGISTER const cmsUInt16Number Input[],\n+                  CMSREGISTER cmsUInt16Number Output[],\n+                  CMSREGISTER const void* D)\n@@ -950,1 +950,1 @@\n-    register cmsS15Fixed16Number X0, X1, Y0, Y1, Z0, Z1;\n+    CMSREGISTER cmsS15Fixed16Number X0, X1, Y0, Y1, Z0, Z1;\n@@ -952,1 +952,1 @@\n-    register const cmsInterpParams* p = p8 ->p;\n+    CMSREGISTER const cmsInterpParams* p = p8 ->p;\n@@ -1023,2 +1023,2 @@\n-                            Rest = c1 * rx + c2 * ry + c3 * rz + 0x8001;\n-                            Output[OutChan] = (cmsUInt16Number) (c0 + ((Rest + (Rest >> 16)) >> 16));\n+        Rest = c1 * rx + c2 * ry + c3 * rz + 0x8001;\n+        Output[OutChan] = (cmsUInt16Number) (c0 + ((Rest + (Rest >> 16)) >> 16));\n@@ -1073,1 +1073,1 @@\n-    \/\/ This is a loosy optimization! does not apply in floating-point cases\n+    \/\/ This is a lossy optimization! does not apply in floating-point cases\n@@ -1116,0 +1116,1 @@\n+        if (last == NULL) goto Error;\n@@ -1224,4 +1225,1 @@\n-        if (p8 == NULL) {\n-            cmsPipelineFree(OptimizedLUT);\n-            return FALSE;\n-        }\n+        if (p8 == NULL) return FALSE;\n@@ -1237,4 +1235,1 @@\n-        if (p16 == NULL) {\n-            cmsPipelineFree(OptimizedLUT);\n-            return FALSE;\n-        }\n+        if (p16 == NULL) return FALSE;\n@@ -1368,3 +1363,3 @@\n-void FastEvaluateCurves8(register const cmsUInt16Number In[],\n-                          register cmsUInt16Number Out[],\n-                          register const void* D)\n+void FastEvaluateCurves8(CMSREGISTER const cmsUInt16Number In[],\n+                          CMSREGISTER cmsUInt16Number Out[],\n+                          CMSREGISTER const void* D)\n@@ -1385,3 +1380,3 @@\n-void FastEvaluateCurves16(register const cmsUInt16Number In[],\n-                          register cmsUInt16Number Out[],\n-                          register const void* D)\n+void FastEvaluateCurves16(CMSREGISTER const cmsUInt16Number In[],\n+                          CMSREGISTER cmsUInt16Number Out[],\n+                          CMSREGISTER const void* D)\n@@ -1399,3 +1394,3 @@\n-void FastIdentity16(register const cmsUInt16Number In[],\n-                    register cmsUInt16Number Out[],\n-                    register const void* D)\n+void FastIdentity16(CMSREGISTER const cmsUInt16Number In[],\n+                    CMSREGISTER cmsUInt16Number Out[],\n+                    CMSREGISTER const void* D)\n@@ -1426,1 +1421,1 @@\n-    \/\/ This is a loosy optimization! does not apply in floating-point cases\n+    \/\/ This is a lossy optimization! does not apply in floating-point cases\n@@ -1476,0 +1471,1 @@\n+       _cmsStageToneCurvesData* Data;\n@@ -1479,0 +1475,2 @@\n+        Data = (_cmsStageToneCurvesData*) cmsStageData(ObtainedCurves);\n+        ObtainedCurves = NULL;\n@@ -1482,2 +1480,0 @@\n-\n-            _cmsStageToneCurvesData* Data = (_cmsStageToneCurvesData*) ObtainedCurves ->Data;\n@@ -1492,2 +1488,0 @@\n-\n-            _cmsStageToneCurvesData* Data = (_cmsStageToneCurvesData*) cmsStageData(ObtainedCurves);\n@@ -1560,3 +1554,3 @@\n-void MatShaperEval16(register const cmsUInt16Number In[],\n-                     register cmsUInt16Number Out[],\n-                     register const void* D)\n+void MatShaperEval16(CMSREGISTER const cmsUInt16Number In[],\n+                     CMSREGISTER cmsUInt16Number Out[],\n+                     CMSREGISTER const void* D)\n@@ -1802,2 +1796,2 @@\n-        \/\/ In this particular optimization, cach� does not help as it takes more time to deal with\n-        \/\/ the cach� that with the pixel handling\n+        \/\/ In this particular optimization, cache does not help as it takes more time to deal with\n+        \/\/ the cache that with the pixel handling\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmsopt.c","additions":42,"deletions":48,"binary":false,"changes":90,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -124,4 +124,4 @@\n-cmsUInt8Number* UnrollChunkyBytes(register _cmsTRANSFORM* info,\n-                                  register cmsUInt16Number wIn[],\n-                                  register cmsUInt8Number* accum,\n-                                  register cmsUInt32Number Stride)\n+cmsUInt8Number* UnrollChunkyBytes(CMSREGISTER _cmsTRANSFORM* info,\n+                                  CMSREGISTER cmsUInt16Number wIn[],\n+                                  CMSREGISTER cmsUInt8Number* accum,\n+                                  CMSREGISTER cmsUInt32Number Stride)\n@@ -171,4 +171,4 @@\n-cmsUInt8Number* UnrollPlanarBytes(register _cmsTRANSFORM* info,\n-                                  register cmsUInt16Number wIn[],\n-                                  register cmsUInt8Number* accum,\n-                                  register cmsUInt32Number Stride)\n+cmsUInt8Number* UnrollPlanarBytes(CMSREGISTER _cmsTRANSFORM* info,\n+                                  CMSREGISTER cmsUInt16Number wIn[],\n+                                  CMSREGISTER cmsUInt8Number* accum,\n+                                  CMSREGISTER cmsUInt32Number Stride)\n@@ -201,4 +201,4 @@\n-cmsUInt8Number* Unroll4Bytes(register _cmsTRANSFORM* info,\n-                             register cmsUInt16Number wIn[],\n-                             register cmsUInt8Number* accum,\n-                             register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll4Bytes(CMSREGISTER _cmsTRANSFORM* info,\n+                             CMSREGISTER cmsUInt16Number wIn[],\n+                             CMSREGISTER cmsUInt8Number* accum,\n+                             CMSREGISTER cmsUInt32Number Stride)\n@@ -218,4 +218,4 @@\n-cmsUInt8Number* Unroll4BytesReverse(register _cmsTRANSFORM* info,\n-                                    register cmsUInt16Number wIn[],\n-                                    register cmsUInt8Number* accum,\n-                                    register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll4BytesReverse(CMSREGISTER _cmsTRANSFORM* info,\n+                                    CMSREGISTER cmsUInt16Number wIn[],\n+                                    CMSREGISTER cmsUInt8Number* accum,\n+                                    CMSREGISTER cmsUInt32Number Stride)\n@@ -235,4 +235,4 @@\n-cmsUInt8Number* Unroll4BytesSwapFirst(register _cmsTRANSFORM* info,\n-                                      register cmsUInt16Number wIn[],\n-                                      register cmsUInt8Number* accum,\n-                                      register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll4BytesSwapFirst(CMSREGISTER _cmsTRANSFORM* info,\n+                                      CMSREGISTER cmsUInt16Number wIn[],\n+                                      CMSREGISTER cmsUInt8Number* accum,\n+                                      CMSREGISTER cmsUInt32Number Stride)\n@@ -253,4 +253,4 @@\n-cmsUInt8Number* Unroll4BytesSwap(register _cmsTRANSFORM* info,\n-                                 register cmsUInt16Number wIn[],\n-                                 register cmsUInt8Number* accum,\n-                                 register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll4BytesSwap(CMSREGISTER _cmsTRANSFORM* info,\n+                                 CMSREGISTER cmsUInt16Number wIn[],\n+                                 CMSREGISTER cmsUInt8Number* accum,\n+                                 CMSREGISTER cmsUInt32Number Stride)\n@@ -270,4 +270,4 @@\n-cmsUInt8Number* Unroll4BytesSwapSwapFirst(register _cmsTRANSFORM* info,\n-                                          register cmsUInt16Number wIn[],\n-                                          register cmsUInt8Number* accum,\n-                                          register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll4BytesSwapSwapFirst(CMSREGISTER _cmsTRANSFORM* info,\n+                                          CMSREGISTER cmsUInt16Number wIn[],\n+                                          CMSREGISTER cmsUInt8Number* accum,\n+                                          CMSREGISTER cmsUInt32Number Stride)\n@@ -287,4 +287,4 @@\n-cmsUInt8Number* Unroll3Bytes(register _cmsTRANSFORM* info,\n-                             register cmsUInt16Number wIn[],\n-                             register cmsUInt8Number* accum,\n-                             register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll3Bytes(CMSREGISTER _cmsTRANSFORM* info,\n+                             CMSREGISTER cmsUInt16Number wIn[],\n+                             CMSREGISTER cmsUInt8Number* accum,\n+                             CMSREGISTER cmsUInt32Number Stride)\n@@ -303,4 +303,4 @@\n-cmsUInt8Number* Unroll3BytesSkip1Swap(register _cmsTRANSFORM* info,\n-                                      register cmsUInt16Number wIn[],\n-                                      register cmsUInt8Number* accum,\n-                                      register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll3BytesSkip1Swap(CMSREGISTER _cmsTRANSFORM* info,\n+                                      CMSREGISTER cmsUInt16Number wIn[],\n+                                      CMSREGISTER cmsUInt8Number* accum,\n+                                      CMSREGISTER cmsUInt32Number Stride)\n@@ -320,4 +320,4 @@\n-cmsUInt8Number* Unroll3BytesSkip1SwapSwapFirst(register _cmsTRANSFORM* info,\n-                                              register cmsUInt16Number wIn[],\n-                                              register cmsUInt8Number* accum,\n-                                              register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll3BytesSkip1SwapSwapFirst(CMSREGISTER _cmsTRANSFORM* info,\n+                                              CMSREGISTER cmsUInt16Number wIn[],\n+                                              CMSREGISTER cmsUInt8Number* accum,\n+                                              CMSREGISTER cmsUInt32Number Stride)\n@@ -337,4 +337,4 @@\n-cmsUInt8Number* Unroll3BytesSkip1SwapFirst(register _cmsTRANSFORM* info,\n-                                           register cmsUInt16Number wIn[],\n-                                           register cmsUInt8Number* accum,\n-                                           register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll3BytesSkip1SwapFirst(CMSREGISTER _cmsTRANSFORM* info,\n+                                           CMSREGISTER cmsUInt16Number wIn[],\n+                                           CMSREGISTER cmsUInt8Number* accum,\n+                                           CMSREGISTER cmsUInt32Number Stride)\n@@ -356,4 +356,4 @@\n-cmsUInt8Number* Unroll3BytesSwap(register _cmsTRANSFORM* info,\n-                                 register cmsUInt16Number wIn[],\n-                                 register cmsUInt8Number* accum,\n-                                 register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll3BytesSwap(CMSREGISTER _cmsTRANSFORM* info,\n+                                 CMSREGISTER cmsUInt16Number wIn[],\n+                                 CMSREGISTER cmsUInt8Number* accum,\n+                                 CMSREGISTER cmsUInt32Number Stride)\n@@ -372,4 +372,4 @@\n-cmsUInt8Number* UnrollLabV2_8(register _cmsTRANSFORM* info,\n-                              register cmsUInt16Number wIn[],\n-                              register cmsUInt8Number* accum,\n-                              register cmsUInt32Number Stride)\n+cmsUInt8Number* UnrollLabV2_8(CMSREGISTER _cmsTRANSFORM* info,\n+                              CMSREGISTER cmsUInt16Number wIn[],\n+                              CMSREGISTER cmsUInt8Number* accum,\n+                              CMSREGISTER cmsUInt32Number Stride)\n@@ -388,4 +388,4 @@\n-cmsUInt8Number* UnrollALabV2_8(register _cmsTRANSFORM* info,\n-                               register cmsUInt16Number wIn[],\n-                               register cmsUInt8Number* accum,\n-                               register cmsUInt32Number Stride)\n+cmsUInt8Number* UnrollALabV2_8(CMSREGISTER _cmsTRANSFORM* info,\n+                               CMSREGISTER cmsUInt16Number wIn[],\n+                               CMSREGISTER cmsUInt8Number* accum,\n+                               CMSREGISTER cmsUInt32Number Stride)\n@@ -405,4 +405,4 @@\n-cmsUInt8Number* UnrollLabV2_16(register _cmsTRANSFORM* info,\n-                               register cmsUInt16Number wIn[],\n-                               register cmsUInt8Number* accum,\n-                               register cmsUInt32Number Stride)\n+cmsUInt8Number* UnrollLabV2_16(CMSREGISTER _cmsTRANSFORM* info,\n+                               CMSREGISTER cmsUInt16Number wIn[],\n+                               CMSREGISTER cmsUInt8Number* accum,\n+                               CMSREGISTER cmsUInt32Number Stride)\n@@ -422,4 +422,4 @@\n-cmsUInt8Number* Unroll2Bytes(register _cmsTRANSFORM* info,\n-                                     register cmsUInt16Number wIn[],\n-                                     register cmsUInt8Number* accum,\n-                                     register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll2Bytes(CMSREGISTER _cmsTRANSFORM* info,\n+                                     CMSREGISTER cmsUInt16Number wIn[],\n+                                     CMSREGISTER cmsUInt8Number* accum,\n+                                     CMSREGISTER cmsUInt32Number Stride)\n@@ -441,4 +441,4 @@\n-cmsUInt8Number* Unroll1Byte(register _cmsTRANSFORM* info,\n-                            register cmsUInt16Number wIn[],\n-                            register cmsUInt8Number* accum,\n-                            register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll1Byte(CMSREGISTER _cmsTRANSFORM* info,\n+                            CMSREGISTER cmsUInt16Number wIn[],\n+                            CMSREGISTER cmsUInt8Number* accum,\n+                            CMSREGISTER cmsUInt32Number Stride)\n@@ -456,4 +456,4 @@\n-cmsUInt8Number* Unroll1ByteSkip1(register _cmsTRANSFORM* info,\n-                                 register cmsUInt16Number wIn[],\n-                                 register cmsUInt8Number* accum,\n-                                 register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll1ByteSkip1(CMSREGISTER _cmsTRANSFORM* info,\n+                                 CMSREGISTER cmsUInt16Number wIn[],\n+                                 CMSREGISTER cmsUInt8Number* accum,\n+                                 CMSREGISTER cmsUInt32Number Stride)\n@@ -471,4 +471,4 @@\n-cmsUInt8Number* Unroll1ByteSkip2(register _cmsTRANSFORM* info,\n-                                 register cmsUInt16Number wIn[],\n-                                 register cmsUInt8Number* accum,\n-                                 register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll1ByteSkip2(CMSREGISTER _cmsTRANSFORM* info,\n+                                 CMSREGISTER cmsUInt16Number wIn[],\n+                                 CMSREGISTER cmsUInt8Number* accum,\n+                                 CMSREGISTER cmsUInt32Number Stride)\n@@ -486,4 +486,4 @@\n-cmsUInt8Number* Unroll1ByteReversed(register _cmsTRANSFORM* info,\n-                                    register cmsUInt16Number wIn[],\n-                                    register cmsUInt8Number* accum,\n-                                    register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll1ByteReversed(CMSREGISTER _cmsTRANSFORM* info,\n+                                    CMSREGISTER cmsUInt16Number wIn[],\n+                                    CMSREGISTER cmsUInt8Number* accum,\n+                                    CMSREGISTER cmsUInt32Number Stride)\n@@ -501,4 +501,4 @@\n-cmsUInt8Number* UnrollAnyWords(register _cmsTRANSFORM* info,\n-                               register cmsUInt16Number wIn[],\n-                               register cmsUInt8Number* accum,\n-                               register cmsUInt32Number Stride)\n+cmsUInt8Number* UnrollAnyWords(CMSREGISTER _cmsTRANSFORM* info,\n+                               CMSREGISTER cmsUInt16Number wIn[],\n+                               CMSREGISTER cmsUInt8Number* accum,\n+                               CMSREGISTER cmsUInt32Number Stride)\n@@ -550,4 +550,4 @@\n-cmsUInt8Number* UnrollPlanarWords(register _cmsTRANSFORM* info,\n-                                  register cmsUInt16Number wIn[],\n-                                  register cmsUInt8Number* accum,\n-                                  register cmsUInt32Number Stride)\n+cmsUInt8Number* UnrollPlanarWords(CMSREGISTER _cmsTRANSFORM* info,\n+                                  CMSREGISTER cmsUInt16Number wIn[],\n+                                  CMSREGISTER cmsUInt8Number* accum,\n+                                  CMSREGISTER cmsUInt32Number Stride)\n@@ -584,4 +584,4 @@\n-cmsUInt8Number* Unroll4Words(register _cmsTRANSFORM* info,\n-                             register cmsUInt16Number wIn[],\n-                             register cmsUInt8Number* accum,\n-                             register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll4Words(CMSREGISTER _cmsTRANSFORM* info,\n+                             CMSREGISTER cmsUInt16Number wIn[],\n+                             CMSREGISTER cmsUInt8Number* accum,\n+                             CMSREGISTER cmsUInt32Number Stride)\n@@ -601,4 +601,4 @@\n-cmsUInt8Number* Unroll4WordsReverse(register _cmsTRANSFORM* info,\n-                                    register cmsUInt16Number wIn[],\n-                                    register cmsUInt8Number* accum,\n-                                    register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll4WordsReverse(CMSREGISTER _cmsTRANSFORM* info,\n+                                    CMSREGISTER cmsUInt16Number wIn[],\n+                                    CMSREGISTER cmsUInt8Number* accum,\n+                                    CMSREGISTER cmsUInt32Number Stride)\n@@ -618,4 +618,4 @@\n-cmsUInt8Number* Unroll4WordsSwapFirst(register _cmsTRANSFORM* info,\n-                                      register cmsUInt16Number wIn[],\n-                                      register cmsUInt8Number* accum,\n-                                      register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll4WordsSwapFirst(CMSREGISTER _cmsTRANSFORM* info,\n+                                      CMSREGISTER cmsUInt16Number wIn[],\n+                                      CMSREGISTER cmsUInt8Number* accum,\n+                                      CMSREGISTER cmsUInt32Number Stride)\n@@ -636,4 +636,4 @@\n-cmsUInt8Number* Unroll4WordsSwap(register _cmsTRANSFORM* info,\n-                                 register cmsUInt16Number wIn[],\n-                                 register cmsUInt8Number* accum,\n-                                 register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll4WordsSwap(CMSREGISTER _cmsTRANSFORM* info,\n+                                 CMSREGISTER cmsUInt16Number wIn[],\n+                                 CMSREGISTER cmsUInt8Number* accum,\n+                                 CMSREGISTER cmsUInt32Number Stride)\n@@ -653,4 +653,4 @@\n-cmsUInt8Number* Unroll4WordsSwapSwapFirst(register _cmsTRANSFORM* info,\n-                                          register cmsUInt16Number wIn[],\n-                                          register cmsUInt8Number* accum,\n-                                          register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll4WordsSwapSwapFirst(CMSREGISTER _cmsTRANSFORM* info,\n+                                          CMSREGISTER cmsUInt16Number wIn[],\n+                                          CMSREGISTER cmsUInt8Number* accum,\n+                                          CMSREGISTER cmsUInt32Number Stride)\n@@ -670,4 +670,4 @@\n-cmsUInt8Number* Unroll3Words(register _cmsTRANSFORM* info,\n-                             register cmsUInt16Number wIn[],\n-                             register cmsUInt8Number* accum,\n-                             register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll3Words(CMSREGISTER _cmsTRANSFORM* info,\n+                             CMSREGISTER cmsUInt16Number wIn[],\n+                             CMSREGISTER cmsUInt8Number* accum,\n+                             CMSREGISTER cmsUInt32Number Stride)\n@@ -686,4 +686,4 @@\n-cmsUInt8Number* Unroll3WordsSwap(register _cmsTRANSFORM* info,\n-                                 register cmsUInt16Number wIn[],\n-                                 register cmsUInt8Number* accum,\n-                                 register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll3WordsSwap(CMSREGISTER _cmsTRANSFORM* info,\n+                                 CMSREGISTER cmsUInt16Number wIn[],\n+                                 CMSREGISTER cmsUInt8Number* accum,\n+                                 CMSREGISTER cmsUInt32Number Stride)\n@@ -702,4 +702,4 @@\n-cmsUInt8Number* Unroll3WordsSkip1Swap(register _cmsTRANSFORM* info,\n-                                      register cmsUInt16Number wIn[],\n-                                      register cmsUInt8Number* accum,\n-                                      register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll3WordsSkip1Swap(CMSREGISTER _cmsTRANSFORM* info,\n+                                      CMSREGISTER cmsUInt16Number wIn[],\n+                                      CMSREGISTER cmsUInt8Number* accum,\n+                                      CMSREGISTER cmsUInt32Number Stride)\n@@ -719,4 +719,4 @@\n-cmsUInt8Number* Unroll3WordsSkip1SwapFirst(register _cmsTRANSFORM* info,\n-                                           register cmsUInt16Number wIn[],\n-                                           register cmsUInt8Number* accum,\n-                                           register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll3WordsSkip1SwapFirst(CMSREGISTER _cmsTRANSFORM* info,\n+                                           CMSREGISTER cmsUInt16Number wIn[],\n+                                           CMSREGISTER cmsUInt8Number* accum,\n+                                           CMSREGISTER cmsUInt32Number Stride)\n@@ -736,4 +736,4 @@\n-cmsUInt8Number* Unroll1Word(register _cmsTRANSFORM* info,\n-                            register cmsUInt16Number wIn[],\n-                            register cmsUInt8Number* accum,\n-                            register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll1Word(CMSREGISTER _cmsTRANSFORM* info,\n+                            CMSREGISTER cmsUInt16Number wIn[],\n+                            CMSREGISTER cmsUInt8Number* accum,\n+                            CMSREGISTER cmsUInt32Number Stride)\n@@ -750,4 +750,4 @@\n-cmsUInt8Number* Unroll1WordReversed(register _cmsTRANSFORM* info,\n-                                    register cmsUInt16Number wIn[],\n-                                    register cmsUInt8Number* accum,\n-                                    register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll1WordReversed(CMSREGISTER _cmsTRANSFORM* info,\n+                                    CMSREGISTER cmsUInt16Number wIn[],\n+                                    CMSREGISTER cmsUInt8Number* accum,\n+                                    CMSREGISTER cmsUInt32Number Stride)\n@@ -764,4 +764,4 @@\n-cmsUInt8Number* Unroll1WordSkip3(register _cmsTRANSFORM* info,\n-                                 register cmsUInt16Number wIn[],\n-                                 register cmsUInt8Number* accum,\n-                                 register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll1WordSkip3(CMSREGISTER _cmsTRANSFORM* info,\n+                                 CMSREGISTER cmsUInt16Number wIn[],\n+                                 CMSREGISTER cmsUInt8Number* accum,\n+                                 CMSREGISTER cmsUInt32Number Stride)\n@@ -780,4 +780,4 @@\n-cmsUInt8Number* Unroll2Words(register _cmsTRANSFORM* info,\n-                                     register cmsUInt16Number wIn[],\n-                                     register cmsUInt8Number* accum,\n-                                     register cmsUInt32Number Stride)\n+cmsUInt8Number* Unroll2Words(CMSREGISTER _cmsTRANSFORM* info,\n+                                     CMSREGISTER cmsUInt16Number wIn[],\n+                                     CMSREGISTER cmsUInt8Number* accum,\n+                                     CMSREGISTER cmsUInt32Number Stride)\n@@ -797,4 +797,4 @@\n-cmsUInt8Number* UnrollLabDoubleTo16(register _cmsTRANSFORM* info,\n-                                    register cmsUInt16Number wIn[],\n-                                    register cmsUInt8Number* accum,\n-                                    register cmsUInt32Number  Stride)\n+cmsUInt8Number* UnrollLabDoubleTo16(CMSREGISTER _cmsTRANSFORM* info,\n+                                    CMSREGISTER cmsUInt16Number wIn[],\n+                                    CMSREGISTER cmsUInt8Number* accum,\n+                                    CMSREGISTER cmsUInt32Number  Stride)\n@@ -831,4 +831,4 @@\n-cmsUInt8Number* UnrollLabFloatTo16(register _cmsTRANSFORM* info,\n-                                    register cmsUInt16Number wIn[],\n-                                    register cmsUInt8Number* accum,\n-                                    register cmsUInt32Number  Stride)\n+cmsUInt8Number* UnrollLabFloatTo16(CMSREGISTER _cmsTRANSFORM* info,\n+                                    CMSREGISTER cmsUInt16Number wIn[],\n+                                    CMSREGISTER cmsUInt8Number* accum,\n+                                    CMSREGISTER cmsUInt32Number  Stride)\n@@ -869,4 +869,4 @@\n-cmsUInt8Number* UnrollXYZDoubleTo16(register _cmsTRANSFORM* info,\n-                                    register cmsUInt16Number wIn[],\n-                                    register cmsUInt8Number* accum,\n-                                    register cmsUInt32Number Stride)\n+cmsUInt8Number* UnrollXYZDoubleTo16(CMSREGISTER _cmsTRANSFORM* info,\n+                                    CMSREGISTER cmsUInt16Number wIn[],\n+                                    CMSREGISTER cmsUInt8Number* accum,\n+                                    CMSREGISTER cmsUInt32Number Stride)\n@@ -905,4 +905,4 @@\n-cmsUInt8Number* UnrollXYZFloatTo16(register _cmsTRANSFORM* info,\n-                                   register cmsUInt16Number wIn[],\n-                                   register cmsUInt8Number* accum,\n-                                   register cmsUInt32Number Stride)\n+cmsUInt8Number* UnrollXYZFloatTo16(CMSREGISTER _cmsTRANSFORM* info,\n+                                   CMSREGISTER cmsUInt16Number wIn[],\n+                                   CMSREGISTER cmsUInt8Number* accum,\n+                                   CMSREGISTER cmsUInt32Number Stride)\n@@ -985,4 +985,4 @@\n-cmsUInt8Number* UnrollDoubleTo16(register _cmsTRANSFORM* info,\n-                                register cmsUInt16Number wIn[],\n-                                register cmsUInt8Number* accum,\n-                                register cmsUInt32Number Stride)\n+cmsUInt8Number* UnrollDoubleTo16(CMSREGISTER _cmsTRANSFORM* info,\n+                                CMSREGISTER cmsUInt16Number wIn[],\n+                                CMSREGISTER cmsUInt8Number* accum,\n+                                CMSREGISTER cmsUInt32Number Stride)\n@@ -1043,4 +1043,4 @@\n-cmsUInt8Number* UnrollFloatTo16(register _cmsTRANSFORM* info,\n-                                register cmsUInt16Number wIn[],\n-                                register cmsUInt8Number* accum,\n-                                register cmsUInt32Number Stride)\n+cmsUInt8Number* UnrollFloatTo16(CMSREGISTER _cmsTRANSFORM* info,\n+                                CMSREGISTER cmsUInt16Number wIn[],\n+                                CMSREGISTER cmsUInt8Number* accum,\n+                                CMSREGISTER cmsUInt32Number Stride)\n@@ -1102,4 +1102,4 @@\n-cmsUInt8Number* UnrollDouble1Chan(register _cmsTRANSFORM* info,\n-                                  register cmsUInt16Number wIn[],\n-                                  register cmsUInt8Number* accum,\n-                                  register cmsUInt32Number Stride)\n+cmsUInt8Number* UnrollDouble1Chan(CMSREGISTER _cmsTRANSFORM* info,\n+                                  CMSREGISTER cmsUInt16Number wIn[],\n+                                  CMSREGISTER cmsUInt8Number* accum,\n+                                  CMSREGISTER cmsUInt32Number Stride)\n@@ -1355,4 +1355,4 @@\n-cmsUInt8Number* PackAnyBytes(register _cmsTRANSFORM* info,\n-                             register cmsUInt16Number wOut[],\n-                             register cmsUInt8Number* output,\n-                             register cmsUInt32Number Stride)\n+cmsUInt8Number* PackAnyBytes(CMSREGISTER _cmsTRANSFORM* info,\n+                             CMSREGISTER cmsUInt16Number wOut[],\n+                             CMSREGISTER cmsUInt8Number* output,\n+                             CMSREGISTER cmsUInt32Number Stride)\n@@ -1407,4 +1407,4 @@\n-cmsUInt8Number* PackAnyWords(register _cmsTRANSFORM* info,\n-                             register cmsUInt16Number wOut[],\n-                             register cmsUInt8Number* output,\n-                             register cmsUInt32Number Stride)\n+cmsUInt8Number* PackAnyWords(CMSREGISTER _cmsTRANSFORM* info,\n+                             CMSREGISTER cmsUInt16Number wOut[],\n+                             CMSREGISTER cmsUInt8Number* output,\n+                             CMSREGISTER cmsUInt32Number Stride)\n@@ -1464,4 +1464,4 @@\n-cmsUInt8Number* PackPlanarBytes(register _cmsTRANSFORM* info,\n-                                register cmsUInt16Number wOut[],\n-                                register cmsUInt8Number* output,\n-                                register cmsUInt32Number Stride)\n+cmsUInt8Number* PackPlanarBytes(CMSREGISTER _cmsTRANSFORM* info,\n+                                CMSREGISTER cmsUInt16Number wOut[],\n+                                CMSREGISTER cmsUInt8Number* output,\n+                                CMSREGISTER cmsUInt32Number Stride)\n@@ -1498,4 +1498,4 @@\n-cmsUInt8Number* PackPlanarWords(register _cmsTRANSFORM* info,\n-                                register cmsUInt16Number wOut[],\n-                                register cmsUInt8Number* output,\n-                                register cmsUInt32Number Stride)\n+cmsUInt8Number* PackPlanarWords(CMSREGISTER _cmsTRANSFORM* info,\n+                                CMSREGISTER cmsUInt16Number wOut[],\n+                                CMSREGISTER cmsUInt8Number* output,\n+                                CMSREGISTER cmsUInt32Number Stride)\n@@ -1537,4 +1537,4 @@\n-cmsUInt8Number* Pack6Bytes(register _cmsTRANSFORM* info,\n-                           register cmsUInt16Number wOut[],\n-                           register cmsUInt8Number* output,\n-                           register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack6Bytes(CMSREGISTER _cmsTRANSFORM* info,\n+                           CMSREGISTER cmsUInt16Number wOut[],\n+                           CMSREGISTER cmsUInt8Number* output,\n+                           CMSREGISTER cmsUInt32Number Stride)\n@@ -1558,4 +1558,4 @@\n-cmsUInt8Number* Pack6BytesSwap(register _cmsTRANSFORM* info,\n-                               register cmsUInt16Number wOut[],\n-                               register cmsUInt8Number* output,\n-                               register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack6BytesSwap(CMSREGISTER _cmsTRANSFORM* info,\n+                               CMSREGISTER cmsUInt16Number wOut[],\n+                               CMSREGISTER cmsUInt8Number* output,\n+                               CMSREGISTER cmsUInt32Number Stride)\n@@ -1578,4 +1578,4 @@\n-cmsUInt8Number* Pack6Words(register _cmsTRANSFORM* info,\n-                           register cmsUInt16Number wOut[],\n-                           register cmsUInt8Number* output,\n-                           register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack6Words(CMSREGISTER _cmsTRANSFORM* info,\n+                           CMSREGISTER cmsUInt16Number wOut[],\n+                           CMSREGISTER cmsUInt8Number* output,\n+                           CMSREGISTER cmsUInt32Number Stride)\n@@ -1604,4 +1604,4 @@\n-cmsUInt8Number* Pack6WordsSwap(register _cmsTRANSFORM* info,\n-                               register cmsUInt16Number wOut[],\n-                               register cmsUInt8Number* output,\n-                               register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack6WordsSwap(CMSREGISTER _cmsTRANSFORM* info,\n+                               CMSREGISTER cmsUInt16Number wOut[],\n+                               CMSREGISTER cmsUInt8Number* output,\n+                               CMSREGISTER cmsUInt32Number Stride)\n@@ -1630,4 +1630,4 @@\n-cmsUInt8Number* Pack4Bytes(register _cmsTRANSFORM* info,\n-                           register cmsUInt16Number wOut[],\n-                           register cmsUInt8Number* output,\n-                           register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack4Bytes(CMSREGISTER _cmsTRANSFORM* info,\n+                           CMSREGISTER cmsUInt16Number wOut[],\n+                           CMSREGISTER cmsUInt8Number* output,\n+                           CMSREGISTER cmsUInt32Number Stride)\n@@ -1647,4 +1647,4 @@\n-cmsUInt8Number* Pack4BytesReverse(register _cmsTRANSFORM* info,\n-                                  register cmsUInt16Number wOut[],\n-                                  register cmsUInt8Number* output,\n-                                  register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack4BytesReverse(CMSREGISTER _cmsTRANSFORM* info,\n+                                  CMSREGISTER cmsUInt16Number wOut[],\n+                                  CMSREGISTER cmsUInt8Number* output,\n+                                  CMSREGISTER cmsUInt32Number Stride)\n@@ -1665,4 +1665,4 @@\n-cmsUInt8Number* Pack4BytesSwapFirst(register _cmsTRANSFORM* info,\n-                                    register cmsUInt16Number wOut[],\n-                                    register cmsUInt8Number* output,\n-                                    register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack4BytesSwapFirst(CMSREGISTER _cmsTRANSFORM* info,\n+                                    CMSREGISTER cmsUInt16Number wOut[],\n+                                    CMSREGISTER cmsUInt8Number* output,\n+                                    CMSREGISTER cmsUInt32Number Stride)\n@@ -1683,4 +1683,4 @@\n-cmsUInt8Number* Pack4BytesSwap(register _cmsTRANSFORM* info,\n-                               register cmsUInt16Number wOut[],\n-                               register cmsUInt8Number* output,\n-                               register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack4BytesSwap(CMSREGISTER _cmsTRANSFORM* info,\n+                               CMSREGISTER cmsUInt16Number wOut[],\n+                               CMSREGISTER cmsUInt8Number* output,\n+                               CMSREGISTER cmsUInt32Number Stride)\n@@ -1700,4 +1700,4 @@\n-cmsUInt8Number* Pack4BytesSwapSwapFirst(register _cmsTRANSFORM* info,\n-                                        register cmsUInt16Number wOut[],\n-                                        register cmsUInt8Number* output,\n-                                        register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack4BytesSwapSwapFirst(CMSREGISTER _cmsTRANSFORM* info,\n+                                        CMSREGISTER cmsUInt16Number wOut[],\n+                                        CMSREGISTER cmsUInt8Number* output,\n+                                        CMSREGISTER cmsUInt32Number Stride)\n@@ -1717,4 +1717,4 @@\n-cmsUInt8Number* Pack4Words(register _cmsTRANSFORM* info,\n-                           register cmsUInt16Number wOut[],\n-                           register cmsUInt8Number* output,\n-                           register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack4Words(CMSREGISTER _cmsTRANSFORM* info,\n+                           CMSREGISTER cmsUInt16Number wOut[],\n+                           CMSREGISTER cmsUInt8Number* output,\n+                           CMSREGISTER cmsUInt32Number Stride)\n@@ -1738,4 +1738,4 @@\n-cmsUInt8Number* Pack4WordsReverse(register _cmsTRANSFORM* info,\n-                                  register cmsUInt16Number wOut[],\n-                                  register cmsUInt8Number* output,\n-                                  register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack4WordsReverse(CMSREGISTER _cmsTRANSFORM* info,\n+                                  CMSREGISTER cmsUInt16Number wOut[],\n+                                  CMSREGISTER cmsUInt8Number* output,\n+                                  CMSREGISTER cmsUInt32Number Stride)\n@@ -1760,4 +1760,4 @@\n-cmsUInt8Number* Pack4WordsSwap(register _cmsTRANSFORM* info,\n-                               register cmsUInt16Number wOut[],\n-                               register cmsUInt8Number* output,\n-                               register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack4WordsSwap(CMSREGISTER _cmsTRANSFORM* info,\n+                               CMSREGISTER cmsUInt16Number wOut[],\n+                               CMSREGISTER cmsUInt8Number* output,\n+                               CMSREGISTER cmsUInt32Number Stride)\n@@ -1782,4 +1782,4 @@\n-cmsUInt8Number* Pack4WordsBigEndian(register _cmsTRANSFORM* info,\n-                                    register cmsUInt16Number wOut[],\n-                                    register cmsUInt8Number* output,\n-                                    register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack4WordsBigEndian(CMSREGISTER _cmsTRANSFORM* info,\n+                                    CMSREGISTER cmsUInt16Number wOut[],\n+                                    CMSREGISTER cmsUInt8Number* output,\n+                                    CMSREGISTER cmsUInt32Number Stride)\n@@ -1804,4 +1804,4 @@\n-cmsUInt8Number* PackLabV2_8(register _cmsTRANSFORM* info,\n-                            register cmsUInt16Number wOut[],\n-                            register cmsUInt8Number* output,\n-                            register cmsUInt32Number Stride)\n+cmsUInt8Number* PackLabV2_8(CMSREGISTER _cmsTRANSFORM* info,\n+                            CMSREGISTER cmsUInt16Number wOut[],\n+                            CMSREGISTER cmsUInt8Number* output,\n+                            CMSREGISTER cmsUInt32Number Stride)\n@@ -1820,4 +1820,4 @@\n-cmsUInt8Number* PackALabV2_8(register _cmsTRANSFORM* info,\n-                             register cmsUInt16Number wOut[],\n-                             register cmsUInt8Number* output,\n-                             register cmsUInt32Number Stride)\n+cmsUInt8Number* PackALabV2_8(CMSREGISTER _cmsTRANSFORM* info,\n+                             CMSREGISTER cmsUInt16Number wOut[],\n+                             CMSREGISTER cmsUInt8Number* output,\n+                             CMSREGISTER cmsUInt32Number Stride)\n@@ -1837,4 +1837,4 @@\n-cmsUInt8Number* PackLabV2_16(register _cmsTRANSFORM* info,\n-                             register cmsUInt16Number wOut[],\n-                             register cmsUInt8Number* output,\n-                             register cmsUInt32Number Stride)\n+cmsUInt8Number* PackLabV2_16(CMSREGISTER _cmsTRANSFORM* info,\n+                             CMSREGISTER cmsUInt16Number wOut[],\n+                             CMSREGISTER cmsUInt8Number* output,\n+                             CMSREGISTER cmsUInt32Number Stride)\n@@ -1856,4 +1856,4 @@\n-cmsUInt8Number* Pack3Bytes(register _cmsTRANSFORM* info,\n-                           register cmsUInt16Number wOut[],\n-                           register cmsUInt8Number* output,\n-                           register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3Bytes(CMSREGISTER _cmsTRANSFORM* info,\n+                           CMSREGISTER cmsUInt16Number wOut[],\n+                           CMSREGISTER cmsUInt8Number* output,\n+                           CMSREGISTER cmsUInt32Number Stride)\n@@ -1872,4 +1872,4 @@\n-cmsUInt8Number* Pack3BytesOptimized(register _cmsTRANSFORM* info,\n-                                    register cmsUInt16Number wOut[],\n-                                    register cmsUInt8Number* output,\n-                                    register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3BytesOptimized(CMSREGISTER _cmsTRANSFORM* info,\n+                                    CMSREGISTER cmsUInt16Number wOut[],\n+                                    CMSREGISTER cmsUInt8Number* output,\n+                                    CMSREGISTER cmsUInt32Number Stride)\n@@ -1888,4 +1888,4 @@\n-cmsUInt8Number* Pack3BytesSwap(register _cmsTRANSFORM* info,\n-                               register cmsUInt16Number wOut[],\n-                               register cmsUInt8Number* output,\n-                               register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3BytesSwap(CMSREGISTER _cmsTRANSFORM* info,\n+                               CMSREGISTER cmsUInt16Number wOut[],\n+                               CMSREGISTER cmsUInt8Number* output,\n+                               CMSREGISTER cmsUInt32Number Stride)\n@@ -1904,4 +1904,4 @@\n-cmsUInt8Number* Pack3BytesSwapOptimized(register _cmsTRANSFORM* info,\n-                                        register cmsUInt16Number wOut[],\n-                                        register cmsUInt8Number* output,\n-                                        register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3BytesSwapOptimized(CMSREGISTER _cmsTRANSFORM* info,\n+                                        CMSREGISTER cmsUInt16Number wOut[],\n+                                        CMSREGISTER cmsUInt8Number* output,\n+                                        CMSREGISTER cmsUInt32Number Stride)\n@@ -1921,4 +1921,4 @@\n-cmsUInt8Number* Pack3Words(register _cmsTRANSFORM* info,\n-                           register cmsUInt16Number wOut[],\n-                           register cmsUInt8Number* output,\n-                           register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3Words(CMSREGISTER _cmsTRANSFORM* info,\n+                           CMSREGISTER cmsUInt16Number wOut[],\n+                           CMSREGISTER cmsUInt8Number* output,\n+                           CMSREGISTER cmsUInt32Number Stride)\n@@ -1940,4 +1940,4 @@\n-cmsUInt8Number* Pack3WordsSwap(register _cmsTRANSFORM* info,\n-                               register cmsUInt16Number wOut[],\n-                               register cmsUInt8Number* output,\n-                               register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3WordsSwap(CMSREGISTER _cmsTRANSFORM* info,\n+                               CMSREGISTER cmsUInt16Number wOut[],\n+                               CMSREGISTER cmsUInt8Number* output,\n+                               CMSREGISTER cmsUInt32Number Stride)\n@@ -1959,4 +1959,4 @@\n-cmsUInt8Number* Pack3WordsBigEndian(register _cmsTRANSFORM* info,\n-                                    register cmsUInt16Number wOut[],\n-                                    register cmsUInt8Number* output,\n-                                    register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3WordsBigEndian(CMSREGISTER _cmsTRANSFORM* info,\n+                                    CMSREGISTER cmsUInt16Number wOut[],\n+                                    CMSREGISTER cmsUInt8Number* output,\n+                                    CMSREGISTER cmsUInt32Number Stride)\n@@ -1978,4 +1978,4 @@\n-cmsUInt8Number* Pack3BytesAndSkip1(register _cmsTRANSFORM* info,\n-                                   register cmsUInt16Number wOut[],\n-                                   register cmsUInt8Number* output,\n-                                   register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3BytesAndSkip1(CMSREGISTER _cmsTRANSFORM* info,\n+                                   CMSREGISTER cmsUInt16Number wOut[],\n+                                   CMSREGISTER cmsUInt8Number* output,\n+                                   CMSREGISTER cmsUInt32Number Stride)\n@@ -1995,4 +1995,4 @@\n-cmsUInt8Number* Pack3BytesAndSkip1Optimized(register _cmsTRANSFORM* info,\n-                                            register cmsUInt16Number wOut[],\n-                                            register cmsUInt8Number* output,\n-                                            register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3BytesAndSkip1Optimized(CMSREGISTER _cmsTRANSFORM* info,\n+                                            CMSREGISTER cmsUInt16Number wOut[],\n+                                            CMSREGISTER cmsUInt8Number* output,\n+                                            CMSREGISTER cmsUInt32Number Stride)\n@@ -2013,4 +2013,4 @@\n-cmsUInt8Number* Pack3BytesAndSkip1SwapFirst(register _cmsTRANSFORM* info,\n-                                            register cmsUInt16Number wOut[],\n-                                            register cmsUInt8Number* output,\n-                                            register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3BytesAndSkip1SwapFirst(CMSREGISTER _cmsTRANSFORM* info,\n+                                            CMSREGISTER cmsUInt16Number wOut[],\n+                                            CMSREGISTER cmsUInt8Number* output,\n+                                            CMSREGISTER cmsUInt32Number Stride)\n@@ -2030,4 +2030,4 @@\n-cmsUInt8Number* Pack3BytesAndSkip1SwapFirstOptimized(register _cmsTRANSFORM* info,\n-                                                     register cmsUInt16Number wOut[],\n-                                                     register cmsUInt8Number* output,\n-                                                     register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3BytesAndSkip1SwapFirstOptimized(CMSREGISTER _cmsTRANSFORM* info,\n+                                                     CMSREGISTER cmsUInt16Number wOut[],\n+                                                     CMSREGISTER cmsUInt8Number* output,\n+                                                     CMSREGISTER cmsUInt32Number Stride)\n@@ -2047,4 +2047,4 @@\n-cmsUInt8Number* Pack3BytesAndSkip1Swap(register _cmsTRANSFORM* info,\n-                                       register cmsUInt16Number wOut[],\n-                                       register cmsUInt8Number* output,\n-                                       register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3BytesAndSkip1Swap(CMSREGISTER _cmsTRANSFORM* info,\n+                                       CMSREGISTER cmsUInt16Number wOut[],\n+                                       CMSREGISTER cmsUInt8Number* output,\n+                                       CMSREGISTER cmsUInt32Number Stride)\n@@ -2064,4 +2064,4 @@\n-cmsUInt8Number* Pack3BytesAndSkip1SwapOptimized(register _cmsTRANSFORM* info,\n-                                                register cmsUInt16Number wOut[],\n-                                                register cmsUInt8Number* output,\n-                                                register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3BytesAndSkip1SwapOptimized(CMSREGISTER _cmsTRANSFORM* info,\n+                                                CMSREGISTER cmsUInt16Number wOut[],\n+                                                CMSREGISTER cmsUInt8Number* output,\n+                                                CMSREGISTER cmsUInt32Number Stride)\n@@ -2082,4 +2082,4 @@\n-cmsUInt8Number* Pack3BytesAndSkip1SwapSwapFirst(register _cmsTRANSFORM* info,\n-                                                register cmsUInt16Number wOut[],\n-                                                register cmsUInt8Number* output,\n-                                                register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3BytesAndSkip1SwapSwapFirst(CMSREGISTER _cmsTRANSFORM* info,\n+                                                CMSREGISTER cmsUInt16Number wOut[],\n+                                                CMSREGISTER cmsUInt8Number* output,\n+                                                CMSREGISTER cmsUInt32Number Stride)\n@@ -2099,4 +2099,4 @@\n-cmsUInt8Number* Pack3BytesAndSkip1SwapSwapFirstOptimized(register _cmsTRANSFORM* info,\n-                                                         register cmsUInt16Number wOut[],\n-                                                         register cmsUInt8Number* output,\n-                                                         register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3BytesAndSkip1SwapSwapFirstOptimized(CMSREGISTER _cmsTRANSFORM* info,\n+                                                         CMSREGISTER cmsUInt16Number wOut[],\n+                                                         CMSREGISTER cmsUInt8Number* output,\n+                                                         CMSREGISTER cmsUInt32Number Stride)\n@@ -2116,4 +2116,4 @@\n-cmsUInt8Number* Pack3WordsAndSkip1(register _cmsTRANSFORM* info,\n-                                   register cmsUInt16Number wOut[],\n-                                   register cmsUInt8Number* output,\n-                                   register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3WordsAndSkip1(CMSREGISTER _cmsTRANSFORM* info,\n+                                   CMSREGISTER cmsUInt16Number wOut[],\n+                                   CMSREGISTER cmsUInt8Number* output,\n+                                   CMSREGISTER cmsUInt32Number Stride)\n@@ -2136,4 +2136,4 @@\n-cmsUInt8Number* Pack3WordsAndSkip1Swap(register _cmsTRANSFORM* info,\n-                                       register cmsUInt16Number wOut[],\n-                                       register cmsUInt8Number* output,\n-                                       register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3WordsAndSkip1Swap(CMSREGISTER _cmsTRANSFORM* info,\n+                                       CMSREGISTER cmsUInt16Number wOut[],\n+                                       CMSREGISTER cmsUInt8Number* output,\n+                                       CMSREGISTER cmsUInt32Number Stride)\n@@ -2157,4 +2157,4 @@\n-cmsUInt8Number* Pack3WordsAndSkip1SwapFirst(register _cmsTRANSFORM* info,\n-                                            register cmsUInt16Number wOut[],\n-                                            register cmsUInt8Number* output,\n-                                            register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3WordsAndSkip1SwapFirst(CMSREGISTER _cmsTRANSFORM* info,\n+                                            CMSREGISTER cmsUInt16Number wOut[],\n+                                            CMSREGISTER cmsUInt8Number* output,\n+                                            CMSREGISTER cmsUInt32Number Stride)\n@@ -2178,4 +2178,4 @@\n-cmsUInt8Number* Pack3WordsAndSkip1SwapSwapFirst(register _cmsTRANSFORM* info,\n-                                                register cmsUInt16Number wOut[],\n-                                                register cmsUInt8Number* output,\n-                                                register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack3WordsAndSkip1SwapSwapFirst(CMSREGISTER _cmsTRANSFORM* info,\n+                                                CMSREGISTER cmsUInt16Number wOut[],\n+                                                CMSREGISTER cmsUInt8Number* output,\n+                                                CMSREGISTER cmsUInt32Number Stride)\n@@ -2200,4 +2200,4 @@\n-cmsUInt8Number* Pack1Byte(register _cmsTRANSFORM* info,\n-                          register cmsUInt16Number wOut[],\n-                          register cmsUInt8Number* output,\n-                          register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack1Byte(CMSREGISTER _cmsTRANSFORM* info,\n+                          CMSREGISTER cmsUInt16Number wOut[],\n+                          CMSREGISTER cmsUInt8Number* output,\n+                          CMSREGISTER cmsUInt32Number Stride)\n@@ -2215,4 +2215,4 @@\n-cmsUInt8Number* Pack1ByteReversed(register _cmsTRANSFORM* info,\n-                                  register cmsUInt16Number wOut[],\n-                                  register cmsUInt8Number* output,\n-                                  register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack1ByteReversed(CMSREGISTER _cmsTRANSFORM* info,\n+                                  CMSREGISTER cmsUInt16Number wOut[],\n+                                  CMSREGISTER cmsUInt8Number* output,\n+                                  CMSREGISTER cmsUInt32Number Stride)\n@@ -2230,4 +2230,4 @@\n-cmsUInt8Number* Pack1ByteSkip1(register _cmsTRANSFORM* info,\n-                               register cmsUInt16Number wOut[],\n-                               register cmsUInt8Number* output,\n-                               register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack1ByteSkip1(CMSREGISTER _cmsTRANSFORM* info,\n+                               CMSREGISTER cmsUInt16Number wOut[],\n+                               CMSREGISTER cmsUInt8Number* output,\n+                               CMSREGISTER cmsUInt32Number Stride)\n@@ -2246,4 +2246,4 @@\n-cmsUInt8Number* Pack1ByteSkip1SwapFirst(register _cmsTRANSFORM* info,\n-                                        register cmsUInt16Number wOut[],\n-                                        register cmsUInt8Number* output,\n-                                        register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack1ByteSkip1SwapFirst(CMSREGISTER _cmsTRANSFORM* info,\n+                                        CMSREGISTER cmsUInt16Number wOut[],\n+                                        CMSREGISTER cmsUInt8Number* output,\n+                                        CMSREGISTER cmsUInt32Number Stride)\n@@ -2261,4 +2261,4 @@\n-cmsUInt8Number* Pack1Word(register _cmsTRANSFORM* info,\n-                          register cmsUInt16Number wOut[],\n-                          register cmsUInt8Number* output,\n-                          register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack1Word(CMSREGISTER _cmsTRANSFORM* info,\n+                          CMSREGISTER cmsUInt16Number wOut[],\n+                          CMSREGISTER cmsUInt8Number* output,\n+                          CMSREGISTER cmsUInt32Number Stride)\n@@ -2277,4 +2277,4 @@\n-cmsUInt8Number* Pack1WordReversed(register _cmsTRANSFORM* info,\n-                                  register cmsUInt16Number wOut[],\n-                                  register cmsUInt8Number* output,\n-                                  register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack1WordReversed(CMSREGISTER _cmsTRANSFORM* info,\n+                                  CMSREGISTER cmsUInt16Number wOut[],\n+                                  CMSREGISTER cmsUInt8Number* output,\n+                                  CMSREGISTER cmsUInt32Number Stride)\n@@ -2292,4 +2292,4 @@\n-cmsUInt8Number* Pack1WordBigEndian(register _cmsTRANSFORM* info,\n-                                   register cmsUInt16Number wOut[],\n-                                   register cmsUInt8Number* output,\n-                                   register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack1WordBigEndian(CMSREGISTER _cmsTRANSFORM* info,\n+                                   CMSREGISTER cmsUInt16Number wOut[],\n+                                   CMSREGISTER cmsUInt8Number* output,\n+                                   CMSREGISTER cmsUInt32Number Stride)\n@@ -2308,4 +2308,4 @@\n-cmsUInt8Number* Pack1WordSkip1(register _cmsTRANSFORM* info,\n-                               register cmsUInt16Number wOut[],\n-                               register cmsUInt8Number* output,\n-                               register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack1WordSkip1(CMSREGISTER _cmsTRANSFORM* info,\n+                               CMSREGISTER cmsUInt16Number wOut[],\n+                               CMSREGISTER cmsUInt8Number* output,\n+                               CMSREGISTER cmsUInt32Number Stride)\n@@ -2323,4 +2323,4 @@\n-cmsUInt8Number* Pack1WordSkip1SwapFirst(register _cmsTRANSFORM* info,\n-                                        register cmsUInt16Number wOut[],\n-                                        register cmsUInt8Number* output,\n-                                        register cmsUInt32Number Stride)\n+cmsUInt8Number* Pack1WordSkip1SwapFirst(CMSREGISTER _cmsTRANSFORM* info,\n+                                        CMSREGISTER cmsUInt16Number wOut[],\n+                                        CMSREGISTER cmsUInt8Number* output,\n+                                        CMSREGISTER cmsUInt32Number Stride)\n@@ -2341,4 +2341,4 @@\n-cmsUInt8Number* PackLabDoubleFrom16(register _cmsTRANSFORM* info,\n-                                    register cmsUInt16Number wOut[],\n-                                    register cmsUInt8Number* output,\n-                                    register cmsUInt32Number Stride)\n+cmsUInt8Number* PackLabDoubleFrom16(CMSREGISTER _cmsTRANSFORM* info,\n+                                    CMSREGISTER cmsUInt16Number wOut[],\n+                                    CMSREGISTER cmsUInt8Number* output,\n+                                    CMSREGISTER cmsUInt32Number Stride)\n@@ -2368,4 +2368,4 @@\n-cmsUInt8Number* PackLabFloatFrom16(register _cmsTRANSFORM* info,\n-                                    register cmsUInt16Number wOut[],\n-                                    register cmsUInt8Number* output,\n-                                    register cmsUInt32Number Stride)\n+cmsUInt8Number* PackLabFloatFrom16(CMSREGISTER _cmsTRANSFORM* info,\n+                                    CMSREGISTER cmsUInt16Number wOut[],\n+                                    CMSREGISTER cmsUInt8Number* output,\n+                                    CMSREGISTER cmsUInt32Number Stride)\n@@ -2399,4 +2399,4 @@\n-cmsUInt8Number* PackXYZDoubleFrom16(register _cmsTRANSFORM* Info,\n-                                    register cmsUInt16Number wOut[],\n-                                    register cmsUInt8Number* output,\n-                                    register cmsUInt32Number Stride)\n+cmsUInt8Number* PackXYZDoubleFrom16(CMSREGISTER _cmsTRANSFORM* Info,\n+                                    CMSREGISTER cmsUInt16Number wOut[],\n+                                    CMSREGISTER cmsUInt8Number* output,\n+                                    CMSREGISTER cmsUInt32Number Stride)\n@@ -2428,4 +2428,4 @@\n-cmsUInt8Number* PackXYZFloatFrom16(register _cmsTRANSFORM* Info,\n-                                   register cmsUInt16Number wOut[],\n-                                   register cmsUInt8Number* output,\n-                                   register cmsUInt32Number Stride)\n+cmsUInt8Number* PackXYZFloatFrom16(CMSREGISTER _cmsTRANSFORM* Info,\n+                                   CMSREGISTER cmsUInt16Number wOut[],\n+                                   CMSREGISTER cmsUInt8Number* output,\n+                                   CMSREGISTER cmsUInt32Number Stride)\n@@ -2463,4 +2463,4 @@\n-cmsUInt8Number* PackDoubleFrom16(register _cmsTRANSFORM* info,\n-                                register cmsUInt16Number wOut[],\n-                                register cmsUInt8Number* output,\n-                                register cmsUInt32Number Stride)\n+cmsUInt8Number* PackDoubleFrom16(CMSREGISTER _cmsTRANSFORM* info,\n+                                CMSREGISTER cmsUInt16Number wOut[],\n+                                CMSREGISTER cmsUInt8Number* output,\n+                                CMSREGISTER cmsUInt32Number Stride)\n@@ -2516,4 +2516,4 @@\n-cmsUInt8Number* PackFloatFrom16(register _cmsTRANSFORM* info,\n-                                register cmsUInt16Number wOut[],\n-                                register cmsUInt8Number* output,\n-                                register cmsUInt32Number Stride)\n+cmsUInt8Number* PackFloatFrom16(CMSREGISTER _cmsTRANSFORM* info,\n+                                CMSREGISTER cmsUInt16Number wOut[],\n+                                CMSREGISTER cmsUInt8Number* output,\n+                                CMSREGISTER cmsUInt32Number Stride)\n@@ -2805,4 +2805,4 @@\n-cmsUInt8Number* UnrollHalfTo16(register _cmsTRANSFORM* info,\n-                                register cmsUInt16Number wIn[],\n-                                register cmsUInt8Number* accum,\n-                                register cmsUInt32Number Stride)\n+cmsUInt8Number* UnrollHalfTo16(CMSREGISTER _cmsTRANSFORM* info,\n+                                CMSREGISTER cmsUInt16Number wIn[],\n+                                CMSREGISTER cmsUInt8Number* accum,\n+                                CMSREGISTER cmsUInt32Number Stride)\n@@ -2911,4 +2911,4 @@\n-cmsUInt8Number* PackHalfFrom16(register _cmsTRANSFORM* info,\n-                                register cmsUInt16Number wOut[],\n-                                register cmsUInt8Number* output,\n-                                register cmsUInt32Number Stride)\n+cmsUInt8Number* PackHalfFrom16(CMSREGISTER _cmsTRANSFORM* info,\n+                                CMSREGISTER cmsUInt16Number wOut[],\n+                                CMSREGISTER cmsUInt8Number* output,\n+                                CMSREGISTER cmsUInt32Number Stride)\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmspack.c","additions":393,"deletions":393,"binary":false,"changes":786,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmspcs.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -65,1 +65,1 @@\n-\/\/ Adjust a word value after being readed\/ before being written from\/to an ICC profile\n+\/\/ Adjust a word value after being read\/ before being written from\/to an ICC profile\n@@ -131,2 +131,2 @@\n-    (*Result)[0] = QWord[0];\n-    (*Result)[1] = QWord[1];\n+    (*Result)[0] = (*QWord)[0];\n+    (*Result)[1] = (*QWord)[1];\n@@ -219,0 +219,2 @@\n+        #elif !defined(_MSC_VER) && (defined(__STDC_VERSION__) && __STDC_VERSION__ < 199901L)\n+           return TRUE;\n@@ -705,0 +707,2 @@\n+    _cmsEnterCriticalSectionPrimitive(&_cmsContextPoolHeadMutex);\n+\n@@ -710,2 +714,5 @@\n-            if (id == ctx)\n-                return ctx; \/\/ New-style context,\n+        if (id == ctx)\n+        {\n+            _cmsLeaveCriticalSectionPrimitive(&_cmsContextPoolHeadMutex);\n+            return ctx; \/\/ New-style context\n+        }\n@@ -714,0 +721,1 @@\n+    _cmsLeaveCriticalSectionPrimitive(&_cmsContextPoolHeadMutex);\n@@ -802,0 +810,1 @@\n+#ifndef CMS_NO_PTHREADS\n@@ -822,0 +831,1 @@\n+#endif\n@@ -946,19 +956,0 @@\n-\/*\n-static\n-struct _cmsContext_struct* FindPrev(struct _cmsContext_struct* id)\n-{\n-    struct _cmsContext_struct* prev;\n-\n-    \/\/ Search for previous\n-    for (prev = _cmsContextPoolHead;\n-             prev != NULL;\n-             prev = prev ->Next)\n-    {\n-        if (prev ->Next == id)\n-            return prev;\n-    }\n-\n-    return NULL;  \/\/ List is empty or only one element!\n-}\n-*\/\n-\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmsplugin.c","additions":16,"deletions":25,"binary":false,"changes":41,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -110,2 +110,2 @@\n-   This is implemented both with \/CIEBasedABC or \/CIEBasedDEF on dependig\n-   of profile implementation. Since here there are no interpolation tables, I do\n+   This is implemented both with \/CIEBasedABC or \/CIEBasedDEF depending on the\n+   profile implementation. Since here there are no interpolation tables, I do\n@@ -327,13 +327,0 @@\n-\/\/ Convert to byte (using ICC2 notation)\n-\/*\n-static\n-cmsUInt8Number L2Byte(cmsUInt16Number w)\n-{\n-    int ww = w + 0x0080;\n-\n-    if (ww > 0xFFFF) return 0xFF;\n-\n-    return (cmsUInt8Number) ((cmsUInt16Number) (ww >> 8) & 0xFF);\n-}\n-*\/\n-\n@@ -341,1 +328,0 @@\n-\n@@ -358,1 +344,2 @@\n-\/\/ Removes offending Carriage returns\n+\/\/ Removes offending carriage returns\n+\n@@ -456,15 +443,0 @@\n-\/*\n-static\n-void EmitL2Y(cmsIOHANDLER* m)\n-{\n-    _cmsIOPrintf(m,\n-            \"{ \"\n-                \"100 mul 16 add 116 div \"               \/\/ (L * 100 + 16) \/ 116\n-                 \"dup 6 29 div ge \"                     \/\/ >= 6 \/ 29 ?\n-                 \"{ dup dup mul mul } \"                 \/\/ yes, ^3 and done\n-                 \"{ 4 29 div sub 108 841 div mul } \"    \/\/ no, slope limiting\n-            \"ifelse } bind \");\n-}\n-*\/\n-\n-\n@@ -491,0 +463,6 @@\n+static\n+void EmitSafeGuardBegin(cmsIOHANDLER* m, const char* name)\n+{\n+    _cmsIOPrintf(m, \"%%LCMS2: Save previous definition of %s on the operand stack\\n\", name);\n+    _cmsIOPrintf(m, \"currentdict \/%s known { \/%s load } { null } ifelse\\n\", name, name);\n+}\n@@ -492,0 +470,10 @@\n+static\n+void EmitSafeGuardEnd(cmsIOHANDLER* m, const char* name, int depth)\n+{\n+    _cmsIOPrintf(m, \"%%LCMS2: Restore previous definition of %s\\n\", name);\n+    if (depth > 1) {\n+        \/\/ cycle topmost items on the stack to bring the previous definition to the front\n+        _cmsIOPrintf(m, \"%d -1 roll \", depth);\n+    }\n+    _cmsIOPrintf(m, \"dup null eq { pop currentdict \/%s undef } { \/%s exch def } ifelse\\n\", name, name);\n+}\n@@ -496,1 +484,1 @@\n-void Emit1Gamma(cmsIOHANDLER* m, cmsToneCurve* Table)\n+void Emit1Gamma(cmsIOHANDLER* m, cmsToneCurve* Table, const char* name)\n@@ -511,1 +499,1 @@\n-            _cmsIOPrintf(m, \"{ %g exp } bind \", gamma);\n+            _cmsIOPrintf(m, \"\/%s { %g exp } bind def\\n\", name, gamma);\n@@ -515,11 +503,2 @@\n-    _cmsIOPrintf(m, \"{ \");\n-\n-    \/\/ Bounds check\n-    EmitRangeCheck(m);\n-\n-    \/\/ Emit intepolation code\n-\n-    \/\/ PostScript code                      Stack\n-    \/\/ ===============                      ========================\n-                                            \/\/ v\n-    _cmsIOPrintf(m, \" [\");\n+    EmitSafeGuardBegin(m, \"lcms2gammatable\");\n+    _cmsIOPrintf(m, \"\/lcms2gammatable [\");\n@@ -528,0 +507,2 @@\n+        if (i % 10 == 0)\n+            _cmsIOPrintf(m, \"\\n  \");\n@@ -531,1 +512,4 @@\n-    _cmsIOPrintf(m, \"] \");                        \/\/ v tab\n+    _cmsIOPrintf(m, \"] def\\n\");\n+\n+\n+    \/\/ Emit interpolation code\n@@ -533,0 +517,9 @@\n+    \/\/ PostScript code                            Stack\n+    \/\/ ===============                            ========================\n+                                                  \/\/ v\n+    _cmsIOPrintf(m, \"\/%s {\\n  \", name);\n+\n+    \/\/ Bounds check\n+    EmitRangeCheck(m);\n+\n+    _cmsIOPrintf(m, \"\\n  \/\/lcms2gammatable \");    \/\/ v tab\n@@ -544,1 +537,1 @@\n-    _cmsIOPrintf(m, \"get \");                      \/\/ tab val2 cell0 y1\n+    _cmsIOPrintf(m, \"get\\n  \");                   \/\/ tab val2 cell0 y1\n@@ -557,1 +550,3 @@\n-    _cmsIOPrintf(m, \"65535 div \");                \/\/ result\n+    _cmsIOPrintf(m, \"65535 div\\n\");               \/\/ result\n+\n+    _cmsIOPrintf(m, \"} bind def\\n\");\n@@ -559,1 +554,1 @@\n-    _cmsIOPrintf(m, \" } bind \");\n+    EmitSafeGuardEnd(m, \"lcms2gammatable\", 1);\n@@ -575,1 +570,1 @@\n-void EmitNGamma(cmsIOHANDLER* m, cmsUInt32Number n, cmsToneCurve* g[])\n+void EmitNGamma(cmsIOHANDLER* m, cmsUInt32Number n, cmsToneCurve* g[], const char* nameprefix)\n@@ -578,0 +573,1 @@\n+    static char buffer[2048];\n@@ -585,1 +581,1 @@\n-            _cmsIOPrintf(m, \"dup \");\n+            _cmsIOPrintf(m, \"\/%s%d \/%s%d load def\\n\", nameprefix, i, nameprefix, i-1);\n@@ -588,1 +584,3 @@\n-            Emit1Gamma(m, g[i]);\n+            snprintf(buffer, sizeof(buffer), \"%s%d\", nameprefix, i);\n+            buffer[sizeof(buffer)-1] = '\\0';\n+            Emit1Gamma(m, g[i], buffer);\n@@ -595,3 +593,0 @@\n-\n-\n-\n@@ -614,1 +609,1 @@\n-int OutputValueSampler(register const cmsUInt16Number In[], register cmsUInt16Number Out[], register void* Cargo)\n+int OutputValueSampler(CMSREGISTER const cmsUInt16Number In[], CMSREGISTER cmsUInt16Number Out[], CMSREGISTER void* Cargo)\n@@ -694,5 +689,5 @@\n-                                             const char* PostMaj,\n-                                             const char* PreMin,\n-                                             const char* PostMin,\n-                                             int FixWhite,\n-                                             cmsColorSpaceSignature ColorSpace)\n+                                               const char* PostMaj,\n+                                               const char* PreMin,\n+                                               const char* PostMin,\n+                                               int FixWhite,\n+                                               cmsColorSpaceSignature ColorSpace)\n@@ -740,3 +735,2 @@\n-    _cmsIOPrintf(m, \"\/DecodeA \");\n-\n-    Emit1Gamma(m, Curve);\n+    EmitSafeGuardBegin(m, \"lcms2gammaproc\");\n+    Emit1Gamma(m, Curve, \"lcms2gammaproc\");\n@@ -744,1 +738,2 @@\n-    _cmsIOPrintf(m, \" \\n\");\n+    _cmsIOPrintf(m, \"\/DecodeA \/lcms2gammaproc load\\n\");\n+    EmitSafeGuardEnd(m, \"lcms2gammaproc\", 3);\n@@ -768,3 +763,0 @@\n-    _cmsIOPrintf(m, \"\/DecodeABC [ \");\n-\n-    EmitNGamma(m, 3, CurveSet);\n@@ -772,0 +764,8 @@\n+    EmitSafeGuardBegin(m, \"lcms2gammaproc0\");\n+    EmitSafeGuardBegin(m, \"lcms2gammaproc1\");\n+    EmitSafeGuardBegin(m, \"lcms2gammaproc2\");\n+    EmitNGamma(m, 3, CurveSet, \"lcms2gammaproc\");\n+    _cmsIOPrintf(m, \"\/DecodeABC [\\n\");\n+    _cmsIOPrintf(m, \"   \/lcms2gammaproc0 load\\n\");\n+    _cmsIOPrintf(m, \"   \/lcms2gammaproc1 load\\n\");\n+    _cmsIOPrintf(m, \"   \/lcms2gammaproc2 load\\n\");\n@@ -773,0 +773,3 @@\n+    EmitSafeGuardEnd(m, \"lcms2gammaproc2\", 3);\n+    EmitSafeGuardEnd(m, \"lcms2gammaproc1\", 3);\n+    EmitSafeGuardEnd(m, \"lcms2gammaproc0\", 3);\n@@ -804,1 +807,1 @@\n-    const char* PreMin, *PostMin;\n+    const char* PreMin, * PostMin;\n@@ -806,0 +809,2 @@\n+    int i, numchans;\n+    static char buffer[2048];\n@@ -807,1 +812,1 @@\n-    mpe = Pipeline ->Elements;\n+    mpe = Pipeline->Elements;\n@@ -811,0 +816,5 @@\n+        _cmsIOPrintf(m, \"[ \/CIEBasedDEF\\n\");\n+        PreMaj = \"<\";\n+        PostMaj = \">\\n\";\n+        PreMin = PostMin = \"\";\n+        break;\n@@ -812,5 +822,0 @@\n-            _cmsIOPrintf(m, \"[ \/CIEBasedDEF\\n\");\n-            PreMaj =\"<\";\n-            PostMaj= \">\\n\";\n-            PreMin = PostMin = \"\";\n-            break;\n@@ -818,6 +823,7 @@\n-            _cmsIOPrintf(m, \"[ \/CIEBasedDEFG\\n\");\n-            PreMaj = \"[\";\n-            PostMaj = \"]\\n\";\n-            PreMin = \"<\";\n-            PostMin = \">\\n\";\n-            break;\n+        _cmsIOPrintf(m, \"[ \/CIEBasedDEFG\\n\");\n+        PreMaj = \"[\";\n+        PostMaj = \"]\\n\";\n+        PreMin = \"<\";\n+        PostMin = \">\\n\";\n+        break;\n+\n@@ -825,1 +831,1 @@\n-            return 0;\n+        return 0;\n@@ -833,2 +839,13 @@\n-        _cmsIOPrintf(m, \"\/DecodeDEF [ \");\n-        EmitNGamma(m, cmsStageOutputChannels(mpe), _cmsStageGetPtrToCurveSet(mpe));\n+        numchans = cmsStageOutputChannels(mpe);\n+        for (i = 0; i < numchans; ++i) {\n+            snprintf(buffer, sizeof(buffer), \"lcms2gammaproc%d\", i);\n+            buffer[sizeof(buffer) - 1] = '\\0';\n+            EmitSafeGuardBegin(m, buffer);\n+        }\n+        EmitNGamma(m, cmsStageOutputChannels(mpe), _cmsStageGetPtrToCurveSet(mpe), \"lcms2gammaproc\");\n+        _cmsIOPrintf(m, \"\/DecodeDEF [\\n\");\n+        for (i = 0; i < numchans; ++i) {\n+            snprintf(buffer, sizeof(buffer), \"  \/lcms2gammaproc%d load\\n\", i);\n+            buffer[sizeof(buffer) - 1] = '\\0';\n+            _cmsIOPrintf(m, buffer);\n+        }\n@@ -836,0 +853,5 @@\n+        for (i = numchans - 1; i >= 0; --i) {\n+            snprintf(buffer, sizeof(buffer), \"lcms2gammaproc%d\", i);\n+            buffer[sizeof(buffer) - 1] = '\\0';\n+            EmitSafeGuardEnd(m, buffer, 3);\n+        }\n@@ -837,1 +859,1 @@\n-        mpe = mpe ->Next;\n+        mpe = mpe->Next;\n@@ -842,3 +864,3 @@\n-            _cmsIOPrintf(m, \"\/Table \");\n-            WriteCLUT(m, mpe, PreMaj, PostMaj, PreMin, PostMin, FALSE, (cmsColorSpaceSignature) 0);\n-            _cmsIOPrintf(m, \"]\\n\");\n+        _cmsIOPrintf(m, \"\/Table \");\n+        WriteCLUT(m, mpe, PreMaj, PostMaj, PreMin, PostMin, FALSE, (cmsColorSpaceSignature)0);\n+        _cmsIOPrintf(m, \"]\\n\");\n@@ -955,1 +977,1 @@\n-        cmsSignalError(m ->ContextID, cmsERROR_COLORSPACE_CHECK, \"Only 3, 4 channels supported for CSA. This profile has %d channels.\", nChannels);\n+        cmsSignalError(m ->ContextID, cmsERROR_COLORSPACE_CHECK, \"Only 3, 4 channels are supported for CSA. This profile has %d channels.\", nChannels);\n@@ -1014,1 +1036,1 @@\n-        return rc;\n+    return rc;\n@@ -1271,2 +1293,0 @@\n-\n-\n@@ -1302,1 +1322,1 @@\n-\/\/ would give a reasonable accurancy. Note also that CRD tables must operate in\n+\/\/ would give a reasonable accuracy. Note also that CRD tables must operate in\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmsps2.c","additions":114,"deletions":94,"binary":false,"changes":208,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmssamp.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmssm.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -198,1 +198,1 @@\n-\/\/ A table of n elements is readed, where first comes n records containing offsets and sizes and\n+\/\/ A table of n elements is read, where first comes n records containing offsets and sizes and\n@@ -1006,1 +1006,1 @@\n-    \/\/(see clause 4.1 for the definition of �aligned�). Because the Unicode language\n+    \/\/(see clause 4.1 for the definition of 'aligned'). Because the Unicode language\n@@ -1512,1 +1512,1 @@\n-        \/\/ Ajust to wchar_t elements\n+        \/\/ Adjust to wchar_t elements\n@@ -1885,1 +1885,1 @@\n-    cmsUInt32Number j, nTabSize;\n+    cmsUInt32Number j, nTabSize, i, n;\n@@ -1934,0 +1934,1 @@\n+        n = NewLUT->InputChannels * NewLUT->OutputChannels;\n@@ -1937,10 +1938,4 @@\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[0])) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[1])) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[2])) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[3])) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[4])) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[5])) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[6])) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[7])) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[8])) return FALSE;\n-\n+                for (i = 0; i < n; i++)\n+                {\n+                        if (!_cmsWrite15Fixed16Number(io, MatMPE->Double[i])) return FALSE;\n+                }\n@@ -1950,0 +1945,2 @@\n+                if (n != 9) return FALSE;\n+\n@@ -2173,1 +2170,1 @@\n-cmsBool  Type_LUT16_Write(struct _cms_typehandler_struct* self, cmsIOHANDLER* io, void* Ptr, cmsUInt32Number nItems)\n+cmsBool Type_LUT16_Write(struct _cms_typehandler_struct* self, cmsIOHANDLER* io, void* Ptr, cmsUInt32Number nItems)\n@@ -2188,0 +2185,1 @@\n+        if (mpe->InputChannels != 3 || mpe->OutputChannels != 3) return FALSE;\n@@ -2226,1 +2224,0 @@\n-\n@@ -2229,9 +2226,5 @@\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[0])) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[1])) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[2])) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[3])) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[4])) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[5])) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[6])) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[7])) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, MatMPE -> Double[8])) return FALSE;\n+                for (i = 0; i < 9; i++)\n+                {\n+                        if (!_cmsWrite15Fixed16Number(io, MatMPE->Double[i])) return FALSE;\n+                }\n+\n@@ -2426,1 +2419,1 @@\n-        return CLUT;\n+    return CLUT;\n@@ -2582,0 +2575,2 @@\n+        cmsUInt32Number i, n;\n+\n@@ -2584,10 +2579,1 @@\n-    \/\/ Write the Matrix\n-    if (!_cmsWrite15Fixed16Number(io, m -> Double[0])) return FALSE;\n-    if (!_cmsWrite15Fixed16Number(io, m -> Double[1])) return FALSE;\n-    if (!_cmsWrite15Fixed16Number(io, m -> Double[2])) return FALSE;\n-    if (!_cmsWrite15Fixed16Number(io, m -> Double[3])) return FALSE;\n-    if (!_cmsWrite15Fixed16Number(io, m -> Double[4])) return FALSE;\n-    if (!_cmsWrite15Fixed16Number(io, m -> Double[5])) return FALSE;\n-    if (!_cmsWrite15Fixed16Number(io, m -> Double[6])) return FALSE;\n-    if (!_cmsWrite15Fixed16Number(io, m -> Double[7])) return FALSE;\n-    if (!_cmsWrite15Fixed16Number(io, m -> Double[8])) return FALSE;\n+        n = mpe->InputChannels * mpe->OutputChannels;\n@@ -2595,1 +2581,5 @@\n-    if (m ->Offset != NULL) {\n+        \/\/ Write the Matrix\n+        for (i = 0; i < n; i++)\n+        {\n+                if (!_cmsWrite15Fixed16Number(io, m->Double[i])) return FALSE;\n+        }\n@@ -2597,8 +2587,1 @@\n-    if (!_cmsWrite15Fixed16Number(io, m -> Offset[0])) return FALSE;\n-    if (!_cmsWrite15Fixed16Number(io, m -> Offset[1])) return FALSE;\n-    if (!_cmsWrite15Fixed16Number(io, m -> Offset[2])) return FALSE;\n-    }\n-    else {\n-        if (!_cmsWrite15Fixed16Number(io, 0)) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, 0)) return FALSE;\n-        if (!_cmsWrite15Fixed16Number(io, 0)) return FALSE;\n+        if (m->Offset != NULL) {\n@@ -2606,1 +2589,11 @@\n-    }\n+                for (i = 0; i < mpe->OutputChannels; i++)\n+                {\n+                        if (!_cmsWrite15Fixed16Number(io, m->Offset[i])) return FALSE;\n+                }\n+        }\n+        else {\n+                for (i = 0; i < mpe->OutputChannels; i++)\n+                {\n+                        if (!_cmsWrite15Fixed16Number(io, 0)) return FALSE;\n+                }\n+        }\n@@ -2710,1 +2703,1 @@\n-        if (!_cmsWriteAlignment(io)) return FALSE;\n+    if (!_cmsWriteAlignment(io)) return FALSE;\n@@ -2712,1 +2705,1 @@\n-        return TRUE;\n+    return TRUE;\n@@ -3123,2 +3116,2 @@\n-\/\/The device representation corresponds to the header�s �color space of data� field.\n-\/\/This representation should be consistent with the �number of device components�\n+\/\/The device representation corresponds to the header's 'color space of data' field.\n+\/\/This representation should be consistent with the 'number of device components'\n@@ -3126,1 +3119,1 @@\n-\/\/The PCS representation corresponds to the header�s PCS field. The PCS representation\n+\/\/The PCS representation corresponds to the header's PCS field. The PCS representation\n@@ -3871,1 +3864,1 @@\n-\/\/CIE �absolute� illuminant white point tristimulus values and CIE �absolute�\n+\/\/CIE 'absolute' illuminant white point tristimulus values and CIE 'absolute'\n@@ -3958,1 +3951,1 @@\n-\/\/ The first curve segment always starts at �Infinity, and the last curve segment always ends at +Infinity. The\n+\/\/ The first curve segment always starts at -Infinity, and the last curve segment always ends at +Infinity. The\n@@ -4239,1 +4232,1 @@\n-\/\/ array = [e11, e12, �, e1P, e21, e22, �, e2P, �, eQ1, eQ2, �, eQP, e1, e2, �, eQ]\n+\/\/ array = [e11, e12, ..., e1P, e21, e22, ..., e2P, ..., eQ1, eQ2, ..., eQP, e1, e2, ..., eQ]\n@@ -4762,1 +4755,1 @@\n-            \/\/ Y = (Max � Min) * (X ^ Gamma) + Min\n+            \/\/ Y = (Max - Min) * (X ^ Gamma) + Min\n@@ -4765,1 +4758,1 @@\n-            \/\/ a = (Max � Min) ^ ( 1 \/ Gamma)\n+            \/\/ a = (Max - Min) ^ ( 1 \/ Gamma)\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmstypes.c","additions":50,"deletions":57,"binary":false,"changes":107,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -393,1 +393,1 @@\n-int InkLimitingSampler(register const cmsUInt16Number In[], register cmsUInt16Number Out[], register void* Cargo)\n+int InkLimitingSampler(CMSREGISTER const cmsUInt16Number In[], CMSREGISTER cmsUInt16Number Out[], CMSREGISTER void* Cargo)\n@@ -644,1 +644,1 @@\n-\/\/If  R�sRGB,G�sRGB, B�sRGB < 0.04045\n+\/\/If  R'sRGB,G'sRGB, B'sRGB < 0.04045\n@@ -646,3 +646,3 @@\n-\/\/    R =  R�sRGB \/ 12.92\n-\/\/    G =  G�sRGB \/ 12.92\n-\/\/    B =  B�sRGB \/ 12.92\n+\/\/    R =  R'sRGB \/ 12.92\n+\/\/    G =  G'sRGB \/ 12.92\n+\/\/    B =  B'sRGB \/ 12.92\n@@ -651,1 +651,1 @@\n-\/\/else if  R�sRGB,G�sRGB, B�sRGB >= 0.04045\n+\/\/else if  R'sRGB,G'sRGB, B'sRGB >= 0.04045\n@@ -653,3 +653,3 @@\n-\/\/    R = ((R�sRGB + 0.055) \/ 1.055)^2.4\n-\/\/    G = ((G�sRGB + 0.055) \/ 1.055)^2.4\n-\/\/    B = ((B�sRGB + 0.055) \/ 1.055)^2.4\n+\/\/    R = ((R'sRGB + 0.055) \/ 1.055)^2.4\n+\/\/    G = ((G'sRGB + 0.055) \/ 1.055)^2.4\n+\/\/    B = ((B'sRGB + 0.055) \/ 1.055)^2.4\n@@ -718,1 +718,1 @@\n-int bchswSampler(register const cmsUInt16Number In[], register cmsUInt16Number Out[], register void* Cargo)\n+int bchswSampler(CMSREGISTER const cmsUInt16Number In[], CMSREGISTER cmsUInt16Number Out[], CMSREGISTER void* Cargo)\n@@ -1128,1 +1128,1 @@\n-    \/\/ On the output side too\n+    \/\/ On the output side too. Note that due to V2\/V4 PCS encoding on lab we cannot fix white misalignments\n@@ -1131,0 +1131,1 @@\n+        dwFlags |= cmsFLAGS_NOWHITEONWHITEFIXUP;\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmsvirt.c","additions":13,"deletions":12,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -107,2 +107,2 @@\n-        \/\/ Obtain y(x)\n-        y = -3.000*(x*x) + 2.870*x - 0.275;\n+    \/\/ Obtain y(x)\n+    y = -3.000*(x*x) + 2.870*x - 0.275;\n@@ -110,1 +110,1 @@\n-        \/\/ wave factors (not used, but here for futures extensions)\n+    \/\/ wave factors (not used, but here for futures extensions)\n@@ -112,2 +112,2 @@\n-        \/\/ M1 = (-1.3515 - 1.7703*x + 5.9114 *y)\/(0.0241 + 0.2562*x - 0.7341*y);\n-        \/\/ M2 = (0.0300 - 31.4424*x + 30.0717*y)\/(0.0241 + 0.2562*x - 0.7341*y);\n+    \/\/ M1 = (-1.3515 - 1.7703*x + 5.9114 *y)\/(0.0241 + 0.2562*x - 0.7341*y);\n+    \/\/ M2 = (0.0300 - 31.4424*x + 30.0717*y)\/(0.0241 + 0.2562*x - 0.7341*y);\n@@ -115,3 +115,3 @@\n-        WhitePoint -> x = x;\n-        WhitePoint -> y = y;\n-        WhitePoint -> Y = 1.0;\n+    WhitePoint -> x = x;\n+    WhitePoint -> y = y;\n+    WhitePoint -> Y = 1.0;\n@@ -119,1 +119,1 @@\n-        return TRUE;\n+    return TRUE;\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmswtpnt.c","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -203,0 +203,17 @@\n+\n+static\n+cmsUInt32Number PixelSize(cmsUInt32Number Format)\n+{\n+    cmsUInt32Number fmt_bytes = T_BYTES(Format);\n+\n+    \/\/ For double, the T_BYTES field is zero\n+    if (fmt_bytes == 0)\n+        return sizeof(cmsUInt64Number);\n+\n+    \/\/ Otherwise, it is already correct for all formats\n+    return fmt_bytes;\n+}\n+\n+\n+\n+\n@@ -215,2 +232,2 @@\n-    stride.BytesPerPlaneIn = Size;\n-    stride.BytesPerPlaneOut = Size;\n+    stride.BytesPerPlaneIn = Size * PixelSize(p->InputFormat);\n+    stride.BytesPerPlaneOut = Size * PixelSize(p->OutputFormat);\n@@ -373,1 +390,1 @@\n-\/\/ Null transformation, only applies formatters. No cach�\n+\/\/ Null transformation, only applies formatters. No cache\n@@ -420,2 +437,2 @@\n-    register cmsUInt8Number* accum;\n-    register cmsUInt8Number* output;\n+    CMSREGISTER cmsUInt8Number* accum;\n+    CMSREGISTER cmsUInt8Number* output;\n@@ -474,1 +491,1 @@\n-\/\/ Gamut check, No cach�, 16 bits.\n+\/\/ Gamut check, No cache, 16 bits.\n@@ -513,1 +530,1 @@\n-\/\/ No gamut check, Cach�, 16 bits,\n+\/\/ No gamut check, Cache, 16 bits,\n@@ -812,37 +829,40 @@\n-              for (Plugin = ctx->TransformCollection;\n-                     Plugin != NULL;\n-                     Plugin = Plugin->Next) {\n-\n-                     if (Plugin->Factory(&p->xform, &p->UserData, &p->FreeUserData, &p->Lut, InputFormat, OutputFormat, dwFlags)) {\n-\n-                            \/\/ Last plugin in the declaration order takes control. We just keep\n-                            \/\/ the original parameters as a logging.\n-                            \/\/ Note that cmsFLAGS_CAN_CHANGE_FORMATTER is not set, so by default\n-                            \/\/ an optimized transform is not reusable. The plug-in can, however, change\n-                            \/\/ the flags and make it suitable.\n-\n-                            p->ContextID = ContextID;\n-                            p->InputFormat = *InputFormat;\n-                            p->OutputFormat = *OutputFormat;\n-                            p->dwOriginalFlags = *dwFlags;\n-\n-                            \/\/ Fill the formatters just in case the optimized routine is interested.\n-                            \/\/ No error is thrown if the formatter doesn't exist. It is up to the optimization\n-                            \/\/ factory to decide what to do in those cases.\n-                            p->FromInput = _cmsGetFormatter(ContextID, *InputFormat, cmsFormatterInput, CMS_PACK_FLAGS_16BITS).Fmt16;\n-                            p->ToOutput = _cmsGetFormatter(ContextID, *OutputFormat, cmsFormatterOutput, CMS_PACK_FLAGS_16BITS).Fmt16;\n-                            p->FromInputFloat = _cmsGetFormatter(ContextID, *InputFormat, cmsFormatterInput, CMS_PACK_FLAGS_FLOAT).FmtFloat;\n-                            p->ToOutputFloat = _cmsGetFormatter(ContextID, *OutputFormat, cmsFormatterOutput, CMS_PACK_FLAGS_FLOAT).FmtFloat;\n-\n-                            \/\/ Save the day? (Ignore the warning)\n-                            if (Plugin->OldXform) {\n-                                   p->OldXform = (_cmsTransformFn)(void*) p->xform;\n-                                   p->xform = _cmsTransform2toTransformAdaptor;\n-                            }\n-\n-                            return p;\n-                     }\n-              }\n-\n-              \/\/ Not suitable for the transform plug-in, let's check  the pipeline plug-in\n-              _cmsOptimizePipeline(ContextID, &p->Lut, Intent, InputFormat, OutputFormat, dwFlags);\n+           if (!(*dwFlags & cmsFLAGS_NOOPTIMIZE))\n+           {\n+               for (Plugin = ctx->TransformCollection;\n+                   Plugin != NULL;\n+                   Plugin = Plugin->Next) {\n+\n+                   if (Plugin->Factory(&p->xform, &p->UserData, &p->FreeUserData, &p->Lut, InputFormat, OutputFormat, dwFlags)) {\n+\n+                       \/\/ Last plugin in the declaration order takes control. We just keep\n+                       \/\/ the original parameters as a logging.\n+                       \/\/ Note that cmsFLAGS_CAN_CHANGE_FORMATTER is not set, so by default\n+                       \/\/ an optimized transform is not reusable. The plug-in can, however, change\n+                       \/\/ the flags and make it suitable.\n+\n+                       p->ContextID = ContextID;\n+                       p->InputFormat = *InputFormat;\n+                       p->OutputFormat = *OutputFormat;\n+                       p->dwOriginalFlags = *dwFlags;\n+\n+                       \/\/ Fill the formatters just in case the optimized routine is interested.\n+                       \/\/ No error is thrown if the formatter doesn't exist. It is up to the optimization\n+                       \/\/ factory to decide what to do in those cases.\n+                       p->FromInput = _cmsGetFormatter(ContextID, *InputFormat, cmsFormatterInput, CMS_PACK_FLAGS_16BITS).Fmt16;\n+                       p->ToOutput = _cmsGetFormatter(ContextID, *OutputFormat, cmsFormatterOutput, CMS_PACK_FLAGS_16BITS).Fmt16;\n+                       p->FromInputFloat = _cmsGetFormatter(ContextID, *InputFormat, cmsFormatterInput, CMS_PACK_FLAGS_FLOAT).FmtFloat;\n+                       p->ToOutputFloat = _cmsGetFormatter(ContextID, *OutputFormat, cmsFormatterOutput, CMS_PACK_FLAGS_FLOAT).FmtFloat;\n+\n+                       \/\/ Save the day? (Ignore the warning)\n+                       if (Plugin->OldXform) {\n+                           p->OldXform = (_cmsTransformFn)(void*)p->xform;\n+                           p->xform = _cmsTransform2toTransformAdaptor;\n+                       }\n+\n+                       return p;\n+                   }\n+               }\n+           }\n+\n+           \/\/ Not suitable for the transform plug-in, let's check  the pipeline plug-in\n+           _cmsOptimizePipeline(ContextID, &p->Lut, Intent, InputFormat, OutputFormat, dwFlags);\n@@ -871,1 +891,1 @@\n-            \/\/ Float transforms don't use cach�, always are non-NULL\n+            \/\/ Float transforms don't use cache, always are non-NULL\n@@ -910,1 +930,1 @@\n-                    p ->xform = PrecalculatedXFORMGamutCheck;  \/\/ Gamut check, no cach�\n+                    p ->xform = PrecalculatedXFORMGamutCheck;  \/\/ Gamut check, no cache\n@@ -912,1 +932,1 @@\n-                    p ->xform = PrecalculatedXFORM;  \/\/ No cach�, no gamut check\n+                    p ->xform = PrecalculatedXFORM;  \/\/ No cache, no gamut check\n@@ -917,1 +937,1 @@\n-                    p ->xform = CachedXFORMGamutCheck;    \/\/ Gamut check, cach�\n+                    p ->xform = CachedXFORMGamutCheck;    \/\/ Gamut check, cache\n@@ -919,1 +939,1 @@\n-                    p ->xform = CachedXFORM;  \/\/ No gamut check, cach�\n+                    p ->xform = CachedXFORM;  \/\/ No gamut check, cache\n","filename":"src\/java.desktop\/share\/native\/liblcms\/cmsxform.c","additions":70,"deletions":50,"binary":false,"changes":120,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -55,1 +55,1 @@\n-\/\/ Version 2.9rc3\n+\/\/ Version 2.11\n@@ -93,0 +93,3 @@\n+\/\/ Uncomment this to remove the \"register\" storage class\n+\/\/ #define CMS_NO_REGISTER_KEYWORD 1\n+\n@@ -110,1 +113,1 @@\n-#define LCMS_VERSION        2090\n+#define LCMS_VERSION        2100\n@@ -180,0 +183,7 @@\n+\/\/ Handle \"register\" keyword\n+#if defined(CMS_NO_REGISTER_KEYWORD) && !defined(CMS_DLL) && !defined(CMS_DLL_BUILD)\n+#  define CMSREGISTER\n+#else\n+#  define CMSREGISTER register\n+#endif\n+\n@@ -1061,1 +1071,1 @@\n-CMSAPI void             CMSEXPORT cmsDeleteContext(cmsContext ContexID);\n+CMSAPI void             CMSEXPORT cmsDeleteContext(cmsContext ContextID);\n@@ -1213,0 +1223,1 @@\n+CMSAPI cmsFloat64Number* CMSEXPORT cmsGetToneCurveParams(const cmsToneCurve* t);\n@@ -1279,3 +1290,3 @@\n-typedef cmsInt32Number (* cmsSAMPLER16)   (register const cmsUInt16Number In[],\n-                                            register cmsUInt16Number Out[],\n-                                            register void * Cargo);\n+typedef cmsInt32Number (* cmsSAMPLER16)   (CMSREGISTER const cmsUInt16Number In[],\n+                                           CMSREGISTER cmsUInt16Number Out[],\n+                                           CMSREGISTER void * Cargo);\n@@ -1283,3 +1294,3 @@\n-typedef cmsInt32Number (* cmsSAMPLERFLOAT)(register const cmsFloat32Number In[],\n-                                            register cmsFloat32Number Out[],\n-                                            register void * Cargo);\n+typedef cmsInt32Number (* cmsSAMPLERFLOAT)(CMSREGISTER const cmsFloat32Number In[],\n+                                           CMSREGISTER cmsFloat32Number Out[],\n+                                           CMSREGISTER void * Cargo);\n@@ -1676,1 +1687,1 @@\n-#define cmsFLAGS_HIGHRESPRECALC           0x0400    \/\/ Use more memory to give better accurancy\n+#define cmsFLAGS_HIGHRESPRECALC           0x0400    \/\/ Use more memory to give better accuracy\n","filename":"src\/java.desktop\/share\/native\/liblcms\/lcms2.h","additions":22,"deletions":11,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n-\n+\/\/---------------------------------------------------------------------------------\n@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -79,1 +79,1 @@\n-#if defined(__BORLANDC__) || (_MSC_VER < 1400) \/\/ 1400 == VC++ 8.0\n+#if defined(__BORLANDC__) || (defined(_MSC_VER) && (_MSC_VER < 1400)) \/\/ 1400 == VC++ 8.0\n@@ -120,0 +120,7 @@\n+\/\/ Allow signed overflow, we know this is harmless in this particular context\n+#if defined(__clang__)\n+#   define CMS_NO_SANITIZE __attribute__((no_sanitize(\"signed-integer-overflow\")))\n+#else\n+#   define CMS_NO_SANITIZE\n+#endif\n+\n@@ -131,1 +138,1 @@\n-# if _MSC_VER <= 1700\n+# if defined(_MSC_VER) && _MSC_VER <= 1700\n@@ -137,0 +144,7 @@\n+#if !defined(_MSC_VER) && (defined(__STDC_VERSION__) && __STDC_VERSION__ < 199901L)\n+        #if !defined(isinf)\n+        #define isinf(x) (!finite((x)))\n+        #endif\n+#endif\n+\n+\n@@ -967,0 +981,3 @@\n+\/\/ Link several profiles to obtain a single LUT modelling the whole color transform. Intents, Black point\n+\/\/ compensation and Adaptation parameters may vary across profiles. BPC and Adaptation refers to the PCS\n+\/\/ after the profile. I.e, BPC[0] refers to connexion between profile(0) and profile(1)\n","filename":"src\/java.desktop\/share\/native\/liblcms\/lcms2_internal.h","additions":21,"deletions":4,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-\/\/  Copyright (c) 1998-2017 Marti Maria Saguer\n+\/\/  Copyright (c) 1998-2020 Marti Maria Saguer\n@@ -126,0 +126,6 @@\n+\/\/ MD5 low level  -------------------------------------------------------------------------------------\n+\n+CMSAPI cmsHANDLE          CMSEXPORT cmsMD5alloc(cmsContext ContextID);\n+CMSAPI void               CMSEXPORT cmsMD5add(cmsHANDLE Handle, const cmsUInt8Number* buf, cmsUInt32Number len);\n+CMSAPI void               CMSEXPORT cmsMD5finish(cmsProfileID* ProfileID, cmsHANDLE Handle);\n+\n@@ -287,3 +293,3 @@\n-typedef void (* _cmsInterpFn16)(register const cmsUInt16Number Input[],\n-                                register cmsUInt16Number Output[],\n-                                register const struct _cms_interp_struc* p);\n+typedef void (* _cmsInterpFn16)(CMSREGISTER const cmsUInt16Number Input[],\n+                                CMSREGISTER cmsUInt16Number Output[],\n+                                CMSREGISTER const struct _cms_interp_struc* p);\n@@ -372,4 +378,4 @@\n-typedef cmsUInt8Number* (* cmsFormatter16)(register struct _cmstransform_struct* CMMcargo,\n-                                           register cmsUInt16Number Values[],\n-                                           register cmsUInt8Number* Buffer,\n-                                           register cmsUInt32Number Stride);\n+typedef cmsUInt8Number* (* cmsFormatter16)(CMSREGISTER struct _cmstransform_struct* CMMcargo,\n+                                           CMSREGISTER cmsUInt16Number Values[],\n+                                           CMSREGISTER cmsUInt8Number* Buffer,\n+                                           CMSREGISTER cmsUInt32Number Stride);\n@@ -573,3 +579,3 @@\n-typedef void     (* _cmsOPTeval16Fn)(register const cmsUInt16Number In[],\n-                                     register cmsUInt16Number Out[],\n-                                     register const void* Data);\n+typedef void     (* _cmsOPTeval16Fn)(CMSREGISTER const cmsUInt16Number In[],\n+                                     CMSREGISTER cmsUInt16Number Out[],\n+                                     CMSREGISTER const void* Data);\n","filename":"src\/java.desktop\/share\/native\/liblcms\/lcms2_plugin.h","additions":17,"deletions":11,"binary":false,"changes":28,"status":"modified"}]}