{"files":[{"patch":"@@ -422,1 +422,2 @@\n-      discarded_size += buffer->unflushed_size();\n+      discarded_size += buffer->discard();\n+      assert(buffer->unflushed_size() == 0, \"invariant\");\n@@ -424,0 +425,1 @@\n+      mspace_release_full(oldest_age_node, _age_mspace);\n@@ -426,1 +428,0 @@\n-        mspace_release_full(oldest_age_node, _age_mspace);\n@@ -428,5 +429,0 @@\n-      } else {\n-        mspace_release_full(oldest_age_node, _age_mspace);\n-        buffer->reinitialize();\n-        buffer->release(); \/\/ publish\n-        break;\n@@ -434,0 +430,3 @@\n+      buffer->reinitialize();\n+      buffer->release(); \/\/ publish\n+      break;\n","filename":"src\/hotspot\/share\/jfr\/recorder\/storage\/jfrStorage.cpp","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"}]}