{"files":[{"patch":"@@ -507,0 +507,6 @@\n+    \/\/ If both period fields are 0, it implies the sampler is in the process\n+    \/\/ of disenrolling. Loop back for graceful disenroll by means of the semaphore.\n+    if (java_period_millis == max_jlong && native_period_millis == max_jlong) {\n+      continue;\n+    }\n+\n@@ -524,1 +530,1 @@\n-      os::naked_short_sleep(sleep_to_next);\n+      os::naked_sleep(sleep_to_next);\n","filename":"src\/hotspot\/share\/jfr\/periodic\/sampling\/jfrThreadSampler.cpp","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -51,0 +51,3 @@\n+    \/\/ Please resist the temptation to speed up the test by decreasing\n+    \/\/ the period. It is explicity set to 1100 ms to provoke the 1000 ms\n+    \/\/ threshold in the JVM for os::naked_short_sleep().\n@@ -53,1 +56,1 @@\n-            rs.enable(NATIVE_EVENT).withPeriod(Duration.ofMillis(1));\n+            rs.enable(NATIVE_EVENT).withPeriod(Duration.ofMillis(1100));\n","filename":"test\/jdk\/jdk\/jfr\/event\/sampling\/TestNative.java","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"}]}