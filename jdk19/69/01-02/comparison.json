{"files":[{"patch":"@@ -2150,5 +2150,4 @@\n-  Thread* current = Thread::current_or_null();\n-  if (current != nullptr && (!current->is_Java_thread() || JavaThread::cast(current)->is_oop_safe())) {\n-    \/\/ Only access threadObj() if current thread is attached and\n-    \/\/ if it is not a JavaThread or if it is a JavaThread that can safely\n-    \/\/ access oops.\n+  Thread* current = Thread::current();\n+  if (!current->is_Java_thread() || JavaThread::cast(current)->is_oop_safe()) {\n+    \/\/ Only access threadObj() if current thread is not a JavaThread\n+    \/\/ or if it is a JavaThread that can safely access oops.\n@@ -2217,6 +2216,2 @@\n-  Thread* current = Thread::current_or_null();\n-  if (current == nullptr) {\n-    \/\/ Current thread is not attached so it can't safely determine this\n-    \/\/ JavaThread's name so use the default thread name.\n-    name_str = Thread::name();\n-  } else if (!current->is_Java_thread() || JavaThread::cast(current)->is_oop_safe()) {\n+  Thread* current = Thread::current();\n+  if (!current->is_Java_thread() || JavaThread::cast(current)->is_oop_safe()) {\n","filename":"src\/hotspot\/share\/runtime\/thread.cpp","additions":6,"deletions":11,"binary":false,"changes":17,"status":"modified"}]}