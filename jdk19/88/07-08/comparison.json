{"files":[{"patch":"@@ -73,1 +73,1 @@\n-    private volatile ThreadReference thread;\n+    private volatile ThreadReference targetThread;\n@@ -98,2 +98,6 @@\n-            System.out.println(\"Target thread died, thread=\" + eventThread);\n-            thread = eventThread;\n+            System.out.println(\"Target thread died, thread=\" + eventThread +\n+                               \", state=\" + eventThread.status());\n+            targetThread = eventThread;\n+            if (targetThread.status() != ThreadReference.THREAD_STATUS_RUNNING) {\n+                failure(\"FAILED: wrong state for thread: \" + targetThread.status());\n+            }\n@@ -107,1 +111,1 @@\n-        if (thread == null) {\n+        if (targetThread == null) {\n@@ -109,0 +113,9 @@\n+        } else {\n+            System.out.println(\"Target thread status at breakpoint: thread=\" + targetThread +\n+                               \", state=\" + targetThread.status());\n+            if (targetThread.status() != ThreadReference.THREAD_STATUS_ZOMBIE) {\n+                failure(\"FAILED: wrong state for thread: \" + targetThread.status());\n+            }\n+            breakpointReached = true;\n+            \/* Suspend the thread. This is being done after the thread has exited. *\/\n+            targetThread.suspend();\n@@ -110,3 +123,0 @@\n-        breakpointReached = true;\n-        \/* Suspend the thread. This is being done after the thread has exited. *\/\n-        thread.suspend();\n@@ -144,1 +154,1 @@\n-        if (thread == null) {\n+        if (targetThread == null) {\n","filename":"test\/jdk\/com\/sun\/jdi\/SuspendAfterDeath.java","additions":18,"deletions":8,"binary":false,"changes":26,"status":"modified"}]}