{"files":[{"patch":"@@ -81,1 +81,3 @@\n-            if (maxPossibleAllocationSize > blockSize) {\n+            if (maxPossibleAllocationSize < 0) {\n+                throw new OutOfMemoryError();\n+            } else if (maxPossibleAllocationSize > blockSize) {\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/ArenaAllocator.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -163,0 +163,6 @@\n+    @Test(expectedExceptions = OutOfMemoryError.class)\n+    public void testBadArenaNullReturn() {\n+        SegmentAllocator segmentAllocator = SegmentAllocator.newNativeArena(MemorySession.openImplicit());\n+        segmentAllocator.allocate(Long.MAX_VALUE, 2);\n+    }\n+\n","filename":"test\/jdk\/java\/foreign\/TestSegmentAllocators.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"}]}