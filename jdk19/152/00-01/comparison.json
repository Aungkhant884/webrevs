{"files":[{"patch":"@@ -30,0 +30,1 @@\n+#include \"runtime\/vmOperations.hpp\"\n@@ -51,2 +52,5 @@\n-  \/\/ Wait for concurrent readers of the segment to exit before freeing.\n-  GlobalCounter::write_synchronize();\n+  \/\/ Wait for concurrent readers of the segment to exit before freeing; but only if the VM\n+  \/\/ isn't exiting.\n+  if (!VM_Exit::vm_exited()) {\n+    GlobalCounter::write_synchronize();\n+  }\n","filename":"src\/hotspot\/share\/gc\/g1\/g1SegmentedArray.cpp","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"}]}