{"files":[{"patch":"@@ -11,1 +11,1 @@\n-@property (readwrite) NSTimeInterval lastUsed;\n+@property (readwrite) time_t lastUsed;\n@@ -18,1 +18,0 @@\n-- (void) releaseTexture;\n@@ -39,0 +38,1 @@\n+@property (readwrite, assign) MTLTexturePoolItem* availableTail;\n@@ -40,1 +40,5 @@\n-- (MTLTexturePoolItem*) createItem:(id<MTLTexture>) texture;\n+- (MTLTexturePoolItem *)createItem:(id<MTLDevice>)dev\n+                             width:(int)width\n+                            height:(int)height\n+                            format:(MTLPixelFormat)format\n+                     isMultiSample:(bool)isMultiSample;\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLTexturePool.h","additions":7,"deletions":3,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -60,1 +60,1 @@\n-@synthesize available, occupied;\n+@synthesize available, availableTail, occupied;\n@@ -66,0 +66,1 @@\n+        self.availableTail = nil;\n@@ -77,1 +78,5 @@\n-        if (item.next) item.next.prev = nil;\n+        if (item.next) {\n+            item.next.prev = nil;\n+        } else {\n+            self.availableTail = item.prev;\n+        }\n@@ -80,1 +85,5 @@\n-        if (item.next) item.next.prev = item.prev;\n+        if (item.next) {\n+            item.next.prev = item.prev;\n+        } else {\n+            self.availableTail = item.prev;\n+        }\n@@ -103,1 +112,5 @@\n-        if (self.available) self.available.prev = item;\n+        if (self.available) {\n+            self.available.prev = item;\n+        } else {\n+            self.availableTail = item;\n+        }\n@@ -127,0 +140,2 @@\n+        } else {\n+            self.availableTail = item.prev;\n@@ -133,0 +148,2 @@\n+        } else {\n+            self.availableTail = item.prev;\n@@ -149,0 +166,1 @@\n+    self.availableTail = nil;\n@@ -184,1 +202,1 @@\n-    MTLTexturePoolItem *cur = available;\n+    MTLTexturePoolItem *cur = availableTail;\n@@ -187,1 +205,1 @@\n-            MTLTexturePoolItem *next = cur.next;\n+            MTLTexturePoolItem *prev = cur.prev;\n@@ -198,0 +216,2 @@\n+            } else {\n+                if (lastUsedTimeToRemove > 0) break;\n@@ -199,1 +219,1 @@\n-            cur = next;\n+            cur = prev;\n@@ -222,1 +242,1 @@\n-            const int deltaArea = cur.texture.width * cur.texture.height - requestedPixels;\n+            const int deltaArea = (const int) (cur.texture.width * cur.texture.height - requestedPixels);\n@@ -316,0 +336,1 @@\n+#ifdef DEBUG\n@@ -317,0 +338,1 @@\n+#endif\n@@ -345,1 +367,1 @@\n-                    const int deltaArea = tpi.texture.width*tpi.texture.height - requestedPixels;\n+                    const int deltaArea = (const int) (tpi.texture.width * tpi.texture.height - requestedPixels);\n@@ -382,1 +404,1 @@\n-    NSTimeInterval lastUsedTimeToRemove =\n+    time_t lastUsedTimeToRemove =\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLTexurePool.m","additions":32,"deletions":10,"binary":false,"changes":42,"status":"modified"}]}