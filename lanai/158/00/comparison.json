{"files":[{"patch":"@@ -52,1 +52,1 @@\n-import static sun.java2d.opengl.OGLSurfaceData.TEXTURE;\n+import static sun.java2d.pipe.hw.AccelSurface.TEXTURE;\n@@ -375,1 +375,2 @@\n-        if (type != RT_TEXTURE && type != TEXTURE) {\n+        if ((type != RT_TEXTURE && type != TEXTURE) ||\n+            transparency == Transparency.BITMASK) {\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/java2d\/metal\/MTLGraphicsConfig.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,1 +31,0 @@\n-import sun.java2d.opengl.OGLSurfaceData;\n@@ -35,2 +34,1 @@\n-\n-import static java.awt.BufferCapabilities.FlipContents.COPIED;\n+import sun.java2d.pipe.hw.AccelSurface;\n@@ -46,4 +44,2 @@\n-         * We will attempt to accelerate this image only under the\n-         * following conditions:\n-         *   - the image is not bitmask AND the GraphicsConfig supports the FBO\n-         *     extension\n+         * We will attempt to accelerate this image only\n+         * if the image is not bitmask\n@@ -52,4 +48,1 @@\n-        MTLGraphicsConfig gc = (MTLGraphicsConfig) vImg.getGraphicsConfig();\n-        accelerationEnabled = true;\n-                \/\/gc.isCapPresent(CAPS_EXT_FBOBJECT)\n-                \/\/&& transparency != Transparency.BITMASK;\n+        accelerationEnabled = transparency != Transparency.BITMASK;\n@@ -63,1 +56,1 @@\n-     * Create a FBO-based SurfaceData object (or init the backbuffer\n+     * Create a SurfaceData object (or init the backbuffer\n@@ -74,2 +67,2 @@\n-            if (type == OGLSurfaceData.UNDEFINED) {\n-                type = OGLSurfaceData.FBOBJECT;\n+            if (type == AccelSurface.UNDEFINED) {\n+                type = AccelSurface.RT_TEXTURE;\n@@ -93,1 +86,1 @@\n-        if (vImg.getForcedAccelSurfaceType() != OGLSurfaceData.TEXTURE) {\n+        if (vImg.getForcedAccelSurfaceType() != AccelSurface.TEXTURE) {\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/java2d\/metal\/MTLVolatileSurfaceManager.java","additions":9,"deletions":16,"binary":false,"changes":25,"status":"modified"}]}