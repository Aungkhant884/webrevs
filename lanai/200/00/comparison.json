{"files":[{"patch":"@@ -68,0 +68,1 @@\n+- (void)resetStencilState;\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLClip.h","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+static id<MTLDepthStencilState> stencilState = nil;\n@@ -53,1 +54,0 @@\n-    static id<MTLDepthStencilState> stencilState = nil;\n@@ -141,0 +141,7 @@\n+- (void)resetStencilState {\n+    if (stencilState != nil) {\n+        [stencilState release];\n+        stencilState = nil;\n+    }\n+}\n+\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLClip.m","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -175,1 +175,1 @@\n-\n+- (void)reset;\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLContext.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -176,0 +176,7 @@\n+- (void) reset {\n+    J2dTraceLn(J2D_TRACE_VERBOSE, \"MTLContext : reset\");\n+\n+    \/\/ Add code for context state reset here\n+    [_clip resetStencilState];\n+}\n+\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLContext.m","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -838,0 +838,1 @@\n+static bool samplersInitialized = false;\n@@ -846,2 +847,9 @@\n-    if (samplerNearestClamp != nil)\n-        return;\n+    if (samplersInitialized) {\n+        \/\/ Release old samplers if any\n+        [samplerNearestClamp release];\n+        [samplerLinearClamp release];\n+        [samplerNearestRepeat release];\n+        [samplerLinearRepeat release];\n+\n+        samplersInitialized = false;\n+    }\n@@ -874,0 +882,2 @@\n+\n+    samplersInitialized = true;\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLPaints.m","additions":12,"deletions":2,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -666,1 +666,3 @@\n-                        [mtlc.encoderManager endEncoder];\n+                        commitEncodedCommands();\n+                        RESET_PREVIOUS_OP();\n+                        [mtlc reset];\n@@ -668,0 +670,6 @@\n+\n+                    MTLTR_FreeGlyphCaches();\n+                    if (dstOps != NULL) {\n+                        MTLSD_Delete(env, dstOps);\n+                    }\n+\n@@ -669,1 +677,1 @@\n-                \/\/    dstOps = NULL;\n+                    dstOps = NULL;\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLRenderQueue.m","additions":10,"deletions":2,"binary":false,"changes":12,"status":"modified"}]}