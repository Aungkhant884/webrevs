{"files":[{"patch":"@@ -122,0 +122,1 @@\n+    int isSrcOpaque;\n@@ -129,0 +130,1 @@\n+    int isSrcOpaque;\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/common.h","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -370,2 +370,2 @@\n-\n-    return half4(sum.r, sum.g, sum.b, sum.a*uniforms.extraAlpha);\n+    const float srcA = uniforms.isSrcOpaque ? 1 : sum.a;\n+    return half4(sum.r, sum.g, sum.b, srcA*uniforms.extraAlpha);\n@@ -410,2 +410,2 @@\n-\n-    const float a = uniforms.isUseSrcAlpha ? srcColor.a : lookupTex.sample(textureSampler, float2(srcIndex.a, 0.875)).a;\n+    const float srcA = uniforms.isSrcOpaque ? 1 : srcColor.a;\n+    const float a = uniforms.isUseSrcAlpha ? srcA : lookupTex.sample(textureSampler, float2(srcIndex.a, 0.875)).a;\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/awt\/shaders.metal","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -482,1 +482,1 @@\n-                        [mtlc.composite getExtraAlpha], FLOAT_ARR_TO_V4([convolveOp getImgEdge]),\n+                        [mtlc.composite getExtraAlpha], renderOptions->srcFlags.isOpaque, FLOAT_ARR_TO_V4([convolveOp getImgEdge]),\n@@ -495,2 +495,2 @@\n-                        [mtlc.composite getExtraAlpha], FLOAT_ARR_TO_V4([lookupOp getOffset]),\n-                        lookupOp.isUseSrcAlpha, lookupOp.isNonPremult,\n+                        [mtlc.composite getExtraAlpha], renderOptions->srcFlags.isOpaque,\n+                        FLOAT_ARR_TO_V4([lookupOp getOffset]), lookupOp.isUseSrcAlpha, lookupOp.isNonPremult,\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLPaints.m","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"}]}