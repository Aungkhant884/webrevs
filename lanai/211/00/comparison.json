{"files":[{"patch":"@@ -197,0 +197,3 @@\n+            if (threadGroupSize == 0) {\n+               threadGroupSize = 1;\n+            }\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLBlitLoops.m","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -95,0 +95,2 @@\n+    _pooledTextures = nil;\n+\n@@ -96,0 +98,2 @@\n+    _commandBuffer = nil;\n+\n@@ -97,0 +101,1 @@\n+    _lock = nil;\n@@ -167,1 +172,3 @@\n-    self.texturePool = nil;\n+    \/\/ TODO : Check that texturePool is completely released.\n+    \/\/ texturePool content is released in MTLCommandBufferWrapper.onComplete()\n+    \/\/self.texturePool = nil;\n@@ -172,8 +179,41 @@\n-    [_encoderManager release];\n-    [_samplerManager release];\n-    [_stencilManager release];\n-    [_composite release];\n-    [_paint release];\n-    [_transform release];\n-    [_tempTransform release];\n-    [_clip release];\n+\n+    if (_encoderManager != nil) {\n+        [_encoderManager release];\n+        _encoderManager = nil;\n+    }\n+\n+    if (_samplerManager != nil) {\n+        [_samplerManager release];\n+        _samplerManager = nil;\n+    }\n+\n+    if (_stencilManager != nil) {\n+        [_stencilManager release];\n+        _stencilManager = nil;\n+    }\n+\n+    if (_composite != nil) {\n+        [_composite release];\n+        _composite = nil;\n+    }\n+\n+    if (_paint != nil) {\n+        [_paint release];\n+        _paint = nil;\n+    }\n+\n+    if (_transform != nil) {\n+        [_transform release];\n+        _transform = nil;\n+    }\n+\n+    if (_tempTransform != nil) {\n+        [_tempTransform release];\n+        _tempTransform = nil;\n+    }\n+\n+    if (_clip != nil) {\n+        [_clip release];\n+        _clip = nil;\n+    }\n+\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLContext.m","additions":49,"deletions":9,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -659,1 +659,0 @@\n-                    MTLGC_DestroyMTLGraphicsConfig(pConfigInfo);\n@@ -661,3 +660,0 @@\n-                    \/\/ the previous method will call glX\/wglMakeCurrent(None),\n-                    \/\/ so we should nullify the current mtlc and dstOps to avoid\n-                    \/\/ calling glFlush() (or similar) while no context is current\n@@ -667,0 +663,3 @@\n+\n+                    MTLGC_DestroyMTLGraphicsConfig(pConfigInfo);\n+\n","filename":"src\/java.desktop\/macosx\/native\/libawt_lwawt\/java2d\/metal\/MTLRenderQueue.m","additions":3,"deletions":4,"binary":false,"changes":7,"status":"modified"}]}