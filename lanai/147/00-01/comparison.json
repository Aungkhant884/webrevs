{"files":[{"patch":"@@ -70,1 +70,0 @@\n-        \/\/ Check whether -Dsun.java2d.metal=true has been specified\n@@ -73,2 +72,2 @@\n-            \/\/ Check whether Metal framework is available on the system\n-            if (MTLGraphicsConfig.isMetalAvailable()) {\n+            \/\/ Try to get MTLGraphicsConfig\n+            this.config = MTLGraphicsConfig.getConfig(this, displayID, 0);\n@@ -76,7 +75,5 @@\n-                \/\/ Try to get MTLGraphicsConfig\n-                this.config = MTLGraphicsConfig.getConfig(this, displayID, 0);\n-\n-                \/\/ If MTLGraphicsConfig creation succeeds\n-                if (this.config != null) {\n-                    metalPipelineEnabled = true;\n-                } else {\n+            \/\/ If MTLGraphicsConfig creation succeeds\n+            if (this.config != null) {\n+                metalPipelineEnabled = true;\n+            } else {\n+                if (MacOSFlags.isMetalVerbose()) {\n@@ -85,2 +82,0 @@\n-            } else {\n-                System.out.println(\"Metal framework is not available. Using OpenGL rendering pipeline.\");\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/awt\/CGraphicsDevice.java","additions":7,"deletions":12,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -29,0 +29,2 @@\n+import sun.java2d.metal.MTLGraphicsConfig;\n+\n@@ -39,0 +41,1 @@\n+    private static boolean metalVerbose;\n@@ -69,0 +72,12 @@\n+    private static boolean isBooleanPropTrueVerbose(String p) {\n+        String propString = System.getProperty(p);\n+        if (propString != null) {\n+            if (propString.equals(\"True\") ||\n+                propString.equals(\"T\"))\n+            {\n+                return true;\n+            }\n+        }\n+        return false;\n+    }\n+\n@@ -79,0 +94,12 @@\n+                    if (metalEnabled) {\n+                        metalVerbose = isBooleanPropTrueVerbose(\"sun.java2d.metal\");\n+\n+                        \/\/ Check whether Metal framework is available on the system\n+                        if (!MTLGraphicsConfig.isMetalAvailable()) {\n+                            metalEnabled = false;\n+\n+                            if (metalVerbose) {\n+                                System.out.println(\"Could not enable Metal pipeline (Metal framework not available)\");\n+                            }\n+                        }\n+                    }\n@@ -86,0 +113,4 @@\n+\n+    public static boolean isMetalVerbose() {\n+        return metalVerbose;\n+    }\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/java2d\/macos\/MacOSFlags.java","additions":31,"deletions":0,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -504,1 +504,1 @@\n-        \/\/ flush the OGL pipeline (this is a no-op if OGL is not enabled)\n+        \/\/ flush the rendering pipeline\n","filename":"src\/java.desktop\/macosx\/classes\/sun\/lwawt\/macosx\/LWCToolkit.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}