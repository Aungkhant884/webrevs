{"files":[{"patch":"@@ -2722,2 +2722,1 @@\n-\/\/ by the call to JavaThread::riscv64_get_thread_helper() or, indeed,\n-\/\/ the call setup code.\n+\/\/ by the call to Thread::current() or, indeed, the call setup code.\n@@ -2731,1 +2730,1 @@\n-  movptr_with_offset(ra, CAST_FROM_FN_PTR(address, JavaThread::riscv64_get_thread_helper), offset);\n+  movptr_with_offset(ra, CAST_FROM_FN_PTR(address, Thread::current), offset);\n","filename":"src\/hotspot\/cpu\/riscv\/macroAssembler_riscv.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -1,41 +0,0 @@\n-\/\/ Copyright (c) 2015, Red Hat Inc. All rights reserved.\n-\/\/ Copyright (c) 2021, Alibaba Group Holding Limited. All Rights Reserved.\n-\/\/ DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-\/\/\n-\/\/ This code is free software; you can redistribute it and\/or modify it\n-\/\/ under the terms of the GNU General Public License version 2 only, as\n-\/\/ published by the Free Software Foundation.\n-\/\/\n-\/\/ This code is distributed in the hope that it will be useful, but WITHOUT\n-\/\/ ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n-\/\/ FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n-\/\/ version 2 for more details (a copy is included in the LICENSE file that\n-\/\/ accompanied this code).\n-\/\/\n-\/\/ You should have received a copy of the GNU General Public License version\n-\/\/ 2 along with this work; if not, write to the Free Software Foundation,\n-\/\/ Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-\/\/\n-\/\/ Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-\/\/ or visit www.oracle.com if you need additional information or have any\n-\/\/ questions.\n-\n-        \/\/ JavaThread::riscv64_get_thread_helper()\n-        \/\/\n-        \/\/ Return the current thread pointer in a0(x10).\n-        \/\/ All other registers are preserved,\n-\n-    .global _ZN10JavaThread25riscv64_get_thread_helperEv\n-    .type   _ZN10JavaThread25riscv64_get_thread_helperEv, %function\n-\n-_ZN10JavaThread25riscv64_get_thread_helperEv:\n-    addi    sp, sp, -16\n-    sd      ra, 8(sp)\n-    la.tls.gd       a0, _ZN6Thread12_thr_currentE\n-    call    __tls_get_addr@plt\n-    ld      a0, 0(a0)\n-    ld      ra, 8(sp)\n-    addi    sp, sp, 16\n-    ret\n-\n-    .size _ZN10JavaThread25riscv64_get_thread_helperEv, .-_ZN10JavaThread25riscv64_get_thread_helperEv\n","filename":"src\/hotspot\/os_cpu\/linux_riscv\/threadLS_linux_riscv.S","additions":0,"deletions":41,"binary":false,"changes":41,"status":"deleted"}]}