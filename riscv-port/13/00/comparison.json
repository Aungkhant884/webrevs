{"files":[{"patch":"@@ -2362,0 +2362,10 @@\n+    __ beqz(flag, cont); \/\/ CAS success means locking succeeded\n+\n+    __ bne(flag, xthread, cont); \/\/ Check for recursive locking\n+\n+    \/\/ Recursive lock case\n+    __ mv(flag, zr);\n+    __ ld(tmp, Address(disp_hdr, ObjectMonitor::recursions_offset_in_bytes() - markWord::monitor_value));\n+    __ add(tmp, tmp, 1u);\n+    __ sd(tmp, Address(disp_hdr, ObjectMonitor::recursions_offset_in_bytes() - markWord::monitor_value));\n+\n@@ -2407,0 +2417,2 @@\n+\n+    Label notRecursive;\n@@ -2408,1 +2420,0 @@\n-    __ orr(flag, flag, disp_hdr); \/\/ Will be 0 if there are 0 recursions\n@@ -2411,0 +2422,8 @@\n+    __ beqz(disp_hdr, notRecursive); \/\/ Will be 0 if not recursive.\n+\n+    \/\/ Recursive lock\n+    __ addi(disp_hdr, disp_hdr, -1);\n+    __ sd(disp_hdr, Address(tmp, ObjectMonitor::recursions_offset_in_bytes()));\n+    __ j(cont);\n+\n+    __ bind(notRecursive);\n","filename":"src\/hotspot\/cpu\/riscv\/riscv.ad","additions":20,"deletions":1,"binary":false,"changes":21,"status":"modified"}]}