{"files":[{"patch":"@@ -92,0 +92,3 @@\n+#elif defined(__APPLE__)\n+    \/\/ On macOS systems we use disconnectx\n+    rv = disconnectx(fd, SAE_ASSOCID_ANY, SAE_CONNID_ANY);\n@@ -94,3 +97,0 @@\n-    socklen_t len = isIPv6 ? sizeof(struct sockaddr_in6) :\n-                             sizeof(struct sockaddr_in);\n-\n@@ -103,0 +103,2 @@\n+    socklen_t len = isIPv6 ? sizeof(struct sockaddr_in6) :\n+                             sizeof(struct sockaddr_in);\n@@ -105,0 +107,1 @@\n+#endif\n@@ -106,1 +109,6 @@\n-#if defined(_ALLBSD_SOURCE)\n+#if defined(_ALLBSD_SOURCE) && !defined(__APPLE__)\n+    \/\/ On _ALLBSD_SOURCE except __APPLE__ we consider EADDRNOTAVAIL\n+    \/\/ error to be OK and ignore it. __APPLE__ systems are excluded\n+    \/\/ in this check since for __APPLE__ systems, unlike other BSD systems,\n+    \/\/ we issue a \"disconnectx\" call (a few lines above),\n+    \/\/ which isn't expected to return this error code.\n@@ -118,2 +126,0 @@\n-#endif \/\/ defined(__solaris__)\n-\n","filename":"src\/java.base\/unix\/native\/libnio\/ch\/DatagramChannelImpl.c","additions":12,"deletions":6,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,1 +25,1 @@\n- * @bug 7132924\n+ * @bug 7132924 8285515\n","filename":"test\/jdk\/java\/nio\/channels\/DatagramChannel\/Disconnect.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}