{"files":[{"patch":"@@ -487,0 +487,2 @@\n+\n+    ShenandoahEvacWaste = ShenandoahGenerationalEvacWaste;\n@@ -850,0 +852,6 @@\n+\n+  \/\/ Limit growth of GCLABs to ShenandoahMaxEvacLABRatio * the minimum size.  This enables more equitable distribution of\n+  \/\/ available evacuation buidget between the many threads that are coordinating in the evacuation effort.\n+  if (ShenandoahMaxEvacLABRatio > 0) {\n+    new_size = MIN2(new_size, PLAB::min_size() * ShenandoahMaxEvacLABRatio);\n+  }\n@@ -900,0 +908,5 @@\n+  \/\/ Limit growth of PLABs to ShenandoahMaxEvacLABRatio * the minimum size.  This enables more equitable distribution of\n+  \/\/ available evacuation buidget between the many threads that are coordinating in the evacuation effort.\n+  if (ShenandoahMaxEvacLABRatio > 0) {\n+    new_size = MIN2(new_size, PLAB::min_size() * ShenandoahMaxEvacLABRatio);\n+  }\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.cpp","additions":13,"deletions":0,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -284,3 +284,1 @@\n-          \"failures, which will trigger stop-the-world Full GC passes.  \"   \\\n-          \"A minimum value of 1.6 is recommended for Generational \"         \\\n-          \"mode of Shenandoah.\")                                            \\\n+          \"failures, which will trigger stop-the-world Full GC passes.\")    \\\n@@ -289,0 +287,33 @@\n+  product(double, ShenandoahGenerationalEvacWaste, 2.0, EXPERIMENTAL,       \\\n+          \"For generational mode, how much waste evacuations produce \"      \\\n+          \"within the reserved space.  Larger values make evacuations \"     \\\n+          \"more resilient against evacuation conflicts, at expense of \"     \\\n+          \"evacuating less on each GC cycle.  Smaller values increase \"     \\\n+          \"the risk of evacuation failures, which will trigger \"            \\\n+          \"stop-the-world Full GC passes.  The default value for \"          \\\n+          \"generational mode is 2.0.  The reason for the higher default \"   \\\n+          \"value in generational mode is because generational mode \"        \\\n+          \"enforces the evacuation budget, triggering degenerated GC \"      \\\n+          \"which upgrades to full GC whenever the budget is exceeded.\")     \\\n+          range(1.0,100.0)                                                  \\\n+                                                                            \\\n+  product(uintx, ShenandoahMaxEvacLABRatio, 16, EXPERIMENTAL,               \\\n+          \"Potentially, each running thread maintains a PLAB for \"          \\\n+          \"evacuating objects into old-gen memory and a GCLAB for \"         \\\n+          \"evacuating objects into young-gen memory.  Each time a thread \"  \\\n+          \"exhausts its PLAB or GCLAB, a new local buffer is allocated. \"   \\\n+          \"By default, the new buffer is twice the size of the previous \"   \\\n+          \"buffer.  The sizes are reset to the minimum at the start of \"    \\\n+          \"each GC pass.  This parameter limits the growth of evacuation \"  \\\n+          \"buffer sizes to its value multiplied by the minimum buffer \"     \\\n+          \"size.  A higher value allows evacuation allocations to be more \" \\\n+          \"efficient because less synchronization is required by \"          \\\n+          \"individual threads.  However, a larger value increases the \"     \\\n+          \"likelihood of evacuation failures, leading to long \"             \\\n+          \"stop-the-world pauses.  This is because a large value \"          \\\n+          \"allows individual threads to consume large percentages of \"      \\\n+          \"the total evacuation budget without necessarily effectively \"    \\\n+          \"filling their local evcauation buffers with evacuated \"          \\\n+          \"objects.  A value of zero means no maximum size is enforced.\")   \\\n+          range(0, 1024)                                                    \\\n+                                                                            \\\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoah_globals.hpp","additions":34,"deletions":3,"binary":false,"changes":37,"status":"modified"}]}