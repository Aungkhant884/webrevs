{"files":[{"patch":"@@ -421,5 +421,9 @@\n-    if (target_gen == OLD_GENERATION) {\n-      handle_old_evacuation(copy, size, from_region->is_young());\n-    } else if (target_gen == YOUNG_GENERATION) {\n-      if (is_aging_cycle()) {\n-        ShenandoahHeap::increase_object_age(copy_val, from_region->age() + 1);\n+    if (mode()->is_generational()) {\n+      if (target_gen == OLD_GENERATION) {\n+        handle_old_evacuation(copy, size, from_region->is_young());\n+      } else if (target_gen == YOUNG_GENERATION) {\n+        if (is_aging_cycle()) {\n+          ShenandoahHeap::increase_object_age(copy_val, from_region->age() + 1);\n+        }\n+      } else {\n+        ShouldNotReachHere();\n@@ -427,2 +431,0 @@\n-    } else {\n-      ShouldNotReachHere();\n@@ -430,1 +432,0 @@\n-\n@@ -463,1 +464,3 @@\n-      \/\/ For non-LAB allocations, the object has already been registered\n+      if (mode()->is_generational() && target_gen == OLD_GENERATION) {\n+        card_scan()->register_object(copy);\n+      }\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.inline.hpp","additions":12,"deletions":9,"binary":false,"changes":21,"status":"modified"}]}