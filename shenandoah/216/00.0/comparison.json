{"files":[{"patch":"@@ -84,2 +84,1 @@\n-    _cl(cl),\n-    _claim_token(Threads::thread_claim_token()) {}\n+    _cl(cl)  {}\n@@ -88,8 +87,6 @@\n-    if (thread->claim_threads_do(true, _claim_token)) {\n-      \/\/ Transfer any partial buffer to the qset for completed buffer processing.\n-      _satb_qset.flush_queue(ShenandoahThreadLocalData::satb_mark_queue(thread));\n-      if (thread->is_Java_thread()) {\n-        if (_cl != NULL) {\n-          ResourceMark rm;\n-          thread->oops_do(_cl, NULL);\n-        }\n+    \/\/ Transfer any partial buffer to the qset for completed buffer processing.\n+    _satb_qset.flush_queue(ShenandoahThreadLocalData::satb_mark_queue(thread));\n+    if (thread->is_Java_thread()) {\n+      if (_cl != NULL) {\n+        ResourceMark rm;\n+        thread->oops_do(_cl, NULL);\n@@ -133,1 +130,1 @@\n-      Threads::threads_do(&tc);\n+      Threads::possibly_parallel_threads_do(true \/* is_par *\/, &tc);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahConcurrentMark.cpp","additions":8,"deletions":11,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -57,1 +57,0 @@\n-  uintx _claim_token;\n@@ -61,2 +60,1 @@\n-    _satb_qset(satb_qset),\n-    _claim_token(Threads::thread_claim_token()) { }\n+    _satb_qset(satb_qset) {}\n@@ -65,4 +63,2 @@\n-    if (thread->claim_threads_do(true, _claim_token)) {\n-      \/\/ Transfer any partial buffer to the qset for completed buffer processing.\n-      _satb_qset.flush_queue(ShenandoahThreadLocalData::satb_mark_queue(thread));\n-    }\n+    \/\/ Transfer any partial buffer to the qset for completed buffer processing.\n+    _satb_qset.flush_queue(ShenandoahThreadLocalData::satb_mark_queue(thread));\n@@ -125,1 +121,1 @@\n-    Threads::threads_do(&flusher);\n+    Threads::possibly_parallel_threads_do(true \/* is_par *\/, &flusher);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahOldGeneration.cpp","additions":4,"deletions":8,"binary":false,"changes":12,"status":"modified"}]}