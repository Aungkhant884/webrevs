{"files":[{"patch":"@@ -2426,3 +2426,5 @@\n-  bool has_forwarded = has_forwarded_objects()? 1: 0;\n-  bool updating_or_evacuating = _gc_state.is_set(UPDATEREFS | EVACUATION)? 1: 0;\n-  assert (has_forwarded == updating_or_evacuating, \"Has forwarded objects iff updating or evacuating\");\n+  bool has_forwarded = has_forwarded_objects();\n+  bool updating_or_evacuating = _gc_state.is_set(UPDATEREFS | EVACUATION);\n+  bool evacuating = _gc_state.is_set(EVACUATION);\n+  assert ((has_forwarded == updating_or_evacuating) || (evacuating && !has_forwarded && collection_set()->is_empty()),\n+          \"Updating or evacuating iff has forwarded object, or evacuation phase is promoting in place without forwarding\");\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.cpp","additions":5,"deletions":3,"binary":false,"changes":8,"status":"modified"}]}