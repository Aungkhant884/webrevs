{"files":[{"patch":"@@ -180,1 +180,0 @@\n-    r->set_update_watermark(r->bottom());\n@@ -182,8 +181,10 @@\n-    \/\/ Any OLD region allocated during concurrent coalesce-and-fill does not need to be coalesced and filled because\n-    \/\/ all objects allocated within this region are above TAMS (and thus are implicitly marked).  In case this is an\n-    \/\/ OLD region and concurrent preparation for mixed evacuations visits this region before the start of the next\n-    \/\/ old-gen concurrent mark (i.e. this region is allocated following the start of old-gen concurrent mark but before\n-    \/\/ concurrent preparations for mixed evacuations are completed), we mark this region as not requiring any\n-    \/\/ coalesce-and-fill processing.  This code is only necessary if req.affiliation() is OLD, but harmless if not.\n-    r->end_preemptible_coalesce_and_fill();\n-    ctx->capture_top_at_mark_start(r);\n+    if (r->is_old()) {\n+      \/\/ Any OLD region allocated during concurrent coalesce-and-fill does not need to be coalesced and filled because\n+      \/\/ all objects allocated within this region are above TAMS (and thus are implicitly marked).  In case this is an\n+      \/\/ OLD region and concurrent preparation for mixed evacuations visits this region before the start of the next\n+      \/\/ old-gen concurrent mark (i.e. this region is allocated following the start of old-gen concurrent mark but before\n+      \/\/ concurrent preparations for mixed evacuations are completed), we mark this region as not requiring any\n+      \/\/ coalesce-and-fill processing.\n+      r->end_preemptible_coalesce_and_fill();\n+      _heap->clear_cards_for(r);\n+    }\n@@ -511,1 +512,0 @@\n-\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahFreeSet.cpp","additions":10,"deletions":10,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -572,2 +572,0 @@\n-  heap->clear_cards_for(this);\n-\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeapRegion.cpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"}]}