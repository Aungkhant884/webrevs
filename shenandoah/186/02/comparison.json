{"files":[{"patch":"@@ -142,1 +142,1 @@\n-  size_t smallest_group_span = _smallest_chunk_size_words * _regular_group_size;\n+  size_t smallest_group_span = smallest_chunk_size_words() * _regular_group_size;\n@@ -182,1 +182,1 @@\n-  size_t smallest_group_span = _smallest_chunk_size_words * _regular_group_size;\n+  size_t smallest_group_span = smallest_chunk_size_words() * _regular_group_size;\n@@ -219,1 +219,1 @@\n-        size_t chunk_span = _smallest_chunk_size_words;\n+        size_t chunk_span = smallest_chunk_size_words();\n@@ -252,2 +252,5 @@\n-  assert(_smallest_chunk_size_words == _clusters_in_smallest_chunk * CardTable::card_size_in_words()\n-         * ShenandoahCardCluster<ShenandoahDirectCardMarkRememberedSet>::CardsPerCluster, \"_smallest_chunk_size is not valid\");\n+#ifdef ASSERT\n+  size_t expected_chunk_size_words = _clusters_in_smallest_chunk * CardTable::card_size_in_words() * ShenandoahCardCluster<ShenandoahDirectCardMarkRememberedSet>::CardsPerCluster;\n+  assert(smallest_chunk_size_words() == expected_chunk_size_words, \"_smallest_chunk_size (\" SIZE_FORMAT\") is not valid because it does not equal (\" SIZE_FORMAT \")\",\n+         smallest_chunk_size_words(), expected_chunk_size_words);\n+#endif\n@@ -256,1 +259,1 @@\n-  assert(_smallest_chunk_size_words << (_maximum_groups - 1) == _maximum_chunk_size_words,\n+  assert(smallest_chunk_size_words() << (_maximum_groups - 1) == _maximum_chunk_size_words,\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahScanRemembered.cpp","additions":9,"deletions":6,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -1027,1 +1027,0 @@\n-  static const size_t _assumed_words_in_card = 64;\n@@ -1035,2 +1034,4 @@\n-  static const size_t _smallest_chunk_size_words = (_clusters_in_smallest_chunk * _assumed_words_in_card *\n-                                                    ShenandoahCardCluster<ShenandoahDirectCardMarkRememberedSet>::CardsPerCluster);\n+  static size_t smallest_chunk_size_words() {\n+      return _clusters_in_smallest_chunk * CardTable::card_size_in_words() *\n+             ShenandoahCardCluster<ShenandoahDirectCardMarkRememberedSet>::CardsPerCluster;\n+  }\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahScanRemembered.hpp","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"}]}