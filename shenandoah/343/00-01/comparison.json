{"files":[{"patch":"@@ -555,0 +555,4 @@\n+  \/\/ The mark-word has been copied from the original object. It can not be\n+  \/\/ inflating, because inflation can not be interrupted by a safepoint,\n+  \/\/ and after a safepoint, a Java thread would first have to successfully\n+  \/\/ evacuate the object before it could inflate the monitor.\n@@ -556,1 +560,5 @@\n-  if (!w.has_displaced_mark_helper()) {\n+  \/\/ It is possible that we have copied the object after another thread has\n+  \/\/ already successfully completed evacuation. While harmless (we would never\n+  \/\/ publish our copy), don't even attempt to modify the age when that\n+  \/\/ happens.\n+  if (!w.has_displaced_mark_helper() && !w.is_marked()) {\n@@ -569,0 +577,1 @@\n+  assert(!w.is_marked(), \"must not be forwarded\");\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.inline.hpp","additions":10,"deletions":1,"binary":false,"changes":11,"status":"modified"}]}