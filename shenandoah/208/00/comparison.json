{"files":[{"patch":"@@ -42,0 +42,1 @@\n+  ShenandoahHeap* _heap;\n@@ -45,1 +46,7 @@\n-    _ctx(ShenandoahHeap::heap()->marking_context()) {}\n+    _heap(ShenandoahHeap::heap()),\n+    _ctx(_heap->marking_context()) {}\n+\n+  void heap_region_do(ShenandoahHeapRegion* r) override {\n+    if (_heap->is_bitmap_slice_committed(r)) {\n+      _ctx->clear_bitmap(r);\n+    }\n@@ -47,1 +54,0 @@\n-  void heap_region_do(ShenandoahHeapRegion* r) {\n@@ -56,1 +62,1 @@\n-  bool is_thread_safe() { return true; }\n+  bool is_thread_safe() override { return true; }\n@@ -212,3 +218,4 @@\n-  \/\/ Reset mark bitmap for this generation (typically young)\n-  reset_mark_bitmap();\n-  \/\/ Capture Top At Mark Start for this generation (typically young)\n+  \/\/ Invalidate the marking context\n+  set_mark_incomplete();\n+\n+  \/\/ Capture Top At Mark Start for this generation (typically young) and reset mark bitmap.\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGeneration.cpp","additions":13,"deletions":6,"binary":false,"changes":19,"status":"modified"}]}