{"files":[{"patch":"@@ -46,0 +46,1 @@\n+  FLAG_SET_ERGO(RegisterReferences, false);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/mode\/shenandoahGenerationalMode.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -188,1 +188,1 @@\n-      if (_preemption_requested.try_unset() || _requested_gc_cause == GCCause::_shenandoah_concurrent_gc) {\n+      if (_preemption_requested.is_set() || _requested_gc_cause == GCCause::_shenandoah_concurrent_gc) {\n@@ -603,1 +603,1 @@\n-    assert(_requested_gc_cause == GCCause::_shenandoah_concurrent_gc, \"Should be normal concurrent young gc.\");\n+    _preemption_requested.unset();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahControlThread.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -26,0 +26,2 @@\n+\n+#include \"gc\/shenandoah\/shenandoahGeneration.hpp\"\n@@ -85,7 +87,10 @@\n-      \/\/ HEY! Update visualizer to render concurrent old marking\n-      if (heap->is_concurrent_mark_in_progress())      status |= 1 << 0;\n-      if (heap->is_evacuation_in_progress())           status |= 1 << 1;\n-      if (heap->is_update_refs_in_progress())          status |= 1 << 2;\n-      if (heap->is_gc_generation_young())              status |= 1 << 3;\n-      if (heap->is_degenerated_gc_in_progress())       status |= 1 << 4;\n-      if (heap->is_full_gc_in_progress())              status |= 1 << 5;\n+\n+      if (heap->is_concurrent_young_mark_in_progress()) status |= 1 << 0;\n+      if (heap->is_concurrent_old_mark_in_progress())   status |= 1 << 1;\n+      if (heap->is_evacuation_in_progress())            status |= 1 << 2;\n+      if (heap->is_update_refs_in_progress())           status |= 1 << 3;\n+      if (heap->is_degenerated_gc_in_progress())        status |= 1 << 4;\n+      if (heap->is_full_gc_in_progress())               status |= 1 << 5;\n+      if (heap->active_generation() != NULL) {\n+        status |= (heap->active_generation()->generation_mode() << 6);\n+      }\n@@ -117,1 +122,0 @@\n-\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeapRegionCounters.cpp","additions":12,"deletions":8,"binary":false,"changes":20,"status":"modified"}]}