{"files":[{"patch":"@@ -369,1 +369,1 @@\n-  ShenandoahMessageBuffer msg(\"Must ba at a Shenandoah safepoint or held %s lock\", lock->name());\n+  ShenandoahMessageBuffer msg(\"Must be at a Shenandoah safepoint or held %s lock\", lock->name());\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahAsserts.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -260,2 +260,1 @@\n-  shenandoah_assert_heaplocked();\n-  _used += bytes;\n+  Atomic::add(&_used, bytes);\n@@ -265,1 +264,0 @@\n-  shenandoah_assert_heaplocked_or_safepoint();\n@@ -267,1 +265,1 @@\n-  _used -= bytes;\n+  Atomic::sub(&_used, bytes);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGeneration.cpp","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -49,1 +49,1 @@\n-  size_t _used;\n+  volatile size_t _used;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGeneration.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -506,0 +506,1 @@\n+  _cancel_requested_time(0),\n@@ -1757,0 +1758,1 @@\n+    _cancel_requested_time = os::elapsedTime();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.cpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -365,0 +365,1 @@\n+  double _cancel_requested_time;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -188,0 +188,6 @@\n+  if (_cancel_requested_time > 0) {\n+    double cancel_time = os::elapsedTime() - _cancel_requested_time;\n+    log_info(gc)(\"GC cancellation took %.3fs\", cancel_time);\n+    _cancel_requested_time = 0;\n+  }\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.inline.hpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -825,0 +825,1 @@\n+  assert(affiliation() == YOUNG_GENERATION, \"Only young regions can be promoted\");\n@@ -826,1 +827,2 @@\n-  UpdateCardValuesClosure update_card_values;\n+  heap->young_generation()->decrease_used(used());\n+  heap->old_generation()->increase_used(used());\n@@ -828,0 +830,1 @@\n+  UpdateCardValuesClosure update_card_values;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeapRegion.cpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"}]}