{"files":[{"patch":"@@ -138,0 +138,2 @@\n+\n+  size_t promo_expedite_threshold = (heap->young_generation()->max_capacity() * ShenandoahEvacReserve) \/ 512;\n@@ -139,1 +141,1 @@\n-  if (promo_potential > 0) {\n+  if (promo_potential > promo_expedite_threshold) {\n@@ -149,11 +151,0 @@\n-  size_t promo_in_place_potential = heap->get_promotion_in_place_potential();\n-  if (promo_in_place_potential > 0) {\n-    \/\/ Detect unsigned arithmetic underflow\n-    assert(promo_in_place_potential < heap->capacity(), \"Sanity\");\n-    log_info(gc)(\"Trigger (%s): expedite promotion in place of \" SIZE_FORMAT \"%s\",\n-                 _space_info->name(),\n-                 byte_size_in_proper_unit(promo_in_place_potential),\n-                 proper_unit_for_byte_size(promo_in_place_potential));\n-    return true;\n-  }\n-\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/heuristics\/shenandoahYoungHeuristics.cpp","additions":3,"deletions":12,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -1559,1 +1559,0 @@\n-    heap->clear_promotion_in_place_potential();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahFullGC.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -535,1 +535,0 @@\n-  size_t anticipated_promote_in_place_live = 0;\n@@ -537,1 +536,0 @@\n-  heap->clear_promotion_in_place_potential();\n@@ -624,1 +622,0 @@\n-          anticipated_promote_in_place_live += r->get_live_data_bytes();\n@@ -660,1 +657,0 @@\n-  heap->set_promotion_in_place_potential(anticipated_promote_in_place_live);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGeneration.cpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -88,6 +88,0 @@\n-  \/\/ A side effect performed by this function is to tally up the number of regions and\n-  \/\/ the number of live bytes that we plan to promote-in-place during the current GC cycle.\n-  \/\/ This information, which is stored with an invocation of heap->set_promotion_in_place_potential(),\n-  \/\/ feeds into subsequent decisions about when to trigger the next GC and may identify\n-  \/\/ special work to be done during this GC cycle if we choose to abbreviate it.\n-  \/\/\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGeneration.hpp","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -589,1 +589,0 @@\n-  _promotion_in_place_potential(0),\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -229,1 +229,0 @@\n-           size_t _promotion_in_place_potential;\n@@ -456,4 +455,0 @@\n-  inline void clear_promotion_in_place_potential() { _promotion_in_place_potential = 0; };\n-  inline void set_promotion_in_place_potential(size_t val) { _promotion_in_place_potential = val; };\n-  inline size_t get_promotion_in_place_potential() { return _promotion_in_place_potential; };\n-\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.hpp","additions":0,"deletions":5,"binary":false,"changes":5,"status":"modified"}]}