{"files":[{"patch":"@@ -318,0 +318,9 @@\n+void ShenandoahOldHeuristics::abandon_collection_candidates() {\n+  _old_collection_candidates = 0;\n+  _next_old_collection_candidate = 0;\n+  _hidden_old_collection_candidates = 0;\n+  _hidden_next_old_collection_candidate = 0;\n+  _old_coalesce_and_fill_candidates = 0;\n+  _first_coalesce_and_fill_candidate = 0;\n+}\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/heuristics\/shenandoahOldHeuristics.cpp","additions":9,"deletions":0,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -103,0 +103,4 @@\n+  \/\/ If a GLOBAL gc occurs, it will collect the entire heap which invalidates any collection candidates being\n+  \/\/ held by this heuristic for supplying mixed collections.\n+  void abandon_collection_candidates();\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/heuristics\/shenandoahOldHeuristics.hpp","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -85,1 +85,1 @@\n-  void prepare_gc();\n+  virtual void prepare_gc();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGeneration.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -90,0 +90,9 @@\n+void ShenandoahGlobalGeneration::prepare_gc() {\n+  ShenandoahGeneration::prepare_gc();\n+\n+  ShenandoahHeap* heap = ShenandoahHeap::heap();\n+  if (heap->mode()->is_generational()) {\n+    heap->cancel_mixed_collections();\n+  }\n+}\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGlobalGeneration.cpp","additions":9,"deletions":0,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -45,0 +45,2 @@\n+  virtual void prepare_gc();\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahGlobalGeneration.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -897,0 +897,5 @@\n+void ShenandoahHeap::cancel_mixed_collections() {\n+  assert(_old_generation != NULL, \"Should only have mixed collections in generation mode.\");\n+  _old_heuristics->abandon_collection_candidates();\n+}\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -688,0 +688,1 @@\n+  void cancel_mixed_collections();\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"}]}