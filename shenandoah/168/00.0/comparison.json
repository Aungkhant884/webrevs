{"files":[{"patch":"@@ -159,13 +159,10 @@\n-      assert(_addr->is_valid(),      \"used\");\n-      assert(_cmp_value->is_valid(), \"used\");\n-      assert(_new_value->is_valid(), \"used\");\n-      if (_info)                    state->do_info(_info);\n-                                    state->do_input(_addr);\n-                                    state->do_temp(_addr);\n-                                    state->do_input(_cmp_value);\n-                                    state->do_temp(_cmp_value);\n-                                    state->do_input(_new_value);\n-                                    state->do_temp(_new_value);\n-      if (_tmp1->is_valid())        state->do_temp(_tmp1);\n-      if (_tmp2->is_valid())        state->do_temp(_tmp2);\n-      if (_result->is_valid())      state->do_output(_result);\n+    if (_info)                              state->do_info(_info);\n+    assert(_addr->is_valid(), \"used\");      state->do_input(_addr);\n+                                            state->do_temp(_addr);\n+    assert(_cmp_value->is_valid(), \"used\"); state->do_input(_cmp_value);\n+                                            state->do_temp(_cmp_value);\n+    assert(_new_value->is_valid(), \"used\"); state->do_input(_new_value);\n+                                            state->do_temp(_new_value);\n+    if (_tmp1->is_valid())                  state->do_temp(_tmp1);\n+    if (_tmp2->is_valid())                  state->do_temp(_tmp2);\n+    if (_result->is_valid())                state->do_output(_result);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/c1\/shenandoahBarrierSetC1.hpp","additions":10,"deletions":13,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -823,0 +823,5 @@\n+\n+bool ShenandoahBarrierSetC2::is_gc_pre_barrier_node(Node* node) const {\n+  return is_shenandoah_wb_pre_call(node);\n+}\n+\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/c2\/shenandoahBarrierSetC2.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -127,0 +127,1 @@\n+  virtual bool is_gc_pre_barrier_node(Node* node) const;\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/c2\/shenandoahBarrierSetC2.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -35,21 +35,2 @@\n-\n-static bool initialized;\n-static union {\n-  char stdoutmem[sizeof(LogStdoutOutput)];\n-  jlong dummy;\n-} aligned_stdoutmem;\n-static union {\n-  char stderrmem[sizeof(LogStderrOutput)];\n-  jlong dummy;\n-} aligned_stderrmem;\n-\n-LogStdoutOutput &StdoutLog = reinterpret_cast<LogStdoutOutput&>(aligned_stdoutmem.stdoutmem);\n-LogStderrOutput &StderrLog = reinterpret_cast<LogStderrOutput&>(aligned_stderrmem.stderrmem);\n-\n-LogFileStreamInitializer::LogFileStreamInitializer() {\n-  if (!initialized) {\n-    ::new (&StdoutLog) LogStdoutOutput();\n-    ::new (&StderrLog) LogStderrOutput();\n-    initialized = true;\n-  }\n-}\n+LogStdoutOutput* StdoutLog = nullptr;\n+LogStderrOutput* StderrLog = nullptr;\n","filename":"src\/hotspot\/share\/logging\/logFileStreamOutput.cpp","additions":3,"deletions":22,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,8 +34,0 @@\n-class LogFileStreamInitializer {\n- public:\n-  LogFileStreamInitializer();\n-};\n-\n-\/\/ Ensure the default log streams have been initialized (stdout, stderr) using the static initializer below\n-static LogFileStreamInitializer log_stream_initializer;\n-\n@@ -75,3 +67,0 @@\n-  LogStdoutOutput() : LogFileStreamOutput(stdout) {\n-    set_config_string(\"all=warning\");\n-  }\n@@ -82,0 +71,1 @@\n+  LogStdoutOutput() : LogFileStreamOutput(stdout) {}\n@@ -90,3 +80,0 @@\n-  LogStderrOutput() : LogFileStreamOutput(stderr) {\n-    set_config_string(\"all=off\");\n-  }\n@@ -97,0 +84,1 @@\n+  LogStderrOutput() : LogFileStreamOutput(stderr) {}\n@@ -102,2 +90,2 @@\n-extern LogStderrOutput &StderrLog;\n-extern LogStdoutOutput &StdoutLog;\n+extern LogStderrOutput* StderrLog;\n+extern LogStdoutOutput* StdoutLog;\n","filename":"src\/hotspot\/share\/logging\/logFileStreamOutput.hpp","additions":5,"deletions":17,"binary":false,"changes":22,"status":"modified"}]}