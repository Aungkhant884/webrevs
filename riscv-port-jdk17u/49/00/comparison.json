{"files":[{"patch":"@@ -1299,2 +1299,14 @@\n-  Label Done;\n-  fsflags(zr);\n+  Label Done, Compare;\n+\n+  is_double ? fclass_d(t0, src1)\n+            : fclass_s(t0, src1);\n+  is_double ? fclass_d(t1, src2)\n+            : fclass_s(t1, src2);\n+  orr(t0, t0, t1);\n+  andi(t0, t0, 0b1100000000); \/\/if src1 or src2 is quiet or signaling NaN then return NaN\n+  beqz(t0, Compare);\n+  is_double ? fadd_d(dst, src1, src2)\n+            : fadd_s(dst, src1, src2);\n+  j(Done);\n+\n+  bind(Compare);\n@@ -1304,2 +1316,0 @@\n-    \/\/ Checking NaNs\n-    flt_d(zr, src1, src2);\n@@ -1309,2 +1319,0 @@\n-    \/\/ Checking NaNs\n-    flt_s(zr, src1, src2);\n@@ -1313,7 +1321,0 @@\n-  frflags(t0);\n-  beqz(t0, Done);\n-\n-  \/\/ In case of NaNs\n-  is_double ? fadd_d(dst, src1, src2)\n-            : fadd_s(dst, src1, src2);\n-\n","filename":"src\/hotspot\/cpu\/riscv\/c2_MacroAssembler_riscv.cpp","additions":14,"deletions":13,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -7203,1 +7203,1 @@\n-instruct maxF_reg_reg(fRegF dst, fRegF src1, fRegF src2) %{\n+instruct maxF_reg_reg(fRegF dst, fRegF src1, fRegF src2, rFlagsReg cr) %{\n@@ -7205,1 +7205,1 @@\n-  effect(TEMP_DEF dst);\n+  effect(TEMP_DEF dst, KILL cr);\n@@ -7219,1 +7219,1 @@\n-instruct minF_reg_reg(fRegF dst, fRegF src1, fRegF src2) %{\n+instruct minF_reg_reg(fRegF dst, fRegF src1, fRegF src2, rFlagsReg cr) %{\n@@ -7221,1 +7221,1 @@\n-  effect(TEMP_DEF dst);\n+  effect(TEMP_DEF dst, KILL cr);\n@@ -7235,1 +7235,1 @@\n-instruct maxD_reg_reg(fRegD dst, fRegD src1, fRegD src2) %{\n+instruct maxD_reg_reg(fRegD dst, fRegD src1, fRegD src2, rFlagsReg cr) %{\n@@ -7237,1 +7237,1 @@\n-  effect(TEMP_DEF dst);\n+  effect(TEMP_DEF dst, KILL cr);\n@@ -7251,1 +7251,1 @@\n-instruct minD_reg_reg(fRegD dst, fRegD src1, fRegD src2) %{\n+instruct minD_reg_reg(fRegD dst, fRegD src1, fRegD src2, rFlagsReg cr) %{\n@@ -7253,1 +7253,1 @@\n-  effect(TEMP_DEF dst);\n+  effect(TEMP_DEF dst, KILL cr);\n","filename":"src\/hotspot\/cpu\/riscv\/riscv.ad","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"}]}