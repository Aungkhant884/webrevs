{"files":[{"patch":"@@ -2567,1 +2567,1 @@\n-            if (rows == null) {\n+            if (rows == null || rows.length == 0) {\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/TableView.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2928,1 +2928,1 @@\n-            if (rows == null) {\n+            if (rows == null || rows.length == 0) {\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/TreeTableView.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -5944,0 +5944,29 @@\n+    \/\/ See JDK-8089280\n+    @Test\n+    public void testSuppressHorizontalScrollBar() {\n+        TableView<String> table = new TableView<>();\n+        for (int i = 0; i < 10; i++) {\n+            final TableColumn<String, String> c = new TableColumn<>(\"C\" + i);\n+            c.setCellValueFactory(value -> new SimpleStringProperty(value.getValue()));\n+            c.setMinWidth(200); \/\/ caused HSB before the fix\n+            table.getColumns().add(c);\n+        }\n+\n+        for (int i = 0; i < 10; i++) {\n+            table.getItems().add(\"\");\n+        }\n+\n+        stageLoader = new StageLoader(new Scene(table, 50, 50));\n+\n+        ScrollBar hbar = VirtualFlowTestUtils.getVirtualFlowHorizontalScrollbar(table);\n+        assertTrue(hbar.isVisible());\n+\n+        table.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);\n+\n+        Toolkit.getToolkit().firePulse();\n+\n+        hbar = VirtualFlowTestUtils.getVirtualFlowHorizontalScrollbar(table);\n+        assertFalse(hbar.isVisible()); \/\/ used to fail here\n+    }\n+\n+\n@@ -5967,1 +5996,1 @@\n-    \/\/ See JDK-8089280\n+    \/\/ See JDK-8138842\n@@ -5969,12 +5998,2 @@\n-    public void testSuppressHorizontalScrollBar() {\n-        TableView<String> table = new TableView<>();\n-        for (int i = 0; i < 10; i++) {\n-            final TableColumn<String, String> c = new TableColumn<>(\"C\" + i);\n-            c.setCellValueFactory(value -> new SimpleStringProperty(value.getValue()));\n-            c.setMinWidth(200); \/\/ caused HSB before the fix\n-            table.getColumns().add(c);\n-        }\n-\n-        for (int i = 0; i < 10; i++) {\n-            table.getItems().add(\"\");\n-        }\n+    public void testFirstRowSelectionWithEmptyArrayAsParameter() {\n+        table.getItems().addAll(\"1\", \"2\", \"3\");\n@@ -5982,4 +6001,2 @@\n-        stageLoader = new StageLoader(new Scene(table, 50, 50));\n-\n-        ScrollBar hbar = VirtualFlowTestUtils.getVirtualFlowHorizontalScrollbar(table);\n-        assertTrue(hbar.isVisible());\n+        table.getSelectionModel().selectIndices(0, new int[0]);\n+        assertEquals(0, table.getSelectionModel().getSelectedIndex());\n@@ -5987,3 +6004,2 @@\n-        table.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);\n-\n-        Toolkit.getToolkit().firePulse();\n+        table.getSelectionModel().selectIndices(1, new int[0]);\n+        assertEquals(1, table.getSelectionModel().getSelectedIndex());\n@@ -5991,2 +6007,2 @@\n-        hbar = VirtualFlowTestUtils.getVirtualFlowHorizontalScrollbar(table);\n-        assertFalse(hbar.isVisible()); \/\/ used to fail here\n+        table.getSelectionModel().selectIndices(1, new int[]{1, 2});\n+        assertEquals(2, table.getSelectionModel().getSelectedIndex());\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/TableViewTest.java","additions":38,"deletions":22,"binary":false,"changes":60,"status":"modified"},{"patch":"@@ -7180,0 +7180,20 @@\n+\n+    \/\/ See JDK-8138842\n+    @Test\n+    public void testFirstRowSelectionWithEmptyArrayAsParameter() {\n+        treeTableView.setRoot(new TreeItem(\"Root\"));\n+        treeTableView.getRoot().setExpanded(true);\n+        for (int i = 0; i < 4; i++) {\n+            TreeItem parent = new TreeItem(\"item - \" + i);\n+            treeTableView.getRoot().getChildren().add(parent);\n+        }\n+\n+        treeTableView.getSelectionModel().selectIndices(0, new int[0]);\n+        assertEquals(0, treeTableView.getSelectionModel().getSelectedIndex());\n+\n+        treeTableView.getSelectionModel().selectIndices(1, new int[0]);\n+        assertEquals(1, treeTableView.getSelectionModel().getSelectedIndex());\n+\n+        treeTableView.getSelectionModel().selectIndices(1, new int[]{1, 2});\n+        assertEquals(2, treeTableView.getSelectionModel().getSelectedIndex());\n+    }\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/TreeTableViewTest.java","additions":20,"deletions":0,"binary":false,"changes":20,"status":"modified"}]}