{"files":[{"patch":"@@ -43,0 +43,1 @@\n+import com.sun.glass.ui.Screen;\n@@ -44,0 +45,3 @@\n+import com.sun.javafx.stage.WindowHelper;\n+import com.sun.javafx.tk.TKStage;\n+import com.sun.javafx.tk.quantum.WindowStage;\n@@ -880,0 +884,21 @@\n+    private Screen getScreen() {\n+        Scene scene = (Scene) getAttribute(SCENE);\n+        if (scene == null || scene.getWindow() == null) return null;\n+        TKStage tkStage = WindowHelper.getPeer(scene.getWindow());\n+        if (!(tkStage instanceof WindowStage)) return null;\n+        WindowStage windowStage = (WindowStage) tkStage;\n+        if (windowStage.getPlatformWindow() == null) return null;\n+        return windowStage.getPlatformWindow().getScreen();\n+    }\n+\n+    float[] getPlatformBounds(float x, float y, float w, float h) {\n+        float[] platformBounds = new float[] { x, y, w, h };\n+        Screen screen = getScreen();\n+        if (screen == null) return platformBounds;\n+        platformBounds[0] = screen.toPlatformX(x);\n+        platformBounds[1] = screen.toPlatformY(y);\n+        platformBounds[2] = (float) Math.ceil(w * screen.getPlatformScaleX());\n+        platformBounds[3] = (float) Math.ceil(h * screen.getPlatformScaleY());\n+        return platformBounds;\n+    }\n+\n@@ -890,2 +915,4 @@\n-            return new float[] {(float)bounds.getMinX(), (float)bounds.getMinY(),\n-                                (float)bounds.getWidth(), (float)bounds.getHeight()};\n+            return getPlatformBounds((float) bounds.getMinX(),\n+                                     (float) bounds.getMinY(),\n+                                     (float) bounds.getWidth(),\n+                                     (float) bounds.getHeight());\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/win\/WinAccessible.java","additions":29,"deletions":2,"binary":false,"changes":31,"status":"modified"},{"patch":"@@ -329,4 +329,10 @@\n-                result[index++] = b.getMinX();\n-                result[index++] = b.getMinY();\n-                result[index++] = b.getWidth();\n-                result[index++] = b.getHeight();\n+                float[] platformBounds = accessible.getPlatformBounds(\n+                        (float) b.getMinX(),\n+                        (float) b.getMinY(),\n+                        (float) b.getWidth(),\n+                        (float) b.getHeight());\n+\n+                result[index++] = platformBounds[0];\n+                result[index++] = platformBounds[1];\n+                result[index++] = platformBounds[2];\n+                result[index++] = platformBounds[3];\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/win\/WinTextRangeProvider.java","additions":10,"deletions":4,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -58,1 +58,1 @@\n-class WindowStage extends GlassStage {\n+public class WindowStage extends GlassStage {\n@@ -242,1 +242,1 @@\n-    final Window getPlatformWindow() {\n+    public final Window getPlatformWindow() {\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/tk\/quantum\/WindowStage.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}