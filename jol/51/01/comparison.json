{"files":[{"patch":"@@ -104,1 +104,1 @@\n-            return new ClassData(o, klass.getName(), klass.getComponentType().getName(), arrayLength(o));\n+            return new ClassData(o, ClassUtils.jvmName(klass), ClassUtils.jvmName(klass.getComponentType()), arrayLength(o));\n@@ -107,1 +107,1 @@\n-        ClassData cd = new ClassData(o, klass.getName());\n+        ClassData cd = new ClassData(o, ClassUtils.jvmName(klass));\n@@ -123,1 +123,1 @@\n-            cd.addSuperClass(ClassUtils.getSafeName(klass));\n+            cd.addSuperClass(ClassUtils.humanReadableName(klass));\n","filename":"jol-core\/src\/main\/java\/org\/openjdk\/jol\/info\/ClassData.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -28,1 +28,0 @@\n-import org.openjdk.jol.util.ObjectUtils;\n@@ -30,1 +29,0 @@\n-import org.openjdk.jol.vm.VM;\n@@ -76,1 +74,1 @@\n-                ClassUtils.getSafeName(field.getDeclaringClass()),\n+                ClassUtils.humanReadableName(field.getDeclaringClass()),\n@@ -78,1 +76,1 @@\n-                ClassUtils.getSafeName(field.getType()),\n+                ClassUtils.humanReadableName(field.getType()),\n","filename":"jol-core\/src\/main\/java\/org\/openjdk\/jol\/info\/FieldData.java","additions":2,"deletions":4,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -27,0 +27,1 @@\n+import org.openjdk.jol.util.ClassUtils;\n@@ -85,1 +86,1 @@\n-            sb.append(String.format(\"%s@%xd\", root.getClass().getName(), System.identityHashCode(root)));\n+            sb.append(String.format(\"%s@%xd\", ClassUtils.humanReadableName(root.getClass()), System.identityHashCode(root)));\n@@ -341,1 +342,1 @@\n-            pw.printf(\" %9d %9d %9d   %s%n\", count, size \/ count, size, key.getName());\n+            pw.printf(\" %9d %9d %9d   %s%n\", count, size \/ count, size, ClassUtils.humanReadableName(key));\n@@ -363,1 +364,1 @@\n-            typeLen = Math.max(typeLen, r.klass().getName().length());\n+            typeLen = Math.max(typeLen, ClassUtils.humanReadableName(r.klass()).length());\n@@ -379,1 +380,1 @@\n-            pw.printf(\" %16x %10d %-\" + typeLen + \"s %-30s %s%n\", addr, size, record.klass().getName(), record.path(), ObjectUtils.safeToString(record.obj()));\n+            pw.printf(\" %16x %10d %-\" + typeLen + \"s %-30s %s%n\", addr, size, ClassUtils.humanReadableName(record.klass()), record.path(), ObjectUtils.safeToString(record.obj()));\n","filename":"jol-core\/src\/main\/java\/org\/openjdk\/jol\/info\/GraphLayout.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -85,1 +85,5 @@\n-    public static String getSafeName(Class klass) {\n+    public static String jvmName(Class<?> klass) {\n+        return klass.getName();\n+    }\n+\n+    public static String humanReadableName(Class<?> klass) {\n@@ -87,3 +91,2 @@\n-        \/\/ getCanonicalName() returns proper string, unless it is hits the bug.\n-        \/\/ If it fails, then we will fall back to getName()\n-        \/\/   https:\/\/bugs.openjdk.java.net\/browse\/JDK-8057919\n+        \/\/ getCanonicalName() returns proper string, unless the class does not have any.\n+        \/\/ If it fails, then we will fall back to getName() and translation to human form.\n@@ -98,1 +101,1 @@\n-        return klass.getName();\n+        return binaryToHuman(klass.getName());\n","filename":"jol-core\/src\/main\/java\/org\/openjdk\/jol\/util\/ClassUtils.java","additions":8,"deletions":5,"binary":false,"changes":13,"status":"modified"}]}