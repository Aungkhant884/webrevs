{"files":[{"patch":"@@ -297,1 +297,1 @@\n-        out.println(\"# Running \" + (addressSize * 8) + \"-bit HotSpot VM.\");\n+        out.println(\"# VM mode: \" + (addressSize * 8) + \" bits\");\n@@ -300,1 +300,1 @@\n-            out.println(\"# Lilliput VM detected (experimental).\");\n+            out.println(\"# Lilliput VM detected (experimental)\");\n@@ -303,0 +303,1 @@\n+        out.print(\"# Compressed references (oops): \");\n@@ -304,0 +305,1 @@\n+            out.print(narrowOopShift + \"-bit shift\");\n@@ -305,5 +307,1 @@\n-                out.println(\"# Using compressed oop with \" +\n-                        formatAddressAsHexByAddressSize(narrowOopBase) + \" base address and \" +\n-                        narrowOopShift + \"-bit shift.\");\n-            } else {\n-                out.println(\"# Using compressed oop with \" + narrowOopShift + \"-bit shift.\");\n+                out.print(\" and \" + formatAddressAsHexByAddressSize(narrowOopBase) + \" base\");\n@@ -311,0 +309,4 @@\n+        } else if (addressSize == 4){\n+            out.print(\"not needed\");\n+        } else {\n+            out.print(\"disabled\");\n@@ -312,0 +314,3 @@\n+        out.println();\n+\n+        out.print(\"# Compressed class pointers: \");\n@@ -313,0 +318,1 @@\n+            out.print(narrowKlassShift + \"-bit shift\");\n@@ -314,5 +320,1 @@\n-                out.println(\"# Using compressed klass with \" +\n-                        formatAddressAsHexByAddressSize(narrowKlassBase) + \" base address and \" +\n-                        narrowKlassShift + \"-bit shift.\");\n-            } else {\n-                out.println(\"# Using compressed klass with \" + narrowKlassShift + \"-bit shift.\");\n+                out.print(\" and \" + formatAddressAsHexByAddressSize(narrowKlassBase) + \" base\");\n@@ -320,0 +322,4 @@\n+        } else if (addressSize == 4) {\n+            out.print(\"not needed\");\n+        } else {\n+            out.print(\"disabled\");\n@@ -321,1 +327,3 @@\n-        if (!isAccurate && (compressedOopsEnabled || compressedKlassOopsEnabled)) {\n+        out.println();\n+\n+        if (addressSize != 4 && !isAccurate && (compressedOopsEnabled || compressedKlassOopsEnabled)) {\n@@ -327,1 +335,1 @@\n-        out.println(\"# Objects are \" + objectAlignment + \" bytes aligned.\");\n+        out.println(\"# Object alignment: \" + objectAlignment + \" bytes\");\n@@ -685,1 +693,1 @@\n-        return \"0x\" + String.format(\"%\" + (addressSize * 2) + \"s\",\n+        return \"0x\" + String.format(\"%s\",\n","filename":"jol-core\/src\/main\/java\/org\/openjdk\/jol\/vm\/HotspotUnsafe.java","additions":23,"deletions":15,"binary":false,"changes":38,"status":"modified"}]}