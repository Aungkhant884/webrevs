{"files":[{"patch":"@@ -71,1 +71,1 @@\n-        HeapDumpReader reader = new HeapDumpReader(new File(path));\n+        HeapDumpReader reader = new HeapDumpReader(new File(path), out);\n","filename":"jol-cli\/src\/main\/java\/org\/openjdk\/jol\/operations\/HeapDumpEstimates.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -67,1 +67,1 @@\n-        HeapDumpReader reader = new HeapDumpReader(new File(path));\n+        HeapDumpReader reader = new HeapDumpReader(new File(path), out);\n","filename":"jol-cli\/src\/main\/java\/org\/openjdk\/jol\/operations\/HeapDumpStats.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -90,1 +90,1 @@\n-            HeapDumpReader reader = new HeapDumpReader(new File(arg));\n+            HeapDumpReader reader = new HeapDumpReader(new File(arg), System.out);\n","filename":"jol-cli\/src\/main\/java\/org\/openjdk\/jol\/operations\/ObjectShapes.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -135,1 +135,1 @@\n-            HeapDumpReader reader = new HeapDumpReader(new File(path)) {\n+            HeapDumpReader reader = new HeapDumpReader(new File(path), null) {\n","filename":"jol-cli\/src\/main\/java\/org\/openjdk\/jol\/operations\/StringCompress.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -32,6 +32,1 @@\n-import java.io.BufferedInputStream;\n-import java.io.ByteArrayOutputStream;\n-import java.io.File;\n-import java.io.FileInputStream;\n-import java.io.IOException;\n-import java.io.InputStream;\n+import java.io.*;\n@@ -59,0 +54,1 @@\n+    private final PrintStream verboseOut;\n@@ -67,1 +63,1 @@\n-    public HeapDumpReader(File file) throws IOException {\n+    public HeapDumpReader(File file, PrintStream verboseOut) throws IOException {\n@@ -69,0 +65,1 @@\n+        this.verboseOut = verboseOut;\n@@ -114,0 +111,8 @@\n+        long lastPrint = 0L;\n+        final long printEach = 256 * 1024 * 1024;\n+\n+        if (verboseOut != null) {\n+            verboseOut.print(\"Read progress: \");\n+            verboseOut.flush();\n+        }\n+\n@@ -115,0 +120,5 @@\n+            if ((verboseOut != null) && (readBytes - lastPrint > printEach)) {\n+                verboseOut.print(readBytes \/ 1000 \/ 1000 + \"M... \");\n+                verboseOut.flush();\n+                lastPrint = readBytes;\n+            }\n@@ -162,0 +172,4 @@\n+        if (verboseOut != null) {\n+            verboseOut.println(\"DONE\");\n+        }\n+\n","filename":"jol-core\/src\/main\/java\/org\/openjdk\/jol\/heap\/HeapDumpReader.java","additions":21,"deletions":7,"binary":false,"changes":28,"status":"modified"}]}