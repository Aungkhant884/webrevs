{"files":[{"patch":"@@ -578,5 +578,0 @@\n-        \/**\n-         * Gets the value of the {@link #appearanceProperty() appearance} property.\n-         *\n-         * @return the platform appearance\n-         *\/\n@@ -595,5 +590,0 @@\n-        \/**\n-         * Gets the value of the {@link #backgroundColorProperty() backgroundColor} property.\n-         *\n-         * @return the background color\n-         *\/\n@@ -612,5 +602,0 @@\n-        \/**\n-         * Gets the value of the {@link #foregroundColorProperty() foregroundColor} property.\n-         *\n-         * @return the foreground color\n-         *\/\n@@ -629,5 +614,0 @@\n-        \/**\n-         * Gets the value of the {@link #accentColorProperty() accentColor} property.\n-         *\n-         * @return the accent color\n-         *\/\n@@ -637,1 +617,1 @@\n-         * Returns the {@link Integer} instance to which the specified key is mapped.\n+         * Returns the {@code Integer} instance to which the specified key is mapped.\n@@ -648,1 +628,1 @@\n-         * Returns the {@link Double} instance to which the specified key is mapped.\n+         * Returns the {@code Double} instance to which the specified key is mapped.\n@@ -659,1 +639,1 @@\n-         * Returns the {@link Boolean} instance to which the specified key is mapped.\n+         * Returns the {@code Boolean} instance to which the specified key is mapped.\n@@ -670,1 +650,1 @@\n-         * Returns the {@link String} instance to which the specified key is mapped.\n+         * Returns the {@code String} instance to which the specified key is mapped.\n@@ -681,1 +661,1 @@\n-         * Returns the {@link Color} instance to which the specified key is mapped.\n+         * Returns the {@code Color} instance to which the specified key is mapped.\n@@ -692,1 +672,1 @@\n-         * Returns the {@link Paint} instance to which the specified key is mapped.\n+         * Returns the {@code Paint} instance to which the specified key is mapped.\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/application\/Platform.java","additions":6,"deletions":26,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -77,0 +77,7 @@\n+static void call_update_preferences()\n+{\n+    if (platformSupport) {\n+        platformSupport->updatePreferences();\n+    }\n+}\n+\n@@ -192,1 +199,7 @@\n-    platformSupport = new PlatformSupport(env);\n+    platformSupport = new PlatformSupport(env, obj);\n+\n+    GtkSettings* settings = gtk_settings_get_default();\n+    if (settings != NULL) {\n+        g_signal_connect(G_OBJECT(settings), \"notify::gtk-theme-name\",\n+                         G_CALLBACK(call_update_preferences), NULL);\n+    }\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/GlassApplication.cpp","additions":14,"deletions":1,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -55,0 +55,3 @@\n+PlatformSupport::PlatformSupport(JNIEnv* env, jobject application)\n+    : env(env), application(env->NewGlobalRef(application)) {}\n+\n@@ -56,0 +59,2 @@\n+    env->DeleteGlobalRef(application);\n+\n@@ -87,4 +92,5 @@\n-    gchar* themeName;\n-    g_object_get(settings, \"gtk-theme-name\", &themeName, NULL);\n-    putString(env, prefs, \"GTK.theme_name\", themeName);\n-    g_object_unref(settings);\n+    if (settings != NULL) {\n+        gchar* themeName;\n+        g_object_get(settings, \"gtk-theme-name\", &themeName, NULL);\n+        putString(env, prefs, \"GTK.theme_name\", themeName);\n+    }\n@@ -95,5 +101,1 @@\n-void PlatformSupport::updatePreferences(jobject application) const {\n-    if (application == NULL) {\n-        return;\n-    }\n-\n+void PlatformSupport::updatePreferences() const {\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/PlatformSupport.cpp","additions":11,"deletions":9,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -33,1 +33,1 @@\n-    PlatformSupport(JNIEnv* env) : env(env) {}\n+    PlatformSupport(JNIEnv*, jobject);\n@@ -47,1 +47,1 @@\n-    void updatePreferences(jobject application) const;\n+    void updatePreferences() const;\n@@ -51,0 +51,1 @@\n+    jobject application;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/PlatformSupport.h","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"}]}