{"files":[{"patch":"@@ -180,1 +180,1 @@\n-        if (jobRunning || jobDone) {\n+        if (jobRunning || jobDone || jobCanceled) {\n@@ -255,1 +255,1 @@\n-        if (jobRunning || jobDone) {\n+        if (jobRunning || jobDone || jobCanceled) {\n@@ -815,0 +815,1 @@\n+    private boolean jobCanceled = false;\n@@ -850,1 +851,1 @@\n-        if (jobError || jobDone) {\n+        if (jobError || jobDone || jobCanceled) {\n@@ -870,1 +871,3 @@\n-            jobDone = true;\n+            if (!jobCanceled) {\n+                jobDone = true;\n+            }\n@@ -881,1 +884,3 @@\n-                jobDone = true;\n+                if (!jobCanceled) {\n+                    jobDone = true;\n+                }\n@@ -888,1 +893,3 @@\n-                jobDone = true;\n+                if (!jobCanceled) {\n+                    jobDone = true;\n+                }\n@@ -1069,1 +1076,1 @@\n-                while (newPageInfo == null && !jobDone && !jobError) {\n+                while (newPageInfo == null && !jobDone && !jobCanceled && !jobError) {\n@@ -1076,1 +1083,2 @@\n-            if (jobDone || jobError) {\n+            \/\/ Even if the jobDone is set to true (this is also done by 'endJob()'), we need to process the last page.\n+            if (jobDone && newPageInfo == null || jobCanceled || jobError) {\n@@ -1137,1 +1145,1 @@\n-            if (jobError || jobDone || !getPage(pageIndex)) {\n+            if (jobError || jobCanceled || jobDone && !getPage(pageIndex)) {\n@@ -1215,1 +1223,1 @@\n-                while (!pageDone && !jobDone && !jobError) {\n+                while (!pageDone && !jobDone && !jobCanceled && !jobError) {\n@@ -1232,1 +1240,1 @@\n-        if (jobRunning && !jobDone && !jobError) {\n+        if (jobRunning && !jobDone && !jobCanceled && !jobError) {\n@@ -1254,1 +1262,1 @@\n-        jobDone = true;\n+        jobCanceled = true;\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/prism\/j2d\/print\/J2DPrinterJob.java","additions":20,"deletions":12,"binary":false,"changes":32,"status":"modified"}]}