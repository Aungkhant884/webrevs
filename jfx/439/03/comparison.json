{"files":[{"patch":"@@ -2205,1 +2205,3 @@\n-    addNative(project, \"prismES2\")\n+    if (IS_INCLUDE_ES2) {\n+        addNative(project, \"prismES2\")\n+    }\n","filename":"build.gradle","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -44,0 +44,4 @@\n+def HOST_ARCH = getWinArch(ext.OS_ARCH)\n+def TARGET_ARCH = getWinArch(ext.TARGET_ARCH)\n+def IS_CROSS = HOST_ARCH != TARGET_ARCH\n+\n@@ -56,2 +60,2 @@\n-                        \"VCARCH\"     : IS_64 ? \"amd64\" : \"x86\",\n-                        \"SDKARCH\"    : IS_64 ? \"\/x64\" : \"\/x86\",\n+                        \"VCARCH\"     : IS_CROSS ? \"${HOST_ARCH}_${TARGET_ARCH}\" : TARGET_ARCH,\n+                        \"SDKARCH\"    : \"\/$TARGET_ARCH\",\n@@ -150,1 +154,1 @@\n-    msvcBinDir = \"$WINDOWS_VS_VSINSTALLDIR\/VC\/bin\/$CPU_BITS\"\n+    msvcBinDir = \"$WINDOWS_VS_VSINSTALLDIR\/VC\/bin\/$TARGET_ARCH\"\n@@ -158,1 +162,1 @@\n-    msvcBinDir = \"$msvcInstallDir\/bin\/Host${CPU_BITS}\/$CPU_BITS\"\n+    msvcBinDir = \"$msvcInstallDir\/bin\/Host${CPU_BITS}\/$TARGET_ARCH\"\n@@ -168,1 +172,1 @@\n-    winSdkBinDir += \"\/$CPU_BITS\"\n+    winSdkBinDir += \"\/$TARGET_ARCH\"\n@@ -174,1 +178,1 @@\n-        winSdkBinDir += \"\/$CPU_BITS\"\n+        winSdkBinDir += \"\/$TARGET_ARCH\"\n@@ -179,0 +183,3 @@\n+\/\/ Use rc from host system if it is not possible to run it from target system\n+def hostWinSdkBinDir = \"$WINDOWS_SDK_DIR\/Bin\/$WINDOWS_SDK_VERSION\/$HOST_ARCH\"\n+ext.RC = !isExecutable(RC) ? cygpath(\"$hostWinSdkBinDir\/rc.exe\") : RC\n@@ -189,1 +196,2 @@\n-ext.MC = cygpath(\"$winSdkBinDir\/mt.exe\")\n+\/\/ Use fxc from host system if it is not possible to run it from target system\n+ext.FXC = !isExecutable(FXC) ? cygpath(\"$hostWinSdkBinDir\/fxc.exe\") : FXC\n@@ -196,1 +204,1 @@\n-    msvcRedstDir = \"$WINDOWS_VS_VSINSTALLDIR\/VC\/Redist\/$CPU_BITS\"\n+    msvcRedstDir = \"$WINDOWS_VS_VSINSTALLDIR\/VC\/Redist\/$TARGET_ARCH\"\n@@ -200,1 +208,1 @@\n-        msvcRedstDir = \"$WINDOWS_VS_VSINSTALLDIR\/VC\/Redist\/MSVC\/$msvcRedistVer\/$CPU_BITS\"\n+        msvcRedstDir = \"$WINDOWS_VS_VSINSTALLDIR\/VC\/Redist\/MSVC\/$msvcRedistVer\/$TARGET_ARCH\"\n@@ -202,1 +210,1 @@\n-        msvcRedstDir = \"$WINDOWS_VS_VC_TOOLS_REDIST_DIR\/$CPU_BITS\"\n+        msvcRedstDir = \"$WINDOWS_VS_VC_TOOLS_REDIST_DIR\/$TARGET_ARCH\"\n@@ -206,1 +214,1 @@\n-def winSdkDllDir = \"$WINDOWS_VS_WINSDKDLLINSTALLDIR\/$CPU_BITS\"\n+def winSdkDllDir = \"$WINDOWS_VS_WINSDKDLLINSTALLDIR\/$TARGET_ARCH\"\n@@ -455,0 +463,17 @@\n+\n+String getWinArch(String arch) {\n+    switch (arch) {\n+        case \"aarch64\" : return \"arm64\"\n+        case \"amd64\" : return \"x64\"\n+        default: return arch\n+    }\n+}\n+\n+boolean isExecutable(String file) {\n+    try {\n+        Runtime.runtime.exec(file)\n+        return true\n+    } catch (IOException e) {\n+        return false\n+    }\n+}\n","filename":"buildSrc\/win.gradle","additions":36,"deletions":11,"binary":false,"changes":47,"status":"modified"}]}