{"files":[{"patch":"@@ -131,1 +131,1 @@\n-        notify_on_top( event->new_window_state & GDK_WINDOW_STATE_ABOVE);\n+        notify_on_top(event->new_window_state & GDK_WINDOW_STATE_ABOVE);\n@@ -569,1 +569,1 @@\n-        gtk_widget_show_all(gtk_widget);\n+        gtk_widget_show(gtk_widget);\n@@ -809,0 +809,3 @@\n+    const char* wm_name = gdk_x11_screen_get_window_manager_name(gdk_screen_get_default());\n+    wmanager = (g_strcmp0(\"Compiz\", wm_name) == 0) ? COMPIZ : UNKNOWN;\n+\n@@ -826,1 +829,5 @@\n-    gtk_window_set_focus_on_map(GTK_WINDOW(gtk_widget), FALSE);\n+\n+    if (wmanager != COMPIZ) {\n+        \/\/ Compiz doesn't like focus on map disabled\n+        gtk_window_set_focus_on_map(GTK_WINDOW(gtk_widget), FALSE);\n+    }\n@@ -955,3 +962,1 @@\n-\n-    \/\/ This is a Unity bug (which is not Ubuntu default anymore)\n-    if (!g_strcmp0(\"Compiz\", gdk_x11_screen_get_window_manager_name(gdk_screen_get_default()))) {\n+    if (wmanager != COMPIZ) {\n@@ -1009,0 +1014,8 @@\n+void WindowContextTop::process_state(GdkEventWindowState* event) {\n+    if (!map_received) {\n+        return;\n+    }\n+\n+    WindowContextBase::process_state(event);\n+}\n+\n@@ -1083,1 +1096,0 @@\n-\n@@ -1187,1 +1199,1 @@\n-        if (frame_type == TRANSPARENT) {\n+        if (frame_type == TRANSPARENT && wmanager == COMPIZ) {\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/glass_window.cpp","additions":20,"deletions":8,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -37,0 +37,5 @@\n+enum WindowManager {\n+    COMPIZ,\n+    UNKNOWN\n+};\n+\n@@ -274,0 +279,2 @@\n+\n+    WindowManager wmanager;\n@@ -278,0 +285,1 @@\n+    void process_state(GdkEventWindowState*);\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/glass_window.h","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"}]}