{"files":[{"patch":"@@ -73,2 +73,1 @@\n-    @Override\n-    protected native boolean _requestFocus(long ptr, int event);\n+    protected native boolean _requestFocus(long ptr, int event, long timeStamp);\n@@ -227,0 +226,5 @@\n+    @Override\n+    protected boolean _requestFocus(long ptr, int event) {\n+        return _requestFocus(ptr, event, System.currentTimeMillis());\n+    }\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/gtk\/GtkWindow.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -859,16 +859,4 @@\n-\n-        \/\/ walk backwards to find a blocker\n-        for (int i = activeWindows.size() - 1; i > 0; i--) {\n-            WindowStage window = activeWindows.get(i);\n-\n-            if (Modality.APPLICATION_MODAL == window.modality\n-                || (Modality.WINDOW_MODAL == window.modality && window.owner == this)) {\n-                window.setIconified(false);\n-                window.requestToFront();\n-                window.requestFocus();\n-                break;\n-            } else if (window == this) {\n-                \/\/ no need to continue if reached self\n-                break;\n-            }\n-        }\n+        WindowStage window = activeWindows.get(activeWindows.size() - 1);\n+        window.setIconified(false);\n+        window.requestToFront();\n+        window.requestFocus();\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/tk\/quantum\/WindowStage.java","additions":4,"deletions":16,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -267,1 +267,1 @@\n-  (JNIEnv * env, jobject obj, jlong ptr, jint focus)\n+  (JNIEnv * env, jobject obj, jlong ptr, jint focus, jlong timeStamp)\n@@ -274,1 +274,2 @@\n-    ctx->request_focus();\n+    ctx->request_focus(timeStamp);\n+\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/GlassWindow.cpp","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -1171,0 +1171,1 @@\n+\n@@ -1370,1 +1371,1 @@\n-void WindowContextTop::request_focus() {\n+void WindowContextTop::request_focus(long time_stamp) {\n@@ -1374,2 +1375,2 @@\n-    if (is_visible()) {\n-        gtk_window_present(GTK_WINDOW(gtk_widget));\n+    if (is_visible() && isEnabled()) {\n+        gtk_window_present_with_time(GTK_WINDOW(gtk_widget), time_stamp);\n@@ -1392,2 +1393,0 @@\n-    gtk_window_set_accept_focus(GTK_WINDOW(gtk_widget), (enabled) ? TRUE : FALSE);\n-\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/glass_window.cpp","additions":4,"deletions":5,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -121,1 +121,1 @@\n-    virtual void request_focus() = 0;\n+    virtual void request_focus(long) = 0;\n@@ -285,1 +285,1 @@\n-    void request_focus() {}\n+    void request_focus(long) {}\n@@ -332,1 +332,1 @@\n-    void request_focus() {}\n+    void request_focus(long) {}\n@@ -413,1 +413,1 @@\n-    void request_focus();\n+    void request_focus(long);\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/glass_window.h","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}