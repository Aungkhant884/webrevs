{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,1 +32,0 @@\n-import com.sun.javafx.scene.control.Properties;\n@@ -35,1 +34,0 @@\n-import javafx.collections.ListChangeListener;\n@@ -48,0 +46,3 @@\n+import com.sun.javafx.scene.control.ListenerHelper;\n+import com.sun.javafx.scene.control.Properties;\n+\n@@ -109,0 +110,2 @@\n+        ListenerHelper lh = ListenerHelper.get(this);\n+\n@@ -110,1 +113,1 @@\n-        control.getButtons().addListener((ListChangeListener<Node>) c -> {\n+        lh.addListChangeListener(control.getButtons(), (c) -> {\n@@ -118,2 +121,2 @@\n-        registerChangeListener(control.buttonOrderProperty(), e -> layoutButtons());\n-        registerChangeListener(control.buttonMinWidthProperty(), e -> resizeButtons());\n+        lh.addChangeListener(control.buttonOrderProperty(), (ev) -> layoutButtons());\n+        lh.addChangeListener(control.buttonMinWidthProperty(), (ev) -> resizeButtons());\n@@ -130,0 +133,12 @@\n+    @Override\n+    public void dispose() {\n+        if (getSkinnable() == null) {\n+            return;\n+        }\n+\n+        updateButtonListeners(getSkinnable().getButtons(), false);\n+        getChildren().remove(layout);\n+\n+        super.dispose();\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/ButtonBarSkin.java","additions":21,"deletions":6,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -165,1 +165,0 @@\n-                ButtonBar.class,\n@@ -170,2 +169,0 @@\n-                \/\/MenuButton.class,\n-                \/\/Pagination.class,\n@@ -173,3 +170,0 @@\n-                \/\/ScrollBar.class,\n-                \/\/ScrollPane.class,\n-                \/\/ @Ignore(\"8245145\")\n@@ -177,1 +171,0 @@\n-                \/\/SplitMenuButton.class,\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/skin\/SkinMemoryLeakTest.java","additions":0,"deletions":7,"binary":false,"changes":7,"status":"modified"}]}