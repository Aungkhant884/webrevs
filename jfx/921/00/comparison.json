{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -32,2 +32,0 @@\n-import com.sun.javafx.scene.control.Properties;\n-import com.sun.javafx.scene.control.behavior.BehaviorBase;\n@@ -36,1 +34,0 @@\n-import javafx.collections.ListChangeListener;\n@@ -49,0 +46,3 @@\n+import com.sun.javafx.scene.control.ListenerHelper;\n+import com.sun.javafx.scene.control.Properties;\n+\n@@ -110,0 +110,2 @@\n+        ListenerHelper lh = ListenerHelper.get(this);\n+\n@@ -111,1 +113,1 @@\n-        control.getButtons().addListener((ListChangeListener<Node>) c -> {\n+        lh.addListChangeListener(control.getButtons(), (c) -> {\n@@ -119,2 +121,2 @@\n-        registerChangeListener(control.buttonOrderProperty(), e -> layoutButtons());\n-        registerChangeListener(control.buttonMinWidthProperty(), e -> resizeButtons());\n+        lh.addChangeListener(control.buttonOrderProperty(), (ev) -> layoutButtons());\n+        lh.addChangeListener(control.buttonMinWidthProperty(), (ev) -> resizeButtons());\n@@ -131,0 +133,12 @@\n+    @Override\n+    public void dispose() {\n+        if (getSkinnable() == null) {\n+            return;\n+        }\n+\n+        updateButtonListeners(getSkinnable().getButtons(), false);\n+        getChildren().remove(layout);\n+\n+        super.dispose();\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/ButtonBarSkin.java","additions":21,"deletions":7,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -165,1 +165,1 @@\n-                ButtonBar.class,\n+                \/\/ButtonBar.class,\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/skin\/SkinMemoryLeakTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}