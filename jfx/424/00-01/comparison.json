{"files":[{"patch":"@@ -45,0 +45,1 @@\n+import static org.junit.Assert.assertTrue;\n@@ -51,0 +52,2 @@\n+    static Button toBeRemoved;\n+    static Group root;\n@@ -57,1 +60,8 @@\n-            startupLatch.countDown();\n+            toBeRemoved = new Button();\n+            root = new Group();\n+            root.getChildren().add(toBeRemoved);\n+            stage.setScene(new Scene(root));\n+            stage.setOnShown(l -> {\n+                Platform.runLater(() -> startupLatch.countDown());\n+            });\n+            stage.show();\n@@ -62,1 +72,1 @@\n-    public static void initFX() {\n+    public static void initFX() throws Exception {\n@@ -65,7 +75,1 @@\n-        try {\n-            if (!startupLatch.await(15, TimeUnit.SECONDS)) {\n-                fail(\"Timeout waiting for FX runtime to start\");\n-            }\n-        } catch (InterruptedException ex) {\n-            fail(\"Unexpected exception: \" + ex);\n-        }\n+        assertTrue(\"Timeout waiting for FX runtime to start\", startupLatch.await(15, TimeUnit.SECONDS));\n@@ -76,0 +80,4 @@\n+        Util.runAndWait(() -> {\n+            root.getChildren().clear();\n+            stage.hide();\n+        });\n@@ -77,16 +85,0 @@\n-            Parent toBeRemoved = new Button();\n-            Group root = new Group();\n-            root.getChildren().add(toBeRemoved);\n-            Util.runAndWait(() -> {\n-                stage.setScene(new Scene(root));\n-                stage.show();\n-            });\n-            try {\n-                Thread.sleep(100);\n-            } catch (InterruptedException e) {\n-                throw new RuntimeException(e);\n-            }\n-            Util.runAndWait(() -> {\n-                root.getChildren().clear();\n-                stage.close();\n-            });\n@@ -96,0 +88,1 @@\n+            root = null;\n@@ -102,1 +95,0 @@\n-            stage.hide();\n","filename":"tests\/system\/src\/test\/java\/test\/javafx\/scene\/StyleMemoryLeakTest.java","additions":18,"deletions":26,"binary":false,"changes":44,"status":"modified"}]}