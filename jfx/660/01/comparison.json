{"files":[{"patch":"@@ -894,7 +894,2 @@\n-                double vPixelValue;\n-                if (nodeHeight > 0.0) {\n-                    vPixelValue = vRange \/ nodeHeight;\n-                }\n-                else {\n-                    vPixelValue = 0.0;\n-                }\n+                double vPixelValue = vRange \/ (nodeHeight - contentHeight);\n+                vPixelValue = Double.isFinite(vPixelValue) ? vPixelValue : 0.0;\n@@ -926,8 +921,2 @@\n-                double hPixelValue;\n-                if (nodeWidth > 0.0) {\n-                    hPixelValue = hRange \/ nodeWidth;\n-                }\n-                else {\n-                    hPixelValue = 0.0;\n-                }\n-\n+                double hPixelValue = hRange \/ (nodeWidth - contentWidth);\n+                hPixelValue = Double.isFinite(hPixelValue) ? hPixelValue : 0.0;\n@@ -1002,0 +991,1 @@\n+            sdx = Double.isFinite(sdx) ? sdx : 0.0;\n@@ -1009,0 +999,1 @@\n+            sdy = Double.isFinite(sdy) ? sdy : 0.0;\n@@ -1183,0 +1174,1 @@\n+        minX = Double.isFinite(minX) ? minX : 0.0;\n@@ -1191,0 +1183,1 @@\n+        minY = Double.isFinite(minY) ? minY : 0.0;\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/ScrollPaneSkin.java","additions":8,"deletions":15,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -748,0 +748,5 @@\n+    @Test\n+    public void testScrollDeltaIsIndependentOfScrollPaneHeight() {\n+        var content = new Rectangle();\n+        content.setHeight(200);\n+        content.setWidth(100);\n@@ -749,0 +754,44 @@\n+        var scrollPane = new ScrollPane();\n+        scrollPane.setSkin(new ScrollPaneSkinMock(scrollPane));\n+        scrollPane.setContent(content);\n+        scrollPane.setPrefWidth(100);\n+        scrollPane.setPrefHeight(100);\n+\n+        Stage stage = new Stage();\n+        stage.setScene(new Scene(new Group(scrollPane), 500, 500));\n+        stage.show();\n+\n+        Event.fireEvent(content, new ScrollEvent(\n+            ScrollEvent.SCROLL,\n+            50, 50,\n+            50, 50,\n+            false, false, false, false, true, false,\n+            0.0, -10.0, 0.0, -10.0,\n+            ScrollEvent.HorizontalTextScrollUnits.NONE, 0.0,\n+            ScrollEvent.VerticalTextScrollUnits.NONE, 0.0,\n+            0, null));\n+\n+        double firstY = content.getLocalToSceneTransform().transform(0, 0).getY();\n+        scrollPane.setPrefHeight(150);\n+        scrollPane.setVvalue(0);\n+\n+        stage.close();\n+        stage = new Stage();\n+        stage.setScene(new Scene(new Group(scrollPane), 500, 500));\n+        stage.show();\n+\n+        Event.fireEvent(content, new ScrollEvent(\n+            ScrollEvent.SCROLL,\n+            50, 50,\n+            50, 50,\n+            false, false, false, false, true, false,\n+            0.0, -10.0, 0.0, -10.0,\n+            ScrollEvent.HorizontalTextScrollUnits.NONE, 0.0,\n+            ScrollEvent.VerticalTextScrollUnits.NONE, 0.0,\n+            0, null));\n+\n+        double secondY = content.getLocalToSceneTransform().transform(0, 0).getY();\n+        stage.close();\n+\n+        assertEquals(firstY, secondY, 0.001);\n+    }\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/skin\/ScrollPaneSkinTest.java","additions":50,"deletions":1,"binary":false,"changes":51,"status":"modified"}]}