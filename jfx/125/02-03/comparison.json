{"files":[{"patch":"@@ -838,5 +838,3 @@\n-            for (TreeTableColumn<S,?> tc : getColumns()) {\n-                int index = getVisibleLeafIndex(tc);\n-                if (index > -1) {\n-                    lastKnownColumnIndex.put(tc, index);\n-                }\n+            ObservableList<TreeTableColumn<S,?>> visibleLeafColumns = getVisibleLeafColumns();\n+            for( int index =0, max = visibleLeafColumns.size(); index<max; index++) {\n+                lastKnownColumnIndex.put(visibleLeafColumns.get(index), index);\n@@ -1793,0 +1791,5 @@\n+        final int indexHint = this.lastKnownColumnIndex.getOrDefault(column, -1);\n+        if (indexHint >= 0 && indexHint < getVisibleLeafColumns().size() &&\n+            getVisibleLeafColumns().get(indexHint) == column) {\n+            return indexHint;\n+        }\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/TreeTableView.java","additions":8,"deletions":5,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -384,0 +384,1 @@\n+            final Set<R> removeCells = new HashSet<>();\n@@ -396,1 +397,1 @@\n-                        children.remove(tableCell);\n+                        removeCells.add(tableCell);\n@@ -400,0 +401,2 @@\n+            \/\/ Batch Remove\n+            children.removeAll(removeCells);\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TableRowSkinBase.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -118,1 +118,0 @@\n-        flow.getVbar().addEventFilter(MouseEvent.MOUSE_PRESSED, ml);\n@@ -121,0 +120,2 @@\n+        final ScrollBar vbar = flow.getVbar();\n+        vbar.addEventFilter(MouseEvent.MOUSE_PRESSED, ml);\n@@ -122,2 +123,2 @@\n-        hbar.valueProperty().addListener(o -> flow.requestCellLayout());\n-        hbar.widthProperty().addListener(o -> flow.requestCellLayout());\n+        vbar.heightProperty().addListener(o -> requestCellLayout());\n+        hbar.widthProperty().addListener(o -> requestCellLayout());\n@@ -243,0 +244,4 @@\n+        requestCellLayout();\n+    }\n+\n+    private void requestCellLayout(){\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TableViewSkin.java","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -223,5 +223,3 @@\n-        super.updateChildren();\n-\n-        updateDisclosureNodeAndGraphic();\n-\n-        if (childrenDirty) {\n+        if (fixedCellSizeEnabled) {\n+            updateDisclosureNodeAndGraphic();\n+            super.updateChildren();\n@@ -229,7 +227,13 @@\n-            if (cells.isEmpty()) {\n-                getChildren().clear();\n-            } else {\n-                \/\/ TODO we can optimise this by only showing cells that are\n-                \/\/ visible based on the table width and the amount of horizontal\n-                \/\/ scrolling.\n-                getChildren().addAll(cells);\n+        } else {\n+            super.updateChildren();\n+            updateDisclosureNodeAndGraphic();\n+            if (childrenDirty) {\n+                childrenDirty = false;\n+                if (cells.isEmpty()) {\n+                    getChildren().clear();\n+                } else {\n+                    \/\/ TODO we can optimise this by only showing cells that are\n+                    \/\/ visible based on the table width and the amount of horizontal\n+                    \/\/ scrolling.\n+                    getChildren().addAll(cells);\n+                }\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TreeTableRowSkin.java","additions":16,"deletions":12,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -163,1 +163,0 @@\n-        flow.getVbar().addEventFilter(MouseEvent.MOUSE_PRESSED, ml);\n@@ -165,0 +164,2 @@\n+        final ScrollBar vbar = flow.getVbar();\n+        vbar.addEventFilter(MouseEvent.MOUSE_PRESSED, ml);\n@@ -166,2 +167,2 @@\n-        hbar.valueProperty().addListener(o -> flow.requestCellLayout());\n-        hbar.widthProperty().addListener(o -> flow.requestCellLayout());\n+        vbar.heightProperty().addListener(o -> requestCellLayout());\n+        hbar.widthProperty().addListener(o -> requestCellLayout());\n@@ -341,3 +342,1 @@\n-        if (getSkinnable().getFixedCellSize() > 0) {\n-            flow.requestCellLayout();\n-        }\n+        requestCellLayout();\n@@ -370,0 +369,6 @@\n+\n+    private void requestCellLayout(){\n+        if (getSkinnable().getFixedCellSize() > 0) {\n+            flow.requestCellLayout();\n+        }\n+    }\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TreeTableViewSkin.java","additions":11,"deletions":6,"binary":false,"changes":17,"status":"modified"}]}