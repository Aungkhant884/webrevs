{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2010, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2010, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,4 @@\n-import com.sun.javafx.scene.control.behavior.BehaviorBase;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n@@ -30,1 +33,0 @@\n-import javafx.collections.ListChangeListener;\n@@ -33,1 +35,0 @@\n-import javafx.scene.control.Button;\n@@ -40,0 +41,1 @@\n+import com.sun.javafx.scene.control.ListenerHelper;\n@@ -41,4 +43,1 @@\n-\n-import java.util.HashMap;\n-import java.util.List;\n-import java.util.Map;\n+import com.sun.javafx.scene.control.behavior.BehaviorBase;\n@@ -99,1 +98,0 @@\n-\/\/        control.setInputMap(behavior.getInputMap());\n@@ -101,1 +99,3 @@\n-        control.getPanes().addListener((ListChangeListener<TitledPane>) c -> {\n+        ListenerHelper lh = ListenerHelper.get(this);\n+\n+        lh.addListChangeListener(control.getPanes(), (c) -> {\n@@ -135,2 +135,5 @@\n-        registerChangeListener(getSkinnable().widthProperty(), e -> clipRect.setWidth(getSkinnable().getWidth()));\n-        registerChangeListener(getSkinnable().heightProperty(), e -> {\n+        lh.addChangeListener(getSkinnable().widthProperty(), (ev) -> {\n+            clipRect.setWidth(getSkinnable().getWidth());\n+        });\n+\n+        lh.addChangeListener(getSkinnable().heightProperty(), (ev) -> {\n@@ -143,1 +146,0 @@\n-\n@@ -151,2 +153,7 @@\n-    @Override public void dispose() {\n-        super.dispose();\n+    @Override\n+    public void dispose() {\n+        if (getSkinnable() == null) {\n+            return;\n+        }\n+\n+        removeTitledPaneListeners(getSkinnable().getPanes());\n@@ -157,0 +164,2 @@\n+\n+        super.dispose();\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/AccordionSkin.java","additions":24,"deletions":15,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -164,1 +164,1 @@\n-                Accordion.class,\n+                \/\/Accordion.class,\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/skin\/SkinMemoryLeakTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}