{"files":[{"patch":"@@ -28,0 +28,3 @@\n+import javafx.scene.AccessibleAttribute;\n+import javafx.scene.AccessibleRole;\n+\n@@ -347,0 +350,1 @@\n+        setAccessibleRole(AccessibleRole.CHECK_BOX_TREE_ITEM);\n@@ -482,0 +486,15 @@\n+\n+    \/** {@inheritDoc} *\/\n+    @Override public Object queryAccessibleAttribute(AccessibleAttribute attribute, Object... parameters) {\n+        switch (attribute) {\n+            case TOGGLE_STATE:\n+                int state = 0;\n+                if (checkBox.isIndeterminate()) {\n+                    state = 2;\n+                } else if (checkBox.isSelected()) {\n+                    state = 1;\n+                }\n+                return state;\n+            default: return super.queryAccessibleAttribute(attribute, parameters);\n+        }\n+    }\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/cell\/CheckBoxTreeCell.java","additions":19,"deletions":0,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -364,1 +364,7 @@\n-        NSAccessibilityRowRole(new AccessibleRole[] {AccessibleRole.LIST_ITEM, AccessibleRole.TABLE_ROW, AccessibleRole.TREE_ITEM, AccessibleRole.TREE_TABLE_ROW},\n+        NSAccessibilityRowRole(new AccessibleRole[] {\n+                AccessibleRole.LIST_ITEM,\n+                AccessibleRole.TABLE_ROW,\n+                AccessibleRole.TREE_ITEM,\n+                AccessibleRole.CHECK_BOX_TREE_ITEM,\n+                AccessibleRole.TREE_TABLE_ROW\n+            },\n@@ -486,1 +492,5 @@\n-        NSAccessibilityOutlineRowSubrole(new AccessibleRole[] { AccessibleRole.TREE_ITEM, AccessibleRole.TREE_TABLE_ROW },\n+        NSAccessibilityOutlineRowSubrole(new AccessibleRole[] {\n+                AccessibleRole.TREE_ITEM,\n+                AccessibleRole.CHECK_BOX_TREE_ITEM,\n+                AccessibleRole.TREE_TABLE_ROW\n+            },\n@@ -751,2 +761,3 @@\n-                if (role == AccessibleRole.TREE_ITEM || role == AccessibleRole.TREE_TABLE_ROW) {\n-                    AccessibleRole containerRole = role == AccessibleRole.TREE_ITEM ? AccessibleRole.TREE_VIEW : AccessibleRole.TREE_TABLE_VIEW;\n+                if (role == AccessibleRole.TREE_ITEM || role == AccessibleRole.CHECK_BOX_TREE_ITEM || role == AccessibleRole.TREE_TABLE_ROW) {\n+                    AccessibleRole containerRole = (role == AccessibleRole.TREE_ITEM || role == AccessibleRole.CHECK_BOX_TREE_ITEM) ?\n+                                                                                AccessibleRole.TREE_VIEW : AccessibleRole.TREE_TABLE_VIEW;\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/mac\/MacAccessible.java","additions":15,"deletions":4,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -302,1 +302,2 @@\n-                if (getAttribute(ROLE) == AccessibleRole.CHECK_BOX) {\n+                if (getAttribute(ROLE) == AccessibleRole.CHECK_BOX\n+                        || getAttribute(ROLE) == AccessibleRole.CHECK_BOX_TREE_ITEM) {\n@@ -309,1 +310,2 @@\n-                if (role == AccessibleRole.CHECK_BOX || role == AccessibleRole.TOGGLE_BUTTON) {\n+                if (role == AccessibleRole.CHECK_BOX || role == AccessibleRole.TOGGLE_BUTTON\n+                        || role == AccessibleRole.CHECK_BOX_TREE_ITEM) {\n@@ -434,0 +436,1 @@\n+                case CHECK_BOX_TREE_ITEM:\n@@ -480,0 +483,1 @@\n+            case CHECK_BOX_TREE_ITEM:\n@@ -533,0 +537,1 @@\n+            case CHECK_BOX_TREE_ITEM:\n@@ -631,0 +636,6 @@\n+            case CHECK_BOX_TREE_ITEM:\n+                impl = patternId == UIA_SelectionItemPatternId ||\n+                       patternId == UIA_ExpandCollapsePatternId ||\n+                       patternId == UIA_ScrollItemPatternId ||\n+                       patternId == UIA_TogglePatternId;\n+                break;\n@@ -916,0 +927,9 @@\n+            case UIA_ToggleToggleStatePropertyId: {\n+                AccessibleRole role = (AccessibleRole) getAttribute(ROLE);\n+                if (role == AccessibleRole.CHECK_BOX_TREE_ITEM) {\n+                    variant = new WinVariant();\n+                    variant.vt = WinVariant.VT_I4;\n+                    variant.lVal = get_ToggleState();\n+                }\n+                break;\n+            }\n@@ -1011,1 +1031,2 @@\n-        boolean treeCell = role == AccessibleRole.TREE_ITEM;\n+        boolean treeCell = (role == AccessibleRole.TREE_ITEM\n+                            || role == AccessibleRole.CHECK_BOX_TREE_ITEM);\n@@ -1372,0 +1393,1 @@\n+                case CHECK_BOX_TREE_ITEM:\n@@ -1565,0 +1587,3 @@\n+        if (getAttribute(ROLE) == AccessibleRole.CHECK_BOX_TREE_ITEM) {\n+            return (int)getAttribute(TOGGLE_STATE);\n+        }\n@@ -1891,0 +1916,1 @@\n+            case CHECK_BOX_TREE_ITEM:\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/win\/WinAccessible.java","additions":29,"deletions":3,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -340,0 +340,19 @@\n+    \/**\n+     * Returns toggle state of CheckBox of CheckBoxTreeItem.\n+     * <ul>\n+     * <li>Used by: CheckBoxTreeItem<\/li>\n+     * <li>Needs notify: yes <\/li>\n+     * <li>Return Type: {@link Integer}\n+     *   <ul>\n+     *    <li>2: Indeterminate state<\/li>\n+     *    <li>1: Checked state<\/li>\n+     *    <li>0: Unchecked state<\/li>\n+     *   <\/ul>\n+     * <\/li>\n+     * <li>Parameters: <\/li>\n+     * <\/ul>\n+     *\n+     * @since 21\n+     *\/\n+    TOGGLE_STATE(Integer.class),\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/scene\/AccessibleAttribute.java","additions":19,"deletions":0,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -742,0 +742,27 @@\n+     \/**\n+     * Check Box Tree Item role.\n+     * <p>\n+     * Attributes:\n+     * <ul>\n+     * <li> {@link AccessibleAttribute#TEXT} <\/li>\n+     * <li> {@link AccessibleAttribute#INDEX} <\/li>\n+     * <li> {@link AccessibleAttribute#SELECTED} <\/li>\n+     * <li> {@link AccessibleAttribute#EXPANDED} <\/li>\n+     * <li> {@link AccessibleAttribute#LEAF} <\/li>\n+     * <li> {@link AccessibleAttribute#DISCLOSURE_LEVEL} <\/li>\n+     * <li> {@link AccessibleAttribute#TREE_ITEM_COUNT} <\/li>\n+     * <li> {@link AccessibleAttribute#TREE_ITEM_AT_INDEX} <\/li>\n+     * <li> {@link AccessibleAttribute#TREE_ITEM_PARENT} <\/li>\n+     * <li> {@link AccessibleAttribute#TOGGLE_STATE} <\/li>\n+     * <\/ul>\n+     * Actions:\n+     * <ul>\n+     * <li> {@link AccessibleAction#EXPAND} <\/li>\n+     * <li> {@link AccessibleAction#COLLAPSE} <\/li>\n+     * <li> {@link AccessibleAction#REQUEST_FOCUS} <\/li>\n+     * <\/ul>\n+     *\n+     * @since 21\n+     *\/\n+    CHECK_BOX_TREE_ITEM,\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/scene\/AccessibleRole.java","additions":27,"deletions":0,"binary":false,"changes":27,"status":"modified"}]}