{"files":[{"patch":"@@ -3671,0 +3671,1 @@\n+            fullPDRTmpTargetWrapper.clear();\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/scene\/Scene.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -1033,0 +1033,41 @@\n+\n+    @Test public void testNoReferencesRemainToRemovedNodeAfterStartingFullDrag() {\n+        TilePane pane = new TilePane();\n+        pane.setMinSize(200, 200);\n+\n+        WeakReference<TilePane> ref = new WeakReference<>(pane);\n+\n+        Group root = new Group(pane);\n+        final Scene scene = new Scene(root, 400, 400);\n+        stage.setScene(scene);\n+\n+        pane.setOnDragDetected(event -> ((Node) event.getSource()).startFullDrag());\n+\n+        \/\/ Simulate a drag operation from the user\n+        SceneHelper.processMouseEvent(scene,\n+                MouseEventGenerator.generateMouseEvent(MouseEvent.MOUSE_PRESSED, 50, 50));\n+\n+        SceneHelper.processMouseEvent(scene,\n+                MouseEventGenerator.generateMouseEvent(MouseEvent.MOUSE_DRAGGED, 70, 70));\n+\n+        SceneHelper.processMouseEvent(scene,\n+                MouseEventGenerator.generateMouseEvent(MouseEvent.MOUSE_RELEASED, 50, 50));\n+\n+        root.getChildren().setAll(new StackPane());\n+\n+        \/\/ Generate a MOUSE_EXITED event for the removed node and a pulse as otherwise many unrelated Scene references\n+        \/\/ hang around to the removed node:\n+        SceneHelper.processMouseEvent(\n+                scene,\n+                new MouseEvent(\n+                        MouseEvent.MOUSE_EXITED, 50, 50, 50, 50, MouseButton.NONE, 0, false, false, false,\n+                        false, false, false, false, false, false, true, null\n+                )\n+        );\n+\n+        Toolkit.getToolkit().firePulse();\n+\n+        pane = null;\n+\n+        JMemoryBuddy.assertCollectable(ref);\n+    }\n","filename":"modules\/javafx.graphics\/src\/test\/java\/test\/javafx\/scene\/SceneTest.java","additions":41,"deletions":0,"binary":false,"changes":41,"status":"modified"}]}