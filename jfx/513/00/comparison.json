{"files":[{"patch":"@@ -373,2 +373,1 @@\n-                int ti = tableIndex;\n-                if (code < ti) {\n+                if (code < tableIndex) {\n@@ -378,1 +377,1 @@\n-                    if (code != ti) {\n+                    if (code != tableIndex) {\n@@ -383,1 +382,3 @@\n-                int oc = oldCode;\n+                if (tableIndex < 4096) {\n+                    int ti = tableIndex;\n+                    int oc = oldCode;\n@@ -385,4 +386,4 @@\n-                prefix[ti] = oc;\n-                suffix[ti] = initial[newSuffixIndex];\n-                initial[ti] = initial[oc];\n-                length[ti] = length[oc] + 1;\n+                    prefix[ti] = oc;\n+                    suffix[ti] = initial[newSuffixIndex];\n+                    initial[ti] = initial[oc];\n+                    length[ti] = length[oc] + 1;\n@@ -390,4 +391,5 @@\n-                ++tableIndex;\n-                if ((tableIndex == (1 << codeSize)) && (tableIndex < 4096)) {\n-                    ++codeSize;\n-                    codeMask = (1 << codeSize) - 1;\n+                    ++tableIndex;\n+                    if ((tableIndex == (1 << codeSize)) && (tableIndex < 4096)) {\n+                        ++codeSize;\n+                        codeMask = (1 << codeSize) - 1;\n+                    }\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/iio\/gif\/GIFImageLoader2.java","additions":14,"deletions":12,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+import com.sun.javafx.iio.gif.GIFImageLoader2;\n@@ -87,0 +88,7 @@\n+\n+    @Test\n+    public void testLoadAllFramesAnimatedGIF() throws ImageStorageException {\n+        String path = \"https:\/\/upload.wikimedia.org\/wikipedia\/commons\/2\/2c\/Rotating_earth_%28large%29.gif\";\n+        ImageFrame[] frames = ImageStorage.loadAll(path, null, 0, 0, true, 1.0f, true);\n+        assertEquals(44, frames.length);\n+    }\n","filename":"modules\/javafx.graphics\/src\/test\/java\/test\/com\/sun\/javafx\/iio\/ImageStorageTest.java","additions":8,"deletions":0,"binary":false,"changes":8,"status":"modified"}]}