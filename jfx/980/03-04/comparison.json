{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -805,1 +805,6 @@\n-                promptNode.setLayoutX(newX);\n+                if (newX > 0) {\n+                    promptNode.setLayoutX(newX);\n+                } else {\n+                    \/\/ Align to left when prompt text length is more than text field width\n+                    promptNode.setLayoutX(caretWidth \/ 2);\n+                }\n@@ -808,0 +813,6 @@\n+                \/\/ Update if there is space on the right\n+                if (newX + textNodeWidth <= textRight.get()) {\n+                    textTranslateX.set(newX);\n+                } else if (newX < 0 && oldX > 1) {\n+                    textTranslateX.set(caretWidth \/ 2);\n+                }\n@@ -809,1 +820,0 @@\n-            textTranslateX.set(newX);\n@@ -813,2 +823,0 @@\n-            newX = textRight.get() - textNodeWidth - caretWidth \/ 2;\n-            textTranslateX.set(newX);\n@@ -816,2 +824,16 @@\n-                promptNode.setLayoutX(textRight.get() - promptNode.getLayoutBounds().getWidth() -\n-                                      caretWidth \/ 2);\n+                double promptOldX = promptNode.getLayoutX();\n+                double promptNewX = textRight.get() - promptNode.getLayoutBounds().getWidth() - caretWidth \/ 2;\n+                if(promptNewX > promptOldX || promptNewX > 0) {\n+                    promptNode.setLayoutX(promptNewX);\n+                } else {\n+                    \/\/ Align to left when prompt text length is more than text field width\n+                    promptNode.setLayoutX(caretWidth \/ 2);\n+                }\n+            } else {\n+                newX = textRight.get() - textNodeWidth - caretWidth \/ 2;\n+                \/\/ Update if there is space on the right\n+                if (newX > oldX || newX > 0) {\n+                  textTranslateX.set(newX);\n+                } else if (newX < 0 && oldX > 1) {\n+                  textTranslateX.set(caretWidth \/ 2);\n+                }\n@@ -855,3 +877,1 @@\n-            if (delta > 0) {\n-                textTranslateX.set(textTranslateX.get() - delta);\n-            }\n+            textTranslateX.set(textTranslateX.get() - delta);\n@@ -861,5 +881,3 @@\n-            if (delta > 0) {\n-                textTranslateX.set(Math.max(textTranslateX.get() - delta,\n-                                            textRight.get() - textNode.getLayoutBounds().getWidth() -\n-                                            caretWidth \/ 2));\n-            }\n+            textTranslateX.set(Math.max(textTranslateX.get() - delta,\n+                                        textRight.get() - textNode.getLayoutBounds().getWidth() -\n+                                        caretWidth \/ 2));\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TextFieldSkin.java","additions":33,"deletions":15,"binary":false,"changes":48,"status":"modified"},{"patch":"@@ -590,1 +590,1 @@\n-        assertEquals(-(TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth())\/2, TextInputSkinShim.getTextTranslateX(txtField), 0.0);\n+        assertEquals(0, TextInputSkinShim.getTextTranslateX(txtField), 0.0);\n@@ -609,1 +609,1 @@\n-        assertEquals(-(TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth())\/4, TextInputSkinShim.getTextTranslateX(txtField), 0.0);\n+        assertEquals(0, TextInputSkinShim.getTextTranslateX(txtField), 0.0);\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/TextFieldTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}