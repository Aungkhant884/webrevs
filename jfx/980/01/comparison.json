{"files":[{"patch":"@@ -809,4 +809,1 @@\n-            \/\/ Update if there is space on the right\n-            if (newX + textNodeWidth <= textRight.get()) {\n-                textTranslateX.set(newX);\n-            }\n+            textTranslateX.set(newX);\n@@ -817,4 +814,1 @@\n-            \/\/ Update if there is space on the right\n-            if (newX > oldX || newX > 0) {\n-                textTranslateX.set(newX);\n-            }\n+            textTranslateX.set(newX);\n@@ -861,1 +855,3 @@\n-            textTranslateX.set(textTranslateX.get() - delta);\n+            if (delta > 0) {\n+                textTranslateX.set(textTranslateX.get() - delta);\n+            }\n@@ -865,3 +861,5 @@\n-            textTranslateX.set(Math.max(textTranslateX.get() - delta,\n-                                        textRight.get() - textNode.getLayoutBounds().getWidth() -\n-                                        caretWidth \/ 2));\n+            if (delta > 0) {\n+                textTranslateX.set(Math.max(textTranslateX.get() - delta,\n+                                            textRight.get() - textNode.getLayoutBounds().getWidth() -\n+                                            caretWidth \/ 2));\n+            }\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TextFieldSkin.java","additions":10,"deletions":12,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -53,0 +53,1 @@\n+import javafx.geometry.Pos;\n@@ -59,0 +60,2 @@\n+import javafx.scene.control.skin.TextFieldSkin;\n+import javafx.scene.control.skin.TextInputSkinShim;\n@@ -546,0 +549,62 @@\n+    \/**\n+     * test for JDK-8178368: Right alignment of text fields works incorrectly\n+     *\n+     * Here we test that text aligns as expected when text width is more than TextField width\n+     *\/\n+    @Test\n+    public void testTextFieldLeftAlignment() {\n+        initStage();\n+        txtField.setSkin(new TextFieldSkin(txtField));\n+        txtField.setText(\"A short text.\");\n+        txtField.setPrefColumnCount(20);\n+        txtField.setAlignment(Pos.BASELINE_LEFT);\n+\n+        root.getChildren().add(txtField);\n+        stage.show();\n+\n+        assertTrue(txtField.getWidth() > TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth());\n+        assertEquals(TextInputSkinShim.getTextTranslateX(txtField), 0, 0.0);\n+\n+        txtField.setText(\"This is a long text. this is  long text.\");\n+        assertTrue(txtField.getWidth() < TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth());\n+        assertEquals(0, TextInputSkinShim.getTextTranslateX(txtField), 0.0);\n+    }\n+\n+    @Test\n+    public void testTextFieldRightAlignment() {\n+        initStage();\n+        txtField.setSkin(new TextFieldSkin(txtField));\n+        txtField.setText(\"A short text.\");\n+        txtField.setPrefColumnCount(20);\n+        txtField.setAlignment(Pos.BASELINE_RIGHT);\n+\n+        root.getChildren().add(txtField);\n+        stage.show();\n+\n+        assertTrue(txtField.getWidth() > TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth());\n+        assertTrue(TextInputSkinShim.getTextTranslateX(txtField) > 0);\n+\n+        txtField.setText(\"This is a long text. this is  long text.\");\n+        assertTrue(txtField.getWidth() < TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth());\n+        assertEquals(-(TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth())\/2, TextInputSkinShim.getTextTranslateX(txtField), 0.0);\n+    }\n+\n+    @Test\n+    public void testTextFieldCenterAlignment() {\n+        initStage();\n+        txtField.setSkin(new TextFieldSkin(txtField));\n+        txtField.setText(\"A short text.\");\n+        txtField.setPrefColumnCount(20);\n+        txtField.setAlignment(Pos.BASELINE_CENTER);\n+\n+        root.getChildren().add(txtField);\n+        stage.show();\n+\n+        assertTrue(txtField.getWidth() > TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth());\n+        assertTrue(TextInputSkinShim.getTextTranslateX(txtField) > 0);\n+\n+        txtField.setText(\"This is a long text. this is  long text.\");\n+        assertTrue(txtField.getWidth() < TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth());\n+        assertEquals(-(TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth())\/4, TextInputSkinShim.getTextTranslateX(txtField), 0.0);\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/TextFieldTest.java","additions":65,"deletions":0,"binary":false,"changes":65,"status":"modified"}]}