{"files":[{"patch":"@@ -809,4 +809,1 @@\n-            \/\/ Update if there is space on the right\n-            if (newX + textNodeWidth <= textRight.get()) {\n-                textTranslateX.set(newX);\n-            }\n+            textTranslateX.set(newX);\n@@ -817,7 +814,1 @@\n-            \/\/ Update if there is space on the right\n-            if (newX > oldX || newX > 0) {\n-                textTranslateX.set(newX);\n-            }\n-            else {\n-                textTranslateX.set(caretWidth \/ 2);\n-            }\n+            textTranslateX.set(newX);\n@@ -864,1 +855,3 @@\n-            textTranslateX.set(textTranslateX.get() - delta);\n+            if (delta > 0) {\n+                textTranslateX.set(textTranslateX.get() - delta);\n+            }\n@@ -868,3 +861,5 @@\n-            textTranslateX.set(Math.max(textTranslateX.get() - delta,\n-                                        textRight.get() - textNode.getLayoutBounds().getWidth() -\n-                                        caretWidth \/ 2));\n+            if (delta > 0) {\n+                textTranslateX.set(Math.max(textTranslateX.get() - delta,\n+                                            textRight.get() - textNode.getLayoutBounds().getWidth() -\n+                                            caretWidth \/ 2));\n+            }\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TextFieldSkin.java","additions":10,"deletions":15,"binary":false,"changes":25,"status":"modified"},{"patch":"@@ -555,1 +555,20 @@\n-    public void testTextFieldAlignment() {\n+    public void testTextFieldLeftAlignment() {\n+        initStage();\n+        txtField.setSkin(new TextFieldSkin(txtField));\n+        txtField.setText(\"A short text.\");\n+        txtField.setPrefColumnCount(20);\n+        txtField.setAlignment(Pos.BASELINE_LEFT);\n+\n+        root.getChildren().add(txtField);\n+        stage.show();\n+\n+        assertTrue(txtField.getWidth() > TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth());\n+        assertEquals(TextInputSkinShim.getTextTranslateX(txtField), 0, 0.0);\n+\n+        txtField.setText(\"This is a long text. this is  long text.\");\n+        assertTrue(txtField.getWidth() < TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth());\n+        assertEquals(0, TextInputSkinShim.getTextTranslateX(txtField), 0.0);\n+    }\n+\n+    @Test\n+    public void testTextFieldRightAlignment() {\n@@ -565,2 +584,21 @@\n-        double oldX = TextInputSkinShim.getTextTranslateX(txtField);\n-        txtField.setText(\"This is a long text. this is a long text.\");\n+        assertTrue(txtField.getWidth() > TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth());\n+        assertTrue(TextInputSkinShim.getTextTranslateX(txtField) > 0);\n+\n+        txtField.setText(\"This is a long text. this is  long text.\");\n+        assertTrue(txtField.getWidth() < TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth());\n+        assertEquals(-(TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth())\/2, TextInputSkinShim.getTextTranslateX(txtField), 0.0);\n+    }\n+\n+    @Test\n+    public void testTextFieldCenterAlignment() {\n+        initStage();\n+        txtField.setSkin(new TextFieldSkin(txtField));\n+        txtField.setText(\"A short text.\");\n+        txtField.setPrefColumnCount(20);\n+        txtField.setAlignment(Pos.BASELINE_CENTER);\n+\n+        root.getChildren().add(txtField);\n+        stage.show();\n+\n+        assertTrue(txtField.getWidth() > TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth());\n+        assertTrue(TextInputSkinShim.getTextTranslateX(txtField) > 0);\n@@ -568,1 +606,3 @@\n-        assertNotEquals(oldX, TextInputSkinShim.getTextTranslateX(txtField));\n+        txtField.setText(\"This is a long text. this is  long text.\");\n+        assertTrue(txtField.getWidth() < TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth());\n+        assertEquals(-(TextInputSkinShim.getTextNode(txtField).getLayoutBounds().getWidth())\/4, TextInputSkinShim.getTextTranslateX(txtField), 0.0);\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/TextFieldTest.java","additions":44,"deletions":4,"binary":false,"changes":48,"status":"modified"}]}