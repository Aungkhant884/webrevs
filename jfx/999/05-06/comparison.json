{"files":[{"patch":"@@ -176,5 +176,1 @@\n-        int check = _initGTK(gtkVersion, gtkVersionVerbose, overrideUIScale);\n-\n-        if (check == INIT_VERSION_INCOMPATIBLE) {\n-            throw new UnsupportedOperationException(\"Incompatible GTK %d version.\".formatted(gtkVersion));\n-        }\n+        _initGTK(gtkVersion, gtkVersionVerbose, overrideUIScale);\n@@ -204,4 +200,1 @@\n-    @Native private static final int INIT_VERSION_INCOMPATIBLE = -1;\n-    @Native private static final int INIT_VERSION_OK = 1;\n-\n-    private static native int _initGTK(int version, boolean verbose, float overrideUIScale);\n+    private static native void _initGTK(int version, boolean verbose, float overrideUIScale);\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/gtk\/GtkApplication.java","additions":2,"deletions":9,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -33,0 +33,1 @@\n+#include <cstdio>\n@@ -98,1 +99,1 @@\n- * Signature: (IZ)I\n+ * Signature: (IZ)V\n@@ -100,1 +101,1 @@\n-JNIEXPORT jint JNICALL Java_com_sun_glass_ui_gtk_GtkApplication__1initGTK\n+JNIEXPORT void JNICALL Java_com_sun_glass_ui_gtk_GtkApplication__1initGTK\n@@ -117,8 +118,10 @@\n-        if(gtk_check_version(3, GTK_3_MIN_MINOR_VERSION, GTK_3_MIN_MICRO_VERSION)) {\n-            if (verbose) {\n-                printf(\"ERROR: Minimum GTK version required is %d.%d.%d. System has %d.%d.%d.\\n\",\n-                    version, GTK_3_MIN_MINOR_VERSION, GTK_3_MIN_MICRO_VERSION,\n-                    gtk_major_version, gtk_minor_version, gtk_micro_version);\n-            }\n-\n-            return com_sun_glass_ui_gtk_GtkApplication_INIT_VERSION_INCOMPATIBLE;\n+        if(gtk_check_version(version, GTK_3_MIN_MINOR_VERSION, GTK_3_MIN_MICRO_VERSION)) {\n+            char message[100];\n+            std::sprintf(message, \"Minimum GTK version required is %d.%d.%d. System has %d.%d.%d.\",\n+                     version, GTK_3_MIN_MINOR_VERSION, GTK_3_MIN_MICRO_VERSION,\n+                     gtk_major_version, gtk_minor_version, gtk_micro_version);\n+\n+            jclass uoe = env->FindClass(\"java\/lang\/UnsupportedOperationException\");\n+            env->ThrowNew(uoe, message);\n+\n+            return;\n@@ -127,2 +130,0 @@\n-\n-    return com_sun_glass_ui_gtk_GtkApplication_INIT_VERSION_OK;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/GlassApplication.cpp","additions":13,"deletions":12,"binary":false,"changes":25,"status":"modified"}]}