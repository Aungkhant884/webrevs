{"files":[{"patch":"@@ -176,1 +176,1 @@\n-        int version = _initGTK(gtkVersion, gtkVersionVerbose, overrideUIScale);\n+        int check = _initGTK(gtkVersion, gtkVersionVerbose, overrideUIScale);\n@@ -178,2 +178,2 @@\n-        if (version == -1) {\n-            throw new RuntimeException(\"Error loading GTK libraries\");\n+        if (check == INIT_VERSION_INCOMPATIBLE) {\n+            throw new UnsupportedOperationException(\"Incompatible GTK %d version.\".formatted(gtkVersion));\n@@ -204,0 +204,3 @@\n+    @Native private static final int INIT_VERSION_INCOMPATIBLE = -1;\n+    @Native private static final int INIT_VERSION_OK = 1;\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/gtk\/GtkApplication.java","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -115,1 +115,14 @@\n-    return JNI_TRUE;\n+    \/\/ Major version is checked before loading\n+    if (version == 3) {\n+        if(gtk_check_version(3, GTK_3_MIN_MINOR_VERSION, GTK_3_MIN_MICRO_VERSION)) {\n+            if (verbose) {\n+                printf(\"ERROR: Minimum GTK version required is %d.%d.%d. System has %d.%d.%d.\\n\",\n+                    version, GTK_3_MIN_MINOR_VERSION, GTK_3_MIN_MICRO_VERSION,\n+                    gtk_major_version, gtk_minor_version, gtk_micro_version);\n+            }\n+\n+            return com_sun_glass_ui_gtk_GtkApplication_INIT_VERSION_INCOMPATIBLE;\n+        }\n+    }\n+\n+    return com_sun_glass_ui_gtk_GtkApplication_INIT_VERSION_OK;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/GlassApplication.cpp","additions":14,"deletions":1,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -45,0 +45,3 @@\n+#define GTK_3_MIN_MINOR_VERSION 8\n+#define GTK_3_MIN_MICRO_VERSION 0\n+\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/glass_general.h","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}