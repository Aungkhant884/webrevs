{"files":[{"patch":"@@ -29,13 +29,2 @@\n-\/\/ VSR implies Vertex Shader Registers\n-#define VSR_VIEWPROJMATRIX  0  \/\/ 4 total\n-#define VSR_CAMERAPOS 4        \/\/ 1 total\n-\/\/ lighting\n-\/\/ 5 lights (3 in use, 2 reserved)\n-\/\/ with 2 registers = 10 registers\n-#define VSR_LIGHTS 10\n-\/\/ 5 light directions\n-#define VSR_DIRS 20\n-\/\/ 8 ambient points + 2 coords : 10 registers\n-#define VSR_AMBIENTCOLOR 25\n-\/\/ world\n-#define VSR_WORLDMATRIX 35\n+\/\/ Register assignments. Each register can hold 1 float4 vector.\n+\/\/ See https:\/\/docs.microsoft.com\/en-us\/windows\/win32\/direct3dhlsl\/dx9-graphics-reference-asm-vs-registers-constant-float\n@@ -43,8 +32,29 @@\n-\/\/ PSR implies Pixel Shader Registers\n-\/\/ we have 224 float constants for ps 3.0\n-#define PSR_DIFFUSECOLOR 0\n-#define PSR_SPECULARCOLOR 1\n-#define PSR_LIGHTCOLOR 4         \/\/ 3 lights + 2 reserve\n-#define PSR_LIGHT_ATTENUATION 9  \/\/ 3 lights + 2 reserve\n-#define PSR_LIGHT_RANGE 14       \/\/ 3 lights + 2 reserve\n-#define PSR_SPOTLIGHT_FACTORS 19 \/\/ 3 lights + 2 reserve\n+\/\/ VSR implies Vertex Shader Registers. Assignments happen in vsConstants.h\n+\/\/ We have at least 256 constant float registers for vs 3.0\n+\/\/ See https:\/\/docs.microsoft.com\/en-us\/windows\/win32\/direct3dhlsl\/dx9-graphics-reference-asm-vs-registers-vs-3-0\n+#define VSR_VIEWPROJMATRIX 0  \/\/ 4x4 matrix = 4: c0-3\n+#define VSR_CAMERAPOS 4       \/\/ 1 position: c4\n+\/\/ Registers 5-9 (inclusive) are reserved\n+\n+\/\/ Lights: 5 lights (3 in use, 2 reserved)\n+#define VSR_LIGHTS 10  \/\/ 1 position + 1 color = 5 * 2 = 10: c10-19\n+#define VSR_DIRS 20    \/\/ 1 direction = 5 * 1 = 5: c20-24\n+\n+#define VSR_AMBIENTCOLOR 25 \/\/ 8 ambient points + 2 coords = 10 (only 1 is used): c25-34\n+\n+#define VSR_WORLDMATRIX 35 \/\/ 4x3 matrix = 3: c35-37\n+\n+\/\/ PSR implies Pixel Shader Registers. Assignments happen in psConstants.h\n+\/\/ We have 224 constant float registers for ps 3.0\n+\/\/ See https:\/\/docs.microsoft.com\/en-us\/windows\/win32\/direct3dhlsl\/dx9-graphics-reference-asm-ps-registers-ps-3-0\n+\n+\/\/ Material\n+#define PSR_DIFFUSECOLOR 0       \/\/ 1 color: c0\n+#define PSR_SPECULARCOLOR 1      \/\/ 1 color (including the specular power): c1\n+\/\/ Registers 2-3 (inclusive) are reserved\n+\n+\/\/ Lights: 5 lights (3 in use, 2 reserved)\n+#define PSR_LIGHTCOLOR 4         \/\/ 1 color: c4-8\n+#define PSR_LIGHT_ATTENUATION 9  \/\/ 1 attenuation: c9-13\n+#define PSR_LIGHT_RANGE 14       \/\/ 1 range (max range at [0], reserved min range at [1], [2] and [3] unused): c14-18\n+#define PSR_SPOTLIGHT_FACTORS 19 \/\/ 1 spotlight: c19-23\n","filename":"modules\/javafx.graphics\/src\/main\/native-prism-d3d\/D3DPhongShader.h","additions":31,"deletions":21,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n-\/\/ see D3DPhongShader.h\n+\/\/ see D3DPhongShader.h for register assignments\n@@ -28,1 +28,1 @@\n-static const int numMaxLights = 3;\n+static const int numMaxLights = 5;\n@@ -34,1 +34,1 @@\n-float4 gLightRange[numMaxLights] : register(c14);\n+float4 gLightRange[numMaxLights] : register(c14);       \/\/ {max range, reserved min range, _, _}\n","filename":"modules\/javafx.graphics\/src\/main\/native-prism-d3d\/hlsl\/psConstants.h","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -35,2 +35,2 @@\n-    float3 eye               : texcoord2;\n-    float4 lights[nLights]   : texcoord3; \/\/ 3, 4, 5 [6]\n+    float3 eye                : texcoord2;\n+    float4 lights[nLights]    : texcoord3; \/\/ 3, 4, 5 [6]\n@@ -38,1 +38,1 @@\n-\/\/    float3 debug             : texcoord11;\n+\/\/  float3 debug              : texcoord11;\n","filename":"modules\/javafx.graphics\/src\/main\/native-prism-d3d\/hlsl\/vs2ps.h","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -41,0 +41,2 @@\n+\/\/ See D3DPhongShader.h for register assignments\n+\n@@ -58,1 +60,1 @@\n-float4      gReserved240[16] : register(c240);\n+float4      gReserved245[11] : register(c245);\n","filename":"modules\/javafx.graphics\/src\/main\/native-prism-d3d\/hlsl\/vsConstants.h","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"}]}