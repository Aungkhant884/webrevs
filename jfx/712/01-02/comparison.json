{"files":[{"patch":"@@ -2246,0 +2246,35 @@\n+\n+    @Test public void testNoEmptyEnd() {\n+        final ObservableList<Integer> items = FXCollections.observableArrayList(200, 200, 200, 200, 200, 200, 200, 200, 20, 20, 20, 20, 20, 20, 20);\n+        final ListView<Integer> listView = new ListView(items);\n+        listView.setPrefHeight(400);\n+        double viewportLength = 398;\n+        listView.setCellFactory(lv -> new ListCell<Integer>() {\n+            @Override\n+            public void updateItem(Integer item, boolean empty) {\n+                super.updateItem(item, empty);\n+                if (!empty && (item!=null)) {\n+                    this.setPrefHeight(item);\n+                }\n+            }\n+        });\n+        StageLoader sl = new StageLoader(listView);\n+        Toolkit.getToolkit().firePulse();\n+        listView.scrollTo(14);\n+        Toolkit.getToolkit().firePulse();\n+        int cc = VirtualFlowTestUtils.getCellCount(listView);\n+        assertEquals(cc, 15);\n+        boolean got70 = false;\n+        for (int i = 0; i < cc; i++) {\n+            IndexedCell<Integer> cell = VirtualFlowTestUtils.getCell(listView, i);\n+            int tens = Math.min(15-i,7);\n+            int hundreds = Math.max(8-i,0);\n+            double exp = 398 - 20 * tens - 200 * hundreds;\n+            double real = cell.getLayoutY();\n+            if (cell.isVisible()) {\n+                assertEquals(exp, real, 0.1);\n+            }\n+        }\n+    }\n+\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/ListViewTest.java","additions":35,"deletions":0,"binary":false,"changes":35,"status":"modified"}]}