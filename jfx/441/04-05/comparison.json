{"files":[{"patch":"@@ -545,1 +545,5 @@\n-        if (index != -1 && list != null) {\n+        if (index == -1 || list == null) {\n+            if(isEditing()) {\n+                cancelEdit();\n+            }\n+        } else {\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/ListCell.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -857,1 +857,0 @@\n-        list.getFocusModel().focus(-1);\n@@ -901,0 +900,14 @@\n+    @Test\n+    public void testUpdateCellIndexOffEditing() {\n+        list.getFocusModel().focus(-1);\n+        list.setEditable(true);\n+        cell.updateListView(list);\n+        int editingIndex = 1; \/\/ list editing\n+        cell.updateIndex(editingIndex);\n+        list.edit(editingIndex);\n+        \/\/ here we are certain that the cell is in editing state\n+        assertTrue(\"sanity: cell must be editing\", cell.isEditing());\n+        cell.updateIndex(-1); \/\/ change cell index to negative\n+        assertFalse(\"cell must not be editing if cell index is \" + cell.getIndex(), cell.isEditing());\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/ListCellTest.java","additions":14,"deletions":1,"binary":false,"changes":15,"status":"modified"}]}