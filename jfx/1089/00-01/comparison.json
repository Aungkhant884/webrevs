{"files":[{"patch":"@@ -27,0 +27,1 @@\n+#include <AppKit\/AppKit.h>\n@@ -42,0 +43,10 @@\n+    \/\/ The Command key masks out every operation other than NSDragOperationGeneric. We want\n+    \/\/ internal Move events to get through this filtering so we copy the Move bit into the\n+    \/\/ Generic bit and treat Generic as a synonym for Move.\n+    if (context == NSDraggingContextWithinApplication)\n+    {\n+        NSDragOperation result = self->dragOperation;\n+        if (result & NSDragOperationMove)\n+            result |= NSDragOperationGeneric;\n+        return result;\n+    }\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassDraggingSource.m","additions":11,"deletions":0,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -783,1 +783,1 @@\n-                \/\/ DnD requires separate NSDragging* calls to work since macOS 10.14\n+                \/\/ DnD requires separate NSDragging* calls to work since macOS 10.7\n@@ -791,1 +791,1 @@\n-                \/\/ New DnD API (macOS 10.14+) requires us to skip writing data to Pasteboard.\n+                \/\/ New DnD API (macOS 10.7+) requires us to skip writing data to Pasteboard.\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassPasteboard.m","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -582,8 +582,0 @@\n-- (NSDragOperation)draggingSourceOperationMaskForLocal:(BOOL)isLocal\n-{\n-    \/\/ Deprecated for 10.7\n-    \/\/ use NSDraggingSession - (NSDragOperation)draggingSession:(NSDraggingSession *)session sourceOperationMaskForDraggingContext:(NSDraggingContext)context\n-    DNDLOG(\"draggingSourceOperationMaskForLocal\");\n-    return [self->_delegate draggingSourceOperationMaskForLocal:isLocal];\n-}\n-\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassView3D.m","additions":0,"deletions":8,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -106,1 +106,0 @@\n-- (NSDragOperation)draggingSourceOperationMaskForLocal:(BOOL)isLocal;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassViewDelegate.h","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+#include <AppKit\/AppKit.h>\n@@ -953,15 +954,0 @@\n-- (NSDragOperation)draggingSourceOperationMaskForLocal:(BOOL)isLocal\n-{\n-    \/\/ The Command key masks out every operation other than NSDragOperationGeneric. We want\n-    \/\/ internal Move events to get through this filtering so we copy the Move bit into the\n-    \/\/ Generic bit and treat Generic as a synonym for Move.\n-    if (isLocal)\n-    {\n-        NSDragOperation result = self->dragOperation;\n-        if (result & NSDragOperationMove)\n-            result |= NSDragOperationGeneric;\n-        return result;\n-    }\n-    return self->dragOperation;\n-}\n-\n@@ -988,14 +974,1 @@\n-        if (image == nil && [pbItemTypes containsObject:NSPasteboardTypeFileURL])\n-        {\n-            \/\/ create an image with contents of URL\n-            image = [[NSImage alloc] initByReferencingFile:[[NSString alloc] initWithData:[pbItem dataForType:NSPasteboardTypeFileURL] encoding:NSUTF8StringEncoding]];\n-\n-            \/\/ this only works if we reference image files though, so make sure the image is valid\n-            if ([image isValid] == NO)\n-            {\n-                [image release];\n-                image = nil;\n-            }\n-        }\n-\n-        if (image == nil && [pbItemTypes containsObject:NSPasteboardTypeURL])\n+        if (image == nil && [pbItemTypes containsObject:NSURLPboardType])\n@@ -1004,1 +977,1 @@\n-            image = [[NSImage alloc] initByReferencingURL:[NSURL URLWithString:[[NSString alloc] initWithData:[pbItem dataForType:NSPasteboardTypeURL] encoding:NSUTF8StringEncoding]]];\n+            image = [[NSImage alloc] initByReferencingURL:[NSURL URLWithString:[[NSString alloc] initWithData:[pbItem dataForType:NSURLPboardType] encoding:NSUTF8StringEncoding]]];\n@@ -1006,1 +979,1 @@\n-            \/\/ same as with File URL, regular URL can also be invalid\n+            \/\/ URL can be invalid\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassViewDelegate.m","additions":4,"deletions":31,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -60,1 +60,1 @@\n-                new Label(\"3. Click on \\\"DRAG ME\\\" and drop on \\\"DROP HERE\\\"\\n pressing SHIFT.\"),\n+                new Label(\"3. Click on \\\"DRAG ME\\\" and drop on \\\"DROP HERE\\\"\\n pressing SHIFT (Cmd on Mac).\"),\n","filename":"tests\/manual\/dnd\/DndTest.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}