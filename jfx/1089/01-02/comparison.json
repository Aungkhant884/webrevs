{"files":[{"patch":"@@ -70,2 +70,0 @@\n-    NSDragOperation         dragOperation;\n-    NSDraggingSession       *draggingSession;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassViewDelegate.h","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,0 @@\n-#include <AppKit\/AppKit.h>\n@@ -962,1 +961,1 @@\n-        NSPoint dragPoint = [self->nsView convertPoint:[self->lastEvent locationInWindow] fromView:nil];\/\/[self->lastEvent locationInWindow];\n+        NSPoint dragPoint = [self->nsView convertPoint:[self->lastEvent locationInWindow] fromView:nil];\n@@ -974,1 +973,1 @@\n-        if (image == nil && [pbItemTypes containsObject:NSURLPboardType])\n+        if (image == nil && [pbItemTypes containsObject:NSPasteboardTypeFileURL])\n@@ -977,1 +976,1 @@\n-            image = [[NSImage alloc] initByReferencingURL:[NSURL URLWithString:[[NSString alloc] initWithData:[pbItem dataForType:NSURLPboardType] encoding:NSUTF8StringEncoding]]];\n+            image = [[NSImage alloc] initByReferencingFile:[[NSString alloc] initWithData:[pbItem dataForType:NSPasteboardTypeFileURL] encoding:NSUTF8StringEncoding]];\n@@ -979,1 +978,14 @@\n-            \/\/ URL can be invalid\n+            \/\/ this only works if we reference image files though, so make sure the image is valid\n+            if ([image isValid] == NO)\n+            {\n+                [image release];\n+                image = nil;\n+            }\n+        }\n+\n+        if (image == nil && [pbItemTypes containsObject:NSPasteboardTypeURL])\n+        {\n+            \/\/ create an image with contents of URL\n+            image = [[NSImage alloc] initByReferencingURL:[NSURL URLWithString:[[NSString alloc] initWithData:[pbItem dataForType:NSPasteboardTypeURL] encoding:NSUTF8StringEncoding]]];\n+\n+            \/\/ same as with File URL, regular URL can also be invalid\n@@ -1050,3 +1062,0 @@\n-\n-                \/\/dragPoint.x += offset.x;\n-                \/\/dragPoint.y -= offset.y;\n@@ -1098,4 +1107,1 @@\n-    if (self->draggingSession)\n-    {\n-        self->draggingSession = nil;\n-    }\n+    [GlassDragSource setDelegate:nil];\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassViewDelegate.m","additions":18,"deletions":12,"binary":false,"changes":30,"status":"modified"}]}