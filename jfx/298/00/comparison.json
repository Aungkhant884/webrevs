{"files":[{"patch":"@@ -839,6 +839,0 @@\n-                \/\/ Fix for RT-13965: Without this line of code, the number of items in\n-                \/\/ the sheet would constantly grow, leaking memory for the life of the\n-                \/\/ application. This was especially apparent when the total number of\n-                \/\/ cells changes - regardless of whether it became bigger or smaller.\n-                sheetChildren.clear();\n-\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/VirtualFlow.java","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1171,0 +1171,32 @@\n+\n+    @Test\n+    \/\/ see JDK-8252811\n+    public void testSheetChildrenRemainsConstant() {\n+        flow.setVertical(true);\n+        flow.setCellCount(20);\n+        flow.resize(300, 300);\n+        pulse();\n+\n+        int sheetChildrenSize = flow.sheetChildren.size();\n+        assertEquals(\"Wrong number of sheet children\", 12, sheetChildrenSize);\n+\n+        for (int i = 1; i < 50; i++) {\n+            flow.setCellCount(20 + i);\n+            pulse();\n+            sheetChildrenSize = flow.sheetChildren.size();\n+            assertEquals(\"Wrong number of sheet children after inserting \" + i + \" items\", 12, sheetChildrenSize);\n+        }\n+\n+        for (int i = 1; i < 50; i++) {\n+            flow.setCellCount(70 - i);\n+            pulse();\n+            sheetChildrenSize = flow.sheetChildren.size();\n+            assertEquals(\"Wrong number of sheet children after removing \" + i + \" items\", 12, sheetChildrenSize);\n+        }\n+\n+        flow.setCellCount(0);\n+        pulse();\n+        sheetChildrenSize = flow.sheetChildren.size();\n+        assertEquals(\"Wrong number of sheet children after removing all items\", 12, sheetChildrenSize);\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/skin\/VirtualFlowTest.java","additions":32,"deletions":0,"binary":false,"changes":32,"status":"modified"}]}