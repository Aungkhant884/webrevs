{"files":[{"patch":"@@ -763,1 +763,4 @@\n-    if (TITLED == frame_type) {\n+    geometry.frame_extents_supported = gdk_x11_screen_supports_net_wm_hint(gdk_screen_get_default(),\n+                                                                  gdk_atom_intern_static_string (\"_NET_FRAME_EXTENTS\"));\n+\n+    if (TITLED == frame_type && geometry.frame_extents_supported) {\n@@ -923,7 +926,1 @@\n-                    \/\/ this is ignored if size is \"content size\" instead of \"window size\"\n-                    if (geometry.needs_ajustment) {\n-                        set_bounds(0, 0, false, false, geometry.current_w, geometry.current_h, -1, -1);\n-                    }\n-\n-                    \/\/ force position notify so java will know about view_y and view_x\n-                    size_position_notify(false, true);\n+                    set_bounds(0, 0, false, false, geometry.current_w, geometry.current_h, -1, -1);\n@@ -937,6 +934,0 @@\n-    \/\/ While map is not received, size and position notify is handled by set_bounds,\n-    \/\/ except if maximized or full screen (java side does not know it's size & position)\n-    if (!map_received && !is_maximized && !is_fullscreen) {\n-        return;\n-    }\n-\n@@ -955,2 +946,7 @@\n-    bool size_changed = geometry.current_w != w || geometry.current_h != h\n-                            || geometry.current_cw != cw || geometry.current_ch != ch;\n+    bool window_size_changed = geometry.current_w != w || geometry.current_h != h;\n+    bool content_size_changed = geometry.current_cw != cw || geometry.current_ch != ch;\n+\n+    \/\/ingore until frame extents are ok\n+    if (geometry.frame_extents_supported && !geometry.frame_extents_received) {\n+        window_size_changed = false;\n+    }\n@@ -970,1 +966,1 @@\n-    size_position_notify(size_changed, pos_changed);\n+    size_position_notify(window_size_changed, content_size_changed, pos_changed);\n@@ -1031,1 +1027,1 @@\n-void WindowContextTop::size_position_notify(bool size_changed, bool pos_changed) {\n+void WindowContextTop::size_position_notify(bool window_size_changed, bool content_size_changed, bool pos_changed) {\n@@ -1033,1 +1029,1 @@\n-        if (size_changed) {\n+        if (content_size_changed) {\n@@ -1045,1 +1041,1 @@\n-        if (size_changed || is_maximized) {\n+        if (window_size_changed || is_maximized) {\n@@ -1062,5 +1058,0 @@\n-    \/\/ This will tell if adjustments are needed - that's because GTK does not have full window size\n-    \/\/ values, just content values. Frame extents (window decorations) are handled by the window manager.\n-    \/\/ If cw, ch are specified, no adjustment is needed.\n-    geometry.needs_ajustment = geometry.needs_ajustment || (w > 0 || h > 0);\n-\n@@ -1085,1 +1076,2 @@\n-    bool size_changed = false;\n+    bool window_size_changed = false;\n+    bool content_size_changed = false;\n@@ -1104,1 +1096,2 @@\n-        size_changed = true;\n+        window_size_changed = !content_size;\n+        content_size_changed = true;\n@@ -1110,2 +1103,4 @@\n-    if (!geometry.needs_ajustment && (geometry.current_h <= 0 || geometry.current_w <= 0)) {\n-        size_changed = true;\n+    if ((!geometry.frame_extents_supported || (geometry.frame_extents_supported && geometry.frame_extents_received))\n+        && (geometry.current_h <= 0 || geometry.current_w <= 0)) {\n+\n+        window_size_changed = true;\n@@ -1138,2 +1133,2 @@\n-    if (size_changed || pos_changed) {\n-        size_position_notify(size_changed, pos_changed);\n+    if (window_size_changed || content_size_changed || pos_changed) {\n+        size_position_notify(window_size_changed, content_size_changed, pos_changed);\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/glass_window.cpp","additions":26,"deletions":31,"binary":false,"changes":57,"status":"modified"},{"patch":"@@ -70,0 +70,1 @@\n+                       frame_extents_supported(false),\n@@ -79,1 +80,0 @@\n-                       needs_ajustment(false),\n@@ -101,0 +101,1 @@\n+    bool frame_extents_supported;\n@@ -116,4 +117,0 @@\n-    \/\/ if the window size was set (instead of content size) - this is used to hint\n-    \/\/ the process to \"fix\" the window size accounting extents.\n-    bool needs_ajustment;\n-\n@@ -435,1 +432,1 @@\n-    void size_position_notify(bool, bool);\n+    void size_position_notify(bool, bool, bool);\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/glass_window.h","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"}]}