{"files":[{"patch":"@@ -1066,2 +1066,0 @@\n-    newW = (cw > 0) ? cw : w - geometry.adjust_w;\n-    newH = (ch > 0) ? ch : h - geometry.adjust_h;\n@@ -1069,3 +1067,1 @@\n-    if (w > 0) {\n-        geometry.current_w = w;\n-    }\n+    bool content_size = false;\n@@ -1073,1 +1069,9 @@\n-    if (h > 0) {\n+    \/\/oriented by content size\n+    if (cw > 0 || ch > 0) {\n+        content_size = true;\n+        newW = cw;\n+        newH = ch;\n+    } else {\n+        newW = w - geometry.adjust_w;\n+        newH = h - geometry.adjust_h;\n+        geometry.current_w = w;\n@@ -1099,0 +1103,9 @@\n+    \/\/ Java side does not know the window size, set and inform it.\n+    \/\/ This is used on the Dialog<> centerOnScreen()\n+    if (!geometry.needs_ajustment && (geometry.current_h <= 0 || geometry.current_w <= 0)) {\n+        size_changed = true;\n+        content_size = false;\n+        geometry.current_h = geometry.current_ch + geometry.adjust_h;\n+        geometry.current_w = geometry.current_cw + geometry.adjust_w;\n+    }\n+\n@@ -1103,1 +1116,3 @@\n-        if (geometry.gravity_x != 0 || geometry.gravity_y != 0) {\n+        \/\/gravity is informed by Java side when it want's to center the window\n+        \/\/but does not know it's size\n+        if (content_size && (geometry.gravity_x != 0 || geometry.gravity_y != 0)) {\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/glass_window.cpp","additions":22,"deletions":7,"binary":false,"changes":29,"status":"modified"}]}