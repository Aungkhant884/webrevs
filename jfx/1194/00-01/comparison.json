{"files":[{"patch":"@@ -144,1 +144,1 @@\n-                    index = Math.max(flow.getCellCount(), index + 1);\n+                    index = Math.min(flow.getCellCount(), index + 1);\n","filename":"modules\/javafx.controls\/src\/main\/java\/com\/sun\/javafx\/scene\/control\/VirtualScrollBar.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -37,1 +37,0 @@\n-import static org.junit.jupiter.api.Assertions.assertDoesNotThrow;\n@@ -1793,2 +1792,47 @@\n-        \/\/ Scroll up again.\n-        assertDoesNotThrow(() -> flow.shim_getVbar().adjustValue(0.05263157894736842));\n+\n+        \/\/ This should not throw any exception. It used to throw an IndexOutOfBoundsException.\n+        flow.shim_getVbar().adjustValue(0.05263157894736842);\n+    }\n+\n+    @Test\n+    public void testScrollBarValueAdjustmentShouldScrollOneDown() {\n+        flow = new VirtualFlowShim<>();\n+        flow.setFixedCellSize(512);\n+        flow.setCellFactory(fw -> new CellStub(flow));\n+        flow.setCellCount(5);\n+        flow.resize(250, 300);\n+\n+        pulse();\n+\n+        assertEquals(0, flow.getLastVisibleCell().getIndex());\n+\n+        \/\/ Scroll down.\n+        flow.shim_getVbar().adjustValue(1);\n+        pulse();\n+\n+        assertEquals(1, flow.getLastVisibleCell().getIndex());\n+    }\n+\n+    @Test\n+    public void testScrollBarValueAdjustmentShouldScrollOneUp() {\n+        flow = new VirtualFlowShim<>();\n+        flow.setFixedCellSize(512);\n+        flow.setCellFactory(fw -> new CellStub(flow));\n+        flow.setCellCount(5);\n+        flow.resize(250, 300);\n+\n+        pulse();\n+\n+        assertEquals(0, flow.getFirstVisibleCell().getIndex());\n+\n+        \/\/ Scroll completely down.\n+        flow.shim_getVbar().setValue(1.0);\n+        pulse();\n+\n+        assertEquals(4, flow.getFirstVisibleCell().getIndex());\n+\n+        \/\/ Scroll up.\n+        flow.shim_getVbar().adjustValue(0.0);\n+        pulse();\n+\n+        assertEquals(3, flow.getFirstVisibleCell().getIndex());\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/skin\/VirtualFlowTest.java","additions":47,"deletions":3,"binary":false,"changes":50,"status":"modified"}]}