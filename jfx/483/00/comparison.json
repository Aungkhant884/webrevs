{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -270,0 +270,3 @@\n+        TableColumnHeader header = (TableColumnHeader) me.getSource();\n+        header.getTableHeaderRow().columnDragLock = false;\n+\n@@ -274,3 +277,0 @@\n-        TableColumnHeader header = (TableColumnHeader) me.getSource();\n-        header.getTableHeaderRow().columnDragLock = false;\n-\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TableColumnHeader.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -44,0 +44,4 @@\n+    public static boolean getTableHeaderRowColumnDragLock(TableColumnHeader header) {\n+        return header.getTableHeaderRow().columnDragLock;\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/shims\/java\/javafx\/scene\/control\/skin\/TableColumnHeaderShim.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -31,0 +31,1 @@\n+import javafx.event.Event;\n@@ -35,0 +36,2 @@\n+import javafx.scene.input.MouseButton;\n+import javafx.scene.input.MouseEvent;\n@@ -38,0 +41,1 @@\n+import test.com.sun.javafx.scene.control.infrastructure.MouseEventFirer;\n@@ -44,0 +48,1 @@\n+import static org.junit.Assert.assertFalse;\n@@ -85,0 +90,38 @@\n+    \/**\n+     * When a right click is done on a table column header, the column drag lock should be set to true in the\n+     * pressed handler, but eventually to false again in the released handler.<br>\n+     * By that we guarantee, that the column resizing still works.\n+     *\/\n+    @Test\n+    public void testColumnRightClickDoesAllowResizing() {\n+        MouseEventFirer firer = new MouseEventFirer(firstColumnHeader);\n+\n+        assertFalse(TableColumnHeaderShim.getTableHeaderRowColumnDragLock(firstColumnHeader));\n+\n+        firer.fireMousePressed(MouseButton.SECONDARY);\n+        assertTrue(TableColumnHeaderShim.getTableHeaderRowColumnDragLock(firstColumnHeader));\n+\n+        firer.fireMouseReleased(MouseButton.SECONDARY);\n+        assertFalse(TableColumnHeaderShim.getTableHeaderRowColumnDragLock(firstColumnHeader));\n+    }\n+\n+    \/**\n+     * When a right click is done on a table column header and consumed by a self added event handler, the column\n+     * drag lock should be set to true in the pressed handler, but still to false again in the released handler.<br>\n+     * By that we guarantee, that the column resizing still works.\n+     *\/\n+    @Test\n+    public void testColumnRightClickDoesAllowResizingWhenConsumed() {\n+        firstColumnHeader.addEventHandler(MouseEvent.MOUSE_RELEASED, Event::consume);\n+\n+        MouseEventFirer firer = new MouseEventFirer(firstColumnHeader);\n+\n+        assertFalse(TableColumnHeaderShim.getTableHeaderRowColumnDragLock(firstColumnHeader));\n+\n+        firer.fireMousePressed(MouseButton.SECONDARY);\n+        assertTrue(TableColumnHeaderShim.getTableHeaderRowColumnDragLock(firstColumnHeader));\n+\n+        firer.fireMouseReleased(MouseButton.SECONDARY);\n+        assertFalse(TableColumnHeaderShim.getTableHeaderRowColumnDragLock(firstColumnHeader));\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/skin\/TableColumnHeaderTest.java","additions":44,"deletions":1,"binary":false,"changes":45,"status":"modified"}]}