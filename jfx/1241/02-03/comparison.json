{"files":[{"patch":"@@ -246,1 +246,1 @@\n-            \"Keyboard Event Viewer\",\n+            \"Keyboard \/ Input Method Event Viewer\",\n","filename":"tests\/manual\/monkey\/src\/com\/oracle\/tools\/fx\/monkey\/MainWindow.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,0 @@\n-import javafx.scene.control.IndexRange;\n@@ -31,0 +30,2 @@\n+import javafx.scene.input.InputMethodEvent;\n+import javafx.scene.input.InputMethodTextRun;\n@@ -36,1 +37,1 @@\n- * Keyboard Event Viewer\n+ * Keyboard \/ InputMethod Event Viewer\n@@ -42,1 +43,1 @@\n-        FX.name(this, \"ClipboardPage\");\n+        FX.name(this, \"KeyboardEventViewer\");\n@@ -47,0 +48,1 @@\n+        textField.setOnInputMethodTextChanged(this::inputMethodTextChangedEvent);\n@@ -65,1 +67,0 @@\n-        sb.append(textField.getText());\n@@ -67,1 +68,1 @@\n-        sb.append(\", type = \").append(ev.getEventType());\n+        sb.append(\"type=\").append(ev.getEventType());\n@@ -88,0 +89,3 @@\n+        addToLog(sb.toString());\n+        ev.consume();\n+    }\n@@ -89,1 +93,2 @@\n-        textField.setText(sb.toString());\n+    private void addToLog(String s) {\n+        textField.setText(textField.getText() + s);\n@@ -94,0 +99,1 @@\n+    }\n@@ -95,1 +101,20 @@\n-        ev.consume();\n+    private void inputMethodTextChangedEvent(InputMethodEvent ev) {\n+        StringBuilder sb = new StringBuilder();\n+        sb.append(\"InputMethodEvent{\");\n+        sb.append(\"type=\").append(ev.getEventType());\n+        sb.append(\", caret=\").append(ev.getCaretPosition());\n+\n+        if (!ev.getCommitted().isEmpty()) {\n+            sb.append(\", committed=\");\n+            sb.append(ev.getCommitted());\n+        }\n+\n+        if (!ev.getComposed().isEmpty()) {\n+            sb.append(\", composed=\");\n+            for (InputMethodTextRun run: ev.getComposed()) {\n+                sb.append(run.getText());\n+            }\n+        }\n+\n+        sb.append(\"}\\n\");\n+        addToLog(sb.toString());\n","filename":"tests\/manual\/monkey\/src\/com\/oracle\/tools\/fx\/monkey\/tools\/KeyboardEventViewer.java","additions":32,"deletions":7,"binary":false,"changes":39,"status":"modified"}]}