{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -221,5 +221,2 @@\n-        buttonBar = createButtonBar();\n-        if (buttonBar != null) {\n-            getChildren().add(buttonBar);\n-        }\n-\n+        \/\/ Add this listener before calling #createButtonBar, so that the listener added in #createButtonBar will run\n+        \/\/ after this one.\n@@ -242,0 +239,5 @@\n+\n+        buttonBar = createButtonBar();\n+        if (buttonBar != null) {\n+            getChildren().add(buttonBar);\n+        }\n@@ -1060,1 +1062,1 @@\n-            Node button = buttonNodes.computeIfAbsent(cmd, dialogButton -> createButton(cmd));\n+            Node button = buttonNodes.get(cmd);\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/DialogPane.java","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2021, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,1 @@\n+import javafx.collections.ObservableList;\n@@ -30,0 +31,3 @@\n+import javafx.scene.Node;\n+import javafx.scene.control.ButtonBar;\n+import javafx.scene.control.ButtonType;\n@@ -77,0 +81,36 @@\n+\n+    @Test\n+    public void testLookupButtonIsReturningCorrectButton() {\n+        String id1 = \"Test\";\n+\n+        dialogPane.getButtonTypes().setAll(ButtonType.OK);\n+        assertEquals(1, dialogPane.getButtonTypes().size());\n+\n+        Node button = dialogPane.lookupButton(ButtonType.OK);\n+        button.setId(id1);\n+\n+        verifyIdOfButtonInButtonBar(id1);\n+\n+        String id2 = \"Test2\";\n+\n+        dialogPane.getButtonTypes().setAll(ButtonType.OK);\n+        assertEquals(1, dialogPane.getButtonTypes().size());\n+\n+        button = dialogPane.lookupButton(ButtonType.OK);\n+        button.setId(id2);\n+\n+        verifyIdOfButtonInButtonBar(id2);\n+    }\n+\n+    private void verifyIdOfButtonInButtonBar(String id) {\n+        for (Node children : dialogPane.getChildren()) {\n+            if (children instanceof ButtonBar) {\n+                ObservableList<Node> buttons = ((ButtonBar) children).getButtons();\n+\n+                assertEquals(1, buttons.size());\n+\n+                Node button = buttons.get(0);\n+                assertEquals(id, button.getId());\n+            }\n+        }\n+    }\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/DialogPaneTest.java","additions":41,"deletions":1,"binary":false,"changes":42,"status":"modified"}]}