{"files":[{"patch":"@@ -850,2 +850,4 @@\n-    if (m_localStorage)\n-        return m_localStorage.get();\n+#if PLATFORM(JAVA)\n+     if (m_localStorage)\n+         return m_localStorage.get();\n+#endif\n@@ -854,0 +856,7 @@\n+    \/\/ FIXME: We should consider supporting access\/modification to local storage\n+    \/\/ after calling window.close(). See <https:\/\/bugs.webkit.org\/show_bug.cgi?id=135330>.\n+    if (!page || !page->isClosing()) {\n+        if (m_localStorage)\n+            return m_localStorage.get();\n+    }\n+\n@@ -857,1 +866,5 @@\n-    \/\/ Check if localstorage setting is disabled, then return nullptr\n+#if !PLATFORM(JAVA)\n+    if (page->isClosing())\n+        return nullptr;\n+#endif\n+\n","filename":"modules\/javafx.web\/src\/main\/native\/Source\/WebCore\/page\/DOMWindow.cpp","additions":16,"deletions":3,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -29,1 +29,0 @@\n-import static org.junit.Assert.assertFalse;\n@@ -32,1 +31,0 @@\n-import static org.junit.Assert.fail;\n@@ -34,1 +32,0 @@\n-import org.junit.BeforeClass;\n@@ -37,4 +34,0 @@\n-import static java.lang.String.format;\n-import java.io.RandomAccessFile;\n-import java.nio.channels.FileLock;\n-import java.util.concurrent.FutureTask;\n@@ -43,1 +36,0 @@\n-import java.util.Random;\n@@ -45,3 +37,0 @@\n-\n-import javafx.scene.web.WebEngineShim;\n-import javafx.concurrent.Worker;\n","filename":"modules\/javafx.web\/src\/test\/java\/test\/javafx\/scene\/web\/LocalStorageTest.java","additions":0,"deletions":11,"binary":false,"changes":11,"status":"modified"}]}