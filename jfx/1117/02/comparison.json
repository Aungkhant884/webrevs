{"files":[{"patch":"@@ -142,1 +142,1 @@\n-          bash gradlew --info --continue -PBUILD_SDK_FOR_TEST=false test -x :web:test\n+          bash gradlew --info --continue -PTEST_ONLY=true test -x :web:test\n@@ -228,1 +228,1 @@\n-          bash gradlew --info --continue -PBUILD_SDK_FOR_TEST=false test -x :web:test\n+          bash gradlew --info --continue -PTEST_ONLY=true test -x :web:test\n@@ -340,1 +340,1 @@\n-          .\\gradlew.bat --info --continue -PBUILD_SDK_FOR_TEST=false test -x :web:test\n+          .\\gradlew.bat --info --continue -PTEST_ONLY=true test -x :web:test\n","filename":".github\/workflows\/submit.yml","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -53,0 +53,6 @@\n+ *\n+ * Adding a new project or task:\n+ *  - Fix for JDK-XXXXXXX, introduces a restriction on assigning name for project or task.\n+ *    - If the name of project or task contains word test\/Test then it is considered as test task.\n+ *    - If the name of project or task contains word shim\/Shim then it is considered as shims task.\n+ *    - See TEST_ONLY flag, isTestTask() method, the tasks: shims and sdk for more clarity.\n@@ -608,1 +614,1 @@\n-\/\/ Specifies whether to run tests with the existing javafx.* modules instead of compiling a new one\n+\/\/ For backward compatibility, -PBUILD_SDK_FOR_TEST=false will set TEST_ONLY to true\n@@ -610,1 +616,7 @@\n-ext.DO_BUILD_SDK_FOR_TEST = Boolean.parseBoolean(BUILD_SDK_FOR_TEST)\n+def buildSdkForTest = Boolean.parseBoolean(BUILD_SDK_FOR_TEST)\n+\n+\/\/ Specifies whether to run only test tasks using the already built javafx.* modules\n+\/\/ and shim classes, instead of rebuilding them.\n+\/\/ If true, then all non test tasks, except verifyJava are disabled. see task sdk and isTestTask method.\n+defineProperty(\"TEST_ONLY\", \"false\")\n+ext.IS_TEST_ONLY = Boolean.parseBoolean(TEST_ONLY) || !buildSdkForTest\n@@ -1809,0 +1821,8 @@\n+\/**\n+ * Returns true if the name of task or name of task's project contains word test\/Test.\n+ *\/\n+boolean isTestTask(Task task) {\n+    return (task.project.name.contains(\"test\") || task.project.name.contains(\"Test\")\n+                 || task.name.contains(\"test\") || task.name.contains(\"Test\"))\n+}\n+\n@@ -4193,0 +4213,12 @@\n+task shims() {\n+    gradle.allprojects { project ->\n+        if (project.hasProperty(\"sourceSets\") && project.sourceSets.hasProperty('shims')) {\n+            project.tasks.each { task ->\n+                if (task.name.contains(\"shim\") || task.name.contains(\"Shim\")) {\n+                    dependsOn(task)\n+                }\n+            }\n+        }\n+    }\n+}\n+\n@@ -4194,1 +4226,1 @@\n-    if (DO_BUILD_SDK_FOR_TEST) {\n+    if (!IS_TEST_ONLY) {\n@@ -4196,1 +4228,9 @@\n-            if (t.enabled) t.dependsOn(sdk)\n+            if (t.enabled) t.dependsOn(shims)\n+        }\n+    } else {\n+        gradle.taskGraph.whenReady { taskGraph ->\n+            taskGraph.allTasks.each { task ->\n+                if (!isTestTask(task) && !task.name.equals(\"verifyJava\")) {\n+                    task.enabled = false\n+                }\n+            }\n@@ -4201,0 +4241,2 @@\n+shims.dependsOn(sdk)\n+\n@@ -4264,1 +4306,1 @@\n-    dependsOn(sdk,publicExports,apps,perf,zips)\n+    dependsOn(sdk, shims, publicExports, apps, perf, zips)\n","filename":"build.gradle","additions":47,"deletions":5,"binary":false,"changes":52,"status":"modified"},{"patch":"@@ -72,5 +72,9 @@\n-# Specifies whether to build SDK for running unit tests\n-# By default, it is set to true and the tests are running of the\n-# fresh-built SDK. If set to false, this flag removes main sources\n-# compilation tasks and building the whole SDK. The existing SDK is used\n-# instead, and must have been previously built\n+# Specifies whether to build SDK for running the provided test task.\n+# By default, it is set to false and the tests are running of the\n+# fresh-built SDK. If set to true, this flag disables all non test tasks,\n+# and it is expected that sdk and shims tasks have been previously built.\n+\n+#TEST_ONLY = true\n+\n+# Same as TEST_ONLY, excpet that the name and values have opposite meaning.\n+# Recommended to use TEST_ONLY instead of this property.\n","filename":"gradle.properties.template","additions":9,"deletions":5,"binary":false,"changes":14,"status":"modified"}]}