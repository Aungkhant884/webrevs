{"files":[{"patch":"@@ -79,3 +79,1 @@\n-    static final int BLUE_PIXEL = 0xff0000ff;\n-    static final int RED_PIXEL = 0xffff0000;\n-    static final int WHITE_PIXEL = 0xffffffff;\n+    private static final double WIDTH = 2.73;\n@@ -83,1 +81,5 @@\n-    static final boolean SAVE_IMAGE = false;\n+    private static final int G_MASK = 0x0000ff00;\n+    private static final int R_MASK = 0x00ff0000;\n+    private static final int RGB_MASK = 0x00ffffff;\n+\n+    private static final boolean SAVE_IMAGE = false;\n@@ -179,3 +181,3 @@\n-            veryWidePolygon.setFill(Color.BLUE);\n-            veryWidePolygon.setStroke(Color.RED);\n-            veryWidePolygon.setStrokeWidth(2);\n+            veryWidePolygon.setFill(Color.RED);\n+            veryWidePolygon.setStroke(Color.GREEN);\n+            veryWidePolygon.setStrokeWidth(WIDTH);\n@@ -186,1 +188,1 @@\n-            Scene scene = new Scene(group, SCENE_WIDTH, SCENE_HEIGHT, Color.WHITE);\n+            Scene scene = new Scene(group, SCENE_WIDTH, SCENE_HEIGHT, Color.BLACK);\n@@ -190,0 +192,1 @@\n+            sp.setFill(Color.BLACK);\n@@ -206,1 +209,0 @@\n-            \/\/ 10, 5 = blue\n@@ -212,1 +214,1 @@\n-\n+        boolean trigger = false;\n@@ -214,1 +216,0 @@\n-        boolean prevRed = false;\n@@ -220,3 +221,3 @@\n-            if (rgb == RED_PIXEL) {\n-                if (!prevRed) {\n-                    prevRed = true;\n+            if ((rgb & G_MASK) != 0) {\n+                if (!trigger) {\n+                    trigger = true;\n@@ -227,2 +228,5 @@\n-                prevRed = false;\n-                final int expected = (inside) ? BLUE_PIXEL : WHITE_PIXEL;\n+                trigger = false;\n+\n+                final int mask = (inside) ? R_MASK : RGB_MASK;\n+\n+                final int expected = (rgb & mask);\n@@ -230,1 +234,3 @@\n-                if (rgb != expected) {\n+                \/\/ System.out.println(\"pix[\" + y + \"] = \" + expected + \" inside: \" + inside);\n+                if ((inside && (expected == 0))\n+                        || (!inside && (expected != 0))) {\n@@ -232,1 +238,1 @@\n-                            + \") = \" + rgb + \" expected: \" + expected);\n+                            + \") = \" + expected + \" inside: \" + inside);\n","filename":"tests\/system\/src\/test\/java\/test\/com\/sun\/marlin\/HugePolygonClipTest.java","additions":24,"deletions":18,"binary":false,"changes":42,"status":"modified"}]}