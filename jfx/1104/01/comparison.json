{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,0 +36,1 @@\n+import javafx.scene.input.KeyCode;\n@@ -55,3 +56,3 @@\n- * There is 1 test in this file.\n- * Steps for testDatePickerUpdateOnAlertClose()\n- * 1. Create a alert dialog and add date picker to it.\n+ * There are 2 tests in this file.\n+ * Steps for testDatePickerUpdateOnAlertCloseUsingMouse()\n+ * 1. Create an alert dialog and add date picker to it.\n@@ -60,0 +61,10 @@\n+ * 4. Save the selected date locally.\n+ * 5. Click on button and alert to display date picker again.\n+ * 6. Select another date from the popup and save locally.\n+ * 5. Verify that 2 date selected are not same and\n+ *    selected dates are updated in the date picker.\n+ *\n+ * Steps for testDatePickerUpdateOnAlertCloseUsingKeyboard()\n+ * 1. Create an alert dialog and add date picker to it.\n+ * 2. Add button to scene and show alert dialog on button click.\n+ * 3. Click on date picker and select a date from popup using keyboard.\n@@ -66,0 +77,1 @@\n+    static CountDownLatch onAlertHiddenLatch = new CountDownLatch(1);\n@@ -99,1 +111,1 @@\n-        Thread.sleep(400); \/\/ Wait for DatePicker popup to display.\n+        Thread.sleep(800); \/\/ Wait for DatePicker popup to display.\n@@ -110,0 +122,8 @@\n+    private void selectNextDate() {\n+        Util.runAndWait(() -> {\n+            robot.keyType(KeyCode.RIGHT);\n+            robot.keyType(KeyCode.ENTER);\n+        });\n+        Util.waitForLatch(onAlertHiddenLatch, 5, \"Failed to hide Alert dialog.\");\n+    }\n+\n@@ -111,1 +131,1 @@\n-    public void testDatePickerUpdateOnAlertClose() throws Exception {\n+    public void testDatePickerUpdateOnAlertCloseUsingMouse() throws Exception {\n@@ -117,1 +137,0 @@\n-        \/\/ Select date from date picker popup\n@@ -120,0 +139,9 @@\n+        LocalDate oldDate = datePicker.getValue();\n+\n+        showAlertDialog();\n+        selectDatePicker();\n+\n+        mouseClick(datePicker.getLayoutX() + datePicker.getWidth() \/ 3,\n+                    (datePicker.getLayoutY() + datePicker.getHeight() * Y_FACTOR));\n+        LocalDate newDate = datePicker.getValue();\n+\n@@ -121,0 +149,10 @@\n+        Assert.assertNotEquals(oldDate, newDate);\n+    }\n+\n+    @Test\n+    public void testDatePickerUpdateOnAlertCloseUsingKeyboard() throws Exception {\n+        Thread.sleep(1000); \/\/ Wait for stage to layout\n+\n+        showAlertDialog();\n+        selectDatePicker();\n+        selectNextDate();\n@@ -122,0 +160,1 @@\n+        Thread.sleep(400); \/\/ Wait for date to be selected.\n@@ -130,0 +169,3 @@\n+            dialog.setOnShown(null);\n+            dialog.setOnHidden(null);\n+            button.setOnAction(null);\n@@ -146,0 +188,1 @@\n+            dialog.initOwner(stage);\n@@ -150,0 +193,4 @@\n+            dialog.setOnHidden(event -> {\n+                onAlertHiddenLatch.countDown();\n+            });\n+\n@@ -151,1 +198,0 @@\n-                dialog.initOwner(stage);\n","filename":"tests\/system\/src\/test\/java\/test\/robot\/javafx\/scene\/DatePickerUpdateOnAlertCloseTest.java","additions":54,"deletions":8,"binary":false,"changes":62,"status":"modified"}]}