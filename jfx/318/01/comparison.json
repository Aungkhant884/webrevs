{"files":[{"patch":"@@ -270,0 +270,10 @@\n+        if (getSkinnable() == null) return;\n+\n+        getSkinnable().getTabs().removeListener(weakTabsListener);\n+\n+        getChildren().remove(tabHeaderArea);\n+        tabHeaderArea.removeListeners();\n+\n+        for (TabContentRegion contentRegion : tabContentRegions) {\n+            contentRegion.dispose();\n+        }\n@@ -582,0 +592,2 @@\n+    ListChangeListener<Tab> tabsListener;\n+    WeakListChangeListener<Tab> weakTabsListener;\n@@ -583,1 +595,1 @@\n-        getSkinnable().getTabs().addListener((ListChangeListener<Tab>) c -> {\n+        tabsListener = c -> {\n@@ -662,1 +674,3 @@\n-        });\n+        };\n+        weakTabsListener = new WeakListChangeListener<>(tabsListener);\n+        getSkinnable().getTabs().addListener(weakTabsListener);\n@@ -676,2 +690,1 @@\n-                contentRegion.removeListeners(tab);\n-                getChildren().remove(contentRegion);\n+                contentRegion.dispose();\n@@ -703,1 +716,1 @@\n-        Side tabPosition = getSkinnable().getSide();\n+        Side tabPosition = getSkinnable() != null ? getSkinnable().getSide() : Side.TOP;\n@@ -1211,0 +1224,8 @@\n+\n+        void removeListeners() {\n+            for(Node child : headersRegion.getChildren()) {\n+                TabHeaderSkin header = (TabHeaderSkin) child;\n+                header.removeListeners(header.getTab());\n+            }\n+            controlButtons.removeListeners();\n+        }\n@@ -1545,0 +1566,1 @@\n+            tab.getStyleClass().removeListener(weakStyleClassListener);\n@@ -1696,1 +1718,1 @@\n-        private void removeListeners(Tab tab) {\n+        private void removeListeners() {\n@@ -1701,0 +1723,5 @@\n+        public void dispose() {\n+            getChildren().clear();\n+            removeListeners();\n+        }\n+\n@@ -1788,5 +1815,2 @@\n-            tabPane.sideProperty().addListener(valueModel -> {\n-                Side tabPosition = getSkinnable().getSide();\n-                downArrow.setRotate(tabPosition.equals(Side.BOTTOM)? 180.0F : 0.0F);\n-            });\n-            tabPane.getTabs().addListener((ListChangeListener<Tab>) c -> setupPopupMenu());\n+            tabPane.sideProperty().addListener(weakSidePropListener);\n+            tabPane.getTabs().addListener(weakTabsListenerForPopup);\n@@ -1801,0 +1825,15 @@\n+        InvalidationListener sidePropListener =  e -> {\n+            Side tabPosition = getSkinnable().getSide();\n+            downArrow.setRotate(tabPosition.equals(Side.BOTTOM)? 180.0F : 0.0F);\n+        };\n+        ListChangeListener<Tab> tabsListenerForPopup = e -> setupPopupMenu();\n+        WeakInvalidationListener weakSidePropListener =\n+                new WeakInvalidationListener(sidePropListener);\n+        WeakListChangeListener weakTabsListenerForPopup =\n+                new WeakListChangeListener<>(tabsListenerForPopup);\n+\n+        void removeListeners() {\n+            getSkinnable().sideProperty().removeListener(weakSidePropListener);\n+            getSkinnable().getTabs().removeListener(weakTabsListenerForPopup);\n+        }\n+\n@@ -2061,5 +2100,1 @@\n-        getSkinnable().tabDragPolicyProperty().addListener((observable, oldValue, newValue) -> {\n-            if (oldValue != newValue) {\n-                updateListeners();\n-            }\n-        });\n+        registerChangeListener(getSkinnable().tabDragPolicyProperty(), inv -> updateListeners());\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TabPaneSkin.java","additions":51,"deletions":16,"binary":false,"changes":67,"status":"modified"},{"patch":"@@ -118,2 +118,0 @@\n-                \/\/ @Ignore(\"8242621\")\n-                TabPane.class,\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/skin\/SkinMemoryLeakTest.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"}]}