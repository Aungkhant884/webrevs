{"files":[{"patch":"@@ -72,1 +72,1 @@\n-import java.net.MalformedURLException;\n+import java.io.File;\n@@ -74,2 +74,0 @@\n-import java.net.URISyntaxException;\n-import java.net.URL;\n@@ -350,4 +348,1 @@\n-            try {\n-                settings.setOutputFile(dest.getURI().toURL().toString());\n-            } catch (MalformedURLException e) {\n-            }\n+            settings.setOutputFile(dest.getURI().getPath());\n@@ -634,10 +629,4 @@\n-            try {\n-                 URL url = new URL(file);\n-                 if (!\"file\".equals(url.getProtocol())) {\n-                     return;\n-                 }\n-                 URI uri = url.toURI();\n-                 Destination d = new Destination(uri);\n-                 printReqAttrSet.add(d);\n-            } catch (MalformedURLException | URISyntaxException e) {\n-            }\n+             \/\/ check SE, check access ?\n+             URI uri = (new File(file)).toURI();\n+             Destination d = new Destination(uri);\n+             printReqAttrSet.add(d);\n@@ -839,5 +828,2 @@\n-            if (!file.isEmpty()) {\n-                try {\n-                     security.checkWrite((new URL(file)).getPath());\n-                } catch (MalformedURLException e) {\n-                }\n+            if (file != null && !file.isEmpty()) {\n+                security.checkWrite(file);\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/prism\/j2d\/print\/J2DPrinterJob.java","additions":8,"deletions":22,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -467,1 +467,0 @@\n-    private static final String DEFAULT_OUTPUTFILE = \"\";\n@@ -471,2 +470,2 @@\n-     * A {@code StringProperty} representing the {@code java.net.URL}\n-     * encoded name of a filesystem file, to which the platform printer\n+     * A {@code StringProperty} representing the \n+     * name of a filesystem file, to which the platform printer\n@@ -475,3 +474,3 @@\n-     * Applications can use this to request print-to-file behavior where\n-     * the native print system is capable of spooling the output to a\n-     * filesystem file, rather than the printer device.\n+     * Applications can use this to programmatically request print-to-file\n+     * behavior where the native print system is capable of spooling the\n+     * output to a filesystem file, rather than the printer device.\n@@ -484,2 +483,11 @@\n-     * If the application does not have permission to write to the specified\n-     * file, a {@code SecurityException} may be thrown when printing.\n+     * The default value is an empty string, which is interpreted as unset,\n+     * equivalent to null, which means output is sent to the printer.\n+     * So in order to reset to print to the printer, clear the value of\n+     * this property by setting it to null or an empty string.\n+     * <p>\n+     * Additionally if the application displays a printer dialog which allows\n+     * the user to specify a file destination including altering an application\n+     * specified file destination, the value of this property will reflect that\n+     * user-specified choice, including clearing it to re-set to print to\n+     * the printer, if the user does so.\n+     * <p>\n@@ -489,4 +497,7 @@\n-     * If the URL specifies a non-existent path, or does not specify\n-     * a writable file it may be ignored, or a SecurityException may be thrown.\n-     * The default value is an empty string, which is interpreted as unset,\n-     * which means output is sent to the printer.\n+     * If the specified name specifies a non-existent path, or does not specify\n+     * a user writable file, when printing the results are platform-dependent, including\n+     * replacement with a default output file location, printing to the printer instead,\n+     * or a platform printing error.\n+     * If a {@code SecurityManager} is installed and it denies access to the\n+     * specified file a {@code SecurityException} may be thrown.\n+     * @defaultValue an empty String\n@@ -500,2 +511,1 @@\n-                new SimpleStringProperty(JobSettings.this, \"outputFile\",\n-                                         DEFAULT_OUTPUTFILE) {\n+                new SimpleStringProperty(JobSettings.this, \"outputFile\", \"\") {\n@@ -509,1 +519,1 @@\n-                        value = DEFAULT_OUTPUTFILE;\n+                        value = \"\";\n@@ -536,5 +546,0 @@\n-    \/**\n-     * Get the output file path name.\n-     * @return the output file as a string encoded {@code java.net.URL}\n-     * @since 17\n-     *\/\n@@ -546,7 +551,2 @@\n-    \/**\n-     * Set the output file.\n-     * @param urlString the output file as a string encoded {@code java.net.URL}\n-     * @since 17\n-     *\/\n-    public void setOutputFile(String urlString) {\n-        outputFileProperty().set(urlString);\n+    public void setOutputFile(String filePath) {\n+        outputFileProperty().set(filePath);\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/print\/JobSettings.java","additions":27,"deletions":27,"binary":false,"changes":54,"status":"modified"},{"patch":"@@ -27,2 +27,0 @@\n-import java.net.URL;\n-import java.net.MalformedURLException;\n@@ -116,1 +114,5 @@\n-            File f = new File(\"printtofiletest.prn\");\n+            String fileName = \"printtofiletest.prn\";\n+            settings.outputFileProperty().set(fileName);\n+            String destFileName =  settings.outputFileProperty().get();\n+            System.out.println(\"dest=\"+ destFileName);\n+            File f = new File(destFileName);\n@@ -118,9 +120,0 @@\n-            try {\n-                URL url = f.toURL();\n-                String urlStr = url.toString();\n-                settings.outputFileProperty().set(urlStr);\n-            } catch (MalformedURLException e) {\n-                System.out.println(e);\n-                failed = true;\n-            }\n-\n@@ -134,0 +127,5 @@\n+            try {\n+                 \/\/ wait for printer spooler to create the file.\n+                 Thread.sleep(3000);\n+            } catch (InterruptedException e) {\n+            }\n@@ -135,1 +133,1 @@\n-                System.out.println(\"created file\");\n+                System.out.println(\"created file \" + f);\n@@ -137,1 +135,0 @@\n-                f.delete();\n@@ -151,1 +148,1 @@\n-\n+            \n","filename":"tests\/manual\/printing\/PrintToFileTest.java","additions":12,"deletions":15,"binary":false,"changes":27,"status":"modified"}]}