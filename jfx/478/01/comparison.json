{"files":[{"patch":"@@ -49,0 +49,1 @@\n+            int totalRemovedSize = 0;\n@@ -53,1 +54,1 @@\n-                    List<E> removed = getRemovedElements(c);\n+                    List<E> removed = getRemovedElements(c, 0);\n@@ -62,0 +63,1 @@\n+                    int adjustedFrom = totalRemovedSize + c.getFrom();\n@@ -63,1 +65,1 @@\n-                        nextRemove(c.getFrom(), getRemovedModelItem(c.getFrom()));\n+                        nextRemove(c.getFrom(), getRemovedModelItem(adjustedFrom));\n@@ -65,1 +67,1 @@\n-                        nextRemove(c.getFrom(), getRemovedElements(c));\n+                        nextRemove(c.getFrom(), getRemovedElements(c, totalRemovedSize));\n@@ -67,0 +69,1 @@\n+                    totalRemovedSize += removedSize;\n@@ -120,1 +123,1 @@\n-    private List<E> getRemovedElements(ListChangeListener.Change<? extends Integer> c) {\n+    private List<E> getRemovedElements(ListChangeListener.Change<? extends Integer> c, int totalRemovedSize) {\n@@ -124,1 +127,1 @@\n-            removed.add(getRemovedModelItem(i));\n+            removed.add(getRemovedModelItem(i + totalRemovedSize));\n","filename":"modules\/javafx.controls\/src\/main\/java\/com\/sun\/javafx\/scene\/control\/SelectedItemsReadOnlyObservableList.java","additions":8,"deletions":5,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -345,0 +345,25 @@\n+    @Test public void clearAndSelectFiresDisjointRemovedChanges() {\n+        List<List<?>> removed = new ArrayList<>();\n+        model.setSelectionMode(SelectionMode.MULTIPLE);\n+        model.selectAll();\n+        model.getSelectedItems().addListener((ListChangeListener<?>) change -> {\n+            while (change.next()) {\n+                if (change.wasRemoved()) {\n+                    removed.add(new ArrayList<>(change.getRemoved()));\n+                }\n+            }\n+        });\n+\n+        model.clearAndSelect(1);\n+\n+        assertEquals(2, removed.size());\n+        List<?> firstRange = removed.get(0);\n+        List<?> secondRange = removed.get(1);\n+\n+        assertEquals(1, firstRange.size());\n+        assertEquals(\"Row 1\", isTree() ? ((TreeItem<String>)firstRange.get(0)).getValue() : firstRange.get(0));\n+\n+        assertEquals(18, secondRange.size());\n+        assertEquals(\"Long Row 3\", isTree() ? ((TreeItem<String>)secondRange.get(0)).getValue() : secondRange.get(0));\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/MultipleSelectionModelImplTest.java","additions":25,"deletions":0,"binary":false,"changes":25,"status":"modified"}]}