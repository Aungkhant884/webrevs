{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -283,2 +283,1 @@\n-        final Insets insets = getInsets();\n-        return insets.getLeft() + max + insets.getRight();\n+        return snappedLeftInset() + max + snappedRightInset();\n@@ -306,2 +305,1 @@\n-        final Insets insets = getInsets();\n-        return insets.getTop() + max + insets.getBottom();\n+        return snappedTopInset() + max + snappedBottomInset();\n@@ -312,2 +310,1 @@\n-            final Insets insets = getInsets();\n-            return areaWidth - insets.getLeft() - insets.getRight() - leftAnchor - rightAnchor;\n+            return areaWidth - snappedLeftInset() - snappedRightInset() - leftAnchor - rightAnchor;\n@@ -320,2 +317,1 @@\n-            final Insets insets = getInsets();\n-            return areaHeight - insets.getTop() - insets.getBottom() - topAnchor - bottomAnchor;\n+            return areaHeight - snappedTopInset() - snappedBottomInset() - topAnchor - bottomAnchor;\n@@ -327,1 +323,0 @@\n-        final Insets insets = getInsets();\n@@ -358,1 +353,1 @@\n-                x = insets.getLeft() + leftAnchor;\n+                x = snappedLeftInset() + leftAnchor;\n@@ -360,1 +355,1 @@\n-                x = getWidth() - insets.getRight() - rightAnchor - w;\n+                x = getWidth() - snappedRightInset() - rightAnchor - w;\n@@ -364,1 +359,1 @@\n-                y = insets.getTop() + topAnchor;\n+                y = snappedTopInset() + topAnchor;\n@@ -366,1 +361,1 @@\n-                y = getHeight() - insets.getBottom() - bottomAnchor - h;\n+                y = getHeight() - snappedBottomInset() - bottomAnchor - h;\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/scene\/layout\/AnchorPane.java","additions":9,"deletions":14,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,8 @@\n-import test.javafx.scene.layout.MockBiased;\n+import javafx.beans.property.DoubleProperty;\n+import javafx.beans.property.SimpleDoubleProperty;\n+import javafx.geometry.Bounds;\n+import javafx.scene.Scene;\n+import javafx.scene.layout.StackPane;\n+import javafx.stage.Stage;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.ValueSource;\n@@ -721,0 +728,52 @@\n+\n+    \/**\n+     * Tests the snapping of the {@link AnchorPane} with different scales.\n+     *\n+     * @param scale the scale which is used as render scale on the {@link Stage}\n+     * @see <a href=\"https:\/\/bugs.openjdk.org\/browse\/JDK-8295078\">JDK-8295078<\/a>\n+     *\/\n+    @ValueSource(doubles = { 1.0, 1.25, 1.5, 1.75, 2.0 })\n+    @ParameterizedTest\n+    void testAnchorPaneSnappingWithDifferentScales(double scale) {\n+        double padding = 9.6;\n+\n+        StackPane child = new StackPane();\n+        AnchorPane anchorpane = new AnchorPane(child);\n+        anchorpane.setStyle(\"-fx-padding: \" + padding + \"px;\");\n+\n+        AnchorPane.setTopAnchor(child, 0d);\n+        AnchorPane.setLeftAnchor(child, 0d);\n+        AnchorPane.setBottomAnchor(child, 0d);\n+        AnchorPane.setRightAnchor(child, 0d);\n+\n+        DoubleProperty renderScaleProperty = new SimpleDoubleProperty(scale);\n+\n+        Stage stage = new Stage();\n+        stage.renderScaleXProperty().bind(renderScaleProperty);\n+        stage.renderScaleYProperty().bind(renderScaleProperty);\n+\n+        int widthHeight = 500;\n+        Scene scene = new Scene(anchorpane, widthHeight, widthHeight);\n+        stage.setScene(scene);\n+        stage.show();\n+\n+        Bounds boundsInParent = child.getBoundsInParent();\n+\n+        double snappedPaddingX = child.snapPositionX(padding);\n+        double snappedPaddingY = child.snapPositionY(padding);\n+\n+        assertEquals(snappedPaddingX, boundsInParent.getMinX(), 0.0001);\n+        assertEquals(snappedPaddingY, boundsInParent.getMinY(), 0.0001);\n+\n+        double expectedMaxX = widthHeight - snappedPaddingX;\n+        assertEquals(expectedMaxX, boundsInParent.getMaxY(), 0.0001);\n+\n+        double expectedMaxY = widthHeight - snappedPaddingY;\n+        assertEquals(expectedMaxY, boundsInParent.getMaxY(), 0.0001);\n+\n+        double expectedWidth = widthHeight - snappedPaddingX * 2;\n+        assertEquals(expectedWidth, boundsInParent.getWidth(), 0.0001);\n+\n+        double expectedHeight = widthHeight - snappedPaddingY * 2;\n+        assertEquals(expectedHeight, boundsInParent.getHeight(), 0.0001);\n+    }\n","filename":"modules\/javafx.graphics\/src\/test\/java\/test\/javafx\/scene\/layout\/AnchorPaneTest.java","additions":61,"deletions":2,"binary":false,"changes":63,"status":"modified"}]}