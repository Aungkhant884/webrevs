{"files":[{"patch":"@@ -380,8 +380,14 @@\n-        double h = textHeight;\n-        if (!isIgnoreGraphic()) {\n-            final Node graphic = labeled.getGraphic();\n-            if (contentDisplay == TOP || contentDisplay == BOTTOM) {\n-                h = graphic.prefHeight(width) + gap + textHeight;\n-            } else {\n-                h = Math.max(textHeight, graphic.prefHeight(width));\n-            }\n+        double graphicHeight = graphic == null ? 0.0 :\n+                Utils.boundedSize(graphic.prefHeight(-1), graphic.minHeight(-1), graphic.maxHeight(-1));\n+\n+        \/\/ Now add on the graphic, gap, and padding as appropriate\n+        final Node graphic = labeled.getGraphic();\n+        double height;\n+        if (isIgnoreGraphic()) {\n+            height = textHeight;\n+        } else if (isIgnoreText()) {\n+            height = graphicHeight;\n+        } else if (contentDisplay == TOP || contentDisplay == BOTTOM){\n+            height = graphic.prefHeight(-1) + gap + textHeight;\n+        } else {\n+            height = Math.max(textHeight, graphic.prefHeight(-1));\n@@ -396,1 +402,1 @@\n-        return  h + padding;\n+        return  height + padding;\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/LabeledSkinBase.java","additions":15,"deletions":9,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -1252,2 +1252,1 @@\n-        final double lineHeight = Utils.computeTextHeight(label.getFont(), \" \", 0, text.getBoundsType());\n-        assertEquals(14 + 23 + lineHeight + 2, label.prefHeight(-1), 0);\n+        assertEquals(14 + 23, label.prefHeight(-1), 0);\n@@ -1263,2 +1262,1 @@\n-        final double lineHeight = Utils.computeTextHeight(label.getFont(), \" \", 0, text.getBoundsType());\n-        assertEquals(14 + 23 + lineHeight + 2, label.prefHeight(-1), 0);\n+        assertEquals(14 + 23, label.prefHeight(-1), 0);\n@@ -1315,2 +1313,1 @@\n-        final double lineHeight = Utils.computeTextHeight(label.getFont(), \" \", 0, text.getBoundsType());\n-        assertEquals(14 + 23 + lineHeight + 2, label.prefHeight(-1), 0);\n+        assertEquals(14 + 23, label.prefHeight(-1), 0);\n@@ -1326,2 +1323,1 @@\n-        final double lineHeight = Utils.computeTextHeight(label.getFont(), \" \", 0, text.getBoundsType());\n-        assertEquals(14 + 23 + lineHeight + 2, label.prefHeight(-1), 0);\n+        assertEquals(14 + 23, label.prefHeight(-1), 0);\n@@ -1810,2 +1806,1 @@\n-        final double lineHeight = Utils.computeTextHeight(label.getFont(), \" \", 0, text.getBoundsType());\n-        assertEquals(14 + 23 + lineHeight + 2, label.maxHeight(-1), 0);\n+        assertEquals(14 + 23, label.maxHeight(-1), 0);\n@@ -1821,2 +1816,1 @@\n-        final double lineHeight = Utils.computeTextHeight(label.getFont(), \" \", 0, text.getBoundsType());\n-        assertEquals(14 + 23 + lineHeight + 2, label.maxHeight(-1), 0);\n+        assertEquals(14 + 23, label.maxHeight(-1), 0);\n@@ -1873,2 +1867,1 @@\n-        final double lineHeight = Utils.computeTextHeight(label.getFont(), \" \", 0, text.getBoundsType());\n-        assertEquals(14 + 23 + lineHeight + 2, label.maxHeight(-1), 0);\n+        assertEquals(14 + 23, label.maxHeight(-1), 0);\n@@ -1884,2 +1877,1 @@\n-        final double lineHeight = Utils.computeTextHeight(label.getFont(), \" \", 0, text.getBoundsType());\n-        assertEquals(14 + 23 + lineHeight + 2, label.maxHeight(-1), 0);\n+        assertEquals(14 + 23, label.maxHeight(-1), 0);\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/skin\/LabelSkinTest.java","additions":8,"deletions":16,"binary":false,"changes":24,"status":"modified"}]}