{"files":[{"patch":"@@ -183,1 +183,4 @@\n-            value = null;  \/\/ clear cached value to avoid hard reference to stale data\n+\n+            if (!valid) {  \/\/ if still invalid after calling listeners...\n+                value = null;  \/\/ clear cached value to avoid hard reference to stale data\n+            }\n","filename":"modules\/javafx.base\/src\/main\/java\/javafx\/beans\/binding\/ObjectBinding.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -55,0 +55,18 @@\n+    @Test\n+    void invalidationWhichBecomesValidDuringCallbacksShouldReturnCorrectValue() {\n+        LazyObjectBindingStub<String> binding = new LazyObjectBindingStub<>() {\n+            @Override\n+            protected String computeValue() {\n+                return \"A\";\n+            }\n+        };\n+\n+        binding.addListener(obs -> {\n+            assertEquals(\"A\", binding.get());\n+        });\n+\n+        binding.invalidate();  \/\/ becomes valid again immediately\n+\n+        assertEquals(\"A\", binding.get());\n+    }\n+\n","filename":"modules\/javafx.base\/src\/test\/java\/test\/javafx\/beans\/value\/LazyObjectBindingTest.java","additions":18,"deletions":0,"binary":false,"changes":18,"status":"modified"}]}