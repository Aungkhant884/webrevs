{"files":[{"patch":"@@ -1127,0 +1127,7 @@\n+\n+                        if (is_raw_image) {\n+                            guchar* origdata = data;\n+                            data = (guchar*) convert_BGRA_to_RGBA((const int*) data, w * 4, h);\n+                            g_free(origdata);\n+                        }\n+\n@@ -1128,1 +1135,1 @@\n-                                w, h, w * 4, pixbufDestroyNotifyFunc, NULL);\n+                                                          w, h, w * 4, pixbufDestroyNotifyFunc, NULL);\n@@ -1238,18 +1245,2 @@\n-    cairo_t *context;\n-    cairo_surface_t *cairo_surface;\n-\n-    context = gdk_cairo_create(window);\n-\n-    guchar* pixels = is_raw_image\n-            ? (guchar*) convert_BGRA_to_RGBA((const int*) gdk_pixbuf_get_pixels(pixbuf),\n-                                                gdk_pixbuf_get_rowstride(pixbuf),\n-                                                height)\n-            : gdk_pixbuf_get_pixels(pixbuf);\n-\n-    cairo_surface = cairo_image_surface_create_for_data(\n-            pixels,\n-            CAIRO_FORMAT_ARGB32,\n-            width, height, width * 4);\n-\n-    cairo_set_source_surface(context, cairo_surface, 0, 0);\n-    cairo_set_operator(context, CAIRO_OPERATOR_SOURCE);\n+    cairo_t *context = gdk_cairo_create(window);\n+    gdk_cairo_set_source_pixbuf(context, pixbuf, 0, 0);\n@@ -1257,4 +1248,1 @@\n-\n-    if (is_raw_image) {\n-        g_free(pixels);\n-    }\n+    cairo_destroy(context);\n@@ -1266,3 +1254,0 @@\n-\n-    cairo_surface_destroy(cairo_surface);\n-    cairo_destroy(context);\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/glass_dnd.cpp","additions":11,"deletions":26,"binary":false,"changes":37,"status":"modified"}]}