{"files":[{"patch":"@@ -56,0 +56,1 @@\n+import javafx.scene.control.SkinBase;\n@@ -648,3 +649,5 @@\n-\n-        TableRow<T> tableRow = new TableRow<>();\n-        tableRow.updateTableView(tv);\n+        Callback<TableView<T>, TableRow<T>> rowFactory = tv.getRowFactory();\n+        TableRow<T> tableRow = rowFactory != null ? rowFactory.call(tv) : new TableRow<>();\n+        tableSkin.getChildren().add(tableRow);\n+        tableRow.applyCss();\n+        ((SkinBase<?>) tableRow.getSkin()).getChildren().add(cell);\n@@ -663,1 +666,1 @@\n-                tableSkin.getChildren().add(cell);\n+                tableRow.applyCss();\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TableColumnHeader.java","additions":7,"deletions":4,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -33,0 +33,1 @@\n+import javafx.scene.control.TableRow;\n@@ -255,0 +256,30 @@\n+\n+    \/**\n+     * @test\n+     * @bug 8251480 Row style must affect the required column width\n+     *\/\n+    @Test\n+    public void test_resizeColumnToFitContentRowStyle() {\n+        TableColumn column = tableView.getColumns().get(0);\n+\n+        tableView.setRowFactory(this::createSmallRow);\n+        TableColumnHeaderShim.resizeColumnToFitContent(firstColumnHeader, -1);\n+        double width = column.getWidth();\n+\n+        tableView.setRowFactory(this::createLargeRow);\n+        TableColumnHeaderShim.resizeColumnToFitContent(firstColumnHeader, -1);\n+        assertTrue(\"Column width must be greater\", width < column.getWidth());\n+    }\n+\n+    private TableRow<Person> createSmallRow(TableView<Person> param) {\n+        TableRow<Person> row = new TableRow<>();\n+        row.setStyle(\"-fx-font: 24 Amble\");\n+        return row;\n+    }\n+\n+    private TableRow<Person> createLargeRow(TableView<Person> param) {\n+        TableRow<Person> row = new TableRow<>();\n+        row.setStyle(\"-fx-font: 48 Amble\");\n+        return row;\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/skin\/TableColumnHeaderTest.java","additions":31,"deletions":0,"binary":false,"changes":31,"status":"modified"}]}