{"files":[{"patch":"@@ -765,5 +765,0 @@\n-        MultipleSelectionModel<T> selectionModel = getNode().getSelectionModel();\n-        if (selectionModel == null) {\n-            return;\n-        }\n-\n@@ -776,1 +771,5 @@\n-        selectionModel.select(focusedIndex);\n+\n+        MultipleSelectionModel<T> selectionModel = getNode().getSelectionModel();\n+        if (selectionModel != null) {\n+            selectionModel.select(focusedIndex);\n+        }\n","filename":"modules\/javafx.controls\/src\/main\/java\/com\/sun\/javafx\/scene\/control\/behavior\/ListViewBehavior.java","additions":5,"deletions":6,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -358,0 +358,8 @@\n+                if (fm == null) {\n+                    if (placeholderRegion != null && placeholderRegion.isVisible()) {\n+                        return placeholderRegion.getChildren().get(0);\n+                    } else {\n+                        return null;\n+                    }\n+                }\n+\n@@ -382,0 +390,4 @@\n+                if (sm == null) {\n+                    return FXCollections.observableArrayList();\n+                }\n+\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/ListViewSkin.java","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -35,1 +35,0 @@\n-import javafx.scene.Scene;\n@@ -61,0 +60,2 @@\n+    private StageLoader stageLoader;\n+\n@@ -74,0 +75,4 @@\n+\n+        if (stageLoader != null) {\n+            stageLoader.dispose();\n+        }\n@@ -327,2 +332,2 @@\n-        StageLoader sl = new StageLoader(vbox);\n-        sl.getStage().requestFocus();\n+        stageLoader = new StageLoader(vbox);\n+        stageLoader.getStage().requestFocus();\n@@ -331,1 +336,0 @@\n-        Scene scene = sl.getStage().getScene();\n@@ -342,2 +346,0 @@\n-\n-        sl.dispose();\n@@ -392,1 +394,1 @@\n-        StageLoader loader = new StageLoader(listView);\n+        stageLoader = new StageLoader(listView);\n@@ -395,2 +397,0 @@\n-\n-        loader.dispose();\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/ListViewMouseInputTest.java","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -52,0 +52,1 @@\n+import javafx.scene.AccessibleAttribute;\n@@ -55,0 +56,1 @@\n+import javafx.scene.control.Label;\n@@ -102,0 +104,2 @@\n+    private StageLoader stageLoader;\n+\n@@ -119,0 +123,4 @@\n+\n+        if (stageLoader != null) {\n+            stageLoader.dispose();\n+        }\n@@ -2195,1 +2203,1 @@\n-        StageLoader stageLoader = new StageLoader(listView);\n+        stageLoader = new StageLoader(listView);\n@@ -2207,1 +2215,1 @@\n-        StageLoader stageLoader = new StageLoader(listView);\n+        stageLoader = new StageLoader(listView);\n@@ -2211,0 +2219,1 @@\n+    }\n@@ -2212,1 +2221,41 @@\n-        stageLoader.dispose();\n+    @Test\n+    public void testQueryAccessibleAttributeSelectedItemsWithNullSelectionModel() {\n+        listView.getItems().addAll(\"1\", \"2\");\n+        listView.setSelectionModel(null);\n+\n+        stageLoader = new StageLoader(listView);\n+\n+        Object result = listView.queryAccessibleAttribute(AccessibleAttribute.SELECTED_ITEMS);\n+\n+        \/\/ Should be an empty observable array list\n+        assertEquals(FXCollections.observableArrayList(), result);\n+    }\n+\n+    @Test\n+    public void testQueryAccessibleAttributeFocusItemWithNullFocusModel() {\n+        listView.getItems().addAll(\"1\", \"2\");\n+        listView.setFocusModel(null);\n+\n+        stageLoader = new StageLoader(listView);\n+\n+        Object result = listView.queryAccessibleAttribute(AccessibleAttribute.FOCUS_ITEM);\n+\n+        assertNull(result);\n+    }\n+\n+    @Test\n+    public void testQueryAccessibleAttributeFocusItemWithNullFocusModelAndNoItems() {\n+        listView.setFocusModel(null);\n+        Label placeholderNode = new Label(\"No items set\");\n+        listView.setPlaceholder(placeholderNode);\n+\n+        stageLoader = new StageLoader(listView);\n+\n+        Toolkit.getToolkit().firePulse();\n+        Toolkit.getToolkit().firePulse();\n+\n+        Object result = listView.queryAccessibleAttribute(AccessibleAttribute.FOCUS_ITEM);\n+\n+        \/\/ Should be the placeholder node we set above\n+        assertNotNull(result);\n+        assertSame(placeholderNode, result);\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/ListViewTest.java","additions":52,"deletions":3,"binary":false,"changes":55,"status":"modified"}]}