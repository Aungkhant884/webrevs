{"files":[{"patch":"@@ -33,0 +33,1 @@\n+import java.awt.GraphicsConfiguration;\n@@ -41,1 +42,0 @@\n-import java.awt.GraphicsConfiguration;\n@@ -623,6 +623,7 @@\n-        newScaleFactorX = GraphicsEnvironment.getLocalGraphicsEnvironment().\n-                          getDefaultScreenDevice().getDefaultConfiguration().\n-                          getDefaultTransform().getScaleX();\n-        newScaleFactorY = GraphicsEnvironment.getLocalGraphicsEnvironment().\n-                          getDefaultScreenDevice().getDefaultConfiguration().\n-                          getDefaultTransform().getScaleY();\n+        GraphicsConfiguration config = getGraphicsConfiguration();\n+        if (config == null) {\n+            config = GraphicsEnvironment.getLocalGraphicsEnvironment().\n+                     getDefaultScreenDevice().getDefaultConfiguration();\n+        }\n+        newScaleFactorX = config.getDefaultTransform().getScaleX();\n+        newScaleFactorY = config.getDefaultTransform().getScaleY();\n@@ -642,0 +643,6 @@\n+            Platform.runLater(() -> {\n+                if (stage != null) {\n+                   stage.setRenderScaleX(scaleFactorX);\n+                   stage.setRenderScaleY(scaleFactorY);\n+                }\n+            });\n@@ -823,6 +830,7 @@\n-            newScaleFactorX = GraphicsEnvironment.getLocalGraphicsEnvironment().\n-                              getDefaultScreenDevice().getDefaultConfiguration().\n-                              getDefaultTransform().getScaleX();\n-            newScaleFactorY = GraphicsEnvironment.getLocalGraphicsEnvironment().\n-                              getDefaultScreenDevice().getDefaultConfiguration().\n-                              getDefaultTransform().getScaleY();\n+            GraphicsConfiguration config = getGraphicsConfiguration();\n+            if (config == null) {\n+                config = GraphicsEnvironment.getLocalGraphicsEnvironment().\n+                         getDefaultScreenDevice().getDefaultConfiguration();\n+            }\n+            newScaleFactorX = config.getDefaultTransform().getScaleX();\n+            newScaleFactorY = config.getDefaultTransform().getScaleY();\n@@ -836,0 +844,6 @@\n+                Platform.runLater(() -> {\n+                    if (stage != null) {\n+                       stage.setRenderScaleX(scaleFactorX);\n+                       stage.setRenderScaleY(scaleFactorY);\n+                    }\n+                });\n","filename":"modules\/javafx.swing\/src\/main\/java\/javafx\/embed\/swing\/JFXPanel.java","additions":27,"deletions":13,"binary":false,"changes":40,"status":"modified"}]}