{"files":[{"patch":"@@ -93,0 +93,2 @@\n+import java.util.stream.Collectors;\n+\n@@ -1113,1 +1115,3 @@\n-        final int totalMenus = getSkinnable().getMenus().size();\n+        List<Menu> visibleMenus = getSkinnable().getMenus().stream().filter(Menu::isVisible)\n+                .collect(Collectors.toList());\n+        final int totalMenus = visibleMenus.size();\n@@ -1117,1 +1121,1 @@\n-        \/\/ Traverse all menus in menubar to find nextIndex\n+        \/\/ Traverse all visible menus in menubar to find nextIndex\n@@ -1129,1 +1133,1 @@\n-            if (getSkinnable().getMenus().get(nextIndex).isDisable()) {\n+            if (visibleMenus.get(nextIndex).isDisable()) {\n@@ -1139,1 +1143,1 @@\n-        return Optional.of(new Pair<>(getSkinnable().getMenus().get(nextIndex), nextIndex));\n+        return Optional.of(new Pair<>(visibleMenus.get(nextIndex), nextIndex));\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/MenuBarSkin.java","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -31,0 +31,6 @@\n+import java.util.List;\n+\n+import org.junit.Before;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+\n@@ -33,1 +39,0 @@\n-import test.com.sun.javafx.pgstub.StubToolkit;\n@@ -35,0 +40,1 @@\n+\n@@ -42,3 +48,0 @@\n-import javafx.stage.Stage;\n-\n-import java.util.List;\n@@ -46,4 +49,5 @@\n-\n-import org.junit.Before;\n-import org.junit.BeforeClass;\n-import org.junit.Test;\n+import javafx.scene.control.skin.MenuBarSkinShim;\n+import javafx.scene.input.KeyCode;\n+import javafx.stage.Stage;\n+import test.com.sun.javafx.pgstub.StubToolkit;\n+import test.com.sun.javafx.scene.control.infrastructure.KeyEventFirer;\n@@ -197,0 +201,10 @@\n+    @Test\n+    public void testInvisibleMenuNavigation() {\n+        menubar.getMenus().get(0).setVisible(false);\n+        MenuBarSkinShim.setFocusedMenuIndex(skin, 0);\n+\n+        KeyEventFirer keyboard = new KeyEventFirer(menubar);\n+        keyboard.doKeyPress(KeyCode.LEFT);\n+        tk.firePulse();\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/skin\/MenuBarSkinTest.java","additions":22,"deletions":8,"binary":false,"changes":30,"status":"modified"}]}