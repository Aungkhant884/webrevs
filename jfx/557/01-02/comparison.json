{"files":[{"patch":"@@ -29,0 +29,1 @@\n+import org.junit.After;\n@@ -32,1 +33,0 @@\n-import static org.junit.Assert.fail;\n@@ -72,3 +72,0 @@\n-        \/\/This step is not needed (Just to make sure StubToolkit is loaded into VM)\n-        tk = (StubToolkit)Toolkit.getToolkit();\n-\n@@ -82,0 +79,7 @@\n+\n+        \/\/This step is not needed (Just to make sure StubToolkit is loaded into VM)\n+        tk = (StubToolkit)Toolkit.getToolkit();\n+    }\n+\n+    @After public void cleanUp() {\n+        Thread.currentThread().setUncaughtExceptionHandler(null);\n@@ -171,5 +175,1 @@\n-        try {\n-            box.setValue(items.get(1));\n-        } catch (Exception e) {\n-            fail(\"ChoiceBox.setValue() should not throw an exception.\");\n-        }\n+        box.setValue(items.get(1));\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/ChoiceBoxTest.java","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -288,1 +288,1 @@\n-    @Test public void testNullSelectionModelDoesNotThrowNPEOnValueChange() {\n+    @Test public void testNullSelectionModelDoesNotThrowNPEInSkinOnValueChange() {\n@@ -302,5 +302,1 @@\n-        try {\n-            comboBox.setValue(items.get(1));\n-        } catch (Exception e) {\n-            fail(\"ComboBox.setValue() should not throw an exception.\");\n-        }\n+        comboBox.setValue(items.get(1));\n@@ -311,0 +307,21 @@\n+    @Test public void testNullSelectionModelDoesNotThrowNPEOnValueChange() {\n+        ObservableList<String> items = FXCollections.observableArrayList(\"ITEM1\", \"ITEM2\");\n+\n+        ListCell<String> buttonCell = new ListCell<>() {\n+            @Override\n+            protected void updateItem(String item, boolean empty) {\n+                super.updateItem(item, empty);\n+                setText(item);\n+            }\n+        };\n+\n+        ComboBox<String> comboBox = new ComboBox<>();\n+        comboBox.setButtonCell(buttonCell);\n+        comboBox.setItems(items);\n+        comboBox.setSelectionModel(null);\n+\n+        comboBox.setValue(items.get(1));\n+\n+        assertEquals(items.get(1), comboBox.getValue());\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/ComboBoxTest.java","additions":23,"deletions":6,"binary":false,"changes":29,"status":"modified"}]}