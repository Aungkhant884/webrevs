{"files":[{"patch":"@@ -567,0 +567,3 @@\n+            SingleSelectionModel<T> selectionModel = comboBox.getSelectionModel();\n+            if (selectionModel == null) return;\n+\n@@ -568,1 +571,1 @@\n-            comboBox.getSelectionModel().select(index);\n+            selectionModel.select(index);\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/ComboBoxListViewSkin.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -302,0 +302,1 @@\n+        \/\/ Should not throw an NPE.\n@@ -304,0 +305,1 @@\n+        assertEquals(items.get(1), comboBox.getValue());\n@@ -310,8 +312,0 @@\n-        ListCell<String> buttonCell = new ListCell<>() {\n-            @Override\n-            protected void updateItem(String item, boolean empty) {\n-                super.updateItem(item, empty);\n-                setText(item);\n-            }\n-        };\n-        comboBox.setButtonCell(buttonCell);\n@@ -323,0 +317,1 @@\n+        \/\/ Should not throw an NPE.\n@@ -324,2 +319,0 @@\n-\n-        assertEquals(items.get(1), comboBox.getButtonCell().getText());\n@@ -334,1 +327,0 @@\n-        comboBox.setEditable(false);\n@@ -336,1 +328,2 @@\n-        assertNull(comboBox.getValue());\n+        \/\/ Should not throw an NPE.\n+        comboBox.setEditable(false);\n@@ -346,0 +339,1 @@\n+        \/\/ Should not throw an NPE.\n@@ -351,0 +345,12 @@\n+    @Test public void testNullSelectionModelDoesNotThrowNPEOnListViewSelect() {\n+        ObservableList<String> items = FXCollections.observableArrayList(\"ITEM1\", \"ITEM2\");\n+\n+        comboBox.setItems(items);\n+        comboBox.setSelectionModel(null);\n+        ListView<String> listView = (ListView<String>) ((ComboBoxListViewSkin<String>) comboBox.getSkin())\n+                .getPopupContent();\n+\n+        \/\/ Should not throw an NPE.\n+        listView.getSelectionModel().select(1);\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/ComboBoxTest.java","additions":18,"deletions":12,"binary":false,"changes":30,"status":"modified"}]}