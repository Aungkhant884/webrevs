{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,0 +41,5 @@\n+    \/**\n+     * Constant to consider floating-point arithmetic precision.\n+      *\/\n+    private static final double EPSILON = .0000001;\n+\n@@ -226,1 +231,1 @@\n-        if (Math.abs(colWidth - tableWidth) > 1) {\n+        if (Math.abs(colWidth - tableWidth) > EPSILON) {\n@@ -251,1 +256,1 @@\n-                    if (Math.abs(totalLowerBound - totalUpperBound) < .0000001) {\n+                    if (Math.abs(totalLowerBound - totalUpperBound) < EPSILON) {\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/TableUtil.java","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -5798,0 +5798,48 @@\n+\n+    \/\/ see JDK-8089009\n+    @Test public void testHScrollBarVisibilityForConstrainedTable() {\n+        TableColumn firstNameCol = new TableColumn(\"First Name\");\n+        firstNameCol.setCellValueFactory(new PropertyValueFactory<Person, String>(\"firstName\"));\n+\n+        TableColumn lastNameCol = new TableColumn(\"Last Name\");\n+        lastNameCol.setCellValueFactory(new PropertyValueFactory<Person, String>(\"lastName\"));\n+\n+        TableColumn emailCol = new TableColumn(\"Email\");\n+        emailCol.setCellValueFactory(new PropertyValueFactory<Person, String>(\"email\"));\n+\n+        final double initialWidth = 500;\n+        TableView<Person> table = new TableView<>(personTestData);\n+        table.setMinWidth(initialWidth);\n+        table.getColumns().addAll(firstNameCol, lastNameCol, emailCol);\n+        table.setItems(personTestData);\n+        table.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);\n+\n+        StageLoader sl = new StageLoader(table);\n+        Toolkit.getToolkit().firePulse();\n+\n+        ScrollBar horizontalBar = VirtualFlowTestUtils.getVirtualFlowHorizontalScrollbar(table);\n+        assertNotNull(horizontalBar);\n+        assertEquals(false, horizontalBar.isVisible());\n+        assertTrue(table.getWidth() == initialWidth);\n+\n+        \/\/ Reduce table width by 10px\n+        table.setMinWidth(initialWidth-10);\n+        Toolkit.getToolkit().firePulse();\n+        assertTrue(table.getWidth() == initialWidth-10);\n+        assertEquals(false, horizontalBar.isVisible());\n+\n+        \/\/ Reset table width\n+        table.setMinWidth(initialWidth);\n+        Toolkit.getToolkit().firePulse();\n+        assertTrue(table.getWidth() == initialWidth);\n+        assertEquals(false, horizontalBar.isVisible());\n+\n+        \/\/ Reduce table width by 1px\n+        table.setMinWidth(initialWidth-1);\n+        Toolkit.getToolkit().firePulse();\n+        assertTrue(table.getWidth() == initialWidth-1);\n+        assertEquals(false, horizontalBar.isVisible());\n+\n+        sl.dispose();\n+    }\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/TableViewTest.java","additions":48,"deletions":0,"binary":false,"changes":48,"status":"modified"}]}