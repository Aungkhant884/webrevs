{"files":[{"patch":"@@ -31,1 +31,0 @@\n-import javafx.beans.WeakInvalidationListener;\n@@ -76,2 +75,0 @@\n-\n-\n@@ -99,1 +96,1 @@\n-        control.indexProperty().addListener(new WeakInvalidationListener((x) -> {\n+        registerChangeListener(control.indexProperty(), (x) -> {\n@@ -101,1 +98,1 @@\n-        }));\n+        });\n@@ -103,1 +100,1 @@\n-        control.treeItemProperty().addListener(new WeakInvalidationListener((x) -> {\n+        registerChangeListener(control.treeItemProperty(), (obs) -> {\n@@ -108,1 +105,1 @@\n-        }));\n+        });\n@@ -117,1 +114,1 @@\n-            getSkinnable().treeTableViewProperty().addListener(new WeakInvalidationListener((x) -> {\n+            registerInvalidationListener(getSkinnable().treeTableViewProperty(), (x) -> {\n@@ -120,1 +117,1 @@\n-            }));\n+            });\n@@ -122,1 +119,1 @@\n-            treeTableView.treeColumnProperty().addListener(new WeakInvalidationListener((x) -> {\n+            registerChangeListener(treeTableView.treeColumnProperty(), (x) -> {\n@@ -130,1 +127,1 @@\n-            }));\n+            });\n@@ -134,6 +131,4 @@\n-                fixedCellSizeProperty.addListener(new WeakInvalidationListener((x) -> {\n-                    fixedCellSize = fixedCellSizeProperty.get();\n-                    fixedCellSizeEnabled = fixedCellSize > 0;\n-                }));\n-                fixedCellSize = fixedCellSizeProperty.get();\n-                fixedCellSizeEnabled = fixedCellSize > 0;\n+                registerChangeListener(fixedCellSizeProperty, (x) -> {\n+                    updateCachedFixedSize();\n+                });\n+                updateCachedFixedSize();\n@@ -147,3 +142,6 @@\n-                    getVirtualFlow().widthProperty().addListener(new WeakInvalidationListener((x) -> {\n-                        treeTableView.requestLayout();\n-                    }));\n+                    registerChangeListener(getVirtualFlow().widthProperty(), (x) -> {\n+                        if (getSkinnable() != null) {\n+                            TreeTableView<T> t = getSkinnable().getTreeTableView();\n+                            t.requestLayout();\n+                        }\n+                    });\n@@ -155,0 +153,12 @@\n+    private void updateCachedFixedSize() {\n+        if (getSkinnable() != null) {\n+            TreeTableView<T> t = getSkinnable().getTreeTableView();\n+            if (t != null) {\n+                DoubleProperty p = t.fixedCellSizeProperty();\n+                if (p != null) {\n+                    fixedCellSize = p.get();\n+                    fixedCellSizeEnabled = fixedCellSize > 0;\n+                }\n+            }\n+        }\n+    }\n","filename":"modules\/javafx.controls\/src\/main\/java\/javafx\/scene\/control\/skin\/TreeTableRowSkin.java","additions":30,"deletions":20,"binary":false,"changes":50,"status":"modified"},{"patch":"@@ -212,4 +212,5 @@\n-        int top = 11;\n-        int right = 23;\n-        int bottom = 37;\n-        int left = 49;\n+        int top = 10;\n+        int right = 20;\n+        int bottom = 30;\n+        int left = 40;\n+        double fixed = 24;\n@@ -219,1 +220,1 @@\n-        treeTableView.setFixedCellSize(23);\n+        treeTableView.setFixedCellSize(fixed);\n@@ -230,0 +231,2 @@\n+        assertEquals(fixed, minHeight, 0);\n+\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/skin\/TreeTableRowSkinTest.java","additions":8,"deletions":5,"binary":false,"changes":13,"status":"modified"}]}