{"files":[{"patch":"@@ -514,3 +514,0 @@\n-                    ctx->process_map();\n-                    break;\n-                case GDK_UNMAP:\n@@ -518,0 +515,1 @@\n+                case GDK_UNMAP:\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/GlassApplication.cpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -563,1 +563,7 @@\n-    return GDK_WINDOW_XID(ctx->get_gdk_window());\n+    GdkWindow *win = ctx->get_gdk_window();\n+\n+    if (win == NULL) {\n+        return 0;\n+    }\n+\n+    return GDK_WINDOW_XID(win);\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/GlassWindow.cpp","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -663,13 +663,6 @@\n-#ifdef GLASS_GTK3\n-    GdkRGBA rgba = {0, 0, 0, 1.};\n-    rgba.red = r;\n-    rgba.green = g;\n-    rgba.blue = b;\n-    gdk_window_set_background_rgba(gdk_window, &rgba);\n-#else\n-    GdkColor color;\n-    color.red   = (guint16) (r * 65535);\n-    color.green = (guint16) (g * 65535);\n-    color.blue  = (guint16) (b * 65535);\n-    gtk_widget_modify_bg(gtk_widget, GTK_STATE_NORMAL, &color);\n-#endif\n+    GdkRGBA transparent;\n+    transparent.red = 0.0;\n+    transparent.green = 0.0;\n+    transparent.blue = 0.0;\n+    transparent.alpha = 0.0;\n+    gtk_widget_override_background_color(gtk_widget, GTK_STATE_FLAG_NORMAL, &transparent);\n@@ -700,0 +693,6 @@\n+\n+static void event_realize(GtkWidget* self, gpointer user_data) {\n+    WindowContextTop *ctx = ((WindowContextTop *) user_data);\n+    ctx->process_realize();\n+}\n+\n@@ -746,1 +745,0 @@\n-            map_received(false),\n@@ -750,0 +748,1 @@\n+    gdk_windowManagerFunctions = wmf;\n@@ -752,0 +751,1 @@\n+    g_signal_connect(G_OBJECT(gtk_widget), \"realize\", G_CALLBACK(event_realize), this);\n@@ -783,1 +783,0 @@\n-    glass_gtk_configure_transparency_and_realize(gtk_widget, frame_type == TRANSPARENT);\n@@ -785,0 +784,1 @@\n+    glass_configure_window_transparency(gtk_widget, frame_type == TRANSPARENT);\n@@ -786,11 +786,0 @@\n-    gdk_window = gtk_widget_get_window(gtk_widget);\n-    gdk_window_set_events(gdk_window, GDK_FILTERED_EVENTS_MASK);\n-\n-    g_object_set_data_full(G_OBJECT(gdk_window), GDK_WINDOW_DATA_CONTEXT, this, NULL);\n-\n-    gdk_window_register_dnd(gdk_window);\n-\n-    gdk_windowManagerFunctions = wmf;\n-    if (wmf) {\n-        gdk_window_set_functions(gdk_window, wmf);\n-    }\n@@ -801,1 +790,0 @@\n-        request_frame_extents();\n@@ -986,0 +974,12 @@\n+void WindowContextTop::process_realize() {\n+    gdk_window = gtk_widget_get_window(gtk_widget);\n+    request_frame_extents();\n+    gdk_window_set_events(gdk_window, GDK_FILTERED_EVENTS_MASK);\n+    g_object_set_data_full(G_OBJECT(gdk_window), GDK_WINDOW_DATA_CONTEXT, this, NULL);\n+    gdk_window_register_dnd(gdk_window);\n+\n+    if (gdk_windowManagerFunctions) {\n+        gdk_window_set_functions(gdk_window, gdk_windowManagerFunctions);\n+    }\n+}\n+\n@@ -1038,4 +1038,0 @@\n-void WindowContextTop::process_map() {\n-    map_received = true;\n-}\n-\n@@ -1198,1 +1194,1 @@\n-    if (map_received) {\n+    if (is_visible()) {\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/glass_window.cpp","additions":28,"deletions":32,"binary":false,"changes":60,"status":"modified"},{"patch":"@@ -133,0 +133,1 @@\n+    virtual void process_realize() = 0;\n@@ -145,1 +146,0 @@\n-    virtual void process_map() = 0;\n@@ -183,1 +183,1 @@\n-    GdkWindow* gdk_window;\n+    GdkWindow* gdk_window = NULL;\n@@ -272,1 +272,0 @@\n-    bool map_received;\n@@ -282,0 +281,2 @@\n+\n+    void process_realize();\n@@ -319,1 +320,0 @@\n-    void process_map();\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/gtk\/glass_window.h","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -207,4 +207,0 @@\n-        \/\/ Skip on Linux due to:\n-        \/\/  - JDK-8316423\n-        assumeTrue(!PlatformUtil.isLinux());\n-\n","filename":"tests\/system\/src\/test\/java\/test\/robot\/javafx\/stage\/StageAttributesTest.java","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"}]}