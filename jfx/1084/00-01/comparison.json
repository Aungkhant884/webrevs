{"files":[{"patch":"@@ -642,0 +642,3 @@\n+    \/* Notify accessible peer about hierarchy change to invalidate parent *\/\n+    private native void _invalidateParent(long accessible);\n+\n@@ -791,0 +794,3 @@\n+                if (peer != 0L) {\n+                    _invalidateParent(peer);\n+                }\n@@ -798,1 +804,1 @@\n-            long id = view != null ? view.getNativeView() : peer;\n+            long id = view != null ? view.getNativeView() : getNativeAccessible();\n@@ -972,5 +978,0 @@\n-\n-    private long accessibilityAttributeRole() {\n-        return -1;\n-    }\n-\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/mac\/MacAccessible.java","additions":7,"deletions":6,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -630,12 +630,0 @@\n-\/*\n- * Class:     com_sun_glass_ui_mac_MacAccessible\n- * Method:    NSAccessibilityUnignoredAncestor\n- * Signature: (J)J\n- *\/\n-JNIEXPORT jlong JNICALL Java_com_sun_glass_ui_mac_MacAccessible_NSAccessibilityUnignoredAncestor\n-  (JNIEnv *env, jclass jClass, jlong macAccessible)\n-{\n-    GlassAccessible* accessible = (GlassAccessible*)jlong_to_ptr(macAccessible);\n-    return ptr_to_jlong(NSAccessibilityUnignoredAncestor(accessible));\n-}\n-\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/GlassAccessible.m","additions":0,"deletions":12,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -32,0 +32,1 @@\n+id parent;\n@@ -42,1 +43,1 @@\n-jmethodID jAccessibilityAttributeNames;\n\\ No newline at end of file\n+jmethodID jAccessibilityAttributeNames;\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/a11y\/AccessibleBase.h","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+#import \"com_sun_glass_ui_mac_MacVariant.h\"\n@@ -40,1 +41,1 @@\n-    rolesMap = [[NSMutableDictionary alloc] initWithCapacity:1];\n+    rolesMap = [[NSMutableDictionary alloc] initWithCapacity:4];\n@@ -43,0 +44,4 @@\n+    [rolesMap setObject:@\"ButtonAccessibility\" forKey:@\"DECREMENT_BUTTON\"];\n+    [rolesMap setObject:@\"ButtonAccessibility\" forKey:@\"INCREMENT_BUTTON\"];\n+    [rolesMap setObject:@\"ButtonAccessibility\" forKey:@\"SPLIT_MENU_BUTTON\"];\n+\n@@ -64,0 +69,1 @@\n+    self->parent = nil;\n@@ -105,6 +111,10 @@\n-    jobject jresult = NULL;\n-    GET_MAIN_JENV;\n-    if (env == NULL) return NULL;\n-    jresult = (jobject)(*env)->CallLongMethod(env, self->jAccessible, jAccessibilityAttributeValue, (jlong)@\"AXParent\");\n-    GLASS_CHECK_EXCEPTION(env);\n-    return variantToID(env, jresult);\n+    if (parent == nil) {\n+        jobject jresult = NULL;\n+        GET_MAIN_JENV;\n+        if (env == NULL) return NULL;\n+        jresult = (jobject)(*env)->CallLongMethod(env, self->jAccessible, jAccessibilityAttributeValue,\n+                                                  (jlong) @\"AXParent\");\n+        GLASS_CHECK_EXCEPTION(env);\n+        parent = variantToID(env, jresult);\n+    }\n+    return parent;\n@@ -144,0 +154,5 @@\n+- (void)clearParent\n+{\n+    parent = nil;\n+}\n+\n@@ -173,0 +188,13 @@\n+}\n+\n+\/*\n+ * Class:     com_sun_glass_ui_mac_MacAccessible\n+ * Method:    NSAccessibilityUnignoredAncestor\n+ * Signature: (J)J\n+ *\/\n+JNIEXPORT jlong JNICALL Java_com_sun_glass_ui_mac_MacAccessible_NSAccessibilityUnignoredAncestor\n+        (JNIEnv *env, jclass jClass, jlong macAccessible)\n+{\n+    NSObject* accessible = (NSObject*)jlong_to_ptr(macAccessible);\n+    return ptr_to_jlong(NSAccessibilityUnignoredAncestor(accessible));\n+}\n@@ -174,0 +202,12 @@\n+\/*\n+ * Class:     com_sun_glass_ui_mac_MacAccessible\n+ * Method:    _invalidateParent\n+ * Signature: (J)V\n+ *\/\n+JNIEXPORT void JNICALL Java_com_sun_glass_ui_mac_MacAccessible__1invalidateParent\n+(JNIEnv *env, jobject jAccessible, long macAccessible)\n+{\n+    NSObject* accessible = (NSObject*)jlong_to_ptr(macAccessible);\n+    if ([accessible respondsToSelector:@selector(clearParent)]) {\n+        [accessible clearParent];\n+    }\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/a11y\/AccessibleBase.m","additions":47,"deletions":7,"binary":false,"changes":54,"status":"modified"},{"patch":"@@ -37,1 +37,0 @@\n-\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/mac\/a11y\/ButtonAccessibility.h","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}