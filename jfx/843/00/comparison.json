{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -84,0 +84,4 @@\n+    public static void dispatchMenuEventFromNative(int x, int y, int xAbs, int yAbs, boolean isKeyboardTrigger) {\n+        instance.processor.dispatchMenuEvent(x, y, xAbs, yAbs, isKeyboardTrigger);\n+    }\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/monocle\/AndroidInputDeviceRegistry.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -73,0 +73,14 @@\n+    synchronized void dispatchMenuEvent(int x, int y, int xAbs, int yAbs, boolean isKeyboardTrigger) {\n+        Platform.runLater(() -> {\n+            MonocleWindow window = MonocleWindowManager.getInstance().getFocusedWindow();\n+            if (window == null) {\n+                return;\n+            }\n+            MonocleView view = (MonocleView) window.getView();\n+            if (view == null) {\n+                return;\n+            }\n+            RunnableProcessor.runLater(() -> view.notifyMenu(x, y, xAbs, yAbs, isKeyboardTrigger));\n+        });\n+    }\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/glass\/ui\/monocle\/AndroidInputProcessor.java","additions":15,"deletions":1,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,0 +40,1 @@\n+static jmethodID monocle_dispatchMenuEventFromNative;\n@@ -66,0 +67,3 @@\n+    monocle_dispatchMenuEventFromNative = (*env)->GetStaticMethodID(\n+                                             env, jAndroidInputDeviceRegistryClass, \"dispatchMenuEventFromNative\",\n+                                             \"(IIIIZ)V\");\n@@ -142,0 +146,15 @@\n+void androidJfx_gotMenuEvent(int x, int y, int xAbs, int yAbs, bool isKeyboardTrigger) {\n+    initializeFromNative();\n+    if (javaEnv == NULL) {\n+        GLASS_LOG_FINE(\"javaEnv still null, not ready to process menu events\");\n+        return;\n+    }\n+    if (deviceRegistered == 0) {\n+        deviceRegistered = 1;\n+        GLASS_LOG_FINE(\"This is the first time we have a menu event, register device now\");\n+        (*javaEnv)->CallStaticVoidMethod(javaEnv, jAndroidInputDeviceRegistryClass, monocle_registerDevice);\n+    }\n+    (*javaEnv)->CallStaticVoidMethod(javaEnv, jAndroidInputDeviceRegistryClass, monocle_dispatchMenuEventFromNative,\n+                                     x, y, xAbs, yAbs, isKeyboardTrigger);\n+}\n+\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/monocle\/android\/nativeBridge.c","additions":20,"deletions":1,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -27,0 +27,1 @@\n+#include <stdbool.h>\n@@ -32,0 +33,1 @@\n+void androidJfx_gotMenuEvent(int x, int y, int xAbs, int yAbs, bool isKeyboardTrigger);\n","filename":"modules\/javafx.graphics\/src\/main\/native-glass\/monocle\/android\/nativeBridge.h","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"}]}