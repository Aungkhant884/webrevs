{"files":[{"patch":"@@ -182,6 +182,4 @@\n-            if (ambientRed != 0.0f || ambientGreen != 0.0f || ambientBlue != 0.0f) {\n-                ambientRed = Utils.clamp(0, ambientRed, 1);\n-                ambientGreen = Utils.clamp(0, ambientGreen, 1);\n-                ambientBlue = Utils.clamp(0, ambientBlue, 1);\n-                meshView.setAmbientLight(ambientRed, ambientGreen, ambientBlue);\n-            }\n+            ambientRed = Utils.clamp(0, ambientRed, 1);\n+            ambientGreen = Utils.clamp(0, ambientGreen, 1);\n+            ambientBlue = Utils.clamp(0, ambientBlue, 1);\n+            meshView.setAmbientLight(ambientRed, ambientGreen, ambientBlue);\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/sg\/prism\/NGShape3D.java","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -96,4 +96,0 @@\n-        camLight.lightOnProperty().bind(camLightOn);\n-        camLight.getTransforms().addAll(camera.getTransforms());\n-        camLightOn.set(false);\n-\n@@ -101,1 +97,0 @@\n-        rootGroup.getChildren().add(camLight);\n@@ -121,1 +116,1 @@\n-            if (e.getEventType() == ScrollEvent.SCROLL_STARTED)\n+            if (e.getEventType() == ScrollEvent.SCROLL_STARTED) {\n@@ -123,0 +118,1 @@\n+            }\n@@ -124,1 +120,1 @@\n-            else\n+            else {\n@@ -126,0 +122,1 @@\n+            }\n","filename":"tests\/performance\/3DLighting\/attenuation\/CameraScene3D.java","additions":4,"deletions":7,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -56,1 +56,1 @@\n-    final AmbientLight[] ambientLights = new AmbientLight[] {ambientLight1, ambientLight2, ambientLight3};\n+    final List<AmbientLight> ambientLights = List.of(ambientLight1, ambientLight2, ambientLight3);\n@@ -61,1 +61,1 @@\n-    final DirectionalLight[] directionalLights = new DirectionalLight[] {directionalLight1, directionalLight2, directionalLight3};\n+    final List<DirectionalLight> directionalLights = List.of(directionalLight1, directionalLight2, directionalLight3);\n@@ -66,1 +66,1 @@\n-    final PointLight[] pointLights = new PointLight[] {pointLight1, pointLight2, pointLight3};\n+    final List<PointLight> pointLights = List.of(pointLight1, pointLight2, pointLight3);\n@@ -71,1 +71,1 @@\n-    final SpotLight[] spotLights = new SpotLight[] {spotLight1, spotLight2, spotLight3};\n+    final List<SpotLight> spotLights = List.of(spotLight1, spotLight2, spotLight3);\n@@ -74,0 +74,1 @@\n+    private Group lightsGroup = new Group();\n@@ -81,12 +82,4 @@\n-        for (var light : ambientLights) {\n-            addLight(light);\n-        }\n-        for (var light : directionalLights) {\n-            addLight(light);\n-        }\n-        for (var light : pointLights) {\n-            setupLight(light);\n-        }\n-        for (var light : spotLights) {\n-            setupLight(light);\n-        }\n+        ambientLights.forEach(this::addLight);\n+        directionalLights.forEach(this::addLight);\n+        pointLights.forEach(this::setupLight);\n+        spotLights.forEach(this::setupLight);\n@@ -102,1 +95,1 @@\n-        rootGroup.getChildren().add(shapeGroup);\n+        rootGroup.getChildren().addAll(lightsGroup, shapeGroup);\n@@ -123,1 +116,9 @@\n-        rootGroup.getChildren().add(light);\n+        lightsGroup.getChildren().add(light);\n+    }\n+\n+    void forceDefaultLight(boolean force) {\n+        if (force) {\n+            rootGroup.getChildren().remove(lightsGroup);\n+        } else {\n+            rootGroup.getChildren().add(lightsGroup);\n+        }\n","filename":"tests\/performance\/3DLighting\/attenuation\/Environment.java","additions":19,"deletions":18,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+import javafx.scene.control.CheckBox;\n@@ -69,13 +70,11 @@\n-        var controls = new VBox(0, sphereControls, meshControls, new HBox(5, playButton, stopButton), boxesControls);\n-        for (var light : environment.ambientLights) {\n-            controls.getChildren().add(Controls.createLightControls(light, null));\n-        }\n-        for (var light : environment.pointLights) {\n-            controls.getChildren().add(Controls.addPointLightControls(light));\n-        }\n-        for (var light : environment.spotLights) {\n-            controls.getChildren().add(Controls.addSpotLightControls(light));\n-        }\n-        for (var light : environment.directionalLights) {\n-            controls.getChildren().add(Controls.addDirectionalLightControls(light));\n-        }\n+        var animationControls = new HBox(5, playButton, stopButton);\n+\n+        var defaultLightButton = new CheckBox(\"Force default light\");\n+        defaultLightButton.setOnAction(e -> environment.forceDefaultLight(defaultLightButton.isSelected()));\n+\n+        var controls = new VBox(sphereControls, meshControls, animationControls, boxesControls, defaultLightButton);\n+\n+        environment.ambientLights.forEach(light -> controls.getChildren().add(Controls.createLightControls(light, null)));\n+        environment.pointLights.forEach(light -> controls.getChildren().add(Controls.addPointLightControls(light)));\n+        environment.spotLights.forEach(light -> controls.getChildren().add(Controls.addSpotLightControls(light)));\n+        environment.directionalLights.forEach(light -> controls.getChildren().add(Controls.addDirectionalLightControls(light)));\n","filename":"tests\/performance\/3DLighting\/attenuation\/LightingSample.java","additions":12,"deletions":13,"binary":false,"changes":25,"status":"modified"}]}