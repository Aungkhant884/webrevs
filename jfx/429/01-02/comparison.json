{"files":[{"patch":"@@ -37,0 +37,1 @@\n+import org.junit.BeforeClass;\n@@ -40,4 +41,9 @@\n-\n-    @Test\n-    public void sanityTestListenerMapShouldBeEmpty() {\n-        assertEquals(0, ControlAcceleratorSupportShim.get_ListenerMapSize());\n+    private static int numListeners;\n+\n+    @BeforeClass\n+    public static void setup() throws Exception {\n+        for (int i = 0; i < 4; i++) {\n+            System.gc();\n+            Thread.sleep(500);\n+        }\n+        numListeners = ControlAcceleratorSupportShim.get_ListenerMapSize();\n@@ -48,0 +54,1 @@\n+\n@@ -65,1 +72,1 @@\n-        assertEquals(4, ControlAcceleratorSupportShim.get_ListenerMapSize());\n+        assertEquals(numListeners + 4, ControlAcceleratorSupportShim.get_ListenerMapSize());\n@@ -68,1 +75,1 @@\n-        assertEquals(2, ControlAcceleratorSupportShim.get_ListenerMapSize());\n+        assertEquals(numListeners + 2, ControlAcceleratorSupportShim.get_ListenerMapSize());\n@@ -71,1 +78,1 @@\n-        assertEquals(0, ControlAcceleratorSupportShim.get_ListenerMapSize());\n+        assertEquals(numListeners + 0, ControlAcceleratorSupportShim.get_ListenerMapSize());\n@@ -74,1 +81,1 @@\n-        assertEquals(2, ControlAcceleratorSupportShim.get_ListenerMapSize());\n+        assertEquals(numListeners + 2, ControlAcceleratorSupportShim.get_ListenerMapSize());\n@@ -77,1 +84,6 @@\n-        assertEquals(4, ControlAcceleratorSupportShim.get_ListenerMapSize());\n+        assertEquals(numListeners + 4, ControlAcceleratorSupportShim.get_ListenerMapSize());\n+\n+        menu2.getItems().clear();\n+        menu1.getItems().clear();\n+\n+        assertEquals(numListeners + 0, ControlAcceleratorSupportShim.get_ListenerMapSize());\n","filename":"modules\/javafx.controls\/src\/test\/java\/test\/javafx\/scene\/control\/ControlAcceleratorSupportTest.java","additions":21,"deletions":9,"binary":false,"changes":30,"status":"modified"}]}