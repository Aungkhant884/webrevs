{"files":[{"patch":"@@ -552,0 +552,5 @@\n+    if (hRes == DSERR_NODRIVER) {\n+      dsoundsink->need_reload = TRUE;\n+      g_free(lpGuid);\n+      return TRUE;\n+    }\n@@ -607,2 +612,3 @@\n-  if (dsoundsink->pDS == NULL)\n-    return TRUE;\n+  \/\/ Do not return here if DirectSoundCreate failed, device might\n+  \/\/ return during playback, so we need to init format for device\n+  \/\/ reload.\n@@ -677,0 +683,12 @@\n+#ifdef GSTREAMER_LITE\n+  \/\/ Store DSBUFFERDESC and WAVEFORMATEX in case we need to reload DirectSound\n+  memcpy(&dsoundsink->descSecondary, &descSecondary, sizeof(DSBUFFERDESC));\n+  memcpy(&dsoundsink->wfx, &wfx, sizeof(WAVEFORMATEX));\n+  dsoundsink->descSecondary.lpwfxFormat = (WAVEFORMATEX*)&dsoundsink->wfx;\n+\n+  \/\/ We done if device is not available. It might come back, so we do not\n+  \/\/ fail playback.\n+  if (dsoundsink->pDS == NULL)\n+      return TRUE;\n+#endif \/\/ GSTREAMER_LITE\n+\n@@ -694,7 +712,0 @@\n-#ifdef GSTREAMER_LITE\n-  \/\/ Store DSBUFFERDESC and WAVEFORMATEX in case we need to reload DirectSound\n-  memcpy(&dsoundsink->descSecondary, &descSecondary, sizeof(DSBUFFERDESC));\n-  memcpy(&dsoundsink->wfx, &wfx, sizeof(WAVEFORMATEX));\n-  dsoundsink->descSecondary.lpwfxFormat = (WAVEFORMATEX*)&dsoundsink->wfx;\n-#endif \/\/ GSTREAMER_LITE\n-\n","filename":"modules\/javafx.media\/src\/main\/native\/gstreamer\/gstreamer-lite\/gst-plugins-good\/sys\/directsound\/gstdirectsoundsink.c","additions":20,"deletions":9,"binary":false,"changes":29,"status":"modified"}]}