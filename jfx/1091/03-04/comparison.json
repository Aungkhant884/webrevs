{"files":[{"patch":"@@ -432,0 +432,1 @@\n+            insertionIndex = charIndex + 1;\n@@ -474,6 +475,1 @@\n-            }\n-        }\n-        if (insertionIndex == -1) {\n-            insertionIndex = charIndex;\n-            if (!leading) {\n-                insertionIndex += 1;\n+                insertionIndex = charIndex;\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/text\/PrismTextLayout.java","additions":2,"deletions":6,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -140,0 +140,7 @@\n+    private void moveMouseVertically(int x, int y) throws Exception {\n+        mouseClickLatch = new CountDownLatch(1);\n+        mouseClick(textFlow.getLayoutX() + X_LEADING_OFFSET + x,\n+                    textFlow.getLayoutY() + Y_OFFSET + y);\n+        Util.waitForLatch(mouseClickLatch, 5, \"Timeout waiting for mouse click\");\n+    }\n+\n@@ -214,0 +221,1 @@\n+        Thread.sleep(500);\n@@ -264,0 +272,16 @@\n+    @Test\n+    public void testTextFlowInsertionIndexWhenMouseMovedOutsideText() throws Exception {\n+        addTextAndEmojis();\n+\n+        int index = 0;\n+        while (index < (2 * Y_OFFSET)) {\n+            moveMouseVertically(X_LEADING_OFFSET, index);\n+            if(isLeading) {\n+                Assert.assertEquals(charIndex, insertionIndex);\n+            } else {\n+                Assert.assertEquals(charIndex, insertionIndex - 1);\n+            }\n+            index += 5;\n+        }\n+    }\n+\n","filename":"tests\/system\/src\/test\/java\/test\/robot\/javafx\/scene\/TextFlowSurrogatePairInsertionIndexTest.java","additions":24,"deletions":0,"binary":false,"changes":24,"status":"modified"}]}