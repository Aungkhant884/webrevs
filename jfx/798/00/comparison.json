{"files":[{"patch":"@@ -377,0 +377,6 @@\n+    public TKStage createTKStage(Window peerWindow, boolean securityDialog, StageStyle stageStyle,\n+        boolean primary, Modality modality, TKStage owner, boolean rtl, boolean minimizable, boolean closable,\n+        AccessControlContext acc){\n+        return createTKStage(peerWindow, securityDialog, stageStyle, primary, modality, owner, rtl, acc);\n+    }\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/tk\/Toolkit.java","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -606,0 +606,14 @@\n+    @Override public TKStage createTKStage(Window peerWindow, boolean securityDialog, StageStyle stageStyle, boolean primary, Modality modality, TKStage owner, boolean rtl, boolean minimizable, boolean closable, AccessControlContext acc) {\n+        assertToolkitRunning();\n+        WindowStage stage = new WindowStage(peerWindow, securityDialog, stageStyle, modality, owner);\n+        stage.setSecurityContext(acc);\n+        if (primary) {\n+            stage.setIsPrimary();\n+        }\n+        stage.setRTL(rtl);\n+        stage.setClosable(closable);\n+        stage.setMinimizable(minimizable);\n+        stage.init(systemMenu);\n+        return stage;\n+    }\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/tk\/quantum\/QuantumToolkit.java","additions":14,"deletions":0,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -71,0 +71,2 @@\n+    private boolean minimizable = true;\n+    private boolean closable = true;\n@@ -171,0 +173,8 @@\n+                        if (!closable)\n+                        {\n+                            windowMask &= ~(Window.CLOSABLE);\n+                        }\n+                        if (!minimizable)\n+                        {\n+                            windowMask &= ~(Window.MINIMIZABLE);\n+                        }\n@@ -935,0 +945,8 @@\n+    public void setClosable(boolean closable) {\n+        this.closable = closable;\n+    }\n+\n+    public void setMinimizable(boolean minimizable) {\n+        this.minimizable = minimizable;\n+    }\n+\n","filename":"modules\/javafx.graphics\/src\/main\/java\/com\/sun\/javafx\/tk\/quantum\/WindowStage.java","additions":18,"deletions":0,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -493,0 +493,56 @@\n+    private boolean closable = true;\n+\n+    \/**\n+     * Specifies if this stage should be closable.\n+     *\n+     * @param closable closable state value\n+     *\n+     * @throws IllegalStateException if this property is set after the stage\n+     * has ever been made visible.\n+     *\n+     * @defaultValue true\n+     *\/\n+    public void initClosable(boolean closable) {\n+        if (hasBeenVisible) {\n+            throw new IllegalStateException(\"Cannot set style once stage has been set visible\");\n+        }\n+        this.closable = closable;\n+    }\n+\n+    \/**\n+     * Retrieves the closable state of this stage.\n+     *\n+     * @return the stage closable state\n+     *\/\n+    public boolean isClosable() {\n+        return closable;\n+    }\n+\n+    private boolean minimizable = true;\n+\n+    \/**\n+     * Specifies if this stage should be minimizable.\n+     *\n+     * @param minimizable minimizable state value\n+     *\n+     * @throws IllegalStateException if this property is set after the stage\n+     * has ever been made visible.\n+     *\n+     * @defaultValue true\n+     *\/\n+    public void initMinimizable(boolean minimizable) {\n+        if (hasBeenVisible) {\n+            throw new IllegalStateException(\"Cannot set style once stage has been set visible\");\n+        }\n+        this.minimizable = minimizable;\n+    }\n+\n+    \/**\n+     * Retrieves the minimizable state of this stage.\n+     *\n+     * @return the stage minimizable state\n+     *\/\n+    public boolean isMinimizable() {\n+        return minimizable;\n+    }\n+\n@@ -1164,1 +1220,1 @@\n-                    stageStyle, isPrimary(), getModality(), tkStage, rtl, acc));\n+                    stageStyle, isPrimary(), getModality(), tkStage, rtl, minimizable, closable, acc));\n","filename":"modules\/javafx.graphics\/src\/main\/java\/javafx\/stage\/Stage.java","additions":57,"deletions":1,"binary":false,"changes":58,"status":"modified"},{"patch":"@@ -178,0 +178,104 @@\n+    @Test public void testClosableSet() {\n+        Stage stage = new Stage();\n+        assertTrue(stage.isClosable());\n+        stage.initClosable(true);\n+        assertTrue(stage.isClosable());\n+        stage.initClosable(false);\n+        assertFalse(stage.isClosable());\n+    }\n+\n+    @Test public void testClosableSetWhileVisible() {\n+        Stage stage = new Stage();\n+        assertTrue(stage.isClosable());\n+        stage.show();\n+        assertTrue(stage.isClosable());\n+        try {\n+            stage.initClosable(true);\n+            \/\/ Error if we get here we didn't get the expected exception\n+            assertTrue(false);\n+        } catch (IllegalStateException ex) {\n+        }\n+        assertTrue(stage.isClosable());\n+        try {\n+            stage.initClosable(false);\n+            \/\/ Error if we get here we didn't get the expected exception\n+            assertTrue(false);\n+        } catch (IllegalStateException ex) {\n+        }\n+        assertTrue(stage.isClosable());\n+    }\n+\n+    @Test public void testClosableSetAfterVisible() {\n+        Stage stage = new Stage();\n+        assertTrue(stage.isClosable());\n+        stage.show();\n+        stage.hide();\n+        assertTrue(stage.isClosable());\n+        try {\n+            stage.initClosable(true);\n+            \/\/ Error if we get here we didn't get the expected exception\n+            assertTrue(false);\n+        } catch (IllegalStateException ex) {\n+        }\n+        assertTrue(stage.isClosable());\n+        try {\n+            stage.initClosable(false);\n+            \/\/ Error if we get here we didn't get the expected exception\n+            assertTrue(false);\n+        } catch (IllegalStateException ex) {\n+        }\n+        assertTrue(stage.isClosable());\n+    }\n+\n+    @Test public void testMinimizableSet() {\n+        Stage stage = new Stage();\n+        assertTrue(stage.isMinimizable());\n+        stage.initMinimizable(true);\n+        assertTrue(stage.isMinimizable());\n+        stage.initMinimizable(false);\n+        assertFalse(stage.isMinimizable());\n+    }\n+\n+    @Test public void testMinimizableSetWhileVisible() {\n+        Stage stage = new Stage();\n+        assertTrue(stage.isMinimizable());\n+        stage.show();\n+        assertTrue(stage.isMinimizable());\n+        try {\n+            stage.initMinimizable(true);\n+            \/\/ Error if we get here we didn't get the expected exception\n+            assertTrue(false);\n+        } catch (IllegalStateException ex) {\n+        }\n+        assertTrue(stage.isMinimizable());\n+        try {\n+            stage.initMinimizable(false);\n+            \/\/ Error if we get here we didn't get the expected exception\n+            assertTrue(false);\n+        } catch (IllegalStateException ex) {\n+        }\n+        assertTrue(stage.isMinimizable());\n+    }\n+\n+    @Test public void testMinimizableSetAfterVisible() {\n+        Stage stage = new Stage();\n+        assertTrue(stage.isMinimizable());\n+        stage.show();\n+        stage.hide();\n+        assertTrue(stage.isMinimizable());\n+        try {\n+            stage.initMinimizable(true);\n+            \/\/ Error if we get here we didn't get the expected exception\n+            assertTrue(false);\n+        } catch (IllegalStateException ex) {\n+        }\n+        assertTrue(stage.isMinimizable());\n+        try {\n+            stage.initMinimizable(false);\n+            \/\/ Error if we get here we didn't get the expected exception\n+            assertTrue(false);\n+        } catch (IllegalStateException ex) {\n+        }\n+        assertTrue(stage.isMinimizable());\n+    }\n+\n","filename":"modules\/javafx.graphics\/src\/test\/java\/test\/javafx\/stage\/StageMutabilityTest.java","additions":104,"deletions":0,"binary":false,"changes":104,"status":"modified"}]}