{"files":[{"patch":"@@ -71,0 +71,1 @@\n+        javafx.swing,\n","filename":"modules\/javafx.graphics\/src\/main\/java\/module-info.java","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -41,0 +41,2 @@\n+import java.awt.GraphicsConfiguration;\n+import java.awt.Rectangle;\n@@ -51,0 +53,1 @@\n+import java.awt.geom.AffineTransform;\n@@ -62,0 +65,1 @@\n+import javafx.geometry.Point2D;\n@@ -63,0 +67,1 @@\n+import com.sun.glass.ui.Screen;\n@@ -365,0 +370,38 @@\n+    \/\/ we need to know the JavaFX screen of the current AWT graphcisConfiguration\n+    private Screen findScreen(GraphicsConfiguration graphicsConfiguration) {\n+        Rectangle awtBounds = graphicsConfiguration.getBounds();\n+        AffineTransform awtScales = graphicsConfiguration.getDefaultTransform();\n+        for (Screen screen : Screen.getScreens()) {\n+            if ((Math.abs(screen.getPlatformX() - awtBounds.getX()) < 2.) &&\n+                    (Math.abs(screen.getPlatformY() - awtBounds.getY()) < 2.) &&\n+                    (Math.abs(screen.getPlatformWidth() - awtScales.getScaleX() * awtBounds.getWidth()) < 2.) &&\n+                    (Math.abs(screen.getPlatformHeight() - awtScales.getScaleY() * awtBounds.getHeight()) < 2.)) {\n+                return screen;\n+            }\n+        }\n+        return null;\n+    }\n+\n+    private Point2D convertSwingToFxPixel(GraphicsConfiguration g, double wx, double wy) {\n+        double newx, newy;\n+        Screen screen = findScreen(g);\n+        if (screen != null) {\n+            AffineTransform awtScales = getGraphicsConfiguration().getDefaultTransform();\n+            float pScaleX = screen.getPlatformScaleX();\n+            float pScaleY = screen.getPlatformScaleY();\n+            int sx = screen.getX();\n+            int sy = screen.getY();\n+            double awtScaleX = awtScales.getScaleX();\n+            double awtScaleY = awtScales.getScaleY();\n+\n+            int px = screen.getPlatformX();\n+            int py = screen.getPlatformY();\n+            newx = sx + (wx - px) * awtScaleX \/ pScaleX;\n+            newy = sy + (wy - py) * awtScaleY \/ pScaleY;\n+        } else {\n+            newx = wx;\n+            newy = wy;\n+        }\n+        return new Point2D(newx, newy);\n+    }\n+\n@@ -410,0 +453,3 @@\n+        Point2D onScreen = convertSwingToFxPixel(getGraphicsConfiguration(), e.getXOnScreen(), e.getYOnScreen());\n+        int fxXOnScreen = (int)Math.floor(onScreen.getX());\n+        int fxYOnScreen = (int)Math.floor(onScreen.getY());\n@@ -417,1 +463,1 @@\n-                    e.getXOnScreen(), e.getYOnScreen(),\n+                    fxXOnScreen, fxYOnScreen,\n@@ -428,1 +474,2 @@\n-                    e.getX(), e.getY(), e.getXOnScreen(), e.getYOnScreen(),\n+                    e.getX(), e.getY(),\n+                    fxXOnScreen, fxYOnScreen,\n@@ -436,1 +483,1 @@\n-            scenePeer.menuEvent(e.getX(), e.getY(), e.getXOnScreen(), e.getYOnScreen(), false);\n+            scenePeer.menuEvent(e.getX(), e.getY(), fxXOnScreen, fxYOnScreen, false);\n@@ -601,2 +648,3 @@\n-                screenX = p.x;\n-                screenY = p.y;\n+                Point2D fxcoord = convertSwingToFxPixel(getGraphicsConfiguration(), p.x, p.y);\n+                screenX = (int)Math.floor(fxcoord.getX());\n+                screenY = (int)Math.floor(fxcoord.getY());\n","filename":"modules\/javafx.swing\/src\/main\/java\/javafx\/embed\/swing\/JFXPanel.java","additions":53,"deletions":5,"binary":false,"changes":58,"status":"modified"}]}