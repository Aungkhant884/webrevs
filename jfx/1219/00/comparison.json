{"files":[{"patch":"@@ -167,3 +167,2 @@\n-    public DisposerRecord createSwingNodeDisposer(Object frame) {\n-        LightweightFrameWrapper lwFrame = (LightweightFrameWrapper)frame;\n-        return new SwingNodeDisposer(lwFrame);\n+    public DisposerRecord createSwingNodeDisposer(WeakReference<LightweightFrameWrapper> frame) {\n+        return new SwingNodeDisposer(frame);\n@@ -236,1 +235,1 @@\n-        LightweightFrameWrapper lwFrame;\n+        WeakReference<LightweightFrameWrapper> lwFrame;\n@@ -238,1 +237,1 @@\n-        SwingNodeDisposer(LightweightFrameWrapper ref) {\n+        SwingNodeDisposer(WeakReference<LightweightFrameWrapper> ref) {\n@@ -244,3 +243,4 @@\n-            if (lwFrame != null) {\n-                lwFrame.dispose();\n-                lwFrame = null;\n+            LightweightFrameWrapper lwFramePtr = lwFrame.get();\n+            if (lwFramePtr != null) {\n+                lwFramePtr.dispose();\n+                lwFramePtr = null;\n","filename":"modules\/javafx.swing\/src\/main\/java\/com\/sun\/javafx\/embed\/swing\/newimpl\/SwingNodeInteropN.java","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -76,0 +76,1 @@\n+import jdk.swing.interop.LightweightFrameWrapper;\n@@ -384,1 +385,4 @@\n-            Disposer.addRecord(this, swNodeIOP.createSwingNodeDisposer(lwFrame));\n+            WeakReference<LightweightFrameWrapper> lwFramePtr =\n+                    new WeakReference<LightweightFrameWrapper>(\n+                                             (LightweightFrameWrapper)lwFrame);\n+            Disposer.addRecord(this, swNodeIOP.createSwingNodeDisposer(lwFramePtr));\n","filename":"modules\/javafx.swing\/src\/main\/java\/javafx\/embed\/swing\/SwingNode.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"}]}