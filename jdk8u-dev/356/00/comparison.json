{"files":[{"patch":"@@ -30,0 +30,1 @@\n+import java.lang.ref.SoftReference;\n@@ -58,0 +59,1 @@\n+import java.util.concurrent.ConcurrentHashMap;\n@@ -102,0 +104,2 @@\n+    private volatile SoftReference<Map<String, Boolean>> cacheRef =\n+            new SoftReference<>(null);\n@@ -161,1 +165,1 @@\n-        if (!checkAlgorithm(disabledAlgorithms, algorithm, decomposer)) {\n+        if (!cachedCheckAlgorithm(algorithm)) {\n@@ -245,1 +249,1 @@\n-                    if (!checkAlgorithm(disabledAlgorithms, curve, decomposer)) {\n+                    if (!cachedCheckAlgorithm(curve)) {\n@@ -953,0 +957,19 @@\n+    private boolean cachedCheckAlgorithm(String algorithm) {\n+        Map<String, Boolean> cache;\n+        if ((cache = cacheRef.get()) == null) {\n+            synchronized (this) {\n+                if ((cache = cacheRef.get()) == null) {\n+                    cache = new ConcurrentHashMap<>();\n+                    cacheRef = new SoftReference<>(cache);\n+                }\n+            }\n+        }\n+        Boolean result = cache.get(algorithm);\n+        if (result != null) {\n+            return result;\n+        }\n+        result = checkAlgorithm(disabledAlgorithms, algorithm, decomposer);\n+        cache.put(algorithm, result);\n+        return result;\n+    }\n+\n","filename":"jdk\/src\/share\/classes\/sun\/security\/util\/DisabledAlgorithmConstraints.java","additions":25,"deletions":2,"binary":false,"changes":27,"status":"modified"}]}