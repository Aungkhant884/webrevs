{"files":[{"patch":"@@ -208,0 +208,2 @@\n+        int id = -1;\n+        VisualID defaultVisual = XVisualIDFromVisual(DefaultVisual(awt_display, vinfo->screen));\n@@ -216,12 +218,7 @@\n-                \/* Allocate white and black pixels for this visual *\/\n-                color.flags = DoRed | DoGreen | DoBlue;\n-                color.red = color.green = color.blue = 0x0000;\n-                XAllocColor(awt_display, defaultConfig->awt_cmap, &color);\n-                x11Screens[visualList[i].screen].blackpixel = color.pixel;\n-                color.flags = DoRed | DoGreen | DoBlue;\n-                color.red = color.green = color.blue = 0xffff;\n-                XAllocColor(awt_display, defaultConfig->awt_cmap, &color);\n-                x11Screens[visualList[i].screen].whitepixel = color.pixel;\n-\n-                XFree(visualList);\n-                return defaultConfig;\n+                if (visualList[i].visualid == defaultVisual) {\n+                    id = i;\n+                    break;\n+                } else if (-1 == id) {\n+                    \/\/ Keep 1st match for fallback\n+                    id = i;\n+                }\n@@ -230,0 +227,16 @@\n+        if (-1 != id) {\n+            memcpy(&defaultConfig->awt_visInfo, &visualList[id], sizeof(XVisualInfo));\n+            defaultConfig->awt_depth = visualList[id].depth;\n+            \/* Allocate white and black pixels for this visual *\/\n+            color.flags = DoRed | DoGreen | DoBlue;\n+            color.red = color.green = color.blue = 0x0000;\n+            XAllocColor(awt_display, defaultConfig->awt_cmap, &color);\n+            x11Screens[visualList[id].screen].blackpixel = color.pixel;\n+            color.flags = DoRed | DoGreen | DoBlue;\n+            color.red = color.green = color.blue = 0xffff;\n+            XAllocColor(awt_display, defaultConfig->awt_cmap, &color);\n+            x11Screens[visualList[id].screen].whitepixel = color.pixel;\n+\n+            XFree(visualList);\n+            return defaultConfig;\n+        }\n","filename":"jdk\/src\/solaris\/native\/sun\/awt\/awt_GraphicsEnv.c","additions":25,"deletions":12,"binary":false,"changes":37,"status":"modified"},{"patch":"@@ -679,1 +679,1 @@\n-    \/\/12-point font\n+    \/\/12, 13-point fonts\n@@ -681,1 +681,2 @@\n-                                           \"-*-*-medium-r-normal-*-*-120-*-*-*-*\",\n+                                           \"-*-*-medium-r-normal-*-*-120-*-*-*-*,\" \\\n+                                           \"-*-*-medium-r-normal-*-*-130-*-*-*-*\",\n","filename":"jdk\/src\/solaris\/native\/sun\/awt\/awt_InputMethod.c","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"}]}