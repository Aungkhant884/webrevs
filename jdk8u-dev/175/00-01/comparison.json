{"files":[{"patch":"@@ -37,1 +37,1 @@\n-        run: echo \"::set-output name=should_run::${{ github.event.inputs.platforms != '' || (!secrets.JDK_SUBMIT_FILTER || startsWith(github.ref, 'refs\/heads\/submit\/')) }}\"\n+        run: echo \"should_run=${{ github.event.inputs.platforms != '' || (!secrets.JDK_SUBMIT_FILTER || startsWith(github.ref, 'refs\/heads\/submit\/')) }}\" >> $GITHUB_OUTPUT\n@@ -42,6 +42,6 @@\n-          echo \"::set-output name=platform_linux_additional::${{ contains(github.event.inputs.platforms, 'linux additional (hotspot only)') || (github.event.inputs.platforms == '' && (secrets.JDK_SUBMIT_PLATFORMS == '' || contains(secrets.JDK_SUBMIT_PLATFORMS, 'linux additional (hotspot only)'))) }}\"\n-          echo \"::set-output name=platform_linux_x64::${{ contains(github.event.inputs.platforms, 'linux x64') || (github.event.inputs.platforms == '' && (secrets.JDK_SUBMIT_PLATFORMS == '' || contains(secrets.JDK_SUBMIT_PLATFORMS, 'linux x64'))) }}\"\n-          echo \"::set-output name=platform_linux_x86::${{ contains(github.event.inputs.platforms, 'linux x86') || (github.event.inputs.platforms == '' && (secrets.JDK_SUBMIT_PLATFORMS == '' || contains(secrets.JDK_SUBMIT_PLATFORMS, 'linux x86'))) }}\"\n-          echo \"::set-output name=platform_windows_x64::${{ contains(github.event.inputs.platforms, 'windows x64') || (github.event.inputs.platforms == '' && (secrets.JDK_SUBMIT_PLATFORMS == '' || contains(secrets.JDK_SUBMIT_PLATFORMS, 'windows x64'))) }}\"\n-          echo \"::set-output name=platform_windows_x86::${{ contains(github.event.inputs.platforms, 'windows x86') || (github.event.inputs.platforms == '' && (secrets.JDK_SUBMIT_PLATFORMS == '' || contains(secrets.JDK_SUBMIT_PLATFORMS, 'windows x86'))) }}\"\n-          echo \"::set-output name=platform_macos_x64::${{ contains(github.event.inputs.platforms, 'macos x64') || (github.event.inputs.platforms == '' && (secrets.JDK_SUBMIT_PLATFORMS == '' || contains(secrets.JDK_SUBMIT_PLATFORMS, 'macos x64'))) }}\"\n+          echo \"platform_linux_additional=${{ contains(github.event.inputs.platforms, 'linux additional (hotspot only)') || (github.event.inputs.platforms == '' && (secrets.JDK_SUBMIT_PLATFORMS == '' || contains(secrets.JDK_SUBMIT_PLATFORMS, 'linux additional (hotspot only)'))) }}\" >> $GITHUB_OUTPUT\n+          echo \"platform_linux_x64=${{ contains(github.event.inputs.platforms, 'linux x64') || (github.event.inputs.platforms == '' && (secrets.JDK_SUBMIT_PLATFORMS == '' || contains(secrets.JDK_SUBMIT_PLATFORMS, 'linux x64'))) }}\" >> $GITHUB_OUTPUT\n+          echo \"platform_linux_x86=${{ contains(github.event.inputs.platforms, 'linux x86') || (github.event.inputs.platforms == '' && (secrets.JDK_SUBMIT_PLATFORMS == '' || contains(secrets.JDK_SUBMIT_PLATFORMS, 'linux x86'))) }}\" >> $GITHUB_OUTPUT\n+          echo \"platform_windows_x64=${{ contains(github.event.inputs.platforms, 'windows x64') || (github.event.inputs.platforms == '' && (secrets.JDK_SUBMIT_PLATFORMS == '' || contains(secrets.JDK_SUBMIT_PLATFORMS, 'windows x64'))) }}\" >> $GITHUB_OUTPUT\n+          echo \"platform_windows_x86=${{ contains(github.event.inputs.platforms, 'windows x86') || (github.event.inputs.platforms == '' && (secrets.JDK_SUBMIT_PLATFORMS == '' || contains(secrets.JDK_SUBMIT_PLATFORMS, 'windows x86'))) }}\" >> $GITHUB_OUTPUT\n+          echo \"platform_macos_x64=${{ contains(github.event.inputs.platforms, 'macos x64') || (github.event.inputs.platforms == '' && (secrets.JDK_SUBMIT_PLATFORMS == '' || contains(secrets.JDK_SUBMIT_PLATFORMS, 'macos x64'))) }}\" >> $GITHUB_OUTPUT\n@@ -52,1 +52,1 @@\n-        run: echo \"::set-output name=bundle_id::${GITHUB_ACTOR}_${GITHUB_SHA:0:8}\"\n+        run: echo \"bundle_id=${GITHUB_ACTOR}_${GITHUB_SHA:0:8}\" >> $GITHUB_OUTPUT\n@@ -56,1 +56,1 @@\n-        uses: actions\/checkout@v2\n+        uses: actions\/checkout@v3\n@@ -63,1 +63,1 @@\n-        run: \"echo ::set-output name=dependencies::`cat common\/autoconf\/version-numbers make\/conf\/test-dependencies | sed -e '1i {' -e 's\/#.*\/\/g' -e 's\/\\\"\/\/g' -e 's\/\\\\(.*\\\\)=\\\\(.*\\\\)\/\\\"\\\\1\\\": \\\"\\\\2\\\",\/g' -e '$s\/,\\\\s\\\\{0,\\\\}$\/\\\\}\/'`\"\n+        run: \"echo dependencies=`cat common\/autoconf\/version-numbers make\/conf\/test-dependencies | sed -e '1i {' -e 's\/#.*\/\/g' -e 's\/\\\"\/\/g' -e 's\/\\\\(.*\\\\)=\\\\(.*\\\\)\/\\\"\\\\1\\\": \\\"\\\\2\\\",\/g' -e '$s\/,\\\\s\\\\{0,\\\\}$\/\\\\}\/'` >> $GITHUB_OUTPUT\"\n@@ -85,1 +85,1 @@\n-        uses: actions\/cache@v2\n+        uses: actions\/cache@v3\n@@ -92,1 +92,1 @@\n-        uses: actions\/checkout@v2\n+        uses: actions\/checkout@v3\n@@ -110,1 +110,1 @@\n-        uses: actions\/upload-artifact@v2\n+        uses: actions\/upload-artifact@v3\n@@ -138,1 +138,1 @@\n-        uses: actions\/checkout@v2\n+        uses: actions\/checkout@v3\n@@ -144,1 +144,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -151,1 +151,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -186,1 +186,1 @@\n-        uses: actions\/upload-artifact@v2\n+        uses: actions\/upload-artifact@v3\n@@ -204,2 +204,2 @@\n-#          - langtools\/tier1\n-#          - hotspot\/tier1\n+          - langtools\/tier1\n+          - hotspot\/tier1\n@@ -209,4 +209,4 @@\n-#          - test: langtools\/tier1\n-#            suites: langtools_tier1\n-#          - test: hotspot\/tier1\n-#            suites: hotspot_tier1\n+          - test: langtools\/tier1\n+            suites: langtools_tier1\n+          - test: hotspot\/tier1\n+            suites: hotspot_tier1\n@@ -220,1 +220,1 @@\n-        uses: actions\/checkout@v2\n+        uses: actions\/checkout@v3\n@@ -224,1 +224,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -231,1 +231,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -239,1 +239,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -246,1 +246,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -300,1 +300,1 @@\n-        uses: actions\/upload-artifact@v2\n+        uses: actions\/upload-artifact@v3\n@@ -358,1 +358,1 @@\n-        uses: actions\/checkout@v2\n+        uses: actions\/checkout@v3\n@@ -364,1 +364,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -371,1 +371,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -402,1 +402,1 @@\n-        uses: actions\/cache@v2\n+        uses: actions\/cache@v3\n@@ -486,1 +486,1 @@\n-        uses: actions\/checkout@v2\n+        uses: actions\/checkout@v3\n@@ -492,1 +492,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -499,1 +499,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -542,1 +542,1 @@\n-        uses: actions\/upload-artifact@v2\n+        uses: actions\/upload-artifact@v3\n@@ -560,1 +560,1 @@\n-#          - langtools\/tier1\n+          - langtools\/tier1\n@@ -565,2 +565,2 @@\n-#          - test: langtools\/tier1\n-#            suites: langtools_tier1\n+          - test: langtools\/tier1\n+            suites: langtools_tier1\n@@ -577,1 +577,1 @@\n-        uses: actions\/checkout@v2\n+        uses: actions\/checkout@v3\n@@ -581,1 +581,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -588,1 +588,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -596,1 +596,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -603,1 +603,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -657,1 +657,1 @@\n-        uses: actions\/upload-artifact@v2\n+        uses: actions\/upload-artifact@v3\n@@ -690,0 +690,13 @@\n+      - name: Restore cygwin installer from cache\n+        id: cygwin-installer\n+        uses: actions\/cache@v3\n+        with:\n+          path: ~\/cygwin\/setup-x86_64.exe\n+          key: cygwin-installer\n+\n+      - name: Download cygwin installer\n+        run: |\n+          New-Item -Force -ItemType directory -Path \"$HOME\\cygwin\"\n+          & curl -L \"https:\/\/www.cygwin.com\/setup-x86_64.exe\" -o \"$HOME\/cygwin\/setup-x86_64.exe\"\n+        if: steps.cygwin-installer.outputs.cache-hit != 'true'\n+\n@@ -692,1 +705,1 @@\n-        uses: actions\/cache@v2\n+        uses: actions\/cache@v3\n@@ -699,2 +712,0 @@\n-          New-Item -Force -ItemType directory -Path \"$HOME\\cygwin\"\n-          & curl -L \"https:\/\/www.cygwin.com\/setup-x86_64.exe\" -o \"$HOME\/cygwin\/setup-x86_64.exe\"\n@@ -704,1 +715,1 @@\n-        uses: actions\/checkout@v2\n+        uses: actions\/checkout@v3\n@@ -709,1 +720,1 @@\n-        uses: actions\/checkout@v2\n+        uses: actions\/checkout@v3\n@@ -717,1 +728,1 @@\n-        uses: actions\/cache@v2\n+        uses: actions\/cache@v3\n@@ -734,1 +745,1 @@\n-        uses: actions\/cache@v2\n+        uses: actions\/cache@v3\n@@ -741,1 +752,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -748,1 +759,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -823,1 +834,1 @@\n-        uses: actions\/upload-artifact@v2\n+        uses: actions\/upload-artifact@v3\n@@ -858,0 +869,13 @@\n+      - name: Restore cygwin installer from cache\n+        id: cygwin-installer\n+        uses: actions\/cache@v3\n+        with:\n+          path: ~\/cygwin\/setup-x86_64.exe\n+          key: cygwin-installer\n+\n+      - name: Download cygwin installer\n+        run: |\n+          New-Item -Force -ItemType directory -Path \"$HOME\\cygwin\"\n+          & curl -L \"https:\/\/www.cygwin.com\/setup-x86_64.exe\" -o \"$HOME\/cygwin\/setup-x86_64.exe\"\n+        if: steps.cygwin-installer.outputs.cache-hit != 'true'\n+\n@@ -860,1 +884,1 @@\n-        uses: actions\/cache@v2\n+        uses: actions\/cache@v3\n@@ -867,2 +891,0 @@\n-          New-Item -Force -ItemType directory -Path \"$HOME\\cygwin\"\n-          & curl -L \"https:\/\/www.cygwin.com\/setup-x86_64.exe\" -o \"$HOME\/cygwin\/setup-x86_64.exe\"\n@@ -872,1 +894,1 @@\n-        uses: actions\/checkout@v2\n+        uses: actions\/checkout@v3\n@@ -877,1 +899,1 @@\n-        uses: actions\/checkout@v2\n+        uses: actions\/checkout@v3\n@@ -885,1 +907,1 @@\n-        uses: actions\/cache@v2\n+        uses: actions\/cache@v3\n@@ -902,1 +924,1 @@\n-        uses: actions\/cache@v2\n+        uses: actions\/cache@v3\n@@ -923,1 +945,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -930,1 +952,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -983,1 +1005,1 @@\n-        uses: actions\/upload-artifact@v2\n+        uses: actions\/upload-artifact@v3\n@@ -1001,2 +1023,2 @@\n-#          - langtools\/tier1\n-#          - hotspot\/tier1\n+          - langtools\/tier1\n+          - hotspot\/tier1\n@@ -1006,4 +1028,4 @@\n-#          - test: langtools\/tier1\n-#            suites: langtools_tier1\n-#          - test: hotspot\/tier1\n-#            suites: hotspot_tier1\n+          - test: langtools\/tier1\n+            suites: langtools_tier1\n+          - test: hotspot\/tier1\n+            suites: hotspot_tier1\n@@ -1020,1 +1042,1 @@\n-        uses: actions\/checkout@v2\n+        uses: actions\/checkout@v3\n@@ -1024,1 +1046,1 @@\n-        uses: actions\/cache@v2\n+        uses: actions\/cache@v3\n@@ -1039,0 +1061,13 @@\n+      - name: Restore cygwin installer from cache\n+        id: cygwin-installer\n+        uses: actions\/cache@v3\n+        with:\n+          path: ~\/cygwin\/setup-x86_64.exe\n+          key: cygwin-installer\n+\n+      - name: Download cygwin installer\n+        run: |\n+          New-Item -Force -ItemType directory -Path \"$HOME\\cygwin\"\n+          & curl -L \"https:\/\/www.cygwin.com\/setup-x86_64.exe\" -o \"$HOME\/cygwin\/setup-x86_64.exe\"\n+        if: steps.cygwin-installer.outputs.cache-hit != 'true'\n+\n@@ -1041,1 +1076,1 @@\n-        uses: actions\/cache@v2\n+        uses: actions\/cache@v3\n@@ -1048,2 +1083,0 @@\n-          New-Item -Force -ItemType directory -Path \"$HOME\\cygwin\"\n-          & curl -L \"https:\/\/www.cygwin.com\/setup-x86_64.exe\" -o \"$HOME\/cygwin\/setup-x86_64.exe\"\n@@ -1054,1 +1087,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -1061,1 +1094,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -1069,1 +1102,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -1076,1 +1109,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -1129,1 +1162,1 @@\n-        uses: actions\/upload-artifact@v2\n+        uses: actions\/upload-artifact@v3\n@@ -1146,1 +1179,1 @@\n-#          - langtools\/tier1\n+          - langtools\/tier1\n@@ -1151,2 +1184,2 @@\n-#          - test: langtools\/tier1\n-#            suites: langtools_tier1\n+          - test: langtools\/tier1\n+            suites: langtools_tier1\n@@ -1165,1 +1198,1 @@\n-        uses: actions\/checkout@v2\n+        uses: actions\/checkout@v3\n@@ -1169,1 +1202,1 @@\n-        uses: actions\/cache@v2\n+        uses: actions\/cache@v3\n@@ -1184,0 +1217,13 @@\n+      - name: Restore cygwin installer from cache\n+        id: cygwin-installer\n+        uses: actions\/cache@v3\n+        with:\n+          path: ~\/cygwin\/setup-x86_64.exe\n+          key: cygwin-installer\n+\n+      - name: Download cygwin installer\n+        run: |\n+          New-Item -Force -ItemType directory -Path \"$HOME\\cygwin\"\n+          & curl -L \"https:\/\/www.cygwin.com\/setup-x86_64.exe\" -o \"$HOME\/cygwin\/setup-x86_64.exe\"\n+        if: steps.cygwin-installer.outputs.cache-hit != 'true'\n+\n@@ -1186,1 +1232,1 @@\n-        uses: actions\/cache@v2\n+        uses: actions\/cache@v3\n@@ -1193,2 +1239,0 @@\n-          New-Item -Force -ItemType directory -Path \"$HOME\\cygwin\"\n-          & curl -L \"https:\/\/www.cygwin.com\/setup-x86_64.exe\" -o \"$HOME\/cygwin\/setup-x86_64.exe\"\n@@ -1199,1 +1243,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -1206,1 +1250,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -1214,1 +1258,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -1221,1 +1265,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -1274,1 +1318,1 @@\n-        uses: actions\/upload-artifact@v2\n+        uses: actions\/upload-artifact@v3\n@@ -1306,1 +1350,1 @@\n-        uses: actions\/checkout@v2\n+        uses: actions\/checkout@v3\n@@ -1312,1 +1356,1 @@\n-        uses: actions\/cache@v2\n+        uses: actions\/cache@v3\n@@ -1328,1 +1372,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -1335,1 +1379,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -1371,1 +1415,1 @@\n-        uses: actions\/upload-artifact@v2\n+        uses: actions\/upload-artifact@v3\n@@ -1389,2 +1433,2 @@\n-#          - langtools\/tier1\n-#          - hotspot\/tier1\n+          - langtools\/tier1\n+          - hotspot\/tier1\n@@ -1394,4 +1438,4 @@\n-#          - test: langtools\/tier1\n-#            suites: langtools_tier1\n-#          - test: hotspot\/tier1\n-#            suites: hotspot_tier1\n+          - test: langtools\/tier1\n+            suites: langtools_tier1\n+          - test: hotspot\/tier1\n+            suites: hotspot_tier1\n@@ -1408,1 +1452,1 @@\n-        uses: actions\/checkout@v2\n+        uses: actions\/checkout@v3\n@@ -1412,1 +1456,1 @@\n-        uses: actions\/cache@v2\n+        uses: actions\/cache@v3\n@@ -1428,1 +1472,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -1435,1 +1479,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -1443,1 +1487,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -1450,1 +1494,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -1504,1 +1548,1 @@\n-        uses: actions\/upload-artifact@v2\n+        uses: actions\/upload-artifact@v3\n@@ -1525,1 +1569,1 @@\n-        uses: actions\/github-script@v3\n+        uses: actions\/github-script@v6\n@@ -1548,1 +1592,1 @@\n-        uses: actions\/download-artifact@v2\n+        uses: actions\/download-artifact@v3\n@@ -1565,1 +1609,1 @@\n-        uses: actions\/upload-artifact@v2\n+        uses: actions\/upload-artifact@v3\n","filename":".github\/workflows\/submit.yml","additions":160,"deletions":116,"binary":false,"changes":276,"status":"modified"},{"patch":"@@ -4,1 +4,1 @@\n-version=openjdk8u362\n+version=openjdk8u372\n","filename":".jcheck\/conf","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -501,0 +501,2 @@\n+      # Corresponds to --with-vcruntime-1-dll\n+      BASIC_EVAL_DEVKIT_VARIABLE([DEVKIT_VCRUNTIME_1_DLL])\n","filename":"common\/autoconf\/basics.m4","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -644,0 +644,1 @@\n+VCRUNTIME_1_DLL\n@@ -1117,0 +1118,1 @@\n+with_vcruntime_1_dll\n@@ -2007,0 +2009,2 @@\n+  --with-vcruntime-1-dll  path to microsoft C++ runtime dll (vcruntime*_1.dll)\n+                          (Windows only) [probed]\n@@ -4366,1 +4370,1 @@\n-VS_VERSION_INTERNAL_2019=141\n+VS_VERSION_INTERNAL_2019=142\n@@ -4368,0 +4372,1 @@\n+VS_VCRUNTIME_1_2019=vcruntime140_1.dll\n@@ -4420,1 +4425,1 @@\n-DATE_WHEN_GENERATED=1652838310\n+DATE_WHEN_GENERATED=1669893448\n@@ -14987,0 +14992,6 @@\n+      # Corresponds to --with-vcruntime-1-dll\n+\n+  if test \"x$DEVKIT_VCRUNTIME_1_DLL\" = x; then\n+    eval DEVKIT_VCRUNTIME_1_DLL=\"\\${DEVKIT_VCRUNTIME_1_DLL_${OPENJDK_TARGET_CPU}}\"\n+  fi\n+\n@@ -25802,0 +25813,1 @@\n+    eval VCRUNTIME_1_NAME=\"\\${VS_VCRUNTIME_1_${VS_VERSION}}\"\n@@ -26537,0 +26549,1 @@\n+      eval VCRUNTIME_1_NAME=\"\\${VS_VCRUNTIME_1_${VS_VERSION}}\"\n@@ -49979,2 +49992,1043 @@\n-    if test \"x$MSVC_DLL\" = x; then\n-      as_fn_error $? \"Could not find a proper $MSVCR_NAME as specified by devkit\" \"$LINENO\" 5\n+    if test \"x$MSVC_DLL\" = x; then\n+      as_fn_error $? \"Could not find a proper $MSVCR_NAME as specified by devkit\" \"$LINENO\" 5\n+    fi\n+    MSVCR_DLL=\"$MSVC_DLL\"\n+  else\n+\n+  DLL_NAME=\"${MSVCR_NAME}\"\n+  MSVC_DLL=\n+\n+  if test \"x$MSVC_DLL\" = x; then\n+    if test \"x$VCINSTALLDIR\" != x; then\n+      CYGWIN_VC_INSTALL_DIR=\"$VCINSTALLDIR\"\n+\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+\n+  # Input might be given as Windows format, start by converting to\n+  # unix format.\n+  path=\"$CYGWIN_VC_INSTALL_DIR\"\n+  new_path=`$CYGPATH -u \"$path\"`\n+\n+  # Cygwin tries to hide some aspects of the Windows file system, such that binaries are\n+  # named .exe but called without that suffix. Therefore, \"foo\" and \"foo.exe\" are considered\n+  # the same file, most of the time (as in \"test -f\"). But not when running cygpath -s, then\n+  # \"foo.exe\" is OK but \"foo\" is an error.\n+  #\n+  # This test is therefore slightly more accurate than \"test -f\" to check for file precense.\n+  # It is also a way to make sure we got the proper file name for the real test later on.\n+  test_shortpath=`$CYGPATH -s -m \"$new_path\" 2> \/dev\/null`\n+  if test \"x$test_shortpath\" = x; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: The path of CYGWIN_VC_INSTALL_DIR, which resolves as \\\"$path\\\", is invalid.\" >&5\n+$as_echo \"$as_me: The path of CYGWIN_VC_INSTALL_DIR, which resolves as \\\"$path\\\", is invalid.\" >&6;}\n+    as_fn_error $? \"Cannot locate the the path of CYGWIN_VC_INSTALL_DIR\" \"$LINENO\" 5\n+  fi\n+\n+  # Call helper function which possibly converts this using DOS-style short mode.\n+  # If so, the updated path is stored in $new_path.\n+\n+  input_path=\"$new_path\"\n+  # Check if we need to convert this using DOS-style short mode. If the path\n+  # contains just simple characters, use it. Otherwise (spaces, weird characters),\n+  # take no chances and rewrite it.\n+  # Note: m4 eats our [], so we need to use [ and ] instead.\n+  has_forbidden_chars=`$ECHO \"$input_path\" | $GREP [^-._\/a-zA-Z0-9]`\n+  if test \"x$has_forbidden_chars\" != x; then\n+    # Now convert it to mixed DOS-style, short mode (no spaces, and \/ instead of \\)\n+    shortmode_path=`$CYGPATH -s -m -a \"$input_path\"`\n+    path_after_shortmode=`$CYGPATH -u \"$shortmode_path\"`\n+    if test \"x$path_after_shortmode\" != \"x$input_to_shortpath\"; then\n+      # Going to short mode and back again did indeed matter. Since short mode is\n+      # case insensitive, let's make it lowercase to improve readability.\n+      shortmode_path=`$ECHO \"$shortmode_path\" | $TR 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n+      # Now convert it back to Unix-style (cygpath)\n+      input_path=`$CYGPATH -u \"$shortmode_path\"`\n+      new_path=\"$input_path\"\n+    fi\n+  fi\n+\n+  test_cygdrive_prefix=`$ECHO $input_path | $GREP ^\/cygdrive\/`\n+  if test \"x$test_cygdrive_prefix\" = x; then\n+    # As a simple fix, exclude \/usr\/bin since it's not a real path.\n+    if test \"x`$ECHO $new_path | $GREP ^\/usr\/bin\/`\" = x; then\n+      # The path is in a Cygwin special directory (e.g. \/home). We need this converted to\n+      # a path prefixed by \/cygdrive for fixpath to work.\n+      new_path=\"$CYGWIN_ROOT_PATH$input_path\"\n+    fi\n+  fi\n+\n+\n+  if test \"x$path\" != \"x$new_path\"; then\n+    CYGWIN_VC_INSTALL_DIR=\"$new_path\"\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Rewriting CYGWIN_VC_INSTALL_DIR to \\\"$new_path\\\"\" >&5\n+$as_echo \"$as_me: Rewriting CYGWIN_VC_INSTALL_DIR to \\\"$new_path\\\"\" >&6;}\n+  fi\n+\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+\n+  path=\"$CYGWIN_VC_INSTALL_DIR\"\n+  has_colon=`$ECHO $path | $GREP ^.:`\n+  new_path=\"$path\"\n+  if test \"x$has_colon\" = x; then\n+    # Not in mixed or Windows style, start by that.\n+    new_path=`cmd \/\/c echo $path`\n+  fi\n+\n+\n+  input_path=\"$new_path\"\n+  # Check if we need to convert this using DOS-style short mode. If the path\n+  # contains just simple characters, use it. Otherwise (spaces, weird characters),\n+  # take no chances and rewrite it.\n+  # Note: m4 eats our [], so we need to use [ and ] instead.\n+  has_forbidden_chars=`$ECHO \"$input_path\" | $GREP [^-_\/:a-zA-Z0-9]`\n+  if test \"x$has_forbidden_chars\" != x; then\n+    # Now convert it to mixed DOS-style, short mode (no spaces, and \/ instead of \\)\n+    new_path=`cmd \/c \"for %A in (\\\"$input_path\\\") do @echo %~sA\"|$TR \\\\\\\\\\\\\\\\ \/ | $TR 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n+  fi\n+\n+\n+  windows_path=\"$new_path\"\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+    unix_path=`$CYGPATH -u \"$windows_path\"`\n+    new_path=\"$unix_path\"\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+    unix_path=`$ECHO \"$windows_path\" | $SED -e 's,^\\\\(.\\\\):,\/\\\\1,g' -e 's,\\\\\\\\,\/,g'`\n+    new_path=\"$unix_path\"\n+  fi\n+\n+  if test \"x$path\" != \"x$new_path\"; then\n+    CYGWIN_VC_INSTALL_DIR=\"$new_path\"\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Rewriting CYGWIN_VC_INSTALL_DIR to \\\"$new_path\\\"\" >&5\n+$as_echo \"$as_me: Rewriting CYGWIN_VC_INSTALL_DIR to \\\"$new_path\\\"\" >&6;}\n+  fi\n+\n+  # Save the first 10 bytes of this path to the storage, so fixpath can work.\n+  all_fixpath_prefixes=(\"${all_fixpath_prefixes[@]}\" \"${new_path:0:10}\")\n+\n+  else\n+    # We're on a posix platform. Hooray! :)\n+    path=\"$CYGWIN_VC_INSTALL_DIR\"\n+    has_space=`$ECHO \"$path\" | $GREP \" \"`\n+    if test \"x$has_space\" != x; then\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: The path of CYGWIN_VC_INSTALL_DIR, which resolves as \\\"$path\\\", is invalid.\" >&5\n+$as_echo \"$as_me: The path of CYGWIN_VC_INSTALL_DIR, which resolves as \\\"$path\\\", is invalid.\" >&6;}\n+      as_fn_error $? \"Spaces are not allowed in this path.\" \"$LINENO\" 5\n+    fi\n+\n+    # Use eval to expand a potential ~\n+    eval path=\"$path\"\n+    if test ! -f \"$path\" && test ! -d \"$path\"; then\n+      as_fn_error $? \"The path of CYGWIN_VC_INSTALL_DIR, which resolves as \\\"$path\\\", is not found.\" \"$LINENO\" 5\n+    fi\n+\n+    CYGWIN_VC_INSTALL_DIR=\"`cd \"$path\"; $THEPWDCMD -L`\"\n+  fi\n+\n+      if test \"$VS_VERSION\" -lt 2017; then\n+        # Probe: Using well-known location from Visual Studio 12.0 and older\n+        if test \"x$OPENJDK_TARGET_CPU_BITS\" = x64; then\n+          POSSIBLE_MSVC_DLL=\"$CYGWIN_VC_INSTALL_DIR\/redist\/x64\/Microsoft.VC${VS_VERSION_INTERNAL}.CRT\/$DLL_NAME\"\n+        else\n+          POSSIBLE_MSVC_DLL=\"$CYGWIN_VC_INSTALL_DIR\/redist\/x86\/Microsoft.VC${VS_VERSION_INTERNAL}.CRT\/$DLL_NAME\"\n+        fi\n+      else\n+        # Probe: Using well-known location from VS 2017 and VS 2019\n+        if test \"x$OPENJDK_TARGET_CPU_BITS\" = x64; then\n+          POSSIBLE_MSVC_DLL=\"`ls $CYGWIN_VC_INSTALL_DIR\/Redist\/MSVC\/*\/x64\/Microsoft.VC${VS_VERSION_INTERNAL}.CRT\/$DLL_NAME`\"\n+        else\n+          POSSIBLE_MSVC_DLL=\"`ls $CYGWIN_VC_INSTALL_DIR\/Redist\/MSVC\/*\/x86\/Microsoft.VC${VS_VERSION_INTERNAL}.CRT\/$DLL_NAME`\"\n+        fi\n+      fi\n+      # In case any of the above finds more than one file, loop over them.\n+      for possible_msvc_dll in $POSSIBLE_MSVC_DLL; do\n+        $ECHO \"POSSIBLE_MSVC_DLL $possible_msvc_dll\"\n+\n+  DLL_NAME=\"$DLL_NAME\"\n+  POSSIBLE_MSVC_DLL=\"$possible_msvc_dll\"\n+  METHOD=\"well-known location in VCINSTALLDIR\"\n+  if test -n \"$POSSIBLE_MSVC_DLL\" -a -e \"$POSSIBLE_MSVC_DLL\"; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Found $DLL_NAME at $POSSIBLE_MSVC_DLL using $METHOD\" >&5\n+$as_echo \"$as_me: Found $DLL_NAME at $POSSIBLE_MSVC_DLL using $METHOD\" >&6;}\n+\n+    # Need to check if the found msvcr is correct architecture\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking found $DLL_NAME architecture\" >&5\n+$as_echo_n \"checking found $DLL_NAME architecture... \" >&6; }\n+    MSVC_DLL_FILETYPE=`$FILE -b \"$POSSIBLE_MSVC_DLL\"`\n+    if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+      # The MSYS 'file' command returns \"PE32 executable for MS Windows (DLL) (GUI) Intel 80386 32-bit\"\n+      # on x32 and \"PE32+ executable for MS Windows (DLL) (GUI) Mono\/.Net assembly\" on x64 systems.\n+      if test \"x$OPENJDK_TARGET_CPU_BITS\" = x32; then\n+        CORRECT_MSVCR_ARCH=\"PE32 executable\"\n+      else\n+        CORRECT_MSVCR_ARCH=\"PE32+ executable\"\n+      fi\n+    else\n+      if test \"x$OPENJDK_TARGET_CPU_BITS\" = x32; then\n+        CORRECT_MSVCR_ARCH=386\n+      else\n+        CORRECT_MSVCR_ARCH=x86-64\n+      fi\n+    fi\n+    if $ECHO \"$MSVC_DLL_FILETYPE\" | $GREP \"$CORRECT_MSVCR_ARCH\" 2>&1 > \/dev\/null; then\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: ok\" >&5\n+$as_echo \"ok\" >&6; }\n+      MSVC_DLL=\"$POSSIBLE_MSVC_DLL\"\n+\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+\n+  # Input might be given as Windows format, start by converting to\n+  # unix format.\n+  path=\"$MSVC_DLL\"\n+  new_path=`$CYGPATH -u \"$path\"`\n+\n+  # Cygwin tries to hide some aspects of the Windows file system, such that binaries are\n+  # named .exe but called without that suffix. Therefore, \"foo\" and \"foo.exe\" are considered\n+  # the same file, most of the time (as in \"test -f\"). But not when running cygpath -s, then\n+  # \"foo.exe\" is OK but \"foo\" is an error.\n+  #\n+  # This test is therefore slightly more accurate than \"test -f\" to check for file precense.\n+  # It is also a way to make sure we got the proper file name for the real test later on.\n+  test_shortpath=`$CYGPATH -s -m \"$new_path\" 2> \/dev\/null`\n+  if test \"x$test_shortpath\" = x; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&5\n+$as_echo \"$as_me: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&6;}\n+    as_fn_error $? \"Cannot locate the the path of MSVC_DLL\" \"$LINENO\" 5\n+  fi\n+\n+  # Call helper function which possibly converts this using DOS-style short mode.\n+  # If so, the updated path is stored in $new_path.\n+\n+  input_path=\"$new_path\"\n+  # Check if we need to convert this using DOS-style short mode. If the path\n+  # contains just simple characters, use it. Otherwise (spaces, weird characters),\n+  # take no chances and rewrite it.\n+  # Note: m4 eats our [], so we need to use [ and ] instead.\n+  has_forbidden_chars=`$ECHO \"$input_path\" | $GREP [^-._\/a-zA-Z0-9]`\n+  if test \"x$has_forbidden_chars\" != x; then\n+    # Now convert it to mixed DOS-style, short mode (no spaces, and \/ instead of \\)\n+    shortmode_path=`$CYGPATH -s -m -a \"$input_path\"`\n+    path_after_shortmode=`$CYGPATH -u \"$shortmode_path\"`\n+    if test \"x$path_after_shortmode\" != \"x$input_to_shortpath\"; then\n+      # Going to short mode and back again did indeed matter. Since short mode is\n+      # case insensitive, let's make it lowercase to improve readability.\n+      shortmode_path=`$ECHO \"$shortmode_path\" | $TR 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n+      # Now convert it back to Unix-style (cygpath)\n+      input_path=`$CYGPATH -u \"$shortmode_path\"`\n+      new_path=\"$input_path\"\n+    fi\n+  fi\n+\n+  test_cygdrive_prefix=`$ECHO $input_path | $GREP ^\/cygdrive\/`\n+  if test \"x$test_cygdrive_prefix\" = x; then\n+    # As a simple fix, exclude \/usr\/bin since it's not a real path.\n+    if test \"x`$ECHO $new_path | $GREP ^\/usr\/bin\/`\" = x; then\n+      # The path is in a Cygwin special directory (e.g. \/home). We need this converted to\n+      # a path prefixed by \/cygdrive for fixpath to work.\n+      new_path=\"$CYGWIN_ROOT_PATH$input_path\"\n+    fi\n+  fi\n+\n+\n+  if test \"x$path\" != \"x$new_path\"; then\n+    MSVC_DLL=\"$new_path\"\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&5\n+$as_echo \"$as_me: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&6;}\n+  fi\n+\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+\n+  path=\"$MSVC_DLL\"\n+  has_colon=`$ECHO $path | $GREP ^.:`\n+  new_path=\"$path\"\n+  if test \"x$has_colon\" = x; then\n+    # Not in mixed or Windows style, start by that.\n+    new_path=`cmd \/\/c echo $path`\n+  fi\n+\n+\n+  input_path=\"$new_path\"\n+  # Check if we need to convert this using DOS-style short mode. If the path\n+  # contains just simple characters, use it. Otherwise (spaces, weird characters),\n+  # take no chances and rewrite it.\n+  # Note: m4 eats our [], so we need to use [ and ] instead.\n+  has_forbidden_chars=`$ECHO \"$input_path\" | $GREP [^-_\/:a-zA-Z0-9]`\n+  if test \"x$has_forbidden_chars\" != x; then\n+    # Now convert it to mixed DOS-style, short mode (no spaces, and \/ instead of \\)\n+    new_path=`cmd \/c \"for %A in (\\\"$input_path\\\") do @echo %~sA\"|$TR \\\\\\\\\\\\\\\\ \/ | $TR 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n+  fi\n+\n+\n+  windows_path=\"$new_path\"\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+    unix_path=`$CYGPATH -u \"$windows_path\"`\n+    new_path=\"$unix_path\"\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+    unix_path=`$ECHO \"$windows_path\" | $SED -e 's,^\\\\(.\\\\):,\/\\\\1,g' -e 's,\\\\\\\\,\/,g'`\n+    new_path=\"$unix_path\"\n+  fi\n+\n+  if test \"x$path\" != \"x$new_path\"; then\n+    MSVC_DLL=\"$new_path\"\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&5\n+$as_echo \"$as_me: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&6;}\n+  fi\n+\n+  # Save the first 10 bytes of this path to the storage, so fixpath can work.\n+  all_fixpath_prefixes=(\"${all_fixpath_prefixes[@]}\" \"${new_path:0:10}\")\n+\n+  else\n+    # We're on a posix platform. Hooray! :)\n+    path=\"$MSVC_DLL\"\n+    has_space=`$ECHO \"$path\" | $GREP \" \"`\n+    if test \"x$has_space\" != x; then\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&5\n+$as_echo \"$as_me: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&6;}\n+      as_fn_error $? \"Spaces are not allowed in this path.\" \"$LINENO\" 5\n+    fi\n+\n+    # Use eval to expand a potential ~\n+    eval path=\"$path\"\n+    if test ! -f \"$path\" && test ! -d \"$path\"; then\n+      as_fn_error $? \"The path of MSVC_DLL, which resolves as \\\"$path\\\", is not found.\" \"$LINENO\" 5\n+    fi\n+\n+    MSVC_DLL=\"`cd \"$path\"; $THEPWDCMD -L`\"\n+  fi\n+\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $DLL_NAME\" >&5\n+$as_echo_n \"checking for $DLL_NAME... \" >&6; }\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $MSVC_DLL\" >&5\n+$as_echo \"$MSVC_DLL\" >&6; }\n+    else\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: incorrect, ignoring\" >&5\n+$as_echo \"incorrect, ignoring\" >&6; }\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: The file type of the located $DLL_NAME is $MSVC_DLL_FILETYPE\" >&5\n+$as_echo \"$as_me: The file type of the located $DLL_NAME is $MSVC_DLL_FILETYPE\" >&6;}\n+    fi\n+  fi\n+\n+      done\n+    fi\n+  fi\n+\n+  if test \"x$MSVC_DLL\" = x; then\n+    # Probe: Check in the Boot JDK directory.\n+    POSSIBLE_MSVC_DLL=\"$BOOT_JDK\/bin\/$DLL_NAME\"\n+\n+  DLL_NAME=\"$DLL_NAME\"\n+  POSSIBLE_MSVC_DLL=\"$POSSIBLE_MSVC_DLL\"\n+  METHOD=\"well-known location in Boot JDK\"\n+  if test -n \"$POSSIBLE_MSVC_DLL\" -a -e \"$POSSIBLE_MSVC_DLL\"; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Found $DLL_NAME at $POSSIBLE_MSVC_DLL using $METHOD\" >&5\n+$as_echo \"$as_me: Found $DLL_NAME at $POSSIBLE_MSVC_DLL using $METHOD\" >&6;}\n+\n+    # Need to check if the found msvcr is correct architecture\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking found $DLL_NAME architecture\" >&5\n+$as_echo_n \"checking found $DLL_NAME architecture... \" >&6; }\n+    MSVC_DLL_FILETYPE=`$FILE -b \"$POSSIBLE_MSVC_DLL\"`\n+    if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+      # The MSYS 'file' command returns \"PE32 executable for MS Windows (DLL) (GUI) Intel 80386 32-bit\"\n+      # on x32 and \"PE32+ executable for MS Windows (DLL) (GUI) Mono\/.Net assembly\" on x64 systems.\n+      if test \"x$OPENJDK_TARGET_CPU_BITS\" = x32; then\n+        CORRECT_MSVCR_ARCH=\"PE32 executable\"\n+      else\n+        CORRECT_MSVCR_ARCH=\"PE32+ executable\"\n+      fi\n+    else\n+      if test \"x$OPENJDK_TARGET_CPU_BITS\" = x32; then\n+        CORRECT_MSVCR_ARCH=386\n+      else\n+        CORRECT_MSVCR_ARCH=x86-64\n+      fi\n+    fi\n+    if $ECHO \"$MSVC_DLL_FILETYPE\" | $GREP \"$CORRECT_MSVCR_ARCH\" 2>&1 > \/dev\/null; then\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: ok\" >&5\n+$as_echo \"ok\" >&6; }\n+      MSVC_DLL=\"$POSSIBLE_MSVC_DLL\"\n+\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+\n+  # Input might be given as Windows format, start by converting to\n+  # unix format.\n+  path=\"$MSVC_DLL\"\n+  new_path=`$CYGPATH -u \"$path\"`\n+\n+  # Cygwin tries to hide some aspects of the Windows file system, such that binaries are\n+  # named .exe but called without that suffix. Therefore, \"foo\" and \"foo.exe\" are considered\n+  # the same file, most of the time (as in \"test -f\"). But not when running cygpath -s, then\n+  # \"foo.exe\" is OK but \"foo\" is an error.\n+  #\n+  # This test is therefore slightly more accurate than \"test -f\" to check for file precense.\n+  # It is also a way to make sure we got the proper file name for the real test later on.\n+  test_shortpath=`$CYGPATH -s -m \"$new_path\" 2> \/dev\/null`\n+  if test \"x$test_shortpath\" = x; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&5\n+$as_echo \"$as_me: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&6;}\n+    as_fn_error $? \"Cannot locate the the path of MSVC_DLL\" \"$LINENO\" 5\n+  fi\n+\n+  # Call helper function which possibly converts this using DOS-style short mode.\n+  # If so, the updated path is stored in $new_path.\n+\n+  input_path=\"$new_path\"\n+  # Check if we need to convert this using DOS-style short mode. If the path\n+  # contains just simple characters, use it. Otherwise (spaces, weird characters),\n+  # take no chances and rewrite it.\n+  # Note: m4 eats our [], so we need to use [ and ] instead.\n+  has_forbidden_chars=`$ECHO \"$input_path\" | $GREP [^-._\/a-zA-Z0-9]`\n+  if test \"x$has_forbidden_chars\" != x; then\n+    # Now convert it to mixed DOS-style, short mode (no spaces, and \/ instead of \\)\n+    shortmode_path=`$CYGPATH -s -m -a \"$input_path\"`\n+    path_after_shortmode=`$CYGPATH -u \"$shortmode_path\"`\n+    if test \"x$path_after_shortmode\" != \"x$input_to_shortpath\"; then\n+      # Going to short mode and back again did indeed matter. Since short mode is\n+      # case insensitive, let's make it lowercase to improve readability.\n+      shortmode_path=`$ECHO \"$shortmode_path\" | $TR 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n+      # Now convert it back to Unix-style (cygpath)\n+      input_path=`$CYGPATH -u \"$shortmode_path\"`\n+      new_path=\"$input_path\"\n+    fi\n+  fi\n+\n+  test_cygdrive_prefix=`$ECHO $input_path | $GREP ^\/cygdrive\/`\n+  if test \"x$test_cygdrive_prefix\" = x; then\n+    # As a simple fix, exclude \/usr\/bin since it's not a real path.\n+    if test \"x`$ECHO $new_path | $GREP ^\/usr\/bin\/`\" = x; then\n+      # The path is in a Cygwin special directory (e.g. \/home). We need this converted to\n+      # a path prefixed by \/cygdrive for fixpath to work.\n+      new_path=\"$CYGWIN_ROOT_PATH$input_path\"\n+    fi\n+  fi\n+\n+\n+  if test \"x$path\" != \"x$new_path\"; then\n+    MSVC_DLL=\"$new_path\"\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&5\n+$as_echo \"$as_me: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&6;}\n+  fi\n+\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+\n+  path=\"$MSVC_DLL\"\n+  has_colon=`$ECHO $path | $GREP ^.:`\n+  new_path=\"$path\"\n+  if test \"x$has_colon\" = x; then\n+    # Not in mixed or Windows style, start by that.\n+    new_path=`cmd \/\/c echo $path`\n+  fi\n+\n+\n+  input_path=\"$new_path\"\n+  # Check if we need to convert this using DOS-style short mode. If the path\n+  # contains just simple characters, use it. Otherwise (spaces, weird characters),\n+  # take no chances and rewrite it.\n+  # Note: m4 eats our [], so we need to use [ and ] instead.\n+  has_forbidden_chars=`$ECHO \"$input_path\" | $GREP [^-_\/:a-zA-Z0-9]`\n+  if test \"x$has_forbidden_chars\" != x; then\n+    # Now convert it to mixed DOS-style, short mode (no spaces, and \/ instead of \\)\n+    new_path=`cmd \/c \"for %A in (\\\"$input_path\\\") do @echo %~sA\"|$TR \\\\\\\\\\\\\\\\ \/ | $TR 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n+  fi\n+\n+\n+  windows_path=\"$new_path\"\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+    unix_path=`$CYGPATH -u \"$windows_path\"`\n+    new_path=\"$unix_path\"\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+    unix_path=`$ECHO \"$windows_path\" | $SED -e 's,^\\\\(.\\\\):,\/\\\\1,g' -e 's,\\\\\\\\,\/,g'`\n+    new_path=\"$unix_path\"\n+  fi\n+\n+  if test \"x$path\" != \"x$new_path\"; then\n+    MSVC_DLL=\"$new_path\"\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&5\n+$as_echo \"$as_me: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&6;}\n+  fi\n+\n+  # Save the first 10 bytes of this path to the storage, so fixpath can work.\n+  all_fixpath_prefixes=(\"${all_fixpath_prefixes[@]}\" \"${new_path:0:10}\")\n+\n+  else\n+    # We're on a posix platform. Hooray! :)\n+    path=\"$MSVC_DLL\"\n+    has_space=`$ECHO \"$path\" | $GREP \" \"`\n+    if test \"x$has_space\" != x; then\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&5\n+$as_echo \"$as_me: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&6;}\n+      as_fn_error $? \"Spaces are not allowed in this path.\" \"$LINENO\" 5\n+    fi\n+\n+    # Use eval to expand a potential ~\n+    eval path=\"$path\"\n+    if test ! -f \"$path\" && test ! -d \"$path\"; then\n+      as_fn_error $? \"The path of MSVC_DLL, which resolves as \\\"$path\\\", is not found.\" \"$LINENO\" 5\n+    fi\n+\n+    MSVC_DLL=\"`cd \"$path\"; $THEPWDCMD -L`\"\n+  fi\n+\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $DLL_NAME\" >&5\n+$as_echo_n \"checking for $DLL_NAME... \" >&6; }\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $MSVC_DLL\" >&5\n+$as_echo \"$MSVC_DLL\" >&6; }\n+    else\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: incorrect, ignoring\" >&5\n+$as_echo \"incorrect, ignoring\" >&6; }\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: The file type of the located $DLL_NAME is $MSVC_DLL_FILETYPE\" >&5\n+$as_echo \"$as_me: The file type of the located $DLL_NAME is $MSVC_DLL_FILETYPE\" >&6;}\n+    fi\n+  fi\n+\n+  fi\n+\n+  if test \"x$MSVC_DLL\" = x; then\n+    # Probe: Look in the Windows system32 directory\n+    CYGWIN_SYSTEMROOT=\"$SYSTEMROOT\"\n+\n+  windows_path=\"$CYGWIN_SYSTEMROOT\"\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+    unix_path=`$CYGPATH -u \"$windows_path\"`\n+    CYGWIN_SYSTEMROOT=\"$unix_path\"\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+    unix_path=`$ECHO \"$windows_path\" | $SED -e 's,^\\\\(.\\\\):,\/\\\\1,g' -e 's,\\\\\\\\,\/,g'`\n+    CYGWIN_SYSTEMROOT=\"$unix_path\"\n+  fi\n+\n+    POSSIBLE_MSVC_DLL=\"$CYGWIN_SYSTEMROOT\/system32\/$DLL_NAME\"\n+\n+  DLL_NAME=\"$DLL_NAME\"\n+  POSSIBLE_MSVC_DLL=\"$POSSIBLE_MSVC_DLL\"\n+  METHOD=\"well-known location in SYSTEMROOT\"\n+  if test -n \"$POSSIBLE_MSVC_DLL\" -a -e \"$POSSIBLE_MSVC_DLL\"; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Found $DLL_NAME at $POSSIBLE_MSVC_DLL using $METHOD\" >&5\n+$as_echo \"$as_me: Found $DLL_NAME at $POSSIBLE_MSVC_DLL using $METHOD\" >&6;}\n+\n+    # Need to check if the found msvcr is correct architecture\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking found $DLL_NAME architecture\" >&5\n+$as_echo_n \"checking found $DLL_NAME architecture... \" >&6; }\n+    MSVC_DLL_FILETYPE=`$FILE -b \"$POSSIBLE_MSVC_DLL\"`\n+    if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+      # The MSYS 'file' command returns \"PE32 executable for MS Windows (DLL) (GUI) Intel 80386 32-bit\"\n+      # on x32 and \"PE32+ executable for MS Windows (DLL) (GUI) Mono\/.Net assembly\" on x64 systems.\n+      if test \"x$OPENJDK_TARGET_CPU_BITS\" = x32; then\n+        CORRECT_MSVCR_ARCH=\"PE32 executable\"\n+      else\n+        CORRECT_MSVCR_ARCH=\"PE32+ executable\"\n+      fi\n+    else\n+      if test \"x$OPENJDK_TARGET_CPU_BITS\" = x32; then\n+        CORRECT_MSVCR_ARCH=386\n+      else\n+        CORRECT_MSVCR_ARCH=x86-64\n+      fi\n+    fi\n+    if $ECHO \"$MSVC_DLL_FILETYPE\" | $GREP \"$CORRECT_MSVCR_ARCH\" 2>&1 > \/dev\/null; then\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: ok\" >&5\n+$as_echo \"ok\" >&6; }\n+      MSVC_DLL=\"$POSSIBLE_MSVC_DLL\"\n+\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+\n+  # Input might be given as Windows format, start by converting to\n+  # unix format.\n+  path=\"$MSVC_DLL\"\n+  new_path=`$CYGPATH -u \"$path\"`\n+\n+  # Cygwin tries to hide some aspects of the Windows file system, such that binaries are\n+  # named .exe but called without that suffix. Therefore, \"foo\" and \"foo.exe\" are considered\n+  # the same file, most of the time (as in \"test -f\"). But not when running cygpath -s, then\n+  # \"foo.exe\" is OK but \"foo\" is an error.\n+  #\n+  # This test is therefore slightly more accurate than \"test -f\" to check for file precense.\n+  # It is also a way to make sure we got the proper file name for the real test later on.\n+  test_shortpath=`$CYGPATH -s -m \"$new_path\" 2> \/dev\/null`\n+  if test \"x$test_shortpath\" = x; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&5\n+$as_echo \"$as_me: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&6;}\n+    as_fn_error $? \"Cannot locate the the path of MSVC_DLL\" \"$LINENO\" 5\n+  fi\n+\n+  # Call helper function which possibly converts this using DOS-style short mode.\n+  # If so, the updated path is stored in $new_path.\n+\n+  input_path=\"$new_path\"\n+  # Check if we need to convert this using DOS-style short mode. If the path\n+  # contains just simple characters, use it. Otherwise (spaces, weird characters),\n+  # take no chances and rewrite it.\n+  # Note: m4 eats our [], so we need to use [ and ] instead.\n+  has_forbidden_chars=`$ECHO \"$input_path\" | $GREP [^-._\/a-zA-Z0-9]`\n+  if test \"x$has_forbidden_chars\" != x; then\n+    # Now convert it to mixed DOS-style, short mode (no spaces, and \/ instead of \\)\n+    shortmode_path=`$CYGPATH -s -m -a \"$input_path\"`\n+    path_after_shortmode=`$CYGPATH -u \"$shortmode_path\"`\n+    if test \"x$path_after_shortmode\" != \"x$input_to_shortpath\"; then\n+      # Going to short mode and back again did indeed matter. Since short mode is\n+      # case insensitive, let's make it lowercase to improve readability.\n+      shortmode_path=`$ECHO \"$shortmode_path\" | $TR 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n+      # Now convert it back to Unix-style (cygpath)\n+      input_path=`$CYGPATH -u \"$shortmode_path\"`\n+      new_path=\"$input_path\"\n+    fi\n+  fi\n+\n+  test_cygdrive_prefix=`$ECHO $input_path | $GREP ^\/cygdrive\/`\n+  if test \"x$test_cygdrive_prefix\" = x; then\n+    # As a simple fix, exclude \/usr\/bin since it's not a real path.\n+    if test \"x`$ECHO $new_path | $GREP ^\/usr\/bin\/`\" = x; then\n+      # The path is in a Cygwin special directory (e.g. \/home). We need this converted to\n+      # a path prefixed by \/cygdrive for fixpath to work.\n+      new_path=\"$CYGWIN_ROOT_PATH$input_path\"\n+    fi\n+  fi\n+\n+\n+  if test \"x$path\" != \"x$new_path\"; then\n+    MSVC_DLL=\"$new_path\"\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&5\n+$as_echo \"$as_me: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&6;}\n+  fi\n+\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+\n+  path=\"$MSVC_DLL\"\n+  has_colon=`$ECHO $path | $GREP ^.:`\n+  new_path=\"$path\"\n+  if test \"x$has_colon\" = x; then\n+    # Not in mixed or Windows style, start by that.\n+    new_path=`cmd \/\/c echo $path`\n+  fi\n+\n+\n+  input_path=\"$new_path\"\n+  # Check if we need to convert this using DOS-style short mode. If the path\n+  # contains just simple characters, use it. Otherwise (spaces, weird characters),\n+  # take no chances and rewrite it.\n+  # Note: m4 eats our [], so we need to use [ and ] instead.\n+  has_forbidden_chars=`$ECHO \"$input_path\" | $GREP [^-_\/:a-zA-Z0-9]`\n+  if test \"x$has_forbidden_chars\" != x; then\n+    # Now convert it to mixed DOS-style, short mode (no spaces, and \/ instead of \\)\n+    new_path=`cmd \/c \"for %A in (\\\"$input_path\\\") do @echo %~sA\"|$TR \\\\\\\\\\\\\\\\ \/ | $TR 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n+  fi\n+\n+\n+  windows_path=\"$new_path\"\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+    unix_path=`$CYGPATH -u \"$windows_path\"`\n+    new_path=\"$unix_path\"\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+    unix_path=`$ECHO \"$windows_path\" | $SED -e 's,^\\\\(.\\\\):,\/\\\\1,g' -e 's,\\\\\\\\,\/,g'`\n+    new_path=\"$unix_path\"\n+  fi\n+\n+  if test \"x$path\" != \"x$new_path\"; then\n+    MSVC_DLL=\"$new_path\"\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&5\n+$as_echo \"$as_me: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&6;}\n+  fi\n+\n+  # Save the first 10 bytes of this path to the storage, so fixpath can work.\n+  all_fixpath_prefixes=(\"${all_fixpath_prefixes[@]}\" \"${new_path:0:10}\")\n+\n+  else\n+    # We're on a posix platform. Hooray! :)\n+    path=\"$MSVC_DLL\"\n+    has_space=`$ECHO \"$path\" | $GREP \" \"`\n+    if test \"x$has_space\" != x; then\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&5\n+$as_echo \"$as_me: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&6;}\n+      as_fn_error $? \"Spaces are not allowed in this path.\" \"$LINENO\" 5\n+    fi\n+\n+    # Use eval to expand a potential ~\n+    eval path=\"$path\"\n+    if test ! -f \"$path\" && test ! -d \"$path\"; then\n+      as_fn_error $? \"The path of MSVC_DLL, which resolves as \\\"$path\\\", is not found.\" \"$LINENO\" 5\n+    fi\n+\n+    MSVC_DLL=\"`cd \"$path\"; $THEPWDCMD -L`\"\n+  fi\n+\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $DLL_NAME\" >&5\n+$as_echo_n \"checking for $DLL_NAME... \" >&6; }\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $MSVC_DLL\" >&5\n+$as_echo \"$MSVC_DLL\" >&6; }\n+    else\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: incorrect, ignoring\" >&5\n+$as_echo \"incorrect, ignoring\" >&6; }\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: The file type of the located $DLL_NAME is $MSVC_DLL_FILETYPE\" >&5\n+$as_echo \"$as_me: The file type of the located $DLL_NAME is $MSVC_DLL_FILETYPE\" >&6;}\n+    fi\n+  fi\n+\n+  fi\n+\n+  if test \"x$MSVC_DLL\" = x; then\n+    # Probe: If Visual Studio Express is installed, there is usually one with the debugger\n+    if test \"x$VS100COMNTOOLS\" != x; then\n+      CYGWIN_VS_TOOLS_DIR=\"$VS100COMNTOOLS\/..\"\n+\n+  windows_path=\"$CYGWIN_VS_TOOLS_DIR\"\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+    unix_path=`$CYGPATH -u \"$windows_path\"`\n+    CYGWIN_VS_TOOLS_DIR=\"$unix_path\"\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+    unix_path=`$ECHO \"$windows_path\" | $SED -e 's,^\\\\(.\\\\):,\/\\\\1,g' -e 's,\\\\\\\\,\/,g'`\n+    CYGWIN_VS_TOOLS_DIR=\"$unix_path\"\n+  fi\n+\n+      if test \"x$OPENJDK_TARGET_CPU_BITS\" = x64; then\n+        POSSIBLE_MSVC_DLL=`$FIND \"$CYGWIN_VS_TOOLS_DIR\" -name $DLL_NAME \\\n+            | $GREP -i \/x64\/ | $HEAD --lines 1`\n+      else\n+        POSSIBLE_MSVC_DLL=`$FIND \"$CYGWIN_VS_TOOLS_DIR\" -name $DLL_NAME \\\n+            | $GREP -i \/x86\/ | $HEAD --lines 1`\n+      fi\n+\n+  DLL_NAME=\"$DLL_NAME\"\n+  POSSIBLE_MSVC_DLL=\"$POSSIBLE_MSVC_DLL\"\n+  METHOD=\"search of VS100COMNTOOLS\"\n+  if test -n \"$POSSIBLE_MSVC_DLL\" -a -e \"$POSSIBLE_MSVC_DLL\"; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Found $DLL_NAME at $POSSIBLE_MSVC_DLL using $METHOD\" >&5\n+$as_echo \"$as_me: Found $DLL_NAME at $POSSIBLE_MSVC_DLL using $METHOD\" >&6;}\n+\n+    # Need to check if the found msvcr is correct architecture\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking found $DLL_NAME architecture\" >&5\n+$as_echo_n \"checking found $DLL_NAME architecture... \" >&6; }\n+    MSVC_DLL_FILETYPE=`$FILE -b \"$POSSIBLE_MSVC_DLL\"`\n+    if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+      # The MSYS 'file' command returns \"PE32 executable for MS Windows (DLL) (GUI) Intel 80386 32-bit\"\n+      # on x32 and \"PE32+ executable for MS Windows (DLL) (GUI) Mono\/.Net assembly\" on x64 systems.\n+      if test \"x$OPENJDK_TARGET_CPU_BITS\" = x32; then\n+        CORRECT_MSVCR_ARCH=\"PE32 executable\"\n+      else\n+        CORRECT_MSVCR_ARCH=\"PE32+ executable\"\n+      fi\n+    else\n+      if test \"x$OPENJDK_TARGET_CPU_BITS\" = x32; then\n+        CORRECT_MSVCR_ARCH=386\n+      else\n+        CORRECT_MSVCR_ARCH=x86-64\n+      fi\n+    fi\n+    if $ECHO \"$MSVC_DLL_FILETYPE\" | $GREP \"$CORRECT_MSVCR_ARCH\" 2>&1 > \/dev\/null; then\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: ok\" >&5\n+$as_echo \"ok\" >&6; }\n+      MSVC_DLL=\"$POSSIBLE_MSVC_DLL\"\n+\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+\n+  # Input might be given as Windows format, start by converting to\n+  # unix format.\n+  path=\"$MSVC_DLL\"\n+  new_path=`$CYGPATH -u \"$path\"`\n+\n+  # Cygwin tries to hide some aspects of the Windows file system, such that binaries are\n+  # named .exe but called without that suffix. Therefore, \"foo\" and \"foo.exe\" are considered\n+  # the same file, most of the time (as in \"test -f\"). But not when running cygpath -s, then\n+  # \"foo.exe\" is OK but \"foo\" is an error.\n+  #\n+  # This test is therefore slightly more accurate than \"test -f\" to check for file precense.\n+  # It is also a way to make sure we got the proper file name for the real test later on.\n+  test_shortpath=`$CYGPATH -s -m \"$new_path\" 2> \/dev\/null`\n+  if test \"x$test_shortpath\" = x; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&5\n+$as_echo \"$as_me: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&6;}\n+    as_fn_error $? \"Cannot locate the the path of MSVC_DLL\" \"$LINENO\" 5\n+  fi\n+\n+  # Call helper function which possibly converts this using DOS-style short mode.\n+  # If so, the updated path is stored in $new_path.\n+\n+  input_path=\"$new_path\"\n+  # Check if we need to convert this using DOS-style short mode. If the path\n+  # contains just simple characters, use it. Otherwise (spaces, weird characters),\n+  # take no chances and rewrite it.\n+  # Note: m4 eats our [], so we need to use [ and ] instead.\n+  has_forbidden_chars=`$ECHO \"$input_path\" | $GREP [^-._\/a-zA-Z0-9]`\n+  if test \"x$has_forbidden_chars\" != x; then\n+    # Now convert it to mixed DOS-style, short mode (no spaces, and \/ instead of \\)\n+    shortmode_path=`$CYGPATH -s -m -a \"$input_path\"`\n+    path_after_shortmode=`$CYGPATH -u \"$shortmode_path\"`\n+    if test \"x$path_after_shortmode\" != \"x$input_to_shortpath\"; then\n+      # Going to short mode and back again did indeed matter. Since short mode is\n+      # case insensitive, let's make it lowercase to improve readability.\n+      shortmode_path=`$ECHO \"$shortmode_path\" | $TR 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n+      # Now convert it back to Unix-style (cygpath)\n+      input_path=`$CYGPATH -u \"$shortmode_path\"`\n+      new_path=\"$input_path\"\n+    fi\n+  fi\n+\n+  test_cygdrive_prefix=`$ECHO $input_path | $GREP ^\/cygdrive\/`\n+  if test \"x$test_cygdrive_prefix\" = x; then\n+    # As a simple fix, exclude \/usr\/bin since it's not a real path.\n+    if test \"x`$ECHO $new_path | $GREP ^\/usr\/bin\/`\" = x; then\n+      # The path is in a Cygwin special directory (e.g. \/home). We need this converted to\n+      # a path prefixed by \/cygdrive for fixpath to work.\n+      new_path=\"$CYGWIN_ROOT_PATH$input_path\"\n+    fi\n+  fi\n+\n+\n+  if test \"x$path\" != \"x$new_path\"; then\n+    MSVC_DLL=\"$new_path\"\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&5\n+$as_echo \"$as_me: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&6;}\n+  fi\n+\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+\n+  path=\"$MSVC_DLL\"\n+  has_colon=`$ECHO $path | $GREP ^.:`\n+  new_path=\"$path\"\n+  if test \"x$has_colon\" = x; then\n+    # Not in mixed or Windows style, start by that.\n+    new_path=`cmd \/\/c echo $path`\n+  fi\n+\n+\n+  input_path=\"$new_path\"\n+  # Check if we need to convert this using DOS-style short mode. If the path\n+  # contains just simple characters, use it. Otherwise (spaces, weird characters),\n+  # take no chances and rewrite it.\n+  # Note: m4 eats our [], so we need to use [ and ] instead.\n+  has_forbidden_chars=`$ECHO \"$input_path\" | $GREP [^-_\/:a-zA-Z0-9]`\n+  if test \"x$has_forbidden_chars\" != x; then\n+    # Now convert it to mixed DOS-style, short mode (no spaces, and \/ instead of \\)\n+    new_path=`cmd \/c \"for %A in (\\\"$input_path\\\") do @echo %~sA\"|$TR \\\\\\\\\\\\\\\\ \/ | $TR 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n+  fi\n+\n+\n+  windows_path=\"$new_path\"\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+    unix_path=`$CYGPATH -u \"$windows_path\"`\n+    new_path=\"$unix_path\"\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+    unix_path=`$ECHO \"$windows_path\" | $SED -e 's,^\\\\(.\\\\):,\/\\\\1,g' -e 's,\\\\\\\\,\/,g'`\n+    new_path=\"$unix_path\"\n+  fi\n+\n+  if test \"x$path\" != \"x$new_path\"; then\n+    MSVC_DLL=\"$new_path\"\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&5\n+$as_echo \"$as_me: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&6;}\n+  fi\n+\n+  # Save the first 10 bytes of this path to the storage, so fixpath can work.\n+  all_fixpath_prefixes=(\"${all_fixpath_prefixes[@]}\" \"${new_path:0:10}\")\n+\n+  else\n+    # We're on a posix platform. Hooray! :)\n+    path=\"$MSVC_DLL\"\n+    has_space=`$ECHO \"$path\" | $GREP \" \"`\n+    if test \"x$has_space\" != x; then\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&5\n+$as_echo \"$as_me: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&6;}\n+      as_fn_error $? \"Spaces are not allowed in this path.\" \"$LINENO\" 5\n+    fi\n+\n+    # Use eval to expand a potential ~\n+    eval path=\"$path\"\n+    if test ! -f \"$path\" && test ! -d \"$path\"; then\n+      as_fn_error $? \"The path of MSVC_DLL, which resolves as \\\"$path\\\", is not found.\" \"$LINENO\" 5\n+    fi\n+\n+    MSVC_DLL=\"`cd \"$path\"; $THEPWDCMD -L`\"\n+  fi\n+\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $DLL_NAME\" >&5\n+$as_echo_n \"checking for $DLL_NAME... \" >&6; }\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $MSVC_DLL\" >&5\n+$as_echo \"$MSVC_DLL\" >&6; }\n+    else\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: incorrect, ignoring\" >&5\n+$as_echo \"incorrect, ignoring\" >&6; }\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: The file type of the located $DLL_NAME is $MSVC_DLL_FILETYPE\" >&5\n+$as_echo \"$as_me: The file type of the located $DLL_NAME is $MSVC_DLL_FILETYPE\" >&6;}\n+    fi\n+  fi\n+\n+    fi\n+  fi\n+\n+  if test \"x$MSVC_DLL\" = x; then\n+    # Probe: Search wildly in the VCINSTALLDIR. We've probably lost by now.\n+    # (This was the original behaviour; kept since it might turn something up)\n+    if test \"x$CYGWIN_VC_INSTALL_DIR\" != x; then\n+      if test \"x$OPENJDK_TARGET_CPU_BITS\" = x64; then\n+        POSSIBLE_MSVC_DLL=`$FIND \"$CYGWIN_VC_INSTALL_DIR\" -name $DLL_NAME \\\n+          | $GREP x64 | $HEAD --lines 1`\n+      else\n+        POSSIBLE_MSVC_DLL=`$FIND \"$CYGWIN_VC_INSTALL_DIR\" -name $DLL_NAME \\\n+          | $GREP x86 | $GREP -v ia64 | $GREP -v x64 | $HEAD --lines 1`\n+        if test \"x$POSSIBLE_MSVC_DLL\" = x; then\n+          # We're grasping at straws now...\n+          POSSIBLE_MSVC_DLL=`$FIND \"$CYGWIN_VC_INSTALL_DIR\" -name $DLL_NAME \\\n+              | $HEAD --lines 1`\n+        fi\n+      fi\n+\n+\n+  DLL_NAME=\"$DLL_NAME\"\n+  POSSIBLE_MSVC_DLL=\"$POSSIBLE_MSVC_DLL\"\n+  METHOD=\"search of VCINSTALLDIR\"\n+  if test -n \"$POSSIBLE_MSVC_DLL\" -a -e \"$POSSIBLE_MSVC_DLL\"; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Found $DLL_NAME at $POSSIBLE_MSVC_DLL using $METHOD\" >&5\n+$as_echo \"$as_me: Found $DLL_NAME at $POSSIBLE_MSVC_DLL using $METHOD\" >&6;}\n+\n+    # Need to check if the found msvcr is correct architecture\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking found $DLL_NAME architecture\" >&5\n+$as_echo_n \"checking found $DLL_NAME architecture... \" >&6; }\n+    MSVC_DLL_FILETYPE=`$FILE -b \"$POSSIBLE_MSVC_DLL\"`\n+    if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+      # The MSYS 'file' command returns \"PE32 executable for MS Windows (DLL) (GUI) Intel 80386 32-bit\"\n+      # on x32 and \"PE32+ executable for MS Windows (DLL) (GUI) Mono\/.Net assembly\" on x64 systems.\n+      if test \"x$OPENJDK_TARGET_CPU_BITS\" = x32; then\n+        CORRECT_MSVCR_ARCH=\"PE32 executable\"\n+      else\n+        CORRECT_MSVCR_ARCH=\"PE32+ executable\"\n+      fi\n+    else\n+      if test \"x$OPENJDK_TARGET_CPU_BITS\" = x32; then\n+        CORRECT_MSVCR_ARCH=386\n+      else\n+        CORRECT_MSVCR_ARCH=x86-64\n+      fi\n+    fi\n+    if $ECHO \"$MSVC_DLL_FILETYPE\" | $GREP \"$CORRECT_MSVCR_ARCH\" 2>&1 > \/dev\/null; then\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: ok\" >&5\n+$as_echo \"ok\" >&6; }\n+      MSVC_DLL=\"$POSSIBLE_MSVC_DLL\"\n+\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+\n+  # Input might be given as Windows format, start by converting to\n+  # unix format.\n+  path=\"$MSVC_DLL\"\n+  new_path=`$CYGPATH -u \"$path\"`\n+\n+  # Cygwin tries to hide some aspects of the Windows file system, such that binaries are\n+  # named .exe but called without that suffix. Therefore, \"foo\" and \"foo.exe\" are considered\n+  # the same file, most of the time (as in \"test -f\"). But not when running cygpath -s, then\n+  # \"foo.exe\" is OK but \"foo\" is an error.\n+  #\n+  # This test is therefore slightly more accurate than \"test -f\" to check for file precense.\n+  # It is also a way to make sure we got the proper file name for the real test later on.\n+  test_shortpath=`$CYGPATH -s -m \"$new_path\" 2> \/dev\/null`\n+  if test \"x$test_shortpath\" = x; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&5\n+$as_echo \"$as_me: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&6;}\n+    as_fn_error $? \"Cannot locate the the path of MSVC_DLL\" \"$LINENO\" 5\n+  fi\n+\n+  # Call helper function which possibly converts this using DOS-style short mode.\n+  # If so, the updated path is stored in $new_path.\n+\n+  input_path=\"$new_path\"\n+  # Check if we need to convert this using DOS-style short mode. If the path\n+  # contains just simple characters, use it. Otherwise (spaces, weird characters),\n+  # take no chances and rewrite it.\n+  # Note: m4 eats our [], so we need to use [ and ] instead.\n+  has_forbidden_chars=`$ECHO \"$input_path\" | $GREP [^-._\/a-zA-Z0-9]`\n+  if test \"x$has_forbidden_chars\" != x; then\n+    # Now convert it to mixed DOS-style, short mode (no spaces, and \/ instead of \\)\n+    shortmode_path=`$CYGPATH -s -m -a \"$input_path\"`\n+    path_after_shortmode=`$CYGPATH -u \"$shortmode_path\"`\n+    if test \"x$path_after_shortmode\" != \"x$input_to_shortpath\"; then\n+      # Going to short mode and back again did indeed matter. Since short mode is\n+      # case insensitive, let's make it lowercase to improve readability.\n+      shortmode_path=`$ECHO \"$shortmode_path\" | $TR 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n+      # Now convert it back to Unix-style (cygpath)\n+      input_path=`$CYGPATH -u \"$shortmode_path\"`\n+      new_path=\"$input_path\"\n+    fi\n+  fi\n+\n+  test_cygdrive_prefix=`$ECHO $input_path | $GREP ^\/cygdrive\/`\n+  if test \"x$test_cygdrive_prefix\" = x; then\n+    # As a simple fix, exclude \/usr\/bin since it's not a real path.\n+    if test \"x`$ECHO $new_path | $GREP ^\/usr\/bin\/`\" = x; then\n+      # The path is in a Cygwin special directory (e.g. \/home). We need this converted to\n+      # a path prefixed by \/cygdrive for fixpath to work.\n+      new_path=\"$CYGWIN_ROOT_PATH$input_path\"\n+    fi\n+  fi\n+\n+\n+  if test \"x$path\" != \"x$new_path\"; then\n+    MSVC_DLL=\"$new_path\"\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&5\n+$as_echo \"$as_me: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&6;}\n+  fi\n+\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+\n+  path=\"$MSVC_DLL\"\n+  has_colon=`$ECHO $path | $GREP ^.:`\n+  new_path=\"$path\"\n+  if test \"x$has_colon\" = x; then\n+    # Not in mixed or Windows style, start by that.\n+    new_path=`cmd \/\/c echo $path`\n+  fi\n+\n+\n+  input_path=\"$new_path\"\n+  # Check if we need to convert this using DOS-style short mode. If the path\n+  # contains just simple characters, use it. Otherwise (spaces, weird characters),\n+  # take no chances and rewrite it.\n+  # Note: m4 eats our [], so we need to use [ and ] instead.\n+  has_forbidden_chars=`$ECHO \"$input_path\" | $GREP [^-_\/:a-zA-Z0-9]`\n+  if test \"x$has_forbidden_chars\" != x; then\n+    # Now convert it to mixed DOS-style, short mode (no spaces, and \/ instead of \\)\n+    new_path=`cmd \/c \"for %A in (\\\"$input_path\\\") do @echo %~sA\"|$TR \\\\\\\\\\\\\\\\ \/ | $TR 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n+  fi\n+\n+\n+  windows_path=\"$new_path\"\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+    unix_path=`$CYGPATH -u \"$windows_path\"`\n+    new_path=\"$unix_path\"\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+    unix_path=`$ECHO \"$windows_path\" | $SED -e 's,^\\\\(.\\\\):,\/\\\\1,g' -e 's,\\\\\\\\,\/,g'`\n+    new_path=\"$unix_path\"\n+  fi\n+\n+  if test \"x$path\" != \"x$new_path\"; then\n+    MSVC_DLL=\"$new_path\"\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&5\n+$as_echo \"$as_me: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&6;}\n+  fi\n+\n+  # Save the first 10 bytes of this path to the storage, so fixpath can work.\n+  all_fixpath_prefixes=(\"${all_fixpath_prefixes[@]}\" \"${new_path:0:10}\")\n+\n+  else\n+    # We're on a posix platform. Hooray! :)\n+    path=\"$MSVC_DLL\"\n+    has_space=`$ECHO \"$path\" | $GREP \" \"`\n+    if test \"x$has_space\" != x; then\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&5\n+$as_echo \"$as_me: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&6;}\n+      as_fn_error $? \"Spaces are not allowed in this path.\" \"$LINENO\" 5\n+    fi\n+\n+    # Use eval to expand a potential ~\n+    eval path=\"$path\"\n+    if test ! -f \"$path\" && test ! -d \"$path\"; then\n+      as_fn_error $? \"The path of MSVC_DLL, which resolves as \\\"$path\\\", is not found.\" \"$LINENO\" 5\n+    fi\n+\n+    MSVC_DLL=\"`cd \"$path\"; $THEPWDCMD -L`\"\n+  fi\n+\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $DLL_NAME\" >&5\n+$as_echo_n \"checking for $DLL_NAME... \" >&6; }\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $MSVC_DLL\" >&5\n+$as_echo \"$MSVC_DLL\" >&6; }\n+    else\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: incorrect, ignoring\" >&5\n+$as_echo \"incorrect, ignoring\" >&6; }\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: The file type of the located $DLL_NAME is $MSVC_DLL_FILETYPE\" >&5\n+$as_echo \"$as_me: The file type of the located $DLL_NAME is $MSVC_DLL_FILETYPE\" >&6;}\n+    fi\n+  fi\n+\n@@ -49982,0 +51036,10 @@\n+  fi\n+\n+  if test \"x$MSVC_DLL\" = x; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $DLL_NAME\" >&5\n+$as_echo_n \"checking for $DLL_NAME... \" >&6; }\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n+$as_echo \"no\" >&6; }\n+    as_fn_error $? \"Could not find $DLL_NAME. Please specify using --with-msvcr-dll.\" \"$LINENO\" 5\n+  fi\n+\n@@ -49983,0 +51047,147 @@\n+  fi\n+\n+\n+\n+# Check whether --with-msvcp-dll was given.\n+if test \"${with_msvcp_dll+set}\" = set; then :\n+  withval=$with_msvcp_dll;\n+fi\n+\n+\n+  if test \"x$MSVCP_NAME\" != \"x\"; then\n+    if test \"x$with_msvcp_dll\" != x; then\n+      # If given explicitely by user, do not probe. If not present, fail directly.\n+\n+  DLL_NAME=\"$MSVCP_NAME\"\n+  POSSIBLE_MSVC_DLL=\"$with_msvcp_dll\"\n+  METHOD=\"--with-msvcp-dll\"\n+  if test -n \"$POSSIBLE_MSVC_DLL\" -a -e \"$POSSIBLE_MSVC_DLL\"; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Found $DLL_NAME at $POSSIBLE_MSVC_DLL using $METHOD\" >&5\n+$as_echo \"$as_me: Found $DLL_NAME at $POSSIBLE_MSVC_DLL using $METHOD\" >&6;}\n+\n+    # Need to check if the found msvcr is correct architecture\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking found $DLL_NAME architecture\" >&5\n+$as_echo_n \"checking found $DLL_NAME architecture... \" >&6; }\n+    MSVC_DLL_FILETYPE=`$FILE -b \"$POSSIBLE_MSVC_DLL\"`\n+    if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+      # The MSYS 'file' command returns \"PE32 executable for MS Windows (DLL) (GUI) Intel 80386 32-bit\"\n+      # on x32 and \"PE32+ executable for MS Windows (DLL) (GUI) Mono\/.Net assembly\" on x64 systems.\n+      if test \"x$OPENJDK_TARGET_CPU_BITS\" = x32; then\n+        CORRECT_MSVCR_ARCH=\"PE32 executable\"\n+      else\n+        CORRECT_MSVCR_ARCH=\"PE32+ executable\"\n+      fi\n+    else\n+      if test \"x$OPENJDK_TARGET_CPU_BITS\" = x32; then\n+        CORRECT_MSVCR_ARCH=386\n+      else\n+        CORRECT_MSVCR_ARCH=x86-64\n+      fi\n+    fi\n+    if $ECHO \"$MSVC_DLL_FILETYPE\" | $GREP \"$CORRECT_MSVCR_ARCH\" 2>&1 > \/dev\/null; then\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: ok\" >&5\n+$as_echo \"ok\" >&6; }\n+      MSVC_DLL=\"$POSSIBLE_MSVC_DLL\"\n+\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+\n+  # Input might be given as Windows format, start by converting to\n+  # unix format.\n+  path=\"$MSVC_DLL\"\n+  new_path=`$CYGPATH -u \"$path\"`\n+\n+  # Cygwin tries to hide some aspects of the Windows file system, such that binaries are\n+  # named .exe but called without that suffix. Therefore, \"foo\" and \"foo.exe\" are considered\n+  # the same file, most of the time (as in \"test -f\"). But not when running cygpath -s, then\n+  # \"foo.exe\" is OK but \"foo\" is an error.\n+  #\n+  # This test is therefore slightly more accurate than \"test -f\" to check for file precense.\n+  # It is also a way to make sure we got the proper file name for the real test later on.\n+  test_shortpath=`$CYGPATH -s -m \"$new_path\" 2> \/dev\/null`\n+  if test \"x$test_shortpath\" = x; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&5\n+$as_echo \"$as_me: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&6;}\n+    as_fn_error $? \"Cannot locate the the path of MSVC_DLL\" \"$LINENO\" 5\n+  fi\n+\n+  # Call helper function which possibly converts this using DOS-style short mode.\n+  # If so, the updated path is stored in $new_path.\n+\n+  input_path=\"$new_path\"\n+  # Check if we need to convert this using DOS-style short mode. If the path\n+  # contains just simple characters, use it. Otherwise (spaces, weird characters),\n+  # take no chances and rewrite it.\n+  # Note: m4 eats our [], so we need to use [ and ] instead.\n+  has_forbidden_chars=`$ECHO \"$input_path\" | $GREP [^-._\/a-zA-Z0-9]`\n+  if test \"x$has_forbidden_chars\" != x; then\n+    # Now convert it to mixed DOS-style, short mode (no spaces, and \/ instead of \\)\n+    shortmode_path=`$CYGPATH -s -m -a \"$input_path\"`\n+    path_after_shortmode=`$CYGPATH -u \"$shortmode_path\"`\n+    if test \"x$path_after_shortmode\" != \"x$input_to_shortpath\"; then\n+      # Going to short mode and back again did indeed matter. Since short mode is\n+      # case insensitive, let's make it lowercase to improve readability.\n+      shortmode_path=`$ECHO \"$shortmode_path\" | $TR 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n+      # Now convert it back to Unix-style (cygpath)\n+      input_path=`$CYGPATH -u \"$shortmode_path\"`\n+      new_path=\"$input_path\"\n+    fi\n+  fi\n+\n+  test_cygdrive_prefix=`$ECHO $input_path | $GREP ^\/cygdrive\/`\n+  if test \"x$test_cygdrive_prefix\" = x; then\n+    # As a simple fix, exclude \/usr\/bin since it's not a real path.\n+    if test \"x`$ECHO $new_path | $GREP ^\/usr\/bin\/`\" = x; then\n+      # The path is in a Cygwin special directory (e.g. \/home). We need this converted to\n+      # a path prefixed by \/cygdrive for fixpath to work.\n+      new_path=\"$CYGWIN_ROOT_PATH$input_path\"\n+    fi\n+  fi\n+\n+\n+  if test \"x$path\" != \"x$new_path\"; then\n+    MSVC_DLL=\"$new_path\"\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&5\n+$as_echo \"$as_me: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&6;}\n+  fi\n+\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+\n+  path=\"$MSVC_DLL\"\n+  has_colon=`$ECHO $path | $GREP ^.:`\n+  new_path=\"$path\"\n+  if test \"x$has_colon\" = x; then\n+    # Not in mixed or Windows style, start by that.\n+    new_path=`cmd \/\/c echo $path`\n+  fi\n+\n+\n+  input_path=\"$new_path\"\n+  # Check if we need to convert this using DOS-style short mode. If the path\n+  # contains just simple characters, use it. Otherwise (spaces, weird characters),\n+  # take no chances and rewrite it.\n+  # Note: m4 eats our [], so we need to use [ and ] instead.\n+  has_forbidden_chars=`$ECHO \"$input_path\" | $GREP [^-_\/:a-zA-Z0-9]`\n+  if test \"x$has_forbidden_chars\" != x; then\n+    # Now convert it to mixed DOS-style, short mode (no spaces, and \/ instead of \\)\n+    new_path=`cmd \/c \"for %A in (\\\"$input_path\\\") do @echo %~sA\"|$TR \\\\\\\\\\\\\\\\ \/ | $TR 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n+  fi\n+\n+\n+  windows_path=\"$new_path\"\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+    unix_path=`$CYGPATH -u \"$windows_path\"`\n+    new_path=\"$unix_path\"\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+    unix_path=`$ECHO \"$windows_path\" | $SED -e 's,^\\\\(.\\\\):,\/\\\\1,g' -e 's,\\\\\\\\,\/,g'`\n+    new_path=\"$unix_path\"\n+  fi\n+\n+  if test \"x$path\" != \"x$new_path\"; then\n+    MSVC_DLL=\"$new_path\"\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&5\n+$as_echo \"$as_me: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&6;}\n+  fi\n+\n+  # Save the first 10 bytes of this path to the storage, so fixpath can work.\n+  all_fixpath_prefixes=(\"${all_fixpath_prefixes[@]}\" \"${new_path:0:10}\")\n+\n@@ -49984,0 +51195,8 @@\n+    # We're on a posix platform. Hooray! :)\n+    path=\"$MSVC_DLL\"\n+    has_space=`$ECHO \"$path\" | $GREP \" \"`\n+    if test \"x$has_space\" != x; then\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&5\n+$as_echo \"$as_me: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&6;}\n+      as_fn_error $? \"Spaces are not allowed in this path.\" \"$LINENO\" 5\n+    fi\n@@ -49985,1 +51204,198 @@\n-  DLL_NAME=\"${MSVCR_NAME}\"\n+    # Use eval to expand a potential ~\n+    eval path=\"$path\"\n+    if test ! -f \"$path\" && test ! -d \"$path\"; then\n+      as_fn_error $? \"The path of MSVC_DLL, which resolves as \\\"$path\\\", is not found.\" \"$LINENO\" 5\n+    fi\n+\n+    MSVC_DLL=\"`cd \"$path\"; $THEPWDCMD -L`\"\n+  fi\n+\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $DLL_NAME\" >&5\n+$as_echo_n \"checking for $DLL_NAME... \" >&6; }\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $MSVC_DLL\" >&5\n+$as_echo \"$MSVC_DLL\" >&6; }\n+    else\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: incorrect, ignoring\" >&5\n+$as_echo \"incorrect, ignoring\" >&6; }\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: The file type of the located $DLL_NAME is $MSVC_DLL_FILETYPE\" >&5\n+$as_echo \"$as_me: The file type of the located $DLL_NAME is $MSVC_DLL_FILETYPE\" >&6;}\n+    fi\n+  fi\n+\n+      if test \"x$MSVC_DLL\" = x; then\n+        as_fn_error $? \"Could not find a proper $MSVCP_NAME as specified by --with-msvcp-dll\" \"$LINENO\" 5\n+      fi\n+      MSVCP_DLL=\"$MSVC_DLL\"\n+    elif test \"x$DEVKIT_MSVCP_DLL\" != x; then\n+\n+  DLL_NAME=\"$MSVCP_NAME\"\n+  POSSIBLE_MSVC_DLL=\"$DEVKIT_MSVCP_DLL\"\n+  METHOD=\"devkit\"\n+  if test -n \"$POSSIBLE_MSVC_DLL\" -a -e \"$POSSIBLE_MSVC_DLL\"; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Found $DLL_NAME at $POSSIBLE_MSVC_DLL using $METHOD\" >&5\n+$as_echo \"$as_me: Found $DLL_NAME at $POSSIBLE_MSVC_DLL using $METHOD\" >&6;}\n+\n+    # Need to check if the found msvcr is correct architecture\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking found $DLL_NAME architecture\" >&5\n+$as_echo_n \"checking found $DLL_NAME architecture... \" >&6; }\n+    MSVC_DLL_FILETYPE=`$FILE -b \"$POSSIBLE_MSVC_DLL\"`\n+    if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+      # The MSYS 'file' command returns \"PE32 executable for MS Windows (DLL) (GUI) Intel 80386 32-bit\"\n+      # on x32 and \"PE32+ executable for MS Windows (DLL) (GUI) Mono\/.Net assembly\" on x64 systems.\n+      if test \"x$OPENJDK_TARGET_CPU_BITS\" = x32; then\n+        CORRECT_MSVCR_ARCH=\"PE32 executable\"\n+      else\n+        CORRECT_MSVCR_ARCH=\"PE32+ executable\"\n+      fi\n+    else\n+      if test \"x$OPENJDK_TARGET_CPU_BITS\" = x32; then\n+        CORRECT_MSVCR_ARCH=386\n+      else\n+        CORRECT_MSVCR_ARCH=x86-64\n+      fi\n+    fi\n+    if $ECHO \"$MSVC_DLL_FILETYPE\" | $GREP \"$CORRECT_MSVCR_ARCH\" 2>&1 > \/dev\/null; then\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: ok\" >&5\n+$as_echo \"ok\" >&6; }\n+      MSVC_DLL=\"$POSSIBLE_MSVC_DLL\"\n+\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+\n+  # Input might be given as Windows format, start by converting to\n+  # unix format.\n+  path=\"$MSVC_DLL\"\n+  new_path=`$CYGPATH -u \"$path\"`\n+\n+  # Cygwin tries to hide some aspects of the Windows file system, such that binaries are\n+  # named .exe but called without that suffix. Therefore, \"foo\" and \"foo.exe\" are considered\n+  # the same file, most of the time (as in \"test -f\"). But not when running cygpath -s, then\n+  # \"foo.exe\" is OK but \"foo\" is an error.\n+  #\n+  # This test is therefore slightly more accurate than \"test -f\" to check for file precense.\n+  # It is also a way to make sure we got the proper file name for the real test later on.\n+  test_shortpath=`$CYGPATH -s -m \"$new_path\" 2> \/dev\/null`\n+  if test \"x$test_shortpath\" = x; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&5\n+$as_echo \"$as_me: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&6;}\n+    as_fn_error $? \"Cannot locate the the path of MSVC_DLL\" \"$LINENO\" 5\n+  fi\n+\n+  # Call helper function which possibly converts this using DOS-style short mode.\n+  # If so, the updated path is stored in $new_path.\n+\n+  input_path=\"$new_path\"\n+  # Check if we need to convert this using DOS-style short mode. If the path\n+  # contains just simple characters, use it. Otherwise (spaces, weird characters),\n+  # take no chances and rewrite it.\n+  # Note: m4 eats our [], so we need to use [ and ] instead.\n+  has_forbidden_chars=`$ECHO \"$input_path\" | $GREP [^-._\/a-zA-Z0-9]`\n+  if test \"x$has_forbidden_chars\" != x; then\n+    # Now convert it to mixed DOS-style, short mode (no spaces, and \/ instead of \\)\n+    shortmode_path=`$CYGPATH -s -m -a \"$input_path\"`\n+    path_after_shortmode=`$CYGPATH -u \"$shortmode_path\"`\n+    if test \"x$path_after_shortmode\" != \"x$input_to_shortpath\"; then\n+      # Going to short mode and back again did indeed matter. Since short mode is\n+      # case insensitive, let's make it lowercase to improve readability.\n+      shortmode_path=`$ECHO \"$shortmode_path\" | $TR 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n+      # Now convert it back to Unix-style (cygpath)\n+      input_path=`$CYGPATH -u \"$shortmode_path\"`\n+      new_path=\"$input_path\"\n+    fi\n+  fi\n+\n+  test_cygdrive_prefix=`$ECHO $input_path | $GREP ^\/cygdrive\/`\n+  if test \"x$test_cygdrive_prefix\" = x; then\n+    # As a simple fix, exclude \/usr\/bin since it's not a real path.\n+    if test \"x`$ECHO $new_path | $GREP ^\/usr\/bin\/`\" = x; then\n+      # The path is in a Cygwin special directory (e.g. \/home). We need this converted to\n+      # a path prefixed by \/cygdrive for fixpath to work.\n+      new_path=\"$CYGWIN_ROOT_PATH$input_path\"\n+    fi\n+  fi\n+\n+\n+  if test \"x$path\" != \"x$new_path\"; then\n+    MSVC_DLL=\"$new_path\"\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&5\n+$as_echo \"$as_me: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&6;}\n+  fi\n+\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+\n+  path=\"$MSVC_DLL\"\n+  has_colon=`$ECHO $path | $GREP ^.:`\n+  new_path=\"$path\"\n+  if test \"x$has_colon\" = x; then\n+    # Not in mixed or Windows style, start by that.\n+    new_path=`cmd \/\/c echo $path`\n+  fi\n+\n+\n+  input_path=\"$new_path\"\n+  # Check if we need to convert this using DOS-style short mode. If the path\n+  # contains just simple characters, use it. Otherwise (spaces, weird characters),\n+  # take no chances and rewrite it.\n+  # Note: m4 eats our [], so we need to use [ and ] instead.\n+  has_forbidden_chars=`$ECHO \"$input_path\" | $GREP [^-_\/:a-zA-Z0-9]`\n+  if test \"x$has_forbidden_chars\" != x; then\n+    # Now convert it to mixed DOS-style, short mode (no spaces, and \/ instead of \\)\n+    new_path=`cmd \/c \"for %A in (\\\"$input_path\\\") do @echo %~sA\"|$TR \\\\\\\\\\\\\\\\ \/ | $TR 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n+  fi\n+\n+\n+  windows_path=\"$new_path\"\n+  if test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.cygwin\"; then\n+    unix_path=`$CYGPATH -u \"$windows_path\"`\n+    new_path=\"$unix_path\"\n+  elif test \"x$OPENJDK_BUILD_OS_ENV\" = \"xwindows.msys\"; then\n+    unix_path=`$ECHO \"$windows_path\" | $SED -e 's,^\\\\(.\\\\):,\/\\\\1,g' -e 's,\\\\\\\\,\/,g'`\n+    new_path=\"$unix_path\"\n+  fi\n+\n+  if test \"x$path\" != \"x$new_path\"; then\n+    MSVC_DLL=\"$new_path\"\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&5\n+$as_echo \"$as_me: Rewriting MSVC_DLL to \\\"$new_path\\\"\" >&6;}\n+  fi\n+\n+  # Save the first 10 bytes of this path to the storage, so fixpath can work.\n+  all_fixpath_prefixes=(\"${all_fixpath_prefixes[@]}\" \"${new_path:0:10}\")\n+\n+  else\n+    # We're on a posix platform. Hooray! :)\n+    path=\"$MSVC_DLL\"\n+    has_space=`$ECHO \"$path\" | $GREP \" \"`\n+    if test \"x$has_space\" != x; then\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&5\n+$as_echo \"$as_me: The path of MSVC_DLL, which resolves as \\\"$path\\\", is invalid.\" >&6;}\n+      as_fn_error $? \"Spaces are not allowed in this path.\" \"$LINENO\" 5\n+    fi\n+\n+    # Use eval to expand a potential ~\n+    eval path=\"$path\"\n+    if test ! -f \"$path\" && test ! -d \"$path\"; then\n+      as_fn_error $? \"The path of MSVC_DLL, which resolves as \\\"$path\\\", is not found.\" \"$LINENO\" 5\n+    fi\n+\n+    MSVC_DLL=\"`cd \"$path\"; $THEPWDCMD -L`\"\n+  fi\n+\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $DLL_NAME\" >&5\n+$as_echo_n \"checking for $DLL_NAME... \" >&6; }\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $MSVC_DLL\" >&5\n+$as_echo \"$MSVC_DLL\" >&6; }\n+    else\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: result: incorrect, ignoring\" >&5\n+$as_echo \"incorrect, ignoring\" >&6; }\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: The file type of the located $DLL_NAME is $MSVC_DLL_FILETYPE\" >&5\n+$as_echo \"$as_me: The file type of the located $DLL_NAME is $MSVC_DLL_FILETYPE\" >&6;}\n+    fi\n+  fi\n+\n+      if test \"x$MSVC_DLL\" = x; then\n+        as_fn_error $? \"Could not find a proper $MSVCP_NAME as specified by devkit\" \"$LINENO\" 5\n+      fi\n+      MSVCP_DLL=\"$MSVC_DLL\"\n+    else\n+\n+  DLL_NAME=\"${MSVCP_NAME}\"\n@@ -51033,2 +52449,2 @@\n-    MSVCR_DLL=\"$MSVC_DLL\"\n-  fi\n+      MSVCP_DLL=\"$MSVC_DLL\"\n+    fi\n@@ -51036,0 +52452,1 @@\n+  fi\n@@ -51038,3 +52455,3 @@\n-# Check whether --with-msvcp-dll was given.\n-if test \"${with_msvcp_dll+set}\" = set; then :\n-  withval=$with_msvcp_dll;\n+# Check whether --with-vcruntime-1-dll was given.\n+if test \"${with_vcruntime_1_dll+set}\" = set; then :\n+  withval=$with_vcruntime_1_dll;\n@@ -51044,3 +52461,3 @@\n-  if test \"x$MSVCP_NAME\" != \"x\"; then\n-    if test \"x$with_msvcp_dll\" != x; then\n-      # If given explicitely by user, do not probe. If not present, fail directly.\n+  if test \"x$VCRUNTIME_1_NAME\" != \"x\" && test \"x$OPENJDK_TARGET_CPU\" = xx86_64; then\n+    if test \"x$with_vcruntime_1_dll\" != x; then\n+      # If given explicitly by user, do not probe. If not present, fail directly.\n@@ -51048,3 +52465,3 @@\n-  DLL_NAME=\"$MSVCP_NAME\"\n-  POSSIBLE_MSVC_DLL=\"$with_msvcp_dll\"\n-  METHOD=\"--with-msvcp-dll\"\n+  DLL_NAME=\"$VCRUNTIME_1_NAME\"\n+  POSSIBLE_MSVC_DLL=\"$with_vcruntime_1_dll\"\n+  METHOD=\"--with-vcruntime-1-dll\"\n@@ -51213,1 +52630,1 @@\n-        as_fn_error $? \"Could not find a proper $MSVCP_NAME as specified by --with-msvcp-dll\" \"$LINENO\" 5\n+        as_fn_error $? \"Could not find a proper $VCRUNTIME_1_NAME as specified by --with-vcruntime-1-dll\" \"$LINENO\" 5\n@@ -51215,2 +52632,2 @@\n-      MSVCP_DLL=\"$MSVC_DLL\"\n-    elif test \"x$DEVKIT_MSVCP_DLL\" != x; then\n+      VCRUNTIME_1_DLL=\"$MSVC_DLL\"\n+    elif test \"x$DEVKIT_VCRUNTIME_1_DLL\" != x; then\n@@ -51218,2 +52635,2 @@\n-  DLL_NAME=\"$MSVCP_NAME\"\n-  POSSIBLE_MSVC_DLL=\"$DEVKIT_MSVCP_DLL\"\n+  DLL_NAME=\"$VCRUNTIME_1_NAME\"\n+  POSSIBLE_MSVC_DLL=\"$DEVKIT_VCRUNTIME_1_DLL\"\n@@ -51383,1 +52800,1 @@\n-        as_fn_error $? \"Could not find a proper $MSVCP_NAME as specified by devkit\" \"$LINENO\" 5\n+        as_fn_error $? \"Could not find a proper $VCRUNTIME_1_NAME as specified by devkit\" \"$LINENO\" 5\n@@ -51385,1 +52802,1 @@\n-      MSVCP_DLL=\"$MSVC_DLL\"\n+      VCRUNTIME_1_DLL=\"$MSVC_DLL\"\n@@ -51388,1 +52805,1 @@\n-  DLL_NAME=\"${MSVCP_NAME}\"\n+  DLL_NAME=\"${VCRUNTIME_1_NAME}\"\n@@ -52436,1 +53853,1 @@\n-      MSVCP_DLL=\"$MSVC_DLL\"\n+      VCRUNTIME_1_DLL=\"$MSVC_DLL\"\n","filename":"common\/autoconf\/generated-configure.sh","additions":1442,"deletions":25,"binary":false,"changes":1467,"status":"modified"},{"patch":"@@ -611,0 +611,1 @@\n+VCRUNTIME_1_DLL:=@VCRUNTIME_1_DLL@\n","filename":"common\/autoconf\/spec.gmk.in","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -87,1 +87,1 @@\n-VS_VERSION_INTERNAL_2019=141\n+VS_VERSION_INTERNAL_2019=142\n@@ -89,0 +89,1 @@\n+VS_VCRUNTIME_1_2019=vcruntime140_1.dll\n@@ -282,0 +283,1 @@\n+    eval VCRUNTIME_1_NAME=\"\\${VS_VCRUNTIME_1_${VS_VERSION}}\"\n@@ -328,0 +330,1 @@\n+      eval VCRUNTIME_1_NAME=\"\\${VS_VCRUNTIME_1_${VS_VERSION}}\"\n@@ -663,0 +666,25 @@\n+  AC_ARG_WITH(vcruntime-1-dll, [AS_HELP_STRING([--with-vcruntime-1-dll],\n+      [path to microsoft C++ runtime dll (vcruntime*_1.dll) (Windows only) @<:@probed@:>@])])\n+\n+  if test \"x$VCRUNTIME_1_NAME\" != \"x\" && test \"x$OPENJDK_TARGET_CPU\" = xx86_64; then\n+    if test \"x$with_vcruntime_1_dll\" != x; then\n+      # If given explicitly by user, do not probe. If not present, fail directly.\n+      TOOLCHAIN_CHECK_POSSIBLE_MSVC_DLL($VCRUNTIME_1_NAME, [$with_vcruntime_1_dll],\n+          [--with-vcruntime-1-dll])\n+      if test \"x$MSVC_DLL\" = x; then\n+        AC_MSG_ERROR([Could not find a proper $VCRUNTIME_1_NAME as specified by --with-vcruntime-1-dll])\n+      fi\n+      VCRUNTIME_1_DLL=\"$MSVC_DLL\"\n+    elif test \"x$DEVKIT_VCRUNTIME_1_DLL\" != x; then\n+      TOOLCHAIN_CHECK_POSSIBLE_MSVC_DLL($VCRUNTIME_1_NAME, [$DEVKIT_VCRUNTIME_1_DLL], [devkit])\n+      if test \"x$MSVC_DLL\" = x; then\n+        AC_MSG_ERROR([Could not find a proper $VCRUNTIME_1_NAME as specified by devkit])\n+      fi\n+      VCRUNTIME_1_DLL=\"$MSVC_DLL\"\n+    else\n+      TOOLCHAIN_SETUP_MSVC_DLL([${VCRUNTIME_1_NAME}])\n+      VCRUNTIME_1_DLL=\"$MSVC_DLL\"\n+    fi\n+    AC_SUBST(VCRUNTIME_1_DLL)\n+  fi\n+\n","filename":"common\/autoconf\/toolchain_windows.m4","additions":29,"deletions":1,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n-JDK_UPDATE_VERSION=362\n+JDK_UPDATE_VERSION=372\n","filename":"common\/autoconf\/version-numbers","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -172,0 +172,3 @@\n+!if \"$(MSC_VER)\" >= \"1920\" && \"$(MSC_VER)\" <= \"1929\"\n+COMPILER_NAME=VS2019\n+!endif\n@@ -321,0 +324,15 @@\n+!if \"$(COMPILER_NAME)\" == \"VS2019\"\n+PRODUCT_OPT_OPTION   = \/O2 \/Oy-\n+FASTDEBUG_OPT_OPTION = \/O2 \/Oy-\n+DEBUG_OPT_OPTION     = \/Od\n+GX_OPTION = \/EHsc\n+LD_FLAGS = \/manifest $(LD_FLAGS)\n+MP_FLAG = \/MP\n+# Manifest Tool - used in VS2005 and later to adjust manifests stored\n+# as resources inside build artifacts.\n+!if \"x$(MT)\" == \"x\"\n+MT=mt.exe\n+!endif\n+SAFESEH_FLAG = \/SAFESEH\n+!endif\n+\n","filename":"hotspot\/make\/windows\/makefiles\/compile.make","additions":18,"deletions":0,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -34,0 +34,2 @@\n+\tif \"$(MSC_VER)\" NEQ \"1920\" if \"$(MSC_VER)\" NEQ \"1921\" if \"$(MSC_VER)\" NEQ \"1922\" if \"$(MSC_VER)\" NEQ \"1923\" if \"$(MSC_VER)\" NEQ \"1924\" \\\n+\tif \"$(MSC_VER)\" NEQ \"1925\" if \"$(MSC_VER)\" NEQ \"1926\" if \"$(MSC_VER)\" NEQ \"1927\" if \"$(MSC_VER)\" NEQ \"1928\" if \"$(MSC_VER)\" NEQ \"1929\" \\\n@@ -42,0 +44,2 @@\n+\tif \"$(LD_VER)\" NEQ \"1420\" if \"$(LD_VER)\" NEQ \"1421\" if \"$(LD_VER)\" NEQ \"1422\" if \"$(LD_VER)\" NEQ \"1423\" if \"$(LD_VER)\" NEQ \"1424\" \\\n+\tif \"$(LD_VER)\" NEQ \"1425\" if \"$(LD_VER)\" NEQ \"1426\" if \"$(LD_VER)\" NEQ \"1427\" if \"$(LD_VER)\" NEQ \"1428\" if \"$(LD_VER)\" NEQ \"1429\" \\\n","filename":"hotspot\/make\/windows\/makefiles\/sanity.make","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -132,1 +132,1 @@\n-!if \"$(COMPILER_NAME)\" == \"VS2012\" || \"$(COMPILER_NAME)\" == \"VS2013\" || \"$(COMPILER_NAME)\" == \"VS2015\" || \"$(COMPILER_NAME)\" == \"VS2017\"\n+!if \"$(COMPILER_NAME)\" == \"VS2012\" || \"$(COMPILER_NAME)\" == \"VS2013\" || \"$(COMPILER_NAME)\" == \"VS2015\" || \"$(COMPILER_NAME)\" == \"VS2017\" || \"$(COMPILER_NAME)\" == \"VS2019\"\n","filename":"hotspot\/make\/windows\/makefiles\/vm.make","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -172,0 +172,5 @@\n+\/\/ Note that for cgroups v2 the actual limits set for swap and\n+\/\/ memory live in two different files, memory.swap.max and memory.max\n+\/\/ respectively. In order to properly report a cgroup v1 like\n+\/\/ compound value we need to sum the two values. Setting a swap limit\n+\/\/ without also setting a memory limit is not allowed.\n@@ -174,1 +179,7 @@\n-  return limit_from_str(mem_swp_limit_str);\n+  jlong swap_limit = limit_from_str(mem_swp_limit_str);\n+  if (swap_limit >= 0) {\n+    jlong memory_limit = read_memory_limit_in_bytes();\n+    assert(memory_limit >= 0, \"swap limit without memory limit?\");\n+    return memory_limit + swap_limit;\n+  }\n+  return swap_limit;\n","filename":"hotspot\/src\/os\/linux\/vm\/cgroupV2Subsystem_linux.cpp","additions":12,"deletions":1,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2015, Oracle and\/or its affiliates. All rights reserved.\n@@ -108,3 +108,1 @@\n-  this->record_stack_base_and_size();\n-  this->initialize_thread_local_storage();\n-  this->set_active_handles(JNIHandleBlock::allocate_block());\n+  initialize_in_thread();\n@@ -226,6 +224,0 @@\n-void ConcurrentMarkSweepThread::print_on(outputStream* st) const {\n-  st->print(\"\\\"%s\\\" \", name());\n-  Thread::print_on(st);\n-  st->cr();\n-}\n-\n","filename":"hotspot\/src\/share\/vm\/gc_implementation\/concurrentMarkSweep\/concurrentMarkSweepThread.cpp","additions":2,"deletions":10,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -97,2 +97,0 @@\n-  void print_on(outputStream* st) const;\n-  void print() const                                  { print_on(tty); }\n","filename":"hotspot\/src\/share\/vm\/gc_implementation\/concurrentMarkSweep\/concurrentMarkSweepThread.hpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -61,0 +61,3 @@\n+\n+  \/\/ set name\n+  set_name(\"G1 Concurrent Refinement Thread#%d\", worker_id);\n@@ -250,9 +253,0 @@\n-void ConcurrentG1RefineThread::print() const {\n-  print_on(tty);\n-}\n-\n-void ConcurrentG1RefineThread::print_on(outputStream* st) const {\n-  st->print(\"\\\"G1 Concurrent Refinement Thread#%d\\\" \", _worker_id);\n-  Thread::print_on(st);\n-  st->cr();\n-}\n","filename":"hotspot\/src\/share\/vm\/gc_implementation\/g1\/concurrentG1RefineThread.cpp","additions":3,"deletions":9,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -80,4 +80,0 @@\n-  \/\/ Printing\n-  void print() const;\n-  void print_on(outputStream* st) const;\n-\n","filename":"hotspot\/src\/share\/vm\/gc_implementation\/g1\/concurrentG1RefineThread.hpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -49,0 +49,2 @@\n+\n+  set_name(\"G1 Main Concurrent Mark GC Thread\");\n@@ -321,10 +323,0 @@\n-void ConcurrentMarkThread::print() const {\n-  print_on(tty);\n-}\n-\n-void ConcurrentMarkThread::print_on(outputStream* st) const {\n-  st->print(\"\\\"G1 Main Concurrent Mark GC Thread\\\" \");\n-  Thread::print_on(st);\n-  st->cr();\n-}\n-\n","filename":"hotspot\/src\/share\/vm\/gc_implementation\/g1\/concurrentMarkThread.cpp","additions":2,"deletions":10,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -69,4 +69,0 @@\n-  \/\/ Printing\n-  void print_on(outputStream* st) const;\n-  void print() const;\n-\n","filename":"hotspot\/src\/share\/vm\/gc_implementation\/g1\/concurrentMarkThread.hpp","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -56,6 +56,0 @@\n-void G1StringDedupThread::print_on(outputStream* st) const {\n-  st->print(\"\\\"%s\\\" \", name());\n-  Thread::print_on(st);\n-  st->cr();\n-}\n-\n","filename":"hotspot\/src\/share\/vm\/gc_implementation\/g1\/g1StringDedupThread.cpp","additions":0,"deletions":6,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -55,1 +55,0 @@\n-  virtual void print_on(outputStream* st) const;\n","filename":"hotspot\/src\/share\/vm\/gc_implementation\/g1\/g1StringDedupThread.hpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n- * Copyright (c) 2002, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2015, Oracle and\/or its affiliates. All rights reserved.\n@@ -92,6 +92,0 @@\n-void GCTaskThread::print_on(outputStream* st) const {\n-  st->print(\"\\\"%s\\\" \", name());\n-  Thread::print_on(st);\n-  st->cr();\n-}\n-\n@@ -107,0 +101,1 @@\n+  this->initialize_named_thread();\n","filename":"hotspot\/src\/share\/vm\/gc_implementation\/parallelScavenge\/gcTaskThread.cpp","additions":2,"deletions":7,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -72,2 +72,0 @@\n-  void print_on(outputStream* st) const;\n-  void print() const                                { print_on(tty); }\n","filename":"hotspot\/src\/share\/vm\/gc_implementation\/parallelScavenge\/gcTaskThread.hpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2015, Oracle and\/or its affiliates. All rights reserved.\n@@ -58,0 +58,1 @@\n+  this->initialize_named_thread();\n","filename":"hotspot\/src\/share\/vm\/gc_implementation\/shared\/concurrentGCThread.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -1441,1 +1441,1 @@\n-    new_value = align_size_down(max_uintx, Metaspace::commit_alignment());\n+    new_value = align_size_down(max_uintx, Metaspace::reserve_alignment());\n","filename":"hotspot\/src\/share\/vm\/memory\/metaspace.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -794,1 +794,1 @@\n-      record_method_not_compilable_all_tiers(\"cannot parse method\");\n+      record_method_not_compilable(\"cannot parse method\");\n","filename":"hotspot\/src\/share\/vm\/opto\/compile.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -736,4 +736,3 @@\n-  void record_method_not_compilable(const char* reason, bool all_tiers = false) {\n-    \/\/ All bailouts cover \"all_tiers\" when TieredCompilation is off.\n-    if (!TieredCompilation) all_tiers = true;\n-    env()->record_method_not_compilable(reason, all_tiers);\n+  void record_method_not_compilable(const char* reason) {\n+    \/\/ Bailouts cover \"all_tiers\" when TieredCompilation is off.\n+    env()->record_method_not_compilable(reason, !TieredCompilation);\n@@ -743,3 +742,0 @@\n-  void record_method_not_compilable_all_tiers(const char* reason) {\n-    record_method_not_compilable(reason, true);\n-  }\n","filename":"hotspot\/src\/share\/vm\/opto\/compile.hpp","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -140,1 +140,1 @@\n-      C->record_method_not_compilable_all_tiers(\"unsupported incoming calling sequence\");\n+      C->record_method_not_compilable(\"unsupported incoming calling sequence\");\n@@ -1142,1 +1142,1 @@\n-      C->record_method_not_compilable_all_tiers(\"unsupported calling sequence\");\n+      C->record_method_not_compilable(\"unsupported calling sequence\");\n@@ -1321,1 +1321,1 @@\n-      C->record_method_not_compilable_all_tiers(\"unsupported outgoing calling sequence\");\n+      C->record_method_not_compilable(\"unsupported outgoing calling sequence\");\n@@ -1509,1 +1509,1 @@\n-    C->record_method_not_compilable_all_tiers(\"Out of stack space, increase MaxLabelRootDepth\");\n+    C->record_method_not_compilable(\"Out of stack space, increase MaxLabelRootDepth\");\n","filename":"hotspot\/src\/share\/vm\/opto\/matcher.cpp","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -418,1 +418,1 @@\n-    C->record_method_not_compilable_all_tiers(_flow->failure_reason());\n+    C->record_method_not_compilable(_flow->failure_reason());\n@@ -1083,1 +1083,1 @@\n-    C->record_method_not_compilable_all_tiers(\"too many local variables\");\n+    C->record_method_not_compilable(\"too many local variables\");\n","filename":"hotspot\/src\/share\/vm\/opto\/parse1.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -1234,0 +1234,11 @@\n+void NamedThread::initialize_named_thread() {\n+  set_native_thread_name(name());\n+}\n+\n+void NamedThread::print_on(outputStream* st) const {\n+  st->print(\"\\\"%s\\\" \", name());\n+  Thread::print_on(st);\n+  st->cr();\n+}\n+\n+\n","filename":"hotspot\/src\/share\/vm\/runtime\/thread.cpp","additions":11,"deletions":0,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -573,1 +573,1 @@\n-  void print_on(outputStream* st) const;\n+  virtual void print_on(outputStream* st) const;\n@@ -712,0 +712,1 @@\n+  void initialize_named_thread();\n@@ -716,0 +717,1 @@\n+  virtual void print_on(outputStream* st) const;\n@@ -760,1 +762,0 @@\n-  void print() const { print_on(tty); }\n@@ -1467,1 +1468,0 @@\n-  void print() const { print_on(tty); }\n","filename":"hotspot\/src\/share\/vm\/runtime\/thread.hpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -257,1 +257,1 @@\n-  this->set_native_thread_name(this->name());\n+  this->initialize_named_thread();\n@@ -358,6 +358,0 @@\n-void VMThread::print_on(outputStream* st) const {\n-  st->print(\"\\\"%s\\\" \", name());\n-  Thread::print_on(st);\n-  st->cr();\n-}\n-\n","filename":"hotspot\/src\/share\/vm\/runtime\/vmThread.cpp","additions":1,"deletions":7,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -134,3 +134,0 @@\n-  \/\/ Debugging\n-  void print_on(outputStream* st) const;\n-  void print() const                              { print_on(tty); }\n","filename":"hotspot\/src\/share\/vm\/runtime\/vmThread.hpp","additions":0,"deletions":3,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -38,0 +38,1 @@\n+# include <stdint.h>\n@@ -45,0 +46,3 @@\n+#if _MSC_VER >= 1800\n+# include <inttypes.h>\n+#endif\n@@ -80,24 +84,0 @@\n-\/\/ Some MS Visual Studio versions do not seem to have INT64_C and UINT64_C\n-\/\/ even with __STDC_CONSTANT_MACROS defined.\n-#ifndef INT64_C\n-#define INT64_C(c)  (c ## i64)\n-#endif\n-#ifndef UINT64_C\n-#define UINT64_C(c) (c ## ui64)\n-#endif\n-\n-\/\/ Compiler-specific primitive types\n-typedef unsigned __int8  uint8_t;\n-typedef unsigned __int16 uint16_t;\n-typedef unsigned __int32 uint32_t;\n-typedef unsigned __int64 uint64_t;\n-\n-#ifdef _WIN64\n-typedef unsigned __int64 uintptr_t;\n-#else\n-typedef unsigned int uintptr_t;\n-#endif\n-typedef signed   __int8  int8_t;\n-typedef signed   __int16 int16_t;\n-typedef signed   __int32 int32_t;\n-typedef signed   __int64 int64_t;\n@@ -105,2 +85,1 @@\n-typedef signed   __int64 intptr_t;\n-typedef signed   __int64 ssize_t;\n+typedef int64_t ssize_t;\n@@ -108,10 +87,1 @@\n-typedef signed   int intptr_t;\n-typedef signed   int ssize_t;\n-#endif\n-\n-#ifndef UINTPTR_MAX\n-#ifdef _WIN64\n-#define UINTPTR_MAX _UI64_MAX\n-#else\n-#define UINTPTR_MAX _UI32_MAX\n-#endif\n+typedef int32_t ssize_t;\n@@ -123,4 +93,4 @@\n-typedef unsigned char    jubyte;\n-typedef unsigned short   jushort;\n-typedef unsigned int     juint;\n-typedef unsigned __int64 julong;\n+typedef uint8_t  jubyte;\n+typedef uint16_t jushort;\n+typedef uint32_t juint;\n+typedef uint64_t julong;\n@@ -213,1 +183,1 @@\n-\/\/ Visual Studio doesn't provide inttypes.h so provide appropriate definitions here.\n+\/\/ Visual Studio 2010-2012 doesn't provide inttypes.h so provide appropriate definitions here.\n@@ -215,0 +185,1 @@\n+#if _MSC_VER < 1800\n@@ -232,0 +203,1 @@\n+#endif\n","filename":"hotspot\/src\/share\/vm\/utilities\/globalDefinitions_visCPP.hpp","additions":13,"deletions":41,"binary":false,"changes":54,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2014, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2015, Oracle and\/or its affiliates. All rights reserved.\n@@ -248,0 +248,1 @@\n+  this->initialize_named_thread();\n","filename":"hotspot\/src\/share\/vm\/utilities\/workgroup.cpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -56,11 +56,16 @@\n-compiler\/rtm\/locking\/TestRTMAbortRatio.java 8183263 generic-x64\n-compiler\/rtm\/locking\/TestRTMAbortThreshold.java 8183263 generic-x64\n-compiler\/rtm\/locking\/TestRTMAfterNonRTMDeopt.java 8183263 generic-x64\n-compiler\/rtm\/locking\/TestRTMDeoptOnHighAbortRatio.java 8183263 generic-x64\n-compiler\/rtm\/locking\/TestRTMDeoptOnLowAbortRatio.java 8183263 generic-x64\n-compiler\/rtm\/locking\/TestRTMLockingCalculationDelay.java 8183263 generic-x64\n-compiler\/rtm\/locking\/TestRTMLockingThreshold.java 8183263 generic-x64\n-compiler\/rtm\/locking\/TestRTMSpinLoopCount.java 8183263 generic-x64\n-compiler\/rtm\/locking\/TestUseRTMDeopt.java 8183263 generic-x64\n-compiler\/rtm\/locking\/TestUseRTMXendForLockBusy.java 8183263 generic-x64\n-compiler\/rtm\/print\/TestPrintPreciseRTMLockingStatistics.java 8183263 generic-x64\n+compiler\/rtm\/locking\/TestRTMAbortRatio.java 8183263 generic-x64,generic-i586\n+compiler\/rtm\/locking\/TestRTMAbortThreshold.java 8183263 generic-x64,generic-i586\n+compiler\/rtm\/locking\/TestRTMAfterNonRTMDeopt.java 8183263 generic-x64,generic-i586\n+compiler\/rtm\/locking\/TestRTMDeoptOnHighAbortRatio.java 8183263 generic-x64,generic-i586\n+compiler\/rtm\/locking\/TestRTMDeoptOnLowAbortRatio.java 8183263 generic-x64,generic-i586\n+compiler\/rtm\/locking\/TestRTMLockingCalculationDelay.java 8183263 generic-x64,generic-i586\n+compiler\/rtm\/locking\/TestRTMLockingThreshold.java 8183263 generic-x64,generic-i586\n+compiler\/rtm\/locking\/TestRTMSpinLoopCount.java 8183263 generic-x64,generic-i586\n+compiler\/rtm\/locking\/TestUseRTMDeopt.java 8183263 generic-x64,generic-i586\n+compiler\/rtm\/locking\/TestUseRTMXendForLockBusy.java 8183263 generic-x64,generic-i586\n+compiler\/rtm\/print\/TestPrintPreciseRTMLockingStatistics.java 8183263 generic-x64,generic-i586\n+compiler\/rtm\/locking\/TestRTMTotalCountIncrRate.java 8183263 generic-x64,generic-i586\n+compiler\/rtm\/locking\/TestUseRTMAfterLockInflation.java 8183263 generic-x64,generic-i586\n+compiler\/rtm\/locking\/TestUseRTMForInflatedLocks.java 8183263 generic-x64,generic-i586\n+compiler\/rtm\/locking\/TestUseRTMForStackLocks.java 8183263 generic-x64,generic-i586\n+compiler\/rtm\/method_options\/TestUseRTMLockElidingOption.java 8183263 generic-x64,generic-i586\n","filename":"hotspot\/test\/ProblemList.txt","additions":16,"deletions":11,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -0,0 +1,186 @@\n+\/*\n+ * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import org.testng.Assert;\n+import org.testng.annotations.Test;\n+\n+\/*\n+ * @test\n+ * @bug 8271459\n+ * @summary C2 applies string opts to StringBuilder object created with a negative size and misses the NegativeArraySizeException.\n+ * @run testng TestNegativeStringBuilderCapacity\n+ *\/\n+public class TestNegativeStringBuilderCapacity {\n+\n+    static final int pass_count = 10000;\n+\n+    static final String doIdenticalPositiveConst() throws Throwable {\n+        \/\/ C2 knows that argument is 5 and applies string opts without runtime check.\n+        StringBuilder sb = new StringBuilder(5); \/\/ StringBuilder object optimized away by string opts.\n+        return sb.toString(); \/\/ Call optimized away by string opts.\n+    }\n+\n+    @Test\n+    public static final void testIdenticalPositiveConst() {\n+        int throw_count = 0;\n+        for ( int pass = 0; pass < pass_count; pass++ ) {\n+            try {\n+                String s = doIdenticalPositiveConst();\n+            } catch (NegativeArraySizeException e) {\n+                throw_count++;\n+            } catch (Throwable e) {\n+                Assert.fail(\"Unexpected exception thrown\");\n+            }\n+        }\n+        Assert.assertEquals( throw_count, 0, String.format(\"%d exception were thrown, 0 expected\", throw_count));\n+    }\n+\n+    static final String doIdenticalNegativeConst() throws Throwable {\n+        \/\/ C2 knows that we always have a negative int -> bail out of string opts\n+        StringBuilder sb = new StringBuilder(-5);\n+        return sb.toString(); \/\/ Call stays due to bailout.\n+    }\n+\n+    @Test\n+    public static final void testIdenticalNegativeConst() {\n+        int throw_count = 0;\n+        for ( int pass = 0; pass < pass_count; pass++ ) {\n+            try {\n+                String s = doIdenticalNegativeConst();\n+            } catch (NegativeArraySizeException e) {\n+                throw_count++;\n+            } catch (Throwable e) {\n+                Assert.fail(\"Unexpected exception thrown\");\n+            }\n+        }\n+        Assert.assertEquals( throw_count, pass_count, String.format(\"%d exception were thrown, %d expected\", throw_count, pass_count));\n+    }\n+\n+    static int aField;\n+\n+    static final String doField() throws Throwable {\n+        \/\/ C2 does not know if iFld is positive or negative. It applies string opts but inserts a runtime check to\n+        \/\/ bail out to interpreter\n+        StringBuilder sb = new StringBuilder(aField);\n+        return sb.toString();\n+    }\n+\n+    @Test\n+    public static final void testPositiveField() {\n+        aField = 4;\n+        int throw_count = 0;\n+        for ( int pass = 0; pass < pass_count; pass++ ) {\n+            try {\n+                String s = doField();\n+            } catch (NegativeArraySizeException e) {\n+                throw_count++;\n+            } catch (Throwable e) {\n+                Assert.fail(\"Unexpected exception thrown\");\n+            }\n+        }\n+        Assert.assertEquals( throw_count, 0, String.format(\"%d exception were thrown, 0 expected\", throw_count));\n+    }\n+\n+    @Test\n+    public static final void testNegativeField() {\n+        aField = -4;\n+        int throw_count = 0;\n+        for ( int pass = 0; pass < pass_count; pass++ ) {\n+            try {\n+                String s = doField();\n+            } catch (NegativeArraySizeException e) {\n+                throw_count++;\n+            } catch (Throwable e) {\n+                Assert.fail(\"Unexpected exception thrown\");\n+            }\n+        }\n+        Assert.assertEquals( throw_count, pass_count, String.format(\"%d exception were thrown, %d expected\", throw_count, pass_count));\n+    }\n+\n+    static final String doPossiblyNegativeConst(boolean flag) throws Throwable {\n+        \/\/ C2 knows that cap is between -5 and 5. It applies string opts but inserts a runtime check to\n+        \/\/ bail out to interpreter. This path is sometimes taken and sometimes not.\n+        final int capacity = flag ? 5 : -5;\n+        StringBuilder sb = new StringBuilder(capacity);\n+        return sb.toString();\n+    }\n+\n+    @Test\n+    public static final void testPossiblyNegativeConst() {\n+        int throw_count = 0;\n+        for ( int pass = 0; pass < pass_count; pass++ ) {\n+            try {\n+                String s = doPossiblyNegativeConst((pass % 2) == 0);\n+            } catch (NegativeArraySizeException e) {\n+                throw_count++;\n+            } catch (Throwable e) {\n+                Assert.fail(\"Unexpected exception thrown\");\n+            }\n+        }\n+        Assert.assertEquals( throw_count, pass_count\/2, String.format(\"%d exception were thrown, %d expected\", throw_count, pass_count\/2));\n+    }\n+\n+    static final String doPositiveConst(boolean flag) throws Throwable {\n+        \/\/ C2 knows that cap is between 1 and 100 and applies string opts without runtime check.\n+        final int capacity = flag ? 1 : 100;\n+        StringBuilder sb = new StringBuilder(capacity);\n+        return sb.toString();\n+    }\n+\n+    @Test\n+    public static final void testPositiveConst() {\n+        int throw_count = 0;\n+        for ( int pass = 0; pass < pass_count; pass++ ) {\n+            try {\n+                String s = doPositiveConst((pass % 2) == 0);\n+            } catch (NegativeArraySizeException e) {\n+                throw_count++;\n+            } catch (Throwable e) {\n+                Assert.fail(\"Unexpected exception thrown\");\n+            }\n+        }\n+        Assert.assertEquals( throw_count, 0, String.format(\"%d exception were thrown, 0 expected\", throw_count));\n+    }\n+\n+    static final String doArg(int capacity) throws Throwable {\n+        \/\/ C2 does not know if cap is positive or negative. It applies string opts but inserts a runtime check to\n+        \/\/ bail out to interpreter. This path is always taken because cap is always negative.\n+        StringBuilder sb = new StringBuilder(capacity);\n+        return sb.toString();\n+    }\n+\n+    @Test\n+    public static final void testArg() {\n+        int throw_count = 0;\n+        for ( int pass = 0; pass < pass_count; pass++ ) {\n+            try {\n+                String s = doArg((pass % 2) == 0 ? 3 : -3 );\n+            } catch (NegativeArraySizeException e) {\n+                throw_count++;\n+            } catch (Throwable e) {\n+                Assert.fail(\"Unexpected exception thrown\");\n+            }\n+        }\n+        Assert.assertEquals( throw_count, pass_count\/2, String.format(\"%d exception were thrown, %d expected\", throw_count, pass_count\/2));\n+    }\n+}\n","filename":"hotspot\/test\/compiler\/c2\/TestNegativeStringBuilderCapacity.java","additions":186,"deletions":0,"binary":false,"changes":186,"status":"added"},{"patch":"@@ -76,1 +76,1 @@\n-$cc_cmd -fPIC -shared -o libCNCheckLongArgs.so \\\n+$cc_cmd ${CFLAGBITS} -fPIC -shared -o libCNCheckLongArgs.so \\\n","filename":"hotspot\/test\/compiler\/criticalnatives\/argumentcorruption\/Test8167409.sh","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -68,1 +68,1 @@\n-$gcc_cmd -fPIC -shared -c -o test.o \\\n+$gcc_cmd ${CFLAGBITS} -fPIC -shared -c -o test.o \\\n","filename":"hotspot\/test\/runtime\/7107135\/Test7107135.sh","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -52,2 +52,0 @@\n-CFLAGS=\"-m${VM_BITS}\"\n-\n@@ -62,1 +60,0 @@\n-echo \"Compilation flag: ${COMP_FLAG}\"\n@@ -67,1 +64,1 @@\n-$gcc_cmd -DLINUX ${CFLAGS} -o invoke \\\n+$gcc_cmd -DLINUX ${CFLAGBITS} -o invoke \\\n","filename":"hotspot\/test\/runtime\/InitialThreadOverflow\/testme.sh","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, Red Hat, Inc. All rights reserved.\n+ * Copyright (c) 2019, 2020, Red Hat, Inc. All rights reserved.\n@@ -41,0 +41,4 @@\n+    if (!Platform.is64bit()) {\n+        System.out.println(\"Test requires 64-bit JVM. Skipping...\");\n+        return;\n+    }\n","filename":"hotspot\/test\/runtime\/NMT\/HugeArenaTracking.java","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @run main DefaultUseWithClient\n+ * @run main\/othervm -client DefaultUseWithClient\n@@ -41,3 +41,3 @@\n-        boolean is32BitWindows = (Platform.isWindows() && Platform.is32bit());\n-        if (!is32BitWindows) {\n-            System.out.println(\"Test only applicable on 32-bit Windows. Skipping\");\n+        boolean is32BitWindowsClient = (Platform.isWindows() && Platform.is32bit() && Platform.isClient());\n+        if (!is32BitWindowsClient) {\n+            System.out.println(\"Test only applicable on 32-bit Windows Client VM. Skipping\");\n","filename":"hotspot\/test\/runtime\/SharedArchiveFile\/DefaultUseWithClient.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -52,5 +52,0 @@\n-if [ \"x${VM_CPU}\" != \"xaarch64\" ];\n-then\n-    CFLAGS=\"-m${VM_BITS}\"\n-fi\n-\n@@ -65,1 +60,0 @@\n-echo \"Compilation flag: ${COMP_FLAG}\"\n@@ -70,1 +64,1 @@\n-$gcc_cmd -DLINUX ${CFLAGS} -o stack-gap \\\n+$gcc_cmd -DLINUX ${CFLAGBITS} -o stack-gap \\\n","filename":"hotspot\/test\/runtime\/StackGap\/testme.sh","additions":1,"deletions":7,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -71,1 +71,1 @@\n-$cc_cmd -fPIC -shared -o libCallWithJNIWeak.so \\\n+$cc_cmd ${CFLAGBITS} -fPIC -shared -o libCallWithJNIWeak.so \\\n","filename":"hotspot\/test\/runtime\/jni\/CallWithJNIWeak\/test.sh","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -71,1 +71,1 @@\n-$cc_cmd -fPIC -shared -o libReturnJNIWeak.so \\\n+$cc_cmd ${CFLAGBITS} -fPIC -shared -o libReturnJNIWeak.so \\\n","filename":"hotspot\/test\/runtime\/jni\/ReturnJNIWeak\/test.sh","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -73,1 +73,1 @@\n-$gcc_cmd -DLINUX -fPIC -shared \\\n+$gcc_cmd -DLINUX ${CFLAGBITS} -fPIC -shared \\\n","filename":"hotspot\/test\/runtime\/jsig\/Test8017498.sh","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -160,0 +160,1 @@\n+CFLAGBITS=\"\"\n@@ -167,0 +168,2 @@\n+  else\n+    CFLAGBITS=\"-m32\"\n@@ -173,0 +176,1 @@\n+  CFLAGBITS=\"-m32\"\n@@ -196,0 +200,2 @@\n+  else\n+    CFLAGBITS=\"-m32\"\n","filename":"hotspot\/test\/test_env.sh","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -47,1 +47,1 @@\n-                return \"aarch64\/ubuntu\";\n+                return \"arm64v8\/ubuntu\";\n","filename":"hotspot\/test\/testlibrary\/com\/oracle\/java\/testlibrary\/DockerfileConfig.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8028756\n+ * @bug 8038756\n","filename":"hotspot\/test\/testlibrary_tests\/whitebox\/vm_flags\/BooleanTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8028756\n+ * @bug 8038756\n","filename":"hotspot\/test\/testlibrary_tests\/whitebox\/vm_flags\/DoubleTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8028756\n+ * @bug 8038756\n","filename":"hotspot\/test\/testlibrary_tests\/whitebox\/vm_flags\/StringTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8028756\n+ * @bug 8038756\n","filename":"hotspot\/test\/testlibrary_tests\/whitebox\/vm_flags\/Uint64Test.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug 8028756\n+ * @bug 8038756\n","filename":"hotspot\/test\/testlibrary_tests\/whitebox\/vm_flags\/UintxTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -266,0 +266,5 @@\n+  $(eval $(call SetupCopyFiles,COPY_VCRUNTIME_1, \\\n+      DEST := $(JDK_OUTPUTDIR)\/bin, \\\n+      FILES := $(VCRUNTIME_1_DLL), \\\n+      MACRO := copy-and-chmod))\n+\n@@ -271,1 +276,1 @@\n-  COPY_FILES += $(COPY_MSVCR) $(COPY_MSVCP)\n+  COPY_FILES += $(COPY_MSVCR) $(COPY_VCRUNTIME_1) $(COPY_MSVCP)\n","filename":"jdk\/make\/CopyFiles.gmk","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -24,1 +24,1 @@\n-tzdata2022c\n+tzdata2022e\n","filename":"jdk\/make\/data\/tzdata\/VERSION","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2257,0 +2257,11 @@\n+# From Issam Al-Zuwairi (2022-10-05):\n+# The Council of Ministers in Jordan decided Wednesday 5th October 2022,\n+# that daylight saving time (DST) will be throughout the year....\n+#\n+# From Brian Inglis (2022-10-06):\n+# https:\/\/petra.gov.jo\/Include\/InnerPage.jsp?ID=45567&lang=en&name=en_news\n+#\n+# From Paul Eggert (2022-10-05):\n+# Like Syria, model this as a transition from EEST +03 (DST) to plain +03\n+# (non-DST) at the point where DST would otherwise have ended.\n+\n@@ -2288,2 +2299,2 @@\n-Rule\tJordan\t2014\tmax\t-\tOct\tlastFri\t0:00s\t0\t-\n-Rule\tJordan\t2022\tmax\t-\tFeb\tlastThu\t24:00\t1:00\tS\n+Rule\tJordan\t2014\t2022\t-\tOct\tlastFri\t0:00s\t0\t-\n+Rule\tJordan\t2022\tonly\t-\tFeb\tlastThu\t24:00\t1:00\tS\n@@ -2292,1 +2303,2 @@\n-\t\t\t2:00\tJordan\tEE%sT\n+\t\t\t2:00\tJordan\tEE%sT\t2022 Oct 28 0:00s\n+\t\t\t3:00\t-\t+03\n@@ -3401,4 +3413,0 @@\n-#\n-# From Paul Eggert (2019-04-10):\n-# For now, guess spring-ahead transitions are at 00:00 on the Saturday\n-# preceding March's last Sunday (i.e., Sat>=24).\n@@ -3421,0 +3429,12 @@\n+# From Heba Hamad (2022-08-30):\n+# winter time will begin in Palestine from Saturday 10-29, 02:00 AM by\n+# 60 minutes backwards.  Also the state of Palestine adopted the summer\n+# and winter time for the years: 2023,2024,2025,2026 ...\n+# https:\/\/mm.icann.org\/pipermail\/tz\/attachments\/20220830\/9f024566\/Time-0001.pdf\n+# (2022-08-31): ... the Saturday before the last Sunday in March and October\n+# at 2:00 AM ,for the years from 2023 to 2026.\n+# (2022-09-05): https:\/\/mtit.pna.ps\/Site\/New\/1453\n+#\n+# From Paul Eggert (2022-08-31):\n+# For now, assume that this rule will also be used after 2026.\n+\n@@ -3451,2 +3471,2 @@\n-Rule Palestine\t2016\t2018\t-\tMar\tSat>=24\t1:00\t1:00\tS\n-Rule Palestine\t2016\t2018\t-\tOct\tSat>=24\t1:00\t0\t-\n+Rule Palestine\t2016\t2018\t-\tMar\tSat<=30\t1:00\t1:00\tS\n+Rule Palestine\t2016\t2018\t-\tOct\tSat<=30\t1:00\t0\t-\n@@ -3454,2 +3474,2 @@\n-Rule Palestine\t2019\tonly\t-\tOct\tSat>=24\t0:00\t0\t-\n-Rule Palestine\t2020\t2021\t-\tMar\tSat>=24\t0:00\t1:00\tS\n+Rule Palestine\t2019\tonly\t-\tOct\tSat<=30\t0:00\t0\t-\n+Rule Palestine\t2020\t2021\t-\tMar\tSat<=30\t0:00\t1:00\tS\n@@ -3457,2 +3477,4 @@\n-Rule Palestine\t2021\tmax\t-\tOct\tFri>=23\t1:00\t0\t-\n-Rule Palestine\t2022\tmax\t-\tMar\tSun>=25\t0:00\t1:00\tS\n+Rule Palestine\t2021\tonly\t-\tOct\t29\t1:00\t0\t-\n+Rule Palestine\t2022\tonly\t-\tMar\t27\t0:00\t1:00\tS\n+Rule Palestine\t2022\tmax\t-\tOct\tSat<=30\t2:00\t0\t-\n+Rule Palestine\t2023\tmax\t-\tMar\tSat<=30\t2:00\t1:00\tS\n@@ -3831,2 +3853,9 @@\n-# From Arthur David Olson (2012-03-27):\n-# Assume last Friday in March going forward XXX.\n+# From Steffen Thorsen (2022-10-05):\n+# Syria is adopting year-round DST, starting this autumn....\n+# From https:\/\/www.enabbaladi.net\/archives\/607812\n+# \"This [the decision] came after the weekly government meeting today,\n+# Tuesday 4 October ...\"\n+#\n+# From Paul Eggert (2022-10-05):\n+# Like Jordan, model this as a transition from EEST +03 (DST) to plain +03\n+# (non-DST) at the point where DST would otherwise have ended.\n@@ -3838,2 +3867,2 @@\n-Rule\tSyria\t2012\tmax\t-\tMar\tlastFri\t0:00\t1:00\tS\n-Rule\tSyria\t2009\tmax\t-\tOct\tlastFri\t0:00\t0\t-\n+Rule\tSyria\t2012\t2022\t-\tMar\tlastFri\t0:00\t1:00\tS\n+Rule\tSyria\t2009\t2022\t-\tOct\tlastFri\t0:00\t0\t-\n@@ -3843,1 +3872,2 @@\n-\t\t\t2:00\tSyria\tEE%sT\n+\t\t\t2:00\tSyria\tEE%sT\t2022 Oct 28 0:00\n+\t\t\t3:00\t-\t+03\n","filename":"jdk\/make\/data\/tzdata\/asia","additions":48,"deletions":18,"binary":false,"changes":66,"status":"modified"},{"patch":"@@ -116,0 +116,2 @@\n+Link\tEurope\/Kyiv\t\tEurope\/Uzhgorod\n+Link\tEurope\/Kyiv\t\tEurope\/Zaporozhye\n","filename":"jdk\/make\/data\/tzdata\/backward","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2641,4 +2641,8 @@\n-# From Paul Eggert (2014-03-30):\n-# Simferopol and Sevastopol reportedly changed their central town clocks\n-# late the previous day, but this appears to have been ceremonial\n-# and the discrepancies are small enough to not worry about.\n+# From Tim Parenti (2022-07-01), per Paul Eggert (2014-03-30):\n+# The clocks at the railway station in Simferopol were put forward from 22:00\n+# to 24:00 the previous day in a \"symbolic ceremony\"; however, per\n+# contemporaneous news reports, \"ordinary Crimeans [made] the daylight savings\n+# time switch at 2am\" on Sunday.\n+# https:\/\/www.business-standard.com\/article\/pti-stories\/crimea-to-set-clocks-to-russia-time-114033000014_1.html\n+# https:\/\/www.reuters.com\/article\/us-ukraine-crisis-crimea-time\/crimea-switches-to-moscow-time-amid-incorporation-frenzy-idUKBREA2S0LT20140329\n+# https:\/\/www.bbc.com\/news\/av\/world-europe-26806583\n@@ -3416,1 +3420,1 @@\n-Zone\tAfrica\/Ceuta\t-0:21:16 -\tLMT\t1900 Dec 31 23:38:44\n+Zone\tAfrica\/Ceuta\t-0:21:16 -\tLMT\t1901 Jan  1  0:00u\n@@ -3777,2 +3781,2 @@\n-# From Paul Eggert (2022-02-08):\n-# For now, assume that Ukraine's other three zones followed the same rules,\n+# From Paul Eggert (2022-08-27):\n+# For now, assume that Ukraine's zones all followed the same rules,\n@@ -3848,13 +3852,0 @@\n-# From Paul Eggert (2022-04-12):\n-# As is usual in tzdb, Ukrainian zones use the most common English spellings.\n-# In particular, tzdb's name Europe\/Kyiv uses the most common spelling in\n-# English for Ukraine's capital.  Although tzdb's former name was Europe\/Kiev,\n-# \"Kyiv\" is now more common due to widespread reporting of the current conflict.\n-# Conversely, tzdb continues to use the names Europe\/Uzhgorod and\n-# Europe\/Zaporozhye; this is similar to tzdb's use of Europe\/Prague, which is\n-# certainly wrong as a transliteration of the Czech \"Praha\".\n-# English-language spelling of Ukrainian names is in flux, and\n-# some day \"Uzhhorod\" or \"Zaporizhzhia\" may become substantially more\n-# common in English; in the meantime, do not change these\n-# English spellings as that means less disruption for our users.\n-\n@@ -3862,1 +3853,0 @@\n-# This represents most of Ukraine.  See above for the spelling of \"Kyiv\".\n@@ -3871,28 +3861,0 @@\n-\t\t\t2:00\tEU\tEE%sT\n-# Transcarpathia used CET 1990\/1991.\n-# \"Uzhhorod\" is the transliteration of the Rusyn\/Ukrainian pronunciation, but\n-# \"Uzhgorod\" is more common in English.\n-Zone Europe\/Uzhgorod\t1:29:12 -\tLMT\t1890 Oct\n-\t\t\t1:00\t-\tCET\t1940\n-\t\t\t1:00\tC-Eur\tCE%sT\t1944 Oct\n-\t\t\t1:00\t1:00\tCEST\t1944 Oct 26\n-\t\t\t1:00\t-\tCET\t1945 Jun 29\n-\t\t\t3:00\tRussia\tMSK\/MSD\t1990\n-\t\t\t3:00\t-\tMSK\t1990 Jul  1  2:00\n-\t\t\t1:00\t-\tCET\t1991 Mar 31  3:00\n-\t\t\t2:00\t-\tEET\t1992 Mar 20\n-\t\t\t2:00\tC-Eur\tEE%sT\t1996 May 13\n-\t\t\t2:00\tEU\tEE%sT\n-# Zaporozh'ye and eastern Lugansk oblasts observed DST 1990\/1991.\n-# \"Zaporizhzhia\" is the transliteration of the Ukrainian name, but\n-# \"Zaporozh'ye\" is more common in English.  Use the common English\n-# spelling, except omit the apostrophe as it is not allowed in\n-# portable Posix file names.\n-Zone Europe\/Zaporozhye\t2:20:40 -\tLMT\t1880\n-\t\t\t2:20\t-\t+0220\t1924 May  2\n-\t\t\t2:00\t-\tEET\t1930 Jun 21\n-\t\t\t3:00\t-\tMSK\t1941 Aug 25\n-\t\t\t1:00\tC-Eur\tCE%sT\t1943 Oct 25\n-\t\t\t3:00\tRussia\tMSK\/MSD\t1991 Mar 31  2:00\n-\t\t\t2:00\tE-Eur\tEE%sT\t1992 Mar 20\n-\t\t\t2:00\tC-Eur\tEE%sT\t1996 May 13\n","filename":"jdk\/make\/data\/tzdata\/europe","additions":11,"deletions":49,"binary":false,"changes":60,"status":"modified"},{"patch":"@@ -465,1 +465,1 @@\n-Zone America\/Chicago\t-5:50:36 -\tLMT\t1883 Nov 18 12:09:24\n+Zone America\/Chicago\t-5:50:36 -\tLMT\t1883 Nov 18 18:00u\n@@ -474,1 +474,1 @@\n-Zone America\/North_Dakota\/Center -6:45:12 - LMT\t1883 Nov 18 12:14:48\n+Zone America\/North_Dakota\/Center -6:45:12 - LMT\t1883 Nov 18 19:00u\n@@ -484,1 +484,1 @@\n-Zone America\/North_Dakota\/New_Salem -6:45:39 - LMT\t1883 Nov 18 12:14:21\n+Zone America\/North_Dakota\/New_Salem -6:45:39 - LMT 1883 Nov 18 19:00u\n@@ -501,1 +501,1 @@\n-Zone America\/North_Dakota\/Beulah -6:47:07 - LMT\t1883 Nov 18 12:12:53\n+Zone America\/North_Dakota\/Beulah -6:47:07 - LMT\t1883 Nov 18 19:00u\n@@ -533,1 +533,1 @@\n-Zone America\/Denver\t-6:59:56 -\tLMT\t1883 Nov 18 12:00:04\n+Zone America\/Denver\t-6:59:56 -\tLMT\t1883 Nov 18 19:00u\n@@ -586,1 +586,1 @@\n-Zone America\/Los_Angeles -7:52:58 -\tLMT\t1883 Nov 18 12:07:02\n+Zone America\/Los_Angeles -7:52:58 -\tLMT\t1883 Nov 18 20:00u\n@@ -848,1 +848,1 @@\n-Zone America\/Phoenix\t-7:28:18 -\tLMT\t1883 Nov 18 11:31:42\n+Zone America\/Phoenix\t-7:28:18 -\tLMT\t1883 Nov 18 19:00u\n@@ -876,1 +876,1 @@\n-Zone America\/Boise\t-7:44:49 -\tLMT\t1883 Nov 18 12:15:11\n+Zone America\/Boise\t-7:44:49 -\tLMT\t1883 Nov 18 20:00u\n@@ -948,1 +948,1 @@\n-Zone America\/Indiana\/Indianapolis -5:44:38 - LMT\t1883 Nov 18 12:15:22\n+Zone America\/Indiana\/Indianapolis -5:44:38 - LMT 1883 Nov 18 18:00u\n@@ -968,1 +968,1 @@\n-Zone America\/Indiana\/Marengo -5:45:23 -\tLMT\t1883 Nov 18 12:14:37\n+Zone America\/Indiana\/Marengo -5:45:23 -\tLMT\t1883 Nov 18 18:00u\n@@ -992,1 +992,1 @@\n-Zone America\/Indiana\/Vincennes -5:50:07 - LMT\t1883 Nov 18 12:09:53\n+Zone America\/Indiana\/Vincennes -5:50:07 - LMT\t1883 Nov 18 18:00u\n@@ -1012,1 +1012,1 @@\n-Zone America\/Indiana\/Tell_City -5:47:03 - LMT\t1883 Nov 18 12:12:57\n+Zone America\/Indiana\/Tell_City -5:47:03 - LMT\t1883 Nov 18 18:00u\n@@ -1029,1 +1029,1 @@\n-Zone America\/Indiana\/Petersburg -5:49:07 - LMT\t1883 Nov 18 12:10:53\n+Zone America\/Indiana\/Petersburg -5:49:07 - LMT\t1883 Nov 18 18:00u\n@@ -1051,1 +1051,1 @@\n-Zone America\/Indiana\/Knox -5:46:30 -\tLMT\t1883 Nov 18 12:13:30\n+Zone America\/Indiana\/Knox -5:46:30 -\tLMT\t1883 Nov 18 18:00u\n@@ -1067,1 +1067,1 @@\n-Zone America\/Indiana\/Winamac -5:46:25 - LMT\t1883 Nov 18 12:13:35\n+Zone America\/Indiana\/Winamac -5:46:25 - LMT\t1883 Nov 18 18:00u\n@@ -1078,1 +1078,1 @@\n-Zone America\/Indiana\/Vevay -5:40:16 -\tLMT\t1883 Nov 18 12:19:44\n+Zone America\/Indiana\/Vevay -5:40:16 -\tLMT\t1883 Nov 18 18:00u\n@@ -1114,1 +1114,1 @@\n-Zone America\/Kentucky\/Louisville -5:43:02 -\tLMT\t1883 Nov 18 12:16:58\n+Zone America\/Kentucky\/Louisville -5:43:02 - LMT\t1883 Nov 18 18:00u\n@@ -1148,1 +1148,1 @@\n-Zone America\/Kentucky\/Monticello -5:39:24 - LMT\t1883 Nov 18 12:20:36\n+Zone America\/Kentucky\/Monticello -5:39:24 - LMT\t1883 Nov 18 18:00u\n@@ -2643,0 +2643,2 @@\n+Rule\tMexico\t1931\tonly\t-\tMay\t1\t23:00\t1:00\tD\n+Rule\tMexico\t1931\tonly\t-\tOct\t1\t0:00\t0\tS\n@@ -2659,1 +2661,1 @@\n-Zone America\/Cancun\t-5:47:04 -\tLMT\t1922 Jan  1  0:12:56\n+Zone America\/Cancun\t-5:47:04 -\tLMT\t1922 Jan  1  6:00u\n@@ -2665,1 +2667,1 @@\n-Zone America\/Merida\t-5:58:28 -\tLMT\t1922 Jan  1  0:01:32\n+Zone America\/Merida\t-5:58:28 -\tLMT\t1922 Jan  1  6:00u\n@@ -2679,1 +2681,1 @@\n-Zone America\/Matamoros\t-6:40:00 -\tLMT\t1921 Dec 31 23:20:00\n+Zone America\/Matamoros\t-6:30:00 -\tLMT\t1922 Jan  1  6:00u\n@@ -2685,1 +2687,1 @@\n-Zone America\/Monterrey\t-6:41:16 -\tLMT\t1921 Dec 31 23:18:44\n+Zone America\/Monterrey\t-6:41:16 -\tLMT\t1922 Jan  1  6:00u\n@@ -2690,1 +2692,1 @@\n-Zone America\/Mexico_City -6:36:36 -\tLMT\t1922 Jan  1  0:23:24\n+Zone America\/Mexico_City -6:36:36 -\tLMT\t1922 Jan  1  7:00u\n@@ -2693,3 +2695,1 @@\n-\t\t\t-7:00\t-\tMST\t1931 May  1 23:00\n-\t\t\t-6:00\t-\tCST\t1931 Oct\n-\t\t\t-7:00\t-\tMST\t1932 Apr  1\n+\t\t\t-7:00\tMexico\tM%sT\t1932 Apr  1\n@@ -2703,1 +2703,1 @@\n-Zone America\/Ojinaga\t-6:57:40 -\tLMT\t1922 Jan  1  0:02:20\n+Zone America\/Ojinaga\t-6:57:40 -\tLMT\t1922 Jan  1  7:00u\n@@ -2706,3 +2706,1 @@\n-\t\t\t-7:00\t-\tMST\t1931 May  1 23:00\n-\t\t\t-6:00\t-\tCST\t1931 Oct\n-\t\t\t-7:00\t-\tMST\t1932 Apr  1\n+\t\t\t-7:00\tMexico\tM%sT\t1932 Apr  1\n@@ -2715,1 +2713,1 @@\n-Zone America\/Chihuahua\t-7:04:20 -\tLMT\t1921 Dec 31 23:55:40\n+Zone America\/Chihuahua\t-7:04:20 -\tLMT\t1922 Jan  1  7:00u\n@@ -2718,3 +2716,1 @@\n-\t\t\t-7:00\t-\tMST\t1931 May  1 23:00\n-\t\t\t-6:00\t-\tCST\t1931 Oct\n-\t\t\t-7:00\t-\tMST\t1932 Apr  1\n+\t\t\t-7:00\tMexico\tM%sT\t1932 Apr  1\n@@ -2726,1 +2722,1 @@\n-Zone America\/Hermosillo\t-7:23:52 -\tLMT\t1921 Dec 31 23:36:08\n+Zone America\/Hermosillo\t-7:23:52 -\tLMT\t1922 Jan  1  7:00u\n@@ -2729,3 +2725,1 @@\n-\t\t\t-7:00\t-\tMST\t1931 May  1 23:00\n-\t\t\t-6:00\t-\tCST\t1931 Oct\n-\t\t\t-7:00\t-\tMST\t1932 Apr  1\n+\t\t\t-7:00\tMexico\tM%sT\t1932 Apr  1\n@@ -2766,1 +2760,1 @@\n-Zone America\/Mazatlan\t-7:05:40 -\tLMT\t1921 Dec 31 23:54:20\n+Zone America\/Mazatlan\t-7:05:40 -\tLMT\t1922 Jan  1  7:00u\n@@ -2769,3 +2763,1 @@\n-\t\t\t-7:00\t-\tMST\t1931 May  1 23:00\n-\t\t\t-6:00\t-\tCST\t1931 Oct\n-\t\t\t-7:00\t-\tMST\t1932 Apr  1\n+\t\t\t-7:00\tMexico\tM%sT\t1932 Apr  1\n@@ -2778,1 +2770,1 @@\n-Zone America\/Bahia_Banderas\t-7:01:00 -\tLMT\t1921 Dec 31 23:59:00\n+Zone America\/Bahia_Banderas -7:01:00 -\tLMT\t1922 Jan  1  7:00u\n@@ -2781,3 +2773,1 @@\n-\t\t\t-7:00\t-\tMST\t1931 May  1 23:00\n-\t\t\t-6:00\t-\tCST\t1931 Oct\n-\t\t\t-7:00\t-\tMST\t1932 Apr  1\n+\t\t\t-7:00\tMexico\tM%sT\t1932 Apr  1\n@@ -2791,1 +2781,1 @@\n-Zone America\/Tijuana\t-7:48:04 -\tLMT\t1922 Jan  1  0:11:56\n+Zone America\/Tijuana\t-7:48:04 -\tLMT\t1922 Jan  1  7:00u\n","filename":"jdk\/make\/data\/tzdata\/northamerica","additions":37,"deletions":47,"binary":false,"changes":84,"status":"modified"},{"patch":"@@ -1335,2 +1335,8 @@\n-# we will have a voting whether to approve a new Constitution....\n-# https:\/\/www.interior.gob.cl\/noticias\/2022\/08\/09\/comunicado-el-proximo-sabado-10-de-septiembre-los-relojes-se-deben-adelantar-una-hora\/\n+# we will have a voting whether to approve a new Constitution.\n+#\n+# From Eduardo Romero Urra (2022-08-17):\n+# https:\/\/www.diariooficial.interior.gob.cl\/publicaciones\/2022\/08\/13\/43327\/01\/2172567.pdf\n+#\n+# From Paul Eggert (2022-08-17):\n+# Although the presidential decree stops at fall 2026, assume that\n+# similar DST rules will continue thereafter.\n","filename":"jdk\/make\/data\/tzdata\/southamerica","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -427,2 +427,0 @@\n-UA\t+4837+02218\tEurope\/Uzhgorod\tTranscarpathia\n-UA\t+4750+03510\tEurope\/Zaporozhye\tZaporozhye and east Lugansk\n","filename":"jdk\/make\/data\/tzdata\/zone.tab","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2011, 2019, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2011, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -269,0 +269,3 @@\n+  ifeq ($(OPENJDK_TARGET_OS), macosx)\n+    ZLIB_CPPFLAGS += -DHAVE_UNISTD_H\n+  endif\n@@ -388,0 +391,3 @@\n+  ifneq ($(VCRUNTIME_1_DLL), )\n+    LIBJLI_CFLAGS += -DVCRUNTIME_1_DLL_NAME='\"$(notdir $(VCRUNTIME_1_DLL))\"'\n+  endif\n","filename":"jdk\/make\/lib\/CoreLibraries.gmk","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -50,0 +50,1 @@\n+    private static final long NO_SWAP = 0;\n@@ -55,1 +56,1 @@\n-    private long getLongVal(String file) {\n+    private long getLongVal(String file, long defaultValue) {\n@@ -59,1 +60,5 @@\n-                                                      CgroupSubsystem.LONG_RETVAL_UNLIMITED);\n+                                                      defaultValue);\n+    }\n+\n+    private long getLongVal(String file) {\n+        return getLongVal(file, CgroupSubsystem.LONG_RETVAL_UNLIMITED);\n@@ -262,0 +267,7 @@\n+    \/**\n+     * Note that for cgroups v2 the actual limits set for swap and\n+     * memory live in two different files, memory.swap.max and memory.max\n+     * respectively. In order to properly report a cgroup v1 like\n+     * compound value we need to sum the two values. Setting a swap limit\n+     * without also setting a memory limit is not allowed.\n+     *\/\n@@ -265,1 +277,12 @@\n-        return limitFromString(strVal);\n+        \/\/ We only get a null string when file memory.swap.max doesn't exist.\n+        \/\/ In that case we return the memory limit without any swap.\n+        if (strVal == null) {\n+            return getMemoryLimit();\n+        }\n+        long swapLimit = limitFromString(strVal);\n+        if (swapLimit >= 0) {\n+            long memoryLimit = getMemoryLimit();\n+            assert memoryLimit >= 0;\n+            return memoryLimit + swapLimit;\n+        }\n+        return swapLimit;\n@@ -268,0 +291,7 @@\n+    \/**\n+     * Note that for cgroups v2 the actual values set for swap usage and\n+     * memory usage live in two different files, memory.current and memory.swap.current\n+     * respectively. In order to properly report a cgroup v1 like\n+     * compound value we need to sum the two values. Setting a swap limit\n+     * without also setting a memory limit is not allowed.\n+     *\/\n@@ -270,1 +300,8 @@\n-        return getLongVal(\"memory.swap.current\");\n+        long memoryUsage = getMemoryUsage();\n+        if (memoryUsage >= 0) {\n+            \/\/ If file memory.swap.current doesn't exist, only return the regular\n+            \/\/ memory usage (without swap). Thus, use default value of NO_SWAP.\n+            long swapUsage = getLongVal(\"memory.swap.current\", NO_SWAP);\n+            return memoryUsage + swapUsage;\n+        }\n+        return memoryUsage; \/\/ case of no memory limits\n","filename":"jdk\/src\/linux\/classes\/jdk\/internal\/platform\/cgroupv2\/CgroupV2Subsystem.java","additions":41,"deletions":4,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2011, 2016, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2011, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -291,1 +291,3 @@\n-                return aet.getTextRange(location, location + length);\n+                int currentLength = aet.getCharCount();\n+                return aet.getTextRange(Math.min(currentLength, location),\n+                        Math.min(currentLength, location + length));\n","filename":"jdk\/src\/macosx\/classes\/sun\/lwawt\/macosx\/CAccessibleText.java","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -503,10 +503,6 @@\n-                xi.setSecureValidation(secVal);\n-                if (context instanceof XMLSignContext && c14n11\n-                    && !xi.isOctetStream() && !xi.isOutputStreamSet()) {\n-                    TransformService spi = null;\n-                    if (provider == null) {\n-                        spi = TransformService.getInstance(c14nalg, \"DOM\");\n-                    } else {\n-                        try {\n-                            spi = TransformService.getInstance(c14nalg, \"DOM\", provider);\n-                        } catch (NoSuchAlgorithmException nsae) {\n+                try {\n+                    xi.setSecureValidation(secVal);\n+                    if (context instanceof XMLSignContext && c14n11\n+                            && !xi.isOctetStream() && !xi.isOutputStreamSet()) {\n+                        TransformService spi = null;\n+                        if (provider == null) {\n@@ -514,0 +510,6 @@\n+                        } else {\n+                            try {\n+                                spi = TransformService.getInstance(c14nalg, \"DOM\", provider);\n+                            } catch (NoSuchAlgorithmException nsae) {\n+                                spi = TransformService.getInstance(c14nalg, \"DOM\");\n+                            }\n@@ -515,1 +517,0 @@\n-                    }\n@@ -517,9 +518,16 @@\n-                    DOMTransform t = new DOMTransform(spi);\n-                    Element transformsElem = null;\n-                    String dsPrefix = DOMUtils.getSignaturePrefix(context);\n-                    if (allTransforms.isEmpty()) {\n-                        transformsElem = DOMUtils.createElement(\n-                            refElem.getOwnerDocument(),\n-                            \"Transforms\", XMLSignature.XMLNS, dsPrefix);\n-                        refElem.insertBefore(transformsElem,\n-                            DOMUtils.getFirstChildElement(refElem));\n+                        DOMTransform t = new DOMTransform(spi);\n+                        Element transformsElem = null;\n+                        String dsPrefix = DOMUtils.getSignaturePrefix(context);\n+                        if (allTransforms.isEmpty()) {\n+                            transformsElem = DOMUtils.createElement(\n+                                    refElem.getOwnerDocument(),\n+                                    \"Transforms\", XMLSignature.XMLNS, dsPrefix);\n+                            refElem.insertBefore(transformsElem,\n+                                    DOMUtils.getFirstChildElement(refElem));\n+                        } else {\n+                            transformsElem = DOMUtils.getFirstChildElement(refElem);\n+                        }\n+                        t.marshal(transformsElem, dsPrefix,\n+                                (DOMCryptoContext) context);\n+                        allTransforms.add(t);\n+                        xi.updateOutputStream(os, true);\n@@ -527,1 +535,5 @@\n-                        transformsElem = DOMUtils.getFirstChildElement(refElem);\n+                        xi.updateOutputStream(os);\n+                    }\n+                } finally {\n+                    if(xi.getOctetStreamReal() != null) {\n+                        xi.getOctetStreamReal().close();\n@@ -529,6 +541,0 @@\n-                    t.marshal(transformsElem, dsPrefix,\n-                              (DOMCryptoContext)context);\n-                    allTransforms.add(t);\n-                    xi.updateOutputStream(os, true);\n-                } else {\n-                    xi.updateOutputStream(os);\n","filename":"jdk\/src\/share\/classes\/org\/jcp\/xml\/dsig\/internal\/dom\/DOMReference.java","additions":33,"deletions":27,"binary":false,"changes":60,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2009, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2009, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -134,1 +134,1 @@\n-     *             JAR timestamp if jar files are being validated and the\n+     *             timestamp if JAR files are being validated and the\n@@ -163,1 +163,1 @@\n-     * {@code PKIXParameter} date, and {@code varient}\n+     * {@code PKIXParameter} date, and {@code variant}.\n@@ -167,2 +167,4 @@\n-     * @param pkixdate Date the constraints are checked against. The value is\n-     *             either the PKIXParameters date or null for the current date.\n+     * @param date the date specified by the PKIXParameters date, or the\n+     *             timestamp if JAR files are being validated and the\n+     *             JAR is timestamped. May be null if no timestamp or\n+     *             PKIXParameter date is set.\n@@ -172,2 +174,2 @@\n-    public AlgorithmChecker(TrustAnchor anchor, Date pkixdate, String variant) {\n-        this(anchor, certPathDefaultConstraints, pkixdate, variant);\n+    public AlgorithmChecker(TrustAnchor anchor, Date date, String variant) {\n+        this(anchor, certPathDefaultConstraints, date, variant);\n","filename":"jdk\/src\/share\/classes\/sun\/security\/provider\/certpath\/AlgorithmChecker.java","additions":9,"deletions":7,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -43,1 +43,1 @@\n-class CertPathConstraintsParameters implements ConstraintsParameters {\n+public class CertPathConstraintsParameters implements ConstraintsParameters {\n@@ -108,1 +108,1 @@\n-        sb.append(\"\\n  Variant: \").append(variant);\n+        sb.append(\"  Variant: \").append(variant);\n","filename":"jdk\/src\/share\/classes\/sun\/security\/provider\/certpath\/CertPathConstraintsParameters.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -91,0 +91,1 @@\n+        private Date timestampDate;\n@@ -157,0 +158,5 @@\n+        \/\/ The date() param is used when enforcing the validity period\n+        \/\/ of certificates and when checking the time period of revocation data.\n+        \/\/ The main difference between the date() and timestamp() method is\n+        \/\/ that the date() method only uses the timestamp (if specified)\n+        \/\/ for certificates in a code signer's chain.\n@@ -159,2 +165,7 @@\n-                \/\/ use timestamp if checking signed code that is\n-                \/\/ timestamped, otherwise use date parameter\n+                \/\/ Use timestamp if checking signed code that is\n+                \/\/ timestamped, otherwise use date parameter.\n+                \/\/ Note that TSA server certificates do not use the\n+                \/\/ timestamp, which means that an expired TSA certificate\n+                \/\/ is considered a validation failure. This policy means\n+                \/\/ that signed and timestamped code is valid until the TSA\n+                \/\/ certificate expires (assuming all other checks are valid).\n@@ -213,0 +224,11 @@\n+        \/\/ The timestamp() param is passed as the date param when creating an\n+        \/\/ AlgorithmChecker. An AlgorithmChecker always uses the timestamp\n+        \/\/ if specified in order to enforce the denyAfter constraint.\n+        Date timestamp() {\n+            \/\/ return timestamp date if set, otherwise use date parameter\n+            if (timestampDate == null) {\n+                timestampDate = (timestamp != null)\n+                    ? timestamp.getTimestamp() : date();\n+            }\n+            return timestampDate;\n+        }\n","filename":"jdk\/src\/share\/classes\/sun\/security\/provider\/certpath\/PKIX.java","additions":24,"deletions":2,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -175,2 +175,2 @@\n-        certPathCheckers.add(new AlgorithmChecker(anchor, null, params.date(),\n-                params.variant()));\n+        certPathCheckers.add(new AlgorithmChecker(anchor, null,\n+                params.timestamp(), params.variant()));\n","filename":"jdk\/src\/share\/classes\/sun\/security\/provider\/certpath\/PKIXCertPathValidator.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2000, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2000, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -347,1 +347,1 @@\n-                        buildParams.date(), buildParams.variant()));\n+                        buildParams.timestamp(), buildParams.variant()));\n","filename":"jdk\/src\/share\/classes\/sun\/security\/provider\/certpath\/SunCertPathBuilder.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -332,3 +332,0 @@\n-            \/\/ the max protocol version this client is supporting.\n-            ProtocolVersion maxProtocolVersion = chc.maximumActiveProtocol;\n-\n@@ -468,8 +465,0 @@\n-                if (!maxProtocolVersion.equals(sessionVersion)) {\n-                    maxProtocolVersion = sessionVersion;\n-\n-                    \/\/ Update protocol version number in underlying socket and\n-                    \/\/ handshake output stream, so that the output records\n-                    \/\/ (at the record layer) have the correct version\n-                    chc.setVersion(sessionVersion);\n-                }\n@@ -510,1 +499,1 @@\n-                if (maxProtocolVersion.useTLS13PlusSpec() &&\n+                if (chc.maximumActiveProtocol.useTLS13PlusSpec() &&\n@@ -553,1 +542,1 @@\n-            ProtocolVersion clientHelloVersion = maxProtocolVersion;\n+            ProtocolVersion clientHelloVersion = chc.maximumActiveProtocol;\n","filename":"jdk\/src\/share\/classes\/sun\/security\/ssl\/ClientHello.java","additions":2,"deletions":13,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -501,9 +501,0 @@\n-    \/**\n-     * Set the active protocol version and propagate it to the SSLSocket\n-     * and our handshake streams. Called from ClientHandshaker\n-     * and ServerHandshaker with the negotiated protocol version.\n-     *\/\n-    void setVersion(ProtocolVersion protocolVersion) {\n-        this.conContext.protocolVersion = protocolVersion;\n-    }\n-\n","filename":"jdk\/src\/share\/classes\/sun\/security\/ssl\/HandshakeContext.java","additions":0,"deletions":9,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -59,0 +59,1 @@\n+import sun.security.provider.certpath.CertPathConstraintsParameters;\n@@ -884,1 +885,2 @@\n-                            X509Certificate signer = si.getCertificate(p7);\n+                            ArrayList<X509Certificate> chain = si.getCertificateChain(p7);\n+                            X509Certificate signer = chain.get(0);\n@@ -906,0 +908,2 @@\n+                                JarConstraintsParameters jcp =\n+                                    new JarConstraintsParameters(chain, si.getTimestamp());\n@@ -909,3 +913,3 @@\n-                                        verifyWithWeak(digestAlg, DIGEST_PRIMITIVE_SET, false),\n-                                        verifyWithWeak(sigAlg, SIG_PRIMITIVE_SET, false),\n-                                        verifyWithWeak(key),\n+                                        verifyWithWeak(digestAlg, DIGEST_PRIMITIVE_SET, false, jcp),\n+                                        verifyWithWeak(sigAlg, SIG_PRIMITIVE_SET, false, jcp),\n+                                        verifyWithWeak(key, jcp),\n@@ -914,3 +918,3 @@\n-                                        verifyWithWeak(tsDigestAlg, DIGEST_PRIMITIVE_SET, true),\n-                                        verifyWithWeak(tsSigAlg, SIG_PRIMITIVE_SET, true),\n-                                        verifyWithWeak(tsKey));\n+                                        verifyWithWeak(tsDigestAlg, DIGEST_PRIMITIVE_SET, true, jcp),\n+                                        verifyWithWeak(tsSigAlg, SIG_PRIMITIVE_SET, true, jcp),\n+                                        verifyWithWeak(tsKey, jcp));\n@@ -918,0 +922,2 @@\n+                                JarConstraintsParameters jcp =\n+                                    new JarConstraintsParameters(chain, null);\n@@ -921,3 +927,3 @@\n-                                        verifyWithWeak(digestAlg, DIGEST_PRIMITIVE_SET, false),\n-                                        verifyWithWeak(sigAlg, SIG_PRIMITIVE_SET, false),\n-                                        verifyWithWeak(key));\n+                                        verifyWithWeak(digestAlg, DIGEST_PRIMITIVE_SET, false, jcp),\n+                                        verifyWithWeak(sigAlg, SIG_PRIMITIVE_SET, false, jcp),\n+                                        verifyWithWeak(key, jcp));\n@@ -926,0 +932,1 @@\n+                            e.printStackTrace();\n@@ -1259,4 +1266,16 @@\n-    private String verifyWithWeak(String alg, Set<CryptoPrimitive> primitiveSet, boolean tsa) {\n-        if (DISABLED_CHECK.permits(primitiveSet, alg, null)) {\n-            if (LEGACY_CHECK.permits(primitiveSet, alg, null)) {\n-                return alg;\n+    private String verifyWithWeak(String alg, Set<CryptoPrimitive> primitiveSet,\n+        boolean tsa, JarConstraintsParameters jcp) {\n+\n+        try {\n+            DISABLED_CHECK.permits(alg, jcp);\n+        } catch (CertPathValidatorException e) {\n+            disabledAlgFound = true;\n+            return String.format(rb.getString(\"with.disabled\"), alg);\n+        }\n+        try {\n+            LEGACY_CHECK.permits(alg, jcp);\n+            return alg;\n+        } catch (CertPathValidatorException e) {\n+            if (primitiveSet == SIG_PRIMITIVE_SET) {\n+                legacyAlg |= 2;\n+                legacySigAlg = alg;\n@@ -1264,3 +1283,3 @@\n-                if (primitiveSet == SIG_PRIMITIVE_SET) {\n-                   legacyAlg |= 2;\n-                   legacySigAlg = alg;\n+                if (tsa) {\n+                    legacyAlg |= 4;\n+                    legacyTsaDigestAlg = alg;\n@@ -1268,7 +1287,2 @@\n-                    if (tsa) {\n-                        legacyAlg |= 4;\n-                        legacyTsaDigestAlg = alg;\n-                    } else {\n-                        legacyAlg |= 1;\n-                        legacyDigestAlg = alg;\n-                    }\n+                    legacyAlg |= 1;\n+                    legacyDigestAlg = alg;\n@@ -1276,1 +1290,0 @@\n-                return String.format(rb.getString(\"with.weak\"), alg);\n@@ -1278,3 +1291,1 @@\n-        } else {\n-            disabledAlgFound = true;\n-            return String.format(rb.getString(\"with.disabled\"), alg);\n+            return String.format(rb.getString(\"with.weak\"), alg);\n@@ -1284,1 +1295,1 @@\n-    private String verifyWithWeak(PublicKey key) {\n+    private String verifyWithWeak(PublicKey key, JarConstraintsParameters jcp) {\n@@ -1286,7 +1297,10 @@\n-        if (DISABLED_CHECK.permits(SIG_PRIMITIVE_SET, key)) {\n-            if (LEGACY_CHECK.permits(SIG_PRIMITIVE_SET, key)) {\n-                if (kLen >= 0) {\n-                    return String.format(rb.getString(\"key.bit\"), kLen);\n-                } else {\n-                    return rb.getString(\"unknown.size\");\n-                }\n+        try {\n+            DISABLED_CHECK.permits(key.getAlgorithm(), jcp);\n+        } catch (CertPathValidatorException e) {\n+            disabledAlgFound = true;\n+            return String.format(rb.getString(\"key.bit.disabled\"), kLen);\n+        }\n+        try {\n+            LEGACY_CHECK.permits(key.getAlgorithm(), jcp);\n+            if (kLen >= 0) {\n+                return String.format(rb.getString(\"key.bit\"), kLen);\n@@ -1294,3 +1308,1 @@\n-                weakPublicKey = key;\n-                legacyAlg |= 8;\n-                return String.format(rb.getString(\"key.bit.weak\"), kLen);\n+                return rb.getString(\"unknown.size\");\n@@ -1298,3 +1310,4 @@\n-        } else {\n-           disabledAlgFound = true;\n-           return String.format(rb.getString(\"key.bit.disabled\"), kLen);\n+        } catch (CertPathValidatorException e) {\n+            weakPublicKey = key;\n+            legacyAlg |= 8;\n+            return String.format(rb.getString(\"key.bit.weak\"), kLen);\n@@ -1304,3 +1317,8 @@\n-    private void checkWeakSign(String alg, Set<CryptoPrimitive> primitiveSet, boolean tsa) {\n-        if (DISABLED_CHECK.permits(primitiveSet, alg, null)) {\n-            if (!LEGACY_CHECK.permits(primitiveSet, alg, null)) {\n+    private void checkWeakSign(String alg, Set<CryptoPrimitive> primitiveSet,\n+        boolean tsa, JarConstraintsParameters jcp) {\n+\n+        try {\n+            DISABLED_CHECK.permits(alg, jcp);\n+            try {\n+                LEGACY_CHECK.permits(alg, jcp);\n+            } catch (CertPathValidatorException e) {\n@@ -1308,1 +1326,1 @@\n-                   legacyAlg |= 2;\n+                    legacyAlg |= 2;\n@@ -1317,1 +1335,1 @@\n-        } else {\n+        } catch (CertPathValidatorException e) {\n@@ -1330,3 +1348,6 @@\n-    private void checkWeakSign(PrivateKey key) {\n-        if (DISABLED_CHECK.permits(SIG_PRIMITIVE_SET, key)) {\n-            if (!LEGACY_CHECK.permits(SIG_PRIMITIVE_SET, key)) {\n+    private void checkWeakSign(PrivateKey key, JarConstraintsParameters jcp) {\n+        try {\n+            DISABLED_CHECK.permits(key.getAlgorithm(), jcp);\n+            try {\n+                LEGACY_CHECK.permits(key.getAlgorithm(), jcp);\n+            } catch (CertPathValidatorException e) {\n@@ -1335,1 +1356,1 @@\n-        } else {\n+        } catch (CertPathValidatorException e) {\n@@ -1362,1 +1383,1 @@\n-        Date timestamp, boolean checkUsage) throws Exception {\n+        Date timestamp, boolean checkUsage, CertPathConstraintsParameters cpcp) throws Exception {\n@@ -1561,2 +1582,5 @@\n-        checkWeakSign(digestalg, DIGEST_PRIMITIVE_SET, false);\n-        checkWeakSign(tSADigestAlg, DIGEST_PRIMITIVE_SET, true);\n+        JarConstraintsParameters jcp =\n+            new JarConstraintsParameters(Arrays.asList(certChain), null);\n+        checkWeakSign(digestalg, DIGEST_PRIMITIVE_SET, false, jcp);\n+\n+        checkWeakSign(tSADigestAlg, DIGEST_PRIMITIVE_SET, true, jcp);\n@@ -1570,1 +1594,1 @@\n-        checkWeakSign(sigalg, SIG_PRIMITIVE_SET, false);\n+        checkWeakSign(sigalg, SIG_PRIMITIVE_SET, false, jcp);\n@@ -1572,1 +1596,1 @@\n-        checkWeakSign(privateKey);\n+        checkWeakSign(privateKey, jcp);\n@@ -1848,0 +1872,2 @@\n+                    CertPathConstraintsParameters cpcp =\n+                        new CertPathConstraintsParameters(tsaCert, Validator.VAR_TSA_SERVER, null, null);\n@@ -1849,1 +1875,1 @@\n-                            printCert(true, \"\", tsaCert, null, false));\n+                            printCert(true, \"\", tsaCert, null, false, cpcp));\n@@ -2074,0 +2100,3 @@\n+        @SuppressWarnings(\"unchecked\")\n+        List<X509Certificate> chain = (List<X509Certificate>)certs;\n+        TrustAnchor anchor = findTrustAnchor(chain);\n@@ -2075,1 +2104,3 @@\n-            sb.append(printCert(false, tab2, c, timestamp, first));\n+            CertPathConstraintsParameters cpcp =\n+                new CertPathConstraintsParameters((X509Certificate)c, Validator.VAR_CODE_SIGNING, anchor, timestamp);\n+            sb.append(printCert(false, tab2, c, timestamp, first, cpcp));\n@@ -2088,0 +2119,4 @@\n+            List<? extends Certificate> tscerts = ts.getSignerCertPath().getCertificates();\n+            @SuppressWarnings(\"unchecked\")\n+            List<X509Certificate> tschain = (List<X509Certificate>)tscerts;\n+            anchor = findTrustAnchor(chain);\n@@ -2089,2 +2124,4 @@\n-            for (Certificate c : ts.getSignerCertPath().getCertificates()) {\n-                sb.append(printCert(true, tab2, c, null, false));\n+            for (Certificate c : tschain) {\n+                CertPathConstraintsParameters cpcp =\n+                    new CertPathConstraintsParameters((X509Certificate)c, Validator.VAR_TSA_SERVER, anchor, timestamp);\n+                sb.append(printCert(true, tab2, c, null, false, cpcp));\n@@ -2150,0 +2187,9 @@\n+    private TrustAnchor findTrustAnchor(List<X509Certificate> chain) {\n+        X509Certificate last = chain.get(chain.size() - 1);\n+        Optional<X509Certificate> trusted =\n+            trustedCerts.stream()\n+                        .filter(c -> c.getSubjectX500Principal().equals(last.getIssuerX500Principal()))\n+                        .findFirst();\n+        return trusted.isPresent() ? new TrustAnchor(trusted.get(), null) : null;\n+    }\n+\n","filename":"jdk\/src\/share\/classes\/sun\/security\/tools\/jarsigner\/Main.java","additions":106,"deletions":60,"binary":false,"changes":166,"status":"modified"},{"patch":"@@ -42,1 +42,0 @@\n-import java.text.SimpleDateFormat;\n@@ -684,2 +683,0 @@\n-        private static final SimpleDateFormat dateFormat =\n-                new SimpleDateFormat(\"EEE, MMM d HH:mm:ss z yyyy\");\n@@ -719,1 +716,1 @@\n-                        dateFormat.format(denyAfterDate));\n+                        denyAfterDate);\n@@ -750,2 +747,2 @@\n-                        dateFormat.format(denyAfterDate) + \"; params date: \" +\n-                        dateFormat.format(currentDate) + cp.extendedExceptionMsg(),\n+                        denyAfterDate + \"; params date: \" +\n+                        currentDate + cp.extendedExceptionMsg(),\n","filename":"jdk\/src\/share\/classes\/sun\/security\/util\/DisabledAlgorithmConstraints.java","additions":3,"deletions":6,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -53,1 +53,1 @@\n-    \/\/ The keys of the signers\n+    \/\/ The keys of the signers and TSA\n@@ -55,1 +55,1 @@\n-    \/\/ The certs in the signers' chains that are issued by the trust anchor\n+    \/\/ The certs in the signers and TSA chain that are issued by the trust anchor\n@@ -76,1 +76,1 @@\n-            init(signer.getSignerCertPath());\n+            addToCertsAndKeys(signer.getSignerCertPath());\n@@ -85,1 +85,1 @@\n-                init(timestamp.getSignerCertPath());\n+                addToCertsAndKeys(timestamp.getSignerCertPath());\n@@ -101,2 +101,14 @@\n-    \/\/ extract last certificate and key from chain\n-    private void init(CertPath cp) {\n+    public JarConstraintsParameters(List<X509Certificate> chain, Timestamp timestamp) {\n+        this.keys = new HashSet<>();\n+        this.certsIssuedByAnchor = new HashSet<>();\n+        addToCertsAndKeys(chain);\n+        if (timestamp != null) {\n+            addToCertsAndKeys(timestamp.getSignerCertPath());\n+            this.timestamp = timestamp.getTimestamp();\n+        } else {\n+            this.timestamp = null;\n+        }\n+    }\n+\n+    \/\/ extract last certificate and signer's public key from chain\n+    private void addToCertsAndKeys(CertPath cp) {\n@@ -106,0 +118,4 @@\n+        addToCertsAndKeys(chain);\n+    }\n+\n+    private void addToCertsAndKeys(List<X509Certificate> chain) {\n@@ -171,1 +187,1 @@\n-        sb.append(\"\\n  Variant: \").append(getVariant());\n+        sb.append(\"  Variant: \").append(getVariant());\n","filename":"jdk\/src\/share\/classes\/sun\/security\/util\/JarConstraintsParameters.java","additions":24,"deletions":8,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -576,6 +576,2 @@\n-                    \/\/ \"last\", it works for now. From tzdata2020d this hacking\n-                    \/\/ will not work for Asia\/Gaza and Asia\/Hebron which follow\n-                    \/\/ Palestine DST rules.\n-                    if (dom < 0 || dom >= 24 &&\n-                                   !(zoneId.equals(\"Asia\/Gaza\") ||\n-                                     zoneId.equals(\"Asia\/Hebron\"))) {\n+                    \/\/ \"last\", it works for now.\n+                    if (dom < 0 || dom >= 24) {\n@@ -603,1 +599,0 @@\n-                    \/\/ No need of hacking for Asia\/Gaza and Asia\/Hebron from tz2021e\n","filename":"jdk\/src\/share\/classes\/sun\/util\/calendar\/ZoneInfoFile.java","additions":2,"deletions":7,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -530,1 +530,1 @@\n-# There is one defined security property:  jdk.disabled.NamedCurves\n+# There is one defined security property:  jdk.disabled.namedCurves\n@@ -607,0 +607,1 @@\n+    SHA1 usage SignedJAR & denyAfter 2019-01-01, \\\n@@ -671,1 +672,2 @@\n-      DSA keySize < 1024, include jdk.disabled.namedCurves\n+      DSA keySize < 1024, SHA1 denyAfter 2019-01-01, \\\n+      include jdk.disabled.namedCurves\n","filename":"jdk\/src\/share\/lib\/security\/java.security-aix","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -530,1 +530,1 @@\n-# There is one defined security property:  jdk.disabled.NamedCurves\n+# There is one defined security property:  jdk.disabled.namedCurves\n@@ -607,0 +607,1 @@\n+    SHA1 usage SignedJAR & denyAfter 2019-01-01, \\\n@@ -671,1 +672,2 @@\n-      DSA keySize < 1024, include jdk.disabled.namedCurves\n+      DSA keySize < 1024, SHA1 denyAfter 2019-01-01, \\\n+      include jdk.disabled.namedCurves\n","filename":"jdk\/src\/share\/lib\/security\/java.security-linux","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -533,1 +533,1 @@\n-# There is one defined security property:  jdk.disabled.NamedCurves\n+# There is one defined security property:  jdk.disabled.namedCurves\n@@ -610,0 +610,1 @@\n+    SHA1 usage SignedJAR & denyAfter 2019-01-01, \\\n@@ -674,1 +675,2 @@\n-      DSA keySize < 1024, include jdk.disabled.namedCurves\n+      DSA keySize < 1024, SHA1 denyAfter 2019-01-01, \\\n+      include jdk.disabled.namedCurves\n","filename":"jdk\/src\/share\/lib\/security\/java.security-macosx","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -531,1 +531,1 @@\n-# There is one defined security property:  jdk.disabled.NamedCurves\n+# There is one defined security property:  jdk.disabled.namedCurves\n@@ -608,0 +608,1 @@\n+    SHA1 usage SignedJAR & denyAfter 2019-01-01, \\\n@@ -672,1 +673,2 @@\n-      DSA keySize < 1024, include jdk.disabled.namedCurves\n+      DSA keySize < 1024, SHA1 denyAfter 2019-01-01, \\\n+      include jdk.disabled.namedCurves\n","filename":"jdk\/src\/share\/lib\/security\/java.security-solaris","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -533,1 +533,1 @@\n-# There is one defined security property:  jdk.disabled.NamedCurves\n+# There is one defined security property:  jdk.disabled.namedCurves\n@@ -610,0 +610,1 @@\n+    SHA1 usage SignedJAR & denyAfter 2019-01-01, \\\n@@ -674,1 +675,2 @@\n-      DSA keySize < 1024, include jdk.disabled.namedCurves\n+      DSA keySize < 1024, SHA1 denyAfter 2019-01-01, \\\n+      include jdk.disabled.namedCurves\n","filename":"jdk\/src\/share\/lib\/security\/java.security-windows","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -49,3 +49,0 @@\n-#define IS_MUL_OVERFLOW(m, n) \\\n-        ((m) != 0 && (n) != 0 && (((size_t)((m)*(n))) != (((size_t)(m)) * ((size_t)(n)))))\n-\n@@ -54,2 +51,1 @@\n-     ((m) == 0 || (n) == 0 || (size_t)(n) <= (SIZE_MAX \/ (size_t)(m))) && \\\n-     !IS_MUL_OVERFLOW(m, n))\n+     ((m) == 0 || (n) == 0 || (size_t)(n) <= (SIZE_MAX \/ (size_t)(m))))\n@@ -78,1 +74,1 @@\n-    (IS_SAFE_SIZE_MUL((m), (n)) ? ((func)((m) * (n))) : FAILURE_RESULT)\n+    (IS_SAFE_SIZE_MUL((m), (n)) ? ((func)((size_t)(m) * (size_t)(n))) : FAILURE_RESULT)\n@@ -81,1 +77,1 @@\n-    (IS_SAFE_SIZE_MUL((m), (n)) ? ((func)((p), (m) * (n))) : FAILURE_RESULT)\n+    (IS_SAFE_SIZE_MUL((m), (n)) ? ((func)((p), (size_t)(m) * (size_t)(n))) : FAILURE_RESULT)\n@@ -95,1 +91,1 @@\n-    (IS_SAFE_SIZE_MUL(sizeof(type), (n)) ? (new type[(n)]) : throw std::bad_alloc())\n+    (IS_SAFE_SIZE_MUL(sizeof(type), (n)) ? (new type[(size_t)(n)]) : throw std::bad_alloc())\n@@ -98,2 +94,2 @@\n-    (IS_SAFE_SIZE_MUL((m), (n)) && IS_SAFE_SIZE_MUL(sizeof(type), (n) * (m)) ? \\\n-     (new type[(n) * (m)]) : throw std::bad_alloc())\n+    (IS_SAFE_SIZE_MUL((m), (n)) && IS_SAFE_SIZE_MUL(sizeof(type), (size_t)(n) * (size_t)(m)) ? \\\n+     (new type[(size_t)(n) * (size_t)(m)]) : throw std::bad_alloc())\n@@ -107,1 +103,1 @@\n-      IS_SAFE_SIZE_MUL((m), (n)) && IS_SAFE_SIZE_ADD((m) * (n), (a)) \\\n+      IS_SAFE_SIZE_MUL((m), (n)) && IS_SAFE_SIZE_ADD((size_t)(m) * (size_t)(n), (a)) \\\n@@ -119,1 +115,1 @@\n-    (IS_SAFE_STRUCT_SIZE((a), (m), (n)) ? ((func)((a) + (m) * (n))) : FAILURE_RESULT)\n+    (IS_SAFE_STRUCT_SIZE((a), (m), (n)) ? ((func)((size_t)(a) + (size_t)(m) * (size_t)(n))) : FAILURE_RESULT)\n","filename":"jdk\/src\/share\/native\/common\/sizecalc.h","additions":8,"deletions":12,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -189,1 +189,1 @@\n-    \/\/ but it's not in the 10.9 SDK.  So, call it via objc_msgSend_stret.\n+    \/\/ but it's not in the 10.9 SDK.  So, call it via NSInvocation.\n@@ -191,3 +191,7 @@\n-        OSVerStruct (*procInfoFn)(id rec, SEL sel) = (OSVerStruct(*)(id, SEL))objc_msgSend_stret;\n-        OSVerStruct osVer = procInfoFn([NSProcessInfo processInfo],\n-                                       @selector(operatingSystemVersion));\n+        OSVerStruct osVer;\n+        NSMethodSignature *sig = [[NSProcessInfo processInfo] methodSignatureForSelector:\n+                @selector(operatingSystemVersion)];\n+        NSInvocation *invoke = [NSInvocation invocationWithMethodSignature:sig];\n+        invoke.selector = @selector(operatingSystemVersion);\n+        [invoke invokeWithTarget:[NSProcessInfo processInfo]];\n+        [invoke getReturnValue:&osVer];\n","filename":"jdk\/src\/solaris\/native\/java\/lang\/java_props_macosx.c","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -289,0 +289,17 @@\n+#ifdef VCRUNTIME_1_DLL_NAME\n+        if (GetJREPath(crtpath, MAXPATHLEN)) {\n+            if (JLI_StrLen(crtpath) + JLI_StrLen(\"\\\\bin\\\\\") +\n+                    JLI_StrLen(VCRUNTIME_1_DLL_NAME) >= MAXPATHLEN) {\n+                JLI_ReportErrorMessage(JRE_ERROR11);\n+                return JNI_FALSE;\n+            }\n+            (void)JLI_StrCat(crtpath, \"\\\\bin\\\\\" VCRUNTIME_1_DLL_NAME);   \/* Add crt dll *\/\n+            JLI_TraceLauncher(\"CRT path is %s\\n\", crtpath);\n+            if (_access(crtpath, 0) == 0) {\n+                if (LoadLibrary(crtpath) == 0) {\n+                    JLI_ReportErrorMessage(DLL_ERROR4, crtpath);\n+                    return JNI_FALSE;\n+                }\n+            }\n+        }\n+#endif \/* VCRUNTIME_1_DLL_NAME *\/\n","filename":"jdk\/src\/windows\/bin\/java_md.c","additions":17,"deletions":0,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2009, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2009, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,0 @@\n-#include \"awt.h\"\n","filename":"jdk\/src\/windows\/native\/sun\/windows\/awt_DCHolder.cpp","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -26,1 +26,0 @@\n-#include \"awt.h\"\n@@ -32,1 +31,0 @@\n-#include \"awt_Toolkit.h\"\n@@ -36,1 +34,0 @@\n-#include \"alloc.h\"\n@@ -38,0 +35,1 @@\n+#include \"awt_Toolkit.h\"\n","filename":"jdk\/src\/windows\/native\/sun\/windows\/awt_DnDDT.cpp","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2009, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2009, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,0 @@\n-#include \"awt.h\"\n@@ -33,0 +32,1 @@\n+#include \"awt.h\"\n","filename":"jdk\/src\/windows\/native\/sun\/windows\/awt_ole.h","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -29,2 +29,0 @@\n- * @library   ..\/..\/regtesthelpers\n- * @build     Util\n@@ -33,5 +31,16 @@\n-import java.awt.*;\n-import java.awt.event.*;\n-import java.util.concurrent.Callable;\n-import javax.swing.SwingUtilities;\n-import test.java.awt.regtesthelpers.Util;\n+\n+import java.awt.AWTEvent;\n+import java.awt.Button;\n+import java.awt.Component;\n+import java.awt.Dimension;\n+import java.awt.FlowLayout;\n+import java.awt.Frame;\n+import java.awt.Label;\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.Toolkit;\n+import java.awt.Window;\n+import java.awt.event.AWTEventListener;\n+import java.awt.event.FocusEvent;\n+import java.awt.event.InputEvent;\n+import java.awt.event.WindowEvent;\n@@ -67,0 +76,1 @@\n+        robot.delay(500);\n@@ -70,0 +80,1 @@\n+        robot.delay(500);\n@@ -138,2 +149,2 @@\n-        robot.mousePress(InputEvent.BUTTON1_MASK);\n-        robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+        robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n","filename":"jdk\/test\/java\/awt\/Focus\/SimpleWindowActivationTest\/SimpleWindowActivationTest.java","additions":20,"deletions":9,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -0,0 +1,110 @@\n+\/*\n+ * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Button;\n+import java.awt.Frame;\n+import java.awt.Rectangle;\n+import java.awt.Robot;\n+import jdk.testlibrary.OSInfo;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+\/*\n+ * @test 1.2 98\/08\/05\n+ * @bug 4373478 8079255\n+ * @summary Test mouse wheel functionality of Robot\n+ * @author bchristi: area=Robot\n+ * @library ..\/..\/..\/..\/lib\/testlibrary\n+ * @build jdk.testlibrary.OSInfo\n+ * @run main RobotWheelTest\n+ *\/\n+public class RobotWheelTest {\n+\n+    private static final int NUMTESTS = 20;\n+\n+    private static AtomicInteger wheelRotation = new AtomicInteger();\n+    private static int wheelSign = OSInfo.getOSType().equals(OSInfo.OSType.MACOSX) ? -1 : 1;\n+\n+    static Robot robot;\n+\n+    static void waitTillSuccess(int i) {\n+        boolean success = false;\n+\n+        for (int t = 0; t < 5; t++) {\n+            if (i == wheelSign * wheelRotation.get()) {\n+                success = true;\n+                break;\n+            }\n+            System.out.printf(\n+                    \"attempt #%d failed. wheelRotation = %d, expected value = %d\\n\",\n+                    t, wheelRotation.get(), i\n+            );\n+            robot.delay(100);\n+        }\n+\n+        if (!success) {\n+            throw new RuntimeException(\"wheelRotation = \" + wheelRotation.get()\n+                    + \", expected value = \" + i);\n+        }\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+        robot = new Robot();\n+\n+        Frame frame = null;\n+        try {\n+            frame = new Frame();\n+            frame.setSize(200, 200);\n+            Button button = new Button(\"WheelButton\");\n+            button.addMouseWheelListener(e -> wheelRotation.addAndGet(e.getWheelRotation()));\n+            frame.add(button);\n+            frame.setLocationRelativeTo(null);\n+            frame.setVisible(true);\n+\n+            robot.setAutoDelay(100);\n+            robot.waitForIdle();\n+\n+            Rectangle bounds = frame.getBounds();\n+            int centerX = bounds.x + bounds.width \/ 2;\n+            int centerY = bounds.y + bounds.height \/ 2;\n+            robot.mouseMove(centerX, centerY);\n+            robot.waitForIdle();\n+\n+            for (int i = -NUMTESTS; i <= NUMTESTS; i++) {\n+                if (i == 0) {\n+                    continue;\n+                }\n+\n+                wheelRotation.set(0);\n+\n+                robot.mouseWheel(i);\n+                robot.waitForIdle();\n+\n+                waitTillSuccess(i);\n+            }\n+        } finally {\n+            if (frame != null) {\n+                frame.dispose();\n+            }\n+        }\n+    }\n+}\n\\ No newline at end of file\n","filename":"jdk\/test\/java\/awt\/Robot\/RobotWheelTest\/RobotWheelTest.java","additions":110,"deletions":0,"binary":false,"changes":110,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2006, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2006, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -53,1 +53,0 @@\n-\n@@ -102,1 +101,7 @@\n-            if (!expected.equals(gcInsets))\n+            \/\/ On Windows 10 and up system allows undecorated maximized windows\n+            \/\/ to be placed over the taskbar so calculated insets might\n+            \/\/ be smaller than reported ones depending on the taskbar position\n+            if (gcInsets.top < expected.top\n+                    || gcInsets.bottom < expected.bottom\n+                    || gcInsets.left < expected.left\n+                    || gcInsets.right < expected.right)\n","filename":"jdk\/test\/java\/awt\/Toolkit\/ScreenInsetsTest\/ScreenInsetsTest.java","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -0,0 +1,141 @@\n+\/*\n+ * Copyright (c) 2007, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+import java.awt.Dimension;\n+import java.awt.EventQueue;\n+import java.awt.FlowLayout;\n+import java.awt.Frame;\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.TextArea;\n+import java.awt.event.InputEvent;\n+import java.awt.event.KeyEvent;\n+\n+\/*\n+ * @test\n+ * @key headful\n+ * @bug 8296632\n+ * @summary Verify the content changes of a TextArea via TextListener.\n+ * @run main TextAreaTextEventTest\n+ *\/\n+public class TextAreaTextEventTest {\n+\n+    private static Frame frame;\n+    private volatile static TextArea textArea;\n+    private volatile static boolean textChanged = false;\n+    private volatile static Point textAreaAt;\n+    private volatile static Dimension textAreaSize;\n+    private static Robot robot = null;\n+\n+    public static void main(String[] args) throws Exception {\n+        try {\n+            EventQueue.invokeAndWait(TextAreaTextEventTest::initializeGUI);\n+\n+            robot = new Robot();\n+            robot.setAutoDelay(100);\n+\n+            robot.waitForIdle();\n+            EventQueue.invokeAndWait(() -> {\n+                textAreaAt = textArea.getLocationOnScreen();\n+                textAreaSize = textArea.getSize();\n+            });\n+            robot.mouseMove(textAreaAt.x + textAreaSize.width \/ 2,\n+                textAreaAt.y + textAreaSize.height \/ 2);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+            typeKey(KeyEvent.VK_T);\n+\n+            robot.waitForIdle();\n+            if (!textChanged) {\n+                throw new RuntimeException(\n+                    \"FAIL: TextEvent not triggered when key 'T' typed on TextArea\");\n+            }\n+\n+            typeKey(KeyEvent.VK_E);\n+            typeKey(KeyEvent.VK_S);\n+            typeKey(KeyEvent.VK_T);\n+\n+            textChanged = false;\n+            typeKey(KeyEvent.VK_ENTER);\n+\n+            robot.waitForIdle();\n+            if (!textChanged) {\n+                throw new RuntimeException(\n+                    \"FAIL: TextEvent not triggered when Enter pressed on TextArea\");\n+            }\n+\n+            textChanged = false;\n+            robot.mouseMove(textAreaAt.x + 4, textAreaAt.y + 10);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+            robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);\n+            for (int i = 0; i < textAreaSize.width \/ 2; i++) {\n+                robot.mouseMove(textAreaAt.x + 4 + i, textAreaAt.y + 10);\n+            }\n+            robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);\n+\n+            robot.waitForIdle();\n+            if (textChanged) {\n+                throw new RuntimeException(\n+                    \"FAIL: TextEvent triggered when text is selected on TextArea!\");\n+            }\n+\n+            textChanged = false;\n+            typeKey(KeyEvent.VK_F3);\n+\n+            robot.waitForIdle();\n+            if (textChanged) {\n+                throw new RuntimeException(\n+                    \"FAIL: TextEvent triggered when special key F3 is pressed on TextArea!\");\n+            }\n+            System.out.println(\"Test passed!\");\n+        } finally {\n+            EventQueue.invokeAndWait(TextAreaTextEventTest::disposeFrame);\n+        }\n+    }\n+\n+    private static void initializeGUI() {\n+        frame = new Frame(\"Test Frame\");\n+        frame.setLayout(new FlowLayout());\n+        textArea = new TextArea(5, 15);\n+        textArea.addTextListener((event) -> {\n+            System.out.println(\"Got a text event: \" + event);\n+            textChanged = true;\n+        });\n+        frame.add(textArea);\n+        frame.pack();\n+        frame.setLocationRelativeTo(null);\n+        frame.setVisible(true);\n+    }\n+\n+    public static void disposeFrame() {\n+        if (frame != null) {\n+            frame.dispose();\n+        }\n+    }\n+\n+    private static void typeKey(int key) throws Exception {\n+        robot.keyPress(key);\n+        robot.keyRelease(key);\n+    }\n+}\n","filename":"jdk\/test\/java\/awt\/event\/ComponentEvent\/TextAreaTextEventTest.java","additions":141,"deletions":0,"binary":false,"changes":141,"status":"added"},{"patch":"@@ -1,98 +0,0 @@\n-#\n-# Copyright (c) 2002, 2013, Oracle and\/or its affiliates. All rights reserved.\n-# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-#\n-# This code is free software; you can redistribute it and\/or modify it\n-# under the terms of the GNU General Public License version 2 only, as\n-# published by the Free Software Foundation.\n-#\n-# This code is distributed in the hope that it will be useful, but WITHOUT\n-# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n-# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n-# version 2 for more details (a copy is included in the LICENSE file that\n-# accompanied this code).\n-#\n-# You should have received a copy of the GNU General Public License version\n-# 2 along with this work; if not, write to the Free Software Foundation,\n-# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-#\n-# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-# or visit www.oracle.com if you need additional information or have any\n-# questions.\n-#\n-\n-# @test\n-# @bug 4504355\n-# @summary problems if signed crypto provider is the most preferred provider\n-#\n-# @run shell Dyn.sh\n-\n-# set a few environment variables so that the shell-script can run stand-alone\n-# in the source directory\n-if [ \"${TESTSRC}\" = \"\" ] ; then\n-   TESTSRC=\".\"\n-fi\n-\n-if [ \"${TESTCLASSES}\" = \"\" ] ; then\n-   TESTCLASSES=\".\"\n-fi\n-\n-if [ \"${TESTJAVA}\" = \"\" ] ; then\n-   echo \"TESTJAVA not set.  Test cannot execute.\"\n-   echo \"FAILED!!!\"\n-   exit 1\n-fi\n-\n-if [ \"${COMPILEJAVA}\" = \"\" ]; then\n-   COMPILEJAVA=\"${TESTJAVA}\"\n-fi\n-\n-# set platform-dependent variables\n-OS=`uname -s`\n-case \"$OS\" in\n-  SunOS )\n-    PATHSEP=\":\"\n-    FILESEP=\"\/\"\n-    ;;\n-  Linux )\n-    PATHSEP=\":\"\n-    FILESEP=\"\/\"\n-    ;;\n-  Darwin )\n-    PATHSEP=\":\"\n-    FILESEP=\"\/\"\n-    ;;\n-  AIX )\n-    PATHSEP=\":\"\n-    FILESEP=\"\/\"\n-    ;;\n-  CYGWIN* )\n-    PATHSEP=\";\"\n-    FILESEP=\"\/\"\n-    ;;\n-  Windows* )\n-    PATHSEP=\";\"\n-    FILESEP=\"\\\\\"\n-    ;;\n-  * )\n-    echo \"Unrecognized system!\"\n-    exit 1;\n-    ;;\n-esac\n-\n-# remove old class files\n-cd ${TESTCLASSES}${FILESEP}\n-rm DynSignedProvFirst.class\n-\n-# compile the test program\n-${COMPILEJAVA}${FILESEP}bin${FILESEP}javac ${TESTJAVACOPTS} ${TESTTOOLVMOPTS} \\\n-        -classpath ${TESTSRC}${FILESEP}exp.jar \\\n-        -d ${TESTCLASSES}${FILESEP} \\\n-        ${TESTSRC}${FILESEP}DynSignedProvFirst.java\n-\n-# run the test\n-${TESTJAVA}${FILESEP}bin${FILESEP}java ${TESTVMOPTS} \\\n-        -classpath \"${TESTCLASSES}${PATHSEP}${TESTSRC}${FILESEP}exp.jar\" \\\n-        DynSignedProvFirst\n-\n-exit $?\n","filename":"jdk\/test\/java\/security\/Security\/signedfirst\/Dyn.sh","additions":0,"deletions":98,"binary":false,"changes":98,"status":"deleted"},{"patch":"@@ -0,0 +1,93 @@\n+\/*\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\/*\n+ * @test\n+ * @bug 4504355 4744260\n+ * @summary problems if signed crypto provider is the most preferred provider\n+ * @library \/lib\/testlibrary\n+ * @run main\/othervm DynStatic\n+ *\/\n+\n+import java.io.File;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.List;\n+\n+import jdk.testlibrary.ProcessTools;\n+import jdk.testlibrary.JarUtils;\n+\n+public class DynStatic {\n+\n+    private static final String TEST_SRC =\n+        Paths.get(System.getProperty(\"test.src\")).toString();\n+    private static final Path TEST_CLASSES =\n+        Paths.get(System.getProperty(\"test.classes\"));\n+\n+    private static final Path EXP_SRC_DIR = Paths.get(TEST_SRC, \"com\");\n+    private static final Path EXP_DEST_DIR = Paths.get(\"build\");\n+    private static final Path DYN_SRC =\n+        Paths.get(TEST_SRC, \"DynSignedProvFirst.java\");\n+    private static final Path STATIC_SRC =\n+        Paths.get(TEST_SRC, \"StaticSignedProvFirst.java\");\n+\n+    private static final String STATIC_PROPS =\n+        Paths.get(TEST_SRC, \"Static.props\").toString();\n+\n+    public static void main(String[] args) throws Throwable {\n+\n+        \/\/ Compile the provider\n+        CompilerUtils.compile(EXP_SRC_DIR, EXP_DEST_DIR);\n+\n+        \/\/ Create a jar file containing the provider\n+        JarUtils.createJarFile(Paths.get(\"exp.jar\"), EXP_DEST_DIR, Paths.get(\"com\"));\n+\n+        \/\/ Create a keystore\n+        sun.security.tools.keytool.Main.main(\n+            (\"-genkeypair -dname CN=Signer -keystore exp.ks -storepass \"\n+                + \"changeit -keypass changeit -keyalg rsa\").split(\" \"));\n+\n+        \/\/ Sign jar\n+        sun.security.tools.jarsigner.Main.main(\n+                \"-storepass changeit -keystore exp.ks exp.jar mykey\"\n+                        .split(\" \"));\n+\n+        \/\/ Compile the DynSignedProvFirst test program\n+        CompilerUtils.compile(DYN_SRC, TEST_CLASSES, \"-classpath\", \"exp.jar\");\n+\n+        \/\/ Run the DynSignedProvFirst test program\n+        ProcessTools.executeTestJvm(\"-classpath\",\n+            TEST_CLASSES.toString() + File.pathSeparator + \"exp.jar\",\n+            \"DynSignedProvFirst\")\n+            .shouldContain(\"test passed\");\n+\n+        \/\/ Compile the StaticSignedProvFirst test program\n+        CompilerUtils.compile(STATIC_SRC, TEST_CLASSES, \"-classpath\", \"exp.jar\");\n+\n+        \/\/ Run the StaticSignedProvFirst test program\n+        ProcessTools.executeTestJvm(\"-classpath\",\n+            TEST_CLASSES.toString() + File.pathSeparator + \"exp.jar\",\n+            \"-Djava.security.properties=file:\" + STATIC_PROPS,\n+            \"StaticSignedProvFirst\")\n+            .shouldContain(\"test passed\");\n+    }\n+}\n","filename":"jdk\/test\/java\/security\/Security\/signedfirst\/DynStatic.java","additions":93,"deletions":0,"binary":false,"changes":93,"status":"added"},{"patch":"@@ -1,100 +0,0 @@\n-#\n-# Copyright (c) 2002, 2013, Oracle and\/or its affiliates. All rights reserved.\n-# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-#\n-# This code is free software; you can redistribute it and\/or modify it\n-# under the terms of the GNU General Public License version 2 only, as\n-# published by the Free Software Foundation.\n-#\n-# This code is distributed in the hope that it will be useful, but WITHOUT\n-# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n-# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n-# version 2 for more details (a copy is included in the LICENSE file that\n-# accompanied this code).\n-#\n-# You should have received a copy of the GNU General Public License version\n-# 2 along with this work; if not, write to the Free Software Foundation,\n-# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-#\n-# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n-# or visit www.oracle.com if you need additional information or have any\n-# questions.\n-#\n-\n-# @test\n-# @bug 4504355 4744260\n-# @summary problems if signed crypto provider is the most preferred provider\n-#\n-# @run shell Static.sh\n-\n-# set a few environment variables so that the shell-script can run stand-alone\n-# in the source directory\n-if [ \"${TESTSRC}\" = \"\" ] ; then\n-   TESTSRC=\".\"\n-fi\n-\n-if [ \"${TESTCLASSES}\" = \"\" ] ; then\n-   TESTCLASSES=\".\"\n-fi\n-\n-if [ \"${TESTJAVA}\" = \"\" ] ; then\n-   echo \"TESTJAVA not set.  Test cannot execute.\"\n-   echo \"FAILED!!!\"\n-   exit 1\n-fi\n-\n-if [ \"${COMPILEJAVA}\" = \"\" ]; then\n-   COMPILEJAVA=\"${TESTJAVA}\"\n-fi\n-\n-# set platform-dependent variables\n-OS=`uname -s`\n-case \"$OS\" in\n-  SunOS )\n-    PATHSEP=\":\"\n-    FILESEP=\"\/\"\n-    ;;\n-  Linux )\n-    PATHSEP=\":\"\n-    FILESEP=\"\/\"\n-    ;;\n-  Darwin )\n-    PATHSEP=\":\"\n-    FILESEP=\"\/\"\n-    ;;\n-  AIX )\n-    PATHSEP=\":\"\n-    FILESEP=\"\/\"\n-    ;;\n-  CYGWIN* )\n-    PATHSEP=\";\"\n-    FILESEP=\"\/\"\n-    ;;\n-  Windows* )\n-    PATHSEP=\";\"\n-    FILESEP=\"\\\\\"\n-    ;;\n-  * )\n-    echo \"Unrecognized system!\"\n-    exit 1;\n-    ;;\n-esac\n-\n-# remove old class files\n-cd ${TESTCLASSES}${FILESEP}\n-rm StaticSignedProvFirst.class\n-\n-# compile the test program\n-${COMPILEJAVA}${FILESEP}bin${FILESEP}javac ${TESTJAVACOPTS} ${TESTTOOLVMOPTS} \\\n-        -classpath \"${TESTCLASSES}${PATHSEP}${TESTSRC}${FILESEP}exp.jar\" \\\n-        -d ${TESTCLASSES}${FILESEP} \\\n-        ${TESTSRC}${FILESEP}StaticSignedProvFirst.java\n-\n-# run the test\n-cd ${TESTSRC}${FILESEP}\n-${TESTJAVA}${FILESEP}bin${FILESEP}java ${TESTVMOPTS} \\\n-        -classpath \"${TESTCLASSES}${PATHSEP}${TESTSRC}${FILESEP}exp.jar\" \\\n-        -Djava.security.properties=file:${TESTSRC}${FILESEP}Static.props \\\n-        StaticSignedProvFirst\n-\n-exit $?\n","filename":"jdk\/test\/java\/security\/Security\/signedfirst\/Static.sh","additions":0,"deletions":100,"binary":false,"changes":100,"status":"deleted"},{"patch":"@@ -0,0 +1,34 @@\n+\/*\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package com.sun.exp.provider;\n+\n+import java.security.Provider;\n+\n+public class EXP extends Provider {\n+\n+    public EXP() {\n+        super(\"EXP\", 0.0d, \"Test provider\");\n+        put(\"MessageDigest.SHA1\", \"com.sun.exp.provider.SHA\");\n+    }\n+}\n","filename":"jdk\/test\/java\/security\/Security\/signedfirst\/com\/sun\/exp\/provider\/EXP.java","additions":34,"deletions":0,"binary":false,"changes":34,"status":"added"},{"patch":"@@ -0,0 +1,33 @@\n+\/*\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package com.sun.exp.provider;\n+\n+import java.security.MessageDigestSpi;\n+\n+public class SHA extends MessageDigestSpi {\n+    protected void engineReset() {}\n+    protected void engineUpdate(byte input) {}\n+    protected void engineUpdate(byte[] input, int offset, int len) {}\n+    protected byte[] engineDigest() { return null; }\n+}\n","filename":"jdk\/test\/java\/security\/Security\/signedfirst\/com\/sun\/exp\/provider\/SHA.java","additions":33,"deletions":0,"binary":false,"changes":33,"status":"added"},{"filename":"jdk\/test\/java\/security\/Security\/signedfirst\/exp.jar","binary":true,"status":"deleted"},{"filename":"jdk\/test\/java\/security\/Security\/signedfirst\/keystore.jks","binary":true,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2008, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2008, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -49,0 +49,1 @@\n+import java.text.DateFormat;\n@@ -52,0 +53,1 @@\n+import java.util.Locale;\n@@ -68,0 +70,5 @@\n+\n+        \/\/ Certs expired on 7th Nov 2022\n+        params.setDate(DateFormat.getDateInstance(DateFormat.MEDIUM,\n+                Locale.US).parse(\"June 01, 2022\"));\n+\n","filename":"jdk\/test\/java\/security\/cert\/CertPathBuilder\/targetConstraints\/BuildEEBasicConstraints.java","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2002, 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2002, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,1 @@\n+import java.text.DateFormat;\n@@ -100,0 +101,4 @@\n+            \/\/ Certs expired on 7th Nov 2022\n+            params.setDate(DateFormat.getDateInstance(DateFormat.MEDIUM,\n+                    Locale.US).parse(\"June 01, 2022\"));\n+\n","filename":"jdk\/test\/java\/security\/cert\/pkix\/policyChanges\/TestPolicy.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -1,1 +1,1 @@\n-tzdata2022c\n+tzdata2022e\n","filename":"jdk\/test\/java\/util\/TimeZone\/TimeZoneData\/VERSION","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -186,0 +186,2 @@\n+Link\tEurope\/Kyiv\t\tEurope\/Uzhgorod\n+Link\tEurope\/Kyiv\t\tEurope\/Zaporozhye\n","filename":"jdk\/test\/java\/util\/TimeZone\/TimeZoneData\/aliases.txt","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -100,1 +100,0 @@\n-Asia\/Amman EET EEST\n@@ -102,1 +101,0 @@\n-Asia\/Damascus EET EEST\n@@ -166,1 +164,0 @@\n-Europe\/Uzhgorod EET EEST\n@@ -170,1 +167,0 @@\n-Europe\/Zaporozhye EET EEST\n","filename":"jdk\/test\/java\/util\/TimeZone\/TimeZoneData\/displaynames.txt","additions":0,"deletions":4,"binary":false,"changes":4,"status":"modified"},{"filename":"jdk\/test\/java\/util\/jar\/JarFile\/Signed.jar","binary":true,"status":"modified"},{"filename":"jdk\/test\/java\/util\/jar\/JarFile\/test.jar","binary":true,"status":"modified"},{"filename":"jdk\/test\/java\/util\/jar\/JarInputStream\/signed.jar","binary":true,"status":"modified"},{"patch":"@@ -0,0 +1,209 @@\n+\/*\n+ * Copyright (c) 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/* @test\n+ * @bug 7124218\n+ * @summary verifies different behaviour of SPACE and ENTER in JTable\n+ * @library ..\/..\/regtesthelpers\n+ * @build Util\n+ * @run main SelectEditTableCell\n+ *\/\n+import java.awt.Point;\n+import java.awt.Robot;\n+import java.awt.event.InputEvent;\n+import java.awt.event.KeyEvent;\n+import javax.swing.DefaultListSelectionModel;\n+import javax.swing.JFrame;\n+import javax.swing.JTable;\n+import javax.swing.LookAndFeel;\n+import javax.swing.SwingUtilities;\n+import javax.swing.UIManager;\n+import javax.swing.UnsupportedLookAndFeelException;\n+\n+public class SelectEditTableCell {\n+\n+    private static JFrame frame;\n+    private static JTable table;\n+    private static Robot robot;\n+\n+    public static void main(String[] args) throws Exception {\n+        robot = new Robot();\n+        robot.setAutoDelay(100);\n+        UIManager.LookAndFeelInfo[] lookAndFeelArray\n+                = UIManager.getInstalledLookAndFeels();\n+        for (UIManager.LookAndFeelInfo lookAndFeelItem : lookAndFeelArray) {\n+            executeCase(lookAndFeelItem.getClassName());\n+        }\n+    }\n+\n+    private static void executeCase(String lookAndFeelString) throws Exception {\n+        try {\n+            if (tryLookAndFeel(lookAndFeelString)) {\n+                createUI(lookAndFeelString);\n+                robot.delay(2000);\n+                runTestCase();\n+                robot.delay(2000);\n+                cleanUp();\n+                robot.delay(2000);\n+            }\n+        } finally {\n+            if (frame != null) {\n+                SwingUtilities.invokeAndWait(frame::dispose);\n+            }\n+        }\n+\n+    }\n+\n+    private static void createUI(final String lookAndFeelString)\n+            throws Exception {\n+        SwingUtilities.invokeAndWait(new Runnable() {\n+            @Override\n+            public void run() {\n+                String[][] data = {{\"Foo\"}};\n+                String[] cols = {\"One\"};\n+                table = new JTable(data, cols);\n+                table.setSelectionMode(\n+                        DefaultListSelectionModel.MULTIPLE_INTERVAL_SELECTION);\n+                frame = new JFrame(lookAndFeelString);\n+                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n+                frame.getContentPane().add(table);\n+                frame.pack();\n+                frame.setSize(500, frame.getSize().height);\n+                frame.setLocationRelativeTo(null);\n+                frame.setVisible(true);\n+                frame.toFront();\n+            }\n+        });\n+    }\n+\n+    private static void runTestCase() throws Exception {\n+        Point centerPoint;\n+        centerPoint = Util.getCenterPoint(table);\n+        LookAndFeel lookAndFeel = UIManager.getLookAndFeel();\n+        robot.mouseMove(centerPoint.x, centerPoint.y);\n+        robot.mousePress(InputEvent.BUTTON1_MASK);\n+        robot.mouseRelease(InputEvent.BUTTON1_MASK);\n+        robot.waitForIdle();\n+        SwingUtilities.invokeAndWait(new Runnable() {\n+            @Override\n+            public void run() {\n+                table.clearSelection();\n+                if (table.isEditing() || table.isCellSelected(0, 0)) {\n+                    \/\/ assumption is bad, bail\n+                    frame.dispose();\n+                    throw new AssertionError(\"Failed assumption: assumed no\"\n+                            + \"editing and no selection.\");\n+                }\n+            }\n+        });\n+\n+        int fetchKeyCode;\n+        keyTap(fetchKeyCode = isMac(lookAndFeel)\n+                ? KeyEvent.VK_ENTER : KeyEvent.VK_SPACE);\n+        final int keyCode = fetchKeyCode;\n+        robot.waitForIdle();\n+        SwingUtilities.invokeAndWait(new Runnable() {\n+            @Override\n+            public void run() {\n+                if (!table.isCellSelected(0, 0)) {\n+                    frame.dispose();\n+                    throw new RuntimeException(((keyCode == KeyEvent.VK_ENTER)\n+                            ? \"Enter\" : \"Space\")\n+                            + \" should select cell\");\n+                }\n+            }\n+        });\n+\n+        keyTap(KeyEvent.VK_SPACE);\n+        robot.waitForIdle();\n+        SwingUtilities.invokeAndWait(new Runnable() {\n+            @Override\n+            public void run() {\n+                if (!table.isEditing()) {\n+                    frame.dispose();\n+                    throw new RuntimeException(\"Space should start editing\");\n+                }\n+                table.getCellEditor().cancelCellEditing();\n+                table.clearSelection();\n+                if (table.isEditing() || table.isCellSelected(0, 0)) {\n+                    \/\/ assumption is bad, bail\n+                    frame.dispose();\n+                    throw new AssertionError(\"Failed assumption: assumed no \"\n+                            + \"editing and no selection.\");\n+                }\n+            }\n+        });\n+\n+        \/\/ hitting a letter key will start editing\n+        keyTap(KeyEvent.VK_A);\n+        robot.waitForIdle();\n+        keyTap(KeyEvent.VK_SPACE);\n+        robot.waitForIdle();\n+        keyTap(KeyEvent.VK_A);\n+        robot.waitForIdle();\n+        SwingUtilities.invokeAndWait(new Runnable() {\n+            @Override\n+            public void run() {\n+                if (table.isCellSelected(0, 0)) {\n+                    frame.dispose();\n+                    throw new RuntimeException(\"Space should not select when \"\n+                            + \"already editing.\");\n+                }\n+            }\n+        });\n+    }\n+\n+    private static void cleanUp() throws Exception {\n+        SwingUtilities.invokeAndWait(new Runnable() {\n+            @Override\n+            public void run() {\n+                frame.dispose();\n+            }\n+        });\n+    }\n+\n+    private static boolean isMac(LookAndFeel lookAndFeel) {\n+\n+        return lookAndFeel.toString().toLowerCase().contains(\"mac\");\n+    }\n+\n+    private static void keyTap(int keyCode) {\n+        robot.keyPress(keyCode);\n+        robot.keyRelease(keyCode);\n+    }\n+\n+    private static boolean tryLookAndFeel(String lookAndFeelString)\n+            throws Exception {\n+        try {\n+            UIManager.setLookAndFeel(\n+                    lookAndFeelString);\n+\n+        } catch (UnsupportedLookAndFeelException\n+                | ClassNotFoundException\n+                | InstantiationException\n+                | IllegalAccessException e) {\n+            return false;\n+        }\n+        return true;\n+    }\n+}\n","filename":"jdk\/test\/javax\/swing\/JTable\/7124218\/SelectEditTableCell.java","additions":209,"deletions":0,"binary":false,"changes":209,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2019, Oracle and\/or its affiliates. All rights reserved.\n@@ -77,1 +77,1 @@\n-            testMemoryFailCount(\"20m\");\n+            testMemoryFailCount(\"64m\");\n","filename":"jdk\/test\/jdk\/internal\/platform\/docker\/TestDockerMemoryMetrics.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -242,5 +242,19 @@\n-        oldVal = metrics.getMemoryAndSwapLimit();\n-        newVal = getLongLimitValueFromFile(\"memory.swap.max\");\n-        if (!CgroupMetricsTester.compareWithErrorMargin(oldVal, newVal)) {\n-            fail(\"memory.swap.max\", oldVal, newVal);\n-        }\n+        long memAndSwapLimit = metrics.getMemoryAndSwapLimit();\n+        long memLimit = metrics.getMemoryLimit();\n+        \/\/ Only test swap memory limits if we can. On systems with swapaccount=0\n+        \/\/ we cannot, as swap limits are disabled.\n+        if (memAndSwapLimit <= memLimit) {\n+            System.out.println(\"No swap memory limits, test case(s) skipped\");\n+        } else {\n+            oldVal = memAndSwapLimit;\n+            long valSwap = getLongLimitValueFromFile(\"memory.swap.max\");\n+            long valMemory = getLongLimitValueFromFile(\"memory.max\");\n+            if (valSwap == UNLIMITED) {\n+                newVal = valSwap;\n+            } else {\n+                assert valMemory >= 0;\n+                newVal = valSwap + valMemory;\n+            }\n+            if (!CgroupMetricsTester.compareWithErrorMargin(oldVal, newVal)) {\n+                fail(\"memory.swap.max\", oldVal, newVal);\n+            }\n@@ -248,4 +262,7 @@\n-        oldVal = metrics.getMemoryAndSwapUsage();\n-        newVal = getLongValueFromFile(\"memory.swap.current\");\n-        if (!CgroupMetricsTester.compareWithErrorMargin(oldVal, newVal)) {\n-            fail(\"memory.swap.current\", oldVal, newVal);\n+            oldVal = metrics.getMemoryAndSwapUsage();\n+            long swapUsage = getLongValueFromFile(\"memory.swap.current\");\n+            long memUsage = getLongValueFromFile(\"memory.current\");\n+            newVal = swapUsage + memUsage;\n+            if (!CgroupMetricsTester.compareWithErrorMargin(oldVal, newVal)) {\n+                fail(\"memory.swap.current\", oldVal, newVal);\n+            }\n","filename":"jdk\/test\/lib\/jdk\/test\/lib\/containers\/cgroup\/MetricsTesterCgroupV2.java","additions":26,"deletions":9,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -49,1 +49,1 @@\n-                return \"aarch64\/ubuntu\";\n+                return \"arm64v8\/ubuntu\";\n","filename":"jdk\/test\/lib\/jdk\/test\/lib\/containers\/docker\/DockerfileConfig.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1,276 +0,0 @@\n-\/*\n- * Copyright (c) 2017, 2018, Oracle and\/or its affiliates. All rights reserved.\n- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n- *\n- * This code is free software; you can redistribute it and\/or modify it\n- * under the terms of the GNU General Public License version 2 only, as\n- * published by the Free Software Foundation.\n- *\n- * This code is distributed in the hope that it will be useful, but WITHOUT\n- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- * version 2 for more details (a copy is included in the LICENSE file that\n- * accompanied this code).\n- *\n- * You should have received a copy of the GNU General Public License version\n- * 2 along with this work; if not, write to the Free Software Foundation,\n- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n- *\n- * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- * or visit www.oracle.com if you need additional information or have any\n- * questions.\n- *\/\n-\n-package jdk.test.lib.util;\n-\n-import jdk.test.lib.Platform;\n-\n-import java.io.IOException;\n-import java.io.PrintStream;\n-import java.io.UncheckedIOException;\n-import java.lang.ProcessBuilder.Redirect;\n-import java.nio.file.DirectoryNotEmptyException;\n-import java.nio.file.FileVisitResult;\n-import java.nio.file.Files;\n-import java.nio.file.NoSuchFileException;\n-import java.nio.file.Path;\n-import java.nio.file.Paths;\n-import java.nio.file.SimpleFileVisitor;\n-import java.nio.file.attribute.BasicFileAttributes;\n-import java.time.Instant;\n-import java.time.Duration;\n-import java.util.ArrayList;\n-import java.util.ArrayDeque;\n-import java.util.HashSet;\n-import java.util.List;\n-import java.util.Optional;\n-import java.util.concurrent.TimeUnit;\n-\n-\/**\n- * Common library for various test file utility functions.\n- *\/\n-public final class FileUtils {\n-    private static final boolean IS_WINDOWS = Platform.isWindows();\n-    private static final int RETRY_DELETE_MILLIS = IS_WINDOWS ? 500 : 0;\n-    private static final int MAX_RETRY_DELETE_TIMES = IS_WINDOWS ? 15 : 0;\n-\n-    \/**\n-     * Deletes a file, retrying if necessary.\n-     *\n-     * @param path  the file to delete\n-     *\n-     * @throws NoSuchFileException\n-     *         if the file does not exist (optional specific exception)\n-     * @throws DirectoryNotEmptyException\n-     *         if the file is a directory and could not otherwise be deleted\n-     *         because the directory is not empty (optional specific exception)\n-     * @throws IOException\n-     *         if an I\/O error occurs\n-     *\/\n-    public static void deleteFileWithRetry(Path path) throws IOException {\n-        try {\n-            deleteFileWithRetry0(path);\n-        } catch (InterruptedException x) {\n-            throw new IOException(\"Interrupted while deleting.\", x);\n-        }\n-    }\n-\n-    \/**\n-     * Deletes a file, retrying if necessary.\n-     * No exception thrown if file doesn't exist.\n-     *\n-     * @param path  the file to delete\n-     *\n-     * @throws NoSuchFileException\n-     *         if the file does not exist (optional specific exception)\n-     * @throws DirectoryNotEmptyException\n-     *         if the file is a directory and could not otherwise be deleted\n-     *         because the directory is not empty (optional specific exception)\n-     * @throws IOException\n-     *         if an I\/O error occurs\n-     *\/\n-    public static void deleteFileIfExistsWithRetry(Path path) throws IOException {\n-        try {\n-            if (Files.exists(path)) {\n-                deleteFileWithRetry0(path);\n-            }\n-        } catch (InterruptedException x) {\n-            throw new IOException(\"Interrupted while deleting.\", x);\n-        }\n-    }\n-\n-    private static void deleteFileWithRetry0(Path path)\n-            throws IOException, InterruptedException {\n-        int times = 0;\n-        IOException ioe = null;\n-        while (true) {\n-            try {\n-                Files.delete(path);\n-                \/\/ Checks for absence of the file. Semantics of Files.exists() is not the same.\n-                while (!Files.notExists(path)) {\n-                    times++;\n-                    if (times > MAX_RETRY_DELETE_TIMES) {\n-                        throw new IOException(\"File still exists after \" + times + \" waits.\");\n-                    }\n-                    Thread.sleep(RETRY_DELETE_MILLIS);\n-                }\n-                break;\n-            } catch (NoSuchFileException | DirectoryNotEmptyException x) {\n-                throw x;\n-            } catch (IOException x) {\n-                \/\/ Backoff\/retry in case another process is accessing the file\n-                times++;\n-                if (ioe == null) {\n-                    ioe = x;\n-                } else {\n-                    ioe.addSuppressed(x);\n-                }\n-\n-                if (times > MAX_RETRY_DELETE_TIMES) {\n-                    throw ioe;\n-                }\n-                Thread.sleep(RETRY_DELETE_MILLIS);\n-            }\n-        }\n-    }\n-\n-    \/**\n-     * Deletes a directory and its subdirectories, retrying if necessary.\n-     *\n-     * @param dir  the directory to delete\n-     *\n-     * @throws  IOException\n-     *          If an I\/O error occurs. Any such exceptions are caught\n-     *          internally. If only one is caught, then it is re-thrown.\n-     *          If more than one exception is caught, then the second and\n-     *          following exceptions are added as suppressed exceptions of the\n-     *          first one caught, which is then re-thrown.\n-     *\/\n-    public static void deleteFileTreeWithRetry(Path dir) throws IOException {\n-        IOException ioe = null;\n-        final List<IOException> excs = deleteFileTreeUnchecked(dir);\n-        if (!excs.isEmpty()) {\n-            ioe = excs.remove(0);\n-            for (IOException x : excs) {\n-                ioe.addSuppressed(x);\n-            }\n-        }\n-        if (ioe != null) {\n-            throw ioe;\n-        }\n-    }\n-\n-    public static List<IOException> deleteFileTreeUnchecked(Path dir) {\n-        final List<IOException> excs = new ArrayList<>();\n-        try {\n-            java.nio.file.Files.walkFileTree(dir, new SimpleFileVisitor<>() {\n-                @Override\n-                public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) {\n-                    try {\n-                        deleteFileWithRetry0(file);\n-                    } catch (IOException x) {\n-                        excs.add(x);\n-                    } catch (InterruptedException x) {\n-                        excs.add(new IOException(\"Interrupted while deleting.\", x));\n-                        return FileVisitResult.TERMINATE;\n-                    }\n-                    return FileVisitResult.CONTINUE;\n-                }\n-                @Override\n-                public FileVisitResult postVisitDirectory(Path dir, IOException exc) {\n-                    try {\n-                        deleteFileWithRetry0(dir);\n-                    } catch (IOException x) {\n-                        excs.add(x);\n-                    } catch (InterruptedException x) {\n-                        excs.add(new IOException(\"Interrupted while deleting.\", x));\n-                        return FileVisitResult.TERMINATE;\n-                    }\n-                    return FileVisitResult.CONTINUE;\n-                }\n-                @Override\n-                public FileVisitResult visitFileFailed(Path file, IOException exc) {\n-                    excs.add(exc);\n-                    return FileVisitResult.CONTINUE;\n-                }\n-            });\n-        } catch (IOException x) {\n-            excs.add(x);\n-        }\n-        return excs;\n-    }\n-\n-    \/**\n-     * Checks whether all file systems are accessible. This is performed\n-     * by checking free disk space on all mounted file systems via a\n-     * separate, spawned process. File systems are considered to be\n-     * accessible if this process completes successfully before a given\n-     * fixed duration has elapsed.\n-     *\n-     * @implNote On Unix this executes the {@code df} command in a separate\n-     * process and on Windows always returns {@code true}.\n-     *\/\n-    public static boolean areFileSystemsAccessible() throws IOException {\n-        boolean areFileSystemsAccessible = true;\n-        if (!IS_WINDOWS) {\n-            \/\/ try to check whether 'df' hangs\n-            System.out.println(\"\\n--- df output ---\");\n-            System.out.flush();\n-            Process proc = new ProcessBuilder(\"df\").inheritIO().start();\n-            try {\n-                proc.waitFor(90, TimeUnit.SECONDS);\n-            } catch (InterruptedException ignored) {\n-            }\n-            try {\n-                int exitValue = proc.exitValue();\n-                if (exitValue != 0) {\n-                    System.err.printf(\"df process exited with %d != 0%n\",\n-                        exitValue);\n-                    areFileSystemsAccessible = false;\n-                }\n-            } catch (IllegalThreadStateException ignored) {\n-                System.err.println(\"df command apparently hung\");\n-                areFileSystemsAccessible = false;\n-            }\n-        }\n-        return areFileSystemsAccessible;\n-    }\n-\n-    \/**\n-     * List the open file descriptors (if supported by the 'lsof' command).\n-     * @param ps a printStream to send the output to\n-     * @throws UncheckedIOException if an error occurs\n-     *\/\n-    public static void listFileDescriptors(PrintStream ps) {\n-        List<String> lsofDirs = List.of(\"\/usr\/bin\", \"\/usr\/sbin\");\n-        Optional<Path> lsof = lsofDirs.stream()\n-                .map(s -> Paths.get(s, \"lsof\"))\n-                .filter(f -> Files.isExecutable(f))\n-                .findFirst();\n-        lsof.ifPresent(exe -> {\n-            try {\n-                ps.printf(\"Open File Descriptors:%n\");\n-                long pid = ProcessHandle.current().pid();\n-                ProcessBuilder pb = new ProcessBuilder(exe.toString(), \"-p\", Integer.toString((int) pid));\n-                pb.redirectErrorStream(true);   \/\/ combine stderr and stdout\n-                pb.redirectOutput(Redirect.PIPE);\n-\n-                Process p = pb.start();\n-                Instant start = Instant.now();\n-                p.getInputStream().transferTo(ps);\n-\n-                try {\n-                    int timeout = 10;\n-                    if (!p.waitFor(timeout, TimeUnit.SECONDS)) {\n-                        System.out.printf(\"waitFor timed out: %d%n\", timeout);\n-                    }\n-                } catch (InterruptedException ie) {\n-                    throw new IOException(\"interrupted\", ie);\n-                }\n-                ps.println();\n-            } catch (IOException ioe) {\n-                throw new UncheckedIOException(\"error listing file descriptors\", ioe);\n-            }\n-        });\n-    }\n-}\n","filename":"jdk\/test\/lib\/jdk\/test\/lib\/util\/FileUtils.java","additions":0,"deletions":276,"binary":false,"changes":276,"status":"deleted"},{"patch":"@@ -71,1 +71,7 @@\n-    private static void removeFromDisabledAlgs(String prop, List<String> algs) {\n+    \/**\n+     * Removes constraints that contain the specified constraint from the\n+     * specified security property. For example, List.of(\"SHA1\") will remove\n+     * any constraint containing \"SHA1\".\n+     *\/\n+    public static void removeFromDisabledAlgs(String prop,\n+            List<String> constraints) {\n@@ -75,1 +81,2 @@\n-                      .filter(s -> !algs.contains(s))\n+                      .filter(s -> constraints.stream()\n+                          .allMatch(constraint -> !s.contains(constraint)))\n","filename":"jdk\/test\/lib\/security\/SecurityUtils.java","additions":9,"deletions":2,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -0,0 +1,271 @@\n+\/*\n+ * Copyright (c) 2003, 2022, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 4975116 7040022 8023577 8025447 8286624\n+ * @key headful\n+ * @summary verify the rounding of negative coordinates in Shape objects\n+ * @run main\/othervm CoordinateTruncationBug\n+ *\/\n+\n+import java.awt.Frame;\n+import java.awt.Canvas;\n+import java.awt.Graphics;\n+import java.awt.Graphics2D;\n+import java.awt.Robot;\n+import java.awt.Rectangle;\n+import java.awt.Point;\n+import java.awt.Dimension;\n+import java.awt.Color;\n+import java.awt.AWTException;\n+import java.awt.geom.Line2D;\n+import java.awt.image.BufferedImage;\n+import java.awt.image.VolatileImage;\n+\n+public class CoordinateTruncationBug {\n+    static boolean failure;\n+    static boolean verbose;\n+\n+    static final int W = 80;\n+    static final int H = 80;\n+\n+    static final Line2D vertline = new Line2D.Float(-0.7f, 0f, -0.7f, H);\n+    static final Line2D horizline = new Line2D.Float(0f, -0.7f, W, -0.7f);\n+\n+    public static void main(String argv[]) {\n+        verbose = (argv.length > 0);\n+        new Screen().test();\n+        new BufImg().test();\n+        new VolImg().test();\n+        if (failure) {\n+            throw new RuntimeException(\"Test failed due to 1 or more failures\");\n+        }\n+    }\n+\n+    public static abstract class Test {\n+        public abstract String getName();\n+        public abstract void makeDest();\n+        public abstract void runTest();\n+        public abstract void dispose();\n+        public abstract BufferedImage getSnapshot();\n+\n+        public void test() {\n+            makeDest();\n+            runTest();\n+            dispose();\n+        }\n+\n+        public void runTest(Graphics2D g2d) {\n+            g2d.setColor(Color.white);\n+            g2d.fillRect(0, 0, W, H);\n+\n+            if (!checkAllWhite()) {\n+                System.err.println(\"Aborting test of \"+getName()+\n+                                   \" due to readback failure!\");\n+                return;\n+            }\n+\n+            g2d.setColor(Color.red);\n+            g2d.draw(vertline);\n+            g2d.draw(horizline);\n+            if (!checkAllWhite()) {\n+                System.err.println(getName()+\" failed!\");\n+                failure = true;\n+            }\n+        }\n+\n+        public boolean checkAllWhite() {\n+            BufferedImage bimg = getSnapshot();\n+            if (bimg == null) {\n+                System.err.println(getName()+\" returned null snapshot!\");\n+                return false;\n+            }\n+            boolean ret = true;\n+            for (int y = 0; y < H; y++) {\n+                for (int x = 0; x < W; x++) {\n+                    int rgb = bimg.getRGB(x, y);\n+                    if (rgb != -1) {\n+                        System.err.println(getName()+\"(\"+x+\", \"+y+\") == \"+\n+                                           Integer.toHexString(rgb));\n+                        if (verbose) {\n+                            ret = false;\n+                        } else {\n+                            return false;\n+                        }\n+                    }\n+                }\n+            }\n+            return ret;\n+        }\n+    }\n+\n+    public static class Screen extends Test {\n+        Frame frame;\n+        TestCanvas canvas;\n+\n+        public String getName() {\n+            return \"Screen\";\n+        }\n+\n+        public void makeDest() {\n+            frame = new Frame(\"Screen test\");\n+            frame.setUndecorated(true);\n+            canvas = new TestCanvas(this);\n+            frame.add(canvas);\n+            frame.pack();\n+            frame.setLocationRelativeTo(null);\n+        }\n+\n+        public void runTest() {\n+            frame.show();\n+            canvas.waitForTest();\n+        }\n+\n+        public Graphics2D createGraphics() {\n+            return null;\n+        }\n+\n+        public BufferedImage getSnapshot() {\n+            \/\/ bypass window animation\n+            try {\n+                Thread.sleep(500);\n+            } catch (InterruptedException e) {\n+            };\n+\n+            try {\n+                Robot r = new Robot();\n+                Point p = canvas.getLocationOnScreen();\n+                return r.createScreenCapture(new Rectangle(p.x, p.y, W, H));\n+            } catch (AWTException e) {\n+                return null;\n+            }\n+        }\n+\n+        public void dispose() {\n+            frame.hide();\n+            frame.dispose();\n+        }\n+\n+        public static class TestCanvas extends Canvas {\n+            Test test;\n+            boolean done;\n+\n+            public TestCanvas(Test test) {\n+                this.test = test;\n+            }\n+\n+            public Dimension getPreferredSize() {\n+                return new Dimension(W, H);\n+            }\n+\n+            public synchronized void waitForTest() {\n+                while (!done) {\n+                    try {\n+                        wait();\n+                    } catch (InterruptedException e) {\n+                        System.err.println(getName()+\" interrupted!\");\n+                        failure = true;\n+                        break;\n+                    }\n+                }\n+            }\n+\n+            public void paint(Graphics g) {\n+                if (!done) {\n+                    test.runTest((Graphics2D) g);\n+                    notifyDone();\n+                }\n+            }\n+\n+            public synchronized void notifyDone() {\n+                done = true;\n+                notifyAll();\n+            }\n+        }\n+    }\n+\n+    public abstract static class Standalone extends Test {\n+        public abstract Graphics2D createGraphics();\n+\n+        public void runTest() {\n+            Graphics2D g2d = createGraphics();\n+            runTest(g2d);\n+            g2d.dispose();\n+        }\n+    }\n+\n+    public static class BufImg extends Standalone {\n+        public BufferedImage bimg;\n+\n+        public String getName() {\n+            return \"BufferedImage\";\n+        }\n+\n+        public void makeDest() {\n+            bimg = new BufferedImage(W, H, BufferedImage.TYPE_INT_RGB);\n+        }\n+\n+        public Graphics2D createGraphics() {\n+            return bimg.createGraphics();\n+        }\n+\n+        public BufferedImage getSnapshot() {\n+            return bimg;\n+        }\n+\n+        public void dispose() {\n+        }\n+    }\n+\n+    public static class VolImg extends Standalone {\n+        Frame frame;\n+        VolatileImage vimg;\n+\n+        public String getName() {\n+            return \"VolatileImage\";\n+        }\n+\n+        public void makeDest() {\n+            frame = new Frame();\n+            frame.setSize(W, H);\n+            frame.setLocationRelativeTo(null);\n+            frame.show();\n+            vimg = frame.createVolatileImage(W, H);\n+        }\n+\n+        public Graphics2D createGraphics() {\n+            return vimg.createGraphics();\n+        }\n+\n+        public BufferedImage getSnapshot() {\n+            return vimg.getSnapshot();\n+        }\n+\n+        public void dispose() {\n+            vimg.flush();\n+            frame.hide();\n+            frame.dispose();\n+        }\n+    }\n+}\n","filename":"jdk\/test\/sun\/java2d\/SunGraphics2D\/CoordinateTruncationBug.java","additions":271,"deletions":0,"binary":false,"changes":271,"status":"added"},{"patch":"@@ -0,0 +1,160 @@\n+\/*\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/*\n+ * @test\n+ * @bug 8270344\n+ * @library \/lib\/security \/javax\/net\/ssl\/templates\n+ * @summary Session resumption errors\n+ * @run main\/othervm InvalidateSession\n+ *\/\n+\n+import javax.net.*;\n+import javax.net.ssl.*;\n+import java.io.*;\n+import java.net.*;\n+import java.util.*;\n+\n+public class InvalidateSession implements SSLContextTemplate {\n+\n+    static ServerSocketFactory serverSsf = null;\n+    static SSLSocketFactory clientSsf = null;\n+\n+    static Server server;\n+    static SSLSession cacheSession;\n+    static final String[] CLIENT_VERSIONS = {\"TLSv1\", \"TLSv1.1\", \"TLSv1.2\"};\n+\n+    public static void main(String args[]) throws Exception {\n+        \/\/ drop the supported_versions extension to force test to use the legacy\n+        \/\/ TLS protocol version field during handshakes\n+        System.setProperty(\"jdk.tls.client.disableExtensions\", \"supported_versions\");\n+        SecurityUtils.removeFromDisabledTlsAlgs(\"TLSv1\", \"TLSv1.1\");\n+\n+        InvalidateSession test = new InvalidateSession();\n+        test.sessionTest();\n+        server.go = false;\n+    }\n+\n+    \/**\n+     * 3 test iterations\n+     * 1) Server configured with TLSv1, client with TLSv1, v1.1, v1.2\n+     * - Handshake should succeed\n+     * - Session \"A\" established\n+     * 2) 2nd iteration, server configured with TLSv1.2 only\n+     * - Connection should succeed but with a new session due to TLS protocol version change\n+     * - Session \"A\" should be invalidated\n+     * - Session \"B\" is created\n+     * 3) 3rd iteration, same server\/client config\n+     * - Session \"B\" should continue to be in use\n+     *\/\n+    private void sessionTest() throws Exception {\n+        serverSsf = createServerSSLContext().getServerSocketFactory();\n+        clientSsf = createClientSSLContext().getSocketFactory();\n+        server = startServer();\n+        while (!server.started) {\n+            Thread.yield();\n+        }\n+\n+        for (int i = 1; i <= 3; i++) {\n+            clientConnect(i);\n+            Thread.sleep(1000);\n+        }\n+    }\n+\n+    public void clientConnect(int testIterationCount) throws Exception {\n+        System.out.printf(\"Connecting to: localhost: %s, iteration count %d%n\",\n+                \"localhost:\" + server.port, testIterationCount);\n+        SSLSocket sslSocket = (SSLSocket) clientSsf.createSocket(\"localhost\", server.port);\n+        sslSocket.setEnabledProtocols(CLIENT_VERSIONS);\n+        sslSocket.startHandshake();\n+\n+        System.out.println(\"Got session: \" + sslSocket.getSession());\n+\n+        if (testIterationCount == 2 && Objects.equals(cacheSession, sslSocket.getSession())) {\n+            throw new RuntimeException(\"Same session should not have resumed\");\n+        }\n+        if (testIterationCount == 3 && !Objects.equals(cacheSession, sslSocket.getSession())) {\n+            throw new RuntimeException(\"Same session should have resumed\");\n+        }\n+\n+        cacheSession = sslSocket.getSession();\n+\n+        try (\n+        ObjectOutputStream oos = new ObjectOutputStream(sslSocket.getOutputStream());\n+        ObjectInputStream ois = new ObjectInputStream(sslSocket.getInputStream())) {\n+            oos.writeObject(\"Hello\");\n+            String serverMsg = (String) ois.readObject();\n+            System.out.println(\"Server message : \" + serverMsg);\n+        } catch (Exception ex) {\n+            throw new RuntimeException(ex);\n+        } finally {\n+            sslSocket.close();\n+        }\n+    }\n+\n+    private static Server startServer() {\n+        Server server = new Server();\n+        new Thread(server).start();\n+        return server;\n+    }\n+\n+    private static class Server implements Runnable {\n+        public volatile boolean go = true;\n+        public volatile int port = 0;\n+        public volatile boolean started = false;\n+\n+        @Override\n+        public void run() {\n+            try {\n+                SSLServerSocket ssock = (SSLServerSocket)\n+                        serverSsf.createServerSocket(0);\n+                this.port = ssock.getLocalPort();\n+                ssock.setEnabledProtocols(new String[]{\"TLSv1\"});\n+                started = true;\n+                while (go) {\n+                    try {\n+                        System.out.println(\"Waiting for connection\");\n+                        Socket sock = ssock.accept();\n+                        \/\/ now flip server to TLSv1.2 mode for successive connections\n+                        ssock.setEnabledProtocols(new String[]{\"TLSv1.2\"});\n+                        try (\n+                        ObjectInputStream ois = new ObjectInputStream(sock.getInputStream());\n+                        ObjectOutputStream oos = new ObjectOutputStream(sock.getOutputStream())) {\n+                            String recv = (String) ois.readObject();\n+                            oos.writeObject(\"Received: \" + recv);\n+                        } catch (SSLHandshakeException she) {\n+                            System.out.println(\"Server caught :\" + she);\n+                        } finally {\n+                            sock.close();\n+                        }\n+                    } catch (Exception ex) {\n+                        throw new RuntimeException(ex);\n+                    }\n+                }\n+            } catch (Exception ex) {\n+                throw new RuntimeException(ex);\n+            }\n+        }\n+    }\n+}\n+\n","filename":"jdk\/test\/sun\/security\/ssl\/SSLSessionImpl\/InvalidateSession.java","additions":160,"deletions":0,"binary":false,"changes":160,"status":"added"},{"patch":"@@ -0,0 +1,2 @@\n+# Re-enable SHA-1 since OldSig.java test uses it\n+jdk.jar.disabledAlgorithms=MD2,MD5,RSA keySize < 1024,DSA keySize < 1024\n","filename":"jdk\/test\/sun\/security\/tools\/jarsigner\/OldSig.props","additions":2,"deletions":0,"binary":false,"changes":2,"status":"added"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2005, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2005, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,0 +28,2 @@\n+ * @library \/lib\/security\n+ * @run main\/othervm Test4431684\n@@ -33,0 +35,1 @@\n+import java.security.*;\n@@ -38,0 +41,3 @@\n+        \/\/ Re-enable SHA1 since JavaApplication1.jar uses it\n+        SecurityUtils.removeFromDisabledAlgs(\"jdk.jar.disabledAlgorithms\",\n+            Arrays.asList(new String[]{\"SHA1\"}));\n","filename":"jdk\/test\/sun\/security\/tools\/jarsigner\/Test4431684.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -70,1 +70,1 @@\n- *      8180289 8172404\n+ *      8180289 8172404 8269039\n@@ -205,0 +205,3 @@\n+            } else if (path.equals(\"tsbefore2019\")) {\n+                \/\/ Saturday, August 18, 2018 7:04:58 PM\n+                instant = Instant.ofEpochSecond(1534619098l);\n@@ -352,0 +355,11 @@\n+                \/\/ should not be disabled because timestamped before 2019\n+                signVerbose(\"tsbefore2019\", \"unsigned.jar\", \"tsbefore2019.jar\", \"pre2019signer\",\n+                        \"-digestalg\", \"SHA-1\")\n+                        .shouldHaveExitValue(4);\n+\n+                verify(\"tsbefore2019.jar\", \"-verbose\")\n+                        .shouldHaveExitValue(0)\n+                        .shouldMatch(\"Digest.*SHA-1.*(weak)\")\n+                        .shouldMatch(\"signer certificate expired on .*. \"\n+                                + \"However, the JAR will be valid\");\n+\n@@ -425,1 +439,1 @@\n-                \/\/ Legacy algorithms\n+                \/\/ Disabled algorithms\n@@ -427,10 +441,9 @@\n-                        \"-strict\", \"-digestalg\", \"SHA-1\")\n-                        .shouldHaveExitValue(0)\n-                        .shouldContain(\"jar signed, with signer errors\")\n-                        .shouldMatch(\"SHA-1.*-digestalg.*will be disabled\");\n-                verify(\"sha1alg.jar\", \"-strict\")\n-                        .shouldHaveExitValue(0)\n-                        .shouldContain(\"jar verified, with signer errors\")\n-                        .shouldContain(\"SHA-1 digest algorithm is considered a security risk\")\n-                        .shouldContain(\"This algorithm will be disabled in a future update\")\n-                        .shouldNotContain(\"is disabled\");\n+                        \"-digestalg\", \"SHA-1\")\n+                        .shouldHaveExitValue(4)\n+                        .shouldContain(\"jar signed\")\n+                        .shouldContain(\"with signer errors\")\n+                        .shouldMatch(\"SHA-1.*-digestalg.*is disabled\");\n+                verify(\"sha1alg.jar\", \"-verbose\")\n+                        .shouldHaveExitValue(16)\n+                        .shouldContain(\"treated as unsigned\")\n+                        .shouldMatch(\"Digest.*SHA-1.*(disabled)\");\n@@ -439,9 +452,8 @@\n-                        .shouldHaveExitValue(0)\n-                        .shouldContain(\"jar signed, with signer errors\")\n-                        .shouldMatch(\"SHA-1.*-tsadigestalg.*will be disabled\")\n-                        .shouldNotContain(\"is disabled\");\n-                verify(\"sha1tsaalg.jar\", \"-strict\")\n-                        .shouldHaveExitValue(0)\n-                        .shouldContain(\"jar verified, with signer errors\")\n-                        .shouldContain(\"SHA-1 digest algorithm is considered a security risk\")\n-                        .shouldNotContain(\"is disabled\");\n+                        .shouldHaveExitValue(4)\n+                        .shouldContain(\"jar signed\")\n+                        .shouldContain(\"with signer errors\")\n+                        .shouldMatch(\"SHA-1.*-tsadigestalg.*is disabled\");\n+                verify(\"sha1tsaalg.jar\", \"-verbose\")\n+                        .shouldHaveExitValue(16)\n+                        .shouldContain(\"treated as unsigned\")\n+                        .shouldMatch(\"Timestamp.*digest.*SHA-1.*(disabled)\");\n@@ -449,1 +461,0 @@\n-                \/\/ Disabled algorithms\n@@ -486,1 +497,1 @@\n-                \/\/ Legacy algorithms\n+                \/\/ Disabled algorithms\n@@ -489,5 +500,10 @@\n-                        .shouldHaveExitValue(0)\n-                        .shouldMatch(\"SHA1.*-digestalg.*will be disabled\")\n-                        .shouldMatch(\"SHA1.*-tsadigestalg.*will be disabled\")\n-                        .shouldMatch(\"SHA1withRSA.*-sigalg.*will be disabled\");\n-                checkWeak(\"tsweak.jar\");\n+                        .shouldHaveExitValue(4)\n+                        .shouldMatch(\"SHA1.*-digestalg.*is disabled\")\n+                        .shouldMatch(\"SHA1.*-tsadigestalg.*is disabled\")\n+                        .shouldMatch(\"SHA1withRSA.*-sigalg.*is disabled\");\n+                verify(\"tsweak.jar\", \"-verbose\")\n+                        .shouldHaveExitValue(16)\n+                        .shouldContain(\"treated as unsigned\")\n+                        .shouldMatch(\"Digest algorithm: .*(disabled)\")\n+                        .shouldMatch(\"Signature algorithm: .*(disabled)\")\n+                        .shouldMatch(\"Timestamp digest algorithm: .*(disabled)\");\n@@ -495,0 +511,1 @@\n+                \/\/ Legacy algorithms (1024-bit key)\n@@ -503,1 +520,1 @@\n-                \/\/ Algorithm used in signing is weak\n+                \/\/ Algorithm used in signing is disabled\n@@ -506,4 +523,6 @@\n-                        .shouldContain(\"-digestalg option is considered a security risk.\")\n-                        .shouldContain(\"This algorithm will be disabled in a future update.\")\n-                        .shouldHaveExitValue(0);\n-                checkHalfWeak(\"halfWeak.jar\");\n+                        .shouldContain(\"-digestalg option is considered a security risk and is disabled.\")\n+                        .shouldHaveExitValue(4);\n+                verify(\"halfWeak.jar\", \"-verbose\")\n+                        .shouldHaveExitValue(16)\n+                        .shouldContain(\"treated as unsigned\")\n+                        .shouldMatch(\"Digest algorithm: .*(disabled)\");\n@@ -942,0 +961,1 @@\n+        keytool(\"-alias pre2019signer -genkeypair -dname CN=pre2019signer\");\n@@ -948,0 +968,1 @@\n+        keytool(\"-alias tsbefore2019 -genkeypair -dname CN=tsbefore2019\");\n@@ -971,0 +992,1 @@\n+        gencert(\"pre2019signer\", \"-startdate 2018\/06\/01 -validity 365\");\n@@ -1004,0 +1026,1 @@\n+        gencert(\"tsbefore2019\", \"-ext eku:critical=ts -startdate 2018\/01\/01 -validity 3000\");\n","filename":"jdk\/test\/sun\/security\/tools\/jarsigner\/TimestampCheck.java","additions":57,"deletions":34,"binary":false,"changes":91,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2010, 2012, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2010, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -91,1 +91,1 @@\n-    -digestalg SHA1 \\\n+    -digestalg SHA-256 \\\n@@ -105,1 +105,1 @@\n-    -digestalg SHA1 \\\n+    -digestalg SHA-256 \\\n","filename":"jdk\/test\/sun\/security\/tools\/jarsigner\/diffend.sh","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -73,0 +73,3 @@\n+PROP_ARGS=\" -J-Djava.security.properties=${TESTSRC}${FS}OldSig.props\"\n+KS_ARGS=\"-keystore ${TESTSRC}${FS}JarSigning.keystore -storepass bbbbbb\"\n+\n@@ -75,2 +78,1 @@\n-    -keystore ${TESTSRC}${FS}JarSigning.keystore \\\n-    -storepass bbbbbb \\\n+    ${KS_ARGS} \\\n@@ -79,1 +81,6 @@\n-${TESTJAVA}${FS}bin${FS}jarsigner -verify B.jar\n+\n+JAR_VERIFY_CMD=\"${TESTJAVA}${FS}bin${FS}jarsigner -verify ${KS_ARGS} ${PROP_ARGS} -verbose B.jar\"\n+echo ${JAR_VERIFY_CMD}\n+LINES=`${JAR_VERIFY_CMD} | grep smk | grep B.class | wc -l`\n+[ $LINES = 1 ] || exit 1\n+\n","filename":"jdk\/test\/sun\/security\/tools\/jarsigner\/oldsig.sh","additions":10,"deletions":3,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -332,1 +332,2 @@\n-        test_ks.load(new FileInputStream(new File(\"ks\")),\n+        FileInputStream inputStream = new FileInputStream(new File(\"ks\"));\n+        test_ks.load(inputStream,\n@@ -336,0 +337,1 @@\n+        inputStream.close();\n@@ -343,1 +345,2 @@\n-        test_ks.load(new FileInputStream(new File(\"ks\")),\n+        inputStream = new FileInputStream(new File(\"ks\"));\n+        test_ks.load(inputStream,\n@@ -347,0 +350,1 @@\n+        inputStream.close();\n@@ -349,1 +353,2 @@\n-        test_ks.load(new FileInputStream(new File(\"ks.old6\")),\n+        inputStream = new FileInputStream(new File(\"ks.old6\"));\n+        test_ks.load(inputStream,\n@@ -353,0 +358,1 @@\n+        inputStream.close();\n","filename":"jdk\/test\/sun\/security\/tools\/keytool\/WeakAlg.java","additions":9,"deletions":3,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -176,0 +176,5 @@\n+             *\n+             * Tehran\/Iran rule has rules beyond 2037, in which javazic assumes\n+             * to be the last year. Thus javazic's rule is based on year 2037\n+             * (Mar 20th\/Sep 20th are the cutover dates), while the real rule\n+             * has year 2087 where Mar 21st\/Sep 21st are the cutover dates.\n@@ -177,3 +182,7 @@\n-            if (zid.equals(\"Africa\/Casablanca\") || zid.equals(\"Africa\/El_Aaiun\")\n-                || zid.equals(\"Asia\/Tehran\") || zid.equals(\"Iran\")) {\n-                continue;\n+            if (zid.equals(\"Africa\/Casablanca\") || \/\/ uses \"Morocco\" rule\n+                zid.equals(\"Africa\/El_Aaiun\") || \/\/ uses \"Morocco\" rule\n+                zid.equals(\"Asia\/Tehran\") || \/\/ last rule mismatch\n+                zid.equals(\"Asia\/Gaza\") || \/\/ uses \"Palestine\" rule\n+                zid.equals(\"Asia\/Hebron\") || \/\/ uses \"Palestine\" rule\n+                zid.equals(\"Iran\")) { \/\/ last rule mismatch\n+                    continue;\n","filename":"jdk\/test\/sun\/util\/calendar\/zi\/TestZoneInfo310.java","additions":12,"deletions":3,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -24,1 +24,1 @@\n-tzdata2022c\n+tzdata2022e\n","filename":"jdk\/test\/sun\/util\/calendar\/zi\/tzdata\/VERSION","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2257,0 +2257,11 @@\n+# From Issam Al-Zuwairi (2022-10-05):\n+# The Council of Ministers in Jordan decided Wednesday 5th October 2022,\n+# that daylight saving time (DST) will be throughout the year....\n+#\n+# From Brian Inglis (2022-10-06):\n+# https:\/\/petra.gov.jo\/Include\/InnerPage.jsp?ID=45567&lang=en&name=en_news\n+#\n+# From Paul Eggert (2022-10-05):\n+# Like Syria, model this as a transition from EEST +03 (DST) to plain +03\n+# (non-DST) at the point where DST would otherwise have ended.\n+\n@@ -2288,2 +2299,2 @@\n-Rule\tJordan\t2014\tmax\t-\tOct\tlastFri\t0:00s\t0\t-\n-Rule\tJordan\t2022\tmax\t-\tFeb\tlastThu\t24:00\t1:00\tS\n+Rule\tJordan\t2014\t2022\t-\tOct\tlastFri\t0:00s\t0\t-\n+Rule\tJordan\t2022\tonly\t-\tFeb\tlastThu\t24:00\t1:00\tS\n@@ -2292,1 +2303,2 @@\n-\t\t\t2:00\tJordan\tEE%sT\n+\t\t\t2:00\tJordan\tEE%sT\t2022 Oct 28 0:00s\n+\t\t\t3:00\t-\t+03\n@@ -3401,4 +3413,0 @@\n-#\n-# From Paul Eggert (2019-04-10):\n-# For now, guess spring-ahead transitions are at 00:00 on the Saturday\n-# preceding March's last Sunday (i.e., Sat>=24).\n@@ -3421,0 +3429,12 @@\n+# From Heba Hamad (2022-08-30):\n+# winter time will begin in Palestine from Saturday 10-29, 02:00 AM by\n+# 60 minutes backwards.  Also the state of Palestine adopted the summer\n+# and winter time for the years: 2023,2024,2025,2026 ...\n+# https:\/\/mm.icann.org\/pipermail\/tz\/attachments\/20220830\/9f024566\/Time-0001.pdf\n+# (2022-08-31): ... the Saturday before the last Sunday in March and October\n+# at 2:00 AM ,for the years from 2023 to 2026.\n+# (2022-09-05): https:\/\/mtit.pna.ps\/Site\/New\/1453\n+#\n+# From Paul Eggert (2022-08-31):\n+# For now, assume that this rule will also be used after 2026.\n+\n@@ -3451,2 +3471,2 @@\n-Rule Palestine\t2016\t2018\t-\tMar\tSat>=24\t1:00\t1:00\tS\n-Rule Palestine\t2016\t2018\t-\tOct\tSat>=24\t1:00\t0\t-\n+Rule Palestine\t2016\t2018\t-\tMar\tSat<=30\t1:00\t1:00\tS\n+Rule Palestine\t2016\t2018\t-\tOct\tSat<=30\t1:00\t0\t-\n@@ -3454,2 +3474,2 @@\n-Rule Palestine\t2019\tonly\t-\tOct\tSat>=24\t0:00\t0\t-\n-Rule Palestine\t2020\t2021\t-\tMar\tSat>=24\t0:00\t1:00\tS\n+Rule Palestine\t2019\tonly\t-\tOct\tSat<=30\t0:00\t0\t-\n+Rule Palestine\t2020\t2021\t-\tMar\tSat<=30\t0:00\t1:00\tS\n@@ -3457,2 +3477,4 @@\n-Rule Palestine\t2021\tmax\t-\tOct\tFri>=23\t1:00\t0\t-\n-Rule Palestine\t2022\tmax\t-\tMar\tSun>=25\t0:00\t1:00\tS\n+Rule Palestine\t2021\tonly\t-\tOct\t29\t1:00\t0\t-\n+Rule Palestine\t2022\tonly\t-\tMar\t27\t0:00\t1:00\tS\n+Rule Palestine\t2022\tmax\t-\tOct\tSat<=30\t2:00\t0\t-\n+Rule Palestine\t2023\tmax\t-\tMar\tSat<=30\t2:00\t1:00\tS\n@@ -3831,2 +3853,9 @@\n-# From Arthur David Olson (2012-03-27):\n-# Assume last Friday in March going forward XXX.\n+# From Steffen Thorsen (2022-10-05):\n+# Syria is adopting year-round DST, starting this autumn....\n+# From https:\/\/www.enabbaladi.net\/archives\/607812\n+# \"This [the decision] came after the weekly government meeting today,\n+# Tuesday 4 October ...\"\n+#\n+# From Paul Eggert (2022-10-05):\n+# Like Jordan, model this as a transition from EEST +03 (DST) to plain +03\n+# (non-DST) at the point where DST would otherwise have ended.\n@@ -3838,2 +3867,2 @@\n-Rule\tSyria\t2012\tmax\t-\tMar\tlastFri\t0:00\t1:00\tS\n-Rule\tSyria\t2009\tmax\t-\tOct\tlastFri\t0:00\t0\t-\n+Rule\tSyria\t2012\t2022\t-\tMar\tlastFri\t0:00\t1:00\tS\n+Rule\tSyria\t2009\t2022\t-\tOct\tlastFri\t0:00\t0\t-\n@@ -3843,1 +3872,2 @@\n-\t\t\t2:00\tSyria\tEE%sT\n+\t\t\t2:00\tSyria\tEE%sT\t2022 Oct 28 0:00\n+\t\t\t3:00\t-\t+03\n","filename":"jdk\/test\/sun\/util\/calendar\/zi\/tzdata\/asia","additions":48,"deletions":18,"binary":false,"changes":66,"status":"modified"},{"patch":"@@ -116,0 +116,2 @@\n+Link\tEurope\/Kyiv\t\tEurope\/Uzhgorod\n+Link\tEurope\/Kyiv\t\tEurope\/Zaporozhye\n","filename":"jdk\/test\/sun\/util\/calendar\/zi\/tzdata\/backward","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2641,4 +2641,8 @@\n-# From Paul Eggert (2014-03-30):\n-# Simferopol and Sevastopol reportedly changed their central town clocks\n-# late the previous day, but this appears to have been ceremonial\n-# and the discrepancies are small enough to not worry about.\n+# From Tim Parenti (2022-07-01), per Paul Eggert (2014-03-30):\n+# The clocks at the railway station in Simferopol were put forward from 22:00\n+# to 24:00 the previous day in a \"symbolic ceremony\"; however, per\n+# contemporaneous news reports, \"ordinary Crimeans [made] the daylight savings\n+# time switch at 2am\" on Sunday.\n+# https:\/\/www.business-standard.com\/article\/pti-stories\/crimea-to-set-clocks-to-russia-time-114033000014_1.html\n+# https:\/\/www.reuters.com\/article\/us-ukraine-crisis-crimea-time\/crimea-switches-to-moscow-time-amid-incorporation-frenzy-idUKBREA2S0LT20140329\n+# https:\/\/www.bbc.com\/news\/av\/world-europe-26806583\n@@ -3416,1 +3420,1 @@\n-Zone\tAfrica\/Ceuta\t-0:21:16 -\tLMT\t1900 Dec 31 23:38:44\n+Zone\tAfrica\/Ceuta\t-0:21:16 -\tLMT\t1901 Jan  1  0:00u\n@@ -3777,2 +3781,2 @@\n-# From Paul Eggert (2022-02-08):\n-# For now, assume that Ukraine's other three zones followed the same rules,\n+# From Paul Eggert (2022-08-27):\n+# For now, assume that Ukraine's zones all followed the same rules,\n@@ -3848,13 +3852,0 @@\n-# From Paul Eggert (2022-04-12):\n-# As is usual in tzdb, Ukrainian zones use the most common English spellings.\n-# In particular, tzdb's name Europe\/Kyiv uses the most common spelling in\n-# English for Ukraine's capital.  Although tzdb's former name was Europe\/Kiev,\n-# \"Kyiv\" is now more common due to widespread reporting of the current conflict.\n-# Conversely, tzdb continues to use the names Europe\/Uzhgorod and\n-# Europe\/Zaporozhye; this is similar to tzdb's use of Europe\/Prague, which is\n-# certainly wrong as a transliteration of the Czech \"Praha\".\n-# English-language spelling of Ukrainian names is in flux, and\n-# some day \"Uzhhorod\" or \"Zaporizhzhia\" may become substantially more\n-# common in English; in the meantime, do not change these\n-# English spellings as that means less disruption for our users.\n-\n@@ -3862,1 +3853,0 @@\n-# This represents most of Ukraine.  See above for the spelling of \"Kyiv\".\n@@ -3871,28 +3861,0 @@\n-\t\t\t2:00\tEU\tEE%sT\n-# Transcarpathia used CET 1990\/1991.\n-# \"Uzhhorod\" is the transliteration of the Rusyn\/Ukrainian pronunciation, but\n-# \"Uzhgorod\" is more common in English.\n-Zone Europe\/Uzhgorod\t1:29:12 -\tLMT\t1890 Oct\n-\t\t\t1:00\t-\tCET\t1940\n-\t\t\t1:00\tC-Eur\tCE%sT\t1944 Oct\n-\t\t\t1:00\t1:00\tCEST\t1944 Oct 26\n-\t\t\t1:00\t-\tCET\t1945 Jun 29\n-\t\t\t3:00\tRussia\tMSK\/MSD\t1990\n-\t\t\t3:00\t-\tMSK\t1990 Jul  1  2:00\n-\t\t\t1:00\t-\tCET\t1991 Mar 31  3:00\n-\t\t\t2:00\t-\tEET\t1992 Mar 20\n-\t\t\t2:00\tC-Eur\tEE%sT\t1996 May 13\n-\t\t\t2:00\tEU\tEE%sT\n-# Zaporozh'ye and eastern Lugansk oblasts observed DST 1990\/1991.\n-# \"Zaporizhzhia\" is the transliteration of the Ukrainian name, but\n-# \"Zaporozh'ye\" is more common in English.  Use the common English\n-# spelling, except omit the apostrophe as it is not allowed in\n-# portable Posix file names.\n-Zone Europe\/Zaporozhye\t2:20:40 -\tLMT\t1880\n-\t\t\t2:20\t-\t+0220\t1924 May  2\n-\t\t\t2:00\t-\tEET\t1930 Jun 21\n-\t\t\t3:00\t-\tMSK\t1941 Aug 25\n-\t\t\t1:00\tC-Eur\tCE%sT\t1943 Oct 25\n-\t\t\t3:00\tRussia\tMSK\/MSD\t1991 Mar 31  2:00\n-\t\t\t2:00\tE-Eur\tEE%sT\t1992 Mar 20\n-\t\t\t2:00\tC-Eur\tEE%sT\t1996 May 13\n","filename":"jdk\/test\/sun\/util\/calendar\/zi\/tzdata\/europe","additions":11,"deletions":49,"binary":false,"changes":60,"status":"modified"},{"patch":"@@ -465,1 +465,1 @@\n-Zone America\/Chicago\t-5:50:36 -\tLMT\t1883 Nov 18 12:09:24\n+Zone America\/Chicago\t-5:50:36 -\tLMT\t1883 Nov 18 18:00u\n@@ -474,1 +474,1 @@\n-Zone America\/North_Dakota\/Center -6:45:12 - LMT\t1883 Nov 18 12:14:48\n+Zone America\/North_Dakota\/Center -6:45:12 - LMT\t1883 Nov 18 19:00u\n@@ -484,1 +484,1 @@\n-Zone America\/North_Dakota\/New_Salem -6:45:39 - LMT\t1883 Nov 18 12:14:21\n+Zone America\/North_Dakota\/New_Salem -6:45:39 - LMT 1883 Nov 18 19:00u\n@@ -501,1 +501,1 @@\n-Zone America\/North_Dakota\/Beulah -6:47:07 - LMT\t1883 Nov 18 12:12:53\n+Zone America\/North_Dakota\/Beulah -6:47:07 - LMT\t1883 Nov 18 19:00u\n@@ -533,1 +533,1 @@\n-Zone America\/Denver\t-6:59:56 -\tLMT\t1883 Nov 18 12:00:04\n+Zone America\/Denver\t-6:59:56 -\tLMT\t1883 Nov 18 19:00u\n@@ -586,1 +586,1 @@\n-Zone America\/Los_Angeles -7:52:58 -\tLMT\t1883 Nov 18 12:07:02\n+Zone America\/Los_Angeles -7:52:58 -\tLMT\t1883 Nov 18 20:00u\n@@ -848,1 +848,1 @@\n-Zone America\/Phoenix\t-7:28:18 -\tLMT\t1883 Nov 18 11:31:42\n+Zone America\/Phoenix\t-7:28:18 -\tLMT\t1883 Nov 18 19:00u\n@@ -876,1 +876,1 @@\n-Zone America\/Boise\t-7:44:49 -\tLMT\t1883 Nov 18 12:15:11\n+Zone America\/Boise\t-7:44:49 -\tLMT\t1883 Nov 18 20:00u\n@@ -948,1 +948,1 @@\n-Zone America\/Indiana\/Indianapolis -5:44:38 - LMT\t1883 Nov 18 12:15:22\n+Zone America\/Indiana\/Indianapolis -5:44:38 - LMT 1883 Nov 18 18:00u\n@@ -968,1 +968,1 @@\n-Zone America\/Indiana\/Marengo -5:45:23 -\tLMT\t1883 Nov 18 12:14:37\n+Zone America\/Indiana\/Marengo -5:45:23 -\tLMT\t1883 Nov 18 18:00u\n@@ -992,1 +992,1 @@\n-Zone America\/Indiana\/Vincennes -5:50:07 - LMT\t1883 Nov 18 12:09:53\n+Zone America\/Indiana\/Vincennes -5:50:07 - LMT\t1883 Nov 18 18:00u\n@@ -1012,1 +1012,1 @@\n-Zone America\/Indiana\/Tell_City -5:47:03 - LMT\t1883 Nov 18 12:12:57\n+Zone America\/Indiana\/Tell_City -5:47:03 - LMT\t1883 Nov 18 18:00u\n@@ -1029,1 +1029,1 @@\n-Zone America\/Indiana\/Petersburg -5:49:07 - LMT\t1883 Nov 18 12:10:53\n+Zone America\/Indiana\/Petersburg -5:49:07 - LMT\t1883 Nov 18 18:00u\n@@ -1051,1 +1051,1 @@\n-Zone America\/Indiana\/Knox -5:46:30 -\tLMT\t1883 Nov 18 12:13:30\n+Zone America\/Indiana\/Knox -5:46:30 -\tLMT\t1883 Nov 18 18:00u\n@@ -1067,1 +1067,1 @@\n-Zone America\/Indiana\/Winamac -5:46:25 - LMT\t1883 Nov 18 12:13:35\n+Zone America\/Indiana\/Winamac -5:46:25 - LMT\t1883 Nov 18 18:00u\n@@ -1078,1 +1078,1 @@\n-Zone America\/Indiana\/Vevay -5:40:16 -\tLMT\t1883 Nov 18 12:19:44\n+Zone America\/Indiana\/Vevay -5:40:16 -\tLMT\t1883 Nov 18 18:00u\n@@ -1114,1 +1114,1 @@\n-Zone America\/Kentucky\/Louisville -5:43:02 -\tLMT\t1883 Nov 18 12:16:58\n+Zone America\/Kentucky\/Louisville -5:43:02 - LMT\t1883 Nov 18 18:00u\n@@ -1148,1 +1148,1 @@\n-Zone America\/Kentucky\/Monticello -5:39:24 - LMT\t1883 Nov 18 12:20:36\n+Zone America\/Kentucky\/Monticello -5:39:24 - LMT\t1883 Nov 18 18:00u\n@@ -2643,0 +2643,2 @@\n+Rule\tMexico\t1931\tonly\t-\tMay\t1\t23:00\t1:00\tD\n+Rule\tMexico\t1931\tonly\t-\tOct\t1\t0:00\t0\tS\n@@ -2659,1 +2661,1 @@\n-Zone America\/Cancun\t-5:47:04 -\tLMT\t1922 Jan  1  0:12:56\n+Zone America\/Cancun\t-5:47:04 -\tLMT\t1922 Jan  1  6:00u\n@@ -2665,1 +2667,1 @@\n-Zone America\/Merida\t-5:58:28 -\tLMT\t1922 Jan  1  0:01:32\n+Zone America\/Merida\t-5:58:28 -\tLMT\t1922 Jan  1  6:00u\n@@ -2679,1 +2681,1 @@\n-Zone America\/Matamoros\t-6:40:00 -\tLMT\t1921 Dec 31 23:20:00\n+Zone America\/Matamoros\t-6:30:00 -\tLMT\t1922 Jan  1  6:00u\n@@ -2685,1 +2687,1 @@\n-Zone America\/Monterrey\t-6:41:16 -\tLMT\t1921 Dec 31 23:18:44\n+Zone America\/Monterrey\t-6:41:16 -\tLMT\t1922 Jan  1  6:00u\n@@ -2690,1 +2692,1 @@\n-Zone America\/Mexico_City -6:36:36 -\tLMT\t1922 Jan  1  0:23:24\n+Zone America\/Mexico_City -6:36:36 -\tLMT\t1922 Jan  1  7:00u\n@@ -2693,3 +2695,1 @@\n-\t\t\t-7:00\t-\tMST\t1931 May  1 23:00\n-\t\t\t-6:00\t-\tCST\t1931 Oct\n-\t\t\t-7:00\t-\tMST\t1932 Apr  1\n+\t\t\t-7:00\tMexico\tM%sT\t1932 Apr  1\n@@ -2703,1 +2703,1 @@\n-Zone America\/Ojinaga\t-6:57:40 -\tLMT\t1922 Jan  1  0:02:20\n+Zone America\/Ojinaga\t-6:57:40 -\tLMT\t1922 Jan  1  7:00u\n@@ -2706,3 +2706,1 @@\n-\t\t\t-7:00\t-\tMST\t1931 May  1 23:00\n-\t\t\t-6:00\t-\tCST\t1931 Oct\n-\t\t\t-7:00\t-\tMST\t1932 Apr  1\n+\t\t\t-7:00\tMexico\tM%sT\t1932 Apr  1\n@@ -2715,1 +2713,1 @@\n-Zone America\/Chihuahua\t-7:04:20 -\tLMT\t1921 Dec 31 23:55:40\n+Zone America\/Chihuahua\t-7:04:20 -\tLMT\t1922 Jan  1  7:00u\n@@ -2718,3 +2716,1 @@\n-\t\t\t-7:00\t-\tMST\t1931 May  1 23:00\n-\t\t\t-6:00\t-\tCST\t1931 Oct\n-\t\t\t-7:00\t-\tMST\t1932 Apr  1\n+\t\t\t-7:00\tMexico\tM%sT\t1932 Apr  1\n@@ -2726,1 +2722,1 @@\n-Zone America\/Hermosillo\t-7:23:52 -\tLMT\t1921 Dec 31 23:36:08\n+Zone America\/Hermosillo\t-7:23:52 -\tLMT\t1922 Jan  1  7:00u\n@@ -2729,3 +2725,1 @@\n-\t\t\t-7:00\t-\tMST\t1931 May  1 23:00\n-\t\t\t-6:00\t-\tCST\t1931 Oct\n-\t\t\t-7:00\t-\tMST\t1932 Apr  1\n+\t\t\t-7:00\tMexico\tM%sT\t1932 Apr  1\n@@ -2766,1 +2760,1 @@\n-Zone America\/Mazatlan\t-7:05:40 -\tLMT\t1921 Dec 31 23:54:20\n+Zone America\/Mazatlan\t-7:05:40 -\tLMT\t1922 Jan  1  7:00u\n@@ -2769,3 +2763,1 @@\n-\t\t\t-7:00\t-\tMST\t1931 May  1 23:00\n-\t\t\t-6:00\t-\tCST\t1931 Oct\n-\t\t\t-7:00\t-\tMST\t1932 Apr  1\n+\t\t\t-7:00\tMexico\tM%sT\t1932 Apr  1\n@@ -2778,1 +2770,1 @@\n-Zone America\/Bahia_Banderas\t-7:01:00 -\tLMT\t1921 Dec 31 23:59:00\n+Zone America\/Bahia_Banderas -7:01:00 -\tLMT\t1922 Jan  1  7:00u\n@@ -2781,3 +2773,1 @@\n-\t\t\t-7:00\t-\tMST\t1931 May  1 23:00\n-\t\t\t-6:00\t-\tCST\t1931 Oct\n-\t\t\t-7:00\t-\tMST\t1932 Apr  1\n+\t\t\t-7:00\tMexico\tM%sT\t1932 Apr  1\n@@ -2791,1 +2781,1 @@\n-Zone America\/Tijuana\t-7:48:04 -\tLMT\t1922 Jan  1  0:11:56\n+Zone America\/Tijuana\t-7:48:04 -\tLMT\t1922 Jan  1  7:00u\n","filename":"jdk\/test\/sun\/util\/calendar\/zi\/tzdata\/northamerica","additions":37,"deletions":47,"binary":false,"changes":84,"status":"modified"},{"patch":"@@ -1335,2 +1335,8 @@\n-# we will have a voting whether to approve a new Constitution....\n-# https:\/\/www.interior.gob.cl\/noticias\/2022\/08\/09\/comunicado-el-proximo-sabado-10-de-septiembre-los-relojes-se-deben-adelantar-una-hora\/\n+# we will have a voting whether to approve a new Constitution.\n+#\n+# From Eduardo Romero Urra (2022-08-17):\n+# https:\/\/www.diariooficial.interior.gob.cl\/publicaciones\/2022\/08\/13\/43327\/01\/2172567.pdf\n+#\n+# From Paul Eggert (2022-08-17):\n+# Although the presidential decree stops at fall 2026, assume that\n+# similar DST rules will continue thereafter.\n","filename":"jdk\/test\/sun\/util\/calendar\/zi\/tzdata\/southamerica","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -427,2 +427,0 @@\n-UA\t+4837+02218\tEurope\/Uzhgorod\tTranscarpathia\n-UA\t+4750+03510\tEurope\/Zaporozhye\tZaporozhye and east Lugansk\n","filename":"jdk\/test\/sun\/util\/calendar\/zi\/tzdata\/zone.tab","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n-# Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2019, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,1 +36,1 @@\n-MSVC_DIR=\"Microsoft.VC141.CRT\"\n+MSVC_DIR=\"Microsoft.VC142.CRT\"\n@@ -105,0 +105,1 @@\n+VCRUNTIME_1_DLL=${MSVC_DIR}\/vcruntime${VS_DLL_VERSION}_1.dll\n@@ -191,0 +192,1 @@\n+echo-info \"DEVKIT_VCRUNTIME_1_DLL_x86_64=\\\"\\$DEVKIT_ROOT\/VC\/redist\/x64\/$VCRUNTIME_1_DLL\\\"\"\n","filename":"make\/devkit\/createWindowsDevkit2019.sh","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"}]}