{"files":[{"patch":"@@ -0,0 +1,96 @@\n+\/*\n+ * Copyright (c) 2015, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+\/* @test\n+   @bug 4960629 7124238\n+   @summary  Tests if font for html text on widgets in correct.\n+   @author Denis Sharypov\n+   @run main bug4960629\n+*\/\n+\n+import java.awt.Font;\n+import java.lang.reflect.InvocationTargetException;\n+import javax.swing.JFrame;\n+import javax.swing.JLabel;\n+import javax.swing.SwingUtilities;\n+import javax.swing.UIManager;\n+import javax.swing.plaf.basic.BasicHTML;\n+import javax.swing.text.AttributeSet;\n+import javax.swing.text.View;\n+import javax.swing.text.html.StyleSheet;\n+import javax.swing.text.html.HTMLDocument;\n+\n+public class bug4960629 {\n+    private boolean passed = false;\n+    private JLabel label = null;\n+    private JFrame f = null;\n+\n+    public void createAndShowGUI() throws Exception {\n+        try {\n+            UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());\n+            label = new JLabel(\"<html><P>This is a test of the<\/P><\/html>\");\n+            System.out.println(\"UIManager.getLookAndFeel()\"\n+                   + UIManager.getLookAndFeel().getClass());\n+            f = new JFrame();\n+            f.getContentPane().add(label);\n+            f.pack();\n+            f.setVisible(true);\n+            test();\n+        } finally {\n+            f.dispose();\n+        }\n+    }\n+\n+    bug4960629() throws InvocationTargetException, InterruptedException {\n+        SwingUtilities.invokeAndWait(new Runnable() {\n+            @Override\n+            public void run() {\n+                try {\n+                    createAndShowGUI();\n+                } catch (Exception e) {\n+                    throw new RuntimeException(\"Exception \"\n+                              + e.getMessage());\n+                }\n+            }\n+        });\n+    }\n+\n+    private void test() {\n+        View root = ((View)label.getClientProperty(BasicHTML.propertyKey))\n+                .getView(0);\n+        int n = root.getViewCount();\n+        View v  = root.getView(n - 1);\n+        AttributeSet attrs = v.getAttributes();\n+        StyleSheet ss = ((HTMLDocument) v.getDocument()).getStyleSheet();\n+        Font font = ss.getFont(attrs);\n+        System.out.println(font.getSize());\n+        passed = (font.getSize() == 12);\n+        if(!passed) {\n+            throw new RuntimeException(\"Test failed.\");\n+        }\n+    }\n+\n+    public static void main(String args[]) throws Throwable {\n+        new bug4960629();\n+   }\n+}\n","filename":"jdk\/test\/javax\/swing\/plaf\/basic\/BasicHTML\/4960629\/bug4960629.java","additions":96,"deletions":0,"binary":false,"changes":96,"status":"added"}]}