{"files":[{"patch":"@@ -501,0 +501,2 @@\n+      # Corresponds to --with-vcruntime-1-dll\n+      BASIC_EVAL_DEVKIT_VARIABLE([DEVKIT_VCRUNTIME_1_DLL])\n","filename":"common\/autoconf\/basics.m4","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -611,0 +611,1 @@\n+VCRUNTIME_1_DLL:=@VCRUNTIME_1_DLL@\n","filename":"common\/autoconf\/spec.gmk.in","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -87,1 +87,1 @@\n-VS_VERSION_INTERNAL_2019=141\n+VS_VERSION_INTERNAL_2019=142\n@@ -89,0 +89,1 @@\n+VS_VCRUNTIME_1_2019=vcruntime140_1.dll\n@@ -282,0 +283,1 @@\n+    eval VCRUNTIME_1_NAME=\"\\${VS_VCRUNTIME_1_${VS_VERSION}}\"\n@@ -328,0 +330,1 @@\n+      eval VCRUNTIME_1_NAME=\"\\${VS_VCRUNTIME_1_${VS_VERSION}}\"\n@@ -663,0 +666,25 @@\n+  AC_ARG_WITH(vcruntime-1-dll, [AS_HELP_STRING([--with-vcruntime-1-dll],\n+      [path to microsoft C++ runtime dll (vcruntime*_1.dll) (Windows only) @<:@probed@:>@])])\n+\n+  if test \"x$VCRUNTIME_1_NAME\" != \"x\"; then\n+    if test \"x$with_vcruntime_1_dll\" != x; then\n+      # If given explicitly by user, do not probe. If not present, fail directly.\n+      TOOLCHAIN_CHECK_POSSIBLE_MSVC_DLL($VCRUNTIME_1_NAME, [$with_vcruntime_1_dll],\n+          [--with-vcruntime-1-dll])\n+      if test \"x$MSVC_DLL\" = x; then\n+        AC_MSG_ERROR([Could not find a proper $VCRUNTIME_1_NAME as specified by --with-vcruntime-1-dll])\n+      fi\n+      VCRUNTIME_1_DLL=\"$MSVC_DLL\"\n+    elif test \"x$DEVKIT_VCRUNTIME_1_DLL\" != x; then\n+      TOOLCHAIN_CHECK_POSSIBLE_MSVC_DLL($VCRUNTIME_1_NAME, [$DEVKIT_VCRUNTIME_1_DLL], [devkit])\n+      if test \"x$MSVC_DLL\" = x; then\n+        AC_MSG_ERROR([Could not find a proper $VCRUNTIME_1_NAME as specified by devkit])\n+      fi\n+      VCRUNTIME_1_DLL=\"$MSVC_DLL\"\n+    else\n+      TOOLCHAIN_SETUP_MSVC_DLL([${VCRUNTIME_1_NAME}])\n+      VCRUNTIME_1_DLL=\"$MSVC_DLL\"\n+    fi\n+    AC_SUBST(VCRUNTIME_1_DLL)\n+  fi\n+\n","filename":"common\/autoconf\/toolchain_windows.m4","additions":29,"deletions":1,"binary":false,"changes":30,"status":"modified"},{"patch":"@@ -266,0 +266,5 @@\n+  $(eval $(call SetupCopyFiles,COPY_VCRUNTIME_1, \\\n+      DEST := $(JDK_OUTPUTDIR)\/bin, \\\n+      FILES := $(VCRUNTIME_1_DLL), \\\n+      MACRO := copy-and-chmod))\n+\n@@ -271,1 +276,1 @@\n-  COPY_FILES += $(COPY_MSVCR) $(COPY_MSVCP)\n+  COPY_FILES += $(COPY_MSVCR) $(COPY_VCRUNTIME_1) $(COPY_MSVCP)\n","filename":"jdk\/make\/CopyFiles.gmk","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -391,0 +391,3 @@\n+  ifneq ($(VCRUNTIME_1_DLL), )\n+    LIBJLI_CFLAGS += -DVCRUNTIME_1_DLL_NAME='\"$(notdir $(VCRUNTIME_1_DLL))\"'\n+  endif\n","filename":"jdk\/make\/lib\/CoreLibraries.gmk","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -289,0 +289,17 @@\n+#ifdef VCRUNTIME_1_DLL_NAME\n+        if (GetJREPath(crtpath, MAXPATHLEN)) {\n+            if (JLI_StrLen(crtpath) + JLI_StrLen(\"\\\\bin\\\\\") +\n+                    JLI_StrLen(VCRUNTIME_1_DLL_NAME) >= MAXPATHLEN) {\n+                JLI_ReportErrorMessage(JRE_ERROR11);\n+                return JNI_FALSE;\n+            }\n+            (void)JLI_StrCat(crtpath, \"\\\\bin\\\\\" VCRUNTIME_1_DLL_NAME);   \/* Add crt dll *\/\n+            JLI_TraceLauncher(\"CRT path is %s\\n\", crtpath);\n+            if (_access(crtpath, 0) == 0) {\n+                if (LoadLibrary(crtpath) == 0) {\n+                    JLI_ReportErrorMessage(DLL_ERROR4, crtpath);\n+                    return JNI_FALSE;\n+                }\n+            }\n+        }\n+#endif \/* VCRUNTIME_1_DLL_NAME *\/\n","filename":"jdk\/src\/windows\/bin\/java_md.c","additions":17,"deletions":0,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -3,1 +3,1 @@\n-# Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2019, 2020, Oracle and\/or its affiliates. All rights reserved.\n@@ -36,1 +36,1 @@\n-MSVC_DIR=\"Microsoft.VC141.CRT\"\n+MSVC_DIR=\"Microsoft.VC142.CRT\"\n@@ -105,0 +105,1 @@\n+VCRUNTIME_1_DLL=${MSVC_DIR}\/vcruntime${VS_DLL_VERSION}_1.dll\n@@ -191,0 +192,1 @@\n+echo-info \"DEVKIT_VCRUNTIME_1_DLL_x86_64=\\\"\\$DEVKIT_ROOT\/VC\/redist\/x64\/$VCRUNTIME_1_DLL\\\"\"\n","filename":"make\/devkit\/createWindowsDevkit2019.sh","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"}]}