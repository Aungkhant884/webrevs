{"files":[{"patch":"@@ -28,3 +28,0 @@\n- * @author Alexander Potochkin\n- * @library ..\/..\/..\/..\/regtesthelpers\n- * @build Util\n@@ -45,0 +42,1 @@\n+    private static JFrame frame;\n@@ -47,1 +45,3 @@\n-        robot = new Robot();\n+        try {\n+            robot = new Robot();\n+            robot.setAutoDelay(100);\n@@ -49,5 +49,5 @@\n-        SwingUtilities.invokeAndWait(new Runnable() {\n-            public void run() {\n-                createAndShowGUI();\n-            }\n-        });\n+            SwingUtilities.invokeAndWait(new Runnable() {\n+                public void run() {\n+                    createAndShowGUI();\n+                }\n+            });\n@@ -55,1 +55,2 @@\n-        robot.waitForIdle();\n+            robot.waitForIdle();\n+            robot.delay(1000);\n@@ -57,2 +58,4 @@\n-        Util.hitKeys(robot, KeyEvent.VK_HOME);\n-        Util.hitKeys(robot, KeyEvent.VK_1);\n+            robot.keyPress(KeyEvent.VK_HOME);\n+            robot.keyRelease(KeyEvent.VK_HOME);\n+            robot.keyPress(KeyEvent.VK_1);\n+            robot.keyRelease(KeyEvent.VK_1);\n@@ -60,1 +63,1 @@\n-        robot.waitForIdle();\n+            robot.waitForIdle();\n@@ -62,1 +65,1 @@\n-        String test = getText();\n+            String test = getText();\n@@ -64,3 +67,3 @@\n-        if (!\"1test\".equals(test)) {\n-            throw new RuntimeException(\"Begin line action set cursor inside <head> tag\");\n-        }\n+            if (!\"1test\".equals(test)) {\n+                throw new RuntimeException(\"Begin line action set cursor inside <head> tag\");\n+            }\n@@ -68,2 +71,4 @@\n-        Util.hitKeys(robot, KeyEvent.VK_HOME);\n-        Util.hitKeys(robot, KeyEvent.VK_2);\n+            robot.keyPress(KeyEvent.VK_HOME);\n+            robot.keyRelease(KeyEvent.VK_HOME);\n+            robot.keyPress(KeyEvent.VK_2);\n+            robot.keyRelease(KeyEvent.VK_2);\n@@ -71,1 +76,1 @@\n-        robot.waitForIdle();\n+            robot.waitForIdle();\n@@ -73,1 +78,1 @@\n-        test = getText();\n+            test = getText();\n@@ -75,2 +80,7 @@\n-        if (!\"21test\".equals(test)) {\n-            throw new RuntimeException(\"Begin action set cursor inside <head> tag\");\n+            if (!\"21test\".equals(test)) {\n+                throw new RuntimeException(\"Begin action set cursor inside <head> tag\");\n+            }\n+        } finally {\n+            if (frame != null) {\n+                SwingUtilities.invokeAndWait(frame::dispose);\n+            }\n@@ -97,1 +107,1 @@\n-        JFrame frame = new JFrame();\n+        frame = new JFrame();\n@@ -106,0 +116,1 @@\n+        frame.setLocationRelativeTo(null);\n","filename":"jdk\/test\/javax\/swing\/text\/html\/HTMLEditorKit\/5043626\/bug5043626.java","additions":35,"deletions":24,"binary":false,"changes":59,"status":"modified"}]}