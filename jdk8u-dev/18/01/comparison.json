{"files":[{"patch":"@@ -2277,1 +2277,1 @@\n-                int rs = resizeStamp(n);\n+                int rs = resizeStamp(n) << RESIZE_STAMP_SHIFT;\n@@ -2279,3 +2279,2 @@\n-                    if ((sc >>> RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 ||\n-                        sc == rs + MAX_RESIZERS || (nt = nextTable) == null ||\n-                        transferIndex <= 0)\n+                    if (sc == rs + MAX_RESIZERS || sc == rs + 1 ||\n+                            (nt = nextTable) == null || transferIndex <= 0)\n@@ -2286,2 +2285,1 @@\n-                else if (U.compareAndSwapInt(this, SIZECTL, sc,\n-                                             (rs << RESIZE_STAMP_SHIFT) + 2))\n+                else if (U.compareAndSwapInt(this, SIZECTL, sc, rs + 2))\n@@ -2301,1 +2299,1 @@\n-            int rs = resizeStamp(tab.length);\n+            int rs = resizeStamp(tab.length) << RESIZE_STAMP_SHIFT;\n@@ -2304,2 +2302,2 @@\n-                if ((sc >>> RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 ||\n-                    sc == rs + MAX_RESIZERS || transferIndex <= 0)\n+                if (sc == rs + MAX_RESIZERS || sc == rs + 1 ||\n+                        transferIndex <= 0)\n","filename":"jdk\/src\/share\/classes\/java\/util\/concurrent\/ConcurrentHashMap.java","additions":7,"deletions":9,"binary":false,"changes":16,"status":"modified"}]}