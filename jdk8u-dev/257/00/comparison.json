{"files":[{"patch":"@@ -1,45 +0,0 @@\n-<!--\n- Copyright (c) 2007, 2013, Oracle and\/or its affiliates. All rights reserved.\n- DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n-\n- This code is free software; you can redistribute it and\/or modify it\n- under the terms of the GNU General Public License version 2 only, as\n- published by the Free Software Foundation.\n-\n- This code is distributed in the hope that it will be useful, but WITHOUT\n- ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n- FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n- version 2 for more details (a copy is included in the LICENSE file that\n- accompanied this code).\n-\n- You should have received a copy of the GNU General Public License version\n- 2 along with this work; if not, write to the Free Software Foundation,\n- Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n-\n- Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n- or visit www.oracle.com if you need additional information or have any\n- questions.\n--->\n-\n-<html>\n-<!--  \n-  @test\n-  @bug 6497109\n-  @summary TextArea must have selection expanding, and also be autoscrolled, if mouse is dragged from inside.\n-  @author Konstantin Voloshin: area=TextArea\n-  @library ..\/..\/regtesthelpers\n-  @build Util\n-  @run applet SelectionAutoscrollTest.html\n-  -->\n-<head>\n-<title>  <\/title>\n-<\/head>\n-<body>\n-\n-<h1>SelectionAutoscrollTest<br>Bug ID: 6497109<\/h1>\n-\n-<p> This is an AUTOMATIC test, simply wait for completion <\/p>\n-\n-<APPLET CODE=\"SelectionAutoscrollTest.class\" WIDTH=200 HEIGHT=200><\/APPLET>\n-<\/body>\n-<\/html>\n","filename":"jdk\/test\/java\/awt\/TextArea\/UsingWithMouse\/SelectionAutoscrollTest.html","additions":0,"deletions":45,"binary":false,"changes":45,"status":"deleted"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2007, 2010, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2007, 2016, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,2 +25,2 @@\n-  test\n-  @bug 6497109\n+  @test\n+  @bug 6497109 6734341\n@@ -28,0 +28,2 @@\n+  @library ..\/..\/regtesthelpers\n+  @build Util\n@@ -29,1 +31,1 @@\n-  @run applet SelectionAutoscrollTest.html\n+  @run main SelectionAutoscrollTest\n@@ -41,1 +43,0 @@\n-import java.applet.Applet;\n@@ -46,1 +47,0 @@\n-\n@@ -55,1 +55,1 @@\n-public class SelectionAutoscrollTest extends Applet {\n+public class SelectionAutoscrollTest {\n@@ -61,4 +61,6 @@\n-    public void start () {\n-        createObjects();\n-        manipulateMouse();\n-        checkResults();\n+    public static void main(String[] args) {\n+        SelectionAutoscrollTest selectionAutoscrollTest\n+                = new SelectionAutoscrollTest();\n+        selectionAutoscrollTest.createObjects();\n+        selectionAutoscrollTest.manipulateMouse();\n+        selectionAutoscrollTest.checkResults();\n@@ -105,1 +107,1 @@\n-        for( int tremble=0; tremble < desiredSelectionEnd; ++tremble ) {\n+        for( int tremble=0; tremble < 10; ++tremble ) {\n@@ -128,1 +130,1 @@\n-            moveMouseBelowTextArea( tremble%2!=0 );\n+            moveMouseBelowTextArea( tremble );\n@@ -141,1 +143,2 @@\n-        robot.mouseMove( (int)(l.x+d.width*.5), (int)(l.y+d.height*.5) );\n+        Util.mouseMove(robot, l, new Point((int) (l.x + d.width * .5),\n+                (int) (l.y + d.height * .5)));\n@@ -144,1 +147,1 @@\n-    void moveMouseBelowTextArea( boolean shift ) {\n+    void moveMouseBelowTextArea(int tremble) {\n@@ -147,4 +150,15 @@\n-        int x = (int)(l.x+d.width*.5);\n-        int y = (int)(l.y+d.height*1.5);\n-        if( shift ) y+=15;\n-        robot.mouseMove( x, y );\n+        Point p1;\n+        if (tremble == 0) {\n+            p1 = new Point((int) (l.x + d.width * .5),\n+                    (int) (l.y + d.height * 0.5));\n+        } else {\n+            p1 = new Point((int) (l.x + d.width * .5),\n+                    (int) (l.y + d.height * 1.5));\n+        }\n+        Point p2 = new Point((int) (l.x + d.width * .5),\n+                (int) (l.y + d.height * 1.5) + 15);\n+        if (tremble % 2 == 0) {\n+            Util.mouseMove(robot, p1, p2);\n+        } else {\n+            Util.mouseMove(robot, p2, p1);\n+        }\n@@ -163,3 +177,0 @@\n-        \/\/try { Thread.sleep( 30*1000 ); }\n-        \/\/catch( Exception e ) { throw new RuntimeException( e ); }\n-\n@@ -167,1 +178,0 @@\n-\n@@ -169,3 +179,3 @@\n-            \"TEST: Selection range after test is: ( \"\n-            + textArea.getSelectionStart() + \", \"\n-            + currentSelectionEnd + \" )\"\n+                \"TEST: Selection range after test is: ( \"\n+                + textArea.getSelectionStart() + \", \"\n+                + currentSelectionEnd + \" )\"\n","filename":"jdk\/test\/java\/awt\/TextArea\/UsingWithMouse\/SelectionAutoscrollTest.java","additions":36,"deletions":26,"binary":false,"changes":62,"status":"modified"}]}