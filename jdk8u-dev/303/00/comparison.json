{"files":[{"patch":"@@ -92,3 +92,4 @@\n-#endif\n-\n-#if defined(__linux__) || defined(_ALLBSD_SOURCE) || defined(_AIX)\n+#elif defined(__APPLE__)\n+    \/\/ On macOS systems we use disconnectx\n+    rv = disconnectx(fd, SAE_ASSOCID_ANY, SAE_CONNID_ANY);\n+#elif defined(__linux__) || defined(_ALLBSD_SOURCE) || defined(_AIX)\n@@ -123,0 +124,1 @@\n+    }\n@@ -124,1 +126,8 @@\n-#if defined(_ALLBSD_SOURCE)\n+#endif\n+\n+#if defined(_ALLBSD_SOURCE) && !defined(__APPLE__)\n+        \/\/ On _ALLBSD_SOURCE except __APPLE__ we consider EADDRNOTAVAIL\n+        \/\/ error to be OK and ignore it. __APPLE__ systems are excluded\n+        \/\/ in this check since for __APPLE__ systems, unlike other BSD systems,\n+        \/\/ we issue a \"disconnectx\" call (a few lines above),\n+        \/\/ which isn't expected to return this error code.\n@@ -136,2 +145,0 @@\n-    }\n-#endif\n","filename":"jdk\/src\/solaris\/native\/sun\/nio\/ch\/DatagramChannelImpl.c","additions":13,"deletions":6,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2012, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2012, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -25,1 +25,2 @@\n- * @bug 7132924\n+ * @bug 7132924 8285515\n+ * @key intermittent\n","filename":"jdk\/test\/java\/nio\/channels\/DatagramChannel\/Disconnect.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"}]}