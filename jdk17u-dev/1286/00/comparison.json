{"files":[{"patch":"@@ -625,6 +625,0 @@\n-  \/\/ See if the input array was allocated just prior to the object\n-  int edge_size = _max*sizeof(void*);\n-  int out_edge_size = _outmax*sizeof(void*);\n-  char *edge_end = ((char*)_in) + edge_size;\n-  char *out_array = (char*)(_out == NO_OUT_ARRAY? NULL: _out);\n-  int node_size = size_of();\n@@ -632,20 +626,0 @@\n-  \/\/ Free the output edge array\n-  if (out_edge_size > 0) {\n-    compile->node_arena()->Afree(out_array, out_edge_size);\n-  }\n-\n-  \/\/ Free the input edge array and the node itself\n-  if( edge_end == (char*)this ) {\n-    \/\/ It was; free the input array and object all in one hit\n-#ifndef ASSERT\n-    compile->node_arena()->Afree(_in,edge_size+node_size);\n-#endif\n-  } else {\n-    \/\/ Free just the input array\n-    compile->node_arena()->Afree(_in,edge_size);\n-\n-    \/\/ Free just the object\n-#ifndef ASSERT\n-    compile->node_arena()->Afree(this,node_size);\n-#endif\n-  }\n@@ -670,0 +644,9 @@\n+\n+  \/\/ See if the input array was allocated just prior to the object\n+  int edge_size = _max*sizeof(void*);\n+  int out_edge_size = _outmax*sizeof(void*);\n+  char *in_array = ((char*)_in);\n+  char *edge_end = in_array + edge_size;\n+  char *out_array = (char*)(_out == NO_OUT_ARRAY? NULL: _out);\n+  int node_size = size_of();\n+\n@@ -672,0 +655,1 @@\n+  compile->remove_modified_node(this);\n@@ -675,1 +659,0 @@\n-  compile->remove_modified_node(this);\n@@ -677,0 +660,21 @@\n+\n+  \/\/ Free the output edge array\n+  if (out_edge_size > 0) {\n+    compile->node_arena()->Afree(out_array, out_edge_size);\n+  }\n+\n+  \/\/ Free the input edge array and the node itself\n+  if( edge_end == (char*)this ) {\n+    \/\/ It was; free the input array and object all in one hit\n+#ifndef ASSERT\n+    compile->node_arena()->Afree(in_array, edge_size+node_size);\n+#endif\n+  } else {\n+    \/\/ Free just the input array\n+    compile->node_arena()->Afree(in_array, edge_size);\n+\n+    \/\/ Free just the object\n+#ifndef ASSERT\n+    compile->node_arena()->Afree(this, node_size);\n+#endif\n+  }\n","filename":"src\/hotspot\/share\/opto\/node.cpp","additions":31,"deletions":27,"binary":false,"changes":58,"status":"modified"}]}