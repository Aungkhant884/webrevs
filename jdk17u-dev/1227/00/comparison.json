{"files":[{"patch":"@@ -1660,0 +1660,2 @@\n+    \/\/ Ensure the sweeper can't collect this nmethod until it become \"active\" with JvmtiThreadState::nmethods_do.\n+    mark_as_seen_on_stack();\n","filename":"src\/hotspot\/share\/code\/nmethod.cpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2219,0 +2219,1 @@\n+  assert(!nm->is_zombie(), \"nmethod zombie in post_compiled_method_load\");\n","filename":"src\/hotspot\/share\/prims\/jvmtiExport.cpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -963,1 +963,1 @@\n-  \/\/ Post and destroy queue nodes\n+  \/\/ Post events while nmethods are still in the queue and can't be unloaded or made zombie\n@@ -965,2 +965,2 @@\n-     JvmtiDeferredEvent event = dequeue();\n-     event.post_compiled_method_load_event(env);\n+    _queue_head->event().post_compiled_method_load_event(env);\n+    dequeue();\n","filename":"src\/hotspot\/share\/prims\/jvmtiImpl.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -116,1 +116,0 @@\n-serviceability\/jvmti\/CompiledMethodLoad\/Zombie.java 8245877 linux-aarch64\n","filename":"test\/hotspot\/jtreg\/ProblemList.txt","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}