{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1997, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -450,0 +450,6 @@\n+}\n+\n+void os::print_tos_pc(outputStream *st, const void *context) {\n+  if (context == NULL) return;\n+\n+  const ucontext_t* uc = (const ucontext_t*)context;\n","filename":"src\/hotspot\/os_cpu\/aix_ppc\/os_aix_ppc.cpp","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -423,0 +423,1 @@\n+\n@@ -467,0 +468,6 @@\n+}\n+\n+void os::print_tos_pc(outputStream *st, const void *context) {\n+  if (context == NULL) return;\n+\n+  const ucontext_t* uc = (const ucontext_t*)context;\n","filename":"src\/hotspot\/os_cpu\/bsd_aarch64\/os_bsd_aarch64.cpp","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -804,0 +804,1 @@\n+\n@@ -847,0 +848,6 @@\n+}\n+\n+void os::print_tos_pc(outputStream *st, const void *context) {\n+  if (context == NULL) return;\n+\n+  const ucontext_t* uc = (const ucontext_t*)context;\n","filename":"src\/hotspot\/os_cpu\/bsd_x86\/os_bsd_x86.cpp","additions":8,"deletions":1,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -250,0 +250,4 @@\n+void os::print_tos_pc(outputStream *st, const void *context) {\n+  ShouldNotCallThis();\n+}\n+\n","filename":"src\/hotspot\/os_cpu\/bsd_zero\/os_bsd_zero.cpp","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -336,0 +336,1 @@\n+\n@@ -338,2 +339,1 @@\n-    st->print(\"R%-2d=\", r);\n-    print_location(st, uc->uc_mcontext.regs[r]);\n+    st->print_cr(  \"R%d=\" INTPTR_FORMAT, r, (uintptr_t)uc->uc_mcontext.regs[r]);\n@@ -342,0 +342,6 @@\n+}\n+\n+void os::print_tos_pc(outputStream *st, const void *context) {\n+  if (context == NULL) return;\n+\n+  const ucontext_t* uc = (const ucontext_t*)context;\n@@ -370,2 +376,4 @@\n-  for (int r = 0; r < 31; r++)\n-    st->print_cr(  \"R%d=\" INTPTR_FORMAT, r, (uintptr_t)uc->uc_mcontext.regs[r]);\n+  for (int r = 0; r < 31; r++) {\n+    st->print(\"R%-2d=\", r);\n+    print_location(st, uc->uc_mcontext.regs[r]);\n+  }\n","filename":"src\/hotspot\/os_cpu\/linux_aarch64\/os_linux_aarch64.cpp","additions":13,"deletions":5,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -437,0 +437,1 @@\n+\n@@ -448,0 +449,6 @@\n+}\n+\n+void os::print_tos_pc(outputStream *st, const void *context) {\n+  if (context == NULL) return;\n+\n+  const ucontext_t* uc = (const ucontext_t*)context;\n@@ -466,1 +473,0 @@\n-  intx* reg_area = (intx*)&uc->uc_mcontext.arm_r0;\n@@ -468,0 +474,1 @@\n+  intx* reg_area = (intx*)&uc->uc_mcontext.arm_r0;\n@@ -477,2 +484,0 @@\n-\n-\n","filename":"src\/hotspot\/os_cpu\/linux_arm\/os_linux_arm.cpp","additions":8,"deletions":3,"binary":false,"changes":11,"status":"modified"},{"patch":"@@ -463,0 +463,6 @@\n+}\n+\n+void os::print_tos_pc(outputStream *st, const void *context) {\n+  if (context == NULL) return;\n+\n+  const ucontext_t* uc = (const ucontext_t*)context;\n","filename":"src\/hotspot\/os_cpu\/linux_ppc\/os_linux_ppc.cpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1999, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1999, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -345,3 +345,1 @@\n-  if (context == NULL) {\n-    return;\n-  }\n+  if (context == NULL) return;\n@@ -350,0 +348,1 @@\n+\n@@ -352,2 +351,1 @@\n-    st->print(\"%-*.*s=\", 8, 8, reg_abi_names[r]);\n-    print_location(st, uc->uc_mcontext.__gregs[r]);\n+    st->print_cr(\"%-*.*s=\" INTPTR_FORMAT, 8, 8, reg_abi_names[r], (uintptr_t)uc->uc_mcontext.__gregs[r]);\n@@ -356,0 +354,6 @@\n+}\n+\n+void os::print_tos_pc(outputStream *st, const void *context) {\n+  if (context == NULL) return;\n+\n+  const ucontext_t* uc = (const ucontext_t*)context;\n@@ -371,3 +375,1 @@\n-  if (context == NULL) {\n-    return;\n-  }\n+  if (context == NULL) return;\n@@ -386,2 +388,4 @@\n-  for (int r = 0; r < 32; r++)\n-    st->print_cr(\"%-*.*s=\" INTPTR_FORMAT, 8, 8, reg_abi_names[r], (uintptr_t)uc->uc_mcontext.__gregs[r]);\n+  for (int r = 0; r < 32; r++) {\n+    st->print(\"%-*.*s=\", 8, 8, reg_abi_names[r]);\n+    print_location(st, uc->uc_mcontext.__gregs[r]);\n+  }\n","filename":"src\/hotspot\/os_cpu\/linux_riscv\/os_linux_riscv.cpp","additions":15,"deletions":11,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -436,0 +436,6 @@\n+}\n+\n+void os::print_tos_pc(outputStream *st, const void *context) {\n+  if (context == NULL) return;\n+\n+  const ucontext_t* uc = (const ucontext_t*)context;\n","filename":"src\/hotspot\/os_cpu\/linux_s390\/os_linux_s390.cpp","additions":6,"deletions":0,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -534,0 +534,1 @@\n+\n@@ -579,0 +580,6 @@\n+}\n+\n+void os::print_tos_pc(outputStream *st, const void *context) {\n+  if (context == NULL) return;\n+\n+  const ucontext_t* uc = (const ucontext_t*)context;\n","filename":"src\/hotspot\/os_cpu\/linux_x86\/os_linux_x86.cpp","additions":7,"deletions":0,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2003, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2003, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -293,0 +293,4 @@\n+void os::print_tos_pc(outputStream *st, const void *context) {\n+  ShouldNotCallThis();\n+}\n+\n","filename":"src\/hotspot\/os_cpu\/linux_zero\/os_linux_zero.cpp","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -3,0 +3,1 @@\n+ * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -206,0 +207,6 @@\n+}\n+\n+void os::print_tos_pc(outputStream *st, const void *context) {\n+  if (context == NULL) return;\n+\n+  const CONTEXT* uc = (const CONTEXT*)context;\n@@ -219,1 +226,0 @@\n-\n","filename":"src\/hotspot\/os_cpu\/windows_aarch64\/os_windows_aarch64.cpp","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -451,0 +451,6 @@\n+}\n+\n+void os::print_tos_pc(outputStream *st, const void *context) {\n+  if (context == NULL) return;\n+\n+  const CONTEXT* uc = (const CONTEXT*)context;\n@@ -465,1 +471,0 @@\n-\n","filename":"src\/hotspot\/os_cpu\/windows_x86\/os_windows_x86.cpp","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -696,0 +696,1 @@\n+  static void print_tos_pc(outputStream* st, const void* context);\n","filename":"src\/hotspot\/share\/runtime\/os.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -904,0 +904,8 @@\n+  STEP(\"printing registers\")\n+\n+     \/\/ printing registers\n+     if (_verbose && _context) {\n+       os::print_context(st, _context);\n+       st->cr();\n+     }\n+\n@@ -913,1 +921,1 @@\n-  STEP(\"printing registers, top of stack, instructions near pc\")\n+  STEP(\"printing top of stack, instructions near pc\")\n@@ -915,1 +923,1 @@\n-     \/\/ registers, top of stack, instructions near pc\n+     \/\/ printing top of stack, instructions near pc\n@@ -917,1 +925,1 @@\n-       os::print_context(st, _context);\n+       os::print_tos_pc(st, _context);\n","filename":"src\/hotspot\/share\/utilities\/vmError.cpp","additions":11,"deletions":3,"binary":false,"changes":14,"status":"modified"}]}