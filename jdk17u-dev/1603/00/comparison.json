{"files":[{"patch":"@@ -1,1 +1,1 @@\n-## The FreeType Project: Freetype v2.12.1\n+## The FreeType Project: Freetype v2.13.0\n@@ -24,21 +24,20 @@\n-Copyright (C) 1996-2022 by David Turner, Robert Wilhelm, and Werner Lemberg.\n-Copyright (C) 2007-2022 by Dereg Clegg and Michael Toftdal.\n-Copyright (C) 1996-2022 by Just van Rossum, David Turner, Robert Wilhelm, and Werner Lemberg.\n-Copyright (C) 2004-2022 by Masatake YAMATO and Redhat K.K.\n-Copyright (C) 2007-2022 by Derek Clegg and Michael Toftdal.\n-Copyright (C) 2007-2022 by David Turner.\n-Copyright (C) 2022 by David Turner, Robert Wilhelm, Werner Lemberg, and Moazin Khatti.\n-Copyright (C) 2007-2022 by Rahul Bhalerao <rahul.bhalerao@redhat.com>, <b.rahul.pm@gmail.com>.\n-Copyright (C) 2008-2022 by David Turner, Robert Wilhelm, Werner Lemberg, and suzuki toshiya.\n-Copyright (C) 2019-2022 by Nikhil Ramakrishnan, David Turner, Robert Wilhelm, and Werner Lemberg.\n-Copyright (C) 2009-2022 by Oran Agra and Mickey Gabel.\n-Copyright (C) 2004-2022 by David Turner, Robert Wilhelm, Werner Lemberg, and George Williams.\n-Copyright (C) 2004-2022 by Masatake YAMATO, Red Hat K.K.,\n-Copyright (C) 2003-2022 by Masatake YAMATO, Redhat K.K.,\n-Copyright (C) 2013-2022 by Google, Inc.\n-Copyright (C) 2018-2022 by David Turner, Robert Wilhelm, Dominik Röttsches, and Werner Lemberg.\n-Copyright (C) 2005-2022 by David Turner, Robert Wilhelm, and Werner Lemberg.\n-Copyright 2013 by Google, Inc.\n-\n-\n-                   The FreeType Project LICENSE\n+Copyright (C) 1996-2023 by David Turner, Robert Wilhelm, and Werner Lemberg.\n+Copyright (C) 2007-2023 by Dereg Clegg and Michael Toftdal.\n+Copyright (C) 1996-2023 by Just van Rossum, David Turner, Robert Wilhelm, and Werner Lemberg.\n+Copyright (C) 2022-2023 by David Turner, Robert Wilhelm, Werner Lemberg, George Williams, and\n+Copyright (C) 2004-2023 by Masatake YAMATO and Redhat K.K.\n+Copyright (C) 2007-2023 by Derek Clegg and Michael Toftdal.\n+Copyright (C) 2003-2023 by Masatake YAMATO, Red Hat K.K.,\n+Copyright (C) 1996-2023 by David Turner, Robert Wilhelm, Werner Lemberg, and Dominik Röttsches.\n+Copyright (C) 2007-2023 by David Turner.\n+Copyright (C) 2022-2023 by David Turner, Robert Wilhelm, Werner Lemberg, and Moazin Khatti.\n+Copyright (C) 2007-2023 by Rahul Bhalerao <rahul.bhalerao@redhat.com>, <b.rahul.pm@gmail.com>.\n+Copyright (C) 2008-2023 by David Turner, Robert Wilhelm, Werner Lemberg, and suzuki toshiya.\n+Copyright (C) 2013-2023 by Google, Inc.\n+Copyright (C) 2019-2023 by Nikhil Ramakrishnan, David Turner, Robert Wilhelm, and Werner Lemberg.\n+Copyright (C) 2009-2023 by Oran Agra and Mickey Gabel.\n+Copyright (C) 2018-2023 by David Turner, Robert Wilhelm, Dominik Röttsches, and Werner Lemberg.\n+Copyright (C) 2004-2023 by David Turner, Robert Wilhelm, Werner Lemberg, and George Williams.\n+\n+\n+                    The FreeType Project LICENSE\n@@ -209,1 +208,1 @@\n-    http:\/\/www.freetype.org\n+    https:\/\/www.freetype.org\n","filename":"src\/java.desktop\/share\/legal\/freetype.md","additions":22,"deletions":23,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/config\/ftconfig.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/config\/ftheader.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -464,3 +464,3 @@\n-   *     _af_debug_disable_horz_hints\n-   *     _af_debug_disable_vert_hints\n-   *     _af_debug_disable_blue_hints\n+   *     af_debug_disable_horz_hints_\n+   *     af_debug_disable_vert_hints_\n+   *     af_debug_disable_blue_hints_\n@@ -483,1 +483,1 @@\n-   *     _af_debug_hints\n+   *     af_debug_hints_\n@@ -587,1 +587,1 @@\n-   * load and enumerate the glyph Postscript names in a TrueType or OpenType\n+   * load and enumerate Postscript names of glyphs in a TrueType or OpenType\n@@ -590,3 +590,3 @@\n-   * Note that when you do not compile the 'psnames' module by undefining the\n-   * above `FT_CONFIG_OPTION_POSTSCRIPT_NAMES`, the 'sfnt' module will\n-   * contain additional code used to read the PS Names table from a font.\n+   * Note that if you do not compile the 'psnames' module by undefining the\n+   * above `FT_CONFIG_OPTION_POSTSCRIPT_NAMES` macro, the 'sfnt' module will\n+   * contain additional code to read the PostScript name table from a font.\n@@ -742,0 +742,18 @@\n+  \/**************************************************************************\n+   *\n+   * Define `TT_CONFIG_OPTION_NO_BORING_EXPANSION` if you want to exclude\n+   * support for 'boring' OpenType specification expansions.\n+   *\n+   *   https:\/\/github.com\/harfbuzz\/boring-expansion-spec\n+   *\n+   * Right now, the following features are covered:\n+   *\n+   *   - 'avar' version 2.0\n+   *\n+   * Most likely, this is a temporary configuration option to be removed in\n+   * the near future, since it is assumed that eventually those features are\n+   * added to the OpenType standard.\n+   *\/\n+\/* #define TT_CONFIG_OPTION_NO_BORING_EXPANSION *\/\n+\n+\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/config\/ftoption.h","additions":27,"deletions":9,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/config\/ftstdlib.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/config\/integer-types.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/config\/mac-support.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2020-2022 by\n+ * Copyright (C) 2020-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/config\/public-macros.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -218,1 +218,0 @@\n-   *   FT_Get_Name_Index\n@@ -257,2 +256,0 @@\n-   *   FT_Get_Glyph_Name\n-   *   FT_Get_Postscript_Name\n@@ -265,0 +262,3 @@\n+   *   FT_Get_Name_Index\n+   *   FT_Get_Glyph_Name\n+   *   FT_Get_Postscript_Name\n@@ -649,1 +649,1 @@\n-   *   repertories (i.e., charsets), and not text encoding methods (e.g.,\n+   *   repertoires (i.e., charsets), and not text encoding methods (e.g.,\n@@ -782,1 +782,1 @@\n-   *   `TT_MAC_LANGID_FARSI` means the Farsi variant the Arabic encoding.\n+   *   `TT_MAC_LANGID_FARSI` means the Farsi variant of the Arabic encoding.\n@@ -1170,3 +1170,3 @@\n-   *     function always return the vector (0,0).  Note that FreeType doesn't\n-   *     handle kerning data from the SFNT 'GPOS' table (as present in many\n-   *     OpenType fonts).\n+   *     function always returns the vector (0,0).  Note that FreeType\n+   *     doesn't handle kerning data from the SFNT 'GPOS' table (as present\n+   *     in many OpenType fonts).\n@@ -1895,1 +1895,1 @@\n-   *     WYSIWYG layout.  Only relevant for outline glyphs.\n+   *     WYSIWYG layout.  Only relevant for scalable glyphs.\n@@ -1901,1 +1901,1 @@\n-   *     WYSIWYG layout.  Only relevant for outline glyphs.\n+   *     WYSIWYG layout.  Only relevant for scalable glyphs.\n@@ -2596,2 +2596,2 @@\n-  FT_Attach_Stream( FT_Face        face,\n-                    FT_Open_Args*  parameters );\n+  FT_Attach_Stream( FT_Face              face,\n+                    const FT_Open_Args*  parameters );\n@@ -3080,1 +3080,1 @@\n-   *     when the glyph are rendered in any of the anti-aliased modes.  See\n+   *     when the glyphs are rendered in any of the anti-aliased modes.  See\n@@ -3437,1 +3437,1 @@\n-   *     A pointer a translation vector.  Set this to NULL if you are not\n+   *     A pointer to a translation vector.  Set this to NULL if you are not\n@@ -3562,3 +3562,4 @@\n-   *      Self-intersection happens when a single connected contour intersect\n-   *      itself at some point; having these in your font definitely pose a\n-   *      problem to the rasterizer and cause artifacts, too.\n+   *      Self-intersection happens when a single connected contour\n+   *      intersects itself at some point; having these in your font\n+   *      definitely poses a problem to the rasterizer and cause artifacts,\n+   *      too.\n@@ -3843,83 +3844,0 @@\n-  \/**************************************************************************\n-   *\n-   * @function:\n-   *   FT_Get_Glyph_Name\n-   *\n-   * @description:\n-   *   Retrieve the ASCII name of a given glyph in a face.  This only works\n-   *   for those faces where @FT_HAS_GLYPH_NAMES(face) returns~1.\n-   *\n-   * @input:\n-   *   face ::\n-   *     A handle to a source face object.\n-   *\n-   *   glyph_index ::\n-   *     The glyph index.\n-   *\n-   *   buffer_max ::\n-   *     The maximum number of bytes available in the buffer.\n-   *\n-   * @output:\n-   *   buffer ::\n-   *     A pointer to a target buffer where the name is copied to.\n-   *\n-   * @return:\n-   *   FreeType error code.  0~means success.\n-   *\n-   * @note:\n-   *   An error is returned if the face doesn't provide glyph names or if the\n-   *   glyph index is invalid.  In all cases of failure, the first byte of\n-   *   `buffer` is set to~0 to indicate an empty name.\n-   *\n-   *   The glyph name is truncated to fit within the buffer if it is too\n-   *   long.  The returned string is always zero-terminated.\n-   *\n-   *   Be aware that FreeType reorders glyph indices internally so that glyph\n-   *   index~0 always corresponds to the 'missing glyph' (called '.notdef').\n-   *\n-   *   This function always returns an error if the config macro\n-   *   `FT_CONFIG_OPTION_NO_GLYPH_NAMES` is not defined in `ftoption.h`.\n-   *\/\n-  FT_EXPORT( FT_Error )\n-  FT_Get_Glyph_Name( FT_Face     face,\n-                     FT_UInt     glyph_index,\n-                     FT_Pointer  buffer,\n-                     FT_UInt     buffer_max );\n-\n-\n-  \/**************************************************************************\n-   *\n-   * @function:\n-   *   FT_Get_Postscript_Name\n-   *\n-   * @description:\n-   *   Retrieve the ASCII PostScript name of a given face, if available.\n-   *   This only works with PostScript, TrueType, and OpenType fonts.\n-   *\n-   * @input:\n-   *   face ::\n-   *     A handle to the source face object.\n-   *\n-   * @return:\n-   *   A pointer to the face's PostScript name.  `NULL` if unavailable.\n-   *\n-   * @note:\n-   *   The returned pointer is owned by the face and is destroyed with it.\n-   *\n-   *   For variation fonts, this string changes if you select a different\n-   *   instance, and you have to call `FT_Get_PostScript_Name` again to\n-   *   retrieve it.  FreeType follows Adobe TechNote #5902, 'Generating\n-   *   PostScript Names for Fonts Using OpenType Font Variations'.\n-   *\n-   *     https:\/\/download.macromedia.com\/pub\/developer\/opentype\/tech-notes\/5902.AdobePSNameGeneration.html\n-   *\n-   *   [Since 2.9] Special PostScript names for named instances are only\n-   *   returned if the named instance is set with @FT_Set_Named_Instance (and\n-   *   the font has corresponding entries in its 'fvar' table).  If\n-   *   @FT_IS_VARIATION returns true, the algorithmically derived PostScript\n-   *   name is provided, not looking up special entries for named instances.\n-   *\/\n-  FT_EXPORT( const char* )\n-  FT_Get_Postscript_Name( FT_Face  face );\n-\n-\n@@ -4246,1 +4164,2 @@\n-   *   Return the glyph index of a given glyph name.\n+   *   Return the glyph index of a given glyph name.  This only works\n+   *   for those faces where @FT_HAS_GLYPH_NAMES returns true.\n@@ -4257,0 +4176,10 @@\n+   *\n+   * @note:\n+   *   Acceptable glyph names might come from the [Adobe Glyph\n+   *   List](https:\/\/github.com\/adobe-type-tools\/agl-aglfn).  See\n+   *   @FT_Get_Glyph_Name for the inverse functionality.\n+   *\n+   *   This function has limited capabilities if the config macro\n+   *   `FT_CONFIG_OPTION_POSTSCRIPT_NAMES` is not defined in `ftoption.h`:\n+   *   It then works only for fonts that actually embed glyph names (which\n+   *   many recent OpenType fonts do not).\n@@ -4263,0 +4192,85 @@\n+  \/**************************************************************************\n+   *\n+   * @function:\n+   *   FT_Get_Glyph_Name\n+   *\n+   * @description:\n+   *   Retrieve the ASCII name of a given glyph in a face.  This only works\n+   *   for those faces where @FT_HAS_GLYPH_NAMES returns true.\n+   *\n+   * @input:\n+   *   face ::\n+   *     A handle to a source face object.\n+   *\n+   *   glyph_index ::\n+   *     The glyph index.\n+   *\n+   *   buffer_max ::\n+   *     The maximum number of bytes available in the buffer.\n+   *\n+   * @output:\n+   *   buffer ::\n+   *     A pointer to a target buffer where the name is copied to.\n+   *\n+   * @return:\n+   *   FreeType error code.  0~means success.\n+   *\n+   * @note:\n+   *   An error is returned if the face doesn't provide glyph names or if the\n+   *   glyph index is invalid.  In all cases of failure, the first byte of\n+   *   `buffer` is set to~0 to indicate an empty name.\n+   *\n+   *   The glyph name is truncated to fit within the buffer if it is too\n+   *   long.  The returned string is always zero-terminated.\n+   *\n+   *   Be aware that FreeType reorders glyph indices internally so that glyph\n+   *   index~0 always corresponds to the 'missing glyph' (called '.notdef').\n+   *\n+   *   This function has limited capabilities if the config macro\n+   *   `FT_CONFIG_OPTION_POSTSCRIPT_NAMES` is not defined in `ftoption.h`:\n+   *   It then works only for fonts that actually embed glyph names (which\n+   *   many recent OpenType fonts do not).\n+   *\/\n+  FT_EXPORT( FT_Error )\n+  FT_Get_Glyph_Name( FT_Face     face,\n+                     FT_UInt     glyph_index,\n+                     FT_Pointer  buffer,\n+                     FT_UInt     buffer_max );\n+\n+\n+  \/**************************************************************************\n+   *\n+   * @function:\n+   *   FT_Get_Postscript_Name\n+   *\n+   * @description:\n+   *   Retrieve the ASCII PostScript name of a given face, if available.\n+   *   This only works with PostScript, TrueType, and OpenType fonts.\n+   *\n+   * @input:\n+   *   face ::\n+   *     A handle to the source face object.\n+   *\n+   * @return:\n+   *   A pointer to the face's PostScript name.  `NULL` if unavailable.\n+   *\n+   * @note:\n+   *   The returned pointer is owned by the face and is destroyed with it.\n+   *\n+   *   For variation fonts, this string changes if you select a different\n+   *   instance, and you have to call `FT_Get_PostScript_Name` again to\n+   *   retrieve it.  FreeType follows Adobe TechNote #5902, 'Generating\n+   *   PostScript Names for Fonts Using OpenType Font Variations'.\n+   *\n+   *     https:\/\/download.macromedia.com\/pub\/developer\/opentype\/tech-notes\/5902.AdobePSNameGeneration.html\n+   *\n+   *   [Since 2.9] Special PostScript names for named instances are only\n+   *   returned if the named instance is set with @FT_Set_Named_Instance (and\n+   *   the font has corresponding entries in its 'fvar' table).  If\n+   *   @FT_IS_VARIATION returns true, the algorithmically derived PostScript\n+   *   name is provided, not looking up special entries for named instances.\n+   *\/\n+  FT_EXPORT( const char* )\n+  FT_Get_Postscript_Name( FT_Face  face );\n+\n+\n@@ -4349,7 +4363,0 @@\n-  \/**************************************************************************\n-   *\n-   * @section:\n-   *   base_interface\n-   *\n-   *\/\n-\n@@ -4691,1 +4698,2 @@\n-   *   on 16.16 fixed-float numbers or 2d vectors.\n+   *   on 16.16 fixed-point numbers or 2D vectors.  FreeType does not use\n+   *   floating-point data types.\n@@ -4944,2 +4952,2 @@\n-#define FREETYPE_MINOR  12\n-#define FREETYPE_PATCH  1\n+#define FREETYPE_MINOR  13\n+#define FREETYPE_PATCH  0\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/freetype.h","additions":120,"deletions":112,"binary":false,"changes":232,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2008-2022 by\n+ * Copyright (C) 2008-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftadvanc.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftbbox.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftbdf.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2004-2022 by\n+ * Copyright (C) 2004-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftbitmap.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2007-2022 by\n+ * Copyright (C) 2007-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftcid.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2018-2022 by\n+ * Copyright (C) 2018-2023 by\n@@ -459,0 +459,3 @@\n+   *\n+   * @since:\n+   *   2.10\n@@ -478,1 +481,1 @@\n-   *   The enumeration values losely correspond with the format numbers of\n+   *   The enumeration values loosely correspond with the format numbers of\n@@ -492,3 +495,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -524,3 +525,4 @@\n-   *   state while iterating over the stops of an @FT_ColorLine,\n-   *   representing the `ColorLine` struct of the v1 extensions to 'COLR',\n-   *   see 'https:\/\/github.com\/googlefonts\/colr-gradients-spec'.\n+   *   state while iterating over the stops of an @FT_ColorLine, representing\n+   *   the `ColorLine` struct of the v1 extensions to 'COLR', see\n+   *   'https:\/\/github.com\/googlefonts\/colr-gradients-spec'.  Do not manually\n+   *   modify fields of this iterator.\n@@ -540,3 +542,3 @@\n-   * @since:\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n+   *   read_variable ::\n+   *     A boolean keeping track of whether variable color lines are to be\n+   *     read.  Set by @FT_Get_Paint.\n@@ -544,0 +546,2 @@\n+   * @since:\n+   *   2.13\n@@ -552,0 +556,2 @@\n+    FT_Bool  read_variable;\n+\n@@ -572,3 +578,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -595,1 +599,2 @@\n-   *     The stop offset between 0 and 1 along the gradient.\n+   *     The stop offset along the gradient, expressed as a 16.16 fixed-point\n+   *     coordinate.\n@@ -601,3 +606,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -607,1 +610,1 @@\n-    FT_F2Dot14     stop_offset;\n+    FT_Fixed       stop_offset;\n@@ -624,3 +627,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -656,3 +657,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -702,3 +701,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -725,3 +722,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -789,3 +784,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -818,3 +811,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -845,3 +836,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -886,3 +875,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -911,2 +898,1 @@\n-   *   layer filled with this paint is drawn filled filled with a radial\n-   *   gradient.\n+   *   layer filled with this paint is drawn filled with a radial gradient.\n@@ -936,3 +922,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -986,3 +970,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -1019,3 +1001,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -1045,3 +1025,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -1073,3 +1051,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -1108,3 +1084,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -1159,3 +1133,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward-compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -1197,1 +1169,1 @@\n-   *     units) represented as a 16.16 fixed-point value.\n+   *     units represented as a 16.16 fixed-point value.\n@@ -1204,3 +1176,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -1255,3 +1225,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -1278,3 +1246,2 @@\n-   *   A structure representing a 'COLR'v1 `PaintComposite` paint table.\n-   *   Used for compositing two paints in a 'COLR' v1 directed acycling\n-   *   graph.\n+   *   A structure representing a 'COLR' v1 `PaintComposite` paint table.\n+   *   Used for compositing two paints in a 'COLR' v1 directed acyclic graph.\n@@ -1296,3 +1263,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -1342,3 +1307,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -1389,3 +1352,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -1432,3 +1393,1 @@\n-   *   2.12 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -1527,3 +1486,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -1571,3 +1528,1 @@\n-   *   2.12 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -1620,3 +1575,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -1663,3 +1616,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n@@ -1701,3 +1652,1 @@\n-   *   2.11 -- **currently experimental only!**  There might be changes\n-   *   without retaining backward compatibility of both the API and ABI.\n-   *\n+   *   2.13\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftcolor.h","additions":52,"deletions":103,"binary":false,"changes":155,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2017-2022 by\n+ * Copyright (C) 2017-2023 by\n@@ -823,1 +823,0 @@\n-\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftdriver.h","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/fterrdef.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -32,1 +32,1 @@\n-   *   `freetype.h` defines the handling of FreeType's enumeration\n+   *   `freetype.h`) defines the handling of FreeType's enumeration\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/fterrors.h","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftfntfmt.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2007-2022 by\n+ * Copyright (C) 2007-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftgasp.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -358,1 +358,1 @@\n-   *     A handle to the glyph object.\n+   *     A handle to the glyph object.  `NULL` in case of error.\n@@ -388,1 +388,1 @@\n-   *     A handle to the target glyph object.  0~in case of error.\n+   *     A handle to the target glyph object.  `NULL` in case of error.\n@@ -416,1 +416,1 @@\n-   *     1\/64th of a pixel.\n+   *     1\/64 of a pixel.\n@@ -503,1 +503,1 @@\n-   *     1\/64th of pixels if it is grid-fitted.\n+   *     1\/64 of pixels if it is grid-fitted.\n@@ -674,1 +674,1 @@\n-   *     A handle to the target glyph object.\n+   *     A handle to the target glyph object.  Can be `NULL`.\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftglyph.h","additions":6,"deletions":6,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftgzip.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftimage.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftincrem.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 2006-2022 by\n+ * Copyright (C) 2006-2023 by\n@@ -140,1 +140,1 @@\n-   *     with weights of [0x08 0x4D 0x56 0x4D 0x08] in 1\/256th units.\n+   *     with weights of [0x08 0x4D 0x56 0x4D 0x08] in 1\/256 units.\n@@ -144,1 +144,1 @@\n-   *     weights of [0x00 0x55 0x56 0x55 0x00] in 1\/256th units.\n+   *     weights of [0x00 0x55 0x56 0x55 0x00] in 1\/256 units.\n@@ -229,1 +229,1 @@\n-   *     uses them to specify the filter weights in 1\/256th units.\n+   *     uses them to specify the filter weights in 1\/256 units.\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftlcdfil.h","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftlist.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2020-2022 by\n+ * Copyright (C) 2020-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftlogging.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftmac.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -401,0 +401,4 @@\n+   *   The design coordinates are 16.16 fractional values for TrueType GX and\n+   *   OpenType variation fonts.  For Adobe MM fonts, the values are\n+   *   integers.\n+   *\n@@ -443,0 +447,5 @@\n+   * @note:\n+   *   The design coordinates are 16.16 fractional values for TrueType GX and\n+   *   OpenType variation fonts.  For Adobe MM fonts, the values are\n+   *   integers.\n+   *\n@@ -474,3 +483,3 @@\n-   *     The design coordinates array (each element must be between 0 and 1.0\n-   *     for Adobe MM fonts, and between -1.0 and 1.0 for TrueType GX and\n-   *     OpenType variation fonts).\n+   *     The design coordinates array.  Each element is a 16.16 fractional\n+   *     value and must be between 0 and 1.0 for Adobe MM fonts, and between\n+   *     -1.0 and 1.0 for TrueType GX and OpenType variation fonts.\n@@ -521,1 +530,1 @@\n-   *     The normalized blend coordinates array.\n+   *     The normalized blend coordinates array (as 16.16 fractional values).\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftmm.h","additions":14,"deletions":5,"binary":false,"changes":19,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftmodapi.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftmoderr.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftoutln.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2017-2022 by\n+ * Copyright (C) 2017-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftparams.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftrender.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftsizes.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -10,1 +10,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftsnames.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n@@ -296,1 +296,1 @@\n-   *     expressed as 16.16 fixed point value.\n+   *     expressed as 16.16 fixed-point value.\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftstroke.h","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 2000-2022 by\n+ * Copyright (C) 2000-2023 by\n@@ -71,1 +71,1 @@\n-  \/* Slant an outline glyph to the right by about 12 degrees. *\/\n+  \/* Slant an outline glyph to the right by about 12 degrees.              *\/\n@@ -75,0 +75,9 @@\n+  \/* Slant an outline glyph by a given sine of an angle.  You can apply    *\/\n+  \/* slant along either x- or y-axis by choosing a corresponding non-zero  *\/\n+  \/* argument.  If both slants are non-zero, some affine transformation    *\/\n+  \/* will result.                                                          *\/\n+  FT_EXPORT( void )\n+  FT_GlyphSlot_Slant( FT_GlyphSlot  slot,\n+                      FT_Fixed      xslant,\n+                      FT_Fixed      yslant );\n+\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftsynth.h","additions":11,"deletions":2,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -232,1 +232,2 @@\n-   *     The offset of read in stream (always from start).\n+   *     The offset from the start of the stream to seek to if this is a seek\n+   *     operation (see note).\n@@ -244,2 +245,7 @@\n-   *   This function might be called to perform a seek or skip operation with\n-   *   a `count` of~0.  A non-zero return value then indicates an error.\n+   *   This function performs a seek *or* a read operation depending on the\n+   *   argument values.  If `count` is zero, the operation is a seek to\n+   *   `offset` bytes.  If `count` is >~0, the operation is a read of `count`\n+   *   bytes from the current position in the stream, and the `offset` value\n+   *   should be ignored.\n+   *\n+   *   For seek operations, a non-zero return value indicates an error.\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ftsystem.h","additions":10,"deletions":4,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/fttrigon.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -48,1 +48,4 @@\n-   *   font-specific structures are defined in a different section.\n+   *   font-specific structures are defined in a different section.  Note\n+   *   that FreeType does not use floating-point data types.  Fractional\n+   *   values are represented by fixed-point integers, with lower bits\n+   *   storing the fractional part.\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/fttypes.h","additions":5,"deletions":2,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/autohint.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2017-2022 by\n+ * Copyright (C) 2017-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/cffotypes.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -318,1 +318,1 @@\n-    \/* Blended values are stored as 5-byte fixed point values.            *\/\n+    \/* Blended values are stored as 5-byte fixed-point values.            *\/\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/cfftypes.h","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2020-2022 by\n+ * Copyright (C) 2020-2023 by\n@@ -37,0 +37,13 @@\n+#endif\n+\n+  \/* Newer compilers warn for fall-through case statements. *\/\n+#ifndef FALL_THROUGH\n+#  if ( defined( __STDC_VERSION__ ) && __STDC_VERSION__ > 201710L ) || \\\n+      ( defined( __cplusplus ) && __cplusplus > 201402L )\n+#    define FALL_THROUGH  [[__fallthrough__]]\n+#  elif ( defined( __GNUC__ ) && __GNUC__ >= 7 )          || \\\n+        ( defined( __clang__ ) && __clang_major__ >= 10 )\n+#    define FALL_THROUGH  __attribute__(( __fallthrough__ ))\n+#  else\n+#    define FALL_THROUGH  ( (void)0 )\n+#  endif\n@@ -261,1 +274,1 @@\n-  \/* See `freetype\/config\/compiler_macros.h` for the `FT_EXPORT` definition *\/\n+  \/* See `freetype\/config\/public-macros.h` for the `FT_EXPORT` definition *\/\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/compiler-macros.h","additions":15,"deletions":2,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -281,0 +281,34 @@\n+  \/**************************************************************************\n+   *\n+   * @function:\n+   *   FT_MulAddFix\n+   *\n+   * @description:\n+   *   Compute `(s[0] * f[0] + s[1] * f[1] + ...) \/ 0x10000`, where `s[n]` is\n+   *   usually a 16.16 scalar.\n+   *\n+   * @input:\n+   *   s ::\n+   *     The array of scalars.\n+   *   f ::\n+   *     The array of factors.\n+   *   count ::\n+   *     The number of entries in the array.\n+   *\n+   * @return:\n+   *   The result of `(s[0] * f[0] + s[1] * f[1] + ...) \/ 0x10000`.\n+   *\n+   * @note:\n+   *   This function is currently used for the scaled delta computation of\n+   *   variation stores.  It internally uses 64-bit data types when\n+   *   available, otherwise it emulates 64-bit math by using 32-bit\n+   *   operations, which produce a correct result but most likely at a slower\n+   *   performance in comparison to the implementation base on `int64_t`.\n+   *\n+   *\/\n+  FT_BASE( FT_Int32 )\n+  FT_MulAddFix( FT_Fixed*  s,\n+                FT_Int32*  f,\n+                FT_UInt    count );\n+\n+\n@@ -416,5 +450,5 @@\n-#pragma aux FT_MSB_i386 =     \\\n-  \"bsr eax, eax\"              \\\n-  parm [eax] nomemory         \\\n-  value [eax]                 \\\n-  modify exact [eax] nomemory;\n+#pragma aux FT_MSB_i386 =             \\\n+  \"bsr eax, eax\"                      \\\n+  __parm [__eax] __nomemory           \\\n+  __value [__eax]                     \\\n+  __modify __exact [__eax] __nomemory;\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/ftcalc.h","additions":40,"deletions":6,"binary":false,"changes":46,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/ftdebug.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/ftdrv.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/ftgloadr.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -99,2 +99,2 @@\n-  FT_BASE( const char* )  _ft_debug_file;\n-  FT_BASE( long )         _ft_debug_lineno;\n+  FT_BASE( const char* )  ft_debug_file_;\n+  FT_BASE( long )         ft_debug_lineno_;\n@@ -102,2 +102,2 @@\n-#define FT_DEBUG_INNER( exp )  ( _ft_debug_file   = __FILE__, \\\n-                                 _ft_debug_lineno = __LINE__, \\\n+#define FT_DEBUG_INNER( exp )  ( ft_debug_file_   = __FILE__, \\\n+                                 ft_debug_lineno_ = __LINE__, \\\n@@ -106,2 +106,2 @@\n-#define FT_ASSIGNP_INNER( p, exp )  ( _ft_debug_file   = __FILE__, \\\n-                                      _ft_debug_lineno = __LINE__, \\\n+#define FT_ASSIGNP_INNER( p, exp )  ( ft_debug_file_   = __FILE__, \\\n+                                      ft_debug_lineno_ = __LINE__, \\\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/ftmemory.h","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -0,0 +1,85 @@\n+\/****************************************************************************\n+ *\n+ * ftmmtypes.h\n+ *\n+ *   OpenType Variations type definitions for internal use\n+ *   with the multi-masters service (specification).\n+ *\n+ * Copyright (C) 2022-2023 by\n+ * David Turner, Robert Wilhelm, Werner Lemberg, George Williams, and\n+ * Dominik Röttsches.\n+ *\n+ * This file is part of the FreeType project, and may only be used,\n+ * modified, and distributed under the terms of the FreeType project\n+ * license, LICENSE.TXT.  By continuing to use, modify, or distribute\n+ * this file you indicate that you have read the license and\n+ * understand and accept it fully.\n+ *\n+ *\/\n+\n+\n+#ifndef FTMMTYPES_H_\n+#define FTMMTYPES_H_\n+\n+FT_BEGIN_HEADER\n+\n+\n+  typedef FT_Int32  FT_ItemVarDelta;\n+\n+  typedef struct  GX_ItemVarDataRec_\n+  {\n+    FT_UInt            itemCount;       \/* number of delta sets per item    *\/\n+    FT_UInt            regionIdxCount;  \/* number of region indices         *\/\n+    FT_UInt*           regionIndices;   \/* array of `regionCount' indices;  *\/\n+                                        \/* these index `varRegionList'      *\/\n+    FT_ItemVarDelta*   deltaSet;        \/* array of `itemCount' deltas      *\/\n+                                        \/* use `innerIndex' for this array  *\/\n+\n+  } GX_ItemVarDataRec, *GX_ItemVarData;\n+\n+\n+  \/* contribution of one axis to a region *\/\n+  typedef struct  GX_AxisCoordsRec_\n+  {\n+    FT_Fixed  startCoord;\n+    FT_Fixed  peakCoord;      \/* zero means no effect (factor = 1) *\/\n+    FT_Fixed  endCoord;\n+\n+  } GX_AxisCoordsRec, *GX_AxisCoords;\n+\n+\n+  typedef struct  GX_VarRegionRec_\n+  {\n+    GX_AxisCoords  axisList;               \/* array of axisCount records *\/\n+\n+  } GX_VarRegionRec, *GX_VarRegion;\n+\n+\n+  \/* item variation store *\/\n+  typedef struct  GX_ItemVarStoreRec_\n+  {\n+    FT_UInt         dataCount;\n+    GX_ItemVarData  varData;            \/* array of dataCount records;     *\/\n+                                        \/* use `outerIndex' for this array *\/\n+    FT_UShort     axisCount;\n+    FT_UInt       regionCount;          \/* total number of regions defined *\/\n+    GX_VarRegion  varRegionList;\n+\n+  } GX_ItemVarStoreRec, *GX_ItemVarStore;\n+\n+\n+  typedef struct  GX_DeltaSetIdxMapRec_\n+  {\n+    FT_ULong  mapCount;\n+    FT_UInt*  outerIndex;               \/* indices to item var data *\/\n+    FT_UInt*  innerIndex;               \/* indices to delta set     *\/\n+\n+  } GX_DeltaSetIdxMapRec, *GX_DeltaSetIdxMap;\n+\n+\n+FT_END_HEADER\n+\n+#endif \/* FTMMTYPES_H_ *\/\n+\n+\n+\/* END *\/\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/ftmmtypes.h","additions":85,"deletions":0,"binary":false,"changes":85,"status":"added"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/ftobjs.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2017-2022 by\n+ * Copyright (C) 2017-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/ftpsprop.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2004-2022 by\n+ * Copyright (C) 2004-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/ftrfork.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/ftserv.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -241,2 +241,2 @@\n-#define FT_NEXT_SHORT( buffer )                                   \\\n-          ( (short)( buffer += 2, FT_PEEK_SHORT( buffer - 2 ) ) )\n+#define FT_NEXT_SHORT( buffer )                        \\\n+          ( buffer += 2, FT_PEEK_SHORT( buffer - 2 ) )\n@@ -244,2 +244,2 @@\n-#define FT_NEXT_USHORT( buffer )                                            \\\n-          ( (unsigned short)( buffer += 2, FT_PEEK_USHORT( buffer - 2 ) ) )\n+#define FT_NEXT_USHORT( buffer )                        \\\n+          ( buffer += 2, FT_PEEK_USHORT( buffer - 2 ) )\n@@ -247,2 +247,2 @@\n-#define FT_NEXT_OFF3( buffer )                                  \\\n-          ( (long)( buffer += 3, FT_PEEK_OFF3( buffer - 3 ) ) )\n+#define FT_NEXT_OFF3( buffer )                        \\\n+          ( buffer += 3, FT_PEEK_OFF3( buffer - 3 ) )\n@@ -250,2 +250,2 @@\n-#define FT_NEXT_UOFF3( buffer )                                           \\\n-          ( (unsigned long)( buffer += 3, FT_PEEK_UOFF3( buffer - 3 ) ) )\n+#define FT_NEXT_UOFF3( buffer )                        \\\n+          ( buffer += 3, FT_PEEK_UOFF3( buffer - 3 ) )\n@@ -253,2 +253,2 @@\n-#define FT_NEXT_LONG( buffer )                                  \\\n-          ( (long)( buffer += 4, FT_PEEK_LONG( buffer - 4 ) ) )\n+#define FT_NEXT_LONG( buffer )                        \\\n+          ( buffer += 4, FT_PEEK_LONG( buffer - 4 ) )\n@@ -256,2 +256,2 @@\n-#define FT_NEXT_ULONG( buffer )                                           \\\n-          ( (unsigned long)( buffer += 4, FT_PEEK_ULONG( buffer - 4 ) ) )\n+#define FT_NEXT_ULONG( buffer )                        \\\n+          ( buffer += 4, FT_PEEK_ULONG( buffer - 4 ) )\n@@ -260,2 +260,2 @@\n-#define FT_NEXT_SHORT_LE( buffer )                                   \\\n-          ( (short)( buffer += 2, FT_PEEK_SHORT_LE( buffer - 2 ) ) )\n+#define FT_NEXT_SHORT_LE( buffer )                        \\\n+          ( buffer += 2, FT_PEEK_SHORT_LE( buffer - 2 ) )\n@@ -263,2 +263,2 @@\n-#define FT_NEXT_USHORT_LE( buffer )                                            \\\n-          ( (unsigned short)( buffer += 2, FT_PEEK_USHORT_LE( buffer - 2 ) ) )\n+#define FT_NEXT_USHORT_LE( buffer )                        \\\n+          ( buffer += 2, FT_PEEK_USHORT_LE( buffer - 2 ) )\n@@ -266,2 +266,2 @@\n-#define FT_NEXT_OFF3_LE( buffer )                                  \\\n-          ( (long)( buffer += 3, FT_PEEK_OFF3_LE( buffer - 3 ) ) )\n+#define FT_NEXT_OFF3_LE( buffer )                        \\\n+          ( buffer += 3, FT_PEEK_OFF3_LE( buffer - 3 ) )\n@@ -269,2 +269,2 @@\n-#define FT_NEXT_UOFF3_LE( buffer )                                           \\\n-          ( (unsigned long)( buffer += 3, FT_PEEK_UOFF3_LE( buffer - 3 ) ) )\n+#define FT_NEXT_UOFF3_LE( buffer )                        \\\n+          ( buffer += 3, FT_PEEK_UOFF3_LE( buffer - 3 ) )\n@@ -272,2 +272,2 @@\n-#define FT_NEXT_LONG_LE( buffer )                                  \\\n-          ( (long)( buffer += 4, FT_PEEK_LONG_LE( buffer - 4 ) ) )\n+#define FT_NEXT_LONG_LE( buffer )                        \\\n+          ( buffer += 4, FT_PEEK_LONG_LE( buffer - 4 ) )\n@@ -275,2 +275,2 @@\n-#define FT_NEXT_ULONG_LE( buffer )                                           \\\n-          ( (unsigned long)( buffer += 4, FT_PEEK_ULONG_LE( buffer - 4 ) ) )\n+#define FT_NEXT_ULONG_LE( buffer )                        \\\n+          ( buffer += 4, FT_PEEK_ULONG_LE( buffer - 4 ) )\n@@ -310,11 +310,11 @@\n-#define FT_GET_SHORT()      FT_GET_MACRO( FT_Stream_GetUShort, FT_Short )\n-#define FT_GET_USHORT()     FT_GET_MACRO( FT_Stream_GetUShort, FT_UShort )\n-#define FT_GET_UOFF3()      FT_GET_MACRO( FT_Stream_GetUOffset, FT_ULong )\n-#define FT_GET_LONG()       FT_GET_MACRO( FT_Stream_GetULong, FT_Long )\n-#define FT_GET_ULONG()      FT_GET_MACRO( FT_Stream_GetULong, FT_ULong )\n-#define FT_GET_TAG4()       FT_GET_MACRO( FT_Stream_GetULong, FT_ULong )\n-\n-#define FT_GET_SHORT_LE()   FT_GET_MACRO( FT_Stream_GetUShortLE, FT_Short )\n-#define FT_GET_USHORT_LE()  FT_GET_MACRO( FT_Stream_GetUShortLE, FT_UShort )\n-#define FT_GET_LONG_LE()    FT_GET_MACRO( FT_Stream_GetULongLE, FT_Long )\n-#define FT_GET_ULONG_LE()   FT_GET_MACRO( FT_Stream_GetULongLE, FT_ULong )\n+#define FT_GET_SHORT()      FT_GET_MACRO( FT_Stream_GetUShort, FT_Int16 )\n+#define FT_GET_USHORT()     FT_GET_MACRO( FT_Stream_GetUShort, FT_UInt16 )\n+#define FT_GET_UOFF3()      FT_GET_MACRO( FT_Stream_GetUOffset, FT_UInt32 )\n+#define FT_GET_LONG()       FT_GET_MACRO( FT_Stream_GetULong, FT_Int32 )\n+#define FT_GET_ULONG()      FT_GET_MACRO( FT_Stream_GetULong, FT_UInt32 )\n+#define FT_GET_TAG4()       FT_GET_MACRO( FT_Stream_GetULong, FT_UInt32 )\n+\n+#define FT_GET_SHORT_LE()   FT_GET_MACRO( FT_Stream_GetUShortLE, FT_Int16 )\n+#define FT_GET_USHORT_LE()  FT_GET_MACRO( FT_Stream_GetUShortLE, FT_UInt16 )\n+#define FT_GET_LONG_LE()    FT_GET_MACRO( FT_Stream_GetULongLE, FT_Int32 )\n+#define FT_GET_ULONG_LE()   FT_GET_MACRO( FT_Stream_GetULongLE, FT_UInt32 )\n@@ -337,5 +337,5 @@\n-#define FT_READ_SHORT( var )      FT_READ_MACRO( FT_Stream_ReadUShort, FT_Short, var )\n-#define FT_READ_USHORT( var )     FT_READ_MACRO( FT_Stream_ReadUShort, FT_UShort, var )\n-#define FT_READ_UOFF3( var )      FT_READ_MACRO( FT_Stream_ReadUOffset, FT_ULong, var )\n-#define FT_READ_LONG( var )       FT_READ_MACRO( FT_Stream_ReadULong, FT_Long, var )\n-#define FT_READ_ULONG( var )      FT_READ_MACRO( FT_Stream_ReadULong, FT_ULong, var )\n+#define FT_READ_SHORT( var )      FT_READ_MACRO( FT_Stream_ReadUShort, FT_Int16, var )\n+#define FT_READ_USHORT( var )     FT_READ_MACRO( FT_Stream_ReadUShort, FT_UInt16, var )\n+#define FT_READ_UOFF3( var )      FT_READ_MACRO( FT_Stream_ReadUOffset, FT_UInt32, var )\n+#define FT_READ_LONG( var )       FT_READ_MACRO( FT_Stream_ReadULong, FT_Int32, var )\n+#define FT_READ_ULONG( var )      FT_READ_MACRO( FT_Stream_ReadULong, FT_UInt32, var )\n@@ -343,4 +343,4 @@\n-#define FT_READ_SHORT_LE( var )   FT_READ_MACRO( FT_Stream_ReadUShortLE, FT_Short, var )\n-#define FT_READ_USHORT_LE( var )  FT_READ_MACRO( FT_Stream_ReadUShortLE, FT_UShort, var )\n-#define FT_READ_LONG_LE( var )    FT_READ_MACRO( FT_Stream_ReadULongLE, FT_Long, var )\n-#define FT_READ_ULONG_LE( var )   FT_READ_MACRO( FT_Stream_ReadULongLE, FT_ULong, var )\n+#define FT_READ_SHORT_LE( var )   FT_READ_MACRO( FT_Stream_ReadUShortLE, FT_Int16, var )\n+#define FT_READ_USHORT_LE( var )  FT_READ_MACRO( FT_Stream_ReadUShortLE, FT_UInt16, var )\n+#define FT_READ_LONG_LE( var )    FT_READ_MACRO( FT_Stream_ReadULongLE, FT_Int32, var )\n+#define FT_READ_ULONG_LE( var )   FT_READ_MACRO( FT_Stream_ReadULongLE, FT_UInt32, var )\n@@ -462,1 +462,1 @@\n-  FT_BASE( FT_UShort )\n+  FT_BASE( FT_UInt16 )\n@@ -466,1 +466,1 @@\n-  FT_BASE( FT_ULong )\n+  FT_BASE( FT_UInt32 )\n@@ -470,1 +470,1 @@\n-  FT_BASE( FT_ULong )\n+  FT_BASE( FT_UInt32 )\n@@ -474,1 +474,1 @@\n-  FT_BASE( FT_UShort )\n+  FT_BASE( FT_UInt16 )\n@@ -478,1 +478,1 @@\n-  FT_BASE( FT_ULong )\n+  FT_BASE( FT_UInt32 )\n@@ -488,1 +488,1 @@\n-  FT_BASE( FT_UShort )\n+  FT_BASE( FT_UInt16 )\n@@ -498,1 +498,1 @@\n-  FT_BASE( FT_ULong )\n+  FT_BASE( FT_UInt32 )\n@@ -503,1 +503,1 @@\n-  FT_BASE( FT_UShort )\n+  FT_BASE( FT_UInt16 )\n@@ -508,1 +508,1 @@\n-  FT_BASE( FT_ULong )\n+  FT_BASE( FT_UInt32 )\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/ftstream.h","additions":54,"deletions":54,"binary":false,"changes":108,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/fttrace.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2004-2022 by\n+ * Copyright (C) 2004-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/ftvalid.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -135,3 +135,0 @@\n-   *   num_elems ::\n-   *     The current number of elements in table.\n-   *\n@@ -158,1 +155,0 @@\n-    FT_Int             num_elems;\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/psaux.h","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -9,1 +9,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n@@ -297,1 +297,1 @@\n-   *   output, they are in 1\/64th of pixels.\n+   *   output, they are in 1\/64 of pixels.\n@@ -610,1 +610,1 @@\n-   *   output, they are in 1\/64th of pixels.\n+   *   output, they are in 1\/64 of pixels.\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/pshints.h","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svbdf.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2017-2022 by\n+ * Copyright (C) 2017-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svcfftl.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2007-2022 by\n+ * Copyright (C) 2007-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svcid.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svfntfmt.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svgldict.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2004-2022 by\n+ * Copyright (C) 2004-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svgxval.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2006-2022 by\n+ * Copyright (C) 2006-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svkern.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2016-2022 by\n+ * Copyright (C) 2016-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svmetric.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,2 +7,2 @@\n- * Copyright (C) 2003-2022 by\n- * David Turner, Robert Wilhelm, and Werner Lemberg.\n+ * Copyright (C) 2003-2023 by\n+ * David Turner, Robert Wilhelm, Werner Lemberg, and Dominik Röttsches.\n@@ -22,0 +22,1 @@\n+#include <freetype\/ftmm.h>\n@@ -23,0 +24,1 @@\n+#include <freetype\/internal\/ftmmtypes.h>\n@@ -99,0 +101,26 @@\n+  typedef FT_Error\n+  (*FT_Var_Load_Delta_Set_Idx_Map_Func)( FT_Face            face,\n+                                         FT_ULong           offset,\n+                                         GX_DeltaSetIdxMap  map,\n+                                         GX_ItemVarStore    itemStore,\n+                                         FT_ULong           table_len );\n+\n+  typedef FT_Error\n+  (*FT_Var_Load_Item_Var_Store_Func)( FT_Face          face,\n+                                      FT_ULong         offset,\n+                                      GX_ItemVarStore  itemStore );\n+\n+  typedef FT_ItemVarDelta\n+  (*FT_Var_Get_Item_Delta_Func)( FT_Face          face,\n+                                 GX_ItemVarStore  itemStore,\n+                                 FT_UInt          outerIndex,\n+                                 FT_UInt          innerIndex );\n+\n+  typedef void\n+  (*FT_Var_Done_Item_Var_Store_Func)( FT_Face          face,\n+                                      GX_ItemVarStore  itemStore );\n+\n+  typedef void\n+  (*FT_Var_Done_Delta_Set_Idx_Map_Func)( FT_Face            face,\n+                                         GX_DeltaSetIdxMap  deltaSetIdxMap );\n+\n@@ -102,10 +130,10 @@\n-    FT_Get_MM_Func               get_mm;\n-    FT_Set_MM_Design_Func        set_mm_design;\n-    FT_Set_MM_Blend_Func         set_mm_blend;\n-    FT_Get_MM_Blend_Func         get_mm_blend;\n-    FT_Get_MM_Var_Func           get_mm_var;\n-    FT_Set_Var_Design_Func       set_var_design;\n-    FT_Get_Var_Design_Func       get_var_design;\n-    FT_Set_Instance_Func         set_instance;\n-    FT_Set_MM_WeightVector_Func  set_mm_weightvector;\n-    FT_Get_MM_WeightVector_Func  get_mm_weightvector;\n+    FT_Get_MM_Func                        get_mm;\n+    FT_Set_MM_Design_Func                 set_mm_design;\n+    FT_Set_MM_Blend_Func                  set_mm_blend;\n+    FT_Get_MM_Blend_Func                  get_mm_blend;\n+    FT_Get_MM_Var_Func                    get_mm_var;\n+    FT_Set_Var_Design_Func                set_var_design;\n+    FT_Get_Var_Design_Func                get_var_design;\n+    FT_Set_Instance_Func                  set_instance;\n+    FT_Set_MM_WeightVector_Func           set_mm_weightvector;\n+    FT_Get_MM_WeightVector_Func           get_mm_weightvector;\n@@ -114,2 +142,7 @@\n-    FT_Get_Var_Blend_Func  get_var_blend;\n-    FT_Done_Blend_Func     done_blend;\n+    FT_Var_Load_Delta_Set_Idx_Map_Func    load_delta_set_idx_map;\n+    FT_Var_Load_Item_Var_Store_Func       load_item_var_store;\n+    FT_Var_Get_Item_Delta_Func            get_item_delta;\n+    FT_Var_Done_Item_Var_Store_Func       done_item_var_store;\n+    FT_Var_Done_Delta_Set_Idx_Map_Func    done_delta_set_idx_map;\n+    FT_Get_Var_Blend_Func                 get_var_blend;\n+    FT_Done_Blend_Func                    done_blend;\n@@ -119,27 +152,37 @@\n-#define FT_DEFINE_SERVICE_MULTIMASTERSREC( class_,            \\\n-                                           get_mm_,           \\\n-                                           set_mm_design_,    \\\n-                                           set_mm_blend_,     \\\n-                                           get_mm_blend_,     \\\n-                                           get_mm_var_,       \\\n-                                           set_var_design_,   \\\n-                                           get_var_design_,   \\\n-                                           set_instance_,     \\\n-                                           set_weightvector_, \\\n-                                           get_weightvector_, \\\n-                                           get_var_blend_,    \\\n-                                           done_blend_ )      \\\n-  static const FT_Service_MultiMastersRec  class_ =           \\\n-  {                                                           \\\n-    get_mm_,                                                  \\\n-    set_mm_design_,                                           \\\n-    set_mm_blend_,                                            \\\n-    get_mm_blend_,                                            \\\n-    get_mm_var_,                                              \\\n-    set_var_design_,                                          \\\n-    get_var_design_,                                          \\\n-    set_instance_,                                            \\\n-    set_weightvector_,                                        \\\n-    get_weightvector_,                                        \\\n-    get_var_blend_,                                           \\\n-    done_blend_                                               \\\n+#define FT_DEFINE_SERVICE_MULTIMASTERSREC( class_,                  \\\n+                                           get_mm_,                 \\\n+                                           set_mm_design_,          \\\n+                                           set_mm_blend_,           \\\n+                                           get_mm_blend_,           \\\n+                                           get_mm_var_,             \\\n+                                           set_var_design_,         \\\n+                                           get_var_design_,         \\\n+                                           set_instance_,           \\\n+                                           set_weightvector_,       \\\n+                                           get_weightvector_,       \\\n+                                           load_delta_set_idx_map_, \\\n+                                           load_item_var_store_,    \\\n+                                           get_item_delta_,         \\\n+                                           done_item_var_store_,    \\\n+                                           done_delta_set_idx_map_, \\\n+                                           get_var_blend_,          \\\n+                                           done_blend_ )            \\\n+  static const FT_Service_MultiMastersRec  class_ =                 \\\n+  {                                                                 \\\n+    get_mm_,                                                        \\\n+    set_mm_design_,                                                 \\\n+    set_mm_blend_,                                                  \\\n+    get_mm_blend_,                                                  \\\n+    get_mm_var_,                                                    \\\n+    set_var_design_,                                                \\\n+    get_var_design_,                                                \\\n+    set_instance_,                                                  \\\n+    set_weightvector_,                                              \\\n+    get_weightvector_,                                              \\\n+    load_delta_set_idx_map_,                                        \\\n+    load_item_var_store_,                                           \\\n+    get_item_delta_,                                                \\\n+    done_item_var_store_,                                           \\\n+    done_delta_set_idx_map_,                                        \\\n+    get_var_blend_,                                                 \\\n+    done_blend_                                                     \\\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svmm.h","additions":84,"deletions":41,"binary":false,"changes":125,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2004-2022 by\n+ * Copyright (C) 2004-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svotval.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svpfr.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svpostnm.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2012-2022 by\n+ * Copyright (C) 2012-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svprop.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svpscmap.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svpsinfo.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svsfnt.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svttcmap.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2006-2022 by\n+ * Copyright (C) 2006-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svtteng.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2007-2022 by\n+ * Copyright (C) 2007-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svttglyf.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/services\/svwinfnt.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/sfnt.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2022 by\n+ * Copyright (C) 2022-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/svginterface.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -175,2 +175,2 @@\n-    FT_Fixed       Ascender;\n-    FT_Fixed       Descender;\n+    FT_Fixed       Ascender;     \/* optional, mind the zero *\/\n+    FT_Fixed       Descender;    \/* optional, mind the zero *\/\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/t1types.h","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/tttypes.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/internal\/wofftypes.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2022 by\n+ * Copyright (C) 2022-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/otsvg.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/t1tables.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/ttnameid.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -427,2 +427,2 @@\n-    FT_UShort  usLowerOpticalPointSize;       \/* in twips (1\/20th points) *\/\n-    FT_UShort  usUpperOpticalPointSize;       \/* in twips (1\/20th points) *\/\n+    FT_UShort  usLowerOpticalPointSize;       \/* in twips (1\/20 points) *\/\n+    FT_UShort  usUpperOpticalPointSize;       \/* in twips (1\/20 points) *\/\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/tttables.h","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/freetype\/tttags.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/include\/ft2build.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -10,1 +10,1 @@\n- * Copyright (C) 2013-2022 by\n+ * Copyright (C) 2013-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afblue.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2013-2022 by\n+ * Copyright (C) 2013-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afblue.cin","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -5,1 +5,1 @@\n-\/\/ Copyright (C) 2013-2022 by\n+\/\/ Copyright (C) 2013-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afblue.dat","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -10,1 +10,1 @@\n- * Copyright (C) 2013-2022 by\n+ * Copyright (C) 2013-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afblue.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2013-2022 by\n+ * Copyright (C) 2013-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afblue.hin","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2006-2022 by\n+ * Copyright (C) 2006-2023 by\n@@ -653,1 +653,1 @@\n-    FT_Set_Charmap( face, oldmap );\n+    face->charmap = oldmap;\n@@ -744,1 +744,2 @@\n-                    blue->ref.cur \/ 64.0, blue->ref.fit \/ 64.0 ));\n+                    (double)blue->ref.cur \/ 64,\n+                    (double)blue->ref.fit \/ 64 ));\n@@ -746,1 +747,2 @@\n-                    blue->shoot.cur \/ 64.0, blue->shoot.fit \/ 64.0 ));\n+                    (double)blue->shoot.cur \/ 64,\n+                    (double)blue->shoot.fit \/ 64 ));\n@@ -1047,1 +1049,1 @@\n-      FT_Int   ee;\n+      FT_UInt  ee;\n@@ -1632,2 +1634,4 @@\n-                stem_edge->opos \/ 64.0, stem_edge->pos \/ 64.0,\n-                dist \/ 64.0, fitted_width \/ 64.0 ));\n+                (double)stem_edge->opos \/ 64,\n+                (double)stem_edge->pos \/ 64,\n+                (double)dist \/ 64,\n+                (double)fitted_width \/ 64 ));\n@@ -1853,2 +1857,2 @@\n-                    edge1 - edges, edge1->fpos, edge1->opos \/ 64.0,\n-                    blue->fit \/ 64.0, edge1->pos \/ 64.0 ));\n+                    edge1 - edges, edge1->fpos, (double)edge1->opos \/ 64,\n+                    (double)blue->fit \/ 64, (double)edge1->pos \/ 64 ));\n@@ -2027,2 +2031,2 @@\n-               ( edge->pos - edge->opos ) \/ 64.0,\n-               ( edge2->pos - edge2->opos ) \/ 64.0 );\n+               (double)( edge->pos - edge->opos ) \/ 64,\n+               (double)( edge2->pos - edge2->opos ) \/ 64 );\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afcjk.c","additions":15,"deletions":11,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2006-2022 by\n+ * Copyright (C) 2006-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afcjk.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2013-2022 by\n+ * Copyright (C) 2013-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afcover.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afdummy.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afdummy.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2005-2022 by\n+ * Copyright (C) 2005-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/aferrors.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n@@ -132,1 +132,2 @@\n-    FT_UInt     ss;\n+    FT_UShort   ss;\n+    FT_UShort   dflt        = 0xFFFFU; \/* a non-valid value *\/\n@@ -134,1 +135,0 @@\n-    FT_UInt     dflt        = ~0U; \/* a non-valid value *\/\n@@ -138,1 +138,1 @@\n-    for ( i = 0; i < (FT_UInt)globals->glyph_count; i++ )\n+    for ( i = 0; i < globals->glyph_count; i++ )\n@@ -171,2 +171,1 @@\n-        if ( (FT_UInt)style_class->script ==\n-             globals->module->default_script )\n+        if ( style_class->script == globals->module->default_script )\n@@ -186,1 +185,1 @@\n-               gindex < (FT_ULong)globals->glyph_count                    &&\n+               gindex < globals->glyph_count                              &&\n@@ -188,1 +187,1 @@\n-            gstyles[gindex] = (FT_UShort)ss;\n+            gstyles[gindex] = ss;\n@@ -197,1 +196,1 @@\n-            if ( gindex < (FT_ULong)globals->glyph_count                    &&\n+            if ( gindex < globals->glyph_count                              &&\n@@ -199,1 +198,1 @@\n-              gstyles[gindex] = (FT_UShort)ss;\n+              gstyles[gindex] = ss;\n@@ -214,3 +213,3 @@\n-          if ( gindex != 0                                          &&\n-               gindex < (FT_ULong)globals->glyph_count              &&\n-               ( gstyles[gindex] & AF_STYLE_MASK ) == (FT_UShort)ss )\n+          if ( gindex != 0                               &&\n+               gindex < globals->glyph_count             &&\n+               ( gstyles[gindex] & AF_STYLE_MASK ) == ss )\n@@ -226,2 +225,2 @@\n-            if ( gindex < (FT_ULong)globals->glyph_count              &&\n-                 ( gstyles[gindex] & AF_STYLE_MASK ) == (FT_UShort)ss )\n+            if ( gindex < globals->glyph_count             &&\n+                 ( gstyles[gindex] & AF_STYLE_MASK ) == ss )\n@@ -258,1 +257,1 @@\n-      if ( gindex != 0 && gindex < (FT_ULong)globals->glyph_count )\n+      if ( gindex != 0 && gindex < globals->glyph_count )\n@@ -269,1 +268,1 @@\n-      FT_Long  nn;\n+      FT_UInt  nn;\n@@ -293,1 +292,1 @@\n-      FT_Long        idx;\n+      FT_UInt        idx;\n@@ -305,1 +304,1 @@\n-          FT_TRACE4(( \" %ld\", idx ));\n+          FT_TRACE4(( \" %d\", idx ));\n@@ -321,1 +320,1 @@\n-    FT_Set_Charmap( face, old_charmap );\n+    face->charmap = old_charmap;\n@@ -348,1 +347,1 @@\n-    globals->glyph_count               = face->num_glyphs;\n+    globals->glyph_count               = (FT_UInt)face->num_glyphs;\n@@ -360,1 +359,1 @@\n-    globals->hb_font = hb_ft_font_create( face, NULL );\n+    globals->hb_font = hb_ft_font_create_( face, NULL );\n@@ -432,1 +431,1 @@\n-    if ( gindex >= (FT_ULong)globals->glyph_count )\n+    if ( gindex >= globals->glyph_count )\n@@ -504,1 +503,1 @@\n-    if ( gindex < (FT_ULong)globals->glyph_count )\n+    if ( gindex < globals->glyph_count )\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afglobal.c","additions":23,"deletions":24,"binary":false,"changes":47,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n@@ -108,1 +108,1 @@\n-    FT_Long          glyph_count;    \/* same as face->num_glyphs *\/\n+    FT_UInt          glyph_count;    \/* unsigned face->num_glyphs *\/\n@@ -161,1 +161,1 @@\n-  FT_LOCAL_DEF( FT_Bool )\n+  FT_LOCAL( FT_Bool )\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afglobal.h","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n@@ -154,3 +154,3 @@\n-      FT_Int  old_max = axis->max_segments;\n-      FT_Int  new_max = old_max;\n-      FT_Int  big_max = (FT_Int)( FT_INT_MAX \/ sizeof ( *segment ) );\n+      FT_UInt  old_max = axis->max_segments;\n+      FT_UInt  new_max = old_max;\n+      FT_UInt  big_max = FT_INT_MAX \/ sizeof ( *segment );\n@@ -196,1 +196,1 @@\n-  FT_LOCAL( FT_Error )\n+  FT_LOCAL_DEF( FT_Error )\n@@ -219,3 +219,3 @@\n-      FT_Int  old_max = axis->max_edges;\n-      FT_Int  new_max = old_max;\n-      FT_Int  big_max = (FT_Int)( FT_INT_MAX \/ sizeof ( *edge ) );\n+      FT_UInt  old_max = axis->max_edges;\n+      FT_UInt  new_max = old_max;\n+      FT_UInt  big_max = FT_INT_MAX \/ sizeof ( *edge );\n@@ -474,4 +474,4 @@\n-                point->ox \/ 64.0,\n-                point->oy \/ 64.0,\n-                point->x \/ 64.0,\n-                point->y \/ 64.0,\n+                (double)point->ox \/ 64,\n+                (double)point->oy \/ 64,\n+                (double)point->x \/ 64,\n+                (double)point->y \/ 64,\n@@ -600,1 +600,1 @@\n-                                   FT_Int*        num_segments )\n+                                   FT_UInt*       num_segments )\n@@ -626,1 +626,1 @@\n-                                     FT_Int         idx,\n+                                     FT_UInt        idx,\n@@ -643,1 +643,1 @@\n-    if ( idx < 0 || idx >= axis->num_segments )\n+    if ( idx >= axis->num_segments )\n@@ -695,2 +695,2 @@\n-                  65536.0 * 64.0 \/ hints->x_scale,\n-                  10.0 * hints->x_scale \/ 65536.0 \/ 64.0 ));\n+                  65536 * 64 \/ (double)hints->x_scale,\n+                  10 * (double)hints->x_scale \/ 65536 \/ 64 ));\n@@ -700,2 +700,2 @@\n-                  65536.0 * 64.0 \/ hints->y_scale,\n-                  10.0 * hints->y_scale \/ 65536.0 \/ 64.0 ));\n+                  65536 * 64 \/ (double)hints->y_scale,\n+                  10 * (double)hints->y_scale \/ 65536 \/ 64 ));\n@@ -717,1 +717,1 @@\n-                  (int)edge->opos \/ 64.0,\n+                  (double)(int)edge->opos \/ 64,\n@@ -723,2 +723,2 @@\n-                  edge->opos \/ 64.0,\n-                  edge->pos \/ 64.0,\n+                  (double)edge->opos \/ 64,\n+                  (double)edge->pos \/ 64,\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afhints.c","additions":22,"deletions":22,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n@@ -24,2 +24,0 @@\n-#define xxAF_SORT_SEGMENTS\n-\n@@ -313,2 +311,2 @@\n-    FT_Int        num_segments; \/* number of used segments      *\/\n-    FT_Int        max_segments; \/* number of allocated segments *\/\n+    FT_UInt       num_segments; \/* number of used segments      *\/\n+    FT_UInt       max_segments; \/* number of allocated segments *\/\n@@ -316,3 +314,0 @@\n-#ifdef AF_SORT_SEGMENTS\n-    FT_Int        mid_segments;\n-#endif\n@@ -320,2 +315,2 @@\n-    FT_Int        num_edges;    \/* number of used edges      *\/\n-    FT_Int        max_edges;    \/* number of allocated edges *\/\n+    FT_UInt       num_edges;    \/* number of used edges      *\/\n+    FT_UInt       max_edges;    \/* number of allocated edges *\/\n@@ -383,1 +378,1 @@\n-          ( !_af_debug_disable_horz_hints                            && \\\n+          ( !af_debug_disable_horz_hints_                            && \\\n@@ -387,1 +382,1 @@\n-          ( !_af_debug_disable_vert_hints                          && \\\n+          ( !af_debug_disable_vert_hints_                          && \\\n@@ -390,1 +385,1 @@\n-#define AF_HINTS_DO_BLUES( h )  ( !_af_debug_disable_blue_hints )\n+#define AF_HINTS_DO_BLUES( h )  ( !af_debug_disable_blue_hints_ )\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afhints.h","additions":8,"deletions":13,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2007-2022 by\n+ * Copyright (C) 2007-2023 by\n@@ -52,2 +52,1 @@\n-    FT_Set_Charmap( face, oldmap );\n-\n+    face->charmap = oldmap;\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afindic.c","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 2007-2022 by\n+ * Copyright (C) 2007-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afindic.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n@@ -1046,1 +1046,1 @@\n-      FT_Long  i;\n+      FT_UInt  i;\n@@ -1160,1 +1160,1 @@\n-    FT_Set_Charmap( face, oldmap );\n+    face->charmap = oldmap;\n@@ -1278,2 +1278,2 @@\n-                          scale \/ 65536.0,\n-                          new_scale \/ 65536.0,\n+                          (double)scale \/ 65536,\n+                          (double)new_scale \/ 65536,\n@@ -1330,1 +1330,1 @@\n-                  width->cur \/ 64.0 ));\n+                  (double)width->cur \/ 64 ));\n@@ -1474,1 +1474,1 @@\n-                    blue->ref.fit \/ 64.0,\n+                    (double)blue->ref.fit \/ 64,\n@@ -1480,1 +1480,1 @@\n-                    blue->shoot.fit \/ 64.0,\n+                    (double)blue->shoot.fit \/ 64,\n@@ -2206,1 +2206,1 @@\n-      FT_Int   ee;\n+      FT_UInt  ee;\n@@ -2280,1 +2280,1 @@\n-      FT_Int   ee;\n+      FT_UInt  ee;\n@@ -2958,2 +2958,3 @@\n-                stem_edge - hints->axis[dim].edges, stem_edge->opos \/ 64.0,\n-                stem_edge->pos \/ 64.0, dist \/ 64.0, fitted_width \/ 64.0 ));\n+                stem_edge - hints->axis[dim].edges,\n+                (double)stem_edge->opos \/ 64, (double)stem_edge->pos \/ 64,\n+                (double)dist \/ 64, (double)fitted_width \/ 64 ));\n@@ -3082,2 +3083,3 @@\n-                      edge1 - edges, edge1->opos \/ 64.0, blue->fit \/ 64.0,\n-                      edge1->pos \/ 64.0, edge - edges ));\n+                      edge1 - edges,\n+                      (double)edge1->opos \/ 64, (double)blue->fit \/ 64,\n+                      (double)edge1->pos \/ 64, edge - edges ));\n@@ -3087,2 +3089,3 @@\n-                      edge1 - edges, edge1->opos \/ 64.0, blue->fit \/ 64.0,\n-                      edge1->pos \/ 64.0 ));\n+                      edge1 - edges,\n+                      (double)edge1->opos \/ 64, (double)blue->fit \/ 64,\n+                      (double)edge1->pos \/ 64 ));\n@@ -3204,3 +3207,3 @@\n-                    edge - edges, edge->opos \/ 64.0,\n-                    edge2 - edges, edge2->opos \/ 64.0,\n-                    edge->pos \/ 64.0, edge2->pos \/ 64.0 ));\n+                    edge - edges, (double)edge->opos \/ 64,\n+                    edge2 - edges, (double)edge2->opos \/ 64,\n+                    (double)edge->pos \/ 64, (double)edge2->pos \/ 64 ));\n@@ -3232,2 +3235,2 @@\n-                      edge - edges, edge->pos \/ 64.0,\n-                      ( edge2->pos - cur_len ) \/ 64.0 ));\n+                      edge - edges, (double)edge->pos \/ 64,\n+                      (double)( edge2->pos - cur_len ) \/ 64 ));\n@@ -3274,3 +3277,3 @@\n-                      edge - edges, edge->opos \/ 64.0,\n-                      edge2 - edges, edge2->opos \/ 64.0,\n-                      edge->pos \/ 64.0, edge2->pos \/ 64.0 ));\n+                      edge - edges, (double)edge->opos \/ 64,\n+                      edge2 - edges, (double)edge2->opos \/ 64,\n+                      (double)edge->pos \/ 64, (double)edge2->pos \/ 64 ));\n@@ -3305,3 +3308,3 @@\n-                      edge - edges, edge->opos \/ 64.0,\n-                      edge2 - edges, edge2->opos \/ 64.0,\n-                      edge->pos \/ 64.0, edge2->pos \/ 64.0 ));\n+                      edge - edges, (double)edge->opos \/ 64,\n+                      edge2 - edges, (double)edge2->opos \/ 64,\n+                      (double)edge->pos \/ 64, (double)edge2->pos \/ 64 ));\n@@ -3328,2 +3331,2 @@\n-                        edge->pos \/ 64.0,\n-                        edge[-1].pos \/ 64.0 ));\n+                        (double)edge->pos \/ 64,\n+                        (double)edge[-1].pos \/ 64 ));\n@@ -3430,3 +3433,3 @@\n-                      edge - edges, edge->opos \/ 64.0,\n-                      edge->serif - edges, edge->serif->opos \/ 64.0,\n-                      edge->pos \/ 64.0 ));\n+                      edge - edges, (double)edge->opos \/ 64,\n+                      edge->serif - edges, (double)edge->serif->opos \/ 64,\n+                      (double)edge->pos \/ 64 ));\n@@ -3440,1 +3443,2 @@\n-                      edge-edges, edge->opos \/ 64.0, edge->pos \/ 64.0 ));\n+                      edge-edges,\n+                      (double)edge->opos \/ 64, (double)edge->pos \/ 64 ));\n@@ -3468,3 +3472,3 @@\n-                        edge - edges, edge->opos \/ 64.0,\n-                        edge->pos \/ 64.0,\n-                        before - edges, before->opos \/ 64.0 ));\n+                        edge - edges, (double)edge->opos \/ 64,\n+                        (double)edge->pos \/ 64,\n+                        before - edges, (double)before->opos \/ 64 ));\n@@ -3478,1 +3482,2 @@\n-                        edge - edges, edge->opos \/ 64.0, edge->pos \/ 64.0 ));\n+                        edge - edges,\n+                        (double)edge->opos \/ 64, (double)edge->pos \/ 64 ));\n@@ -3498,2 +3503,2 @@\n-                        edge->pos \/ 64.0,\n-                        edge[-1].pos \/ 64.0 ));\n+                        (double)edge->pos \/ 64,\n+                        (double)edge[-1].pos \/ 64 ));\n@@ -3519,2 +3524,2 @@\n-                        edge->pos \/ 64.0,\n-                        edge[1].pos \/ 64.0 ));\n+                        (double)edge->pos \/ 64,\n+                        (double)edge[1].pos \/ 64 ));\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/aflatin.c","additions":46,"deletions":41,"binary":false,"changes":87,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/aflatin.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n@@ -232,3 +232,0 @@\n-    if ( !size )\n-      return FT_THROW( Invalid_Size_Handle );\n-\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afloader.c","additions":1,"deletions":4,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n@@ -78,1 +78,1 @@\n-  FT_LOCAL_DEF( FT_Fixed )\n+  FT_LOCAL( FT_Fixed )\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afloader.h","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n@@ -46,3 +46,3 @@\n-  int  _af_debug_disable_horz_hints;\n-  int  _af_debug_disable_vert_hints;\n-  int  _af_debug_disable_blue_hints;\n+  int  af_debug_disable_horz_hints_;\n+  int  af_debug_disable_vert_hints_;\n+  int  af_debug_disable_blue_hints_;\n@@ -51,1 +51,1 @@\n-  static AF_GlyphHintsRec  _af_debug_hints_rec[1];\n+  static AF_GlyphHintsRec  af_debug_hints_rec_[1];\n@@ -53,1 +53,1 @@\n-  void*  _af_debug_hints = _af_debug_hints_rec;\n+  void*  af_debug_hints_ = af_debug_hints_rec_;\n@@ -122,2 +122,2 @@\n-      FT_UInt*  fallback_script;\n-      FT_UInt   ss;\n+      AF_Script*  fallback_script;\n+      FT_UInt     ss;\n@@ -131,1 +131,1 @@\n-      fallback_script = (FT_UInt*)value;\n+      fallback_script = (AF_Script*)value;\n@@ -141,2 +141,2 @@\n-        if ( (FT_UInt)style_class->script == *fallback_script &&\n-             style_class->coverage == AF_COVERAGE_DEFAULT     )\n+        if ( style_class->script   == *fallback_script    &&\n+             style_class->coverage == AF_COVERAGE_DEFAULT )\n@@ -160,1 +160,1 @@\n-      FT_UInt*  default_script;\n+      AF_Script*  default_script;\n@@ -168,1 +168,1 @@\n-      default_script = (FT_UInt*)value;\n+      default_script = (AF_Script*)value;\n@@ -294,2 +294,0 @@\n-    FT_UInt    fallback_style = module->fallback_style;\n-    FT_UInt    default_script = module->default_script;\n@@ -312,1 +310,1 @@\n-      FT_UInt*  val = (FT_UInt*)value;\n+      AF_Script*  val = (AF_Script*)value;\n@@ -314,1 +312,1 @@\n-      AF_StyleClass  style_class = af_style_classes[fallback_style];\n+      AF_StyleClass  style_class = af_style_classes[module->fallback_style];\n@@ -323,1 +321,1 @@\n-      FT_UInt*  val = (FT_UInt*)value;\n+      AF_Script*  val = (AF_Script*)value;\n@@ -326,1 +324,1 @@\n-      *val = default_script;\n+      *val = module->default_script;\n@@ -428,2 +426,2 @@\n-    if ( _af_debug_hints_rec->memory )\n-      af_glyph_hints_done( _af_debug_hints_rec );\n+    if ( af_debug_hints_rec_->memory )\n+      af_glyph_hints_done( af_debug_hints_rec_ );\n@@ -448,1 +446,1 @@\n-    AF_GlyphHints  hints = _af_debug_hints_rec;\n+    AF_GlyphHints  hints = af_debug_hints_rec_;\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afmodule.c","additions":20,"deletions":22,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n@@ -39,1 +39,1 @@\n-    FT_UInt       default_script;\n+    AF_Script     default_script;\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afmodule.h","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2013-2022 by\n+ * Copyright (C) 2013-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afranges.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2013-2022 by\n+ * Copyright (C) 2013-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afranges.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2013-2022 by\n+ * Copyright (C) 2013-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afscript.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2013-2022 by\n+ * Copyright (C) 2013-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afshaper.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2013-2022 by\n+ * Copyright (C) 2013-2023 by\n@@ -30,1 +30,1 @@\n-#include <hb-ft.h>\n+#include \"ft-hb.h\"\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afshaper.h","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2013-2022 by\n+ * Copyright (C) 2013-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afstyles.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n@@ -60,4 +60,4 @@\n-extern int    _af_debug_disable_horz_hints;\n-extern int    _af_debug_disable_vert_hints;\n-extern int    _af_debug_disable_blue_hints;\n-extern void*  _af_debug_hints;\n+extern int    af_debug_disable_horz_hints_;\n+extern int    af_debug_disable_vert_hints_;\n+extern int    af_debug_disable_blue_hints_;\n+extern void*  af_debug_hints_;\n@@ -122,7 +122,7 @@\n-    FT_Face         face;        \/* source font face                        *\/\n-    FT_Fixed        x_scale;     \/* from font units to 1\/64th device pixels *\/\n-    FT_Fixed        y_scale;     \/* from font units to 1\/64th device pixels *\/\n-    FT_Pos          x_delta;     \/* in 1\/64th device pixels                 *\/\n-    FT_Pos          y_delta;     \/* in 1\/64th device pixels                 *\/\n-    FT_Render_Mode  render_mode; \/* monochrome, anti-aliased, LCD, etc.     *\/\n-    FT_UInt32       flags;       \/* additional control flags, see above     *\/\n+    FT_Face         face;        \/* source font face                      *\/\n+    FT_Fixed        x_scale;     \/* from font units to 1\/64 device pixels *\/\n+    FT_Fixed        y_scale;     \/* from font units to 1\/64 device pixels *\/\n+    FT_Pos          x_delta;     \/* in 1\/64 device pixels                 *\/\n+    FT_Pos          y_delta;     \/* in 1\/64 device pixels                 *\/\n+    FT_Render_Mode  render_mode; \/* monochrome, anti-aliased, LCD, etc.   *\/\n+    FT_UInt32       flags;       \/* additional control flags, see above   *\/\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/aftypes.h","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2013-2022 by\n+ * Copyright (C) 2013-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afws-decl.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2013-2022 by\n+ * Copyright (C) 2013-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/autofit\/afws-iter.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2008-2022 by\n+ * Copyright (C) 2008-2023 by\n@@ -26,1 +26,1 @@\n-  _ft_face_scale_advances( FT_Face    face,\n+  ft_face_scale_advances_( FT_Face    face,\n@@ -99,1 +99,1 @@\n-        return _ft_face_scale_advances( face, padvance, 1, flags );\n+        return ft_face_scale_advances_( face, padvance, 1, flags );\n@@ -145,1 +145,1 @@\n-        return _ft_face_scale_advances( face, padvances, count, flags );\n+        return ft_face_scale_advances_( face, padvances, count, flags );\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftadvanc.c","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2008-2022 by\n+ * Copyright (C) 2008-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftbase.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftbbox.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2004-2022 by\n+ * Copyright (C) 2004-2023 by\n@@ -69,5 +69,2 @@\n-\n-    FT_Int    pitch;\n-    FT_ULong  size;\n-\n-    FT_Int  source_pitch_sign, target_pitch_sign;\n+    FT_Int     pitch;\n+    FT_Int     flip;\n@@ -85,2 +82,2 @@\n-    source_pitch_sign = source->pitch < 0 ? -1 : 1;\n-    target_pitch_sign = target->pitch < 0 ? -1 : 1;\n+    flip = ( source->pitch < 0 && target->pitch > 0 ) ||\n+           ( source->pitch > 0 && target->pitch < 0 );\n@@ -88,5 +85,7 @@\n-    if ( !source->buffer )\n-    {\n-      *target = *source;\n-      if ( source_pitch_sign != target_pitch_sign )\n-        target->pitch = -target->pitch;\n+    memory = library->memory;\n+    FT_FREE( target->buffer );\n+\n+    *target = *source;\n+\n+    if ( flip )\n+      target->pitch = -target->pitch;\n@@ -94,0 +93,1 @@\n+    if ( !source->buffer )\n@@ -95,1 +95,0 @@\n-    }\n@@ -97,1 +96,0 @@\n-    memory = library->memory;\n@@ -99,1 +97,0 @@\n-\n@@ -102,6 +99,0 @@\n-    size = (FT_ULong)pitch * source->rows;\n-\n-    if ( target->buffer )\n-    {\n-      FT_Int    target_pitch = target->pitch;\n-      FT_ULong  target_size;\n@@ -109,10 +100,1 @@\n-\n-      if ( target_pitch < 0 )\n-        target_pitch = -target_pitch;\n-      target_size = (FT_ULong)target_pitch * target->rows;\n-\n-      if ( target_size != size )\n-        FT_MEM_QREALLOC( target->buffer, target_size, size );\n-    }\n-    else\n-      FT_MEM_QALLOC( target->buffer, size );\n+    FT_MEM_QALLOC_MULT( target->buffer, target->rows, pitch );\n@@ -122,10 +104,1 @@\n-      unsigned char *p;\n-\n-\n-      p = target->buffer;\n-      *target = *source;\n-      target->buffer = p;\n-\n-      if ( source_pitch_sign == target_pitch_sign )\n-        FT_MEM_COPY( target->buffer, source->buffer, size );\n-      else\n+      if ( flip )\n@@ -149,0 +122,3 @@\n+      else\n+        FT_MEM_COPY( target->buffer, source->buffer,\n+                     (FT_Long)source->rows * pitch );\n@@ -545,2 +521,3 @@\n-        FT_Int    pad, old_target_pitch, target_pitch;\n-        FT_ULong  old_size;\n+        FT_Int  width = (FT_Int)source->width;\n+        FT_Int  neg   = ( target->pitch == 0 && source->pitch < 0 ) ||\n+                          target->pitch  < 0;\n@@ -549,5 +526,1 @@\n-        old_target_pitch = target->pitch;\n-        if ( old_target_pitch < 0 )\n-          old_target_pitch = -old_target_pitch;\n-\n-        old_size = target->rows * (FT_UInt)old_target_pitch;\n+        FT_Bitmap_Done( library, target );\n@@ -559,2 +532,1 @@\n-        pad = 0;\n-        if ( alignment > 0 )\n+        if ( alignment )\n@@ -562,4 +534,1 @@\n-          pad = (FT_Int)source->width % alignment;\n-          if ( pad != 0 )\n-            pad = alignment - pad;\n-        }\n+          FT_Int  rem = width % alignment;\n@@ -567,1 +536,0 @@\n-        target_pitch = (FT_Int)source->width + pad;\n@@ -569,3 +537,4 @@\n-        if ( target_pitch > 0                                               &&\n-             (FT_ULong)target->rows > FT_ULONG_MAX \/ (FT_ULong)target_pitch )\n-          return FT_THROW( Invalid_Argument );\n+          if ( rem )\n+            width = alignment > 0 ? width - rem + alignment\n+                                  : width - rem - alignment;\n+        }\n@@ -573,2 +542,1 @@\n-        if ( FT_QREALLOC( target->buffer,\n-                          old_size, target->rows * (FT_UInt)target_pitch ) )\n+        if ( FT_QALLOC_MULT( target->buffer, target->rows, width ) )\n@@ -577,1 +545,1 @@\n-        target->pitch = target->pitch < 0 ? -target_pitch : target_pitch;\n+        target->pitch = neg ? -width : width;\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftbitmap.c","additions":30,"deletions":62,"binary":false,"changes":92,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -1088,0 +1088,67 @@\n+  FT_BASE_DEF( FT_Int32 )\n+  FT_MulAddFix( FT_Fixed*  s,\n+                FT_Int32*  f,\n+                FT_UInt    count )\n+  {\n+    FT_UInt   i;\n+    FT_Int64  temp;\n+#ifndef FT_INT64\n+    FT_Int64  halfUnit;\n+#endif\n+\n+\n+#ifdef FT_INT64\n+    temp = 0;\n+\n+    for ( i = 0; i < count; ++i )\n+      temp += (FT_Int64)s[i] * f[i];\n+\n+    return ( temp + 0x8000 ) >> 16;\n+#else\n+    temp.hi = 0;\n+    temp.lo = 0;\n+\n+    for ( i = 0; i < count; ++i )\n+    {\n+      FT_Int64  multResult;\n+\n+      FT_Int     sign  = 1;\n+      FT_UInt32  carry = 0;\n+\n+      FT_UInt32  scalar;\n+      FT_UInt32  factor;\n+\n+\n+      scalar = (FT_UInt32)s[i];\n+      factor = (FT_UInt32)f[i];\n+\n+      FT_MOVE_SIGN( s[i], scalar, sign );\n+      FT_MOVE_SIGN( f[i], factor, sign );\n+\n+      ft_multo64( scalar, factor, &multResult );\n+\n+      if ( sign < 0 )\n+      {\n+        \/* Emulated `FT_Int64` negation. *\/\n+        carry = ( multResult.lo == 0 );\n+\n+        multResult.lo = ~multResult.lo + 1;\n+        multResult.hi = ~multResult.hi + carry;\n+      }\n+\n+      FT_Add64( &temp, &multResult, &temp );\n+    }\n+\n+    \/* Round value. *\/\n+    halfUnit.hi = 0;\n+    halfUnit.lo = 0x8000;\n+    FT_Add64( &temp, &halfUnit, &temp );\n+\n+    return (FT_Int32)( ( (FT_Int32)( temp.hi & 0xFFFF ) << 16 ) |\n+                                   ( temp.lo >> 16 )            );\n+\n+#endif \/* !FT_INT64 *\/\n+\n+  }\n+\n+\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftcalc.c","additions":68,"deletions":1,"binary":false,"changes":69,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2007-2022 by\n+ * Copyright (C) 2007-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftcid.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2018-2022 by\n+ * Copyright (C) 2018-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftcolor.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n@@ -38,2 +38,2 @@\n-  FT_BASE_DEF( const char* )  _ft_debug_file   = NULL;\n-  FT_BASE_DEF( long )         _ft_debug_lineno = 0;\n+  FT_BASE_DEF( const char* )  ft_debug_file_   = NULL;\n+  FT_BASE_DEF( long )         ft_debug_lineno_ = 0;\n@@ -418,2 +418,2 @@\n-    hash  = (FT_UInt32)(FT_PtrDist)(void*)_ft_debug_file +\n-              (FT_UInt32)( 5 * _ft_debug_lineno );\n+    hash  = (FT_UInt32)(FT_PtrDist)(void*)ft_debug_file_ +\n+              (FT_UInt32)( 5 * ft_debug_lineno_ );\n@@ -428,2 +428,2 @@\n-      if ( node->file_name == _ft_debug_file   &&\n-           node->line_no   == _ft_debug_lineno )\n+      if ( node->file_name == ft_debug_file_   &&\n+           node->line_no   == ft_debug_lineno_ )\n@@ -440,2 +440,2 @@\n-    node->file_name = _ft_debug_file;\n-    node->line_no   = _ft_debug_lineno;\n+    node->file_name = ft_debug_file_;\n+    node->line_no   = ft_debug_lineno_;\n@@ -498,1 +498,1 @@\n-            FT_FILENAME( _ft_debug_file ), _ft_debug_lineno );\n+            FT_FILENAME( ft_debug_file_ ), ft_debug_lineno_ );\n@@ -585,1 +585,1 @@\n-            FT_FILENAME( _ft_debug_file ), _ft_debug_lineno,\n+            FT_FILENAME( ft_debug_file_ ), ft_debug_lineno_,\n@@ -607,2 +607,2 @@\n-          node->free_file_name = _ft_debug_file;\n-          node->free_line_no   = _ft_debug_lineno;\n+          node->free_file_name = ft_debug_file_;\n+          node->free_line_no   = ft_debug_lineno_;\n@@ -630,1 +630,1 @@\n-          FT_FILENAME( _ft_debug_file ), _ft_debug_lineno );\n+          FT_FILENAME( ft_debug_file_ ), ft_debug_lineno_ );\n@@ -664,2 +664,2 @@\n-    _ft_debug_file   = \"<unknown>\";\n-    _ft_debug_lineno = 0;\n+    ft_debug_file_   = \"<unknown>\";\n+    ft_debug_lineno_ = 0;\n@@ -680,2 +680,2 @@\n-                          FT_FILENAME( _ft_debug_file ),\n-                          _ft_debug_lineno );\n+                          FT_FILENAME( ft_debug_file_ ),\n+                          ft_debug_lineno_ );\n@@ -690,2 +690,2 @@\n-    _ft_debug_file   = \"<unknown>\";\n-    _ft_debug_lineno = 0;\n+    ft_debug_file_   = \"<unknown>\";\n+    ft_debug_lineno_ = 0;\n@@ -706,2 +706,2 @@\n-    const char*  file_name = FT_FILENAME( _ft_debug_file );\n-    FT_Long      line_no   = _ft_debug_lineno;\n+    const char*  file_name = FT_FILENAME( ft_debug_file_ );\n+    FT_Long      line_no   = ft_debug_lineno_;\n@@ -770,2 +770,2 @@\n-    _ft_debug_file   = \"<unknown>\";\n-    _ft_debug_lineno = 0;\n+    ft_debug_file_   = \"<unknown>\";\n+    ft_debug_lineno_ = 0;\n@@ -877,1 +877,1 @@\n-  static int\n+  FT_COMPARE_DEF( int )\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftdbgmem.c","additions":25,"deletions":25,"binary":false,"changes":50,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftdebug.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftfntfmt.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2008-2022 by\n+ * Copyright (C) 2008-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftfstype.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2007-2022 by\n+ * Copyright (C) 2007-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftgasp.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n@@ -215,1 +215,1 @@\n-    FT_UInt      new_max, old_max;\n+    FT_UInt  new_max, old_max, min_new_max;\n@@ -220,1 +220,1 @@\n-      return error;\n+      goto Exit;\n@@ -229,1 +229,5 @@\n-      new_max = FT_PAD_CEIL( new_max, 8 );\n+      if ( new_max > FT_OUTLINE_POINTS_MAX )\n+      {\n+        error = FT_THROW( Array_Too_Large );\n+        goto Exit;\n+      }\n@@ -231,0 +235,4 @@\n+      min_new_max = old_max + ( old_max >> 1 );\n+      if ( new_max < min_new_max )\n+        new_max = min_new_max;\n+      new_max = FT_PAD_CEIL( new_max, 8 );\n@@ -232,1 +240,1 @@\n-        return FT_THROW( Array_Too_Large );\n+        new_max = FT_OUTLINE_POINTS_MAX;\n@@ -257,1 +265,1 @@\n-      return error;\n+      goto Exit;\n@@ -265,1 +273,5 @@\n-      new_max = FT_PAD_CEIL( new_max, 4 );\n+      if ( new_max > FT_OUTLINE_CONTOURS_MAX )\n+      {\n+        error = FT_THROW( Array_Too_Large );\n+        goto Exit;\n+      }\n@@ -267,0 +279,4 @@\n+      min_new_max = old_max + ( old_max >> 1 );\n+      if ( new_max < min_new_max )\n+        new_max = min_new_max;\n+      new_max = FT_PAD_CEIL( new_max, 4 );\n@@ -268,1 +284,1 @@\n-        return FT_THROW( Array_Too_Large );\n+        new_max = FT_OUTLINE_CONTOURS_MAX;\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftgloadr.c","additions":24,"deletions":8,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -685,0 +685,1 @@\n+    {\n@@ -686,0 +687,2 @@\n+      *aglyph = NULL;\n+    }\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftglyph.c","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftinit.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2006-2022 by\n+ * Copyright (C) 2006-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftlcdfil.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -11,1 +11,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -70,0 +70,1 @@\n+#include <freetype\/internal\/ftdebug.h>\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftmac.c","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftmm.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -511,1 +511,1 @@\n-      \/* fall through *\/\n+      FALL_THROUGH;\n@@ -608,1 +608,1 @@\n-        slot->internal->load_flags &= ~FT_GLYPH_OWN_GZIP_SVG;\n+        slot->internal->flags &= ~FT_GLYPH_OWN_GZIP_SVG;\n@@ -634,2 +634,3 @@\n-      \/* free memory in case SVG was there *\/\n-      if ( slot->internal->flags & FT_GLYPH_OWN_GZIP_SVG )\n+      \/* Free memory in case SVG was there.                          *\/\n+      \/* `slot->internal` might be NULL in out-of-memory situations. *\/\n+      if ( slot->internal && slot->internal->flags & FT_GLYPH_OWN_GZIP_SVG )\n@@ -1187,2 +1188,2 @@\n-    FT_TRACE5(( \"  x advance: %f\\n\", slot->advance.x \/ 64.0 ));\n-    FT_TRACE5(( \"  y advance: %f\\n\", slot->advance.y \/ 64.0 ));\n+    FT_TRACE5(( \"  x advance: %f\\n\", (double)slot->advance.x \/ 64 ));\n+    FT_TRACE5(( \"  y advance: %f\\n\", (double)slot->advance.y \/ 64 ));\n@@ -1190,1 +1191,1 @@\n-                slot->linearHoriAdvance \/ 65536.0 ));\n+                (double)slot->linearHoriAdvance \/ 65536 ));\n@@ -1192,1 +1193,1 @@\n-                slot->linearVertAdvance \/ 65536.0 ));\n+                (double)slot->linearVertAdvance \/ 65536 ));\n@@ -1199,2 +1200,2 @@\n-      FT_TRACE5(( \"    width:  %f\\n\", metrics->width  \/ 64.0 ));\n-      FT_TRACE5(( \"    height: %f\\n\", metrics->height \/ 64.0 ));\n+      FT_TRACE5(( \"    width:  %f\\n\", (double)metrics->width \/ 64 ));\n+      FT_TRACE5(( \"    height: %f\\n\", (double)metrics->height \/ 64 ));\n@@ -1202,3 +1203,6 @@\n-      FT_TRACE5(( \"    horiBearingX: %f\\n\", metrics->horiBearingX \/ 64.0 ));\n-      FT_TRACE5(( \"    horiBearingY: %f\\n\", metrics->horiBearingY \/ 64.0 ));\n-      FT_TRACE5(( \"    horiAdvance:  %f\\n\", metrics->horiAdvance  \/ 64.0 ));\n+      FT_TRACE5(( \"    horiBearingX: %f\\n\",\n+                  (double)metrics->horiBearingX \/ 64 ));\n+      FT_TRACE5(( \"    horiBearingY: %f\\n\",\n+                  (double)metrics->horiBearingY \/ 64 ));\n+      FT_TRACE5(( \"    horiAdvance:  %f\\n\",\n+                  (double)metrics->horiAdvance \/ 64 ));\n@@ -1206,3 +1210,6 @@\n-      FT_TRACE5(( \"    vertBearingX: %f\\n\", metrics->vertBearingX \/ 64.0 ));\n-      FT_TRACE5(( \"    vertBearingY: %f\\n\", metrics->vertBearingY \/ 64.0 ));\n-      FT_TRACE5(( \"    vertAdvance:  %f\\n\", metrics->vertAdvance  \/ 64.0 ));\n+      FT_TRACE5(( \"    vertBearingX: %f\\n\",\n+                  (double)metrics->vertBearingX \/ 64 ));\n+      FT_TRACE5(( \"    vertBearingY: %f\\n\",\n+                  (double)metrics->vertBearingY \/ 64 ));\n+      FT_TRACE5(( \"    vertAdvance:  %f\\n\",\n+                  (double)metrics->vertAdvance \/ 64 ));\n@@ -1491,1 +1498,1 @@\n-             FT_Bool        external_stream,\n+             FT_Bool        *anexternal_stream,\n@@ -1517,1 +1524,1 @@\n-    if ( external_stream )\n+    if ( *anexternal_stream )\n@@ -1547,1 +1554,4 @@\n-    *astream = face->stream; \/* Stream may have been changed. *\/\n+    \/* Stream may have been changed. *\/\n+    *astream = face->stream;\n+    *anexternal_stream =\n+      ( face->face_flags & FT_FACE_FLAG_EXTERNAL_STREAM ) != 0;\n@@ -1671,1 +1681,1 @@\n-    FT_Memory  memory = stream->memory;\n+    FT_Memory  memory = (FT_Memory)stream->descriptor.pointer;\n@@ -1675,1 +1685,0 @@\n-\n@@ -1678,0 +1687,1 @@\n+    FT_FREE( stream );\n@@ -1708,1 +1718,2 @@\n-    stream->close = close;\n+    stream->descriptor.pointer = memory;\n+    stream->close              = close;\n@@ -1729,1 +1740,0 @@\n-    FT_Stream     stream = NULL;\n@@ -1733,0 +1743,15 @@\n+    args.flags = 0;\n+\n+    if ( driver_name )\n+    {\n+      args.driver = FT_Get_Module( library, driver_name );\n+      if ( !args.driver )\n+      {\n+        FT_FREE( base );\n+        return FT_THROW( Missing_Module );\n+      }\n+\n+      args.flags = args.flags | FT_OPEN_DRIVER;\n+    }\n+\n+    \/* `memory_stream_close` also frees the stream object. *\/\n@@ -1737,1 +1762,1 @@\n-                               &stream );\n+                               &args.stream );\n@@ -1744,7 +1769,1 @@\n-    args.flags  = FT_OPEN_STREAM;\n-    args.stream = stream;\n-    if ( driver_name )\n-    {\n-      args.flags  = args.flags | FT_OPEN_DRIVER;\n-      args.driver = FT_Get_Module( library, driver_name );\n-    }\n+    args.flags |= FT_OPEN_STREAM;\n@@ -1762,15 +1781,1 @@\n-    error = ft_open_face_internal( library, &args, face_index, aface, 0 );\n-\n-    if ( !error )\n-      (*aface)->face_flags &= ~FT_FACE_FLAG_EXTERNAL_STREAM;\n-    else\n-#ifdef FT_MACINTOSH\n-      FT_Stream_Free( stream, 0 );\n-#else\n-    {\n-      FT_Stream_Close( stream );\n-      FT_FREE( stream );\n-    }\n-#endif\n-\n-    return error;\n+    return ft_open_face_internal( library, &args, face_index, aface, 0 );\n@@ -1919,1 +1924,1 @@\n-                                   is_sfnt_cid ? \"cid\" : \"type1\",\n+                                   is_sfnt_cid ? \"t1cid\" : \"type1\",\n@@ -2180,1 +2185,1 @@\n-    FT_Long    rlen;\n+    FT_ULong   rlen;\n@@ -2195,1 +2200,1 @@\n-    if ( FT_READ_LONG( rlen ) )\n+    if ( FT_READ_ULONG( rlen ) )\n@@ -2197,1 +2202,1 @@\n-    if ( rlen < 1 )\n+    if ( !rlen )\n@@ -2199,1 +2204,1 @@\n-    if ( (FT_ULong)rlen > FT_MAC_RFORK_MAX_LEN )\n+    if ( rlen > FT_MAC_RFORK_MAX_LEN )\n@@ -2217,2 +2222,3 @@\n-    error = FT_Stream_Read( stream, (FT_Byte *)sfnt_data, (FT_ULong)rlen );\n-    if ( error ) {\n+    error = FT_Stream_Read( stream, (FT_Byte *)sfnt_data, rlen );\n+    if ( error )\n+    {\n@@ -2226,1 +2232,1 @@\n-                                   (FT_ULong)rlen,\n+                                   rlen,\n@@ -2555,1 +2561,1 @@\n-    if ( ( !aface && face_index >= 0 ) || !args )\n+    if ( !args )\n@@ -2566,0 +2572,8 @@\n+    \/* Do this error check after `FT_Stream_New` to ensure that the *\/\n+    \/* 'close' callback is called.                                  *\/\n+    if ( !aface && face_index >= 0 )\n+    {\n+      error = FT_THROW( Invalid_Argument );\n+      goto Fail3;\n+    }\n+\n@@ -2587,1 +2601,1 @@\n-        error = open_face( driver, &stream, external_stream, face_index,\n+        error = open_face( driver, &stream, &external_stream, face_index,\n@@ -2623,1 +2637,1 @@\n-          error = open_face( driver, &stream, external_stream, face_index,\n+          error = open_face( driver, &stream, &external_stream, face_index,\n@@ -2855,2 +2869,2 @@\n-  FT_Attach_Stream( FT_Face        face,\n-                    FT_Open_Args*  parameters )\n+  FT_Attach_Stream( FT_Face              face,\n+                    const FT_Open_Args*  parameters )\n@@ -3281,1 +3295,1 @@\n-      if ( req->width )\n+      if ( req->height || !req->width )\n@@ -3283,3 +3297,1 @@\n-        metrics->x_scale = FT_DivFix( scaled_w, w );\n-\n-        if ( req->height )\n+        if ( h == 0 )\n@@ -3287,9 +3299,3 @@\n-          metrics->y_scale = FT_DivFix( scaled_h, h );\n-\n-          if ( req->type == FT_SIZE_REQUEST_TYPE_CELL )\n-          {\n-            if ( metrics->y_scale > metrics->x_scale )\n-              metrics->y_scale = metrics->x_scale;\n-            else\n-              metrics->x_scale = metrics->y_scale;\n-          }\n+          FT_ERROR(( \"FT_Request_Metrics: Divide by zero\\n\" ));\n+          error = FT_ERR( Divide_By_Zero );\n+          goto Exit;\n@@ -3297,1 +3303,7 @@\n-        else\n+\n+        metrics->y_scale = FT_DivFix( scaled_h, h );\n+      }\n+\n+      if ( req->width )\n+      {\n+        if ( w == 0 )\n@@ -3299,2 +3311,3 @@\n-          metrics->y_scale = metrics->x_scale;\n-          scaled_h = FT_MulDiv( scaled_w, h, w );\n+          FT_ERROR(( \"FT_Request_Metrics: Divide by zero\\n\" ));\n+          error = FT_ERR( Divide_By_Zero );\n+          goto Exit;\n@@ -3302,0 +3315,2 @@\n+\n+        metrics->x_scale = FT_DivFix( scaled_w, w );\n@@ -3305,1 +3320,1 @@\n-        metrics->x_scale = metrics->y_scale = FT_DivFix( scaled_h, h );\n+        metrics->x_scale = metrics->y_scale;\n@@ -3309,0 +3324,14 @@\n+      if ( !req->height )\n+      {\n+        metrics->y_scale = metrics->x_scale;\n+        scaled_h = FT_MulDiv( scaled_w, h, w );\n+      }\n+\n+      if ( req->type == FT_SIZE_REQUEST_TYPE_CELL )\n+      {\n+        if ( metrics->y_scale > metrics->x_scale )\n+          metrics->y_scale = metrics->x_scale;\n+        else\n+          metrics->x_scale = metrics->y_scale;\n+      }\n+\n@@ -3382,1 +3411,1 @@\n-                  metrics->x_scale, metrics->x_scale \/ 65536.0 ));\n+                  metrics->x_scale, (double)metrics->x_scale \/ 65536 ));\n@@ -3384,7 +3413,11 @@\n-                  metrics->y_scale, metrics->y_scale \/ 65536.0 ));\n-      FT_TRACE5(( \"  ascender: %f\\n\",    metrics->ascender \/ 64.0 ));\n-      FT_TRACE5(( \"  descender: %f\\n\",   metrics->descender \/ 64.0 ));\n-      FT_TRACE5(( \"  height: %f\\n\",      metrics->height \/ 64.0 ));\n-      FT_TRACE5(( \"  max advance: %f\\n\", metrics->max_advance \/ 64.0 ));\n-      FT_TRACE5(( \"  x ppem: %d\\n\",      metrics->x_ppem ));\n-      FT_TRACE5(( \"  y ppem: %d\\n\",      metrics->y_ppem ));\n+                  metrics->y_scale, (double)metrics->y_scale \/ 65536 ));\n+      FT_TRACE5(( \"  ascender: %f\\n\",\n+                  (double)metrics->ascender \/ 64 ));\n+      FT_TRACE5(( \"  descender: %f\\n\",\n+                  (double)metrics->descender \/ 64 ));\n+      FT_TRACE5(( \"  height: %f\\n\",\n+                  (double)metrics->height \/ 64 ));\n+      FT_TRACE5(( \"  max advance: %f\\n\",\n+                  (double)metrics->max_advance \/ 64 ));\n+      FT_TRACE5(( \"  x ppem: %d\\n\", metrics->x_ppem ));\n+      FT_TRACE5(( \"  y ppem: %d\\n\", metrics->y_ppem ));\n@@ -3462,1 +3495,1 @@\n-                  metrics->x_scale, metrics->x_scale \/ 65536.0 ));\n+                  metrics->x_scale, (double)metrics->x_scale \/ 65536 ));\n@@ -3464,7 +3497,11 @@\n-                  metrics->y_scale, metrics->y_scale \/ 65536.0 ));\n-      FT_TRACE5(( \"  ascender: %f\\n\",    metrics->ascender \/ 64.0 ));\n-      FT_TRACE5(( \"  descender: %f\\n\",   metrics->descender \/ 64.0 ));\n-      FT_TRACE5(( \"  height: %f\\n\",      metrics->height \/ 64.0 ));\n-      FT_TRACE5(( \"  max advance: %f\\n\", metrics->max_advance \/ 64.0 ));\n-      FT_TRACE5(( \"  x ppem: %d\\n\",      metrics->x_ppem ));\n-      FT_TRACE5(( \"  y ppem: %d\\n\",      metrics->y_ppem ));\n+                  metrics->y_scale, (double)metrics->y_scale \/ 65536 ));\n+      FT_TRACE5(( \"  ascender: %f\\n\",\n+                  (double)metrics->ascender \/ 64 ));\n+      FT_TRACE5(( \"  descender: %f\\n\",\n+                  (double)metrics->descender \/ 64 ));\n+      FT_TRACE5(( \"  height: %f\\n\",\n+                  (double)metrics->height \/ 64 ));\n+      FT_TRACE5(( \"  max advance: %f\\n\",\n+                  (double)metrics->max_advance \/ 64 ));\n+      FT_TRACE5(( \"  x ppem: %d\\n\", metrics->x_ppem ));\n+      FT_TRACE5(( \"  y ppem: %d\\n\", metrics->y_ppem ));\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftobjs.c","additions":130,"deletions":93,"binary":false,"changes":223,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -133,1 +133,1 @@\n-                  v_start.x \/ 64.0, v_start.y \/ 64.0 ));\n+                  (double)v_start.x \/ 64, (double)v_start.y \/ 64 ));\n@@ -155,1 +155,1 @@\n-                        vec.x \/ 64.0, vec.y \/ 64.0 ));\n+                        (double)vec.x \/ 64, (double)vec.y \/ 64 ));\n@@ -184,2 +184,4 @@\n-                          vec.x \/ 64.0, vec.y \/ 64.0,\n-                          v_control.x \/ 64.0, v_control.y \/ 64.0 ));\n+                          (double)vec.x \/ 64,\n+                          (double)vec.y \/ 64,\n+                          (double)v_control.x \/ 64,\n+                          (double)v_control.y \/ 64 ));\n@@ -200,2 +202,4 @@\n-                        v_middle.x \/ 64.0, v_middle.y \/ 64.0,\n-                        v_control.x \/ 64.0, v_control.y \/ 64.0 ));\n+                        (double)v_middle.x \/ 64,\n+                        (double)v_middle.y \/ 64,\n+                        (double)v_control.x \/ 64,\n+                        (double)v_control.y \/ 64 ));\n@@ -212,2 +216,4 @@\n-                      v_start.x \/ 64.0, v_start.y \/ 64.0,\n-                      v_control.x \/ 64.0, v_control.y \/ 64.0 ));\n+                      (double)v_start.x \/ 64,\n+                      (double)v_start.y \/ 64,\n+                      (double)v_control.x \/ 64,\n+                      (double)v_control.y \/ 64 ));\n@@ -245,3 +251,6 @@\n-                          vec.x \/ 64.0, vec.y \/ 64.0,\n-                          vec1.x \/ 64.0, vec1.y \/ 64.0,\n-                          vec2.x \/ 64.0, vec2.y \/ 64.0 ));\n+                          (double)vec.x \/ 64,\n+                          (double)vec.y \/ 64,\n+                          (double)vec1.x \/ 64,\n+                          (double)vec1.y \/ 64,\n+                          (double)vec2.x \/ 64,\n+                          (double)vec2.y \/ 64 ));\n@@ -256,3 +265,6 @@\n-                        v_start.x \/ 64.0, v_start.y \/ 64.0,\n-                        vec1.x \/ 64.0, vec1.y \/ 64.0,\n-                        vec2.x \/ 64.0, vec2.y \/ 64.0 ));\n+                        (double)v_start.x \/ 64,\n+                        (double)v_start.y \/ 64,\n+                        (double)vec1.x \/ 64,\n+                        (double)vec1.y \/ 64,\n+                        (double)vec2.x \/ 64,\n+                        (double)vec2.y \/ 64 ));\n@@ -267,1 +279,1 @@\n-                  v_start.x \/ 64.0, v_start.y \/ 64.0 ));\n+                  (double)v_start.x \/ 64, (double)v_start.y \/ 64 ));\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftoutln.c","additions":28,"deletions":16,"binary":false,"changes":44,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 2007-2022 by\n+ * Copyright (C) 2007-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftpatent.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 2017-2022 by\n+ * Copyright (C) 2017-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftpsprop.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2004-2022 by\n+ * Copyright (C) 2004-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftrfork.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -10,1 +10,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftsnames.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2000-2022 by\n+ * Copyright (C) 2000-2023 by\n@@ -264,1 +264,1 @@\n-      \/* assume _ft_debug_file and _ft_debug_lineno are already set *\/\n+      \/* assume `ft_debug_file_` and `ft_debug_lineno_` are already set *\/\n@@ -366,1 +366,1 @@\n-  FT_BASE_DEF( FT_UShort )\n+  FT_BASE_DEF( FT_UInt16 )\n@@ -370,1 +370,1 @@\n-    FT_UShort  result;\n+    FT_UInt16  result;\n@@ -385,1 +385,1 @@\n-  FT_BASE_DEF( FT_UShort )\n+  FT_BASE_DEF( FT_UInt16 )\n@@ -389,1 +389,1 @@\n-    FT_UShort  result;\n+    FT_UInt16  result;\n@@ -404,1 +404,1 @@\n-  FT_BASE_DEF( FT_ULong )\n+  FT_BASE_DEF( FT_UInt32 )\n@@ -408,1 +408,1 @@\n-    FT_ULong  result;\n+    FT_UInt32 result;\n@@ -422,1 +422,1 @@\n-  FT_BASE_DEF( FT_ULong )\n+  FT_BASE_DEF( FT_UInt32 )\n@@ -426,1 +426,1 @@\n-    FT_ULong  result;\n+    FT_UInt32 result;\n@@ -440,1 +440,1 @@\n-  FT_BASE_DEF( FT_ULong )\n+  FT_BASE_DEF( FT_UInt32 )\n@@ -444,1 +444,1 @@\n-    FT_ULong  result;\n+    FT_UInt32 result;\n@@ -496,1 +496,1 @@\n-  FT_BASE_DEF( FT_UShort )\n+  FT_BASE_DEF( FT_UInt16 )\n@@ -502,1 +502,1 @@\n-    FT_UShort  result = 0;\n+    FT_UInt16  result = 0;\n@@ -541,1 +541,1 @@\n-  FT_BASE_DEF( FT_UShort )\n+  FT_BASE_DEF( FT_UInt16 )\n@@ -547,1 +547,1 @@\n-    FT_UShort  result = 0;\n+    FT_UInt16  result = 0;\n@@ -631,1 +631,1 @@\n-  FT_BASE_DEF( FT_ULong )\n+  FT_BASE_DEF( FT_UInt32 )\n@@ -637,1 +637,1 @@\n-    FT_ULong  result = 0;\n+    FT_UInt32 result = 0;\n@@ -676,1 +676,1 @@\n-  FT_BASE_DEF( FT_ULong )\n+  FT_BASE_DEF( FT_UInt32 )\n@@ -682,1 +682,1 @@\n-    FT_ULong  result = 0;\n+    FT_UInt32 result = 0;\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftstream.c","additions":20,"deletions":20,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftstroke.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2000-2022 by\n+ * Copyright (C) 2000-2023 by\n@@ -48,0 +48,12 @@\n+  {\n+    \/* Value '0x0366A' corresponds to a shear angle of about 12 degrees. *\/\n+    FT_GlyphSlot_Slant( slot, 0x0366A, 0 );\n+  }\n+\n+\n+  \/* documentation is in ftsynth.h *\/\n+\n+  FT_EXPORT_DEF( void )\n+  FT_GlyphSlot_Slant( FT_GlyphSlot  slot,\n+                      FT_Fixed      xslant,\n+                      FT_Fixed      yslant )\n@@ -64,3 +76,1 @@\n-    \/* For italic, simply apply a shear transform, with an angle *\/\n-    \/* of about 12 degrees.                                      *\/\n-\n+    \/* For italic, simply apply a shear transform *\/\n@@ -68,1 +78,1 @@\n-    transform.yx = 0x00000L;\n+    transform.yx = -yslant;\n@@ -70,1 +80,1 @@\n-    transform.xy = 0x0366AL;\n+    transform.xy = xslant;\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftsynth.c","additions":16,"deletions":6,"binary":false,"changes":22,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftsystem.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/fttrigon.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/fttype1.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/base\/ftutil.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cff\/cffcmap.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cff\/cffcmap.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,2 +7,2 @@\n- * Copyright (C) 1996-2022 by\n- * David Turner, Robert Wilhelm, and Werner Lemberg.\n+ * Copyright (C) 1996-2023 by\n+ * David Turner, Robert Wilhelm, Werner Lemberg, and Dominik Röttsches.\n@@ -939,0 +939,64 @@\n+  static FT_Error\n+  cff_load_item_variation_store( CFF_Face         face,\n+                                 FT_ULong         offset,\n+                                 GX_ItemVarStore  itemStore )\n+  {\n+    FT_Service_MultiMasters  mm = (FT_Service_MultiMasters)face->mm;\n+\n+\n+    return mm->load_item_var_store( FT_FACE(face), offset, itemStore );\n+  }\n+\n+\n+  static FT_Error\n+  cff_load_delta_set_index_mapping( CFF_Face           face,\n+                                    FT_ULong           offset,\n+                                    GX_DeltaSetIdxMap  map,\n+                                    GX_ItemVarStore    itemStore,\n+                                    FT_ULong           table_len )\n+  {\n+    FT_Service_MultiMasters  mm = (FT_Service_MultiMasters)face->mm;\n+\n+\n+    return mm->load_delta_set_idx_map( FT_FACE( face ), offset, map,\n+                                       itemStore, table_len );\n+  }\n+\n+\n+  static FT_Int\n+  cff_get_item_delta( CFF_Face         face,\n+                      GX_ItemVarStore  itemStore,\n+                      FT_UInt          outerIndex,\n+                      FT_UInt          innerIndex )\n+  {\n+    FT_Service_MultiMasters  mm = (FT_Service_MultiMasters)face->mm;\n+\n+\n+    return mm->get_item_delta( FT_FACE( face ), itemStore,\n+                               outerIndex, innerIndex );\n+  }\n+\n+\n+  static void\n+  cff_done_item_variation_store( CFF_Face          face,\n+                                 GX_ItemVarStore  itemStore )\n+  {\n+    FT_Service_MultiMasters  mm = (FT_Service_MultiMasters)face->mm;\n+\n+\n+    mm->done_item_var_store( FT_FACE( face ), itemStore );\n+  }\n+\n+\n+  static void\n+  cff_done_delta_set_index_map( CFF_Face           face,\n+                                GX_DeltaSetIdxMap  deltaSetIdxMap )\n+  {\n+    FT_Service_MultiMasters  mm = (FT_Service_MultiMasters)face->mm;\n+\n+\n+    mm->done_delta_set_idx_map( FT_FACE ( face ), deltaSetIdxMap );\n+  }\n+\n+\n+\n@@ -942,13 +1006,30 @@\n-    (FT_Get_MM_Func)             NULL,                    \/* get_mm              *\/\n-    (FT_Set_MM_Design_Func)      NULL,                    \/* set_mm_design       *\/\n-    (FT_Set_MM_Blend_Func)       cff_set_mm_blend,        \/* set_mm_blend        *\/\n-    (FT_Get_MM_Blend_Func)       cff_get_mm_blend,        \/* get_mm_blend        *\/\n-    (FT_Get_MM_Var_Func)         cff_get_mm_var,          \/* get_mm_var          *\/\n-    (FT_Set_Var_Design_Func)     cff_set_var_design,      \/* set_var_design      *\/\n-    (FT_Get_Var_Design_Func)     cff_get_var_design,      \/* get_var_design      *\/\n-    (FT_Set_Instance_Func)       cff_set_instance,        \/* set_instance        *\/\n-    (FT_Set_MM_WeightVector_Func)cff_set_mm_weightvector, \/* set_mm_weightvector *\/\n-    (FT_Get_MM_WeightVector_Func)cff_get_mm_weightvector, \/* get_mm_weightvector *\/\n-\n-    (FT_Get_Var_Blend_Func)      cff_get_var_blend,       \/* get_var_blend       *\/\n-    (FT_Done_Blend_Func)         cff_done_blend           \/* done_blend          *\/\n+    (FT_Get_MM_Func)        NULL,               \/* get_mm                    *\/\n+    (FT_Set_MM_Design_Func) NULL,               \/* set_mm_design             *\/\n+    (FT_Set_MM_Blend_Func)  cff_set_mm_blend,   \/* set_mm_blend              *\/\n+    (FT_Get_MM_Blend_Func)  cff_get_mm_blend,   \/* get_mm_blend              *\/\n+    (FT_Get_MM_Var_Func)    cff_get_mm_var,     \/* get_mm_var                *\/\n+    (FT_Set_Var_Design_Func)cff_set_var_design, \/* set_var_design            *\/\n+    (FT_Get_Var_Design_Func)cff_get_var_design, \/* get_var_design            *\/\n+    (FT_Set_Instance_Func)  cff_set_instance,   \/* set_instance              *\/\n+    (FT_Set_MM_WeightVector_Func)\n+                            cff_set_mm_weightvector,\n+                                                \/* set_mm_weightvector       *\/\n+    (FT_Get_MM_WeightVector_Func)\n+                            cff_get_mm_weightvector,\n+                                                \/* get_mm_weightvector       *\/\n+    (FT_Var_Load_Delta_Set_Idx_Map_Func)\n+                            cff_load_delta_set_index_mapping,\n+                                                \/* load_delta_set_idx_map    *\/\n+    (FT_Var_Load_Item_Var_Store_Func)\n+                            cff_load_item_variation_store,\n+                                                \/* load_item_variation_store *\/\n+    (FT_Var_Get_Item_Delta_Func)\n+                            cff_get_item_delta, \/* get_item_delta            *\/\n+    (FT_Var_Done_Item_Var_Store_Func)\n+                            cff_done_item_variation_store,\n+                                                \/* done_item_variation_store *\/\n+    (FT_Var_Done_Delta_Set_Idx_Map_Func)\n+                            cff_done_delta_set_index_map,\n+                                                \/* done_delta_set_index_map  *\/\n+    (FT_Get_Var_Blend_Func) cff_get_var_blend,  \/* get_var_blend             *\/\n+    (FT_Done_Blend_Func)    cff_done_blend      \/* done_blend                *\/\n@@ -1030,2 +1111,1 @@\n-#if !defined FT_CONFIG_OPTION_NO_GLYPH_NAMES && \\\n-     defined TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+#if defined TT_CONFIG_OPTION_GX_VAR_SUPPORT\n@@ -1046,1 +1126,1 @@\n-#elif !defined FT_CONFIG_OPTION_NO_GLYPH_NAMES\n+#else\n@@ -1059,26 +1139,0 @@\n-#elif defined TT_CONFIG_OPTION_GX_VAR_SUPPORT\n-  FT_DEFINE_SERVICEDESCREC9(\n-    cff_services,\n-\n-    FT_SERVICE_ID_FONT_FORMAT,          FT_FONT_FORMAT_CFF,\n-    FT_SERVICE_ID_MULTI_MASTERS,        &cff_service_multi_masters,\n-    FT_SERVICE_ID_METRICS_VARIATIONS,   &cff_service_metrics_var,\n-    FT_SERVICE_ID_POSTSCRIPT_INFO,      &cff_service_ps_info,\n-    FT_SERVICE_ID_POSTSCRIPT_FONT_NAME, &cff_service_ps_name,\n-    FT_SERVICE_ID_TT_CMAP,              &cff_service_get_cmap_info,\n-    FT_SERVICE_ID_CID,                  &cff_service_cid_info,\n-    FT_SERVICE_ID_PROPERTIES,           &cff_service_properties,\n-    FT_SERVICE_ID_CFF_LOAD,             &cff_service_cff_load\n-  )\n-#else\n-  FT_DEFINE_SERVICEDESCREC7(\n-    cff_services,\n-\n-    FT_SERVICE_ID_FONT_FORMAT,          FT_FONT_FORMAT_CFF,\n-    FT_SERVICE_ID_POSTSCRIPT_INFO,      &cff_service_ps_info,\n-    FT_SERVICE_ID_POSTSCRIPT_FONT_NAME, &cff_service_ps_name,\n-    FT_SERVICE_ID_TT_CMAP,              &cff_service_get_cmap_info,\n-    FT_SERVICE_ID_CID,                  &cff_service_cid_info,\n-    FT_SERVICE_ID_PROPERTIES,           &cff_service_properties,\n-    FT_SERVICE_ID_CFF_LOAD,             &cff_service_cff_load\n-  )\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cff\/cffdrivr.c","additions":98,"deletions":44,"binary":false,"changes":142,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cff\/cffdrivr.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cff\/cfferrs.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -359,2 +359,1 @@\n-    if ( ( load_flags & FT_LOAD_COLOR )     &&\n-         ( (TT_Face)glyph->root.face )->svg )\n+    if ( ( load_flags & FT_LOAD_COLOR ) && face->svg )\n@@ -367,4 +366,1 @@\n-      FT_Short      dummy;\n-      FT_UShort     advanceX;\n-      FT_UShort     advanceY;\n-      SFNT_Service  sfnt;\n+      SFNT_Service  sfnt  = (SFNT_Service)face->sfnt;\n@@ -382,1 +378,0 @@\n-      sfnt  = (SFNT_Service)((TT_Face)glyph->root.face)->sfnt;\n@@ -386,0 +381,8 @@\n+        FT_Fixed  x_scale = size->root.metrics.x_scale;\n+        FT_Fixed  y_scale = size->root.metrics.y_scale;\n+\n+        FT_Short   dummy;\n+        FT_UShort  advanceX;\n+        FT_UShort  advanceY;\n+\n+\n@@ -407,8 +410,2 @@\n-        advanceX =\n-          (FT_UShort)FT_MulDiv( advanceX,\n-                                glyph->root.face->size->metrics.x_ppem,\n-                                glyph->root.face->units_per_EM );\n-        advanceY =\n-          (FT_UShort)FT_MulDiv( advanceY,\n-                                glyph->root.face->size->metrics.y_ppem,\n-                                glyph->root.face->units_per_EM );\n+        glyph->root.linearHoriAdvance = advanceX;\n+        glyph->root.linearVertAdvance = advanceY;\n@@ -416,2 +413,2 @@\n-        glyph->root.metrics.horiAdvance = advanceX << 6;\n-        glyph->root.metrics.vertAdvance = advanceY << 6;\n+        glyph->root.metrics.horiAdvance = FT_MulFix( advanceX, x_scale );\n+        glyph->root.metrics.vertAdvance = FT_MulFix( advanceY, y_scale );\n@@ -494,3 +491,2 @@\n-      \/* now load the unscaled outline *\/\n-      error = cff_get_glyph_data( face, glyph_index,\n-                                  &charstring, &charstring_len );\n+      \/* this function also checks for a valid subfont index *\/\n+      error = decoder_funcs->prepare( &decoder, size, glyph_index );\n@@ -500,1 +496,3 @@\n-      error = decoder_funcs->prepare( &decoder, size, glyph_index );\n+      \/* now load the unscaled outline *\/\n+      error = cff_get_glyph_data( face, glyph_index,\n+                                  &charstring, &charstring_len );\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cff\/cffgload.c","additions":20,"deletions":22,"binary":false,"changes":42,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cff\/cffgload.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -1291,1 +1291,1 @@\n-  \/* Blend calculation is done in 16.16 fixed point.       *\/\n+  \/* Blend calculation is done in 16.16 fixed-point.       *\/\n@@ -1367,1 +1367,1 @@\n-      \/* convert inputs to 16.16 fixed point *\/\n+      \/* convert inputs to 16.16 fixed-point *\/\n@@ -1376,1 +1376,1 @@\n-      \/* Push blended result as Type 2 5-byte fixed point number.  This *\/\n+      \/* Push blended result as Type 2 5-byte fixed-point number.  This *\/\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cff\/cffload.c","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cff\/cffload.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -1034,1 +1034,0 @@\n-#ifndef FT_CONFIG_OPTION_NO_GLYPH_NAMES\n@@ -1039,1 +1038,0 @@\n-#endif\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cff\/cffobjs.c","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cff\/cffobjs.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -533,1 +533,1 @@\n-      \/* 16.16 fixed point is used internally for CFF2 blend results. *\/\n+      \/* 16.16 fixed-point is used internally for CFF2 blend results. *\/\n@@ -761,6 +761,6 @@\n-                  (double)matrix->xx \/ *upm \/ 65536,\n-                  (double)matrix->xy \/ *upm \/ 65536,\n-                  (double)matrix->yx \/ *upm \/ 65536,\n-                  (double)matrix->yy \/ *upm \/ 65536,\n-                  (double)offset->x  \/ *upm \/ 65536,\n-                  (double)offset->y  \/ *upm \/ 65536 ));\n+                  (double)matrix->xx \/ (double)*upm \/ 65536,\n+                  (double)matrix->xy \/ (double)*upm \/ 65536,\n+                  (double)matrix->yx \/ (double)*upm \/ 65536,\n+                  (double)matrix->yy \/ (double)*upm \/ 65536,\n+                  (double)offset->x  \/ (double)*upm \/ 65536,\n+                  (double)offset->y  \/ (double)*upm \/ 65536 ));\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cff\/cffparse.c","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cff\/cffparse.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cff\/cfftoken.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cid\/ciderrs.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cid\/cidgload.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cid\/cidgload.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cid\/cidload.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cid\/cidload.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -156,1 +156,1 @@\n-  FT_LOCAL( FT_Error )\n+  FT_LOCAL_DEF( FT_Error )\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cid\/cidobjs.c","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cid\/cidobjs.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cid\/cidparse.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cid\/cidparse.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cid\/cidriver.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cid\/cidriver.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/cid\/cidtoken.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2006-2022 by\n+ * Copyright (C) 2006-2023 by\n@@ -566,1 +566,1 @@\n-  FT_LOCAL( void )\n+  FT_LOCAL_DEF( void )\n@@ -1064,1 +1064,1 @@\n-        \/* fall through                      *\/\n+        FALL_THROUGH;\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/afmparse.c","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2006-2022 by\n+ * Copyright (C) 2006-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/afmparse.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2017-2022 by\n+ * Copyright (C) 2017-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/cffdecode.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2017-2022 by\n+ * Copyright (C) 2017-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/cffdecode.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/psauxerr.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2000-2022 by\n+ * Copyright (C) 2000-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/psauxmod.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2000-2022 by\n+ * Copyright (C) 2000-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/psauxmod.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2006-2022 by\n+ * Copyright (C) 2006-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/psconv.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2006-2022 by\n+ * Copyright (C) 2006-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/psconv.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -5,1 +5,1 @@\n- *   Adobe's code for Fixed Point Mathematics (specification only).\n+ *   Adobe's code for Fixed-Point Mathematics (specification only).\n@@ -46,1 +46,1 @@\n-  \/* rasterizer integer and fixed point arithmetic must be 32-bit *\/\n+  \/* rasterizer integer and fixed-point arithmetic must be 32-bit *\/\n@@ -49,1 +49,1 @@\n-  typedef FT_Int32   CF2_Frac;   \/* 2.30 fixed point *\/\n+  typedef FT_Int32   CF2_Frac;   \/* 2.30 fixed-point *\/\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/psfixed.h","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -71,2 +71,0 @@\n-    FT_ASSERT( unitsPerEm > 0 );\n-\n@@ -76,0 +74,1 @@\n+    FT_ASSERT( unitsPerEm > 0 );\n@@ -300,1 +299,0 @@\n-    FT_ASSERT( decoder->builder.face->units_per_EM );\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/psft.c","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -75,1 +75,1 @@\n-  \/* a matrix of fixed point values *\/\n+  \/* a matrix of fixed-point values *\/\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/psglue.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -696,2 +696,4 @@\n-                       ADD_INT32( secondHintEdge->csCoord,\n-                                  firstHintEdge->csCoord ) \/ 2 );\n+                       ADD_INT32(\n+                         firstHintEdge->csCoord,\n+                         SUB_INT32 ( secondHintEdge->csCoord,\n+                                     firstHintEdge->csCoord ) \/ 2 ) );\n@@ -1037,1 +1039,1 @@\n-      FT_TRACE6(( \"Initial hintmap\" ));\n+      FT_TRACE6(( \"Initial hintmap:\\n\" ));\n@@ -1040,1 +1042,1 @@\n-      FT_TRACE6(( \"Hints:\" ));\n+      FT_TRACE6(( \"Hints:\\n\" ));\n@@ -1057,1 +1059,1 @@\n-    FT_TRACE6(( \"(adjusted)\\n\" ));\n+    FT_TRACE6(( \"Hints adjusted:\\n\" ));\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/pshints.c","additions":7,"deletions":5,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -87,1 +87,0 @@\n-    table->num_elems = 0;\n@@ -238,1 +237,1 @@\n-    if ( (FT_ULong)table->init == 0xDEADBEEFUL )\n+    if ( table->init == 0xDEADBEEFUL )\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/psobjs.c","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/psobjs.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -52,2 +52,2 @@\n-      CF2_Fixed  r;      \/* 16.16 fixed point *\/\n-      CF2_Frac   f;      \/* 2.30 fixed point (for font matrix) *\/\n+      CF2_Fixed  r;      \/* 16.16 fixed-point *\/\n+      CF2_Frac   f;      \/* 2.30 fixed-point (for font matrix) *\/\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/psstack.h","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/t1cmap.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/t1cmap.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2000-2022 by\n+ * Copyright (C) 2000-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/t1decode.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2000-2022 by\n+ * Copyright (C) 2000-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psaux\/t1decode.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/pshinter\/pshalgo.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/pshinter\/pshalgo.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/pshinter\/pshglob.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/pshinter\/pshglob.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/pshinter\/pshmod.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/pshinter\/pshmod.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2003-2022 by\n+ * Copyright (C) 2003-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/pshinter\/pshnterr.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n@@ -768,1 +768,1 @@\n-  FT_LOCAL( void )\n+  FT_LOCAL_DEF( void )\n@@ -782,1 +782,1 @@\n-  FT_LOCAL( void )\n+  FT_LOCAL_DEF( void )\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/pshinter\/pshrec.c","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/pshinter\/pshrec.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -415,1 +415,4 @@\n-    PS_UniMap  *min, *max, *mid, *result = NULL;\n+    PS_UniMap  *result = NULL;\n+    PS_UniMap  *min = table->maps;\n+    PS_UniMap  *max = min + table->num_maps;\n+    PS_UniMap  *mid = min + ( ( max - min ) >> 1 );\n@@ -419,5 +422,1 @@\n-\n-    min = table->maps;\n-    max = min + table->num_maps - 1;\n-\n-    while ( min <= max )\n+    while ( min < max )\n@@ -428,2 +427,0 @@\n-      mid = min + ( ( max - min ) >> 1 );\n-\n@@ -441,3 +438,0 @@\n-      if ( min == max )\n-        break;\n-\n@@ -447,1 +441,6 @@\n-        max = mid - 1;\n+        max = mid;\n+\n+      \/* reasonable prediction in a continuous block *\/\n+      mid += unicode - base_glyph;\n+      if ( mid >= max || mid < min )\n+        mid = min + ( ( max - min ) >> 1 );\n@@ -468,1 +467,1 @@\n-      FT_UInt     mid;\n+      FT_UInt     mid = min + ( ( max - min ) >> 1 );\n@@ -475,1 +474,0 @@\n-        mid = min + ( ( max - min ) >> 1 );\n@@ -493,0 +491,5 @@\n+\n+        \/* reasonable prediction in a continuous block *\/\n+        mid += char_code - base_glyph;\n+        if ( mid >= max || mid < min )\n+          mid = min + ( max - min ) \/ 2;\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psnames\/psmodule.c","additions":18,"deletions":15,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psnames\/psmodule.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psnames\/psnamerr.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2005-2022 by\n+ * Copyright (C) 2005-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/psnames\/pstables.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 2005-2022 by\n+ * Copyright (C) 2005-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/raster\/ftmisc.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -2222,2 +2222,2 @@\n-                x1 \/ (double)ras.precision,\n-                x2 \/ (double)ras.precision ));\n+                (double)x1 \/ (double)ras.precision,\n+                (double)x2 \/ (double)ras.precision ));\n@@ -2297,2 +2297,2 @@\n-                x1 \/ (double)ras.precision,\n-                x2 \/ (double)ras.precision ));\n+                (double)x1 \/ (double)ras.precision,\n+                (double)x2 \/ (double)ras.precision ));\n@@ -2480,2 +2480,2 @@\n-                x1 \/ (double)ras.precision,\n-                x2 \/ (double)ras.precision ));\n+                (double)x1 \/ (double)ras.precision,\n+                (double)x2 \/ (double)ras.precision ));\n@@ -2551,2 +2551,2 @@\n-                x1 \/ (double)ras.precision,\n-                x2 \/ (double)ras.precision ));\n+                (double)x1 \/ (double)ras.precision,\n+                (double)x2 \/ (double)ras.precision ));\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/raster\/ftraster.c","additions":9,"deletions":9,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/raster\/ftraster.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/raster\/ftrend1.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/raster\/ftrend1.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/raster\/rasterrs.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2013-2022 by\n+ * Copyright (C) 2013-2023 by\n@@ -242,1 +242,1 @@\n-      return;\n+      \/* return; (never reached) *\/\n@@ -410,1 +410,2 @@\n-      \/* Shouldn't happen, but fall through. *\/\n+      \/* Shouldn't happen, but ... *\/\n+      FALL_THROUGH;\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/pngshim.c","additions":4,"deletions":3,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2013-2022 by\n+ * Copyright (C) 2013-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/pngshim.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -381,1 +381,1 @@\n-        \/* fall through *\/\n+        FALL_THROUGH;\n@@ -384,1 +384,1 @@\n-        \/* fall through *\/\n+        FALL_THROUGH;\n@@ -391,1 +391,1 @@\n-        \/* fall through *\/\n+        FALL_THROUGH;\n@@ -395,1 +395,1 @@\n-        \/* fall through *\/\n+        FALL_THROUGH;\n@@ -398,1 +398,1 @@\n-        \/* fall through *\/\n+        FALL_THROUGH;\n@@ -401,1 +401,1 @@\n-        \/* fall through *\/\n+        FALL_THROUGH;\n@@ -408,1 +408,1 @@\n-        \/* fall through *\/\n+        FALL_THROUGH;\n@@ -412,1 +412,1 @@\n-        \/* fall through *\/\n+        FALL_THROUGH;\n@@ -415,1 +415,1 @@\n-        \/* fall through *\/\n+        FALL_THROUGH;\n@@ -418,1 +418,1 @@\n-        \/* fall through *\/\n+        FALL_THROUGH;\n@@ -425,1 +425,1 @@\n-        \/* fall through *\/\n+        FALL_THROUGH;\n@@ -429,1 +429,1 @@\n-        \/* fall through *\/\n+        FALL_THROUGH;\n@@ -432,1 +432,1 @@\n-        \/* fall through *\/\n+        FALL_THROUGH;\n@@ -435,1 +435,1 @@\n-        \/* fall through *\/\n+        FALL_THROUGH;\n@@ -660,1 +660,1 @@\n-   * Find the shortest decimal representation of a 16.16 fixed point\n+   * Find the shortest decimal representation of a 16.16 fixed-point\n@@ -736,1 +736,1 @@\n-        verified this by iterating over all possible fixed point numbers.\n+        verified this by iterating over all possible fixed-point numbers.\n@@ -744,1 +744,1 @@\n-        also found by testing all possible fixed point values).\n+        also found by testing all possible fixed-point values).\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/sfdriver.c","additions":18,"deletions":18,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/sfdriver.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/sferrors.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -1110,7 +1110,1 @@\n-      {\n-        if ( tt_face_lookup_table( face, TTAG_glyf ) != 0 &&\n-             tt_face_lookup_table( face, TTAG_gvar ) != 0 )\n-          flags |= FT_FACE_FLAG_MULTIPLE_MASTERS;\n-        if ( tt_face_lookup_table( face, TTAG_CFF2 ) != 0 )\n-          flags |= FT_FACE_FLAG_MULTIPLE_MASTERS;\n-      }\n+        flags |= FT_FACE_FLAG_MULTIPLE_MASTERS;\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/sfobjs.c","additions":2,"deletions":8,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/sfobjs.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -165,2 +165,1 @@\n-    if ( FT_QALLOC( sfnt, 12 + woff.num_tables * 16UL ) ||\n-         FT_NEW( sfnt_stream )                          )\n+    if ( FT_QALLOC( sfnt, 12 ) || FT_NEW( sfnt_stream ) )\n@@ -199,2 +198,2 @@\n-    if ( FT_NEW_ARRAY( tables, woff.num_tables )  ||\n-         FT_NEW_ARRAY( indices, woff.num_tables ) )\n+    if ( FT_QNEW_ARRAY( tables, woff.num_tables )  ||\n+         FT_QNEW_ARRAY( indices, woff.num_tables ) )\n@@ -331,3 +330,1 @@\n-    if ( FT_REALLOC( sfnt,\n-                     12 + woff.num_tables * 16UL,\n-                     woff.totalSfntSize ) )\n+    if ( FT_QREALLOC( sfnt, 12, woff.totalSfntSize ) )\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/sfwoff.c","additions":5,"deletions":8,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/sfwoff.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2019-2022 by\n+ * Copyright (C) 2019-2023 by\n@@ -232,3 +232,3 @@\n-      if ( FT_REALLOC( dst,\n-                       (FT_ULong)( *dst_size ),\n-                       (FT_ULong)( *offset + size ) ) )\n+      if ( FT_QREALLOC( dst,\n+                        (FT_ULong)( *dst_size ),\n+                        (FT_ULong)( *offset + size ) ) )\n@@ -787,1 +787,1 @@\n-    if ( FT_QNEW_ARRAY( loca_buf, loca_buf_size ) )\n+    if ( FT_QALLOC( loca_buf, loca_buf_size ) )\n@@ -866,1 +866,1 @@\n-    if ( FT_NEW_ARRAY( substreams, num_substreams ) )\n+    if ( FT_QNEW_ARRAY( substreams, num_substreams ) )\n@@ -929,1 +929,1 @@\n-    if ( FT_NEW_ARRAY( loca_values, num_glyphs + 1 ) )\n+    if ( FT_QNEW_ARRAY( loca_values, num_glyphs + 1 ) )\n@@ -941,1 +941,1 @@\n-    if ( FT_NEW_ARRAY( glyph_buf, glyph_buf_size ) )\n+    if ( FT_QALLOC( glyph_buf, glyph_buf_size ) )\n@@ -944,1 +944,1 @@\n-    if ( FT_NEW_ARRAY( info->x_mins, num_glyphs ) )\n+    if ( FT_QNEW_ARRAY( info->x_mins, num_glyphs ) )\n@@ -1002,1 +1002,1 @@\n-          if ( FT_RENEW_ARRAY( glyph_buf, glyph_buf_size, size_needed ) )\n+          if ( FT_QREALLOC( glyph_buf, glyph_buf_size, size_needed ) )\n@@ -1078,1 +1078,1 @@\n-        if ( FT_NEW_ARRAY( n_points_arr, n_contours ) )\n+        if ( FT_QNEW_ARRAY( n_points_arr, n_contours ) )\n@@ -1115,1 +1115,1 @@\n-        if ( FT_NEW_ARRAY( points, points_size ) )\n+        if ( FT_QNEW_ARRAY( points, points_size ) )\n@@ -1144,1 +1144,1 @@\n-          if ( FT_RENEW_ARRAY( glyph_buf, glyph_buf_size, size_needed ) )\n+          if ( FT_QREALLOC( glyph_buf, glyph_buf_size, size_needed ) )\n@@ -1229,2 +1229,1 @@\n-      if ( n_contours > 0 )\n-        info->x_mins[i] = (FT_Short)x_min;\n+      info->x_mins[i] = (FT_Short)x_min;\n@@ -1347,1 +1346,1 @@\n-    if ( FT_NEW_ARRAY( info->x_mins, num_glyphs ) )\n+    if ( FT_QNEW_ARRAY( info->x_mins, num_glyphs ) )\n@@ -1435,2 +1434,2 @@\n-    if ( FT_NEW_ARRAY( advance_widths, num_hmetrics ) ||\n-         FT_NEW_ARRAY( lsbs, num_glyphs )             )\n+    if ( FT_QNEW_ARRAY( advance_widths, num_hmetrics ) ||\n+         FT_QNEW_ARRAY( lsbs, num_glyphs )             )\n@@ -1487,1 +1486,1 @@\n-    if ( FT_NEW_ARRAY( hmtx_table, hmtx_table_size ) )\n+    if ( FT_QALLOC( hmtx_table, hmtx_table_size ) )\n@@ -1544,4 +1543,4 @@\n-    FT_Error   error       = FT_Err_Ok;\n-    FT_Stream  stream      = NULL;\n-    FT_Byte*   buf_cursor  = NULL;\n-    FT_Byte*   table_entry = NULL;\n+    FT_Error   error      = FT_Err_Ok;\n+    FT_Stream  stream     = NULL;\n+    FT_Byte*   buf_cursor = NULL;\n+    FT_Byte    table_entry[16];\n@@ -1588,4 +1587,0 @@\n-    \/* Create buffer for table entries. *\/\n-    if ( FT_NEW_ARRAY( table_entry, 16 ) )\n-      goto Fail;\n-\n@@ -1754,1 +1749,0 @@\n-    FT_FREE( table_entry );\n@@ -1767,1 +1761,0 @@\n-    FT_FREE( table_entry );\n@@ -1880,2 +1873,2 @@\n-    if ( FT_NEW_ARRAY( tables, woff2.num_tables )  ||\n-         FT_NEW_ARRAY( indices, woff2.num_tables ) )\n+    if ( FT_QNEW_ARRAY( tables, woff2.num_tables )  ||\n+         FT_QNEW_ARRAY( indices, woff2.num_tables ) )\n@@ -1952,0 +1945,1 @@\n+      table->flags      = flags;\n@@ -1955,1 +1949,1 @@\n-      table->flags      = flags;\n+      table->dst_offset = 0;\n@@ -2013,0 +2007,1 @@\n+      \/* pre-zero pointers within in case of failure *\/\n@@ -2026,1 +2021,1 @@\n-        if ( FT_NEW_ARRAY( ttc_font->table_indices, ttc_font->num_tables ) )\n+        if ( FT_QNEW_ARRAY( ttc_font->table_indices, ttc_font->num_tables ) )\n@@ -2305,3 +2300,3 @@\n-      if ( FT_REALLOC( sfnt,\n-                       (FT_ULong)( sfnt_size ),\n-                       (FT_ULong)( woff2.actual_sfnt_size ) ) )\n+      if ( FT_QREALLOC( sfnt,\n+                        (FT_ULong)( sfnt_size ),\n+                        (FT_ULong)( woff2.actual_sfnt_size ) ) )\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/sfwoff2.c","additions":31,"deletions":36,"binary":false,"changes":67,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2019-2022 by\n+ * Copyright (C) 2019-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/sfwoff2.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n@@ -3882,1 +3882,1 @@\n-  FT_LOCAL( FT_Error )\n+  FT_LOCAL_DEF( FT_Error )\n@@ -3889,0 +3889,1 @@\n+\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttcmap.c","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2002-2022 by\n+ * Copyright (C) 2002-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttcmap.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2009-2022 by\n+ * Copyright (C) 2009-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttcmapc.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2018-2022 by\n+ * Copyright (C) 2018-2023 by\n@@ -37,0 +37,3 @@\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+#include <freetype\/internal\/services\/svmm.h>\n+#endif\n@@ -49,0 +52,1 @@\n+#define VAR_IDX_BASE_SIZE                 4U\n@@ -50,1 +54,11 @@\n-#define COLR_HEADER_SIZE                 14U\n+\/* https:\/\/docs.microsoft.com\/en-us\/typography\/opentype\/spec\/colr#colr-header *\/\n+\/* 3 * uint16 + 2 * Offset32 *\/\n+#define COLRV0_HEADER_SIZE               14U\n+\/* COLRV0_HEADER_SIZE + 5 * Offset32 *\/\n+#define COLRV1_HEADER_SIZE               34U\n+\n+\n+#define ENSURE_READ_BYTES( byte_size )                             \\\n+  if ( p < colr->paints_start_v1                                || \\\n+       p > (FT_Byte*)colr->table + colr->table_size - byte_size )  \\\n+    return 0\n@@ -55,5 +69,19 @@\n-    FT_COLR_PAINTFORMAT_INTERNAL_SCALE_CENTER         = 18,\n-    FT_COLR_PAINTFORMAT_INTERNAL_SCALE_UNIFORM        = 20,\n-    FT_COLR_PAINTFORMAT_INTERNAL_SCALE_UNIFORM_CENTER = 22,\n-    FT_COLR_PAINTFORMAT_INTERNAL_ROTATE_CENTER        = 26,\n-    FT_COLR_PAINTFORMAT_INTERNAL_SKEW_CENTER          = 30\n+    FT_COLR_PAINTFORMAT_INTERNAL_VAR_SOLID                = 3,\n+    FT_COLR_PAINTFORMAT_INTERNAL_VAR_LINEAR_GRADIENT      = 5,\n+    FT_COLR_PAINTFORMAT_INTERNAL_VAR_RADIAL_GRADIENT      = 7,\n+    FT_COLR_PAINTFORMAT_INTERNAL_VAR_SWEEP_GRADIENT       = 9,\n+    FT_COLR_PAINTFORMAT_INTERNAL_VAR_TRANSFORM            = 13,\n+    FT_COLR_PAINTFORMAT_INTERNAL_VAR_TRANSLATE            = 15,\n+    FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE                = 17,\n+    FT_COLR_PAINTFORMAT_INTERNAL_SCALE_CENTER             = 18,\n+    FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE_CENTER         = 19,\n+    FT_COLR_PAINTFORMAT_INTERNAL_SCALE_UNIFORM            = 20,\n+    FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE_UNIFORM        = 21,\n+    FT_COLR_PAINTFORMAT_INTERNAL_SCALE_UNIFORM_CENTER     = 22,\n+    FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE_UNIFORM_CENTER = 23,\n+    FT_COLR_PAINTFORMAT_INTERNAL_VAR_ROTATE               = 25,\n+    FT_COLR_PAINTFORMAT_INTERNAL_ROTATE_CENTER            = 26,\n+    FT_COLR_PAINTFORMAT_INTERNAL_VAR_ROTATE_CENTER        = 27,\n+    FT_COLR_PAINTFORMAT_INTERNAL_VAR_SKEW                 = 29,\n+    FT_COLR_PAINTFORMAT_INTERNAL_SKEW_CENTER              = 30,\n+    FT_COLR_PAINTFORMAT_INTERNAL_VAR_SKEW_CENTER          = 31,\n@@ -107,0 +135,6 @@\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+    \/* Item Variation Store for variable 'COLR' v1. *\/\n+    GX_ItemVarStoreRec    var_store;\n+    GX_DeltaSetIdxMapRec  delta_set_idx_map;\n+#endif\n+\n@@ -142,0 +176,3 @@\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+    FT_ULong  colr_offset_in_stream;\n+#endif\n@@ -152,2 +189,6 @@\n-    if ( table_size < COLR_HEADER_SIZE )\n-      goto InvalidTable;\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+    colr_offset_in_stream = FT_STREAM_POS();\n+#endif\n+\n+    if ( table_size < COLRV0_HEADER_SIZE )\n+      goto NoColr;\n@@ -186,0 +227,3 @@\n+      if ( table_size < COLRV1_HEADER_SIZE )\n+        goto InvalidTable;\n+\n@@ -188,1 +232,1 @@\n-      if ( base_glyphs_offset_v1 >= table_size )\n+      if ( base_glyphs_offset_v1 + 4 >= table_size )\n@@ -208,0 +252,3 @@\n+        if ( layer_offset_v1 + 4 >= table_size )\n+          goto InvalidTable;\n+\n@@ -242,0 +289,59 @@\n+\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+      colr->var_store.dataCount     = 0;\n+      colr->var_store.varData       = NULL;\n+      colr->var_store.axisCount     = 0;\n+      colr->var_store.regionCount   = 0;\n+      colr->var_store.varRegionList = 0;\n+\n+      colr->delta_set_idx_map.mapCount   = 0;\n+      colr->delta_set_idx_map.outerIndex = NULL;\n+      colr->delta_set_idx_map.innerIndex = NULL;\n+\n+      if ( face->variation_support & TT_FACE_FLAG_VAR_FVAR )\n+      {\n+        FT_ULong  var_idx_map_offset, var_store_offset;\n+\n+        FT_Service_MultiMasters  mm = (FT_Service_MultiMasters)face->mm;\n+\n+\n+        var_idx_map_offset = FT_NEXT_ULONG( p );\n+\n+        if ( var_idx_map_offset >= table_size )\n+          goto InvalidTable;\n+\n+        var_store_offset = FT_NEXT_ULONG( p );\n+        if ( var_store_offset >= table_size )\n+          goto InvalidTable;\n+\n+        if ( var_store_offset )\n+        {\n+          \/* If variation info has not been initialized yet, try doing so, *\/\n+          \/* otherwise loading the variation store will fail as it         *\/\n+          \/* requires access to `blend` for checking the number of axes.   *\/\n+          if ( !face->blend )\n+            if ( mm->get_mm_var( FT_FACE( face ), NULL ) )\n+              goto InvalidTable;\n+\n+          \/* Try loading `VarIdxMap` and `VarStore`. *\/\n+          error = mm->load_item_var_store(\n+                    FT_FACE( face ),\n+                    colr_offset_in_stream + var_store_offset,\n+                    &colr->var_store );\n+          if ( error != FT_Err_Ok )\n+            goto InvalidTable;\n+        }\n+\n+        if ( colr->var_store.axisCount && var_idx_map_offset )\n+        {\n+          error = mm->load_delta_set_idx_map(\n+                    FT_FACE( face ),\n+                    colr_offset_in_stream + var_idx_map_offset,\n+                    &colr->delta_set_idx_map,\n+                    &colr->var_store,\n+                    table_size );\n+          if ( error != FT_Err_Ok )\n+            goto InvalidTable;\n+        }\n+      }\n+#endif \/* TT_CONFIG_OPTION_GX_VAR_SUPPORT *\/\n@@ -254,0 +360,12 @@\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+    {\n+      FT_Service_MultiMasters  mm = (FT_Service_MultiMasters)face->mm;\n+\n+\n+      mm->done_delta_set_idx_map( FT_FACE( face ),\n+                                  &colr->delta_set_idx_map );\n+      mm->done_item_var_store( FT_FACE( face ),\n+                               &colr->var_store );\n+    }\n+#endif\n+\n@@ -275,0 +393,11 @@\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+      {\n+        FT_Service_MultiMasters  mm = (FT_Service_MultiMasters)face->mm;\n+\n+\n+        mm->done_delta_set_idx_map( FT_FACE( face ),\n+                                    &colr->delta_set_idx_map );\n+        mm->done_item_var_store( FT_FACE( face ),\n+                                 &colr->var_store );\n+      }\n+#endif\n@@ -357,1 +486,3 @@\n-    if ( iterator->layer >= iterator->num_layers )\n+    if ( iterator->layer >= iterator->num_layers                     ||\n+         iterator->p < colr->layers                                  ||\n+         iterator->p >= ( (FT_Byte*)colr->table + colr->table_size ) )\n@@ -375,2 +506,4 @@\n-  read_color_line( FT_Byte*      color_line_p,\n-                   FT_ColorLine  *colorline )\n+  read_color_line( Colr*          colr,\n+                   FT_Byte*       color_line_p,\n+                   FT_ColorLine*  colorline,\n+                   FT_Bool        read_variable )\n@@ -382,0 +515,2 @@\n+    ENSURE_READ_BYTES( 3 );\n+\n@@ -391,0 +526,1 @@\n+    colorline->color_stop_iterator.read_variable      = read_variable;\n@@ -416,0 +552,4 @@\n+    if ( *p < colr->paints_start_v1                            ||\n+         *p > (FT_Byte*)colr->table + colr->table_size - 1 - 3 )\n+      return 0;\n+\n@@ -431,0 +571,2 @@\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+\n@@ -432,1 +574,53 @@\n-  read_paint( Colr*           colr,\n+  get_deltas_for_var_index_base ( TT_Face           face,\n+                                  Colr*             colr,\n+                                  FT_ULong          var_index_base,\n+                                  FT_UInt           num_deltas,\n+                                  FT_ItemVarDelta*  deltas )\n+  {\n+    FT_UInt   outer_index    = 0;\n+    FT_UInt   inner_index    = 0;\n+    FT_ULong  loop_var_index = var_index_base;\n+\n+    FT_Service_MultiMasters  mm = (FT_Service_MultiMasters)face->mm;\n+\n+    FT_UInt  i = 0;\n+\n+\n+    if ( var_index_base == 0xFFFFFFFF )\n+    {\n+      for ( i = 0; i < num_deltas; ++i )\n+        deltas[i] = 0;\n+      return 1;\n+    }\n+\n+    for ( i = 0; i < num_deltas; ++i )\n+    {\n+      loop_var_index = var_index_base + i;\n+\n+      if ( colr->delta_set_idx_map.innerIndex )\n+      {\n+        if ( loop_var_index >= colr->delta_set_idx_map.mapCount )\n+          loop_var_index = colr->delta_set_idx_map.mapCount - 1;\n+\n+        outer_index = colr->delta_set_idx_map.outerIndex[loop_var_index];\n+        inner_index = colr->delta_set_idx_map.innerIndex[loop_var_index];\n+      }\n+      else\n+      {\n+        outer_index = 0;\n+        inner_index = loop_var_index;\n+      }\n+\n+      deltas[i] = mm->get_item_delta( FT_FACE( face ), &colr->var_store,\n+                                      outer_index, inner_index );\n+    }\n+\n+    return 1;\n+  }\n+\n+#endif \/* TT_CONFIG_OPTION_GX_VAR_SUPPORT *\/\n+\n+\n+  static FT_Bool\n+  read_paint( TT_Face         face,\n+              Colr*           colr,\n@@ -436,2 +630,11 @@\n-    FT_Byte*  paint_base     = p;\n-    FT_Byte*  child_table_p  = NULL;\n+    FT_Byte*  paint_base    = p;\n+    FT_Byte*  child_table_p = NULL;\n+    FT_Bool   do_read_var   = FALSE;\n+\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+    FT_ULong         var_index_base = 0;\n+    \/* Longest varIndexBase offset is 5 in the spec. *\/\n+    FT_ItemVarDelta  item_deltas[6] = { 0, 0, 0, 0, 0, 0 };\n+#else\n+    FT_UNUSED( face );\n+#endif\n@@ -443,2 +646,4 @@\n-    if ( p < colr->paints_start_v1                         ||\n-         p >= ( (FT_Byte*)colr->table + colr->table_size ) )\n+    \/* The last byte of the 'COLR' table is at 'size-1'; subtract 1 of    *\/\n+    \/* that to account for the expected format byte we are going to read. *\/\n+    if ( p < colr->paints_start_v1                        ||\n+         p > (FT_Byte*)colr->table + colr->table_size - 2 )\n@@ -478,1 +683,3 @@\n-    else if ( apaint->format == FT_COLR_PAINTFORMAT_SOLID )\n+    else if ( apaint->format == FT_COLR_PAINTFORMAT_SOLID ||\n+              (FT_PaintFormat_Internal)apaint->format ==\n+                 FT_COLR_PAINTFORMAT_INTERNAL_VAR_SOLID   )\n@@ -480,0 +687,1 @@\n+      ENSURE_READ_BYTES( 4 );\n@@ -483,0 +691,17 @@\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+      if ( (FT_PaintFormat_Internal)apaint->format ==\n+              FT_COLR_PAINTFORMAT_INTERNAL_VAR_SOLID )\n+      {\n+        ENSURE_READ_BYTES( 4 );\n+        var_index_base = FT_NEXT_ULONG( p );\n+\n+        if ( !get_deltas_for_var_index_base( face, colr, var_index_base, 1,\n+                                             item_deltas ) )\n+          return 0;\n+\n+        apaint->u.solid.color.alpha += item_deltas[0];\n+      }\n+#endif\n+\n+      apaint->format = FT_COLR_PAINTFORMAT_SOLID;\n+\n@@ -488,0 +713,1 @@\n+      ENSURE_READ_BYTES(2);\n@@ -503,1 +729,4 @@\n-    if ( apaint->format == FT_COLR_PAINTFORMAT_LINEAR_GRADIENT )\n+    if ( apaint->format == FT_COLR_PAINTFORMAT_LINEAR_GRADIENT      ||\n+         ( do_read_var =\n+             ( (FT_PaintFormat_Internal)apaint->format ==\n+               FT_COLR_PAINTFORMAT_INTERNAL_VAR_LINEAR_GRADIENT ) ) )\n@@ -505,2 +734,4 @@\n-      if ( !read_color_line( child_table_p,\n-                             &apaint->u.linear_gradient.colorline ) )\n+      if ( !read_color_line( colr,\n+                             child_table_p,\n+                             &apaint->u.linear_gradient.colorline,\n+                             do_read_var ) )\n@@ -510,2 +741,3 @@\n-       * In order to support variations expose these as FT_Fixed 16.16 values so\n-       * that we can support fractional values after interpolation.\n+       * In order to support variations expose these as FT_Fixed 16.16\n+       * values so that we can support fractional values after\n+       * interpolation.\n@@ -513,0 +745,1 @@\n+      ENSURE_READ_BYTES( 12 );\n@@ -520,0 +753,21 @@\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+      if ( do_read_var )\n+      {\n+        ENSURE_READ_BYTES( 4 );\n+        var_index_base = FT_NEXT_ULONG ( p );\n+\n+        if ( !get_deltas_for_var_index_base( face, colr, var_index_base, 6,\n+                                             item_deltas ) )\n+          return 0;\n+\n+        apaint->u.linear_gradient.p0.x += INT_TO_FIXED( item_deltas[0] );\n+        apaint->u.linear_gradient.p0.y += INT_TO_FIXED( item_deltas[1] );\n+        apaint->u.linear_gradient.p1.x += INT_TO_FIXED( item_deltas[2] );\n+        apaint->u.linear_gradient.p1.y += INT_TO_FIXED( item_deltas[3] );\n+        apaint->u.linear_gradient.p2.x += INT_TO_FIXED( item_deltas[4] );\n+        apaint->u.linear_gradient.p2.y += INT_TO_FIXED( item_deltas[5] );\n+      }\n+#endif\n+\n+      apaint->format = FT_COLR_PAINTFORMAT_LINEAR_GRADIENT;\n+\n@@ -523,1 +777,4 @@\n-    else if ( apaint->format == FT_COLR_PAINTFORMAT_RADIAL_GRADIENT )\n+    else if ( apaint->format == FT_COLR_PAINTFORMAT_RADIAL_GRADIENT      ||\n+              ( do_read_var =\n+                  ( (FT_PaintFormat_Internal)apaint->format ==\n+                    FT_COLR_PAINTFORMAT_INTERNAL_VAR_RADIAL_GRADIENT ) ) )\n@@ -528,2 +785,4 @@\n-      if ( !read_color_line( child_table_p,\n-                             &apaint->u.radial_gradient.colorline ) )\n+      if ( !read_color_line( colr,\n+                             child_table_p,\n+                             &apaint->u.radial_gradient.colorline,\n+                             do_read_var ) )\n@@ -532,0 +791,1 @@\n+\n@@ -537,0 +797,2 @@\n+      ENSURE_READ_BYTES( 12 );\n+\n@@ -549,0 +811,25 @@\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+      if ( do_read_var )\n+      {\n+        ENSURE_READ_BYTES( 4 );\n+        var_index_base = FT_NEXT_ULONG ( p );\n+\n+        if ( !get_deltas_for_var_index_base( face, colr, var_index_base, 6,\n+                                             item_deltas ) )\n+          return 0;\n+\n+        apaint->u.radial_gradient.c0.x += INT_TO_FIXED( item_deltas[0] );\n+        apaint->u.radial_gradient.c0.y += INT_TO_FIXED( item_deltas[1] );\n+\n+        \/\/ TODO: Anything to be done about UFWORD deltas here?\n+        apaint->u.radial_gradient.r0 += INT_TO_FIXED( item_deltas[2] );\n+\n+        apaint->u.radial_gradient.c1.x += INT_TO_FIXED( item_deltas[3] );\n+        apaint->u.radial_gradient.c1.y += INT_TO_FIXED( item_deltas[4] );\n+\n+        apaint->u.radial_gradient.r1 += INT_TO_FIXED( item_deltas[5] );\n+      }\n+#endif\n+\n+      apaint->format = FT_COLR_PAINTFORMAT_RADIAL_GRADIENT;\n+\n@@ -552,1 +839,4 @@\n-    else if ( apaint->format == FT_COLR_PAINTFORMAT_SWEEP_GRADIENT )\n+    else if ( apaint->format == FT_COLR_PAINTFORMAT_SWEEP_GRADIENT      ||\n+              ( do_read_var =\n+                  ( (FT_PaintFormat_Internal)apaint->format ==\n+                    FT_COLR_PAINTFORMAT_INTERNAL_VAR_SWEEP_GRADIENT ) ) )\n@@ -554,2 +844,4 @@\n-      if ( !read_color_line( child_table_p,\n-                             &apaint->u.sweep_gradient.colorline ) )\n+      if ( !read_color_line( colr,\n+                             child_table_p,\n+                             &apaint->u.sweep_gradient.colorline,\n+                             do_read_var) )\n@@ -558,0 +850,2 @@\n+      ENSURE_READ_BYTES( 8 );\n+\n@@ -568,0 +862,22 @@\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+      if ( do_read_var )\n+      {\n+        ENSURE_READ_BYTES( 4 );\n+        var_index_base = FT_NEXT_ULONG ( p );\n+\n+        if ( !get_deltas_for_var_index_base( face, colr, var_index_base, 4,\n+                                             item_deltas ) )\n+          return 0;\n+\n+        \/\/ TODO: Handle overflow?\n+        apaint->u.sweep_gradient.center.x += INT_TO_FIXED( item_deltas[0] );\n+        apaint->u.sweep_gradient.center.y += INT_TO_FIXED( item_deltas[1] );\n+\n+        apaint->u.sweep_gradient.start_angle +=\n+          F2DOT14_TO_FIXED( item_deltas[2] );\n+        apaint->u.sweep_gradient.end_angle +=\n+          F2DOT14_TO_FIXED( item_deltas[3] );\n+      }\n+#endif\n+      apaint->format = FT_COLR_PAINTFORMAT_SWEEP_GRADIENT;\n+\n@@ -573,0 +889,1 @@\n+      ENSURE_READ_BYTES( 2 );\n@@ -580,1 +897,3 @@\n-    else if ( apaint->format == FT_COLR_PAINTFORMAT_TRANSFORM )\n+    else if ( apaint->format == FT_COLR_PAINTFORMAT_TRANSFORM ||\n+              (FT_PaintFormat_Internal)apaint->format ==\n+                FT_COLR_PAINTFORMAT_INTERNAL_VAR_TRANSFORM    )\n@@ -594,0 +913,1 @@\n+      ENSURE_READ_BYTES( 24 );\n@@ -601,0 +921,22 @@\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+      if ( (FT_PaintFormat_Internal)apaint->format ==\n+             FT_COLR_PAINTFORMAT_INTERNAL_VAR_TRANSFORM )\n+      {\n+        ENSURE_READ_BYTES( 4 );\n+        var_index_base = FT_NEXT_ULONG( p );\n+\n+        if ( !get_deltas_for_var_index_base( face, colr, var_index_base, 6,\n+                                             item_deltas ) )\n+          return 0;\n+\n+        apaint->u.transform.affine.xx += (FT_Fixed)item_deltas[0];\n+        apaint->u.transform.affine.yx += (FT_Fixed)item_deltas[1];\n+        apaint->u.transform.affine.xy += (FT_Fixed)item_deltas[2];\n+        apaint->u.transform.affine.yy += (FT_Fixed)item_deltas[3];\n+        apaint->u.transform.affine.dx += (FT_Fixed)item_deltas[4];\n+        apaint->u.transform.affine.dy += (FT_Fixed)item_deltas[5];\n+      }\n+#endif\n+\n+      apaint->format = FT_COLR_PAINTFORMAT_TRANSFORM;\n+\n@@ -604,1 +946,3 @@\n-    else if ( apaint->format == FT_COLR_PAINTFORMAT_TRANSLATE )\n+    else if ( apaint->format == FT_COLR_PAINTFORMAT_TRANSLATE ||\n+              (FT_PaintFormat_Internal)apaint->format ==\n+                FT_COLR_PAINTFORMAT_INTERNAL_VAR_TRANSLATE    )\n@@ -609,0 +953,1 @@\n+      ENSURE_READ_BYTES( 4 );\n@@ -612,0 +957,18 @@\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+      if ( (FT_PaintFormat_Internal)apaint->format ==\n+             FT_COLR_PAINTFORMAT_INTERNAL_VAR_TRANSLATE )\n+      {\n+        ENSURE_READ_BYTES( 4 );\n+        var_index_base = FT_NEXT_ULONG( p );\n+\n+        if ( !get_deltas_for_var_index_base( face, colr, var_index_base, 2,\n+                                             item_deltas ) )\n+          return 0;\n+\n+        apaint->u.translate.dx += INT_TO_FIXED( item_deltas[0] );\n+        apaint->u.translate.dy += INT_TO_FIXED( item_deltas[1] );\n+      }\n+#endif\n+\n+      apaint->format = FT_COLR_PAINTFORMAT_TRANSLATE;\n+\n@@ -615,8 +978,3 @@\n-    else if ( apaint->format ==\n-                FT_COLR_PAINTFORMAT_SCALE                         ||\n-              (FT_PaintFormat_Internal)apaint->format ==\n-                FT_COLR_PAINTFORMAT_INTERNAL_SCALE_CENTER         ||\n-              (FT_PaintFormat_Internal)apaint->format ==\n-                FT_COLR_PAINTFORMAT_INTERNAL_SCALE_UNIFORM        ||\n-              (FT_PaintFormat_Internal)apaint->format ==\n-                FT_COLR_PAINTFORMAT_INTERNAL_SCALE_UNIFORM_CENTER )\n+    else if ( apaint->format >= FT_COLR_PAINTFORMAT_SCALE             &&\n+              (FT_PaintFormat_Internal)apaint->format <=\n+                FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE_UNIFORM_CENTER )\n@@ -628,0 +986,1 @@\n+      ENSURE_READ_BYTES( 2 );\n@@ -631,2 +990,5 @@\n-      if ( apaint->format ==\n-             FT_COLR_PAINTFORMAT_SCALE                 ||\n+      if ( apaint->format == FT_COLR_PAINTFORMAT_SCALE     ||\n+           (FT_PaintFormat_Internal)apaint->format ==\n+             FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE        ||\n+           (FT_PaintFormat_Internal)apaint->format ==\n+             FT_COLR_PAINTFORMAT_INTERNAL_SCALE_CENTER     ||\n@@ -634,1 +996,3 @@\n-             FT_COLR_PAINTFORMAT_INTERNAL_SCALE_CENTER )\n+             FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE_CENTER )\n+      {\n+        ENSURE_READ_BYTES( 2 );\n@@ -636,0 +1000,1 @@\n+      }\n@@ -642,1 +1007,3 @@\n-             FT_COLR_PAINTFORMAT_INTERNAL_SCALE_CENTER         ||\n+             FT_COLR_PAINTFORMAT_INTERNAL_SCALE_CENTER             ||\n+           (FT_PaintFormat_Internal)apaint->format ==\n+             FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE_CENTER         ||\n@@ -644,1 +1011,3 @@\n-             FT_COLR_PAINTFORMAT_INTERNAL_SCALE_UNIFORM_CENTER )\n+             FT_COLR_PAINTFORMAT_INTERNAL_SCALE_UNIFORM_CENTER     ||\n+           (FT_PaintFormat_Internal)apaint->format ==\n+             FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE_UNIFORM_CENTER )\n@@ -646,0 +1015,1 @@\n+        ENSURE_READ_BYTES( 4 );\n@@ -655,0 +1025,65 @@\n+      \/* Base values set, now handle variations. *\/\n+\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+      if ( (FT_PaintFormat_Internal)apaint->format ==\n+             FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE                ||\n+           (FT_PaintFormat_Internal)apaint->format ==\n+             FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE_CENTER         ||\n+           (FT_PaintFormat_Internal)apaint->format ==\n+             FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE_UNIFORM        ||\n+           (FT_PaintFormat_Internal)apaint->format ==\n+             FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE_UNIFORM_CENTER )\n+      {\n+        ENSURE_READ_BYTES( 4 );\n+        var_index_base = FT_NEXT_ULONG( p );\n+\n+        if ( (FT_PaintFormat_Internal)apaint->format ==\n+               FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE )\n+        {\n+          if ( !get_deltas_for_var_index_base( face, colr, var_index_base, 2,\n+                                               item_deltas ) )\n+            return 0;\n+\n+          apaint->u.scale.scale_x += F2DOT14_TO_FIXED( item_deltas[0] );\n+          apaint->u.scale.scale_y += F2DOT14_TO_FIXED( item_deltas[1] );\n+        }\n+\n+        if ( (FT_PaintFormat_Internal)apaint->format ==\n+               FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE_CENTER )\n+        {\n+          if ( !get_deltas_for_var_index_base( face, colr, var_index_base, 4,\n+                                               item_deltas ) )\n+            return 0;\n+\n+          apaint->u.scale.scale_x  += F2DOT14_TO_FIXED( item_deltas[0] );\n+          apaint->u.scale.scale_y  += F2DOT14_TO_FIXED( item_deltas[1] );\n+          apaint->u.scale.center_x += INT_TO_FIXED( item_deltas[2] );\n+          apaint->u.scale.center_y += INT_TO_FIXED( item_deltas[3] );\n+        }\n+\n+        if ( (FT_PaintFormat_Internal)apaint->format ==\n+               FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE_UNIFORM )\n+        {\n+          if ( !get_deltas_for_var_index_base( face, colr, var_index_base, 1,\n+                                               item_deltas ) )\n+            return 0;\n+\n+          apaint->u.scale.scale_x += F2DOT14_TO_FIXED( item_deltas[0] );\n+          apaint->u.scale.scale_y += F2DOT14_TO_FIXED( item_deltas[0] );\n+        }\n+\n+        if ( (FT_PaintFormat_Internal)apaint->format ==\n+               FT_COLR_PAINTFORMAT_INTERNAL_VAR_SCALE_UNIFORM_CENTER )\n+        {\n+          if ( !get_deltas_for_var_index_base( face, colr, var_index_base, 3,\n+                                               item_deltas ) )\n+            return 0;\n+\n+          apaint->u.scale.scale_x  += F2DOT14_TO_FIXED( item_deltas[0] );\n+          apaint->u.scale.scale_y  += F2DOT14_TO_FIXED( item_deltas[0] );\n+          apaint->u.scale.center_x += INT_TO_FIXED( item_deltas[1] );\n+          apaint->u.scale.center_y += INT_TO_FIXED( item_deltas[2] );\n+        }\n+      }\n+#endif\n+\n@@ -662,1 +1097,3 @@\n-    else if ( apaint->format == FT_COLR_PAINTFORMAT_ROTATE ||\n+    else if ( apaint->format == FT_COLR_PAINTFORMAT_ROTATE     ||\n+              (FT_PaintFormat_Internal)apaint->format ==\n+                FT_COLR_PAINTFORMAT_INTERNAL_ROTATE_CENTER     ||\n@@ -664,1 +1101,3 @@\n-                FT_COLR_PAINTFORMAT_INTERNAL_ROTATE_CENTER )\n+                FT_COLR_PAINTFORMAT_INTERNAL_VAR_ROTATE        ||\n+              (FT_PaintFormat_Internal)apaint->format ==\n+                FT_COLR_PAINTFORMAT_INTERNAL_VAR_ROTATE_CENTER )\n@@ -669,0 +1108,1 @@\n+      ENSURE_READ_BYTES( 2 );\n@@ -672,1 +1112,3 @@\n-           FT_COLR_PAINTFORMAT_INTERNAL_ROTATE_CENTER )\n+             FT_COLR_PAINTFORMAT_INTERNAL_ROTATE_CENTER     ||\n+           (FT_PaintFormat_Internal)apaint->format ==\n+             FT_COLR_PAINTFORMAT_INTERNAL_VAR_ROTATE_CENTER )\n@@ -674,0 +1116,1 @@\n+        ENSURE_READ_BYTES( 4 );\n@@ -683,0 +1126,36 @@\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+      if ( (FT_PaintFormat_Internal)apaint->format ==\n+             FT_COLR_PAINTFORMAT_INTERNAL_VAR_ROTATE        ||\n+           (FT_PaintFormat_Internal)apaint->format ==\n+             FT_COLR_PAINTFORMAT_INTERNAL_VAR_ROTATE_CENTER )\n+      {\n+        FT_UInt  num_deltas = 0;\n+\n+\n+        ENSURE_READ_BYTES( 4 );\n+        var_index_base = FT_NEXT_ULONG( p );\n+\n+        if ( (FT_PaintFormat_Internal)apaint->format ==\n+               FT_COLR_PAINTFORMAT_INTERNAL_VAR_ROTATE_CENTER )\n+          num_deltas = 3;\n+        if ( (FT_PaintFormat_Internal)apaint->format ==\n+               FT_COLR_PAINTFORMAT_INTERNAL_VAR_ROTATE )\n+          num_deltas = 1;\n+\n+        if ( num_deltas > 0 )\n+        {\n+          if ( !get_deltas_for_var_index_base( face, colr, var_index_base,\n+                                               num_deltas, item_deltas ) )\n+            return 0;\n+\n+          apaint->u.rotate.angle += F2DOT14_TO_FIXED( item_deltas[0] );\n+\n+          if ( num_deltas == 3 )\n+          {\n+            apaint->u.rotate.center_x += INT_TO_FIXED( item_deltas[1] );\n+            apaint->u.rotate.center_y += INT_TO_FIXED( item_deltas[2] );\n+          }\n+        }\n+      }\n+#endif\n+\n@@ -685,0 +1164,1 @@\n+\n@@ -688,1 +1168,5 @@\n-    else if ( apaint->format == FT_COLR_PAINTFORMAT_SKEW ||\n+    else if ( apaint->format == FT_COLR_PAINTFORMAT_SKEW     ||\n+              (FT_PaintFormat_Internal)apaint->format ==\n+                FT_COLR_PAINTFORMAT_INTERNAL_VAR_SKEW        ||\n+              (FT_PaintFormat_Internal)apaint->format ==\n+                FT_COLR_PAINTFORMAT_INTERNAL_SKEW_CENTER     ||\n@@ -690,1 +1174,1 @@\n-                FT_COLR_PAINTFORMAT_INTERNAL_SKEW_CENTER )\n+                FT_COLR_PAINTFORMAT_INTERNAL_VAR_SKEW_CENTER )\n@@ -695,0 +1179,1 @@\n+      ENSURE_READ_BYTES( 4 );\n@@ -699,1 +1184,3 @@\n-           FT_COLR_PAINTFORMAT_INTERNAL_SKEW_CENTER )\n+             FT_COLR_PAINTFORMAT_INTERNAL_SKEW_CENTER     ||\n+           (FT_PaintFormat_Internal)apaint->format ==\n+             FT_COLR_PAINTFORMAT_INTERNAL_VAR_SKEW_CENTER )\n@@ -701,0 +1188,1 @@\n+        ENSURE_READ_BYTES( 4 );\n@@ -710,0 +1198,36 @@\n+\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+      if ( (FT_PaintFormat_Internal)apaint->format ==\n+             FT_COLR_PAINTFORMAT_INTERNAL_VAR_SKEW        ||\n+           (FT_PaintFormat_Internal)apaint->format ==\n+             FT_COLR_PAINTFORMAT_INTERNAL_VAR_SKEW_CENTER )\n+      {\n+        ENSURE_READ_BYTES( 4 );\n+        var_index_base = FT_NEXT_ULONG( p );\n+\n+        if ( (FT_PaintFormat_Internal)apaint->format ==\n+               FT_COLR_PAINTFORMAT_INTERNAL_VAR_SKEW )\n+        {\n+          if ( !get_deltas_for_var_index_base( face, colr, var_index_base, 2,\n+                                               item_deltas ) )\n+            return 0;\n+\n+          apaint->u.skew.x_skew_angle += F2DOT14_TO_FIXED( item_deltas[0] );\n+          apaint->u.skew.y_skew_angle += F2DOT14_TO_FIXED( item_deltas[1] );\n+        }\n+\n+        if ( (FT_PaintFormat_Internal)apaint->format ==\n+               FT_COLR_PAINTFORMAT_INTERNAL_VAR_SKEW_CENTER )\n+        {\n+          if ( !get_deltas_for_var_index_base( face, colr, var_index_base, 4,\n+                                               item_deltas ) )\n+            return 0;\n+\n+          apaint->u.skew.x_skew_angle += F2DOT14_TO_FIXED( item_deltas[0] );\n+          apaint->u.skew.y_skew_angle += F2DOT14_TO_FIXED( item_deltas[1] );\n+          apaint->u.skew.center_x     += INT_TO_FIXED( item_deltas[2] );\n+          apaint->u.skew.center_y     += INT_TO_FIXED( item_deltas[3] );\n+        }\n+      }\n+#endif\n+\n@@ -723,0 +1247,1 @@\n+      ENSURE_READ_BYTES( 1 );\n@@ -874,1 +1399,1 @@\n-    \/* glyph ids; for now we can expect it to be 0.                    *\/\n+    \/* glyph ids; for now we can expect it to be 1.                    *\/\n@@ -902,1 +1427,1 @@\n-        if ( format > 1 )\n+        if ( format > 2 )\n@@ -916,1 +1441,1 @@\n-                                        face->root.size->metrics.x_scale );\n+                                        face->root.size->metrics.y_scale );\n@@ -920,1 +1445,30 @@\n-                                        face->root.size->metrics.x_scale );\n+                                        face->root.size->metrics.y_scale );\n+\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+        if ( format == 2 )\n+        {\n+          FT_ULong         var_index_base = 0;\n+          \/* varIndexBase offset for clipbox is 3 at most. *\/\n+          FT_ItemVarDelta  item_deltas[4] = { 0, 0, 0, 0 };\n+\n+\n+          \/* Check whether we can extract a 32-bit varIndexBase now. *\/\n+          if ( p1 > limit - 4 )\n+            return 0;\n+\n+          var_index_base = FT_NEXT_ULONG( p1 );\n+\n+          if ( !get_deltas_for_var_index_base( face, colr, var_index_base, 4,\n+                                               item_deltas ) )\n+            return 0;\n+\n+          font_clip_box.xMin +=\n+            FT_MulFix( item_deltas[0], face->root.size->metrics.x_scale );\n+          font_clip_box.yMin +=\n+            FT_MulFix( item_deltas[1], face->root.size->metrics.y_scale );\n+          font_clip_box.xMax +=\n+            FT_MulFix( item_deltas[2], face->root.size->metrics.x_scale );\n+          font_clip_box.yMax +=\n+            FT_MulFix( item_deltas[3], face->root.size->metrics.y_scale );\n+        }\n+#endif\n@@ -988,7 +1542,0 @@\n-    \/*\n-     * First ensure that p is within COLRv1.\n-     *\/\n-    if ( p < colr->layers_v1                               ||\n-         p >= ( (FT_Byte*)colr->table + colr->table_size ) )\n-      return 0;\n-\n@@ -1011,0 +1558,8 @@\n+    \/*\n+     * Before reading, ensure that `p` is within 'COLR' v1 and we can read a\n+     * 4-byte ULONG.\n+     *\/\n+    if ( p < colr->layers_v1                              ||\n+         p > (FT_Byte*)colr->table + colr->table_size - 4 )\n+      return 0;\n+\n@@ -1040,0 +1595,3 @@\n+    FT_ULong  var_index_base;\n+    FT_Byte*  last_entry_p = NULL;\n+    FT_UInt   entry_size   = COLOR_STOP_SIZE;\n@@ -1042,1 +1600,1 @@\n-    if ( !colr || !colr->table )\n+    if ( !colr || !colr->table || !iterator )\n@@ -1048,4 +1606,13 @@\n-    if ( iterator->p +\n-           ( ( iterator->num_color_stops - iterator->current_color_stop ) *\n-             COLOR_STOP_SIZE ) >\n-         ( (FT_Byte *)colr->table + colr->table_size ) )\n+    if ( iterator->read_variable )\n+      entry_size += VAR_IDX_BASE_SIZE;\n+\n+    \/* Calculate the start pointer for the last to-be-read (Var)ColorStop *\/\n+    \/* and check whether we can read a full (Var)ColorStop at that        *\/\n+    \/* position by comparing it to the position that is the size of one   *\/\n+    \/* (Var)ColorStop before the end of the 'COLR' table.                 *\/\n+    last_entry_p =\n+      iterator->p + ( iterator->num_color_stops - 1 -\n+                      iterator->current_color_stop ) * entry_size;\n+    if ( iterator->p < colr->paints_start_v1          ||\n+         last_entry_p > (FT_Byte*)colr->table +\n+                        colr->table_size - entry_size )\n@@ -1057,1 +1624,1 @@\n-    color_stop->stop_offset = FT_NEXT_SHORT( p );\n+    color_stop->stop_offset = F2DOT14_TO_FIXED( FT_NEXT_SHORT( p ) );\n@@ -1063,0 +1630,26 @@\n+    if ( iterator->read_variable )\n+    {\n+      \/* Pointer p needs to be advanced independently of whether we intend *\/\n+      \/* to take variable deltas into account or not.  Otherwise iteration *\/\n+      \/* would fail due to wrong offsets.                                  *\/\n+      var_index_base = FT_NEXT_ULONG( p );\n+\n+#ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT\n+      {\n+        FT_Int  item_deltas[2];\n+\n+\n+        if ( !get_deltas_for_var_index_base( face, colr,\n+                                             var_index_base,\n+                                             2,\n+                                             item_deltas ) )\n+          return 0;\n+\n+        color_stop->stop_offset += F2DOT14_TO_FIXED( item_deltas[0] );\n+        color_stop->color.alpha += item_deltas[1];\n+      }\n+#else\n+      FT_UNUSED( var_index_base );\n+#endif\n+    }\n+\n@@ -1142,1 +1735,1 @@\n-    return read_paint( colr, opaque_paint.p, paint );\n+    return read_paint( face, colr, opaque_paint.p, paint );\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttcolr.c","additions":662,"deletions":69,"binary":false,"changes":731,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2018-2022 by\n+ * Copyright (C) 2018-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttcolr.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2018-2022 by\n+ * Copyright (C) 2018-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttcpal.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2018-2022 by\n+ * Copyright (C) 2018-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttcpal.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttkern.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttkern.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -209,1 +209,1 @@\n-                    \" can read only %d table%s in font (instead of %d)\\n\",\n+                    \" can read only %hu table%s in font (instead of %hu)\\n\",\n@@ -219,1 +219,1 @@\n-        FT_TRACE2(( \"check_table_dir: table entry %d invalid\\n\", nn ));\n+        FT_TRACE2(( \"check_table_dir: table entry %hu invalid\\n\", nn ));\n@@ -234,1 +234,1 @@\n-          FT_TRACE2(( \"check_table_dir: table entry %d invalid\\n\", nn ));\n+          FT_TRACE2(( \"check_table_dir: table entry %hu invalid\\n\", nn ));\n@@ -383,1 +383,1 @@\n-    FT_TRACE2(( \"-- Number of tables: %10u\\n\",    sfnt.num_tables ));\n+    FT_TRACE2(( \"-- Number of tables: %10hu\\n\",   sfnt.num_tables ));\n@@ -674,2 +674,2 @@\n-    FT_TRACE3(( \"Units per EM: %4u\\n\", header->Units_Per_EM ));\n-    FT_TRACE3(( \"IndexToLoc:   %4d\\n\", header->Index_To_Loc_Format ));\n+    FT_TRACE3(( \"Units per EM: %4hu\\n\", header->Units_Per_EM ));\n+    FT_TRACE3(( \"IndexToLoc:   %4hd\\n\", header->Index_To_Loc_Format ));\n@@ -805,1 +805,1 @@\n-    FT_TRACE3(( \"numGlyphs: %u\\n\", maxProfile->numGlyphs ));\n+    FT_TRACE3(( \"numGlyphs: %hu\\n\", maxProfile->numGlyphs ));\n@@ -1268,5 +1268,5 @@\n-    FT_TRACE3(( \"sTypoAscender:  %4d\\n\",   os2->sTypoAscender ));\n-    FT_TRACE3(( \"sTypoDescender: %4d\\n\",   os2->sTypoDescender ));\n-    FT_TRACE3(( \"usWinAscent:    %4u\\n\",   os2->usWinAscent ));\n-    FT_TRACE3(( \"usWinDescent:   %4u\\n\",   os2->usWinDescent ));\n-    FT_TRACE3(( \"fsSelection:    0x%2x\\n\", os2->fsSelection ));\n+    FT_TRACE3(( \"sTypoAscender:  %4hd\\n\",   os2->sTypoAscender ));\n+    FT_TRACE3(( \"sTypoDescender: %4hd\\n\",   os2->sTypoDescender ));\n+    FT_TRACE3(( \"usWinAscent:    %4hu\\n\",   os2->usWinAscent ));\n+    FT_TRACE3(( \"usWinDescent:   %4hu\\n\",   os2->usWinDescent ));\n+    FT_TRACE3(( \"fsSelection:    0x%2hx\\n\", os2->fsSelection ));\n@@ -1471,1 +1471,1 @@\n-      FT_TRACE3(( \"gaspRange %d: rangeMaxPPEM %5d, rangeGaspBehavior 0x%x\\n\",\n+      FT_TRACE3(( \"gaspRange %hu: rangeMaxPPEM %5hu, rangeGaspBehavior 0x%hx\\n\",\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttload.c","additions":14,"deletions":14,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttload.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2006-2022 by\n+ * Copyright (C) 2006-2023 by\n@@ -309,1 +309,1 @@\n-    if ( var )\n+    if ( var && face->blend )\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttmtx.c","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2006-2022 by\n+ * Copyright (C) 2006-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttmtx.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -61,1 +61,1 @@\n-#else \/* FT_CONFIG_OPTION_POSTSCRIPT_NAMES *\/\n+#else \/* !FT_CONFIG_OPTION_POSTSCRIPT_NAMES *\/\n@@ -155,1 +155,1 @@\n-#endif \/* FT_CONFIG_OPTION_POSTSCRIPT_NAMES *\/\n+#endif \/* !FT_CONFIG_OPTION_POSTSCRIPT_NAMES *\/\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttpost.c","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -8,1 +8,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttpost.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2005-2022 by\n+ * Copyright (C) 2005-2023 by\n@@ -388,2 +388,1 @@\n-        metrics->x_scale = FT_MulDiv( metrics->x_ppem,\n-                                      64 * 0x10000,\n+        metrics->x_scale = FT_DivFix( metrics->x_ppem * 64,\n@@ -391,2 +390,1 @@\n-        metrics->y_scale = FT_MulDiv( metrics->y_ppem,\n-                                      64 * 0x10000,\n+        metrics->y_scale = FT_DivFix( metrics->y_ppem * 64,\n@@ -402,1 +400,1 @@\n-        FT_UShort       upem, ppem, resolution;\n+        FT_UShort       ppem, resolution;\n@@ -404,1 +402,1 @@\n-        FT_Pos          ppem_; \/* to reduce casts *\/\n+        FT_Fixed        scale;\n@@ -427,3 +425,0 @@\n-        upem = face->header.Units_Per_EM;\n-        hori = &face->horizontal;\n-\n@@ -433,1 +428,2 @@\n-        ppem_ = (FT_Pos)ppem;\n+        scale = FT_DivFix( ppem * 64, face->header.Units_Per_EM );\n+        hori  = &face->horizontal;\n@@ -435,9 +431,6 @@\n-        metrics->ascender =\n-          FT_MulDiv( hori->Ascender, ppem_ * 64, upem );\n-        metrics->descender =\n-          FT_MulDiv( hori->Descender, ppem_ * 64, upem );\n-        metrics->height =\n-          FT_MulDiv( hori->Ascender - hori->Descender + hori->Line_Gap,\n-                     ppem_ * 64, upem );\n-        metrics->max_advance =\n-          FT_MulDiv( hori->advance_Width_Max, ppem_ * 64, upem );\n+        metrics->ascender    = FT_MulFix( hori->Ascender, scale );\n+        metrics->descender   = FT_MulFix( hori->Descender, scale );\n+        metrics->height      =\n+          FT_MulFix( hori->Ascender - hori->Descender + hori->Line_Gap,\n+                     scale );\n+        metrics->max_advance = FT_MulFix( hori->advance_Width_Max, scale );\n@@ -447,6 +440,2 @@\n-        metrics->x_scale = FT_MulDiv( metrics->x_ppem,\n-                                      64 * 0x10000,\n-                                      face->header.Units_Per_EM );\n-        metrics->y_scale = FT_MulDiv( metrics->y_ppem,\n-                                      64 * 0x10000,\n-                                      face->header.Units_Per_EM );\n+        metrics->x_scale = scale;\n+        metrics->y_scale = scale;\n@@ -1207,1 +1196,1 @@\n-        \/* fall-through *\/\n+        FALL_THROUGH;\n@@ -1607,1 +1596,1 @@\n-  FT_LOCAL( FT_Error )\n+  FT_LOCAL_DEF( FT_Error )\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttsbit.c","additions":17,"deletions":28,"binary":false,"changes":45,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/ttsbit.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2019-2022 by\n+ * Copyright (C) 2019-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/woff2tags.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2019-2022 by\n+ * Copyright (C) 2019-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/sfnt\/woff2tags.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2000-2022 by\n+ * Copyright (C) 2000-2023 by\n@@ -421,15 +421,15 @@\n-#define FT_GRAY_SET( d, s, count )                          \\\n-  FT_BEGIN_STMNT                                            \\\n-    unsigned char* q = d;                                   \\\n-    switch ( count )                                        \\\n-    {                                                       \\\n-      case 7: *q++ = (unsigned char)s; \/* fall through *\/   \\\n-      case 6: *q++ = (unsigned char)s; \/* fall through *\/   \\\n-      case 5: *q++ = (unsigned char)s; \/* fall through *\/   \\\n-      case 4: *q++ = (unsigned char)s; \/* fall through *\/   \\\n-      case 3: *q++ = (unsigned char)s; \/* fall through *\/   \\\n-      case 2: *q++ = (unsigned char)s; \/* fall through *\/   \\\n-      case 1: *q   = (unsigned char)s; \/* fall through *\/   \\\n-      case 0: break;                                        \\\n-      default: FT_MEM_SET( d, s, count );                   \\\n-    }                                                       \\\n+#define FT_GRAY_SET( d, s, count )                   \\\n+  FT_BEGIN_STMNT                                     \\\n+    unsigned char* q = d;                            \\\n+    switch ( count )                                 \\\n+    {                                                \\\n+      case 7: *q++ = (unsigned char)s; FALL_THROUGH; \\\n+      case 6: *q++ = (unsigned char)s; FALL_THROUGH; \\\n+      case 5: *q++ = (unsigned char)s; FALL_THROUGH; \\\n+      case 4: *q++ = (unsigned char)s; FALL_THROUGH; \\\n+      case 3: *q++ = (unsigned char)s; FALL_THROUGH; \\\n+      case 2: *q++ = (unsigned char)s; FALL_THROUGH; \\\n+      case 1: *q   = (unsigned char)s; FALL_THROUGH; \\\n+      case 0: break;                                 \\\n+      default: FT_MEM_SET( d, s, count );            \\\n+    }                                                \\\n@@ -1912,1 +1912,1 @@\n-  gray_convert_glyph_inner( RAS_ARG,\n+  gray_convert_glyph_inner( RAS_ARG_\n@@ -1915,1 +1915,1 @@\n-    int  error;\n+    volatile int  error;\n@@ -2007,1 +2007,1 @@\n-        error     = gray_convert_glyph_inner( RAS_VAR, continued );\n+        error     = gray_convert_glyph_inner( RAS_VAR_ continued );\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/smooth\/ftgrays.c","additions":19,"deletions":19,"binary":false,"changes":38,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/smooth\/ftgrays.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/smooth\/ftsmerrs.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2000-2022 by\n+ * Copyright (C) 2000-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/smooth\/ftsmooth.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/smooth\/ftsmooth.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -510,13 +510,28 @@\n-    (FT_Get_MM_Func)             NULL,                  \/* get_mm              *\/\n-    (FT_Set_MM_Design_Func)      NULL,                  \/* set_mm_design       *\/\n-    (FT_Set_MM_Blend_Func)       TT_Set_MM_Blend,       \/* set_mm_blend        *\/\n-    (FT_Get_MM_Blend_Func)       TT_Get_MM_Blend,       \/* get_mm_blend        *\/\n-    (FT_Get_MM_Var_Func)         TT_Get_MM_Var,         \/* get_mm_var          *\/\n-    (FT_Set_Var_Design_Func)     TT_Set_Var_Design,     \/* set_var_design      *\/\n-    (FT_Get_Var_Design_Func)     TT_Get_Var_Design,     \/* get_var_design      *\/\n-    (FT_Set_Instance_Func)       TT_Set_Named_Instance, \/* set_instance        *\/\n-    (FT_Set_MM_WeightVector_Func)NULL,                  \/* set_mm_weightvector *\/\n-    (FT_Get_MM_WeightVector_Func)NULL,                  \/* get_mm_weightvector *\/\n-\n-    (FT_Get_Var_Blend_Func)      tt_get_var_blend,      \/* get_var_blend       *\/\n-    (FT_Done_Blend_Func)         tt_done_blend          \/* done_blend          *\/\n+    (FT_Get_MM_Func)        NULL,                  \/* get_mm                    *\/\n+    (FT_Set_MM_Design_Func) NULL,                  \/* set_mm_design             *\/\n+    (FT_Set_MM_Blend_Func)  TT_Set_MM_Blend,       \/* set_mm_blend              *\/\n+    (FT_Get_MM_Blend_Func)  TT_Get_MM_Blend,       \/* get_mm_blend              *\/\n+    (FT_Get_MM_Var_Func)    TT_Get_MM_Var,         \/* get_mm_var                *\/\n+    (FT_Set_Var_Design_Func)TT_Set_Var_Design,     \/* set_var_design            *\/\n+    (FT_Get_Var_Design_Func)TT_Get_Var_Design,     \/* get_var_design            *\/\n+    (FT_Set_Instance_Func)  TT_Set_Named_Instance, \/* set_instance              *\/\n+    (FT_Set_MM_WeightVector_Func)\n+                            NULL,                  \/* set_mm_weightvector       *\/\n+    (FT_Get_MM_WeightVector_Func)\n+                            NULL,                  \/* get_mm_weightvector       *\/\n+    (FT_Var_Load_Delta_Set_Idx_Map_Func)\n+                            tt_var_load_delta_set_index_mapping,\n+                                                   \/* load_delta_set_idx_map    *\/\n+    (FT_Var_Load_Item_Var_Store_Func)\n+                            tt_var_load_item_variation_store,\n+                                                   \/* load_item_variation_store *\/\n+    (FT_Var_Get_Item_Delta_Func)\n+                            tt_var_get_item_delta, \/* get_item_delta            *\/\n+    (FT_Var_Done_Item_Var_Store_Func)\n+                            tt_var_done_item_variation_store,\n+                                                   \/* done_item_variation_store *\/\n+    (FT_Var_Done_Delta_Set_Idx_Map_Func)\n+                            tt_var_done_delta_set_index_map,\n+                                                   \/* done_delta_set_index_map  *\/\n+    (FT_Get_Var_Blend_Func) tt_get_var_blend,      \/* get_var_blend             *\/\n+    (FT_Done_Blend_Func)    tt_done_blend          \/* done_blend                *\/\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/truetype\/ttdriver.c","additions":29,"deletions":14,"binary":false,"changes":43,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/truetype\/ttdriver.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/truetype\/tterrors.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -740,1 +740,1 @@\n-                      subglyph->transform.xx \/ 65536.0 ));\n+                      (double)subglyph->transform.xx \/ 65536 ));\n@@ -743,2 +743,2 @@\n-                      subglyph->transform.xx \/ 65536.0,\n-                      subglyph->transform.yy \/ 65536.0 ));\n+                      (double)subglyph->transform.xx \/ 65536,\n+                      (double)subglyph->transform.yy \/ 65536 ));\n@@ -748,2 +748,2 @@\n-                      subglyph->transform.xx \/ 65536.0,\n-                      subglyph->transform.yx \/ 65536.0 ));\n+                      (double)subglyph->transform.xx \/ 65536,\n+                      (double)subglyph->transform.yx \/ 65536 ));\n@@ -751,2 +751,2 @@\n-                      subglyph->transform.xy \/ 65536.0,\n-                      subglyph->transform.yy \/ 65536.0 ));\n+                      (double)subglyph->transform.xy \/ 65536,\n+                      (double)subglyph->transform.yy \/ 65536 ));\n@@ -804,1 +804,1 @@\n-    zone->n_points    = (FT_UShort)load->outline.n_points -\n+    zone->n_points    = (FT_UShort)load->outline.n_points + 4 -\n@@ -973,5 +973,0 @@\n-    outline->tags[n_points    ] = 0;\n-    outline->tags[n_points + 1] = 0;\n-    outline->tags[n_points + 2] = 0;\n-    outline->tags[n_points + 3] = 0;\n-\n@@ -988,2 +983,1 @@\n-      error = TT_Vary_Apply_Glyph_Deltas( loader->face,\n-                                          loader->glyph_index,\n+      error = TT_Vary_Apply_Glyph_Deltas( loader,\n@@ -991,15 +985,1 @@\n-                                          unrounded,\n-                                          (FT_UInt)n_points );\n-\n-      \/* recalculate linear horizontal and vertical advances *\/\n-      \/* if we don't have HVAR and VVAR, respectively        *\/\n-\n-      \/* XXX: change all FreeType modules to store `linear' and `vadvance' *\/\n-      \/*      in 26.6 format before the `base' module scales them to 16.16 *\/\n-      if ( !( loader->face->variation_support & TT_FACE_FLAG_VAR_HADVANCE ) )\n-        loader->linear = FT_PIX_ROUND( unrounded[n_points - 3].x -\n-                                       unrounded[n_points - 4].x ) \/ 64;\n-      if ( !( loader->face->variation_support & TT_FACE_FLAG_VAR_VADVANCE ) )\n-        loader->vadvance = FT_PIX_ROUND( unrounded[n_points - 1].x -\n-                                         unrounded[n_points - 2].x ) \/ 64;\n-\n+                                          unrounded );\n@@ -1017,1 +997,1 @@\n-                     loader->zone.n_points + 4 );\n+                     loader->zone.n_points );\n@@ -1159,3 +1139,0 @@\n-    {\n-      loader->zone.n_points += 4;\n-\n@@ -1163,1 +1140,0 @@\n-    }\n@@ -1376,5 +1352,0 @@\n-    outline->tags[outline->n_points    ] = 0;\n-    outline->tags[outline->n_points + 1] = 0;\n-    outline->tags[outline->n_points + 2] = 0;\n-    outline->tags[outline->n_points + 3] = 0;\n-\n@@ -1439,1 +1410,1 @@\n-    for ( i = 0; i < loader->zone.n_points; i++ )\n+    for ( i = 0; i < loader->zone.n_points - 4U; i++ )\n@@ -1442,2 +1413,0 @@\n-    loader->zone.n_points += 4;\n-\n@@ -1764,2 +1733,0 @@\n-        char        tags[4]     = { 1, 1, 1, 1 };\n-        short       contours[4] = { 0, 1, 2, 3 };\n@@ -1772,9 +1739,4 @@\n-        points[0].x = loader->pp1.x;\n-        points[0].y = loader->pp1.y;\n-        points[1].x = loader->pp2.x;\n-        points[1].y = loader->pp2.y;\n-\n-        points[2].x = loader->pp3.x;\n-        points[2].y = loader->pp3.y;\n-        points[3].x = loader->pp4.x;\n-        points[3].y = loader->pp4.y;\n+        points[0] = loader->pp1;\n+        points[1] = loader->pp2;\n+        points[2] = loader->pp3;\n+        points[3] = loader->pp4;\n@@ -1782,2 +1744,2 @@\n-        outline.n_points   = 4;\n-        outline.n_contours = 4;\n+        outline.n_points   = 0;\n+        outline.n_contours = 0;\n@@ -1785,2 +1747,2 @@\n-        outline.tags       = tags;\n-        outline.contours   = contours;\n+        outline.tags       = NULL;\n+        outline.contours   = NULL;\n@@ -1789,2 +1751,1 @@\n-        error = TT_Vary_Apply_Glyph_Deltas( loader->face,\n-                                            glyph_index,\n+        error = TT_Vary_Apply_Glyph_Deltas( loader,\n@@ -1792,2 +1753,1 @@\n-                                            unrounded,\n-                                            (FT_UInt)outline.n_points );\n+                                            unrounded );\n@@ -1796,19 +1756,0 @@\n-\n-        loader->pp1.x = points[0].x;\n-        loader->pp1.y = points[0].y;\n-        loader->pp2.x = points[1].x;\n-        loader->pp2.y = points[1].y;\n-\n-        loader->pp3.x = points[2].x;\n-        loader->pp3.y = points[2].y;\n-        loader->pp4.x = points[3].x;\n-        loader->pp4.y = points[3].y;\n-\n-        \/* recalculate linear horizontal and vertical advances *\/\n-        \/* if we don't have HVAR and VVAR, respectively        *\/\n-        if ( !( loader->face->variation_support & TT_FACE_FLAG_VAR_HADVANCE ) )\n-          loader->linear = FT_PIX_ROUND( unrounded[1].x -\n-                                         unrounded[0].x ) \/ 64;\n-        if ( !( loader->face->variation_support & TT_FACE_FLAG_VAR_VADVANCE ) )\n-          loader->vadvance = FT_PIX_ROUND( unrounded[3].x -\n-                                           unrounded[2].x ) \/ 64;\n@@ -1962,2 +1903,1 @@\n-        outline.n_points   = (short)( gloader->current.num_subglyphs + 4 );\n-        outline.n_contours = outline.n_points;\n+        outline.n_contours = outline.n_points = limit;\n@@ -1969,4 +1909,4 @@\n-        if ( FT_NEW_ARRAY( points, outline.n_points )    ||\n-             FT_NEW_ARRAY( tags, outline.n_points )      ||\n-             FT_NEW_ARRAY( contours, outline.n_points )  ||\n-             FT_NEW_ARRAY( unrounded, outline.n_points ) )\n+        if ( FT_NEW_ARRAY( points, limit + 4 )    ||\n+             FT_NEW_ARRAY( tags, limit + 4 )      ||\n+             FT_NEW_ARRAY( contours, limit + 4 )  ||\n+             FT_NEW_ARRAY( unrounded, limit + 4 ) )\n@@ -1988,22 +1928,4 @@\n-        points[i].x = loader->pp1.x;\n-        points[i].y = loader->pp1.y;\n-        tags[i]     = 1;\n-        contours[i] = i;\n-\n-        i++;\n-        points[i].x = loader->pp2.x;\n-        points[i].y = loader->pp2.y;\n-        tags[i]     = 1;\n-        contours[i] = i;\n-\n-        i++;\n-        points[i].x = loader->pp3.x;\n-        points[i].y = loader->pp3.y;\n-        tags[i]     = 1;\n-        contours[i] = i;\n-\n-        i++;\n-        points[i].x = loader->pp4.x;\n-        points[i].y = loader->pp4.y;\n-        tags[i]     = 1;\n-        contours[i] = i;\n+        points[i++] = loader->pp1;\n+        points[i++] = loader->pp2;\n+        points[i++] = loader->pp3;\n+        points[i  ] = loader->pp4;\n@@ -2017,6 +1939,3 @@\n-        if ( FT_SET_ERROR( TT_Vary_Apply_Glyph_Deltas(\n-                             face,\n-                             glyph_index,\n-                             &outline,\n-                             unrounded,\n-                             (FT_UInt)outline.n_points ) ) )\n+        if ( FT_SET_ERROR( TT_Vary_Apply_Glyph_Deltas( loader,\n+                                                       &outline,\n+                                                       unrounded ) ) )\n@@ -2036,21 +1955,0 @@\n-        loader->pp1.x = points[i + 0].x;\n-        loader->pp1.y = points[i + 0].y;\n-        loader->pp2.x = points[i + 1].x;\n-        loader->pp2.y = points[i + 1].y;\n-\n-        loader->pp3.x = points[i + 2].x;\n-        loader->pp3.y = points[i + 2].y;\n-        loader->pp4.x = points[i + 3].x;\n-        loader->pp4.y = points[i + 3].y;\n-\n-        \/* recalculate linear horizontal and vertical advances *\/\n-        \/* if we don't have HVAR and VVAR, respectively        *\/\n-        if ( !( face->variation_support & TT_FACE_FLAG_VAR_HADVANCE ) )\n-          loader->linear =\n-            FT_PIX_ROUND( unrounded[outline.n_points - 3].x -\n-                          unrounded[outline.n_points - 4].x ) \/ 64;\n-        if ( !( face->variation_support & TT_FACE_FLAG_VAR_VADVANCE ) )\n-          loader->vadvance =\n-            FT_PIX_ROUND( unrounded[outline.n_points - 1].x -\n-                          unrounded[outline.n_points - 2].x ) \/ 64;\n-\n@@ -2232,2 +2130,3 @@\n-    TT_Face    face   = loader->face;\n-\n+    TT_Face       face  = loader->face;\n+    TT_Size       size  = loader->size;\n+    TT_GlyphSlot  glyph = loader->glyph;\n@@ -2236,2 +2135,0 @@\n-    TT_GlyphSlot  glyph = loader->glyph;\n-    TT_Size       size  = loader->size;\n@@ -2375,3 +2272,3 @@\n-    TT_Face             face;\n-    SFNT_Service        sfnt;\n-    FT_Stream           stream;\n+    TT_Face             face   = (TT_Face)glyph->face;\n+    SFNT_Service        sfnt   = (SFNT_Service)face->sfnt;\n+    FT_Stream           stream = face->root.stream;\n@@ -2382,4 +2279,0 @@\n-    face   = (TT_Face)glyph->face;\n-    sfnt   = (SFNT_Service)face->sfnt;\n-    stream = face->root.stream;\n-\n@@ -2436,2 +2329,2 @@\n-    TT_Face    face;\n-    FT_Stream  stream;\n+    TT_Face    face   = (TT_Face)glyph->face;\n+    FT_Stream  stream = face->root.stream;\n@@ -2444,1 +2337,1 @@\n-    TT_Driver  driver = (TT_Driver)FT_FACE_DRIVER( (TT_Face)glyph->face );\n+    TT_Driver  driver   = (TT_Driver)FT_FACE_DRIVER( glyph->face );\n@@ -2449,3 +2342,0 @@\n-    face   = (TT_Face)glyph->face;\n-    stream = face->root.stream;\n-\n@@ -2819,0 +2709,1 @@\n+    TT_Face       face = (TT_Face)glyph->face;\n@@ -2843,2 +2734,0 @@\n-          TT_Face  face = (TT_Face)glyph->face;\n-\n@@ -2903,3 +2792,0 @@\n-          TT_Face  face = (TT_Face)glyph->face;\n-\n-\n@@ -2974,1 +2860,1 @@\n-    if ( ( load_flags & FT_LOAD_COLOR ) && ( (TT_Face)glyph->face )->svg )\n+    if ( ( load_flags & FT_LOAD_COLOR ) && face->svg )\n@@ -2976,6 +2862,1 @@\n-      SFNT_Service  sfnt;\n-\n-      FT_Short   leftBearing;\n-      FT_Short   topBearing;\n-      FT_UShort  advanceX;\n-      FT_UShort  advanceY;\n+      SFNT_Service  sfnt = (SFNT_Service)face->sfnt;\n@@ -2985,1 +2866,0 @@\n-      sfnt = (SFNT_Service)( (TT_Face)glyph->face )->sfnt;\n@@ -2990,1 +2870,7 @@\n-        TT_Face  face = (TT_Face)glyph->face;\n+        FT_Fixed  x_scale = size->root.metrics.x_scale;\n+        FT_Fixed  y_scale = size->root.metrics.y_scale;\n+\n+        FT_Short   leftBearing;\n+        FT_Short   topBearing;\n+        FT_UShort  advanceX;\n+        FT_UShort  advanceY;\n@@ -3008,6 +2894,2 @@\n-        advanceX = (FT_UShort)FT_MulDiv( advanceX,\n-                                         glyph->face->size->metrics.x_ppem,\n-                                         glyph->face->units_per_EM );\n-        advanceY = (FT_UShort)FT_MulDiv( advanceY,\n-                                         glyph->face->size->metrics.y_ppem,\n-                                         glyph->face->units_per_EM );\n+        glyph->linearHoriAdvance = advanceX;\n+        glyph->linearVertAdvance = advanceY;\n@@ -3015,2 +2897,2 @@\n-        glyph->metrics.horiAdvance = advanceX << 6;\n-        glyph->metrics.vertAdvance = advanceY << 6;\n+        glyph->metrics.horiAdvance = FT_MulFix( advanceX, x_scale );\n+        glyph->metrics.vertAdvance = FT_MulFix( advanceY, y_scale );\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/truetype\/ttgload.c","additions":58,"deletions":176,"binary":false,"changes":234,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/truetype\/ttgload.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2004-2022 by\n+ * Copyright (C) 2004-2023 by\n@@ -45,0 +45,1 @@\n+#include <freetype\/internal\/ftcalc.h>\n@@ -356,2 +357,5 @@\n-    FT_Stream       stream = FT_FACE_STREAM( face );\n-    FT_Memory       memory = stream->memory;\n+    FT_Error   error;\n+    FT_Stream  stream = FT_FACE_STREAM( face );\n+    FT_Memory  memory = stream->memory;\n+    FT_Int     i, j;\n+\n@@ -360,5 +364,11 @@\n-    FT_Error        error;\n-    FT_Long         version;\n-    FT_Long         axisCount;\n-    FT_Int          i, j;\n-    FT_ULong        table_len;\n+    GX_AVarTable    table;\n+\n+    FT_Long   version;\n+    FT_Long   axisCount;\n+    FT_ULong  table_len;\n+\n+#ifndef TT_CONFIG_OPTION_NO_BORING_EXPANSION\n+    FT_ULong  table_offset;\n+    FT_ULong  store_offset;\n+    FT_ULong  axisMap_offset;\n+#endif\n@@ -377,0 +387,4 @@\n+#ifndef TT_CONFIG_OPTION_NO_BORING_EXPANSION\n+    table_offset = FT_STREAM_POS();\n+#endif\n+\n@@ -383,1 +397,5 @@\n-    if ( version != 0x00010000L )\n+    if ( version != 0x00010000L\n+#ifndef TT_CONFIG_OPTION_NO_BORING_EXPANSION\n+         && version != 0x00020000L\n+#endif\n+       )\n@@ -399,1 +417,1 @@\n-    if ( FT_QNEW_ARRAY( blend->avar_segment, axisCount ) )\n+    if ( FT_NEW( blend->avar_table ) )\n@@ -401,0 +419,1 @@\n+    table = blend->avar_table;\n@@ -402,1 +421,4 @@\n-    segment = &blend->avar_segment[0];\n+    if ( FT_QNEW_ARRAY( table->avar_segment, axisCount ) )\n+      goto Exit;\n+\n+    segment = &table->avar_segment[0];\n@@ -415,1 +437,1 @@\n-          FT_FREE( blend->avar_segment[j].correspondence );\n+          FT_FREE( table->avar_segment[j].correspondence );\n@@ -417,1 +439,1 @@\n-        FT_FREE( blend->avar_segment );\n+        FT_FREE( table->avar_segment );\n@@ -429,2 +451,2 @@\n-                    segment->correspondence[j].fromCoord \/ 65536.0,\n-                    segment->correspondence[j].toCoord \/ 65536.0 ));\n+                    (double)segment->correspondence[j].fromCoord \/ 65536,\n+                    (double)segment->correspondence[j].toCoord \/ 65536 ));\n@@ -436,0 +458,31 @@\n+#ifndef TT_CONFIG_OPTION_NO_BORING_EXPANSION\n+    if ( version < 0x00020000L )\n+      goto Exit;\n+\n+    axisMap_offset = FT_GET_ULONG();\n+    store_offset   = FT_GET_ULONG();\n+\n+    if ( store_offset )\n+    {\n+      error = tt_var_load_item_variation_store(\n+                face,\n+                table_offset + store_offset,\n+                &table->itemStore );\n+      if ( error )\n+        goto Exit;\n+    }\n+\n+    if ( axisMap_offset )\n+    {\n+      error = tt_var_load_delta_set_index_mapping(\n+                face,\n+                table_offset + axisMap_offset,\n+                &table->axisMap,\n+                &table->itemStore,\n+                table_len );\n+      if ( error )\n+        goto Exit;\n+    }\n+#endif\n+\n+\n@@ -441,2 +494,2 @@\n-  static FT_Error\n-  ft_var_load_item_variation_store( TT_Face          face,\n+  FT_LOCAL_DEF( FT_Error )\n+  tt_var_load_item_variation_store( TT_Face          face,\n@@ -452,3 +505,0 @@\n-    FT_UInt    i, j, k;\n-    FT_UInt    wordDeltaCount;\n-    FT_Bool    long_words;\n@@ -456,2 +506,6 @@\n-    GX_Blend        blend = face->blend;\n-    GX_ItemVarData  varData;\n+    FT_UInt    data_count;\n+    FT_UShort  axis_count;\n+    FT_UInt    region_count;\n+\n+    FT_UInt  i, j, k;\n+    FT_Bool  long_words;\n@@ -459,0 +513,1 @@\n+    GX_Blend   blend           = face->blend;\n@@ -468,1 +523,1 @@\n-      FT_TRACE2(( \"ft_var_load_item_variation_store: bad store format %d\\n\",\n+      FT_TRACE2(( \"tt_var_load_item_variation_store: bad store format %d\\n\",\n@@ -475,2 +530,2 @@\n-    if ( FT_READ_ULONG( region_offset )         ||\n-         FT_READ_USHORT( itemStore->dataCount ) )\n+    if ( FT_READ_ULONG( region_offset ) ||\n+         FT_READ_USHORT( data_count )   )\n@@ -480,1 +535,1 @@\n-    if ( !itemStore->dataCount )\n+    if ( !data_count )\n@@ -482,1 +537,1 @@\n-      FT_TRACE2(( \"ft_var_load_item_variation_store: missing varData\\n\" ));\n+      FT_TRACE2(( \"tt_var_load_item_variation_store: missing varData\\n\" ));\n@@ -489,1 +544,1 @@\n-    if ( FT_QNEW_ARRAY( dataOffsetArray, itemStore->dataCount ) )\n+    if ( FT_QNEW_ARRAY( dataOffsetArray, data_count ) )\n@@ -492,1 +547,1 @@\n-    for ( i = 0; i < itemStore->dataCount; i++ )\n+    for ( i = 0; i < data_count; i++ )\n@@ -502,2 +557,2 @@\n-    if ( FT_READ_USHORT( itemStore->axisCount )   ||\n-         FT_READ_USHORT( itemStore->regionCount ) )\n+    if ( FT_READ_USHORT( axis_count )   ||\n+         FT_READ_USHORT( region_count ) )\n@@ -506,1 +561,1 @@\n-    if ( itemStore->axisCount != (FT_Long)blend->mmvar->num_axis )\n+    if ( axis_count != (FT_Long)blend->mmvar->num_axis )\n@@ -508,1 +563,1 @@\n-      FT_TRACE2(( \"ft_var_load_item_variation_store:\"\n+      FT_TRACE2(( \"tt_var_load_item_variation_store:\"\n@@ -515,0 +570,1 @@\n+    itemStore->axisCount = axis_count;\n@@ -517,1 +573,1 @@\n-    if ( itemStore->regionCount >= 32768U )\n+    if ( region_count >= 32768U )\n@@ -519,1 +575,1 @@\n-      FT_TRACE2(( \"ft_var_load_item_variation_store:\"\n+      FT_TRACE2(( \"tt_var_load_item_variation_store:\"\n@@ -525,1 +581,1 @@\n-    if ( FT_NEW_ARRAY( itemStore->varRegionList, itemStore->regionCount ) )\n+    if ( FT_NEW_ARRAY( itemStore->varRegionList, region_count ) )\n@@ -527,0 +583,1 @@\n+    itemStore->regionCount = region_count;\n@@ -533,2 +590,1 @@\n-      if ( FT_NEW_ARRAY( itemStore->varRegionList[i].axisList,\n-                         itemStore->axisCount ) )\n+      if ( FT_NEW_ARRAY( itemStore->varRegionList[i].axisList, axis_count ) )\n@@ -558,1 +614,1 @@\n-    if ( FT_NEW_ARRAY( itemStore->varData, itemStore->dataCount ) )\n+    if ( FT_NEW_ARRAY( itemStore->varData, data_count ) )\n@@ -560,0 +616,1 @@\n+    itemStore->dataCount = data_count;\n@@ -561,1 +618,1 @@\n-    for ( i = 0; i < itemStore->dataCount; i++ )\n+    for ( i = 0; i < data_count; i++ )\n@@ -563,1 +620,6 @@\n-      varData = &itemStore->varData[i];\n+      GX_ItemVarData  varData = &itemStore->varData[i];\n+\n+      FT_UInt  item_count;\n+      FT_UInt  word_delta_count;\n+      FT_UInt  region_idx_count;\n+\n@@ -568,3 +630,3 @@\n-      if ( FT_READ_USHORT( varData->itemCount )      ||\n-           FT_READ_USHORT( wordDeltaCount )          ||\n-           FT_READ_USHORT( varData->regionIdxCount ) )\n+      if ( FT_READ_USHORT( item_count )       ||\n+           FT_READ_USHORT( word_delta_count ) ||\n+           FT_READ_USHORT( region_idx_count ) )\n@@ -573,2 +635,2 @@\n-      long_words      = !!( wordDeltaCount & 0x8000 );\n-      wordDeltaCount &= 0x7FFF;\n+      long_words        = !!( word_delta_count & 0x8000 );\n+      word_delta_count &= 0x7FFF;\n@@ -577,1 +639,1 @@\n-      if ( wordDeltaCount > varData->regionIdxCount )\n+      if ( word_delta_count > region_idx_count )\n@@ -580,2 +642,2 @@\n-                    wordDeltaCount,\n-                    varData->regionIdxCount ));\n+                    word_delta_count,\n+                    region_idx_count ));\n@@ -586,1 +648,1 @@\n-      if ( varData->regionIdxCount > itemStore->regionCount )\n+      if ( region_idx_count > itemStore->regionCount )\n@@ -589,1 +651,1 @@\n-                    varData->regionIdxCount,\n+                    region_idx_count,\n@@ -596,2 +658,1 @@\n-      if ( FT_NEW_ARRAY( varData->regionIndices,\n-                         varData->regionIdxCount ) )\n+      if ( FT_NEW_ARRAY( varData->regionIndices, region_idx_count ) )\n@@ -599,0 +660,1 @@\n+      varData->regionIdxCount = region_idx_count;\n@@ -614,8 +676,7 @@\n-      \/* Parse delta set.                                                *\/\n-      \/*                                                                 *\/\n-      \/* On input, deltas are (wordDeltaCount + regionIdxCount) bytes    *\/\n-      \/* each if `long_words` isn't set, and twice as much otherwise.    *\/\n-      \/*                                                                 *\/\n-      \/* On output, deltas are expanded to `regionIdxCount` shorts each. *\/\n-      if ( FT_NEW_ARRAY( varData->deltaSet,\n-                         varData->regionIdxCount * varData->itemCount ) )\n+      \/* Parse delta set.                                                  *\/\n+      \/*                                                                   *\/\n+      \/* On input, deltas are (word_delta_count + region_idx_count) bytes  *\/\n+      \/* each if `long_words` isn't set, and twice as much otherwise.      *\/\n+      \/*                                                                   *\/\n+      \/* On output, deltas are expanded to `region_idx_count` shorts each. *\/\n+      if ( FT_NEW_ARRAY( varData->deltaSet, item_count * region_idx_count ) )\n@@ -623,0 +684,1 @@\n+      varData->itemCount = item_count;\n@@ -624,2 +686,1 @@\n-      \/* the delta set is stored as a 2-dimensional array of shorts *\/\n-      if ( long_words )\n+      for ( j = 0; j < item_count * region_idx_count; )\n@@ -627,11 +688,1 @@\n-        \/* new in OpenType 1.9, currently for 'COLR' table only;          *\/\n-        \/* the deltas are interpreted as 16.16 fixed-point scaling values *\/\n-\n-        \/* not supported yet *\/\n-\n-        error = FT_THROW( Invalid_Table );\n-        goto Exit;\n-      }\n-      else\n-      {\n-        for ( j = 0; j < varData->itemCount * varData->regionIdxCount; )\n+        if ( long_words )\n@@ -639,7 +690,2 @@\n-          for ( k = 0; k < wordDeltaCount; k++, j++ )\n-          {\n-            \/* read the short deltas *\/\n-            FT_Short  delta;\n-\n-\n-            if ( FT_READ_SHORT( delta ) )\n+          for ( k = 0; k < word_delta_count; k++, j++ )\n+            if ( FT_READ_LONG( varData->deltaSet[j] ) )\n@@ -647,11 +693,11 @@\n-\n-            varData->deltaSet[j] = delta;\n-          }\n-\n-          for ( ; k < varData->regionIdxCount; k++, j++ )\n-          {\n-            \/* read the (signed) byte deltas *\/\n-            FT_Char  delta;\n-\n-\n-            if ( FT_READ_CHAR( delta ) )\n+          for ( ; k < region_idx_count; k++, j++ )\n+            if ( FT_READ_SHORT( varData->deltaSet[j] ) )\n+              goto Exit;\n+        }\n+        else\n+        {\n+          for ( k = 0; k < word_delta_count; k++, j++ )\n+            if ( FT_READ_SHORT( varData->deltaSet[j] ) )\n+              goto Exit;\n+          for ( ; k < region_idx_count; k++, j++ )\n+            if ( FT_READ_CHAR( varData->deltaSet[j] ) )\n@@ -659,3 +705,0 @@\n-\n-            varData->deltaSet[j] = delta;\n-          }\n@@ -673,2 +716,2 @@\n-  static FT_Error\n-  ft_var_load_delta_set_index_mapping( TT_Face            face,\n+  FT_LOCAL_DEF( FT_Error )\n+  tt_var_load_delta_set_index_mapping( TT_Face            face,\n@@ -731,1 +774,1 @@\n-      FT_TRACE1(( \"ft_var_load_delta_set_index_mapping:\"\n+      FT_TRACE1(( \"tt_var_load_delta_set_index_mapping:\"\n@@ -761,0 +804,10 @@\n+      \/* new in OpenType 1.8.4 *\/\n+      if ( mapData == 0xFFFFFFFFUL )\n+      {\n+        \/* no variation data for this item *\/\n+        map->outerIndex[i] = 0xFFFFU;\n+        map->innerIndex[i] = 0xFFFFU;\n+\n+        continue;\n+      }\n+\n@@ -890,1 +943,1 @@\n-    error = ft_var_load_item_variation_store(\n+    error = tt_var_load_item_variation_store(\n@@ -899,1 +952,1 @@\n-      error = ft_var_load_delta_set_index_mapping(\n+      error = tt_var_load_delta_set_index_mapping(\n@@ -941,2 +994,2 @@\n-  static FT_Int\n-  ft_var_get_item_delta( TT_Face          face,\n+  FT_LOCAL_DEF( FT_ItemVarDelta )\n+  tt_var_get_item_delta( TT_Face          face,\n@@ -947,2 +1000,6 @@\n-    GX_ItemVarData  varData;\n-    FT_Short*       deltaSet;\n+    FT_Stream  stream = FT_FACE_STREAM( face );\n+    FT_Memory  memory = stream->memory;\n+    FT_Error   error  = FT_Err_Ok;\n+\n+    GX_ItemVarData    varData;\n+    FT_ItemVarDelta*  deltaSet;\n@@ -950,4 +1007,3 @@\n-    FT_UInt   master, j;\n-    FT_Fixed  netAdjustment = 0;     \/* accumulated adjustment *\/\n-    FT_Fixed  scaledDelta;\n-    FT_Fixed  delta;\n+    FT_UInt          master, j;\n+    FT_Fixed*        scalars = NULL;\n+    FT_ItemVarDelta  returnValue;\n@@ -956,0 +1012,8 @@\n+    if ( !face->blend || !face->blend->normalizedcoords )\n+      return 0;\n+\n+    \/* OpenType 1.8.4+: No variation data for this item *\/\n+    \/* as indices have special value 0xFFFF.            *\/\n+    if ( outerIndex == 0xFFFF && innerIndex == 0xFFFF )\n+      return 0;\n+\n@@ -959,0 +1023,3 @@\n+    if ( outerIndex >= itemStore->dataCount )\n+      return 0; \/* Out of range. *\/\n+\n@@ -960,1 +1027,8 @@\n-    deltaSet = &varData->deltaSet[varData->regionIdxCount * innerIndex];\n+    deltaSet = FT_OFFSET( varData->deltaSet,\n+                          varData->regionIdxCount * innerIndex );\n+\n+    if ( innerIndex >= varData->itemCount )\n+      return 0; \/* Out of range. *\/\n+\n+    if ( FT_QNEW_ARRAY( scalars, varData->regionIdxCount ) )\n+      return 0;\n@@ -1011,1 +1085,0 @@\n-      } \/* per-axis loop *\/\n@@ -1013,3 +1086,1 @@\n-      \/* get the scaled delta for this region *\/\n-      delta       = FT_intToFixed( deltaSet[master] );\n-      scaledDelta = FT_MulFix( scalar, delta );\n+      } \/* per-axis loop *\/\n@@ -1017,2 +1088,1 @@\n-      \/* accumulate the adjustments from each region *\/\n-      netAdjustment = netAdjustment + scaledDelta;\n+      scalars[master] = scalar;\n@@ -1022,1 +1092,20 @@\n-    return FT_fixedToInt( netAdjustment );\n+\n+    \/* Compute the scaled delta for this region.\n+     *\n+     * From: https:\/\/docs.microsoft.com\/en-us\/typography\/opentype\/spec\/otvarcommonformats#item-variation-store-header-and-item-variation-data-subtables:\n+     *\n+     *   `Fixed` is a 32-bit (16.16) type and, in the general case, requires\n+     *   32-bit deltas.  As described above, the `DeltaSet` record can\n+     *   accommodate deltas that are, logically, either 16-bit or 32-bit.\n+     *   When scaled deltas are applied to `Fixed` values, the `Fixed` value\n+     *   is treated like a 32-bit integer.\n+     *\n+     * `FT_MulAddFix` internally uses 64-bit precision; it thus can handle\n+     * deltas ranging from small 8-bit to large 32-bit values that are\n+     * applied to 16.16 `FT_Fixed` \/ OpenType `Fixed` values.\n+     *\/\n+    returnValue = FT_MulAddFix( scalars, deltaSet, varData->regionIdxCount );\n+\n+    FT_FREE( scalars );\n+\n+    return returnValue;\n@@ -1115,3 +1204,0 @@\n-      GX_ItemVarData  varData;\n-\n-\n@@ -1121,8 +1207,0 @@\n-\n-      varData = &table->itemStore.varData[outerIndex];\n-      if ( gindex >= varData->itemCount )\n-      {\n-        FT_TRACE2(( \"gindex %d out of range\\n\", gindex ));\n-        error = FT_THROW( Invalid_Argument );\n-        goto Exit;\n-      }\n@@ -1131,1 +1209,1 @@\n-    delta = ft_var_get_item_delta( face,\n+    delta = tt_var_get_item_delta( face,\n@@ -1136,8 +1214,11 @@\n-    FT_TRACE5(( \"%s value %d adjusted by %d unit%s (%s)\\n\",\n-                vertical ? \"vertical height\" : \"horizontal width\",\n-                *avalue,\n-                delta,\n-                delta == 1 ? \"\" : \"s\",\n-                vertical ? \"VVAR\" : \"HVAR\" ));\n-\n-    *avalue += delta;\n+    if ( delta )\n+    {\n+      FT_TRACE5(( \"%s value %d adjusted by %d unit%s (%s)\\n\",\n+                  vertical ? \"vertical height\" : \"horizontal width\",\n+                  *avalue,\n+                  delta,\n+                  delta == 1 ? \"\" : \"s\",\n+                  vertical ? \"VVAR\" : \"HVAR\" ));\n+\n+      *avalue = ADD_INT( *avalue, delta );\n+    }\n@@ -1310,1 +1391,1 @@\n-    error = ft_var_load_item_variation_store(\n+    error = tt_var_load_item_variation_store(\n@@ -1326,1 +1407,1 @@\n-    limit     = value + blend->mvar_table->valueCount;\n+    limit     = FT_OFFSET( value, blend->mvar_table->valueCount );\n@@ -1335,0 +1416,7 @@\n+      \/* new in OpenType 1.8.4 *\/\n+      if ( value->outerIndex == 0xFFFFU && value->innerIndex == 0xFFFFU )\n+      {\n+        \/* no variation data for this item *\/\n+        continue;\n+      }\n+\n@@ -1352,1 +1440,1 @@\n-    limit = value + blend->mvar_table->valueCount;\n+    limit = FT_OFFSET( value, blend->mvar_table->valueCount );\n@@ -1417,1 +1505,1 @@\n-    limit = value + blend->mvar_table->valueCount;\n+    limit = FT_OFFSET( value, blend->mvar_table->valueCount );\n@@ -1425,1 +1513,1 @@\n-      delta = ft_var_get_item_delta( face,\n+      delta = tt_var_get_item_delta( face,\n@@ -1430,1 +1518,1 @@\n-      if ( p )\n+      if ( p && delta )\n@@ -1728,1 +1816,1 @@\n-            blend->tuplecoords[i * gvar_head.axisCount + j] \/ 65536.0 ));\n+            (double)blend->tuplecoords[i * gvar_head.axisCount + j] \/ 65536 ));\n@@ -1799,1 +1887,1 @@\n-                  i, blend->normalizedcoords[i] \/ 65536.0 ));\n+                  i, (double)blend->normalizedcoords[i] \/ 65536 ));\n@@ -1822,1 +1910,1 @@\n-                    tuple_coords[i] \/ 65536.0 ));\n+                    (double)tuple_coords[i] \/ 65536 ));\n@@ -1835,1 +1923,1 @@\n-                      tuple_coords[i] \/ 65536.0 ));\n+                      (double)tuple_coords[i] \/ 65536 ));\n@@ -1841,1 +1929,1 @@\n-                    tuple_coords[i] \/ 65536.0 ));\n+                    (double)tuple_coords[i] \/ 65536 ));\n@@ -1855,2 +1943,2 @@\n-                      im_start_coords[i] \/ 65536.0,\n-                      im_end_coords[i] \/ 65536.0 ));\n+                      (double)im_start_coords[i] \/ 65536,\n+                      (double)im_end_coords[i] \/ 65536 ));\n@@ -1862,2 +1950,2 @@\n-                    im_start_coords[i] \/ 65536.0,\n-                    im_end_coords[i] \/ 65536.0 ));\n+                    (double)im_start_coords[i] \/ 65536,\n+                    (double)im_end_coords[i] \/ 65536 ));\n@@ -1875,1 +1963,1 @@\n-    FT_TRACE6(( \"    apply factor is %.5f\\n\", apply \/ 65536.0 ));\n+    FT_TRACE6(( \"    apply factor is %.5f\\n\", (double)apply \/ 65536 ));\n@@ -1889,0 +1977,4 @@\n+    FT_Error   error  = FT_Err_Ok;\n+    FT_Memory  memory = face->root.memory;\n+    FT_UInt    i, j;\n+\n@@ -1891,1 +1983,0 @@\n-    FT_UInt         i, j;\n@@ -1895,0 +1986,3 @@\n+    FT_Fixed*  new_normalized = NULL;\n+    FT_Fixed*  old_normalized;\n+\n@@ -1917,1 +2011,1 @@\n-      FT_TRACE5(( \"    %d: %.5f\\n\", i, coord \/ 65536.0 ));\n+      FT_TRACE5(( \"    %d: %.5f\\n\", i, (double)coord \/ 65536 ));\n@@ -1921,1 +2015,1 @@\n-                    coord \/ 65536.0 ));\n+                    (double)coord \/ 65536 ));\n@@ -1924,2 +2018,2 @@\n-                    a->minimum \/ 65536.0,\n-                    a->maximum \/ 65536.0 ));\n+                    (double)a->minimum \/ 65536,\n+                    (double)a->maximum \/ 65536 ));\n@@ -1945,1 +2039,1 @@\n-    if ( blend->avar_segment )\n+    if ( blend->avar_table )\n@@ -1947,0 +2041,3 @@\n+      GX_AVarTable  table = blend->avar_table;\n+\n+\n@@ -1950,2 +2047,1 @@\n-      av = blend->avar_segment;\n-      for ( i = 0; i < mmvar->num_axis; i++, av++ )\n+      if ( table->avar_segment )\n@@ -1953,1 +2049,3 @@\n-        for ( j = 1; j < (FT_UInt)av->pairCount; j++ )\n+        av = table->avar_segment;\n+\n+        for ( i = 0; i < mmvar->num_axis; i++, av++ )\n@@ -1955,1 +2053,1 @@\n-          if ( normalized[i] < av->correspondence[j].fromCoord )\n+          for ( j = 1; j < (FT_UInt)av->pairCount; j++ )\n@@ -1957,1 +2055,16 @@\n-            FT_TRACE5(( \"  %.5f\\n\", normalized[i] \/ 65536.0 ));\n+            if ( normalized[i] < av->correspondence[j].fromCoord )\n+            {\n+              FT_TRACE5(( \"  %.5f\\n\", (double)normalized[i] \/ 65536 ));\n+\n+              normalized[i] =\n+                FT_MulDiv( normalized[i] - av->correspondence[j - 1].fromCoord,\n+                           av->correspondence[j].toCoord -\n+                             av->correspondence[j - 1].toCoord,\n+                           av->correspondence[j].fromCoord -\n+                             av->correspondence[j - 1].fromCoord ) +\n+                av->correspondence[j - 1].toCoord;\n+              break;\n+            }\n+          }\n+        }\n+      }\n@@ -1959,8 +2072,28 @@\n-            normalized[i] =\n-              FT_MulDiv( normalized[i] - av->correspondence[j - 1].fromCoord,\n-                         av->correspondence[j].toCoord -\n-                           av->correspondence[j - 1].toCoord,\n-                         av->correspondence[j].fromCoord -\n-                           av->correspondence[j - 1].fromCoord ) +\n-              av->correspondence[j - 1].toCoord;\n-            break;\n+      if ( table->itemStore.varData )\n+      {\n+        if ( FT_QNEW_ARRAY( new_normalized, mmvar->num_axis ) )\n+          return;\n+\n+        \/* Install our half-normalized coordinates for the next *\/\n+        \/* Item Variation Store to work with.                   *\/\n+        old_normalized                = face->blend->normalizedcoords;\n+        face->blend->normalizedcoords = normalized;\n+\n+        for ( i = 0; i < mmvar->num_axis; i++ )\n+        {\n+          FT_Fixed  v          = normalized[i];\n+          FT_UInt   innerIndex = i;\n+          FT_UInt   outerIndex = 0;\n+          FT_Int    delta;\n+\n+\n+          if ( table->axisMap.innerIndex )\n+          {\n+            FT_UInt  idx = i;\n+\n+\n+            if ( idx >= table->axisMap.mapCount )\n+              idx = table->axisMap.mapCount - 1;\n+\n+            outerIndex = table->axisMap.outerIndex[idx];\n+            innerIndex = table->axisMap.innerIndex[idx];\n@@ -1968,0 +2101,18 @@\n+\n+          delta = tt_var_get_item_delta( face,\n+                                         &table->itemStore,\n+                                         outerIndex,\n+                                         innerIndex );\n+\n+      v += delta << 2;\n+\n+      \/* Clamp value range. *\/\n+      v = v >=  0x10000L ?  0x10000 : v;\n+      v = v <= -0x10000L ? -0x10000 : v;\n+\n+          new_normalized[i] = v;\n+        }\n+\n+        for ( i = 0; i < mmvar->num_axis; i++ )\n+        {\n+          normalized[i] = new_normalized[i];\n@@ -1969,0 +2120,4 @@\n+\n+        face->blend->normalizedcoords = old_normalized;\n+\n+        FT_FREE( new_normalized );\n@@ -2006,1 +2161,1 @@\n-    if ( blend->avar_segment )\n+    if ( blend->avar_table && blend->avar_table->avar_segment )\n@@ -2008,1 +2163,1 @@\n-      GX_AVarSegment  av = blend->avar_segment;\n+      GX_AVarSegment  av = blend->avar_table->avar_segment;\n@@ -2028,1 +2183,1 @@\n-            FT_TRACE5(( \"  %.5f\\n\", design[i] \/ 65536.0 ));\n+            FT_TRACE5(( \"  %.5f\\n\", (double)design[i] \/ 65536 ));\n@@ -2173,0 +2328,5 @@\n+    \/* `num_instances` holds the number of all named instances including  *\/\n+    \/* the default instance, which might be missing in the table of named *\/\n+    \/* instances (in 'fvar').  This value is validated in `sfobjs.c` and  *\/\n+    \/* may be reset to 0 if consistency checks fail.                      *\/\n+    num_instances = (FT_UInt)face->root.style_flags >> 16;\n@@ -2183,14 +2343,0 @@\n-      \/* both `fvar' and `gvar' must be present *\/\n-      if ( FT_SET_ERROR( face->goto_table( face, TTAG_gvar,\n-                                           stream, &table_len ) ) )\n-      {\n-        \/* CFF2 is an alternate to gvar here *\/\n-        if ( FT_SET_ERROR( face->goto_table( face, TTAG_CFF2,\n-                                             stream, &table_len ) ) )\n-        {\n-          FT_TRACE1(( \"\\n\" ));\n-          FT_TRACE1(( \"TT_Get_MM_Var: `gvar' or `CFF2' table is missing\\n\" ));\n-          goto Exit;\n-        }\n-      }\n-\n@@ -2211,0 +2357,11 @@\n+      \/* If `num_instances` is larger, synthetization of the default  *\/\n+      \/* instance is required.  If `num_instances` is smaller,        *\/\n+      \/* however, the value has been reset to 0 in `sfnt_init_face`   *\/\n+      \/* (in `sfobjs.c`); in this case we have underallocated `mmvar` *\/\n+      \/* structs.                                                     *\/\n+      if ( num_instances < fvar_head.instanceCount )\n+      {\n+        error = FT_THROW( Invalid_Table );\n+        goto Exit;\n+      }\n+\n@@ -2229,5 +2386,0 @@\n-    \/* `num_instances' holds the number of all named instances, *\/\n-    \/* including the default instance which might be missing    *\/\n-    \/* in fvar's table of named instances                       *\/\n-    num_instances = (FT_UInt)face->root.style_flags >> 16;\n-\n@@ -2361,3 +2513,3 @@\n-                    a->minimum \/ 65536.0,\n-                    a->def \/ 65536.0,\n-                    a->maximum \/ 65536.0,\n+                    (double)a->minimum \/ 65536,\n+                    (double)a->def \/ 65536,\n+                    (double)a->maximum \/ 65536,\n@@ -2564,0 +2716,2 @@\n+        else if ( a->tag == TTAG_ital )\n+          a->name = (char*)\"Italic\";\n@@ -2625,1 +2779,1 @@\n-      FT_TRACE5(( \"    %.5f\\n\", coords[i] \/ 65536.0 ));\n+      FT_TRACE5(( \"    %.5f\\n\", (double)coords[i] \/ 65536 ));\n@@ -2629,1 +2783,1 @@\n-                    coords[i] \/ 65536.0 ));\n+                    (double)coords[i] \/ 65536 ));\n@@ -2639,1 +2793,7 @@\n-      if ( FT_SET_ERROR( ft_var_load_gvar( face ) ) )\n+    {\n+      \/* While a missing 'gvar' table is acceptable, for example for *\/\n+      \/* fonts that only vary metrics information or 'COLR' v1       *\/\n+      \/* `PaintVar*` tables, an incorrect SFNT table offset or size  *\/\n+      \/* for 'gvar', or an inconsistent 'gvar' table is not.         *\/\n+      error = ft_var_load_gvar( face );\n+      if ( error != FT_Err_Table_Missing && error != FT_Err_Ok )\n@@ -2641,0 +2801,2 @@\n+      error = FT_Err_Ok;\n+    }\n@@ -3506,4 +3668,4 @@\n-                        ( FT_fdot6ToFixed( face->cvt[j] ) +\n-                          old_cvt_delta ) \/ 65536.0,\n-                        ( FT_fdot6ToFixed( face->cvt[j] ) +\n-                          cvt_deltas[j] ) \/ 65536.0 ));\n+                        (double)( FT_fdot6ToFixed( face->cvt[j] ) +\n+                                    old_cvt_delta ) \/ 65536,\n+                        (double)( FT_fdot6ToFixed( face->cvt[j] ) +\n+                                    cvt_deltas[j] ) \/ 65536 ));\n@@ -3548,4 +3710,4 @@\n-                        ( FT_fdot6ToFixed( face->cvt[pindex] ) +\n-                          old_cvt_delta ) \/ 65536.0,\n-                        ( FT_fdot6ToFixed( face->cvt[pindex] ) +\n-                          cvt_deltas[pindex] ) \/ 65536.0 ));\n+                        (double)( FT_fdot6ToFixed( face->cvt[pindex] ) +\n+                                    old_cvt_delta ) \/ 65536,\n+                        (double)( FT_fdot6ToFixed( face->cvt[pindex] ) +\n+                                    cvt_deltas[pindex] ) \/ 65536 ));\n@@ -3816,11 +3978,0 @@\n-   * @Input:\n-   *   face ::\n-   *     A handle to the target face object.\n-   *\n-   *   glyph_index ::\n-   *     The index of the glyph being modified.\n-   *\n-   *   n_points ::\n-   *     The number of the points in the glyph, including\n-   *     phantom points.\n-   *\n@@ -3828,0 +3979,3 @@\n+   *   loader ::\n+   *     A handle to the loader object.\n+   *\n@@ -3829,1 +3983,1 @@\n-   *     The outline to change.\n+   *     The outline to change, with appended phantom points.\n@@ -3840,2 +3994,1 @@\n-  TT_Vary_Apply_Glyph_Deltas( TT_Face      face,\n-                              FT_UInt      glyph_index,\n+  TT_Vary_Apply_Glyph_Deltas( TT_Loader    loader,\n@@ -3843,2 +3996,1 @@\n-                              FT_Vector*   unrounded,\n-                              FT_UInt      n_points )\n+                              FT_Vector*   unrounded )\n@@ -3847,2 +3999,5 @@\n-    FT_Stream  stream = face->root.stream;\n-    FT_Memory  memory = stream->memory;\n+    TT_Face    face        = loader->face;\n+    FT_Stream  stream      = face->root.stream;\n+    FT_Memory  memory      = stream->memory;\n+    FT_UInt    glyph_index = loader->glyph_index;\n+    FT_UInt    n_points    = (FT_UInt)outline->n_points + 4;\n@@ -4066,30 +4221,2 @@\n-          if ( j < n_points - 4 )\n-          {\n-            point_deltas_x[j] = old_point_delta_x + point_delta_x;\n-            point_deltas_y[j] = old_point_delta_y + point_delta_y;\n-          }\n-          else\n-          {\n-            \/* To avoid double adjustment of advance width or height, *\/\n-            \/* adjust phantom points only if there is no HVAR or VVAR *\/\n-            \/* support, respectively.                                 *\/\n-            if ( j == ( n_points - 4 )        &&\n-                 !( face->variation_support &\n-                    TT_FACE_FLAG_VAR_LSB    ) )\n-              point_deltas_x[j] = old_point_delta_x + point_delta_x;\n-\n-            else if ( j == ( n_points - 3 )          &&\n-                      !( face->variation_support   &\n-                         TT_FACE_FLAG_VAR_HADVANCE ) )\n-              point_deltas_x[j] = old_point_delta_x + point_delta_x;\n-\n-            else if ( j == ( n_points - 2 )        &&\n-                      !( face->variation_support &\n-                         TT_FACE_FLAG_VAR_TSB    ) )\n-              point_deltas_y[j] = old_point_delta_y + point_delta_y;\n-\n-            else if ( j == ( n_points - 1 )          &&\n-                      !( face->variation_support   &\n-                         TT_FACE_FLAG_VAR_VADVANCE ) )\n-              point_deltas_y[j] = old_point_delta_y + point_delta_y;\n-          }\n+          point_deltas_x[j] = old_point_delta_x + point_delta_x;\n+          point_deltas_y[j] = old_point_delta_y + point_delta_y;\n@@ -4102,8 +4229,8 @@\n-                        ( FT_intToFixed( outline->points[j].x ) +\n-                          old_point_delta_x ) \/ 65536.0,\n-                        ( FT_intToFixed( outline->points[j].y ) +\n-                          old_point_delta_y ) \/ 65536.0,\n-                        ( FT_intToFixed( outline->points[j].x ) +\n-                          point_deltas_x[j] ) \/ 65536.0,\n-                        ( FT_intToFixed( outline->points[j].y ) +\n-                          point_deltas_y[j] ) \/ 65536.0 ));\n+                        (double)( FT_intToFixed( outline->points[j].x ) +\n+                                    old_point_delta_x ) \/ 65536,\n+                        (double)( FT_intToFixed( outline->points[j].y ) +\n+                                    old_point_delta_y ) \/ 65536,\n+                        (double)( FT_intToFixed( outline->points[j].x ) +\n+                                    point_deltas_x[j] ) \/ 65536,\n+                        (double)( FT_intToFixed( outline->points[j].y ) +\n+                                    point_deltas_y[j] ) \/ 65536 ));\n@@ -4168,30 +4295,2 @@\n-          if ( j < n_points - 4 )\n-          {\n-            point_deltas_x[j] = old_point_delta_x + point_delta_x;\n-            point_deltas_y[j] = old_point_delta_y + point_delta_y;\n-          }\n-          else\n-          {\n-            \/* To avoid double adjustment of advance width or height, *\/\n-            \/* adjust phantom points only if there is no HVAR or VVAR *\/\n-            \/* support, respectively.                                 *\/\n-            if ( j == ( n_points - 4 )        &&\n-                 !( face->variation_support &\n-                    TT_FACE_FLAG_VAR_LSB    ) )\n-              point_deltas_x[j] = old_point_delta_x + point_delta_x;\n-\n-            else if ( j == ( n_points - 3 )          &&\n-                      !( face->variation_support   &\n-                         TT_FACE_FLAG_VAR_HADVANCE ) )\n-              point_deltas_x[j] = old_point_delta_x + point_delta_x;\n-\n-            else if ( j == ( n_points - 2 )        &&\n-                      !( face->variation_support &\n-                         TT_FACE_FLAG_VAR_TSB    ) )\n-              point_deltas_y[j] = old_point_delta_y + point_delta_y;\n-\n-            else if ( j == ( n_points - 1 )          &&\n-                      !( face->variation_support   &\n-                         TT_FACE_FLAG_VAR_VADVANCE ) )\n-              point_deltas_y[j] = old_point_delta_y + point_delta_y;\n-          }\n+          point_deltas_x[j] = old_point_delta_x + point_delta_x;\n+          point_deltas_y[j] = old_point_delta_y + point_delta_y;\n@@ -4204,8 +4303,8 @@\n-                        ( FT_intToFixed( outline->points[j].x ) +\n-                          old_point_delta_x ) \/ 65536.0,\n-                        ( FT_intToFixed( outline->points[j].y ) +\n-                          old_point_delta_y ) \/ 65536.0,\n-                        ( FT_intToFixed( outline->points[j].x ) +\n-                          point_deltas_x[j] ) \/ 65536.0,\n-                        ( FT_intToFixed( outline->points[j].y ) +\n-                          point_deltas_y[j] ) \/ 65536.0 ));\n+                        (double)( FT_intToFixed( outline->points[j].x ) +\n+                                    old_point_delta_x ) \/ 65536,\n+                        (double)( FT_intToFixed( outline->points[j].y ) +\n+                                    old_point_delta_y ) \/ 65536,\n+                        (double)( FT_intToFixed( outline->points[j].x ) +\n+                                    point_deltas_x[j] ) \/ 65536,\n+                        (double)( FT_intToFixed( outline->points[j].y ) +\n+                                    point_deltas_y[j] ) \/ 65536 ));\n@@ -4235,0 +4334,18 @@\n+    \/* To avoid double adjustment of advance width or height, *\/\n+    \/* do not move phantom points if there is HVAR or VVAR    *\/\n+    \/* support, respectively.                                 *\/\n+    if ( face->variation_support & TT_FACE_FLAG_VAR_HADVANCE )\n+    {\n+      point_deltas_x[n_points - 4] = 0;\n+      point_deltas_y[n_points - 4] = 0;\n+      point_deltas_x[n_points - 3] = 0;\n+      point_deltas_y[n_points - 3] = 0;\n+    }\n+    if ( face->variation_support & TT_FACE_FLAG_VAR_VADVANCE )\n+    {\n+      point_deltas_x[n_points - 2] = 0;\n+      point_deltas_y[n_points - 2] = 0;\n+      point_deltas_x[n_points - 1] = 0;\n+      point_deltas_y[n_points - 1] = 0;\n+    }\n+\n@@ -4244,0 +4361,18 @@\n+    \/* To avoid double adjustment of advance width or height, *\/\n+    \/* adjust phantom points only if there is no HVAR or VVAR *\/\n+    \/* support, respectively.                                 *\/\n+    if ( !( face->variation_support & TT_FACE_FLAG_VAR_HADVANCE ) )\n+    {\n+      loader->pp1      = outline->points[n_points - 4];\n+      loader->pp2      = outline->points[n_points - 3];\n+      loader->linear   = FT_PIX_ROUND( unrounded[n_points - 3].x -\n+                                       unrounded[n_points - 4].x ) \/ 64;\n+    }\n+    if ( !( face->variation_support & TT_FACE_FLAG_VAR_VADVANCE ) )\n+    {\n+      loader->pp3      = outline->points[n_points - 2];\n+      loader->pp4      = outline->points[n_points - 1];\n+      loader->vadvance = FT_PIX_ROUND( unrounded[n_points - 1].y -\n+                                       unrounded[n_points - 2].y ) \/ 64;\n+    }\n+\n@@ -4308,2 +4443,2 @@\n-  static void\n-  ft_var_done_item_variation_store( TT_Face          face,\n+  FT_LOCAL_DEF( void )\n+  tt_var_done_item_variation_store( TT_Face          face,\n@@ -4337,0 +4472,12 @@\n+  FT_LOCAL_DEF( void )\n+  tt_var_done_delta_set_index_map( TT_Face            face,\n+                                   GX_DeltaSetIdxMap  deltaSetIdxMap )\n+  {\n+    FT_Memory  memory = FT_FACE_MEMORY( face );\n+\n+\n+    FT_FREE( deltaSetIdxMap->innerIndex );\n+    FT_FREE( deltaSetIdxMap->outerIndex );\n+  }\n+\n+\n@@ -4365,1 +4512,1 @@\n-      if ( blend->avar_segment )\n+      if ( blend->avar_table )\n@@ -4367,3 +4514,14 @@\n-        for ( i = 0; i < num_axes; i++ )\n-          FT_FREE( blend->avar_segment[i].correspondence );\n-        FT_FREE( blend->avar_segment );\n+        if ( blend->avar_table->avar_segment )\n+        {\n+          for ( i = 0; i < num_axes; i++ )\n+            FT_FREE( blend->avar_table->avar_segment[i].correspondence );\n+          FT_FREE( blend->avar_table->avar_segment );\n+        }\n+\n+        tt_var_done_item_variation_store( face,\n+                                          &blend->avar_table->itemStore );\n+\n+        tt_var_done_delta_set_index_map( face,\n+                                         &blend->avar_table->axisMap );\n+\n+        FT_FREE( blend->avar_table );\n@@ -4374,1 +4532,1 @@\n-        ft_var_done_item_variation_store( face,\n+        tt_var_done_item_variation_store( face,\n@@ -4377,2 +4535,2 @@\n-        FT_FREE( blend->hvar_table->widthMap.innerIndex );\n-        FT_FREE( blend->hvar_table->widthMap.outerIndex );\n+        tt_var_done_delta_set_index_map( face,\n+                                         &blend->hvar_table->widthMap );\n@@ -4384,1 +4542,1 @@\n-        ft_var_done_item_variation_store( face,\n+        tt_var_done_item_variation_store( face,\n@@ -4387,2 +4545,2 @@\n-        FT_FREE( blend->vvar_table->widthMap.innerIndex );\n-        FT_FREE( blend->vvar_table->widthMap.outerIndex );\n+        tt_var_done_delta_set_index_map( face,\n+                                         &blend->vvar_table->widthMap );\n@@ -4394,1 +4552,1 @@\n-        ft_var_done_item_variation_store( face,\n+        tt_var_done_item_variation_store( face,\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/truetype\/ttgxvar.c","additions":472,"deletions":314,"binary":false,"changes":786,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2004-2022 by\n+ * Copyright (C) 2004-2023 by\n@@ -23,0 +23,1 @@\n+#include <freetype\/internal\/ftmmtypes.h>\n@@ -65,43 +66,9 @@\n-  typedef struct  GX_ItemVarDataRec_\n-  {\n-    FT_UInt    itemCount;      \/* number of delta sets per item         *\/\n-    FT_UInt    regionIdxCount; \/* number of region indices in this data *\/\n-    FT_UInt*   regionIndices;  \/* array of `regionCount' indices;       *\/\n-                               \/* these index `varRegionList'           *\/\n-    FT_Short*  deltaSet;       \/* array of `itemCount' deltas           *\/\n-                               \/* use `innerIndex' for this array       *\/\n-\n-  } GX_ItemVarDataRec, *GX_ItemVarData;\n-\n-\n-  \/* contribution of one axis to a region *\/\n-  typedef struct  GX_AxisCoordsRec_\n-  {\n-    FT_Fixed  startCoord;\n-    FT_Fixed  peakCoord;      \/* zero means no effect (factor = 1) *\/\n-    FT_Fixed  endCoord;\n-\n-  } GX_AxisCoordsRec, *GX_AxisCoords;\n-\n-\n-  typedef struct  GX_VarRegionRec_\n-  {\n-    GX_AxisCoords  axisList;               \/* array of axisCount records *\/\n-\n-  } GX_VarRegionRec, *GX_VarRegion;\n-\n-\n-  \/* item variation store *\/\n-  typedef struct  GX_ItemVarStoreRec_\n-  {\n-    FT_UInt         dataCount;\n-    GX_ItemVarData  varData;            \/* array of dataCount records;     *\/\n-                                        \/* use `outerIndex' for this array *\/\n-    FT_UShort     axisCount;\n-    FT_UInt       regionCount;          \/* total number of regions defined *\/\n-    GX_VarRegion  varRegionList;\n-\n-  } GX_ItemVarStoreRec, *GX_ItemVarStore;\n-\n-\n-  typedef struct  GX_DeltaSetIdxMapRec_\n+  \/**************************************************************************\n+   *\n+   * @Struct:\n+   *   GX_AVarTableRec\n+   *\n+   * @Description:\n+   *   Data from the `avar' table.\n+   *\/\n+  typedef struct  GX_AVarTableRec_\n@@ -109,3 +76,3 @@\n-    FT_ULong  mapCount;\n-    FT_UInt*  outerIndex;               \/* indices to item var data *\/\n-    FT_UInt*  innerIndex;               \/* indices to delta set     *\/\n+    GX_AVarSegment        avar_segment;   \/* avar_segment[num_axis] *\/\n+    GX_ItemVarStoreRec    itemStore;      \/* Item Variation Store   *\/\n+    GX_DeltaSetIdxMapRec  axisMap;        \/* Axis Mapping           *\/\n@@ -113,1 +80,1 @@\n-  } GX_DeltaSetIdxMapRec, *GX_DeltaSetIdxMap;\n+  } GX_AVarTableRec, *GX_AVarTable;\n@@ -248,1 +215,1 @@\n-   *   avar_segment ::\n+   *   avar_table ::\n@@ -313,1 +280,1 @@\n-    GX_AVarSegment  avar_segment;                \/* avar_segment[num_axis] *\/\n+    GX_AVarTable    avar_table;\n@@ -379,0 +346,1 @@\n+#define TTAG_ital  FT_MAKE_TAG( 'i', 't', 'a', 'l' )\n@@ -415,2 +383,1 @@\n-  TT_Vary_Apply_Glyph_Deltas( TT_Face      face,\n-                              FT_UInt      glyph_index,\n+  TT_Vary_Apply_Glyph_Deltas( TT_Loader    loader,\n@@ -418,2 +385,1 @@\n-                              FT_Vector*   unrounded,\n-                              FT_UInt      n_points );\n+                              FT_Vector*   unrounded );\n@@ -434,0 +400,28 @@\n+\n+  FT_LOCAL( FT_Error )\n+  tt_var_load_item_variation_store( TT_Face          face,\n+                                    FT_ULong         offset,\n+                                    GX_ItemVarStore  itemStore );\n+\n+  FT_LOCAL( FT_Error )\n+  tt_var_load_delta_set_index_mapping( TT_Face            face,\n+                                       FT_ULong           offset,\n+                                       GX_DeltaSetIdxMap  map,\n+                                       GX_ItemVarStore    itemStore,\n+                                       FT_ULong           table_len );\n+\n+  FT_LOCAL( FT_ItemVarDelta )\n+  tt_var_get_item_delta( TT_Face          face,\n+                         GX_ItemVarStore  itemStore,\n+                         FT_UInt          outerIndex,\n+                         FT_UInt          innerIndex );\n+\n+  FT_LOCAL( void )\n+  tt_var_done_item_variation_store( TT_Face          face,\n+                                    GX_ItemVarStore  itemStore );\n+\n+  FT_LOCAL( void )\n+  tt_var_done_delta_set_index_map( TT_Face            face,\n+                                   GX_DeltaSetIdxMap  deltaSetIdxMap );\n+\n+\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/truetype\/ttgxvar.h","additions":48,"deletions":54,"binary":false,"changes":102,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -1530,1 +1530,0 @@\n-    \/* TT_RunIns sets origCvt and restores cvt to origCvt when done. *\/\n@@ -1532,1 +1531,1 @@\n-         exc->cvt == exc->origCvt            )\n+         exc->cvt != exc->glyfCvt            )\n@@ -3118,2 +3117,0 @@\n-      \/* TT_RunIns sets origStorage and restores storage to origStorage *\/\n-      \/* when done.                                                     *\/\n@@ -3121,1 +3118,1 @@\n-           exc->storage == exc->origStorage    )\n+           exc->storage != exc->glyfStorage    )\n@@ -6877,1 +6874,1 @@\n-  _iup_worker_shift( IUP_Worker  worker,\n+  iup_worker_shift_( IUP_Worker  worker,\n@@ -6899,1 +6896,1 @@\n-  _iup_worker_interpolate( IUP_Worker  worker,\n+  iup_worker_interpolate_( IUP_Worker  worker,\n@@ -7093,1 +7090,1 @@\n-            _iup_worker_interpolate( &V,\n+            iup_worker_interpolate_( &V,\n@@ -7105,1 +7102,1 @@\n-          _iup_worker_shift( &V, first_point, end_point, cur_touched );\n+          iup_worker_shift_( &V, first_point, end_point, cur_touched );\n@@ -7108,1 +7105,1 @@\n-          _iup_worker_interpolate( &V,\n+          iup_worker_interpolate_( &V,\n@@ -7115,1 +7112,1 @@\n-            _iup_worker_interpolate( &V,\n+            iup_worker_interpolate_( &V,\n@@ -7835,2 +7832,0 @@\n-    exc->origCvt     = exc->cvt;\n-    exc->origStorage = exc->storage;\n@@ -8573,1 +8568,2 @@\n-      if ( ++ins_counter > TT_CONFIG_OPTION_MAX_RUNNABLE_OPCODES ) {\n+      if ( ++ins_counter > TT_CONFIG_OPTION_MAX_RUNNABLE_OPCODES )\n+      {\n@@ -8596,3 +8592,0 @@\n-    exc->cvt     = exc->origCvt;\n-    exc->storage = exc->origStorage;\n-\n@@ -8608,3 +8601,0 @@\n-    exc->cvt     = exc->origCvt;\n-    exc->storage = exc->origStorage;\n-\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/truetype\/ttinterp.c","additions":11,"deletions":21,"binary":false,"changes":32,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -196,1 +196,0 @@\n-    FT_Long*           origCvt;\n@@ -227,1 +226,0 @@\n-    FT_Long*           origStorage;\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/truetype\/ttinterp.h","additions":1,"deletions":3,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -1007,1 +1007,1 @@\n-                  i, face->cvt[i] \/ 64.0, size->cvt[i] \/ 64.0 ));\n+                  i, (double)face->cvt[i] \/ 64, (double)size->cvt[i] \/ 64 ));\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/truetype\/ttobjs.c","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/truetype\/ttobjs.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/truetype\/ttpload.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/truetype\/ttpload.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2010-2022 by\n+ * Copyright (C) 2010-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/truetype\/ttsubpix.c","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2010-2022 by\n+ * Copyright (C) 2010-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/truetype\/ttsubpix.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -181,1 +181,0 @@\n-    charmap    = NULL;\n@@ -189,3 +188,1 @@\n-        error = FT_Set_Charmap( t1_face, charmap );\n-        if ( error )\n-          goto Exit;\n+        t1_face->charmap = charmap;\n@@ -212,4 +209,1 @@\n-    if ( oldcharmap )\n-      error = FT_Set_Charmap( t1_face, oldcharmap );\n-    if ( error )\n-      goto Exit;\n+    t1_face->charmap = oldcharmap;\n@@ -305,3 +299,8 @@\n-      \/* no `U' suffix here to 0x8000! *\/\n-      t1_face->ascender  = (FT_Short)( ( fi->Ascender  + 0x8000 ) >> 16 );\n-      t1_face->descender = (FT_Short)( ( fi->Descender + 0x8000 ) >> 16 );\n+      \/* ascender and descender are optional and could both be zero *\/\n+      \/* check if values are meaningful before overriding defaults  *\/\n+      if ( fi->Ascender > fi->Descender )\n+      {\n+        \/* no `U' suffix here to 0x8000! *\/\n+        t1_face->ascender  = (FT_Short)( ( fi->Ascender  + 0x8000 ) >> 16 );\n+        t1_face->descender = (FT_Short)( ( fi->Descender + 0x8000 ) >> 16 );\n+      }\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/type1\/t1afm.c","additions":11,"deletions":12,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/type1\/t1afm.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -124,13 +124,24 @@\n-    (FT_Get_MM_Func)             T1_Get_Multi_Master,    \/* get_mm              *\/\n-    (FT_Set_MM_Design_Func)      T1_Set_MM_Design,       \/* set_mm_design       *\/\n-    (FT_Set_MM_Blend_Func)       T1_Set_MM_Blend,        \/* set_mm_blend        *\/\n-    (FT_Get_MM_Blend_Func)       T1_Get_MM_Blend,        \/* get_mm_blend        *\/\n-    (FT_Get_MM_Var_Func)         T1_Get_MM_Var,          \/* get_mm_var          *\/\n-    (FT_Set_Var_Design_Func)     T1_Set_Var_Design,      \/* set_var_design      *\/\n-    (FT_Get_Var_Design_Func)     T1_Get_Var_Design,      \/* get_var_design      *\/\n-    (FT_Set_Instance_Func)       T1_Reset_MM_Blend,      \/* set_instance        *\/\n-    (FT_Set_MM_WeightVector_Func)T1_Set_MM_WeightVector, \/* set_mm_weightvector *\/\n-    (FT_Get_MM_WeightVector_Func)T1_Get_MM_WeightVector, \/* get_mm_weightvector *\/\n-\n-    (FT_Get_Var_Blend_Func)      NULL,                   \/* get_var_blend       *\/\n-    (FT_Done_Blend_Func)         T1_Done_Blend           \/* done_blend          *\/\n+    (FT_Get_MM_Func)        T1_Get_Multi_Master,    \/* get_mm                    *\/\n+    (FT_Set_MM_Design_Func) T1_Set_MM_Design,       \/* set_mm_design             *\/\n+    (FT_Set_MM_Blend_Func)  T1_Set_MM_Blend,        \/* set_mm_blend              *\/\n+    (FT_Get_MM_Blend_Func)  T1_Get_MM_Blend,        \/* get_mm_blend              *\/\n+    (FT_Get_MM_Var_Func)    T1_Get_MM_Var,          \/* get_mm_var                *\/\n+    (FT_Set_Var_Design_Func)T1_Set_Var_Design,      \/* set_var_design            *\/\n+    (FT_Get_Var_Design_Func)T1_Get_Var_Design,      \/* get_var_design            *\/\n+    (FT_Set_Instance_Func)  T1_Reset_MM_Blend,      \/* set_instance              *\/\n+    (FT_Set_MM_WeightVector_Func)\n+                            T1_Set_MM_WeightVector, \/* set_mm_weightvector       *\/\n+    (FT_Get_MM_WeightVector_Func)\n+                            T1_Get_MM_WeightVector, \/* get_mm_weightvector       *\/\n+    (FT_Var_Load_Delta_Set_Idx_Map_Func)\n+                            NULL,                   \/* load_delta_set_idx_map    *\/\n+    (FT_Var_Load_Item_Var_Store_Func)\n+                            NULL,                   \/* load_item_variation_store *\/\n+    (FT_Var_Get_Item_Delta_Func)\n+                            NULL,                   \/* get_item_delta            *\/\n+    (FT_Var_Done_Item_Var_Store_Func)\n+                            NULL,                   \/* done_item_variation_store *\/\n+    (FT_Var_Done_Delta_Set_Idx_Map_Func)\n+                            NULL,                   \/* done_delta_set_index_map  *\/\n+    (FT_Get_Var_Blend_Func) NULL,                   \/* get_var_blend             *\/\n+    (FT_Done_Blend_Func)    T1_Done_Blend           \/* done_blend                *\/\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/type1\/t1driver.c","additions":25,"deletions":14,"binary":false,"changes":39,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/type1\/t1driver.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 2001-2022 by\n+ * Copyright (C) 2001-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/type1\/t1errors.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -267,1 +267,1 @@\n-                *max_advance \/ 65536.0 ));\n+                (double)*max_advance \/ 65536 ));\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/type1\/t1gload.c","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/type1\/t1gload.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -358,0 +358,4 @@\n+      else if ( ft_strcmp( mmvar->axis[i].name, \"Slant\" ) == 0 )\n+        mmvar->axis[i].tag = FT_MAKE_TAG( 's', 'l', 'n', 't' );\n+      else if ( ft_strcmp( mmvar->axis[i].name, \"Italic\" ) == 0 )\n+        mmvar->axis[i].tag = FT_MAKE_TAG( 'i', 't', 'a', 'l' );\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/type1\/t1load.c","additions":5,"deletions":1,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/type1\/t1load.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -149,1 +149,3 @@\n-    slot->internal->glyph_hints = NULL;\n+    \/* `slot->internal` might be NULL in out-of-memory situations. *\/\n+    if ( slot->internal )\n+      slot->internal->glyph_hints = NULL;\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/type1\/t1objs.c","additions":4,"deletions":2,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/type1\/t1objs.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n@@ -333,1 +333,3 @@\n-      \/* first of all, look at the `eexec' keyword *\/\n+      \/* First look for the `eexec' keyword. Ensure `eexec' is real -- *\/\n+      \/* it could be in a comment or string (as e.g. in u003043t.gsf   *\/\n+      \/* from ghostscript).                                            *\/\n@@ -340,26 +342,0 @@\n-    Again:\n-      for (;;)\n-      {\n-        if ( cur[0] == 'e'   &&\n-             cur + 9 < limit )      \/* 9 = 5 letters for `eexec' + *\/\n-                                    \/* whitespace + 4 chars        *\/\n-        {\n-          if ( cur[1] == 'e' &&\n-               cur[2] == 'x' &&\n-               cur[3] == 'e' &&\n-               cur[4] == 'c' )\n-            break;\n-        }\n-        cur++;\n-        if ( cur >= limit )\n-        {\n-          FT_ERROR(( \"T1_Get_Private_Dict:\"\n-                     \" could not find `eexec' keyword\\n\" ));\n-          error = FT_THROW( Invalid_File_Format );\n-          goto Exit;\n-        }\n-      }\n-\n-      \/* check whether `eexec' was real -- it could be in a comment *\/\n-      \/* or string (as e.g. in u003043t.gsf from ghostscript)       *\/\n-\n@@ -367,2 +343,1 @@\n-      \/* set limit to `eexec' + whitespace + 4 characters *\/\n-      parser->root.limit  = cur + 10;\n+      parser->root.limit  = parser->base_dict + parser->base_len;\n@@ -375,2 +350,2 @@\n-        if ( cur[0] == 'e'   &&\n-             cur + 5 < limit )\n+        \/* 9 = 5 letters for `eexec' + whitespace + 4 chars *\/\n+        if ( cur[0] == 'e' && cur + 9 < limit )\n@@ -392,15 +367,3 @@\n-      \/* we haven't found the correct `eexec'; go back and continue *\/\n-      \/* searching                                                  *\/\n-\n-      cur   = limit;\n-      limit = parser->base_dict + parser->base_len;\n-\n-      if ( cur >= limit )\n-      {\n-        FT_ERROR(( \"T1_Get_Private_Dict:\"\n-                   \" premature end in private dictionary\\n\" ));\n-        error = FT_THROW( Invalid_File_Format );\n-        goto Exit;\n-      }\n-\n-      goto Again;\n+      FT_ERROR(( \"T1_Get_Private_Dict: could not find `eexec' keyword\\n\" ));\n+      error = FT_THROW( Invalid_File_Format );\n+      goto Exit;\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/type1\/t1parse.c","additions":10,"deletions":47,"binary":false,"changes":57,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/type1\/t1parse.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -7,1 +7,1 @@\n- * Copyright (C) 1996-2022 by\n+ * Copyright (C) 1996-2023 by\n","filename":"src\/java.desktop\/share\/native\/libfreetype\/src\/type1\/t1tokens.h","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}