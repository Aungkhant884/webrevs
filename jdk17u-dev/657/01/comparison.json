{"files":[{"patch":"@@ -181,5 +181,1 @@\n-    bool ret_value = false;\n-    if (UseAVX > 2) {\n-      ret_value = VM_Version::supports_avx512vl();\n-    }\n-    return ret_value;\n+    return VM_Version::supports_evex();\n","filename":"src\/hotspot\/cpu\/x86\/matcher_x86.hpp","additions":1,"deletions":5,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -11730,1 +11730,1 @@\n-  predicate(UseAVX <= 2 && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::LL);\n+  predicate(!VM_Version::supports_avx512vlbw() && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::LL);\n@@ -11745,1 +11745,1 @@\n-  predicate(UseAVX > 2 && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::LL);\n+  predicate(VM_Version::supports_avx512vlbw() && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::LL);\n@@ -11760,1 +11760,1 @@\n-  predicate(UseAVX <= 2 && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::UU);\n+  predicate(!VM_Version::supports_avx512vlbw() && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::UU);\n@@ -11775,1 +11775,1 @@\n-  predicate(UseAVX > 2 && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::UU);\n+  predicate(VM_Version::supports_avx512vlbw() && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::UU);\n@@ -11790,1 +11790,1 @@\n-  predicate(UseAVX <= 2 && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::LU);\n+  predicate(!VM_Version::supports_avx512vlbw() && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::LU);\n@@ -11805,1 +11805,1 @@\n-  predicate(UseAVX > 2 && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::LU);\n+  predicate(VM_Version::supports_avx512vlbw() && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::LU);\n@@ -11820,1 +11820,1 @@\n-  predicate(UseAVX <= 2 && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::UL);\n+  predicate(!VM_Version::supports_avx512vlbw() && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::UL);\n@@ -11835,1 +11835,1 @@\n-  predicate(UseAVX > 2 && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::UL);\n+  predicate(VM_Version::supports_avx512vlbw() && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::UL);\n@@ -11851,1 +11851,1 @@\n-  predicate(UseAVX <= 2);\n+  predicate(!VM_Version::supports_avx512vlbw());\n@@ -11867,1 +11867,1 @@\n-  predicate(UseAVX > 2);\n+  predicate(VM_Version::supports_avx512vlbw());\n@@ -12045,1 +12045,1 @@\n-  predicate(UseAVX <= 2 && ((AryEqNode*)n)->encoding() == StrIntrinsicNode::LL);\n+  predicate(!VM_Version::supports_avx512vlbw() && ((AryEqNode*)n)->encoding() == StrIntrinsicNode::LL);\n@@ -12062,1 +12062,1 @@\n-  predicate(UseAVX > 2 && ((AryEqNode*)n)->encoding() == StrIntrinsicNode::LL);\n+  predicate(VM_Version::supports_avx512vlbw() && ((AryEqNode*)n)->encoding() == StrIntrinsicNode::LL);\n@@ -12079,1 +12079,1 @@\n-  predicate(UseAVX <= 2 && ((AryEqNode*)n)->encoding() == StrIntrinsicNode::UU);\n+  predicate(!VM_Version::supports_avx512vlbw() && ((AryEqNode*)n)->encoding() == StrIntrinsicNode::UU);\n@@ -12096,1 +12096,1 @@\n-  predicate(UseAVX > 2 && ((AryEqNode*)n)->encoding() == StrIntrinsicNode::UU);\n+  predicate(VM_Version::supports_avx512vlbw() && ((AryEqNode*)n)->encoding() == StrIntrinsicNode::UU);\n@@ -12113,1 +12113,1 @@\n-  predicate(UseAVX <= 2);\n+  predicate(!VM_Version::supports_avx512vlbw() || !VM_Version::supports_bmi2());\n@@ -12129,1 +12129,1 @@\n-  predicate(UseAVX > 2);\n+  predicate(VM_Version::supports_avx512vlbw() && VM_Version::supports_bmi2());\n@@ -12146,1 +12146,1 @@\n-  predicate(UseAVX <= 2);\n+  predicate(!VM_Version::supports_avx512vlbw() || !VM_Version::supports_bmi2());\n@@ -12162,1 +12162,1 @@\n-  predicate(UseAVX > 2);\n+  predicate(VM_Version::supports_avx512vlbw() && VM_Version::supports_bmi2());\n@@ -12179,1 +12179,1 @@\n-  predicate(UseAVX <= 2);\n+  predicate(!VM_Version::supports_avx512vlbw() || !VM_Version::supports_bmi2());\n@@ -12193,1 +12193,1 @@\n-  predicate(UseAVX > 2);\n+  predicate(VM_Version::supports_avx512vlbw() && VM_Version::supports_bmi2());\n","filename":"src\/hotspot\/cpu\/x86\/x86_32.ad","additions":20,"deletions":20,"binary":false,"changes":40,"status":"modified"},{"patch":"@@ -11263,1 +11263,1 @@\n-  predicate(UseAVX <= 2 && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::LL);\n+  predicate(!VM_Version::supports_avx512vlbw() && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::LL);\n@@ -11279,1 +11279,1 @@\n-  predicate(UseAVX > 2 && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::LL);\n+  predicate(VM_Version::supports_avx512vlbw() && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::LL);\n@@ -11295,1 +11295,1 @@\n-  predicate(UseAVX <= 2 && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::UU);\n+  predicate(!VM_Version::supports_avx512vlbw() && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::UU);\n@@ -11311,1 +11311,1 @@\n-  predicate(UseAVX > 2 && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::UU);\n+  predicate(VM_Version::supports_avx512vlbw() && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::UU);\n@@ -11327,1 +11327,1 @@\n-  predicate(UseAVX <= 2 && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::LU);\n+  predicate(!VM_Version::supports_avx512vlbw() && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::LU);\n@@ -11343,1 +11343,1 @@\n-  predicate(UseAVX > 2 && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::LU);\n+  predicate(VM_Version::supports_avx512vlbw() && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::LU);\n@@ -11359,1 +11359,1 @@\n-  predicate(UseAVX <= 2 && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::UL);\n+  predicate(!VM_Version::supports_avx512vlbw() && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::UL);\n@@ -11375,1 +11375,1 @@\n-  predicate(UseAVX > 2 && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::UL);\n+  predicate(VM_Version::supports_avx512vlbw() && ((StrCompNode*)n)->encoding() == StrIntrinsicNode::UL);\n@@ -11558,1 +11558,1 @@\n-  predicate(UseAVX <= 2);\n+  predicate(!VM_Version::supports_avx512vlbw());\n@@ -11574,1 +11574,1 @@\n-  predicate(UseAVX > 2);\n+  predicate(VM_Version::supports_avx512vlbw());\n@@ -11591,1 +11591,1 @@\n-  predicate(UseAVX <= 2 && ((AryEqNode*)n)->encoding() == StrIntrinsicNode::LL);\n+  predicate(!VM_Version::supports_avx512vlbw() && ((AryEqNode*)n)->encoding() == StrIntrinsicNode::LL);\n@@ -11607,1 +11607,1 @@\n-  predicate(UseAVX > 2 && ((AryEqNode*)n)->encoding() == StrIntrinsicNode::LL);\n+  predicate(VM_Version::supports_avx512vlbw() && ((AryEqNode*)n)->encoding() == StrIntrinsicNode::LL);\n@@ -11623,1 +11623,1 @@\n-  predicate(UseAVX <= 2 && ((AryEqNode*)n)->encoding() == StrIntrinsicNode::UU);\n+  predicate(!VM_Version::supports_avx512vlbw() && ((AryEqNode*)n)->encoding() == StrIntrinsicNode::UU);\n@@ -11639,1 +11639,1 @@\n-  predicate(UseAVX > 2 && ((AryEqNode*)n)->encoding() == StrIntrinsicNode::UU);\n+  predicate(VM_Version::supports_avx512vlbw() && ((AryEqNode*)n)->encoding() == StrIntrinsicNode::UU);\n@@ -11655,1 +11655,1 @@\n-  predicate(UseAVX <= 2);\n+  predicate(!VM_Version::supports_avx512vlbw() || !VM_Version::supports_bmi2());\n@@ -11671,1 +11671,1 @@\n-  predicate(UseAVX > 2);\n+  predicate(VM_Version::supports_avx512vlbw() && VM_Version::supports_bmi2());\n@@ -11687,1 +11687,1 @@\n-  predicate(UseAVX <= 2);\n+  predicate(!VM_Version::supports_avx512vlbw() || !VM_Version::supports_bmi2());\n@@ -11704,1 +11704,1 @@\n-  predicate(UseAVX > 2);\n+  predicate(VM_Version::supports_avx512vlbw() && VM_Version::supports_bmi2());\n@@ -11721,1 +11721,1 @@\n-  predicate(UseAVX <= 2);\n+  predicate(!VM_Version::supports_avx512vlbw() || !VM_Version::supports_bmi2());\n@@ -11735,1 +11735,1 @@\n-  predicate(UseAVX > 2);\n+  predicate(VM_Version::supports_avx512vlbw() && VM_Version::supports_bmi2());\n","filename":"src\/hotspot\/cpu\/x86\/x86_64.ad","additions":20,"deletions":20,"binary":false,"changes":40,"status":"modified"}]}