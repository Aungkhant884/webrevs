{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1998, 2017, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1998, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -756,0 +756,1 @@\n+        request->exception = NULL;\n@@ -757,0 +758,1 @@\n+        request->returnValue.l = NULL;\n@@ -799,0 +801,12 @@\n+        \/*\n+         * Delete potentially saved global references for return value\n+         * and exception. This must be done before sending the reply or\n+         * these objects will briefly be viewable by the debugger as live\n+         * when they shouldn't be.\n+         *\/\n+        if (mustReleaseReturnValue && returnValue.l != NULL) {\n+            tossGlobalRef(env, &returnValue.l);\n+        }\n+        if (exc != NULL) {\n+            tossGlobalRef(env, &exc);\n+        }\n@@ -801,15 +815,0 @@\n-\n-    \/*\n-     * Delete potentially saved global references of return value\n-     * and exception\n-     *\/\n-    eventHandler_lock(); \/\/ for proper lock order\n-    debugMonitorEnter(invokerLock);\n-    if (mustReleaseReturnValue && returnValue.l != NULL) {\n-        tossGlobalRef(env, &returnValue.l);\n-    }\n-    if (exc != NULL) {\n-        tossGlobalRef(env, &exc);\n-    }\n-    debugMonitorExit(invokerLock);\n-    eventHandler_unlock();\n","filename":"src\/jdk.jdwp.agent\/share\/native\/libjdwp\/invoker.c","additions":15,"deletions":16,"binary":false,"changes":31,"status":"modified"}]}