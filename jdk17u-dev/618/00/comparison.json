{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2013, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2013, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -24,1 +24,1 @@\n-\/**\n+\/*\n@@ -26,1 +26,3 @@\n- * @bug 800535 8022536\n+ * @bug 8008535 8022536\n+ * @library ..\/..\/regtesthelpers\n+ * @build PassFailJFrame\n@@ -28,1 +30,1 @@\n- * @run main\/manual=yesno PrintLatinCJKTest\n+ * @run main\/manual PrintLatinCJKTest\n@@ -31,0 +33,1 @@\n+import java.awt.BorderLayout;\n@@ -33,2 +36,0 @@\n-import java.awt.event.ActionEvent;\n-import java.awt.event.ActionListener;\n@@ -36,1 +37,0 @@\n-import java.awt.print.Pageable;\n@@ -40,0 +40,1 @@\n+import java.lang.reflect.InvocationTargetException;\n@@ -42,1 +43,0 @@\n-import javax.swing.JTextArea;\n@@ -44,1 +44,11 @@\n-import javax.swing.SwingUtilities;\n+import static javax.swing.SwingUtilities.invokeAndWait;\n+\n+public class PrintLatinCJKTest implements Printable {\n+\n+    private static PrintLatinCJKTest testInstance = new PrintLatinCJKTest();\n+    private static JFrame frame;\n+    private static final String info = \"\"\"\n+            You need a printer for this test. If you have none, let\n+            the test pass. If there is a printer, press Print, send\n+            the output to the printer, and examine it. It should have\n+            text looking like this : \\u4e00\\u4e01\\u4e02\\u4e03\\u4e04English\n@@ -46,1 +56,3 @@\n-public class PrintLatinCJKTest implements Printable, ActionListener {\n+            To test 8022536, if a remote printer is the system default,\n+            it should show in the dialog as the selected printer.\n+            \"\"\";\n@@ -48,2 +60,19 @@\n-    static PrintLatinCJKTest testInstance = new PrintLatinCJKTest();\n-    private PageFormat pf;\n+    public static void showFrame() throws InterruptedException, InvocationTargetException {\n+        invokeAndWait( () -> {\n+            frame = new JFrame(\"Test Frame\");\n+            JButton b = new JButton(\"Print\");\n+            b.addActionListener((ae) -> {\n+                try {\n+                    PrinterJob job = PrinterJob.getPrinterJob();\n+                    job.setPrintable(testInstance);\n+                    if (job.printDialog()) {\n+                        job.print();\n+                    }\n+                } catch (PrinterException ex) {\n+                    ex.printStackTrace();\n+                }\n+            });\n+            frame.getContentPane().add(b, BorderLayout.SOUTH);\n+            frame.pack();\n+            frame.setLocationRelativeTo(null);\n+            frame.setVisible(true);\n@@ -51,7 +80,2 @@\n-    static String info =\n-       \"To test 8022536, if a remote printer is the system default,\"+\n-       \"it should show in the dialog as the selected printer.\\n\"+\n-       \"You need a printer for this test. If you have none, let \"+\n-       \"the test pass. If there is a printer, press Print, send \"+\n-       \"the output to the printer, and examine it. It should have \"+\n-       \"text looking like this : \\u4e00\\u4e01\\u4e02\\u4e03\\u4e04English.\";\n+            \/\/ add the test frame to dispose\n+            PassFailJFrame.addTestFrame(frame);\n@@ -59,11 +83,4 @@\n-    public static void showFrame() {\n-         JFrame f = new JFrame();\n-         JTextArea jta = new JTextArea(info, 4, 30);\n-         jta.setLineWrap(true);\n-         jta.setWrapStyleWord(true);\n-         f.add(\"Center\", jta);\n-         JButton b = new JButton(\"Print\");\n-         b.addActionListener(testInstance);\n-         f.add(\"South\", b);\n-         f.pack();\n-         f.setVisible(true);\n+            \/\/ Arrange the test instruction frame and test frame side by side\n+            PassFailJFrame.positionTestFrame(frame,\n+                    PassFailJFrame.Position.HORIZONTAL);\n+        });\n@@ -72,0 +89,1 @@\n+    @Override\n@@ -74,1 +92,0 @@\n-\n@@ -84,19 +101,5 @@\n-    public void actionPerformed(ActionEvent e) {\n-        try {\n-            PrinterJob job = PrinterJob.getPrinterJob();\n-            job.setPrintable(testInstance);\n-            if (job.printDialog()) {\n-                job.print();\n-            }\n-        } catch (PrinterException ex) {\n-            ex.printStackTrace();\n-        }\n-    }\n-\n-    public static void main(String[] args) {\n-        SwingUtilities.invokeLater(new Runnable() {\n-            @Override\n-            public void run() {\n-                showFrame();\n-            }\n-        });\n+    public static void main(String[] args) throws InterruptedException, InvocationTargetException {\n+        PassFailJFrame passFailJFrame = new PassFailJFrame(\"Test Instruction\" +\n+                \"Frame\", info, 10, 40, 5);\n+        showFrame();\n+        passFailJFrame.awaitAndCheck();\n@@ -105,0 +108,2 @@\n+\n+\n","filename":"test\/jdk\/java\/awt\/print\/PrinterJob\/PrintLatinCJKTest.java","additions":55,"deletions":50,"binary":false,"changes":105,"status":"modified"}]}