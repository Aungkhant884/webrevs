{"files":[{"patch":"@@ -457,3 +457,2 @@\n-  intptr_t *sp = (intptr_t *)os::Aix::ucontext_get_sp(uc);\n-  st->print_cr(\"Top of Stack: (sp=\" PTR_FORMAT \")\", sp);\n-  print_hex_dump(st, (address)sp, (address)(sp + 128), sizeof(intptr_t));\n+  address sp = (address)os::Aix::ucontext_get_sp(uc);\n+  print_tos(st, sp);\n","filename":"src\/hotspot\/os_cpu\/aix_ppc\/os_aix_ppc.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -475,3 +475,2 @@\n-  intptr_t *sp = (intptr_t *)os::Bsd::ucontext_get_sp(uc);\n-  st->print_cr(\"Top of Stack: (sp=\" INTPTR_FORMAT \")\", (intptr_t)sp);\n-  print_hex_dump(st, (address)sp, (address)(sp + 8*sizeof(intptr_t)), sizeof(intptr_t));\n+  address sp = (address)os::Bsd::ucontext_get_sp(uc);\n+  print_tos(st, sp);\n","filename":"src\/hotspot\/os_cpu\/bsd_aarch64\/os_bsd_aarch64.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -855,3 +855,2 @@\n-  intptr_t *sp = (intptr_t *)os::Bsd::ucontext_get_sp(uc);\n-  st->print_cr(\"Top of Stack: (sp=\" INTPTR_FORMAT \")\", (intptr_t)sp);\n-  print_hex_dump(st, (address)sp, (address)(sp + 8*sizeof(intptr_t)), sizeof(intptr_t));\n+  address sp = (address)os::Bsd::ucontext_get_sp(uc);\n+  print_tos(st, sp);\n","filename":"src\/hotspot\/os_cpu\/bsd_x86\/os_bsd_x86.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -349,3 +349,2 @@\n-  intptr_t *sp = (intptr_t *)os::Linux::ucontext_get_sp(uc);\n-  st->print_cr(\"Top of Stack: (sp=\" PTR_FORMAT \")\", p2i(sp));\n-  print_hex_dump(st, (address)sp, (address)(sp + 8*sizeof(intptr_t)), sizeof(intptr_t));\n+  address sp = (address)os::Linux::ucontext_get_sp(uc);\n+  print_tos(st, sp);\n","filename":"src\/hotspot\/os_cpu\/linux_aarch64\/os_linux_aarch64.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -456,3 +456,2 @@\n-  intptr_t *sp = (intptr_t *)os::Linux::ucontext_get_sp(uc);\n-  st->print_cr(\"Top of Stack: (sp=\" INTPTR_FORMAT \")\", p2i(sp));\n-  print_hex_dump(st, (address)sp, (address)(sp + 8*sizeof(intptr_t)), sizeof(intptr_t));\n+  address sp = (address)os::Linux::ucontext_get_sp(uc);\n+  print_tos(st, sp);\n","filename":"src\/hotspot\/os_cpu\/linux_arm\/os_linux_arm.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -470,3 +470,2 @@\n-  intptr_t *sp = (intptr_t *)os::Linux::ucontext_get_sp(uc);\n-  st->print_cr(\"Top of Stack: (sp=\" PTR_FORMAT \")\", p2i(sp));\n-  print_hex_dump(st, (address)sp, (address)(sp + 128), sizeof(intptr_t));\n+  address sp = (address)os::Linux::ucontext_get_sp(uc);\n+  print_tos(st, sp);\n","filename":"src\/hotspot\/os_cpu\/linux_ppc\/os_linux_ppc.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -361,3 +361,2 @@\n-  intptr_t *frame_sp = (intptr_t *)os::Linux::ucontext_get_sp(uc);\n-  st->print_cr(\"Top of Stack: (sp=\" PTR_FORMAT \")\", p2i(frame_sp));\n-  print_hex_dump(st, (address)frame_sp, (address)(frame_sp + 64), sizeof(intptr_t));\n+  address sp = (address)os::Linux::ucontext_get_sp(uc);\n+  print_tos(st, sp);\n","filename":"src\/hotspot\/os_cpu\/linux_riscv\/os_linux_riscv.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -443,3 +443,2 @@\n-  intptr_t *sp = (intptr_t *)os::Linux::ucontext_get_sp(uc);\n-  st->print_cr(\"Top of Stack: (sp=\" PTR_FORMAT \")\", p2i(sp));\n-  print_hex_dump(st, (address)sp, (address)(sp + 128), sizeof(intptr_t));\n+  address sp = (address)os::Linux::ucontext_get_sp(uc);\n+  print_tos(st, sp);\n","filename":"src\/hotspot\/os_cpu\/linux_s390\/os_linux_s390.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -587,3 +587,2 @@\n-  intptr_t *sp = (intptr_t *)os::Linux::ucontext_get_sp(uc);\n-  st->print_cr(\"Top of Stack: (sp=\" PTR_FORMAT \")\", p2i(sp));\n-  print_hex_dump(st, (address)sp, (address)(sp + 8), sizeof(intptr_t));\n+  address sp = (address)os::Linux::ucontext_get_sp(uc);\n+  print_tos(st, sp);\n","filename":"src\/hotspot\/os_cpu\/linux_x86\/os_linux_x86.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -214,3 +214,2 @@\n-  intptr_t *sp = (intptr_t *)uc->Sp;\n-  st->print_cr(\"Top of Stack: (sp=\" PTR_FORMAT \")\", sp);\n-  print_hex_dump(st, (address)sp, (address)(sp + 32), sizeof(intptr_t));\n+  address sp = (address)uc->Sp;\n+  print_tos(st, sp);\n","filename":"src\/hotspot\/os_cpu\/windows_aarch64\/os_windows_aarch64.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -458,3 +458,2 @@\n-  intptr_t *sp = (intptr_t *)uc->REG_SP;\n-  st->print_cr(\"Top of Stack: (sp=\" PTR_FORMAT \")\", sp);\n-  print_hex_dump(st, (address)sp, (address)(sp + 32), sizeof(intptr_t));\n+  address sp = (address)uc->REG_SP;\n+  print_tos(st, sp);\n","filename":"src\/hotspot\/os_cpu\/windows_x86\/os_windows_x86.cpp","additions":2,"deletions":3,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -966,0 +966,5 @@\n+void os::print_tos(outputStream* st, address sp) {\n+  st->print_cr(\"Top of Stack: (sp=\" PTR_FORMAT \")\", p2i(sp));\n+  print_hex_dump(st, sp, sp + 512, sizeof(intptr_t));\n+}\n+\n","filename":"src\/hotspot\/share\/runtime\/os.cpp","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -697,0 +697,2 @@\n+  static void print_tos(outputStream* st, address sp);\n+  static void print_instructions(outputStream* st, address pc, int unitsize);\n@@ -702,1 +704,0 @@\n-  static void print_instructions(outputStream* st, address pc, int unitsize);\n","filename":"src\/hotspot\/share\/runtime\/os.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}