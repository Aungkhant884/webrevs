{"files":[{"patch":"@@ -355,0 +355,17 @@\n+#ifdef __APPLE__\n+\/\/ Not all macOS versions can use os::reserve_memory (i.e. anon_mmap) API\n+\/\/ to reserve executable memory, so before attempting to use it,\n+\/\/ we need to verify that we can do so by asking for a tiny executable\n+\/\/ memory chunk.\n+static inline bool can_reserve_executable_memory(void) {\n+  bool executable = true;\n+  size_t len = 128;\n+  char* p = os::reserve_memory(len, executable);\n+  bool exec_supported = (p != NULL);\n+  if (exec_supported) {\n+    os::release_memory(p, len);\n+  }\n+  return exec_supported;\n+}\n+#endif\n+\n@@ -364,0 +381,7 @@\n+\n+#ifdef __APPLE__\n+  \/\/ Workaround: try reserving executable memory to figure out\n+  \/\/ if such operation is supported on this macOS version\n+  const bool exec_supported = can_reserve_executable_memory();\n+#endif\n+\n@@ -375,0 +399,3 @@\n+#ifdef __APPLE__\n+    const bool executable = exec_supported ? (stripe % 2 == 0) : false;\n+#else\n@@ -376,0 +403,1 @@\n+#endif\n@@ -417,3 +445,0 @@\n-#if defined(__APPLE__) && !defined(AARCH64) \/\/ JDK-8267339\n-  TEST_VM(os, DISABLED_release_multi_mappings) {\n-#else\n@@ -421,1 +446,0 @@\n-#endif\n","filename":"test\/hotspot\/gtest\/runtime\/test_os.cpp","additions":28,"deletions":4,"binary":false,"changes":32,"status":"modified"}]}