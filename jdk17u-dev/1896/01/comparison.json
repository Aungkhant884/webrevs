{"files":[{"patch":"@@ -53,0 +53,6 @@\n+#ifdef AIX\n+#include \"loadlib_aix.hpp\"\n+#endif\n+#ifdef LINUX\n+#include \"os_linux.hpp\"\n+#endif\n@@ -700,2 +706,12 @@\n-  const char* l_path = LINUX_ONLY(os::Linux::dll_path(lib))\n-                       NOT_LINUX(\"<not available>\");\n+  \/\/ os::Linux::dll_path returns a pointer to a string that is owned by the dynamic loader. Upon\n+  \/\/ calling dlclose the dynamic loader may free the memory containing the string, thus we need to\n+  \/\/ copy the string to be able to reference it after dlclose.\n+  const char* l_path = nullptr;\n+#ifdef LINUX\n+  char* l_pathdup = nullptr;\n+  l_path = os::Linux::dll_path(lib);\n+  if (l_path != nullptr) {\n+    l_path = l_pathdup = os::strdup(l_path);\n+  }\n+#endif  \/\/ LINUX\n+\n@@ -720,0 +736,3 @@\n+  \/\/ Update the dll cache\n+  AIX_ONLY(LoadedLibraries::reload());\n+  LINUX_ONLY(os::free(l_pathdup));\n","filename":"src\/hotspot\/os\/posix\/os_posix.cpp","additions":21,"deletions":2,"binary":false,"changes":23,"status":"modified"}]}