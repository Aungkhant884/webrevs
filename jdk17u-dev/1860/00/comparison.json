{"files":[{"patch":"@@ -35,2 +35,3 @@\n-    private final CountDownLatch cleanerInvoked = new CountDownLatch(1);\n-    private final Cleaner cleaner = Cleaner.create();\n+    private final static Cleaner cleaner = Cleaner.create();\n+\n+    private final CountDownLatch cleanerInvoked;\n@@ -38,0 +39,1 @@\n+    private int gcCount = 0;\n@@ -41,1 +43,2 @@\n-        cleaner.register(o, () -> cleanerInvoked.countDown());\n+        this.cleanerInvoked = new CountDownLatch(1);\n+        cleaner.register(o, cleanerInvoked::countDown);\n@@ -48,2 +51,2 @@\n-                System.out.println(\"doit() iter: \" + iter + \", gc \" + i);\n-                if (cleanerInvoked.await(1L, TimeUnit.SECONDS)) {\n+                gcCount++;\n+                if (cleanerInvoked.await(100L, TimeUnit.MILLISECONDS)) {\n@@ -71,1 +74,5 @@\n-            if (s.getAsBoolean()) return true;\n+            if (s.getAsBoolean()) {\n+                System.out.println(\"ForceGC condition met after System.gc() \" + gcCount + \" times\");\n+                return true;\n+            }\n+\n@@ -73,1 +80,3 @@\n-            try { Thread.sleep(1000); } catch (InterruptedException e) {\n+            try {\n+                Thread.sleep(100);\n+            } catch (InterruptedException e) {\n@@ -77,0 +86,2 @@\n+\n+        System.out.println(\"ForceGC condition not met after System.gc() \" + gcCount + \" times\");\n","filename":"test\/lib\/jdk\/test\/lib\/util\/ForceGC.java","additions":18,"deletions":7,"binary":false,"changes":25,"status":"modified"}]}