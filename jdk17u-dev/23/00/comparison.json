{"files":[{"patch":"@@ -264,1 +264,3 @@\n-      } else if ((STRING_DEDUP == ALWAYS_DEDUP) && ShenandoahStringDedup::is_string_candidate(obj)) {\n+      } else if ((STRING_DEDUP == ALWAYS_DEDUP) &&\n+                 ShenandoahStringDedup::is_string_candidate(obj) &&\n+                 !ShenandoahStringDedup::dedup_requested(obj)) {\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahMark.inline.hpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -34,0 +34,1 @@\n+  static inline bool dedup_requested(oop obj);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahStringDedup.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -39,0 +39,4 @@\n+bool ShenandoahStringDedup::dedup_requested(oop obj) {\n+  return java_lang_String::test_and_set_deduplication_requested(obj);\n+}\n+\n@@ -54,1 +58,2 @@\n-      return StringDedup::is_threshold_age(new_mark.age());\n+      return StringDedup::is_threshold_age(new_mark.age()) &&\n+             !dedup_requested(obj);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahStringDedup.inline.hpp","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"}]}