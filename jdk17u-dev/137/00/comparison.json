{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -565,0 +565,5 @@\n+  if (sig == BREAK_SIGNAL) {\n+    assert(!ReduceSignalUsage, \"Should not happen with -Xrs\/-XX:+ReduceSignalUsage\");\n+    return true; \/\/ ignore it\n+  }\n+\n@@ -1200,1 +1205,1 @@\n-void set_signal_handler(int sig) {\n+void set_signal_handler(int sig, bool do_check = true) {\n@@ -1244,1 +1249,1 @@\n-  do_check_signal_periodically[sig] = true;\n+  do_check_signal_periodically[sig] = do_check;\n@@ -1282,1 +1287,6 @@\n-\n+  if (!ReduceSignalUsage) {\n+    \/\/ This is just for early initialization phase. Intercepting the signal here reduces the risk\n+    \/\/ that an attach client accidentally forces HotSpot to quit prematurely. We skip the periodic\n+    \/\/ check because late initialization will overwrite it to UserHandler.\n+    set_signal_handler(BREAK_SIGNAL, false);\n+  }\n","filename":"src\/hotspot\/os\/posix\/signals_posix.cpp","additions":14,"deletions":4,"binary":false,"changes":18,"status":"modified"}]}