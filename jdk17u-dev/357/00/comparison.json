{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -552,1 +552,0 @@\n-\n@@ -554,3 +553,6 @@\n-  const char* const error_msg = c_str(errorMsg, t);\n-  if (error_msg != NULL) {\n-    log_error(jfr, system)(\"%s\",error_msg);\n+  abort(c_str(errorMsg, t));\n+}\n+\n+void JfrJavaSupport::abort(const char* error_msg, bool dump_core \/* true *\/) {\n+  if (error_msg != nullptr) {\n+    log_error(jfr, system)(\"%s\", error_msg);\n@@ -559,1 +561,1 @@\n-  vm_abort();\n+  vm_abort(dump_core);\n","filename":"src\/hotspot\/share\/jfr\/jni\/jfrJavaSupport.cpp","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2016, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2016, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -103,0 +103,1 @@\n+  static void abort(const char* error_msg, bool dump_core = true);\n","filename":"src\/hotspot\/share\/jfr\/jni\/jfrJavaSupport.hpp","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -28,0 +28,1 @@\n+#include \"jfr\/jni\/jfrJavaSupport.hpp\"\n@@ -29,1 +30,0 @@\n-\n@@ -80,0 +80,3 @@\n+    if (errno == ENOSPC) {\n+      JfrJavaSupport::abort(\"Failed to write to jfr stream because no space left on device\", false);\n+    }\n","filename":"src\/hotspot\/share\/jfr\/writers\/jfrStreamWriterHost.inline.hpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"}]}