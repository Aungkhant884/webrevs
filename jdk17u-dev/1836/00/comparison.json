{"files":[{"patch":"@@ -336,3 +336,2 @@\n-            if (getValue(dupString1) == getValue(baseString)) {\n-                throw new RuntimeException(\"Values should not match\");\n-            }\n+\n+            checkNotDeduplicated(getValue(dupString1), getValue(baseString));\n@@ -351,3 +350,2 @@\n-            if (getValue(dupString2) == getValue(baseString)) {\n-                throw new RuntimeException(\"Values should not match\");\n-            }\n+\n+            checkNotDeduplicated(getValue(dupString2), getValue(baseString));\n@@ -372,3 +370,1 @@\n-            if (beforeInternedValue == getValue(baseString)) {\n-                throw new RuntimeException(\"Values should not match\");\n-            }\n+            checkNotDeduplicated(beforeInternedValue, getValue(baseString));\n@@ -379,3 +375,2 @@\n-            if (getValue(dupString3) == getValue(baseString)) {\n-                throw new RuntimeException(\"Values should not match\");\n-            }\n+\n+            checkNotDeduplicated(dupString3, getValue(baseString));\n@@ -398,0 +393,9 @@\n+        private static void checkNotDeduplicated(Object value1, Object value2) {\n+            \/\/ Note that the following check is invalid since a GC\n+            \/\/ can run and actually deduplicate the strings.\n+            \/\/\n+            \/\/ if (value1 == value2) {\n+            \/\/     throw new RuntimeException(\"Values should not match\");\n+            \/\/ }\n+        }\n+\n","filename":"test\/hotspot\/jtreg\/gc\/stringdedup\/TestStringDeduplicationTools.java","additions":16,"deletions":12,"binary":false,"changes":28,"status":"modified"}]}