{"files":[{"patch":"@@ -151,1 +151,1 @@\n-      large_disp += index->as_jint() << shift;\n+      large_disp += ((intx)index->as_jint()) << shift;\n@@ -197,1 +197,1 @@\n-    assert(Address::offset_ok_for_immed(large_disp, 0), \"must be\");\n+    assert(Address::offset_ok_for_immed(large_disp, shift), \"failed for large_disp: \" INTPTR_FORMAT \" and shift %d\", large_disp, shift);\n@@ -207,18 +207,1 @@\n-\n-  LIR_Address* addr;\n-  if (index_opr->is_constant()) {\n-    addr = new LIR_Address(array_opr,\n-                           offset_in_bytes + (intx)(index_opr->as_jint()) * elem_size, type);\n-  } else {\n-    if (offset_in_bytes) {\n-      LIR_Opr tmp = new_pointer_register();\n-      __ add(array_opr, LIR_OprFact::intConst(offset_in_bytes), tmp);\n-      array_opr = tmp;\n-      offset_in_bytes = 0;\n-    }\n-    addr =  new LIR_Address(array_opr,\n-                            index_opr,\n-                            LIR_Address::scale(type),\n-                            offset_in_bytes, type);\n-  }\n-  return addr;\n+  return generate_address(array_opr, index_opr, shift, offset_in_bytes, type);\n","filename":"src\/hotspot\/cpu\/aarch64\/c1_LIRGenerator_aarch64.cpp","additions":3,"deletions":20,"binary":false,"changes":23,"status":"modified"}]}