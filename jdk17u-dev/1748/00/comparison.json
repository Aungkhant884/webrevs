{"files":[{"patch":"@@ -1965,1 +1965,1 @@\n-WB_ENTRY(jboolean, WB_IsJavaHeapArchiveSupported(JNIEnv* env))\n+WB_ENTRY(jboolean, WB_CanWriteJavaHeapArchive(JNIEnv* env))\n@@ -2588,1 +2588,1 @@\n-  {CC\"isJavaHeapArchiveSupported\",        CC\"()Z\",    (void*)&WB_IsJavaHeapArchiveSupported },\n+  {CC\"canWriteJavaHeapArchive\",           CC\"()Z\",    (void*)&WB_CanWriteJavaHeapArchive },\n","filename":"src\/hotspot\/share\/prims\/whitebox.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -71,1 +71,1 @@\n-    vm.cds.archived.java.heap \\\n+    vm.cds.write.archived.java.heap \\\n","filename":"test\/hotspot\/jtreg\/TEST.ROOT","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/SharedStrings.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/SharedStringsDedup.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/SharedStringsRunAuto.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/CommandLineFlagCombo.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/cacheObject\/ArchivedIntegerCacheTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/cacheObject\/ArchivedModuleComboTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/cacheObject\/ArchivedModuleCompareTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -27,1 +27,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/cacheObject\/ArchivedModuleWithCustomImageTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/cacheObject\/CheckCachedMirrorTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/cacheObject\/DifferentHeapSizes.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -29,1 +29,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/cacheObject\/DumpTimeVerifyFailure.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/cacheObject\/GCStressTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/cacheObject\/HeapFragmentationTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/cacheObject\/MirrorWithReferenceFieldsTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/cacheObject\/OpenArchiveRegion.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/cacheObject\/PrimitiveTypesTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/cacheObject\/RedefineClassTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/javaldr\/ExceptionDuringDumpAtObjectsInitPhase.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/javaldr\/GCSharedStringsDuringDump.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/javaldr\/HumongousDuringDump.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/sharedStrings\/ExerciseGC.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap & vm.hasJFR\n+ * @requires vm.cds.write.archived.java.heap & vm.hasJFR\n@@ -38,1 +38,1 @@\n- * @requires vm.cds.archived.java.heap & !vm.hasJFR\n+ * @requires vm.cds.write.archived.java.heap & !vm.hasJFR\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/sharedStrings\/FlagCombo.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -34,1 +34,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n@@ -49,1 +49,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n@@ -60,1 +60,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/sharedStrings\/IncompatibleOptions.java","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/sharedStrings\/InternSharedString.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/sharedStrings\/InvalidFileFormat.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/sharedStrings\/LargePages.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/sharedStrings\/LockSharedStrings.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/sharedStrings\/SharedStringsBasic.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/sharedStrings\/SharedStringsBasicPlus.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/sharedStrings\/SharedStringsHumongous.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/sharedStrings\/SharedStringsStress.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -28,1 +28,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/sharedStrings\/SharedStringsWbTest.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/sharedStrings\/SysDictCrash.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -29,1 +29,1 @@\n- * @requires vm.cds.archived.java.heap\n+ * @requires vm.cds.write.archived.java.heap\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/serviceability\/ReplaceCriticalClassesForSubgraphs.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -114,1 +114,1 @@\n-        map.put(\"vm.cds.archived.java.heap\", this::vmCDSForArchivedJavaHeap);\n+        map.put(\"vm.cds.write.archived.java.heap\", this::vmCDSCanWriteArchivedJavaHeap);\n@@ -389,3 +389,1 @@\n-     * Check for CDS support for archived Java heap regions.\n-     *\n-     * @return true if CDS provides support for archive Java heap regions in the VM to be tested.\n+     * @return true if this VM can write Java heap objects into the CDS archive\n@@ -393,2 +391,2 @@\n-    protected String vmCDSForArchivedJavaHeap() {\n-        return \"\" + (\"true\".equals(vmCDS()) && WB.isJavaHeapArchiveSupported());\n+    protected String vmCDSCanWriteArchivedJavaHeap() {\n+        return \"\" + (\"true\".equals(vmCDS()) && WB.canWriteJavaHeapArchive());\n","filename":"test\/jtreg-ext\/requires\/VMProps.java","additions":4,"deletions":6,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -603,1 +603,1 @@\n-  public native boolean isJavaHeapArchiveSupported();\n+  public native boolean canWriteJavaHeapArchive();\n","filename":"test\/lib\/jdk\/test\/whitebox\/WhiteBox.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}