{"files":[{"patch":"@@ -842,5 +842,1 @@\n-      if (UseCompressedClassPointers && addr->disp() == oopDesc::klass_offset_in_bytes()) {\n-        __ lwu(dest->as_register(), as_Address(from_addr));\n-      } else {\n-        __ ld(dest->as_register(), as_Address(from_addr));\n-      }\n+      __ ld(dest->as_register(), as_Address(from_addr));\n@@ -879,4 +875,0 @@\n-  } else if (type == T_ADDRESS && addr->disp() == oopDesc::klass_offset_in_bytes()) {\n-    if (UseCompressedClassPointers) {\n-      __ decode_klass_not_null(dest->as_register());\n-    }\n@@ -1541,0 +1533,17 @@\n+void LIR_Assembler::emit_load_klass(LIR_OpLoadKlass* op) {\n+  Register obj = op->obj()->as_pointer_register();\n+  Register result = op->result_opr()->as_pointer_register();\n+\n+  CodeEmitInfo* info = op->info();\n+  if (info != NULL) {\n+    add_debug_info_for_null_check_here(info);\n+  }\n+\n+  if (UseCompressedClassPointers) {\n+    __ lwu(result, Address(obj, oopDesc::klass_offset_in_bytes()));\n+    __ decode_klass_not_null(result);\n+  } else {\n+    __ ld(result, Address(obj, oopDesc::klass_offset_in_bytes()));\n+  }\n+}\n+\n","filename":"src\/hotspot\/cpu\/riscv\/c1_LIRAssembler_riscv.cpp","additions":18,"deletions":9,"binary":false,"changes":27,"status":"modified"}]}