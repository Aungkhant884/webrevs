{"files":[{"patch":"@@ -393,1 +393,1 @@\n-    if (!ik->can_be_verified_at_dumptime()) {\n+    if (ik->can_be_verified_at_dumptime()) {\n@@ -577,1 +577,1 @@\n-  return DumpSharedSpaces ? !ik->can_be_verified_at_dumptime() : !ik->is_shared_unregistered_class();\n+  return DumpSharedSpaces ? ik->can_be_verified_at_dumptime() : !ik->is_shared_unregistered_class();\n@@ -753,1 +753,1 @@\n-  if (ik->is_loaded() && !ik->is_linked() && !ik->can_be_verified_at_dumptime() &&\n+  if (ik->is_loaded() && !ik->is_linked() && ik->can_be_verified_at_dumptime() &&\n","filename":"src\/hotspot\/share\/cds\/metaspaceShared.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -1396,1 +1396,1 @@\n-      if (!k->can_be_verified_at_dumptime()) {\n+      if (k->can_be_verified_at_dumptime()) {\n@@ -1410,1 +1410,1 @@\n-  if (k->can_be_verified_at_dumptime() && k->is_linked()) {\n+  if (!k->can_be_verified_at_dumptime() && k->is_linked()) {\n","filename":"src\/hotspot\/share\/classfile\/systemDictionaryShared.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -574,1 +574,1 @@\n-    assert(klass->can_be_verified_at_dumptime(), \"only shared old classes aren't rewritten\");\n+    assert(!klass->can_be_verified_at_dumptime(), \"only shared old classes aren't rewritten\");\n","filename":"src\/hotspot\/share\/interpreter\/rewriter.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -373,1 +373,1 @@\n-  if (!_pool_holder->is_linked() && _pool_holder->is_shared_old_klass()) {\n+  if (!_pool_holder->is_linked() && !_pool_holder->verified_at_dump_time()) {\n","filename":"src\/hotspot\/share\/oops\/constantPool.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -2406,2 +2406,2 @@\n-    \/\/ Set the old class bit.\n-    set_is_shared_old_klass();\n+    \/\/ Remember this so we can avoid walking the hierarchy at runtime.\n+    set_verified_at_dump_time();\n@@ -2552,1 +2552,1 @@\n-    return true;\n+    return false;\n@@ -2554,2 +2554,2 @@\n-  if (java_super() != NULL && java_super()->can_be_verified_at_dumptime()) {\n-    return true;\n+  if (java_super() != NULL && !java_super()->can_be_verified_at_dumptime()) {\n+    return false;\n@@ -2560,2 +2560,2 @@\n-    if (interfaces->at(i)->can_be_verified_at_dumptime()) {\n-      return true;\n+    if (!interfaces->at(i)->can_be_verified_at_dumptime()) {\n+      return false;\n@@ -2564,1 +2564,1 @@\n-  return false;\n+  return true;\n","filename":"src\/hotspot\/share\/oops\/instanceKlass.cpp","additions":8,"deletions":8,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -181,1 +181,1 @@\n-    _is_shared_old_klass = 8\n+    _verified_at_dump_time = 8\n@@ -337,2 +337,2 @@\n-  void set_is_shared_old_klass() {\n-    CDS_ONLY(_shared_class_flags |= _is_shared_old_klass;)\n+  void set_verified_at_dump_time() {\n+    CDS_ONLY(_shared_class_flags |= _verified_at_dump_time;)\n@@ -340,2 +340,2 @@\n-  bool is_shared_old_klass() const {\n-    CDS_ONLY(return (_shared_class_flags & _is_shared_old_klass) != 0;)\n+  bool verified_at_dump_time() const {\n+    CDS_ONLY(return (_shared_class_flags & _verified_at_dump_time) != 0;)\n","filename":"src\/hotspot\/share\/oops\/klass.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -54,1 +54,1 @@\n-  return _klass->is_shared() && !MetaspaceShared::remapped_readwrite() && !_klass->is_shared_old_klass();\n+  return _klass->is_shared() && !MetaspaceShared::remapped_readwrite() && _klass->verified_at_dump_time();\n@@ -1097,2 +1097,2 @@\n-     !m->method_holder()->can_be_verified_at_dumptime() &&\n-     !klass->can_be_verified_at_dumptime()) {\n+     m->method_holder()->verified_at_dump_time() &&\n+     klass->verified_at_dump_time()) {\n","filename":"src\/hotspot\/share\/oops\/klassVtable.cpp","additions":3,"deletions":3,"binary":false,"changes":6,"status":"modified"},{"patch":"@@ -412,1 +412,1 @@\n-  if (is_shared() && !MetaspaceShared::remapped_readwrite() && !method_holder()->is_shared_old_klass()) {\n+  if (is_shared() && !MetaspaceShared::remapped_readwrite() && method_holder()->verified_at_dump_time()) {\n@@ -423,1 +423,1 @@\n-  if (is_shared() && !MetaspaceShared::remapped_readwrite() && !method_holder()->is_shared_old_klass()) {\n+  if (is_shared() && !MetaspaceShared::remapped_readwrite() && method_holder()->verified_at_dump_time()) {\n","filename":"src\/hotspot\/share\/oops\/method.cpp","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"}]}