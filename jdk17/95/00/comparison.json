{"files":[{"patch":"@@ -31,6 +31,1 @@\n-Semaphore AsyncLogWriter::_sem(0);\n-Semaphore AsyncLogWriter::_io_sem(1);\n-\n-class AsyncLogLocker : public StackObj {\n- private:\n-  static Semaphore _lock;\n+class AsyncLogWriter::AsyncLogLocker : public StackObj {\n@@ -39,1 +34,2 @@\n-    _lock.wait();\n+    assert(_instance != nullptr, \"AsyncLogWriter::_lock is unavailable\");\n+    _instance->_lock.wait();\n@@ -43,1 +39,1 @@\n-    _lock.signal();\n+    _instance->_lock.signal();\n@@ -47,2 +43,0 @@\n-Semaphore AsyncLogLocker::_lock(1);\n-\n@@ -67,1 +61,1 @@\n-    AsyncLogLocker lock;\n+    AsyncLogLocker locker;\n@@ -75,1 +69,1 @@\n-  AsyncLogLocker lock;\n+  AsyncLogLocker locker;\n@@ -84,1 +78,2 @@\n-  : _initialized(false),\n+  : _lock(1), _sem(0), _io_sem(1),\n+    _initialized(false),\n@@ -128,1 +123,1 @@\n-    AsyncLogLocker lock;\n+    AsyncLogLocker locker;\n","filename":"src\/hotspot\/share\/logging\/logAsyncWriter.cpp","additions":9,"deletions":14,"binary":false,"changes":23,"status":"modified"},{"patch":"@@ -136,0 +136,2 @@\n+  class AsyncLogLocker;\n+\n@@ -137,0 +139,2 @@\n+  \/\/ _lock(1) denotes a critional region.\n+  Semaphore _lock;\n@@ -139,1 +143,1 @@\n-  static Semaphore _sem;\n+  Semaphore _sem;\n@@ -141,1 +145,1 @@\n-  static Semaphore _io_sem;\n+  Semaphore _io_sem;\n","filename":"src\/hotspot\/share\/logging\/logAsyncWriter.hpp","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"}]}