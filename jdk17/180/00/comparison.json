{"files":[{"patch":"@@ -36,0 +36,1 @@\n+import jdk.test.lib.JDKToolFinder;\n@@ -38,0 +39,1 @@\n+import jdk.test.lib.process.ProcessTools;\n@@ -56,0 +58,1 @@\n+    private static final long timeoutMillis = 50000;\n@@ -58,1 +61,0 @@\n-\n@@ -108,2 +110,9 @@\n-            String[] params = buildParameters(pathToGCRoots, name, recording);\n-            OutputAnalyzer output = JcmdHelper.jcmd(params);\n+            List<String> params = buildParameters(pathToGCRoots, name, recording);\n+            System.out.println(params);\n+            OutputAnalyzer output = ProcessTools.executeProcess(new ProcessBuilder(params));\n+            System.out.println(\"---------------- stdout ----------------\");\n+            System.out.println(output.getStdout());\n+            System.out.println(\"---------------- stderr ----------------\");\n+            System.out.println(output.getStderr());\n+            System.out.println(\"----------------------------------------\");\n+            System.out.println();\n@@ -158,1 +167,1 @@\n-    private static String[] buildParameters(Boolean pathToGCRoots, String name, File recording) {\n+    private static List<String> buildParameters(Boolean pathToGCRoots, String name, File recording) {\n@@ -160,0 +169,3 @@\n+        params.add(JDKToolFinder.getJDKTool(\"jcmd\"));\n+        params.add(\"-J-Dsun.tools.attach.attachTimeout=\" + timeoutMillis);\n+        params.add(String.valueOf(ProcessHandle.current().pid()));\n@@ -168,1 +180,1 @@\n-        return params.toArray(new String[0]);\n+        return params;\n","filename":"test\/jdk\/jdk\/jfr\/jcmd\/TestJcmdDump.java","additions":17,"deletions":5,"binary":false,"changes":22,"status":"modified"}]}