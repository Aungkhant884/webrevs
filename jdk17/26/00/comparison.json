{"files":[{"patch":"@@ -434,0 +434,1 @@\n+            boolean hasDefault = false;\n@@ -480,1 +481,3 @@\n-                        } else if (hasTotalPattern && c == lastCase && p.isPattern()) {\n+                            hasDefault = true;\n+                        } else if (hasTotalPattern && !hasDefault &&\n+                                   c == lastCase && p.isPattern()) {\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/TransPatterns.java","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -30,1 +30,1 @@\n- * @bug 8262891\n+ * @bug 8262891 8268333\n@@ -49,0 +49,2 @@\n+        runDefaultTest(this::testDefaultDoesNotDominateStatement);\n+        runDefaultTest(this::testDefaultDoesNotDominateExpression);\n@@ -84,0 +86,7 @@\n+    void runDefaultTest(Function<Object, String> mapper) {\n+        assertEquals(\"default\", mapper.apply(new int[0]));\n+        assertEquals(\"str6\", mapper.apply(\"string\"));\n+        assertEquals(\"default\", mapper.apply(1));\n+        assertEquals(\"default\", mapper.apply(1.0));\n+    }\n+\n@@ -175,0 +184,16 @@\n+    String testDefaultDoesNotDominateStatement(Object o) {\n+        String res;\n+        switch (o) {\n+            default -> res = \"default\";\n+            case String str -> res = \"str\" + str.length();\n+        }\n+        return res;\n+    }\n+\n+    String testDefaultDoesNotDominateExpression(Object o) {\n+        return switch (o) {\n+            case default -> \"default\";\n+            case String str -> \"str\" + str.length();\n+        };\n+    }\n+\n","filename":"test\/langtools\/tools\/javac\/patterns\/Switches.java","additions":26,"deletions":1,"binary":false,"changes":27,"status":"modified"}]}