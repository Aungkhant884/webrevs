{"files":[{"patch":"@@ -124,3 +124,2 @@\n-static void store_compressed_element(traceid id, const Klass* klass, u1* pos) {\n-  assert(can_compress_element(id), \"invariant\");\n-  JfrEpochQueueNarrowKlassElement* const element = new (pos) JfrEpochQueueNarrowKlassElement();\n+template <typename T>\n+static inline void store_traceid(T* element, traceid id, bool uncompressed) {\n@@ -130,1 +129,7 @@\n-  element->id = id;\n+  element->id = uncompressed ? id | UNCOMPRESSED : id;\n+}\n+\n+static void store_compressed_element(traceid id, const Klass* klass, u1* pos) {\n+  assert(can_compress_element(id), \"invariant\");\n+  JfrEpochQueueNarrowKlassElement* const element = new (pos) JfrEpochQueueNarrowKlassElement();\n+  store_traceid(element, id, false);\n@@ -136,1 +141,1 @@\n-  element->id = id | UNCOMPRESSED;\n+  store_traceid(element, id, true);\n","filename":"src\/hotspot\/share\/jfr\/recorder\/checkpoint\/types\/traceid\/jfrTraceIdKlassQueue.cpp","additions":10,"deletions":5,"binary":false,"changes":15,"status":"modified"}]}