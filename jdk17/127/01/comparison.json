{"files":[{"patch":"@@ -513,1 +513,0 @@\n-           String str = null;\n@@ -515,1 +514,1 @@\n-                str = super.getAtIndex(part, index);\n+                return getEchoString(super.getAtIndex(part, index));\n@@ -519,3 +518,2 @@\n-                char[] password = getPassword();\n-                if (password == null ||\n-                    index < 0 || index >= password.length) {\n+                int length = getDocument().getLength();\n+                if (index < 0 || index >= length) {\n@@ -524,1 +522,3 @@\n-                str = new String(password);\n+                char[] password = new char[length];\n+                Arrays.fill(password, getEchoChar());\n+                return new String(password);\n@@ -526,1 +526,0 @@\n-            return getEchoString(str);\n@@ -547,2 +546,1 @@\n-                String str = super.getAfterIndex(part, index);\n-                return getEchoString(str);\n+                return getEchoString(super.getAfterIndex(part, index));\n@@ -574,2 +572,1 @@\n-                String str = super.getBeforeIndex(part, index);\n-                return getEchoString(str);\n+                return getEchoString(super.getBeforeIndex(part, index));\n@@ -630,3 +627,2 @@\n-                char[] password = getPassword();\n-                if (password == null ||\n-                    index < 0 || index >= password.length) {\n+                int length = getDocument().getLength();\n+                if (index < 0 || index >= length) {\n@@ -635,0 +631,2 @@\n+                char[] password = new char[length];\n+                Arrays.fill(password, getEchoChar());\n@@ -636,2 +634,1 @@\n-                return new AccessibleTextSequence(0, password.length - 1,\n-                                                  getEchoString(text));\n+                return new AccessibleTextSequence(0, password.length - 1, text);\n","filename":"src\/java.desktop\/share\/classes\/javax\/swing\/JPasswordField.java","additions":13,"deletions":16,"binary":false,"changes":29,"status":"modified"}]}