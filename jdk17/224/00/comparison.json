{"files":[{"patch":"@@ -667,1 +667,5 @@\n-            Set<Symbol> constants = tree.patternSwitch ? new HashSet<>() : null;\n+            boolean exhaustiveSwitch = tree.patternSwitch ||\n+                                       tree.cases.stream()\n+                                                 .flatMap(c -> c.labels.stream())\n+                                                 .anyMatch(l -> TreeInfo.isNull(l));\n+            Set<Symbol> constants = exhaustiveSwitch ? new HashSet<>() : null;\n@@ -689,1 +693,1 @@\n-            if (!tree.hasTotalPattern && tree.patternSwitch &&\n+            if (!tree.hasTotalPattern && exhaustiveSwitch &&\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Flow.java","additions":6,"deletions":2,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -188,0 +188,5 @@\n+    void exhaustiveAndNull(String s) {\n+        switch (s) {\n+            case null: break;\n+        }\n+    }\n","filename":"test\/langtools\/tools\/javac\/patterns\/SwitchErrors.java","additions":5,"deletions":0,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -45,0 +45,1 @@\n+SwitchErrors.java:189:9: compiler.err.not.exhaustive.statement\n@@ -47,1 +48,1 @@\n-44 errors\n+45 errors\n","filename":"test\/langtools\/tools\/javac\/patterns\/SwitchErrors.out","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}