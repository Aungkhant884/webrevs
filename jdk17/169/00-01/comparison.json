{"files":[{"patch":"@@ -1151,0 +1151,1 @@\n+          ciKlass* sig_klass = signature->accessing_klass();\n@@ -1152,1 +1153,1 @@\n-          const Type*       sig_type = TypeOopPtr::make_from_klass(signature->accessing_klass());\n+          const Type*       sig_type = TypeOopPtr::make_from_klass(sig_klass);\n@@ -1154,4 +1155,4 @@\n-            \/\/ Keep the speculative part, but disallow it to empty the type\n-            const Type* recv_type = arg_type->join_speculative(sig_type);\n-            const Type* cast_type = recv_type->empty() ? sig_type : recv_type;\n-            Node* cast_obj = gvn.transform(new CheckCastPPNode(kit.control(), arg, cast_type));\n+            \/\/ Keep the speculative part, but do not join with interfaces\n+            const Type* recv_type = sig_klass->is_interface() ?\n+                    sig_type : arg_type->join_speculative(sig_type);\n+            Node* cast_obj = gvn.transform(new CheckCastPPNode(kit.control(), arg, recv_type));\n@@ -1166,0 +1167,1 @@\n+            ciKlass* sig_klass = t->as_klass();\n@@ -1167,1 +1169,1 @@\n-            const Type*       sig_type = TypeOopPtr::make_from_klass(t->as_klass());\n+            const Type*       sig_type = TypeOopPtr::make_from_klass(sig_klass);\n@@ -1169,4 +1171,4 @@\n-              \/\/ Keep the speculative part, but disallow it to empty the type\n-              const Type* narrowed_arg_type = arg_type->join_speculative(sig_type);\n-              const Type* cast_type = narrowed_arg_type->empty() ? sig_type : narrowed_arg_type;\n-              Node* cast_obj = gvn.transform(new CheckCastPPNode(kit.control(), arg, cast_type));\n+              \/\/ Keep the speculative part, but do not join with interfaces\n+              const Type* narrowed_arg_type = sig_klass->is_interface() ?\n+                      sig_type : arg_type->join_speculative(sig_type);\n+              Node* cast_obj = gvn.transform(new CheckCastPPNode(kit.control(), arg, narrowed_arg_type));\n","filename":"src\/hotspot\/share\/opto\/callGenerator.cpp","additions":12,"deletions":10,"binary":false,"changes":22,"status":"modified"}]}