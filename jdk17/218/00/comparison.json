{"files":[{"patch":"@@ -72,6 +72,5 @@\n-  return unloaded_thread_id_set != NULL && JfrPredicate<traceid, compare_traceid>::test(unloaded_thread_id_set, tid);\n-}\n-\n-static bool add(GrowableArray<traceid>* set, traceid id) {\n-  assert(set != NULL, \"invariant\");\n-  return JfrMutablePredicate<traceid, compare_traceid>::test(set, id);\n+  if (unloaded_thread_id_set == NULL) {\n+    return false;\n+  }\n+  ThreadIdExclusiveAccess lock;\n+  return JfrPredicate<traceid, compare_traceid>::test(unloaded_thread_id_set, tid);\n@@ -85,1 +84,1 @@\n-  add(unloaded_thread_id_set, tid);\n+  JfrMutablePredicate<traceid, compare_traceid>::test(unloaded_thread_id_set, tid);\n","filename":"src\/hotspot\/share\/jfr\/leakprofiler\/checkpoint\/objectSampleCheckpoint.cpp","additions":6,"deletions":7,"binary":false,"changes":13,"status":"modified"}]}