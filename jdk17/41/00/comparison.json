{"files":[{"patch":"@@ -2395,0 +2395,4 @@\n+                    if (inits.isReset()) {\n+                        inits.assign(initsWhenTrue);\n+                        uninits.assign(uninitsWhenTrue);\n+                    }\n","filename":"src\/jdk.compiler\/share\/classes\/com\/sun\/tools\/javac\/comp\/Flow.java","additions":4,"deletions":0,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2017, 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2017, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -26,1 +26,1 @@\n- * @bug 8262891\n+ * @bug 8262891 8268663\n@@ -46,0 +46,3 @@\n+        runIfTrue(this::typeGuardIfTrueIfStatement);\n+        runIfTrue(this::typeGuardIfTrueSwitchExpression);\n+        runIfTrue(this::typeGuardIfTrueSwitchStatement);\n@@ -55,0 +58,5 @@\n+    void runIfTrue(Function<Object, String> convert) {\n+        assertEquals(\"true\", convert.apply(0));\n+        assertEquals(\"any\", convert.apply(\"\"));\n+    }\n+\n@@ -87,0 +95,25 @@\n+    String typeGuardIfTrueSwitchStatement(Object o) {\n+        Object o2 = \"\";\n+        switch (o) {\n+            case Integer i && i == 0 && i < 1 && o2 instanceof String s: o = s + String.valueOf(i); return \"true\";\n+            case Object x: return \"any\";\n+        }\n+    }\n+\n+    String typeGuardIfTrueSwitchExpression(Object o) {\n+        Object o2 = \"\";\n+        return switch (o) {\n+            case Integer i && i == 0 && i < 1 && o2 instanceof String s: o = s + String.valueOf(i); yield \"true\";\n+            case Object x: yield \"any\";\n+        };\n+    }\n+\n+    String typeGuardIfTrueIfStatement(Object o) {\n+        Object o2 = \"\";\n+        if (o != null && o instanceof (Integer i && i == 0 && i < 1) && (o = i) != null && o2 instanceof String s) {\n+            return s != null ? \"true\" : null;\n+        } else {\n+            return \"any\";\n+        }\n+    }\n+\n","filename":"test\/langtools\/tools\/javac\/patterns\/Guards.java","additions":35,"deletions":2,"binary":false,"changes":37,"status":"modified"}]}