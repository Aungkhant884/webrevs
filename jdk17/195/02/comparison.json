{"files":[{"patch":"@@ -136,1 +136,0 @@\n-     * @param member the member to write parameter for.\n@@ -138,0 +137,1 @@\n+     * @param paramType the type of the parameter.\n@@ -141,2 +141,2 @@\n-    protected void addParam(ExecutableElement member, VariableElement param, TypeMirror paramType,\n-            boolean isVarArg, Content tree) {\n+    protected void addParam(VariableElement param, TypeMirror paramType, boolean isVarArg,\n+                            Content tree) {\n@@ -252,1 +252,1 @@\n-                addParam(member, param, paramType,\n+                addParam(param, paramType,\n@@ -271,1 +271,1 @@\n-            addParam(member, parameters.get(i), instMeth.getParameterTypes().get(i),\n+            addParam(parameters.get(i), instMeth.getParameterTypes().get(i),\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/AbstractExecutableMemberWriter.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -1078,7 +1078,5 @@\n-                if (!refClass.getTypeParameters().isEmpty() && seeText.contains(\"<\")) {\n-                    \/\/ If this is a generic type link try to use the TypeMirror representation.\n-                    TypeMirror refType = ch.getReferencedType(see);\n-                    if (refType != null) {\n-                        return plainOrCode(isLinkPlain, getLink(\n-                                new HtmlLinkInfo(configuration, HtmlLinkInfo.Kind.DEFAULT, refType)));\n-                    }\n+                TypeMirror referencedType = ch.getReferencedType(see);\n+                if (utils.isGenericType(referencedType)) {\n+                    \/\/ This is a generic type link, use the TypeMirror representation.\n+                    return plainOrCode(isLinkPlain, getLink(\n+                            new HtmlLinkInfo(configuration, HtmlLinkInfo.Kind.DEFAULT, referencedType)));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlDocletWriter.java","additions":5,"deletions":7,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -110,2 +110,1 @@\n-                if (linkInfo.linkToSelf ||\n-                                !(docPaths.forName(typeElement)).equals(m_writer.filename)) {\n+                if (linkInfo.linkToSelf || typeElement != m_writer.getCurrentPageElement()) {\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/formats\/html\/HtmlLinkFactory.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -195,0 +195,3 @@\n+        \/\/ Workaround for JDK-8269706\n+        if (path == null || dcTree == null || rtree == null)\n+            return null;\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/CommentHelper.java","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -976,0 +976,15 @@\n+    \/**\n+     * Returns true if {@code type} or any of its enclosing types has non-empty type arguments.\n+     * @param type the type\n+     * @return {@code true} if type arguments were found\n+     *\/\n+    public boolean isGenericType(TypeMirror type) {\n+        while (type instanceof DeclaredType dt) {\n+            if (!dt.getTypeArguments().isEmpty()) {\n+                return true;\n+            }\n+            type = dt.getEnclosingType();\n+        }\n+        return false;\n+    }\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/Utils.java","additions":15,"deletions":0,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -169,0 +169,10 @@\n+                    TypeMirror enc = type.getEnclosingType();\n+                    if (enc instanceof DeclaredType dt && utils.isGenericType(dt)) {\n+                        \/\/ If an enclosing type has type parameters render them as separate links as\n+                        \/\/ otherwise this information is lost. On the other hand, plain enclosing types\n+                        \/\/ are not linked separately as they are easy to reach from the nested type.\n+                        setEnclosingTypeLinkInfo(linkInfo, dt);\n+                        visitDeclared(dt, linkInfo);\n+                        link.add(\".\");\n+                        setEnclosingTypeLinkInfo(linkInfo, type);\n+                    }\n@@ -198,0 +208,6 @@\n+    private void setEnclosingTypeLinkInfo(LinkInfo linkinfo, DeclaredType enclosing) {\n+        linkinfo.typeElement = null;\n+        linkinfo.label = null;\n+        linkinfo.type = enclosing;\n+    }\n+\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/links\/LinkFactory.java","additions":16,"deletions":0,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -30,0 +30,1 @@\n+import javax.lang.model.type.DeclaredType;\n@@ -34,0 +35,1 @@\n+import jdk.javadoc.internal.doclets.toolkit.util.Utils;\n@@ -128,1 +130,5 @@\n-            tlabel.add(configuration.utils.getSimpleName(typeElement));\n+            Utils utils = configuration.utils;\n+            tlabel.add(type instanceof DeclaredType dt && utils.isGenericType(dt.getEnclosingType())\n+                    \/\/ If enclosing type is rendered as separate links only use own class name\n+                    ? typeElement.getSimpleName().toString()\n+                    : configuration.utils.getSimpleName(typeElement));\n","filename":"src\/jdk.javadoc\/share\/classes\/jdk\/javadoc\/internal\/doclets\/toolkit\/util\/links\/LinkInfo.java","additions":7,"deletions":1,"binary":false,"changes":8,"status":"modified"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug     8177280 8262992\n+ * @bug     8177280 8262992 8259499\n@@ -121,0 +121,34 @@\n+        checkOutput(\"pkg1\/A.Inner.html\", true,\n+                \"\"\"\n+                    <dl class=\"notes\">\n+                    <dt>See Also:<\/dt>\n+                    <dd>\n+                    <ul class=\"see-list-long\">\n+                    <li><code><a href=\"A.html\" title=\"class in pkg1\">A<\/a>&lt;<a href=\"http:\/\/exampl\\\n+                    e.com\/docs\/api\/java.base\/java\/lang\/String.html\" title=\"class or interface in jav\\\n+                    a.lang\" class=\"external-link\">String<\/a>,<wbr><a href=\"http:\/\/example.com\/docs\/a\\\n+                    pi\/java.base\/java\/lang\/RuntimeException.html\" title=\"class or interface in java.\\\n+                    lang\" class=\"external-link\">RuntimeException<\/a>&gt;.<a href=\"A.Inner.html\" titl\\\n+                    e=\"class in pkg1\">Inner<\/a><\/code><\/li>\n+                    <li><code><a href=\"A.html\" title=\"class in pkg1\">A<\/a>&lt;<a href=\"A.html\" title\\\n+                    =\"class in pkg1\">A<\/a>&lt;<a href=\"http:\/\/example.com\/docs\/api\/java.base\/java\/la\\\n+                    ng\/String.html\" title=\"class or interface in java.lang\" class=\"external-link\">St\\\n+                    ring<\/a>,<wbr><a href=\"http:\/\/example.com\/docs\/api\/java.base\/java\/lang\/RuntimeEx\\\n+                    ception.html\" title=\"class or interface in java.lang\" class=\"external-link\">Runt\\\n+                    imeException<\/a>&gt;.<a href=\"A.Inner.html\" title=\"class in pkg1\">Inner<\/a>,<wbr\\\n+                    ><a href=\"A.SomeException.html\" title=\"class in pkg1\">A.SomeException<\/a>&gt;<\/c\\\n+                    ode><\/li>\n+                    <\/ul>\n+                    <\/dd>\n+                    <\/dl>\"\"\");\n+\n+        checkOutput(\"pkg1\/C.html\", true,\n+                \"\"\"\n+                    Description copied from class:&nbsp;<code><a href=\"A.html#overriddenMethod()\">A<\\\n+                    \/a><\/code><\/span><\/div>\n+                    <div class=\"block\">Here's a generic link: <code><a href=\"A.html\" title=\"class in\\\n+                     pkg1\">A<\/a>&lt;<a href=\"http:\/\/example.com\/docs\/api\/java.base\/java\/lang\/Object.\\\n+                    html\" title=\"class or interface in java.lang\" class=\"external-link\">Object<\/a>,<\\\n+                    wbr><a href=\"http:\/\/example.com\/docs\/api\/java.base\/java\/lang\/RuntimeException.ht\\\n+                    ml\" title=\"class or interface in java.lang\" class=\"external-link\">RuntimeExcepti\\\n+                    on<\/a>&gt;.<a href=\"A.Inner.html\" title=\"class in pkg1\">Inner<\/a>\"\"\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testGenericTypeLink\/TestGenericTypeLink.java","additions":35,"deletions":1,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2020, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -63,0 +63,10 @@\n+    \/**\n+     * Here's a generic link: {@link A<Object, RuntimeException>.Inner}\n+     *\/\n+    public void overriddenMethod() {}\n+\n+    \/**\n+     * @see A<String, java.lang.RuntimeException>.Inner\n+     * @see A<A<String, java.lang.RuntimeException>.Inner, A.SomeException>\n+     *\/\n+    class Inner {}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testGenericTypeLink\/pkg1\/A.java","additions":11,"deletions":1,"binary":false,"changes":12,"status":"modified"},{"patch":"@@ -0,0 +1,33 @@\n+\/*\n+ * Copyright (c) 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n+ *\n+ * This code is free software; you can redistribute it and\/or modify it\n+ * under the terms of the GNU General Public License version 2 only, as\n+ * published by the Free Software Foundation.\n+ *\n+ * This code is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+ * version 2 for more details (a copy is included in the LICENSE file that\n+ * accompanied this code).\n+ *\n+ * You should have received a copy of the GNU General Public License version\n+ * 2 along with this work; if not, write to the Free Software Foundation,\n+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n+ *\n+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA\n+ * or visit www.oracle.com if you need additional information or have any\n+ * questions.\n+ *\/\n+\n+package pkg1;\n+\n+import java.util.Map;\n+\n+public class C<T, E extends Exception> extends A {\n+\n+    @Override\n+    public void overriddenMethod() {}\n+\n+}\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testGenericTypeLink\/pkg1\/C.java","additions":33,"deletions":0,"binary":false,"changes":33,"status":"added"},{"patch":"@@ -26,1 +26,1 @@\n- * @bug      8214126 8241470\n+ * @bug      8214126 8241470 8259499\n@@ -126,1 +126,26 @@\n-                    <div class=\"block\">Generic method with eight type args and annotation.<\/div>\"\"\");\n+                    <div class=\"block\">Generic method with eight type args and annotation.<\/div>\"\"\",\n+                \"\"\"\n+                    <div class=\"member-signature\"><span class=\"modifiers\">public<\/span>&nbsp;<span c\\\n+                    lass=\"return-type\"><a href=\"C.Generic.html\" title=\"class in pkg\">C.Generic<\/a>&l\\\n+                    t;java.lang.Integer&gt;.<a href=\"C.Generic.Inner.html\" title=\"class in pkg\">Inne\\\n+                    r<\/a><\/span>&nbsp;<span class=\"element-name\">nestedGeneric1<\/span><wbr><span cla\\\n+                    ss=\"parameters\">(<a href=\"C.Generic.html\" title=\"class in pkg\">C.Generic<\/a>&lt;\\\n+                    java.lang.Integer&gt;.<a href=\"C.Generic.Inner.html\" title=\"class in pkg\">Inner<\\\n+                    \/a>&nbsp;i,\n+                     <a href=\"C.Generic.html\" title=\"class in pkg\">C.Generic<\/a>&lt;<a href=\"C.html\"\\\n+                     title=\"class in pkg\">C<\/a>&gt;.<a href=\"C.Generic.Inner.html\" title=\"class in p\\\n+                    kg\">Inner<\/a>&nbsp;j)<\/span><\/div>\"\"\",\n+                \"\"\"\n+                    <div class=\"member-signature\"><span class=\"modifiers\">public<\/span>&nbsp;<span c\\\n+                    lass=\"return-type\"><a href=\"C.Generic.html\" title=\"class in pkg\">C.Generic<\/a>&l\\\n+                    t;<a href=\"C.F0.html\" title=\"interface in pkg\">C.F0<\/a>&lt;<a href=\"C.html\" titl\\\n+                    e=\"class in pkg\">C<\/a>&gt;&gt;.<a href=\"C.Generic.Inner.html\" title=\"class in pk\\\n+                    g\">Inner<\/a>.<a href=\"C.Generic.Inner.Foo.html\" title=\"class in pkg\">Foo<\/a><\/sp\\\n+                    an>&nbsp;<span class=\"element-name\">nestedGeneric2<\/span><wbr><span class=\"param\\\n+                    eters\">(<a href=\"C.Generic.html\" title=\"class in pkg\">C.Generic<\/a>&lt;java.lang\\\n+                    .Integer&gt;.<a href=\"C.Generic.Inner.html\" title=\"class in pkg\">Inner<\/a>.<a hr\\\n+                    ef=\"C.Generic.Inner.Foo.html\" title=\"class in pkg\">Foo<\/a>&nbsp;f,\n+                     <a href=\"C.Generic.html\" title=\"class in pkg\">C.Generic<\/a>&lt;<a href=\"C.F0.ht\\\n+                    ml\" title=\"interface in pkg\">C.F0<\/a>&lt;<a href=\"C.html\" title=\"class in pkg\">C\\\n+                    <\/a>&gt;&gt;.<a href=\"C.Generic.Inner.html\" title=\"class in pkg\">Inner<\/a>.<a hr\\\n+                    ef=\"C.Generic.Inner.Foo.html\" title=\"class in pkg\">Foo<\/a>&nbsp;g)<\/span><\/div>\"\"\");\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testMethodSignature\/TestMethodSignature.java","additions":27,"deletions":2,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2019, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2019, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -159,0 +159,29 @@\n+\n+    \/**\n+     * Inner classes with type arguments in enclosing classes.\n+     *\n+     * @param i param i\n+     * @param j param j\n+     * @return return value\n+     *\/\n+    public Generic<Integer>.Inner nestedGeneric1(Generic<Integer>.Inner i, Generic<C>.Inner j) { return i; }\n+\n+    \/**\n+     * Inner classes with type arguments in enclosing classes.\n+     *\n+     * @param f param f\n+     * @param g param g\n+     * @return return value\n+     *\/\n+    public Generic<C.F0<C>>.Inner.Foo nestedGeneric2(Generic<Integer>.Inner.Foo f, Generic<C.F0<C>>.Inner.Foo g) { return g; }\n+\n+    \/**\n+     * Generic class with multiple inner classes.\n+     * @param <T> type parameter\n+     *\/\n+    public static class Generic<T> {\n+        public class Inner {\n+            T data;\n+            public class Foo {}\n+        }\n+    }\n","filename":"test\/langtools\/jdk\/javadoc\/doclet\/testMethodSignature\/pkg\/C.java","additions":30,"deletions":1,"binary":false,"changes":31,"status":"modified"}]}