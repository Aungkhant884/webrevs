{"files":[{"patch":"@@ -56,1 +56,1 @@\n- * @LastModified: May 2021\n+ * @LastModified: June 2021\n@@ -1896,4 +1896,0 @@\n-        \/\/ process the attributes now, because after this SAX call they might be gone\n-        if (atts != null)\n-            addAttributes(atts);\n-\n@@ -1908,0 +1904,4 @@\n+        \/\/ process the attributes now, because after this SAX call they might be gone\n+        if (atts != null)\n+            addAttributes(atts);\n+\n","filename":"src\/java.xml\/share\/classes\/com\/sun\/org\/apache\/xml\/internal\/serializer\/ToStream.java","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -36,2 +36,0 @@\n-import java.nio.file.Files;\n-import java.nio.file.Paths;\n@@ -69,1 +67,1 @@\n- * @bug 6439439 8087303 8174025 8223291 8249867 8261209 8260858\n+ * @bug 6439439 8087303 8174025 8223291 8249867 8261209 8260858 8265073\n@@ -183,0 +181,48 @@\n+    private final String xml1 = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\"\n+            + \"<a><b>element b<\/b><c>element c<\/c><d xml:space=\\\"preserve\\\">TRUE<\/d><e>test<\/e><\/a>\";\n+    private final String expected1 = \"<a>\\n\"\n+            + \"    <b>element b<\/b>\\n\"\n+            + \"    <c>element c<\/c>\\n\"\n+            + \"    <d xml:space=\\\"preserve\\\">TRUE<\/d>\\n\"\n+            + \"    <e>test<\/e>\\n\"\n+            + \"<\/a>\\n\";\n+\n+    private final String xml2 = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\"\n+            + \"<l0><l1><l2 xml:space=\\\"preserve\\\">level 2<\/l2> level 1 <l2>level 2<\/l2><\/l1>\"\n+            + \"<l1 xml:space=\\\"preserve\\\"><l2>level 2<\/l2> level 1 <l2>level 2<\/l2><\/l1><\/l0>\";\n+    private final String expected2 = \"<l0>\\n\"\n+            + \"    <l1>\\n\"\n+            + \"        <l2 xml:space=\\\"preserve\\\">level 2<\/l2>\\n\"\n+            + \"         level 1 \\n\"\n+            + \"        <l2>level 2<\/l2>\\n\"\n+            + \"    <\/l1>\\n\"\n+            + \"    <l1 xml:space=\\\"preserve\\\"><l2>level 2<\/l2> level 1 <l2>level 2<\/l2><\/l1>\\n\"\n+            + \"<\/l0>\\n\";\n+\n+    \/*\n+     * Bug: 8265073\n+     * source and expected output\n+     *\/\n+    @DataProvider\n+    public Object[][] preserveSpace() {\n+        return new Object[][]{\n+            {xml1, expected1},\n+            {xml2, expected2},\n+        };\n+    }\n+\n+    \/**\n+     * Bug: 8265073\n+     * Verifies that the scope of the preserve attribute is applied properly\n+     * within the relevant elements.\n+     * @param xml the source\n+     * @param expected the expected result\n+     * @throws Exception if the assertion fails or an error occurs in the\n+     * transform process\n+     *\/\n+    @Test(dataProvider = \"preserveSpace\")\n+    public void test(String xml, String expected) throws Exception {\n+        String result = transform(null, xml, true, true, false, false, false);\n+        Assert.assertEquals(result.replaceAll(\"\\r\\n\", \"\\n\"), expected);\n+    }\n+\n","filename":"test\/jaxp\/javax\/xml\/jaxp\/unittest\/common\/prettyprint\/PrettyPrintTest.java","additions":49,"deletions":3,"binary":false,"changes":52,"status":"modified"}]}