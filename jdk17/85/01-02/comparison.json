{"files":[{"patch":"@@ -655,3 +655,5 @@\n-                    \/\/ The static initialization of the class or constructor may create a race\n-                    \/\/ if either calls Config.setSerialFilterFactory; the command line configured\n-                    \/\/ Class should not be overridden.\n+                    \/\/ Cause Config.setSerialFilterFactory to throw {@link IllegalStateException}\n+                    \/\/ if Config.setSerialFilterFactory is called as a side effect of the\n+                    \/\/ static initialization of the class or constructor.\n+                    filterFactoryNoReplace.set(true);\n+\n@@ -661,1 +663,1 @@\n-                    BinaryOperator<ObjectInputFilter> f =\n+                    BinaryOperator<ObjectInputFilter> factory =\n@@ -664,8 +666,0 @@\n-                    if (serialFilterFactory != null) {\n-                        \/\/ Init cycle if Config.setSerialFilterFactory called from class initialization\n-                        configLog.log(ERROR,\n-                                \"FilterFactory provided on the command line can not be overridden\");\n-                        \/\/ Do not continue if configuration not initialized\n-                        throw new ExceptionInInitializerError(\n-                                \"FilterFactory provided on the command line can not be overridden\");\n-                    }\n@@ -674,2 +668,1 @@\n-                    serialFilterFactory = f;\n-                    filterFactoryNoReplace.set(true);\n+                    serialFilterFactory = factory;\n","filename":"src\/java.base\/share\/classes\/java\/io\/ObjectInputFilter.java","additions":7,"deletions":14,"binary":false,"changes":21,"status":"modified"}]}