{"files":[{"patch":"@@ -2890,1 +2890,0 @@\n-  effect(TEMP_DEF dst);\n@@ -2906,1 +2905,0 @@\n-  effect(TEMP_DEF dst);\n@@ -2923,1 +2921,0 @@\n-  effect(TEMP_DEF dst);\n@@ -2991,1 +2988,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp);\n+  effect(TEMP tmp);\n@@ -3009,1 +3006,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp);\n+  effect(TEMP tmp);\n@@ -3028,1 +3025,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp);\n+  effect(TEMP tmp);\n@@ -3104,1 +3101,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp);\n+  effect(TEMP tmp);\n@@ -3122,1 +3119,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp);\n+  effect(TEMP tmp);\n@@ -3278,1 +3275,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp);\n+  effect(TEMP tmp);\n@@ -3298,1 +3295,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp);\n+  effect(TEMP tmp);\n@@ -3336,1 +3333,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp);\n+  effect(TEMP tmp);\n@@ -3548,1 +3545,1 @@\n-instruct insertB_small(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp, pRegGov pTmp, rFlagsReg cr)\n+instruct insertB_small(vReg dst, vReg src, iRegIorL2I val, immI idx, pRegGov pTmp, rFlagsReg cr)\n@@ -3553,1 +3550,1 @@\n-  effect(TEMP tmp, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP pTmp, KILL cr);\n@@ -3555,2 +3552,2 @@\n-  format %{ \"sve_index $tmp, B, -16, 1\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n+  format %{ \"sve_index $dst, B, -16, 1\\n\\t\"\n+            \"sve_cmpeq $pTmp, $dst, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n@@ -3558,1 +3555,1 @@\n-            \"sve_cpy $dst, $pTmp, $val\\n\\t# insert into vector (B)\" %}\n+            \"sve_cpy $dst, $pTmp, $val\\t# insert into vector (B)\" %}\n@@ -3560,1 +3557,1 @@\n-    __ sve_index(as_FloatRegister($tmp$$reg), __ B, -16, 1);\n+    __ sve_index(as_FloatRegister($dst$$reg), __ B, -16, 1);\n@@ -3562,7 +3559,4 @@\n-                 as_FloatRegister($tmp$$reg), (int)($idx$$constant) - 16);\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($dst$$reg), (int)($idx$$constant) - 16);\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3571,1 +3565,0 @@\n-\n@@ -3576,1 +3569,1 @@\n-instruct insertS_small(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp, pRegGov pTmp, rFlagsReg cr)\n+instruct insertS_small(vReg dst, vReg src, iRegIorL2I val, immI idx, pRegGov pTmp, rFlagsReg cr)\n@@ -3581,1 +3574,1 @@\n-  effect(TEMP tmp, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP pTmp, KILL cr);\n@@ -3583,2 +3576,2 @@\n-  format %{ \"sve_index $tmp, H, -16, 1\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n+  format %{ \"sve_index $dst, H, -16, 1\\n\\t\"\n+            \"sve_cmpeq $pTmp, $dst, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n@@ -3586,1 +3579,1 @@\n-            \"sve_cpy $dst, $pTmp, $val\\n\\t# insert into vector (S)\" %}\n+            \"sve_cpy $dst, $pTmp, $val\\t# insert into vector (S)\" %}\n@@ -3588,1 +3581,1 @@\n-    __ sve_index(as_FloatRegister($tmp$$reg), __ H, -16, 1);\n+    __ sve_index(as_FloatRegister($dst$$reg), __ H, -16, 1);\n@@ -3590,7 +3583,4 @@\n-                 as_FloatRegister($tmp$$reg), (int)($idx$$constant) - 16);\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($dst$$reg), (int)($idx$$constant) - 16);\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3599,1 +3589,0 @@\n-\n@@ -3604,1 +3593,1 @@\n-instruct insertI_small(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp, pRegGov pTmp, rFlagsReg cr)\n+instruct insertI_small(vReg dst, vReg src, iRegIorL2I val, immI idx, pRegGov pTmp, rFlagsReg cr)\n@@ -3609,1 +3598,1 @@\n-  effect(TEMP tmp, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP pTmp, KILL cr);\n@@ -3611,2 +3600,2 @@\n-  format %{ \"sve_index $tmp, S, -16, 1\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n+  format %{ \"sve_index $dst, S, -16, 1\\n\\t\"\n+            \"sve_cmpeq $pTmp, $dst, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n@@ -3614,1 +3603,1 @@\n-            \"sve_cpy $dst, $pTmp, $val\\n\\t# insert into vector (I)\" %}\n+            \"sve_cpy $dst, $pTmp, $val\\t# insert into vector (I)\" %}\n@@ -3616,1 +3605,1 @@\n-    __ sve_index(as_FloatRegister($tmp$$reg), __ S, -16, 1);\n+    __ sve_index(as_FloatRegister($dst$$reg), __ S, -16, 1);\n@@ -3618,7 +3607,4 @@\n-                 as_FloatRegister($tmp$$reg), (int)($idx$$constant) - 16);\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($dst$$reg), (int)($idx$$constant) - 16);\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3627,1 +3613,0 @@\n-\n@@ -3632,1 +3617,1 @@\n-instruct insertF_small(vReg dst, vReg src, vRegF val, immI idx, vReg tmp, pRegGov pTmp, rFlagsReg cr)\n+instruct insertF_small(vReg dst, vReg src, vRegF val, immI idx, pRegGov pTmp, rFlagsReg cr)\n@@ -3637,1 +3622,1 @@\n-  effect(TEMP tmp, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP pTmp, KILL cr);\n@@ -3639,2 +3624,2 @@\n-  format %{ \"sve_index $tmp, S, -16, 1\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n+  format %{ \"sve_index $dst, S, -16, 1\\n\\t\"\n+            \"sve_cmpeq $pTmp, $dst, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n@@ -3642,1 +3627,1 @@\n-            \"sve_cpy $dst, $pTmp, $val\\n\\t# insert into vector (F)\" %}\n+            \"sve_cpy $dst, $pTmp, $val\\t# insert into vector (F)\" %}\n@@ -3644,1 +3629,1 @@\n-    __ sve_index(as_FloatRegister($tmp$$reg), __ S, -16, 1);\n+    __ sve_index(as_FloatRegister($dst$$reg), __ S, -16, 1);\n@@ -3646,7 +3631,4 @@\n-                 as_FloatRegister($tmp$$reg), (int)($idx$$constant) - 16);\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($dst$$reg), (int)($idx$$constant) - 16);\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3655,1 +3637,0 @@\n-\n@@ -3661,1 +3642,1 @@\n-instruct insertL(vReg dst, vReg src, iRegL val, immI idx, vReg tmp, pRegGov pTmp, rFlagsReg cr)\n+instruct insertL(vReg dst, vReg src, iRegL val, immI idx, pRegGov pTmp, rFlagsReg cr)\n@@ -3666,1 +3647,1 @@\n-  effect(TEMP tmp, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP pTmp, KILL cr);\n@@ -3668,2 +3649,2 @@\n-  format %{ \"sve_index $tmp, D, -16, 1\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n+  format %{ \"sve_index $dst, D, -16, 1\\n\\t\"\n+            \"sve_cmpeq $pTmp, $dst, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n@@ -3671,1 +3652,1 @@\n-            \"sve_cpy $dst, $pTmp, $val\\n\\t# insert into vector (L)\" %}\n+            \"sve_cpy $dst, $pTmp, $val\\t# insert into vector (L)\" %}\n@@ -3673,1 +3654,1 @@\n-    __ sve_index(as_FloatRegister($tmp$$reg), __ D, -16, 1);\n+    __ sve_index(as_FloatRegister($dst$$reg), __ D, -16, 1);\n@@ -3675,7 +3656,4 @@\n-                 as_FloatRegister($tmp$$reg), (int)($idx$$constant) - 16);\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($dst$$reg), (int)($idx$$constant) - 16);\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3684,1 +3662,0 @@\n-\n@@ -3689,1 +3666,1 @@\n-instruct insertD(vReg dst, vReg src, vRegD val, immI idx, vReg tmp, pRegGov pTmp, rFlagsReg cr)\n+instruct insertD(vReg dst, vReg src, vRegD val, immI idx, pRegGov pTmp, rFlagsReg cr)\n@@ -3694,1 +3671,1 @@\n-  effect(TEMP tmp, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP pTmp, KILL cr);\n@@ -3696,2 +3673,2 @@\n-  format %{ \"sve_index $tmp, D, -16, 1\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n+  format %{ \"sve_index $dst, D, -16, 1\\n\\t\"\n+            \"sve_cmpeq $pTmp, $dst, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n@@ -3699,1 +3676,1 @@\n-            \"sve_cpy $dst, $pTmp, $val\\n\\t# insert into vector (D)\" %}\n+            \"sve_cpy $dst, $pTmp, $val\\t# insert into vector (D)\" %}\n@@ -3701,1 +3678,1 @@\n-    __ sve_index(as_FloatRegister($tmp$$reg), __ D, -16, 1);\n+    __ sve_index(as_FloatRegister($dst$$reg), __ D, -16, 1);\n@@ -3703,7 +3680,4 @@\n-                 as_FloatRegister($tmp$$reg), (int)($idx$$constant) - 16);\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($dst$$reg), (int)($idx$$constant) - 16);\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3712,1 +3686,0 @@\n-\n@@ -3718,1 +3691,1 @@\n-instruct insertB(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp1, vReg tmp2, pRegGov pTmp, rFlagsReg cr)\n+instruct insertB(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp1, pRegGov pTmp, rFlagsReg cr)\n@@ -3723,1 +3696,1 @@\n-  effect(TEMP tmp1, TEMP tmp2, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP tmp1, TEMP pTmp, KILL cr);\n@@ -3726,2 +3699,2 @@\n-            \"sve_dup $tmp2, B, $idx\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp1, $tmp2\\n\\t\"\n+            \"sve_dup $dst, B, $idx\\n\\t\"\n+            \"sve_cmpeq $pTmp, $tmp1, $dst\\n\\t\"\n@@ -3729,1 +3702,1 @@\n-            \"sve_cpy $dst, $pTmp, $val\\n\\t# insert into vector (B)\" %}\n+            \"sve_cpy $dst, $pTmp, $val\\t# insert into vector (B)\" %}\n@@ -3732,1 +3705,1 @@\n-    __ sve_dup(as_FloatRegister($tmp2$$reg), __ B, (int)($idx$$constant));\n+    __ sve_dup(as_FloatRegister($dst$$reg), __ B, (int)($idx$$constant));\n@@ -3734,7 +3707,4 @@\n-                 as_FloatRegister($tmp1$$reg), as_FloatRegister($tmp2$$reg));\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($tmp1$$reg), as_FloatRegister($dst$$reg));\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3743,1 +3713,0 @@\n-\n@@ -3748,1 +3717,1 @@\n-instruct insertS(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp1, vReg tmp2, pRegGov pTmp, rFlagsReg cr)\n+instruct insertS(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp1, pRegGov pTmp, rFlagsReg cr)\n@@ -3753,1 +3722,1 @@\n-  effect(TEMP tmp1, TEMP tmp2, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP tmp1, TEMP pTmp, KILL cr);\n@@ -3756,2 +3725,2 @@\n-            \"sve_dup $tmp2, H, $idx\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp1, $tmp2\\n\\t\"\n+            \"sve_dup $dst, H, $idx\\n\\t\"\n+            \"sve_cmpeq $pTmp, $tmp1, $dst\\n\\t\"\n@@ -3759,1 +3728,1 @@\n-            \"sve_cpy $dst, $pTmp, $val\\n\\t# insert into vector (S)\" %}\n+            \"sve_cpy $dst, $pTmp, $val\\t# insert into vector (S)\" %}\n@@ -3762,1 +3731,1 @@\n-    __ sve_dup(as_FloatRegister($tmp2$$reg), __ H, (int)($idx$$constant));\n+    __ sve_dup(as_FloatRegister($dst$$reg), __ H, (int)($idx$$constant));\n@@ -3764,7 +3733,4 @@\n-                 as_FloatRegister($tmp1$$reg), as_FloatRegister($tmp2$$reg));\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($tmp1$$reg), as_FloatRegister($dst$$reg));\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3773,1 +3739,0 @@\n-\n@@ -3778,1 +3743,1 @@\n-instruct insertI(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp1, vReg tmp2, pRegGov pTmp, rFlagsReg cr)\n+instruct insertI(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp1, pRegGov pTmp, rFlagsReg cr)\n@@ -3783,1 +3748,1 @@\n-  effect(TEMP tmp1, TEMP tmp2, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP tmp1, TEMP pTmp, KILL cr);\n@@ -3786,2 +3751,2 @@\n-            \"sve_dup $tmp2, S, $idx\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp1, $tmp2\\n\\t\"\n+            \"sve_dup $dst, S, $idx\\n\\t\"\n+            \"sve_cmpeq $pTmp, $tmp1, $dst\\n\\t\"\n@@ -3789,1 +3754,1 @@\n-            \"sve_cpy $dst, $pTmp, $val\\n\\t# insert into vector (I)\" %}\n+            \"sve_cpy $dst, $pTmp, $val\\t# insert into vector (I)\" %}\n@@ -3792,1 +3757,1 @@\n-    __ sve_dup(as_FloatRegister($tmp2$$reg), __ S, (int)($idx$$constant));\n+    __ sve_dup(as_FloatRegister($dst$$reg), __ S, (int)($idx$$constant));\n@@ -3794,7 +3759,4 @@\n-                 as_FloatRegister($tmp1$$reg), as_FloatRegister($tmp2$$reg));\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($tmp1$$reg), as_FloatRegister($dst$$reg));\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3803,1 +3765,0 @@\n-\n@@ -3808,1 +3769,1 @@\n-instruct insertF(vReg dst, vReg src, vRegF val, immI idx, vReg tmp1, vReg tmp2, pRegGov pTmp, rFlagsReg cr)\n+instruct insertF(vReg dst, vReg src, vRegF val, immI idx, vReg tmp1, pRegGov pTmp, rFlagsReg cr)\n@@ -3813,1 +3774,1 @@\n-  effect(TEMP tmp1, TEMP tmp2, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP tmp1, TEMP pTmp, KILL cr);\n@@ -3816,2 +3777,2 @@\n-            \"sve_dup $tmp2, S, $idx\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp1, $tmp2\\n\\t\"\n+            \"sve_dup $dst, S, $idx\\n\\t\"\n+            \"sve_cmpeq $pTmp, $tmp1, $dst\\n\\t\"\n@@ -3819,1 +3780,1 @@\n-            \"sve_cpy $dst, $pTmp, $val\\n\\t# insert into vector (F)\" %}\n+            \"sve_cpy $dst, $pTmp, $val\\t# insert into vector (F)\" %}\n@@ -3822,1 +3783,1 @@\n-    __ sve_dup(as_FloatRegister($tmp2$$reg), __ S, (int)($idx$$constant));\n+    __ sve_dup(as_FloatRegister($dst$$reg), __ S, (int)($idx$$constant));\n@@ -3824,7 +3785,4 @@\n-                 as_FloatRegister($tmp1$$reg), as_FloatRegister($tmp2$$reg));\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($tmp1$$reg), as_FloatRegister($dst$$reg));\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3833,1 +3791,0 @@\n-\n","filename":"src\/hotspot\/cpu\/aarch64\/aarch64_sve.ad","additions":108,"deletions":151,"binary":false,"changes":259,"status":"modified"},{"patch":"@@ -1738,1 +1738,0 @@\n-  effect(TEMP_DEF dst);\n@@ -1759,1 +1758,0 @@\n-  effect(TEMP_DEF dst);\n@@ -1803,1 +1801,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp);\n+  effect(TEMP tmp);\n@@ -1826,1 +1824,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp);\n+  effect(TEMP tmp);\n@@ -1895,1 +1893,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp);\n+  effect(TEMP tmp);\n@@ -1983,1 +1981,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp);\n+  effect(TEMP tmp);\n@@ -2028,1 +2026,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp);\n+  effect(TEMP tmp);\n@@ -2153,1 +2151,1 @@\n-instruct insert$1_small`'(vReg dst, vReg src, $2 val, immI idx, vReg tmp, pRegGov pTmp, rFlagsReg cr)\n+instruct insert$1_small`'(vReg dst, vReg src, $2 val, immI idx, pRegGov pTmp, rFlagsReg cr)\n@@ -2158,1 +2156,1 @@\n-  effect(TEMP tmp, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP pTmp, KILL cr);\n@@ -2160,2 +2158,2 @@\n-  format %{ \"sve_index $tmp, $3, -16, 1\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n+  format %{ \"sve_index $dst, $3, -16, 1\\n\\t\"\n+            \"sve_cmpeq $pTmp, $dst, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n@@ -2163,1 +2161,1 @@\n-            \"sve_cpy $dst, $pTmp, $val\\n\\t# insert into vector ($1)\" %}\n+            \"sve_cpy $dst, $pTmp, $val\\t# insert into vector ($1)\" %}\n@@ -2165,1 +2163,1 @@\n-    __ sve_index(as_FloatRegister($tmp$$reg), __ $3, -16, 1);\n+    __ sve_index(as_FloatRegister($dst$$reg), __ $3, -16, 1);\n@@ -2167,7 +2165,4 @@\n-                 as_FloatRegister($tmp$$reg), (int)($idx$$constant) - 16);\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($dst$$reg), (int)($idx$$constant) - 16);\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -2176,1 +2171,0 @@\n-\n@@ -2187,1 +2181,1 @@\n-instruct insert$1`'(vReg dst, vReg src, $2 val, immI idx, vReg tmp, pRegGov pTmp, rFlagsReg cr)\n+instruct insert$1`'(vReg dst, vReg src, $2 val, immI idx, pRegGov pTmp, rFlagsReg cr)\n@@ -2192,1 +2186,1 @@\n-  effect(TEMP tmp, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP pTmp, KILL cr);\n@@ -2194,2 +2188,2 @@\n-  format %{ \"sve_index $tmp, $3, -16, 1\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n+  format %{ \"sve_index $dst, $3, -16, 1\\n\\t\"\n+            \"sve_cmpeq $pTmp, $dst, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n@@ -2197,1 +2191,1 @@\n-            \"sve_cpy $dst, $pTmp, $val\\n\\t# insert into vector ($1)\" %}\n+            \"sve_cpy $dst, $pTmp, $val\\t# insert into vector ($1)\" %}\n@@ -2199,1 +2193,1 @@\n-    __ sve_index(as_FloatRegister($tmp$$reg), __ $3, -16, 1);\n+    __ sve_index(as_FloatRegister($dst$$reg), __ $3, -16, 1);\n@@ -2201,7 +2195,4 @@\n-                 as_FloatRegister($tmp$$reg), (int)($idx$$constant) - 16);\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($dst$$reg), (int)($idx$$constant) - 16);\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -2210,1 +2201,0 @@\n-\n@@ -2219,1 +2209,1 @@\n-instruct insert$1`'(vReg dst, vReg src, $2 val, immI idx, vReg tmp1, vReg tmp2, pRegGov pTmp, rFlagsReg cr)\n+instruct insert$1`'(vReg dst, vReg src, $2 val, immI idx, vReg tmp1, pRegGov pTmp, rFlagsReg cr)\n@@ -2224,1 +2214,1 @@\n-  effect(TEMP tmp1, TEMP tmp2, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP tmp1, TEMP pTmp, KILL cr);\n@@ -2227,2 +2217,2 @@\n-            \"sve_dup $tmp2, $3, $idx\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp1, $tmp2\\n\\t\"\n+            \"sve_dup $dst, $3, $idx\\n\\t\"\n+            \"sve_cmpeq $pTmp, $tmp1, $dst\\n\\t\"\n@@ -2230,1 +2220,1 @@\n-            \"sve_cpy $dst, $pTmp, $val\\n\\t# insert into vector ($1)\" %}\n+            \"sve_cpy $dst, $pTmp, $val\\t# insert into vector ($1)\" %}\n@@ -2233,1 +2223,1 @@\n-    __ sve_dup(as_FloatRegister($tmp2$$reg), __ $3, (int)($idx$$constant));\n+    __ sve_dup(as_FloatRegister($dst$$reg), __ $3, (int)($idx$$constant));\n@@ -2235,7 +2225,4 @@\n-                 as_FloatRegister($tmp1$$reg), as_FloatRegister($tmp2$$reg));\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($tmp1$$reg), as_FloatRegister($dst$$reg));\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -2244,1 +2231,0 @@\n-\n","filename":"src\/hotspot\/cpu\/aarch64\/aarch64_sve_ad.m4","additions":35,"deletions":49,"binary":false,"changes":84,"status":"modified"}]}