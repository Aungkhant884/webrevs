{"files":[{"patch":"@@ -3545,1 +3545,1 @@\n-instruct insertB_small(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp, pRegGov pTmp, rFlagsReg cr)\n+instruct insertB_small(vReg dst, vReg src, iRegIorL2I val, immI idx, pRegGov pTmp, rFlagsReg cr)\n@@ -3550,1 +3550,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP pTmp, KILL cr);\n@@ -3552,2 +3552,2 @@\n-  format %{ \"sve_index $tmp, B, -16, 1\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n+  format %{ \"sve_index $dst, B, -16, 1\\n\\t\"\n+            \"sve_cmpeq $pTmp, $dst, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n@@ -3557,1 +3557,1 @@\n-    __ sve_index(as_FloatRegister($tmp$$reg), __ B, -16, 1);\n+    __ sve_index(as_FloatRegister($dst$$reg), __ B, -16, 1);\n@@ -3559,7 +3559,4 @@\n-                 as_FloatRegister($tmp$$reg), (int)($idx$$constant) - 16);\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($dst$$reg), (int)($idx$$constant) - 16);\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3573,1 +3570,1 @@\n-instruct insertS_small(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp, pRegGov pTmp, rFlagsReg cr)\n+instruct insertS_small(vReg dst, vReg src, iRegIorL2I val, immI idx, pRegGov pTmp, rFlagsReg cr)\n@@ -3578,1 +3575,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP pTmp, KILL cr);\n@@ -3580,2 +3577,2 @@\n-  format %{ \"sve_index $tmp, H, -16, 1\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n+  format %{ \"sve_index $dst, H, -16, 1\\n\\t\"\n+            \"sve_cmpeq $pTmp, $dst, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n@@ -3585,1 +3582,1 @@\n-    __ sve_index(as_FloatRegister($tmp$$reg), __ H, -16, 1);\n+    __ sve_index(as_FloatRegister($dst$$reg), __ H, -16, 1);\n@@ -3587,7 +3584,4 @@\n-                 as_FloatRegister($tmp$$reg), (int)($idx$$constant) - 16);\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($dst$$reg), (int)($idx$$constant) - 16);\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3601,1 +3595,1 @@\n-instruct insertI_small(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp, pRegGov pTmp, rFlagsReg cr)\n+instruct insertI_small(vReg dst, vReg src, iRegIorL2I val, immI idx, pRegGov pTmp, rFlagsReg cr)\n@@ -3606,1 +3600,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP pTmp, KILL cr);\n@@ -3608,2 +3602,2 @@\n-  format %{ \"sve_index $tmp, S, -16, 1\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n+  format %{ \"sve_index $dst, S, -16, 1\\n\\t\"\n+            \"sve_cmpeq $pTmp, $dst, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n@@ -3613,1 +3607,1 @@\n-    __ sve_index(as_FloatRegister($tmp$$reg), __ S, -16, 1);\n+    __ sve_index(as_FloatRegister($dst$$reg), __ S, -16, 1);\n@@ -3615,7 +3609,4 @@\n-                 as_FloatRegister($tmp$$reg), (int)($idx$$constant) - 16);\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($dst$$reg), (int)($idx$$constant) - 16);\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3629,1 +3620,1 @@\n-instruct insertF_small(vReg dst, vReg src, vRegF val, immI idx, vReg tmp, pRegGov pTmp, rFlagsReg cr)\n+instruct insertF_small(vReg dst, vReg src, vRegF val, immI idx, pRegGov pTmp, rFlagsReg cr)\n@@ -3634,1 +3625,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP pTmp, KILL cr);\n@@ -3636,2 +3627,2 @@\n-  format %{ \"sve_index $tmp, S, -16, 1\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n+  format %{ \"sve_index $dst, S, -16, 1\\n\\t\"\n+            \"sve_cmpeq $pTmp, $dst, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n@@ -3641,1 +3632,1 @@\n-    __ sve_index(as_FloatRegister($tmp$$reg), __ S, -16, 1);\n+    __ sve_index(as_FloatRegister($dst$$reg), __ S, -16, 1);\n@@ -3643,7 +3634,4 @@\n-                 as_FloatRegister($tmp$$reg), (int)($idx$$constant) - 16);\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($dst$$reg), (int)($idx$$constant) - 16);\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3658,1 +3646,1 @@\n-instruct insertL(vReg dst, vReg src, iRegL val, immI idx, vReg tmp, pRegGov pTmp, rFlagsReg cr)\n+instruct insertL(vReg dst, vReg src, iRegL val, immI idx, pRegGov pTmp, rFlagsReg cr)\n@@ -3663,1 +3651,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP pTmp, KILL cr);\n@@ -3665,2 +3653,2 @@\n-  format %{ \"sve_index $tmp, D, -16, 1\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n+  format %{ \"sve_index $dst, D, -16, 1\\n\\t\"\n+            \"sve_cmpeq $pTmp, $dst, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n@@ -3670,1 +3658,1 @@\n-    __ sve_index(as_FloatRegister($tmp$$reg), __ D, -16, 1);\n+    __ sve_index(as_FloatRegister($dst$$reg), __ D, -16, 1);\n@@ -3672,7 +3660,4 @@\n-                 as_FloatRegister($tmp$$reg), (int)($idx$$constant) - 16);\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($dst$$reg), (int)($idx$$constant) - 16);\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3686,1 +3671,1 @@\n-instruct insertD(vReg dst, vReg src, vRegD val, immI idx, vReg tmp, pRegGov pTmp, rFlagsReg cr)\n+instruct insertD(vReg dst, vReg src, vRegD val, immI idx, pRegGov pTmp, rFlagsReg cr)\n@@ -3691,1 +3676,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP pTmp, KILL cr);\n@@ -3693,2 +3678,2 @@\n-  format %{ \"sve_index $tmp, D, -16, 1\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n+  format %{ \"sve_index $dst, D, -16, 1\\n\\t\"\n+            \"sve_cmpeq $pTmp, $dst, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n@@ -3698,1 +3683,1 @@\n-    __ sve_index(as_FloatRegister($tmp$$reg), __ D, -16, 1);\n+    __ sve_index(as_FloatRegister($dst$$reg), __ D, -16, 1);\n@@ -3700,7 +3685,4 @@\n-                 as_FloatRegister($tmp$$reg), (int)($idx$$constant) - 16);\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($dst$$reg), (int)($idx$$constant) - 16);\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3715,1 +3697,1 @@\n-instruct insertB(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp1, vReg tmp2, pRegGov pTmp, rFlagsReg cr)\n+instruct insertB(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp1, pRegGov pTmp, rFlagsReg cr)\n@@ -3720,1 +3702,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp1, TEMP tmp2, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP tmp1, TEMP pTmp, KILL cr);\n@@ -3723,2 +3705,2 @@\n-            \"sve_dup $tmp2, B, $idx\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp1, $tmp2\\n\\t\"\n+            \"sve_dup $dst, B, $idx\\n\\t\"\n+            \"sve_cmpeq $pTmp, $tmp1, $dst\\n\\t\"\n@@ -3729,1 +3711,1 @@\n-    __ sve_dup(as_FloatRegister($tmp2$$reg), __ B, (int)($idx$$constant));\n+    __ sve_dup(as_FloatRegister($dst$$reg), __ B, (int)($idx$$constant));\n@@ -3731,7 +3713,4 @@\n-                 as_FloatRegister($tmp1$$reg), as_FloatRegister($tmp2$$reg));\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($tmp1$$reg), as_FloatRegister($dst$$reg));\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3745,1 +3724,1 @@\n-instruct insertS(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp1, vReg tmp2, pRegGov pTmp, rFlagsReg cr)\n+instruct insertS(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp1, pRegGov pTmp, rFlagsReg cr)\n@@ -3750,1 +3729,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp1, TEMP tmp2, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP tmp1, TEMP pTmp, KILL cr);\n@@ -3753,2 +3732,2 @@\n-            \"sve_dup $tmp2, H, $idx\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp1, $tmp2\\n\\t\"\n+            \"sve_dup $dst, H, $idx\\n\\t\"\n+            \"sve_cmpeq $pTmp, $tmp1, $dst\\n\\t\"\n@@ -3759,1 +3738,1 @@\n-    __ sve_dup(as_FloatRegister($tmp2$$reg), __ H, (int)($idx$$constant));\n+    __ sve_dup(as_FloatRegister($dst$$reg), __ H, (int)($idx$$constant));\n@@ -3761,7 +3740,4 @@\n-                 as_FloatRegister($tmp1$$reg), as_FloatRegister($tmp2$$reg));\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($tmp1$$reg), as_FloatRegister($dst$$reg));\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3775,1 +3751,1 @@\n-instruct insertI(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp1, vReg tmp2, pRegGov pTmp, rFlagsReg cr)\n+instruct insertI(vReg dst, vReg src, iRegIorL2I val, immI idx, vReg tmp1, pRegGov pTmp, rFlagsReg cr)\n@@ -3780,1 +3756,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp1, TEMP tmp2, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP tmp1, TEMP pTmp, KILL cr);\n@@ -3783,2 +3759,2 @@\n-            \"sve_dup $tmp2, S, $idx\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp1, $tmp2\\n\\t\"\n+            \"sve_dup $dst, S, $idx\\n\\t\"\n+            \"sve_cmpeq $pTmp, $tmp1, $dst\\n\\t\"\n@@ -3789,1 +3765,1 @@\n-    __ sve_dup(as_FloatRegister($tmp2$$reg), __ S, (int)($idx$$constant));\n+    __ sve_dup(as_FloatRegister($dst$$reg), __ S, (int)($idx$$constant));\n@@ -3791,7 +3767,4 @@\n-                 as_FloatRegister($tmp1$$reg), as_FloatRegister($tmp2$$reg));\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($tmp1$$reg), as_FloatRegister($dst$$reg));\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -3805,1 +3778,1 @@\n-instruct insertF(vReg dst, vReg src, vRegF val, immI idx, vReg tmp1, vReg tmp2, pRegGov pTmp, rFlagsReg cr)\n+instruct insertF(vReg dst, vReg src, vRegF val, immI idx, vReg tmp1, pRegGov pTmp, rFlagsReg cr)\n@@ -3810,1 +3783,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp1, TEMP tmp2, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP tmp1, TEMP pTmp, KILL cr);\n@@ -3813,2 +3786,2 @@\n-            \"sve_dup $tmp2, S, $idx\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp1, $tmp2\\n\\t\"\n+            \"sve_dup $dst, S, $idx\\n\\t\"\n+            \"sve_cmpeq $pTmp, $tmp1, $dst\\n\\t\"\n@@ -3819,1 +3792,1 @@\n-    __ sve_dup(as_FloatRegister($tmp2$$reg), __ S, (int)($idx$$constant));\n+    __ sve_dup(as_FloatRegister($dst$$reg), __ S, (int)($idx$$constant));\n@@ -3821,7 +3794,4 @@\n-                 as_FloatRegister($tmp1$$reg), as_FloatRegister($tmp2$$reg));\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($tmp1$$reg), as_FloatRegister($dst$$reg));\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n","filename":"src\/hotspot\/cpu\/aarch64\/aarch64_sve.ad","additions":90,"deletions":120,"binary":false,"changes":210,"status":"modified"},{"patch":"@@ -2151,1 +2151,1 @@\n-instruct insert$1_small`'(vReg dst, vReg src, $2 val, immI idx, vReg tmp, pRegGov pTmp, rFlagsReg cr)\n+instruct insert$1_small`'(vReg dst, vReg src, $2 val, immI idx, pRegGov pTmp, rFlagsReg cr)\n@@ -2156,1 +2156,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP pTmp, KILL cr);\n@@ -2158,2 +2158,2 @@\n-  format %{ \"sve_index $tmp, $3, -16, 1\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n+  format %{ \"sve_index $dst, $3, -16, 1\\n\\t\"\n+            \"sve_cmpeq $pTmp, $dst, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n@@ -2163,1 +2163,1 @@\n-    __ sve_index(as_FloatRegister($tmp$$reg), __ $3, -16, 1);\n+    __ sve_index(as_FloatRegister($dst$$reg), __ $3, -16, 1);\n@@ -2165,7 +2165,4 @@\n-                 as_FloatRegister($tmp$$reg), (int)($idx$$constant) - 16);\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($dst$$reg), (int)($idx$$constant) - 16);\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -2185,1 +2182,1 @@\n-instruct insert$1`'(vReg dst, vReg src, $2 val, immI idx, vReg tmp, pRegGov pTmp, rFlagsReg cr)\n+instruct insert$1`'(vReg dst, vReg src, $2 val, immI idx, pRegGov pTmp, rFlagsReg cr)\n@@ -2190,1 +2187,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP pTmp, KILL cr);\n@@ -2192,2 +2189,2 @@\n-  format %{ \"sve_index $tmp, $3, -16, 1\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n+  format %{ \"sve_index $dst, $3, -16, 1\\n\\t\"\n+            \"sve_cmpeq $pTmp, $dst, ($idx-#16) \/\/ shift from [0, 31] to [-16, 15]\\n\\t\"\n@@ -2197,1 +2194,1 @@\n-    __ sve_index(as_FloatRegister($tmp$$reg), __ $3, -16, 1);\n+    __ sve_index(as_FloatRegister($dst$$reg), __ $3, -16, 1);\n@@ -2199,7 +2196,4 @@\n-                 as_FloatRegister($tmp$$reg), (int)($idx$$constant) - 16);\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($dst$$reg), (int)($idx$$constant) - 16);\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n@@ -2217,1 +2211,1 @@\n-instruct insert$1`'(vReg dst, vReg src, $2 val, immI idx, vReg tmp1, vReg tmp2, pRegGov pTmp, rFlagsReg cr)\n+instruct insert$1`'(vReg dst, vReg src, $2 val, immI idx, vReg tmp1, pRegGov pTmp, rFlagsReg cr)\n@@ -2222,1 +2216,1 @@\n-  effect(TEMP_DEF dst, TEMP tmp1, TEMP tmp2, TEMP pTmp, KILL cr);\n+  effect(TEMP_DEF dst, TEMP tmp1, TEMP pTmp, KILL cr);\n@@ -2225,2 +2219,2 @@\n-            \"sve_dup $tmp2, $3, $idx\\n\\t\"\n-            \"sve_cmpeq $pTmp, $tmp1, $tmp2\\n\\t\"\n+            \"sve_dup $dst, $3, $idx\\n\\t\"\n+            \"sve_cmpeq $pTmp, $tmp1, $dst\\n\\t\"\n@@ -2231,1 +2225,1 @@\n-    __ sve_dup(as_FloatRegister($tmp2$$reg), __ $3, (int)($idx$$constant));\n+    __ sve_dup(as_FloatRegister($dst$$reg), __ $3, (int)($idx$$constant));\n@@ -2233,7 +2227,4 @@\n-                 as_FloatRegister($tmp1$$reg), as_FloatRegister($tmp2$$reg));\n-    \/\/ If src and dst are the same reg, this move is not needed.\n-    if (as_FloatRegister($dst$$reg) != as_FloatRegister($src$$reg)) {\n-      __ sve_orr(as_FloatRegister($dst$$reg),\n-             as_FloatRegister($src$$reg),\n-             as_FloatRegister($src$$reg));\n-    }\n+                 as_FloatRegister($tmp1$$reg), as_FloatRegister($dst$$reg));\n+    __ sve_orr(as_FloatRegister($dst$$reg),\n+               as_FloatRegister($src$$reg),\n+               as_FloatRegister($src$$reg));\n","filename":"src\/hotspot\/cpu\/aarch64\/aarch64_sve_ad.m4","additions":27,"deletions":36,"binary":false,"changes":63,"status":"modified"}]}