[{"commit":{"message":"Support polluted cases.\n\nFactor load and stores to supported polluted cases.\n\nUse more immutable memory and instance fields, to avoid\nvirtual calls.\n\nUse immutable memory to help unswitching loops.\n\nThis code works suspicousyly well (I see loop get unswitched 4 times).\n\n```\nBenchmark                                (size)  Mode  Cnt   Score   Error  Units\nByteBufferVectorAccess.arrayCopy           1024  avgt   10  14.524 ? 0.356  ns\/op\nByteBufferVectorAccess.directBuffers       1024  avgt   10  19.633 ? 0.137  ns\/op\nByteBufferVectorAccess.heapBuffers         1024  avgt   10  19.148 ? 0.505  ns\/op\nByteBufferVectorAccess.pollutedBuffers2    1024  avgt   10  31.682 ? 0.762  ns\/op\nByteBufferVectorAccess.pollutedBuffers3    1024  avgt   10  74.878 ? 1.127  ns\/op\nByteBufferVectorAccess.pollutedBuffers4    1024  avgt   10  71.133 ? 1.822  ns\/op\nByteBufferVectorAccess.pollutedBuffers5    1024  avgt   10  66.990 ? 1.323  ns\/op\n```\n\nWith loop unrolling\n```\nBenchmark                                (size)  Mode  Cnt     Score    Error  Units\nByteBufferVectorAccess.arrayCopy           1024  avgt   10    14.517 ?  0.103  ns\/op\nByteBufferVectorAccess.directBuffers       1024  avgt   10    12.140 ?  0.134  ns\/op\nByteBufferVectorAccess.pollutedBuffers2    1024  avgt   10    34.582 ?  0.250  ns\/op\nByteBufferVectorAccess.pollutedBuffers3    1024  avgt   10    69.405 ?  0.845  ns\/op\nByteBufferVectorAccess.pollutedBuffers4    1024  avgt   10    58.719 ?  0.491  ns\/op\nByteBufferVectorAccess.pollutedBuffers5    1024  avgt   10    60.044 ?  0.338  ns\/op\n```\nplus heap buff which sometimes executes slower...\n```\nByteBufferVectorAccess.heapBuffers    1024  avgt   10  15.878 ? 0.423  ns\/op\n```"},"files":[{"filename":"src\/java.base\/share\/classes\/java\/nio\/Buffer.java"},{"filename":"src\/java.base\/share\/classes\/jdk\/internal\/access\/JavaNioAccess.java"},{"filename":"src\/java.base\/share\/classes\/jdk\/internal\/misc\/X-ScopedMemoryAccess.java.template"},{"filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/ByteVector.java"},{"filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/DoubleVector.java"},{"filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/FloatVector.java"},{"filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/IntVector.java"},{"filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/LongVector.java"},{"filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/ShortVector.java"},{"filename":"src\/jdk.incubator.vector\/share\/classes\/jdk\/incubator\/vector\/X-Vector.java.template"},{"filename":"test\/micro\/org\/openjdk\/bench\/jdk\/incubator\/vector\/ByteBufferVectorAccess.java"}],"sha":"4852ea23dfd1fdc4783a8525028c6fa5d4f77130"}]