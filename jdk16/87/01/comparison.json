{"files":[{"patch":"@@ -38,1 +38,1 @@\n-\/\/ Java agent that emits in multiple threads\n+\/\/ Java agent that emits events\n@@ -41,3 +41,1 @@\n-    private static final int THREADS = 5;\n-    private static final int EVENTS_PER_THREAD = 150_000;\n-    private static final int EXPECTED_COUNT = THREADS * EVENTS_PER_THREAD;\n+    private static final long EVENTS = 150_000;\n@@ -61,8 +59,1 @@\n-            Thread[] threads = new Thread[THREADS];\n-            for (int i = 0; i < THREADS; i++) {\n-                threads[i] = new Thread(EventEmitterAgent::emitEvents);\n-                threads[i].start();\n-            }\n-            for (int i = 0; i < THREADS; i++) {\n-                threads[i].join();\n-            }\n+            emitEvents();\n@@ -74,1 +65,1 @@\n-        for (int i = 0; i < EVENTS_PER_THREAD; i++) {\n+        for (int i = 0; i < EVENTS; i++) {\n@@ -83,1 +74,1 @@\n-                    Thread.sleep(1);\n+                    Thread.sleep(10);\n@@ -104,1 +95,1 @@\n-        Asserts.assertTrue(testEventCount == EXPECTED_COUNT, \"Mismatch in TestEvent count\");\n+        Asserts.assertEquals(testEventCount, EVENTS, \"Mismatch in TestEvent count\");\n","filename":"test\/jdk\/jdk\/jfr\/javaagent\/EventEmitterAgent.java","additions":6,"deletions":15,"binary":false,"changes":21,"status":"modified"}]}