{"files":[{"patch":"@@ -119,0 +119,4 @@\n+            int modes = defaultAccessModes(bytesSize);\n+            if (mapMode == FileChannel.MapMode.READ_ONLY) {\n+                modes &= ~WRITE;\n+            }\n@@ -121,4 +125,0 @@\n-                int modes = defaultAccessModes(bytesSize);\n-                if (mapMode == FileChannel.MapMode.READ_ONLY) {\n-                    modes &= ~WRITE;\n-                }\n@@ -128,1 +128,1 @@\n-                return new EmptyMappedMemorySegmentImpl();\n+                return new EmptyMappedMemorySegmentImpl(modes);\n@@ -145,2 +145,2 @@\n-        public EmptyMappedMemorySegmentImpl() {\n-            super(0, null, 0, MemorySegment.ALL_ACCESS,\n+        public EmptyMappedMemorySegmentImpl(int modes) {\n+            super(0, null, 0, modes,\n","filename":"src\/jdk.incubator.foreign\/share\/classes\/jdk\/internal\/foreign\/MappedMemorySegmentImpl.java","additions":7,"deletions":7,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -472,0 +472,1 @@\n+        \/\/RW\n@@ -475,0 +476,11 @@\n+            assertTrue((segment.accessModes() & (READ | WRITE)) == (READ | WRITE));\n+            MappedMemorySegments.force(segment);\n+            MappedMemorySegments.load(segment);\n+            MappedMemorySegments.isLoaded(segment);\n+            MappedMemorySegments.unload(segment);\n+        }\n+        \/\/RO\n+        try (MemorySegment segment = MemorySegment.mapFile(f.toPath(), 0L, 0L, FileChannel.MapMode.READ_ONLY)) {\n+            assertEquals(segment.byteSize(), 0);\n+            assertEquals(segment.isMapped(), true);\n+            assertTrue((segment.accessModes() & (READ | WRITE)) == READ);\n","filename":"test\/jdk\/java\/foreign\/TestByteBuffer.java","additions":12,"deletions":0,"binary":false,"changes":12,"status":"modified"}]}