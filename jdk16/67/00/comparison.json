{"files":[{"patch":"@@ -43,0 +43,2 @@\n+    static final int N_DELAY = 1000;  \/\/ delay between tries\n+    static final int N_TRIES = 5;     \/\/ number of times to try deflation\n@@ -71,3 +73,16 @@\n-            boolean did_deflation = wb.deflateIdleMonitors();\n-            Asserts.assertEQ(did_deflation, true,\n-                             \"deflateIdleMonitors() should have worked.\");\n+            for (int cnt = 1; cnt <= N_TRIES; cnt++) {\n+                System.out.println(\"Deflation try #\" + cnt);\n+                boolean did_deflation = wb.deflateIdleMonitors();\n+                Asserts.assertEQ(did_deflation, true,\n+                                 \"deflateIdleMonitors() should have worked.\");\n+                if (!wb.isMonitorInflated(obj)) {\n+                    \/\/ Deflation worked so no more retries needed.\n+                    break;\n+                }\n+                try {\n+                    System.out.println(\"Deflation try #\" + cnt + \" failed. \"\n+                                       + \"Delaying before retry.\");\n+                    Thread.sleep(N_DELAY);\n+                } catch (InterruptedException ie) {\n+                }\n+            }\n","filename":"test\/hotspot\/jtreg\/runtime\/whitebox\/TestWBDeflateIdleMonitors.java","additions":18,"deletions":3,"binary":false,"changes":21,"status":"modified"}]}