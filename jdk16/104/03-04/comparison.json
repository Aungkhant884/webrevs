{"files":[{"patch":"@@ -40,1 +40,0 @@\n-#include \"logging\/logStream.hpp\"\n@@ -467,22 +466,5 @@\n-    LogTarget(Debug, cds, lambda) log;\n-    if (log.is_enabled()) {\n-      ResourceMark rm(THREAD);\n-      LogStream ls(log);\n-      log.print(\"resolve_indy for class %s has\", class_name_symbol->as_C_string());\n-      oop message = java_lang_Throwable::message(PENDING_EXCEPTION);\n-      if (message != NULL) {\n-        char* ex_msg = java_lang_String::as_utf8_string(message);\n-        ls.print(\" exception pending '%s %s'\",\n-                  PENDING_EXCEPTION->klass()->external_name(), ex_msg);\n-      } else {\n-        ls.print(\" exception pending %s \",\n-                  PENDING_EXCEPTION->klass()->external_name());\n-      }\n-    }\n-    oop exception = THREAD->pending_exception();\n-    if (exception->is_a(SystemDictionary::LinkageError_klass())) {\n-      \/\/ Clear the exception associated with errors like UnsupportedClassVersionError\n-      \/\/ or NoSuchMethodError so that CDS dumping can continue.\n-      CLEAR_PENDING_EXCEPTION;\n-    } else {\n-      exit(1);\n+    ResourceMark rm(THREAD);\n+    char* ex_msg = (char*)\"\";\n+    oop message = java_lang_Throwable::message(PENDING_EXCEPTION);\n+    if (message != NULL) {\n+      ex_msg = java_lang_String::as_utf8_string(message);\n@@ -490,0 +472,5 @@\n+    log_warning(cds)(\"resolve_indy for class %s has encountered exception: %s %s\",\n+                     class_name_symbol->as_C_string(),\n+                     PENDING_EXCEPTION->klass()->external_name(),\n+                     ex_msg);\n+    CLEAR_PENDING_EXCEPTION;\n","filename":"src\/hotspot\/share\/classfile\/classListParser.cpp","additions":10,"deletions":23,"binary":false,"changes":33,"status":"modified"},{"patch":"@@ -48,2 +48,1 @@\n-       .shouldContain(\"resolve_indy for class WrongBSM has\")\n-       .shouldContain(\"exception pending 'java.lang.NoSuchMethodError '\");\n+       .shouldContain(\"resolve_indy for class WrongBSM has encountered exception: java.lang.NoSuchMethodError\");\n","filename":"test\/hotspot\/jtreg\/runtime\/cds\/appcds\/BadBSM.java","additions":1,"deletions":2,"binary":false,"changes":3,"status":"modified"}]}