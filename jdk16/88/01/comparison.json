{"files":[{"patch":"@@ -1,1 +1,1 @@\n-# Copyright (c) 1997, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 1997, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -480,1 +480,1 @@\n-    JAVADOC_CMD := $(JAVADOC), \\\n+    JAVADOC_CMD := $(DOCS_REFERENCE_JAVADOC), \\\n","filename":"make\/Docs.gmk","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2011, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2011, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -609,0 +609,25 @@\n+\n+# The docs-reference JDK is used to run javadoc for the docs-reference targets.\n+# If not set, the reference docs will be built using the interim javadoc.\n+AC_DEFUN([BOOTJDK_SETUP_DOCS_REFERENCE_JDK],\n+[\n+  AC_ARG_WITH(docs-reference-jdk, [AS_HELP_STRING([--with-docs-reference-jdk],\n+      [path to JDK to use for building the reference documentation])])\n+\n+  AC_MSG_CHECKING([for docs-reference JDK])\n+  if test \"x$with_docs_reference_jdk\" != \"x\"; then\n+    DOCS_REFERENCE_JDK=\"$with_docs_reference_jdk\"\n+    AC_MSG_RESULT([$DOCS_REFERENCE_JDK])\n+    DOCS_REFERENCE_JAVADOC=\"$DOCS_REFERENCE_JDK\/bin\/javadoc\"\n+    if test ! -x \"$DOCS_REFERENCE_JAVADOC\"; then\n+      AC_MSG_ERROR([docs-reference JDK found at $DOCS_REFERENCE_JDK did not contain bin\/javadoc])\n+    fi\n+    UTIL_FIXUP_EXECUTABLE(DOCS_REFERENCE_JAVADOC)\n+  else\n+    AC_MSG_RESULT([no, using interim javadoc for the docs-reference targets])\n+    # By leaving this empty, Docs.gmk will revert to the default interim javadoc\n+    DOCS_REFERENCE_JAVADOC=\n+  fi\n+\n+  AC_SUBST(DOCS_REFERENCE_JAVADOC)\n+])\n","filename":"make\/autoconf\/boot-jdk.m4","additions":26,"deletions":1,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2011, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2011, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -147,0 +147,1 @@\n+BOOTJDK_SETUP_DOCS_REFERENCE_JDK\n","filename":"make\/autoconf\/configure.ac","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-# Copyright (c) 2011, 2020, Oracle and\/or its affiliates. All rights reserved.\n+# Copyright (c) 2011, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -651,0 +651,2 @@\n+DOCS_REFERENCE_JAVADOC := @DOCS_REFERENCE_JAVADOC@\n+\n","filename":"make\/autoconf\/spec.gmk.in","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2015, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2015, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -726,2 +726,5 @@\n-                \"--with-build-jdk=\" + input.get(buildJdkDep, \"home_path\")\n-                    + (input.build_os == \"macosx\" ? \"\/Contents\/Home\" : \"\")\n+                \"--with-build-jdk=\" + input.get(buildJdkDep, \"home_path\"),\n+                \/\/ Provide an explicit JDK for the docs-reference target to\n+                \/\/ mimic the running conditions of when it's run for real as\n+                \/\/ closely as possible.\n+                \"--with-docs-reference-jdk=\" + input.get(buildJdkDep, \"home_path\")\n","filename":"make\/conf\/jib-profiles.js","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"}]}