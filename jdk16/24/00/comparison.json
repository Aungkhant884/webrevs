{"files":[{"patch":"@@ -68,10 +68,1 @@\n-  address csp;\n-\n-#if !defined(USE_XLC_BUILTINS)\n-  \/\/ inline assembly for `mr regno(csp), R1_SP':\n-  __asm__ __volatile__ (\"mr %0, 1\":\"=r\"(csp):);\n-#else\n-  csp = (address) __builtin_frame_address(0);\n-#endif\n-\n-  return csp;\n+  return (address)__builtin_frame_address(0);\n@@ -162,7 +153,3 @@\n-  intptr_t* csp = (intptr_t*) *((intptr_t*) os::current_stack_pointer());\n-  \/\/ hack.\n-  frame topframe(csp, (address)0x8);\n-  \/\/ Return sender of sender of current topframe which hopefully\n-  \/\/ both have pc != NULL.\n-  frame tmp = os::get_sender_for_C_frame(&topframe);\n-  return os::get_sender_for_C_frame(&tmp);\n+  intptr_t* csp = *(intptr_t**) __builtin_frame_address(0);\n+  frame topframe(csp, CAST_FROM_FN_PTR(address, os::current_frame));\n+  return os::get_sender_for_C_frame(&topframe);\n","filename":"src\/hotspot\/os_cpu\/aix_ppc\/os_aix_ppc.cpp","additions":4,"deletions":17,"binary":false,"changes":21,"status":"modified"},{"patch":"@@ -81,6 +81,1 @@\n-  intptr_t* csp;\n-\n-  \/\/ inline assembly `mr regno(csp), R1_SP':\n-  __asm__ __volatile__ (\"mr %0, 1\":\"=r\"(csp):);\n-\n-  return (address) csp;\n+  return (address)__builtin_frame_address(0);\n@@ -182,7 +177,3 @@\n-  intptr_t* csp = (intptr_t*) *((intptr_t*) os::current_stack_pointer());\n-  \/\/ hack.\n-  frame topframe(csp, (address)0x8);\n-  \/\/ Return sender of sender of current topframe which hopefully\n-  \/\/ both have pc != NULL.\n-  frame tmp = os::get_sender_for_C_frame(&topframe);\n-  return os::get_sender_for_C_frame(&tmp);\n+  intptr_t* csp = *(intptr_t**) __builtin_frame_address(0);\n+  frame topframe(csp, CAST_FROM_FN_PTR(address, os::current_frame));\n+  return os::get_sender_for_C_frame(&topframe);\n","filename":"src\/hotspot\/os_cpu\/linux_ppc\/os_linux_ppc.cpp","additions":4,"deletions":13,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -39,1 +39,1 @@\n-#if (defined(_NMT_NOINLINE_) || defined(_WINDOWS) || !defined(_LP64))\n+#if (defined(_NMT_NOINLINE_) || defined(_WINDOWS) || !defined(_LP64) || defined(PPC64))\n","filename":"src\/hotspot\/share\/utilities\/nativeCallStack.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}