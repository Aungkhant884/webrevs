{"files":[{"patch":"@@ -2058,0 +2058,9 @@\n+void ShenandoahHeap::stw_weak_refs(bool full_gc) {\n+  \/\/ Weak refs processing\n+  ShenandoahTimingsTracker t(full_gc ? ShenandoahPhaseTimings::full_gc_weakrefs_process\n+                                     : ShenandoahPhaseTimings::degen_gc_weakrefs_process);\n+  ShenandoahGCWorkerPhase worker_phase(full_gc ? ShenandoahPhaseTimings::full_gc_weakrefs_process\n+                                               : ShenandoahPhaseTimings::degen_gc_weakrefs_process);\n+  ref_processor()->process_references(workers(), false \/* concurrent *\/);\n+}\n+\n@@ -2197,6 +2206,0 @@\n-      {\n-        ShenandoahTimingsTracker t(ShenandoahPhaseTimings::conc_weak_refs_work);\n-        ShenandoahGCWorkerPhase worker_phase(ShenandoahPhaseTimings::conc_weak_refs_work);\n-        ref_processor()->process_references(workers(), false \/* concurrent *\/);\n-      }\n-\n@@ -2488,0 +2491,1 @@\n+  stw_weak_refs(full_gc);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.cpp","additions":10,"deletions":6,"binary":false,"changes":16,"status":"modified"},{"patch":"@@ -518,0 +518,1 @@\n+  void stw_weak_refs(bool full_gc);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahHeap.hpp","additions":1,"deletions":0,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -252,1 +252,0 @@\n-  rp->process_references(heap->workers(), false \/* concurrent *\/);\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahMarkCompact.cpp","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"},{"patch":"@@ -108,0 +108,1 @@\n+    case full_gc_weakrefs_process:\n@@ -111,0 +112,1 @@\n+    case degen_gc_weakrefs_process:\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahPhaseTimings.cpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -121,0 +121,2 @@\n+  f(degen_gc_weakrefs,                               \"    Weak References\")             \\\n+  f(degen_gc_weakrefs_process,                       \"      Process\")                   \\\n","filename":"src\/hotspot\/share\/gc\/shenandoah\/shenandoahPhaseTimings.hpp","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"}]}