{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 1996, 2020, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 1996, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -1787,7 +1787,13 @@\n-        while (!conContext.isInboundClosed()) {\n-            try {\n-                Plaintext plainText = decode(null);\n-                \/\/ discard and continue\n-                if (SSLLogger.isOn && SSLLogger.isOn(\"ssl\")) {\n-                    SSLLogger.finest(\n-                        \"discard plaintext while waiting for close\", plainText);\n+        appInput.readLock.lock();\n+        try {\n+            while (!conContext.isInboundClosed()) {\n+                try {\n+                    Plaintext plainText = decode(null);\n+                    \/\/ discard and continue\n+                    if (SSLLogger.isOn && SSLLogger.isOn(\"ssl\")) {\n+                        SSLLogger.finest(\n+                                \"discard plaintext while waiting for close\",\n+                                plainText);\n+                    }\n+                } catch (Exception e) {   \/\/ including RuntimeException\n+                    handleException(e);\n@@ -1795,2 +1801,0 @@\n-            } catch (Exception e) {   \/\/ including RuntimeException\n-                handleException(e);\n@@ -1798,0 +1802,2 @@\n+        } finally {\n+            appInput.readLock.unlock();\n","filename":"src\/java.base\/share\/classes\/sun\/security\/ssl\/SSLSocketImpl.java","additions":16,"deletions":10,"binary":false,"changes":26,"status":"modified"}]}