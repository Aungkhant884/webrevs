{"files":[{"patch":"@@ -1523,0 +1523,1 @@\n+      int path_bitmask = 0;\n@@ -1533,1 +1534,1 @@\n-      mnode->build_instr_pred(s,(char*)i._key,0);\n+      mnode->build_instr_pred(s,(char*)i._key, 0, path_bitmask, 0);\n@@ -1536,1 +1537,1 @@\n-      mnode->build_instr_pred(s,(char*)i._key,1);\n+      mnode->build_instr_pred(s,(char*)i._key, 1, path_bitmask, 0);\n@@ -3420,1 +3421,1 @@\n-int MatchNode::build_instr_pred( char *buf, const char *name, int cnt ) {\n+int MatchNode::build_instr_pred( char *buf, const char *name, int cnt, int path_bitmask, int level) {\n@@ -3422,3 +3423,4 @@\n-    if( !cnt ) strcpy( buf, \"_kids[0]->\" );\n-    cnt = _lChild->build_instr_pred( buf+strlen(buf), name, cnt );\n-    if( cnt < 0 ) return cnt;   \/\/ Found it, all done\n+    cnt = _lChild->build_instr_pred(buf, name, cnt, path_bitmask, level+1);\n+    if( cnt < 0 ) {\n+      return cnt;   \/\/ Found it, all done\n+    }\n@@ -3427,3 +3429,5 @@\n-    if( !cnt ) strcpy( buf, \"_kids[1]->\" );\n-    cnt = _rChild->build_instr_pred( buf+strlen(buf), name, cnt );\n-    if( cnt < 0 ) return cnt;   \/\/ Found it, all done\n+    path_bitmask |= 1 << level;\n+    cnt = _rChild->build_instr_pred( buf, name, cnt, path_bitmask, level+1);\n+    if( cnt < 0 ) {\n+      return cnt;   \/\/ Found it, all done\n+    }\n@@ -3434,1 +3438,12 @@\n-    if( !cnt ) strcpy(buf,\"_leaf\");\n+    if( !cnt )  {\n+      for(int i = 0; i < level; i++) {\n+        int kid = path_bitmask &  (1 << i);\n+        if (0 == kid) {\n+          strcpy( buf, \"_kids[0]->\" );\n+        } else {\n+          strcpy( buf, \"_kids[1]->\" );\n+        }\n+        buf += 10;\n+      }\n+      strcpy( buf, \"_leaf\" );\n+    }\n","filename":"src\/hotspot\/share\/adlc\/formssel.cpp","additions":25,"deletions":10,"binary":false,"changes":35,"status":"modified"},{"patch":"@@ -972,1 +972,1 @@\n-  int build_instr_pred( char *buf, const char *name, int cnt );\n+  int build_instr_pred( char *buf, const char *name, int cnt, int path_bitmask, int level);\n","filename":"src\/hotspot\/share\/adlc\/formssel.hpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}