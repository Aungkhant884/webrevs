{"files":[{"patch":"@@ -138,1 +138,2 @@\n-\t\t\t\tif (RulesToolkit.matchesEventAvailabilityMap(items.getItems(), rule.getRequiredEvents())) {\n+\t\t\t\tif (RulesToolkit.matchesEventAvailabilityMap(items.getItems(), rule.getRequiredEvents())\n+\t\t\t\t\t\t&& shouldEvaluate(rule)) {\n@@ -143,18 +144,15 @@\n-\t\t\t\t\tif (shouldEvaluate(rule)) {\n-\t\t\t\t\t\trunner.start();\n-\t\t\t\t\t\twhile (true) {\n-\t\t\t\t\t\t\tif (monitor.isCanceled()) {\n-\t\t\t\t\t\t\t\tfuture.cancel(true);\n-\t\t\t\t\t\t\t\trunner.join();\n-\t\t\t\t\t\t\t\tresult = ResultBuilder.createFor(rule, config::getValue).setSeverity(Severity.NA)\n-\t\t\t\t\t\t\t\t\t\t.setSummary(Messages.JFR_EDITOR_RULES_CANCELLED)\n-\t\t\t\t\t\t\t\t\t\t.addResult(RulesHtmlToolkit.FAILED, true).build();\n-\t\t\t\t\t\t\t\tevaluatedRules.put(rule.getClass(), Severity.NA);\n-\t\t\t\t\t\t\t\tbreak;\n-\t\t\t\t\t\t\t} else if (future.isDone()) {\n-\t\t\t\t\t\t\t\tresult = future.get();\n-\t\t\t\t\t\t\t\trunner.join();\n-\t\t\t\t\t\t\t\tevaluatedRules.put(rule.getClass(), result.getSeverity());\n-\t\t\t\t\t\t\t\tbreak;\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\tThread.sleep(100);\n+\t\t\t\t\trunner.start();\n+\t\t\t\t\twhile (true) {\n+\t\t\t\t\t\tif (monitor.isCanceled()) {\n+\t\t\t\t\t\t\tfuture.cancel(true);\n+\t\t\t\t\t\t\trunner.join();\n+\t\t\t\t\t\t\tresult = ResultBuilder.createFor(rule, config::getValue).setSeverity(Severity.NA)\n+\t\t\t\t\t\t\t\t\t.setSummary(Messages.JFR_EDITOR_RULES_CANCELLED)\n+\t\t\t\t\t\t\t\t\t.addResult(RulesHtmlToolkit.FAILED, true).build();\n+\t\t\t\t\t\t\tevaluatedRules.put(rule.getClass(), Severity.NA);\n+\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t} else if (future.isDone()) {\n+\t\t\t\t\t\t\tresult = future.get();\n+\t\t\t\t\t\t\trunner.join();\n+\t\t\t\t\t\t\tevaluatedRules.put(rule.getClass(), result.getSeverity());\n+\t\t\t\t\t\t\tbreak;\n@@ -162,0 +160,1 @@\n+\t\t\t\t\t\tThread.sleep(100);\n","filename":"application\/org.openjdk.jmc.flightrecorder.ui\/src\/main\/java\/org\/openjdk\/jmc\/flightrecorder\/ui\/RuleManager.java","additions":18,"deletions":19,"binary":false,"changes":37,"status":"modified"}]}