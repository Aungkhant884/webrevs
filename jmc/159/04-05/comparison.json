{"files":[{"patch":"@@ -307,1 +307,1 @@\n-\t\t\tStacktraceTreeModel treeModel = new StacktraceTreeModel(items, view.frameSeparator, view.threadRootAtTop);\n+\t\t\tStacktraceTreeModel treeModel = new StacktraceTreeModel(items, view.frameSeparator, !view.threadRootAtTop);\n","filename":"application\/org.openjdk.jmc.flightrecorder.flameview\/src\/main\/java\/org\/openjdk\/jmc\/flightrecorder\/flameview\/views\/FlameGraphView.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -47,0 +47,1 @@\n+import org.openjdk.jmc.flightrecorder.JfrLoaderToolkit;\n@@ -50,0 +51,1 @@\n+import org.openjdk.jmc.flightrecorder.stacktrace.tree.Node;\n@@ -62,0 +64,1 @@\n+\tprivate static IItemCollection realRecording;\n@@ -68,0 +71,1 @@\n+\t\trealRecording = JfrLoaderToolkit.loadEvents(getResource(\"\/wldf.jfr\"));\n@@ -76,1 +80,1 @@\n-\t\tString expectedJson = readResource(\"\/flamegraph-attribute.json\");\n+\t\tString expectedJson = loadResource(\"\/flamegraph-attribute.json\");\n@@ -86,1 +90,1 @@\n-\t\tString expectedJson = readResource(\"\/flamegraph-attribute-inverted.json\");\n+\t\tString expectedJson = loadResource(\"\/flamegraph-attribute-inverted.json\");\n@@ -95,1 +99,1 @@\n-\t\tString expectedJson = readResource(\"\/flamegraph-counts.json\");\n+\t\tString expectedJson = loadResource(\"\/flamegraph-counts.json\");\n@@ -104,1 +108,1 @@\n-\t\tString expectedJson = readResource(\"\/flamegraph-counts-inverted.json\");\n+\t\tString expectedJson = loadResource(\"\/flamegraph-counts-inverted.json\");\n@@ -108,2 +112,11 @@\n-\tprivate String readResource(String resourcePath) throws IOException {\n-\t\ttry (InputStream is = FlameGraphJsonMarshallerTest.class.getResourceAsStream(resourcePath)) {\n+\t@Test\n+\tpublic void testRealRecording() {\n+\t\tStacktraceTreeModel model = new StacktraceTreeModel(realRecording);\n+\t\tSystem.out.println(model.getRoot().getChildren().size());\n+\t\tfor (Node child : model.getRoot().getChildren()) {\n+\t\t\tSystem.out.println(child.getFrame() + \" \" + child.getCumulativeWeight());\n+\t\t}\n+\t}\n+\n+\tprivate static String loadResource(String resourcePath) throws IOException {\n+\t\ttry (InputStream is = getResource(resourcePath)) {\n@@ -117,0 +130,3 @@\n+\tprivate static InputStream getResource(String resourcePath) {\n+\t\treturn FlameGraphJsonMarshallerTest.class.getResourceAsStream(resourcePath);\n+\t}\n","filename":"application\/tests\/org.openjdk.jmc.flightrecorder.flameview.test\/src\/test\/java\/org\/openjdk\/jmc\/flightrecorder\/flameview\/test\/FlameGraphJsonMarshallerTest.java","additions":22,"deletions":6,"binary":false,"changes":28,"status":"modified"},{"filename":"application\/tests\/org.openjdk.jmc.flightrecorder.flameview.test\/src\/test\/resources\/wldf.jfr","binary":true,"status":"added"}]}