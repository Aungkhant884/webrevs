{"files":[{"patch":"@@ -283,0 +283,33 @@\n+\tprivate static class ModelRebuildCallable implements Callable<Void> {\n+\n+\t\tprivate volatile boolean invalid;\n+\t\tprivate FlameGraphView view;\n+\t\tprivate IItemCollection items;\n+\n+\t\tprivate ModelRebuildCallable(FlameGraphView view, IItemCollection items) {\n+\t\t\tthis.invalid = false;\n+\t\t\tthis.view = view;\n+\t\t\tthis.items = items;\n+\t\t}\n+\n+\t\tprivate void setInvalid() {\n+\t\t\tthis.invalid = true;\n+\t\t}\n+\n+\t\t@Override\n+\t\tpublic Void call() throws Exception {\n+\t\t\tview.modelState = ModelState.CALCULATION;\n+\t\t\tStacktraceModel model = new StacktraceModel(view.threadRootAtTop, view.frameSeparator, items);\n+\t\t\tTraceNode root = TraceTreeUtils.createRootWithDescription(items, model.getRootFork().getBranchCount());\n+\t\t\tTraceNode traceNode = TraceTreeUtils.createTree(root, model);\n+\t\t\tString jsonModel = view.toJSonModel(traceNode).toString();\n+\t\t\tif (invalid) {\n+\t\t\t\tview.modelState = ModelState.ABORTED;\n+\t\t\t\treturn null;\n+\t\t\t}\n+\t\t\tview.modelState = ModelState.READY;\n+\t\t\tDisplayToolkit.inDisplayThread().execute(() -> view.setModel(items, jsonModel));\n+\t\t\treturn null;\n+\t\t}\n+\t}\n+\n@@ -364,33 +397,0 @@\n-\tprivate static class ModelRebuildCallable implements Callable<Void> {\n-\n-\t\tprivate volatile boolean invalid;\n-\t\tprivate FlameGraphView view;\n-\t\tprivate IItemCollection items;\n-\n-\t\tprivate ModelRebuildCallable(FlameGraphView view, IItemCollection items) {\n-\t\t\tthis.invalid = false;\n-\t\t\tthis.view = view;\n-\t\t\tthis.items = items;\n-\t\t}\n-\n-\t\tprivate void setInvalid() {\n-\t\t\tthis.invalid = true;\n-\t\t}\n-\n-\t\t@Override\n-\t\tpublic Void call() throws Exception {\n-\t\t\tview.modelState = ModelState.CALCULATION;\n-\t\t\tStacktraceModel model = new StacktraceModel(view.threadRootAtTop, view.frameSeparator, items);\n-\t\t\tTraceNode root = TraceTreeUtils.createRootWithDescription(items, model.getRootFork().getBranchCount());\n-\t\t\tTraceNode traceNode = TraceTreeUtils.createTree(root, model);\n-\t\t\tString jsonModel = view.toJSonModel(traceNode).toString();\n-\t\t\tif (invalid) {\n-\t\t\t\tview.modelState = ModelState.ABORTED;\n-\t\t\t\treturn null;\n-\t\t\t}\n-\t\t\tview.modelState = ModelState.READY;\n-\t\t\tDisplayToolkit.inDisplayThread().execute(() -> view.setModel(items, jsonModel));\n-\t\t\treturn null;\n-\t\t}\n-\t}\n-\n","filename":"application\/org.openjdk.jmc.flightrecorder.flameview\/src\/main\/java\/org\/openjdk\/jmc\/flightrecorder\/flameview\/views\/FlameGraphView.java","additions":33,"deletions":33,"binary":false,"changes":66,"status":"modified"}]}