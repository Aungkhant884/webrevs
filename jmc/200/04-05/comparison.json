{"files":[{"patch":"@@ -108,1 +108,1 @@\n-\t\t\t\tif (type.hasConstantPool()) {\n+\t\t\t\tif (useConstantPoolReferences) {\n@@ -139,0 +139,1 @@\n+\n@@ -141,7 +142,0 @@\n-\t\tif (value == null && builtin != TypesImpl.Builtin.STRING) {\n-\t\t\t\/\/ skip the non-string built-in values but use CP index '0' if CP is requested\n-\t\t\tif (useCp) {\n-\t\t\t\twriter.writeLong(0L);\n-\t\t\t}\n-\t\t\treturn;\n-\t\t}\n@@ -165,1 +159,1 @@\n-\t\t\twriter.writeBytes((byte) value);\n+\t\t\twriter.writeBytes(value != null ? (byte) value : 0);\n@@ -169,1 +163,1 @@\n-\t\t\twriter.writeChar((char) value);\n+\t\t\twriter.writeChar(value != null ? (char) value : 0);\n@@ -173,1 +167,1 @@\n-\t\t\twriter.writeShort((short) value);\n+\t\t\twriter.writeShort(value != null ? (short) value : 0);\n@@ -177,1 +171,1 @@\n-\t\t\twriter.writeInt((int) value);\n+\t\t\twriter.writeInt(value != null ? (int) value : 0);\n@@ -181,1 +175,1 @@\n-\t\t\twriter.writeLong((long) value);\n+\t\t\twriter.writeLong(value != null ? (long) value : 0);\n@@ -185,1 +179,1 @@\n-\t\t\twriter.writeFloat((float) value);\n+\t\t\twriter.writeFloat(value != null ? (float) value : 0);\n@@ -189,1 +183,1 @@\n-\t\t\twriter.writeDouble((double) value);\n+\t\t\twriter.writeDouble(value != null ? (double) value : 0);\n@@ -193,1 +187,1 @@\n-\t\t\twriter.writeBoolean((boolean) value);\n+\t\t\twriter.writeBoolean(value != null && (boolean) value);\n","filename":"core\/org.openjdk.jmc.flightrecorder.writer\/src\/main\/java\/org\/openjdk\/jmc\/flightrecorder\/writer\/ConstantPool.java","additions":10,"deletions":16,"binary":false,"changes":26,"status":"modified"}]}