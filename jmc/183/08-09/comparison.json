{"files":[{"patch":"@@ -89,0 +89,1 @@\n+        printf \" \\t%s\\t%s\\n\" \"--runAgentCustomExample --class:'org.openjdk.jmc.agent.test.InstrumentMe'\" \"to run custom agent class, once Agent was packaged\"\n@@ -210,1 +211,10 @@\n-function runAgentExample(){\n+function runAgentByClass(){\n+    local agentExampleClass=$1\n+    if [[ -z \"${agentExampleClass}\" ]]; then\n+        err_log \"emtpy class\"\n+        printHelp\n+        exit 1\n+    else\n+        printf \"example agent class: %s\\n\" \"${agentExampleClass}\"\n+    fi\n+\n@@ -230,1 +240,1 @@\n-            java -XX:+UnlockCommercialFeatures -XX:+FlightRecorder -javaagent:${pathToAgentJar}=${pathToAgentTargetDir}\/test-classes\/org\/openjdk\/jmc\/agent\/test\/jfrprobes_template.xml -cp ${pathToAgentJar}:${pathToAgentTargetDir}\/test-classes\/ org.openjdk.jmc.agent.test.InstrumentMe\n+            java -XX:+UnlockCommercialFeatures -XX:+FlightRecorder -javaagent:${pathToAgentJar}=${pathToAgentTargetDir}\/test-classes\/org\/openjdk\/jmc\/agent\/test\/jfrprobes_template.xml -cp ${pathToAgentJar}:${pathToAgentTargetDir}\/test-classes\/ ${agentExampleClass}\n@@ -232,1 +242,1 @@\n-            java --add-opens java.base\/jdk.internal.misc=ALL-UNNAMED -XX:+FlightRecorder -javaagent:${pathToAgentJar}=${pathToAgentTargetDir}\/test-classes\/org\/openjdk\/jmc\/agent\/test\/jfrprobes_template.xml -cp ${pathToAgentJar}:${pathToAgentTargetDir}\/test-classes\/ org.openjdk.jmc.agent.test.InstrumentMe\n+            java --add-opens java.base\/jdk.internal.misc=ALL-UNNAMED -XX:+FlightRecorder -javaagent:${pathToAgentJar}=${pathToAgentTargetDir}\/test-classes\/org\/openjdk\/jmc\/agent\/test\/jfrprobes_template.xml -cp ${pathToAgentJar}:${pathToAgentTargetDir}\/test-classes\/ ${agentExampleClass}\n@@ -234,1 +244,1 @@\n-            java --add-opens java.base\/jdk.internal.misc=ALL-UNNAMED -javaagent:${pathToAgentJar}=${pathToAgentTargetDir}\/test-classes\/org\/openjdk\/jmc\/agent\/test\/jfrprobes_template.xml -cp ${pathToAgentJar}:${pathToAgentTargetDir}\/test-classes\/ org.openjdk.jmc.agent.test.InstrumentMe\n+            java --add-opens java.base\/jdk.internal.misc=ALL-UNNAMED -javaagent:${pathToAgentJar}=${pathToAgentTargetDir}\/test-classes\/org\/openjdk\/jmc\/agent\/test\/jfrprobes_template.xml -cp ${pathToAgentJar}:${pathToAgentTargetDir}\/test-classes\/ ${agentExampleClass}\n@@ -272,1 +282,1 @@\n-                runAgentExample\n+                runAgentByClass \"org.openjdk.jmc.agent.test.InstrumentMe\"\n@@ -275,1 +285,1 @@\n-                err_log \"unknown argument \\\"$1\\\"\"\n+                err_log \"unknown arguments: ${$1}, ${$2}, ${$3}\"\n","filename":"build.sh","additions":16,"deletions":6,"binary":false,"changes":22,"status":"modified"}]}