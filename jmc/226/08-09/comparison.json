{"files":[{"patch":"@@ -84,1 +84,0 @@\n-\n@@ -128,1 +127,0 @@\n-\t\t\t\t\tdialog.setHelpAvailable(true);\n","filename":"application\/org.openjdk.jmc.console.agent\/src\/main\/java\/org\/openjdk\/jmc\/console\/agent\/actions\/AgentEditorOpener.java","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -46,1 +46,0 @@\n-import org.eclipse.swt.widgets.FileDialog;\n@@ -64,2 +63,0 @@\n-import org.openjdk.jmc.flightrecorder.ui.FlightRecorderUI;\n-import org.openjdk.jmc.rjmx.IConnectionHandle;\n@@ -102,1 +99,0 @@\n-\n@@ -185,2 +181,11 @@\n-\t\t\tpreset.deserialize(helper.retrieveEventProbes());\n-\t\t\tpresetRepository.addPreset(preset);\n+\t\t\t\/\/ If there is no currently loaded instrumentation there is nothing to save.\n+\t\t\tif (!helper.retrieveEventProbes().isEmpty()) {\n+\t\t\t\tpreset.deserialize(helper.retrieveEventProbes());\n+\t\t\t\tpresetRepository.addPreset(preset);\n+\t\t\t\tDialogToolkit.openConfirmOnUiThread(Messages.PresetSelectorWizardPage_SAVE_PRESET_TITLE, MessageFormat\n+\t\t\t\t\t\t.format(Messages.PresetSelectorWizardPage_SAVE_PRESET_MESSAGE, preset.getFileName()));\n+\t\t\t} else {\n+\t\t\t\tIWorkbenchWindow window = PlatformUI.getWorkbench().getActiveWorkbenchWindow();\n+\t\t\t\tDialogToolkit.showWarning(window.getShell(), Messages.AgentEditorUI_MESSAGE_EMPTY_PRESET_TITLE,\n+\t\t\t\t\t\tMessages.AgentEditorUI_MESSAGE_EMPTY_PRESET);\n+\t\t\t}\n@@ -188,0 +193,1 @@\n+\t\t\tSystem.out.println(preset.getFileName());\n@@ -193,2 +199,0 @@\n-\t\tDialogToolkit.openConfirmOnUiThread(Messages.PresetSelectorWizardPage_SAVE_PRESET_TITLE,\n-\t\t\t\tMessageFormat.format(Messages.PresetSelectorWizardPage_SAVE_PRESET_MESSAGE, preset.getFileName()));\n","filename":"application\/org.openjdk.jmc.console.agent\/src\/main\/java\/org\/openjdk\/jmc\/console\/agent\/editor\/AgentEditorUi.java","additions":12,"deletions":8,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -37,1 +37,0 @@\n-import org.eclipse.jface.viewers.IContentProvider;\n@@ -39,0 +38,2 @@\n+import org.eclipse.jface.window.Window;\n+import org.eclipse.jface.wizard.WizardDialog;\n@@ -43,0 +44,1 @@\n+import org.eclipse.swt.widgets.Display;\n@@ -114,1 +116,1 @@\n-\t\t\t\twhile (DialogToolkit.openWizardWithHelp(new EventEditingWizard(event))) {\n+\t\t\t\twhile (displayWizard(event)) {\n@@ -135,1 +137,1 @@\n-\t\t\t\twhile (DialogToolkit.openWizardWithHelp(new EventEditingWizard(workingCopy))) {\n+\t\t\t\twhile (displayWizard(workingCopy)) {\n@@ -178,0 +180,7 @@\n+\tprivate boolean displayWizard(IEvent event) {\n+\t\tEventEditingWizard wizard = new EventEditingWizard(event);\n+\t\twizard.setHelpAvailable(false);\n+\t\tWizardDialog dialog = new WizardDialog(Display.getCurrent().getActiveShell(), wizard);\n+\t\treturn dialog.open() == Window.OK;\n+\t}\n+\n","filename":"application\/org.openjdk.jmc.console.agent\/src\/main\/java\/org\/openjdk\/jmc\/console\/agent\/manager\/wizards\/PresetEditingWizardEventPage.java","additions":12,"deletions":3,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -38,0 +38,2 @@\n+import org.eclipse.jface.window.Window;\n+import org.eclipse.jface.wizard.WizardDialog;\n@@ -43,0 +45,1 @@\n+import org.eclipse.swt.widgets.Display;\n@@ -125,1 +128,1 @@\n-\t\t\t\twhile (DialogToolkit.openWizardWithHelp(new PresetEditingWizard(preset))) {\n+\t\t\t\twhile (displayWizard(preset)) {\n@@ -146,1 +149,1 @@\n-\t\t\t\twhile (DialogToolkit.openWizardWithHelp(new PresetEditingWizard(workingCopy))) {\n+\t\t\t\twhile (displayWizard(workingCopy)) {\n@@ -235,0 +238,7 @@\n+\tprivate boolean displayWizard(IPreset preset) {\n+\t\tPresetEditingWizard wizard = new PresetEditingWizard(preset);\n+\t\twizard.setHelpAvailable(false);\n+\t\tWizardDialog dialog = new WizardDialog(Display.getCurrent().getActiveShell(), wizard);\n+\t\treturn dialog.open() == Window.OK;\n+\t}\n+\n","filename":"application\/org.openjdk.jmc.console.agent\/src\/main\/java\/org\/openjdk\/jmc\/console\/agent\/manager\/wizards\/PresetManagerPage.java","additions":12,"deletions":2,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -51,0 +51,2 @@\n+\tpublic static String AgentEditorUI_MESSAGE_EMPTY_PRESET;\n+\tpublic static String AgentEditorUI_MESSAGE_EMPTY_PRESET_TITLE;\n","filename":"application\/org.openjdk.jmc.console.agent\/src\/main\/java\/org\/openjdk\/jmc\/console\/agent\/messages\/internal\/Messages.java","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -36,0 +36,1 @@\n+import org.eclipse.jface.dialogs.TrayDialog;\n@@ -41,0 +42,1 @@\n+import org.eclipse.jface.wizard.WizardDialog;\n@@ -87,1 +89,0 @@\n-\n","filename":"application\/org.openjdk.jmc.console.agent\/src\/main\/java\/org\/openjdk\/jmc\/console\/agent\/wizards\/BaseWizardPage.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -41,0 +41,1 @@\n+import org.eclipse.jface.wizard.WizardDialog;\n@@ -64,0 +65,2 @@\n+\t\tthis.setHelpAvailable(false);\n+\t\tWizardDialog.setDialogHelpAvailable(false);\n","filename":"application\/org.openjdk.jmc.console.agent\/src\/main\/java\/org\/openjdk\/jmc\/console\/agent\/wizards\/StartAgentWizard.java","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -36,0 +36,2 @@\n+import org.eclipse.jface.dialogs.TrayDialog;\n+import org.eclipse.jface.wizard.WizardDialog;\n@@ -62,1 +64,0 @@\n-\n@@ -124,0 +125,1 @@\n+\t\tTrayDialog.setDialogHelpAvailable(false);\n@@ -136,1 +138,0 @@\n-\n","filename":"application\/org.openjdk.jmc.console.agent\/src\/main\/java\/org\/openjdk\/jmc\/console\/agent\/wizards\/StartAgentWizardPage.java","additions":3,"deletions":2,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -48,0 +48,2 @@\n+AgentEditorUI_MESSAGE_EMPTY_PRESET=There is no currently active instrumentation in the target. Preset will not be saved.\n+AgentEditorUI_MESSAGE_EMPTY_PRESET_TITLE=Unable to save preset\n","filename":"application\/org.openjdk.jmc.console.agent\/src\/main\/resources\/org\/openjdk\/jmc\/console\/agent\/messages\/internal\/messages.properties","additions":2,"deletions":0,"binary":false,"changes":2,"status":"modified"}]}