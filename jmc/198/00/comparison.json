{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, 2020 Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2020, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -91,1 +91,0 @@\n-\n@@ -508,2 +507,4 @@\n-\t\tCopySelectionAction copyAction = new CopySelectionAction(viewer,\n-\t\t\t\tFormatToolkit.selectionFormatter(stackTraceLabelProvider, countLabelProvider, percentageLabelProvider));\n+\t\tList<String> headers = Arrays.asList(Messages.STACKTRACE_VIEW_STACK_TRACE,\n+\t\t\t\tMessages.STACKTRACE_VIEW_COUNT_COLUMN_NAME, Messages.STACKTRACE_VIEW_PERCENTAGE_COLUMN_NAME);\n+\t\tCopySelectionAction copyAction = new CopySelectionAction(viewer, FormatToolkit.selectionFormatter(headers,\n+\t\t\t\tstackTraceLabelProvider, countLabelProvider, percentageLabelProvider));\n","filename":"application\/org.openjdk.jmc.flightrecorder.ui\/src\/main\/java\/org\/openjdk\/jmc\/flightrecorder\/ui\/views\/stacktrace\/StacktraceView.java","additions":5,"deletions":4,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -87,0 +87,14 @@\n+\tpublic static Function<IStructuredSelection, Stream<String>> selectionFormatter(\n+\t\tList<String> headers, ILabelProvider ... lps) {\n+\t\treturn selection -> {\n+\t\t\tFunction<Stream<String>, String> rowFormatter = getPreferredRowFormatter();\n+\t\t\tFunction<Object, String> objectFormatter = o -> rowFormatter.apply(Stream.of(lps).map(lp -> lp.getText(o)));\n+\t\t\tStream<String> strings = FormatToolkit.formatSelection(selection, objectFormatter);\n+\t\t\tif (CopySettings.getInstance().shouldCopyColumnHeaders()) {\n+\t\t\t\treturn Stream.concat(Stream.of(rowFormatter.apply(headers.stream())), strings);\n+\t\t\t} else {\n+\t\t\t\treturn strings;\n+\t\t\t}\n+\t\t};\n+\t}\n+\n","filename":"application\/org.openjdk.jmc.ui\/src\/main\/java\/org\/openjdk\/jmc\/ui\/misc\/FormatToolkit.java","additions":15,"deletions":1,"binary":false,"changes":16,"status":"modified"}]}