{"files":[{"patch":"@@ -46,6 +46,5 @@\n-@REM based on US format of %date%: Fri 10\/30\/2020\n-SET DATE_STR=%DATE:~10,4%%DATE:~4,2%%DATE:~7,2%\n-SET TIME_STR=%TIME:~0,2%%TIME:~3,2%%TIME:~6,2%\n-SET P2_SITE_LOG=%cd%\\build_%DATE_STR%_%TIME_STR%.1.p2_site.log\n-SET JETTY_LOG=%cd%\\build_%DATE_STR%_%TIME_STR%.2.jetty.log\n-SET INSTALL_LOG=%cd%\\build_%DATE_STR%_%TIME_STR%.3.install.log\n+for \/f \"skip=1\" %%A in ('wmic os get localdatetime ^| findstr .') do (set LOCALDATETIME=%%A)\n+set TIMESTAMP=%LOCALDATETIME:~0,14%\n+set P2_SITE_LOG=%cd%\\build_%TIMESTAMP%.1.p2_site.log\n+set JETTY_LOG=%cd%\\build_%TIMESTAMP%.2.jetty.log\n+set INSTALL_LOG=%cd%\\build_%TIMESTAMP%.3.install.log\n@@ -67,1 +66,1 @@\n-call mvn -f core\\pom.xml clean install --log-file \"%INSTALL_LOG%\"\n+call mvn -f core\\pom.xml clean install -DskipTests=true --log-file \"%INSTALL_LOG%\"\n@@ -69,0 +68,1 @@\n+\tcall :killJetty %1\n@@ -78,1 +78,1 @@\n-for \/F \"tokens=2 delims=,\" %%R IN ('tasklist \/FI \"Windowtitle eq %1\" \/NH \/FO csv') do (\n+for \/F \"tokens=2 delims=,\" %%R in ('tasklist \/FI \"Windowtitle eq %1\" \/NH \/FO csv') do (\n@@ -91,1 +91,1 @@\n-SET JETTY_TITLE=jmc-jetty-%time%\n+set JETTY_TITLE=jmc-jetty-%time%\n@@ -104,1 +104,1 @@\n-SET JETTY_TITLE=jmc-jetty-%time%\n+set JETTY_TITLE=jmc-jetty-%time%\n@@ -109,4 +109,3 @@\n-@REM based on US format of %date%: Fri 10\/30\/2020\n-SET DATE_STR=%DATE:~10,4%%DATE:~4,2%%DATE:~7,2%\n-SET TIME_STR=%TIME:~0,2%%TIME:~3,2%%TIME:~6,2%\n-SET PACKAGE_LOG=%cd%\\build_%DATE_STR%_%TIME_STR%.4.package.log\n+for \/f \"skip=1\" %%A in ('wmic os get localdatetime ^| findstr .') do (set LOCALDATETIME=%%A)\n+set TIMESTAMP=%LOCALDATETIME:~0,14%\n+set PACKAGE_LOG=%cd%\\build_%TIMESTAMP%.4.package.log\n@@ -115,1 +114,1 @@\n-echo You can now run jmc by calling \"%0 --run\" or \"%cd%\\target\\products\\org.openjdk.jmc\\win32\\win32\\x86_64\\JDK Mission Control\\jmc.exe\"\n+if %ERRORLEVEL% == 0 echo You can now run jmc by calling \"%0 --run\" or \"%cd%\\target\\products\\org.openjdk.jmc\\win32\\win32\\x86_64\\JDK Mission Control\\jmc.exe\"\n@@ -131,1 +130,1 @@\n-SET JMC_EXE=%cd%\\target\\products\\org.openjdk.jmc\\win32\\win32\\x86_64\\JDK Mission Control\\jmc.exe\n+set JMC_EXE=%cd%\\target\\products\\org.openjdk.jmc\\win32\\win32\\x86_64\\JDK Mission Control\\jmc.exe\n","filename":"build.bat","additions":15,"deletions":16,"binary":false,"changes":31,"status":"modified"}]}