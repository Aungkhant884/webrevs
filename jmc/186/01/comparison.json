{"files":[{"patch":"@@ -68,1 +68,1 @@\n-\t\t\t\t\t\t\t<url>https:\/\/cdn.jsdelivr.net\/gh\/spiermar\/d3-flame-graph@2.0.3\/dist\/d3-flamegraph.css<\/url>\n+\t\t\t\t\t\t\t<url>https:\/\/cdn.jsdelivr.net\/npm\/d3-flame-graph@4.0.6\/dist\/d3-flamegraph.css<\/url>\n@@ -74,1 +74,1 @@\n-\t\t\t\t\t\t<id>ie-html5shiv-js<\/id>\n+\t\t\t\t\t\t<id>d3-v6-js<\/id>\n@@ -80,1 +80,1 @@\n-\t\t\t\t\t\t\t<url>https:\/\/oss.maxcdn.com\/html5shiv\/3.7.2\/html5shiv.min.js<\/url>\n+\t\t\t\t\t\t\t<url>https:\/\/d3js.org\/d3.v6.min.js<\/url>\n@@ -86,1 +86,1 @@\n-\t\t\t\t\t\t<id>ie-respond-js<\/id>\n+\t\t\t\t\t\t<id>d3-flamegraph-tooltip-js<\/id>\n@@ -92,25 +92,1 @@\n-\t\t\t\t\t\t\t<url>https:\/\/oss.maxcdn.com\/respond\/1.4.2\/respond.min.js<\/url>\n-\t\t\t\t\t\t\t<unpack>false<\/unpack>\n-\t\t\t\t\t\t\t<outputDirectory>${download-maven-plugin.output}<\/outputDirectory>\n-\t\t\t\t\t\t<\/configuration>\n-\t\t\t\t\t<\/execution>\n-\t\t\t\t\t<execution>\n-\t\t\t\t\t\t<id>d3-v4-js<\/id>\n-\t\t\t\t\t\t<phase>${download-maven-plugin.phase}<\/phase>\n-\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t<goal>wget<\/goal>\n-\t\t\t\t\t\t<\/goals>\n-\t\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t\t<url>https:\/\/d3js.org\/d3.v4.min.js<\/url>\n-\t\t\t\t\t\t\t<unpack>false<\/unpack>\n-\t\t\t\t\t\t\t<outputDirectory>${download-maven-plugin.output}<\/outputDirectory>\n-\t\t\t\t\t\t<\/configuration>\n-\t\t\t\t\t<\/execution>\n-\t\t\t\t\t<execution>\n-\t\t\t\t\t\t<id>d3-tip-js<\/id>\n-\t\t\t\t\t\t<phase>${download-maven-plugin.phase}<\/phase>\n-\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t<goal>wget<\/goal>\n-\t\t\t\t\t\t<\/goals>\n-\t\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t\t<url>https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/d3-tip\/0.9.1\/d3-tip.min.js<\/url>\n+\t\t\t\t\t\t\t<url>https:\/\/cdn.jsdelivr.net\/npm\/d3-flame-graph@4.0.6\/dist\/d3-flamegraph-tooltip.js<\/url>\n@@ -128,1 +104,1 @@\n-\t\t\t\t\t\t\t<url>https:\/\/cdn.jsdelivr.net\/gh\/spiermar\/d3-flame-graph@2.0.3\/dist\/d3-flamegraph.min.js<\/url>\n+\t\t\t\t\t\t\t<url>https:\/\/cdn.jsdelivr.net\/npm\/d3-flame-graph@4.0.6\/dist\/d3-flamegraph.js<\/url>\n","filename":"application\/org.openjdk.jmc.flightrecorder.flameview\/pom.xml","additions":6,"deletions":30,"binary":false,"changes":36,"status":"modified"},{"patch":"@@ -117,1 +117,1 @@\n-\t\tsb.append(addQuotes(\"v\")).append(\": \").append(addQuotes(String.valueOf((int) value)));\n+\t\tsb.append(addQuotes(\"v\")).append(\": \").append(String.valueOf((int) value));\n@@ -121,1 +121,1 @@\n-\tprivate static String createJsonProps(String frameName, String description) {\n+\tprivate static String createJsonProps(String frameName, String description, double value) {\n@@ -128,0 +128,2 @@\n+\t\tsb.append(\",\");\n+\t\tsb.append(addQuotes(\"v\")).append(\": \").append(String.valueOf((int) value));\n@@ -154,1 +156,2 @@\n-\t\treturn createJsonProps(rootTitle, rootDescription);\n+\t\treturn createJsonProps(rootTitle, rootDescription,\n+\t\t\t\teventCountsByType.values().stream().mapToLong(Long::longValue).sum());\n","filename":"application\/org.openjdk.jmc.flightrecorder.flameview\/src\/main\/java\/org\/openjdk\/jmc\/flightrecorder\/flameview\/FlameGraphJsonMarshaller.java","additions":6,"deletions":3,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -123,1 +123,1 @@\n-\t\t\/\/ from: https:\/\/cdn.jsdelivr.net\/gh\/spiermar\/d3-flame-graph@2.0.3\/dist\/d3-flamegraph.css\n+\t\t\/\/ from: https:\/\/cdn.jsdelivr.net\/npm\/d3-flame-graph@4.0.6\/dist\/d3-flamegraph.css\n@@ -125,10 +125,6 @@\n-\t\t\/\/ from: https:\/\/oss.maxcdn.com\/html5shiv\/3.7.2\/html5shiv.min.js\n-\t\tString jsHtml5shiv = \"jslibs\/html5shiv.min.js\";\n-\t\t\/\/ from: https:\/\/oss.maxcdn.com\/respond\/1.4.2\/respond.min.js\n-\t\tString jsRespond = \"jslibs\/respond.min.js\";\n-\t\t\/\/ from: https:\/\/d3js.org\/d3.v4.min.js\n-\t\tString jsD3V4 = \"jslibs\/d3.v4.min.js\";\n-\t\t\/\/ from: https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/d3-tip\/0.9.1\/d3-tip.min.js\n-\t\tString jsD3Tip = \"jslibs\/d3-tip.min.js\";\n-\t\t\/\/ from: https:\/\/cdn.jsdelivr.net\/gh\/spiermar\/d3-flame-graph@2.0.3\/dist\/d3-flamegraph.min.js\n-\t\tString jsD3FlameGraph = \"jslibs\/d3-flamegraph.min.js\";\n+\t\t\/\/ from: https:\/\/d3js.org\/d3.v6.min.js\n+\t\tString jsD3V6 = \"jslibs\/d3.v6.min.js\";\n+\t\t\/\/ from: https:\/\/cdn.jsdelivr.net\/npm\/d3-flame-graph@4.0.6\/dist\/d3-flamegraph-tooltip.js\n+\t\tString jsD3Tip = \"jslibs\/d3-flamegraph-tooltip.js\";\n+\t\t\/\/ from: https:\/\/cdn.jsdelivr.net\/npm\/d3-flame-graph@4.0.6\/dist\/d3-flamegraph.js\n+\t\tString jsD3FlameGraph = \"jslibs\/d3-flamegraph.js\";\n@@ -139,2 +135,1 @@\n-\t\tString jsIeLibraries = loadLibraries(jsHtml5shiv, jsRespond);\n-\t\tString jsD3Libraries = loadLibraries(jsD3V4, jsD3Tip, jsD3FlameGraph);\n+\t\tString jsD3 = loadLibraries(jsD3V6, jsD3FlameGraph, jsD3Tip);\n@@ -146,4 +141,3 @@\n-\t\t\/\/ formatter arguments for the template: %1 - CSSs stylesheets, %2 - IE9 specific scripts,\n-\t\t\/\/ %3 - Search Icon Base64, %4 - 3rd party scripts, %5 - Flameview Coloring,\n-\t\tHTML_PAGE = String.format(fileContent(\"page.template\"), styleheets, jsIeLibraries, magnifierIcon, jsD3Libraries,\n-\t\t\t\tjsFlameviewColoring);\n+\t\t\/\/ formatter arguments for the template: %1 - CSSs stylesheets,\n+\t\t\/\/ %2 - Search Icon Base64, %3 - 3rd party scripts, %4 - Flameview Coloring,\n+\t\tHTML_PAGE = String.format(fileContent(\"page.template\"), styleheets, magnifierIcon, jsD3, jsFlameviewColoring);\n","filename":"application\/org.openjdk.jmc.flightrecorder.flameview\/src\/main\/java\/org\/openjdk\/jmc\/flightrecorder\/flameview\/views\/FlameGraphView.java","additions":11,"deletions":17,"binary":false,"changes":28,"status":"modified"},{"patch":"@@ -0,0 +1,1 @@\n+\n@@ -149,1 +150,1 @@\n-\t\tif (d.data.v === undefined) {\n+\t\tif (d.data.d && d.data.d.includes(\"|\")) {\n","filename":"application\/org.openjdk.jmc.flightrecorder.flameview\/src\/main\/js\/flameview.js","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -7,4 +7,0 @@\n-\t<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->\n-\t<!--[if lt IE 9]>\n-\t\t<script>%2$s<\/script>\n-\t<![endif]-->\n@@ -25,1 +21,1 @@\n-\t\t<img src=\"data:image\/png;base64, %3$s\" width=\"12\" height=\"12\">\n+\t\t<img src=\"data:image\/png;base64, %2$s\" width=\"12\" height=\"12\">\n@@ -28,2 +24,6 @@\n-\t<script type=\"text\/javascript\">%4$s<\/script>\n-\t<script type=\"text\/javascript\">%5$s<\/script>\n+\t<script type=\"text\/javascript\">\n+\t%3$s\n+\t<\/script>\n+\t<script type=\"text\/javascript\">\n+\t%4$s\n+\t<\/script>\n@@ -62,5 +62,2 @@\n-\t\tconst tip = d3.tip()\n-        \t.direction(\"s\")\n-        \t.offset([8, 0])\n-        \t.attr('class', 'd3-flame-graph-tip')\n-        \t.html(adjustTip);\n+\t\tconst tip = flamegraph.tooltip.defaultFlamegraphTooltip()\n+\t\t\t.html(adjustTip);\n@@ -69,1 +66,1 @@\n-\t\t\tflameGraph = d3.flamegraph()\n+\t\t\tflameGraph = flamegraph()\n@@ -77,1 +74,0 @@\n-\t\t\t\t.differential(false)\n@@ -185,1 +181,1 @@\n-<\/html>\n\\ No newline at end of file\n+<\/html>\n","filename":"application\/org.openjdk.jmc.flightrecorder.flameview\/src\/main\/resources\/page.template","additions":11,"deletions":15,"binary":false,"changes":26,"status":"modified"},{"patch":"@@ -550,1 +550,1 @@\n-Copyright 2010-2017 Mike Bostock\n+Copyright 2010-2020 Mike Bostock\n","filename":"license\/THIRDPARTYREADME.txt","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}