{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -42,1 +42,0 @@\n-import java.util.stream.Stream;\n@@ -157,1 +156,0 @@\n-\t\tfinal ThreadDumpCollection parent;\n@@ -159,1 +157,1 @@\n-\t\tThreadDump(String title, String body, ThreadDumpCollection parent) {\n+\t\tThreadDump(String title, String body) {\n@@ -161,1 +159,0 @@\n-\t\t\tthis.parent = parent;\n@@ -406,17 +403,1 @@\n-\t\tList<?> list = selection.toList();\n-\t\t@SuppressWarnings(\"unchecked\")\n-\t\tSet<ThreadDumpCollection> parents = (Set<ThreadDumpCollection>) list.stream()\n-\t\t\t\t.filter(o -> o instanceof ThreadDumpCollection).collect(Collectors.toSet());\n-\t\treturn list.stream()\n-\t\t\t\t.flatMap(o -> o instanceof ThreadDumpCollection\n-\t\t\t\t\t\t? getThreadDumpCollectionStreamForCopy((ThreadDumpCollection) o)\n-\t\t\t\t\t\t: getThreadDumpStreamForCopy(parents, (ThreadDump) o))\n-\t\t\t\t.map(n -> n.body).collect(Collectors.joining(SEPARATOR));\n-\t}\n-\n-\tprivate static Stream<Node> getThreadDumpCollectionStreamForCopy(ThreadDumpCollection tdc) {\n-\t\treturn Stream.concat(Stream.of(tdc), Stream.of((tdc.dumps)));\n-\t}\n-\n-\tprivate static Stream<Node> getThreadDumpStreamForCopy(Set<ThreadDumpCollection> parents, ThreadDump td) {\n-\t\treturn parents.contains(td.parent) ? Stream.empty() : Stream.concat(Stream.of(td.parent), Stream.of(td));\n+\t\treturn joinSelection(selection.toList());\n@@ -439,1 +420,1 @@\n-\t\t\t\tdumps[i] = parseThreadDump(parts[i + 1], parent);\n+\t\t\t\tdumps[i] = parseThreadDump(parts[i + 1]);\n@@ -447,1 +428,1 @@\n-\tprivate static ThreadDump parseThreadDump(String str, ThreadDumpCollection parent) {\n+\tprivate static ThreadDump parseThreadDump(String str) {\n@@ -452,1 +433,1 @@\n-\t\treturn new ThreadDump(lastQuote > 1 ? firstLine.substring(1, lastQuote) : firstLine, str, parent);\n+\t\treturn new ThreadDump(lastQuote > 1 ? firstLine.substring(1, lastQuote) : firstLine, str);\n","filename":"application\/org.openjdk.jmc.flightrecorder.ui\/src\/main\/java\/org\/openjdk\/jmc\/flightrecorder\/ui\/pages\/ThreadDumpsPage.java","additions":6,"deletions":25,"binary":false,"changes":31,"status":"modified"}]}