{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -40,0 +40,2 @@\n+import org.eclipse.jface.util.IPropertyChangeListener;\n+import org.eclipse.jface.util.PropertyChangeEvent;\n@@ -42,0 +44,1 @@\n+import org.openjdk.jmc.browser.attach.preferences.PreferenceConstants;\n@@ -51,1 +54,0 @@\n-\tprivate static final long LOCAL_REFRESH_INTERVAL = 5000;\n@@ -73,1 +75,1 @@\n-\t\t\t\t\tThread.sleep(LOCAL_REFRESH_INTERVAL);\n+\t\t\t\t\tThread.sleep(getRefreshInterval());\n@@ -147,0 +149,17 @@\n+\t\tBrowserAttachPlugin.getDefault().getPreferenceStore().addPropertyChangeListener(new IPropertyChangeListener() {\n+\t\t\t@Override\n+\t\t\tpublic void propertyChange(PropertyChangeEvent event) {\n+\t\t\t\tif (event.getProperty().equals(PreferenceConstants.P_REFRESH_INTERVAL)) {\n+\t\t\t\t\tif (scanner != null) {\n+\t\t\t\t\t\tscanner.shutdown();\n+\t\t\t\t\t\tscannerThread.interrupt();\n+\t\t\t\t\t\tstartScanner();\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t});\n+\n+\t\tstartScanner();\n+\t}\n+\n+\tprivate void startScanner() {\n@@ -175,0 +194,4 @@\n+\tprivate static final int getRefreshInterval() {\n+\t\treturn BrowserAttachPlugin.getDefault().getPreferenceStore().getInt(PreferenceConstants.P_REFRESH_INTERVAL);\n+\t}\n+\n","filename":"application\/org.openjdk.jmc.browser.attach\/src\/main\/java\/org\/openjdk\/jmc\/browser\/attach\/LocalDescriptorProvider.java","additions":26,"deletions":3,"binary":false,"changes":29,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -37,0 +37,1 @@\n+import org.eclipse.jface.preference.IntegerFieldEditor;\n@@ -67,0 +68,4 @@\n+\t\tIntegerFieldEditor browserScanInterval = new IntegerFieldEditor(PreferenceConstants.P_REFRESH_INTERVAL,\n+\t\t\t\tMessages.AttachPreferencePage_BROWSER_REFRESH_INTERVAL, getFieldEditorParent());\n+\t\tbrowserScanInterval.setValidRange(1000, Integer.MAX_VALUE);\n+\t\taddField(browserScanInterval);\n","filename":"application\/org.openjdk.jmc.browser.attach\/src\/main\/java\/org\/openjdk\/jmc\/browser\/attach\/preferences\/AttachPreferencePage.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -41,0 +41,1 @@\n+\tpublic static String AttachPreferencePage_BROWSER_REFRESH_INTERVAL;\n","filename":"application\/org.openjdk.jmc.browser.attach\/src\/main\/java\/org\/openjdk\/jmc\/browser\/attach\/preferences\/Messages.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -39,0 +39,5 @@\n+\t\/**\n+\t * Preference key for setting the refresh interval of the JVM Browser\n+\t *\/\n+\tpublic static final String P_REFRESH_INTERVAL = \"refreshInterval\"; \/\/$NON-NLS-1$\n+\n","filename":"application\/org.openjdk.jmc.browser.attach\/src\/main\/java\/org\/openjdk\/jmc\/browser\/attach\/preferences\/PreferenceConstants.java","additions":6,"deletions":1,"binary":false,"changes":7,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -48,0 +48,1 @@\n+\t\tstore.setDefault(PreferenceConstants.P_REFRESH_INTERVAL, 5000);\n","filename":"application\/org.openjdk.jmc.browser.attach\/src\/main\/java\/org\/openjdk\/jmc\/browser\/attach\/preferences\/PreferenceInitializer.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -2,1 +2,1 @@\n-#  Copyright (c) 2018, Oracle and\/or its affiliates. All rights reserved.\n+#  Copyright (c) 2018, 2023, Oracle and\/or its affiliates. All rights reserved.\n@@ -34,0 +34,1 @@\n+AttachPreferencePage_BROWSER_REFRESH_INTERVAL=JVM Browser Refresh Interval [ms]:\n","filename":"application\/org.openjdk.jmc.browser.attach\/src\/main\/resources\/org\/openjdk\/jmc\/browser\/attach\/preferences\/messages.properties","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"}]}