{"files":[{"patch":"@@ -446,0 +446,1 @@\n+    uint length_in_bytes = Matcher::vector_length_in_bytes(this);\n@@ -447,2 +448,7 @@\n-    __ sve_ptrue_lanecnt(as_PRegister($dst$$reg), size, Matcher::vector_length(this));\n-    __ sve_cmp(Assembler::NE, as_PRegister($dst$$reg), size, as_PRegister($dst$$reg), as_FloatRegister($tmp$$reg), 0);\n+    if (length_in_bytes < MaxVectorSize) {\n+      __ sve_ptrue_lanecnt(as_PRegister($dst$$reg), size, Matcher::vector_length(this));\n+      __ sve_cmp(Assembler::NE, as_PRegister($dst$$reg), size,\n+                 as_PRegister($dst$$reg), as_FloatRegister($tmp$$reg), 0);\n+    } else {\n+      __ sve_cmp(Assembler::NE, as_PRegister($dst$$reg), size, ptrue, as_FloatRegister($tmp$$reg), 0);\n+    }\n@@ -483,0 +489,1 @@\n+    uint length_in_bytes = Matcher::vector_length_in_bytes(this);\n@@ -484,2 +491,7 @@\n-    __ sve_ptrue_lanecnt(as_PRegister($dst$$reg), size, Matcher::vector_length(this));\n-    __ sve_cmp(Assembler::NE, as_PRegister($dst$$reg), size, as_PRegister($dst$$reg), as_FloatRegister($tmp$$reg), 0);\n+    if (length_in_bytes < MaxVectorSize) {\n+      __ sve_ptrue_lanecnt(as_PRegister($dst$$reg), size, Matcher::vector_length(this));\n+      __ sve_cmp(Assembler::NE, as_PRegister($dst$$reg), size,\n+                 as_PRegister($dst$$reg), as_FloatRegister($tmp$$reg), 0);\n+    } else {\n+      __ sve_cmp(Assembler::NE, as_PRegister($dst$$reg), size, ptrue, as_FloatRegister($tmp$$reg), 0);\n+    }\n","filename":"src\/hotspot\/cpu\/aarch64\/aarch64_sve.ad","additions":16,"deletions":4,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -388,0 +388,1 @@\n+    uint length_in_bytes = Matcher::vector_length_in_bytes(this);\n@@ -389,2 +390,7 @@\n-    __ sve_ptrue_lanecnt(as_PRegister($dst$$reg), size, Matcher::vector_length(this));\n-    __ sve_cmp(Assembler::NE, as_PRegister($dst$$reg), size, as_PRegister($dst$$reg), as_FloatRegister($tmp$$reg), 0);\n+    if (length_in_bytes < MaxVectorSize) {\n+      __ sve_ptrue_lanecnt(as_PRegister($dst$$reg), size, Matcher::vector_length(this));\n+      __ sve_cmp(Assembler::NE, as_PRegister($dst$$reg), size,\n+                 as_PRegister($dst$$reg), as_FloatRegister($tmp$$reg), 0);\n+    } else {\n+      __ sve_cmp(Assembler::NE, as_PRegister($dst$$reg), size, ptrue, as_FloatRegister($tmp$$reg), 0);\n+    }\n","filename":"src\/hotspot\/cpu\/aarch64\/aarch64_sve_ad.m4","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"}]}