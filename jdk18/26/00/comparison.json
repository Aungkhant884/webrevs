{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2014, 2018, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2014, 2021, Oracle and\/or its affiliates. All rights reserved.\n@@ -54,4 +54,4 @@\n-    public static void main(String[] args) throws Throwable {\n-        try (Recording recording = new Recording()) {\n-            recording.enable(MyEvent.class).withThreshold(Duration.ofMillis(0));\n-            recording.start();\n+    \/\/ Must call in separate thread because JTREG uses reflection\n+    \/\/ to invoke main method, which uses hidden methods.\n+    public static class TestThread extends Thread {\n+        public void run() {\n@@ -68,0 +68,1 @@\n+\n@@ -70,0 +71,10 @@\n+        }\n+    }\n+\n+    public static void main(String[] args) throws Throwable {\n+        try (Recording recording = new Recording()) {\n+            recording.enable(MyEvent.class).withThreshold(Duration.ofMillis(0));\n+            recording.start();\n+            Thread t = new TestThread();\n+            t.start();\n+            t.join();\n@@ -81,3 +92,1 @@\n-\n-            \/\/ Temporary disable this test until JDK-8272064 is resolved.\n-            \/\/ assertFalse(hasHiddenStackFrame(visibleEvent), \"Hidden frame in visible event: \" + visibleEvent);\n+            assertFalse(hasHiddenStackFrame(visibleEvent), \"Hidden frame in visible event: \" + visibleEvent);\n","filename":"test\/jdk\/jdk\/jfr\/api\/consumer\/TestHiddenMethod.java","additions":17,"deletions":8,"binary":false,"changes":25,"status":"modified"}]}