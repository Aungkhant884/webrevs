{"files":[{"patch":"@@ -2,1 +2,1 @@\n- * Copyright (c) 2001, 2021, Oracle and\/or its affiliates. All rights reserved.\n+ * Copyright (c) 2001, 2022, Oracle and\/or its affiliates. All rights reserved.\n@@ -126,1 +126,7 @@\n-  _completed.push(*cbn);\n+  {\n+    \/\/ Perform push in CS.  The old tail may be popped while the push is\n+    \/\/ observing it (attaching it to the new buffer).  We need to ensure it\n+    \/\/ can't be reused until the push completes, to avoid ABA problems.\n+    GlobalCounter::CriticalSection cs(Thread::current());\n+    _completed.push(*cbn);\n+  }\n","filename":"src\/hotspot\/share\/gc\/g1\/g1DirtyCardQueue.cpp","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"}]}