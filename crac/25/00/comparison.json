{"files":[{"patch":"@@ -6250,1 +6250,1 @@\n-    PerfMemoryLinux::checkpoint_fail();\n+    PerfMemoryLinux::restore();\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -38,1 +38,0 @@\n-  static bool checkpoint_fail();\n@@ -43,1 +42,0 @@\n-\n","filename":"src\/hotspot\/os\/linux\/perfMemory_linux.hpp","additions":0,"deletions":2,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -1376,23 +1376,0 @@\n-bool PerfMemoryLinux::checkpoint_fail() {\n-  if (checkpoint_fd < 0) {\n-    return true;\n-  }\n-\n-  int fd;\n-  RESTARTABLE(::open(backing_store_file_name, O_RDWR|O_CREAT|O_NOFOLLOW, S_IRUSR|S_IWUSR), fd);\n-  if (fd == OS_ERR) {\n-    tty->print_cr(\"cannot open original perfdata file: %s\", os::strerror(errno));\n-    return false;\n-  }\n-\n-  void* mmapret = ::mmap(PerfMemory::start(), PerfMemory::capacity(),\n-      PROT_READ|PROT_WRITE, MAP_FIXED|MAP_SHARED, fd, 0);\n-  if (MAP_FAILED == mmapret) {\n-    tty->print_cr(\"cannot mmap old perfdata file: %s\", os::strerror(errno));\n-    ::close(fd);\n-    return false;\n-  }\n-\n-  return true;\n-}\n-\n","filename":"src\/hotspot\/os\/posix\/perfMemory_posix.cpp","additions":0,"deletions":23,"binary":false,"changes":23,"status":"modified"}]}