{"files":[{"patch":"@@ -34,0 +34,1 @@\n+import java.util.WeakHashMap;\n@@ -255,0 +256,4 @@\n+        \/\/ Need to clear cached entries that are held by the factory only (e.g.\n+        \/\/ after JarURLInputStream.close with useCaches == true).  Creating a\n+        \/\/ temporary weak cache and triggering GC to get know JARs really in\n+        \/\/ use.\n@@ -256,3 +261,2 @@\n-            for (Map.Entry<JarFile, URL> entry : urlCache.entrySet()) {\n-                fileCache.remove(urlKey(entry.getValue()));\n-            }\n+            WeakHashMap<JarFile, URL> weakMap = new WeakHashMap<>(urlCache);\n+            fileCache.clear();\n@@ -260,0 +264,8 @@\n+\n+            System.gc();\n+\n+            weakMap.forEach((JarFile jarFile, URL url) -> {\n+                String key = urlKey(url);\n+                urlCache.put(jarFile, url);\n+                fileCache.put(key, jarFile);\n+            });\n","filename":"src\/java.base\/unix\/classes\/sun\/net\/www\/protocol\/jar\/JarFileFactory.java","additions":15,"deletions":3,"binary":false,"changes":18,"status":"modified"}]}