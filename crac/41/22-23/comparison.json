{"files":[{"patch":"@@ -627,1 +627,1 @@\n-uint64_t VM_Version::CPUFeatures_parse(const char *ccstr, uint64_t &glibc_features, bool &verify_glibc_by_reexec) {\n+uint64_t VM_Version::CPUFeatures_parse(const char *ccstr, uint64_t &glibc_features) {\n@@ -629,1 +629,1 @@\n-  glibc_features = 0;\n+  glibc_features = _glibc_features;\n@@ -631,1 +631,0 @@\n-    glibc_features = _glibc_features;\n@@ -645,1 +644,0 @@\n-    glibc_features = _glibc_features;\n@@ -648,0 +646,4 @@\n+  if (strcmp(ccstr, \"ignore\") == 0) {\n+    return _features;\n+  }\n+  glibc_features = 0;\n@@ -791,0 +793,2 @@\n+bool VM_Version::verify_glibc_by_reexec = false;\n+bool VM_Version::ignore_glibc_not_using = false;\n@@ -1284,1 +1288,0 @@\n-  bool verify_glibc_by_reexec = false;\n@@ -1287,1 +1290,1 @@\n-    uint64_t   CPUFeatures_x64 = CPUFeatures_parse(CPUFeatures, GLIBCFeatures_x64, verify_glibc_by_reexec);\n+    uint64_t   CPUFeatures_x64 = CPUFeatures_parse(CPUFeatures, GLIBCFeatures_x64);\n@@ -1315,1 +1318,5 @@\n-      tty->print_cr(\"CPU features being used are: -XX:CPUFeatures=0x\" UINT64_FORMAT_X \",0x\" UINT64_FORMAT_X, _features, _glibc_features);\n+      if (ignore_glibc_not_using) {\n+\ttty->print_cr(\"CPU features are being kept intact as requested by -XX:CPUFeatures=ignore\");\n+      } else {\n+\ttty->print_cr(\"CPU features being used are: -XX:CPUFeatures=0x\" UINT64_FORMAT_X \",0x\" UINT64_FORMAT_X, _features, _glibc_features);\n+      }\n@@ -1325,2 +1332,4 @@\n-  glibc_not_using(      features_expected & ~      _features,\n-                  glibc_features_expected & ~_glibc_features);\n+  if (!ignore_glibc_not_using) {\n+    glibc_not_using(      features_expected & ~      _features,\n+\t\t    glibc_features_expected & ~_glibc_features);\n+  }\n","filename":"src\/hotspot\/cpu\/x86\/vm_version_x86.cpp","additions":18,"deletions":9,"binary":false,"changes":27,"status":"modified"},{"patch":"@@ -769,1 +769,1 @@\n-  static uint64_t CPUFeatures_parse(const char *ccstr, uint64_t &glibc_features, bool &verify_glibc_by_reexec);\n+  static uint64_t CPUFeatures_parse(const char *ccstr, uint64_t &glibc_features);\n@@ -776,0 +776,3 @@\n+  \/\/ C++17: Make verify_glibc_by_reexec and ignore_glibc_not_using inline.\n+  static bool verify_glibc_by_reexec;\n+  static bool ignore_glibc_not_using;\n","filename":"src\/hotspot\/cpu\/x86\/vm_version_x86.hpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"}]}