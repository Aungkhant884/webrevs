{"files":[{"patch":"@@ -232,1 +232,4 @@\n-      \"to be possibly used for the -XX:CPUFeatures=0xnumber option\")\n+      \"to be possibly used for the -XX:CPUFeatures=0xnumber option\")        \\\n+                                                                            \\\n+  product(bool, CRaCCPUCountInit, false, \"Reinitialize number of CPUs \"     \\\n+      \"during -XX:CRaCRestoreFrom\")\n","filename":"src\/hotspot\/cpu\/x86\/globals_x86.hpp","additions":4,"deletions":1,"binary":false,"changes":5,"status":"modified"},{"patch":"@@ -631,1 +631,1 @@\n-void os::Linux::initialize_system_info() {\n+void os::Linux::initialize_processor_count() {\n@@ -633,0 +633,5 @@\n+  assert(processor_count() > 0, \"linux error\");\n+}\n+\n+void os::Linux::initialize_system_info() {\n+  initialize_processor_count();\n@@ -645,1 +650,0 @@\n-  assert(processor_count() > 0, \"linux error\");\n@@ -5938,1 +5942,1 @@\n-static int checkpoint_restore(int *shmid) {\n+int os::Linux::checkpoint_restore(int *shmid) {\n@@ -5956,0 +5960,6 @@\n+  if (CRaCCPUCountInit) {\n+    initialize_processor_count();\n+    if (_cpu_to_node != NULL)\n+      rebuild_cpu_to_node_map();\n+  }\n+\n@@ -6167,1 +6177,1 @@\n-    int ret = checkpoint_restore(&shmid);\n+    int ret = os::Linux::checkpoint_restore(&shmid);\n","filename":"src\/hotspot\/os\/linux\/os_linux.cpp","additions":14,"deletions":4,"binary":false,"changes":18,"status":"modified"},{"patch":"@@ -67,0 +67,1 @@\n+  static void initialize_processor_count();\n@@ -187,0 +188,2 @@\n+  static int checkpoint_restore(int *shmid);\n+\n","filename":"src\/hotspot\/os\/linux\/os_linux.hpp","additions":3,"deletions":0,"binary":false,"changes":3,"status":"modified"}]}