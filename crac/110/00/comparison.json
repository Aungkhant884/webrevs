{"files":[{"patch":"@@ -191,1 +191,2 @@\n-        synchronized (lock) {\n+        lock.lock();\n+        try {\n@@ -195,1 +196,2 @@\n-            lock.wait(timeout);\n+            \/\/noinspection ResultOfMethodCallIgnored\n+            notEmpty.await(timeout, TimeUnit.MILLISECONDS);\n@@ -197,0 +199,2 @@\n+        } finally {\n+            lock.unlock();\n@@ -201,2 +205,5 @@\n-        synchronized (lock) {\n-            lock.notifyAll();\n+        lock.lock();\n+        try {\n+            notEmpty.signalAll();\n+        } finally {\n+            lock.unlock();\n","filename":"src\/java.base\/share\/classes\/java\/lang\/ref\/ReferenceQueue.java","additions":11,"deletions":4,"binary":false,"changes":15,"status":"modified"},{"patch":"@@ -40,1 +40,0 @@\n- * @ignore the final assert does not pass even without CRaC invocation\n","filename":"test\/jdk\/jdk\/crac\/RefQueueTest.java","additions":0,"deletions":1,"binary":false,"changes":1,"status":"modified"}]}