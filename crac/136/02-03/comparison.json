{"files":[{"patch":"@@ -47,2 +47,4 @@\n-#include <link.h> \/\/#if INCLUDE_LD_SO_LIST_DIAGNOSTICS\n-#include <sys\/wait.h> \/\/#if INCLUDE_LD_SO_LIST_DIAGNOSTICS\n+#ifdef LINUX \/\/ for INCLUDE_LD_SO_LIST_DIAGNOSTICS\n+# include <link.h>\n+# include <sys\/wait.h>\n+#endif\n@@ -856,1 +858,3 @@\n-\/\/ This function is used only for INCLUDE_LD_SO_LIST_DIAGNOSTICS.\n+\/\/ These functions are used only if INCLUDE_LD_SO_LIST_DIAGNOSTICS. But they are always compiled to check build regressions.\n+#ifdef LINUX\n+\n@@ -863,1 +867,2 @@\n-    const Elf64_Phdr *phdr = info->dlpi_phdr + phdr_ix;\n+    \/\/ Elf64_Phdr \/ Elf32_Phdr\n+    const auto *phdr = info->dlpi_phdr + phdr_ix;\n@@ -873,1 +878,0 @@\n-\/\/ This function is used only for INCLUDE_LD_SO_LIST_DIAGNOSTICS.\n@@ -881,1 +885,0 @@\n-\/\/ This macro is used only for INCLUDE_LD_SO_LIST_DIAGNOSTICS.\n@@ -884,1 +887,0 @@\n-\/\/ This function is used only for INCLUDE_LD_SO_LIST_DIAGNOSTICS.\n@@ -919,1 +921,0 @@\n-\/\/ This function is used only for INCLUDE_LD_SO_LIST_DIAGNOSTICS.\n@@ -933,0 +934,2 @@\n+#endif \/\/ LINUX\n+\n@@ -1046,1 +1049,2 @@\n-  \/\/ This block is used only for INCLUDE_LD_SO_LIST_DIAGNOSTICS.\n+\/\/ This block of code is used only if INCLUDE_LD_SO_LIST_DIAGNOSTICS. But it is always compiled to check build regressions.\n+#ifdef LINUX\n@@ -1109,0 +1113,1 @@\n+#endif \/\/ LINUX\n@@ -1351,1 +1356,0 @@\n-  GLIBC_UNSUPPORTED(CPU  , CET_SS           );\n","filename":"src\/hotspot\/cpu\/x86\/vm_version_x86.cpp","additions":14,"deletions":10,"binary":false,"changes":24,"status":"modified"},{"patch":"@@ -411,5 +411,5 @@\n-    decl(XSAVE,             \"xsave\",              5) \\\n-    decl(CMPXCHG16,         \"cmpxchg16\",          6) \/* Also known in cpuinfo as cx16 and in glibc as cmpxchg16b *\/ \\\n-    decl(LAHFSAHF,          \"lahfsahf\",           7) \/* Also known in cpuinfo as lahf_lm and in glibc as lahf64_sahf64 *\/ \\\n-    decl(F16C,              \"f16c\",               8) \\\n-    decl(HTT,               \"htt\",                9) \/* hotspot calls it 'ht' but it is affected by threads_per_core() *\/\n+    decl(XSAVE,             \"xsave\",              3) \\\n+    decl(CMPXCHG16,         \"cmpxchg16\",          4) \/* Also known in cpuinfo as cx16 and in glibc as cmpxchg16b *\/ \\\n+    decl(LAHFSAHF,          \"lahfsahf\",           5) \/* Also known in cpuinfo as lahf_lm and in glibc as lahf64_sahf64 *\/ \\\n+    decl(F16C,              \"f16c\",               6) \\\n+    decl(HTT,               \"htt\",                7) \/* hotspot calls it 'ht' but it is affected by threads_per_core() *\/\n","filename":"src\/hotspot\/cpu\/x86\/vm_version_x86.hpp","additions":5,"deletions":5,"binary":false,"changes":10,"status":"modified"}]}