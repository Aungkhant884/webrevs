{"files":[{"patch":"@@ -51,1 +51,0 @@\n-        Objects.requireNonNull(name);\n@@ -60,1 +59,3 @@\n-        return dup(bitAlignment, name);\n+        return bitAlignment == bitAlignment()\n+                ? self()\n+                : dup(bitAlignment, name);\n@@ -145,0 +146,5 @@\n+    @SuppressWarnings(\"unchecked\")\n+    final L self() {\n+        return (L) this;\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/layout\/AbstractLayout.java","additions":8,"deletions":2,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -98,1 +98,8 @@\n-        abstract V withOrder(ByteOrder order);\n+        public final V withOrder(ByteOrder order) {\n+            Objects.requireNonNull(order);\n+            return order == order()\n+                    ? self()\n+                    : withOrder0(order);\n+        }\n+\n+        protected abstract V withOrder0(ByteOrder order);\n@@ -180,4 +187,0 @@\n-        @SuppressWarnings(\"unchecked\")\n-        final V self() {\n-            return (V) this;\n-        }\n@@ -202,2 +205,1 @@\n-        public OfBooleanImpl withOrder(ByteOrder order) {\n-            Objects.requireNonNull(order);\n+        public OfBooleanImpl withOrder0(ByteOrder order) {\n@@ -228,2 +230,1 @@\n-        public OfByteImpl withOrder(ByteOrder order) {\n-            Objects.requireNonNull(order);\n+        public OfByteImpl withOrder0(ByteOrder order) {\n@@ -254,2 +255,1 @@\n-        public OfCharImpl withOrder(ByteOrder order) {\n-            Objects.requireNonNull(order);\n+        public OfCharImpl withOrder0(ByteOrder order) {\n@@ -280,2 +280,1 @@\n-        public OfShortImpl withOrder(ByteOrder order) {\n-            Objects.requireNonNull(order);\n+        public OfShortImpl withOrder0(ByteOrder order) {\n@@ -306,2 +305,1 @@\n-        public OfIntImpl withOrder(ByteOrder order) {\n-            Objects.requireNonNull(order);\n+        public OfIntImpl withOrder0(ByteOrder order) {\n@@ -332,2 +330,1 @@\n-        public OfFloatImpl withOrder(ByteOrder order) {\n-            Objects.requireNonNull(order);\n+        public OfFloatImpl withOrder0(ByteOrder order) {\n@@ -358,2 +355,1 @@\n-        public OfLongImpl withOrder(ByteOrder order) {\n-            Objects.requireNonNull(order);\n+        public OfLongImpl withOrder0(ByteOrder order) {\n@@ -384,2 +380,1 @@\n-        public OfDoubleImpl withOrder(ByteOrder order) {\n-            Objects.requireNonNull(order);\n+        public OfDoubleImpl withOrder0(ByteOrder order) {\n@@ -415,2 +410,1 @@\n-        public OfAddressImpl withOrder(ByteOrder order) {\n-            Objects.requireNonNull(order);\n+        public OfAddressImpl withOrder0(ByteOrder order) {\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/layout\/ValueLayouts.java","additions":17,"deletions":23,"binary":false,"changes":40,"status":"modified"}]}