{"files":[{"patch":"@@ -52,1 +52,3 @@\n-        return dup(bitAlignment(), Optional.of(name));\n+        return name().filter(name::equals).isPresent()\n+                ? self()\n+                : dup(bitAlignment(), Optional.of(name));\n@@ -60,1 +62,3 @@\n-        return dup(bitAlignment, name);\n+        return bitAlignment == bitAlignment()\n+                ? self()\n+                : dup(bitAlignment, name);\n@@ -145,0 +149,5 @@\n+    @SuppressWarnings(\"unchecked\")\n+    final L self() {\n+        return (L) this;\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/layout\/AbstractLayout.java","additions":11,"deletions":2,"binary":false,"changes":13,"status":"modified"},{"patch":"@@ -98,1 +98,8 @@\n-        abstract V withOrder(ByteOrder order);\n+        public final V withOrder(ByteOrder order) {\n+            Objects.requireNonNull(order);\n+            return order == order()\n+                    ? self()\n+                    : withOrder0(order);\n+        }\n+\n+        protected abstract V withOrder0(ByteOrder order);\n@@ -180,4 +187,0 @@\n-        @SuppressWarnings(\"unchecked\")\n-        final V self() {\n-            return (V) this;\n-        }\n@@ -202,1 +205,1 @@\n-        public OfBooleanImpl withOrder(ByteOrder order) {\n+        public OfBooleanImpl withOrder0(ByteOrder order) {\n@@ -228,1 +231,1 @@\n-        public OfByteImpl withOrder(ByteOrder order) {\n+        public OfByteImpl withOrder0(ByteOrder order) {\n@@ -254,1 +257,1 @@\n-        public OfCharImpl withOrder(ByteOrder order) {\n+        public OfCharImpl withOrder0(ByteOrder order) {\n@@ -280,1 +283,1 @@\n-        public OfShortImpl withOrder(ByteOrder order) {\n+        public OfShortImpl withOrder0(ByteOrder order) {\n@@ -306,1 +309,1 @@\n-        public OfIntImpl withOrder(ByteOrder order) {\n+        public OfIntImpl withOrder0(ByteOrder order) {\n@@ -332,1 +335,1 @@\n-        public OfFloatImpl withOrder(ByteOrder order) {\n+        public OfFloatImpl withOrder0(ByteOrder order) {\n@@ -358,1 +361,1 @@\n-        public OfLongImpl withOrder(ByteOrder order) {\n+        public OfLongImpl withOrder0(ByteOrder order) {\n@@ -384,1 +387,1 @@\n-        public OfDoubleImpl withOrder(ByteOrder order) {\n+        public OfDoubleImpl withOrder0(ByteOrder order) {\n@@ -415,1 +418,1 @@\n-        public OfAddressImpl withOrder(ByteOrder order) {\n+        public OfAddressImpl withOrder0(ByteOrder order) {\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/layout\/ValueLayouts.java","additions":17,"deletions":14,"binary":false,"changes":31,"status":"modified"}]}