{"files":[{"patch":"@@ -129,0 +129,1 @@\n+        Objects.requireNonNull(session);\n@@ -131,1 +132,4 @@\n-        return libraryLookup(name, nativeLibraries, library, session);\n+        if (library == null) {\n+            throw new IllegalArgumentException(\"Cannot open library: \" + name);\n+        }\n+        return libraryLookup(nativeLibraries, library, session);\n@@ -154,0 +158,1 @@\n+        Objects.requireNonNull(session);\n@@ -156,4 +161,0 @@\n-        return libraryLookup(path, nativeLibraries, library, session);\n-    }\n-\n-    private static SymbolLookup libraryLookup(Object libName, RawNativeLibraries nativeLibraries, NativeLibrary library, MemorySession session) {\n@@ -161,1 +162,1 @@\n-            throw new IllegalArgumentException(\"Cannot open library: \" + libName);\n+            throw new IllegalArgumentException(\"Cannot open library: \" + path);\n@@ -163,0 +164,4 @@\n+        return libraryLookup(nativeLibraries, library, session);\n+    }\n+\n+    private static SymbolLookup libraryLookup(RawNativeLibraries nativeLibraries, NativeLibrary library, MemorySession session) {\n","filename":"src\/java.base\/share\/classes\/java\/lang\/foreign\/SymbolLookup.java","additions":11,"deletions":6,"binary":false,"changes":17,"status":"modified"},{"patch":"@@ -95,0 +95,10 @@\n+    @Test(expectedExceptions = IllegalArgumentException.class)\n+    void testBadLibraryLookupName() {\n+        SymbolLookup.libraryLookup(\"nonExistent\", MemorySession.global());\n+    }\n+\n+    @Test(expectedExceptions = IllegalArgumentException.class)\n+    void testBadLibraryLookupPath() {\n+        SymbolLookup.libraryLookup(Path.of(\"nonExistent\"), MemorySession.global());\n+    }\n+\n","filename":"test\/jdk\/java\/foreign\/LibraryLookupTest.java","additions":10,"deletions":0,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -103,1 +103,2 @@\n-            MemorySession.class\n+            MemorySession.class,\n+            SymbolLookup.class\n@@ -177,0 +178,1 @@\n+        addDefaultMapping(SymbolLookup.class, SymbolLookup.loaderLookup());\n","filename":"test\/jdk\/java\/foreign\/TestNulls.java","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"}]}