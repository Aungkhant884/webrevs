{"files":[{"patch":"@@ -2260,3 +2260,6 @@\n-WB_ENTRY(void, WB_VerifyFrames(JNIEnv* env, jobject wb))\n-  ttyLocker lock;\n-  tty->print_cr(\"[WhiteBox::VerifyFrames] Walking Frames\");\n+WB_ENTRY(void, WB_VerifyFrames(JNIEnv* env, jobject wb, jboolean log))\n+  intx tty_token = -1;\n+  if (log) {\n+    tty_token = ttyLocker::hold_tty();\n+    tty->print_cr(\"[WhiteBox::VerifyFrames] Walking Frames\");\n+  }\n@@ -2265,1 +2268,3 @@\n-    current_frame->print_value();\n+    if (log) {\n+      current_frame->print_value();\n+    }\n@@ -2268,1 +2273,4 @@\n-  tty->print_cr(\"[WhiteBox::VerifyFrames] Done\");\n+  if (log) {\n+    tty->print_cr(\"[WhiteBox::VerifyFrames] Done\");\n+    ttyLocker::release_tty(tty_token);\n+  }\n@@ -2500,1 +2508,1 @@\n-  {CC\"verifyFrames\",                CC\"()V\",            (void*)&WB_VerifyFrames },\n+  {CC\"verifyFrames\",                CC\"(Z)V\",            (void*)&WB_VerifyFrames },\n","filename":"src\/hotspot\/share\/prims\/whitebox.cpp","additions":14,"deletions":6,"binary":false,"changes":20,"status":"modified"},{"patch":"@@ -108,1 +108,1 @@\n-            WB.verifyFrames();\n+            WB.verifyFrames(true);\n","filename":"test\/jdk\/java\/foreign\/stackwalk\/TestStackWalk.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -619,1 +619,1 @@\n-  public native void verifyFrames();\n+  public native void verifyFrames(boolean log);\n","filename":"test\/lib\/sun\/hotspot\/WhiteBox.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}