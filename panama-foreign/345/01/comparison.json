{"files":[{"patch":"@@ -188,1 +188,1 @@\n-     *\n+     * @param <T> the memory layout type\n","filename":"src\/jdk.incubator.foreign\/share\/classes\/jdk\/incubator\/foreign\/CLinker.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"},{"patch":"@@ -38,1 +38,0 @@\n- * <p>\n@@ -45,0 +44,10 @@\n+ * <p><a id = \"var-symbols\"><\/a><\/p>\n+ * In cases where a client wants to create a memory segment out of a lookup symbol, the client might want to attach the\n+ * lookup symbol to the newly created segment, so that the symbol will be kept reachable as long as the memory segment\n+ * is reachable; this can be achieved by creating the segment using the {@link MemoryAddress#asSegmentRestricted(long, Object)}\n+ * restricted segment factory, as follows:\n+ * <pre>{@code\n+LibraryLookup defaultLookup = LibraryLookup.defaultLookup();\n+LibraryLookup.Symbol errno = defaultLookup.lookup(\"errno\");\n+MemorySegment errnoSegment = errno.address().asRestrictedSegment(4, errno);\n+ * }<\/pre>\n@@ -70,1 +79,3 @@\n-         * The memory address of this lookup symbol.\n+         * The memory address of this lookup symbol. If the memory associated with this symbol needs to be dereferenced,\n+         * clients can obtain a segment from this symbol's address using the {@link MemoryAddress#asSegmentRestricted(long, Object)},\n+         * and making sure that the created segment maintains a <a href=\"LibraryLookup.html#var-symbols\">strong reference<\/a> to this symbol, to prevent library unloading.\n","filename":"src\/jdk.incubator.foreign\/share\/classes\/jdk\/incubator\/foreign\/LibraryLookup.java","additions":13,"deletions":2,"binary":false,"changes":15,"status":"modified"}]}