{"files":[{"patch":"@@ -2287,1 +2287,1 @@\n-WB_ENTRY(void, WB_VerifyFrames(JNIEnv* env, jobject wb, jboolean log))\n+WB_ENTRY(void, WB_WalkFrames(JNIEnv* env, jobject wb, jboolean log, jboolean verify_oops))\n@@ -2291,1 +2291,1 @@\n-    tty->print_cr(\"[WhiteBox::VerifyFrames] Walking Frames\");\n+    tty->print_cr(\"[WhiteBox::WalkFrames] Walking Frames\");\n@@ -2293,1 +2293,1 @@\n-  for (StackFrameStream fst(JavaThread::current(), true, true); !fst.is_done(); fst.next()) {\n+  for (StackFrameStream fst(JavaThread::current(), verify_oops, true); !fst.is_done(); fst.next()) {\n@@ -2298,1 +2298,3 @@\n-    current_frame->verify(fst.register_map());\n+    if (verify_oops) {\n+      current_frame->verify(fst.register_map());\n+    }\n@@ -2301,1 +2303,1 @@\n-    tty->print_cr(\"[WhiteBox::VerifyFrames] Done\");\n+    tty->print_cr(\"[WhiteBox::WalkFrames] Done\");\n@@ -2542,1 +2544,1 @@\n-  {CC\"verifyFrames\",                CC\"(Z)V\",            (void*)&WB_VerifyFrames },\n+  {CC\"walkFrames\",                CC\"(ZZ)V\",            (void*)&WB_WalkFrames },\n","filename":"src\/hotspot\/share\/prims\/whitebox.cpp","additions":8,"deletions":6,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -108,1 +108,2 @@\n-            WB.verifyFrames(true);\n+            WB.walkFrames(\/*log=*\/true, \/*verifyOops=*\/true);\n+            WB.walkFrames(\/*log=*\/true, \/*verifyOops=*\/false); \/\/ triggers different code paths\n","filename":"test\/jdk\/java\/foreign\/stackwalk\/TestStackWalk.java","additions":2,"deletions":1,"binary":false,"changes":3,"status":"modified"},{"patch":"@@ -641,1 +641,1 @@\n-  public native void verifyFrames(boolean log);\n+  public native void walkFrames(boolean log, boolean verifyOops);\n","filename":"test\/lib\/sun\/hotspot\/WhiteBox.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}