{"files":[{"patch":"@@ -2287,1 +2287,1 @@\n-WB_ENTRY(void, WB_WalkFrames(JNIEnv* env, jobject wb, jboolean log, jboolean update_reg_map_and_verify_oops))\n+WB_ENTRY(void, WB_VerifyFrames(JNIEnv* env, jobject wb, jboolean log, jboolean update_map))\n@@ -2291,1 +2291,1 @@\n-    tty->print_cr(\"[WhiteBox::WalkFrames] Walking Frames\");\n+    tty->print_cr(\"[WhiteBox::VerifyFrames] Walking Frames\");\n@@ -2293,1 +2293,1 @@\n-  for (StackFrameStream fst(JavaThread::current(), update_reg_map_and_verify_oops, true); !fst.is_done(); fst.next()) {\n+  for (StackFrameStream fst(JavaThread::current(), update_map, true); !fst.is_done(); fst.next()) {\n@@ -2298,3 +2298,1 @@\n-    if (update_reg_map_and_verify_oops) {\n-      current_frame->verify(fst.register_map());\n-    }\n+    current_frame->verify(fst.register_map());\n@@ -2303,1 +2301,1 @@\n-    tty->print_cr(\"[WhiteBox::WalkFrames] Done\");\n+    tty->print_cr(\"[WhiteBox::VerifyFrames] Done\");\n@@ -2544,1 +2542,1 @@\n-  {CC\"walkFrames\",                CC\"(ZZ)V\",            (void*)&WB_WalkFrames },\n+  {CC\"verifyFrames\",                CC\"(ZZ)V\",            (void*)&WB_VerifyFrames },\n","filename":"src\/hotspot\/share\/prims\/whitebox.cpp","additions":6,"deletions":8,"binary":false,"changes":14,"status":"modified"},{"patch":"@@ -1108,1 +1108,3 @@\n-  oops_do_internal(&VerifyOopClosure::verify_oop, NULL, map, false, DerivedPointerIterationMode::_ignore);\n+  if (map->update_map()) { \/\/ does map have oops?\n+    oops_do_internal(&VerifyOopClosure::verify_oop, NULL, map, false, DerivedPointerIterationMode::_ignore);\n+  }\n","filename":"src\/hotspot\/share\/runtime\/frame.cpp","additions":3,"deletions":1,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -108,2 +108,2 @@\n-            WB.walkFrames(\/*log=*\/true, \/*verifyOops=*\/true);\n-            WB.walkFrames(\/*log=*\/true, \/*verifyOops=*\/false); \/\/ triggers different code paths\n+            WB.verifyFrames(\/*log=*\/true, \/*updateRegisterMap=*\/true);\n+            WB.verifyFrames(\/*log=*\/true, \/*updateRegisterMap=*\/false); \/\/ triggers different code paths\n","filename":"test\/jdk\/java\/foreign\/stackwalk\/TestStackWalk.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -641,1 +641,1 @@\n-  public native void walkFrames(boolean log, boolean updateRegMapAndVerifyOops);\n+  public native void verifyFrames(boolean log, boolean updateRegisterMap);\n","filename":"test\/lib\/sun\/hotspot\/WhiteBox.java","additions":1,"deletions":1,"binary":false,"changes":2,"status":"modified"}]}