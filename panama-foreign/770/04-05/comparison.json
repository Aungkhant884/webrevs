{"files":[{"patch":"@@ -130,7 +130,6 @@\n-            for (int i = 0; i < filteredLayouts.size(); i++) {\n-                MemoryLayout element = filteredLayouts.get(i);\n-                final int finalI = i;\n-                element.name().ifPresent(name -> {\n-                    long layoutOffset = grpl.byteOffset(MemoryLayout.PathElement.groupElement(name));\n-                    long ffiOffset = (long) VH_SIZE_T_ARRAY.get(offsetsOut, finalI);\n-                    if (ffiOffset != layoutOffset) {\n+            long expectedOffset = 0;\n+            int offsetIdx = 0;\n+            for (MemoryLayout element : grpl.memberLayouts()) {\n+                if (!(element instanceof PaddingLayout)) {\n+                    long ffiOffset = (long) VH_SIZE_T_ARRAY.get(offsetsOut, offsetIdx++);\n+                    if (ffiOffset != expectedOffset) {\n@@ -138,1 +137,2 @@\n-                                \" Offset of '\" + name + \"': \" + layoutOffset + \" != \" + ffiOffset);\n+                                \" Offset of '\" + element.name().orElse(\"<unnamed>\")\n+                                + \"': \" + expectedOffset + \" != \" + ffiOffset);\n@@ -140,1 +140,2 @@\n-                });\n+                }\n+                expectedOffset += element.byteSize();\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/abi\/fallback\/FFIType.java","additions":10,"deletions":9,"binary":false,"changes":19,"status":"modified"}]}