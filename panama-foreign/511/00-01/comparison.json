{"files":[{"patch":"@@ -129,3 +129,8 @@\n-        Objects.requireNonNull(handle);\n-        if (!isImplicit() && handle.scope() != this) {\n-            throw new IllegalArgumentException(\"Cannot release an handle acquired from another scope\");\n+        try {\n+            Objects.requireNonNull(handle);\n+            if (!isImplicit() && handle.scope() != this) {\n+                throw new IllegalArgumentException(\"Cannot release an handle acquired from another scope\");\n+            }\n+            ((HandleImpl) handle).close();\n+        } finally {\n+            Reference.reachabilityFence(this);\n@@ -133,1 +138,0 @@\n-        ((HandleImpl)handle).close();\n","filename":"src\/jdk.incubator.foreign\/share\/classes\/jdk\/internal\/foreign\/ResourceScopeImpl.java","additions":8,"deletions":4,"binary":false,"changes":12,"status":"modified"}]}