[{"commit":{"message":"Make update of list head (FST) using atomic CAS, because\n`cleanup` method can race with `add` about changing FST.\n\nSmall code re-arrangement, to disable double load of FST during first loop pass"},"files":[{"filename":"src\/jdk.incubator.foreign\/share\/classes\/jdk\/internal\/foreign\/SharedScope.java"}],"sha":"21c6c7bb5e9a62ef93d471c62184d706ea0b65eb"},{"commit":{"message":"This is minor change for possible race.\n\n(1) One or more threads can see \"prev\" as CLOSED_LIST. Even those CAS will be performed\nand list head will be set to new cleanup. Than exception is going to be thrown.\n\n(2) Than cleanup will continue (maybe skipping just added cleanup).\n\nIf in addition, other thread will join in parallel to (1) with cleanup2, than\nqueue could look like this HEAD = cleanup2 -> list end marker."},"files":[{"filename":"src\/jdk.incubator.foreign\/share\/classes\/jdk\/internal\/foreign\/SharedScope.java"}],"sha":"1896003335c58d9ba1c1cfdccfd813244ab5d576"}]