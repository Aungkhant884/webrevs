{"files":[{"patch":"@@ -162,6 +162,6 @@\n- * This functin performs a thread-local handshake against all threads running at the time\n- * the given scope (deopt) was closed. If the handshake closure finds that a thread has\n- * safepointed inside a scoped method (that is, a method inside the ScopedMemoryAccess class\n- * annotated with the '@Scoped' annotation), whose local variables mention the scope being closed\n- * (deopt), the thread is added to a problematic stack. After the handshake, each thread in\n- * the problematic stack is handshaked again, individually, to check that it has exited\n+ * This function performs a thread-local handshake against all threads running at the time\n+ * the given scope (deopt) was closed. If the hanshake for a given thread is processed while\n+ * the thread is inside a scoped method (that is, a method inside the ScopedMemoryAccess\n+ * class annotated with the '@Scoped' annotation), whose local variables mention the scope being\n+ * closed (deopt), the thread is added to a problematic list. After the handshake, each thread in\n+ * the problematic list is handshaked again, individually, to check that it has exited\n@@ -169,4 +169,4 @@\n- * thread, we also deoptimize it, meaning that when the thread resumes execution, it should\n- * also see the updated scope state. This function returns when the stack of problematic\n- * threads is empty. To prevent premature thread termination we take a snapshot of the live\n- * threads in the system using a ThreadsListHandle.\n+ * thread, we also deoptimize it, meaning that when the thread resumes execution, the thread\n+ * should also see the updated scope state (and fail on access). This function returns when\n+ * the list of problematic threads is empty. To prevent premature thread termination we take\n+ * a snapshot of the live threads in the system using a ThreadsListHandle.\n@@ -183,1 +183,1 @@\n-  \/\/ now iterate on all problematic threads, until we converge. Note: from this point on,\n+  \/\/ Now iterate over all problematic threads, until we converge. Note: from this point on,\n@@ -191,1 +191,1 @@\n-    \/\/ if the thread is not in the list handle, it means that the thread has died,\n+    \/\/ If the thread is not in the list handle, it means that the thread has died,\n","filename":"src\/hotspot\/share\/prims\/scopedMemoryAccess.cpp","additions":12,"deletions":12,"binary":false,"changes":24,"status":"modified"}]}