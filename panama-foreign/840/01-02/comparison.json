{"files":[{"patch":"@@ -341,0 +341,2 @@\n+     * @throws IllegalArgumentException if {@code offset} is negative\n+     * @throws ArithmeticException if either the addition or multiplication overflows\n@@ -344,1 +346,4 @@\n-        return offset + (byteSize() * index);\n+        if (offset < 0) {\n+            throw new IllegalArgumentException(\"Negative offset: \" + offset);\n+        }\n+        return Math.addExact(offset, Math.multiplyExact(byteSize(), index));\n@@ -387,1 +392,1 @@\n-     *     <li>it has at least one {@code long} leading parameter representing the base offset;<\/li>\n+     *     <li>it has one leading {@code long} parameter representing the base offset;<\/li>\n","filename":"src\/java.base\/share\/classes\/java\/lang\/foreign\/MemoryLayout.java","additions":7,"deletions":2,"binary":false,"changes":9,"status":"modified"},{"patch":"@@ -97,1 +97,1 @@\n-     * {@return a var handle which can be used to access values describe by this value layout, in a given memory segment.}\n+     * {@return a var handle which can be used to access values described by this value layout, in a given memory segment.}\n@@ -108,1 +108,1 @@\n-     * with zero arguments, as it avoids the creation of the var args array.\n+     * with an empty path element array, as it avoids the creation of the var args array.\n","filename":"src\/java.base\/share\/classes\/java\/lang\/foreign\/ValueLayout.java","additions":2,"deletions":2,"binary":false,"changes":4,"status":"modified"},{"patch":"@@ -355,0 +355,16 @@\n+    @Test(expectedExceptions=IllegalArgumentException.class,\n+        expectedExceptionsMessageRegExp=\".*Negative offset.*\")\n+    public void testScaleNegativeOffset() {\n+        JAVA_INT.scale(-1, 0);\n+    }\n+\n+    @Test(expectedExceptions=ArithmeticException.class)\n+    public void testScaleAddOverflow() {\n+        JAVA_INT.scale(Long.MAX_VALUE, 1);\n+    }\n+\n+    @Test(expectedExceptions=ArithmeticException.class)\n+    public void testScaleMultiplyOverflow() {\n+        JAVA_INT.scale(0, Long.MAX_VALUE);\n+    }\n+\n","filename":"test\/jdk\/java\/foreign\/TestLayouts.java","additions":16,"deletions":0,"binary":false,"changes":16,"status":"modified"}]}