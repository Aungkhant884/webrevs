{"files":[{"patch":"@@ -260,1 +260,3 @@\n-                var mh = findStaticToArray(vl.carrier().arrayType(), valueLayoutType(vl), null);\n+                var mt = MethodType.methodType(vl.carrier().arrayType(),\n+                        MemorySegment.class, valueLayoutType(vl), long.class, long.class);\n+                var mh = LOOKUP.findStatic(LayoutRecordMapper.class, \"toArray\", mt);\n@@ -273,1 +275,3 @@\n-                    var mh = findStaticToArray(Record.class.arrayType(), GroupLayout.class, LayoutRecordMapper.class);\n+                    var mt = MethodType.methodType(Record.class.arrayType(),\n+                            MemorySegment.class, GroupLayout.class, long.class, long.class, LayoutRecordMapper.class);\n+                    var mh = LOOKUP.findStatic(LayoutRecordMapper.class, \"toArray\", mt);\n@@ -337,12 +341,0 @@\n-    static MethodHandle findStaticToArray(Class<?> rType,\n-                                          Class<?> layoutType,\n-                                          Class<?> extra) throws NoSuchMethodException, IllegalAccessException {\n-\n-        var pTypes = Stream.of(MemorySegment.class, layoutType, long.class, long.class, extra)\n-                .filter(Objects::nonNull)\n-                .toArray(Class<?>[]::new);\n-\n-        var mt = MethodType.methodType(rType, pTypes);\n-        return LOOKUP.findStatic(LayoutRecordMapper.class, \"toArray\", mt);\n-    }\n-\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/LayoutRecordMapper.java","additions":6,"deletions":14,"binary":false,"changes":20,"status":"modified"}]}