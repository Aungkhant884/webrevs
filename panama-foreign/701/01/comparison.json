{"files":[{"patch":"@@ -451,2 +451,2 @@\n-                array().equals(that.array()) &&\n-                address() == that.address();\n+                unsafeGetBase() == that.unsafeGetBase() &&\n+                unsafeGetOffset() == that.unsafeGetOffset();\n@@ -458,1 +458,0 @@\n-                isNative(),\n@@ -460,4 +459,1 @@\n-                unsafeGetBase(),\n-                length,\n-                session\n-        );\n+                unsafeGetBase());\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/AbstractMemorySegmentImpl.java","additions":3,"deletions":7,"binary":false,"changes":10,"status":"modified"},{"patch":"@@ -142,0 +142,19 @@\n+    @Test\n+    public void testHashCodeOffHeap() {\n+        try (MemorySession session = MemorySession.openConfined()) {\n+            MemorySegment segment = MemorySegment.allocateNative(100, session);\n+            assertEquals(segment.hashCode(), segment.asReadOnly().hashCode());\n+            assertEquals(segment.hashCode(), segment.asSlice(0, 100).hashCode());\n+            assertEquals(segment.hashCode(), segment.asSlice(0, 90).hashCode());\n+            assertEquals(segment.hashCode(), MemorySegment.ofAddress(segment.address(), 100, MemorySession.global()).hashCode());\n+        }\n+    }\n+\n+    @Test\n+    public void testHashCodeOnHeap() {\n+        MemorySegment segment = MemorySegment.ofArray(new byte[100]);\n+        assertEquals(segment.hashCode(), segment.asReadOnly().hashCode());\n+        assertEquals(segment.hashCode(), segment.asSlice(0, 100).hashCode());\n+        assertEquals(segment.hashCode(), segment.asSlice(0, 90).hashCode());\n+    }\n+\n","filename":"test\/jdk\/java\/foreign\/TestSegments.java","additions":19,"deletions":0,"binary":false,"changes":19,"status":"modified"}]}