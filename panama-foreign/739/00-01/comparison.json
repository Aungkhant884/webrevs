{"files":[{"patch":"@@ -84,3 +84,3 @@\n-        if (state == 0 || state - ((int)ASYNC_RELEASE_COUNT.getVolatile(this)) == 0) {\n-            assert state != 0 || ((int)ASYNC_RELEASE_COUNT.getVolatile(this)) == 0\n-                    : \"if state was 0, there should be no async releases\";\n+        int asyncCount = (int)ASYNC_RELEASE_COUNT.getVolatile(this);\n+        if ((state == 0 && asyncCount == 0)\n+                || ((state - asyncCount) == 0)) {\n@@ -89,1 +89,1 @@\n-            throw alreadyAcquired(state);\n+            throw alreadyAcquired(state - asyncCount);\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/ConfinedSession.java","additions":4,"deletions":4,"binary":false,"changes":8,"status":"modified"}]}