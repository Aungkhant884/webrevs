{"files":[{"patch":"@@ -33,3 +33,2 @@\n-    private PlatformLayouts() {\n-        \/\/just the one\n-    }\n+    \/\/ Suppresses default constructor, ensuring non-instantiability.\n+    private PlatformLayouts() {}\n@@ -41,3 +40,3 @@\n-        private SysV() {\n-            \/\/just the one\n-        }\n+\n+        \/\/ Suppresses default constructor, ensuring non-instantiability.\n+        private SysV() {}\n@@ -58,1 +57,1 @@\n-        public static final ValueLayout.OfShort C_SHORT = ValueLayout.JAVA_SHORT.withBitAlignment(16);\n+        public static final ValueLayout.OfShort C_SHORT = ValueLayout.JAVA_SHORT;\n@@ -63,1 +62,1 @@\n-        public static final ValueLayout.OfInt C_INT = ValueLayout.JAVA_INT.withBitAlignment(32);\n+        public static final ValueLayout.OfInt C_INT = ValueLayout.JAVA_INT;\n@@ -68,1 +67,1 @@\n-        public static final ValueLayout.OfLong C_LONG = ValueLayout.JAVA_LONG.withBitAlignment(64);\n+        public static final ValueLayout.OfLong C_LONG = ValueLayout.JAVA_LONG;\n@@ -73,1 +72,1 @@\n-        public static final ValueLayout.OfLong C_LONG_LONG = ValueLayout.JAVA_LONG.withBitAlignment(64);\n+        public static final ValueLayout.OfLong C_LONG_LONG = ValueLayout.JAVA_LONG;\n@@ -78,1 +77,1 @@\n-        public static final ValueLayout.OfFloat C_FLOAT = ValueLayout.JAVA_FLOAT.withBitAlignment(32);\n+        public static final ValueLayout.OfFloat C_FLOAT = ValueLayout.JAVA_FLOAT;\n@@ -83,1 +82,1 @@\n-        public static final ValueLayout.OfDouble C_DOUBLE = ValueLayout.JAVA_DOUBLE.withBitAlignment(64);\n+        public static final ValueLayout.OfDouble C_DOUBLE = ValueLayout.JAVA_DOUBLE;\n@@ -88,2 +87,1 @@\n-        public static final ValueLayout.OfAddress C_POINTER = ValueLayout.ADDRESS.withBitAlignment(64)\n-                .withTargetLayout(MemoryLayout.sequenceLayout(C_CHAR));\n+        public static final ValueLayout.OfAddress C_POINTER = cPointer(C_CHAR);\n@@ -91,4 +89,0 @@\n-        \/**\n-         * The {@code va_list} native type, as it is passed to a function.\n-         *\/\n-        public static final ValueLayout.OfAddress C_VA_LIST = SysV.C_POINTER;\n@@ -102,3 +96,2 @@\n-        private Win64() {\n-            \/\/just the one\n-        }\n+        \/\/ Suppresses default constructor, ensuring non-instantiability.\n+        private Win64() {}\n@@ -119,1 +112,1 @@\n-        public static final ValueLayout.OfShort C_SHORT = ValueLayout.JAVA_SHORT.withBitAlignment(16);\n+        public static final ValueLayout.OfShort C_SHORT = ValueLayout.JAVA_SHORT;\n@@ -124,1 +117,1 @@\n-        public static final ValueLayout.OfInt C_INT = ValueLayout.JAVA_INT.withBitAlignment(32);\n+        public static final ValueLayout.OfInt C_INT = ValueLayout.JAVA_INT;\n@@ -128,1 +121,1 @@\n-        public static final ValueLayout.OfInt C_LONG = ValueLayout.JAVA_INT.withBitAlignment(32);\n+        public static final ValueLayout.OfInt C_LONG = ValueLayout.JAVA_INT;\n@@ -133,1 +126,1 @@\n-        public static final ValueLayout.OfLong C_LONG_LONG = ValueLayout.JAVA_LONG.withBitAlignment(64);\n+        public static final ValueLayout.OfLong C_LONG_LONG = ValueLayout.JAVA_LONG;\n@@ -138,1 +131,1 @@\n-        public static final ValueLayout.OfFloat C_FLOAT = ValueLayout.JAVA_FLOAT.withBitAlignment(32);\n+        public static final ValueLayout.OfFloat C_FLOAT = ValueLayout.JAVA_FLOAT;\n@@ -143,1 +136,1 @@\n-        public static final ValueLayout.OfDouble C_DOUBLE = ValueLayout.JAVA_DOUBLE.withBitAlignment(64);\n+        public static final ValueLayout.OfDouble C_DOUBLE = ValueLayout.JAVA_DOUBLE;\n@@ -148,2 +141,1 @@\n-        public static final ValueLayout.OfAddress C_POINTER = ValueLayout.ADDRESS.withBitAlignment(64)\n-                .withTargetLayout(MemoryLayout.sequenceLayout(C_CHAR));\n+        public static final ValueLayout.OfAddress C_POINTER = cPointer(C_CHAR);\n@@ -151,4 +143,0 @@\n-        \/**\n-         * The {@code va_list} native type, as it is passed to a function.\n-         *\/\n-        public static final ValueLayout.OfAddress C_VA_LIST = Win64.C_POINTER;\n@@ -162,3 +150,2 @@\n-        private AArch64() {\n-            \/\/just the one\n-        }\n+        \/\/ Suppresses default constructor, ensuring non-instantiability.\n+        private AArch64() {}\n@@ -179,1 +166,1 @@\n-        public static final ValueLayout.OfShort C_SHORT = ValueLayout.JAVA_SHORT.withBitAlignment(16);\n+        public static final ValueLayout.OfShort C_SHORT = ValueLayout.JAVA_SHORT;\n@@ -184,1 +171,1 @@\n-        public static final ValueLayout.OfInt C_INT = ValueLayout.JAVA_INT.withBitAlignment(32);\n+        public static final ValueLayout.OfInt C_INT = ValueLayout.JAVA_INT;\n@@ -189,1 +176,1 @@\n-        public static final ValueLayout.OfLong C_LONG = ValueLayout.JAVA_LONG.withBitAlignment(64);\n+        public static final ValueLayout.OfLong C_LONG = ValueLayout.JAVA_LONG;\n@@ -194,1 +181,1 @@\n-        public static final ValueLayout.OfLong C_LONG_LONG = ValueLayout.JAVA_LONG.withBitAlignment(64);\n+        public static final ValueLayout.OfLong C_LONG_LONG = ValueLayout.JAVA_LONG;\n@@ -199,1 +186,1 @@\n-        public static final ValueLayout.OfFloat C_FLOAT = ValueLayout.JAVA_FLOAT.withBitAlignment(32);\n+        public static final ValueLayout.OfFloat C_FLOAT = ValueLayout.JAVA_FLOAT;\n@@ -204,1 +191,1 @@\n-        public static final ValueLayout.OfDouble C_DOUBLE = ValueLayout.JAVA_DOUBLE.withBitAlignment(64);\n+        public static final ValueLayout.OfDouble C_DOUBLE = ValueLayout.JAVA_DOUBLE;\n@@ -209,2 +196,1 @@\n-        public static final ValueLayout.OfAddress C_POINTER = ValueLayout.ADDRESS.withBitAlignment(64)\n-                .withTargetLayout(MemoryLayout.sequenceLayout(C_CHAR));\n+        public static final ValueLayout.OfAddress C_POINTER = cPointer(C_CHAR);\n@@ -212,4 +198,0 @@\n-        \/**\n-         * The {@code va_list} native type, as it is passed to a function.\n-         *\/\n-        public static final ValueLayout.OfAddress C_VA_LIST = AArch64.C_POINTER;\n@@ -219,3 +201,3 @@\n-        private RISCV64() {\n-            \/\/just the one\n-        }\n+\n+        \/\/ Suppresses default constructor, ensuring non-instantiability.\n+        private RISCV64() {}\n@@ -236,1 +218,1 @@\n-        public static final ValueLayout.OfShort C_SHORT = ValueLayout.JAVA_SHORT.withBitAlignment(16);\n+        public static final ValueLayout.OfShort C_SHORT = ValueLayout.JAVA_SHORT;\n@@ -241,1 +223,1 @@\n-        public static final ValueLayout.OfInt C_INT = ValueLayout.JAVA_INT.withBitAlignment(32);\n+        public static final ValueLayout.OfInt C_INT = ValueLayout.JAVA_INT;\n@@ -246,1 +228,1 @@\n-        public static final ValueLayout.OfLong C_LONG = ValueLayout.JAVA_LONG.withBitAlignment(64);\n+        public static final ValueLayout.OfLong C_LONG = ValueLayout.JAVA_LONG;\n@@ -251,1 +233,1 @@\n-        public static final ValueLayout.OfLong C_LONG_LONG = ValueLayout.JAVA_LONG.withBitAlignment(64);\n+        public static final ValueLayout.OfLong C_LONG_LONG = ValueLayout.JAVA_LONG;\n@@ -256,1 +238,1 @@\n-        public static final ValueLayout.OfFloat C_FLOAT = ValueLayout.JAVA_FLOAT.withBitAlignment(32);\n+        public static final ValueLayout.OfFloat C_FLOAT = ValueLayout.JAVA_FLOAT;\n@@ -261,1 +243,1 @@\n-        public static final ValueLayout.OfDouble C_DOUBLE = ValueLayout.JAVA_DOUBLE.withBitAlignment(64);\n+        public static final ValueLayout.OfDouble C_DOUBLE = ValueLayout.JAVA_DOUBLE;\n@@ -266,2 +248,1 @@\n-        public static final ValueLayout.OfAddress C_POINTER = ValueLayout.ADDRESS.withBitAlignment(64)\n-                .withTargetLayout(MemoryLayout.sequenceLayout(C_CHAR));\n+        public static final ValueLayout.OfAddress C_POINTER = cPointer(C_CHAR);\n@@ -269,4 +250,0 @@\n-        \/**\n-         * The {@code va_list} native type, as it is passed to a function.\n-         *\/\n-        public static final ValueLayout.OfAddress C_VA_LIST = RISCV64.C_POINTER;\n@@ -274,0 +251,7 @@\n+\n+    private static ValueLayout.OfAddress cPointer(ValueLayout targetLayoutElementLayout) {\n+        return ValueLayout.ADDRESS\n+                .withBitAlignment(64)\n+                .withTargetLayout(MemoryLayout.sequenceLayout(targetLayoutElementLayout));\n+    }\n+\n","filename":"src\/java.base\/share\/classes\/jdk\/internal\/foreign\/PlatformLayouts.java","additions":47,"deletions":63,"binary":false,"changes":110,"status":"modified"}]}